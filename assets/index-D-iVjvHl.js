(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();function h0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function X_(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),r}var xh={exports:{}},Cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em;function Q_(){if(Em)return Cl;Em=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:e,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Cl.Fragment=t,Cl.jsx=r,Cl.jsxs=r,Cl}var km;function J_(){return km||(km=1,xh.exports=Q_()),xh.exports}var a=J_(),mh={exports:{}},Ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function Z_(){if(Cm)return Ft;Cm=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function S(B,K,E){this.props=B,this.context=K,this.refs=_,this.updater=E||b}S.prototype.isReactComponent={},S.prototype.setState=function(B,K){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,K,"setState")},S.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function N(){}N.prototype=S.prototype;function R(B,K,E){this.props=B,this.context=K,this.refs=_,this.updater=E||b}var I=R.prototype=new N;I.constructor=R,w(I,S.prototype),I.isPureReactComponent=!0;var G=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},ie=Object.prototype.hasOwnProperty;function q(B,K,E,L,z,Y){return E=Y.ref,{$$typeof:e,type:B,key:K,ref:E!==void 0?E:null,props:Y}}function P(B,K){return q(B.type,K,void 0,void 0,void 0,B.props)}function te(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function ue(B){var K={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(E){return K[E]})}var X=/\/+/g;function fe(B,K){return typeof B=="object"&&B!==null&&B.key!=null?ue(""+B.key):K.toString(36)}function J(){}function Q(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(J,J):(B.status="pending",B.then(function(K){B.status==="pending"&&(B.status="fulfilled",B.value=K)},function(K){B.status==="pending"&&(B.status="rejected",B.reason=K)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function oe(B,K,E,L,z){var Y=typeof B;(Y==="undefined"||Y==="boolean")&&(B=null);var me=!1;if(B===null)me=!0;else switch(Y){case"bigint":case"string":case"number":me=!0;break;case"object":switch(B.$$typeof){case e:case t:me=!0;break;case x:return me=B._init,oe(me(B._payload),K,E,L,z)}}if(me)return z=z(B),me=L===""?"."+fe(B,0):L,G(z)?(E="",me!=null&&(E=me.replace(X,"$&/")+"/"),oe(z,K,E,"",function(Ce){return Ce})):z!=null&&(te(z)&&(z=P(z,E+(z.key==null||B&&B.key===z.key?"":(""+z.key).replace(X,"$&/")+"/")+me)),K.push(z)),1;me=0;var Me=L===""?".":L+":";if(G(B))for(var He=0;He<B.length;He++)L=B[He],Y=Me+fe(L,He),me+=oe(L,K,E,Y,z);else if(He=v(B),typeof He=="function")for(B=He.call(B),He=0;!(L=B.next()).done;)L=L.value,Y=Me+fe(L,He++),me+=oe(L,K,E,Y,z);else if(Y==="object"){if(typeof B.then=="function")return oe(Q(B),K,E,L,z);throw K=String(B),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return me}function re(B,K,E){if(B==null)return B;var L=[],z=0;return oe(B,L,"","",function(Y){return K.call(E,Y,z++)}),L}function ye(B){if(B._status===-1){var K=B._result;K=K(),K.then(function(E){(B._status===0||B._status===-1)&&(B._status=1,B._result=E)},function(E){(B._status===0||B._status===-1)&&(B._status=2,B._result=E)}),B._status===-1&&(B._status=0,B._result=K)}if(B._status===1)return B._result.default;throw B._result}var le=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Ae(){}return Ft.Children={map:re,forEach:function(B,K,E){re(B,function(){K.apply(this,arguments)},E)},count:function(B){var K=0;return re(B,function(){K++}),K},toArray:function(B){return re(B,function(K){return K})||[]},only:function(B){if(!te(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ft.Component=S,Ft.Fragment=r,Ft.Profiler=o,Ft.PureComponent=R,Ft.StrictMode=s,Ft.Suspense=h,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(B){return Z.H.useMemoCache(B)}},Ft.cache=function(B){return function(){return B.apply(null,arguments)}},Ft.cloneElement=function(B,K,E){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var L=w({},B.props),z=B.key,Y=void 0;if(K!=null)for(me in K.ref!==void 0&&(Y=void 0),K.key!==void 0&&(z=""+K.key),K)!ie.call(K,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&K.ref===void 0||(L[me]=K[me]);var me=arguments.length-2;if(me===1)L.children=E;else if(1<me){for(var Me=Array(me),He=0;He<me;He++)Me[He]=arguments[He+2];L.children=Me}return q(B.type,z,void 0,void 0,Y,L)},Ft.createContext=function(B){return B={$$typeof:d,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:c,_context:B},B},Ft.createElement=function(B,K,E){var L,z={},Y=null;if(K!=null)for(L in K.key!==void 0&&(Y=""+K.key),K)ie.call(K,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(z[L]=K[L]);var me=arguments.length-2;if(me===1)z.children=E;else if(1<me){for(var Me=Array(me),He=0;He<me;He++)Me[He]=arguments[He+2];z.children=Me}if(B&&B.defaultProps)for(L in me=B.defaultProps,me)z[L]===void 0&&(z[L]=me[L]);return q(B,Y,void 0,void 0,null,z)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(B){return{$$typeof:f,render:B}},Ft.isValidElement=te,Ft.lazy=function(B){return{$$typeof:x,_payload:{_status:-1,_result:B},_init:ye}},Ft.memo=function(B,K){return{$$typeof:p,type:B,compare:K===void 0?null:K}},Ft.startTransition=function(B){var K=Z.T,E={};Z.T=E;try{var L=B(),z=Z.S;z!==null&&z(E,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(Ae,le)}catch(Y){le(Y)}finally{Z.T=K}},Ft.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},Ft.use=function(B){return Z.H.use(B)},Ft.useActionState=function(B,K,E){return Z.H.useActionState(B,K,E)},Ft.useCallback=function(B,K){return Z.H.useCallback(B,K)},Ft.useContext=function(B){return Z.H.useContext(B)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(B,K){return Z.H.useDeferredValue(B,K)},Ft.useEffect=function(B,K,E){var L=Z.H;if(typeof E=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return L.useEffect(B,K)},Ft.useId=function(){return Z.H.useId()},Ft.useImperativeHandle=function(B,K,E){return Z.H.useImperativeHandle(B,K,E)},Ft.useInsertionEffect=function(B,K){return Z.H.useInsertionEffect(B,K)},Ft.useLayoutEffect=function(B,K){return Z.H.useLayoutEffect(B,K)},Ft.useMemo=function(B,K){return Z.H.useMemo(B,K)},Ft.useOptimistic=function(B,K){return Z.H.useOptimistic(B,K)},Ft.useReducer=function(B,K,E){return Z.H.useReducer(B,K,E)},Ft.useRef=function(B){return Z.H.useRef(B)},Ft.useState=function(B){return Z.H.useState(B)},Ft.useSyncExternalStore=function(B,K,E){return Z.H.useSyncExternalStore(B,K,E)},Ft.useTransition=function(){return Z.H.useTransition()},Ft.version="19.1.1",Ft}var Am;function p0(){return Am||(Am=1,mh.exports=Z_()),mh.exports}var j=p0();const gy=h0(j);var yh={exports:{}},Al={},vh={exports:{}},bh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function eS(){return Nm||(Nm=1,(function(e){function t(re,ye){var le=re.length;re.push(ye);e:for(;0<le;){var Ae=le-1>>>1,B=re[Ae];if(0<o(B,ye))re[Ae]=ye,re[le]=B,le=Ae;else break e}}function r(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var ye=re[0],le=re.pop();if(le!==ye){re[0]=le;e:for(var Ae=0,B=re.length,K=B>>>1;Ae<K;){var E=2*(Ae+1)-1,L=re[E],z=E+1,Y=re[z];if(0>o(L,le))z<B&&0>o(Y,L)?(re[Ae]=Y,re[z]=le,Ae=z):(re[Ae]=L,re[E]=le,Ae=E);else if(z<B&&0>o(Y,le))re[Ae]=Y,re[z]=le,Ae=z;else break e}}return ye}function o(re,ye){var le=re.sortIndex-ye.sortIndex;return le!==0?le:re.id-ye.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var h=[],p=[],x=1,y=null,v=3,b=!1,w=!1,_=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function G(re){for(var ye=r(p);ye!==null;){if(ye.callback===null)s(p);else if(ye.startTime<=re)s(p),ye.sortIndex=ye.expirationTime,t(h,ye);else break;ye=r(p)}}function Z(re){if(_=!1,G(re),!w)if(r(h)!==null)w=!0,ie||(ie=!0,fe());else{var ye=r(p);ye!==null&&oe(Z,ye.startTime-re)}}var ie=!1,q=-1,P=5,te=-1;function ue(){return S?!0:!(e.unstable_now()-te<P)}function X(){if(S=!1,ie){var re=e.unstable_now();te=re;var ye=!0;try{e:{w=!1,_&&(_=!1,R(q),q=-1),b=!0;var le=v;try{t:{for(G(re),y=r(h);y!==null&&!(y.expirationTime>re&&ue());){var Ae=y.callback;if(typeof Ae=="function"){y.callback=null,v=y.priorityLevel;var B=Ae(y.expirationTime<=re);if(re=e.unstable_now(),typeof B=="function"){y.callback=B,G(re),ye=!0;break t}y===r(h)&&s(h),G(re)}else s(h);y=r(h)}if(y!==null)ye=!0;else{var K=r(p);K!==null&&oe(Z,K.startTime-re),ye=!1}}break e}finally{y=null,v=le,b=!1}ye=void 0}}finally{ye?fe():ie=!1}}}var fe;if(typeof I=="function")fe=function(){I(X)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Q=J.port2;J.port1.onmessage=X,fe=function(){Q.postMessage(null)}}else fe=function(){N(X,0)};function oe(re,ye){q=N(function(){re(e.unstable_now())},ye)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(re){switch(v){case 1:case 2:case 3:var ye=3;break;default:ye=v}var le=v;v=ye;try{return re()}finally{v=le}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(re,ye){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var le=v;v=re;try{return ye()}finally{v=le}},e.unstable_scheduleCallback=function(re,ye,le){var Ae=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Ae+le:Ae):le=Ae,re){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=le+B,re={id:x++,callback:ye,priorityLevel:re,startTime:le,expirationTime:B,sortIndex:-1},le>Ae?(re.sortIndex=le,t(p,re),r(h)===null&&re===r(p)&&(_?(R(q),q=-1):_=!0,oe(Z,le-Ae))):(re.sortIndex=B,t(h,re),w||b||(w=!0,ie||(ie=!0,fe()))),re},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(re){var ye=v;return function(){var le=v;v=ye;try{return re.apply(this,arguments)}finally{v=le}}}})(bh)),bh}var Rm;function tS(){return Rm||(Rm=1,vh.exports=eS()),vh.exports}var _h={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function rS(){if(Dm)return yn;Dm=1;var e=p0();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(h,p,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:h,containerInfo:p,implementation:x}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,yn.createPortal=function(h,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(h,p,null,x)},yn.flushSync=function(h){var p=d.T,x=s.p;try{if(d.T=null,s.p=2,h)return h()}finally{d.T=p,s.p=x,s.d.f()}},yn.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(h,p))},yn.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},yn.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var x=p.as,y=f(x,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?s.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:b}):x==="script"&&s.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},yn.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=f(p.as,p.crossOrigin);s.d.M(h,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(h)},yn.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,y=f(x,p.crossOrigin);s.d.L(h,x,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},yn.preloadModule=function(h,p){if(typeof h=="string")if(p){var x=f(p.as,p.crossOrigin);s.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(h)},yn.requestFormReset=function(h){s.d.r(h)},yn.unstable_batchedUpdates=function(h,p){return h(p)},yn.useFormState=function(h,p,x){return d.H.useFormState(h,p,x)},yn.useFormStatus=function(){return d.H.useHostTransitionStatus()},yn.version="19.1.1",yn}var Om;function nS(){if(Om)return _h.exports;Om=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_h.exports=rS(),_h.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function sS(){if(Im)return Al;Im=1;var e=tS(),t=p0(),r=nS();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(c(n)!==n)throw Error(s(188))}function h(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(s(188));return i!==n?null:n}for(var l=n,u=i;;){var g=l.return;if(g===null)break;var m=g.alternate;if(m===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===l)return f(g),n;if(m===u)return f(g),i;m=m.sibling}throw Error(s(188))}if(l.return!==u.return)l=g,u=m;else{for(var T=!1,O=g.child;O;){if(O===l){T=!0,l=g,u=m;break}if(O===u){T=!0,u=g,l=m;break}O=O.sibling}if(!T){for(O=m.child;O;){if(O===l){T=!0,l=m,u=g;break}if(O===u){T=!0,u=m,l=g;break}O=O.sibling}if(!T)throw Error(s(189))}}if(l.alternate!==u)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var x=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),I=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function fe(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var J=Symbol.for("react.client.reference");function Q(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===J?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case S:return"Profiler";case _:return"StrictMode";case Z:return"Suspense";case ie:return"SuspenseList";case te:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case I:return(n.displayName||"Context")+".Provider";case R:return(n._context.displayName||"Context")+".Consumer";case G:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case q:return i=n.displayName||null,i!==null?i:Q(n.type)||"Memo";case P:i=n._payload,n=n._init;try{return Q(n(i))}catch{}}return null}var oe=Array.isArray,re=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Ae=[],B=-1;function K(n){return{current:n}}function E(n){0>B||(n.current=Ae[B],Ae[B]=null,B--)}function L(n,i){B++,Ae[B]=n.current,n.current=i}var z=K(null),Y=K(null),me=K(null),Me=K(null);function He(n,i){switch(L(me,i),L(Y,n),L(z,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?em(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=em(i),n=tm(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}E(z),L(z,n)}function Ce(){E(z),E(Y),E(me)}function ne(n){n.memoizedState!==null&&L(Me,n);var i=z.current,l=tm(i,n.type);i!==l&&(L(Y,n),L(z,l))}function Pe(n){Y.current===n&&(E(z),E(Y)),Me.current===n&&(E(Me),wl._currentValue=le)}var $e=Object.prototype.hasOwnProperty,rt=e.unstable_scheduleCallback,V=e.unstable_cancelCallback,Ne=e.unstable_shouldYield,st=e.unstable_requestPaint,Re=e.unstable_now,ht=e.unstable_getCurrentPriorityLevel,xt=e.unstable_ImmediatePriority,Dt=e.unstable_UserBlockingPriority,bt=e.unstable_NormalPriority,Ie=e.unstable_LowPriority,nt=e.unstable_IdlePriority,vt=e.log,er=e.unstable_setDisableYieldValue,br=null,Pt=null;function ce(n){if(typeof vt=="function"&&er(n),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(br,n)}catch{}}var Ge=Math.clz32?Math.clz32:lr,gt=Math.log,It=Math.LN2;function lr(n){return n>>>=0,n===0?32:31-(gt(n)/It|0)|0}var Cr=256,wr=4194304;function nr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rr(n,i,l){var u=n.pendingLanes;if(u===0)return 0;var g=0,m=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var O=u&134217727;return O!==0?(u=O&~m,u!==0?g=nr(u):(T&=O,T!==0?g=nr(T):l||(l=O&~n,l!==0&&(g=nr(l))))):(O=u&~m,O!==0?g=nr(O):T!==0?g=nr(T):l||(l=u&~n,l!==0&&(g=nr(l)))),g===0?0:i!==0&&i!==g&&(i&m)===0&&(m=g&-g,l=i&-i,m>=l||m===32&&(l&4194048)!==0)?i:g}function $t(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function or(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function se(){var n=Cr;return Cr<<=1,(Cr&4194048)===0&&(Cr=256),n}function Ee(){var n=wr;return wr<<=1,(wr&62914560)===0&&(wr=4194304),n}function mt(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function Rt(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function sr(n,i,l,u,g,m){var T=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var O=n.entanglements,ee=n.expirationTimes,_e=n.hiddenUpdates;for(l=T&~l;0<l;){var Fe=31-Ge(l),ze=1<<Fe;O[Fe]=0,ee[Fe]=-1;var Te=_e[Fe];if(Te!==null)for(_e[Fe]=null,Fe=0;Fe<Te.length;Fe++){var je=Te[Fe];je!==null&&(je.lane&=-536870913)}l&=~ze}u!==0&&at(n,u,0),m!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=m&~(T&~i))}function at(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-Ge(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|l&4194090}function At(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var u=31-Ge(l),g=1<<u;g&i|n[u]&i&&(n[u]|=i),l&=~g}}function Ot(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function wn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Er(){var n=ye.p;return n!==0?n:(n=window.event,n===void 0?32:bm(n.type))}function Tn(n,i){var l=ye.p;try{return ye.p=n,i()}finally{ye.p=l}}var Yt=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Yt,gr="__reactProps$"+Yt,Wn="__reactContainer$"+Yt,ps="__reactEvents$"+Yt,qn="__reactListeners$"+Yt,A="__reactHandles$"+Yt,U="__reactResources$"+Yt,M="__reactMarker$"+Yt;function F(n){delete n[Nt],delete n[gr],delete n[ps],delete n[qn],delete n[A]}function W(n){var i=n[Nt];if(i)return i;for(var l=n.parentNode;l;){if(i=l[Wn]||l[Nt]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=am(n);n!==null;){if(l=n[Nt])return l;n=am(n)}return i}n=l,l=n.parentNode}return null}function H(n){if(n=n[Nt]||n[Wn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function be(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function De(n){var i=n[U];return i||(i=n[U]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function pe(n){n[M]=!0}var Se=new Set,we={};function We(n,i){Ke(n,i),Ke(n+"Capture",i)}function Ke(n,i){for(we[n]=i,n=0;n<i.length;n++)Se.add(i[n])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ve={},tt={};function St(n){return $e.call(tt,n)?!0:$e.call(Ve,n)?!1:it.test(n)?tt[n]=!0:(Ve[n]=!0,!1)}function Kt(n,i,l){if(St(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function Qt(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function Jt(n,i,l,u){if(u===null)n.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+u)}}var jn,k;function de(n){if(jn===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);jn=i&&i[1]||"",k=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jn+n+k}var ke=!1;function dt(n,i){if(!n||ke)return"";ke=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(je){var Te=je}Reflect.construct(n,[],ze)}else{try{ze.call()}catch(je){Te=je}n.call(ze.prototype)}}else{try{throw Error()}catch(je){Te=je}(ze=n())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(je){if(je&&Te&&typeof je.stack=="string")return[je.stack,Te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),T=m[0],O=m[1];if(T&&O){var ee=T.split(`
`),_e=O.split(`
`);for(g=u=0;u<ee.length&&!ee[u].includes("DetermineComponentFrameRoot");)u++;for(;g<_e.length&&!_e[g].includes("DetermineComponentFrameRoot");)g++;if(u===ee.length||g===_e.length)for(u=ee.length-1,g=_e.length-1;1<=u&&0<=g&&ee[u]!==_e[g];)g--;for(;1<=u&&0<=g;u--,g--)if(ee[u]!==_e[g]){if(u!==1||g!==1)do if(u--,g--,0>g||ee[u]!==_e[g]){var Fe=`
`+ee[u].replace(" at new "," at ");return n.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",n.displayName)),Fe}while(1<=u&&0<=g);break}}}finally{ke=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?de(l):""}function _t(n){switch(n.tag){case 26:case 27:case 5:return de(n.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 15:return dt(n.type,!1);case 11:return dt(n.type.render,!1);case 1:return dt(n.type,!0);case 31:return de("Activity");default:return""}}function wt(n){try{var i="";do i+=_t(n),n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function lt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function jt(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Et(n){var i=jt(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,m=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(T){u=""+T,m.call(this,T)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function zt(n){n._valueTracker||(n._valueTracker=Et(n))}function Lr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return n&&(u=jt(n)?n.checked?"true":"false":n.value),n=u,n!==l?(i.setValue(n),!0):!1}function _r(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var En=/[\n"\\]/g;function C(n){return n.replace(En,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ge(n,i,l,u,g,m,T,O){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),i!=null?T==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+lt(i)):n.value!==""+lt(i)&&(n.value=""+lt(i)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),i!=null?Je(n,T,lt(i)):l!=null?Je(n,T,lt(l)):u!=null&&n.removeAttribute("value"),g==null&&m!=null&&(n.defaultChecked=!!m),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?n.name=""+lt(O):n.removeAttribute("name")}function Xe(n,i,l,u,g,m,T,O){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;l=l!=null?""+lt(l):"",i=i!=null?""+lt(i):l,O||i===n.value||(n.value=i),n.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=O?n.checked:!!u,n.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T)}function Je(n,i,l){i==="number"&&_r(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Ye(n,i,l,u){if(n=n.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=i.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&u&&(n[l].defaultSelected=!0)}else{for(l=""+lt(l),i=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function Qe(n,i,l){if(i!=null&&(i=""+lt(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+lt(l):""}function ct(n,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(s(92));if(oe(u)){if(1<u.length)throw Error(s(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=lt(i),n.defaultValue=l,u=n.textContent,u===l&&u!==""&&u!==null&&(n.value=u)}function ft(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Zt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mt(n,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,l):typeof l!="number"||l===0||Zt.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function Wt(n,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&l[g]!==u&&Mt(n,g,u)}else for(var m in i)i.hasOwnProperty(m)&&Mt(n,m,i[m])}function Pr(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var In=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uc(n){return Kb.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var gu=null;function xu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ji=null,Ei=null;function rp(n){var i=H(n);if(i&&(n=i.stateNode)){var l=n[gr]||null;e:switch(n=i.stateNode,i.type){case"input":if(ge(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+C(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==n&&u.form===n.form){var g=u[gr]||null;if(!g)throw Error(s(90));ge(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===n.form&&Lr(u)}break e;case"textarea":Qe(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Ye(n,!!l.multiple,i,!1)}}}var mu=!1;function np(n,i,l){if(mu)return n(i,l);mu=!0;try{var u=n(i);return u}finally{if(mu=!1,(ji!==null||Ei!==null)&&(Xc(),ji&&(i=ji,n=Ei,Ei=ji=null,rp(i),n)))for(i=0;i<n.length;i++)rp(n[i])}}function Mo(n,i){var l=n.stateNode;if(l===null)return null;var u=l[gr]||null;if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yu=!1;if(Ls)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){yu=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{yu=!1}var ca=null,vu=null,fc=null;function sp(){if(fc)return fc;var n,i=vu,l=i.length,u,g="value"in ca?ca.value:ca.textContent,m=g.length;for(n=0;n<l&&i[n]===g[n];n++);var T=l-n;for(u=1;u<=T&&i[l-u]===g[m-u];u++);return fc=g.slice(n,1<u?1-u:void 0)}function hc(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function pc(){return!0}function ap(){return!1}function Bn(n){function i(l,u,g,m,T){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var O in n)n.hasOwnProperty(O)&&(l=n[O],this[O]=l?l(m):m[O]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?pc:ap,this.isPropagationStopped=ap,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=pc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=pc)},persist:function(){},isPersistent:pc}),i}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gc=Bn(Ha),Lo=x({},Ha,{view:0,detail:0}),Xb=Bn(Lo),bu,_u,Po,xc=x({},Lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Po&&(Po&&n.type==="mousemove"?(bu=n.screenX-Po.screenX,_u=n.screenY-Po.screenY):_u=bu=0,Po=n),bu)},movementY:function(n){return"movementY"in n?n.movementY:_u}}),ip=Bn(xc),Qb=x({},xc,{dataTransfer:0}),Jb=Bn(Qb),Zb=x({},Lo,{relatedTarget:0}),Su=Bn(Zb),e2=x({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),t2=Bn(e2),r2=x({},Ha,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),n2=Bn(r2),s2=x({},Ha,{data:0}),op=Bn(s2),a2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l2(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=o2[n])?!!i[n]:!1}function wu(){return l2}var c2=x({},Lo,{key:function(n){if(n.key){var i=a2[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=hc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?i2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wu,charCode:function(n){return n.type==="keypress"?hc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?hc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),d2=Bn(c2),u2=x({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lp=Bn(u2),f2=x({},Lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wu}),h2=Bn(f2),p2=x({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),g2=Bn(p2),x2=x({},xc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),m2=Bn(x2),y2=x({},Ha,{newState:0,oldState:0}),v2=Bn(y2),b2=[9,13,27,32],Tu=Ls&&"CompositionEvent"in window,zo=null;Ls&&"documentMode"in document&&(zo=document.documentMode);var _2=Ls&&"TextEvent"in window&&!zo,cp=Ls&&(!Tu||zo&&8<zo&&11>=zo),dp=" ",up=!1;function fp(n,i){switch(n){case"keyup":return b2.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ki=!1;function S2(n,i){switch(n){case"compositionend":return hp(i);case"keypress":return i.which!==32?null:(up=!0,dp);case"textInput":return n=i.data,n===dp&&up?null:n;default:return null}}function w2(n,i){if(ki)return n==="compositionend"||!Tu&&fp(n,i)?(n=sp(),fc=vu=ca=null,ki=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return cp&&i.locale!=="ko"?null:i.data;default:return null}}var T2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!T2[n.type]:i==="textarea"}function gp(n,i,l,u){ji?Ei?Ei.push(u):Ei=[u]:ji=u,i=rd(i,"onChange"),0<i.length&&(l=new gc("onChange","change",null,l,u),n.push({event:l,listeners:i}))}var Uo=null,Wo=null;function j2(n){Kx(n,0)}function mc(n){var i=be(n);if(Lr(i))return n}function xp(n,i){if(n==="change")return i}var mp=!1;if(Ls){var ju;if(Ls){var Eu="oninput"in document;if(!Eu){var yp=document.createElement("div");yp.setAttribute("oninput","return;"),Eu=typeof yp.oninput=="function"}ju=Eu}else ju=!1;mp=ju&&(!document.documentMode||9<document.documentMode)}function vp(){Uo&&(Uo.detachEvent("onpropertychange",bp),Wo=Uo=null)}function bp(n){if(n.propertyName==="value"&&mc(Wo)){var i=[];gp(i,Wo,n,xu(n)),np(j2,i)}}function E2(n,i,l){n==="focusin"?(vp(),Uo=i,Wo=l,Uo.attachEvent("onpropertychange",bp)):n==="focusout"&&vp()}function k2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return mc(Wo)}function C2(n,i){if(n==="click")return mc(i)}function A2(n,i){if(n==="input"||n==="change")return mc(i)}function N2(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var $n=typeof Object.is=="function"?Object.is:N2;function qo(n,i){if($n(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!$e.call(i,g)||!$n(n[g],i[g]))return!1}return!0}function _p(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sp(n,i){var l=_p(n);n=0;for(var u;l;){if(l.nodeType===3){if(u=n+l.textContent.length,n<=i&&u>=i)return{node:l,offset:i-n};n=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=_p(l)}}function wp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?wp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Tp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=_r(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=_r(n.document)}return i}function ku(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var R2=Ls&&"documentMode"in document&&11>=document.documentMode,Ci=null,Cu=null,$o=null,Au=!1;function jp(n,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Au||Ci==null||Ci!==_r(u)||(u=Ci,"selectionStart"in u&&ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$o&&qo($o,u)||($o=u,u=rd(Cu,"onSelect"),0<u.length&&(i=new gc("onSelect","select",null,i,l),n.push({event:i,listeners:u}),i.target=Ci)))}function Ga(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var Ai={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},Nu={},Ep={};Ls&&(Ep=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function Va(n){if(Nu[n])return Nu[n];if(!Ai[n])return n;var i=Ai[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in Ep)return Nu[n]=i[l];return n}var kp=Va("animationend"),Cp=Va("animationiteration"),Ap=Va("animationstart"),D2=Va("transitionrun"),O2=Va("transitionstart"),I2=Va("transitioncancel"),Np=Va("transitionend"),Rp=new Map,Ru="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ru.push("scrollEnd");function gs(n,i){Rp.set(n,i),We(i,[n])}var Dp=new WeakMap;function rs(n,i){if(typeof n=="object"&&n!==null){var l=Dp.get(n);return l!==void 0?l:(i={value:n,source:i,stack:wt(i)},Dp.set(n,i),i)}return{value:n,source:i,stack:wt(i)}}var ns=[],Ni=0,Du=0;function yc(){for(var n=Ni,i=Du=Ni=0;i<n;){var l=ns[i];ns[i++]=null;var u=ns[i];ns[i++]=null;var g=ns[i];ns[i++]=null;var m=ns[i];if(ns[i++]=null,u!==null&&g!==null){var T=u.pending;T===null?g.next=g:(g.next=T.next,T.next=g),u.pending=g}m!==0&&Op(l,g,m)}}function vc(n,i,l,u){ns[Ni++]=n,ns[Ni++]=i,ns[Ni++]=l,ns[Ni++]=u,Du|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ou(n,i,l,u){return vc(n,i,l,u),bc(n)}function Ri(n,i){return vc(n,null,null,i),bc(n)}function Op(n,i,l){n.lanes|=l;var u=n.alternate;u!==null&&(u.lanes|=l);for(var g=!1,m=n.return;m!==null;)m.childLanes|=l,u=m.alternate,u!==null&&(u.childLanes|=l),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(g=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,g&&i!==null&&(g=31-Ge(l),n=m.hiddenUpdates,u=n[g],u===null?n[g]=[i]:u.push(i),i.lane=l|536870912),m):null}function bc(n){if(50<gl)throw gl=0,zf=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Di={};function B2(n,i,l,u){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(n,i,l,u){return new B2(n,i,l,u)}function Iu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ps(n,i){var l=n.alternate;return l===null?(l=Hn(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Ip(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function _c(n,i,l,u,g,m){var T=0;if(u=n,typeof n=="function")Iu(n)&&(T=1);else if(typeof n=="string")T=F_(n,l,z.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case te:return n=Hn(31,l,i,g),n.elementType=te,n.lanes=m,n;case w:return Ya(l.children,g,m,i);case _:T=8,g|=24;break;case S:return n=Hn(12,l,i,g|2),n.elementType=S,n.lanes=m,n;case Z:return n=Hn(13,l,i,g),n.elementType=Z,n.lanes=m,n;case ie:return n=Hn(19,l,i,g),n.elementType=ie,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:case I:T=10;break e;case R:T=9;break e;case G:T=11;break e;case q:T=14;break e;case P:T=16,u=null;break e}T=29,l=Error(s(130,n===null?"null":typeof n,"")),u=null}return i=Hn(T,l,i,g),i.elementType=n,i.type=u,i.lanes=m,i}function Ya(n,i,l,u){return n=Hn(7,n,u,i),n.lanes=l,n}function Bu(n,i,l){return n=Hn(6,n,null,i),n.lanes=l,n}function Mu(n,i,l){return i=Hn(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Oi=[],Ii=0,Sc=null,wc=0,ss=[],as=0,Ka=null,zs=1,Us="";function Xa(n,i){Oi[Ii++]=wc,Oi[Ii++]=Sc,Sc=n,wc=i}function Bp(n,i,l){ss[as++]=zs,ss[as++]=Us,ss[as++]=Ka,Ka=n;var u=zs;n=Us;var g=32-Ge(u)-1;u&=~(1<<g),l+=1;var m=32-Ge(i)+g;if(30<m){var T=g-g%5;m=(u&(1<<T)-1).toString(32),u>>=T,g-=T,zs=1<<32-Ge(i)+g|l<<g|u,Us=m+n}else zs=1<<m|l<<g|u,Us=n}function Fu(n){n.return!==null&&(Xa(n,1),Bp(n,1,0))}function Lu(n){for(;n===Sc;)Sc=Oi[--Ii],Oi[Ii]=null,wc=Oi[--Ii],Oi[Ii]=null;for(;n===Ka;)Ka=ss[--as],ss[as]=null,Us=ss[--as],ss[as]=null,zs=ss[--as],ss[as]=null}var kn=null,Or=null,ar=!1,Qa=null,As=!1,Pu=Error(s(519));function Ja(n){var i=Error(s(418,""));throw Vo(rs(i,n)),Pu}function Mp(n){var i=n.stateNode,l=n.type,u=n.memoizedProps;switch(i[Nt]=n,i[gr]=u,l){case"dialog":Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":case"embed":Gt("load",i);break;case"video":case"audio":for(l=0;l<ml.length;l++)Gt(ml[l],i);break;case"source":Gt("error",i);break;case"img":case"image":case"link":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"input":Gt("invalid",i),Xe(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),zt(i);break;case"select":Gt("invalid",i);break;case"textarea":Gt("invalid",i),ct(i,u.value,u.defaultValue,u.children),zt(i)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||Zx(i.textContent,l)?(u.popover!=null&&(Gt("beforetoggle",i),Gt("toggle",i)),u.onScroll!=null&&Gt("scroll",i),u.onScrollEnd!=null&&Gt("scrollend",i),u.onClick!=null&&(i.onclick=nd),i=!0):i=!1,i||Ja(n)}function Fp(n){for(kn=n.return;kn;)switch(kn.tag){case 5:case 13:As=!1;return;case 27:case 3:As=!0;return;default:kn=kn.return}}function Ho(n){if(n!==kn)return!1;if(!ar)return Fp(n),ar=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||rh(n.type,n.memoizedProps)),l=!l),l&&Or&&Ja(n),Fp(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(l=n.data,l==="/$"){if(i===0){Or=ms(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++;n=n.nextSibling}Or=null}}else i===27?(i=Or,ja(n.type)?(n=ih,ih=null,Or=n):Or=i):Or=kn?ms(n.stateNode.nextSibling):null;return!0}function Go(){Or=kn=null,ar=!1}function Lp(){var n=Qa;return n!==null&&(Ln===null?Ln=n:Ln.push.apply(Ln,n),Qa=null),n}function Vo(n){Qa===null?Qa=[n]:Qa.push(n)}var zu=K(null),Za=null,Ws=null;function da(n,i,l){L(zu,i._currentValue),i._currentValue=l}function qs(n){n._currentValue=zu.current,E(zu)}function Uu(n,i,l){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===l)break;n=n.return}}function Wu(n,i,l,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var m=g.dependencies;if(m!==null){var T=g.child;m=m.firstContext;e:for(;m!==null;){var O=m;m=g;for(var ee=0;ee<i.length;ee++)if(O.context===i[ee]){m.lanes|=l,O=m.alternate,O!==null&&(O.lanes|=l),Uu(m.return,l,n),u||(T=null);break e}m=O.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(s(341));T.lanes|=l,m=T.alternate,m!==null&&(m.lanes|=l),Uu(T,l,n),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===n){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function Yo(n,i,l,u){n=null;for(var g=i,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var O=g.type;$n(g.pendingProps.value,T.value)||(n!==null?n.push(O):n=[O])}}else if(g===Me.current){if(T=g.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(wl):n=[wl])}g=g.return}n!==null&&Wu(i,n,l,u),i.flags|=262144}function Tc(n){for(n=n.firstContext;n!==null;){if(!$n(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ei(n){Za=n,Ws=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function mn(n){return Pp(Za,n)}function jc(n,i){return Za===null&&ei(n),Pp(n,i)}function Pp(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Ws===null){if(n===null)throw Error(s(308));Ws=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Ws=Ws.next=i;return l}var M2=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},F2=e.unstable_scheduleCallback,L2=e.unstable_NormalPriority,Vr={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qu(){return{controller:new M2,data:new Map,refCount:0}}function Ko(n){n.refCount--,n.refCount===0&&F2(L2,function(){n.controller.abort()})}var Xo=null,$u=0,Bi=0,Mi=null;function P2(n,i){if(Xo===null){var l=Xo=[];$u=0,Bi=Vf(),Mi={status:"pending",value:void 0,then:function(u){l.push(u)}}}return $u++,i.then(zp,zp),i}function zp(){if(--$u===0&&Xo!==null){Mi!==null&&(Mi.status="fulfilled");var n=Xo;Xo=null,Bi=0,Mi=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function z2(n,i){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<l.length;g++)(0,l[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var Up=re.S;re.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&P2(n,i),Up!==null&&Up(n,i)};var ti=K(null);function Hu(){var n=ti.current;return n!==null?n:Tr.pooledCache}function Ec(n,i){i===null?L(ti,ti.current):L(ti,i.pool)}function Wp(){var n=Hu();return n===null?null:{parent:Vr._currentValue,pool:n}}var Qo=Error(s(460)),qp=Error(s(474)),kc=Error(s(542)),Gu={then:function(){}};function $p(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Cc(){}function Hp(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(Cc,Cc),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Vp(n),n;default:if(typeof i.status=="string")i.then(Cc,Cc);else{if(n=Tr,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Vp(n),n}throw Jo=i,Qo}}var Jo=null;function Gp(){if(Jo===null)throw Error(s(459));var n=Jo;return Jo=null,n}function Vp(n){if(n===Qo||n===kc)throw Error(s(483))}var ua=!1;function Vu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yu(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function fa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ha(n,i,l){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(cr&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=bc(n),Op(n,null,l),i}return vc(n,u,i,l),bc(n)}function Zo(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,l|=u,i.lanes=l,At(n,l)}}function Ku(n,i){var l=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?g=m=T:m=m.next=T,l=l.next}while(l!==null);m===null?g=m=i:m=m.next=i}else g=m=i;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var Xu=!1;function el(){if(Xu){var n=Mi;if(n!==null)throw n}}function tl(n,i,l,u){Xu=!1;var g=n.updateQueue;ua=!1;var m=g.firstBaseUpdate,T=g.lastBaseUpdate,O=g.shared.pending;if(O!==null){g.shared.pending=null;var ee=O,_e=ee.next;ee.next=null,T===null?m=_e:T.next=_e,T=ee;var Fe=n.alternate;Fe!==null&&(Fe=Fe.updateQueue,O=Fe.lastBaseUpdate,O!==T&&(O===null?Fe.firstBaseUpdate=_e:O.next=_e,Fe.lastBaseUpdate=ee))}if(m!==null){var ze=g.baseState;T=0,Fe=_e=ee=null,O=m;do{var Te=O.lane&-536870913,je=Te!==O.lane;if(je?(Xt&Te)===Te:(u&Te)===Te){Te!==0&&Te===Bi&&(Xu=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ct=n,Tt=O;Te=i;var yr=l;switch(Tt.tag){case 1:if(Ct=Tt.payload,typeof Ct=="function"){ze=Ct.call(yr,ze,Te);break e}ze=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Tt.payload,Te=typeof Ct=="function"?Ct.call(yr,ze,Te):Ct,Te==null)break e;ze=x({},ze,Te);break e;case 2:ua=!0}}Te=O.callback,Te!==null&&(n.flags|=64,je&&(n.flags|=8192),je=g.callbacks,je===null?g.callbacks=[Te]:je.push(Te))}else je={lane:Te,tag:O.tag,payload:O.payload,callback:O.callback,next:null},Fe===null?(_e=Fe=je,ee=ze):Fe=Fe.next=je,T|=Te;if(O=O.next,O===null){if(O=g.shared.pending,O===null)break;je=O,O=je.next,je.next=null,g.lastBaseUpdate=je,g.shared.pending=null}}while(!0);Fe===null&&(ee=ze),g.baseState=ee,g.firstBaseUpdate=_e,g.lastBaseUpdate=Fe,m===null&&(g.shared.lanes=0),_a|=T,n.lanes=T,n.memoizedState=ze}}function Yp(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Kp(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Yp(l[n],i)}var Fi=K(null),Ac=K(0);function Xp(n,i){n=Xs,L(Ac,n),L(Fi,i),Xs=n|i.baseLanes}function Qu(){L(Ac,Xs),L(Fi,Fi.current)}function Ju(){Xs=Ac.current,E(Fi),E(Ac)}var pa=0,Ut=null,xr=null,Wr=null,Nc=!1,Li=!1,ri=!1,Rc=0,rl=0,Pi=null,U2=0;function zr(){throw Error(s(321))}function Zu(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!$n(n[l],i[l]))return!1;return!0}function ef(n,i,l,u,g,m){return pa=m,Ut=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,re.H=n===null||n.memoizedState===null?Og:Ig,ri=!1,m=l(u,g),ri=!1,Li&&(m=Jp(i,l,u,g)),Qp(n),m}function Qp(n){re.H=Fc;var i=xr!==null&&xr.next!==null;if(pa=0,Wr=xr=Ut=null,Nc=!1,rl=0,Pi=null,i)throw Error(s(300));n===null||en||(n=n.dependencies,n!==null&&Tc(n)&&(en=!0))}function Jp(n,i,l,u){Ut=n;var g=0;do{if(Li&&(Pi=null),rl=0,Li=!1,25<=g)throw Error(s(301));if(g+=1,Wr=xr=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}re.H=Y2,m=i(l,u)}while(Li);return m}function W2(){var n=re.H,i=n.useState()[0];return i=typeof i.then=="function"?nl(i):i,n=n.useState()[0],(xr!==null?xr.memoizedState:null)!==n&&(Ut.flags|=1024),i}function tf(){var n=Rc!==0;return Rc=0,n}function rf(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function nf(n){if(Nc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Nc=!1}pa=0,Wr=xr=Ut=null,Li=!1,rl=Rc=0,Pi=null}function Mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?Ut.memoizedState=Wr=n:Wr=Wr.next=n,Wr}function qr(){if(xr===null){var n=Ut.alternate;n=n!==null?n.memoizedState:null}else n=xr.next;var i=Wr===null?Ut.memoizedState:Wr.next;if(i!==null)Wr=i,xr=n;else{if(n===null)throw Ut.alternate===null?Error(s(467)):Error(s(310));xr=n,n={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Wr===null?Ut.memoizedState=Wr=n:Wr=Wr.next=n}return Wr}function sf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nl(n){var i=rl;return rl+=1,Pi===null&&(Pi=[]),n=Hp(Pi,n,i),i=Ut,(Wr===null?i.memoizedState:Wr.next)===null&&(i=i.alternate,re.H=i===null||i.memoizedState===null?Og:Ig),n}function Dc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return nl(n);if(n.$$typeof===I)return mn(n)}throw Error(s(438,String(n)))}function af(n){var i=null,l=Ut.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=Ut.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=sf(),Ut.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),u=0;u<n;u++)l[u]=ue;return i.index++,l}function $s(n,i){return typeof i=="function"?i(n):i}function Oc(n){var i=qr();return of(i,xr,n)}function of(n,i,l){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=l;var g=n.baseQueue,m=u.pending;if(m!==null){if(g!==null){var T=g.next;g.next=m.next,m.next=T}i.baseQueue=g=m,u.pending=null}if(m=n.baseState,g===null)n.memoizedState=m;else{i=g.next;var O=T=null,ee=null,_e=i,Fe=!1;do{var ze=_e.lane&-536870913;if(ze!==_e.lane?(Xt&ze)===ze:(pa&ze)===ze){var Te=_e.revertLane;if(Te===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),ze===Bi&&(Fe=!0);else if((pa&Te)===Te){_e=_e.next,Te===Bi&&(Fe=!0);continue}else ze={lane:0,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ee===null?(O=ee=ze,T=m):ee=ee.next=ze,Ut.lanes|=Te,_a|=Te;ze=_e.action,ri&&l(m,ze),m=_e.hasEagerState?_e.eagerState:l(m,ze)}else Te={lane:ze,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ee===null?(O=ee=Te,T=m):ee=ee.next=Te,Ut.lanes|=ze,_a|=ze;_e=_e.next}while(_e!==null&&_e!==i);if(ee===null?T=m:ee.next=O,!$n(m,n.memoizedState)&&(en=!0,Fe&&(l=Mi,l!==null)))throw l;n.memoizedState=m,n.baseState=T,n.baseQueue=ee,u.lastRenderedState=m}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function lf(n){var i=qr(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=n;var u=l.dispatch,g=l.pending,m=i.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do m=n(m,T.action),T=T.next;while(T!==g);$n(m,i.memoizedState)||(en=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),l.lastRenderedState=m}return[m,u]}function Zp(n,i,l){var u=Ut,g=qr(),m=ar;if(m){if(l===void 0)throw Error(s(407));l=l()}else l=i();var T=!$n((xr||g).memoizedState,l);T&&(g.memoizedState=l,en=!0),g=g.queue;var O=rg.bind(null,u,g,n);if(sl(2048,8,O,[n]),g.getSnapshot!==i||T||Wr!==null&&Wr.memoizedState.tag&1){if(u.flags|=2048,zi(9,Ic(),tg.bind(null,u,g,l,i),null),Tr===null)throw Error(s(349));m||(pa&124)!==0||eg(u,i,l)}return l}function eg(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=Ut.updateQueue,i===null?(i=sf(),Ut.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function tg(n,i,l,u){i.value=l,i.getSnapshot=u,ng(i)&&sg(n)}function rg(n,i,l){return l(function(){ng(i)&&sg(n)})}function ng(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!$n(n,l)}catch{return!0}}function sg(n){var i=Ri(n,2);i!==null&&Xn(i,n,2)}function cf(n){var i=Mn();if(typeof n=="function"){var l=n;if(n=l(),ri){ce(!0);try{l()}finally{ce(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:n},i}function ag(n,i,l,u){return n.baseState=l,of(n,xr,typeof u=="function"?u:$s)}function q2(n,i,l,u,g){if(Mc(n))throw Error(s(485));if(n=i.action,n!==null){var m={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};re.T!==null?l(!0):m.isTransition=!1,u(m),l=i.pending,l===null?(m.next=i.pending=m,ig(i,m)):(m.next=l.next,i.pending=l.next=m)}}function ig(n,i){var l=i.action,u=i.payload,g=n.state;if(i.isTransition){var m=re.T,T={};re.T=T;try{var O=l(g,u),ee=re.S;ee!==null&&ee(T,O),og(n,i,O)}catch(_e){df(n,i,_e)}finally{re.T=m}}else try{m=l(g,u),og(n,i,m)}catch(_e){df(n,i,_e)}}function og(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){lg(n,i,u)},function(u){return df(n,i,u)}):lg(n,i,l)}function lg(n,i,l){i.status="fulfilled",i.value=l,cg(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,ig(n,l)))}function df(n,i,l){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,cg(i),i=i.next;while(i!==u)}n.action=null}function cg(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function dg(n,i){return i}function ug(n,i){if(ar){var l=Tr.formState;if(l!==null){e:{var u=Ut;if(ar){if(Or){t:{for(var g=Or,m=As;g.nodeType!==8;){if(!m){g=null;break t}if(g=ms(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Or=ms(g.nextSibling),u=g.data==="F!";break e}}Ja(u)}u=!1}u&&(i=l[0])}}return l=Mn(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dg,lastRenderedState:i},l.queue=u,l=Ng.bind(null,Ut,u),u.dispatch=l,u=cf(!1),m=gf.bind(null,Ut,!1,u.queue),u=Mn(),g={state:i,dispatch:null,action:n,pending:null},u.queue=g,l=q2.bind(null,Ut,g,m,l),g.dispatch=l,u.memoizedState=n,[i,l,!1]}function fg(n){var i=qr();return hg(i,xr,n)}function hg(n,i,l){if(i=of(n,i,dg)[0],n=Oc($s)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=nl(i)}catch(T){throw T===Qo?kc:T}else u=i;i=qr();var g=i.queue,m=g.dispatch;return l!==i.memoizedState&&(Ut.flags|=2048,zi(9,Ic(),$2.bind(null,g,l),null)),[u,m,n]}function $2(n,i){n.action=i}function pg(n){var i=qr(),l=xr;if(l!==null)return hg(i,l,n);qr(),i=i.memoizedState,l=qr();var u=l.queue.dispatch;return l.memoizedState=n,[i,u,!1]}function zi(n,i,l,u){return n={tag:n,create:l,deps:u,inst:i,next:null},i=Ut.updateQueue,i===null&&(i=sf(),Ut.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(u=l.next,l.next=n,n.next=u,i.lastEffect=n),n}function Ic(){return{destroy:void 0,resource:void 0}}function gg(){return qr().memoizedState}function Bc(n,i,l,u){var g=Mn();u=u===void 0?null:u,Ut.flags|=n,g.memoizedState=zi(1|i,Ic(),l,u)}function sl(n,i,l,u){var g=qr();u=u===void 0?null:u;var m=g.memoizedState.inst;xr!==null&&u!==null&&Zu(u,xr.memoizedState.deps)?g.memoizedState=zi(i,m,l,u):(Ut.flags|=n,g.memoizedState=zi(1|i,m,l,u))}function xg(n,i){Bc(8390656,8,n,i)}function mg(n,i){sl(2048,8,n,i)}function yg(n,i){return sl(4,2,n,i)}function vg(n,i){return sl(4,4,n,i)}function bg(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function _g(n,i,l){l=l!=null?l.concat([n]):null,sl(4,4,bg.bind(null,i,n),l)}function uf(){}function Sg(n,i){var l=qr();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&Zu(i,u[1])?u[0]:(l.memoizedState=[n,i],n)}function wg(n,i){var l=qr();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&Zu(i,u[1]))return u[0];if(u=n(),ri){ce(!0);try{n()}finally{ce(!1)}}return l.memoizedState=[u,i],u}function ff(n,i,l){return l===void 0||(pa&1073741824)!==0?n.memoizedState=i:(n.memoizedState=l,n=Ex(),Ut.lanes|=n,_a|=n,l)}function Tg(n,i,l,u){return $n(l,i)?l:Fi.current!==null?(n=ff(n,l,u),$n(n,i)||(en=!0),n):(pa&42)===0?(en=!0,n.memoizedState=l):(n=Ex(),Ut.lanes|=n,_a|=n,i)}function jg(n,i,l,u,g){var m=ye.p;ye.p=m!==0&&8>m?m:8;var T=re.T,O={};re.T=O,gf(n,!1,i,l);try{var ee=g(),_e=re.S;if(_e!==null&&_e(O,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Fe=z2(ee,u);al(n,i,Fe,Kn(n))}else al(n,i,u,Kn(n))}catch(ze){al(n,i,{then:function(){},status:"rejected",reason:ze},Kn())}finally{ye.p=m,re.T=T}}function H2(){}function hf(n,i,l,u){if(n.tag!==5)throw Error(s(476));var g=Eg(n).queue;jg(n,g,i,le,l===null?H2:function(){return kg(n),l(u)})}function Eg(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:le},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function kg(n){var i=Eg(n).next.queue;al(n,i,{},Kn())}function pf(){return mn(wl)}function Cg(){return qr().memoizedState}function Ag(){return qr().memoizedState}function G2(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=Kn();n=fa(l);var u=ha(i,n,l);u!==null&&(Xn(u,i,l),Zo(u,i,l)),i={cache:qu()},n.payload=i;return}i=i.return}}function V2(n,i,l){var u=Kn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Mc(n)?Rg(i,l):(l=Ou(n,i,l,u),l!==null&&(Xn(l,n,u),Dg(l,i,u)))}function Ng(n,i,l){var u=Kn();al(n,i,l,u)}function al(n,i,l,u){var g={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Mc(n))Rg(i,g);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var T=i.lastRenderedState,O=m(T,l);if(g.hasEagerState=!0,g.eagerState=O,$n(O,T))return vc(n,i,g,0),Tr===null&&yc(),!1}catch{}finally{}if(l=Ou(n,i,g,u),l!==null)return Xn(l,n,u),Dg(l,i,u),!0}return!1}function gf(n,i,l,u){if(u={lane:2,revertLane:Vf(),action:u,hasEagerState:!1,eagerState:null,next:null},Mc(n)){if(i)throw Error(s(479))}else i=Ou(n,l,u,2),i!==null&&Xn(i,n,2)}function Mc(n){var i=n.alternate;return n===Ut||i!==null&&i===Ut}function Rg(n,i){Li=Nc=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Dg(n,i,l){if((l&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,l|=u,i.lanes=l,At(n,l)}}var Fc={readContext:mn,use:Dc,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useLayoutEffect:zr,useInsertionEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useSyncExternalStore:zr,useId:zr,useHostTransitionStatus:zr,useFormState:zr,useActionState:zr,useOptimistic:zr,useMemoCache:zr,useCacheRefresh:zr},Og={readContext:mn,use:Dc,useCallback:function(n,i){return Mn().memoizedState=[n,i===void 0?null:i],n},useContext:mn,useEffect:xg,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,Bc(4194308,4,bg.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Bc(4194308,4,n,i)},useInsertionEffect:function(n,i){Bc(4,2,n,i)},useMemo:function(n,i){var l=Mn();i=i===void 0?null:i;var u=n();if(ri){ce(!0);try{n()}finally{ce(!1)}}return l.memoizedState=[u,i],u},useReducer:function(n,i,l){var u=Mn();if(l!==void 0){var g=l(i);if(ri){ce(!0);try{l(i)}finally{ce(!1)}}}else g=i;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=V2.bind(null,Ut,n),[u.memoizedState,n]},useRef:function(n){var i=Mn();return n={current:n},i.memoizedState=n},useState:function(n){n=cf(n);var i=n.queue,l=Ng.bind(null,Ut,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:uf,useDeferredValue:function(n,i){var l=Mn();return ff(l,n,i)},useTransition:function(){var n=cf(!1);return n=jg.bind(null,Ut,n.queue,!0,!1),Mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var u=Ut,g=Mn();if(ar){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),Tr===null)throw Error(s(349));(Xt&124)!==0||eg(u,i,l)}g.memoizedState=l;var m={value:l,getSnapshot:i};return g.queue=m,xg(rg.bind(null,u,m,n),[n]),u.flags|=2048,zi(9,Ic(),tg.bind(null,u,m,l,i),null),l},useId:function(){var n=Mn(),i=Tr.identifierPrefix;if(ar){var l=Us,u=zs;l=(u&~(1<<32-Ge(u)-1)).toString(32)+l,i="«"+i+"R"+l,l=Rc++,0<l&&(i+="H"+l.toString(32)),i+="»"}else l=U2++,i="«"+i+"r"+l.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:pf,useFormState:ug,useActionState:ug,useOptimistic:function(n){var i=Mn();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=gf.bind(null,Ut,!0,l),l.dispatch=i,[n,i]},useMemoCache:af,useCacheRefresh:function(){return Mn().memoizedState=G2.bind(null,Ut)}},Ig={readContext:mn,use:Dc,useCallback:Sg,useContext:mn,useEffect:mg,useImperativeHandle:_g,useInsertionEffect:yg,useLayoutEffect:vg,useMemo:wg,useReducer:Oc,useRef:gg,useState:function(){return Oc($s)},useDebugValue:uf,useDeferredValue:function(n,i){var l=qr();return Tg(l,xr.memoizedState,n,i)},useTransition:function(){var n=Oc($s)[0],i=qr().memoizedState;return[typeof n=="boolean"?n:nl(n),i]},useSyncExternalStore:Zp,useId:Cg,useHostTransitionStatus:pf,useFormState:fg,useActionState:fg,useOptimistic:function(n,i){var l=qr();return ag(l,xr,n,i)},useMemoCache:af,useCacheRefresh:Ag},Y2={readContext:mn,use:Dc,useCallback:Sg,useContext:mn,useEffect:mg,useImperativeHandle:_g,useInsertionEffect:yg,useLayoutEffect:vg,useMemo:wg,useReducer:lf,useRef:gg,useState:function(){return lf($s)},useDebugValue:uf,useDeferredValue:function(n,i){var l=qr();return xr===null?ff(l,n,i):Tg(l,xr.memoizedState,n,i)},useTransition:function(){var n=lf($s)[0],i=qr().memoizedState;return[typeof n=="boolean"?n:nl(n),i]},useSyncExternalStore:Zp,useId:Cg,useHostTransitionStatus:pf,useFormState:pg,useActionState:pg,useOptimistic:function(n,i){var l=qr();return xr!==null?ag(l,xr,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:af,useCacheRefresh:Ag},Ui=null,il=0;function Lc(n){var i=il;return il+=1,Ui===null&&(Ui=[]),Hp(Ui,n,i)}function ol(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Pc(n,i){throw i.$$typeof===y?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Bg(n){var i=n._init;return i(n._payload)}function Mg(n){function i(he,ae){if(n){var ve=he.deletions;ve===null?(he.deletions=[ae],he.flags|=16):ve.push(ae)}}function l(he,ae){if(!n)return null;for(;ae!==null;)i(he,ae),ae=ae.sibling;return null}function u(he){for(var ae=new Map;he!==null;)he.key!==null?ae.set(he.key,he):ae.set(he.index,he),he=he.sibling;return ae}function g(he,ae){return he=Ps(he,ae),he.index=0,he.sibling=null,he}function m(he,ae,ve){return he.index=ve,n?(ve=he.alternate,ve!==null?(ve=ve.index,ve<ae?(he.flags|=67108866,ae):ve):(he.flags|=67108866,ae)):(he.flags|=1048576,ae)}function T(he){return n&&he.alternate===null&&(he.flags|=67108866),he}function O(he,ae,ve,Le){return ae===null||ae.tag!==6?(ae=Bu(ve,he.mode,Le),ae.return=he,ae):(ae=g(ae,ve),ae.return=he,ae)}function ee(he,ae,ve,Le){var pt=ve.type;return pt===w?Fe(he,ae,ve.props.children,Le,ve.key):ae!==null&&(ae.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===P&&Bg(pt)===ae.type)?(ae=g(ae,ve.props),ol(ae,ve),ae.return=he,ae):(ae=_c(ve.type,ve.key,ve.props,null,he.mode,Le),ol(ae,ve),ae.return=he,ae)}function _e(he,ae,ve,Le){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==ve.containerInfo||ae.stateNode.implementation!==ve.implementation?(ae=Mu(ve,he.mode,Le),ae.return=he,ae):(ae=g(ae,ve.children||[]),ae.return=he,ae)}function Fe(he,ae,ve,Le,pt){return ae===null||ae.tag!==7?(ae=Ya(ve,he.mode,Le,pt),ae.return=he,ae):(ae=g(ae,ve),ae.return=he,ae)}function ze(he,ae,ve){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=Bu(""+ae,he.mode,ve),ae.return=he,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case v:return ve=_c(ae.type,ae.key,ae.props,null,he.mode,ve),ol(ve,ae),ve.return=he,ve;case b:return ae=Mu(ae,he.mode,ve),ae.return=he,ae;case P:var Le=ae._init;return ae=Le(ae._payload),ze(he,ae,ve)}if(oe(ae)||fe(ae))return ae=Ya(ae,he.mode,ve,null),ae.return=he,ae;if(typeof ae.then=="function")return ze(he,Lc(ae),ve);if(ae.$$typeof===I)return ze(he,jc(he,ae),ve);Pc(he,ae)}return null}function Te(he,ae,ve,Le){var pt=ae!==null?ae.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return pt!==null?null:O(he,ae,""+ve,Le);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case v:return ve.key===pt?ee(he,ae,ve,Le):null;case b:return ve.key===pt?_e(he,ae,ve,Le):null;case P:return pt=ve._init,ve=pt(ve._payload),Te(he,ae,ve,Le)}if(oe(ve)||fe(ve))return pt!==null?null:Fe(he,ae,ve,Le,null);if(typeof ve.then=="function")return Te(he,ae,Lc(ve),Le);if(ve.$$typeof===I)return Te(he,ae,jc(he,ve),Le);Pc(he,ve)}return null}function je(he,ae,ve,Le,pt){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return he=he.get(ve)||null,O(ae,he,""+Le,pt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case v:return he=he.get(Le.key===null?ve:Le.key)||null,ee(ae,he,Le,pt);case b:return he=he.get(Le.key===null?ve:Le.key)||null,_e(ae,he,Le,pt);case P:var qt=Le._init;return Le=qt(Le._payload),je(he,ae,ve,Le,pt)}if(oe(Le)||fe(Le))return he=he.get(ve)||null,Fe(ae,he,Le,pt,null);if(typeof Le.then=="function")return je(he,ae,ve,Lc(Le),pt);if(Le.$$typeof===I)return je(he,ae,ve,jc(ae,Le),pt);Pc(ae,Le)}return null}function Ct(he,ae,ve,Le){for(var pt=null,qt=null,yt=ae,kt=ae=0,rn=null;yt!==null&&kt<ve.length;kt++){yt.index>kt?(rn=yt,yt=null):rn=yt.sibling;var tr=Te(he,yt,ve[kt],Le);if(tr===null){yt===null&&(yt=rn);break}n&&yt&&tr.alternate===null&&i(he,yt),ae=m(tr,ae,kt),qt===null?pt=tr:qt.sibling=tr,qt=tr,yt=rn}if(kt===ve.length)return l(he,yt),ar&&Xa(he,kt),pt;if(yt===null){for(;kt<ve.length;kt++)yt=ze(he,ve[kt],Le),yt!==null&&(ae=m(yt,ae,kt),qt===null?pt=yt:qt.sibling=yt,qt=yt);return ar&&Xa(he,kt),pt}for(yt=u(yt);kt<ve.length;kt++)rn=je(yt,he,kt,ve[kt],Le),rn!==null&&(n&&rn.alternate!==null&&yt.delete(rn.key===null?kt:rn.key),ae=m(rn,ae,kt),qt===null?pt=rn:qt.sibling=rn,qt=rn);return n&&yt.forEach(function(Na){return i(he,Na)}),ar&&Xa(he,kt),pt}function Tt(he,ae,ve,Le){if(ve==null)throw Error(s(151));for(var pt=null,qt=null,yt=ae,kt=ae=0,rn=null,tr=ve.next();yt!==null&&!tr.done;kt++,tr=ve.next()){yt.index>kt?(rn=yt,yt=null):rn=yt.sibling;var Na=Te(he,yt,tr.value,Le);if(Na===null){yt===null&&(yt=rn);break}n&&yt&&Na.alternate===null&&i(he,yt),ae=m(Na,ae,kt),qt===null?pt=Na:qt.sibling=Na,qt=Na,yt=rn}if(tr.done)return l(he,yt),ar&&Xa(he,kt),pt;if(yt===null){for(;!tr.done;kt++,tr=ve.next())tr=ze(he,tr.value,Le),tr!==null&&(ae=m(tr,ae,kt),qt===null?pt=tr:qt.sibling=tr,qt=tr);return ar&&Xa(he,kt),pt}for(yt=u(yt);!tr.done;kt++,tr=ve.next())tr=je(yt,he,kt,tr.value,Le),tr!==null&&(n&&tr.alternate!==null&&yt.delete(tr.key===null?kt:tr.key),ae=m(tr,ae,kt),qt===null?pt=tr:qt.sibling=tr,qt=tr);return n&&yt.forEach(function(K_){return i(he,K_)}),ar&&Xa(he,kt),pt}function yr(he,ae,ve,Le){if(typeof ve=="object"&&ve!==null&&ve.type===w&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case v:e:{for(var pt=ve.key;ae!==null;){if(ae.key===pt){if(pt=ve.type,pt===w){if(ae.tag===7){l(he,ae.sibling),Le=g(ae,ve.props.children),Le.return=he,he=Le;break e}}else if(ae.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===P&&Bg(pt)===ae.type){l(he,ae.sibling),Le=g(ae,ve.props),ol(Le,ve),Le.return=he,he=Le;break e}l(he,ae);break}else i(he,ae);ae=ae.sibling}ve.type===w?(Le=Ya(ve.props.children,he.mode,Le,ve.key),Le.return=he,he=Le):(Le=_c(ve.type,ve.key,ve.props,null,he.mode,Le),ol(Le,ve),Le.return=he,he=Le)}return T(he);case b:e:{for(pt=ve.key;ae!==null;){if(ae.key===pt)if(ae.tag===4&&ae.stateNode.containerInfo===ve.containerInfo&&ae.stateNode.implementation===ve.implementation){l(he,ae.sibling),Le=g(ae,ve.children||[]),Le.return=he,he=Le;break e}else{l(he,ae);break}else i(he,ae);ae=ae.sibling}Le=Mu(ve,he.mode,Le),Le.return=he,he=Le}return T(he);case P:return pt=ve._init,ve=pt(ve._payload),yr(he,ae,ve,Le)}if(oe(ve))return Ct(he,ae,ve,Le);if(fe(ve)){if(pt=fe(ve),typeof pt!="function")throw Error(s(150));return ve=pt.call(ve),Tt(he,ae,ve,Le)}if(typeof ve.then=="function")return yr(he,ae,Lc(ve),Le);if(ve.$$typeof===I)return yr(he,ae,jc(he,ve),Le);Pc(he,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,ae!==null&&ae.tag===6?(l(he,ae.sibling),Le=g(ae,ve),Le.return=he,he=Le):(l(he,ae),Le=Bu(ve,he.mode,Le),Le.return=he,he=Le),T(he)):l(he,ae)}return function(he,ae,ve,Le){try{il=0;var pt=yr(he,ae,ve,Le);return Ui=null,pt}catch(yt){if(yt===Qo||yt===kc)throw yt;var qt=Hn(29,yt,null,he.mode);return qt.lanes=Le,qt.return=he,qt}finally{}}}var Wi=Mg(!0),Fg=Mg(!1),is=K(null),Ns=null;function ga(n){var i=n.alternate;L(Yr,Yr.current&1),L(is,n),Ns===null&&(i===null||Fi.current!==null||i.memoizedState!==null)&&(Ns=n)}function Lg(n){if(n.tag===22){if(L(Yr,Yr.current),L(is,n),Ns===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Ns=n)}}else xa()}function xa(){L(Yr,Yr.current),L(is,is.current)}function Hs(n){E(is),Ns===n&&(Ns=null),E(Yr)}var Yr=K(0);function zc(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||ah(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function xf(n,i,l,u){i=n.memoizedState,l=l(u,i),l=l==null?i:x({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var mf={enqueueSetState:function(n,i,l){n=n._reactInternals;var u=Kn(),g=fa(u);g.payload=i,l!=null&&(g.callback=l),i=ha(n,g,u),i!==null&&(Xn(i,n,u),Zo(i,n,u))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var u=Kn(),g=fa(u);g.tag=1,g.payload=i,l!=null&&(g.callback=l),i=ha(n,g,u),i!==null&&(Xn(i,n,u),Zo(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=Kn(),u=fa(l);u.tag=2,i!=null&&(u.callback=i),i=ha(n,u,l),i!==null&&(Xn(i,n,l),Zo(i,n,l))}};function Pg(n,i,l,u,g,m,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,T):i.prototype&&i.prototype.isPureReactComponent?!qo(l,u)||!qo(g,m):!0}function zg(n,i,l,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==n&&mf.enqueueReplaceState(i,i.state,null)}function ni(n,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(n=n.defaultProps){l===i&&(l=x({},l));for(var g in n)l[g]===void 0&&(l[g]=n[g])}return l}var Uc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Ug(n){Uc(n)}function Wg(n){console.error(n)}function qg(n){Uc(n)}function Wc(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function $g(n,i,l){try{var u=n.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function yf(n,i,l){return l=fa(l),l.tag=3,l.payload={element:null},l.callback=function(){Wc(n,i)},l}function Hg(n){return n=fa(n),n.tag=3,n}function Gg(n,i,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var m=u.value;n.payload=function(){return g(m)},n.callback=function(){$g(i,l,u)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){$g(i,l,u),typeof g!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var O=u.stack;this.componentDidCatch(u.value,{componentStack:O!==null?O:""})})}function K2(n,i,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&Yo(i,l,g,!0),l=is.current,l!==null){switch(l.tag){case 13:return Ns===null?Wf():l.alternate===null&&Ir===0&&(Ir=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===Gu?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),$f(n,u,g)),!1;case 22:return l.flags|=65536,u===Gu?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),$f(n,u,g)),!1}throw Error(s(435,l.tag))}return $f(n,u,g),Wf(),!1}if(ar)return i=is.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==Pu&&(n=Error(s(422),{cause:u}),Vo(rs(n,l)))):(u!==Pu&&(i=Error(s(423),{cause:u}),Vo(rs(i,l))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=rs(u,l),g=yf(n.stateNode,u,g),Ku(n,g),Ir!==4&&(Ir=2)),!1;var m=Error(s(520),{cause:u});if(m=rs(m,l),pl===null?pl=[m]:pl.push(m),Ir!==4&&(Ir=2),i===null)return!0;u=rs(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=g&-g,l.lanes|=n,n=yf(l.stateNode,u,n),Ku(l,n),!1;case 1:if(i=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Sa===null||!Sa.has(m))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Hg(g),Gg(g,n,l,u),Ku(l,g),!1}l=l.return}while(l!==null);return!1}var Vg=Error(s(461)),en=!1;function ln(n,i,l,u){i.child=n===null?Fg(i,null,l,u):Wi(i,n.child,l,u)}function Yg(n,i,l,u,g){l=l.render;var m=i.ref;if("ref"in u){var T={};for(var O in u)O!=="ref"&&(T[O]=u[O])}else T=u;return ei(i),u=ef(n,i,l,T,m,g),O=tf(),n!==null&&!en?(rf(n,i,g),Gs(n,i,g)):(ar&&O&&Fu(i),i.flags|=1,ln(n,i,u,g),i.child)}function Kg(n,i,l,u,g){if(n===null){var m=l.type;return typeof m=="function"&&!Iu(m)&&m.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=m,Xg(n,i,m,u,g)):(n=_c(l.type,null,u,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Ef(n,g)){var T=m.memoizedProps;if(l=l.compare,l=l!==null?l:qo,l(T,u)&&n.ref===i.ref)return Gs(n,i,g)}return i.flags|=1,n=Ps(m,u),n.ref=i.ref,n.return=i,i.child=n}function Xg(n,i,l,u,g){if(n!==null){var m=n.memoizedProps;if(qo(m,u)&&n.ref===i.ref)if(en=!1,i.pendingProps=u=m,Ef(n,g))(n.flags&131072)!==0&&(en=!0);else return i.lanes=n.lanes,Gs(n,i,g)}return vf(n,i,l,u,g)}function Qg(n,i,l){var u=i.pendingProps,g=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|l:l,n!==null){for(g=i.child=n.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return Jg(n,i,u,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ec(i,m!==null?m.cachePool:null),m!==null?Xp(i,m):Qu(),Lg(i);else return i.lanes=i.childLanes=536870912,Jg(n,i,m!==null?m.baseLanes|l:l,l)}else m!==null?(Ec(i,m.cachePool),Xp(i,m),xa(),i.memoizedState=null):(n!==null&&Ec(i,null),Qu(),xa());return ln(n,i,g,l),i.child}function Jg(n,i,l,u){var g=Hu();return g=g===null?null:{parent:Vr._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},n!==null&&Ec(i,null),Qu(),Lg(i),n!==null&&Yo(n,i,u,!0),null}function qc(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function vf(n,i,l,u,g){return ei(i),l=ef(n,i,l,u,void 0,g),u=tf(),n!==null&&!en?(rf(n,i,g),Gs(n,i,g)):(ar&&u&&Fu(i),i.flags|=1,ln(n,i,l,g),i.child)}function Zg(n,i,l,u,g,m){return ei(i),i.updateQueue=null,l=Jp(i,u,l,g),Qp(n),u=tf(),n!==null&&!en?(rf(n,i,m),Gs(n,i,m)):(ar&&u&&Fu(i),i.flags|=1,ln(n,i,l,m),i.child)}function ex(n,i,l,u,g){if(ei(i),i.stateNode===null){var m=Di,T=l.contextType;typeof T=="object"&&T!==null&&(m=mn(T)),m=new l(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=mf,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},Vu(i),T=l.contextType,m.context=typeof T=="object"&&T!==null?mn(T):Di,m.state=i.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(xf(i,l,T,u),m.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&mf.enqueueReplaceState(m,m.state,null),tl(i,u,m,g),el(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){m=i.stateNode;var O=i.memoizedProps,ee=ni(l,O);m.props=ee;var _e=m.context,Fe=l.contextType;T=Di,typeof Fe=="object"&&Fe!==null&&(T=mn(Fe));var ze=l.getDerivedStateFromProps;Fe=typeof ze=="function"||typeof m.getSnapshotBeforeUpdate=="function",O=i.pendingProps!==O,Fe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(O||_e!==T)&&zg(i,m,u,T),ua=!1;var Te=i.memoizedState;m.state=Te,tl(i,u,m,g),el(),_e=i.memoizedState,O||Te!==_e||ua?(typeof ze=="function"&&(xf(i,l,ze,u),_e=i.memoizedState),(ee=ua||Pg(i,l,ee,u,Te,_e,T))?(Fe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=_e),m.props=u,m.state=_e,m.context=T,u=ee):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,Yu(n,i),T=i.memoizedProps,Fe=ni(l,T),m.props=Fe,ze=i.pendingProps,Te=m.context,_e=l.contextType,ee=Di,typeof _e=="object"&&_e!==null&&(ee=mn(_e)),O=l.getDerivedStateFromProps,(_e=typeof O=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ze||Te!==ee)&&zg(i,m,u,ee),ua=!1,Te=i.memoizedState,m.state=Te,tl(i,u,m,g),el();var je=i.memoizedState;T!==ze||Te!==je||ua||n!==null&&n.dependencies!==null&&Tc(n.dependencies)?(typeof O=="function"&&(xf(i,l,O,u),je=i.memoizedState),(Fe=ua||Pg(i,l,Fe,u,Te,je,ee)||n!==null&&n.dependencies!==null&&Tc(n.dependencies))?(_e||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,je,ee),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,je,ee)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===n.memoizedProps&&Te===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Te===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=je),m.props=u,m.state=je,m.context=ee,u=Fe):(typeof m.componentDidUpdate!="function"||T===n.memoizedProps&&Te===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Te===n.memoizedState||(i.flags|=1024),u=!1)}return m=u,qc(n,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&u?(i.child=Wi(i,n.child,null,g),i.child=Wi(i,null,l,g)):ln(n,i,l,g),i.memoizedState=m.state,n=i.child):n=Gs(n,i,g),n}function tx(n,i,l,u){return Go(),i.flags|=256,ln(n,i,l,u),i.child}var bf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _f(n){return{baseLanes:n,cachePool:Wp()}}function Sf(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=os),n}function rx(n,i,l){var u=i.pendingProps,g=!1,m=(i.flags&128)!==0,T;if((T=m)||(T=n!==null&&n.memoizedState===null?!1:(Yr.current&2)!==0),T&&(g=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,n===null){if(ar){if(g?ga(i):xa(),ar){var O=Or,ee;if(ee=O){e:{for(ee=O,O=As;ee.nodeType!==8;){if(!O){O=null;break e}if(ee=ms(ee.nextSibling),ee===null){O=null;break e}}O=ee}O!==null?(i.memoizedState={dehydrated:O,treeContext:Ka!==null?{id:zs,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},ee=Hn(18,null,null,0),ee.stateNode=O,ee.return=i,i.child=ee,kn=i,Or=null,ee=!0):ee=!1}ee||Ja(i)}if(O=i.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return ah(O)?i.lanes=32:i.lanes=536870912,null;Hs(i)}return O=u.children,u=u.fallback,g?(xa(),g=i.mode,O=$c({mode:"hidden",children:O},g),u=Ya(u,g,l,null),O.return=i,u.return=i,O.sibling=u,i.child=O,g=i.child,g.memoizedState=_f(l),g.childLanes=Sf(n,T,l),i.memoizedState=bf,u):(ga(i),wf(i,O))}if(ee=n.memoizedState,ee!==null&&(O=ee.dehydrated,O!==null)){if(m)i.flags&256?(ga(i),i.flags&=-257,i=Tf(n,i,l)):i.memoizedState!==null?(xa(),i.child=n.child,i.flags|=128,i=null):(xa(),g=u.fallback,O=i.mode,u=$c({mode:"visible",children:u.children},O),g=Ya(g,O,l,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,Wi(i,n.child,null,l),u=i.child,u.memoizedState=_f(l),u.childLanes=Sf(n,T,l),i.memoizedState=bf,i=g);else if(ga(i),ah(O)){if(T=O.nextSibling&&O.nextSibling.dataset,T)var _e=T.dgst;T=_e,u=Error(s(419)),u.stack="",u.digest=T,Vo({value:u,source:null,stack:null}),i=Tf(n,i,l)}else if(en||Yo(n,i,l,!1),T=(l&n.childLanes)!==0,en||T){if(T=Tr,T!==null&&(u=l&-l,u=(u&42)!==0?1:Ot(u),u=(u&(T.suspendedLanes|l))!==0?0:u,u!==0&&u!==ee.retryLane))throw ee.retryLane=u,Ri(n,u),Xn(T,n,u),Vg;O.data==="$?"||Wf(),i=Tf(n,i,l)}else O.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=ee.treeContext,Or=ms(O.nextSibling),kn=i,ar=!0,Qa=null,As=!1,n!==null&&(ss[as++]=zs,ss[as++]=Us,ss[as++]=Ka,zs=n.id,Us=n.overflow,Ka=i),i=wf(i,u.children),i.flags|=4096);return i}return g?(xa(),g=u.fallback,O=i.mode,ee=n.child,_e=ee.sibling,u=Ps(ee,{mode:"hidden",children:u.children}),u.subtreeFlags=ee.subtreeFlags&65011712,_e!==null?g=Ps(_e,g):(g=Ya(g,O,l,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,O=n.child.memoizedState,O===null?O=_f(l):(ee=O.cachePool,ee!==null?(_e=Vr._currentValue,ee=ee.parent!==_e?{parent:_e,pool:_e}:ee):ee=Wp(),O={baseLanes:O.baseLanes|l,cachePool:ee}),g.memoizedState=O,g.childLanes=Sf(n,T,l),i.memoizedState=bf,u):(ga(i),l=n.child,n=l.sibling,l=Ps(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,n!==null&&(T=i.deletions,T===null?(i.deletions=[n],i.flags|=16):T.push(n)),i.child=l,i.memoizedState=null,l)}function wf(n,i){return i=$c({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function $c(n,i){return n=Hn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Tf(n,i,l){return Wi(i,n.child,null,l),n=wf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function nx(n,i,l){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Uu(n.return,i,l)}function jf(n,i,l,u,g){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=l,m.tailMode=g)}function sx(n,i,l){var u=i.pendingProps,g=u.revealOrder,m=u.tail;if(ln(n,i,u.children,l),u=Yr.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&nx(n,l,i);else if(n.tag===19)nx(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(L(Yr,u),g){case"forwards":for(l=i.child,g=null;l!==null;)n=l.alternate,n!==null&&zc(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),jf(i,!1,g,l,m);break;case"backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&zc(n)===null){i.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}jf(i,!0,l,null,m);break;case"together":jf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Gs(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),_a|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(Yo(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,l=Ps(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Ps(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function Ef(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Tc(n)))}function X2(n,i,l){switch(i.tag){case 3:He(i,i.stateNode.containerInfo),da(i,Vr,n.memoizedState.cache),Go();break;case 27:case 5:ne(i);break;case 4:He(i,i.stateNode.containerInfo);break;case 10:da(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ga(i),i.flags|=128,null):(l&i.child.childLanes)!==0?rx(n,i,l):(ga(i),n=Gs(n,i,l),n!==null?n.sibling:null);ga(i);break;case 19:var g=(n.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(Yo(n,i,l,!1),u=(l&i.childLanes)!==0),g){if(u)return sx(n,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),L(Yr,Yr.current),u)break;return null;case 22:case 23:return i.lanes=0,Qg(n,i,l);case 24:da(i,Vr,n.memoizedState.cache)}return Gs(n,i,l)}function ax(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)en=!0;else{if(!Ef(n,l)&&(i.flags&128)===0)return en=!1,X2(n,i,l);en=(n.flags&131072)!==0}else en=!1,ar&&(i.flags&1048576)!==0&&Bp(i,wc,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,g=u._init;if(u=g(u._payload),i.type=u,typeof u=="function")Iu(u)?(n=ni(u,n),i.tag=1,i=ex(null,i,u,n,l)):(i.tag=0,i=vf(null,i,u,n,l));else{if(u!=null){if(g=u.$$typeof,g===G){i.tag=11,i=Yg(null,i,u,n,l);break e}else if(g===q){i.tag=14,i=Kg(null,i,u,n,l);break e}}throw i=Q(u)||u,Error(s(306,i,""))}}return i;case 0:return vf(n,i,i.type,i.pendingProps,l);case 1:return u=i.type,g=ni(u,i.pendingProps),ex(n,i,u,g,l);case 3:e:{if(He(i,i.stateNode.containerInfo),n===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;g=m.element,Yu(n,i),tl(i,u,null,l);var T=i.memoizedState;if(u=T.cache,da(i,Vr,u),u!==m.cache&&Wu(i,[Vr],l,!0),el(),u=T.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=tx(n,i,u,l);break e}else if(u!==g){g=rs(Error(s(424)),i),Vo(g),i=tx(n,i,u,l);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Or=ms(n.firstChild),kn=i,ar=!0,Qa=null,As=!0,l=Fg(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Go(),u===g){i=Gs(n,i,l);break e}ln(n,i,u,l)}i=i.child}return i;case 26:return qc(n,i),n===null?(l=cm(i.type,null,i.pendingProps,null))?i.memoizedState=l:ar||(l=i.type,n=i.pendingProps,u=sd(me.current).createElement(l),u[Nt]=i,u[gr]=n,dn(u,l,n),pe(u),i.stateNode=u):i.memoizedState=cm(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ne(i),n===null&&ar&&(u=i.stateNode=im(i.type,i.pendingProps,me.current),kn=i,As=!0,g=Or,ja(i.type)?(ih=g,Or=ms(u.firstChild)):Or=g),ln(n,i,i.pendingProps.children,l),qc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&ar&&((g=u=Or)&&(u=T_(u,i.type,i.pendingProps,As),u!==null?(i.stateNode=u,kn=i,Or=ms(u.firstChild),As=!1,g=!0):g=!1),g||Ja(i)),ne(i),g=i.type,m=i.pendingProps,T=n!==null?n.memoizedProps:null,u=m.children,rh(g,m)?u=null:T!==null&&rh(g,T)&&(i.flags|=32),i.memoizedState!==null&&(g=ef(n,i,W2,null,null,l),wl._currentValue=g),qc(n,i),ln(n,i,u,l),i.child;case 6:return n===null&&ar&&((n=l=Or)&&(l=j_(l,i.pendingProps,As),l!==null?(i.stateNode=l,kn=i,Or=null,n=!0):n=!1),n||Ja(i)),null;case 13:return rx(n,i,l);case 4:return He(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Wi(i,null,u,l):ln(n,i,u,l),i.child;case 11:return Yg(n,i,i.type,i.pendingProps,l);case 7:return ln(n,i,i.pendingProps,l),i.child;case 8:return ln(n,i,i.pendingProps.children,l),i.child;case 12:return ln(n,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,da(i,i.type,u.value),ln(n,i,u.children,l),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,ei(i),g=mn(g),u=u(g),i.flags|=1,ln(n,i,u,l),i.child;case 14:return Kg(n,i,i.type,i.pendingProps,l);case 15:return Xg(n,i,i.type,i.pendingProps,l);case 19:return sx(n,i,l);case 31:return u=i.pendingProps,l=i.mode,u={mode:u.mode,children:u.children},n===null?(l=$c(u,l),l.ref=i.ref,i.child=l,l.return=i,i=l):(l=Ps(n.child,u),l.ref=i.ref,i.child=l,l.return=i,i=l),i;case 22:return Qg(n,i,l);case 24:return ei(i),u=mn(Vr),n===null?(g=Hu(),g===null&&(g=Tr,m=qu(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=l),g=m),i.memoizedState={parent:u,cache:g},Vu(i),da(i,Vr,g)):((n.lanes&l)!==0&&(Yu(n,i),tl(i,null,null,l),el()),g=n.memoizedState,m=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),da(i,Vr,u)):(u=m.cache,da(i,Vr,u),u!==g.cache&&Wu(i,[Vr],l,!0))),ln(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Vs(n){n.flags|=4}function ix(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!pm(i)){if(i=is.current,i!==null&&((Xt&4194048)===Xt?Ns!==null:(Xt&62914560)!==Xt&&(Xt&536870912)===0||i!==Ns))throw Jo=Gu,qp;n.flags|=8192}}function Hc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Ee():536870912,n.lanes|=i,Gi|=i)}function ll(n,i){if(!ar)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Dr(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,u=0;if(i)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=l,i}function Q2(n,i,l){var u=i.pendingProps;switch(Lu(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(i),null;case 1:return Dr(i),null;case 3:return l=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),qs(Vr),Ce(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Ho(i)?Vs(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Lp())),Dr(i),null;case 26:return l=i.memoizedState,n===null?(Vs(i),l!==null?(Dr(i),ix(i,l)):(Dr(i),i.flags&=-16777217)):l?l!==n.memoizedState?(Vs(i),Dr(i),ix(i,l)):(Dr(i),i.flags&=-16777217):(n.memoizedProps!==u&&Vs(i),Dr(i),i.flags&=-16777217),null;case 27:Pe(i),l=me.current;var g=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Vs(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Dr(i),null}n=z.current,Ho(i)?Mp(i):(n=im(g,u,l),i.stateNode=n,Vs(i))}return Dr(i),null;case 5:if(Pe(i),l=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Vs(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Dr(i),null}if(n=z.current,Ho(i))Mp(i);else{switch(g=sd(me.current),n){case 1:n=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:n=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":n=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":n=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":n=g.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?g.createElement(l,{is:u.is}):g.createElement(l)}}n[Nt]=i,n[gr]=u;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)n.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=n;e:switch(dn(n,l,u),l){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Vs(i)}}return Dr(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Vs(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(n=me.current,Ho(i)){if(n=i.stateNode,l=i.memoizedProps,u=null,g=kn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[Nt]=i,n=!!(n.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Zx(n.nodeValue,l)),n||Ja(i)}else n=sd(n).createTextNode(u),n[Nt]=i,i.stateNode=n}return Dr(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Ho(i),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Nt]=i}else Go(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Dr(i),g=!1}else g=Lp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(Hs(i),i):(Hs(i),null)}if(Hs(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=u!==null,n=n!==null&&n.memoizedState!==null,l){u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==g&&(u.flags|=2048)}return l!==n&&l&&(i.child.flags|=8192),Hc(i,i.updateQueue),Dr(i),null;case 4:return Ce(),n===null&&Qf(i.stateNode.containerInfo),Dr(i),null;case 10:return qs(i.type),Dr(i),null;case 19:if(E(Yr),g=i.memoizedState,g===null)return Dr(i),null;if(u=(i.flags&128)!==0,m=g.rendering,m===null)if(u)ll(g,!1);else{if(Ir!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=zc(n),m!==null){for(i.flags|=128,ll(g,!1),n=m.updateQueue,i.updateQueue=n,Hc(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)Ip(l,n),l=l.sibling;return L(Yr,Yr.current&1|2),i.child}n=n.sibling}g.tail!==null&&Re()>Yc&&(i.flags|=128,u=!0,ll(g,!1),i.lanes=4194304)}else{if(!u)if(n=zc(m),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Hc(i,n),ll(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!ar)return Dr(i),null}else 2*Re()-g.renderingStartTime>Yc&&l!==536870912&&(i.flags|=128,u=!0,ll(g,!1),i.lanes=4194304);g.isBackwards?(m.sibling=i.child,i.child=m):(n=g.last,n!==null?n.sibling=m:i.child=m,g.last=m)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Re(),i.sibling=null,n=Yr.current,L(Yr,u?n&1|2:n&1),i):(Dr(i),null);case 22:case 23:return Hs(i),Ju(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(Dr(i),i.subtreeFlags&6&&(i.flags|=8192)):Dr(i),l=i.updateQueue,l!==null&&Hc(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),n!==null&&E(ti),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),qs(Vr),Dr(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function J2(n,i){switch(Lu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return qs(Vr),Ce(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Pe(i),null;case 13:if(Hs(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Go()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return E(Yr),null;case 4:return Ce(),null;case 10:return qs(i.type),null;case 22:case 23:return Hs(i),Ju(),n!==null&&E(ti),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return qs(Vr),null;case 25:return null;default:return null}}function ox(n,i){switch(Lu(i),i.tag){case 3:qs(Vr),Ce();break;case 26:case 27:case 5:Pe(i);break;case 4:Ce();break;case 13:Hs(i);break;case 19:E(Yr);break;case 10:qs(i.type);break;case 22:case 23:Hs(i),Ju(),n!==null&&E(ti);break;case 24:qs(Vr)}}function cl(n,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&n)===n){u=void 0;var m=l.create,T=l.inst;u=m(),T.destroy=u}l=l.next}while(l!==g)}}catch(O){Sr(i,i.return,O)}}function ma(n,i,l){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var m=g.next;u=m;do{if((u.tag&n)===n){var T=u.inst,O=T.destroy;if(O!==void 0){T.destroy=void 0,g=i;var ee=l,_e=O;try{_e()}catch(Fe){Sr(g,ee,Fe)}}}u=u.next}while(u!==m)}}catch(Fe){Sr(i,i.return,Fe)}}function lx(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{Kp(i,l)}catch(u){Sr(n,n.return,u)}}}function cx(n,i,l){l.props=ni(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(u){Sr(n,i,u)}}function dl(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof l=="function"?n.refCleanup=l(u):l.current=u}}catch(g){Sr(n,i,g)}}function Rs(n,i){var l=n.ref,u=n.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){Sr(n,i,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Sr(n,i,g)}else l.current=null}function dx(n){var i=n.type,l=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){Sr(n,n.return,g)}}function kf(n,i,l){try{var u=n.stateNode;v_(u,n.type,l,i),u[gr]=i}catch(g){Sr(n,n.return,g)}}function ux(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ja(n.type)||n.tag===4}function Cf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ux(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ja(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Af(n,i,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=nd));else if(u!==4&&(u===27&&ja(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(Af(n,i,l),n=n.sibling;n!==null;)Af(n,i,l),n=n.sibling}function Gc(n,i,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(u!==4&&(u===27&&ja(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Gc(n,i,l),n=n.sibling;n!==null;)Gc(n,i,l),n=n.sibling}function fx(n){var i=n.stateNode,l=n.memoizedProps;try{for(var u=n.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);dn(i,u,l),i[Nt]=n,i[gr]=l}catch(m){Sr(n,n.return,m)}}var Ys=!1,Ur=!1,Nf=!1,hx=typeof WeakSet=="function"?WeakSet:Set,tn=null;function Z2(n,i){if(n=n.containerInfo,eh=dd,n=Tp(n),ku(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var T=0,O=-1,ee=-1,_e=0,Fe=0,ze=n,Te=null;t:for(;;){for(var je;ze!==l||g!==0&&ze.nodeType!==3||(O=T+g),ze!==m||u!==0&&ze.nodeType!==3||(ee=T+u),ze.nodeType===3&&(T+=ze.nodeValue.length),(je=ze.firstChild)!==null;)Te=ze,ze=je;for(;;){if(ze===n)break t;if(Te===l&&++_e===g&&(O=T),Te===m&&++Fe===u&&(ee=T),(je=ze.nextSibling)!==null)break;ze=Te,Te=ze.parentNode}ze=je}l=O===-1||ee===-1?null:{start:O,end:ee}}else l=null}l=l||{start:0,end:0}}else l=null;for(th={focusedElem:n,selectionRange:l},dd=!1,tn=i;tn!==null;)if(i=tn,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,tn=n;else for(;tn!==null;){switch(i=tn,m=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,l=i,g=m.memoizedProps,m=m.memoizedState,u=l.stateNode;try{var Ct=ni(l.type,g,l.elementType===l.type);n=u.getSnapshotBeforeUpdate(Ct,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Tt){Sr(l,l.return,Tt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)sh(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":sh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,tn=n;break}tn=i.return}}function px(n,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:ya(n,l),u&4&&cl(5,l);break;case 1:if(ya(n,l),u&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(T){Sr(l,l.return,T)}else{var g=ni(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(g,i,n.__reactInternalSnapshotBeforeUpdate)}catch(T){Sr(l,l.return,T)}}u&64&&lx(l),u&512&&dl(l,l.return);break;case 3:if(ya(n,l),u&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Kp(n,i)}catch(T){Sr(l,l.return,T)}}break;case 27:i===null&&u&4&&fx(l);case 26:case 5:ya(n,l),i===null&&u&4&&dx(l),u&512&&dl(l,l.return);break;case 12:ya(n,l);break;case 13:ya(n,l),u&4&&mx(n,l),u&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=l_.bind(null,l),E_(n,l))));break;case 22:if(u=l.memoizedState!==null||Ys,!u){i=i!==null&&i.memoizedState!==null||Ur,g=Ys;var m=Ur;Ys=u,(Ur=i)&&!m?va(n,l,(l.subtreeFlags&8772)!==0):ya(n,l),Ys=g,Ur=m}break;case 30:break;default:ya(n,l)}}function gx(n){var i=n.alternate;i!==null&&(n.alternate=null,gx(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&F(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ar=null,Fn=!1;function Ks(n,i,l){for(l=l.child;l!==null;)xx(n,i,l),l=l.sibling}function xx(n,i,l){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(br,l)}catch{}switch(l.tag){case 26:Ur||Rs(l,i),Ks(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ur||Rs(l,i);var u=Ar,g=Fn;ja(l.type)&&(Ar=l.stateNode,Fn=!1),Ks(n,i,l),vl(l.stateNode),Ar=u,Fn=g;break;case 5:Ur||Rs(l,i);case 6:if(u=Ar,g=Fn,Ar=null,Ks(n,i,l),Ar=u,Fn=g,Ar!==null)if(Fn)try{(Ar.nodeType===9?Ar.body:Ar.nodeName==="HTML"?Ar.ownerDocument.body:Ar).removeChild(l.stateNode)}catch(m){Sr(l,i,m)}else try{Ar.removeChild(l.stateNode)}catch(m){Sr(l,i,m)}break;case 18:Ar!==null&&(Fn?(n=Ar,sm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),kl(n)):sm(Ar,l.stateNode));break;case 4:u=Ar,g=Fn,Ar=l.stateNode.containerInfo,Fn=!0,Ks(n,i,l),Ar=u,Fn=g;break;case 0:case 11:case 14:case 15:Ur||ma(2,l,i),Ur||ma(4,l,i),Ks(n,i,l);break;case 1:Ur||(Rs(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&cx(l,i,u)),Ks(n,i,l);break;case 21:Ks(n,i,l);break;case 22:Ur=(u=Ur)||l.memoizedState!==null,Ks(n,i,l),Ur=u;break;default:Ks(n,i,l)}}function mx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{kl(n)}catch(l){Sr(i,i.return,l)}}function e_(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new hx),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new hx),i;default:throw Error(s(435,n.tag))}}function Rf(n,i){var l=e_(n);i.forEach(function(u){var g=c_.bind(null,n,u);l.has(u)||(l.add(u),u.then(g,g))})}function Gn(n,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],m=n,T=i,O=T;e:for(;O!==null;){switch(O.tag){case 27:if(ja(O.type)){Ar=O.stateNode,Fn=!1;break e}break;case 5:Ar=O.stateNode,Fn=!1;break e;case 3:case 4:Ar=O.stateNode.containerInfo,Fn=!0;break e}O=O.return}if(Ar===null)throw Error(s(160));xx(m,T,g),Ar=null,Fn=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)yx(i,n),i=i.sibling}var xs=null;function yx(n,i){var l=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gn(i,n),Vn(n),u&4&&(ma(3,n,n.return),cl(3,n),ma(5,n,n.return));break;case 1:Gn(i,n),Vn(n),u&512&&(Ur||l===null||Rs(l,l.return)),u&64&&Ys&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=xs;if(Gn(i,n),Vn(n),u&512&&(Ur||l===null||Rs(l,l.return)),u&4){var m=l!==null?l.memoizedState:null;if(u=n.memoizedState,l===null)if(u===null)if(n.stateNode===null){e:{u=n.type,l=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":m=g.getElementsByTagName("title")[0],(!m||m[M]||m[Nt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(u),g.head.insertBefore(m,g.querySelector("head > title"))),dn(m,u,l),m[Nt]=n,pe(m),u=m;break e;case"link":var T=fm("link","href",g).get(u+(l.href||""));if(T){for(var O=0;O<T.length;O++)if(m=T[O],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(O,1);break t}}m=g.createElement(u),dn(m,u,l),g.head.appendChild(m);break;case"meta":if(T=fm("meta","content",g).get(u+(l.content||""))){for(O=0;O<T.length;O++)if(m=T[O],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(O,1);break t}}m=g.createElement(u),dn(m,u,l),g.head.appendChild(m);break;default:throw Error(s(468,u))}m[Nt]=n,pe(m),u=m}n.stateNode=u}else hm(g,n.type,n.stateNode);else n.stateNode=um(g,u,n.memoizedProps);else m!==u?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,u===null?hm(g,n.type,n.stateNode):um(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&kf(n,n.memoizedProps,l.memoizedProps)}break;case 27:Gn(i,n),Vn(n),u&512&&(Ur||l===null||Rs(l,l.return)),l!==null&&u&4&&kf(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Gn(i,n),Vn(n),u&512&&(Ur||l===null||Rs(l,l.return)),n.flags&32){g=n.stateNode;try{ft(g,"")}catch(je){Sr(n,n.return,je)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,kf(n,g,l!==null?l.memoizedProps:g)),u&1024&&(Nf=!0);break;case 6:if(Gn(i,n),Vn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,l=n.stateNode;try{l.nodeValue=u}catch(je){Sr(n,n.return,je)}}break;case 3:if(od=null,g=xs,xs=ad(i.containerInfo),Gn(i,n),xs=g,Vn(n),u&4&&l!==null&&l.memoizedState.isDehydrated)try{kl(i.containerInfo)}catch(je){Sr(n,n.return,je)}Nf&&(Nf=!1,vx(n));break;case 4:u=xs,xs=ad(n.stateNode.containerInfo),Gn(i,n),Vn(n),xs=u;break;case 12:Gn(i,n),Vn(n);break;case 13:Gn(i,n),Vn(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ff=Re()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rf(n,u)));break;case 22:g=n.memoizedState!==null;var ee=l!==null&&l.memoizedState!==null,_e=Ys,Fe=Ur;if(Ys=_e||g,Ur=Fe||ee,Gn(i,n),Ur=Fe,Ys=_e,Vn(n),u&8192)e:for(i=n.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(l===null||ee||Ys||Ur||si(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){ee=l=i;try{if(m=ee.stateNode,g)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{O=ee.stateNode;var ze=ee.memoizedProps.style,Te=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;O.style.display=Te==null||typeof Te=="boolean"?"":(""+Te).trim()}}catch(je){Sr(ee,ee.return,je)}}}else if(i.tag===6){if(l===null){ee=i;try{ee.stateNode.nodeValue=g?"":ee.memoizedProps}catch(je){Sr(ee,ee.return,je)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Rf(n,l))));break;case 19:Gn(i,n),Vn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rf(n,u)));break;case 30:break;case 21:break;default:Gn(i,n),Vn(n)}}function Vn(n){var i=n.flags;if(i&2){try{for(var l,u=n.return;u!==null;){if(ux(u)){l=u;break}u=u.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,m=Cf(n);Gc(n,m,g);break;case 5:var T=l.stateNode;l.flags&32&&(ft(T,""),l.flags&=-33);var O=Cf(n);Gc(n,O,T);break;case 3:case 4:var ee=l.stateNode.containerInfo,_e=Cf(n);Af(n,_e,ee);break;default:throw Error(s(161))}}catch(Fe){Sr(n,n.return,Fe)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function vx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;vx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ya(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)px(n,i.alternate,i),i=i.sibling}function si(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:ma(4,i,i.return),si(i);break;case 1:Rs(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&cx(i,i.return,l),si(i);break;case 27:vl(i.stateNode);case 26:case 5:Rs(i,i.return),si(i);break;case 22:i.memoizedState===null&&si(i);break;case 30:si(i);break;default:si(i)}n=n.sibling}}function va(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=n,m=i,T=m.flags;switch(m.tag){case 0:case 11:case 15:va(g,m,l),cl(4,m);break;case 1:if(va(g,m,l),u=m,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(_e){Sr(u,u.return,_e)}if(u=m,g=u.updateQueue,g!==null){var O=u.stateNode;try{var ee=g.shared.hiddenCallbacks;if(ee!==null)for(g.shared.hiddenCallbacks=null,g=0;g<ee.length;g++)Yp(ee[g],O)}catch(_e){Sr(u,u.return,_e)}}l&&T&64&&lx(m),dl(m,m.return);break;case 27:fx(m);case 26:case 5:va(g,m,l),l&&u===null&&T&4&&dx(m),dl(m,m.return);break;case 12:va(g,m,l);break;case 13:va(g,m,l),l&&T&4&&mx(g,m);break;case 22:m.memoizedState===null&&va(g,m,l),dl(m,m.return);break;case 30:break;default:va(g,m,l)}i=i.sibling}}function Df(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Ko(l))}function Of(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ko(n))}function Ds(n,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)bx(n,i,l,u),i=i.sibling}function bx(n,i,l,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Ds(n,i,l,u),g&2048&&cl(9,i);break;case 1:Ds(n,i,l,u);break;case 3:Ds(n,i,l,u),g&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ko(n)));break;case 12:if(g&2048){Ds(n,i,l,u),n=i.stateNode;try{var m=i.memoizedProps,T=m.id,O=m.onPostCommit;typeof O=="function"&&O(T,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(ee){Sr(i,i.return,ee)}}else Ds(n,i,l,u);break;case 13:Ds(n,i,l,u);break;case 23:break;case 22:m=i.stateNode,T=i.alternate,i.memoizedState!==null?m._visibility&2?Ds(n,i,l,u):ul(n,i):m._visibility&2?Ds(n,i,l,u):(m._visibility|=2,qi(n,i,l,u,(i.subtreeFlags&10256)!==0)),g&2048&&Df(T,i);break;case 24:Ds(n,i,l,u),g&2048&&Of(i.alternate,i);break;default:Ds(n,i,l,u)}}function qi(n,i,l,u,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=n,T=i,O=l,ee=u,_e=T.flags;switch(T.tag){case 0:case 11:case 15:qi(m,T,O,ee,g),cl(8,T);break;case 23:break;case 22:var Fe=T.stateNode;T.memoizedState!==null?Fe._visibility&2?qi(m,T,O,ee,g):ul(m,T):(Fe._visibility|=2,qi(m,T,O,ee,g)),g&&_e&2048&&Df(T.alternate,T);break;case 24:qi(m,T,O,ee,g),g&&_e&2048&&Of(T.alternate,T);break;default:qi(m,T,O,ee,g)}i=i.sibling}}function ul(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,u=i,g=u.flags;switch(u.tag){case 22:ul(l,u),g&2048&&Df(u.alternate,u);break;case 24:ul(l,u),g&2048&&Of(u.alternate,u);break;default:ul(l,u)}i=i.sibling}}var fl=8192;function $i(n){if(n.subtreeFlags&fl)for(n=n.child;n!==null;)_x(n),n=n.sibling}function _x(n){switch(n.tag){case 26:$i(n),n.flags&fl&&n.memoizedState!==null&&P_(xs,n.memoizedState,n.memoizedProps);break;case 5:$i(n);break;case 3:case 4:var i=xs;xs=ad(n.stateNode.containerInfo),$i(n),xs=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=fl,fl=16777216,$i(n),fl=i):$i(n));break;default:$i(n)}}function Sx(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function hl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];tn=u,Tx(u,n)}Sx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)wx(n),n=n.sibling}function wx(n){switch(n.tag){case 0:case 11:case 15:hl(n),n.flags&2048&&ma(9,n,n.return);break;case 3:hl(n);break;case 12:hl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Vc(n)):hl(n);break;default:hl(n)}}function Vc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];tn=u,Tx(u,n)}Sx(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:ma(8,i,i.return),Vc(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Vc(i));break;default:Vc(i)}n=n.sibling}}function Tx(n,i){for(;tn!==null;){var l=tn;switch(l.tag){case 0:case 11:case 15:ma(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ko(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,tn=u;else e:for(l=n;tn!==null;){u=tn;var g=u.sibling,m=u.return;if(gx(u),u===l){tn=null;break e}if(g!==null){g.return=m,tn=g;break e}tn=m}}}var t_={getCacheForType:function(n){var i=mn(Vr),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l}},r_=typeof WeakMap=="function"?WeakMap:Map,cr=0,Tr=null,Ht=null,Xt=0,dr=0,Yn=null,ba=!1,Hi=!1,If=!1,Xs=0,Ir=0,_a=0,ai=0,Bf=0,os=0,Gi=0,pl=null,Ln=null,Mf=!1,Ff=0,Yc=1/0,Kc=null,Sa=null,cn=0,wa=null,Vi=null,Yi=0,Lf=0,Pf=null,jx=null,gl=0,zf=null;function Kn(){if((cr&2)!==0&&Xt!==0)return Xt&-Xt;if(re.T!==null){var n=Bi;return n!==0?n:Vf()}return Er()}function Ex(){os===0&&(os=(Xt&536870912)===0||ar?se():536870912);var n=is.current;return n!==null&&(n.flags|=32),os}function Xn(n,i,l){(n===Tr&&(dr===2||dr===9)||n.cancelPendingCommit!==null)&&(Ki(n,0),Ta(n,Xt,os,!1)),Rt(n,l),((cr&2)===0||n!==Tr)&&(n===Tr&&((cr&2)===0&&(ai|=l),Ir===4&&Ta(n,Xt,os,!1)),Os(n))}function kx(n,i,l){if((cr&6)!==0)throw Error(s(327));var u=!l&&(i&124)===0&&(i&n.expiredLanes)===0||$t(n,i),g=u?a_(n,i):qf(n,i,!0),m=u;do{if(g===0){Hi&&!u&&Ta(n,i,0,!1);break}else{if(l=n.current.alternate,m&&!n_(l)){g=qf(n,i,!1),m=!1;continue}if(g===2){if(m=i,n.errorRecoveryDisabledLanes&m)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var O=n;g=pl;var ee=O.current.memoizedState.isDehydrated;if(ee&&(Ki(O,T).flags|=256),T=qf(O,T,!1),T!==2){if(If&&!ee){O.errorRecoveryDisabledLanes|=m,ai|=m,g=4;break e}m=Ln,Ln=g,m!==null&&(Ln===null?Ln=m:Ln.push.apply(Ln,m))}g=T}if(m=!1,g!==2)continue}}if(g===1){Ki(n,0),Ta(n,i,0,!0);break}e:{switch(u=n,m=g,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ta(u,i,os,!ba);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(g=Ff+300-Re(),10<g)){if(Ta(u,i,os,!ba),Rr(u,0,!0)!==0)break e;u.timeoutHandle=rm(Cx.bind(null,u,l,Ln,Kc,Mf,i,os,ai,Gi,ba,m,2,-0,0),g);break e}Cx(u,l,Ln,Kc,Mf,i,os,ai,Gi,ba,m,0,-0,0)}}break}while(!0);Os(n)}function Cx(n,i,l,u,g,m,T,O,ee,_e,Fe,ze,Te,je){if(n.timeoutHandle=-1,ze=i.subtreeFlags,(ze&8192||(ze&16785408)===16785408)&&(Sl={stylesheets:null,count:0,unsuspend:L_},_x(i),ze=z_(),ze!==null)){n.cancelPendingCommit=ze(Bx.bind(null,n,i,m,l,u,g,T,O,ee,Fe,1,Te,je)),Ta(n,m,T,!_e);return}Bx(n,i,m,l,u,g,T,O,ee)}function n_(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],m=g.getSnapshot;g=g.value;try{if(!$n(m(),g))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ta(n,i,l,u){i&=~Bf,i&=~ai,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var g=i;0<g;){var m=31-Ge(g),T=1<<m;u[m]=-1,g&=~T}l!==0&&at(n,l,i)}function Xc(){return(cr&6)===0?(xl(0),!1):!0}function Uf(){if(Ht!==null){if(dr===0)var n=Ht.return;else n=Ht,Ws=Za=null,nf(n),Ui=null,il=0,n=Ht;for(;n!==null;)ox(n.alternate,n),n=n.return;Ht=null}}function Ki(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,__(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Uf(),Tr=n,Ht=l=Ps(n.current,null),Xt=i,dr=0,Yn=null,ba=!1,Hi=$t(n,i),If=!1,Gi=os=Bf=ai=_a=Ir=0,Ln=pl=null,Mf=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var g=31-Ge(u),m=1<<g;i|=n[g],u&=~m}return Xs=i,yc(),l}function Ax(n,i){Ut=null,re.H=Fc,i===Qo||i===kc?(i=Gp(),dr=3):i===qp?(i=Gp(),dr=4):dr=i===Vg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Yn=i,Ht===null&&(Ir=1,Wc(n,rs(i,n.current)))}function Nx(){var n=re.H;return re.H=Fc,n===null?Fc:n}function Rx(){var n=re.A;return re.A=t_,n}function Wf(){Ir=4,ba||(Xt&4194048)!==Xt&&is.current!==null||(Hi=!0),(_a&134217727)===0&&(ai&134217727)===0||Tr===null||Ta(Tr,Xt,os,!1)}function qf(n,i,l){var u=cr;cr|=2;var g=Nx(),m=Rx();(Tr!==n||Xt!==i)&&(Kc=null,Ki(n,i)),i=!1;var T=Ir;e:do try{if(dr!==0&&Ht!==null){var O=Ht,ee=Yn;switch(dr){case 8:Uf(),T=6;break e;case 3:case 2:case 9:case 6:is.current===null&&(i=!0);var _e=dr;if(dr=0,Yn=null,Xi(n,O,ee,_e),l&&Hi){T=0;break e}break;default:_e=dr,dr=0,Yn=null,Xi(n,O,ee,_e)}}s_(),T=Ir;break}catch(Fe){Ax(n,Fe)}while(!0);return i&&n.shellSuspendCounter++,Ws=Za=null,cr=u,re.H=g,re.A=m,Ht===null&&(Tr=null,Xt=0,yc()),T}function s_(){for(;Ht!==null;)Dx(Ht)}function a_(n,i){var l=cr;cr|=2;var u=Nx(),g=Rx();Tr!==n||Xt!==i?(Kc=null,Yc=Re()+500,Ki(n,i)):Hi=$t(n,i);e:do try{if(dr!==0&&Ht!==null){i=Ht;var m=Yn;t:switch(dr){case 1:dr=0,Yn=null,Xi(n,i,m,1);break;case 2:case 9:if($p(m)){dr=0,Yn=null,Ox(i);break}i=function(){dr!==2&&dr!==9||Tr!==n||(dr=7),Os(n)},m.then(i,i);break e;case 3:dr=7;break e;case 4:dr=5;break e;case 7:$p(m)?(dr=0,Yn=null,Ox(i)):(dr=0,Yn=null,Xi(n,i,m,7));break;case 5:var T=null;switch(Ht.tag){case 26:T=Ht.memoizedState;case 5:case 27:var O=Ht;if(!T||pm(T)){dr=0,Yn=null;var ee=O.sibling;if(ee!==null)Ht=ee;else{var _e=O.return;_e!==null?(Ht=_e,Qc(_e)):Ht=null}break t}}dr=0,Yn=null,Xi(n,i,m,5);break;case 6:dr=0,Yn=null,Xi(n,i,m,6);break;case 8:Uf(),Ir=6;break e;default:throw Error(s(462))}}i_();break}catch(Fe){Ax(n,Fe)}while(!0);return Ws=Za=null,re.H=u,re.A=g,cr=l,Ht!==null?0:(Tr=null,Xt=0,yc(),Ir)}function i_(){for(;Ht!==null&&!Ne();)Dx(Ht)}function Dx(n){var i=ax(n.alternate,n,Xs);n.memoizedProps=n.pendingProps,i===null?Qc(n):Ht=i}function Ox(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=Zg(l,i,i.pendingProps,i.type,void 0,Xt);break;case 11:i=Zg(l,i,i.pendingProps,i.type.render,i.ref,Xt);break;case 5:nf(i);default:ox(l,i),i=Ht=Ip(i,Xs),i=ax(l,i,Xs)}n.memoizedProps=n.pendingProps,i===null?Qc(n):Ht=i}function Xi(n,i,l,u){Ws=Za=null,nf(i),Ui=null,il=0;var g=i.return;try{if(K2(n,g,i,l,Xt)){Ir=1,Wc(n,rs(l,n.current)),Ht=null;return}}catch(m){if(g!==null)throw Ht=g,m;Ir=1,Wc(n,rs(l,n.current)),Ht=null;return}i.flags&32768?(ar||u===1?n=!0:Hi||(Xt&536870912)!==0?n=!1:(ba=n=!0,(u===2||u===9||u===3||u===6)&&(u=is.current,u!==null&&u.tag===13&&(u.flags|=16384))),Ix(i,n)):Qc(i)}function Qc(n){var i=n;do{if((i.flags&32768)!==0){Ix(i,ba);return}n=i.return;var l=Q2(i.alternate,i,Xs);if(l!==null){Ht=l;return}if(i=i.sibling,i!==null){Ht=i;return}Ht=i=n}while(i!==null);Ir===0&&(Ir=5)}function Ix(n,i){do{var l=J2(n.alternate,n);if(l!==null){l.flags&=32767,Ht=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){Ht=n;return}Ht=n=l}while(n!==null);Ir=6,Ht=null}function Bx(n,i,l,u,g,m,T,O,ee){n.cancelPendingCommit=null;do Jc();while(cn!==0);if((cr&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Du,sr(n,l,m,T,O,ee),n===Tr&&(Ht=Tr=null,Xt=0),Vi=i,wa=n,Yi=l,Lf=m,Pf=g,jx=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,d_(bt,function(){return zx(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=re.T,re.T=null,g=ye.p,ye.p=2,T=cr,cr|=4;try{Z2(n,i,l)}finally{cr=T,ye.p=g,re.T=u}}cn=1,Mx(),Fx(),Lx()}}function Mx(){if(cn===1){cn=0;var n=wa,i=Vi,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=re.T,re.T=null;var u=ye.p;ye.p=2;var g=cr;cr|=4;try{yx(i,n);var m=th,T=Tp(n.containerInfo),O=m.focusedElem,ee=m.selectionRange;if(T!==O&&O&&O.ownerDocument&&wp(O.ownerDocument.documentElement,O)){if(ee!==null&&ku(O)){var _e=ee.start,Fe=ee.end;if(Fe===void 0&&(Fe=_e),"selectionStart"in O)O.selectionStart=_e,O.selectionEnd=Math.min(Fe,O.value.length);else{var ze=O.ownerDocument||document,Te=ze&&ze.defaultView||window;if(Te.getSelection){var je=Te.getSelection(),Ct=O.textContent.length,Tt=Math.min(ee.start,Ct),yr=ee.end===void 0?Tt:Math.min(ee.end,Ct);!je.extend&&Tt>yr&&(T=yr,yr=Tt,Tt=T);var he=Sp(O,Tt),ae=Sp(O,yr);if(he&&ae&&(je.rangeCount!==1||je.anchorNode!==he.node||je.anchorOffset!==he.offset||je.focusNode!==ae.node||je.focusOffset!==ae.offset)){var ve=ze.createRange();ve.setStart(he.node,he.offset),je.removeAllRanges(),Tt>yr?(je.addRange(ve),je.extend(ae.node,ae.offset)):(ve.setEnd(ae.node,ae.offset),je.addRange(ve))}}}}for(ze=[],je=O;je=je.parentNode;)je.nodeType===1&&ze.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ze.length;O++){var Le=ze[O];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}dd=!!eh,th=eh=null}finally{cr=g,ye.p=u,re.T=l}}n.current=i,cn=2}}function Fx(){if(cn===2){cn=0;var n=wa,i=Vi,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=re.T,re.T=null;var u=ye.p;ye.p=2;var g=cr;cr|=4;try{px(n,i.alternate,i)}finally{cr=g,ye.p=u,re.T=l}}cn=3}}function Lx(){if(cn===4||cn===3){cn=0,st();var n=wa,i=Vi,l=Yi,u=jx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,Vi=wa=null,Px(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(Sa=null),wn(l),i=i.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(br,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=re.T,g=ye.p,ye.p=2,re.T=null;try{for(var m=n.onRecoverableError,T=0;T<u.length;T++){var O=u[T];m(O.value,{componentStack:O.stack})}}finally{re.T=i,ye.p=g}}(Yi&3)!==0&&Jc(),Os(n),g=n.pendingLanes,(l&4194090)!==0&&(g&42)!==0?n===zf?gl++:(gl=0,zf=n):gl=0,xl(0)}}function Px(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ko(i)))}function Jc(n){return Mx(),Fx(),Lx(),zx()}function zx(){if(cn!==5)return!1;var n=wa,i=Lf;Lf=0;var l=wn(Yi),u=re.T,g=ye.p;try{ye.p=32>l?32:l,re.T=null,l=Pf,Pf=null;var m=wa,T=Yi;if(cn=0,Vi=wa=null,Yi=0,(cr&6)!==0)throw Error(s(331));var O=cr;if(cr|=4,wx(m.current),bx(m,m.current,T,l),cr=O,xl(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(br,m)}catch{}return!0}finally{ye.p=g,re.T=u,Px(n,i)}}function Ux(n,i,l){i=rs(l,i),i=yf(n.stateNode,i,2),n=ha(n,i,2),n!==null&&(Rt(n,2),Os(n))}function Sr(n,i,l){if(n.tag===3)Ux(n,n,l);else for(;i!==null;){if(i.tag===3){Ux(i,n,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Sa===null||!Sa.has(u))){n=rs(l,n),l=Hg(2),u=ha(i,l,2),u!==null&&(Gg(l,u,i,n),Rt(u,2),Os(u));break}}i=i.return}}function $f(n,i,l){var u=n.pingCache;if(u===null){u=n.pingCache=new r_;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(l)||(If=!0,g.add(l),n=o_.bind(null,n,i,l),i.then(n,n))}function o_(n,i,l){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Tr===n&&(Xt&l)===l&&(Ir===4||Ir===3&&(Xt&62914560)===Xt&&300>Re()-Ff?(cr&2)===0&&Ki(n,0):Bf|=l,Gi===Xt&&(Gi=0)),Os(n)}function Wx(n,i){i===0&&(i=Ee()),n=Ri(n,i),n!==null&&(Rt(n,i),Os(n))}function l_(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Wx(n,l)}function c_(n,i){var l=0;switch(n.tag){case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),Wx(n,l)}function d_(n,i){return rt(n,i)}var Zc=null,Qi=null,Hf=!1,ed=!1,Gf=!1,ii=0;function Os(n){n!==Qi&&n.next===null&&(Qi===null?Zc=Qi=n:Qi=Qi.next=n),ed=!0,Hf||(Hf=!0,f_())}function xl(n,i){if(!Gf&&ed){Gf=!0;do for(var l=!1,u=Zc;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var m=0;else{var T=u.suspendedLanes,O=u.pingedLanes;m=(1<<31-Ge(42|n)+1)-1,m&=g&~(T&~O),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Gx(u,m))}else m=Xt,m=Rr(u,u===Tr?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||$t(u,m)||(l=!0,Gx(u,m));u=u.next}while(l);Gf=!1}}function u_(){qx()}function qx(){ed=Hf=!1;var n=0;ii!==0&&(b_()&&(n=ii),ii=0);for(var i=Re(),l=null,u=Zc;u!==null;){var g=u.next,m=$x(u,i);m===0?(u.next=null,l===null?Zc=g:l.next=g,g===null&&(Qi=l)):(l=u,(n!==0||(m&3)!==0)&&(ed=!0)),u=g}xl(n)}function $x(n,i){for(var l=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var T=31-Ge(m),O=1<<T,ee=g[T];ee===-1?((O&l)===0||(O&u)!==0)&&(g[T]=or(O,i)):ee<=i&&(n.expiredLanes|=O),m&=~O}if(i=Tr,l=Xt,l=Rr(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,l===0||n===i&&(dr===2||dr===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&V(u),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||$t(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(u!==null&&V(u),wn(l)){case 2:case 8:l=Dt;break;case 32:l=bt;break;case 268435456:l=nt;break;default:l=bt}return u=Hx.bind(null,n),l=rt(l,u),n.callbackPriority=i,n.callbackNode=l,i}return u!==null&&u!==null&&V(u),n.callbackPriority=2,n.callbackNode=null,2}function Hx(n,i){if(cn!==0&&cn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Jc()&&n.callbackNode!==l)return null;var u=Xt;return u=Rr(n,n===Tr?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(kx(n,u,i),$x(n,Re()),n.callbackNode!=null&&n.callbackNode===l?Hx.bind(null,n):null)}function Gx(n,i){if(Jc())return null;kx(n,i,!0)}function f_(){S_(function(){(cr&6)!==0?rt(xt,u_):qx()})}function Vf(){return ii===0&&(ii=se()),ii}function Vx(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:uc(""+n)}function Yx(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function h_(n,i,l,u,g){if(i==="submit"&&l&&l.stateNode===g){var m=Vx((g[gr]||null).action),T=u.submitter;T&&(i=(i=T[gr]||null)?Vx(i.formAction):T.getAttribute("formAction"),i!==null&&(m=i,T=null));var O=new gc("action","action",null,u,g);n.push({event:O,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ii!==0){var ee=T?Yx(g,T):new FormData(g);hf(l,{pending:!0,data:ee,method:g.method,action:m},null,ee)}}else typeof m=="function"&&(O.preventDefault(),ee=T?Yx(g,T):new FormData(g),hf(l,{pending:!0,data:ee,method:g.method,action:m},m,ee))},currentTarget:g}]})}}for(var Yf=0;Yf<Ru.length;Yf++){var Kf=Ru[Yf],p_=Kf.toLowerCase(),g_=Kf[0].toUpperCase()+Kf.slice(1);gs(p_,"on"+g_)}gs(kp,"onAnimationEnd"),gs(Cp,"onAnimationIteration"),gs(Ap,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(D2,"onTransitionRun"),gs(O2,"onTransitionStart"),gs(I2,"onTransitionCancel"),gs(Np,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),We("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),We("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),We("onBeforeInput",["compositionend","keypress","textInput","paste"]),We("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),We("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),We("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ml));function Kx(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var u=n[l],g=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var T=u.length-1;0<=T;T--){var O=u[T],ee=O.instance,_e=O.currentTarget;if(O=O.listener,ee!==m&&g.isPropagationStopped())break e;m=O,g.currentTarget=_e;try{m(g)}catch(Fe){Uc(Fe)}g.currentTarget=null,m=ee}else for(T=0;T<u.length;T++){if(O=u[T],ee=O.instance,_e=O.currentTarget,O=O.listener,ee!==m&&g.isPropagationStopped())break e;m=O,g.currentTarget=_e;try{m(g)}catch(Fe){Uc(Fe)}g.currentTarget=null,m=ee}}}}function Gt(n,i){var l=i[ps];l===void 0&&(l=i[ps]=new Set);var u=n+"__bubble";l.has(u)||(Xx(i,n,2,!1),l.add(u))}function Xf(n,i,l){var u=0;i&&(u|=4),Xx(l,n,u,i)}var td="_reactListening"+Math.random().toString(36).slice(2);function Qf(n){if(!n[td]){n[td]=!0,Se.forEach(function(l){l!=="selectionchange"&&(x_.has(l)||Xf(l,!1,n),Xf(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[td]||(i[td]=!0,Xf("selectionchange",!1,i))}}function Xx(n,i,l,u){switch(bm(i)){case 2:var g=q_;break;case 8:g=$_;break;default:g=uh}l=g.bind(null,i,l,n),g=void 0,!yu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(i,l,{capture:!0,passive:g}):n.addEventListener(i,l,!0):g!==void 0?n.addEventListener(i,l,{passive:g}):n.addEventListener(i,l,!1)}function Jf(n,i,l,u,g){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var O=u.stateNode.containerInfo;if(O===g)break;if(T===4)for(T=u.return;T!==null;){var ee=T.tag;if((ee===3||ee===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;O!==null;){if(T=W(O),T===null)return;if(ee=T.tag,ee===5||ee===6||ee===26||ee===27){u=m=T;continue e}O=O.parentNode}}u=u.return}np(function(){var _e=m,Fe=xu(l),ze=[];e:{var Te=Rp.get(n);if(Te!==void 0){var je=gc,Ct=n;switch(n){case"keypress":if(hc(l)===0)break e;case"keydown":case"keyup":je=d2;break;case"focusin":Ct="focus",je=Su;break;case"focusout":Ct="blur",je=Su;break;case"beforeblur":case"afterblur":je=Su;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=Jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=h2;break;case kp:case Cp:case Ap:je=t2;break;case Np:je=g2;break;case"scroll":case"scrollend":je=Xb;break;case"wheel":je=m2;break;case"copy":case"cut":case"paste":je=n2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=lp;break;case"toggle":case"beforetoggle":je=v2}var Tt=(i&4)!==0,yr=!Tt&&(n==="scroll"||n==="scrollend"),he=Tt?Te!==null?Te+"Capture":null:Te;Tt=[];for(var ae=_e,ve;ae!==null;){var Le=ae;if(ve=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||ve===null||he===null||(Le=Mo(ae,he),Le!=null&&Tt.push(yl(ae,Le,ve))),yr)break;ae=ae.return}0<Tt.length&&(Te=new je(Te,Ct,null,l,Fe),ze.push({event:Te,listeners:Tt}))}}if((i&7)===0){e:{if(Te=n==="mouseover"||n==="pointerover",je=n==="mouseout"||n==="pointerout",Te&&l!==gu&&(Ct=l.relatedTarget||l.fromElement)&&(W(Ct)||Ct[Wn]))break e;if((je||Te)&&(Te=Fe.window===Fe?Fe:(Te=Fe.ownerDocument)?Te.defaultView||Te.parentWindow:window,je?(Ct=l.relatedTarget||l.toElement,je=_e,Ct=Ct?W(Ct):null,Ct!==null&&(yr=c(Ct),Tt=Ct.tag,Ct!==yr||Tt!==5&&Tt!==27&&Tt!==6)&&(Ct=null)):(je=null,Ct=_e),je!==Ct)){if(Tt=ip,Le="onMouseLeave",he="onMouseEnter",ae="mouse",(n==="pointerout"||n==="pointerover")&&(Tt=lp,Le="onPointerLeave",he="onPointerEnter",ae="pointer"),yr=je==null?Te:be(je),ve=Ct==null?Te:be(Ct),Te=new Tt(Le,ae+"leave",je,l,Fe),Te.target=yr,Te.relatedTarget=ve,Le=null,W(Fe)===_e&&(Tt=new Tt(he,ae+"enter",Ct,l,Fe),Tt.target=ve,Tt.relatedTarget=yr,Le=Tt),yr=Le,je&&Ct)t:{for(Tt=je,he=Ct,ae=0,ve=Tt;ve;ve=Ji(ve))ae++;for(ve=0,Le=he;Le;Le=Ji(Le))ve++;for(;0<ae-ve;)Tt=Ji(Tt),ae--;for(;0<ve-ae;)he=Ji(he),ve--;for(;ae--;){if(Tt===he||he!==null&&Tt===he.alternate)break t;Tt=Ji(Tt),he=Ji(he)}Tt=null}else Tt=null;je!==null&&Qx(ze,Te,je,Tt,!1),Ct!==null&&yr!==null&&Qx(ze,yr,Ct,Tt,!0)}}e:{if(Te=_e?be(_e):window,je=Te.nodeName&&Te.nodeName.toLowerCase(),je==="select"||je==="input"&&Te.type==="file")var pt=xp;else if(pp(Te))if(mp)pt=A2;else{pt=k2;var qt=E2}else je=Te.nodeName,!je||je.toLowerCase()!=="input"||Te.type!=="checkbox"&&Te.type!=="radio"?_e&&Pr(_e.elementType)&&(pt=xp):pt=C2;if(pt&&(pt=pt(n,_e))){gp(ze,pt,l,Fe);break e}qt&&qt(n,Te,_e),n==="focusout"&&_e&&Te.type==="number"&&_e.memoizedProps.value!=null&&Je(Te,"number",Te.value)}switch(qt=_e?be(_e):window,n){case"focusin":(pp(qt)||qt.contentEditable==="true")&&(Ci=qt,Cu=_e,$o=null);break;case"focusout":$o=Cu=Ci=null;break;case"mousedown":Au=!0;break;case"contextmenu":case"mouseup":case"dragend":Au=!1,jp(ze,l,Fe);break;case"selectionchange":if(R2)break;case"keydown":case"keyup":jp(ze,l,Fe)}var yt;if(Tu)e:{switch(n){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else ki?fp(n,l)&&(kt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(kt="onCompositionStart");kt&&(cp&&l.locale!=="ko"&&(ki||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&ki&&(yt=sp()):(ca=Fe,vu="value"in ca?ca.value:ca.textContent,ki=!0)),qt=rd(_e,kt),0<qt.length&&(kt=new op(kt,n,null,l,Fe),ze.push({event:kt,listeners:qt}),yt?kt.data=yt:(yt=hp(l),yt!==null&&(kt.data=yt)))),(yt=_2?S2(n,l):w2(n,l))&&(kt=rd(_e,"onBeforeInput"),0<kt.length&&(qt=new op("onBeforeInput","beforeinput",null,l,Fe),ze.push({event:qt,listeners:kt}),qt.data=yt)),h_(ze,n,_e,l,Fe)}Kx(ze,i)})}function yl(n,i,l){return{instance:n,listener:i,currentTarget:l}}function rd(n,i){for(var l=i+"Capture",u=[];n!==null;){var g=n,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=Mo(n,l),g!=null&&u.unshift(yl(n,g,m)),g=Mo(n,i),g!=null&&u.push(yl(n,g,m))),n.tag===3)return u;n=n.return}return[]}function Ji(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Qx(n,i,l,u,g){for(var m=i._reactName,T=[];l!==null&&l!==u;){var O=l,ee=O.alternate,_e=O.stateNode;if(O=O.tag,ee!==null&&ee===u)break;O!==5&&O!==26&&O!==27||_e===null||(ee=_e,g?(_e=Mo(l,m),_e!=null&&T.unshift(yl(l,_e,ee))):g||(_e=Mo(l,m),_e!=null&&T.push(yl(l,_e,ee)))),l=l.return}T.length!==0&&n.push({event:i,listeners:T})}var m_=/\r\n?/g,y_=/\u0000|\uFFFD/g;function Jx(n){return(typeof n=="string"?n:""+n).replace(m_,`
`).replace(y_,"")}function Zx(n,i){return i=Jx(i),Jx(n)===i}function nd(){}function mr(n,i,l,u,g,m){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||ft(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&ft(n,""+u);break;case"className":Qt(n,"class",u);break;case"tabIndex":Qt(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Qt(n,l,u);break;case"style":Wt(n,u,m);break;case"data":if(i!=="object"){Qt(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=uc(""+u),n.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(i!=="input"&&mr(n,i,"name",g.name,g,null),mr(n,i,"formEncType",g.formEncType,g,null),mr(n,i,"formMethod",g.formMethod,g,null),mr(n,i,"formTarget",g.formTarget,g,null)):(mr(n,i,"encType",g.encType,g,null),mr(n,i,"method",g.method,g,null),mr(n,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=uc(""+u),n.setAttribute(l,u);break;case"onClick":u!=null&&(n.onclick=nd);break;case"onScroll":u!=null&&Gt("scroll",n);break;case"onScrollEnd":u!=null&&Gt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}l=uc(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""+u):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":u===!0?n.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,u):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(l,u):n.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(l):n.setAttribute(l,u);break;case"popover":Gt("beforetoggle",n),Gt("toggle",n),Kt(n,"popover",u);break;case"xlinkActuate":Jt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Jt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Jt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Jt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Jt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Jt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Kt(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=In.get(l)||l,Kt(n,l,u))}}function Zf(n,i,l,u,g,m){switch(l){case"style":Wt(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"children":typeof u=="string"?ft(n,u):(typeof u=="number"||typeof u=="bigint")&&ft(n,""+u);break;case"onScroll":u!=null&&Gt("scroll",n);break;case"onScrollEnd":u!=null&&Gt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=nd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!we.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),i=l.slice(2,g?l.length-7:void 0),m=n[gr]||null,m=m!=null?m[l]:null,typeof m=="function"&&n.removeEventListener(i,m,g),typeof u=="function")){typeof m!="function"&&m!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,u,g);break e}l in n?n[l]=u:u===!0?n.setAttribute(l,""):Kt(n,l,u)}}}function dn(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",n),Gt("load",n);var u=!1,g=!1,m;for(m in l)if(l.hasOwnProperty(m)){var T=l[m];if(T!=null)switch(m){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:mr(n,i,m,T,l,null)}}g&&mr(n,i,"srcSet",l.srcSet,l,null),u&&mr(n,i,"src",l.src,l,null);return;case"input":Gt("invalid",n);var O=m=T=g=null,ee=null,_e=null;for(u in l)if(l.hasOwnProperty(u)){var Fe=l[u];if(Fe!=null)switch(u){case"name":g=Fe;break;case"type":T=Fe;break;case"checked":ee=Fe;break;case"defaultChecked":_e=Fe;break;case"value":m=Fe;break;case"defaultValue":O=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(s(137,i));break;default:mr(n,i,u,Fe,l,null)}}Xe(n,m,O,ee,_e,T,g,!1),zt(n);return;case"select":Gt("invalid",n),u=T=m=null;for(g in l)if(l.hasOwnProperty(g)&&(O=l[g],O!=null))switch(g){case"value":m=O;break;case"defaultValue":T=O;break;case"multiple":u=O;default:mr(n,i,g,O,l,null)}i=m,l=T,n.multiple=!!u,i!=null?Ye(n,!!u,i,!1):l!=null&&Ye(n,!!u,l,!0);return;case"textarea":Gt("invalid",n),m=g=u=null;for(T in l)if(l.hasOwnProperty(T)&&(O=l[T],O!=null))switch(T){case"value":u=O;break;case"defaultValue":g=O;break;case"children":m=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(91));break;default:mr(n,i,T,O,l,null)}ct(n,u,g,m),zt(n);return;case"option":for(ee in l)if(l.hasOwnProperty(ee)&&(u=l[ee],u!=null))switch(ee){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:mr(n,i,ee,u,l,null)}return;case"dialog":Gt("beforetoggle",n),Gt("toggle",n),Gt("cancel",n),Gt("close",n);break;case"iframe":case"object":Gt("load",n);break;case"video":case"audio":for(u=0;u<ml.length;u++)Gt(ml[u],n);break;case"image":Gt("error",n),Gt("load",n);break;case"details":Gt("toggle",n);break;case"embed":case"source":case"link":Gt("error",n),Gt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in l)if(l.hasOwnProperty(_e)&&(u=l[_e],u!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:mr(n,i,_e,u,l,null)}return;default:if(Pr(i)){for(Fe in l)l.hasOwnProperty(Fe)&&(u=l[Fe],u!==void 0&&Zf(n,i,Fe,u,l,void 0));return}}for(O in l)l.hasOwnProperty(O)&&(u=l[O],u!=null&&mr(n,i,O,u,l,null))}function v_(n,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,T=null,O=null,ee=null,_e=null,Fe=null;for(je in l){var ze=l[je];if(l.hasOwnProperty(je)&&ze!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":ee=ze;default:u.hasOwnProperty(je)||mr(n,i,je,null,u,ze)}}for(var Te in u){var je=u[Te];if(ze=l[Te],u.hasOwnProperty(Te)&&(je!=null||ze!=null))switch(Te){case"type":m=je;break;case"name":g=je;break;case"checked":_e=je;break;case"defaultChecked":Fe=je;break;case"value":T=je;break;case"defaultValue":O=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(s(137,i));break;default:je!==ze&&mr(n,i,Te,je,u,ze)}}ge(n,T,O,ee,_e,Fe,m,g);return;case"select":je=T=O=Te=null;for(m in l)if(ee=l[m],l.hasOwnProperty(m)&&ee!=null)switch(m){case"value":break;case"multiple":je=ee;default:u.hasOwnProperty(m)||mr(n,i,m,null,u,ee)}for(g in u)if(m=u[g],ee=l[g],u.hasOwnProperty(g)&&(m!=null||ee!=null))switch(g){case"value":Te=m;break;case"defaultValue":O=m;break;case"multiple":T=m;default:m!==ee&&mr(n,i,g,m,u,ee)}i=O,l=T,u=je,Te!=null?Ye(n,!!l,Te,!1):!!u!=!!l&&(i!=null?Ye(n,!!l,i,!0):Ye(n,!!l,l?[]:"",!1));return;case"textarea":je=Te=null;for(O in l)if(g=l[O],l.hasOwnProperty(O)&&g!=null&&!u.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:mr(n,i,O,null,u,g)}for(T in u)if(g=u[T],m=l[T],u.hasOwnProperty(T)&&(g!=null||m!=null))switch(T){case"value":Te=g;break;case"defaultValue":je=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==m&&mr(n,i,T,g,u,m)}Qe(n,Te,je);return;case"option":for(var Ct in l)if(Te=l[Ct],l.hasOwnProperty(Ct)&&Te!=null&&!u.hasOwnProperty(Ct))switch(Ct){case"selected":n.selected=!1;break;default:mr(n,i,Ct,null,u,Te)}for(ee in u)if(Te=u[ee],je=l[ee],u.hasOwnProperty(ee)&&Te!==je&&(Te!=null||je!=null))switch(ee){case"selected":n.selected=Te&&typeof Te!="function"&&typeof Te!="symbol";break;default:mr(n,i,ee,Te,u,je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in l)Te=l[Tt],l.hasOwnProperty(Tt)&&Te!=null&&!u.hasOwnProperty(Tt)&&mr(n,i,Tt,null,u,Te);for(_e in u)if(Te=u[_e],je=l[_e],u.hasOwnProperty(_e)&&Te!==je&&(Te!=null||je!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(s(137,i));break;default:mr(n,i,_e,Te,u,je)}return;default:if(Pr(i)){for(var yr in l)Te=l[yr],l.hasOwnProperty(yr)&&Te!==void 0&&!u.hasOwnProperty(yr)&&Zf(n,i,yr,void 0,u,Te);for(Fe in u)Te=u[Fe],je=l[Fe],!u.hasOwnProperty(Fe)||Te===je||Te===void 0&&je===void 0||Zf(n,i,Fe,Te,u,je);return}}for(var he in l)Te=l[he],l.hasOwnProperty(he)&&Te!=null&&!u.hasOwnProperty(he)&&mr(n,i,he,null,u,Te);for(ze in u)Te=u[ze],je=l[ze],!u.hasOwnProperty(ze)||Te===je||Te==null&&je==null||mr(n,i,ze,Te,u,je)}var eh=null,th=null;function sd(n){return n.nodeType===9?n:n.ownerDocument}function em(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tm(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function rh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var nh=null;function b_(){var n=window.event;return n&&n.type==="popstate"?n===nh?!1:(nh=n,!0):(nh=null,!1)}var rm=typeof setTimeout=="function"?setTimeout:void 0,__=typeof clearTimeout=="function"?clearTimeout:void 0,nm=typeof Promise=="function"?Promise:void 0,S_=typeof queueMicrotask=="function"?queueMicrotask:typeof nm<"u"?function(n){return nm.resolve(null).then(n).catch(w_)}:rm;function w_(n){setTimeout(function(){throw n})}function ja(n){return n==="head"}function sm(n,i){var l=i,u=0,g=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(0<u&&8>u){l=u;var T=n.ownerDocument;if(l&1&&vl(T.documentElement),l&2&&vl(T.body),l&4)for(l=T.head,vl(l),T=l.firstChild;T;){var O=T.nextSibling,ee=T.nodeName;T[M]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=O}}if(g===0){n.removeChild(m),kl(i);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:u=l.charCodeAt(0)-48;else u=0;l=m}while(l);kl(i)}function sh(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":sh(l),F(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function T_(n,i,l,u){for(;n.nodeType===1;){var g=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[M])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ms(n.nextSibling),n===null)break}return null}function j_(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=ms(n.nextSibling),n===null))return null;return n}function ah(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function E_(n,i){var l=n.ownerDocument;if(n.data!=="$?"||l.readyState==="complete")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ms(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var ih=null;function am(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}function im(n,i,l){switch(i=sd(l),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function vl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);F(n)}var ls=new Map,om=new Set;function ad(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Qs=ye.d;ye.d={f:k_,r:C_,D:A_,C:N_,L:R_,m:D_,X:I_,S:O_,M:B_};function k_(){var n=Qs.f(),i=Xc();return n||i}function C_(n){var i=H(n);i!==null&&i.tag===5&&i.type==="form"?kg(i):Qs.r(n)}var Zi=typeof document>"u"?null:document;function lm(n,i,l){var u=Zi;if(u&&typeof i=="string"&&i){var g=C(i);g='link[rel="'+n+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),om.has(g)||(om.add(g),n={rel:n,crossOrigin:l,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),dn(i,"link",n),pe(i),u.head.appendChild(i)))}}function A_(n){Qs.D(n),lm("dns-prefetch",n,null)}function N_(n,i){Qs.C(n,i),lm("preconnect",n,i)}function R_(n,i,l){Qs.L(n,i,l);var u=Zi;if(u&&n&&i){var g='link[rel="preload"][as="'+C(i)+'"]';i==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+C(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+C(l.imageSizes)+'"]')):g+='[href="'+C(n)+'"]';var m=g;switch(i){case"style":m=eo(n);break;case"script":m=to(n)}ls.has(m)||(n=x({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),ls.set(m,n),u.querySelector(g)!==null||i==="style"&&u.querySelector(bl(m))||i==="script"&&u.querySelector(_l(m))||(i=u.createElement("link"),dn(i,"link",n),pe(i),u.head.appendChild(i)))}}function D_(n,i){Qs.m(n,i);var l=Zi;if(l&&n){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+C(u)+'"][href="'+C(n)+'"]',m=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=to(n)}if(!ls.has(m)&&(n=x({rel:"modulepreload",href:n},i),ls.set(m,n),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_l(m)))return}u=l.createElement("link"),dn(u,"link",n),pe(u),l.head.appendChild(u)}}}function O_(n,i,l){Qs.S(n,i,l);var u=Zi;if(u&&n){var g=De(u).hoistableStyles,m=eo(n);i=i||"default";var T=g.get(m);if(!T){var O={loading:0,preload:null};if(T=u.querySelector(bl(m)))O.loading=5;else{n=x({rel:"stylesheet",href:n,"data-precedence":i},l),(l=ls.get(m))&&oh(n,l);var ee=T=u.createElement("link");pe(ee),dn(ee,"link",n),ee._p=new Promise(function(_e,Fe){ee.onload=_e,ee.onerror=Fe}),ee.addEventListener("load",function(){O.loading|=1}),ee.addEventListener("error",function(){O.loading|=2}),O.loading|=4,id(T,i,u)}T={type:"stylesheet",instance:T,count:1,state:O},g.set(m,T)}}}function I_(n,i){Qs.X(n,i);var l=Zi;if(l&&n){var u=De(l).hoistableScripts,g=to(n),m=u.get(g);m||(m=l.querySelector(_l(g)),m||(n=x({src:n,async:!0},i),(i=ls.get(g))&&lh(n,i),m=l.createElement("script"),pe(m),dn(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function B_(n,i){Qs.M(n,i);var l=Zi;if(l&&n){var u=De(l).hoistableScripts,g=to(n),m=u.get(g);m||(m=l.querySelector(_l(g)),m||(n=x({src:n,async:!0,type:"module"},i),(i=ls.get(g))&&lh(n,i),m=l.createElement("script"),pe(m),dn(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function cm(n,i,l,u){var g=(g=me.current)?ad(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=eo(l.href),l=De(g).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=eo(l.href);var m=De(g).hoistableStyles,T=m.get(n);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,T),(m=g.querySelector(bl(n)))&&!m._p&&(T.instance=m,T.state.loading=5),ls.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ls.set(n,l),m||M_(g,n,l,T.state))),i&&u===null)throw Error(s(528,""));return T}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=to(l),l=De(g).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function eo(n){return'href="'+C(n)+'"'}function bl(n){return'link[rel="stylesheet"]['+n+"]"}function dm(n){return x({},n,{"data-precedence":n.precedence,precedence:null})}function M_(n,i,l,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),dn(i,"link",l),pe(i),n.head.appendChild(i))}function to(n){return'[src="'+C(n)+'"]'}function _l(n){return"script[async]"+n}function um(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+C(l.href)+'"]');if(u)return i.instance=u,pe(u),u;var g=x({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),pe(u),dn(u,"style",g),id(u,l.precedence,n),i.instance=u;case"stylesheet":g=eo(l.href);var m=n.querySelector(bl(g));if(m)return i.state.loading|=4,i.instance=m,pe(m),m;u=dm(l),(g=ls.get(g))&&oh(u,g),m=(n.ownerDocument||n).createElement("link"),pe(m);var T=m;return T._p=new Promise(function(O,ee){T.onload=O,T.onerror=ee}),dn(m,"link",u),i.state.loading|=4,id(m,l.precedence,n),i.instance=m;case"script":return m=to(l.src),(g=n.querySelector(_l(m)))?(i.instance=g,pe(g),g):(u=l,(g=ls.get(m))&&(u=x({},l),lh(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),pe(g),dn(g,"link",u),n.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,id(u,l.precedence,n));return i.instance}function id(n,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,m=g,T=0;T<u.length;T++){var O=u[T];if(O.dataset.precedence===i)m=O;else if(m!==g)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function oh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function lh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var od=null;function fm(n,i,l){if(od===null){var u=new Map,g=od=new Map;g.set(l,u)}else g=od,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(n))return u;for(u.set(n,null),l=l.getElementsByTagName(n),g=0;g<l.length;g++){var m=l[g];if(!(m[M]||m[Nt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(i)||"";T=n+T;var O=u.get(T);O?O.push(m):u.set(T,[m])}}return u}function hm(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function F_(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function pm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Sl=null;function L_(){}function P_(n,i,l){if(Sl===null)throw Error(s(475));var u=Sl;if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=eo(l.href),m=n.querySelector(bl(g));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=ld.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=m,pe(m);return}m=n.ownerDocument||n,l=dm(l),(g=ls.get(g))&&oh(l,g),m=m.createElement("link"),pe(m);var T=m;T._p=new Promise(function(O,ee){T.onload=O,T.onerror=ee}),dn(m,"link",l),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=ld.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function z_(){if(Sl===null)throw Error(s(475));var n=Sl;return n.stylesheets&&n.count===0&&ch(n,n.stylesheets),0<n.count?function(i){var l=setTimeout(function(){if(n.stylesheets&&ch(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(l)}}:null}function ld(){if(this.count--,this.count===0){if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var cd=null;function ch(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,cd=new Map,i.forEach(U_,n),cd=null,ld.call(n))}function U_(n,i){if(!(i.state.loading&4)){var l=cd.get(n);if(l)var u=l.get(null);else{l=new Map,cd.set(n,l);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var T=g[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),u=T)}u&&l.set(null,u)}g=i.instance,T=g.getAttribute("data-precedence"),m=l.get(T)||u,m===u&&l.set(null,g),l.set(T,g),this.count++,u=ld.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),m?m.parentNode.insertBefore(g,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),i.state.loading|=4}}var wl={$$typeof:I,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function W_(n,i,l,u,g,m,T,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.hiddenUpdates=mt(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function gm(n,i,l,u,g,m,T,O,ee,_e,Fe,ze){return n=new W_(n,i,l,T,O,ee,_e,ze),i=1,m===!0&&(i|=24),m=Hn(3,null,null,i),n.current=m,m.stateNode=n,i=qu(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:l,cache:i},Vu(m),n}function xm(n){return n?(n=Di,n):Di}function mm(n,i,l,u,g,m){g=xm(g),u.context===null?u.context=g:u.pendingContext=g,u=fa(i),u.payload={element:l},m=m===void 0?null:m,m!==null&&(u.callback=m),l=ha(n,u,i),l!==null&&(Xn(l,n,i),Zo(l,n,i))}function ym(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function dh(n,i){ym(n,i),(n=n.alternate)&&ym(n,i)}function vm(n){if(n.tag===13){var i=Ri(n,67108864);i!==null&&Xn(i,n,67108864),dh(n,67108864)}}var dd=!0;function q_(n,i,l,u){var g=re.T;re.T=null;var m=ye.p;try{ye.p=2,uh(n,i,l,u)}finally{ye.p=m,re.T=g}}function $_(n,i,l,u){var g=re.T;re.T=null;var m=ye.p;try{ye.p=8,uh(n,i,l,u)}finally{ye.p=m,re.T=g}}function uh(n,i,l,u){if(dd){var g=fh(u);if(g===null)Jf(n,i,u,ud,l),_m(n,u);else if(G_(g,n,i,l,u))u.stopPropagation();else if(_m(n,u),i&4&&-1<H_.indexOf(n)){for(;g!==null;){var m=H(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=nr(m.pendingLanes);if(T!==0){var O=m;for(O.pendingLanes|=2,O.entangledLanes|=2;T;){var ee=1<<31-Ge(T);O.entanglements[1]|=ee,T&=~ee}Os(m),(cr&6)===0&&(Yc=Re()+500,xl(0))}}break;case 13:O=Ri(m,2),O!==null&&Xn(O,m,2),Xc(),dh(m,2)}if(m=fh(u),m===null&&Jf(n,i,u,ud,l),m===g)break;g=m}g!==null&&u.stopPropagation()}else Jf(n,i,u,null,l)}}function fh(n){return n=xu(n),hh(n)}var ud=null;function hh(n){if(ud=null,n=W(n),n!==null){var i=c(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=d(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return ud=n,null}function bm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ht()){case xt:return 2;case Dt:return 8;case bt:case Ie:return 32;case nt:return 268435456;default:return 32}default:return 32}}var ph=!1,Ea=null,ka=null,Ca=null,Tl=new Map,jl=new Map,Aa=[],H_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _m(n,i){switch(n){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":ka=null;break;case"mouseover":case"mouseout":Ca=null;break;case"pointerover":case"pointerout":Tl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(i.pointerId)}}function El(n,i,l,u,g,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:m,targetContainers:[g]},i!==null&&(i=H(i),i!==null&&vm(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function G_(n,i,l,u,g){switch(i){case"focusin":return Ea=El(Ea,n,i,l,u,g),!0;case"dragenter":return ka=El(ka,n,i,l,u,g),!0;case"mouseover":return Ca=El(Ca,n,i,l,u,g),!0;case"pointerover":var m=g.pointerId;return Tl.set(m,El(Tl.get(m)||null,n,i,l,u,g)),!0;case"gotpointercapture":return m=g.pointerId,jl.set(m,El(jl.get(m)||null,n,i,l,u,g)),!0}return!1}function Sm(n){var i=W(n.target);if(i!==null){var l=c(i);if(l!==null){if(i=l.tag,i===13){if(i=d(l),i!==null){n.blockedOn=i,Tn(n.priority,function(){if(l.tag===13){var u=Kn();u=Ot(u);var g=Ri(l,u);g!==null&&Xn(g,l,u),dh(l,u)}});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fd(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=fh(n.nativeEvent);if(l===null){l=n.nativeEvent;var u=new l.constructor(l.type,l);gu=u,l.target.dispatchEvent(u),gu=null}else return i=H(l),i!==null&&vm(i),n.blockedOn=l,!1;i.shift()}return!0}function wm(n,i,l){fd(n)&&l.delete(i)}function V_(){ph=!1,Ea!==null&&fd(Ea)&&(Ea=null),ka!==null&&fd(ka)&&(ka=null),Ca!==null&&fd(Ca)&&(Ca=null),Tl.forEach(wm),jl.forEach(wm)}function hd(n,i){n.blockedOn===i&&(n.blockedOn=null,ph||(ph=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,V_)))}var pd=null;function Tm(n){pd!==n&&(pd=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){pd===n&&(pd=null);for(var i=0;i<n.length;i+=3){var l=n[i],u=n[i+1],g=n[i+2];if(typeof u!="function"){if(hh(u||l)===null)continue;break}var m=H(l);m!==null&&(n.splice(i,3),i-=3,hf(m,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function kl(n){function i(ee){return hd(ee,n)}Ea!==null&&hd(Ea,n),ka!==null&&hd(ka,n),Ca!==null&&hd(Ca,n),Tl.forEach(i),jl.forEach(i);for(var l=0;l<Aa.length;l++){var u=Aa[l];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Aa.length&&(l=Aa[0],l.blockedOn===null);)Sm(l),l.blockedOn===null&&Aa.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],m=l[u+1],T=g[gr]||null;if(typeof m=="function")T||Tm(l);else if(T){var O=null;if(m&&m.hasAttribute("formAction")){if(g=m,T=m[gr]||null)O=T.formAction;else if(hh(g)!==null)continue}else O=T.action;typeof O=="function"?l[u+1]=O:(l.splice(u,3),u-=3),Tm(l)}}}function gh(n){this._internalRoot=n}gd.prototype.render=gh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,u=Kn();mm(l,u,n,i,null,null)},gd.prototype.unmount=gh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;mm(n.current,2,null,n,null,null),Xc(),i[Wn]=null}};function gd(n){this._internalRoot=n}gd.prototype.unstable_scheduleHydration=function(n){if(n){var i=Er();n={blockedOn:null,target:n,priority:i};for(var l=0;l<Aa.length&&i!==0&&i<Aa[l].priority;l++);Aa.splice(l,0,n),l===0&&Sm(n)}};var jm=t.version;if(jm!=="19.1.1")throw Error(s(527,jm,"19.1.1"));ye.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=h(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var Y_={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{br=xd.inject(Y_),Pt=xd}catch{}}return Al.createRoot=function(n,i){if(!o(n))throw Error(s(299));var l=!1,u="",g=Ug,m=Wg,T=qg,O=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(O=i.unstable_transitionCallbacks)),i=gm(n,1,!1,null,null,l,u,g,m,T,O,null),n[Wn]=i.current,Qf(n),new gh(i)},Al.hydrateRoot=function(n,i,l){if(!o(n))throw Error(s(299));var u=!1,g="",m=Ug,T=Wg,O=qg,ee=null,_e=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(O=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(ee=l.unstable_transitionCallbacks),l.formState!==void 0&&(_e=l.formState)),i=gm(n,1,!0,i,l??null,u,g,m,T,O,ee,_e),i.context=xm(null),l=i.current,u=Kn(),u=Ot(u),g=fa(u),g.callback=null,ha(l,g,u),l=u,i.current.lanes=l,Rt(i,l),Os(i),n[Wn]=i.current,Qf(n),new gd(i)},Al.version="19.1.1",Al}var Bm;function aS(){if(Bm)return yh.exports;Bm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yh.exports=sS(),yh.exports}var iS=aS();const oS=h0(iS);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mm="popstate";function lS(e={}){function t(s,o){let{pathname:c,search:d,hash:f}=s.location;return qh("",{pathname:c,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){return typeof o=="string"?o:Hl(o)}return dS(t,r,null,e)}function Nr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cS(){return Math.random().toString(36).substring(2,10)}function Fm(e,t){return{usr:e.state,key:e.key,idx:t}}function qh(e,t,r=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ko(t):t,state:r,key:t&&t.key||s||cS()}}function Hl({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ko(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function dS(e,t,r,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,f="POP",h=null,p=x();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function x(){return(d.state||{idx:null}).idx}function y(){f="POP";let S=x(),N=S==null?null:S-p;p=S,h&&h({action:f,location:_.location,delta:N})}function v(S,N){f="PUSH";let R=qh(_.location,S,N);p=x()+1;let I=Fm(R,p),G=_.createHref(R);try{d.pushState(I,"",G)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;o.location.assign(G)}c&&h&&h({action:f,location:_.location,delta:1})}function b(S,N){f="REPLACE";let R=qh(_.location,S,N);p=x();let I=Fm(R,p),G=_.createHref(R);d.replaceState(I,"",G),c&&h&&h({action:f,location:_.location,delta:0})}function w(S){return uS(S)}let _={get action(){return f},get location(){return e(o,d)},listen(S){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(Mm,y),h=S,()=>{o.removeEventListener(Mm,y),h=null}},createHref(S){return t(o,S)},createURL:w,encodeLocation(S){let N=w(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:b,go(S){return d.go(S)}};return _}function uS(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Nr(r,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:Hl(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function xy(e,t,r="/"){return fS(e,t,r,!1)}function fS(e,t,r,s){let o=typeof t=="string"?ko(t):t,c=aa(o.pathname||"/",r);if(c==null)return null;let d=my(e);hS(d);let f=null;for(let h=0;f==null&&h<d.length;++h){let p=TS(c);f=SS(d[h],p,s)}return f}function my(e,t=[],r=[],s="",o=!1){let c=(d,f,h=o,p)=>{let x={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(s)&&h)return;Nr(x.relativePath.startsWith(s),`Absolute route path "${x.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(s.length)}let y=ta([s,x.relativePath]),v=r.concat(x);d.children&&d.children.length>0&&(Nr(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),my(d.children,t,v,y,h)),!(d.path==null&&!d.index)&&t.push({path:y,score:bS(y,d.index),routesMeta:v})};return e.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))c(d,f);else for(let h of yy(d.path))c(d,f,!0,h)}),t}function yy(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,o=r.endsWith("?"),c=r.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=yy(s.join("/")),f=[];return f.push(...d.map(h=>h===""?c:[c,h].join("/"))),o&&f.push(...d),f.map(h=>e.startsWith("/")&&h===""?"/":h)}function hS(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:_S(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var pS=/^:[\w-]+$/,gS=3,xS=2,mS=1,yS=10,vS=-2,Lm=e=>e==="*";function bS(e,t){let r=e.split("/"),s=r.length;return r.some(Lm)&&(s+=vS),t&&(s+=xS),r.filter(o=>!Lm(o)).reduce((o,c)=>o+(pS.test(c)?gS:c===""?mS:yS),s)}function _S(e,t){return e.length===t.length&&e.slice(0,-1).every((s,o)=>s===t[o])?e[e.length-1]-t[t.length-1]:0}function SS(e,t,r=!1){let{routesMeta:s}=e,o={},c="/",d=[];for(let f=0;f<s.length;++f){let h=s[f],p=f===s.length-1,x=c==="/"?t:t.slice(c.length)||"/",y=Md({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},x),v=h.route;if(!y&&p&&r&&!s[s.length-1].route.index&&(y=Md({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},x)),!y)return null;Object.assign(o,y.params),d.push({params:o,pathname:ta([c,y.pathname]),pathnameBase:CS(ta([c,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(c=ta([c,y.pathnameBase]))}return d}function Md(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=wS(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((p,{paramName:x,isOptional:y},v)=>{if(x==="*"){let w=f[v]||"";d=c.slice(0,c.length-w.length).replace(/(.)\/+$/,"$1")}const b=f[v];return y&&!b?p[x]=void 0:p[x]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:d,pattern:e}}function wS(e,t=!1,r=!0){fs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,h)=>(s.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),s]}function TS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function aa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function jS(e,t="/"){let{pathname:r,search:s="",hash:o=""}=typeof e=="string"?ko(e):e;return{pathname:r?r.startsWith("/")?r:ES(r,t):t,search:AS(s),hash:NS(o)}}function ES(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Sh(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kS(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function g0(e){let t=kS(e);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function x0(e,t,r,s=!1){let o;typeof e=="string"?o=ko(e):(o={...e},Nr(!o.pathname||!o.pathname.includes("?"),Sh("?","pathname","search",o)),Nr(!o.pathname||!o.pathname.includes("#"),Sh("#","pathname","hash",o)),Nr(!o.search||!o.search.includes("#"),Sh("#","search","hash",o)));let c=e===""||o.pathname==="",d=c?"/":o.pathname,f;if(d==null)f=r;else{let y=t.length-1;if(!s&&d.startsWith("..")){let v=d.split("/");for(;v[0]==="..";)v.shift(),y-=1;o.pathname=v.join("/")}f=y>=0?t[y]:"/"}let h=jS(o,f),p=d&&d!=="/"&&d.endsWith("/"),x=(c||d===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(p||x)&&(h.pathname+="/"),h}var ta=e=>e.join("/").replace(/\/\/+/g,"/"),CS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,NS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function RS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var vy=["POST","PUT","PATCH","DELETE"];new Set(vy);var DS=["GET",...vy];new Set(DS);var Co=j.createContext(null);Co.displayName="DataRouter";var ru=j.createContext(null);ru.displayName="DataRouterState";j.createContext(!1);var by=j.createContext({isTransitioning:!1});by.displayName="ViewTransition";var OS=j.createContext(new Map);OS.displayName="Fetchers";var IS=j.createContext(null);IS.displayName="Await";var js=j.createContext(null);js.displayName="Navigation";var tc=j.createContext(null);tc.displayName="Location";var Es=j.createContext({outlet:null,matches:[],isDataRoute:!1});Es.displayName="Route";var m0=j.createContext(null);m0.displayName="RouteError";function BS(e,{relative:t}={}){Nr(Ao(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=j.useContext(js),{hash:o,pathname:c,search:d}=rc(e,{relative:t}),f=c;return r!=="/"&&(f=c==="/"?r:ta([r,c])),s.createHref({pathname:f,search:d,hash:o})}function Ao(){return j.useContext(tc)!=null}function ks(){return Nr(Ao(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(tc).location}var _y="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sy(e){j.useContext(js).static||j.useLayoutEffect(e)}function Cs(){let{isDataRoute:e}=j.useContext(Es);return e?KS():MS()}function MS(){Nr(Ao(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(Co),{basename:t,navigator:r}=j.useContext(js),{matches:s}=j.useContext(Es),{pathname:o}=ks(),c=JSON.stringify(g0(s)),d=j.useRef(!1);return Sy(()=>{d.current=!0}),j.useCallback((h,p={})=>{if(fs(d.current,_y),!d.current)return;if(typeof h=="number"){r.go(h);return}let x=x0(h,JSON.parse(c),o,p.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:ta([t,x.pathname])),(p.replace?r.replace:r.push)(x,p.state,p)},[t,r,c,o,e])}j.createContext(null);function FS(){let{matches:e}=j.useContext(Es),t=e[e.length-1];return t?t.params:{}}function rc(e,{relative:t}={}){let{matches:r}=j.useContext(Es),{pathname:s}=ks(),o=JSON.stringify(g0(r));return j.useMemo(()=>x0(e,JSON.parse(o),s,t==="path"),[e,o,s,t])}function LS(e,t){return wy(e,t)}function wy(e,t,r,s,o){Nr(Ao(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=j.useContext(js),{matches:d}=j.useContext(Es),f=d[d.length-1],h=f?f.params:{},p=f?f.pathname:"/",x=f?f.pathnameBase:"/",y=f&&f.route;{let R=y&&y.path||"";Ty(p,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let v=ks(),b;if(t){let R=typeof t=="string"?ko(t):t;Nr(x==="/"||R.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${R.pathname}" was given in the \`location\` prop.`),b=R}else b=v;let w=b.pathname||"/",_=w;if(x!=="/"){let R=x.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let S=xy(e,{pathname:_});fs(y||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),fs(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=qS(S&&S.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:ta([x,c.encodeLocation?c.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?x:ta([x,c.encodeLocation?c.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),d,r,s,o);return t&&N?j.createElement(tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},N):N}function PS(){let e=YS(),t=RS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:c},"ErrorBoundary")," or"," ",j.createElement("code",{style:c},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:o},r):null,d)}var zS=j.createElement(PS,null),US=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?j.createElement(Es.Provider,{value:this.props.routeContext},j.createElement(m0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function WS({routeContext:e,match:t,children:r}){let s=j.useContext(Co);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Es.Provider,{value:e},r)}function qS(e,t=[],r=null,s=null,o=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let c=e,d=r?.errors;if(d!=null){let p=c.findIndex(x=>x.route.id&&d?.[x.route.id]!==void 0);Nr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,p+1))}let f=!1,h=-1;if(r)for(let p=0;p<c.length;p++){let x=c[p];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(h=p),x.route.id){let{loaderData:y,errors:v}=r,b=x.route.loader&&!y.hasOwnProperty(x.route.id)&&(!v||v[x.route.id]===void 0);if(x.route.lazy||b){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((p,x,y)=>{let v,b=!1,w=null,_=null;r&&(v=d&&x.route.id?d[x.route.id]:void 0,w=x.route.errorElement||zS,f&&(h<0&&y===0?(Ty("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,_=null):h===y&&(b=!0,_=x.route.hydrateFallbackElement||null)));let S=t.concat(c.slice(0,y+1)),N=()=>{let R;return v?R=w:b?R=_:x.route.Component?R=j.createElement(x.route.Component,null):x.route.element?R=x.route.element:R=p,j.createElement(WS,{match:x,routeContext:{outlet:p,matches:S,isDataRoute:r!=null},children:R})};return r&&(x.route.ErrorBoundary||x.route.errorElement||y===0)?j.createElement(US,{location:r.location,revalidation:r.revalidation,component:w,error:v,children:N(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:s}):N()},null)}function y0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $S(e){let t=j.useContext(Co);return Nr(t,y0(e)),t}function HS(e){let t=j.useContext(ru);return Nr(t,y0(e)),t}function GS(e){let t=j.useContext(Es);return Nr(t,y0(e)),t}function v0(e){let t=GS(e),r=t.matches[t.matches.length-1];return Nr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function VS(){return v0("useRouteId")}function YS(){let e=j.useContext(m0),t=HS("useRouteError"),r=v0("useRouteError");return e!==void 0?e:t.errors?.[r]}function KS(){let{router:e}=$S("useNavigate"),t=v0("useNavigate"),r=j.useRef(!1);return Sy(()=>{r.current=!0}),j.useCallback(async(o,c={})=>{fs(r.current,_y),r.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...c}))},[e,t])}var Pm={};function Ty(e,t,r){!t&&!Pm[e]&&(Pm[e]=!0,fs(!1,r))}j.memo(XS);function XS({routes:e,future:t,state:r,unstable_onError:s}){return wy(e,void 0,r,s,t)}function zm({to:e,replace:t,state:r,relative:s}){Nr(Ao(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=j.useContext(js);fs(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=j.useContext(Es),{pathname:d}=ks(),f=Cs(),h=x0(e,g0(c),d,s==="path"),p=JSON.stringify(h);return j.useEffect(()=>{f(JSON.parse(p),{replace:t,state:r,relative:s})},[f,p,s,t,r]),null}function vn(e){Nr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QS({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:o,static:c=!1}){Nr(!Ao(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof r=="string"&&(r=ko(r));let{pathname:h="/",search:p="",hash:x="",state:y=null,key:v="default"}=r,b=j.useMemo(()=>{let w=aa(h,d);return w==null?null:{location:{pathname:w,search:p,hash:x,state:y,key:v},navigationType:s}},[d,h,p,x,y,v,s]);return fs(b!=null,`<Router basename="${d}"> is not able to match the URL "${h}${p}${x}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:j.createElement(js.Provider,{value:f},j.createElement(tc.Provider,{children:t,value:b}))}function jy({children:e,location:t}){return LS($h(e),t)}function $h(e,t=[]){let r=[];return j.Children.forEach(e,(s,o)=>{if(!j.isValidElement(s))return;let c=[...t,o];if(s.type===j.Fragment){r.push.apply(r,$h(s.props.children,c));return}Nr(s.type===vn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nr(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=$h(s.props.children,c)),r.push(d)}),r}var Id="get",Bd="application/x-www-form-urlencoded";function nu(e){return e!=null&&typeof e.tagName=="string"}function JS(e){return nu(e)&&e.tagName.toLowerCase()==="button"}function ZS(e){return nu(e)&&e.tagName.toLowerCase()==="form"}function ew(e){return nu(e)&&e.tagName.toLowerCase()==="input"}function tw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function rw(e,t){return e.button===0&&(!t||t==="_self")&&!tw(e)}function Hh(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(o=>[r,o]):[[r,s]])},[]))}function nw(e,t){let r=Hh(e);return t&&t.forEach((s,o)=>{r.has(o)||t.getAll(o).forEach(c=>{r.append(o,c)})}),r}var md=null;function sw(){if(md===null)try{new FormData(document.createElement("form"),0),md=!1}catch{md=!0}return md}var aw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wh(e){return e!=null&&!aw.has(e)?(fs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bd}"`),null):e}function iw(e,t){let r,s,o,c,d;if(ZS(e)){let f=e.getAttribute("action");s=f?aa(f,t):null,r=e.getAttribute("method")||Id,o=wh(e.getAttribute("enctype"))||Bd,c=new FormData(e)}else if(JS(e)||ew(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||f.getAttribute("action");if(s=h?aa(h,t):null,r=e.getAttribute("formmethod")||f.getAttribute("method")||Id,o=wh(e.getAttribute("formenctype"))||wh(f.getAttribute("enctype"))||Bd,c=new FormData(f,e),!sw()){let{name:p,type:x,value:y}=e;if(x==="image"){let v=p?`${p}.`:"";c.append(`${v}x`,"0"),c.append(`${v}y`,"0")}else p&&c.append(p,y)}}else{if(nu(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Id,s=null,o=Bd,d=e}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:r.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function b0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ow(e,t,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&aa(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function lw(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function dw(e,t,r){let s=await Promise.all(e.map(async o=>{let c=t.routes[o.route.id];if(c){let d=await lw(c,r);return d.links?d.links():[]}return[]}));return pw(s.flat(1).filter(cw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Um(e,t,r,s,o,c){let d=(h,p)=>r[p]?h.route.id!==r[p].route.id:!0,f=(h,p)=>r[p].pathname!==h.pathname||r[p].route.path?.endsWith("*")&&r[p].params["*"]!==h.params["*"];return c==="assets"?t.filter((h,p)=>d(h,p)||f(h,p)):c==="data"?t.filter((h,p)=>{let x=s.routes[h.route.id];if(!x||!x.hasLoader)return!1;if(d(h,p)||f(h,p))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function uw(e,t,{includeHydrateFallback:r}={}){return fw(e.map(s=>{let o=t.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function fw(e){return[...new Set(e)]}function hw(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}function pw(e,t){let r=new Set;return new Set(t),e.reduce((s,o)=>{let c=JSON.stringify(hw(o));return r.has(c)||(r.add(c),s.push({key:c,link:o})),s},[])}function Ey(){let e=j.useContext(Co);return b0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function gw(){let e=j.useContext(ru);return b0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var _0=j.createContext(void 0);_0.displayName="FrameworkContext";function ky(){let e=j.useContext(_0);return b0(e,"You must render this element inside a <HydratedRouter> element"),e}function xw(e,t){let r=j.useContext(_0),[s,o]=j.useState(!1),[c,d]=j.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:p,onMouseLeave:x,onTouchStart:y}=t,v=j.useRef(null);j.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let _=N=>{N.forEach(R=>{d(R.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[e]),j.useEffect(()=>{if(s){let _=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(_)}}},[s]);let b=()=>{o(!0)},w=()=>{o(!1),d(!1)};return r?e!=="intent"?[c,v,{}]:[c,v,{onFocus:Nl(f,b),onBlur:Nl(h,w),onMouseEnter:Nl(p,b),onMouseLeave:Nl(x,w),onTouchStart:Nl(y,b)}]:[!1,v,{}]}function Nl(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function mw({page:e,...t}){let{router:r}=Ey(),s=j.useMemo(()=>xy(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?j.createElement(vw,{page:e,matches:s,...t}):null}function yw(e){let{manifest:t,routeModules:r}=ky(),[s,o]=j.useState([]);return j.useEffect(()=>{let c=!1;return dw(e,t,r).then(d=>{c||o(d)}),()=>{c=!0}},[e,t,r]),s}function vw({page:e,matches:t,...r}){let s=ks(),{manifest:o,routeModules:c}=ky(),{basename:d}=Ey(),{loaderData:f,matches:h}=gw(),p=j.useMemo(()=>Um(e,t,h,o,s,"data"),[e,t,h,o,s]),x=j.useMemo(()=>Um(e,t,h,o,s,"assets"),[e,t,h,o,s]),y=j.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let w=new Set,_=!1;if(t.forEach(N=>{let R=o.routes[N.route.id];!R||!R.hasLoader||(!p.some(I=>I.route.id===N.route.id)&&N.route.id in f&&c[N.route.id]?.shouldRevalidate||R.hasClientLoader?_=!0:w.add(N.route.id))}),w.size===0)return[];let S=ow(e,d,"data");return _&&w.size>0&&S.searchParams.set("_routes",t.filter(N=>w.has(N.route.id)).map(N=>N.route.id).join(",")),[S.pathname+S.search]},[d,f,s,o,p,t,e,c]),v=j.useMemo(()=>uw(x,o),[x,o]),b=yw(x);return j.createElement(j.Fragment,null,y.map(w=>j.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),v.map(w=>j.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),b.map(({key:w,link:_})=>j.createElement("link",{key:w,nonce:r.nonce,..._})))}function bw(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Cy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cy&&(window.__reactRouterVersion="7.9.1")}catch{}function _w({basename:e,children:t,window:r}){let s=j.useRef();s.current==null&&(s.current=lS({window:r,v5Compat:!0}));let o=s.current,[c,d]=j.useState({action:o.action,location:o.location}),f=j.useCallback(h=>{j.startTransition(()=>d(h))},[d]);return j.useLayoutEffect(()=>o.listen(f),[o,f]),j.createElement(QS,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:o})}var Ay=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ia=j.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:f,target:h,to:p,preventScrollReset:x,viewTransition:y,...v},b){let{basename:w}=j.useContext(js),_=typeof p=="string"&&Ay.test(p),S,N=!1;if(typeof p=="string"&&_&&(S=p,Cy))try{let te=new URL(window.location.href),ue=p.startsWith("//")?new URL(te.protocol+p):new URL(p),X=aa(ue.pathname,w);ue.origin===te.origin&&X!=null?p=X+ue.search+ue.hash:N=!0}catch{fs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=BS(p,{relative:o}),[I,G,Z]=xw(s,v),ie=jw(p,{replace:d,state:f,target:h,preventScrollReset:x,relative:o,viewTransition:y});function q(te){t&&t(te),te.defaultPrevented||ie(te)}let P=j.createElement("a",{...v,...Z,href:S||R,onClick:N||c?t:q,ref:bw(b,G),target:h,"data-discover":!_&&r==="render"?"true":void 0});return I&&!_?j.createElement(j.Fragment,null,P,j.createElement(mw,{page:R})):P});Ia.displayName="Link";var Sw=j.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:f,children:h,...p},x){let y=rc(d,{relative:p.relative}),v=ks(),b=j.useContext(ru),{navigator:w,basename:_}=j.useContext(js),S=b!=null&&Nw(y)&&f===!0,N=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,R=v.pathname,I=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(R=R.toLowerCase(),I=I?I.toLowerCase():null,N=N.toLowerCase()),I&&_&&(I=aa(I,_)||I);const G=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let Z=R===N||!o&&R.startsWith(N)&&R.charAt(G)==="/",ie=I!=null&&(I===N||!o&&I.startsWith(N)&&I.charAt(N.length)==="/"),q={isActive:Z,isPending:ie,isTransitioning:S},P=Z?t:void 0,te;typeof s=="function"?te=s(q):te=[s,Z?"active":null,ie?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ue=typeof c=="function"?c(q):c;return j.createElement(Ia,{...p,"aria-current":P,className:te,ref:x,style:ue,to:d,viewTransition:f},typeof h=="function"?h(q):h)});Sw.displayName="NavLink";var ww=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:o,state:c,method:d=Id,action:f,onSubmit:h,relative:p,preventScrollReset:x,viewTransition:y,...v},b)=>{let w=Cw(),_=Aw(f,{relative:p}),S=d.toLowerCase()==="get"?"get":"post",N=typeof f=="string"&&Ay.test(f),R=I=>{if(h&&h(I),I.defaultPrevented)return;I.preventDefault();let G=I.nativeEvent.submitter,Z=G?.getAttribute("formmethod")||d;w(G||I.currentTarget,{fetcherKey:t,method:Z,navigate:r,replace:o,state:c,relative:p,preventScrollReset:x,viewTransition:y})};return j.createElement("form",{ref:b,method:S,action:_,onSubmit:s?h:R,...v,"data-discover":!N&&e==="render"?"true":void 0})});ww.displayName="Form";function Tw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ny(e){let t=j.useContext(Co);return Nr(t,Tw(e)),t}function jw(e,{target:t,replace:r,state:s,preventScrollReset:o,relative:c,viewTransition:d}={}){let f=Cs(),h=ks(),p=rc(e,{relative:c});return j.useCallback(x=>{if(rw(x,t)){x.preventDefault();let y=r!==void 0?r:Hl(h)===Hl(p);f(e,{replace:y,state:s,preventScrollReset:o,relative:c,viewTransition:d})}},[h,f,p,r,s,t,e,o,c,d])}function Ry(e){fs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=j.useRef(Hh(e)),r=j.useRef(!1),s=ks(),o=j.useMemo(()=>nw(s.search,r.current?null:t.current),[s.search]),c=Cs(),d=j.useCallback((f,h)=>{const p=Hh(typeof f=="function"?f(new URLSearchParams(o)):f);r.current=!0,c("?"+p,h)},[c,o]);return[o,d]}var Ew=0,kw=()=>`__${String(++Ew)}__`;function Cw(){let{router:e}=Ny("useSubmit"),{basename:t}=j.useContext(js),r=VS();return j.useCallback(async(s,o={})=>{let{action:c,method:d,encType:f,formData:h,body:p}=iw(s,t);if(o.navigate===!1){let x=o.fetcherKey||kw();await e.fetch(x,r,o.action||c,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||d,formEncType:o.encType||f,flushSync:o.flushSync})}else await e.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||d,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,r])}function Aw(e,{relative:t}={}){let{basename:r}=j.useContext(js),s=j.useContext(Es);Nr(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...rc(e||".",{relative:t})},d=ks();if(e==null){c.search=d.search;let f=new URLSearchParams(c.search),h=f.getAll("index");if(h.some(x=>x==="")){f.delete("index"),h.filter(y=>y).forEach(y=>f.append("index",y));let x=f.toString();c.search=x?`?${x}`:""}}return(!e||e===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:ta([r,c.pathname])),Hl(c)}function Nw(e,{relative:t}={}){let r=j.useContext(by);Nr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ny("useViewTransitionState"),o=rc(e,{relative:t});if(!r.isTransitioning)return!1;let c=aa(r.currentLocation.pathname,s)||r.currentLocation.pathname,d=aa(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Md(o.pathname,d)!=null||Md(o.pathname,c)!=null}var No=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rw={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Dw=class{#e=Rw;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},fi=new Dw;function Ow(e){setTimeout(e,0)}var pi=typeof window>"u"||"Deno"in globalThis;function Nn(){}function Iw(e,t){return typeof e=="function"?e(t):e}function Gh(e){return typeof e=="number"&&e>=0&&e!==1/0}function Dy(e,t){return Math.max(e+(t||0)-Date.now(),0)}function La(e,t){return typeof e=="function"?e(t):e}function us(e,t){return typeof e=="function"?e(t):e}function Wm(e,t){const{type:r="all",exact:s,fetchStatus:o,predicate:c,queryKey:d,stale:f}=e;if(d){if(s){if(t.queryHash!==S0(d,t.options))return!1}else if(!Gl(t.queryKey,d))return!1}if(r!=="all"){const h=t.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof f=="boolean"&&t.isStale()!==f||o&&o!==t.state.fetchStatus||c&&!c(t))}function qm(e,t){const{exact:r,status:s,predicate:o,mutationKey:c}=e;if(c){if(!t.options.mutationKey)return!1;if(r){if(gi(t.options.mutationKey)!==gi(c))return!1}else if(!Gl(t.options.mutationKey,c))return!1}return!(s&&t.state.status!==s||o&&!o(t))}function S0(e,t){return(t?.queryKeyHashFn||gi)(e)}function gi(e){return JSON.stringify(e,(t,r)=>Vh(r)?Object.keys(r).sort().reduce((s,o)=>(s[o]=r[o],s),{}):r)}function Gl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Gl(e[r],t[r])):!1}var Bw=Object.prototype.hasOwnProperty;function Oy(e,t){if(e===t)return e;const r=$m(e)&&$m(t);if(!r&&!(Vh(e)&&Vh(t)))return t;const o=(r?e:Object.keys(e)).length,c=r?t:Object.keys(t),d=c.length,f=r?new Array(d):{};let h=0;for(let p=0;p<d;p++){const x=r?p:c[p],y=e[x],v=t[x];if(y===v){f[x]=y,(r?p<o:Bw.call(e,x))&&h++;continue}if(y===null||v===null||typeof y!="object"||typeof v!="object"){f[x]=v;continue}const b=Oy(y,v);f[x]=b,b===y&&h++}return o===d&&h===o?e:f}function Fd(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function $m(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Vh(e){if(!Hm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Hm(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Hm(e){return Object.prototype.toString.call(e)==="[object Object]"}function Mw(e){return new Promise(t=>{fi.setTimeout(t,e)})}function Yh(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Oy(e,t):t}function Fw(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function Lw(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var w0=Symbol();function Iy(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===w0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function By(e,t){return typeof e=="function"?e(...t):!!e}var Pw=class extends No{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!pi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},T0=new Pw;function Kh(){let e,t;const r=new Promise((o,c)=>{e=o,t=c});r.status="pending",r.catch(()=>{});function s(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{s({status:"fulfilled",value:o}),e(o)},r.reject=o=>{s({status:"rejected",reason:o}),t(o)},r}var zw=Ow;function Uw(){let e=[],t=0,r=f=>{f()},s=f=>{f()},o=zw;const c=f=>{t?e.push(f):o(()=>{r(f)})},d=()=>{const f=e;e=[],f.length&&o(()=>{s(()=>{f.forEach(h=>{r(h)})})})};return{batch:f=>{let h;t++;try{h=f()}finally{t--,t||d()}return h},batchCalls:f=>(...h)=>{c(()=>{f(...h)})},schedule:c,setNotifyFunction:f=>{r=f},setBatchNotifyFunction:f=>{s=f},setScheduler:f=>{o=f}}}var Zr=Uw(),Ww=class extends No{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!pi&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Ld=new Ww;function qw(e){return Math.min(1e3*2**e,3e4)}function My(e){return(e??"online")==="online"?Ld.isOnline():!0}var Xh=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Fy(e){let t=!1,r=0,s;const o=Kh(),c=()=>o.status!=="pending",d=_=>{if(!c()){const S=new Xh(_);v(S),e.onCancel?.(S)}},f=()=>{t=!0},h=()=>{t=!1},p=()=>T0.isFocused()&&(e.networkMode==="always"||Ld.isOnline())&&e.canRun(),x=()=>My(e.networkMode)&&e.canRun(),y=_=>{c()||(s?.(),o.resolve(_))},v=_=>{c()||(s?.(),o.reject(_))},b=()=>new Promise(_=>{s=S=>{(c()||p())&&_(S)},e.onPause?.()}).then(()=>{s=void 0,c()||e.onContinue?.()}),w=()=>{if(c())return;let _;const S=r===0?e.initialPromise:void 0;try{_=S??e.fn()}catch(N){_=Promise.reject(N)}Promise.resolve(_).then(y).catch(N=>{if(c())return;const R=e.retry??(pi?0:3),I=e.retryDelay??qw,G=typeof I=="function"?I(r,N):I,Z=R===!0||typeof R=="number"&&r<R||typeof R=="function"&&R(r,N);if(t||!Z){v(N);return}r++,e.onFail?.(r,N),Mw(G).then(()=>p()?void 0:b()).then(()=>{t?v(N):w()})})};return{promise:o,status:()=>o.status,cancel:d,continue:()=>(s?.(),o),cancelRetry:f,continueRetry:h,canStart:x,start:()=>(x()?w():b().then(w),o)}}var Ly=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Gh(this.gcTime)&&(this.#e=fi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(pi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(fi.clearTimeout(this.#e),this.#e=void 0)}},$w=class extends Ly{#e;#t;#r;#s;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#r=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Gm(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Gm(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=Yh(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(Nn).catch(Nn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>us(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===w0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>La(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Dy(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},o=()=>{const f=Iy(this.options,t),p=(()=>{const x={client:this.#s,queryKey:this.queryKey,meta:this.meta};return s(x),x})();return this.#o=!1,this.options.persister?this.options.persister(f,p,this):f(p)},d=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:o};return s(f),f})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta}),this.#n=Fy({initialPromise:t?.initialPromise,fn:d.fetchFn,onCancel:f=>{f instanceof Xh&&f.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(f,h)=>{this.#a({type:"failed",failureCount:f,error:h})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const f=await this.#n.start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#r.config.onSuccess?.(f,this),this.#r.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof Xh){if(f.silent)return this.#n.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#a({type:"error",error:f}),this.#r.config.onError?.(f,this),this.#r.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Py(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?s:void 0,s;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Zr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Py(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:My(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Gm(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Hw=class extends No{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=Kh(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#s=void 0;#n;#i;#o;#a;#g;#f;#h;#c;#d;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Vm(this.#t,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Qh(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Qh(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#_(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof us(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),t._defaulted&&!Fd(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&Ym(this.#t,r,this.options,t)&&this.#u(),this.updateResult(),s&&(this.#t!==r||us(this.options.enabled,this.#t)!==us(t.enabled,this.#t)||La(this.options.staleTime,this.#t)!==La(t.staleTime,this.#t))&&this.#x();const o=this.#m();s&&(this.#t!==r||us(this.options.enabled,this.#t)!==us(t.enabled,this.#t)||o!==this.#l)&&this.#y(o)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return Vw(this,r)&&(this.#s=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t?.(s),s==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#u(e){this.#S();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Nn)),t}#x(){this.#b();const e=La(this.options.staleTime,this.#t);if(pi||this.#s.isStale||!Gh(e))return;const r=Dy(this.#s.dataUpdatedAt,e)+1;this.#c=fi.setTimeout(()=>{this.#s.isStale||this.updateResult()},r)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#_(),this.#l=e,!(pi||us(this.options.enabled,this.#t)===!1||!Gh(this.#l)||this.#l===0)&&(this.#d=fi.setInterval(()=>{(this.options.refetchIntervalInBackground||T0.isFocused())&&this.#u()},this.#l))}#v(){this.#x(),this.#y(this.#m())}#b(){this.#c&&(fi.clearTimeout(this.#c),this.#c=void 0)}#_(){this.#d&&(fi.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const r=this.#t,s=this.options,o=this.#s,c=this.#n,d=this.#i,h=e!==r?e.state:this.#r,{state:p}=e;let x={...p},y=!1,v;if(t._optimisticResults){const P=this.hasListeners(),te=!P&&Vm(e,t),ue=P&&Ym(e,r,t,s);(te||ue)&&(x={...x,...Py(p.data,e.options)}),t._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:b,errorUpdatedAt:w,status:_}=x;v=x.data;let S=!1;if(t.placeholderData!==void 0&&v===void 0&&_==="pending"){let P;o?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(P=o.data,S=!0):P=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,P!==void 0&&(_="success",v=Yh(o?.data,P,t),y=!0)}if(t.select&&v!==void 0&&!S)if(o&&v===c?.data&&t.select===this.#g)v=this.#f;else try{this.#g=t.select,v=t.select(v),v=Yh(o?.data,v,t),this.#f=v,this.#a=null}catch(P){this.#a=P}this.#a&&(b=this.#a,v=this.#f,w=Date.now(),_="error");const N=x.fetchStatus==="fetching",R=_==="pending",I=_==="error",G=R&&N,Z=v!==void 0,q={status:_,fetchStatus:x.fetchStatus,isPending:R,isSuccess:_==="success",isError:I,isInitialLoading:G,isLoading:G,data:v,dataUpdatedAt:x.dataUpdatedAt,error:b,errorUpdatedAt:w,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>h.dataUpdateCount||x.errorUpdateCount>h.errorUpdateCount,isFetching:N,isRefetching:N&&!R,isLoadingError:I&&!Z,isPaused:x.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:I&&Z,isStale:j0(e,t),refetch:this.refetch,promise:this.#o,isEnabled:us(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=X=>{q.status==="error"?X.reject(q.error):q.data!==void 0&&X.resolve(q.data)},te=()=>{const X=this.#o=q.promise=Kh();P(X)},ue=this.#o;switch(ue.status){case"pending":e.queryHash===r.queryHash&&P(ue);break;case"fulfilled":(q.status==="error"||q.data!==ue.value)&&te();break;case"rejected":(q.status!=="error"||q.error!==ue.reason)&&te();break}}return q}updateResult(){const e=this.#s,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#t),Fd(t,e))return;this.#s=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#p.size)return!0;const c=new Set(o??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#s).some(d=>{const f=d;return this.#s[f]!==e[f]&&c.has(f)})};this.#w({listeners:r()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){Zr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Gw(e,t){return us(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Vm(e,t){return Gw(e,t)||e.state.data!==void 0&&Qh(e,t,t.refetchOnMount)}function Qh(e,t,r){if(us(t.enabled,e)!==!1&&La(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&j0(e,t)}return!1}function Ym(e,t,r,s){return(e!==t||us(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&j0(e,r)}function j0(e,t){return us(t.enabled,e)!==!1&&e.isStaleByTime(La(t.staleTime,e))}function Vw(e,t){return!Fd(e.getCurrentResult(),t)}function Km(e){return{onFetch:(t,r)=>{const s=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,c=t.state.data?.pages||[],d=t.state.data?.pageParams||[];let f={pages:[],pageParams:[]},h=0;const p=async()=>{let x=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},v=Iy(t.options,t.fetchOptions),b=async(w,_,S)=>{if(x)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const R=(()=>{const ie={client:t.client,queryKey:t.queryKey,pageParam:_,direction:S?"backward":"forward",meta:t.options.meta};return y(ie),ie})(),I=await v(R),{maxPages:G}=t.options,Z=S?Lw:Fw;return{pages:Z(w.pages,I,G),pageParams:Z(w.pageParams,_,G)}};if(o&&c.length){const w=o==="backward",_=w?Yw:Xm,S={pages:c,pageParams:d},N=_(s,S);f=await b(S,N,w)}else{const w=e??c.length;do{const _=h===0?d[0]??s.initialPageParam:Xm(s,f);if(h>0&&_==null)break;f=await b(f,_),h++}while(h<w)}return f};t.options.persister?t.fetchFn=()=>t.options.persister?.(p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=p}}}function Xm(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function Yw(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Kw=class extends Ly{#e;#t;#r;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||zy(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Fy({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(c,d)=>{this.#n({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const s=this.state.status==="pending",o=!this.#s.canStart();try{if(s)t();else{this.#n({type:"pending",variables:e,isPaused:o}),await this.#r.config.onMutate?.(e,this,r);const d=await this.options.onMutate?.(e,r);d!==this.state.context&&this.#n({type:"pending",context:d,variables:e,isPaused:o})}const c=await this.#s.start();return await this.#r.config.onSuccess?.(c,e,this.state.context,this,r),await this.options.onSuccess?.(c,e,this.state.context,r),await this.#r.config.onSettled?.(c,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(c,null,e,this.state.context,r),this.#n({type:"success",data:c}),c}catch(c){try{throw await this.#r.config.onError?.(c,e,this.state.context,this,r),await this.options.onError?.(c,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,c,e,this.state.context,r),c}finally{this.#n({type:"error",error:c})}}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Zr.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function zy(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xw=class extends No{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const s=new Kw({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){this.#e.add(e);const t=yd(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=yd(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=yd(e);if(typeof t=="string"){const s=this.#t.get(t)?.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){const t=yd(e);return typeof t=="string"?this.#t.get(t)?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Zr.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>qm(t,r))}findAll(e={}){return this.getAll().filter(t=>qm(e,t))}notify(e){Zr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Zr.batch(()=>Promise.all(e.map(t=>t.continue().catch(Nn))))}};function yd(e){return e.options.scope?.id}var Qw=class extends No{#e;#t=void 0;#r;#s;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Fd(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&gi(r.mutationKey)!==gi(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#s=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??zy();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Zr.batch(()=>{if(this.#s&&this.hasListeners()){const r=this.#t.variables,s=this.#t.context,o={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#s.onSuccess?.(t.data,r,s,o),this.#s.onSettled?.(t.data,null,r,s,o)):t?.type==="error"&&(this.#s.onError?.(t.error,r,s,o),this.#s.onSettled?.(void 0,t.error,r,s,o))}this.listeners.forEach(r=>{r(this.#t)})})}},Jw=class extends No{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const s=t.queryKey,o=t.queryHash??S0(s,t);let c=this.get(o);return c||(c=new $w({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Zr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Wm(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Wm(e,r)):t}notify(e){Zr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Zr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Zr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zw=class{#e;#t;#r;#s;#n;#i;#o;#a;constructor(e={}){this.#e=e.queryCache||new Jw,this.#t=e.mutationCache||new Xw,this.#r=e.defaultOptions||{},this.#s=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=T0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Ld.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(La(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),c=this.#e.get(s.queryHash)?.state.data,d=Iw(t,c);if(d!==void 0)return this.#e.build(this,s).setData(d,{...r,manual:!0})}setQueriesData(e,t,r){return Zr.batch(()=>this.#e.findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Zr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Zr.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=Zr.batch(()=>this.#e.findAll(e).map(o=>o.cancel(r)));return Promise.all(s).then(Nn).catch(Nn)}invalidateQueries(e,t={}){return Zr.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=Zr.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let c=o.fetch(void 0,r);return r.throwOnError||(c=c.catch(Nn)),o.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(s).then(Nn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(La(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Nn).catch(Nn)}fetchInfiniteQuery(e){return e.behavior=Km(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Nn).catch(Nn)}ensureInfiniteQueryData(e){return e.behavior=Km(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ld.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#s.set(gi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(s=>{Gl(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(gi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(s=>{Gl(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=S0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===w0&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Uy=j.createContext(void 0),E0=e=>{const t=j.useContext(Uy);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},e4=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Uy.Provider,{value:e,children:t})),Wy=j.createContext(!1),t4=()=>j.useContext(Wy);Wy.Provider;function r4(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var n4=j.createContext(r4()),s4=()=>j.useContext(n4),a4=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},i4=e=>{j.useEffect(()=>{e.clearReset()},[e])},o4=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(o&&e.data===void 0||By(r,[e.error,s])),l4=e=>{if(e.suspense){const r=o=>o==="static"?o:Math.max(o??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...o)=>r(s(...o)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},c4=(e,t)=>e.isLoading&&e.isFetching&&!t,d4=(e,t)=>e?.suspense&&t.isPending,Qm=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function u4(e,t,r){const s=t4(),o=s4(),c=E0(),d=c.defaultQueryOptions(e);c.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=s?"isRestoring":"optimistic",l4(d),a4(d,o),i4(o);const f=!c.getQueryCache().get(d.queryHash),[h]=j.useState(()=>new t(c,d)),p=h.getOptimisticResult(d),x=!s&&e.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(y=>{const v=x?h.subscribe(Zr.batchCalls(y)):Nn;return h.updateResult(),v},[h,x]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),j.useEffect(()=>{h.setOptions(d)},[d,h]),d4(d,p))throw Qm(d,h,o);if(o4({result:p,errorResetBoundary:o,throwOnError:d.throwOnError,query:c.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw p.error;return c.getDefaultOptions().queries?._experimental_afterQuery?.(d,p),d.experimental_prefetchInRender&&!pi&&c4(p,s)&&(f?Qm(d,h,o):c.getQueryCache().get(d.queryHash)?.promise)?.catch(Nn).finally(()=>{h.updateResult()}),d.notifyOnChangeProps?p:h.trackResult(p)}function k0(e,t){return u4(e,Hw)}function Jm(e,t){const r=E0(),[s]=j.useState(()=>new Qw(r,e));j.useEffect(()=>{s.setOptions(e)},[s,e]);const o=j.useSyncExternalStore(j.useCallback(d=>s.subscribe(Zr.batchCalls(d)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),c=j.useCallback((d,f)=>{s.mutate(d,f).catch(Nn)},[s]);if(o.error&&By(s.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:c,mutateAsync:o.mutate}}const f4="modulepreload",h4=function(e){return"/retailpos/"+e},Zm={},nc=function(t,r,s){let o=Promise.resolve();if(r&&r.length>0){let p=function(x){return Promise.all(x.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var d=p;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=f?.nonce||f?.getAttribute("nonce");o=p(r.map(x=>{if(x=h4(x),x in Zm)return;Zm[x]=!0;const y=x.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${v}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":f4,y||(b.as="script"),b.crossOrigin="",b.href=x,h&&b.setAttribute("nonce",h),document.head.appendChild(b),y)return new Promise((w,_)=>{b.addEventListener("load",w),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${x}`)))})}))}function c(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return o.then(f=>{for(const h of f||[])h.status==="rejected"&&c(h.reason);return t().catch(c)})},p4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>nc(async()=>{const{default:s}=await Promise.resolve().then(()=>Ro);return{default:s}},[]).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class C0 extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class g4 extends C0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class e1 extends C0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class t1 extends C0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Jh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Jh||(Jh={}));var x4=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(s.next(x))}catch(y){d(y)}}function h(x){try{p(s.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};class m4{constructor(t,{headers:r={},customFetch:s,region:o=Jh.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=p4(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return x4(this,void 0,void 0,function*(){try{const{headers:o,method:c,body:d}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${t}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let x;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=d):typeof d=="string"?(f["Content-Type"]="text/plain",x=d):typeof FormData<"u"&&d instanceof FormData?x=d:(f["Content-Type"]="application/json",x=JSON.stringify(d)));const y=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:x}).catch(_=>{throw new g4(_)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new e1(y);if(!y.ok)throw new t1(y);let b=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield y.json():b==="application/octet-stream"?w=yield y.blob():b==="text/event-stream"?w=y:b==="multipart/form-data"?w=yield y.formData():w=yield y.text(),{data:w,error:null,response:y}}catch(o){return{data:null,error:o,response:o instanceof t1||o instanceof e1?o.context:void 0}}})}}var nn={},ro={},no={},so={},ao={},io={},y4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jo=y4();const v4=jo.fetch,qy=jo.fetch.bind(jo),$y=jo.Headers,b4=jo.Request,_4=jo.Response,Ro=Object.freeze(Object.defineProperty({__proto__:null,Headers:$y,Request:b4,Response:_4,default:qy,fetch:v4},Symbol.toStringTag,{value:"Module"})),S4=X_(Ro);var vd={},r1;function Hy(){if(r1)return vd;r1=1,Object.defineProperty(vd,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return vd.default=e,vd}var n1;function Gy(){if(n1)return io;n1=1;var e=io&&io.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(io,"__esModule",{value:!0});const t=e(S4),r=e(Hy());class s{constructor(c){var d,f;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(d=c.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=c.signal,this.isMaybeSingle=(f=c.isMaybeSingle)!==null&&f!==void 0?f:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,d){return this.headers=new Headers(this.headers),this.headers.set(c,d),this}then(c,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let h=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var x,y,v,b;let w=null,_=null,S=null,N=p.status,R=p.statusText;if(p.ok){if(this.method!=="HEAD"){const ie=await p.text();ie===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?_=ie:_=JSON.parse(ie))}const G=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),Z=(v=p.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");G&&Z&&Z.length>1&&(S=parseInt(Z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(w={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,S=null,N=406,R="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const G=await p.text();try{w=JSON.parse(G),Array.isArray(w)&&p.status===404&&(_=[],w=null,N=200,R="OK")}catch{p.status===404&&G===""?(N=204,R="No Content"):w={message:G}}if(w&&this.isMaybeSingle&&(!((b=w?.details)===null||b===void 0)&&b.includes("0 rows"))&&(w=null,N=200,R="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:_,count:S,status:N,statusText:R}});return this.shouldThrowOnError||(h=h.catch(p=>{var x,y,v;return{error:{message:`${(x=p?.name)!==null&&x!==void 0?x:"FetchError"}: ${p?.message}`,details:`${(y=p?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=p?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(c,d)}returns(){return this}overrideTypes(){return this}}return io.default=s,io}var s1;function Vy(){if(s1)return ao;s1=1;var e=ao&&ao.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ao,"__esModule",{value:!0});const t=e(Gy());class r extends t.default{select(o){let c=!1;const d=(o??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:c=!0,nullsFirst:d,foreignTable:f,referencedTable:h=f}={}){const p=h?`${h}.order`:"order",x=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${x?`${x},`:""}${o}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,c,{foreignTable:d,referencedTable:f=d}={}){const h=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(p,`${c-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:c=!1,settings:d=!1,buffers:f=!1,wal:h=!1,format:p="text"}={}){var x;const y=[o?"analyze":null,c?"verbose":null,d?"settings":null,f?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${v}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return ao.default=r,ao}var a1;function A0(){if(a1)return so;a1=1;var e=so&&so.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(so,"__esModule",{value:!0});const t=e(Vy());class r extends t.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}in(o,c){const d=Array.from(new Set(c)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:d,type:f}={}){let h="";f==="plain"?h="pl":f==="phrase"?h="ph":f==="websearch"&&(h="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${h}fts${p}.${c}`),this}match(o){return Object.entries(o).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(o,c,d){return this.url.searchParams.append(o,`not.${c}.${d}`),this}or(o,{foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,c,d){return this.url.searchParams.append(o,`${c}.${d}`),this}}return so.default=r,so}var i1;function Yy(){if(i1)return no;i1=1;var e=no&&no.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(no,"__esModule",{value:!0});const t=e(A0());class r{constructor(o,{headers:c={},schema:d,fetch:f}){this.url=o,this.headers=new Headers(c),this.schema=d,this.fetch=f}select(o,{head:c=!1,count:d}={}){const f=c?"HEAD":"GET";let h=!1;const p=(o??"*").split("").map(x=>/\s/.test(x)&&!h?"":(x==='"'&&(h=!h),x)).join("");return this.url.searchParams.set("select",p),d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:c,defaultToNull:d=!0}={}){var f;const h="POST";if(c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(p.length>0){const x=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:c,ignoreDuplicates:d=!1,count:f,defaultToNull:h=!0}={}){var p;const x="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),f&&this.headers.append("Prefer",`count=${f}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const y=o.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:c}={}){var d;const f="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var c;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return no.default=r,no}var o1;function w4(){if(o1)return ro;o1=1;var e=ro&&ro.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ro,"__esModule",{value:!0});const t=e(Yy()),r=e(A0());class s{constructor(c,{headers:d={},schema:f,fetch:h}={}){this.url=c,this.headers=new Headers(d),this.schemaName=f,this.fetch=h}from(c){const d=new URL(`${this.url}/${c}`);return new t.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new s(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,d={},{head:f=!1,get:h=!1,count:p}={}){var x;let y;const v=new URL(`${this.url}/rpc/${c}`);let b;f||h?(y=f?"HEAD":"GET",Object.entries(d).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{v.searchParams.append(_,S)})):(y="POST",b=d);const w=new Headers(this.headers);return p&&w.set("Prefer",`count=${p}`),new r.default({method:y,url:v,headers:w,schema:this.schemaName,body:b,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return ro.default=s,ro}var l1;function T4(){if(l1)return nn;l1=1;var e=nn&&nn.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(nn,"__esModule",{value:!0}),nn.PostgrestError=nn.PostgrestBuilder=nn.PostgrestTransformBuilder=nn.PostgrestFilterBuilder=nn.PostgrestQueryBuilder=nn.PostgrestClient=void 0;const t=e(w4());nn.PostgrestClient=t.default;const r=e(Yy());nn.PostgrestQueryBuilder=r.default;const s=e(A0());nn.PostgrestFilterBuilder=s.default;const o=e(Vy());nn.PostgrestTransformBuilder=o.default;const c=e(Gy());nn.PostgrestBuilder=c.default;const d=e(Hy());return nn.PostgrestError=d.default,nn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:c.default,PostgrestError:d.default},nn}var j4=T4();const E4=h0(j4),{PostgrestClient:k4,PostgrestQueryBuilder:O7,PostgrestFilterBuilder:I7,PostgrestTransformBuilder:B7,PostgrestBuilder:M7,PostgrestError:F7}=E4;class C4{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const A4="2.15.5",N4=`realtime-js/${A4}`,R4="1.0.0",Zh=1e4,D4=1e3,O4=100;var Bl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Bl||(Bl={}));var Xr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xr||(Xr={}));var _s;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(_s||(_s={}));var e0;(function(e){e.websocket="websocket"})(e0||(e0={}));var di;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(di||(di={}));class I4{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const o=r.getUint8(1),c=r.getUint8(2);let d=this.HEADER_LENGTH+2;const f=s.decode(t.slice(d,d+o));d=d+o;const h=s.decode(t.slice(d,d+c));d=d+c;const p=JSON.parse(s.decode(t.slice(d,t.byteLength)));return{ref:null,topic:f,event:h,payload:p}}}class Ky{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(jr||(jr={}));const c1=(e,t,r={})=>{var s;const o=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((c,d)=>(c[d]=B4(d,e,t,o),c),{})},B4=(e,t,r,s)=>{const o=t.find(f=>f.name===e),c=o?.type,d=r[e];return c&&!s.includes(c)?Xy(c,d):t0(d)},Xy=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return P4(t,r)}switch(e){case jr.bool:return M4(t);case jr.float4:case jr.float8:case jr.int2:case jr.int4:case jr.int8:case jr.numeric:case jr.oid:return F4(t);case jr.json:case jr.jsonb:return L4(t);case jr.timestamp:return z4(t);case jr.abstime:case jr.date:case jr.daterange:case jr.int4range:case jr.int8range:case jr.money:case jr.reltime:case jr.text:case jr.time:case jr.timestamptz:case jr.timetz:case jr.tsrange:case jr.tstzrange:return t0(t);default:return t0(t)}},t0=e=>e,M4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},F4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},L4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},P4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let c;const d=e.slice(1,r);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(f=>Xy(t,f))}return e},z4=e=>typeof e=="string"?e.replace(" ","T"):e,Qy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Th{constructor(t,r,s={},o=Zh){this.channel=t,this.event=r,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var d1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(d1||(d1={}));class Ml{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ml.syncState(this.state,o,c,d),this.pendingDiffs.forEach(h=>{this.state=Ml.syncDiff(this.state,h,c,d)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},o=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ml.syncDiff(this.state,o,c,d),f())}),this.onJoin((o,c,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:d})}),this.onLeave((o,c,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,o){const c=this.cloneDeep(t),d=this.transformState(r),f={},h={};return this.map(c,(p,x)=>{d[p]||(h[p]=x)}),this.map(d,(p,x)=>{const y=c[p];if(y){const v=x.map(S=>S.presence_ref),b=y.map(S=>S.presence_ref),w=x.filter(S=>b.indexOf(S.presence_ref)<0),_=y.filter(S=>v.indexOf(S.presence_ref)<0);w.length>0&&(f[p]=w),_.length>0&&(h[p]=_)}else f[p]=x}),this.syncDiff(c,{joins:f,leaves:h},s,o)}static syncDiff(t,r,s,o){const{joins:c,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(c,(f,h)=>{var p;const x=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(h),x.length>0){const y=t[f].map(b=>b.presence_ref),v=x.filter(b=>y.indexOf(b.presence_ref)<0);t[f].unshift(...v)}s(f,x,h)}),this.map(d,(f,h)=>{let p=t[f];if(!p)return;const x=h.map(y=>y.presence_ref);p=p.filter(y=>x.indexOf(y.presence_ref)<0),t[f]=p,o(f,p,h),p.length===0&&delete t[f]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const o=t[s];return"metas"in o?r[s]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[s]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var u1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(u1||(u1={}));var Fl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Fl||(Fl={}));var ea;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ea||(ea={}));class N0{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Xr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Th(this,_s.join,this.params,this.timeout),this.rejoinTimer=new Ky(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Xr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_s.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new Ml(this),this.broadcastEndpointURL=Qy(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Xr.closed){const{config:{broadcast:d,presence:f,private:h}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(b=>b.filter))!==null&&o!==void 0?o:[],x=!!this.bindings[Fl.PRESENCE]&&this.bindings[Fl.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,y={},v={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:x}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>t?.(ea.CHANNEL_ERROR,b)),this._onClose(()=>t?.(ea.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var w;if(this.socket.setAuth(),b===void 0){t?.(ea.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(w=_?.length)!==null&&w!==void 0?w:0,N=[];for(let R=0;R<S;R++){const I=_[R],{filter:{event:G,schema:Z,table:ie,filter:q}}=I,P=b&&b[R];if(P&&P.event===G&&P.schema===Z&&P.table===ie&&P.filter===q)N.push(Object.assign(Object.assign({},I),{id:P.id}));else{this.unsubscribe(),this.state=Xr.errored,t?.(ea.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(ea.SUBSCRIBED);return}}).receive("error",b=>{this.state=Xr.errored,t?.(ea.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t?.(ea.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Xr.joined&&t===Fl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,s)}async send(t,r={}){var s,o;if(!this._canPush()&&t.type==="broadcast"){const{event:c,payload:d}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,f,h;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_s.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Th(this,_s.leave,{},t),s.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xr.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const o=new AbortController,c=setTimeout(()=>o.abort(),s),d=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(c),d}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Th(this,t,r,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>O4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var o,c;const d=t.toLocaleLowerCase(),{close:f,error:h,leave:p,join:x}=_s;if(s&&[f,h,p,x].indexOf(d)>=0&&s!==this._joinRef())return;let v=this._onMessage(d,r,s);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var w,_,S;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((S=(_=b.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===d}).map(b=>b.callback(v,s)):(c=this.bindings[d])===null||c===void 0||c.filter(b=>{var w,_,S,N,R,I;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in b){const G=b.id,Z=(w=b.filter)===null||w===void 0?void 0:w.event;return G&&((_=r.ids)===null||_===void 0?void 0:_.includes(G))&&(Z==="*"||Z?.toLocaleLowerCase()===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const G=(R=(N=b?.filter)===null||N===void 0?void 0:N.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return G==="*"||G===((I=r?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===d}).map(b=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:_,table:S,commit_timestamp:N,type:R,errors:I}=w;v=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:N,eventType:R,new:{},old:{},errors:I}),this._getPayloadRecords(w))}b.callback(v,s)})}_isClosed(){return this.state===Xr.closed}_isJoined(){return this.state===Xr.joined}_isJoining(){return this.state===Xr.joining}_isLeaving(){return this.state===Xr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const o=t.toLocaleLowerCase(),c={type:o,filter:r,callback:s};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&N0.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_s.close,{},t)}_onError(t){this._on(_s.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=c1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=c1(t.columns,t.old_record)),r}}const jh=()=>{},bd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},U4=[1e3,2e3,5e3,1e4],W4=1e4,q4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $4{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zh,this.transport=null,this.heartbeatIntervalMs=bd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jh,this.ref=0,this.reconnectTimer=null,this.logger=jh,this.conn=null,this.sendBuffer=[],this.serializer=new I4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let c;return o?c=o:typeof fetch>"u"?c=(...d)=>nc(async()=>{const{default:f}=await Promise.resolve().then(()=>Ro);return{default:f}},void 0).then(({default:f})=>f(...d)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...d)=>c(...d)},!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${e0.websocket}`,this.httpEndpoint=Qy(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=C4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:R4}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Bl.connecting:return di.Connecting;case Bl.open:return di.Open;case Bl.closing:return di.Closing;default:return di.Closed}}isConnected(){return this.connectionState()===di.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,o=this.getChannels().find(c=>c.topic===s);if(o)return o;{const c=new N0(`realtime:${t}`,r,this);return this.channels.push(c),c}}push(t){const{topic:r,event:s,payload:o,ref:c}=t,d=()=>{this.encode(t,f=>{var h;(h=this.conn)===null||h===void 0||h.send(f)})};this.log("push",`${r} ${s} (${c})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(D4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},bd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:c,ref:d}=r,f=d?`(${d})`:"",h=c.status||"";this.log("receive",`${h} ${s} ${o} ${f}`.trim(),c),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,c,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(_s.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${s}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([q4],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const o={access_token:r,version:N4};r&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(_s.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Ky(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,o,c,d,f,h,p,x;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t?.timeout)!==null&&s!==void 0?s:Zh,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:bd.HEARTBEAT_INTERVAL,this.worker=(c=t?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=t?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:jh,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t?.reconnectAfterMs)!==null&&h!==void 0?h:(y=>U4[y-1]||W4),this.encode=(p=t?.encode)!==null&&p!==void 0?p:((y,v)=>v(JSON.stringify(y))),this.decode=(x=t?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class R0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Jr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class H4 extends R0{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class r0 extends R0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var G4=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(s.next(x))}catch(y){d(y)}}function h(x){try{p(s.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};const Jy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>nc(async()=>{const{default:s}=await Promise.resolve().then(()=>Ro);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},V4=()=>G4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield nc(()=>Promise.resolve().then(()=>Ro),void 0)).Response:Response}),n0=e=>{if(Array.isArray(e))return e.map(r=>n0(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const o=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[o]=n0(s)}),t},Y4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var vi=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(s.next(x))}catch(y){d(y)}}function h(x){try{p(s.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};const Eh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),K4=(e,t,r)=>vi(void 0,void 0,void 0,function*(){const s=yield V4();e instanceof s&&!r?.noResolveJson?e.json().then(o=>{const c=e.status||500,d=o?.statusCode||c+"";t(new H4(Eh(o),c,d))}).catch(o=>{t(new r0(Eh(o),o))}):t(new r0(Eh(e),e))}),X4=(e,t,r,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!s?o:(Y4(s)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(s)):o.body=s,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function sc(e,t,r,s,o,c){return vi(this,void 0,void 0,function*(){return new Promise((d,f)=>{e(r,X4(t,s,o,c)).then(h=>{if(!h.ok)throw h;return s?.noResolveJson?h:h.json()}).then(h=>d(h)).catch(h=>K4(h,f,s))})})}function Pd(e,t,r,s){return vi(this,void 0,void 0,function*(){return sc(e,"GET",t,r,s)})}function Ms(e,t,r,s,o){return vi(this,void 0,void 0,function*(){return sc(e,"POST",t,s,o,r)})}function s0(e,t,r,s,o){return vi(this,void 0,void 0,function*(){return sc(e,"PUT",t,s,o,r)})}function Q4(e,t,r,s){return vi(this,void 0,void 0,function*(){return sc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Zy(e,t,r,s,o){return vi(this,void 0,void 0,function*(){return sc(e,"DELETE",t,s,o,r)})}var Cn=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(s.next(x))}catch(y){d(y)}}function h(x){try{p(s.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};const J4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},f1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Z4{constructor(t,r={},s,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=Jy(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,o){return Cn(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},f1),o);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const h=d.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h))):(c=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,h&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(r),x=this._getFinalPath(p),y=yield(t=="PUT"?s0:Ms)(this.fetch,`${this.url}/object/${x}`,c,Object.assign({headers:f},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Jr(c))return{data:null,error:c};throw c}})}upload(t,r,s){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,o){return Cn(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),f=new URL(this.url+`/object/upload/sign/${d}`);f.searchParams.set("token",r);try{let h;const p=Object.assign({upsert:f1.upsert},o),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",p.cacheControl)):(h=s,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const y=yield s0(this.fetch,f.toString(),h,{headers:x});return{data:{path:c,fullPath:y.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Jr(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,r){return Cn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const c=yield Ms(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),d=new URL(this.url+c.url),f=d.searchParams.get("token");if(!f)throw new R0("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Jr(s))return{data:null,error:s};throw s}})}update(t,r,s){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Cn(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Jr(o))return{data:null,error:o};throw o}})}copy(t,r,s){return Cn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ms(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Jr(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,s){return Cn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),c=yield Ms(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Jr(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,s){return Cn(this,void 0,void 0,function*(){try{const o=yield Ms(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Jr(o))return{data:null,error:o};throw o}})}download(t,r){return Cn(this,void 0,void 0,function*(){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),d=c?`?${c}`:"";try{const f=this._getFinalPath(t);return{data:yield(yield Pd(this.fetch,`${this.url}/${o}/${f}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Jr(f))return{data:null,error:f};throw f}})}info(t){return Cn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield Pd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:n0(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Jr(s))return{data:null,error:s};throw s}})}exists(t){return Cn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Q4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Jr(s)&&s instanceof r0){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),o=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&o.push(c);const f=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&o.push(h);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${p}`)}}}remove(t){return Cn(this,void 0,void 0,function*(){try{return{data:yield Zy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jr(r))return{data:null,error:r};throw r}})}list(t,r,s){return Cn(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},J4),r),{prefix:t||""});return{data:yield Ms(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Jr(o))return{data:null,error:o};throw o}})}listV2(t,r){return Cn(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield Ms(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Jr(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const eT="2.12.1",tT={"X-Client-Info":`storage-js/${eT}`};var oo=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(s.next(x))}catch(y){d(y)}}function h(x){try{p(s.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};class rT{constructor(t,r={},s,o){this.shouldThrowOnError=!1;const c=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},tT),r),this.fetch=Jy(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return oo(this,void 0,void 0,function*(){try{return{data:yield Pd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Jr(t))return{data:null,error:t};throw t}})}getBucket(t){return oo(this,void 0,void 0,function*(){try{return{data:yield Pd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return oo(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Jr(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return oo(this,void 0,void 0,function*(){try{return{data:yield s0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Jr(s))return{data:null,error:s};throw s}})}emptyBucket(t){return oo(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return oo(this,void 0,void 0,function*(){try{return{data:yield Zy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jr(r))return{data:null,error:r};throw r}})}}class nT extends rT{constructor(t,r={},s,o){super(t,r,s,o)}from(t){return new Z4(this.url,this.headers,t,this.fetch)}}const sT="2.57.4";let Ol="";typeof Deno<"u"?Ol="deno":typeof document<"u"?Ol="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ol="react-native":Ol="node";const aT={"X-Client-Info":`supabase-js-${Ol}/${sT}`},iT={headers:aT},oT={schema:"public"},lT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cT={};var dT=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(s.next(x))}catch(y){d(y)}}function h(x){try{p(s.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};const uT=e=>{let t;return e?t=e:typeof fetch>"u"?t=qy:t=fetch,(...r)=>t(...r)},fT=()=>typeof Headers>"u"?$y:Headers,hT=(e,t,r)=>{const s=uT(r),o=fT();return(c,d)=>dT(void 0,void 0,void 0,function*(){var f;const h=(f=yield t())!==null&&f!==void 0?f:e;let p=new o(d?.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),s(c,Object.assign(Object.assign({},d),{headers:p}))})};var pT=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(s.next(x))}catch(y){d(y)}}function h(x){try{p(s.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};function gT(e){return e.endsWith("/")?e:e+"/"}function xT(e,t){var r,s;const{db:o,auth:c,realtime:d,global:f}=e,{db:h,auth:p,realtime:x,global:y}=t,v={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},p),c),realtime:Object.assign(Object.assign({},x),d),storage:{},global:Object.assign(Object.assign(Object.assign({},y),f),{headers:Object.assign(Object.assign({},(r=y?.headers)!==null&&r!==void 0?r:{}),(s=f?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>pT(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function mT(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(gT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ev="2.71.1",mo=30*1e3,a0=3,kh=a0*mo,yT="http://localhost:9999",vT="supabase.auth.token",bT={"X-Client-Info":`gotrue-js/${ev}`},i0="X-Supabase-Api-Version",tv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_T=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ST=600*1e3;class D0 extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Bt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class wT extends D0{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function TT(e){return Bt(e)&&e.name==="AuthApiError"}class rv extends D0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class qa extends D0{constructor(t,r,s,o){super(t,s,o),this.name=r,this.status=s}}class Oa extends qa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jT(e){return Bt(e)&&e.name==="AuthSessionMissingError"}class _d extends qa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Sd extends qa{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class wd extends qa{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ET(e){return Bt(e)&&e.name==="AuthImplicitGrantRedirectError"}class h1 extends qa{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class o0 extends qa{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ch(e){return Bt(e)&&e.name==="AuthRetryableFetchError"}class p1 extends qa{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class l0 extends qa{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const zd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),g1=` 	
\r=`.split(""),kT=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<g1.length;t+=1)e[g1[t].charCodeAt(0)]=-2;for(let t=0;t<zd.length;t+=1)e[zd[t].charCodeAt(0)]=t;return e})();function x1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(zd[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(zd[s]),t.queuedBits-=6}}function nv(e,t,r){const s=kT[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function m1(e){const t=[],r=d=>{t.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=d=>{NT(d,s,r)};for(let d=0;d<e.length;d+=1)nv(e.charCodeAt(d),o,c);return t.join("")}function CT(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function AT(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}CT(s,t)}}function NT(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function RT(e){const t=[],r={queue:0,queuedBits:0},s=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)nv(e.charCodeAt(o),r,s);return new Uint8Array(t)}function DT(e){const t=[];return AT(e,r=>t.push(r)),new Uint8Array(t)}function OT(e){const t=[],r={queue:0,queuedBits:0},s=o=>{t.push(o)};return e.forEach(o=>x1(o,r,s)),x1(null,r,s),t.join("")}function IT(e){return Math.round(Date.now()/1e3)+e}function BT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const bs=()=>typeof window<"u"&&typeof document<"u",oi={tested:!1,writable:!1},sv=()=>{if(!bs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oi.tested)return oi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),oi.tested=!0,oi.writable=!0}catch{oi.tested=!0,oi.writable=!1}return oi.writable};function MT(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,c)=>{t[c]=o})}catch{}return r.searchParams.forEach((s,o)=>{t[o]=s}),t}const av=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>nc(async()=>{const{default:s}=await Promise.resolve().then(()=>Ro);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},FT=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",yo=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},li=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ra=async(e,t)=>{await e.removeItem(t)};class su{constructor(){this.promise=new su.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}su.promiseConstructor=Promise;function Ah(e){const t=e.split(".");if(t.length!==3)throw new l0("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!_T.test(t[s]))throw new l0("JWT not in base64url format");return{header:JSON.parse(m1(t[0])),payload:JSON.parse(m1(t[1])),signature:RT(t[2]),raw:{header:t[0],payload:t[1]}}}async function LT(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function PT(e,t){return new Promise((s,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await e(c);if(!t(c,null,d)){s(d);return}}catch(d){if(!t(c,d)){o(d);return}}})()})}function zT(e){return("0"+e.toString(16)).substr(-2)}function UT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let o="";for(let c=0;c<56;c++)o+=r.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(t),Array.from(t,zT).join("")}async function WT(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(s);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function qT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await WT(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lo(e,t,r=!1){const s=UT();let o=s;r&&(o+="/PASSWORD_RECOVERY"),await yo(e,`${t}-code-verifier`,o);const c=await qT(s);return[c,s===c?"plain":"s256"]}const $T=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function HT(e){const t=e.headers.get(i0);if(!t||!t.match($T))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function GT(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function VT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const YT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function co(e){if(!YT.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nh(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function y1(e){return JSON.parse(JSON.stringify(e))}var KT=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r};const ci=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XT=[502,503,504];async function v1(e){var t;if(!FT(e))throw new o0(ci(e),0);if(XT.includes(e.status))throw new o0(ci(e),e.status);let r;try{r=await e.json()}catch(c){throw new rv(ci(c),c)}let s;const o=HT(e);if(o&&o.getTime()>=tv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new p1(ci(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Oa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new p1(ci(r),e.status,r.weak_password.reasons);throw new wT(ci(r),e.status||500,s)}const QT=(e,t,r,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),r))};async function Vt(e,t,r,s){var o;const c=Object.assign({},s?.headers);c[i0]||(c[i0]=tv["2024-01-01"].name),s?.jwt&&(c.Authorization=`Bearer ${s.jwt}`);const d=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(d.redirect_to=s.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",h=await JT(e,t,r+f,{headers:c,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(h):{data:Object.assign({},h),error:null}}async function JT(e,t,r,s,o,c){const d=QT(t,s,o,c);let f;try{f=await e(r,Object.assign({},d))}catch(h){throw console.error(h),new o0(ci(h),0)}if(f.ok||await v1(f),s?.noResolveJson)return f;try{return await f.json()}catch(h){await v1(h)}}function Zs(e){var t;let r=null;r3(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=IT(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function b1(e){const t=Zs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ba(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ZT(e){return{data:e,error:null}}function e3(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:o,verification_type:c}=e,d=KT(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:r,hashed_token:s,redirect_to:o,verification_type:c},h=Object.assign({},d);return{data:{properties:f,user:h},error:null}}function t3(e){return e}function r3(e){return e.access_token&&e.refresh_token&&e.expires_in}const Rh=["global","local","others"];var n3=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r};class s3{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=av(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Rh[0]){if(Rh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rh.join(", ")}`);try{return await Vt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await Vt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ba})}catch(s){if(Bt(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=n3(t,["options"]),o=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await Vt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:e3,redirectTo:r?.redirectTo})}catch(r){if(Bt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Vt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ba})}catch(r){if(Bt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,o,c,d,f,h;try{const p={nextPage:null,lastPage:0,total:0},x=await Vt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:t3});if(x.error)throw x.error;const y=await x.json(),v=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,b=(h=(f=x.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);p[`${S}Page`]=_}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Bt(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){co(t);try{return await Vt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ba})}catch(r){if(Bt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){co(t);try{return await Vt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ba})}catch(s){if(Bt(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){co(t);try{return await Vt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ba})}catch(s){if(Bt(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){co(t.userId);try{const{data:r,error:s}=await Vt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:s}}catch(r){if(Bt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){co(t.userId),co(t.id);try{return{data:await Vt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}}}function _1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function a3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const uo={debug:!!(globalThis&&sv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class iv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class i3 extends iv{}async function o3(e,t,r){uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),uo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new i3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(uo.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}a3();const l3={url:yT,storageKey:vT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function S1(e,t,r){return await r()}const fo={};class Vl{constructor(t){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vl.nextInstanceID,Vl.nextInstanceID+=1,this.instanceID>0&&bs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},l3),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new s3({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=av(o.fetch),this.lock=o.lock||S1,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:bs()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=o3:this.lock=S1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:sv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_1(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=_1(this.memoryStorage)),bs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=fo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){fo[this.storageKey]=Object.assign(Object.assign({},fo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=fo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){fo[this.storageKey]=Object.assign(Object.assign({},fo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ev}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=MT(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),bs()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:c}=await this._getSessionFromURL(r,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),ET(c)){const h=(t=c.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Bt(r)?{error:r}:{error:new rv("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,o;try{const c=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Zs}),{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const h=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(Bt(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(t){var r,s,o;try{let c;if("email"in t){const{email:x,password:y,options:v}=t;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await lo(this.storage,this.storageKey)),c=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:x,password:y,data:(r=v?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:w},xform:Zs})}else if("phone"in t){const{phone:x,password:y,options:v}=t;c=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:y,data:(s=v?.data)!==null&&s!==void 0?s:{},channel:(o=v?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Zs})}else throw new Sd("You must provide either an email or phone number and a password");const{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const h=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(Bt(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(t){try{let r;if("email"in t){const{email:c,password:d,options:f}=t;r=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:b1})}else if("phone"in t){const{phone:c,password:d,options:f}=t;r=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:b1})}else throw new Sd("You must provide either an email or phone number and a password");const{data:s,error:o}=r;return o?{data:{user:null,session:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new _d}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(r){if(Bt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,o,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,o,c,d,f,h,p,x,y,v,b;let w,_;if("message"in t)w=t.message,_=t.signature;else{const{chain:S,wallet:N,statement:R,options:I}=t;let G;if(bs())if(typeof N=="object")G=N;else{const ie=window;if("solana"in ie&&typeof ie.solana=="object"&&("signIn"in ie.solana&&typeof ie.solana.signIn=="function"||"signMessage"in ie.solana&&typeof ie.solana.signMessage=="function"))G=ie.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=N}const Z=new URL((r=I?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in G&&G.signIn){const ie=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),R?{statement:R}:null));let q;if(Array.isArray(ie)&&ie[0]&&typeof ie[0]=="object")q=ie[0];else if(ie&&typeof ie=="object"&&"signedMessage"in ie&&"signature"in ie)q=ie;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in q&&"signature"in q&&(typeof q.signedMessage=="string"||q.signedMessage instanceof Uint8Array)&&q.signature instanceof Uint8Array)w=typeof q.signedMessage=="string"?q.signedMessage:new TextDecoder().decode(q.signedMessage),_=q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${Z.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(o=(s=I?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=I?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((d=I?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((f=I?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((h=I?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((p=I?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((y=(x=I?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||y===void 0)&&y.length?["Resources",...I.signInWithSolana.resources.map(q=>`- ${q}`)]:[]].join(`
`);const ie=await G.signMessage(new TextEncoder().encode(w),"utf8");if(!ie||!(ie instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=ie}}try{const{data:S,error:N}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:OT(_)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Zs});if(N)throw N;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new _d}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:N})}catch(S){if(Bt(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await li(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(r??"").split("/");try{const{data:c,error:d}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Zs});if(await Ra(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new _d}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:d})}catch(c){if(Bt(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(t){try{const{options:r,provider:s,token:o,access_token:c,nonce:d}=t,f=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Zs}),{data:h,error:p}=f;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new _d}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(r){if(Bt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,o,c,d;try{if("email"in t){const{email:f,options:h}=t;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await lo(this.storage,this.storageKey));const{error:y}=await Vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(s=h?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in t){const{phone:f,options:h}=t,{data:p,error:x}=await Vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(c=h?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(d=h?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:x}}throw new Sd("You must provide either an email or phone number.")}catch(f){if(Bt(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(t){var r,s;try{let o,c;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,c=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:f}=await Vt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:Zs});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const h=d.session,p=d.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(o){if(Bt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var r,s,o;try{let c=null,d=null;return this.flowType==="pkce"&&([c,d]=await lo(this.storage,this.storageKey)),await Vt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:ZT})}catch(c){if(Bt(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Oa;const{error:o}=await Vt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(Bt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:o,options:c}=t,{error:d}=await Vt(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in t){const{phone:s,type:o,options:c}=t,{data:d,error:f}=await Vt(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:f}}throw new Sd("You must provide either an email or phone number and a type")}catch(r){if(Bt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await li(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<kh:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const d=await li(this.userStorage,this.storageKey+"-user");d?.user?t.user=d.user:t.user=Nh()}if(this.storage.isServer&&t.user){let d=this.suppressGetSessionWarning;t=new Proxy(t,{get:(h,p,x)=>(!d&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,x))})}return{data:{session:t},error:null}}const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{session:null},error:c}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ba}):await this._useSession(async r=>{var s,o,c;const{data:d,error:f}=r;if(f)throw f;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Oa}:await Vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Ba})})}catch(r){if(Bt(r))return jT(r)&&(await this._removeSession(),await Ra(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:o,error:c}=s;if(c)throw c;if(!o.session)throw new Oa;const d=o.session;let f=null,h=null;this.flowType==="pkce"&&t.email!=null&&([f,h]=await lo(this.storage,this.storageKey));const{data:p,error:x}=await Vt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:h}),jwt:d.access_token,xform:Ba});if(x)throw x;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(s){if(Bt(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Oa;const r=Date.now()/1e3;let s=r,o=!0,c=null;const{payload:d}=Ah(t.access_token);if(d.exp&&(s=d.exp,o=s<=r),o){const{session:f,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:h}=await this._getUser(t.access_token);if(h)throw h;c={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(Bt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:d,error:f}=r;if(f)throw f;t=(s=d.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new Oa;const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{user:null,session:null},error:c}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Bt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!bs())throw new wd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new wd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new h1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new h1("No code detected.");const{data:R,error:I}=await this._exchangeCodeForSession(t.code);if(I)throw I;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:c,refresh_token:d,expires_in:f,expires_at:h,token_type:p}=t;if(!c||!f||!d||!p)throw new wd("No session defined in URL");const x=Math.round(Date.now()/1e3),y=parseInt(f);let v=x+y;h&&(v=parseInt(h));const b=v-x;b*1e3<=mo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const w=v-y;x-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,x):x-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,x);const{data:_,error:S}=await this._getUser(c);if(S)throw S;const N={provider_token:s,provider_refresh_token:o,access_token:c,expires_in:y,expires_at:v,refresh_token:d,token_type:p,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:t.type},error:null}}catch(s){if(Bt(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await li(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:o,error:c}=r;if(c)return{error:c};const d=(s=o.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:f}=await this.admin.signOut(d,t);if(f&&!(TT(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return t!=="others"&&(await this._removeSession(),await Ra(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=BT(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,o;try{const{data:{session:c},error:d}=r;if(d)throw d;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,r={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await lo(this.storage,this.storageKey,!0));try{return await Vt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(Bt(c))return{data:null,error:c};throw c}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:o}=await this._useSession(async c=>{var d,f,h,p,x;const{data:y,error:v}=c;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Vt(this.fetch,"GET",b,{headers:this.headers,jwt:(x=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(o)throw o;return bs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:t.provider,url:s?.url},error:null}}catch(s){if(Bt(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,o;const{data:c,error:d}=r;if(d)throw d;return await Vt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(Bt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await PT(async o=>(o>0&&await LT(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await Vt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Zs})),(o,c)=>{const d=200*Math.pow(2,o);return c&&Ch(c)&&Date.now()+d-s<mo})}catch(s){if(this._debug(r,"error",s),Bt(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),bs()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await li(this.storage,this.storageKey);if(o&&this.userStorage){let d=await li(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await yo(this.userStorage,this.storageKey+"-user",d)),o.user=(t=d?.user)!==null&&t!==void 0?t:Nh()}else if(o&&!o.user&&!o.user){const d=await li(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await Ra(this.storage,this.storageKey+"-user"),await yo(this.storage,this.storageKey,o)):o.user=Nh()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const c=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<kh;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${kh}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),Ch(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(o.access_token);!f&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(s,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Oa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new su;const{data:c,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!c.session)throw new Oa;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={session:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(o,"error",c),Bt(c)){const d={session:null,error:c};return Ch(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,s=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,r)}catch(h){c.push(h)}});if(await Promise.all(d),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await yo(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const c=y1(o);await yo(this.storage,this.storageKey,c)}else{const o=y1(r);await yo(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Ra(this.storage,this.storageKey),await Ra(this.storage,this.storageKey+"-code-verifier"),await Ra(this.storage,this.storageKey+"-user"),this.userStorage&&await Ra(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&bs()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),mo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-t)/mo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${mo}ms, refresh threshold is ${a0} ticks`),o<=a0&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof iv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bs()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const o=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[c,d]=await lo(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(f.toString())}if(s?.queryParams){const c=new URLSearchParams(s.queryParams);o.push(c.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:o,error:c}=r;return c?{data:null,error:c}:await Vt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Bt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,o;const{data:c,error:d}=r;if(d)return{data:null,error:d};const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:h,error:p}=await Vt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(Bt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:c}=r;if(c)return{data:null,error:c};const{data:d,error:f}=await Vt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:c}=r;return c?{data:null,error:c}:await Vt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=t?.factors||[],o=s.filter(d=>d.factor_type==="totp"&&d.status==="verified"),c=s.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:s,totp:o,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:o},error:c}=t;if(c)return{data:null,error:c};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Ah(o.access_token);let f=null;d.aal&&(f=d.aal);let h=f;((s=(r=o.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(h="aal2");const x=d.amr||[];return{data:{currentLevel:f,nextLevel:h,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(f=>f.kid===t);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(f=>f.kid===t),s&&this.jwks_cached_at+ST>o)return s;const{data:c,error:d}=await Vt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,s=c.keys.find(f=>f.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};s=b.session.access_token}const{header:o,payload:c,signature:d,raw:{header:f,payload:h}}=Ah(s);r?.allowExpired||GT(c.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:c,header:o,signature:d},error:null}}const x=VT(o.alg),y=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,y,d,DT(`${f}.${h}`)))throw new l0("Invalid JWT signature");return{data:{claims:c,header:o,signature:d},error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}}}Vl.nextInstanceID=0;const c3=Vl;class d3 extends c3{constructor(t){super(t)}}var u3=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(s.next(x))}catch(y){d(y)}}function h(x){try{p(s.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};class f3{constructor(t,r,s){var o,c,d;this.supabaseUrl=t,this.supabaseKey=r;const f=mT(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:oT,realtime:cT,auth:Object.assign(Object.assign({},lT),{storageKey:h}),global:iT},x=xT(s??{},p);this.storageKey=(o=x.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=x.global.headers)!==null&&c!==void 0?c:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,x.global.fetch),this.fetch=hT(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new k4(new URL("rest/v1",f).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new nT(this.storageUrl.href,this.headers,this.fetch,s?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new m4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return u3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:c,storageKey:d,flowType:f,lock:h,debug:p},x,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d3({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),x),storageKey:d,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:c,flowType:f,lock:h,debug:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new $4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s?.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const h3=(e,t,r)=>new f3(e,t,r);function p3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}p3()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const g3="https://wuluriiajnaruvaldlhb.supabase.co",x3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bHVyaWlham5hcnV2YWxkbGhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4MDc4OTQsImV4cCI6MjA3MzM4Mzg5NH0.-Dx4fALDwoKHjsxOy1hKsME_DG4ZCQi2PdLCq5wV_hI",m3=async(e,t)=>{const r=e instanceof Request?e:void 0,s=r?.url??(typeof e=="string"?e:e instanceof URL?e.toString():""),o=(t?.method??r?.method??"GET").toUpperCase();if(s.includes("/rest/v1"))try{const{pathname:c}=new URL(s);console.info("[supabase]",o,c),c.includes("pg_timezone_names")&&console.trace("Timezone list requested from Supabase")}catch{console.info("[supabase]",o,s)}return fetch(e,t)},Oe=h3(g3,x3,{global:{fetch:m3}}),Pa=e=>{let t=0;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);t=(t<<5)-t+s,t=t&t}return t.toString()},ov=j.createContext(void 0),Sn=()=>{const e=j.useContext(ov);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},y3=({children:e})=>{const[t,r]=j.useState(null),[s,o]=j.useState(null),[c,d]=j.useState(!0);j.useEffect(()=>{const b=setTimeout(()=>{c&&d(!1)},3e4);(async()=>{try{const{data:{session:S},error:N}=await Oe.auth.getSession();if(S?.user)o(S.user),await f(S.user.id);else{const R=localStorage.getItem("pos_user");R&&r(JSON.parse(R))}}catch{}finally{d(!1)}})();const{data:{subscription:_}}=Oe.auth.onAuthStateChange(async(S,N)=>{if(S==="SIGNED_IN"&&N?.user){o(N.user);try{await f(N.user.id)}catch{}}else S==="SIGNED_OUT"?(o(null),r(null),localStorage.removeItem("pos_user")):S==="TOKEN_REFRESHED"&&N?.user&&o(N.user)});return()=>{clearTimeout(b),_.unsubscribe()}},[]);const f=async b=>{try{const{data:w,error:_}=await Oe.from("users").select("*").eq("user_id",parseInt(b)).single();if(_){console.error("Error loading user:",_),r(null);return}const S={user_id:w.user_id,username:w.username,role:w.role,active:w.active,icon:w.icon,business_id:w.business_id??null};r(S),localStorage.setItem("pos_user",JSON.stringify(S))}catch(w){console.error("Error in loadUserProfile:",w),r(null)}},h=async(b,w)=>{try{d(!0);const _=await p(b,w);return _&&localStorage.setItem("lastLogin",new Date().toLocaleString()),_}catch{return!1}finally{d(!1)}},p=async(b,w)=>{try{const _=Pa(w),{data:S,error:N}=await Oe.from("users").select("*").eq("username",b).eq("password_hash",_).eq("active",!0).single();if(N||!S)return!1;const R={user_id:S.user_id,username:S.username,role:S.role,active:S.active,icon:S.icon,business_id:S.business_id??null};return r(R),localStorage.setItem("pos_user",JSON.stringify(R)),localStorage.setItem("lastLogin",new Date().toLocaleString()),localStorage.setItem("lastPassword",w),!0}catch{return!1}},v={user:t,supabaseUser:s,login:h,register:async(b,w,_)=>{try{d(!0);const{data:S,error:N}=await Oe.from("users").select("user_id").eq("username",b).single();if(S)return console.error("Username already exists"),{success:!1};const{data:R,error:I}=await Oe.from("business_info").insert({name:_,business_name:_,business_type:"Retail Store",address:"Default Address",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("business_id").single();if(I||!R)return console.error("Error creating business:",I),{success:!1};const G=Pa(w),{data:Z,error:ie}=await Oe.from("users").insert({username:b,password_hash:G,role:"Owner",active:!0,business_id:R.business_id,created_at:new Date().toISOString()}).select("*").single();if(ie||!Z)return console.error("Error creating user:",ie),await Oe.from("business_info").delete().eq("business_id",R.business_id),{success:!1};try{const te=Pa("admin123"),ue=`admin_${R.business_id}`;await Oe.from("users").insert({username:ue,password_hash:te,role:"Admin",active:!0,business_id:R.business_id,created_at:new Date().toISOString()}),console.log("Admin account created successfully for business:",R.business_id,"with username:",ue)}catch(te){console.warn("Failed to create admin account:",te)}const q={user_id:Z.user_id,username:Z.username,role:Z.role,active:Z.active,icon:Z.icon,business_id:Z.business_id};return r(q),localStorage.setItem("pos_user",JSON.stringify(q)),localStorage.setItem("current_business_id",R.business_id.toString()),localStorage.setItem("lastLogin",new Date().toLocaleString()),{success:!0,adminCredentials:{username:`admin_${R.business_id}`,password:"admin123",businessId:R.business_id}}}catch(S){return console.error("Registration error:",S),{success:!1}}finally{d(!1)}},logout:async()=>{try{s&&await Oe.auth.signOut(),r(null),o(null),localStorage.removeItem("pos_user"),localStorage.removeItem("lastPassword"),window.location.href="/retailpos/login"}catch{window.location.href="/retailpos/login"}},loading:c,currentUserId:s?.id||t?.user_id?.toString()};return a.jsx(ov.Provider,{value:v,children:e})},v3=j.createContext(void 0),b3=({children:e})=>{const{user:t,loading:r}=Sn(),[s,o]=j.useState(null),[c,d]=j.useState(!0),[f,h]=j.useState(null),p=j.useCallback(async()=>{if(!t?.business_id){o(null),d(!1);return}try{d(!0),h(null);const{data:v,error:b}=await Oe.from("business_info").select("*").eq("business_id",t.business_id).single();if(b)throw b;o(v),localStorage.setItem("current_business_id",v.business_id.toString())}catch(v){console.error("Error loading business:",v),h(v instanceof Error?v.message:"Failed to load business"),o(null)}finally{d(!1)}},[t]),x=j.useCallback(async()=>{await p()},[p]);j.useEffect(()=>{r||p()},[p,r]);const y={currentBusiness:s,currentBusinessId:s?.business_id??null,loading:c||r,error:f,refreshBusiness:x};return a.jsx(v3.Provider,{value:y,children:e})},lv=j.createContext(void 0),_3=({children:e})=>{const[t,r]=j.useState(!1);return a.jsx(lv.Provider,{value:{isCollapsed:t,setIsCollapsed:r},children:e})},O0=()=>{const e=j.useContext(lv);if(e===void 0)throw new Error("useNav must be used within a NavProvider");return e},w1={Admin:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Owner:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Manager:{canManageUsers:!1,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!1,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Cashier:{canManageUsers:!1,canManageProducts:!1,canProcessSales:!0,canViewReports:!1,canChangeSettings:!1,canUploadImages:!1,canLookupProducts:!0,canLookupCustomers:!0}},cv=j.createContext(void 0),S3=({children:e})=>{const{user:t}=Sn(),r=t?.role||"Cashier",s=w1[r]||w1.Cashier,o=f=>s[f]||!1,d={userRole:r,permissions:s,hasPermission:o,canAccessRoute:f=>{switch(f){case"/admin":return o("canManageUsers");case"/products":return o("canManageProducts")||o("canLookupProducts");case"/sales":return o("canProcessSales");case"/customers":return o("canLookupCustomers");case"/":return!0;default:return!0}}};return a.jsx(cv.Provider,{value:d,children:e})},I0=()=>{const e=j.useContext(cv);if(e===void 0)throw new Error("useRole must be used within a RoleProvider");return e},w3=j.createContext(void 0),T3=({children:e})=>{const[t,r]=j.useState(null),[s,o]=j.useState(!1);j.useEffect(()=>{const f=sessionStorage.getItem("pin_validated");r(f==="true")},[]);const c=async f=>{o(!0);const h="1967";return await new Promise(p=>setTimeout(p,500)),f===h?(r(!0),sessionStorage.setItem("pin_validated","true"),o(!1),!0):(r(!1),o(!1),!1)},d=f=>{r(f)};return a.jsx(w3.Provider,{value:{isPinValid:t,isCheckingPin:s,validatePin:c,setPinValid:d},children:e})},j3=()=>{const{isCollapsed:e,setIsCollapsed:t}=O0();j.useEffect(()=>{const r=o=>{if(e)return;const c=document.querySelector("nav");if(c&&c.contains(o.target))return;o.target.closest('button, a, input, select, textarea, [role="button"], [onclick]')||t(!0)},s=setTimeout(()=>{document.addEventListener("click",r)},100);return()=>{clearTimeout(s),document.removeEventListener("click",r)}},[e,t])},E3="_container_1vrkj_18",k3="_header_1vrkj_24",C3="_headerContent_1vrkj_30",A3="_headerLeft_1vrkj_55",N3="_logo_1vrkj_60",R3="_headerRight_1vrkj_66",D3="_backLink_1vrkj_71",O3="_mainContent_1vrkj_83",I3="_formContainer_1vrkj_89",B3="_formWrapper_1vrkj_109",M3="_formHeader_1vrkj_118",F3="_formTitle_1vrkj_122",L3="_formSubtitle_1vrkj_129",P3="_form_1vrkj_89",z3="_label_1vrkj_142",U3="_input_1vrkj_150",W3="_inputError_1vrkj_166",q3="_passwordContainer_1vrkj_170",$3="_passwordToggle_1vrkj_174",H3="_error_1vrkj_187",G3="_errorMessage_1vrkj_193",V3="_formOptions_1vrkj_204",Y3="_rememberMe_1vrkj_210",K3="_checkbox_1vrkj_215",X3="_checkboxLabel_1vrkj_223",Q3="_forgotPassword_1vrkj_229",J3="_forgotPasswordLink_1vrkj_233",Z3="_submitButton_1vrkj_248",ej="_backButton_1vrkj_274",tj="_buttonGroup_1vrkj_291",rj="_signupLink_1vrkj_301",nj="_link_1vrkj_308",sj="_socialLogin_1vrkj_320",aj="_divider_1vrkj_324",ij="_dividerLine_1vrkj_328",oj="_dividerText_1vrkj_337",lj="_socialButtons_1vrkj_350",cj="_socialButton_1vrkj_350",dj="_successMessage_1vrkj_390",uj="_successIcon_1vrkj_397",fj="_successTitle_1vrkj_418",hj="_successText_1vrkj_424",pj="_imageContainer_1vrkj_429",gj="_imageOverlay_1vrkj_445",xj="_imageContent_1vrkj_458",mj="_imageText_1vrkj_467",yj="_imageIcon_1vrkj_472",vj="_imageTitle_1vrkj_480",bj="_imageSubtitle_1vrkj_486",_j="_featureList_1vrkj_492",Sj="_featureItem_1vrkj_501",ot={container:E3,header:k3,headerContent:C3,headerLeft:A3,logo:N3,headerRight:R3,backLink:D3,mainContent:O3,formContainer:I3,formWrapper:B3,formHeader:M3,formTitle:F3,formSubtitle:L3,form:P3,label:z3,input:U3,inputError:W3,passwordContainer:q3,passwordToggle:$3,error:H3,errorMessage:G3,formOptions:V3,rememberMe:Y3,checkbox:K3,checkboxLabel:X3,forgotPassword:Q3,forgotPasswordLink:J3,submitButton:Z3,backButton:ej,buttonGroup:tj,signupLink:rj,link:nj,socialLogin:sj,divider:aj,dividerLine:ij,dividerText:oj,socialButtons:lj,socialButton:cj,successMessage:dj,successIcon:uj,successTitle:fj,successText:hj,imageContainer:pj,imageOverlay:gj,imageContent:xj,imageText:mj,imageIcon:yj,imageTitle:vj,imageSubtitle:bj,featureList:_j,featureItem:Sj},dv=()=>{const e=Cs(),{login:t,loading:r}=Sn(),[s,o]=j.useState({email:"",password:"",rememberMe:!1}),[c,d]=j.useState({}),[f,h]=j.useState(!1),[p,x]=j.useState(!1),[y,v]=j.useState(!1),[b,w]=j.useState(!1),[_,S]=j.useState(!1),N=fe=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(fe),R=fe=>{d(J=>{const Q={...J};return delete Q[fe],Q})},I=()=>{let fe=!0;const J={};return s.email.trim()?N(s.email)||(J.email="Please enter a valid email address",fe=!1):(J.email="Email is required",fe=!1),s.password||(J.password="Password is required",fe=!1),d(J),fe},G=()=>{let fe=!0;const J={};return s.email.trim()?N(s.email)||(J.resetEmail="Please enter a valid email address",fe=!1):(J.resetEmail="Email is required",fe=!1),d(J),fe},Z=fe=>{const{name:J,value:Q,type:oe,checked:re}=fe.target;o(ye=>({...ye,[J]:oe==="checkbox"?re:Q})),c[J]&&R(J)},ie=async fe=>{fe.preventDefault(),I()&&(S(!0),await t(s.email,s.password)?e("/staff-login"):d({general:"Invalid email or password"}),S(!1))},q=async fe=>{fe.preventDefault(),G()&&(S(!0),setTimeout(()=>{S(!1),w(!0)},2e3))},P=()=>{h(!f)},te=fe=>{fe.preventDefault(),x(!0),d({})},ue=()=>{x(!1),w(!1),v(!1),d({}),o(fe=>({...fe,password:""}))},X=()=>{e("/staff-login")};return a.jsxs("div",{className:ot.container,children:[a.jsx("header",{className:ot.header,children:a.jsxs("div",{className:ot.headerContent,children:[a.jsx("div",{className:ot.headerLeft,children:a.jsx("h1",{className:ot.logo,children:"TillPoint"})}),a.jsx("div",{className:ot.headerRight,children:a.jsx("a",{href:"/",className:ot.backLink,children:"← Back to Home"})})]})}),a.jsxs("div",{className:ot.mainContent,children:[a.jsx("div",{className:ot.formContainer,children:a.jsxs("div",{className:ot.formWrapper,children:[!p&&!y&&!b&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:ot.formHeader,children:[a.jsx("h2",{className:ot.formTitle,children:"Welcome Back"}),a.jsx("p",{className:ot.formSubtitle,children:"Sign in to your TillPoint account"})]}),a.jsxs("form",{onSubmit:ie,className:ot.form,children:[c.general&&a.jsx("div",{className:ot.errorMessage,children:c.general}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:ot.label,children:"Email Address"}),a.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:Z,required:!0,className:`${ot.input} ${c.email?ot.inputError:""}`,placeholder:"Enter your email"}),c.email&&a.jsx("span",{className:ot.error,children:c.email})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:ot.label,children:"Password"}),a.jsxs("div",{className:ot.passwordContainer,children:[a.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:s.password,onChange:Z,required:!0,className:`${ot.input} ${c.password?ot.inputError:""}`,placeholder:"Enter your password"}),a.jsx("button",{type:"button",onClick:P,className:ot.passwordToggle,children:a.jsx("i",{className:`fas ${f?"fa-eye-slash":"fa-eye"}`})})]}),c.password&&a.jsx("span",{className:ot.error,children:c.password})]}),a.jsxs("div",{className:ot.formOptions,children:[a.jsxs("div",{className:ot.rememberMe,children:[a.jsx("input",{id:"remember-me",name:"rememberMe",type:"checkbox",checked:s.rememberMe,onChange:Z,className:ot.checkbox}),a.jsx("label",{htmlFor:"remember-me",className:ot.checkboxLabel,children:"Remember me"})]}),a.jsx("div",{className:ot.forgotPassword,children:a.jsx("button",{type:"button",onClick:te,className:ot.forgotPasswordLink,children:"Forgot your password?"})})]}),a.jsx("button",{type:"submit",className:ot.submitButton,disabled:_,children:_?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin"}),"Signing In..."]}):"Sign In"}),a.jsxs("div",{className:ot.signupLink,children:["Don't have an account?",a.jsx("a",{href:"/signup",className:ot.link,children:"Sign Up"})]})]}),a.jsxs("div",{className:ot.socialLogin,children:[a.jsxs("div",{className:ot.divider,children:[a.jsx("div",{className:ot.dividerLine}),a.jsx("div",{className:ot.dividerText,children:a.jsx("span",{children:"Or continue with"})})]}),a.jsxs("div",{className:ot.socialButtons,children:[a.jsxs("button",{type:"button",className:ot.socialButton,children:[a.jsx("i",{className:"fab fa-google"}),"Google"]}),a.jsxs("button",{type:"button",className:ot.socialButton,children:[a.jsx("i",{className:"fab fa-microsoft"}),"Microsoft"]})]})]})]}),p&&!b&&a.jsxs("form",{onSubmit:q,className:ot.form,children:[a.jsxs("div",{className:ot.formHeader,children:[a.jsx("h3",{className:ot.formTitle,children:"Reset Password"}),a.jsx("p",{className:ot.formSubtitle,children:"Enter your email address and we'll send you a link to reset your password"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"reset-email",className:ot.label,children:"Email Address"}),a.jsx("input",{type:"email",id:"reset-email",name:"email",value:s.email,onChange:Z,required:!0,className:`${ot.input} ${c.resetEmail?ot.inputError:""}`,placeholder:"Enter your email"}),c.resetEmail&&a.jsx("span",{className:ot.error,children:c.resetEmail})]}),a.jsxs("div",{className:ot.buttonGroup,children:[a.jsx("button",{type:"button",onClick:ue,className:ot.backButton,children:"Back to Sign In"}),a.jsx("button",{type:"submit",className:ot.submitButton,disabled:_,children:_?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin"}),"Sending..."]}):"Send Reset Link"})]})]}),y&&a.jsxs("div",{className:ot.successMessage,children:[a.jsx("div",{className:ot.successIcon,children:a.jsx("i",{className:"fas fa-check"})}),a.jsx("h3",{className:ot.successTitle,children:"Welcome Back!"}),a.jsx("p",{className:ot.successText,children:"You have successfully signed in to your account."}),a.jsx("button",{onClick:X,className:ot.submitButton,children:"Go to Staff Login"})]}),b&&a.jsxs("div",{className:ot.successMessage,children:[a.jsx("div",{className:ot.successIcon,children:a.jsx("i",{className:"fas fa-envelope"})}),a.jsx("h3",{className:ot.successTitle,children:"Reset Link Sent!"}),a.jsx("p",{className:ot.successText,children:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions."}),a.jsx("button",{onClick:ue,className:ot.submitButton,children:"Back to Sign In"})]})]})}),a.jsxs("div",{className:ot.imageContainer,children:[a.jsx("div",{className:ot.imageOverlay}),a.jsx("div",{className:ot.imageContent,children:a.jsxs("div",{className:ot.imageText,children:[a.jsx("div",{className:ot.imageIcon,children:a.jsx("i",{className:"fas fa-chart-line"})}),a.jsx("h2",{className:ot.imageTitle,children:"Manage Your Business"}),a.jsx("p",{className:ot.imageSubtitle,children:"Access your dashboard to track sales, manage inventory, and grow your business with powerful analytics."}),a.jsxs("div",{className:ot.featureList,children:[a.jsxs("div",{className:ot.featureItem,children:[a.jsx("i",{className:"fas fa-chart-bar"}),a.jsx("span",{children:"Real-time sales tracking"})]}),a.jsxs("div",{className:ot.featureItem,children:[a.jsx("i",{className:"fas fa-boxes"}),a.jsx("span",{children:"Inventory management"})]}),a.jsxs("div",{className:ot.featureItem,children:[a.jsx("i",{className:"fas fa-users"}),a.jsx("span",{children:"Customer insights"})]}),a.jsxs("div",{className:ot.featureItem,children:[a.jsx("i",{className:"fas fa-mobile-alt"}),a.jsx("span",{children:"Mobile-friendly interface"})]})]})]})})]})]})]})},wj=({children:e})=>{const{user:t,supabaseUser:r,loading:s}=Sn();return s?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"Loading..."})]})}):!t&&!r?a.jsx(dv,{}):a.jsx(a.Fragment,{children:e})},Td=({children:e,requiredPermission:t,fallbackRoute:r="/"})=>{const s=ks(),{canAccessRoute:o,hasPermission:c}=I0();return o(s.pathname)?t&&!c(t)?a.jsx(zm,{to:r,replace:!0}):a.jsx(a.Fragment,{children:e}):a.jsx(zm,{to:r,replace:!0})},Tj=()=>{const e=ks(),{user:t,logout:r}=Sn(),{isCollapsed:s,setIsCollapsed:o}=O0(),{canAccessRoute:c,userRole:d}=I0(),h=[{path:"/dashboard",label:"Dashboard",icon:"fas fa-home"},{path:"/products",label:"Products",icon:"fas fa-box"},{path:"/sales",label:"Sales",icon:"fas fa-dollar-sign"},{path:"/transactions",label:"Transactions",icon:"fas fa-receipt"},{path:"/side-businesses",label:"Side Businesses",icon:"fas fa-briefcase"},{path:"/reminders",label:"Reminders",icon:"fas fa-sticky-note"},{path:"/admin",label:"Admin",icon:"fas fa-users-cog"}].filter(x=>c(x.path)),p=x=>{switch(x){case"Admin":return"#ef4444";case"Owner":return"#8b5cf6";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#6b7280"}};return a.jsxs("nav",{style:{width:s?"70px":"200px",height:"100vh",background:"#1a1a1a",borderRight:"1px solid #333333",display:"flex",flexDirection:"column",position:"fixed",left:0,top:0,zIndex:50,padding:s?"20px 10px 20px 10px":"20px 16px 20px 16px",boxShadow:"2px 0 8px rgba(0, 0, 0, 0.3)",transition:"width 0.3s ease, padding 0.3s ease"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:s?"center":"flex-start",gap:"12px",marginBottom:"32px",paddingBottom:"16px",borderBottom:"1px solid #333333"},children:[a.jsx("div",{onClick:()=>o(!s),style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:x=>x.target.style.setProperty("background-color","#333333"),onMouseLeave:x=>x.target.style.setProperty("background-color","transparent"),children:a.jsx("div",{style:{width:"16px",height:"2px",background:"#ffffff",position:"relative",transition:"transform 0.3s ease"},children:a.jsx("div",{style:{position:"absolute",top:"6px",left:0,width:"16px",height:"2px",background:"#ffffff",transition:"transform 0.3s ease"}})})}),!s&&a.jsx("h1",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"bold",margin:0,transition:"opacity 0.3s ease"},children:"Retail POS"})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1,overflowY:"auto"},children:h.map(x=>a.jsxs(Ia,{to:x.path,style:{display:"flex",alignItems:"center",justifyContent:s?"center":"flex-start",gap:"12px",padding:s?"12px 8px":"12px 16px",borderRadius:"8px",textDecoration:"none",transition:"all 0.2s ease",background:e.pathname===x.path?"#333333":"transparent",color:e.pathname===x.path?"#ffffff":"#cccccc"},onMouseEnter:y=>{if(e.pathname!==x.path){const v=y.currentTarget;v.style.backgroundColor="#333333",v.style.color="#ffffff"}},onMouseLeave:y=>{if(e.pathname!==x.path){const v=y.currentTarget;v.style.backgroundColor="transparent",v.style.color="#cccccc"}},children:[a.jsx("i",{className:x.icon,style:{fontSize:"16px",width:"20px"}}),!s&&a.jsx("span",{style:{fontSize:"13px",fontWeight:"500",transition:"opacity 0.3s ease"},children:x.label})]},x.path))}),a.jsxs("div",{style:{padding:"8px 0",borderTop:"1px solid #333333",display:"flex",flexDirection:"column",gap:"8px",alignItems:s?"center":"stretch"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:s?"center":"flex-start",gap:"12px",padding:s?"8px":"8px 12px",borderRadius:"8px",background:"#333333",cursor:"pointer",transition:"background 0.2s ease",width:s?"50px":"auto"},onMouseEnter:x=>x.target.style.setProperty("background-color","#444444"),onMouseLeave:x=>x.target.style.setProperty("background-color","#333333"),children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",color:"#1a1a1a",fontSize:"14px",fontWeight:"bold"},children:t?.username?.charAt(0).toUpperCase()}),!s&&a.jsxs("div",{style:{flex:1},children:[a.jsx("p",{style:{color:"#ffffff",fontSize:"14px",fontWeight:"500",margin:0,lineHeight:"1.2",transition:"opacity 0.3s ease"},children:t?.username}),a.jsx("p",{style:{color:p(d),fontSize:"12px",margin:0,textTransform:"capitalize",transition:"opacity 0.3s ease",fontWeight:"500"},children:d})]})]}),a.jsxs("button",{onClick:async()=>{console.log("Logout button clicked"),await r()},style:{width:s?"50px":"100%",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"8px",background:"#dc3545",border:"none",cursor:"pointer",transition:"background 0.2s ease, width 0.3s ease",color:"#ffffff",fontSize:"14px",fontWeight:"500"},onMouseEnter:x=>{const y=x.target;y.style.background="#c82333"},onMouseLeave:x=>{const y=x.target;y.style.background="#dc3545"},children:[a.jsx("i",{className:"fa-solid fa-sign-out-alt",style:{fontSize:"16px"}}),!s&&a.jsx("span",{style:{transition:"opacity 0.3s ease"},children:"Logout"})]})]})]})},jj="_container_eqwes_2",Ej="_nav_eqwes_21",kj="_navContent_eqwes_27",Cj="_navFlex_eqwes_33",Aj="_logoContainer_eqwes_40",Nj="_logoText_eqwes_45",Rj="_navLinks_eqwes_51",Dj="_navLink_eqwes_51",Oj="_navButton_eqwes_69",Ij="_heroSection_eqwes_86",Bj="_heroContent_eqwes_91",Mj="_heroTitle_eqwes_98",Fj="_heroTitleHighlight_eqwes_106",Lj="_heroSubtitle_eqwes_111",Pj="_heroButtons_eqwes_120",zj="_primaryButton_eqwes_128",Uj="_secondaryButton_eqwes_147",Wj="_featuresSection_eqwes_167",qj="_featuresContent_eqwes_172",$j="_featuresHeader_eqwes_178",Hj="_featuresTitle_eqwes_183",Gj="_featuresSubtitle_eqwes_190",Vj="_featuresGrid_eqwes_197",Yj="_featureCard_eqwes_203",Kj="_featureIcon_eqwes_214",Xj="_featureTitle_eqwes_220",Qj="_featureDescription_eqwes_227",Jj="_benefitsSection_eqwes_232",Zj="_benefitsContent_eqwes_237",eE="_benefitsGrid_eqwes_243",tE="_benefitsTitle_eqwes_250",rE="_benefitItem_eqwes_257",nE="_benefitIcon_eqwes_263",sE="_benefitContent_eqwes_280",aE="_ctaCard_eqwes_291",iE="_ctaIcon_eqwes_299",oE="_ctaTitle_eqwes_305",lE="_ctaDescription_eqwes_312",cE="_ctaButton_eqwes_317",dE="_ctaSection_eqwes_334",uE="_ctaContent_eqwes_340",fE="_ctaSectionTitle_eqwes_346",hE="_ctaSectionDescription_eqwes_353",pE="_ctaSectionButtons_eqwes_360",gE="_ctaSectionPrimaryButton_eqwes_368",xE="_ctaSectionSecondaryButton_eqwes_387",mE="_footer_eqwes_407",yE="_footerContent_eqwes_413",vE="_footerGrid_eqwes_419",bE="_footerBrand_eqwes_426",_E="_footerBrandTitle_eqwes_430",SE="_footerBrandDescription_eqwes_436",wE="_footerSection_eqwes_442",TE="_footerLinks_eqwes_448",jE="_footerLink_eqwes_448",EE="_footerDivider_eqwes_469",ut={container:jj,nav:Ej,navContent:kj,navFlex:Cj,logoContainer:Aj,logoText:Nj,navLinks:Rj,navLink:Dj,navButton:Oj,heroSection:Ij,heroContent:Bj,heroTitle:Mj,heroTitleHighlight:Fj,heroSubtitle:Lj,heroButtons:Pj,primaryButton:zj,secondaryButton:Uj,featuresSection:Wj,featuresContent:qj,featuresHeader:$j,featuresTitle:Hj,featuresSubtitle:Gj,featuresGrid:Vj,featureCard:Yj,featureIcon:Kj,featureTitle:Xj,featureDescription:Qj,benefitsSection:Jj,benefitsContent:Zj,benefitsGrid:eE,benefitsTitle:tE,benefitItem:rE,benefitIcon:nE,benefitContent:sE,ctaCard:aE,ctaIcon:iE,ctaTitle:oE,ctaDescription:lE,ctaButton:cE,ctaSection:dE,ctaContent:uE,ctaSectionTitle:fE,ctaSectionDescription:hE,ctaSectionButtons:pE,ctaSectionPrimaryButton:gE,ctaSectionSecondaryButton:xE,footer:mE,footerContent:yE,footerGrid:vE,footerBrand:bE,footerBrandTitle:_E,footerBrandDescription:SE,footerSection:wE,footerLinks:TE,footerLink:jE,footerDivider:EE},T1=()=>{j.useEffect(()=>{document.body.style.overflow="auto",document.documentElement.style.overflow="auto";const t=document.getElementById("root");return t&&(t.style.overflow="auto",t.style.height="auto"),()=>{document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",t&&(t.style.overflow="hidden",t.style.height="100%")}},[]);const e=[{icon:"fas fa-barcode",title:"Barcode Scanning",description:"Fast and accurate product scanning with built-in barcode reader support for instant product lookup and checkout."},{icon:"fas fa-building",title:"Multi-Tenant Architecture",description:"Manage multiple businesses from one system with complete data isolation and role-based access controls."},{icon:"fas fa-credit-card",title:"Partial Payments",description:"Accept split payments, layaway plans, and partial transactions with flexible payment processing options."},{icon:"fas fa-weight",title:"Weighted Products",description:"Handle bulk items, produce, and weighted goods with precise weight-based pricing and inventory tracking."},{icon:"fas fa-volume-up",title:"Text-to-Speech",description:"AI-powered voice announcements with OpenAI TTS integration for order confirmation and accessibility."},{icon:"fas fa-chart-bar",title:"Advanced Analytics",description:"Comprehensive dashboard with sales insights, inventory tracking, and business performance metrics."}];return a.jsxs("div",{className:ut.container,children:[a.jsx("nav",{className:ut.nav,children:a.jsx("div",{className:ut.navContent,children:a.jsxs("div",{className:ut.navFlex,children:[a.jsx("div",{className:ut.logoContainer,children:a.jsx("h1",{className:ut.logoText,children:"TillPoint"})}),a.jsxs("div",{className:ut.navLinks,children:[a.jsx("a",{href:"#features",className:ut.navLink,children:"Features"}),a.jsx("a",{href:"#pricing",className:ut.navLink,children:"Pricing"}),a.jsx("a",{href:"#contact",className:ut.navLink,children:"Contact"}),a.jsx(Ia,{to:"/login",className:ut.navLink,children:"Sign In"}),a.jsx(Ia,{to:"/signup",className:ut.navButton,children:"Get Started"})]})]})})}),a.jsx("section",{className:ut.heroSection,children:a.jsxs("div",{className:ut.heroContent,children:[a.jsxs("h1",{className:ut.heroTitle,children:["Modern Point of Sale",a.jsx("span",{className:ut.heroTitleHighlight,children:"Built for Today's Business"})]}),a.jsx("p",{className:ut.heroSubtitle,children:"TillPoint combines powerful features with intuitive design to streamline your retail operations. From barcode scanning to advanced analytics, everything you need in one system."}),a.jsxs("div",{className:ut.heroButtons,children:[a.jsx(Ia,{to:"/signup",className:ut.primaryButton,children:"Start Free Trial"}),a.jsx("button",{className:ut.secondaryButton,children:"Watch Demo"})]})]})}),a.jsx("section",{id:"features",className:ut.featuresSection,children:a.jsxs("div",{className:ut.featuresContent,children:[a.jsxs("div",{className:ut.featuresHeader,children:[a.jsx("h2",{className:ut.featuresTitle,children:"Everything You Need to Run Your Business"}),a.jsx("p",{className:ut.featuresSubtitle,children:"Powerful features designed to make your retail operations smooth, efficient, and profitable."})]}),a.jsx("div",{className:ut.featuresGrid,children:e.map((t,r)=>a.jsxs("div",{className:ut.featureCard,children:[a.jsx("div",{className:ut.featureIcon,children:a.jsx("i",{className:t.icon})}),a.jsx("h3",{className:ut.featureTitle,children:t.title}),a.jsx("p",{className:ut.featureDescription,children:t.description})]},r))})]})}),a.jsx("section",{className:ut.benefitsSection,children:a.jsx("div",{className:ut.benefitsContent,children:a.jsxs("div",{className:ut.benefitsGrid,children:[a.jsxs("div",{children:[a.jsx("h2",{className:ut.benefitsTitle,children:"Why Choose TillPoint?"}),a.jsxs("div",{className:ut.benefitItem,children:[a.jsx("div",{className:ut.benefitIcon,children:a.jsx("i",{className:"fas fa-check"})}),a.jsxs("div",{className:ut.benefitContent,children:[a.jsx("h3",{children:"Easy Setup"}),a.jsx("p",{children:"Get up and running in minutes with our intuitive setup process."})]})]}),a.jsxs("div",{className:ut.benefitItem,children:[a.jsx("div",{className:ut.benefitIcon,children:a.jsx("i",{className:"fas fa-check"})}),a.jsxs("div",{className:ut.benefitContent,children:[a.jsx("h3",{children:"24/7 Support"}),a.jsx("p",{children:"Our dedicated support team is always here to help you succeed."})]})]}),a.jsxs("div",{className:ut.benefitItem,children:[a.jsx("div",{className:ut.benefitIcon,children:a.jsx("i",{className:"fas fa-check"})}),a.jsxs("div",{className:ut.benefitContent,children:[a.jsx("h3",{children:"Secure & Reliable"}),a.jsx("p",{children:"Enterprise-grade security with 99.9% uptime guarantee."})]})]})]}),a.jsxs("div",{className:ut.ctaCard,children:[a.jsx("div",{className:ut.ctaIcon,children:a.jsx("i",{className:"fas fa-cash-register"})}),a.jsx("h3",{className:ut.ctaTitle,children:"Ready to Get Started?"}),a.jsx("p",{className:ut.ctaDescription,children:"Join thousands of businesses already using TillPoint to streamline their operations."}),a.jsx(Ia,{to:"/login",className:ut.ctaButton,children:"Start Your Free Trial"})]})]})})}),a.jsx("section",{className:ut.ctaSection,children:a.jsxs("div",{className:ut.ctaContent,children:[a.jsx("h2",{className:ut.ctaSectionTitle,children:"Transform Your Business Today"}),a.jsx("p",{className:ut.ctaSectionDescription,children:"Experience the power of modern point-of-sale technology. No setup fees, no long-term contracts."}),a.jsxs("div",{className:ut.ctaSectionButtons,children:[a.jsx(Ia,{to:"/signup",className:ut.ctaSectionPrimaryButton,children:"Get Started Free"}),a.jsx("button",{className:ut.ctaSectionSecondaryButton,children:"Schedule Demo"})]})]})}),a.jsx("footer",{className:ut.footer,children:a.jsxs("div",{className:ut.footerContent,children:[a.jsxs("div",{className:ut.footerGrid,children:[a.jsxs("div",{className:ut.footerBrand,children:[a.jsx("h3",{className:ut.footerBrandTitle,children:"TillPoint"}),a.jsx("p",{className:ut.footerBrandDescription,children:"The modern point-of-sale system designed for today's businesses. Powerful, intuitive, and built to grow with you."})]}),a.jsxs("div",{className:ut.footerSection,children:[a.jsx("h4",{children:"Product"}),a.jsxs("ul",{className:ut.footerLinks,children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:ut.footerLink,children:"Features"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:ut.footerLink,children:"Pricing"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:ut.footerLink,children:"Integrations"})})]})]}),a.jsxs("div",{className:ut.footerSection,children:[a.jsx("h4",{children:"Support"}),a.jsxs("ul",{className:ut.footerLinks,children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:ut.footerLink,children:"Help Center"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:ut.footerLink,children:"Contact Us"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:ut.footerLink,children:"Documentation"})})]})]})]}),a.jsx("div",{className:ut.footerDivider,children:a.jsx("p",{children:"© 2024 TillPoint. All rights reserved."})})]})})]})},kE="_container_1q24y_16",CE="_header_1q24y_23",AE="_headerContent_1q24y_29",NE="_headerLeft_1q24y_54",RE="_logo_1q24y_59",DE="_headerRight_1q24y_65",OE="_backLink_1q24y_70",IE="_mainContent_1q24y_82",BE="_formContainer_1q24y_89",ME="_formWrapper_1q24y_110",FE="_progressSection_1q24y_119",LE="_progressIndicator_1q24y_123",PE="_stepIndicator_1q24y_130",zE="_active_1q24y_144",UE="_progressBar_1q24y_149",WE="_progressFill_1q24y_158",qE="_stepTitle_1q24y_164",$E="_stepSubtitle_1q24y_171",HE="_form_1q24y_89",GE="_formGrid_1q24y_184",VE="_label_1q24y_191",YE="_input_1q24y_199",KE="_inputError_1q24y_215",XE="_passwordContainer_1q24y_219",QE="_passwordToggle_1q24y_223",JE="_error_1q24y_240",ZE="_errorMessage_1q24y_246",ek="_submitButton_1q24y_257",tk="_backButton_1q24y_285",rk="_buttonGroup_1q24y_303",nk="_loginLink_1q24y_313",sk="_link_1q24y_320",ak="_fileUpload_1q24y_332",ik="_fileUploadContent_1q24y_346",ok="_fileUploadText_1q24y_359",lk="_fileUploadLabel_1q24y_365",ck="_fileUploadHint_1q24y_378",dk="_fileInput_1q24y_383",uk="_logoPreview_1q24y_396",fk="_logoImage_1q24y_400",hk="_successMessage_1q24y_408",pk="_successIcon_1q24y_415",gk="_successTitle_1q24y_431",xk="_successText_1q24y_437",mk="_adminInfo_1q24y_442",yk="_adminCard_1q24y_446",vk="_adminTitle_1q24y_454",bk="_adminNumber_1q24y_461",_k="_adminNote_1q24y_472",Sk="_imageContainer_1q24y_479",wk="_imageOverlay_1q24y_495",Tk="_imageContent_1q24y_501",jk="_imageText_1q24y_510",Ek="_imageIcon_1q24y_515",kk="_imageTitle_1q24y_523",Ck="_imageSubtitle_1q24y_529",Ue={container:kE,header:CE,headerContent:AE,headerLeft:NE,logo:RE,headerRight:DE,backLink:OE,mainContent:IE,formContainer:BE,formWrapper:ME,progressSection:FE,progressIndicator:LE,stepIndicator:PE,active:zE,progressBar:UE,progressFill:WE,stepTitle:qE,stepSubtitle:$E,form:HE,formGrid:GE,label:VE,input:YE,inputError:KE,passwordContainer:XE,passwordToggle:QE,error:JE,errorMessage:ZE,submitButton:ek,backButton:tk,buttonGroup:rk,loginLink:nk,link:sk,fileUpload:ak,fileUploadContent:ik,fileUploadText:ok,fileUploadLabel:lk,fileUploadHint:ck,fileInput:dk,logoPreview:uk,logoImage:fk,successMessage:hk,successIcon:pk,successTitle:gk,successText:xk,adminInfo:mk,adminCard:yk,adminTitle:vk,adminNumber:bk,adminNote:_k,imageContainer:Sk,imageOverlay:wk,imageContent:Tk,imageText:jk,imageIcon:Ek,imageTitle:kk,imageSubtitle:Ck},Ak=()=>{const e=Cs(),[t,r]=j.useState(1),[s,o]=j.useState({}),[c,d]=j.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",businessName:"",businessType:"",businessDescription:"",businessAddress:"",businessPhone:"",currency:"USD",website:"",vatNumber:"",businessHours:"9:00 AM - 6:00 PM",businessLogo:null,userId:null}),[f,h]=j.useState({}),[p,x]=j.useState(!1),[y,v]=j.useState(!1),[b,w]=j.useState(null),[_,S]=j.useState(!1),[N,R]=j.useState(!1),I=Q=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Q),G=Q=>{h(oe=>{const re={...oe};return delete re[Q],re})},Z=()=>{let Q=!0;const oe={};return c.firstName.trim()||(oe.firstName="First name is required",Q=!1),c.lastName.trim()||(oe.lastName="Last name is required",Q=!1),c.email.trim()?I(c.email)||(oe.email="Please enter a valid email address",Q=!1):(oe.email="Email is required",Q=!1),c.password?c.password.length<8&&(oe.password="Password must be at least 8 characters",Q=!1):(oe.password="Password is required",Q=!1),c.confirmPassword?c.password!==c.confirmPassword&&(oe.confirmPassword="Passwords do not match",Q=!1):(oe.confirmPassword="Please confirm your password",Q=!1),h(oe),Q},ie=()=>{let Q=!0;const oe={};return c.businessName.trim()||(oe.businessName="Business name is required",Q=!1),c.businessType||(oe.businessType="Please select a business type",Q=!1),c.businessAddress.trim()||(oe.businessAddress="Business address is required",Q=!1),c.businessPhone.trim()||(oe.businessPhone="Business phone is required",Q=!1),h(oe),Q},q=Q=>{const{name:oe,value:re}=Q.target;d(ye=>({...ye,[oe]:re})),f[oe]&&G(oe)},P=Q=>{const oe=Q.target.files?.[0];if(oe){d(ye=>({...ye,businessLogo:oe}));const re=new FileReader;re.onload=ye=>{w(ye.target?.result)},re.readAsDataURL(oe)}},te=Q=>{Q.preventDefault(),Z()&&(o(c),r(2))},ue=async Q=>{if(Q.preventDefault(),ie()){S(!0);try{console.log("Creating business with data:",{name:c.businessName,address:c.businessAddress,phone_number:c.businessPhone,vat_number:c.vatNumber,receipt_footer:"Thank you for shopping with us!"});const oe=await Oe.from("business_info").insert({name:c.businessName,business_name:c.businessName,business_type:c.businessType,description:c.businessDescription,address:c.businessAddress,phone_number:c.businessPhone,vat_number:c.vatNumber,website:c.website,business_hours:c.businessHours,currency:c.currency,receipt_footer:"Thank you for shopping with us!"}).select().single();if(oe.error)throw console.error("Business creation error:",oe.error),new Error(oe.error.message);const re=oe.data.business_id;let ye=null;if(c.businessLogo){const B=c.businessLogo.name.split(".").pop(),K=`business-logos/${re}.${B}`,{data:E,error:L}=await Oe.storage.from("products").upload(K,c.businessLogo);if(L)console.warn("Logo upload failed:",L);else{const{data:{publicUrl:z}}=Oe.storage.from("products").getPublicUrl(K);ye=z,await Oe.from("business_info").update({logo_url:ye}).eq("business_id",re)}}const le=await Oe.from("users").insert({username:c.email,password_hash:Pa(c.password),role:"Admin",active:!0,business_id:re,icon:"lily"}).select().single();if(le.error)throw new Error(le.error.message);const Ae=le.data.user_id;await Oe.from("users").insert({username:"admin",password_hash:Pa("admin123"),role:"Admin",active:!0,business_id:re,icon:"ryu"});try{await Oe.auth.signUp({email:c.email,password:c.password,options:{data:{first_name:c.firstName,last_name:c.lastName,business_id:re}}})}catch(B){console.warn("Auth signup failed:",B)}S(!1),R(!0),d(B=>({...B,userId:Ae}))}catch(oe){console.error("Signup error:",oe),S(!1),h({general:oe instanceof Error?oe.message:"Failed to create account"})}}},X=()=>{r(1),h({})},fe=()=>{x(!p)},J=()=>{v(!y)};return a.jsxs("div",{className:Ue.container,children:[a.jsx("header",{className:Ue.header,children:a.jsxs("div",{className:Ue.headerContent,children:[a.jsx("div",{className:Ue.headerLeft,children:a.jsx("h1",{className:Ue.logo,children:"TillPoint"})}),a.jsx("div",{className:Ue.headerRight,children:a.jsx("a",{href:"/",className:Ue.backLink,children:"← Back to Home"})})]})}),a.jsxs("div",{className:Ue.mainContent,children:[a.jsx("div",{className:Ue.formContainer,children:a.jsxs("div",{className:Ue.formWrapper,children:[a.jsxs("div",{className:Ue.progressSection,children:[a.jsxs("div",{className:Ue.progressIndicator,children:[a.jsx("div",{className:`${Ue.stepIndicator} ${t>=1?Ue.active:""}`,children:t>1?a.jsx("i",{className:"fas fa-check"}):"1"}),a.jsx("div",{className:Ue.progressBar,children:a.jsx("div",{className:Ue.progressFill,style:{width:t===1?"50%":"100%"}})}),a.jsx("div",{className:`${Ue.stepIndicator} ${t>=2?Ue.active:""}`,children:t>2?a.jsx("i",{className:"fas fa-check"}):"2"})]}),a.jsx("h2",{className:Ue.stepTitle,children:t===1?"Personal Information":"Business Information"}),a.jsx("p",{className:Ue.stepSubtitle,children:t===1?"Step 1 of 2 - Let's start with your details":"Step 2 of 2 - Tell us about your business"})]}),t===1&&a.jsxs("form",{onSubmit:te,className:Ue.form,children:[a.jsxs("div",{className:Ue.formGrid,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"firstName",className:Ue.label,children:"First Name *"}),a.jsx("input",{type:"text",id:"firstName",name:"firstName",value:c.firstName,onChange:q,required:!0,className:`${Ue.input} ${f.firstName?Ue.inputError:""}`}),f.firstName&&a.jsx("span",{className:Ue.error,children:f.firstName})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lastName",className:Ue.label,children:"Last Name *"}),a.jsx("input",{type:"text",id:"lastName",name:"lastName",value:c.lastName,onChange:q,required:!0,className:`${Ue.input} ${f.lastName?Ue.inputError:""}`}),f.lastName&&a.jsx("span",{className:Ue.error,children:f.lastName})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:Ue.label,children:"Email Address *"}),a.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:q,required:!0,className:`${Ue.input} ${f.email?Ue.inputError:""}`}),f.email&&a.jsx("span",{className:Ue.error,children:f.email})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:Ue.label,children:"Phone Number"}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:c.phone,onChange:q,className:Ue.input})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:Ue.label,children:"Password *"}),a.jsxs("div",{className:Ue.passwordContainer,children:[a.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:c.password,onChange:q,required:!0,minLength:8,className:`${Ue.input} ${f.password?Ue.inputError:""}`}),a.jsx("button",{type:"button",onClick:fe,className:Ue.passwordToggle,children:a.jsx("i",{className:`fas ${p?"fa-eye-slash":"fa-eye"}`})})]}),f.password&&a.jsx("span",{className:Ue.error,children:f.password})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:Ue.label,children:"Confirm Password *"}),a.jsxs("div",{className:Ue.passwordContainer,children:[a.jsx("input",{type:y?"text":"password",id:"confirmPassword",name:"confirmPassword",value:c.confirmPassword,onChange:q,required:!0,className:`${Ue.input} ${f.confirmPassword?Ue.inputError:""}`}),a.jsx("button",{type:"button",onClick:J,className:Ue.passwordToggle,children:a.jsx("i",{className:`fas ${y?"fa-eye-slash":"fa-eye"}`})})]}),f.confirmPassword&&a.jsx("span",{className:Ue.error,children:f.confirmPassword})]}),a.jsx("button",{type:"submit",className:Ue.submitButton,children:"Continue to Business Information"}),a.jsxs("div",{className:Ue.loginLink,children:["Already have an account?",a.jsx("a",{href:"/retailpos/staff-login",className:Ue.link,children:"Sign In"})]})]}),t===2&&!N&&a.jsxs("form",{onSubmit:ue,className:Ue.form,children:[f.general&&a.jsx("div",{className:Ue.errorMessage,children:f.general}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"businessName",className:Ue.label,children:"Business Name *"}),a.jsx("input",{type:"text",id:"businessName",name:"businessName",value:c.businessName,onChange:q,required:!0,className:`${Ue.input} ${f.businessName?Ue.inputError:""}`}),f.businessName&&a.jsx("span",{className:Ue.error,children:f.businessName})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"businessType",className:Ue.label,children:"Business Type *"}),a.jsxs("select",{id:"businessType",name:"businessType",value:c.businessType,onChange:q,required:!0,className:`${Ue.input} ${f.businessType?Ue.inputError:""}`,children:[a.jsx("option",{value:"",children:"Select business type"}),a.jsx("option",{value:"retail",children:"Retail Store"}),a.jsx("option",{value:"restaurant",children:"Restaurant"}),a.jsx("option",{value:"service",children:"Service Business"}),a.jsx("option",{value:"ecommerce",children:"E-commerce"}),a.jsx("option",{value:"healthcare",children:"Healthcare"}),a.jsx("option",{value:"education",children:"Education"}),a.jsx("option",{value:"manufacturing",children:"Manufacturing"}),a.jsx("option",{value:"other",children:"Other"})]}),f.businessType&&a.jsx("span",{className:Ue.error,children:f.businessType})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"businessDescription",className:Ue.label,children:"Business Description"}),a.jsx("textarea",{id:"businessDescription",name:"businessDescription",value:c.businessDescription,onChange:q,rows:3,className:Ue.input,placeholder:"Brief description of your business..."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"businessAddress",className:Ue.label,children:"Business Address *"}),a.jsx("textarea",{id:"businessAddress",name:"businessAddress",value:c.businessAddress,onChange:q,required:!0,rows:3,className:`${Ue.input} ${f.businessAddress?Ue.inputError:""}`,placeholder:"Street address, city, state, postal code"}),f.businessAddress&&a.jsx("span",{className:Ue.error,children:f.businessAddress})]}),a.jsxs("div",{className:Ue.formGrid,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"businessPhone",className:Ue.label,children:"Business Phone *"}),a.jsx("input",{type:"tel",id:"businessPhone",name:"businessPhone",value:c.businessPhone,onChange:q,required:!0,className:`${Ue.input} ${f.businessPhone?Ue.inputError:""}`}),f.businessPhone&&a.jsx("span",{className:Ue.error,children:f.businessPhone})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"currency",className:Ue.label,children:"Currency *"}),a.jsxs("select",{id:"currency",name:"currency",value:c.currency,onChange:q,required:!0,className:Ue.input,children:[a.jsx("option",{value:"USD",children:"USD - US Dollar"}),a.jsx("option",{value:"EUR",children:"EUR - Euro"}),a.jsx("option",{value:"GBP",children:"GBP - British Pound"}),a.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"}),a.jsx("option",{value:"AUD",children:"AUD - Australian Dollar"}),a.jsx("option",{value:"JPY",children:"JPY - Japanese Yen"}),a.jsx("option",{value:"CHF",children:"CHF - Swiss Franc"}),a.jsx("option",{value:"CNY",children:"CNY - Chinese Yuan"}),a.jsx("option",{value:"INR",children:"INR - Indian Rupee"}),a.jsx("option",{value:"BRL",children:"BRL - Brazilian Real"})]})]})]}),a.jsxs("div",{className:Ue.formGrid,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"website",className:Ue.label,children:"Website"}),a.jsx("input",{type:"url",id:"website",name:"website",value:c.website,onChange:q,className:Ue.input,placeholder:"https://example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vatNumber",className:Ue.label,children:"VAT/Tax Number"}),a.jsx("input",{type:"text",id:"vatNumber",name:"vatNumber",value:c.vatNumber,onChange:q,className:Ue.input})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"businessHours",className:Ue.label,children:"Business Hours"}),a.jsx("input",{type:"text",id:"businessHours",name:"businessHours",value:c.businessHours,onChange:q,className:Ue.input})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"businessLogo",className:Ue.label,children:"Business Logo"}),a.jsxs("div",{className:Ue.fileUpload,children:[a.jsxs("div",{className:Ue.fileUploadContent,children:[a.jsx("i",{className:"fas fa-cloud-upload-alt"}),a.jsxs("div",{className:Ue.fileUploadText,children:[a.jsx("label",{htmlFor:"businessLogo",className:Ue.fileUploadLabel,children:"Upload a file"}),a.jsx("span",{children:"or drag and drop"})]}),a.jsx("p",{className:Ue.fileUploadHint,children:"PNG, JPG, GIF up to 5MB"})]}),a.jsx("input",{id:"businessLogo",name:"businessLogo",type:"file",accept:"image/*",onChange:P,className:Ue.fileInput})]}),b&&a.jsx("div",{className:Ue.logoPreview,children:a.jsx("img",{src:b,alt:"Logo preview",className:Ue.logoImage})})]}),a.jsxs("div",{className:Ue.buttonGroup,children:[a.jsx("button",{type:"button",onClick:X,className:Ue.backButton,children:"Back"}),a.jsx("button",{type:"submit",className:Ue.submitButton,disabled:_,children:_?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin"}),"Creating Account..."]}):"Create Account"})]})]}),N&&a.jsxs("div",{className:Ue.successMessage,children:[a.jsx("div",{className:Ue.successIcon,children:a.jsx("i",{className:"fas fa-check"})}),a.jsx("h3",{className:Ue.successTitle,children:"Account Created Successfully!"}),a.jsx("p",{className:Ue.successText,children:"We've sent a verification email to your address. Please check your inbox and click the verification link to activate your account."}),c.userId&&a.jsx("div",{className:Ue.adminInfo,children:a.jsxs("div",{className:Ue.adminCard,children:[a.jsx("h4",{className:Ue.adminTitle,children:"Your Admin Number"}),a.jsx("div",{className:Ue.adminNumber,children:c.userId}),a.jsx("p",{className:Ue.adminNote,children:"Save this number! You'll need it to access the POS system as staff."})]})}),a.jsx("button",{onClick:()=>e("/dashboard"),className:Ue.submitButton,children:"Go to Dashboard"})]})]})}),a.jsxs("div",{className:Ue.imageContainer,children:[a.jsx("div",{className:Ue.imageOverlay}),a.jsx("div",{className:Ue.imageContent,children:a.jsxs("div",{className:Ue.imageText,children:[a.jsx("div",{className:Ue.imageIcon,children:a.jsx("i",{className:"fas fa-store"})}),a.jsx("h2",{className:Ue.imageTitle,children:"Welcome to TillPoint"}),a.jsx("p",{className:Ue.imageSubtitle,children:"Join thousands of businesses streamlining their operations with our modern POS system."})]})})]})]})]})},Nk=()=>{const[e]=Ry(),t=Cs(),[r,s]=j.useState("verifying"),[o,c]=j.useState(""),[d,f]=j.useState(!1),h=e.get("token");j.useEffect(()=>{h?p(h):(s("error"),c("Invalid verification link"))},[h]);const p=async v=>{try{s("verifying"),c("Verifying your email address...");const{data:b,error:w}=await Oe.from("email_verification_tokens").select("*").eq("token",v).eq("used",!1).single();if(w||!b){s("error"),c("Invalid or expired verification token");return}const _=new Date,S=new Date(b.expires_at);if(_>S){s("expired"),c("Verification token has expired. Please request a new one.");return}const{error:N}=await Oe.from("users").update({email_verified:!0,active:!0,email_verification_token:null,verification_token_expires:null,updated_at:new Date().toISOString()}).eq("user_id",b.user_id);if(N){console.error("Error updating user:",N),s("error"),c("Failed to verify email. Please try again.");return}await Oe.from("email_verification_tokens").update({used:!0}).eq("id",b.id),s("success"),c("Email verified successfully! You can now log in to your account."),setTimeout(()=>{t("/login")},3e3)}catch(b){console.error("Verification error:",b),s("error"),c("An error occurred during verification. Please try again.")}},x=async()=>{if(h){f(!0);try{const{data:v,error:b}=await Oe.from("email_verification_tokens").select("user_id, users(email, business_id, business_info(name))").eq("token",h).single();if(b||!v){c("Unable to resend verification email");return}const w=Math.random().toString(36).substring(2)+Date.now().toString(36),_=new Date(Date.now()+1440*60*1e3);await Oe.from("users").update({email_verification_token:w,verification_token_expires:_.toISOString()}).eq("user_id",v.user_id),await Oe.from("email_verification_tokens").insert({user_id:v.user_id,token:w,expires_at:_.toISOString()}),await Oe.from("email_verification_tokens").update({used:!0}).eq("token",h),c("A new verification email has been sent to your email address.")}catch(v){console.error("Error resending verification:",v),c("Failed to resend verification email. Please try again.")}finally{f(!1)}}},y=()=>{switch(r){case"verifying":return"⏳";case"success":return"✅";case"error":return"❌";case"expired":return"⏰";default:return"❓"}};return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[a.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"500px",width:"100%",textAlign:"center",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[a.jsx("div",{style:{fontSize:"64px",marginBottom:"20px"},children:y()}),a.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1a1a1a",marginBottom:"16px"},children:"Email Verification"}),a.jsx("p",{style:{fontSize:"16px",color:"#6b7280",marginBottom:"30px",lineHeight:"1.5"},children:o}),r==="verifying"&&a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"20px"},children:[a.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e5e7eb",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),a.jsx("span",{style:{color:"#6b7280"},children:"Verifying..."})]}),r==="success"&&a.jsx("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:a.jsx("p",{style:{color:"#166534",fontSize:"14px",margin:"0"},children:"You will be redirected to the login page in a few seconds..."})}),(r==="error"||r==="expired")&&a.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[a.jsx("p",{style:{color:"#dc2626",fontSize:"14px",margin:"0 0 10px 0"},children:r==="expired"?"Your verification link has expired.":"There was an error verifying your email."}),a.jsx("button",{onClick:x,disabled:d,style:{background:d?"#9ca3af":"#3b82f6",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",cursor:d?"not-allowed":"pointer"},children:d?"Sending...":"Resend Verification Email"})]}),a.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>t("/login"),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Back to Login"}),r==="success"&&a.jsx("button",{onClick:()=>t("/login"),style:{background:"#10b981",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Continue to Login"})]})]}),a.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},An=(e,t={})=>{const r=typeof e=="number"&&isFinite(e)?e:0,{locale:s="en-IE",currency:o="EUR",minimumFractionDigits:c=2,maximumFractionDigits:d=2}=t;try{return new Intl.NumberFormat(s,{style:"currency",currency:o,minimumFractionDigits:c,maximumFractionDigits:d}).format(r)}catch{return`${o} ${r.toFixed(2)}`}},Rk=(e,t={})=>{const r=typeof e=="number"&&isFinite(e)?e:0,{locale:s="en-IE",currency:o="EUR"}=t;try{return new Intl.NumberFormat(s,{style:"currency",currency:o,notation:"compact",maximumFractionDigits:1}).format(r)}catch{const c=Math.abs(r);return c>=1e6?`${An(r/1e6,{...t,maximumFractionDigits:1})}M`:c>=1e3?`${An(r/1e3,{...t,maximumFractionDigits:1})}K`:An(r,t)}},au=()=>{const{user:e}=Sn();return{businessId:e?.business_id,businessLoading:!1,businessError:null,hasBusinessSelected:e?.business_id!=null}},Dk=async e=>{console.log("[fetchSalesData] fetching sales data for business:",e);const[t,r]=await Promise.all([Oe.from("sales").select(`
        *,
        customers (name),
        shop_staff!sales_cashier_id_fkey (username),
        sale_items (
          *,
          products (
            name,
            price,
            is_weighted,
            price_per_unit,
            weight_unit
          )
        )
      `).eq("business_id",e).order("datetime",{ascending:!1}),Oe.from("side_business_sales").select(`
        *,
        side_business_items (
          name,
          price
        )
      `).eq("parent_shop_id",e).order("date_time",{ascending:!1})]);if(t.error)throw t.error;if(r.error)throw r.error;return{sales:t.data?.map(o=>{const c=o.notes&&(o.notes.includes("PARTIAL PAYMENT")||o.notes.includes("Amount Paid Today")||o.notes.includes("Remaining Balance"));let d=0,f=0,h="";if(c&&o.notes){const p=o.notes.match(/Amount Paid Today: €(\d+\.?\d*)/),x=o.notes.match(/Remaining Balance: €(\d+\.?\d*)/);d=p?parseFloat(p[1]):0,f=x?parseFloat(x[1]):0,h=o.notes}return{...o,customer_name:o.customers?.name||"Walk-in Customer",cashier_name:o.shop_staff?.username||"Unknown",is_partial_payment:c,partial_amount:d,remaining_amount:f,partial_notes:h,items:o.sale_items||[]}})||[],sideBusinessSales:r.data||[]}},iu=()=>{const{user:e}=Sn();return k0({queryKey:["salesData",e?.business_id],queryFn:()=>Dk(e?.business_id),enabled:!!e?.business_id,staleTime:120*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1})},Ok=async e=>{console.log("[fetchProductsData] fetching products data for business:",e);const[t,r]=await Promise.all([Oe.from("products").select("*").eq("business_id",e).order("name"),Oe.from("side_business_items").select("*").eq("parent_shop_id",e).order("name")]);if(t.error)throw t.error;if(r.error)throw r.error;const s=[...new Set(t.data?.map(o=>o.category).filter(Boolean))];return{products:t.data||[],sideBusinessItems:r.data||[],categories:s}},uv=()=>{const{user:e}=Sn();return k0({queryKey:["productsData",e?.business_id],queryFn:()=>Ok(e?.business_id),enabled:!!e?.business_id,staleTime:300*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1})},Ik=()=>{const{data:e,isLoading:t,error:r}=uv(),s=j.useMemo(()=>e?.products?e.products.filter(d=>d.stock_quantity<=d.reorder_level).map(d=>({product_id:d.product_id,name:d.name,stock_quantity:d.stock_quantity,reorder_level:d.reorder_level,category:d.category,supplier_info:d.supplier_info,is_low_stock:!0})).sort((d,f)=>d.stock_quantity-f.stock_quantity):[],[e]),o=async(d,f)=>(console.log("Restock product:",d,"quantity:",f),!0),c=async d=>(console.log("Quick restock product:",d),!0);return{lowStockProducts:s,lowStockItems:s,loading:t,error:r?.message||null,restockProduct:o,quickRestock:c}},Bk=({product:e,onRestock:t,onQuickRestock:r})=>{const[s,o]=j.useState(!1),[c,d]=j.useState(""),[f,h]=j.useState(!1),p=async()=>{h(!0);const b=await r(e.product_id);h(!1),b&&o(!1)},x=async()=>{const b=parseInt(c);if(isNaN(b)||b<=0)return;h(!0);const w=await t(e.product_id,b);h(!1),w&&(o(!1),d(""))},y=()=>e.stock_quantity<=2?"#ef4444":e.stock_quantity<=5?"#f59e0b":"#eab308",v=()=>e.stock_quantity<=2?"Critical":e.stock_quantity<=5?"Low":"Below Reorder";return a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 4px 16px rgba(62, 63, 41, 0.15)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.1)"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",background:y(),color:"white",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:v()}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[a.jsxs("div",{style:{width:"60px",height:"60px",borderRadius:"8px",background:"#f9fafb",border:"1px solid rgba(125, 141, 134, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:[e.image_url?a.jsx("img",{src:e.image_url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:b=>{b.currentTarget.style.setProperty("display","none")(b.currentTarget.nextElementSibling).style.setProperty("display","flex")}}):null,a.jsx("div",{style:{display:e.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:"#7d8d86",fontSize:"20px"},children:a.jsx("i",{className:"fa-solid fa-box"})})]}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0",lineHeight:"1.3"},children:e.name}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"0 0 8px 0"},children:e.category}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[a.jsxs("span",{style:{fontSize:"12px",color:"#3e3f29",fontWeight:"500"},children:["Stock: ",e.stock_quantity]}),a.jsx("span",{style:{fontSize:"12px",color:"#7d8d86"},children:"•"}),a.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86"},children:["Reorder at: ",e.reorder_level]})]}),s?a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"number",value:c,onChange:b=>d(b.target.value),placeholder:"Qty",min:"1",style:{width:"60px",padding:"6px 8px",border:"1px solid #7d8d86",borderRadius:"6px",fontSize:"12px",outline:"none"}}),a.jsx("button",{onClick:x,disabled:f||!c,style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f||!c?"not-allowed":"pointer",opacity:f||!c?.7:1,transition:"all 0.2s ease"},onMouseEnter:b=>{!f&&c&&(b.currentTarget.style.background="#bca88d")},onMouseLeave:b=>{!f&&c&&(b.currentTarget.style.background="#7d8d86")},children:f?a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):"Restock"}),a.jsx("button",{onClick:()=>{o(!1),d("")},disabled:f,style:{background:"transparent",color:"#7d8d86",border:"none",fontSize:"12px",cursor:f?"not-allowed":"pointer",opacity:f?.7:1},children:"Cancel"})]}):a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[a.jsxs("button",{onClick:p,disabled:f,style:{background:"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f?"not-allowed":"pointer",opacity:f?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:b=>{f||(b.currentTarget.style.background="#059669")},onMouseLeave:b=>{f||(b.currentTarget.style.background="#10b981")},children:[f?a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):a.jsx("i",{className:"fa-solid fa-bolt"}),"Quick Restock"]}),a.jsx("button",{onClick:()=>o(!0),disabled:f,style:{background:"transparent",color:"#7d8d86",border:"1px solid #7d8d86",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f?"not-allowed":"pointer",opacity:f?.7:1,transition:"all 0.2s ease"},onMouseEnter:b=>{f||(b.currentTarget.style.background="#7d8d86",b.currentTarget.style.color="white")},onMouseLeave:b=>{f||(b.currentTarget.style.background="transparent",b.currentTarget.style.color="#7d8d86")},children:"Custom"})]})]})]})]})},Mk=()=>{const{lowStockItems:e,loading:t,error:r,restockProduct:s,quickRestock:o}=Ik(),[c,d]=j.useState(0),f=e[c]||null,h=c<e.length-1,p=c>0,x=()=>{h&&d(c+1)},y=()=>{p&&d(c-1)};return t?a.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading low stock items..."]})}):r?a.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px"},children:r})]})}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:e.length>0?"#fbbf24":"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"18px",color:e.length>0?"#d97706":"#059669"}})}),a.jsxs("div",{children:[a.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Low Stock Items"}),a.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[e.length," item",e.length!==1?"s":""," need",e.length===1?"s":""," restocking"]})]})]}),e.length>1&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("button",{onClick:y,disabled:!p,style:{background:p?"#7d8d86":"#e5e7eb",color:p?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:p?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:v=>{p&&(v.currentTarget.style.background="#bca88d")},onMouseLeave:v=>{p&&(v.currentTarget.style.background="#7d8d86")},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86",fontWeight:"500",minWidth:"40px",textAlign:"center"},children:[c+1," / ",e.length]}),a.jsx("button",{onClick:x,disabled:!h,style:{background:h?"#7d8d86":"#e5e7eb",color:h?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:h?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:v=>{h&&(v.currentTarget.style.background="#bca88d")},onMouseLeave:v=>{h&&(v.currentTarget.style.background="#7d8d86")},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]}),e.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-check-circle",style:{fontSize:"48px",marginBottom:"16px",color:"#10b981"}}),a.jsx("p",{style:{fontSize:"16px",margin:0,fontWeight:"500"},children:"All items are well stocked!"}),a.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0",opacity:.8},children:"No items need restocking at the moment."})]}):f?a.jsx(Bk,{product:f,onRestock:s,onQuickRestock:o},f.product_id):null]})},Fk=(e,t)=>{const r=t||new Date;switch(e){case"today":{const s=r.toISOString().split("T")[0];return{start:`${s}T00:00:00`,end:`${s}T23:59:59`}}case"week":{const s=new Date(r);s.setDate(r.getDate()-r.getDay()),s.setHours(0,0,0,0);const o=new Date(s);return o.setDate(s.getDate()+6),o.setHours(23,59,59,999),{start:s.toISOString(),end:o.toISOString()}}case"month":{const s=new Date(r.getFullYear(),r.getMonth(),1),o=new Date(r.getFullYear(),r.getMonth()+1,0,23,59,59,999);return{start:s.toISOString(),end:o.toISOString()}}default:return{start:"",end:""}}},Dh=(e,t,r)=>{const{start:s,end:o}=Fk(t,r),c=e.filter(f=>{const h=new Date(f.datetime).toISOString();return h>=s&&h<=o}),d=new Map;return c.forEach(f=>{f.sale_items?.forEach(h=>{const p=h.product_id,x=d.get(p)||{quantity:0,total:0,name:h.products?.name||"Unknown",image_url:h.products?.image_url};d.set(p,{quantity:x.quantity+(h.quantity||0),total:x.total+(parseFloat(h.calculated_price)||0),name:x.name,image_url:x.image_url})})}),Array.from(d.entries()).map(([f,h])=>({product_id:f,product_name:h.name,quantity_sold:h.quantity,total_sales:h.total,image_url:h.image_url})).sort((f,h)=>h.total_sales-f.total_sales)},Lk=e=>{const{data:t,isLoading:r,error:s}=iu(),o=j.useMemo(()=>t?.sales?Dh(t.sales,"today",e):[],[t,e]),c=j.useMemo(()=>t?.sales?Dh(t.sales,"week",e):[],[t,e]),d=j.useMemo(()=>t?.sales?Dh(t.sales,"month",e):[],[t,e]);return{todayProducts:o,weekProducts:c,monthProducts:d,loading:r,error:s?.message||null}},Pk=({activePeriod:e,selectedDate:t})=>{const{todayProducts:r,weekProducts:s,monthProducts:o,loading:c,error:d}=Lk(t),[f,h]=j.useState(e??"today");j.useEffect(()=>{e&&h(e)},[e]);const p=b=>{switch(b){case"today":return r;case"week":return s;case"month":return o}},x=b=>{switch(b){case"today":if(t){const w=new Date;return t.toDateString()===w.toDateString()?"Today":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}return"Today";case"week":return"This Week";case"month":return"This Month"}},y=["today","week","month"],v=p(f);return c?a.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db"},children:[a.jsx("style",{children:"@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}} .skeleton{background-image:linear-gradient(90deg,#e5e7eb 0px,#f3f4f6 40px,#e5e7eb 80px);background-size:600px 100%;animation:shimmer 1.2s infinite linear;border-radius:8px}"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[a.jsx("div",{className:"skeleton",style:{width:"40px",height:"40px"}}),a.jsx("div",{className:"skeleton",style:{width:"160px",height:"18px"}})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[a.jsx("div",{className:"skeleton",style:{width:"80px",height:"28px"}}),a.jsx("div",{className:"skeleton",style:{width:"100px",height:"28px"}}),a.jsx("div",{className:"skeleton",style:{width:"100px",height:"28px"}})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Array.from({length:5}).map((b,w)=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",border:"1px solid rgba(125,141,134,0.1)",borderRadius:"8px"},children:[a.jsx("div",{className:"skeleton",style:{width:"32px",height:"32px"}}),a.jsx("div",{className:"skeleton",style:{width:"40px",height:"40px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{className:"skeleton",style:{width:"160px",height:"12px",marginBottom:"6px"}}),a.jsx("div",{className:"skeleton",style:{width:"100px",height:"10px"}})]}),a.jsx("div",{className:"skeleton",style:{width:"70px",height:"14px"}})]},w))})]}):d?a.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px"},children:d})]})}):a.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#bca88d",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"18px",color:"#3e3f29"}})}),a.jsx("h3",{style:{fontSize:"20px",fontWeight:600,color:"#3e3f29",margin:0},children:"Top Products"})]}),a.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:y.map(b=>a.jsxs("button",{onClick:()=>h(b),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:f===b?"#7d8d86":"#ffffff",color:f===b?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:[a.jsx("i",{className:`fa-solid ${b==="today"?"fa-calendar-day":b==="week"?"fa-calendar-week":"fa-calendar"}`,style:{fontSize:"12px",marginRight:6}}),x(b)]},b))}),v.length===0?a.jsxs("div",{style:{textAlign:"center",color:"#7d8d86",padding:"16px"},children:["No products for ",x(f)]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:v.slice(0,3).map((b,w)=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"white",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.1)"},children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:w===0?"#fbbf24":w===1?"#e5e7eb":w===2?"#f59e0b":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:w===1?"#6b7280":"#3e3f29",fontSize:"12px",fontWeight:700},children:w===0?a.jsx("i",{className:"fa-solid fa-crown",style:{fontSize:14}}):w+1}),a.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"#f9fafb",border:"1px solid #e5e7eb",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:b.image_url?a.jsx("img",{src:b.image_url,alt:b.product_name,style:{width:"100%",height:"100%",objectFit:"cover"}}):a.jsx("i",{className:"fa-solid fa-box",style:{color:"#7d8d86"}})}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("p",{style:{fontSize:14,fontWeight:600,color:"#3e3f29",margin:"0 0 2px 0"},children:b.product_name}),a.jsxs("p",{style:{fontSize:12,color:"#7d8d86",margin:0},children:[b.quantity_sold," sold"]})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("p",{style:{fontSize:14,fontWeight:600,color:"#10b981",margin:0},children:An(b.total_sales)}),w===0&&a.jsx("p",{style:{fontSize:10,color:"#d97706",margin:"2px 0 0 0",fontWeight:500},children:"TOP SELLER"})]})]},b.product_id))})]})},fv=e=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate());switch(e){case"today":return{start:r,end:new Date(r.getTime()+1440*60*1e3)};case"week":const s=new Date(r);return s.setDate(r.getDate()-r.getDay()),{start:s,end:new Date(s.getTime()+10080*60*1e3)};case"month":const o=new Date(r.getFullYear(),r.getMonth(),1),c=new Date(r.getFullYear(),r.getMonth()+1,1);return{start:o,end:c};default:return{start:r,end:r}}},zk=(e,t)=>{const{start:r,end:s}=fv("week"),o={};for(let c=0;c<7;c++){const f=new Date(r.getTime()+c*24*60*60*1e3).toISOString().split("T")[0];o[f]={totalSales:0,transactionCount:0}}return e.forEach(c=>{const d=new Date(c.datetime).toISOString().split("T")[0];o[d]&&(o[d].totalSales+=parseFloat(c.total_amount)||0,o[d].transactionCount+=1)}),t.forEach(c=>{const d=new Date(c.date_time).toISOString().split("T")[0];o[d]&&(o[d].totalSales+=parseFloat(c.total_amount)||0,o[d].transactionCount+=1)}),Object.entries(o).map(([c,d])=>({day:new Date(c).toLocaleDateString("en-US",{weekday:"short"}),date:c,totalSales:d.totalSales,transactionCount:d.transactionCount,averageTransaction:d.transactionCount>0?d.totalSales/d.transactionCount:0}))},Uk=(e,t)=>{const r={};for(let s=0;s<24;s++)r[s]={totalSales:0,transactionCount:0};return e.forEach(s=>{const o=new Date(s.datetime).getHours();r[o].totalSales+=parseFloat(s.total_amount)||0,r[o].transactionCount+=1}),t.forEach(s=>{const o=new Date(s.date_time).getHours();r[o].totalSales+=parseFloat(s.total_amount)||0,r[o].transactionCount+=1}),Object.entries(r).map(([s,o])=>({hour:parseInt(s),hourLabel:`${s}:00`,totalSales:o.totalSales,transactionCount:o.transactionCount}))},Wk=(e,t)=>{const{start:r,end:s}=fv("month"),o={},c=new Date(r);for(;c<s;){const d=c.toISOString().split("T")[0];o[d]={totalSales:0,transactionCount:0},c.setDate(c.getDate()+1)}return e.forEach(d=>{const f=new Date(d.datetime).toISOString().split("T")[0];o[f]&&(o[f].totalSales+=parseFloat(d.total_amount)||0,o[f].transactionCount+=1)}),t.forEach(d=>{const f=new Date(d.date_time).toISOString().split("T")[0];o[f]&&(o[f].totalSales+=parseFloat(d.total_amount)||0,o[f].transactionCount+=1)}),Object.entries(o).map(([d,f])=>({day:new Date(d).toLocaleDateString("en-US",{day:"numeric"}),date:d,totalSales:f.totalSales,transactionCount:f.transactionCount,averageTransaction:f.transactionCount>0?f.totalSales/f.transactionCount:0}))},qk=()=>{const{data:e,isLoading:t,error:r}=iu(),s=j.useMemo(()=>e?zk(e.sales,e.sideBusinessSales):[],[e]),o=j.useMemo(()=>e?Uk(e.sales,e.sideBusinessSales):[],[e]),c=j.useMemo(()=>e?Wk(e.sales,e.sideBusinessSales):[],[e]);return{weeklyData:s,hourlyData:o,monthlyData:c,loading:t,error:r?.message||null,refreshHourlyData:()=>{},refreshWeeklyData:()=>{},refreshMonthlyData:()=>{}}},$k=async e=>{console.log("[fetchBusinessData] fetching business_info for business:",e);const{data:t,error:r}=await Oe.from("business_info").select("*").eq("business_id",e).single();if(r)throw console.error("Error fetching business data:",r),r;return t},Hk=()=>{const{user:e}=Sn();return k0({queryKey:["businessData",e?.business_id],queryFn:()=>$k(e?.business_id),enabled:!!e?.business_id,staleTime:300*1e3})},Gk=()=>{const{data:e,isLoading:t,error:r}=Hk();return{businessInfo:e,loading:t,error:r?.message||null,refetch:()=>{}}},Vk=({selectedDate:e,activePeriod:t})=>{const{weeklyData:r,hourlyData:s,monthlyData:o,loading:c,error:d,refreshHourlyData:f,refreshWeeklyData:h,refreshMonthlyData:p}=qk(),{businessInfo:x}=Gk(),[y,v]=j.useState("weekly"),[b,w]=j.useState(new Date().toISOString().split("T")[0]),[_,S]=j.useState(0),[N,R]=j.useState(0),[I,G]=j.useState({visible:!1,x:0,y:0,data:null}),Z=async le=>{w(le),await f(le)};j.useEffect(()=>{if(!e)return;const Ae=(Ce=>`${Ce.getFullYear()}-${String(Ce.getMonth()+1).padStart(2,"0")}-${String(Ce.getDate()).padStart(2,"0")}`)(e);w(Ae);const B=Ce=>{const ne=new Date(Ce);return ne.setHours(0,0,0,0),ne.setDate(ne.getDate()-ne.getDay()),ne},K=B(e),E=new Date;E.setHours(0,0,0,0);const L=B(E),z=K.getTime()-L.getTime(),Y=Math.round(z/(1e3*60*60*24)),me=Math.round(Y/7);S(me);const Me=new Date,He=(e.getFullYear()-Me.getFullYear())*12+(e.getMonth()-Me.getMonth());R(He)},[e]),j.useEffect(()=>{t&&v(t==="today"?"hourly":t==="week"?"weekly":"monthly")},[t]);const ie=async()=>{const le=_-1;S(le),await h(le)},q=async()=>{const le=_+1;S(le),await h(le)},P=async()=>{S(0),await h(0)},te=()=>{const le=new Date,Ae=le.getDay(),B=new Date(le);B.setDate(le.getDate()-Ae+_*7);const K=new Date(B);K.setDate(B.getDate()+6);const E=L=>L.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${E(B)} - ${E(K)}`},ue=(le,Ae)=>{G({visible:!0,x:le.clientX,y:le.clientY,data:Ae})},X=()=>{G({visible:!1,x:0,y:0,data:null})},fe=le=>{const Ae=Math.max(...le.map(B=>B.totalSales));return Ae===0?1:Math.ceil(Ae*1.1)},J=(le,Ae)=>le===0?0:Math.max(le/Ae*180,4),Q=(le,Ae=!0)=>{if(Ae){const B=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316"];return B[le%B.length]}else{const B=Math.min(le/9,1),K=Math.floor(59+180*B),E=Math.floor(130+-62*B),L=Math.floor(246+-178*B);return`rgb(${K}, ${E}, ${L})`}};if(c)return a.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading sales data..."]})});if(d)return a.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:a.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px"},children:d})]})});const oe=y==="weekly"?r:y==="monthly"?o:s,re=oe.length>0?fe(oe):100,ye=y==="monthly"?Math.ceil(oe.length/12):1;return oe.length===0&&!c&&!d?a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"5px solid #000000 !important",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",margin:"0",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",textAlign:"center",minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(x?.logo_url,a.jsx("img",{src:x?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:x?.name||"LandM Store Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:le=>{const Ae=le.target;Ae.style.display="none";const B=Ae.parentElement;B&&(B.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),a.jsxs("div",{children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(x?.name||"LandM Store")&&a.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:x?.name||"LandM Store"})]})]}),a.jsxs("div",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"16px"},children:[a.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"500"},children:"No sales data available"}),a.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.8},children:y==="weekly"?"No sales recorded for this week":"No sales recorded for this date"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-100%) scale(0.9); }
          to { opacity: 1; transform: translateY(-100%) scale(1); }
        }
      `}),a.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",maxWidth:"1000px",margin:"0 auto",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(x?.logo_url,a.jsx("img",{src:x?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:x?.name||"LandM Store Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:le=>{const Ae=le.target;Ae.style.display="none";const B=Ae.parentElement;B&&(B.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),a.jsxs("div",{children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(x?.name||"LandM Store")&&a.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:x?.name||"LandM Store"})]})]}),a.jsxs("div",{style:{display:"flex",background:"#f9fafb",borderRadius:"8px",padding:"4px",gap:"4px",marginBottom:"24px",maxWidth:"300px",border:"2px solid #d1d5db"},children:[a.jsxs("button",{onClick:()=>v("weekly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="weekly"?"#7d8d86":"transparent",color:y==="weekly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:le=>{y!=="weekly"&&(le.currentTarget.style.background="#e5e7eb",le.currentTarget.style.color="#3e3f29")},onMouseLeave:le=>{y!=="weekly"&&(le.currentTarget.style.background="transparent",le.currentTarget.style.color="#7d8d86")},children:[a.jsx("i",{className:"fa-solid fa-calendar-week",style:{fontSize:"12px"}}),"Weekly"]}),a.jsxs("button",{onClick:()=>v("hourly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="hourly"?"#7d8d86":"transparent",color:y==="hourly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:le=>{y!=="hourly"&&(le.currentTarget.style.background="#e5e7eb",le.currentTarget.style.color="#3e3f29")},onMouseLeave:le=>{y!=="hourly"&&(le.currentTarget.style.background="transparent",le.currentTarget.style.color="#7d8d86")},children:[a.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"12px"}}),"Hourly"]}),a.jsxs("button",{onClick:()=>v("monthly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="monthly"?"#7d8d86":"transparent",color:y==="monthly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:le=>{y!=="monthly"&&(le.currentTarget.style.background="#e5e7eb",le.currentTarget.style.color="#3e3f29")},onMouseLeave:le=>{y!=="monthly"&&(le.currentTarget.style.background="transparent",le.currentTarget.style.color="#7d8d86")},children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"12px"}}),"Monthly"]})]}),y==="weekly"&&a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[a.jsxs("button",{onClick:ie,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:le=>{le.currentTarget.style.background="#f3f4f6",le.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:le=>{le.currentTarget.style.background="#ffffff",le.currentTarget.style.borderColor="#d1d5db"},children:[a.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Week"]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",marginBottom:"2px"},children:te()}),a.jsx("button",{onClick:P,style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline",transition:"color 0.2s ease"},onMouseEnter:le=>{le.currentTarget.style.color="#3e3f29"},onMouseLeave:le=>{le.currentTarget.style.color="#7d8d86"},children:_===0?"Current Week":"Go to Current Week"})]}),a.jsxs("button",{onClick:q,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:le=>{le.currentTarget.style.background="#f3f4f6",le.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:le=>{le.currentTarget.style.background="#ffffff",le.currentTarget.style.borderColor="#d1d5db"},children:["Next Week",a.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),y==="monthly"&&a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[a.jsxs("button",{onClick:async()=>{const le=N-1;R(le),await p(le)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:[a.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Month"]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#3e3f29",marginBottom:"2px"},children:new Date(new Date().getFullYear(),new Date().getMonth()+N,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),a.jsx("button",{onClick:async()=>{R(0),await p(0)},style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline"},children:N===0?"Current Month":"Go to Current Month"})]}),a.jsxs("button",{onClick:async()=>{const le=N+1;R(le),await p(le)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:["Next Month",a.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),y==="hourly"&&a.jsxs("div",{style:{marginBottom:"24px",padding:"12px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"8px"},children:"Select Date:"}),a.jsx("input",{type:"date",value:b,onChange:le=>Z(le.target.value),style:{padding:"8px 12px",border:"2px solid #d1d5db",borderRadius:"6px",fontSize:"14px",color:"#3e3f29",background:"white",outline:"none"}})]}),a.jsxs("div",{style:{width:"100%",height:"400px",background:"white",borderRadius:"12px",padding:"40px",border:"2px solid #d1d5db",position:"relative",overflow:"visible",margin:"0",boxSizing:"border-box",fontFamily:"inherit",display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"absolute",left:"15px",top:"40px",bottom:"30px",fontSize:"11px",color:"#9ca3af",fontWeight:"500",zIndex:1,padding:"10px 0",height:"260px"},children:[100,75,50,25,0].map((le,Ae)=>a.jsx("span",{style:{position:"absolute",textAlign:"right",minWidth:"20px",top:`${Ae*25}%`,transform:"translateY(-50%)"},children:Rk(re*le/100)},le))}),a.jsx("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",flex:1,gap:y==="weekly"?"20px":y==="monthly"?"6px":"12px",marginBottom:"30px",padding:"0 40px 0 70px",position:"relative",zIndex:2,overflow:"visible",width:"100%",boxSizing:"border-box",minHeight:"260px"},children:oe.map((le,Ae)=>{const B=J(le.totalSales,re),K=Q(Ae,y!=="hourly");return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",flex:1,maxWidth:y==="weekly"?"100px":y==="monthly"?"24px":"80px",overflow:"visible",boxSizing:"border-box",height:"100%"},children:[a.jsx("div",{style:{width:"100%",maxWidth:y==="weekly"?"80px":y==="monthly"?"16px":"60px",height:`${B}px`,background:K,borderRadius:"8px 8px 0 0",marginBottom:"12px",position:"relative",transition:"all 0.3s ease",cursor:"pointer",boxSizing:"border-box",display:"block"},onMouseEnter:E=>{E.currentTarget.style.transform="scaleY(1.05)",E.currentTarget.style.opacity="0.8",ue(E,le)},onMouseLeave:E=>{E.currentTarget.style.transform="scaleY(1)",E.currentTarget.style.opacity="1",X()}}),a.jsx("span",{style:{fontSize:y==="weekly"?"13px":"11px",fontWeight:"500",color:"#7d8d86",textAlign:"center",display:"block",margin:"0",padding:"0"},children:y==="weekly"?le.day:y==="monthly"?Ae%ye===0?le.day:"":le.hourLabel})]},Ae)})})]}),I.visible&&I.data&&a.jsxs("div",{style:{position:"fixed",left:I.x+10,top:I.y-10,background:"rgba(31, 41, 55, 0.95)",color:"#ffffff",padding:"12px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",pointerEvents:"none",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",zIndex:9999,backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",transform:"translateY(-100%)",animation:"fadeIn 0.2s ease-out"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:y==="weekly"?Q(0,!0):Q(0,!1)}}),a.jsx("span",{style:{fontWeight:"600",fontSize:"13px"},children:y==="weekly"?I.data.day:I.data.hourLabel})]}),a.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginBottom:"2px"},children:[I.data.transactionCount," transaction",I.data.transactionCount!==1?"s":""]}),a.jsx("div",{style:{fontWeight:"600",fontSize:"14px",color:"#60a5fa"},children:An(I.data.totalSales)})]})]}),a.jsx("div",{style:{width:"100%",maxWidth:"1000px",margin:"12px auto 0 auto"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",flexWrap:"wrap",background:"#3e3f29",borderRadius:"8px",padding:"8px 12px",border:"2px solid #d1d5db"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:"#7d8d86"}}),a.jsx("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:500},children:y==="weekly"?"Daily Sales":y==="monthly"?"Daily Sales (Month)":"Hourly Sales"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"12px",color:"#f1f0e4"}}),a.jsxs("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:500},children:["Max: ",An(re)]})]})]})})]})},Yk=()=>{const e=Cs(),{businessId:t,businessLoading:r}=au(),{data:s}=iu(),{data:o}=uv(),[c,d]=j.useState({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),[f,h]=j.useState(!0),[p,x]=j.useState(null),[y,v]=j.useState([]),[b,w]=j.useState(!1),[_,S]=j.useState(!1),[N,R]=j.useState(new Date),[I,G]=j.useState(new Date),[Z,ie]=j.useState([]),[q,P]=j.useState("today"),[te,ue]=j.useState([]),[X,fe]=j.useState(0),[J,Q]=j.useState(0);j.useEffect(()=>{if(s&&o&&!r&&t!=null){const ne=new Date;ne.setHours(0,0,0,0);const Pe=new Date(ne);Pe.setDate(Pe.getDate()+1);const $e=s.sales.filter(Re=>{const ht=new Date(Re.datetime);return ht>=ne&&ht<Pe}),rt=s.sideBusinessSales.filter(Re=>{const ht=new Date(Re.date_time);return ht>=ne&&ht<Pe}),V=$e.reduce((Re,ht)=>Re+(parseFloat(ht.total_amount.toString())||0),0),Ne=rt.reduce((Re,ht)=>Re+(parseFloat(ht.total_amount.toString())||0),0),st=o.products.filter(Re=>Re.stock_quantity<=Re.reorder_level).length;d({totalProducts:o.products.length,totalSales:s.sales.length,totalCustomers:0,todayRevenue:V,todaySideBusinessRevenue:Ne,todayTransactions:$e.length,lowStockItems:st}),h(!1)}else t==null&&!r&&(d({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),h(!1))},[t,r,s?.sales?.length,o?.products?.length]),j.useEffect(()=>{},[q,N,t,r]);const oe=async ne=>{try{w(!0);const Pe=new Date(ne);x(Pe),v([]);const rt=(Re=>`${Re.getFullYear()}-${String(Re.getMonth()+1).padStart(2,"0")}-${String(Re.getDate()).padStart(2,"0")}`)(Pe),{data:V,error:Ne}=await Oe.from("sales").select(`
          sale_id,
          datetime,
          total_amount,
          payment_method,
          sale_items (quantity)
        `).gte("datetime",`${rt}T00:00:00`).lt("datetime",`${rt}T23:59:59`).order("datetime",{ascending:!1});if(Ne){console.error("Error fetching transactions:",Ne);return}const st=(V||[]).map(Re=>({transaction_id:`TXN-${Re.sale_id.toString().padStart(6,"0")}`,datetime:Re.datetime,total_amount:Re.total_amount,payment_method:Re.payment_method,items_count:Re.sale_items?.reduce((ht,xt)=>ht+xt.quantity,0)||0}));v(st)}catch(Pe){console.error("Error fetching transactions:",Pe)}finally{w(!1)}},re=()=>{x(null),v([])},ye=ne=>{re(),e(`/transaction/${ne}`)},le=ne=>{R(ne),S(!1)},Ae=(ne,Pe)=>{const $e=new Date(ne,Pe,1),rt=new Date($e);rt.setDate(rt.getDate()-$e.getDay());const V=[],Ne=new Date(rt);for(let st=0;st<42;st++)V.push(new Date(Ne)),Ne.setDate(Ne.getDate()+1);return V},B=()=>{switch(q){case"today":const ne=new Date;return N.toDateString()===ne.toDateString()?"Today's Sales":`${N.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Sales`;case"week":return"This Week Sales";case"month":return"This Month Sales";default:return"Today's Sales"}},K=()=>{switch(q){case"today":const ne=new Date;return N.toDateString()===ne.toDateString()?"Today's Transactions":`${N.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Transactions`;case"week":return"This Week Transactions";case"month":return"This Month Transactions";default:return"Today's Transactions"}},E=()=>{if(X===0)return c.todayTransactions>0?"+100%":"0%";const ne=(c.todayTransactions-X)/X*100;return`${ne>=0?"+":""}${ne.toFixed(0)}%`},L=()=>c.todayTransactions-J,z=()=>{const ne=L(),Pe=E();return{text:`Products: ${ne} | Side Business: ${J} (${Pe} from yesterday)`,icon:"fa-solid fa-chart-pie"}},Y=ne=>{const Pe=new Date,$e=ne.toDateString()===Pe.toDateString(),rt=ne.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return $e?"Today's Transactions":`${rt} Transactions`},me=ne=>{const Pe=new Date,$e=ne.toDateString()===Pe.toDateString(),rt=ne.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return $e?"No transactions found for today":`No transactions found for ${rt}`},Me=(ne,Pe,$e=100)=>{const rt=ne+Pe;if(rt===0)return null;const Ne=ne/rt*100/100*360,st=(xt,Dt,bt)=>{const Ie=Re($e/2,$e/2,bt,Dt),nt=Re($e/2,$e/2,bt,xt),vt=Dt-xt<=180?"0":"1";return`M ${$e/2} ${$e/2} L ${Ie.x} ${Ie.y} A ${bt} ${bt} 0 ${vt} 0 ${nt.x} ${nt.y} Z`},Re=(xt,Dt,bt,Ie)=>{const nt=(Ie-90)*Math.PI/180;return{x:xt+bt*Math.cos(nt),y:Dt+bt*Math.sin(nt)}},ht=$e*.4;return a.jsxs("svg",{width:$e,height:$e,style:{marginRight:"12px"},children:[ne>0&&a.jsx("path",{d:st(0,Ne,ht),fill:"#dc2626",stroke:"#ffffff",strokeWidth:"2"}),Pe>0&&a.jsx("path",{d:st(Ne,360,ht),fill:"#f59e0b",stroke:"#ffffff",strokeWidth:"2"})]})},Ce=[{title:B(),value:An(c.todayRevenue+c.todaySideBusinessRevenue),change:`Products: ${An(c.todayRevenue)} | Side Business: ${An(c.todaySideBusinessRevenue)}`,changeColor:"#1a1a1a",icon:"fa-solid fa-euro-sign",bgColor:"#1a1a1a",iconColor:"#f1f0e4"},{title:K(),value:c.todayTransactions,change:z().text,changeIcon:z().icon,changeColor:"#bca88d",icon:"fa-solid fa-shopping-cart",bgColor:"#bca88d",iconColor:"#1a1a1a",pieChart:{productCount:L(),sideBusinessCount:J}}];return f?a.jsxs("div",{style:{padding:"0"},children:[a.jsx("style",{children:`
          @keyframes shimmer { 0% { background-position: -400px 0; } 100% { background-position: 400px 0; } }
          .skeleton { background-image: linear-gradient(90deg, #e5e7eb 0px, #f3f4f6 40px, #e5e7eb 80px); background-size: 600px 100%; animation: shimmer 1.2s infinite linear; }
        `}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"24px",marginBottom:"32px"},children:[a.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),a.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),a.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),a.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px"},children:[a.jsx("div",{className:"skeleton",style:{height:"300px",borderRadius:"16px"}}),a.jsx("div",{className:"skeleton",style:{height:"300px",borderRadius:"16px"}})]}),a.jsx("div",{className:"skeleton",style:{height:"420px",borderRadius:"16px"}})]}):a.jsxs("div",{style:{padding:"0"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"16px",marginBottom:"32px"},children:[a.jsxs("div",{onClick:()=>S(!0),style:{background:"#1a1a1a",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",transition:"all 0.2s ease",minWidth:"200px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),a.jsx("span",{style:{color:"#bca88d"},children:N.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),a.jsx("i",{className:"fa-solid fa-chevron-down",style:{fontSize:"12px",color:"#bca88d",transition:"transform 0.2s ease"}})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"4px"},children:[a.jsx("button",{onClick:()=>P("today"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:q==="today"?"#7d8d86":"transparent",color:q==="today"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Today"}),a.jsx("button",{onClick:()=>P("week"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:q==="week"?"#7d8d86":"transparent",color:q==="week"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"This Week"}),a.jsx("button",{onClick:()=>P("month"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:q==="month"?"#7d8d86":"transparent",color:q==="month"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"This Month"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"24px",marginBottom:"32px",minHeight:"140px"},children:[Ce.map((ne,Pe)=>a.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",transition:"all 0.3s ease",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{color:"#1a1a1a",fontSize:"16px",fontWeight:"500",margin:"0 0 12px 0"},children:ne.title}),a.jsx("p",{style:{fontSize:"36px",fontWeight:"bold",color:"#1a1a1a",margin:"0 0 8px 0",lineHeight:"1.1"},children:ne.value}),a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",fontSize:"14px",fontWeight:"500",color:ne.changeColor,margin:0},children:ne.pieChart?a.jsxs(a.Fragment,{children:[Me(ne.pieChart.productCount,ne.pieChart.sideBusinessCount),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#dc2626"}}),a.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"#1a1a1a"},children:["Products: ",ne.pieChart.productCount]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f59e0b"}}),a.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"#1a1a1a"},children:["Side Business: ",ne.pieChart.sideBusinessCount]})]})]})]}):a.jsxs(a.Fragment,{children:[ne.changeIcon&&a.jsx("i",{className:ne.changeIcon,style:{fontSize:"12px"}}),a.jsx("span",{children:ne.change})]})}),Pe===0&&te.length>0&&a.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:"12px",maxWidth:"100%"},children:te.map($e=>a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",padding:"8px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",overflow:"hidden",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:$e.image_url?a.jsx("img",{src:$e.image_url,alt:$e.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:rt=>{const V=rt.target;V.style.display="none";const Ne=V.parentElement;Ne&&(Ne.innerHTML='<i class="fa-solid fa-store" style="font-size: 18px; color: #7d8d86;"></i>')}}):a.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"18px",color:"#7d8d86"}})}),a.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[a.jsx("p",{style:{fontSize:"11px",color:"#7d8d86",fontWeight:"500",margin:"0 0 2px 0",lineHeight:"1.2"},children:$e.name}),a.jsx("p",{style:{fontSize:"12px",color:"#1a1a1a",fontWeight:"600",margin:0},children:An($e.total_amount)})]})]},$e.business_id))})})]}),a.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"14px",background:ne.bgColor,display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"flex-end",marginTop:"16px"},children:a.jsx("i",{className:ne.icon,style:{fontSize:"24px",color:ne.iconColor}})})]})},Pe)),a.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:a.jsx(Mk,{})}),a.jsx(Pk,{activePeriod:q,selectedDate:N})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"24px",marginBottom:"32px"},children:[a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:a.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"5px solid #000000 !important"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"18px",color:"#f1f0e4"}})}),a.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:(()=>{switch(q){case"today":const ne=new Date;return N.toDateString()===ne.toDateString()?"Recent Transactions":`${N.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Transactions`;case"week":return"This Week Transactions";case"month":return"This Month Transactions";default:return"Recent Transactions"}})()})]}),a.jsx("button",{onClick:()=>oe(N),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"View All"})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Z.length>0?Z.map(ne=>a.jsxs("div",{onClick:()=>e(`/transaction/TXN-${ne.sale_id.toString().padStart(6,"0")}`),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:ne.partial_payment?"#fef2f2":"white",borderRadius:"8px",border:ne.partial_payment?"1px solid #fecaca":"1px solid transparent",cursor:"pointer",transition:"all 0.2s ease"},children:[a.jsxs("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:ne.partial_payment?"#f59e0b":ne.status==="completed"?"#10b981":"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[a.jsx("i",{className:`fa-solid ${ne.partial_payment?"fa-exclamation":ne.status==="completed"?"fa-check":"fa-hourglass-half"}`,style:{fontSize:"12px",color:"white"}}),ne.partial_payment&&a.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"8px",height:"8px",borderRadius:"50%",background:"#dc2626",border:"1px solid white"}})]}),a.jsxs("div",{style:{flex:1},children:[a.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 2px 0"},children:["#TXN-",ne.sale_id.toString().padStart(6,"0")]}),a.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[ne.items_count," item",ne.items_count!==1?"s":""," | ",ne.payment_method,ne.partial_payment&&a.jsx("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"8px"},children:"• PARTIAL"})]})]}),a.jsx("div",{style:{textAlign:"right"},children:ne.partial_payment?a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981",margin:"0 0 2px 0"},children:An(ne.partial_amount||0)}),a.jsxs("p",{style:{fontSize:"11px",color:"#6b7280",margin:"0 0 2px 0",fontWeight:"500"},children:["of ",An((ne.partial_amount||0)+(ne.remaining_amount||0))]}),a.jsxs("p",{style:{fontSize:"10px",color:"#dc2626",margin:0,fontWeight:"600"},children:["OWES: ",An(ne.remaining_amount||0)]})]}):a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:0},children:An(ne.total_amount)})})]},ne.sale_id)):a.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#1a1a1a",fontSize:"14px"},children:(()=>{switch(q){case"today":const ne=new Date;return N.toDateString()===ne.toDateString()?"No recent transactions":`No transactions on ${N.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`;case"week":return"No transactions this week";case"month":return"No transactions this month";default:return"No recent transactions"}})()})})]})}),a.jsx("div",{children:a.jsx(Vk,{selectedDate:N,activePeriod:q})})]}),p&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",margin:0},children:Y(p)}),a.jsx("button",{onClick:re,style:{background:"none",border:"none",fontSize:"24px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:"×"})]}),b?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"40px"},children:a.jsxs("div",{style:{fontSize:"16px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading transactions..."]})}):y.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:y.map((ne,Pe)=>a.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>ye(ne.transaction_id),children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"16px"},children:a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"14px"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 4px 0"},children:ne.transaction_id}),a.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[new Date(ne.datetime).toLocaleTimeString()," | ",ne.items_count," items | ",ne.payment_method]})]})]}),a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1a1a1a"},children:An(ne.total_amount)})]},Pe))}):a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:me(p)})]})]})}),_&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:I.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[a.jsx("button",{onClick:()=>G(new Date(I.getFullYear(),I.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("button",{onClick:()=>G(new Date(I.getFullYear(),I.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})}),a.jsx("button",{onClick:()=>S(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:"×"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ne=>a.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#1a1a1a",padding:"8px 4px"},children:ne},ne)),Ae(I.getFullYear(),I.getMonth()).map((ne,Pe)=>{const $e=ne.getMonth()===I.getMonth(),rt=ne.toDateString()===new Date().toDateString(),V=ne.toDateString()===N.toDateString();return a.jsx("button",{onClick:()=>le(ne),style:{background:V?"#1a1a1a":"transparent",color:V?"#f1f0e4":$e?"#1a1a1a":"#bca88d",border:rt?"2px solid #1a1a1a":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:$e?1:.5},children:ne.getDate()},Pe)})]}),a.jsx("div",{style:{textAlign:"center"},children:a.jsx("button",{onClick:()=>le(new Date),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Today"})})]})})]})};async function Kk(e,t,r){if(console.log("?? Starting image upload for product:",t),console.log("?? File details:",{name:e.name,size:e.size,type:e.type}),r==null)return console.error("Cannot upload product image without an active business"),null;try{const s=`product-images/${t}.${e.name.split(".").pop()}`;console.log("?? Uploading to Supabase Storage:",s);const{error:o}=await Oe.storage.from("products").upload(s,e,{contentType:e.type,upsert:!0});if(o)return console.error("? Upload failed:",o),null;const{data:{publicUrl:c}}=Oe.storage.from("products").getPublicUrl(s);console.log("? Image uploaded successfully:",c),console.log("?? Updating database with public URL...");const{error:d}=await Oe.from("products").update({image_url:c}).eq("product_id",t).eq("business_id",r);return d?(console.error("? DB update failed:",d),null):(console.log("? Database updated with public URL"),c)}catch(s){return console.error("?? Unexpected error during upload:",s),null}}const Xk=()=>{const{hasPermission:e}=I0(),{user:t}=Sn(),{businessId:r,businessLoading:s}=au(),[o,c]=j.useState([]),[d,f]=j.useState(!0),[h,p]=j.useState(null),[x,y]=j.useState({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),[v,b]=j.useState(null),[w,_]=j.useState(!1),[S,N]=j.useState(null),[R,I]=j.useState(null),[G,Z]=j.useState(!1),[ie,q]=j.useState("daily"),[P,te]=j.useState(""),[ue,X]=j.useState("all"),[fe,J]=j.useState(!1),[Q,oe]=j.useState([]),[re,ye]=j.useState(!1),[le,Ae]=j.useState(!1),[B,K]=j.useState(null),[E,L]=j.useState({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),[z,Y]=j.useState(!1),[me,Me]=j.useState(!1),[He,Ce]=j.useState("Hi! I'm Lily, your inventory assistant! I can help you understand your stock levels and manage your products. Hover over the stats cards to see what they mean!"),[ne,Pe]=j.useState(!1),[$e,rt]=j.useState(null),[V,Ne]=j.useState(null),[st,Re]=j.useState(!1),[ht,xt]=j.useState(null),[Dt,bt]=j.useState(null),[Ie,nt]=j.useState(1),[vt,er]=j.useState(10),[br,Pt]=j.useState(0),[ce,Ge]=j.useState([]),[gt,It]=j.useState([]),[lr,Cr]=j.useState(null),[wr,nr]=j.useState(null),Rr=300*1e3,$t=async(k=!1)=>{if(r==null){It([]);return}if(!k&&lr&&lr.businessId===r&&Date.now()-lr.timestamp<Rr){const de=lr.data.map(ke=>({...ke,price:0,stock_quantity:0,supplier_info:"",reorder_level:0,image_url:null,created_at:"",updated_at:""}));It(de);return}try{const{data:de,error:ke}=await Oe.from("products").select("product_id, name, category").eq("business_id",r).order("name",{ascending:!0});if(ke){console.error("Error fetching all products for suggestions:",ke);return}const dt=de||[],_t=dt.map(wt=>({...wt,price:0,stock_quantity:0,supplier_info:"",reorder_level:0,image_url:null,created_at:"",updated_at:""}));It(_t),Cr({data:dt,timestamp:Date.now(),businessId:r})}catch(de){console.error("Error fetching all products for suggestions:",de)}},or=async()=>{if(r==null){Ge([]);return}try{const{data:k,error:de}=await Oe.from("products").select("category").eq("business_id",r).not("category","is",null).not("category","eq","");if(de){console.error("Error fetching categories:",de);return}const ke=Array.from(new Set(k.map(dt=>dt.category))).filter(dt=>dt&&dt.trim()!=="").sort();Ge(ke)}catch(k){console.error("Error fetching distinct categories:",k)}};j.useEffect(()=>{if(r==null){c([]),It([]),Ge([]),y({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),Pt(0);return}at(1,vt,P,ue,v),or(),$t(!0),At(!0)},[r,s]),j.useEffect(()=>{console.log("Modal state changed:",{showEditModal:le,editingProduct:B?.name})},[le,B]);const se=()=>{nt(1),at(1,vt,P,ue)},Ee=k=>{k.key==="Enter"&&(se(),J(!1))},mt=k=>{const de=k.target.value;if(te(de),de.length>=2){const ke=A(de);oe(ke),J(ke.length>0)}else J(!1),oe([])},Rt=k=>{const de=k.type==="product"?k.product.name:k.name;te(de),J(!1),oe([]),nt(1),at(1,vt,de,ue)},sr=()=>{te(""),J(!1),oe([]),nt(1),at(1,vt,"",ue)};j.useEffect(()=>{r!=null&&(nt(1),at(1,vt,P,ue,v))},[ue,r,s]);const at=async(k=Ie,de=vt,ke=P,dt=ue,_t=null)=>{if(r==null){c([]),Pt(0),f(!1);return}try{if(f(!0),p(null),_t&&_t!=="totalProducts"){let wt=Oe.from("products").select("*").eq("business_id",r).order("product_id",{ascending:!0});if(ke&&ke.trim()){const _r=`name.ilike.%${ke.trim()}%,category.ilike.%${ke.trim()}%`;wt=wt.or(_r)}dt&&dt!=="all"&&(wt=wt.eq("category",dt)),_t==="outOfStock"&&(wt=wt.eq("stock_quantity",0));const{data:lt,error:jt}=await wt;if(jt)throw jt;let Et=lt||[];_t==="inStock"?Et=Et.filter(_r=>_r.stock_quantity>_r.reorder_level):_t==="lowStock"&&(Et=Et.filter(_r=>_r.stock_quantity<=_r.reorder_level&&_r.stock_quantity>0)),Pt(Et.length);const zt=(k-1)*de,Lr=Et.slice(zt,zt+de);c(Lr)}else{let wt=Oe.from("products").select("product_id",{count:"exact",head:!0}).eq("business_id",r),lt=Oe.from("products").select("*").eq("business_id",r).order("product_id",{ascending:!0});if(ke&&ke.trim()){const En=`name.ilike.%${ke.trim()}%,category.ilike.%${ke.trim()}%`;wt=wt.or(En),lt=lt.or(En)}dt&&dt!=="all"&&(wt=wt.eq("category",dt),lt=lt.eq("category",dt));const{count:jt,error:Et}=await wt;if(Et)throw Et;Pt(jt||0);const zt=(k-1)*de,{data:Lr,error:_r}=await lt.range(zt,zt+de-1);if(_r)throw _r;c(Lr||[])}}catch(wt){const lt=wt instanceof Error?wt.message:"Failed to fetch products";p(lt),console.error("Error fetching products:",wt),alert(`Products loading error: ${lt}. Please check your database permissions.`)}finally{f(!1)}},At=async(k=!1)=>{if(r==null){y({totalProducts:0,inStock:0,lowStock:0,outOfStock:0});return}if(!k&&wr&&wr.businessId===r&&Date.now()-wr.timestamp<Rr){y(wr.data);return}try{const{data:de,error:ke}=await Oe.from("products").select("stock_quantity, reorder_level").eq("business_id",r);if(ke)throw ke;if(de){const dt=de.length,_t=de.filter(Et=>Et.stock_quantity>Et.reorder_level).length,wt=de.filter(Et=>Et.stock_quantity<=Et.reorder_level&&Et.stock_quantity>0).length,lt=de.filter(Et=>Et.stock_quantity===0).length,jt={totalProducts:dt,inStock:_t,lowStock:wt,outOfStock:lt};y(jt),nr({data:jt,timestamp:Date.now(),businessId:r})}}catch(de){console.error("Error fetching summary stats:",de)}},Ot=k=>{v===k?(b(null),te(""),X("all"),nt(1),at(1,vt,"","all")):(b(k),te(""),X("all"),nt(1),at(1,vt,"","all",k))},wn=k=>{const de=new Date,ke=new Date(de.getTime()-720*60*60*1e3);new Date(de.getTime()-10080*60*1e3);const dt=k.filter(jt=>jt.sales&&new Date(jt.sales.datetime)>=ke),_t=[];for(let jt=29;jt>=0;jt--){const Et=new Date(de.getTime()-jt*24*60*60*1e3),zt=Et.toISOString().split("T")[0],Lr=dt.filter(C=>C.sales&&C.sales.datetime.startsWith(zt)),_r=Lr.length,En=Lr.reduce((C,ge)=>C+(ge.calculated_price||ge.price_each*ge.quantity),0);_t.push({date:zt,day:Et.getDate(),month:Et.getMonth()+1,sales:_r,revenue:En})}const wt=[];for(let jt=3;jt>=0;jt--){const Et=new Date(de.getTime()-(jt+1)*7*24*60*60*1e3),zt=new Date(de.getTime()-jt*7*24*60*60*1e3),Lr=dt.filter(C=>{if(!C.sales)return!1;const ge=new Date(C.sales.datetime);return ge>=Et&&ge<zt}),_r=Lr.length,En=Lr.reduce((C,ge)=>C+(ge.calculated_price||ge.price_each*ge.quantity),0);wt.push({week:`Week ${4-jt}`,startDate:Et.toISOString().split("T")[0],endDate:zt.toISOString().split("T")[0],sales:_r,revenue:En})}const lt=[];for(let jt=5;jt>=0;jt--){const Et=new Date(de.getFullYear(),de.getMonth()-jt,1),zt=new Date(de.getFullYear(),de.getMonth()-jt+1,0),Lr=k.filter(C=>{if(!C.sales)return!1;const ge=new Date(C.sales.datetime);return ge>=Et&&ge<=zt}),_r=Lr.length,En=Lr.reduce((C,ge)=>C+(ge.calculated_price||ge.price_each*ge.quantity),0);lt.push({month:Et.toLocaleDateString("en-US",{month:"short",year:"numeric"}),sales:_r,revenue:En})}return{daily:_t,weekly:wt,monthly:lt}},Er=async k=>{if(r==null){I(null);return}try{Z(!0),p(null),console.log("Fetching insights for product:",k.product_id,k.name);const de=k.sales_count||0,ke=k.total_revenue||0,dt=k.last_sold_date,_t=de>0?(de/30).toFixed(1):0,wt=ke*.6,lt=ke-wt,jt=ke>0?lt/ke*100:0,{data:Et,error:zt}=await Oe.from("sale_items").select(`
          *,
          sales (
            sale_id,
            datetime,
            total_amount,
            payment_method,
            customers (name),
            users (username),
            business_id
          )
        `).eq("product_id",k.product_id).eq("sales.business_id",r).order("sales.datetime",{ascending:!1});if(zt)throw zt;console.log("All sales query result:",{data:Et});const Lr=Et?.slice(0,10)||[],_r=Lr?.map(Qe=>({date:Qe.sales?new Date(Qe.sales.datetime).toLocaleDateString():"Unknown",time:Qe.sales?new Date(Qe.sales.datetime).toLocaleTimeString():"Unknown",quantity:Qe.weight||Qe.quantity,unit:Qe.weight?k.weight_unit||"kg":"units",price:Qe.calculated_price||Qe.price_each*Qe.quantity,customer:Qe.sales?.customers?.name||"Walk-in Customer",cashier:Qe.sales?.users?.username||"Unknown"}))||[],En=Lr?.reduce((Qe,ct)=>Qe+(ct.weight||ct.quantity),0)||0,C=new Date;C.setDate(C.getDate()-30);const Xe=(Lr?.filter(Qe=>Qe.sales&&new Date(Qe.sales.datetime)>=C)||[]).reduce((Qe,ct)=>{if(ct.sales&&ct.sales.datetime){const ft=new Date(ct.sales.datetime).toDateString();Qe[ft]=(Qe[ft]||0)+1}return Qe},{}),Je=Object.entries(Xe).sort(([,Qe],[,ct])=>ct-Qe).slice(0,5).map(([Qe,ct])=>({date:Qe,count:ct})),Ye=wn(Et||[]);console.log("Calculated insights:",{totalSales:de,totalRevenue:ke,totalQuantitySold:En,averageSalesPerDay:_t,topSellingDays:Je,estimatedProfit:lt,profitMargin:jt,recentSalesList:_r,lastSoldDate:dt,chartData:Ye}),I({product:k,totalSales:de,totalRevenue:ke,totalQuantitySold:En,averageSalesPerDay:parseFloat(_t),topSellingDays:Je,estimatedProfit:lt,profitMargin:jt,recentSalesList:_r,lastSoldDate:dt,chartData:Ye,salesData:Et||[]})}catch(de){console.error("Error fetching product insights:",de),p(de instanceof Error?de.message:"Failed to fetch product insights")}finally{Z(!1)}},Tn=k=>{N(k),_(!0),Er(k)},Yt=o,Nt=Math.ceil(br/vt),gr=br>0?(Ie-1)*vt+1:0,Wn=Math.min(Ie*vt,br),ps=["all",...ce],qn=k=>!k||k.length<2?[]:ce.filter(ke=>ke.toLowerCase().includes(k.toLowerCase())||k.toLowerCase().includes(ke.toLowerCase())||ke.toLowerCase().split(" ").some(dt=>dt.includes(k.toLowerCase())||k.toLowerCase().includes(dt))).slice(0,5),A=k=>{if(!k||k.length<2)return[];const de=k.toLowerCase(),ke=[],dt=[];gt.forEach(lt=>{lt.name.toLowerCase().includes(de)&&ke.push({type:"product",product:lt}),lt.category.toLowerCase().includes(de)&&ke.push({type:"product",product:lt}),lt.description&&lt.description.toLowerCase().includes(de)&&ke.push({type:"product",product:lt}),lt.sku&&lt.sku.toLowerCase().includes(de)&&ke.push({type:"product",product:lt})}),ce.forEach(lt=>{lt.toLowerCase().includes(de)&&dt.push({type:"category",name:lt})});const _t=ke.filter((lt,jt,Et)=>lt.type==="product"&&Et.findIndex(zt=>zt.type==="product"&&zt.product.product_id===lt.product.product_id)===jt).slice(0,6),wt=dt.filter((lt,jt,Et)=>lt.type==="category"&&Et.findIndex(zt=>zt.type==="category"&&zt.name===lt.name)===jt).slice(0,2);return[..._t,...wt]},U=k=>{k>=1&&k<=Nt&&(nt(k),at(k,vt,P,ue))},M=k=>{er(k),nt(1),at(1,k,P,ue)},F=()=>{Ie>1&&U(Ie-1)},W=()=>{Ie<Nt&&U(Ie+1)},H=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(k){const de=Math.random()*16|0;return(k==="x"?de:de&3|8).toString(16)}),be=(k,de,ke=!1)=>{const dt=(lt,jt,Et=!0)=>{if(!lt||lt.trim()===""){if(Et)throw new Error(`${jt} is required`);return 0}const zt=parseFloat(lt);if(isNaN(zt))throw new Error(`${jt} must be a valid number`);return zt},_t=(lt,jt,Et=!0)=>{if(!lt||lt.trim()===""){if(Et)throw new Error(`${jt} is required`);return 0}const zt=parseInt(lt);if(isNaN(zt)||!Number.isInteger(zt))throw new Error(`${jt} must be a valid whole number`);return zt},wt={name:k.product_name?.trim()||(()=>{throw new Error("Product name is required")})(),category:k.category?.trim()||(()=>{throw new Error("Category is required")})(),price:k.is_weighted?0:dt(k.price,"Price",!ke),stock_quantity:_t(k.stock_quantity,"Stock quantity",!ke),supplier_info:k.supplier_info?.trim()||"",reorder_level:_t(k.reorder_level,"Reorder level",!ke),tax_rate:k.tax_rate?dt(k.tax_rate,"Tax rate",!1):0,last_updated:new Date().toISOString(),is_weighted:k.is_weighted||!1,weight_unit:k.is_weighted?k.weight_unit:null,price_per_unit:k.is_weighted&&k.price_per_unit?dt(k.price_per_unit,"Price per unit",!1):null,description:k.description?.trim()||"",sku:k.sku?.trim()||"",barcode:(()=>{const lt=k.barcode?.trim();return lt&&lt.length>0?lt:null})()};return de?{...wt,product_id:de}:wt},De=k=>{if(k.key!=="Enter")return;const de=k.target;!de||de instanceof HTMLTextAreaElement||de instanceof HTMLButtonElement||de instanceof HTMLInputElement&&de.type==="submit"||!(de instanceof HTMLInputElement||de instanceof HTMLSelectElement)||(k.preventDefault(),k.stopPropagation())},pe=async k=>{if(k.preventDefault(),console.log("Form submitted, newProduct:",E),Y(!0),r==null){p("Please select a business before adding products"),Y(!1);return}try{const de=H();console.log("Generated product ID:",de);const ke=be(E,de),dt={...ke,business_id:r};console.log("Inserting product data:",dt);const{data:_t,error:wt}=await Oe.from("products").insert([dt]).select();if(wt)throw console.error("Supabase error:",wt),wt;const lt=_t?.[0]?{..._t[0],barcode:ke.barcode??null}:null;if(!lt)throw new Error("Product insertion returned no data");if(console.log("Product added successfully!"),$e){const jt=await Ve(de);if(jt){const Et={...lt,image_url:jt};c(zt=>[...zt,Et])}else c(Et=>[...Et,lt])}else c(jt=>[...jt,lt]);Pt(jt=>jt+1),L({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),rt(null),Ne(null),ye(!1),or(),$t(!0),At(!0)}catch(de){console.error("Error adding product:",de);let ke="Failed to add product";de instanceof Error&&de.message&&(de.message.includes("is required")||de.message.includes("must be a valid")?ke=de.message:de.message.includes("duplicate key value violates unique constraint")?ke="A product with this ID already exists. Please try again.":de.message.includes("violates check constraint")?ke="Invalid data provided. Please check your input values.":de.message.includes("not-null constraint")?ke="Required fields are missing. Please fill in all required fields.":ke=`Failed to add product: ${de.message}`),p(ke)}finally{Y(!1)}},Se=async k=>{if(k.preventDefault(),!!B){if(r==null){p("Please select a business before updating products");return}Y(!0),p(null);try{console.log("Editing product data:",E);const de=be(E,void 0,!0);console.log("Transformed product data:",de);const{data:ke,error:dt}=await Oe.from("products").update(de).eq("product_id",B.product_id).eq("business_id",r).select();if(dt)throw console.error("Supabase error:",dt),console.error("Error details:",JSON.stringify(dt,null,2)),dt;let _t=ke?.[0]?{...ke[0],barcode:de.barcode??null}:null;if(!_t)throw new Error("Product update returned no data");if($e){const wt=await Ve(B.product_id);wt&&(_t={..._t,image_url:wt})}c(o.map(wt=>wt.product_id===B.product_id?_t:wt)),We(),Ae(!1),K(null),or(),$t(!0),At(!0)}catch(de){console.error("Failed to update product:",de);let ke="Failed to update product";de instanceof Error&&de.message&&(de.message.includes("is required")||de.message.includes("must be a valid")?ke=de.message:de.message.includes("violates check constraint")?ke="Invalid data provided. Please check your input values.":de.message.includes("not-null constraint")?ke="Required fields are missing. Please fill in all required fields.":ke=`Failed to update product: ${de.message}`),p(ke)}finally{Y(!1)}}},we=async k=>{if(r==null){p("Please select a business before deleting products");return}try{console.log("??? Starting delete for product:",k);const{error:de}=await Oe.from("products").delete().eq("product_id",k).eq("business_id",r);if(de)throw console.error("?? Error deleting product:",de),de;console.log("? Product deleted successfully"),c(o.filter(ke=>ke.product_id!==k)),bt(null),Pt(ke=>Math.max(0,ke-1)),$t(!0),At(!0)}catch(de){console.error("? Delete failed:",de),p(de instanceof Error?de.message:"Failed to delete product")}},We=()=>{L({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),rt(null),Ne(null),ye(!1),Ae(!1),K(null)},Ke=k=>{console.log("Starting edit for product:",k),K(k),L({product_name:k.name,category:k.category,price:k.is_weighted?k.price_per_unit?.toString()||"":k.price.toString(),stock_quantity:k.stock_quantity.toString(),reorder_level:k.reorder_level.toString(),supplier_info:k.supplier_info||"",tax_rate:k.tax_rate?.toString()||"",description:k.description||"",sku:k.sku||"",barcode:k.barcode||"",is_weighted:k.is_weighted||!1,weight_unit:k.weight_unit||"",price_per_unit:k.price_per_unit?.toString()||""}),Ne(k.image_url||null),rt(null),Ae(!0),console.log("Edit modal should be open now")},it=k=>{const de=k.target.files?.[0];if(de){rt(de);const ke=new FileReader;ke.onload=dt=>{Ne(dt.target?.result)},ke.readAsDataURL(de)}},Ve=async k=>{if(!$e)return null;if(r==null)return console.error("Cannot upload image without selecting a business"),null;try{return await Kk($e,k,r)}catch(de){return console.error("Image upload failed:",de),null}},tt=k=>{xt(k),Re(!0)},St=()=>{Re(!1),xt(null)},Kt=(k,de)=>k===0?{status:"out",color:"#ef4444",bgColor:"#fef2f2",textColor:"#dc2626"}:k<=de?{status:"low",color:"#f59e0b",bgColor:"#fffbeb",textColor:"#d97706"}:{status:"good",color:"#10b981",bgColor:"#f0fdf4",textColor:"#059669"},Qt=k=>{const de=k.toLowerCase();return de.includes("small")?"#3b82f6":de.includes("large")?"#ef4444":de.includes("medium")?"#f59e0b":"#7d8d86"},Jt=k=>{const de=k.split(" ");return de.map((ke,dt)=>{const _t=ke.toLowerCase();let wt="#1a1a1a";return _t==="small"?wt="#3b82f6":_t==="large"?wt="#ef4444":_t==="medium"&&(wt="#f59e0b"),a.jsxs("span",{style:{color:wt},children:[ke,dt<de.length-1?" ":""]},dt)})},jn=()=>a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,display:"flex",alignItems:"flex-end",gap:"12px"},children:[me&&a.jsxs("div",{style:{background:"#f8fafc",border:"2px solid #7d8d86",borderRadius:"16px",padding:"12px 16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",maxWidth:"250px",fontSize:"14px",color:"#3e3f29",position:"relative",marginBottom:"8px"},children:[a.jsx("p",{style:{margin:0,fontWeight:"500"},children:He}),a.jsx("div",{style:{position:"absolute",bottom:"-8px",right:"20px",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"8px solid #7d8d86"}})]}),a.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"#f8fafc",border:"3px solid #7d8d86",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease"},onClick:()=>Me(!me),onMouseEnter:k=>{const de=k.target;de.style.transform="scale(1.05)"},onMouseLeave:k=>{const de=k.target;de.style.transform="scale(1)"},children:a.jsx("img",{src:t?.icon?`/retailpos/images/icons/${t.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:t?.icon||"Lily",style:{width:"50px",height:"50px",borderRadius:"50%"}})})]});return d?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading inventory..."]})}):a.jsxs("div",{style:{padding:"24px",background:"#f8fafc",minHeight:"100vh",border:"1px solid rgba(125, 141, 134, 0.1)",borderRadius:"16px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px",padding:"20px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:"Inventory Management"}),a.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:"Manage your product inventory, stock levels, and suppliers."})]}),e("canManageProducts")&&a.jsxs("button",{onClick:()=>{console.log("Add Product button clicked"),ye(!0),console.log("showAddModal set to true")},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},onMouseEnter:k=>{k.target.style.background="#bca88d",Ce("Click this button to add a new product to your inventory! You'll need to fill in details like name, price, stock quantity, and reorder level."),Me(!0)},onMouseLeave:k=>{k.target.style.background="#7d8d86",Me(!1)},children:[a.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"16px"}}),a.jsx("span",{children:"Add Product"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginBottom:"32px",padding:"20px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("div",{onClick:()=>Ot("totalProducts"),style:{background:v==="totalProducts"?"#f0f8f0":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="totalProducts"?"2px solid #7d8d86":"2px solid transparent"},onMouseEnter:k=>{v!=="totalProducts"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{v!=="totalProducts"&&(k.target.style.background="#f8fafc")},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"18px",color:"#f1f0e4"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.totalProducts}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Total Products"})]})]})}),a.jsx("div",{onClick:()=>Ot("inStock"),style:{background:v==="inStock"?"#f0fdf4":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="inStock"?"2px solid #10b981":"2px solid transparent"},onMouseEnter:k=>{v!=="inStock"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{v!=="inStock"&&(k.target.style.background="#f8fafc")},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-circle-check",style:{fontSize:"18px",color:"white"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.inStock}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"In Stock"})]})]})}),a.jsx("div",{onClick:()=>Ot("lowStock"),style:{background:v==="lowStock"?"#fffbeb":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="lowStock"?"2px solid #f59e0b":"2px solid transparent"},onMouseEnter:k=>{v!=="lowStock"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{v!=="lowStock"&&(k.target.style.background="#f8fafc")},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-triangle-exclamation",style:{fontSize:"18px",color:"white"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.lowStock}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Low Stock"})]})]})}),a.jsx("div",{onClick:()=>Ot("outOfStock"),style:{background:v==="outOfStock"?"#fef2f2":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="outOfStock"?"2px solid #ef4444":"2px solid transparent"},onMouseEnter:k=>{v!=="outOfStock"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{v!=="outOfStock"&&(k.target.style.background="#f8fafc")},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-circle-xmark",style:{fontSize:"18px",color:"white"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.outOfStock}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Out of Stock"})]})]})})]}),a.jsx("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"2px solid rgba(125, 141, 134, 0.3)"},children:a.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"center",flexWrap:"wrap"},children:[a.jsx("div",{style:{flex:"1",minWidth:"250px",maxWidth:"400px"},children:a.jsxs("div",{style:{position:"relative",display:"flex",gap:"8px"},children:[a.jsxs("div",{style:{position:"relative",flex:1},children:[a.jsx("i",{className:"fa-solid fa-search",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#7d8d86",fontSize:"14px",zIndex:1}}),a.jsx("input",{type:"text",placeholder:"Search products... (Press Enter to search)",value:P,onChange:mt,onKeyPress:Ee,onBlur:()=>{setTimeout(()=>J(!1),200)},onFocus:()=>{P.length>=2&&Q.length>0&&J(!0)},style:{width:"100%",padding:"10px 12px 10px 36px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",boxSizing:"border-box"}}),P&&a.jsx("button",{onClick:sr,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"12px",transition:"color 0.2s ease"},onMouseEnter:k=>k.target.style.color="#ef4444",onMouseLeave:k=>k.target.style.color="#7d8d86",children:a.jsx("i",{className:"fa-solid fa-times"})}),fe&&Q.length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #d1d5db",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:50,maxHeight:"300px",overflow:"auto"},children:Q.map((k,de)=>a.jsx("div",{onClick:()=>Rt(k),style:{padding:"12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:de<Q.length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:ke=>ke.target.style.background="#f9fafb",onMouseLeave:ke=>ke.target.style.background="#f8fafc",children:k.type==="product"?a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"6px",overflow:"hidden",flexShrink:0,backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:k.product.image_url?a.jsx("img",{src:k.product.image_url,alt:k.product.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):a.jsx("i",{className:"fa-solid fa-box",style:{color:"#9ca3af",fontSize:"16px"}})}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("div",{style:{fontWeight:"500",marginBottom:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.product.name}),a.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:k.product.category}),a.jsx("span",{children:"?"}),a.jsx("span",{style:{fontWeight:"500",color:"#059669"},children:k.product.is_weighted?`?${k.product.price_per_unit}/${k.product.weight_unit}`:`?${k.product.price}`}),k.product.sku&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"?"}),a.jsxs("span",{children:["SKU: ",k.product.sku]})]})]})]}),a.jsx("i",{className:"fa-solid fa-box",style:{color:"#7d8d86",fontSize:"14px",flexShrink:0}})]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-tags",style:{color:"#7d8d86",fontSize:"16px",width:"16px",flexShrink:0}}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("div",{style:{fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.name}),a.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Category"})]}),a.jsx("i",{className:"fa-solid fa-arrow-right",style:{color:"#7d8d86",fontSize:"12px",flexShrink:0}})]})},de))})]}),a.jsxs("button",{onClick:se,style:{padding:"10px 16px",background:"#7d8d86",color:"#f1f0e4",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},onMouseEnter:k=>k.target.style.background="#bca88d",onMouseLeave:k=>k.target.style.background="#7d8d86",children:[a.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"12px"}}),"Search"]})]})}),a.jsx("div",{style:{minWidth:"180px"},children:a.jsx("select",{value:ue,onChange:k=>X(k.target.value),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",cursor:"pointer"},children:ps.map(k=>a.jsx("option",{value:k,children:k==="all"?"All Categories":k},k))})})]})}),a.jsx("div",{style:{background:"#f8fafc",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid rgba(125, 141, 134, 0.3)"},children:a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{style:{background:"#3e3f29",borderBottom:"4px solid #7d8d86"},children:a.jsxs("tr",{children:[a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Product"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Category"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Price"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Stock"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Status"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86"},children:"Actions"})]})}),a.jsx("tbody",{style:{border:"1px solid rgba(125, 141, 134, 0.2)"},children:Yt.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:6,style:{padding:"40px",textAlign:"center",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:"No products found"}),a.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0"},children:"Add your first product to get started!"})]})}):Yt.map(k=>{const de=Kt(k.stock_quantity,k.reorder_level);return a.jsxs("tr",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",borderLeft:"1px solid rgba(125, 141, 134, 0.2)",borderRight:"1px solid rgba(125, 141, 134, 0.2)",transition:"background 0.2s ease",cursor:"pointer"},onClick:()=>Tn(k),onMouseEnter:ke=>ke.target.style.background="rgba(125, 141, 134, 0.05)",onMouseLeave:ke=>ke.target.style.background="transparent",children:[a.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[k.image_url&&a.jsx("img",{src:k.image_url,alt:k.name,onClick:ke=>{ke.stopPropagation(),k.image_url&&tt(k.image_url)},style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:ke=>{const dt=ke.target;dt.style.transform="scale(1.05)",dt.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",Ce("Click on the image to see it in full size! This helps you get a better look at the product."),Me(!0)},onMouseLeave:ke=>{const dt=ke.target;dt.style.transform="scale(1)",dt.style.boxShadow="none",Me(!1)}}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 4px 0"},children:Jt(k.name)}),a.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["ID: ",k.product_id]})]})]})}),a.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:a.jsx("span",{style:{background:"#f3f4f6",color:Qt(k.category),padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",border:`1px solid ${Qt(k.category)}`},children:k.category})}),a.jsxs("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:k.is_weighted&&k.price_per_unit&&k.weight_unit?`?${k.price_per_unit.toFixed(2)}/${k.weight_unit}`:`?${k.price.toFixed(2)}`}),k.is_weighted&&a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"4px 0 0 0"},children:"Sold by weight"})]}),a.jsxs("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:k.stock_quantity}),a.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["Reorder: ",k.reorder_level]})]}),a.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:a.jsx("span",{style:{background:de.bgColor,color:de.textColor,padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:de.status==="good"?"In Stock":de.status==="low"?"Low Stock":"Out of Stock"})}),a.jsx("td",{style:{padding:"16px"},children:a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e("canManageProducts")&&a.jsxs("button",{onClick:ke=>{ke.stopPropagation(),console.log("Edit button clicked for product:",k.name),Ke(k)},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:ke=>{ke.target.style.background="#bca88d",Ce(`Click to edit "${k.name}". You can update the price, stock quantity, reorder level, and other details!`),Me(!0)},onMouseLeave:ke=>{ke.target.style.background="#7d8d86",Me(!1)},children:[a.jsx("i",{className:"fa-solid fa-pen-to-square",style:{marginRight:"4px"}}),"Edit"]}),a.jsxs("button",{onClick:ke=>{ke.stopPropagation(),bt(k)},style:{background:"#ef4444",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:ke=>ke.target.style.background="#dc2626",onMouseLeave:ke=>ke.target.style.background="#ef4444",children:[a.jsx("i",{className:"fa-solid fa-trash-can",style:{marginRight:"4px"}}),"Delete"]})]})})]},k.product_id)})})]})})}),a.jsx("div",{style:{marginTop:"16px",fontSize:"14px",color:"#7d8d86",textAlign:"center",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)",marginBottom:"16px"},children:br>0?a.jsxs(a.Fragment,{children:["Showing ",gr,"-",Wn," of ",br," products",Nt>1&&a.jsxs("span",{style:{marginLeft:"16px"},children:["(Page ",Ie," of ",Nt,")"]})]}):"No products found"}),Nt>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("label",{style:{fontSize:"14px",color:"#3e3f29",fontWeight:"500"},children:"Show:"}),a.jsxs("select",{value:vt,onChange:k=>M(parseInt(k.target.value)),style:{padding:"6px 12px",border:"2px solid #bca88d",borderRadius:"6px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",cursor:"pointer"},children:[a.jsx("option",{value:5,children:"5"}),a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]}),a.jsx("span",{style:{fontSize:"14px",color:"#7d8d86"},children:"per page"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsxs("button",{onClick:F,disabled:Ie===1,style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ie===1?"#f3f4f6":"white",color:Ie===1?"#9ca3af":"#3e3f29",cursor:Ie===1?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:k=>{Ie!==1&&(k.target.style.background="#f8f9fa")},onMouseLeave:k=>{Ie!==1&&(k.target.style.background="#f8fafc")},children:[a.jsx("i",{className:"fa-solid fa-chevron-left",style:{marginRight:"4px"}}),"Previous"]}),a.jsx("div",{style:{display:"flex",gap:"4px"},children:Array.from({length:Math.min(5,Nt)},(k,de)=>{let ke;return Nt<=5||Ie<=3?ke=de+1:Ie>=Nt-2?ke=Nt-4+de:ke=Ie-2+de,a.jsx("button",{onClick:()=>U(ke),style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ie===ke?"#7d8d86":"white",color:Ie===ke?"#f1f0e4":"#3e3f29",cursor:"pointer",fontSize:"14px",fontWeight:Ie===ke?"600":"400",transition:"all 0.2s ease",minWidth:"40px"},onMouseEnter:dt=>{Ie!==ke&&(dt.target.style.background="#f8f9fa")},onMouseLeave:dt=>{Ie!==ke&&(dt.target.style.background="#f8fafc")},children:ke},ke)})}),a.jsxs("button",{onClick:W,disabled:Ie===Nt,style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ie===Nt?"#f3f4f6":"white",color:Ie===Nt?"#9ca3af":"#3e3f29",cursor:Ie===Nt?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:k=>{Ie!==Nt&&(k.target.style.background="#f8f9fa")},onMouseLeave:k=>{Ie!==Nt&&(k.target.style.background="#f8fafc")},children:["Next",a.jsx("i",{className:"fa-solid fa-chevron-right",style:{marginLeft:"4px"}})]})]})]}),re&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:a.jsxs("div",{style:{background:"#f8fafc",borderRadius:"16px",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Add New Product"}),a.jsx("button",{onClick:We,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#f3f4f6",k.target.style.color="#3e3f29",Ce("Click this X button to close the form without saving. It's the same as clicking Cancel!"),Me(!0)},onMouseLeave:k=>{k.target.style.background="none",k.target.style.color="#7d8d86",Me(!1)},children:a.jsx("i",{className:"fa-solid fa-times"})})]}),a.jsxs("form",{onSubmit:pe,onKeyDown:De,children:[h&&a.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:h}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),a.jsx("input",{type:"text",required:!0,value:E.product_name,onChange:k=>L({...E,product_name:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("input",{type:"text",required:!0,value:E.category,onChange:k=>{L({...E,category:k.target.value}),Pe(k.target.value.length>=2)},onFocus:()=>{Pe(E.category.length>=2),Ce("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),Me(!0)},onBlur:()=>setTimeout(()=>Pe(!1),200),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),ne&&qn(E.category).length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#f8fafc",border:"2px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:qn(E.category).map((k,de)=>a.jsxs("div",{onClick:()=>{L({...E,category:k}),Pe(!1),Ce(`Great choice! I've selected "${k}" for you. This helps keep your categories organized!`),Me(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:de<qn(E.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:ke=>ke.target.style.background="#f8f9fa",onMouseLeave:ke=>ke.target.style.background="transparent",children:[a.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),k]},de))})]})]})]}),a.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsx("input",{type:"checkbox",id:"is_weighted",checked:E.is_weighted,onChange:k=>L({...E,is_weighted:k.target.checked}),style:{width:"16px",height:"16px"}}),a.jsx("label",{htmlFor:"is_weighted",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),E.is_weighted&&a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),a.jsxs("select",{value:E.weight_unit,onChange:k=>L({...E,weight_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},children:[a.jsx("option",{value:"",children:"Select unit"}),a.jsx("option",{value:"kg",children:"Kilogram (kg)"}),a.jsx("option",{value:"g",children:"Gram (g)"}),a.jsx("option",{value:"lb",children:"Pound (lb)"}),a.jsx("option",{value:"oz",children:"Ounce (oz)"}),a.jsx("option",{value:"l",children:"Liter (l)"}),a.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",E.weight_unit||"unit"," *"]}),a.jsx("input",{type:"number",step:"0.01",required:E.is_weighted,value:E.price_per_unit,onChange:k=>L({...E,price_per_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",E.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),a.jsx("input",{type:"number",step:"0.01",required:!E.is_weighted,value:E.is_weighted?"0":E.price,onChange:k=>{E.is_weighted||L({...E,price:k.target.value})},style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:E.is_weighted?"#f9fafb":"white",color:E.is_weighted?"#6b7280":"#3e3f29",cursor:E.is_weighted?"not-allowed":"text"},placeholder:E.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:E.is_weighted})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),a.jsx("input",{type:"number",required:!0,value:E.stock_quantity,onChange:k=>L({...E,stock_quantity:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),a.jsx("input",{type:"number",required:!0,value:E.reorder_level,onChange:k=>L({...E,reorder_level:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"10"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",value:E.tax_rate,onChange:k=>L({...E,tax_rate:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),a.jsx("input",{type:"text",value:E.supplier_info,onChange:k=>L({...E,supplier_info:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU (Auto-generated if empty)"}),a.jsx("input",{type:"text",value:E.sku,onChange:k=>L({...E,sku:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Leave empty for auto-generation"})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Barcode"}),a.jsx("input",{type:"text",value:E.barcode,onChange:k=>L({...E,barcode:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Scan or enter barcode"})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),a.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[a.jsx("input",{type:"file",accept:"image/*",onChange:it,style:{display:"none"},id:"image-upload"}),a.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:k=>{k.target.style.borderColor="#7d8d86",k.target.style.color="#3e3f29",Ce("Click here to upload a product image! This helps customers see what they're buying."),Me(!0)},onMouseLeave:k=>{k.target.style.borderColor="#bca88d",k.target.style.color="#7d8d86",Me(!1)},children:[a.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(V||B?.image_url)&&a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:V||B?.image_url,alt:"Preview",onClick:()=>{const k=V||B?.image_url;k&&tt(k)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:k=>{const de=k.target;de.style.transform="scale(1.05)",de.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:k=>{const de=k.target;de.style.transform="scale(1)",de.style.boxShadow="none"}}),a.jsx("button",{type:"button",onClick:()=>{Ne(null),rt(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),a.jsx("textarea",{value:E.description,onChange:k=>L({...E,description:k.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:We,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#e5e7eb",Ce("This will close the form and clear all the information you've entered. Don't worry, you can always start over!"),Me(!0)},onMouseLeave:k=>{k.target.style.background="#f3f4f6",Me(!1)},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:z,style:{background:z?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:z?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:k=>{z||(Ce("This will save your new product to the inventory! Make sure all required fields are filled out before clicking."),Me(!0))},onMouseLeave:k=>{z||Me(!1)},children:z?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add Product"]})})]})]})]})}),le&&B&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:a.jsxs("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Edit Product"}),a.jsx("button",{onClick:We,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#f3f4f6",k.target.style.color="#3e3f29",Ce("Click this X button to close the edit form without saving. It's the same as clicking Cancel!"),Me(!0)},onMouseLeave:k=>{k.target.style.background="none",k.target.style.color="#7d8d86",Me(!1)},children:a.jsx("i",{className:"fa-solid fa-times"})})]}),a.jsxs("form",{onSubmit:Se,onKeyDown:De,children:[h&&a.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:h}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),a.jsx("input",{type:"text",required:!0,value:E.product_name,onChange:k=>L({...E,product_name:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("input",{type:"text",required:!0,value:E.category,onChange:k=>{L({...E,category:k.target.value}),Pe(k.target.value.length>=2)},onFocus:()=>{Pe(E.category.length>=2),Ce("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),Me(!0)},onBlur:()=>setTimeout(()=>Pe(!1),200),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),ne&&qn(E.category).length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#f8fafc",border:"2px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:qn(E.category).map((k,de)=>a.jsxs("div",{onClick:()=>{L({...E,category:k}),Pe(!1),Ce(`Great choice! I've selected "${k}" for you. This helps keep your categories organized!`),Me(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:de<qn(E.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:ke=>ke.target.style.background="#f8f9fa",onMouseLeave:ke=>ke.target.style.background="transparent",children:[a.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),k]},de))})]})]})]}),a.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsx("input",{type:"checkbox",id:"is_weighted_edit",checked:E.is_weighted,onChange:k=>L({...E,is_weighted:k.target.checked}),style:{width:"16px",height:"16px"}}),a.jsx("label",{htmlFor:"is_weighted_edit",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),E.is_weighted&&a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),a.jsxs("select",{value:E.weight_unit,onChange:k=>L({...E,weight_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},children:[a.jsx("option",{value:"",children:"Select unit"}),a.jsx("option",{value:"kg",children:"Kilogram (kg)"}),a.jsx("option",{value:"g",children:"Gram (g)"}),a.jsx("option",{value:"lb",children:"Pound (lb)"}),a.jsx("option",{value:"oz",children:"Ounce (oz)"}),a.jsx("option",{value:"l",children:"Liter (l)"}),a.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",E.weight_unit||"unit"," *"]}),a.jsx("input",{type:"number",step:"0.01",required:E.is_weighted,value:E.price_per_unit,onChange:k=>L({...E,price_per_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",E.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),a.jsx("input",{type:"number",step:"0.01",required:!E.is_weighted,value:E.is_weighted?"0":E.price,onChange:k=>{E.is_weighted||L({...E,price:k.target.value})},style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:E.is_weighted?"#f9fafb":"white",color:E.is_weighted?"#6b7280":"#3e3f29",cursor:E.is_weighted?"not-allowed":"text"},placeholder:E.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:E.is_weighted})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),a.jsx("input",{type:"number",required:!0,value:E.stock_quantity,onChange:k=>L({...E,stock_quantity:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),a.jsx("input",{type:"number",required:!0,value:E.reorder_level,onChange:k=>L({...E,reorder_level:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"10"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",value:E.tax_rate,onChange:k=>L({...E,tax_rate:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),a.jsx("input",{type:"text",value:E.supplier_info,onChange:k=>L({...E,supplier_info:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU"}),a.jsx("input",{type:"text",value:E.sku,onChange:k=>L({...E,sku:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Update SKU"})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Barcode"}),a.jsx("input",{type:"text",value:E.barcode,onChange:k=>L({...E,barcode:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Scan or enter barcode"})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),a.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[a.jsx("input",{type:"file",accept:"image/*",onChange:it,style:{display:"none"},id:"image-upload"}),a.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:k=>{k.target.style.borderColor="#7d8d86",k.target.style.color="#3e3f29",Ce("Click here to upload a product image! This helps customers see what they're buying."),Me(!0)},onMouseLeave:k=>{k.target.style.borderColor="#bca88d",k.target.style.color="#7d8d86",Me(!1)},children:[a.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(V||B?.image_url)&&a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:V||B?.image_url,alt:"Preview",onClick:()=>{const k=V||B?.image_url;k&&tt(k)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:k=>{const de=k.target;de.style.transform="scale(1.05)",de.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:k=>{const de=k.target;de.style.transform="scale(1)",de.style.boxShadow="none"}}),a.jsx("button",{type:"button",onClick:()=>{Ne(null),rt(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),a.jsx("textarea",{value:E.description,onChange:k=>L({...E,description:k.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:We,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#e5e7eb",Ce("This will close the edit form and discard any changes you've made. Don't worry, you can always edit again!"),Me(!0)},onMouseLeave:k=>{k.target.style.background="#f3f4f6",Me(!1)},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:z,style:{background:z?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:z?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:k=>{z||(Ce("This will save your changes to the product! Make sure all required fields are filled out before clicking."),Me(!0))},onMouseLeave:k=>{z||Me(!1)},children:z?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-save"}),"Update Product"]})})]})]})]})}),st&&ht&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:St,children:a.jsx("div",{style:{position:"relative",width:"400px",height:"400px",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:`url(${ht})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:"8px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",backgroundColor:"#ffffff"},onClick:k=>k.stopPropagation(),children:a.jsx("button",{onClick:St,style:{position:"absolute",top:"-40px",right:"-40px",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.9)",border:"none",color:"#3e3f29",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s ease"},onMouseEnter:k=>k.target.style.background="rgba(255, 255, 255, 1)",onMouseLeave:k=>k.target.style.background="rgba(255, 255, 255, 0.9)",children:a.jsx("i",{className:"fa-solid fa-times"})})})}),Dt&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",marginBottom:"16px",textAlign:"center"},children:"Delete Product"}),a.jsxs("p",{style:{fontSize:"16px",color:"#1a1a1a",marginBottom:"8px",textAlign:"center"},children:["Are you sure you want to delete ",a.jsx("strong",{children:Dt.name}),"?"]}),a.jsx("p",{style:{fontSize:"14px",color:"#ef4444",marginBottom:"24px",textAlign:"center"},children:"This action cannot be undone."}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>bt(null),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:k=>k.target.style.background="#4b5563",onMouseLeave:k=>k.target.style.background="#6b7280",children:"Cancel"}),a.jsx("button",{onClick:()=>we(Dt.product_id),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:k=>k.target.style.background="#dc2626",onMouseLeave:k=>k.target.style.background="#ef4444",children:"Delete Product"})]})]})}),w&&S&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>_(!1),children:a.jsxs("div",{style:{background:"#f8fafc",borderRadius:"16px",padding:"32px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onClick:k=>k.stopPropagation(),children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px",paddingBottom:"20px",borderBottom:"2px solid #f1f5f9"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[S.image_url&&a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:S.image_url,alt:S.name,style:{width:"80px",height:"80px",borderRadius:"16px",objectFit:"cover",border:"3px solid #e5e7eb",background:"#f3f4f6",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}),a.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#10b981",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:a.jsx("i",{className:"fas fa-chart-line"})})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[a.jsx("i",{className:"fas fa-analytics",style:{color:"#7d8d86",fontSize:"20px"}}),a.jsx("h2",{style:{margin:0,fontSize:"28px",fontWeight:"700",color:"#1e293b",letterSpacing:"-0.025em"},children:"Product Insights"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"4px"},children:[a.jsx("i",{className:"fas fa-box",style:{color:"#7d8d86",fontSize:"16px"}}),a.jsx("p",{style:{margin:0,fontSize:"18px",color:"#374151",fontWeight:"600"},children:S.name})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fas fa-tags",style:{color:"#9ca3af",fontSize:"14px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px",color:"#6b7280"},children:S.category}),S.sku&&a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-barcode",style:{color:"#9ca3af",fontSize:"14px",marginLeft:"16px"}}),a.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:["SKU: ",S.sku]})]})]})]})]}),a.jsx("button",{onClick:()=>_(!1),style:{width:"40px",height:"40px",borderRadius:"50%",background:"#f8fafc",border:"2px solid #e2e8f0",color:"#6b7280",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:k=>{k.currentTarget.style.background="#ef4444",k.currentTarget.style.color="white",k.currentTarget.style.borderColor="#ef4444"},onMouseLeave:k=>{k.currentTarget.style.background="#f8fafc",k.currentTarget.style.color="#6b7280",k.currentTarget.style.borderColor="#e2e8f0"},children:a.jsx("i",{className:"fas fa-times"})})]}),G?a.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[a.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",fontSize:"18px",color:"#7d8d86",background:"#f8fafc",padding:"20px 32px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[a.jsx("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"20px",color:"#3b82f6"}}),"Loading insights..."]}),a.jsx("div",{style:{fontSize:"14px",color:"#9ca3af",marginTop:"12px"},children:"Analyzing sales data and trends"})]}):R?a.jsxs("div",{children:[a.jsxs("div",{style:{marginBottom:"40px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-chart-bar",style:{color:"#7d8d86",fontSize:"20px"}}),a.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1e293b"},children:"Performance Overview"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px"},children:[a.jsxs("div",{style:{background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #93c5fd",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#3b82f6",fontSize:"16px"},children:a.jsx("i",{className:"fas fa-shopping-cart"})}),a.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e40af",marginBottom:"8px"},children:R.totalSales}),a.jsx("div",{style:{fontSize:"14px",color:"#1e40af",fontWeight:"500"},children:"Total Sales"})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #86efac",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#10b981",fontSize:"16px"},children:a.jsx("i",{className:"fas fa-euro-sign"})}),a.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#166534",marginBottom:"8px"},children:["?",R.totalRevenue.toFixed(2)]}),a.jsx("div",{style:{fontSize:"14px",color:"#166534",fontWeight:"500"},children:"Total Revenue"})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #fbbf24",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#f59e0b",fontSize:"16px"},children:a.jsx("i",{className:"fas fa-weight"})}),a.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#92400e",marginBottom:"8px"},children:R.totalQuantitySold.toFixed(1)}),a.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:"500"},children:[S.is_weighted?S.weight_unit||"kg":"Units"," Sold"]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #f9a8d4",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#ec4899",fontSize:"16px"},children:a.jsx("i",{className:"fas fa-percentage"})}),a.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#be185d",marginBottom:"8px"},children:[R.profitMargin.toFixed(1),"%"]}),a.jsx("div",{style:{fontSize:"14px",color:"#be185d",fontWeight:"500"},children:"Est. Profit Margin"})]})]})]}),R.chartData&&a.jsxs("div",{style:{marginBottom:"40px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[a.jsx("i",{className:"fas fa-chart-line",style:{color:"#7d8d86",fontSize:"20px"}}),a.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1e293b"},children:"Sales Trends & Analytics"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[a.jsxs("button",{onClick:()=>q("daily"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:ie==="daily"?"#3b82f6":"#f8fafc",color:ie==="daily"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:ie==="daily"?"0 4px 6px rgba(59, 130, 246, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[a.jsx("i",{className:"fas fa-calendar-day"}),"Daily (30 days)"]}),a.jsxs("button",{onClick:()=>q("weekly"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:ie==="weekly"?"#10b981":"#f8fafc",color:ie==="weekly"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:ie==="weekly"?"0 4px 6px rgba(16, 185, 129, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[a.jsx("i",{className:"fas fa-calendar-week"}),"Weekly (4 weeks)"]}),a.jsxs("button",{onClick:()=>q("monthly"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:ie==="monthly"?"#f59e0b":"#f8fafc",color:ie==="monthly"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:ie==="monthly"?"0 4px 6px rgba(245, 158, 11, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[a.jsx("i",{className:"fas fa-calendar-alt"}),"Monthly (6 months)"]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",minHeight:"220px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[ie==="daily"&&a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-chart-bar",style:{color:"#3b82f6",fontSize:"16px"}}),a.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Daily Sales (Last 30 Days)"})]}),a.jsx("div",{style:{display:"flex",alignItems:"end",gap:"4px",height:"150px"},children:R.chartData.daily.map((k,de)=>{const ke=Math.max(...R.chartData.daily.map(_t=>_t.sales)),dt=ke>0?k.sales/ke*120:0;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[a.jsx("div",{style:{width:"100%",height:`${dt}px`,background:k.sales>0?"#7d8d86":"#e5e7eb",borderRadius:"2px 2px 0 0",minHeight:"2px"},title:`${k.date}: ${k.sales} sales, ?${k.revenue.toFixed(2)}`}),a.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:k.day})]},de)})})]}),ie==="weekly"&&a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-chart-area",style:{color:"#10b981",fontSize:"16px"}}),a.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Weekly Sales (Last 4 Weeks)"})]}),a.jsx("div",{style:{display:"flex",alignItems:"end",gap:"8px",height:"150px"},children:R.chartData.weekly.map((k,de)=>{const ke=Math.max(...R.chartData.weekly.map(_t=>_t.sales)),dt=ke>0?k.sales/ke*120:0;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[a.jsx("div",{style:{width:"100%",height:`${dt}px`,background:k.sales>0?"#10b981":"#e5e7eb",borderRadius:"4px 4px 0 0",minHeight:"2px"},title:`${k.week}: ${k.sales} sales, ?${k.revenue.toFixed(2)}`}),a.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:k.week})]},de)})})]}),ie==="monthly"&&a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-chart-pie",style:{color:"#f59e0b",fontSize:"16px"}}),a.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Monthly Sales (Last 6 Months)"})]}),a.jsx("div",{style:{display:"flex",alignItems:"end",gap:"8px",height:"150px"},children:R.chartData.monthly.map((k,de)=>{const ke=Math.max(...R.chartData.monthly.map(_t=>_t.sales)),dt=ke>0?k.sales/ke*120:0;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[a.jsx("div",{style:{width:"100%",height:`${dt}px`,background:k.sales>0?"#f59e0b":"#e5e7eb",borderRadius:"4px 4px 0 0",minHeight:"2px"},title:`${k.month}: ${k.sales} sales, ?${k.revenue.toFixed(2)}`}),a.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:k.month.split(" ")[0]})]},de)})})]})]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",marginBottom:"32px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-info-circle",style:{color:"#7d8d86",fontSize:"20px"}}),a.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Product Information"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-barcode",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Product ID"}),a.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.product_id})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-tags",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Category"}),a.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.category})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-boxes",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Current Stock"}),a.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.stock_quantity})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-exclamation-triangle",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Reorder Level"}),a.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.reorder_level})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-euro-sign",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Price"}),a.jsxs("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:["?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-weight",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Type"}),a.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.is_weighted?"Weighted Product":"Regular Product"})]})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px",marginBottom:"32px"},children:[a.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[a.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Sales Performance"}),a.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",lineHeight:"1.6"},children:[a.jsxs("div",{style:{marginBottom:"8px"},children:[a.jsx("strong",{children:"Average sales per day:"})," ",R.averageSalesPerDay.toFixed(1)]}),a.jsxs("div",{style:{marginBottom:"8px"},children:[a.jsx("strong",{children:"Estimated profit:"})," ?",R.estimatedProfit.toFixed(2)]}),a.jsxs("div",{style:{marginBottom:"8px"},children:[a.jsx("strong",{children:"Last sold:"})," ",R.lastSoldDate?new Date(R.lastSoldDate).toLocaleDateString():"Never"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Price per unit:"})," ?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]})]})]}),a.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[a.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Top Selling Days (Last 30 Days)"}),R.topSellingDays.length>0?a.jsx("div",{style:{fontSize:"14px",color:"#7d8d86"},children:R.topSellingDays.map((k,de)=>a.jsxs("div",{style:{marginBottom:"4px"},children:[new Date(k.date).toLocaleDateString(),": ",k.count," sales"]},de))}):a.jsx("div",{style:{fontSize:"14px",color:"#7d8d86"},children:"No sales in the last 30 days"})]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-receipt",style:{color:"#7d8d86",fontSize:"20px"}}),a.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Recent Sales"})]}),R.recentSalesList.length>0?a.jsx("div",{style:{maxHeight:"300px",overflow:"auto"},children:a.jsxs("table",{style:{width:"100%",fontSize:"14px"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{borderBottom:"2px solid #e5e7eb",background:"#f9fafb"},children:[a.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fas fa-calendar",style:{fontSize:"12px",color:"#6b7280"}}),"Date"]}),a.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fas fa-hashtag",style:{fontSize:"12px",color:"#6b7280"}}),"Quantity"]}),a.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fas fa-euro-sign",style:{fontSize:"12px",color:"#6b7280"}}),"Price"]}),a.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fas fa-user",style:{fontSize:"12px",color:"#6b7280"}}),"Customer"]}),a.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fas fa-user-tie",style:{fontSize:"12px",color:"#6b7280"}}),"Cashier"]})]})}),a.jsx("tbody",{children:R.recentSalesList.map((k,de)=>a.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[a.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:[k.date," ",k.time]}),a.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:[k.quantity," ",k.unit]}),a.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:["?",k.price.toFixed(2)]}),a.jsx("td",{style:{padding:"8px 0",color:"#3e3f29"},children:k.customer}),a.jsx("td",{style:{padding:"8px 0",color:"#3e3f29"},children:k.cashier})]},de))})]})}):a.jsx("div",{style:{fontSize:"14px",color:"#7d8d86",textAlign:"center",padding:"20px"},children:"No sales recorded for this product"})]})]}):a.jsxs("div",{children:[a.jsxs("div",{style:{textAlign:"center",padding:"40px",marginBottom:"32px",background:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)",borderRadius:"16px",border:"1px solid #fecaca"},children:[a.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",fontSize:"20px",color:"#dc2626",marginBottom:"12px",fontWeight:"600"},children:[a.jsx("i",{className:"fas fa-chart-line",style:{fontSize:"24px"}}),"No Sales Data Available"]}),a.jsx("div",{style:{fontSize:"14px",color:"#991b1b"},children:"This product hasn't been sold yet"})]}),a.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[a.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Product Information"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",fontSize:"14px",color:"#7d8d86"},children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Product ID:"})," ",S.product_id]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Category:"})," ",S.category]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Current Stock:"})," ",S.stock_quantity]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Reorder Level:"})," ",S.reorder_level]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Price:"})," ?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Type:"})," ",S.is_weighted?"Weighted Product":"Regular Product"]})]})]})]})]})}),a.jsx(jn,{})]})};let ho=null,hv=!1;const Qk=e=>{hv=e},Jk=({onBarcodeScanned:e,debounceMs:t=100,minLength:r=8,maxLength:s=20,isActive:o=!0,context:c="default"})=>{const[d,f]=j.useState(!1),[h,p]=j.useState(""),[x,y]=j.useState(0),v=j.useCallback(_=>{if(!ho||ho.context!==c||hv&&c!=="product-modal")return;const S=Date.now();if(S-x>t*3&&p(""),y(S),_.key==="Enter"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation();const N=h.trim();if(console.log("🔍 Barcode scanner detected Enter, input:",N,"length:",N.length,"min:",r,"max:",s),N.length>=r&&N.length<=s){console.log("✅ Barcode valid, calling onBarcodeScanned"),e(N),p("");return}p("");return}_.key.length===1&&p(N=>{const R=N+_.key;return console.log("🔍 Barcode scanner input:",R),R}),_.key==="Tab"||_.key==="Shift"||_.key==="Control"||_.key},[h,x,t,r,s,e,c]),b=j.useCallback(()=>{f(!0),p(""),y(Date.now()),ho={context:c,onBarcodeScanned:e}},[c,e]),w=j.useCallback(()=>{f(!1),p(""),ho&&ho.context===c&&(ho=null)},[c]);return j.useEffect(()=>{if(d&&o){document.addEventListener("keydown",v,!0);const _=S=>{if(S.target&&S.target.tagName==="INPUT"){const N=S.target;N.value&&N.value.length>=r&&N.value.length<=s&&(console.log("🔍 Fallback barcode detected:",N.value),e(N.value),N.value="")}};return document.addEventListener("input",_,!0),()=>{document.removeEventListener("keydown",v,!0),document.removeEventListener("input",_,!0)}}},[d,o,v,r,s,e]),{isListening:d,startListening:b,stopListening:w,currentInput:h}},j1=[{id:"pNInz6obpgDQGcFmaJgB",name:"Adam (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"EXAVITQu4vr4xnSDxMaL",name:"Bella (Warm, Friendly)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Josh (Professional, Clear)",type:"standard",costPer1K:.18},{id:"AZnzlk1XvdvUeBnXmlld",name:"Domi (Confident, Energetic)",type:"standard",costPer1K:.18},{id:"ErXwobaYiN019PkySvjV",name:"Elli (Natural, Conversational)",type:"standard",costPer1K:.18},{id:"MF3mGyEYCl7XYWbV9V6O",name:"Rachel (Professional, Warm)",type:"standard",costPer1K:.18},{id:"TxGEqnHWrfWFTfGW9XjX",name:"Drew (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Clyde (Friendly, Approachable)",type:"standard",costPer1K:.18}],E1=[{id:"alloy",name:"Alloy (Neutral, Balanced)",type:"standard",costPer1K:.015},{id:"echo",name:"Echo (Clear, Professional)",type:"standard",costPer1K:.015},{id:"fable",name:"Fable (Warm, Storytelling)",type:"standard",costPer1K:.015},{id:"onyx",name:"Onyx (Deep, Authoritative)",type:"standard",costPer1K:.015},{id:"nova",name:"Nova (Friendly, Energetic)",type:"standard",costPer1K:.015},{id:"shimmer",name:"Shimmer (Soft, Gentle)",type:"standard",costPer1K:.015}];class Zk{settings;usage;isInitialized=!1;constructor(){this.settings=this.loadSettings(),this.usage=this.loadUsage(),this.initializeUsage()}loadSettings(){const t="sk_337a097ef281682961b7c3db26217470f085fd565c3d711d",r="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";console.log("Environment variables loaded:"),console.log("VITE_ELEVENLABS_KEY:","Present"),console.log("VITE_OPENAI_API_KEY:","Present");const s={enabled:!0,useElevenLabs:!0,selectedVoice:"HobRzuqtLputbKAXOdTj",apiKey:t,dailyLimit:5e3,useOpenAI:!0,openaiApiKey:r,openaiVoice:"alloy"};try{const o=localStorage.getItem("tts-settings");if(o){const c=JSON.parse(o),d={...s,...c};return console.log("Loaded TTS settings from localStorage:",d),d}return console.log("No saved TTS settings, using defaults:",s),s}catch(o){return console.error("Error loading TTS settings:",o),s}}loadUsage(){const t={totalCharacters:0,totalCost:0,dailyUsage:0,dailyCost:0,lastResetDate:new Date().toISOString().split("T")[0]};try{const r=localStorage.getItem("tts-usage");return r?{...t,...JSON.parse(r)}:t}catch{return t}}saveSettings(){try{localStorage.setItem("tts-settings",JSON.stringify(this.settings))}catch(t){console.error("Failed to save TTS settings:",t)}}saveUsage(){try{localStorage.setItem("tts-usage",JSON.stringify(this.usage))}catch(t){console.error("Failed to save TTS usage:",t)}}initializeUsage(){const t=new Date().toISOString().split("T")[0];this.usage.lastResetDate!==t&&(this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=t,this.saveUsage())}getSettings(){return{...this.settings}}getUsage(){return this.initializeUsage(),{...this.usage}}updateSettings(t){this.settings={...this.settings,...t},this.saveSettings()}async speak(t){if(console.log("TTS Service speak called with:",t),console.log("TTS Settings:",this.settings),console.log("useElevenLabs:",this.settings.useElevenLabs),console.log("useOpenAI:",this.settings.useOpenAI),console.log("openaiApiKey present:",!!this.settings.openaiApiKey),console.log("openaiApiKey length:",this.settings.openaiApiKey?.length||0),!this.settings.enabled)return console.log("TTS not enabled"),!1;const r=t.length,s=this.calculateCost(r);if(this.usage.dailyUsage+r>this.settings.dailyLimit&&console.log("Daily limit exceeded, trying OpenAI fallback"),this.settings.useElevenLabs&&this.settings.apiKey&&this.usage.dailyUsage+r<=this.settings.dailyLimit){if(console.log("Trying ElevenLabs TTS with voice:",this.settings.selectedVoice),await this.speakWithElevenLabs(t))return this.updateUsage(r,s),!0;console.log("ElevenLabs failed, trying OpenAI fallback...")}if(this.settings.useOpenAI&&this.settings.openaiApiKey){console.log("Trying OpenAI TTS with voice:",this.settings.openaiVoice);const o=this.calculateOpenAICost(r);if(await this.speakWithOpenAI(t))return this.updateUsage(r,o),!0;console.log("OpenAI TTS failed")}return console.log("No TTS method available"),!1}async speakWithDelay(t,r=2e3){return new Promise(s=>{setTimeout(async()=>{const o=await this.speak(t);s(o)},r)})}async speakWithElevenLabs(t){try{console.log("Making ElevenLabs API call..."),console.log("Voice ID:",this.settings.selectedVoice),console.log("API Key:",this.settings.apiKey.substring(0,10)+"...");const r=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${this.settings.selectedVoice}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":this.settings.apiKey},body:JSON.stringify({text:t,model_id:"eleven_monolingual_v1",voice_settings:{stability:.5,similarity_boost:.5}})});if(console.log("ElevenLabs response status:",r.status),!r.ok){const d=await r.text();throw console.error("ElevenLabs API error response:",d),new Error(`ElevenLabs API error: ${r.status} - ${d}`)}const s=await r.blob();console.log("Audio blob received, size:",s.size);const o=URL.createObjectURL(s),c=new Audio(o);return new Promise(d=>{c.onended=()=>{console.log("ElevenLabs audio playback ended"),URL.revokeObjectURL(o),d(!0)},c.onerror=f=>{console.error("ElevenLabs audio playback error:",f),URL.revokeObjectURL(o),d(!1)},c.onloadstart=()=>console.log("ElevenLabs audio started loading"),c.oncanplay=()=>console.log("ElevenLabs audio can play"),console.log("Starting ElevenLabs audio playback..."),c.play()})}catch(r){return console.error("ElevenLabs TTS error:",r),!1}}async speakWithOpenAI(t){try{console.log("Making OpenAI TTS API call..."),console.log("Voice:",this.settings.openaiVoice),console.log("API Key:",this.settings.openaiApiKey.substring(0,10)+"...");const r=await fetch("https://api.openai.com/v1/audio/speech",{method:"POST",headers:{Authorization:`Bearer ${this.settings.openaiApiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"tts-1",input:t,voice:this.settings.openaiVoice,response_format:"mp3"})});if(console.log("OpenAI response status:",r.status),!r.ok){const d=await r.text();throw console.error("OpenAI API error response:",d),new Error(`OpenAI API error: ${r.status} - ${d}`)}const s=await r.blob();console.log("OpenAI audio blob received, size:",s.size);const o=URL.createObjectURL(s),c=new Audio(o);return new Promise(d=>{c.onended=()=>{console.log("OpenAI audio playback ended"),URL.revokeObjectURL(o),d(!0)},c.onerror=f=>{console.error("OpenAI audio playback error:",f),URL.revokeObjectURL(o),d(!1)},c.onloadstart=()=>console.log("OpenAI audio started loading"),c.oncanplay=()=>console.log("OpenAI audio can play"),console.log("Starting OpenAI audio playback..."),c.play()})}catch(r){return console.error("OpenAI TTS error:",r),!1}}calculateCost(t){const r=j1.find(s=>s.id===this.settings.selectedVoice);return r?t/1e3*r.costPer1K:0}calculateOpenAICost(t){const r=E1.find(s=>s.id===this.settings.openaiVoice);return r?t/1e3*r.costPer1K:0}updateUsage(t,r){this.usage.totalCharacters+=t,this.usage.totalCost+=r,this.usage.dailyUsage+=t,this.usage.dailyCost+=r,this.saveUsage()}stop(){console.log("TTS service stop called")}getAvailableVoices(){return j1}getAvailableOpenAIVoices(){return E1}resetDailyUsage(){this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=new Date().toISOString().split("T")[0],this.saveUsage()}refreshSettings(){console.log("Refreshing TTS settings from environment..."),this.settings=this.loadSettings(),console.log("New settings loaded:",this.settings)}resetToDefaults(){console.log("Clearing all TTS settings and reloading from environment...");try{localStorage.removeItem("tts-settings"),console.log("Cleared localStorage settings")}catch(t){console.error("Error clearing settings:",t)}this.settings=this.loadSettings(),console.log("Reset to defaults:",this.settings)}async testOpenAI(){if(console.log("Testing OpenAI TTS connection..."),console.log("OpenAI API Key present:",!!this.settings.openaiApiKey),console.log("OpenAI Voice:",this.settings.openaiVoice),!this.settings.openaiApiKey)return console.error("No OpenAI API key found"),!1;try{const t=await this.speakWithOpenAI("Test message");return console.log("OpenAI test result:",t),t}catch(t){return console.error("OpenAI test failed:",t),!1}}}const Br=new Zk,jd=({children:e,onClick:t,type:r="button",disabled:s=!1,className:o="",style:c={}})=>a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        @property --rotation {
          syntax: "<angle>";
          inherits: false;
          initial-value: 0deg;
        }

        .retro-button {
          --inset: 15px;
          --rad: 18px;
          /* background: rgb(255 255 255 / 0.3); */
          /* padding: var(--inset); */
          /* border-radius: calc(var(--rad) + var(--inset)); */
          border: none;
          position: relative;
          /* box-shadow: 0 4px 10px rgb(0 0 0 / 0.1); */
          cursor: pointer;
          font-family: "Poppins", sans-serif;
          font-optical-sizing: auto;
          font-weight: 600;
          font-style: normal;
        }

        /* .retro-button:before {
          --inset: -15px;
          content: "";
          display: block;
          background: conic-gradient(from var(--rotation), purple, blue, green, yellow, orange, red);
          filter: blur(20px);
          opacity: 1;
          position: absolute;
          inset: 10px;
          border-radius: calc(var(--rad) + calc(var(--inset) * -1));
          z-index: -2;
          animation: rotate 5s linear infinite;
        } */

        /* .retro-button:after {
          --inset: -15px;
          content: "";
          display: block;
          background: linear-gradient(
            to bottom,
            rgb(255 255 255 / 0.5) 0%,
            rgb(255 255 255 / 0.5) 2px,
            rgb(100 100 100 / 0.1) 30%,
            rgb(100 100 100 / 0.1) 70%,
            rgb(255 255 255 / 0.5) 99%,
            rgb(255 255 255 / 0.5) 100%
          );
          position: absolute;
          inset: -1.5px;
          border-radius: calc(var(--rad) + calc(var(--inset) * -1));
          z-index: -1;
        } */

        /* .retro-button:active:before {
          animation-play-state: paused;
          opacity: 1;
          scale: 0.9;
          filter: blur(10px);
        } */

        .retro-button:active .retro-cap {
          scale: 0.93;
        }

        .retro-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .retro-button:disabled:before {
          animation-play-state: paused;
        }

        .retro-cap {
          display: inline-block;
          background: linear-gradient(to bottom, #6b7280, #4b5563);
          border-radius: var(--rad);
          font-size: 16px;
          color: #fff;
          padding: 12px 20px;
          border: none;
          border-top: #9ca3af solid 1px;
          border-bottom: #374151 solid 1px;
          box-shadow: 0 8px 10px rgb(0 0 0 / 0.3);
          position: relative;
          transition: scale 0.1s ease-in-out;
        }

        .retro-text {
          border-radius: 50px;
          background: linear-gradient(to bottom, #4b5563, #6b7280);
          padding: 8px 20px;
          display: block;
        }

        @keyframes rotate {
          to {
            --rotation: 360deg;
          }
        }
      `}),a.jsx("button",{className:`retro-button ${o}`,onClick:t,type:r,disabled:s,style:c,children:a.jsx("span",{className:"retro-cap",children:a.jsx("span",{className:"retro-text",children:e})})})]}),Rl=()=>{const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0"),d=String(e.getSeconds()).padStart(2,"0");return`${t}-${r}-${s} ${o}:${c}:${d}`},k1=["Order confirmed! Your jollof rice dreams are one step closer.","Thanks for shopping! Even suya is jealous of your taste.","Your order is secured tighter than plantain at a party.","Order complete! Somewhere, egusi soup just smiled at you.","Confirmed! Your basket was blessed by the spirit of fufu.","You did it! May your order arrive faster than puff-puff disappears.","Order locked! Your kitchen is about to smell like victory.","Thanks for shopping! Even aunties will approve of this order.","Your order is in! We'll protect it like Nigerians protect their jollof recipe.","Success! Your food is coming with more flavor than a pepper soup challenge.","Confirmed — your taste is hotter than shito pepper.","Order complete! Don't worry, we didn't forget the Maggi cubes.","Transaction approved! Time to prepare for a feast fit for ancestors.","Done! May your meals be as sweet as ripe plantain.","Your order is confirmed — better hide it before the neighbors smell it!"],C1=async e=>{if(e.length===0){await Br.speak("No items in order yet.");return}let t=`Order contains ${e.length} item${e.length===1?"":"s"}. `,r=0;e.forEach((s,o)=>{const c=s.product?.name||s.sideBusinessItem?.name||"Unknown Item",d=s.quantity;let f=0;s.customPrice?f=s.customPrice:s.calculatedPrice?f=s.calculatedPrice/d:s.product?.price?f=s.product.price:s.sideBusinessItem?.price&&(f=s.sideBusinessItem.price);let h=0;s.weight&&s.calculatedPrice?(h=s.calculatedPrice,t+=`Item ${o+1}: ${c}, ${s.weight} units at €${s.product?.price_per_unit?.toFixed(2)||"0.00"} per unit, `):(h=f*d,t+=`Item ${o+1}: ${c}, quantity ${d}, €${f.toFixed(2)} each, `),r+=h;const p=[`making this €${r.toFixed(2)}. `,`total so far €${r.toFixed(2)}. `,`€${r.toFixed(2)} total. `,`running total €${r.toFixed(2)}. `,`€${r.toFixed(2)}. `,`now at €${r.toFixed(2)}. `],x=p[Math.floor(Math.random()*p.length)];t+=x}),await Br.speak(t),setTimeout(async()=>{const s=k1[Math.floor(Math.random()*k1.length)];await Br.speak(s)},500)},eC=async e=>{const t=[`Your total is €${e.toFixed(2)}. Time to feast!`,`Total: €${e.toFixed(2)}. Your taste buds are about to dance!`,`€${e.toFixed(2)} total. May your meals be blessed!`,`Order total: €${e.toFixed(2)}. Even jollof rice approves!`],r=t[Math.floor(Math.random()*t.length)];await Br.speak(r)},Oh=async(e,t)=>{await Br.speak(`${e} added to order for €${t.toFixed(2)}.`)},tC=()=>{const{user:e}=Sn(),{businessId:t,businessLoading:r}=au(),[s]=Ry(),o=Cs(),[c,d]=j.useState([]),[f,h]=j.useState([]),[p,x]=j.useState([]),[y,v]=j.useState([]),[b,w]=j.useState([]),[_,S]=j.useState("All"),[N,R]=j.useState(""),[I,G]=j.useState([]),[Z,ie]=j.useState([]),[q,P]=j.useState(!1),[te,ue]=j.useState(!1),[X,fe]=j.useState({items:[],subtotal:0,tax:0,discount:0,total:0}),[J,Q]=j.useState(""),[oe,re]=j.useState(""),[ye,le]=j.useState(!0),[Ae,B]=j.useState(!1),[K,E]=j.useState("cash"),[L,z]=j.useState(""),[Y,me]=j.useState(0),[Me,He]=j.useState(""),[Ce,ne]=j.useState(!1),[Pe,$e]=j.useState(!1),[rt,V]=j.useState(null),[Ne,st]=j.useState(""),[Re,ht]=j.useState(!1),[xt,Dt]=j.useState(null),[bt,Ie]=j.useState(""),[nt,vt]=j.useState(null),[er,br]=j.useState(!1),[Pt,ce]=j.useState(""),[Ge,gt]=j.useState(""),[It,lr]=j.useState(""),[Cr,wr]=j.useState([]),[,nr]=j.useState(Br.getSettings()),[Rr,$t]=j.useState(!1),[or,se]=j.useState(!1),[Ee,mt]=j.useState("idle"),[Rt,sr]=j.useState(""),[at,At]=j.useState(!1),[Ot,wn]=j.useState(""),[Er,Tn]=j.useState(0),[Yt,Nt]=j.useState(""),[gr,Wn]=j.useState(null),[ps,qn]=j.useState(null),[A,U]=j.useState(!1);j.useEffect(()=>{if(t==null){d([]),h([]),ie([]),w(["All"]),wr([]),qn(null),Wn(null),U(!1);return}M(_,N),F();const C=s.get("transaction");C&&(Wn(C),U(!0),W(C))},[s,t,r,_,N]),j.useEffect(()=>{const C=ge=>{ge.key==="Enter"&&ge.ctrlKey&&X.items.length>0&&(ge.preventDefault(),B(!0)),ge.key==="Escape"&&(R(""),P(!1))};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[X.items]),j.useEffect(()=>{be()},[c,f,_,N,Z]),j.useEffect(()=>{Z.length>0&&p.length===0&&x(Z)},[Z,p.length]),j.useEffect(()=>{Se()},[X.items]),j.useEffect(()=>{const C=parseFloat(L)||0,ge=at?parseFloat(Ot)||0:X.total,Xe=C-ge;me(Xe>0?Xe:0)},[L,X.total,at,Ot]),j.useEffect(()=>{if(at){const C=parseFloat(Ot)||0,ge=Math.max(0,X.total-C);Tn(ge)}else Tn(0)},[at,Ot,X.total]),j.useEffect(()=>{z(at&&Ot||X.total.toString())},[X.total,at,Ot]);const M=async(C,ge)=>{if(t==null){d([]),h([]),ie([]),w(["All"]),le(!1),ue(!1);return}try{le(!0);let Xe=Oe.from("products").select("*").eq("business_id",t).order("sales_count",{ascending:!1}).limit(50);if(C&&C!=="All"&&(Xe=Xe.eq("category",C)),ge&&ge.trim()){const In=ge.trim();Xe=Xe.or(`name.ilike.%${In}%,category.ilike.%${In}%,description.ilike.%${In}%,sku.ilike.%${In}%`)}const{data:Je,error:Ye}=await Xe;if(Ye)throw Ye;const{data:Qe,error:ct}=await Oe.from("side_business_items").select(`
          *,
          side_businesses (name, business_type)
        `).eq("parent_shop_id",t).order("name");if(ct)throw ct;const ft=Je||[],Zt=Qe||[];d(ft),h(Zt),ie(ft);const Mt=ft.map(In=>In.category).filter(Boolean),Wt=Zt.map(In=>In.side_businesses?.name).filter(Boolean),Pr=["All",...new Set([...Mt,...Wt])];w(Pr)}catch{}finally{le(!1),ue(!1)}},F=async()=>{if(t==null){wr([]);return}try{const{data:C,error:ge}=await Oe.from("side_businesses").select("business_id, name").eq("business_type","service").eq("parent_shop_id",t).order("name");if(ge)throw ge;wr(C||[])}catch(C){console.error("Error fetching service businesses:",C),wr([])}},W=async C=>{if(t!=null)try{const ge=parseInt(C.replace("TXN-","")),{data:Xe,error:Je}=await Oe.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",ge).eq("business_id",t).single();if(Je||!Xe)return;qn(Xe);const{data:Ye,error:Qe}=await Oe.from("sale_items").select(`
          *,
          products (
            name,
            category,
            price,
            stock_quantity,
            image_url,
            is_weighted,
            weight_unit,
            price_per_unit
          )
        `).eq("sale_id",ge);if(Qe)return;const ct=(Ye||[]).map(Wt=>{const In={product:{product_id:Wt.product_id.toString(),name:Wt.products?.name||"Unknown Product",price:Wt.price_each,category:Wt.products?.category||"Unknown",stock_quantity:Wt.products?.stock_quantity||0,image_url:Wt.products?.image_url,is_weighted:Wt.products?.is_weighted||!1,weight_unit:Wt.products?.weight_unit,price_per_unit:Wt.products?.price_per_unit},quantity:Wt.quantity};return Wt.products?.is_weighted&&Wt.weight&&Wt.calculated_price&&(In.weight=Wt.weight,In.calculatedPrice=Wt.calculated_price),In}),ft=ct.reduce((Wt,Pr)=>Pr.weight&&Pr.calculatedPrice?Wt+Pr.calculatedPrice:Wt+Pr.product.price*Pr.quantity,0),Zt=ft*.1,Mt=ft+Zt;fe({items:ct,subtotal:ft,tax:Zt,discount:0,total:Mt}),Xe.customers?.name&&Q(Xe.customers.name)}catch{}},H=C=>{if(C.length<2){G([]),P(!1);return}const ge=C.toLowerCase().trim(),Xe=c.filter(Qe=>{const ct=Qe.name.toLowerCase().includes(ge),ft=Qe.category?.toLowerCase().includes(ge),Zt=Qe.description?.toLowerCase().includes(ge),Mt=Qe.sku?.toLowerCase().includes(ge);return ct||ft||Zt||Mt}).slice(0,3),Je=f.filter(Qe=>{const ct=Qe.name.toLowerCase().includes(ge),ft=Qe.side_businesses?.name.toLowerCase().includes(ge);return ct||ft}).slice(0,2),Ye=[...Xe,...Je].slice(0,5);G(Ye),P(Ye.length>0)},be=()=>{let C=Z;if(_!=="All"&&(C=C.filter(Xe=>Xe.category===_)),N){const Xe=N.toLowerCase().trim();C=C.filter(Je=>Je.name.toLowerCase().includes(Xe)||Je.category?.toLowerCase().includes(Xe)||Je.description?.toLowerCase().includes(Xe)||Je.sku?.toLowerCase().includes(Xe))}x(C);let ge=f;_!=="All"&&(ge=ge.filter(Xe=>Xe.side_businesses?.name===_)),N&&(ge=ge.filter(Xe=>Xe.name.toLowerCase().includes(N.toLowerCase()))),v(ge)},De=C=>{R(C),H(C)},pe=C=>{R(C.name),P(!1),G([]),"product_id"in C?we(C):Ke(C)},Se=()=>{const C=X.items.reduce((Ye,Qe)=>{if(Qe.product)return Qe.weight&&Qe.calculatedPrice?Ye+Qe.calculatedPrice:Ye+Qe.product.price*Qe.quantity;if(Qe.sideBusinessItem){const ct=Qe.customPrice||Qe.sideBusinessItem.price||0;return Ye+ct*Qe.quantity}return Ye},0),ge=0,Xe=0,Je=C-Xe;fe(Ye=>({...Ye,subtotal:C,tax:ge,discount:Xe,total:Je}))},we=C=>{if(C.is_weighted&&C.price_per_unit&&C.weight_unit){Dt(C),Ie(""),ht(!0);return}fe(ge=>ge.items.find(Je=>Je.product?.product_id===C.product_id&&!Je.weight)?{...ge,items:ge.items.map(Je=>Je.product?.product_id===C.product_id&&!Je.weight?{...Je,quantity:Je.quantity+1}:Je)}:{...ge,items:[...ge.items,{product:C,quantity:1}]}),Oh(C.name,C.price)},We=(C,ge)=>{const Xe=ge*(C.price_per_unit||0);fe(nt?Je=>({...Je,items:Je.items.map(Ye=>Ye.product?.product_id===nt&&Ye.weight?{...Ye,weight:ge,calculatedPrice:Xe}:Ye)}):Je=>({...Je,items:[...Je.items,{product:C,quantity:1,weight:ge,calculatedPrice:Xe}]})),ht(!1),Dt(null),vt(null),Ie("")},Ke=C=>{if(!C.price)V(C),st(""),$e(!0);else{fe(Je=>Je.items.find(Qe=>Qe.sideBusinessItem?.item_id===C.item_id)?{...Je,items:Je.items.map(Qe=>Qe.sideBusinessItem?.item_id===C.item_id?{...Qe,quantity:Qe.quantity+1}:Qe)}:{...Je,items:[...Je.items,{sideBusinessItem:C,quantity:1}]});const ge=C.name,Xe=C.price||0;Oh(ge,Xe)}},it=()=>{if(!rt)return;const C=parseFloat(Ne);if(isNaN(C)||C<0){alert("Please enter a valid price");return}fe(ge=>ge.items.find(Je=>Je.sideBusinessItem?.item_id===rt.item_id&&Je.customPrice===C)?{...ge,items:ge.items.map(Je=>Je.sideBusinessItem?.item_id===rt.item_id&&Je.customPrice===C?{...Je,quantity:Je.quantity+1}:Je)}:{...ge,items:[...ge.items,{sideBusinessItem:rt,quantity:1,customPrice:C}]}),$e(!1),V(null),st("")},Ve=async()=>{if(t==null){alert("Please select a business before creating a quick service item");return}if(!Pt.trim()||!Ge||!It){alert("Please fill in all fields");return}const C=parseFloat(Ge);if(isNaN(C)||C<0){alert("Please enter a valid price");return}try{const ge={item_id:Date.now(),business_id:parseInt(It),name:Pt.trim(),price:C,stock_qty:null,side_businesses:{name:Cr.find(Xe=>Xe.business_id.toString()===It)?.name||"Service",business_type:"service"}};fe(Xe=>({...Xe,items:[...Xe.items,{sideBusinessItem:ge,quantity:1,customPrice:C}]})),Oh(Pt.trim(),C),ce(""),gt(""),lr(""),br(!1)}catch(ge){console.error("Error creating quick service:",ge),alert("Failed to create service. Please try again.")}},tt=(C,ge)=>{if(ge<=0){lt(C);return}fe(Xe=>({...Xe,items:Xe.items.map(Je=>Je.product?.product_id===C?{...Je,quantity:ge}:Je.sideBusinessItem?.item_id.toString()===C?{...Je,quantity:ge}:Je)}))},St=(C,ge)=>{if(ge<=0){lt(C);return}fe(Xe=>({...Xe,items:Xe.items.map(Je=>{if(Je.product?.product_id===C&&Je.weight){const Ye=ge*(Je.product.price_per_unit||0);return{...Je,weight:ge,calculatedPrice:Ye}}return Je})}))},Kt=C=>typeof C=="string"?C.trim().toLowerCase():"",Qt=C=>{const ge=Kt(C);return c.find(Xe=>Kt(Xe.barcode)===ge)||null},Jt=(C,ge=0)=>{if(C==null||C=="")return ge;if(typeof C=="number")return Number.isFinite(C)?C:ge;const Xe=parseFloat(String(C));return Number.isFinite(Xe)?Xe:ge},jn=(C,ge=0)=>{if(C==null||C=="")return ge;if(typeof C=="number")return Number.isFinite(C)?Math.trunc(C):ge;const Xe=parseInt(String(C),10);return Number.isFinite(Xe)?Xe:ge},k=C=>({...C,price:Jt(C.price),stock_quantity:jn(C.stock_quantity),reorder_level:jn(C.reorder_level),tax_rate:Jt(C.tax_rate),is_weighted:!!C.is_weighted,price_per_unit:C.price_per_unit==null?null:Jt(C.price_per_unit),total_revenue:C.total_revenue==null?void 0:Jt(C.total_revenue),sales_count:C.sales_count==null?void 0:jn(C.sales_count),last_updated:C.last_updated,weight_unit:C.weight_unit,description:C.description,sku:C.sku,barcode:typeof C.barcode=="string"?C.barcode.trim():C.barcode,supplier_info:C.supplier_info,image_url:C.image_url}),de=async C=>{console.log("🔍 Barcode scanned:",C);let ge=Qt(C);if(console.log("🔍 Local product found:",ge),!ge){if(t==null){mt("not_found"),sr(C),setTimeout(()=>{mt("idle")},3e3);return}const Xe=Kt(C);console.log("🔍 Searching database for barcode:",Xe,"business_id:",t);const{data:Je,error:Ye}=await Oe.from("products").select("*").eq("business_id",t).ilike("barcode",Xe).limit(1);console.log("🔍 Database query result:",Je,"error:",Ye),Ye&&console.error("Barcode lookup failed:",Ye);const Qe=Je&&Je.length>0?Je[0]:null;if(Qe){const ct=k(Qe);ge=ct,d(ft=>ft.some(Mt=>Mt.product_id===ct.product_id)?ft:[ct,...ft].slice(0,50)),ie(ft=>ft.some(Mt=>Mt.product_id===ct.product_id)?ft:[ct,...ft].slice(0,50))}}ge?(console.log("✅ Adding product to order:",ge.name),we(ge),mt("scanned"),sr(C),setTimeout(()=>{mt("idle")},2e3)):(console.log("❌ Product not found for barcode:",C),mt("not_found"),sr(C),setTimeout(()=>{mt("idle")},3e3))},ke=()=>{or?(_t(),se(!1),mt("idle")):(dt(),se(!0),mt("listening"))},{startListening:dt,stopListening:_t}=Jk({onBarcodeScanned:de,debounceMs:30,minLength:8,maxLength:20,isActive:or,context:"sales-page"});j.useEffect(()=>{Qk(Pe||Re||er||Ae)},[Pe,Re,er,Ae]),j.useEffect(()=>{if(!or)return;const C=ge=>{if(ge.target&&ge.target.tagName==="INPUT"){const Xe=ge.target,Je=Xe.value.trim();Je.length>=8&&Je.length<=20&&/^[A-Za-z0-9]+$/.test(Je)&&(console.log("🔍 Global barcode fallback detected:",Je),de(Je),Xe.value="")}};return document.addEventListener("input",C,!0),()=>{document.removeEventListener("input",C,!0)}},[or,de]);const wt=C=>{C.product&&C.weight&&(Dt(C.product),Ie(C.weight.toString()),ht(!0),vt(C.product.product_id))},lt=C=>{fe(ge=>({...ge,items:ge.items.filter(Xe=>Xe.product?.product_id!==C&&Xe.sideBusinessItem?.item_id.toString()!==C)}))},jt=()=>{if(window.confirm("Are you sure you want to reset the current transaction? This will clear all items from the order.")){fe({items:[],subtotal:0,tax:0,discount:0,total:0}),Q(""),re(""),E("cash"),z(""),me(0),He("");const C=document.createElement("div");C.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,C.textContent="Transaction reset successfully!",document.body.appendChild(C),setTimeout(()=>{document.body.removeChild(C)},3e3)}},Et=()=>{const C=`RCP-${Date.now()}`,ge=new Date,Xe=ge.toLocaleDateString("en-IE"),Je=ge.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"});return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Receipt - ${C}</title>
        <style>
          body { 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            line-height: 1.4; 
            margin: 0; 
            padding: 10px; 
            background: white;
            color: black;
          }
          .receipt { 
            width: 100%; 
            max-width: 400px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            padding: 20px; 
            background: white;
          }
          .header { 
            text-align: center; 
            margin-bottom: 15px; 
            border-bottom: 1px dashed #333; 
            padding-bottom: 10px; 
          }
          .logo-fallback {
            display: none;
            background: #333;
            color: white;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
          }
          .business-info { 
            font-size: 10px; 
            margin: 8px 0; 
          }
          .divider { 
            border-top: 1px dashed #333; 
            margin: 10px 0; 
          }
          .item-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 3px 0; 
          }
          .total-row { 
            font-weight: bold; 
            border-top: 1px solid #333; 
            padding-top: 5px; 
            margin-top: 8px; 
          }
          .payment-info { 
            margin: 10px 0; 
          }
          .notes-section {
            margin: 10px 0;
            padding: 8px;
            background: #f5f5f5;
            border-radius: 4px;
          }
          .footer { 
            text-align: center; 
            margin-top: 15px; 
            font-size: 10px; 
            border-top: 1px dashed #333; 
            padding-top: 10px; 
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            <img src="/retailpos/images/backgrounds/logo1.png" alt="LandM Store" style="max-width: 80px; height: auto; display: block; margin: 0 auto 10px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <div class="logo-fallback" style="display: none; font-size: 24px; font-weight: bold; margin-bottom: 8px; color: #1a1a1a;">LandM Store</div>
            <div class="business-info">
              <div>Unit 2 Glenmore Park</div>
              <div>Dundalk, Co. Louth</div>
              <div>087 797 0412</div>
            </div>
          </div>
          
          <div class="divider"></div>
          
          <div class="item-row">
            <span>Date: ${Xe}</span>
            <span>Time: ${Je}</span>
          </div>
          <div class="item-row">
            <span>Receipt: ${C}</span>
            <span>Cashier: ${e?.username||"System"}</span>
          </div>
          
          <div class="divider"></div>
          
          ${X.items.map(Ye=>{const Qe=Ye.product?.name||Ye.sideBusinessItem?.name||"Unknown Item",ct=Ye.product?.price||Ye.customPrice||Ye.sideBusinessItem?.price||0;return`
            <div class="item-row">
              <span>${Qe} x${Ye.quantity}</span>
              <span>€${(ct*Ye.quantity).toFixed(2)}</span>
            </div>
          `}).join("")}
          
          <div class="divider"></div>
          
          <div class="item-row total-row">
            <span>SUBTOTAL:</span>
            <span>€${X.subtotal.toFixed(2)}</span>
          </div>
          <div class="item-row total-row">
            <span>${at?"ORDER TOTAL:":"GRAND TOTAL:"}</span>
            <span>€${X.total.toFixed(2)}</span>
          </div>
          
          ${at?`
          <div class="divider"></div>
          <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 4px; padding: 8px; margin: 10px 0;">
            <div style="font-weight: bold; margin-bottom: 5px; color: #92400e;">
              <i class="fa-solid fa-credit-card" style="margin-right: 5px;"></i>
              PARTIAL PAYMENT
            </div>
            <div class="item-row">
              <span>Amount Paid Today:</span>
              <span style="color: #059669; font-weight: bold;">€${(parseFloat(Ot)||0).toFixed(2)}</span>
            </div>
            <div class="item-row">
              <span>Remaining Balance:</span>
              <span style="color: #dc2626; font-weight: bold;">€${Er.toFixed(2)}</span>
            </div>
            ${Yt?`
            <div style="margin-top: 5px; font-size: 10px; color: #92400e;">
              Note: ${Yt}
            </div>
            `:""}
          </div>
          `:""}
          
          <div class="payment-info">
            <div class="item-row">
              <span>Payment Method:</span>
              <span>${K.toUpperCase()}</span>
            </div>
            ${K==="cash"?`
            <div class="item-row">
              <span>Amount Received:</span>
              <span>€${parseFloat(L).toFixed(2)}</span>
            </div>
            <div class="item-row">
              <span>Change Given:</span>
              <span>€${Y.toFixed(2)}</span>
            </div>
            `:K==="card"?`
            <div class="item-row">
              <span>Card: ****1234</span>
              <span>Approval: ${Math.floor(Math.random()*1e4)}</span>
            </div>
            `:""}
          </div>
          
          ${Me||at&&Yt?`
          <div class="divider"></div>
          <div class="notes-section">
            <div style="font-weight: bold; margin-bottom: 5px;">Notes:</div>
            <div style="font-size: 9px; line-height: 1.3; margin-left: 10px;">
              ${at?`PARTIAL PAYMENT
Amount Paid Today: €${(parseFloat(Ot)||0).toFixed(2)}
Remaining Balance: €${Er.toFixed(2)}
${Yt?`Partial Payment Notes: ${Yt}`:""}`:""}
              ${Me?(at?`

`:"")+Me:""}
            </div>
          </div>
          `:""}
          
          <div class="divider"></div>
          
          <div class="footer">
            <div>Thank you for shopping with us!</div>
            <div style="margin-top: 5px;">LandM Store - Your Local African Food Store</div>
            ${at?`
            <div style="margin-top: 10px; font-size: 9px; color: #92400e;">
              <strong>Please keep this receipt for your records</strong><br>
              Remaining balance: €${Er.toFixed(2)}
            </div>
            `:""}
          </div>
        </div>
      </body>
      </html>
    `},zt=()=>{const C=window.open("","_blank");C&&(C.document.write(Et()),C.document.close(),C.print(),C.close())},Lr=async()=>{if(!(X.items.length===0||r)){if(t==null){alert("Please select a business before processing a sale.");return}try{let C;if(A&&gr){const Ye=parseInt(gr.replace("TXN-","")),{data:Qe,error:ct}=await Oe.from("sales").update({total_amount:X.total,payment_method:K}).eq("sale_id",Ye).eq("business_id",t).select().single();if(ct)throw ct;C=Qe}else{let Ye=null;if(J.trim()){const{data:Zt,error:Mt}=await Oe.from("customers").select("customer_id").eq("business_id",t).eq("name",J.trim()).single();if(Zt&&!Mt)Ye=Zt.customer_id;else{const{data:Wt,error:Pr}=await Oe.from("customers").insert([{name:J.trim(),phone_number:oe.trim()||"000-000-0000",email:null,business_id:t}]).select().single();Pr?(console.error("Error creating customer:",Pr),Ye=null):Ye=Wt.customer_id}}let Qe="";at&&(Qe=`PARTIAL PAYMENT
Amount Paid Today: €${(parseFloat(Ot)||0).toFixed(2)}
Remaining Balance: €${Er.toFixed(2)}`,Yt&&(Qe+=`

Partial Payment Notes: ${Yt}`)),Me&&(Qe+=(Qe?`

`:"")+Me);let ct,ft;try{const Zt={datetime:Rl(),total_amount:at?parseFloat(Ot)||0:X.total,payment_method:K,cashier_id:e?.user_id,customer_id:Ye,discount_applied:X.discount,partial_payment:at,partial_amount:at?parseFloat(Ot)||0:null,remaining_amount:at?Er:null,partial_notes:at?Yt:null,notes:Qe||null,business_id:t},Mt=await Oe.from("sales").insert([Zt]).select("*").single();ct=Mt.data,ft=Mt.error}catch{const Mt={datetime:Rl(),total_amount:at?parseFloat(Ot)||0:X.total,payment_method:K,cashier_id:e?.user_id,customer_id:Ye,discount_applied:X.discount,partial_payment:at,partial_amount:at?parseFloat(Ot)||0:null,remaining_amount:at?Er:null,partial_notes:at?Yt:null,business_id:t},Wt=await Oe.from("sales").insert([Mt]).select("*").single();ct=Wt.data,ft=Wt.error}if(ft)throw ft;C=ct}if(A&&gr){const Ye=ps?(await Oe.from("sale_items").select("product_id").eq("sale_id",C.sale_id)).data?.map(ft=>ft.product_id)||[]:[],Qe=X.items.filter(ft=>ft.product&&!Ye.includes(ft.product.product_id));if(Qe.length>0){const ft=Qe.map(Mt=>({sale_id:C.sale_id,product_id:Mt.product.product_id,quantity:Mt.quantity,price_each:Mt.product.price,weight:Mt.weight||null,calculated_price:Mt.calculatedPrice||null})),{error:Zt}=await Oe.from("sale_items").insert(ft);if(Zt)throw Zt;for(const Mt of ft){const Wt=Mt.calculated_price||Mt.price_each*Mt.quantity,{error:Pr}=await Oe.rpc("increment_product_sales",{product_id_param:Mt.product_id,revenue_amount:Wt,business_id_param:t});Pr&&console.error("Error updating product sales counter:",Pr)}}const ct=X.items.filter(ft=>ft.sideBusinessItem);for(const ft of ct){let Zt=ft.sideBusinessItem.item_id;if(Zt>1e9){const{data:Wt,error:Pr}=await Oe.from("side_business_items").insert({business_id:ft.sideBusinessItem.business_id,parent_shop_id:t,name:ft.sideBusinessItem.name,price:ft.customPrice||ft.sideBusinessItem.price,stock_qty:null,notes:"Created via Quick Service"}).select().single();if(Pr)throw Pr;Zt=Wt.item_id}const{error:Mt}=await Oe.from("side_business_sales").insert({item_id:Zt,quantity:ft.quantity,total_amount:(ft.customPrice||ft.sideBusinessItem.price||0)*ft.quantity,payment_method:K,date_time:Rl(),business_id:ft.sideBusinessItem.business_id,parent_shop_id:t});if(Mt)throw Mt}}else{const Ye=X.items.filter(ct=>ct.product).map(ct=>({sale_id:C.sale_id,product_id:ct.product.product_id,quantity:ct.quantity,price_each:ct.product.price,weight:ct.weight||null,calculated_price:ct.calculatedPrice||null})),Qe=X.items.filter(ct=>ct.sideBusinessItem);for(const ct of Qe){let ft=ct.sideBusinessItem.item_id;if(ft>1e9){const{data:Mt,error:Wt}=await Oe.from("side_business_items").insert({business_id:ct.sideBusinessItem.business_id,parent_shop_id:t,name:ct.sideBusinessItem.name,price:ct.customPrice||ct.sideBusinessItem.price,stock_qty:null,notes:"Created via Quick Service"}).select().single();if(Wt)throw Wt;ft=Mt.item_id}const{error:Zt}=await Oe.from("side_business_sales").insert({item_id:ft,quantity:ct.quantity,total_amount:(ct.customPrice||ct.sideBusinessItem.price||0)*ct.quantity,payment_method:K,date_time:Rl(),business_id:ct.sideBusinessItem.business_id,parent_shop_id:t});if(Zt)throw Zt}if(Ye.length>0){const{error:ct}=await Oe.from("sale_items").insert(Ye);if(ct)throw ct;for(const ft of Ye){const Zt=ft.calculated_price||ft.price_each*ft.quantity,{error:Mt}=await Oe.rpc("increment_product_sales",{product_id_param:ft.product_id,revenue_amount:Zt,business_id_param:t});Mt&&console.error("Error updating product sales counter:",Mt)}}}const ge=A&&gr?X.items.filter(Ye=>Ye.product?!(ps?(ps.sale_items||[]).map(ct=>ct.product_id):[]).includes(Ye.product.product_id):!1):X.items.filter(Ye=>Ye.product);for(const Ye of ge){if(!Ye.product)continue;const{error:Qe}=await Oe.from("products").update({stock_quantity:Ye.product.stock_quantity-Ye.quantity,last_updated:Rl()}).eq("product_id",Ye.product.product_id).eq("business_id",t);if(Qe)throw Qe;const{error:ct}=await Oe.from("inventory_movements").insert([{product_id:Ye.product.product_id,quantity_change:-Ye.quantity,movement_type:"Sale",reference_id:C.sale_id,business_id:t}]);if(ct)throw ct}const Xe=X.items.filter(Ye=>Ye.sideBusinessItem);for(const Ye of Xe){if(!Ye.sideBusinessItem||Ye.sideBusinessItem.stock_qty===null)continue;const{error:Qe}=await Oe.from("side_business_items").update({stock_qty:Ye.sideBusinessItem.stock_qty-Ye.quantity}).eq("item_id",Ye.sideBusinessItem.item_id).eq("parent_shop_id",t);if(Qe)throw Qe}fe({items:[],subtotal:0,tax:0,discount:0,total:0}),Q(""),re(""),E("cash"),z(""),me(0),He(""),at&&Er>0&&C?.sale_id&&await En(J,oe,Er,C.sale_id),At(!1),wn(""),Tn(0),Nt("");const Je=document.createElement("div");Je.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,Je.textContent=A?"Items added to transaction successfully!":at?`Partial payment processed! €${(parseFloat(Ot)||0).toFixed(2)} paid, €${Er.toFixed(2)} remaining. Reminder created.`:"Sale processed successfully!",document.body.appendChild(Je),setTimeout(()=>{document.body.removeChild(Je)},3e3),eC(X.total),B(!1),A&&gr&&setTimeout(()=>{o(`/transaction/${gr}`)},2e3)}catch(C){alert(`Failed to process sale: ${C instanceof Error?C.message:"Unknown error"}`)}}},_r=()=>{const C=new Date,ge=C.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),Xe=C.toLocaleDateString("en-GB",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"});return`${ge} - ${Xe}`},En=async(C,ge,Xe,Je)=>{if(t!=null)try{const Ye=e?.user_id||1,Qe=`Payment Due: ${C||"Customer"}`,ct=ge?`
Phone: ${ge}`:"",ft=`Customer owes €${Xe.toFixed(2)} from Sale #${Je}. Please follow up for payment.${ct}`,Zt=new Date;Zt.setDate(Zt.getDate()+1);const Mt=Zt.toISOString().split("T")[0],{error:Wt}=await Oe.from("reminders").insert([{title:Qe,body:ft,remind_date:Mt,owner_id:Ye,business_id:t}]).select().single();Wt&&(console.error("Error creating partial payment reminder:",Wt),console.error("Reminder data attempted:",{title:Qe,body:ft,remind_date:Mt,owner_id:Ye}))}catch(Ye){console.error("Error creating partial payment reminder:",Ye)}};return ye?a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading products..."]}):a.jsxs("div",{style:{display:"flex",height:"100vh",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",fontFamily:"Poppins, sans-serif"},children:[a.jsxs("div",{style:{flex:1,background:"#ffffff",margin:"20px",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:A?"#fef3c7":"#f9fafb"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[a.jsx("i",{className:"fa-solid fa-cash-register",style:{marginRight:"12px",color:"#7d8d86"}}),"Point Of Sales"]}),A&&a.jsxs("div",{style:{background:"#f59e0b",color:"#92400e",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-plus-circle"}),"Adding to Transaction #",gr]})]}),A&&a.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:"8px 0 0 0",fontStyle:"italic"},children:"Adding new items to existing transaction. Existing items will be preserved."})]}),a.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f5f5f5"},children:a.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",maxWidth:"800px",margin:"0 auto"},children:[a.jsxs("div",{style:{position:"relative",flex:1,background:"#ffffff",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"2px solid #e5e7eb",transition:"all 0.3s ease"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px"},children:[a.jsx("i",{className:"fa-solid fa-search",style:{color:"#6b7280",fontSize:"18px",marginRight:"12px"}}),a.jsx("input",{type:"text",placeholder:"Search products, categories, or SKU...",value:N,onChange:C=>De(C.target.value),onFocus:C=>{C.target.parentElement.parentElement.style.borderColor="#3b82f6",C.target.parentElement.parentElement.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.15)",P(I.length>0)},onBlur:C=>{C.target.parentElement.parentElement.style.borderColor="#e5e7eb",C.target.parentElement.parentElement.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",setTimeout(()=>P(!1),200)},onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),N.trim()&&P(!1))},style:{flex:1,padding:"4px 8px",border:"none",background:"transparent",fontSize:"16px",outline:"none",color:"#1f2937",fontWeight:"500"}}),N&&a.jsx("button",{onClick:()=>{R(""),P(!1),G([])},style:{background:"#f3f4f6",border:"none",borderRadius:"6px",padding:"6px",cursor:"pointer",color:"#6b7280",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:C=>{C.target.style.background="#e5e7eb"(C.target).style.color="#374151"},onMouseLeave:C=>{C.target.style.background="#f3f4f6"(C.target).style.color="#6b7280"},children:a.jsx("i",{className:"fa-solid fa-times"})})]}),q&&I.length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"none",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",zIndex:1e3,maxHeight:"300px",overflowY:"auto",marginTop:"8px",backdropFilter:"blur(10px)"},children:I.map((C,ge)=>{const Xe="product_id"in C,Je="item_id"in C;return a.jsxs("div",{onClick:()=>pe(C),style:{padding:"16px 20px",cursor:"pointer",borderBottom:ge<I.length-1?"1px solid #f1f5f9":"none",display:"flex",alignItems:"center",gap:"16px",transition:"all 0.2s ease",borderRadius:ge===0?"16px 16px 0 0":ge===I.length-1?"0 0 16px 16px":"0"},onMouseEnter:Ye=>{Ye.target.style.background="linear-gradient(135deg, #f8fafc, #f1f5f9)"(Ye.target).style.transform="translateX(4px)"},onMouseLeave:Ye=>{Ye.target.style.background="transparent"(Ye.target).style.transform="translateX(0)"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:Xe&&C.image_url?`url(${C.image_url})`:"linear-gradient(135deg, #667eea, #764ba2)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",color:"#ffffff",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:Je&&a.jsx("i",{className:"fa-solid fa-briefcase"})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"600",color:"#1e293b",lineHeight:"1.3"},children:C.name}),a.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:Xe?`${C.category} • €${C.price.toFixed(2)}`:`${C.side_businesses?.name||"Side Business"} • ${C.price?`€${C.price.toFixed(2)}`:"Custom Price"}`})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"#ffffff",borderRadius:"8px",padding:"8px 12px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add"]})]},Xe?C.product_id:`sb-${C.item_id}`)})})]}),a.jsx("div",{style:{display:"flex",gap:"12px"},children:a.jsxs(jd,{onClick:()=>br(!0),children:[a.jsx("i",{className:"fa-solid fa-plus-circle",style:{marginRight:"8px"}}),"Quick Service"]})})]})}),a.jsxs("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb",background:or?"#f0f9ff":"#f9fafb",transition:"background-color 0.3s ease"},children:[or&&a.jsx("input",{type:"text",style:{position:"absolute",left:"-9999px",opacity:0,pointerEvents:"none"},onInput:C=>{const ge=C.target.value;ge&&ge.length>=8&&ge.length<=20&&(console.log("🔍 Hidden input barcode detected:",ge),de(ge),C.target.value="")},autoFocus:!0}),a.jsx("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:a.jsxs("div",{style:{position:"relative",flex:1,minWidth:"300px",maxWidth:"400px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Barcode Scanner"}),a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Scan or enter barcode manually",style:{flex:1,padding:"12px 16px",border:`2px solid ${or?"#3b82f6":"#d1d5db"}`,borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.3s ease",background:or?"#f0f9ff":"#ffffff",color:or?"#1e40af":"#1f2937"},onKeyDown:C=>{if(C.key==="Enter"){const ge=C.target.value.trim();ge&&ge.length>=8&&ge.length<=20&&(console.log("🔍 Manual barcode input:",ge),de(ge),C.target.value="")}}}),a.jsx(jd,{onClick:ke,children:Ee==="listening"?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-stop",style:{marginRight:"8px"}}),"Stop Scanner"]}):Ee==="scanned"?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-check",style:{marginRight:"8px"}}),"Item Added!"]}):Ee==="not_found"?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Not Found"]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-barcode",style:{marginRight:"8px"}}),"Scan Barcode"]})})]})]})})]}),a.jsx("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",whiteSpace:"nowrap"},children:"Category:"}),a.jsx("select",{value:_,onChange:C=>S(C.target.value),style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer",minWidth:"200px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",children:b.map(C=>{let ge=0;return C==="All"?ge=c.length+f.length:ge=f.filter(Xe=>Xe.side_businesses?.name===C).length,a.jsxs("option",{value:C,children:[C," ",C==="All"?`(${ge})`:ge>0?`(${ge})`:""]},C)})})]})}),a.jsxs("div",{style:{flex:1,padding:"24px 32px",overflowY:"auto"},children:[a.jsx("div",{style:{marginBottom:"16px"},children:a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 4px 0"},children:"Products"})}),p.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",color:"#374151",margin:"0 0 8px 0"},children:"No products found"}),a.jsx("p",{style:{fontSize:"14px",margin:"0",color:"#6b7280"},children:N?`No products match "${N}"`:"Try selecting a different category"})]}):a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"12px"},children:[p.map(C=>a.jsxs("div",{style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:ge=>{ge.currentTarget.style.transform="translateY(-1px)",ge.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",ge.currentTarget.style.border="2px solid #6b7280"},onMouseLeave:ge=>{ge.currentTarget.style.transform="translateY(0)",ge.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",ge.currentTarget.style.border="2px solid #6b7280"},children:[a.jsx("div",{style:{width:"100%",height:"100px",background:C.image_url?`url(${C.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:!C.image_url&&a.jsx("i",{className:"fa-solid fa-image",style:{fontSize:"24px",color:"#9ca3af"}})}),a.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:C.name}),a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:C.is_weighted&&C.price_per_unit&&C.weight_unit?C.weight_unit==="g"&&C.price_per_unit<1?`€${(C.price_per_unit*1e3).toFixed(2)}/kg`:C.weight_unit==="kg"&&C.price_per_unit>=1?`€${C.price_per_unit.toFixed(2)}/kg`:`€${C.price_per_unit.toFixed(2)}/${C.weight_unit}`:`€${C.price.toFixed(2)}`}),a.jsxs("button",{onClick:()=>we(C),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:ge=>{ge.currentTarget.style.background="#3e3f29"},onMouseLeave:ge=>{ge.currentTarget.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},C.product_id)),y.map(C=>a.jsxs("div",{style:{background:"#ffffff",border:"3px solid #374151",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:ge=>{ge.currentTarget.style.transform="translateY(-1px)",ge.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseLeave:ge=>{ge.currentTarget.style.transform="translateY(0)",ge.currentTarget.style.boxShadow="none"},children:[a.jsx("div",{style:{width:"100%",height:"100px",background:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"24px",color:"#9ca3af"}})}),a.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:C.name}),a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:C.price?`€${C.price.toFixed(2)}`:"Custom Price"}),a.jsxs("button",{onClick:()=>Ke(C),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:ge=>{ge.currentTarget.style.background="#3e3f29"},onMouseLeave:ge=>{ge.currentTarget.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},`sb-${C.item_id}`))]})]})]}),a.jsxs("div",{style:{width:"400px",background:"#ffffff",margin:"20px 20px 20px 0",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px",fontWeight:"600"},children:e?.username?.charAt(0).toUpperCase()}),a.jsx("div",{children:a.jsxs("p",{style:{margin:"0",fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["Hello, ",e?.username]})})]}),a.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:_r()})]}),a.jsxs("div",{style:{flex:1,padding:"24px",overflowY:"auto"},children:[a.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:["Order Detail #",Math.floor(Math.random()*1e7)]}),X.items.length===0?a.jsxs("div",{style:{textAlign:"center",color:"#6b7280",padding:"40px 0"},children:[a.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{children:"No items in order"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:X.items.map(C=>{const ge=C.product?.product_id||`sb-${C.sideBusinessItem?.item_id}`,Xe=C.product?.name||C.sideBusinessItem?.name||"Unknown Item",Je=C.product?.price||C.customPrice||C.sideBusinessItem?.price||0,Ye=!!C.sideBusinessItem;return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#ffffff",borderRadius:"8px",border:"3px solid #dc2626",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:Ye?"linear-gradient(135deg, #f3f4f6, #e5e7eb)":C.product?.image_url?`url(${C.product.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:Ye&&a.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"16px",color:"#9ca3af"}})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:Xe.length>20?Xe.substring(0,20)+"...":Xe}),a.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#7d8d86",fontWeight:"600"},children:C.weight&&C.calculatedPrice?a.jsxs(a.Fragment,{children:[C.weight," ",C.product?.weight_unit," • €",C.calculatedPrice.toFixed(2)]}):`€${Je.toFixed(2)}`})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!C.weight&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>tt(ge,C.quantity-1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),a.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:C.quantity}),a.jsx("button",{onClick:()=>tt(ge,C.quantity+1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),C.weight&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>St(ge,C.weight-.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),a.jsxs("button",{onClick:()=>wt(C),style:{minWidth:"60px",height:"24px",borderRadius:"4px",border:"1px solid #7d8d86",background:"#f9fafb",color:"#7d8d86",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"500",padding:"0 4px"},title:"Click to edit weight",children:[C.weight," ",C.product?.weight_unit]}),a.jsx("button",{onClick:()=>St(ge,C.weight+.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),a.jsx("button",{onClick:()=>lt(ge),style:{width:"24px",height:"24px",borderRadius:"4px",border:"none",background:"#ef4444",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",marginLeft:"4px"},children:a.jsx("i",{className:"fa-solid fa-trash"})})]})]},ge)})})]}),a.jsxs("div",{style:{padding:"24px",borderTop:"1px solid #e5e7eb",background:"#f9fafb"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Detail"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Customer Name"}),a.jsx("input",{type:"text",value:J,onChange:C=>Q(C.target.value),placeholder:"Enter customer name",style:{width:"100%",padding:"8px 12px",border:"1px solid #6b7280",borderRadius:"6px",fontSize:"14px",outline:"none"}})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Sub Total"}),a.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["€",X.subtotal.toFixed(2)]})]}),X.discount>0&&a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Discount"}),a.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["€",X.discount.toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"8px",borderTop:"1px solid #d1d5db",marginBottom:"16px"},children:[a.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937"},children:"Total Payment"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"600",color:"#7d8d86"},children:["€",X.total.toFixed(2)]})]})]}),a.jsx("button",{style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"14px",fontWeight:"500",cursor:"pointer",width:"100%",marginBottom:"12px"},children:"Add Voucher"}),a.jsx("div",{style:{background:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"10px 12px",display:"flex",alignItems:"center",gap:"8px",width:"fit-content",maxWidth:"280px",marginBottom:"12px",opacity:X.items.length===0?.5:1,cursor:X.items.length===0?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},onClick:async()=>{if(X.items.length!==0){if(Rr){console.log("Pausing TTS..."),Br.pause(),$t(!1);return}console.log("Announce Order clicked!"),console.log("Order items:",X.items),$t(!0),Br.updateSettings({enabled:!0}),nr(Br.getSettings()),console.log("TTS Settings after enabling:",Br.getSettings());try{await C1(X.items),setTimeout(()=>{Br.updateSettings({enabled:!1}),nr(Br.getSettings()),$t(!1)},3e3)}catch(C){console.error("TTS Error:",C),Br.updateSettings({enabled:!1}),nr(Br.getSettings()),$t(!1)}}},onMouseEnter:C=>{X.items.length>0&&(C.currentTarget.style.background="#333333",C.currentTarget.style.borderColor="#555555")},onMouseLeave:C=>{X.items.length>0&&(C.currentTarget.style.background="#2a2a2a",C.currentTarget.style.borderColor="#404040")},children:a.jsxs("button",{onClick:async()=>{if(X.items.length!==0){if(Rr){console.log("Pausing TTS..."),Br.stop(),$t(!1);return}console.log("Announce Order clicked!"),console.log("Order items:",X.items),$t(!0),Br.updateSettings({enabled:!0}),nr(Br.getSettings()),console.log("TTS Settings after enabling:",Br.getSettings());try{await C1(X.items),setTimeout(()=>{Br.updateSettings({enabled:!1}),nr(Br.getSettings()),$t(!1)},3e3)}catch(C){console.error("TTS Error:",C),$t(!1),Br.updateSettings({enabled:!1}),nr(Br.getSettings())}}},disabled:X.items.length===0,style:{background:X.items.length===0?"#666666":"#4a5568",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",cursor:X.items.length===0?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease",opacity:X.items.length===0?.5:1},onMouseEnter:C=>{X.items.length>0&&(C.target.style.background="#2d3748")},onMouseLeave:C=>{X.items.length>0&&(C.target.style.background="#4a5568")},children:[a.jsx("i",{className:Rr?"fa-solid fa-pause":"fa-solid fa-play",style:{fontSize:"12px"}}),Rr?"Stop":"Play"]})}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[a.jsxs(jd,{onClick:jt,disabled:X.items.length===0,style:{flex:1},children:[a.jsx("i",{className:"fa-solid fa-rotate-left",style:{marginRight:"8px"}}),"Reset"]}),a.jsxs(jd,{onClick:()=>B(!0),disabled:X.items.length===0,style:{flex:2},children:[a.jsx("i",{className:"fa-solid fa-credit-card",style:{marginRight:"8px"}}),"Purchase",X.items.length>0&&a.jsx("span",{style:{fontSize:"10px",opacity:.8,marginLeft:"2px"},children:"(Ctrl+Enter)"})]})]})]})]}),Ae&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"20px",width:"95%",maxWidth:"700px",maxHeight:"95vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"8px",borderBottom:"1px solid #e5e7eb"},children:[a.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1f2937"},children:[a.jsx("i",{className:"fa-solid fa-receipt",style:{marginRight:"12px",color:"#7d8d86"}}),"Sales Summary"]}),a.jsx("button",{onClick:()=>B(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#6b7280",cursor:"pointer",padding:"4px"},children:a.jsx("i",{className:"fa-solid fa-xmark"})})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Customer Information"}),a.jsx("input",{type:"text",value:J,onChange:C=>Q(C.target.value),placeholder:"Enter customer name (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"12px"}})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Phone Number (Optional)"}),a.jsx("input",{type:"tel",value:oe,onChange:C=>re(C.target.value),placeholder:"Enter phone number (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"16px"}})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Payment Method"}),a.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:["cash","card","credit"].map(C=>a.jsxs("button",{onClick:()=>E(C),style:{background:K===C?"#7d8d86":"#f3f4f6",color:K===C?"white":"#374151",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",textTransform:"capitalize",transition:"all 0.2s ease"},children:[a.jsx("i",{className:`fa-solid fa-${C==="cash"?"money-bill":C==="card"?"credit-card":"hand-holding-dollar"}`,style:{marginRight:"6px"}}),C]},C))})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0"},children:"Payment Options"}),a.jsxs("button",{onClick:()=>{At(!at),at?(wn(""),Tn(0)):(wn(X.total.toString()),Tn(0))},style:{background:at?"#ef4444":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:`fa-solid fa-${at?"times":"credit-card"}`,style:{fontSize:"12px"}}),at?"Disable Partial":"Enable Partial Payment"]})]}),at&&a.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[a.jsx("i",{className:"fa-solid fa-info-circle",style:{color:"#f59e0b"}}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#92400e"},children:"Partial Payment Enabled"})]}),a.jsxs("div",{style:{fontSize:"14px",color:"#92400e"},children:[a.jsxs("div",{children:["Amount to pay now: ",a.jsxs("strong",{children:["€",(parseFloat(Ot)||0).toFixed(2)]})]}),a.jsxs("div",{children:["Remaining amount: ",a.jsxs("strong",{children:["€",Er.toFixed(2)]})]}),Er>0&&a.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#fef2f2",border:"1px solid #fca5a5",borderRadius:"4px"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"6px",color:"#dc2626"}}),a.jsxs("strong",{style:{color:"#dc2626"},children:["Still need to pay: €",Er.toFixed(2)]})]})]})]}),at&&a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Amount to Pay Now (€)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:X.total,value:Ot,onChange:C=>{const ge=C.target.value;wn(ge);const Xe=parseFloat(ge)||0;Tn(Math.max(0,X.total-Xe))},style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},placeholder:`Enter amount (max €${X.total.toFixed(2)})`})]}),at&&a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Notes (Optional)"}),a.jsx("textarea",{value:Yt,onChange:C=>Nt(C.target.value),placeholder:"Add any notes about this partial payment...",style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit",transition:"border-color 0.2s ease"}})]})]}),K==="cash"&&a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Amount Received"}),a.jsx("div",{style:{marginBottom:"12px"},children:a.jsxs("button",{onClick:()=>z(at?Ot:X.total.toFixed(2)),style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:C=>C.target.style.background="#f9fafb",onMouseOut:C=>C.target.style.background="#ffffff",children:["Set Exact Amount (€",at?(parseFloat(Ot)||0).toFixed(2):X.total.toFixed(2),")"]})}),a.jsx("input",{type:"number",step:"0.01",value:L,onChange:C=>z(C.target.value),placeholder:`Enter amount: €${at?(parseFloat(Ot)||0).toFixed(2):X.total.toFixed(2)}`,style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"block",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"18px",fontWeight:"500",outline:"none",background:"#ffffff",textAlign:"center"}}),Y>0&&a.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",color:"#0c4a6e",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-coins",style:{marginRight:"8px"}}),"Change: €",Y.toFixed(2)]}),at&&Er>0&&a.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"2px solid #dc2626",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Still need to pay: €",Er.toFixed(2)]}),L&&parseFloat(L)<X.total&&!at&&a.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"1px solid #f87171",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Need €",((at?parseFloat(Ot)||0:X.total)-parseFloat(L)).toFixed(2)," more"]})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Receipt Notes (Optional)"}),a.jsx("textarea",{value:Me,onChange:C=>He(C.target.value),placeholder:"Add notes for receipt (e.g., partial payment, special instructions, etc.)",style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit"}}),a.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:"8px 0 0 0"},children:"These notes will appear on the printed receipt"})]}),a.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"12px",marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Summary"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Subtotal"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["€",X.subtotal.toFixed(2)]})]}),X.discount>0&&a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Discount"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["€",X.discount.toFixed(2)]})]}),at&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Amount to Pay Now"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#7d8d86"},children:["€",(parseFloat(Ot)||0).toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Remaining Amount"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#ef4444"},children:["€",Er.toFixed(2)]})]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid #d1d5db",marginTop:"8px"},children:[a.jsx("span",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:at?"Total Order":"Total"}),a.jsxs("span",{style:{fontSize:"18px",fontWeight:"600",color:"#7d8d86"},children:["€",X.total.toFixed(2)]})]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"space-between"},children:[a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsxs("button",{onClick:()=>ne(!0),style:{background:"#ffffff",color:"#3e3f29",border:"1px solid #3e3f29",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-eye"}),"View Receipt"]}),a.jsxs("button",{onClick:zt,style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:()=>B(!1),style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),a.jsxs("button",{onClick:Lr,disabled:K==="cash"&&(!L||parseFloat(L)<(at?parseFloat(Ot)||0:X.total)),style:{background:K==="cash"&&(!L||parseFloat(L)<(at?parseFloat(Ot)||0:X.total))?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:K==="cash"&&(!L||parseFloat(L)<(at?parseFloat(Ot)||0:X.total))?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:K==="cash"&&(!L||parseFloat(L)<(at?parseFloat(Ot)||0:X.total))?.6:1},children:[a.jsx("i",{className:"fa-solid fa-credit-card"}),at?"Process Partial Payment":"Process Sale"]})]})]})]})}),Ce&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",width:"95vw",height:"95vh",overflow:"auto",position:"relative"},children:[a.jsx("button",{onClick:()=>ne(!1),style:{position:"absolute",top:"12px",right:"12px",background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#6b7280",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},onMouseOver:C=>C.target.style.background="#f3f4f6",onMouseOut:C=>C.target.style.background="none",children:a.jsx("i",{className:"fa-solid fa-times"})}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0",textAlign:"center"},children:"Receipt Preview"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:Et()},style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"30px",background:"#ffffff",fontFamily:"Courier New, monospace",fontSize:"16px",lineHeight:"1.6",maxWidth:"600px",margin:"0 auto"}})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>ne(!1),style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close"}),a.jsxs("button",{onClick:()=>{ne(!1),zt()},style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #3e3f29 0%, #7d8d86 100%)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]})]})}),Pe&&rt&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[a.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"Enter Custom Price"}),a.jsxs("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#6b7280"},children:["Set the price for: ",a.jsx("strong",{children:rt.name})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price (€)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:Ne,onChange:C=>st(C.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onKeyDown:C=>{C.key==="Enter"&&it()},autoFocus:!0})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>{$e(!1),V(null),st("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),a.jsx("button",{onClick:it,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Add to Order"})]})]})}),Re&&xt&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:nt?"Edit Weight":"Enter Weight"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:"0 0 8px 0"},children:xt.name}),a.jsxs("p",{style:{fontSize:"12px",color:"#9ca3af",margin:"0 0 12px 0"},children:["Price: €",xt.price_per_unit?.toFixed(2)," per ",xt.weight_unit]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:["Weight (",xt.weight_unit,")"]}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:bt,onChange:C=>Ie(C.target.value),placeholder:`Enter weight in ${xt.weight_unit}`,style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),bt&&parseFloat(bt)>0&&a.jsxs("div",{style:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px",marginBottom:"20px"},children:[a.jsx("p",{style:{fontSize:"14px",color:"#374151",margin:"0 0 4px 0"},children:"Total Price:"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:["€",((parseFloat(bt)||0)*(xt.price_per_unit||0)).toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>{ht(!1),Dt(null),vt(null),Ie("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),a.jsx("button",{onClick:()=>{const C=parseFloat(bt);C>0&&We(xt,C)},disabled:!bt||parseFloat(bt)<=0,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!bt||parseFloat(bt)<=0?"#d1d5db":"#7d8d86",color:!bt||parseFloat(bt)<=0?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:!bt||parseFloat(bt)<=0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:nt?"Update Weight":"Add to Order"})]})]})}),er&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[a.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"24px",fontWeight:"600",color:"#1f2937",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-plus-circle",style:{color:"#10b981"}}),"Create Quick Service"]}),a.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280"},children:"Create a service on-the-fly with custom name and price. No need to predefine items!"}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Business"}),a.jsxs("select",{value:It,onChange:C=>lr(C.target.value),style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",children:[a.jsx("option",{value:"",children:"Select a service business"}),Cr.map(C=>a.jsx("option",{value:C.business_id,children:C.name},C.business_id))]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Name"}),a.jsx("input",{type:"text",value:Pt,onChange:C=>ce(C.target.value),placeholder:"e.g., Haircut, Consultation, Repair...",style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price (€)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:Ge,onChange:C=>gt(C.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>{br(!1),ce(""),gt(""),lr("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),a.jsxs("button",{onClick:Ve,disabled:!Pt.trim()||!Ge||!It,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!Pt.trim()||!Ge||!It?"#d1d5db":"linear-gradient(135deg, #10b981, #059669)",color:!Pt.trim()||!Ge||!It?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"600",cursor:!Pt.trim()||!Ge||!It?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add to Order"]})]})]})})]})},rC="_searchContainer_tecz1_2",nC="_searchBarSection_tecz1_12",sC="_searchBarWrapper_tecz1_16",aC="_searchInputWrapper_tecz1_22",iC="_searchIcon_tecz1_40",oC="_searchInput_tecz1_22",lC="_clearButton_tecz1_65",cC="_searchResults_tecz1_87",dC="_resultsCount_tecz1_91",uC="_filtersSection_tecz1_98",fC="_filtersContainer_tecz1_103",hC="_filterGroup_tecz1_110",pC="_filterLabel_tecz1_116",gC="_filterSelect_tecz1_123",xC="_sortToggleButton_tecz1_140",mC="_clearFiltersButton_tecz1_158",Kr={searchContainer:rC,searchBarSection:nC,searchBarWrapper:sC,searchInputWrapper:aC,searchIcon:iC,searchInput:oC,clearButton:lC,searchResults:cC,resultsCount:dC,filtersSection:uC,filtersContainer:fC,filterGroup:hC,filterLabel:pC,filterSelect:gC,sortToggleButton:xC,clearFiltersButton:mC},yC=({searchTerm:e="",onSearchChange:t,searchPlaceholder:r="Search...",showSearchResults:s=!1,searchResultsCount:o=0,onClearSearch:c,filters:d=[],sortOptions:f=[],onSortToggle:h,sortOrder:p="desc",onClearFilters:x,hasActiveFilters:y=!1})=>a.jsxs("div",{className:Kr.searchContainer,children:[t&&a.jsx("div",{className:Kr.searchBarSection,children:a.jsxs("div",{className:Kr.searchBarWrapper,children:[a.jsxs("div",{className:Kr.searchInputWrapper,children:[a.jsx("i",{className:`fa-solid fa-search ${Kr.searchIcon}`}),a.jsx("input",{type:"text",placeholder:r,value:e,onChange:v=>t(v.target.value),className:Kr.searchInput}),e&&c&&a.jsx("button",{onClick:c,className:Kr.clearButton,title:"Clear search",children:a.jsx("i",{className:"fa-solid fa-times"})})]}),s&&e&&a.jsx("div",{className:Kr.searchResults,children:a.jsxs("span",{className:Kr.resultsCount,children:[o," result",o!==1?"s":""," found"]})})]})}),(d.length>0||f.length>0||h||y)&&a.jsx("div",{className:Kr.filtersSection,children:a.jsxs("div",{className:Kr.filtersContainer,children:[d.map((v,b)=>a.jsxs("div",{className:Kr.filterGroup,children:[a.jsxs("label",{className:Kr.filterLabel,children:[v.label,":"]}),a.jsx("select",{value:v.value,onChange:w=>v.onChange(w.target.value),className:Kr.filterSelect,children:v.options.map(w=>a.jsx("option",{value:w.value,children:w.label},w.value))})]},b)),f.map((v,b)=>a.jsxs("div",{className:Kr.filterGroup,children:[a.jsxs("label",{className:Kr.filterLabel,children:[v.label,":"]}),a.jsx("select",{value:v.value,onChange:w=>v.onChange(w.target.value),className:Kr.filterSelect,children:v.options.map(w=>a.jsx("option",{value:w.value,children:w.label},w.value))})]},b)),h&&a.jsx("button",{onClick:h,className:Kr.sortToggleButton,title:`Sort ${p==="asc"?"Descending":"Ascending"}`,children:a.jsx("i",{className:`fa-solid fa-sort-${p==="asc"?"up":"down"}`})}),y&&x&&a.jsxs("button",{onClick:x,className:Kr.clearFiltersButton,title:"Clear all filters",children:[a.jsx("i",{className:"fa-solid fa-times"}),"Clear"]})]})})]}),vC="_sideBusinessesContainer_272f1_2",bC="_pageHeader_272f1_8",_C="_pageTitle_272f1_17",SC="_primaryButton_272f1_31",wC="_statisticsGrid_272f1_54",TC="_statisticsCard_272f1_61",jC="_statisticsCardContent_272f1_75",EC="_statisticsInfo_272f1_81",kC="_statisticsLabel_272f1_85",CC="_statisticsValue_272f1_92",AC="_statisticsIcon_272f1_99",NC="_statisticsIconPurple_272f1_104",RC="_statisticsIconBlue_272f1_108",DC="_statisticsIconGreen_272f1_112",OC="_statisticsIconOrange_272f1_116",IC="_mainContentGrid_272f1_121",BC="_contentPanel_272f1_128",MC="_contentPanelHeader_272f1_142",FC="_contentPanelTitle_272f1_151",LC="_contentPanelBody_272f1_158",PC="_emptyStateMessage_272f1_165",zC="_emptyStateMessageIcon_272f1_171",UC="_emptyStateMessageText_272f1_177",WC="_listContainer_272f1_184",qC="_listContainerDivided_272f1_189",$C="_listItemCard_272f1_193",HC="_listItemCardContent_272f1_210",GC="_listItemCardIcon_272f1_217",VC="_listItemCardMain_272f1_234",YC="_listItemCardTitle_272f1_238",KC="_listItemCardSubtitle_272f1_245",XC="_listItemCardMeta_272f1_251",QC="_listItemCardPrice_272f1_258",JC="_listItemCardStock_272f1_264",ZC="_listItemCardCount_272f1_269",e8="_listItemCardTime_272f1_274",t8="_listItemCardActions_272f1_279",r8="_actionButton_272f1_284",n8="_actionButtonIcon_272f1_303",s8="_statusBadge_272f1_308",a8="_statusBadgeRental_272f1_316",i8="_statusBadgeResale_272f1_321",o8="_statusBadgeService_272f1_326",l8="_statusBadgeGray_272f1_331",c8="_statusBadgeCash_272f1_336",d8="_statusBadgeCard_272f1_341",u8="_statusBadgeMobile_272f1_346",f8="_modalOverlay_272f1_352",h8="_modalDialog_272f1_363",p8="_modalDialogTitle_272f1_373",g8="_modalDialogForm_272f1_380",x8="_formFieldGroup_272f1_386",m8="_formFieldLabel_272f1_391",y8="_formFieldInput_272f1_399",v8="_formFieldTextarea_272f1_420",b8="_formFieldSelect_272f1_444",_8="_actionButtonDanger_272f1_496",S8="_standardButton_272f1_506",w8="_standardButtonSecondary_272f1_516",T8="_standardButtonDanger_272f1_525",j8="_standardButtonSuccess_272f1_534",E8="_businessDetailModalHeader_272f1_544",k8="_businessAnalyticsSection_272f1_554",C8="_analyticsSectionTitle_272f1_558",A8="_analyticsGrid_272f1_567",N8="_analyticsCard_272f1_574",R8="_analyticsCardHeader_272f1_587",D8="_analyticsIcon_272f1_594",O8="_analyticsIconBlue_272f1_600",I8="_analyticsIconGreen_272f1_604",B8="_analyticsIconPurple_272f1_608",M8="_analyticsPeriod_272f1_612",F8="_analyticsCardContent_272f1_618",L8="_analyticsMetric_272f1_624",P8="_analyticsLabel_272f1_630",z8="_analyticsValue_272f1_636",U8="_itemsSectionHeader_272f1_643",W8="_restockButton_272f1_650",q8="_restockActionButton_272f1_669",$8="_editActionButton_272f1_679",H8="_formFieldHelp_272f1_690",G8="_modalHeader_272f1_698",V8="_modalCloseButton_272f1_707",Y8="_required_272f1_724",K8="_errorMessage_272f1_730",X8="_listItemCardNotes_272f1_748",Q8="_restockInfo_272f1_759",J8="_restockItemName_272f1_767",Z8="_restockCurrentStock_272f1_774",e6="_restockPreview_272f1_780",t6="_restockPreviewText_272f1_788",r6="_businessDetailModalIcon_272f1_803",n6="_businessDetailModalInfo_272f1_819",s6="_businessDetailModalName_272f1_823",a6="_businessDetailModalDescription_272f1_830",i6="_businessDetailModalMeta_272f1_836",o6="_businessDetailModalDate_272f1_842",l6="_businessDetailModalStats_272f1_847",c6="_businessDetailModalItems_272f1_854",d6="_noItemsMessage_272f1_865",u6="_deleteConfirmationWarning_272f1_872",f6="_deleteConfirmationWarningText_272f1_878",h6="_modalDialogActions_272f1_885",p6="_errorStateContainer_272f1_893",g6="_errorStateContent_272f1_901",x6="_errorStateIcon_272f1_910",m6="_errorStateTitle_272f1_916",y6="_errorStateText_272f1_922",v6="_errorStateRetryButton_272f1_927",b6="_loadingStateContainer_272f1_944",_6="_loadingStateText_272f1_951",S6="_loadingStateSpinner_272f1_959",D={sideBusinessesContainer:vC,pageHeader:bC,pageTitle:_C,primaryButton:SC,statisticsGrid:wC,statisticsCard:TC,statisticsCardContent:jC,statisticsInfo:EC,statisticsLabel:kC,statisticsValue:CC,statisticsIcon:AC,statisticsIconPurple:NC,statisticsIconBlue:RC,statisticsIconGreen:DC,statisticsIconOrange:OC,mainContentGrid:IC,contentPanel:BC,contentPanelHeader:MC,contentPanelTitle:FC,contentPanelBody:LC,emptyStateMessage:PC,emptyStateMessageIcon:zC,emptyStateMessageText:UC,listContainer:WC,listContainerDivided:qC,listItemCard:$C,listItemCardContent:HC,listItemCardIcon:GC,listItemCardMain:VC,listItemCardTitle:YC,listItemCardSubtitle:KC,listItemCardMeta:XC,listItemCardPrice:QC,listItemCardStock:JC,listItemCardCount:ZC,listItemCardTime:e8,listItemCardActions:t8,actionButton:r8,actionButtonIcon:n8,statusBadge:s8,statusBadgeRental:a8,statusBadgeResale:i8,statusBadgeService:o8,statusBadgeGray:l8,statusBadgeCash:c8,statusBadgeCard:d8,statusBadgeMobile:u8,modalOverlay:f8,modalDialog:h8,modalDialogTitle:p8,modalDialogForm:g8,formFieldGroup:x8,formFieldLabel:m8,formFieldInput:y8,formFieldTextarea:v8,formFieldSelect:b8,actionButtonDanger:_8,standardButton:S8,standardButtonSecondary:w8,standardButtonDanger:T8,standardButtonSuccess:j8,businessDetailModalHeader:E8,businessAnalyticsSection:k8,analyticsSectionTitle:C8,analyticsGrid:A8,analyticsCard:N8,analyticsCardHeader:R8,analyticsIcon:D8,analyticsIconBlue:O8,analyticsIconGreen:I8,analyticsIconPurple:B8,analyticsPeriod:M8,analyticsCardContent:F8,analyticsMetric:L8,analyticsLabel:P8,analyticsValue:z8,itemsSectionHeader:U8,restockButton:W8,restockActionButton:q8,editActionButton:$8,formFieldHelp:H8,modalHeader:G8,modalCloseButton:V8,required:Y8,errorMessage:K8,listItemCardNotes:X8,restockInfo:Q8,restockItemName:J8,restockCurrentStock:Z8,restockPreview:e6,restockPreviewText:t6,businessDetailModalIcon:r6,businessDetailModalInfo:n6,businessDetailModalName:s6,businessDetailModalDescription:a6,businessDetailModalMeta:i6,businessDetailModalDate:o6,businessDetailModalStats:l6,businessDetailModalItems:c6,noItemsMessage:d6,deleteConfirmationWarning:u6,deleteConfirmationWarningText:f6,modalDialogActions:h6,errorStateContainer:p6,errorStateContent:g6,errorStateIcon:x6,errorStateTitle:m6,errorStateText:y6,errorStateRetryButton:v6,loadingStateContainer:b6,loadingStateText:_6,loadingStateSpinner:S6};async function w6(e,t,r){console.log("🔄 Starting image upload for side business:",t),console.log("📁 File details:",{name:e.name,size:e.size,type:e.type}),console.log("👤 User ID:",r);try{if(!r)return console.error("❌ No user ID provided"),null;console.log("✅ User ID provided:",r);const{data:s,error:o}=await Oe.storage.listBuckets();o?console.error("❌ Error listing buckets:",o):console.log("📦 Available buckets:",s?.map(p=>p.name));const c=`sidebusiness-images/${t}.${e.name.split(".").pop()}`;console.log("📤 Uploading to Supabase Storage:",c);const{error:d}=await Oe.storage.from("products").upload(c,e,{contentType:e.type,upsert:!0});if(d)return console.error("❌ Upload failed:",d),null;const{data:{publicUrl:f}}=Oe.storage.from("products").getPublicUrl(c);console.log("✅ Image uploaded successfully:",f),console.log("💾 Updating database with public URL...");const{error:h}=await Oe.from("side_businesses").update({image_url:f}).eq("business_id",t);return h?(console.error("❌ DB update failed:",h),null):(console.log("✅ Database updated with public URL"),f)}catch(s){return console.error("💥 Unexpected error during upload:",s),null}}const T6=()=>{const{user:e}=Sn(),[t,r]=j.useState([]),[s,o]=j.useState([]),[c,d]=j.useState([]),[f,h]=j.useState(!0),[p,x]=j.useState(null),[y,v]=j.useState("all"),[b,w]=j.useState("all"),[_,S]=j.useState(""),[N,R]=j.useState("created_at"),[I,G]=j.useState("desc"),[Z,ie]=j.useState(!1),[q,P]=j.useState(!1),[te,ue]=j.useState(new Set),[X,fe]=j.useState(!1),[J,Q]=j.useState(null),[oe,re]=j.useState(!1),[ye,le]=j.useState(null),[Ae,B]=j.useState(null),[K,E]=j.useState(null),[L,z]=j.useState(!1),[Y,me]=j.useState({item_id:null,current_stock:0,restock_quantity:""}),[Me,He]=j.useState(!1),[Ce,ne]=j.useState(null),[Pe,$e]=j.useState({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),[rt,V]=j.useState(null),[Ne,st]=j.useState(!1),[Re,ht]=j.useState({business_id:"",name:"",price:"",stock_qty:"",notes:""}),[xt,Dt]=j.useState({item_id:"",quantity:1,total_amount:"",payment_method:"cash"});j.useEffect(()=>{bt()},[]);const bt=async()=>{try{if(h(!0),x(null),!e?.business_id){r([]),o([]),d([]),h(!1);return}const{data:se,error:Ee}=await Oe.from("side_businesses").select("*").eq("parent_shop_id",e.business_id).order("created_at",{ascending:!1});if(Ee)throw Ee;const{data:mt,error:Rt}=await Oe.from("side_business_items").select(`
          *,
          side_businesses (name)
        `).eq("parent_shop_id",e.business_id).order("created_at",{ascending:!1});if(Rt)throw Rt;const{data:sr,error:at}=await Oe.from("side_business_sales").select(`
          *,
          side_business_items (
            name,
            side_businesses (name)
          )
        `).eq("parent_shop_id",e.business_id).order("date_time",{ascending:!1}).limit(10);if(at)throw at;r(se||[]),o(mt||[]),d(sr||[])}catch(se){x(se instanceof Error?se.message:"Failed to fetch data")}finally{h(!1)}},Ie=async se=>{if(se.preventDefault(),!Pe.name.trim()){x("Business name is required");return}if(!Pe.business_type){x("Business type is required");return}if(!e?.user_id){x("User not authenticated");return}try{x(null);const{data:Ee,error:mt}=await Oe.from("side_businesses").insert({owner_id:e.user_id,name:Pe.name.trim(),description:Pe.description.trim()||null,business_type:Pe.business_type,parent_shop_id:e.business_id}).select();if(mt)throw console.error("Database error:",mt),new Error(`Database error: ${mt.message}`);if(!Ee||Ee.length===0)throw new Error("No data returned from insert");const Rt=Ee[0].business_id;if(rt){st(!0);try{await w6(rt,Rt.toString(),e.user_id)}catch(sr){console.error("Error uploading image:",sr)}finally{st(!1)}}$e({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),V(null),ie(!1),await bt()}catch(Ee){console.error("Error adding business:",Ee),x(Ee instanceof Error?Ee.message:"Failed to add business")}},nt=async se=>{se.preventDefault();try{const{error:Ee}=await Oe.from("side_business_items").insert({business_id:parseInt(Re.business_id),name:Re.name,price:Re.price?parseFloat(Re.price):null,stock_qty:Re.stock_qty?parseInt(Re.stock_qty):null,notes:Re.notes.trim()||null,parent_shop_id:e?.business_id});if(Ee)throw Ee;ht({business_id:"",name:"",price:"",stock_qty:"",notes:""}),P(!1),bt()}catch(Ee){x(Ee instanceof Error?Ee.message:"Failed to add item")}},vt=async se=>{se.preventDefault();try{const{error:Ee}=await Oe.from("side_business_sales").insert({item_id:parseInt(xt.item_id),quantity:xt.quantity,total_amount:parseFloat(xt.total_amount),payment_method:xt.payment_method,parent_shop_id:e?.business_id});if(Ee)throw Ee;Dt({item_id:"",quantity:1,total_amount:"",payment_method:"cash"}),fe(!1),bt()}catch(Ee){x(Ee instanceof Error?Ee.message:"Failed to add sale")}},er=async se=>{try{console.log("🗑️ Starting delete for sale:",se);const{error:Ee}=await Oe.from("side_business_sales").delete().eq("sale_id",se);if(Ee)throw console.error("❌ Error deleting sale:",Ee),Ee;console.log("✅ Sale deleted successfully"),B(null),bt()}catch(Ee){console.error("💥 Delete sale failed:",Ee),x(Ee instanceof Error?Ee.message:"Failed to delete sale")}},br=async se=>{try{console.log("🗑️ Starting delete for business:",se);const{data:Ee,error:mt}=await Oe.from("side_business_items").select("item_id").eq("business_id",se);if(mt)throw console.error("❌ Error fetching items:",mt),mt;if(console.log("📦 Found items to delete:",Ee?.length||0),Ee&&Ee.length>0){const at=Ee.map(Ot=>Ot.item_id);console.log("🛒 Deleting sales for items:",at);const{error:At}=await Oe.from("side_business_sales").delete().in("item_id",at);if(At)throw console.error("❌ Error deleting sales:",At),At;console.log("✅ Sales deleted successfully")}console.log("📦 Deleting items for business:",se);const{error:Rt}=await Oe.from("side_business_items").delete().eq("business_id",se);if(Rt)throw console.error("❌ Error deleting items:",Rt),Rt;console.log("✅ Items deleted successfully"),console.log("🏢 Deleting business:",se);const{error:sr}=await Oe.from("side_businesses").delete().eq("business_id",se);if(sr)throw console.error("❌ Error deleting business:",sr),sr;console.log("✅ Business deleted successfully"),le(null),bt()}catch(Ee){console.error("💥 Delete failed:",Ee),x(Ee instanceof Error?Ee.message:"Failed to delete business")}},Pt=async se=>{try{const Ee=new Date,mt=new Date(Ee.getFullYear(),Ee.getMonth(),Ee.getDate()),Rt=new Date(mt);Rt.setDate(mt.getDate()-mt.getDay());const sr=new Date(Ee.getFullYear(),Ee.getMonth(),1),{data:at}=await Oe.from("side_business_items").select("item_id, stock_qty").eq("business_id",se),At=at?.reduce((Yt,Nt)=>Yt+(Nt.stock_qty||0),0)||0,Ot=at?.map(Yt=>Yt.item_id)||[];if(Ot.length===0){E({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}});return}const{data:wn}=await Oe.from("side_business_sales").select("total_amount").in("item_id",Ot).gte("date_time",mt.toISOString()),{data:Er}=await Oe.from("side_business_sales").select("total_amount").in("item_id",Ot).gte("date_time",Rt.toISOString()),{data:Tn}=await Oe.from("side_business_sales").select("total_amount").in("item_id",Ot).gte("date_time",sr.toISOString());E({currentStock:At,dailySales:{count:wn?.length||0,revenue:wn?.reduce((Yt,Nt)=>Yt+Nt.total_amount,0)||0},weeklySales:{count:Er?.length||0,revenue:Er?.reduce((Yt,Nt)=>Yt+Nt.total_amount,0)||0},monthlySales:{count:Tn?.length||0,revenue:Tn?.reduce((Yt,Nt)=>Yt+Nt.total_amount,0)||0}})}catch(Ee){console.error("Error fetching business analytics:",Ee),E({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}})}},ce=async se=>{if(se.preventDefault(),!(!Y.item_id||!Y.restock_quantity))try{const Ee=Y.current_stock+parseInt(Y.restock_quantity),{error:mt}=await Oe.from("side_business_items").update({stock_qty:Ee}).eq("item_id",Y.item_id);if(mt)throw mt;me({item_id:null,current_stock:0,restock_quantity:""}),z(!1),bt(),J&&Pt(J.business_id)}catch(Ee){x(Ee instanceof Error?Ee.message:"Failed to restock item")}},Ge=se=>{me({item_id:se.item_id,current_stock:se.stock_qty||0,restock_quantity:""}),z(!0)},gt=se=>{ne(se),He(!0)},It=async se=>{if(se.preventDefault(),!!Ce)try{const{error:Ee}=await Oe.from("side_business_items").update({name:Ce.name,price:Ce.price,notes:Ce.notes}).eq("item_id",Ce.item_id);if(Ee)throw Ee;He(!1),ne(null),bt(),J&&Pt(J.business_id)}catch(Ee){x(Ee instanceof Error?Ee.message:"Failed to update item")}},lr=se=>{Q(se),re(!0),Pt(se.business_id)},Cr=se=>{switch(se){case"rental":return D.statusBadgeRental;case"resale":return D.statusBadgeResale;case"service":return D.statusBadgeService;default:return D.statusBadgeGray}},wr=se=>{switch(se){case"cash":return D.statusBadgeCash;case"card":return D.statusBadgeCard;case"mobile":return D.statusBadgeMobile;default:return D.statusBadgeGray}},nr=s.filter(se=>{const Ee=y==="all"||se.business_id.toString()===y,mt=_===""||se.name.toLowerCase().includes(_.toLowerCase())||se.side_businesses?.name.toLowerCase().includes(_.toLowerCase());return Ee&&mt}).sort((se,Ee)=>{let mt,Rt;switch(N){case"name":mt=se.name.toLowerCase(),Rt=Ee.name.toLowerCase();break;case"price":mt=se.price||0,Rt=Ee.price||0;break;case"created_at":mt=new Date(se.created_at),Rt=new Date(Ee.created_at);break;default:return 0}return I==="asc"?mt-Rt:Rt-mt}),Rr=t.filter(se=>{const Ee=b==="all"||se.business_type===b,mt=_===""||se.name.toLowerCase().includes(_.toLowerCase())||se.description?.toLowerCase().includes(_.toLowerCase());return Ee&&mt}).sort((se,Ee)=>{let mt,Rt;switch(N){case"name":mt=se.name.toLowerCase(),Rt=Ee.name.toLowerCase();break;case"created_at":mt=new Date(se.created_at),Rt=new Date(Ee.created_at);break;default:return 0}return I==="asc"?mt-Rt:Rt-mt}),$t=c.filter(se=>{const Ee=s.find(At=>At.item_id===se.item_id)?.business_id,mt=y==="all"||Ee?.toString()===y,Rt=t.find(At=>At.business_id===Ee),sr=b==="all"||Rt?.business_type===b,at=_===""||se.side_business_items?.name.toLowerCase().includes(_.toLowerCase())||se.side_business_items?.side_businesses?.name.toLowerCase().includes(_.toLowerCase());return mt&&sr&&at}).sort((se,Ee)=>{const mt=new Date(se.date_time),Rt=new Date(Ee.date_time);return I==="asc"?mt.getTime()-Rt.getTime():Rt.getTime()-mt.getTime()}),or=[...new Set(t.map(se=>se.business_type).filter(Boolean))];return f?a.jsx("div",{className:D.loadingStateContainer,children:a.jsxs("div",{className:D.loadingStateText,children:[a.jsx("i",{className:`fa-solid fa-spinner ${D.loadingStateSpinner}`}),"Loading side businesses..."]})}):p?a.jsx("div",{className:D.errorStateContainer,children:a.jsxs("div",{className:D.errorStateContent,children:[a.jsx("i",{className:`fa-solid fa-exclamation-triangle ${D.errorStateIcon}`}),a.jsx("h2",{className:D.errorStateTitle,children:"Error Loading Side Businesses"}),a.jsx("p",{className:D.errorStateText,children:p}),a.jsx("button",{className:D.errorStateRetryButton,onClick:bt,children:"Try Again"})]})}):a.jsxs("div",{className:D.sideBusinessesContainer,children:[a.jsxs("div",{className:D.pageHeader,children:[a.jsxs("h1",{className:D.pageTitle,children:[a.jsx("i",{className:"fa-solid fa-briefcase"}),"Side Businesses"]}),a.jsxs("button",{onClick:()=>ie(!0),className:D.primaryButton,children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add Business"]})]}),a.jsx(yC,{searchTerm:_,onSearchChange:S,searchPlaceholder:"Search businesses, items, or sales...",showSearchResults:!!_,searchResultsCount:nr.length+Rr.length+$t.length,onClearSearch:()=>S(""),filters:[{label:"Business",value:y,onChange:v,options:[{value:"all",label:"All Businesses"},...t.map(se=>({value:se.business_id.toString(),label:se.name}))]},{label:"Type",value:b,onChange:w,options:[{value:"all",label:"All Types"},...or.map(se=>({value:se,label:se.charAt(0).toUpperCase()+se.slice(1)}))]}],sortOptions:[{label:"Sort",value:N,onChange:se=>R(se),options:[{value:"created_at",label:"Date Created"},{value:"name",label:"Name"},{value:"price",label:"Price"}]}],onSortToggle:()=>G(I==="asc"?"desc":"asc"),sortOrder:I,hasActiveFilters:y!=="all"||b!=="all",onClearFilters:()=>{v("all"),w("all")}}),a.jsxs("div",{className:D.statisticsGrid,children:[a.jsx("div",{className:D.statisticsCard,children:a.jsxs("div",{className:D.statisticsCardContent,children:[a.jsxs("div",{className:D.statisticsInfo,children:[a.jsx("p",{className:D.statisticsLabel,children:"Total Businesses"}),a.jsx("p",{className:D.statisticsValue,children:Rr.length})]}),a.jsx("i",{className:`fas fa-briefcase ${D.statisticsIcon} ${D.statisticsIconPurple}`})]})}),a.jsx("div",{className:D.statisticsCard,children:a.jsxs("div",{className:D.statisticsCardContent,children:[a.jsxs("div",{className:D.statisticsInfo,children:[a.jsx("p",{className:D.statisticsLabel,children:"Total Items"}),a.jsx("p",{className:D.statisticsValue,children:nr.length})]}),a.jsx("i",{className:`fas fa-box ${D.statisticsIcon} ${D.statisticsIconBlue}`})]})}),a.jsx("div",{className:D.statisticsCard,children:a.jsxs("div",{className:D.statisticsCardContent,children:[a.jsxs("div",{className:D.statisticsInfo,children:[a.jsx("p",{className:D.statisticsLabel,children:"Total Sales"}),a.jsx("p",{className:D.statisticsValue,children:$t.length})]}),a.jsx("i",{className:`fas fa-chart-line ${D.statisticsIcon} ${D.statisticsIconGreen}`})]})}),a.jsx("div",{className:D.statisticsCard,children:a.jsxs("div",{className:D.statisticsCardContent,children:[a.jsxs("div",{className:D.statisticsInfo,children:[a.jsx("p",{className:D.statisticsLabel,children:"Revenue"}),a.jsxs("p",{className:D.statisticsValue,children:["€",$t.reduce((se,Ee)=>se+Ee.total_amount,0).toFixed(2)]})]}),a.jsx("i",{className:`fas fa-euro-sign ${D.statisticsIcon} ${D.statisticsIconOrange}`})]})})]}),a.jsxs("div",{className:D.mainContentGrid,children:[a.jsxs("div",{className:D.contentPanel,children:[a.jsx("div",{className:D.contentPanelHeader,children:a.jsx("h2",{className:D.contentPanelTitle,children:"Businesses"})}),a.jsx("div",{className:D.contentPanelBody,children:Rr.length===0?a.jsxs("div",{className:D.emptyStateMessage,children:[a.jsx("i",{className:`fa-solid fa-briefcase ${D.emptyStateMessageIcon}`}),a.jsx("p",{className:D.emptyStateMessageText,children:"No businesses found. Add your first side business to get started!"})]}):a.jsx("div",{className:`${D.listContainer} ${D.listContainerDivided}`,children:Rr.map(se=>a.jsx("div",{className:D.listItemCard,onClick:()=>lr(se),children:a.jsxs("div",{className:D.listItemCardContent,children:[a.jsx("div",{className:D.listItemCardIcon,children:se.image_url&&a.jsx("img",{src:se.image_url,alt:se.name,style:{width:"40px",height:"40px",borderRadius:"8px",objectFit:"cover"}})}),a.jsxs("div",{className:D.listItemCardMain,children:[a.jsx("h3",{className:D.listItemCardTitle,children:se.name}),se.description&&a.jsx("p",{className:D.listItemCardSubtitle,children:se.description}),a.jsxs("div",{className:D.listItemCardMeta,children:[a.jsx("span",{className:`${D.statusBadge} ${Cr(se.business_type)}`,children:se.business_type||"service"}),a.jsxs("span",{className:D.listItemCardCount,children:[s.filter(Ee=>Ee.business_id===se.business_id).length," items"]})]})]}),a.jsx("div",{className:D.listItemCardActions,children:a.jsxs("button",{onClick:Ee=>{Ee.stopPropagation(),le(se)},className:`${D.actionButton} ${D.actionButtonDanger}`,title:"Delete Business",children:[a.jsx("i",{className:`fas fa-trash ${D.actionButtonIcon}`}),"Delete"]})})]})},se.business_id))})})]}),a.jsxs("div",{className:D.contentPanel,children:[a.jsxs("div",{className:D.contentPanelHeader,children:[a.jsx("h2",{className:D.contentPanelTitle,children:"Items"}),a.jsxs("button",{onClick:()=>P(!0),className:D.actionButton,style:{marginLeft:"auto"},children:[a.jsx("i",{className:`fas fa-plus ${D.actionButtonIcon}`}),"Add Item"]})]}),a.jsx("div",{className:D.contentPanelBody,children:nr.length===0?a.jsxs("div",{className:D.emptyStateMessage,children:[a.jsx("i",{className:`fa-solid fa-box ${D.emptyStateMessageIcon}`}),a.jsx("p",{className:D.emptyStateMessageText,children:"No items found. Add items to your businesses!"})]}):a.jsx("div",{className:`${D.listContainer} ${D.listContainerDivided}`,children:nr.map(se=>a.jsx("div",{className:D.listItemCard,children:a.jsxs("div",{className:D.listItemCardContent,children:[a.jsxs("div",{className:D.listItemCardMain,children:[a.jsx("h3",{className:D.listItemCardTitle,children:se.name}),a.jsx("p",{className:D.listItemCardSubtitle,children:se.side_businesses?.name||"Unknown Business"}),a.jsxs("div",{className:D.listItemCardMeta,children:[se.price?a.jsxs("span",{className:D.listItemCardPrice,children:["€",se.price]}):a.jsx("span",{className:D.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),se.stock_qty!==null&&a.jsxs("span",{className:D.listItemCardStock,children:["Stock: ",se.stock_qty]}),t.find(Ee=>Ee.business_id===se.business_id)?.business_type==="service"&&a.jsx("span",{className:`${D.statusBadge} ${D.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]})]}),a.jsx("div",{className:D.listItemCardActions,children:a.jsxs("button",{onClick:()=>{Dt(Ee=>({...Ee,item_id:se.item_id.toString()})),fe(!0)},className:D.actionButton,children:[a.jsx("i",{className:`fas fa-plus ${D.actionButtonIcon}`}),"Sale"]})})]})},se.item_id))})})]}),a.jsxs("div",{className:D.contentPanel,children:[a.jsx("div",{className:D.contentPanelHeader,children:a.jsx("h2",{className:D.contentPanelTitle,children:"Recent Sales"})}),a.jsx("div",{className:D.contentPanelBody,children:$t.length===0?a.jsxs("div",{className:D.emptyStateMessage,children:[a.jsx("i",{className:`fa-solid fa-receipt ${D.emptyStateMessageIcon}`}),a.jsx("p",{className:D.emptyStateMessageText,children:"No sales recorded yet."})]}):a.jsx("div",{className:`${D.listContainer} ${D.listContainerDivided}`,children:$t.map(se=>a.jsx("div",{className:D.listItemCard,children:a.jsxs("div",{className:D.listItemCardContent,children:[a.jsxs("div",{className:D.listItemCardMain,children:[a.jsx("h3",{className:D.listItemCardTitle,children:se.side_business_items?.name||"Unknown Item"}),a.jsx("p",{className:D.listItemCardSubtitle,children:se.side_business_items?.side_businesses?.name||"Unknown Business"}),a.jsxs("p",{className:D.listItemCardTime,children:[new Date(se.date_time).toLocaleDateString()," at ",new Date(se.date_time).toLocaleTimeString()]}),a.jsxs("div",{className:D.listItemCardMeta,children:[a.jsxs("span",{className:D.listItemCardCount,children:["Qty: ",se.quantity]}),a.jsxs("span",{className:D.listItemCardPrice,children:["€",se.total_amount]}),a.jsx("span",{className:`${D.statusBadge} ${wr(se.payment_method)}`,children:se.payment_method})]})]}),a.jsx("div",{className:D.listItemCardActions,children:a.jsxs("button",{onClick:Ee=>{Ee.stopPropagation(),B(se)},className:`${D.actionButton} ${D.actionButtonDanger}`,title:"Delete Sale",children:[a.jsx("i",{className:`fas fa-trash ${D.actionButtonIcon}`}),"Delete"]})})]})},se.sale_id))})})]})]}),Z&&a.jsx("div",{className:D.modalOverlay,children:a.jsxs("div",{className:D.modalDialog,children:[a.jsxs("div",{className:D.modalHeader,children:[a.jsx("h2",{className:D.modalDialogTitle,children:"Create New Business"}),a.jsx("button",{type:"button",onClick:()=>{$e({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),ie(!1),x(null)},className:D.modalCloseButton,children:a.jsx("i",{className:"fas fa-times"})})]}),p&&a.jsxs("div",{className:D.errorMessage,children:[a.jsx("i",{className:"fas fa-exclamation-triangle"}),p]}),a.jsxs("form",{onSubmit:Ie,className:D.modalDialogForm,children:[a.jsxs("div",{className:D.formFieldGroup,children:[a.jsxs("label",{className:D.formFieldLabel,children:["Business Name ",a.jsx("span",{className:D.required,children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:Pe.name,onChange:se=>$e(Ee=>({...Ee,name:se.target.value})),className:D.formFieldInput,placeholder:"Enter business name",maxLength:100})]}),a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Description"}),a.jsx("textarea",{value:Pe.description,onChange:se=>$e(Ee=>({...Ee,description:se.target.value})),className:D.formFieldTextarea,rows:3,placeholder:"Brief description of your business",maxLength:500}),a.jsx("small",{className:D.formFieldHelp,children:"Optional: Describe what your business does"})]}),a.jsxs("div",{className:D.formFieldGroup,children:[a.jsxs("label",{className:D.formFieldLabel,children:["Business Type ",a.jsx("span",{className:D.required,children:"*"})]}),a.jsxs("select",{value:Pe.business_type,onChange:se=>$e(Ee=>({...Ee,business_type:se.target.value})),className:D.formFieldSelect,required:!0,children:[a.jsx("option",{value:"",children:"Select business type"}),a.jsx("option",{value:"service",children:"Service (Custom pricing per transaction)"}),a.jsx("option",{value:"rental",children:"Rental (Fixed pricing with stock)"}),a.jsx("option",{value:"resale",children:"Resale (Fixed pricing with stock)"})]}),a.jsxs("small",{className:D.formFieldHelp,children:[Pe.business_type==="service"&&"Services allow custom pricing for each transaction",Pe.business_type==="rental"&&"Rentals have fixed prices and track stock quantities",Pe.business_type==="resale"&&"Resale items have fixed prices and track stock quantities"]})]}),a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Business Image"}),a.jsx("input",{type:"file",accept:"image/*",onChange:se=>{const Ee=se.target.files?.[0];V(Ee||null)},className:D.formFieldInput}),a.jsx("small",{className:D.formFieldHelp,children:"Optional: Upload an image for your business (max 5MB, will be compressed)"}),rt&&a.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#f0f0f0",borderRadius:"4px"},children:[a.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#7d8d86"}}),"Selected: ",rt.name]})]}),a.jsxs("div",{className:D.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>{$e({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),V(null),ie(!1),x(null)},className:`${D.standardButton} ${D.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:!Pe.name.trim()||!Pe.business_type||Ne,className:`${D.standardButton} ${D.standardButtonPrimary}`,children:Ne?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin",style:{marginRight:"8px"}}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Create Business"]})})]})]})]})}),q&&a.jsx("div",{className:D.modalOverlay,children:a.jsxs("div",{className:D.modalDialog,children:[a.jsx("h2",{className:D.modalDialogTitle,children:"Add Item"}),a.jsxs("form",{onSubmit:nt,className:D.modalDialogForm,children:[a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Business"}),a.jsxs("select",{required:!0,value:Re.business_id,onChange:se=>ht(Ee=>({...Ee,business_id:se.target.value})),className:D.formFieldSelect,children:[a.jsx("option",{value:"",children:"Select a business"}),t.map(se=>a.jsxs("option",{value:se.business_id,children:[se.name," (",se.business_type,")"]},se.business_id))]})]}),a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Item Name"}),a.jsx("input",{type:"text",required:!0,value:Re.name,onChange:se=>ht(Ee=>({...Ee,name:se.target.value})),className:D.formFieldInput,placeholder:"e.g., Haircut, Chair Rental, etc."})]}),Re.business_id&&t.find(se=>se.business_id.toString()===Re.business_id)?.business_type!=="service"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Price (€)"}),a.jsx("input",{type:"number",step:"0.01",value:Re.price,onChange:se=>ht(Ee=>({...Ee,price:se.target.value})),className:D.formFieldInput,placeholder:"0.00"})]}),a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Stock Quantity"}),a.jsx("input",{type:"number",min:"0",value:Re.stock_qty,onChange:se=>ht(Ee=>({...Ee,stock_qty:se.target.value})),className:D.formFieldInput,placeholder:"0"})]})]}),Re.business_id&&t.find(se=>se.business_id.toString()===Re.business_id)?.business_type==="service"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:D.formFieldGroup,children:a.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:0},children:[a.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"8px"}}),"Service items don't have fixed prices or stock. You'll enter the amount when recording a sale."]})}),a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Service Notes"}),a.jsx("textarea",{value:Re.notes,onChange:se=>ht(Ee=>({...Ee,notes:se.target.value})),className:D.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details for this service...",maxLength:500}),a.jsx("small",{className:D.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details for this service"})]})]}),a.jsxs("div",{className:D.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>P(!1),className:`${D.standardButton} ${D.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"submit",className:`${D.standardButton} ${D.standardButtonSuccess}`,children:"Add Item"})]})]})]})}),X&&a.jsx("div",{className:D.modalOverlay,style:{zIndex:2e3},children:a.jsxs("div",{className:D.modalDialog,children:[a.jsx("h2",{className:D.modalDialogTitle,children:"Record Sale"}),a.jsxs("form",{onSubmit:vt,className:D.modalDialogForm,children:[a.jsxs("div",{className:D.formGroup,children:[a.jsx("label",{className:D.formLabel,children:"Item"}),a.jsxs("select",{required:!0,value:xt.item_id,onChange:se=>Dt(Ee=>({...Ee,item_id:se.target.value})),className:D.formFieldSelect,children:[a.jsx("option",{value:"",children:"Select an item"}),s.map(se=>a.jsxs("option",{value:se.item_id,children:[se.name," - ",se.side_businesses?.name,se.side_businesses&&t.find(Ee=>Ee.name===se.side_businesses?.name)?.business_type==="service"?" (Service - Custom Amount)":se.price?` (€${se.price})`:""]},se.item_id))]})]}),a.jsxs("div",{className:D.formGroup,children:[a.jsx("label",{className:D.formLabel,children:"Quantity"}),a.jsx("input",{type:"number",min:"1",required:!0,value:xt.quantity,onChange:se=>Dt(Ee=>({...Ee,quantity:parseInt(se.target.value)})),className:D.formFieldInput})]}),a.jsxs("div",{className:D.formGroup,children:[a.jsx("label",{className:D.formLabel,children:"Total Amount (€)"}),a.jsx("input",{type:"number",step:"0.01",required:!0,value:xt.total_amount,onChange:se=>Dt(Ee=>({...Ee,total_amount:se.target.value})),className:D.formFieldInput,placeholder:"0.00"}),xt.item_id&&s.find(se=>se.item_id.toString()===xt.item_id)&&t.find(se=>se.name===s.find(Ee=>Ee.item_id.toString()===xt.item_id)?.side_businesses?.name)?.business_type==="service"&&a.jsxs("p",{style:{color:"#7d8d86",fontSize:"12px",margin:"4px 0 0 0"},children:[a.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"4px"}}),"Enter the custom amount for this service"]})]}),a.jsxs("div",{className:D.formGroup,children:[a.jsx("label",{className:D.formLabel,children:"Payment Method"}),a.jsxs("select",{value:xt.payment_method,onChange:se=>Dt(Ee=>({...Ee,payment_method:se.target.value})),className:D.formFieldSelect,children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"mobile",children:"Mobile"})]})]}),a.jsxs("div",{className:D.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>fe(!1),className:`${D.standardButton} ${D.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"submit",className:`${D.standardButton} ${D.standardButtonSuccess}`,children:"Record Sale"})]})]})]})}),oe&&J&&a.jsx("div",{className:D.modalOverlay,children:a.jsxs("div",{className:D.modalDialog,style:{maxWidth:"600px"},children:[a.jsx("h2",{className:D.modalDialogTitle,children:"Business Details"}),a.jsxs("div",{className:D.businessDetailModalHeader,children:[a.jsx("div",{className:D.businessDetailModalIcon,children:J.image_url?a.jsx("img",{src:J.image_url,alt:J.name,style:{width:"100%",height:"100%",borderRadius:"16px",objectFit:"cover"}}):a.jsx("i",{className:J.icon||"fa-solid fa-briefcase"})}),a.jsxs("div",{className:D.businessDetailModalInfo,children:[a.jsx("h3",{className:D.businessDetailModalName,children:J.name}),a.jsx("p",{className:D.businessDetailModalDescription,children:J.description||"No description provided"}),a.jsxs("div",{className:D.businessDetailModalMeta,children:[a.jsx("span",{className:`${D.statusBadge} ${Cr(J.business_type)}`,children:J.business_type||"service"}),a.jsxs("span",{className:D.businessDetailModalDate,children:["Created: ",new Date(J.created_at).toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:D.businessDetailModalStats,children:[a.jsx("div",{className:D.statisticsCard,children:a.jsxs("div",{className:D.statisticsCardContent,children:[a.jsxs("div",{className:D.statisticsInfo,children:[a.jsx("p",{className:D.statisticsLabel,children:"Total Items"}),a.jsx("p",{className:D.statisticsValue,children:s.filter(se=>se.business_id===J.business_id).length})]}),a.jsx("i",{className:`fas fa-box ${D.statisticsIcon} ${D.statisticsIconBlue}`})]})}),a.jsx("div",{className:D.statisticsCard,children:a.jsxs("div",{className:D.statisticsCardContent,children:[a.jsxs("div",{className:D.statisticsInfo,children:[a.jsx("p",{className:D.statisticsLabel,children:"Current Stock"}),a.jsx("p",{className:D.statisticsValue,children:K?.currentStock||0})]}),a.jsx("i",{className:`fas fa-warehouse ${D.statisticsIcon} ${D.statisticsIconOrange}`})]})})]}),a.jsxs("div",{className:D.businessAnalyticsSection,children:[a.jsx("h4",{className:D.analyticsSectionTitle,children:"Sales Analytics"}),a.jsxs("div",{className:D.analyticsGrid,children:[a.jsxs("div",{className:D.analyticsCard,children:[a.jsxs("div",{className:D.analyticsCardHeader,children:[a.jsx("i",{className:`fas fa-calendar-day ${D.analyticsIcon} ${D.analyticsIconBlue}`}),a.jsx("span",{className:D.analyticsPeriod,children:"Today"})]}),a.jsxs("div",{className:D.analyticsCardContent,children:[a.jsxs("div",{className:D.analyticsMetric,children:[a.jsx("span",{className:D.analyticsLabel,children:"Sales"}),a.jsx("span",{className:D.analyticsValue,children:K?.dailySales.count||0})]}),a.jsxs("div",{className:D.analyticsMetric,children:[a.jsx("span",{className:D.analyticsLabel,children:"Revenue"}),a.jsxs("span",{className:D.analyticsValue,children:["€",(K?.dailySales.revenue||0).toFixed(2)]})]})]})]}),a.jsxs("div",{className:D.analyticsCard,children:[a.jsxs("div",{className:D.analyticsCardHeader,children:[a.jsx("i",{className:`fas fa-calendar-week ${D.analyticsIcon} ${D.analyticsIconGreen}`}),a.jsx("span",{className:D.analyticsPeriod,children:"This Week"})]}),a.jsxs("div",{className:D.analyticsCardContent,children:[a.jsxs("div",{className:D.analyticsMetric,children:[a.jsx("span",{className:D.analyticsLabel,children:"Sales"}),a.jsx("span",{className:D.analyticsValue,children:K?.weeklySales.count||0})]}),a.jsxs("div",{className:D.analyticsMetric,children:[a.jsx("span",{className:D.analyticsLabel,children:"Revenue"}),a.jsxs("span",{className:D.analyticsValue,children:["€",(K?.weeklySales.revenue||0).toFixed(2)]})]})]})]}),a.jsxs("div",{className:D.analyticsCard,children:[a.jsxs("div",{className:D.analyticsCardHeader,children:[a.jsx("i",{className:`fas fa-calendar-alt ${D.analyticsIcon} ${D.analyticsIconPurple}`}),a.jsx("span",{className:D.analyticsPeriod,children:"This Month"})]}),a.jsxs("div",{className:D.analyticsCardContent,children:[a.jsxs("div",{className:D.analyticsMetric,children:[a.jsx("span",{className:D.analyticsLabel,children:"Sales"}),a.jsx("span",{className:D.analyticsValue,children:K?.monthlySales.count||0})]}),a.jsxs("div",{className:D.analyticsMetric,children:[a.jsx("span",{className:D.analyticsLabel,children:"Revenue"}),a.jsxs("span",{className:D.analyticsValue,children:["€",(K?.monthlySales.revenue||0).toFixed(2)]})]})]})]})]})]}),a.jsxs("div",{className:D.businessDetailModalItems,children:[a.jsxs("div",{className:D.itemsSectionHeader,children:[a.jsx("h4",{children:"Items in this business:"}),a.jsxs("button",{onClick:()=>P(!0),className:D.restockButton,title:"Add new item",children:[a.jsx("i",{className:"fas fa-plus"}),"Add Item"]})]}),s.filter(se=>se.business_id===J.business_id).length===0?a.jsx("p",{className:D.noItemsMessage,children:"No items added yet."}):a.jsx("div",{className:D.listContainer,children:s.filter(se=>se.business_id===J.business_id).map(se=>a.jsx("div",{className:D.listItemCard,children:a.jsxs("div",{className:D.listItemCardContent,children:[a.jsxs("div",{className:D.listItemCardMain,children:[a.jsx("h4",{className:D.listItemCardTitle,children:se.name}),a.jsxs("div",{className:D.listItemCardMeta,children:[se.price?a.jsxs("span",{className:D.listItemCardPrice,children:["€",se.price]}):a.jsx("span",{className:D.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),se.stock_qty!==null&&a.jsxs("span",{className:D.listItemCardStock,children:["Stock: ",se.stock_qty]}),J?.business_type==="service"&&a.jsx("span",{className:`${D.statusBadge} ${D.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]}),se.notes&&a.jsxs("div",{className:D.listItemCardNotes,children:[a.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"6px",color:"#6b7280"}}),a.jsx("span",{style:{fontSize:"12px",color:"#6b7280",fontStyle:"italic"},children:se.notes.length>100?`${se.notes.substring(0,100)}...`:se.notes})]})]}),a.jsxs("div",{className:D.listItemCardActions,children:[a.jsxs("button",{onClick:()=>gt(se),className:`${D.actionButton} ${D.editActionButton}`,title:"Edit item",children:[a.jsx("i",{className:`fas fa-edit ${D.actionButtonIcon}`}),"Edit"]}),se.stock_qty!==null&&a.jsxs("button",{onClick:()=>Ge(se),className:`${D.actionButton} ${D.restockActionButton}`,title:"Restock item",children:[a.jsx("i",{className:`fas fa-boxes-stacked ${D.actionButtonIcon}`}),"Restock"]}),a.jsxs("button",{onClick:()=>{Dt(Ee=>({...Ee,item_id:se.item_id.toString()})),fe(!0)},className:D.actionButton,title:"Record sale",children:[a.jsx("i",{className:`fas fa-plus ${D.actionButtonIcon}`}),"Sale"]})]})]})},se.item_id))})]}),a.jsxs("div",{className:D.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>re(!1),className:`${D.standardButton} ${D.standardButtonSecondary}`,children:"Close"}),a.jsx("button",{type:"button",onClick:()=>{re(!1),le(J)},className:`${D.standardButton} ${D.standardButtonDanger}`,children:"Delete Business"})]})]})}),ye&&a.jsx("div",{className:D.modalOverlay,children:a.jsxs("div",{className:D.modalDialog,children:[a.jsx("h2",{className:D.modalDialogTitle,children:"Delete Business"}),a.jsxs("p",{className:D.deleteConfirmationWarning,children:["Are you sure you want to delete ",a.jsx("strong",{children:ye.name}),"?"]}),a.jsx("p",{className:D.deleteConfirmationWarningText,children:"This will permanently delete the business, all its items, and all related sales records. This action cannot be undone."}),a.jsxs("div",{className:D.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>le(null),className:`${D.standardButton} ${D.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>br(ye.business_id),className:`${D.standardButton} ${D.standardButtonDanger}`,children:"Delete Business"})]})]})}),Ae&&a.jsx("div",{className:D.modalOverlay,children:a.jsxs("div",{className:D.modalDialog,children:[a.jsx("h2",{className:D.modalDialogTitle,children:"Delete Sale"}),a.jsx("p",{className:D.deleteConfirmationWarning,children:"Are you sure you want to delete this sale?"}),a.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"8px",margin:"16px 0",border:"1px solid #e9ecef"},children:[a.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:Ae.side_business_items?.name||"Unknown Item"}),a.jsx("p",{style:{margin:"0 0 4px 0",color:"#6c757d",fontSize:"14px"},children:Ae.side_business_items?.side_businesses?.name||"Unknown Business"}),a.jsxs("p",{style:{margin:"0 0 4px 0",color:"#6c757d",fontSize:"14px"},children:["Quantity: ",Ae.quantity," • Total: €",Ae.total_amount]}),a.jsxs("p",{style:{margin:"0",color:"#6c757d",fontSize:"14px"},children:[new Date(Ae.date_time).toLocaleDateString()," at ",new Date(Ae.date_time).toLocaleTimeString()]})]}),a.jsx("p",{className:D.deleteConfirmationWarningText,children:"This will permanently delete the sale record. This action cannot be undone."}),a.jsxs("div",{className:D.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>B(null),className:`${D.standardButton} ${D.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>er(Ae.sale_id),className:`${D.standardButton} ${D.standardButtonDanger}`,children:"Delete Sale"})]})]})}),L&&Y.item_id&&a.jsx("div",{className:D.modalOverlay,style:{zIndex:2e3},children:a.jsxs("div",{className:D.modalDialog,children:[a.jsx("h2",{className:D.modalDialogTitle,children:"Restock Item"}),a.jsxs("div",{className:D.restockInfo,children:[a.jsx("p",{className:D.restockItemName,children:s.find(se=>se.item_id===Y.item_id)?.name}),a.jsxs("p",{className:D.restockCurrentStock,children:["Current Stock: ",a.jsx("strong",{children:Y.current_stock})]})]}),a.jsxs("form",{onSubmit:ce,className:D.modalDialogForm,children:[a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Restock Quantity"}),a.jsx("input",{type:"number",min:"1",required:!0,value:Y.restock_quantity,onChange:se=>me(Ee=>({...Ee,restock_quantity:se.target.value})),className:D.formFieldInput,placeholder:"Enter quantity to add"})]}),a.jsx("div",{className:D.restockPreview,children:a.jsxs("p",{className:D.restockPreviewText,children:["New stock will be: ",a.jsx("strong",{children:Y.current_stock+(parseInt(Y.restock_quantity)||0)})]})}),a.jsxs("div",{className:D.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>z(!1),className:`${D.standardButton} ${D.standardButtonSecondary}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${D.standardButton} ${D.standardButtonSuccess}`,children:[a.jsx("i",{className:"fas fa-boxes-stacked",style:{marginRight:"8px"}}),"Restock Item"]})]})]})]})}),Me&&Ce&&a.jsx("div",{className:D.modalOverlay,style:{zIndex:2e3},children:a.jsxs("div",{className:D.modalDialog,children:[a.jsx("h2",{className:D.modalDialogTitle,children:"Edit Item"}),a.jsxs("form",{onSubmit:It,className:D.modalDialogForm,children:[a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Item Name"}),a.jsx("input",{type:"text",required:!0,value:Ce.name,onChange:se=>ne(Ee=>Ee?{...Ee,name:se.target.value}:null),className:D.formFieldInput,placeholder:"Enter item name"})]}),a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Price (€)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:Ce.price||"",onChange:se=>ne(Ee=>Ee?{...Ee,price:se.target.value?parseFloat(se.target.value):null}:null),className:D.formFieldInput,placeholder:"Enter price (leave empty for custom pricing)"}),a.jsx("small",{className:D.formFieldHelp,children:"Leave empty for service items with custom pricing"})]}),a.jsxs("div",{className:D.formFieldGroup,children:[a.jsx("label",{className:D.formFieldLabel,children:"Notes"}),a.jsx("textarea",{value:Ce.notes||"",onChange:se=>ne(Ee=>Ee?{...Ee,notes:se.target.value}:null),className:D.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details...",maxLength:500}),a.jsx("small",{className:D.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details"})]}),a.jsxs("div",{className:D.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>He(!1),className:`${D.standardButton} ${D.standardButtonSecondary}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${D.standardButton} ${D.standardButtonPrimary}`,children:[a.jsx("i",{className:"fas fa-save",style:{marginRight:"8px"}}),"Update Item"]})]})]})]})})]})},j6=()=>{const{data:e,isLoading:t,error:r}=iu(),s=E0(),o=Jm({mutationFn:async d=>{const{error:f}=await Oe.from("sales").update({partial_payment:!1,notes:null}).eq("sale_id",d);if(f)throw f},onSuccess:()=>{s.invalidateQueries({queryKey:["salesData"]})}}),c=Jm({mutationFn:async d=>{const{error:f}=await Oe.from("sale_items").delete().eq("sale_id",d);if(f)throw f;const{error:h}=await Oe.from("sales").delete().eq("sale_id",d);if(h)throw h},onSuccess:()=>{s.invalidateQueries({queryKey:["salesData"]})}});return{transactions:e?.sales||[],loading:t,error:r?.message||null,fetchTransactions:()=>s.invalidateQueries({queryKey:["salesData"]}),deleteTransaction:c.mutateAsync,resolvePartialPayment:o.mutateAsync}},Ih=({children:e,maxWidth:t="1400px"})=>a.jsx("div",{style:{minHeight:"100vh",background:"#f8fafc",fontFamily:"Poppins, sans-serif",padding:"20px"},children:a.jsx("div",{style:{maxWidth:t,margin:"0 auto",background:"#ffffff",borderRadius:"12px",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:e})}),E6=({title:e,subtitle:t,icon:r,children:s})=>a.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:s?"16px":"0"},children:[a.jsxs("div",{children:[a.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[r&&a.jsx("i",{className:r,style:{marginRight:"12px",color:"#7d8d86"}}),e]}),t&&a.jsx("p",{style:{fontSize:"16px",color:"#6b7280",margin:"0"},children:t})]}),s]})}),pv=({children:e,className:t="",style:r={},padding:s="md",background:o="white",hover:c=!1})=>{const d={borderRadius:"12px",border:"1px solid #e5e7eb",transition:c?"all 0.2s ease":"none",...r},f={white:{background:"#ffffff"},gray:{background:"#f9fafb"}},h={sm:{padding:"12px"},md:{padding:"20px"},lg:{padding:"24px"}},p={...d,...f[o],...h[s]};return a.jsx("div",{className:t,style:p,onMouseEnter:x=>{c&&(x.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",x.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:x=>{c&&(x.currentTarget.style.boxShadow="none",x.currentTarget.style.transform="translateY(0)")},children:e})},k6=({searchTerm:e,setSearchTerm:t,paymentFilter:r,setPaymentFilter:s,dateFilter:o,setDateFilter:c,selectedDate:d,showCalendar:f,setShowCalendar:h,itemsPerPage:p,setItemsPerPage:x,onCalendarDateSelect:y,generateCalendarDays:v,calendarDate:b,setCalendarDate:w,partialPaymentFilter:_,setPartialPaymentFilter:S})=>a.jsxs(pv,{background:"gray",padding:"md",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",alignItems:"end"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Search Transactions"}),a.jsx("input",{type:"text",placeholder:"Search by ID, customer, cashier...",value:e,onChange:N=>t(N.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Method"}),a.jsxs("select",{value:r,onChange:N=>s(N.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:"all",children:"All Methods"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Type"}),a.jsxs("select",{value:_,onChange:N=>S(N.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:"all",children:"All Payments"}),a.jsx("option",{value:"full",children:"Full Payments"}),a.jsx("option",{value:"partial",children:"Partial Payments"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Date Range"}),a.jsxs("select",{value:o,onChange:N=>c(N.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:"all",children:"All Time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"Last 7 Days"}),a.jsx("option",{value:"month",children:"Last 30 Days"}),a.jsx("option",{value:"custom",children:"Custom Date"})]})]}),o==="custom"&&a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Select Date"}),a.jsx("button",{onClick:()=>h(!f),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff",cursor:"pointer",textAlign:"left"},children:d?new Date(d).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Select a date"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Items Per Page"}),a.jsxs("select",{value:p,onChange:N=>x(Number(N.target.value)),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]})]})]}),f&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("button",{onClick:()=>w(new Date(b.getFullYear(),b.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:b.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>w(new Date(b.getFullYear(),b.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(N=>a.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:N},N))}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:v().map((N,R)=>{const I=N.getMonth()===b.getMonth(),G=N.toDateString()===new Date().toDateString(),Z=d&&N.toDateString()===new Date(d).toDateString();return a.jsx("button",{onClick:()=>y(N),style:{background:Z?"#7d8d86":"transparent",color:Z?"#f1f0e4":I?"#3e3f29":"#bca88d",border:G?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:I?1:.5},children:N.getDate()},R)})}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:a.jsx("button",{onClick:()=>y(new Date),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer"},children:"Today"})})]})})]}),Ll=({children:e,onClick:t,type:r="button",variant:s="primary",size:o="md",disabled:c=!1,className:d="",style:f={}})=>{const h={border:"none",borderRadius:"6px",cursor:c?"not-allowed":"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500",...f},p={primary:{background:"#7d8d86",color:"#ffffff"},secondary:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db"},danger:{background:"#3e3f29",color:"#f1f0e4"},success:{background:"#10b981",color:"#ffffff"}},x={primary:{background:"#6a7a73"},secondary:{background:"#e5e7eb"},danger:{background:"#2a2b1f"},success:{background:"#059669"}},y={sm:{padding:"6px 12px",fontSize:"12px"},md:{padding:"8px 16px",fontSize:"14px"},lg:{padding:"12px 24px",fontSize:"16px"}},v={...h,...p[s],...y[o],opacity:c?.6:1};return a.jsx("button",{type:r,onClick:t,disabled:c,className:d,style:v,onMouseEnter:b=>{c||Object.assign(b.currentTarget.style,x[s])},onMouseLeave:b=>{c||Object.assign(b.currentTarget.style,p[s])},children:e})},C6=({transaction:e,onTransactionClick:t,onDeleteTransaction:r,onResolvePartialPayment:s})=>{const o=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),c=f=>new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),d=f=>{switch(f.toLowerCase()){case"cash":return"fa-solid fa-money-bill";case"card":return"fa-solid fa-credit-card";case"mobile_money":return"fa-solid fa-mobile";default:return"fa-solid fa-money-bill"}};return a.jsxs("div",{className:"transaction-card",onClick:()=>t(e.sale_id),style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",background:e.partial_payment?"#fef2f2":"#ffffff",borderRadius:"8px",border:e.partial_payment?"2px solid #dc2626":"2px solid #374151",cursor:"pointer",transition:"all 0.2s ease",position:"relative",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",marginBottom:"12px"},onMouseEnter:f=>{const h=f.currentTarget;h.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",h.style.transform="translateY(-2px)",h.style.border=e.partial_payment?"2px solid #dc2626":"2px solid #374151"},onMouseLeave:f=>{const h=f.currentTarget;h.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.15)",h.style.transform="translateY(0)",h.style.border=e.partial_payment?"2px solid #dc2626":"2px solid #374151"},children:[a.jsxs("div",{style:{width:"60px",textAlign:"center"},children:[a.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#7d8d86",background:"#f3f4f6",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:["#",e.sale_id.toString().slice(-6)]}),e.partial_payment&&a.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"#ffffff",background:"#dc2626",padding:"2px 6px",borderRadius:"3px",marginTop:"4px",display:"inline-block"},children:"PARTIAL"})]}),a.jsx("div",{style:{minWidth:"140px",fontSize:"14px",color:"#6b7280"},children:c(e.datetime)}),a.jsx("div",{style:{flex:1,minWidth:"120px",fontSize:"14px",color:"#374151",fontWeight:"500"},children:e.customer_name}),a.jsx("div",{style:{minWidth:"100px",fontSize:"14px",color:"#6b7280"},children:e.cashier_name}),a.jsxs("div",{style:{minWidth:"120px",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"#374151"},children:[a.jsx("i",{className:d(e.payment_method),style:{color:"#7d8d86"}}),a.jsx("span",{style:{textTransform:"capitalize"},children:e.payment_method.replace("_"," ")})]}),a.jsx("div",{style:{minWidth:"120px",textAlign:"right",fontSize:"16px",fontWeight:"600",color:e.partial_payment?"#dc2626":"#059669"},children:e.partial_payment?a.jsxs("div",{children:[a.jsxs("div",{style:{fontSize:"14px",color:"#dc2626"},children:["Paid: ",o(e.partial_amount||0)]}),a.jsxs("div",{style:{fontSize:"12px",color:"#dc2626"},children:["Owed: ",o(e.remaining_amount||0)]})]}):o(e.total_amount)}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.partial_payment&&s&&a.jsxs(Ll,{variant:"primary",size:"sm",onClick:f=>{f.stopPropagation(),s(e.sale_id)},children:[a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px"}}),"Resolve"]}),a.jsxs(Ll,{variant:"danger",size:"sm",onClick:f=>{f.stopPropagation(),r(e.sale_id)},children:[a.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"10px"}}),"Delete"]}),a.jsx("div",{style:{color:"#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]})},A6=({currentPage:e,totalPages:t,onPageChange:r,startIndex:s,endIndex:o,totalItems:c})=>{if(t<=1)return null;const d=()=>{const f=[];if(t<=5)for(let p=1;p<=t;p++)f.push(p);else if(e<=3){for(let p=1;p<=4;p++)f.push(p);f.push("..."),f.push(t)}else if(e>=t-2){f.push(1),f.push("...");for(let p=t-3;p<=t;p++)f.push(p)}else{f.push(1),f.push("...");for(let p=e-1;p<=e+1;p++)f.push(p);f.push("..."),f.push(t)}return f};return a.jsxs("div",{style:{background:"#f9fafb",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[a.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-list"}),a.jsxs("span",{children:["Showing ",s+1,"-",Math.min(o,c)," of ",c," transactions"]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsxs(Ll,{variant:"secondary",size:"sm",onClick:()=>r(e-1),disabled:e===1,children:[a.jsx("i",{className:"fa-solid fa-chevron-left"}),"Previous"]}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:d().map((f,h)=>a.jsx(gy.Fragment,{children:f==="..."?a.jsx("span",{style:{padding:"8px 12px",color:"#6b7280",fontSize:"14px"},children:"..."}):a.jsx(Ll,{variant:e===f?"primary":"secondary",size:"sm",onClick:()=>r(f),style:{minWidth:"40px"},children:f})},h))}),a.jsxs(Ll,{variant:"secondary",size:"sm",onClick:()=>r(e+1),disabled:e===t,children:["Next",a.jsx("i",{className:"fa-solid fa-chevron-right"})]})]})]})},N6=({isOpen:e,onClose:t,selectedDate:r,onDateSelect:s,onTodaySelect:o,calendarDate:c,onCalendarDateChange:d})=>{const f=(h,p)=>{const x=new Date(h,p,1),y=new Date(x);y.setDate(y.getDate()-x.getDay());const v=[],b=new Date(y);for(let w=0;w<42;w++)v.push(new Date(b)),b.setDate(b.getDate()+1);return v};return e?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},children:c.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[a.jsx("button",{onClick:()=>d(new Date(c.getFullYear(),c.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("button",{onClick:()=>d(new Date(c.getFullYear(),c.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})}),a.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"20px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:"×"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>a.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:h},h)),f(c.getFullYear(),c.getMonth()).map((h,p)=>{const x=h.getMonth()===c.getMonth(),y=new Date,v=new Date(y.getFullYear(),y.getMonth(),y.getDate()),b=new Date(h.getFullYear(),h.getMonth(),h.getDate()),w=new Date(r.getFullYear(),r.getMonth(),r.getDate()),_=b.getTime()===v.getTime(),S=b.getTime()===w.getTime();return a.jsx("button",{onClick:()=>s(h),style:{background:S?"#7d8d86":"transparent",color:S?"#ffffff":x?"#1f2937":"#9ca3af",border:_?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:x?1:.5},onMouseEnter:N=>{if(!S){const R=N.currentTarget;R.style.background="#f3f4f6",R.style.color="#1f2937"}},onMouseLeave:N=>{if(!S){const R=N.currentTarget;R.style.background="transparent",R.style.color=x?"#1f2937":"#9ca3af"}},children:h.getDate()},p)})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:a.jsx("button",{onClick:o,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#6a7a73"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="#7d8d86"},children:"Today"})})]})}):null},R6=()=>{const e=Cs(),{user:t}=Sn(),{transactions:r,loading:s,error:o,deleteTransaction:c,resolvePartialPayment:d}=j6(),[f,h]=j.useState(""),[p,x]=j.useState("all"),[y,v]=j.useState("all"),[b,w]=j.useState(null),[_,S]=j.useState("all"),[N,R]=j.useState(!1),[I,G]=j.useState(new Date),[Z,ie]=j.useState(()=>{const Ce=new Date;return new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate())}),[q,P]=j.useState(1),[te,ue]=j.useState(25),[X]=j.useState("datetime"),[fe]=j.useState("desc"),J=Ce=>Ce.filter(ne=>{const Pe=!f||ne.sale_id.toString().includes(f)||ne.customer_name?.toLowerCase().includes(f.toLowerCase())||ne.cashier_name?.toLowerCase().includes(f.toLowerCase()),$e=p==="all"||ne.payment_method===p,rt=()=>_==="all"?!0:_==="partial"?ne.partial_payment===!0:_==="full"?!ne.partial_payment:!0,V=()=>{if(b){const xt=new Date(ne.datetime),Dt=new Date(xt.getFullYear(),xt.getMonth(),xt.getDate()),[bt,Ie,nt]=b.split("-").map(Number),vt=new Date(bt,Ie-1,nt);return Dt.getTime()===vt.getTime()}if(y==="all")return!0;const Ne=new Date,st=new Date(ne.datetime),Re=new Date(Ne.getFullYear(),Ne.getMonth(),Ne.getDate()),ht=new Date(st.getFullYear(),st.getMonth(),st.getDate());switch(y){case"today":return ht.getTime()===Re.getTime();case"week":const xt=new Date(Ne.getTime()-10080*60*1e3);return st>=xt;case"month":const Dt=new Date(Ne.getTime()-720*60*60*1e3);return st>=Dt;default:return!0}};return Pe&&$e&&rt()&&V()}),Q=Ce=>[...Ce].sort((ne,Pe)=>{let $e=ne[X],rt=Pe[X];return X==="datetime"&&($e=new Date($e).getTime(),rt=new Date(rt).getTime()),fe==="asc"?$e>rt?1:-1:$e<rt?1:-1}),oe=J(r),re=Q(oe),ye=Math.ceil(re.length/te),le=(q-1)*te,Ae=le+te,B=re.slice(le,Ae),K=()=>{const Ce=I.getFullYear(),ne=I.getMonth(),Pe=new Date(Ce,ne,1),$e=new Date(Pe);$e.setDate($e.getDate()-Pe.getDay());const rt=[];for(let V=0;V<42;V++){const Ne=new Date($e);Ne.setDate($e.getDate()+V),rt.push(Ne)}return rt},E=Ce=>{const ne=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate());ie(ne);const Pe=ne.getFullYear(),$e=String(ne.getMonth()+1).padStart(2,"0"),rt=String(ne.getDate()).padStart(2,"0"),V=`${Pe}-${$e}-${rt}`;w(V),v("custom"),R(!1)},L=()=>{const Ce=new Date,ne=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate());ie(ne);const Pe=ne.getFullYear(),$e=String(ne.getMonth()+1).padStart(2,"0"),rt=String(ne.getDate()).padStart(2,"0"),V=`${Pe}-${$e}-${rt}`;w(V),v("custom"),R(!1)},z=Ce=>{e(`/transaction/${Ce}`)},Y=async Ce=>{window.confirm("Are you sure you want to delete this transaction? This action cannot be undone and will restore the stock for all items in this transaction.")&&await c(Ce)&&alert("Transaction deleted successfully!")},me=async Ce=>{window.confirm("Are you sure you want to mark this partial payment as resolved? This will update the transaction to show it as fully paid.")&&await d(Ce)&&alert("Partial payment resolved successfully!")},Me=Ce=>{P(Ce),window.scrollTo({top:0,behavior:"smooth"})},He=Ce=>{ue(Ce),P(1)};return j.useEffect(()=>{P(1)},[f,p,y,b,X,fe]),s?a.jsx(Ih,{children:a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"20px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transactions..."]})})}):o?a.jsx(Ih,{children:a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"18px",color:"#ef4444",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"12px",display:"block"}}),o]})})}):a.jsxs(Ih,{children:[a.jsx(E6,{title:"Transactions",subtitle:"View and manage all sales transactions",icon:"fa-solid fa-receipt",children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[a.jsxs("div",{onClick:()=>R(!0),style:{background:"#3e3f29",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),a.jsx("span",{style:{color:"#bca88d"},children:Z.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#1a1a1a",fontSize:"14px",flexWrap:"wrap"},children:[a.jsx("i",{className:"fa-solid fa-receipt"}),a.jsxs("span",{children:["Showing ",le+1,"-",Math.min(Ae,re.length)," of ",re.length," transactions",b&&a.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","on ",new Date(b).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),y!=="all"&&!b&&a.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","(",y==="today"?"Today":y==="week"?"Last 7 days":y==="month"?"Last 30 days":y,")"]})]})]})]})}),a.jsxs("div",{style:{padding:"24px 32px",flex:1},children:[a.jsx(k6,{searchTerm:f,setSearchTerm:h,paymentFilter:p,setPaymentFilter:x,dateFilter:y,setDateFilter:v,selectedDate:b,showCalendar:N,setShowCalendar:R,itemsPerPage:te,setItemsPerPage:He,onCalendarDateSelect:E,generateCalendarDays:K,calendarDate:I,setCalendarDate:G,partialPaymentFilter:_,setPartialPaymentFilter:S}),a.jsx(pv,{children:B.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:B.map(Ce=>a.jsx(C6,{transaction:Ce,onTransactionClick:z,onDeleteTransaction:Y,onResolvePartialPayment:me},Ce.sale_id))}):a.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",display:"block",color:"#d1d5db"}}),a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",margin:"0 0 8px 0"},children:"No transactions found"}),a.jsx("p",{style:{fontSize:"14px",margin:0},children:f||p!=="all"||_!=="all"||y!=="all"||Z?"Try adjusting your filters to see more results.":"No transactions have been recorded yet."})]})}),a.jsx(A6,{currentPage:q,totalPages:ye,onPageChange:Me,startIndex:le,endIndex:Ae,totalItems:re.length}),a.jsx(N6,{isOpen:N,onClose:()=>R(!1),selectedDate:Z,onDateSelect:E,onTodaySelect:L,calendarDate:I,onCalendarDateChange:G})]})]})},D6=()=>{const{transactionId:e}=FS(),t=Cs(),[r,s]=j.useState(null),[o,c]=j.useState([]),[d,f]=j.useState(!0),[h,p]=j.useState(!1),[x,y]=j.useState(!1),[v,b]=j.useState({payment_method:"",customer_id:null,notes:""}),[w,_]=j.useState([]),[S,N]=j.useState({});j.useEffect(()=>{e&&(R(),I())},[e]);const R=async()=>{try{f(!0);const Q=parseInt(e?.replace("TXN-","")||"0");if(!Q){console.error("Invalid transaction ID"),t("/sales");return}const{data:oe,error:re}=await Oe.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",Q).single();if(re){console.error("Error fetching transaction:",re),t("/sales");return}const ye={...oe,customer_name:oe.customers?.name||null,cashier_name:oe.users?.username||null};s(ye);const{data:le,error:Ae}=await Oe.from("sale_items").select(`
          *,
          products (
            name,
            category,
            weight_unit,
            price_per_unit,
            is_weighted,
            image_url
          )
        `).eq("sale_id",Q);if(Ae)console.error("Error fetching transaction items:",Ae);else{const B=(le||[]).map(K=>(K.products?.is_weighted&&console.log("Weighted item data:",{name:K.products.name,weight:K.weight,weight_unit:K.products.weight_unit,price_per_unit:K.products.price_per_unit,calculated_price:K.calculated_price,price_each:K.price_each}),{sale_item_id:K.sale_item_id,product_id:K.product_id,quantity:K.quantity,unit_price:K.price_each,total_price:K.calculated_price||(K.products?.is_weighted&&K.weight&&K.products?.price_per_unit?K.weight*K.products.price_per_unit:K.quantity*K.price_each),product_name:K.products?.name||"Unknown Product",product_category:K.products?.category||"Unknown Category",product_image:K.products?.image_url||null,weight:K.weight||void 0,weight_unit:K.products?.weight_unit||void 0,price_per_unit:K.products?.price_per_unit||void 0,is_weighted:K.products?.is_weighted||!1}));c(B)}}catch(Q){console.error("Error fetching transaction details:",Q),t("/sales")}finally{f(!1)}},I=async()=>{try{const{data:Q,error:oe}=await Oe.from("customers").select("id, name").order("name");oe?console.error("Error fetching customers:",oe):_(Q||[])}catch(Q){console.error("Error fetching customers:",Q)}},G=()=>{t("/dashboard")},Z=()=>{t(`/sales?transaction=${e}`)},ie=async()=>{if(r)try{y(!0);const Q=parseInt(e?.replace("TXN-","")||"0"),{error:oe}=await Oe.from("sales").update({payment_method:v.payment_method,customer_id:v.customer_id,notes:v.notes}).eq("sale_id",Q);if(oe){console.error("Error updating transaction:",oe),alert("Failed to update transaction. Please try again.");return}await R(),p(!1),alert("Transaction updated successfully!")}catch(Q){console.error("Error saving transaction:",Q),alert("Failed to save changes. Please try again.")}finally{y(!1)}},q=()=>{p(!1),b({payment_method:"",customer_id:null,notes:""}),N({})},P=(Q,oe)=>{oe<0||N(re=>({...re,[Q]:oe}))},te=async Q=>{if(confirm("Are you sure you want to remove this item from the transaction?"))try{const{error:oe}=await Oe.from("sale_items").delete().eq("sale_item_id",Q);if(oe){console.error("Error removing item:",oe),alert("Failed to remove item. Please try again.");return}await R(),alert("Item removed successfully!")}catch(oe){console.error("Error removing item:",oe),alert("Failed to remove item. Please try again.")}},ue=async(Q,oe)=>{if(oe<=0){te(Q);return}try{const re=o.find(Ae=>Ae.sale_item_id===Q);if(!re)return;const ye=oe*re.unit_price,{error:le}=await Oe.from("sale_items").update({quantity:oe,total_price:ye}).eq("sale_item_id",Q);if(le){console.error("Error updating item quantity:",le),alert("Failed to update item quantity. Please try again.");return}await R(),N(Ae=>{const B={...Ae};return delete B[Q],B}),alert("Item quantity updated successfully!")}catch(re){console.error("Error updating item quantity:",re),alert("Failed to update item quantity. Please try again.")}},X=async()=>{if(!(!r||!r.partial_payment||!window.confirm(`Complete payment for Transaction #${e}?

This will mark the remaining balance of €${r.remaining_amount?.toFixed(2)||"0.00"} as paid.

The transaction will be marked as fully paid.`)))try{const oe=parseInt(e?.replace("TXN-","")||"0"),{error:re}=await Oe.from("sales").update({partial_payment:!1,partial_amount:null,remaining_amount:null,partial_notes:null,notes:r.notes?`${r.notes}

Payment completed on ${new Date().toLocaleString()}`:`Payment completed on ${new Date().toLocaleString()}`}).eq("sale_id",oe);if(re){console.error("Error completing payment:",re),alert("Failed to complete payment. Please try again.");return}alert("Payment completed successfully!"),await R()}catch(oe){console.error("Error completing payment:",oe),alert("Failed to complete payment. Please try again.")}},fe=async()=>{if(!(!r||!window.confirm(`Are you sure you want to delete Transaction #${e}?

This will:
• Remove all items from this transaction
• Restore stock quantities for all items
• Delete the transaction record

This action cannot be undone!`)))try{const oe=parseInt(e?.replace("TXN-","")||"0");for(const le of o){const{data:Ae,error:B}=await Oe.from("products").select("stock_quantity").eq("product_id",le.product_id).single();if(B){console.error("Error fetching product stock:",B);continue}const{error:K}=await Oe.from("products").update({stock_quantity:Ae.stock_quantity+le.quantity,last_updated:new Date().toISOString()}).eq("product_id",le.product_id);K&&console.error("Error restoring stock:",K);const{error:E}=await Oe.from("inventory_movements").insert([{product_id:le.product_id,quantity_change:le.quantity,movement_type:"Transaction Deletion",reference_id:oe,notes:`Stock restored from deleted transaction #${e}`}]);E&&console.error("Error creating inventory movement:",E)}const{error:re}=await Oe.from("sale_items").delete().eq("sale_id",oe);if(re){console.error("Error deleting sale items:",re),alert("Failed to delete transaction items. Please try again.");return}const{error:ye}=await Oe.from("sales").delete().eq("sale_id",oe);if(ye){console.error("Error deleting sale:",ye),alert("Failed to delete transaction. Please try again.");return}alert("Transaction deleted successfully!"),t("/dashboard")}catch(oe){console.error("Error deleting transaction:",oe),alert("Failed to delete transaction. Please try again.")}},J=Q=>new Date(Q).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return d?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transaction details..."]})}):r?a.jsxs("div",{style:{padding:"0"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[a.jsx("button",{onClick:G,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease"},onMouseEnter:Q=>{Q.target.style.background="#7d8d86",Q.target.style.color="#f1f0e4"},onMouseLeave:Q=>{Q.target.style.background="none",Q.target.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-arrow-left"})}),a.jsxs("div",{children:[a.jsxs("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:["Transaction #",e]}),a.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:J(r.datetime)})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsxs("button",{onClick:fe,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:Q=>{Q.target.style.background="#dc2626"},onMouseLeave:Q=>{Q.target.style.background="#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"14px"}}),"Delete Transaction"]}),h?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:ie,disabled:x,style:{background:x?"#9ca3af":"#10b981",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:Q=>{x||(Q.target.style.background="#059669")},onMouseLeave:Q=>{x||(Q.target.style.background="#10b981")},children:[a.jsx("i",{className:`fa-solid ${x?"fa-spinner":"fa-save"}`,style:{fontSize:"14px",animation:x?"spin 1s linear infinite":"none"}}),x?"Saving...":"Save"]}),a.jsxs("button",{onClick:q,disabled:x,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:Q=>{x||(Q.target.style.background="#dc2626")},onMouseLeave:Q=>{x||(Q.target.style.background="#ef4444")},children:[a.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"14px"}}),"Cancel"]})]}):a.jsxs("button",{onClick:Z,style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:Q=>{Q.target.style.background="#bca88d"},onMouseLeave:Q=>{Q.target.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-edit",style:{fontSize:"14px"}}),"Edit"]})]})]}),a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Total Amount"}),a.jsxs("p",{style:{fontSize:"28px",fontWeight:"bold",color:"#3e3f29",margin:0},children:["€",r.total_amount.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Payment Method"}),h?a.jsxs("select",{value:v.payment_method,onChange:Q=>b({...v,payment_method:Q.target.value}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"credit",children:"Credit"})]}):a.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0,textTransform:"capitalize"},children:r.payment_method})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Customer"}),h?a.jsxs("select",{value:v.customer_id||"",onChange:Q=>b({...v,customer_id:Q.target.value?parseInt(Q.target.value):null}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[a.jsx("option",{value:"",children:"Walk-in Customer"}),w.map(Q=>a.jsx("option",{value:Q.id,children:Q.name},Q.id))]}):a.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:r.customer_name||"Walk-in Customer"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Cashier"}),a.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:r.cashier_name||"System"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Items Count"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:[o.length," items"]})]}),r.discount_applied&&r.discount_applied>0&&a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Discount Applied"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#ef4444",margin:0},children:["-€",r.discount_applied.toFixed(2)]})]})]}),r.partial_payment&&a.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px",marginTop:"24px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-credit-card",style:{color:"#f59e0b",fontSize:"16px"}}),a.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#92400e",margin:0},children:"Partial Payment Transaction"})]}),a.jsxs("button",{onClick:X,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:Q=>{Q.target.style.background="#6b7280"},onMouseLeave:Q=>{Q.target.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"12px"}}),"Complete Payment"]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Amount Paid"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#059669",margin:0},children:["€",r.partial_amount?.toFixed(2)||"0.00"]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Remaining Balance"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#dc2626",margin:0},children:["€",r.remaining_amount?.toFixed(2)||"0.00"]})]}),r.partial_notes&&a.jsxs("div",{style:{gridColumn:"1 / -1"},children:[a.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Notes"}),a.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:0,fontStyle:"italic"},children:r.partial_notes})]})]})]}),a.jsxs("div",{style:{marginTop:"24px"},children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Notes"}),h?a.jsx("textarea",{value:v.notes,onChange:Q=>b({...v,notes:Q.target.value}),placeholder:"Add transaction notes...",style:{width:"100%",minHeight:"80px",fontSize:"14px",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"12px",resize:"vertical",fontFamily:"inherit"}}):a.jsx("p",{style:{fontSize:"16px",color:"#3e3f29",margin:0,fontStyle:r.notes?"normal":"italic",opacity:r.notes?1:.6},children:r.notes||"No notes added"})]})]}),a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[a.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 24px 0",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"20px"}}),"Transaction Items"]}),o.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map((Q,oe)=>{const re=S[Q.sale_item_id]!==void 0,ye=re?S[Q.sale_item_id]:Q.quantity,le=Q.is_weighted&&Q.weight?Q.total_price||Q.weight*(Q.price_per_unit||0):ye*Q.unit_price;return a.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease"},onMouseEnter:Ae=>{Ae.target.style.boxShadow="0 4px 12px rgba(62, 63, 41, 0.1)",Ae.target.style.transform="translateY(-2px)"},onMouseLeave:Ae=>{Ae.target.style.boxShadow="none",Ae.target.style.transform="translateY(0)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:Q.product_image?`url(${Q.product_image})`:Q.is_weighted?"#f59e0b":"#7d8d86",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"18px",fontWeight:"bold",position:"relative",border:"2px solid rgba(125, 141, 134, 0.2)"},children:!Q.product_image&&a.jsxs(a.Fragment,{children:[Q.is_weighted&&Q.weight?`${Q.weight}${Q.weight_unit}`:Q.quantity,Q.is_weighted&&a.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",width:"16px",height:"16px",borderRadius:"50%",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"#ffffff"},children:"⚖️"})]})}),h&&!Q.is_weighted&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("button",{onClick:()=>P(Q.sale_item_id,ye-1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),a.jsx("div",{style:{minWidth:"48px",height:"48px",borderRadius:"12px",background:re?"#fef3c7":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:re?"#92400e":"#f1f0e4",fontSize:"18px",fontWeight:"bold",border:re?"2px solid #f59e0b":"none"},children:ye}),a.jsx("button",{onClick:()=>P(Q.sale_item_id,ye+1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#10b981",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),re&&a.jsx("button",{onClick:()=>ue(Q.sale_item_id,ye),style:{padding:"6px 12px",borderRadius:"6px",background:"#3b82f6",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer"},children:"Save"}),a.jsx("button",{onClick:()=>te(Q.sale_item_id),style:{padding:"6px 12px",borderRadius:"6px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer",marginLeft:"8px"},children:"Remove"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:Q.product_name}),a.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[Q.product_category," • ",Q.is_weighted&&Q.weight&&Q.weight_unit&&Q.price_per_unit?`${Q.weight} ${Q.weight_unit} • €${Q.price_per_unit.toFixed(2)}/${Q.weight_unit}`:`€${Q.unit_price.toFixed(2)} each`]}),Q.is_weighted&&h&&a.jsx("p",{style:{fontSize:"12px",color:"#f59e0b",margin:"4px 0 0 0",fontStyle:"italic"},children:"Weighted items cannot be edited after sale"})]})]}),a.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:re?"#f59e0b":"#3e3f29"},children:["€",le.toFixed(2)]})]},oe)})}):a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-box",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:"No items found for this transaction"})]})]})]}):a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{textAlign:"center",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:"Transaction not found"})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Ud={};Ud.version="0.18.5";var gv=1252,O6=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],xv=function(e){O6.indexOf(e)!=-1&&(gv=e)};function I6(){xv(1252)}var Yl=function(e){xv(e)};function B6(){Yl(1200),I6()}var Ed=function(t){return String.fromCharCode(t)},A1=function(t){return String.fromCharCode(t)},Wd,Ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Kl(e){for(var t="",r=0,s=0,o=0,c=0,d=0,f=0,h=0,p=0;p<e.length;)r=e.charCodeAt(p++),c=r>>2,s=e.charCodeAt(p++),d=(r&3)<<4|s>>4,o=e.charCodeAt(p++),f=(s&15)<<2|o>>6,h=o&63,isNaN(s)?f=h=64:isNaN(o)&&(h=64),t+=Ma.charAt(c)+Ma.charAt(d)+Ma.charAt(f)+Ma.charAt(h);return t}function ia(e){var t="",r=0,s=0,o=0,c=0,d=0,f=0,h=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var p=0;p<e.length;)c=Ma.indexOf(e.charAt(p++)),d=Ma.indexOf(e.charAt(p++)),r=c<<2|d>>4,t+=String.fromCharCode(r),f=Ma.indexOf(e.charAt(p++)),s=(d&15)<<4|f>>2,f!==64&&(t+=String.fromCharCode(s)),h=Ma.indexOf(e.charAt(p++)),o=(f&3)<<6|h,h!==64&&(t+=String.fromCharCode(o));return t}var ir=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),la=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function xi(e){return ir?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function N1(e){return ir?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Ss=function(t){return ir?la(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function ou(e){if(typeof ArrayBuffer>"u")return Ss(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),s=0;s!=e.length;++s)r[s]=e.charCodeAt(s)&255;return t}function ac(e){if(Array.isArray(e))return e.map(function(s){return String.fromCharCode(s)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function M6(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var hn=ir?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:la(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var s=new Uint8Array(r),o=0;for(t=0,r=0;t<e.length;r+=o,++t)if(o=e[t].length,e[t]instanceof Uint8Array)s.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";s.set(new Uint8Array(e[t]),r)}return s}return[].concat.apply([],e.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function F6(e){for(var t=[],r=0,s=e.length+250,o=xi(e.length+255),c=0;c<e.length;++c){var d=e.charCodeAt(c);if(d<128)o[r++]=d;else if(d<2048)o[r++]=192|d>>6&31,o[r++]=128|d&63;else if(d>=55296&&d<57344){d=(d&1023)+64;var f=e.charCodeAt(++c)&1023;o[r++]=240|d>>8&7,o[r++]=128|d>>2&63,o[r++]=128|f>>6&15|(d&3)<<4,o[r++]=128|f&63}else o[r++]=224|d>>12&15,o[r++]=128|d>>6&63,o[r++]=128|d&63;r>s&&(t.push(o.slice(0,r)),r=0,o=xi(65535),s=65530)}return t.push(o.slice(0,r)),hn(t)}var Pl=/\u0000/g,kd=/[\u0001-\u0006]/g;function _o(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function ws(e,t){var r=""+e;return r.length>=t?r:Mr("0",t-r.length)+r}function B0(e,t){var r=""+e;return r.length>=t?r:Mr(" ",t-r.length)+r}function qd(e,t){var r=""+e;return r.length>=t?r:r+Mr(" ",t-r.length)}function L6(e,t){var r=""+Math.round(e);return r.length>=t?r:Mr("0",t-r.length)+r}function P6(e,t){var r=""+e;return r.length>=t?r:Mr("0",t-r.length)+r}var R1=Math.pow(2,32);function po(e,t){if(e>R1||e<-R1)return L6(e,t);var r=Math.round(e);return P6(r,t)}function $d(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var D1=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Bh=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function z6(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Fr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},O1={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},U6={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Hd(e,t,r){for(var s=e<0?-1:1,o=e*s,c=0,d=1,f=0,h=1,p=0,x=0,y=Math.floor(o);p<t&&(y=Math.floor(o),f=y*d+c,x=y*p+h,!(o-y<5e-8));)o=1/(o-y),c=d,d=f,h=p,p=x;if(x>t&&(p>t?(x=h,f=c):(x=p,f=d)),!r)return[0,s*f,x];var v=Math.floor(s*f/x);return[v,s*f-v*x,x]}function Cd(e,t,r){if(e>2958465||e<0)return null;var s=e|0,o=Math.floor(86400*(e-s)),c=0,d=[],f={D:s,T:o,u:86400*(e-s)-o,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(f.u)<1e-6&&(f.u=0),t&&t.date1904&&(s+=1462),f.u>.9999&&(f.u=0,++o==86400&&(f.T=o=0,++s,++f.D)),s===60)d=r?[1317,10,29]:[1900,2,29],c=3;else if(s===0)d=r?[1317,8,29]:[1900,1,0],c=6;else{s>60&&--s;var h=new Date(1900,0,1);h.setDate(h.getDate()+s-1),d=[h.getFullYear(),h.getMonth()+1,h.getDate()],c=h.getDay(),s<60&&(c=(c+6)%7),r&&(c=Y6(h,d))}return f.y=d[0],f.m=d[1],f.d=d[2],f.S=o%60,o=Math.floor(o/60),f.M=o%60,o=Math.floor(o/60),f.H=o,f.q=c,f}var mv=new Date(1899,11,31,0,0,0),W6=mv.getTime(),q6=new Date(1900,2,1,0,0,0);function yv(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=q6&&(r+=1440*60*1e3),(r-(W6+(e.getTimezoneOffset()-mv.getTimezoneOffset())*6e4))/(1440*60*1e3)}function M0(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function $6(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function H6(e){var t=e<0?12:11,r=M0(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function G6(e){var t=M0(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function V6(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=H6(e):t===10?r=e.toFixed(10).substr(0,12):r=G6(e),M0($6(r.toUpperCase()))}function c0(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):V6(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return za(14,yv(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Y6(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function K6(e,t,r,s){var o="",c=0,d=0,f=r.y,h,p=0;switch(e){case 98:f=r.y+543;case 121:switch(t.length){case 1:case 2:h=f%100,p=2;break;default:h=f%1e4,p=4;break}break;case 109:switch(t.length){case 1:case 2:h=r.m,p=t.length;break;case 3:return Bh[r.m-1][1];case 5:return Bh[r.m-1][0];default:return Bh[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:h=r.d,p=t.length;break;case 3:return D1[r.q][0];default:return D1[r.q][1]}break;case 104:switch(t.length){case 1:case 2:h=1+(r.H+11)%12,p=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:h=r.H,p=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:h=r.M,p=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?ws(r.S,t.length):(s>=2?d=s===3?1e3:100:d=s===1?10:1,c=Math.round(d*(r.S+r.u)),c>=60*d&&(c=0),t==="s"?c===0?"0":""+c/d:(o=ws(c,2+s),t==="ss"?o.substr(0,2):"."+o.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":h=r.D*24+r.H;break;case"[m]":case"[mm]":h=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":h=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}p=t.length===3?1:2;break;case 101:h=f,p=1;break}var x=p>0?ws(h,p):"";return x}function Fa(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,s=e.substr(0,r);r!=e.length;r+=t)s+=(s.length>0?",":"")+e.substr(r,t);return s}var vv=/%/g;function X6(e,t,r){var s=t.replace(vv,""),o=t.length-s.length;return ra(e,s,r*Math.pow(10,2*o))+Mr("%",o)}function Q6(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return ra(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function bv(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+bv(e,-t);var o=e.indexOf(".");o===-1&&(o=e.indexOf("E"));var c=Math.floor(Math.log(t)*Math.LOG10E)%o;if(c<0&&(c+=o),r=(t/Math.pow(10,c)).toPrecision(s+1+(o+c)%o),r.indexOf("e")===-1){var d=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(d-r.length+c):r+="E+"+(d-c);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,o)+"."+r.substr(2+o),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(f,h,p,x){return h+p+x.substr(0,(o+c)%o)+"."+x.substr(c)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var _v=/# (\?+)( ?)\/( ?)(\d+)/;function J6(e,t,r){var s=parseInt(e[4],10),o=Math.round(t*s),c=Math.floor(o/s),d=o-c*s,f=s;return r+(c===0?"":""+c)+" "+(d===0?Mr(" ",e[1].length+1+e[4].length):B0(d,e[1].length)+e[2]+"/"+e[3]+ws(f,e[4].length))}function Z6(e,t,r){return r+(t===0?"":""+t)+Mr(" ",e[1].length+2+e[4].length)}var Sv=/^#*0*\.([0#]+)/,wv=/\).*[0#]/,Tv=/\(###\) ###\\?-####/;function Rn(e){for(var t="",r,s=0;s!=e.length;++s)switch(r=e.charCodeAt(s)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function I1(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function B1(e,t){var r=e-Math.floor(e),s=Math.pow(10,t);return t<(""+Math.round(r*s)).length?0:Math.round(r*s)}function eA(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function tA(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function cs(e,t,r){if(e.charCodeAt(0)===40&&!t.match(wv)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?cs("n",s,r):"("+cs("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Q6(e,t,r);if(t.indexOf("%")!==-1)return X6(e,t,r);if(t.indexOf("E")!==-1)return bv(t,r);if(t.charCodeAt(0)===36)return"$"+cs(e,t.substr(t.charAt(1)==" "?2:1),r);var o,c,d,f,h=Math.abs(r),p=r<0?"-":"";if(t.match(/^00+$/))return p+po(h,t.length);if(t.match(/^[#?]+$/))return o=po(r,0),o==="0"&&(o=""),o.length>t.length?o:Rn(t.substr(0,t.length-o.length))+o;if(c=t.match(_v))return J6(c,h,p);if(t.match(/^#+0+$/))return p+po(h,t.length-t.indexOf("0"));if(c=t.match(Sv))return o=I1(r,c[1].length).replace(/^([^\.]+)$/,"$1."+Rn(c[1])).replace(/\.$/,"."+Rn(c[1])).replace(/\.(\d*)$/,function(w,_){return"."+_+Mr("0",Rn(c[1]).length-_.length)}),t.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),c=t.match(/^(0*)\.(#*)$/))return p+I1(h,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=t.match(/^#{1,3},##0(\.?)$/))return p+Fa(po(h,0));if(c=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+cs(e,t,-r):Fa(""+(Math.floor(r)+eA(r,c[1].length)))+"."+ws(B1(r,c[1].length),c[1].length);if(c=t.match(/^#,#*,#0/))return cs(e,t.replace(/^#,#*,/,""),r);if(c=t.match(/^([0#]+)(\\?-([0#]+))+$/))return o=_o(cs(e,t.replace(/[\\-]/g,""),r)),d=0,_o(_o(t.replace(/\\/g,"")).replace(/[0#]/g,function(w){return d<o.length?o.charAt(d++):w==="0"?"0":""}));if(t.match(Tv))return o=cs(e,"##########",r),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var x="";if(c=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(c[4].length,7),f=Hd(h,Math.pow(10,d)-1,!1),o=""+p,x=ra("n",c[1],f[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),o+=x+c[2]+"/"+c[3],x=qd(f[2],d),x.length<c[4].length&&(x=Rn(c[4].substr(c[4].length-x.length))+x),o+=x,o;if(c=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(c[1].length,c[4].length),7),f=Hd(h,Math.pow(10,d)-1,!0),p+(f[0]||(f[1]?"":"0"))+" "+(f[1]?B0(f[1],d)+c[2]+"/"+c[3]+qd(f[2],d):Mr(" ",2*d+1+c[2].length+c[3].length));if(c=t.match(/^[#0?]+$/))return o=po(r,0),t.length<=o.length?o:Rn(t.substr(0,t.length-o.length))+o;if(c=t.match(/^([#0?]+)\.([#0]+)$/)){o=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),d=o.indexOf(".");var y=t.indexOf(".")-d,v=t.length-o.length-y;return Rn(t.substr(0,y)+o+t.substr(t.length-v))}if(c=t.match(/^00,000\.([#0]*0)$/))return d=B1(r,c[1].length),r<0?"-"+cs(e,t,-r):Fa(tA(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ws(0,3-w.length):"")+w})+"."+ws(d,c[1].length);switch(t){case"###,##0.00":return cs(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var b=Fa(po(h,0));return b!=="0"?p+b:"";case"###,###.00":return cs(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return cs(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function rA(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return ra(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function nA(e,t,r){var s=t.replace(vv,""),o=t.length-s.length;return ra(e,s,r*Math.pow(10,2*o))+Mr("%",o)}function jv(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+jv(e,-t);var o=e.indexOf(".");o===-1&&(o=e.indexOf("E"));var c=Math.floor(Math.log(t)*Math.LOG10E)%o;if(c<0&&(c+=o),r=(t/Math.pow(10,c)).toPrecision(s+1+(o+c)%o),!r.match(/[Ee]/)){var d=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(d-r.length+c):r+="E+"+(d-c),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(f,h,p,x){return h+p+x.substr(0,(o+c)%o)+"."+x.substr(c)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Is(e,t,r){if(e.charCodeAt(0)===40&&!t.match(wv)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Is("n",s,r):"("+Is("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return rA(e,t,r);if(t.indexOf("%")!==-1)return nA(e,t,r);if(t.indexOf("E")!==-1)return jv(t,r);if(t.charCodeAt(0)===36)return"$"+Is(e,t.substr(t.charAt(1)==" "?2:1),r);var o,c,d,f,h=Math.abs(r),p=r<0?"-":"";if(t.match(/^00+$/))return p+ws(h,t.length);if(t.match(/^[#?]+$/))return o=""+r,r===0&&(o=""),o.length>t.length?o:Rn(t.substr(0,t.length-o.length))+o;if(c=t.match(_v))return Z6(c,h,p);if(t.match(/^#+0+$/))return p+ws(h,t.length-t.indexOf("0"));if(c=t.match(Sv))return o=(""+r).replace(/^([^\.]+)$/,"$1."+Rn(c[1])).replace(/\.$/,"."+Rn(c[1])),o=o.replace(/\.(\d*)$/,function(w,_){return"."+_+Mr("0",Rn(c[1]).length-_.length)}),t.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),c=t.match(/^(0*)\.(#*)$/))return p+(""+h).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=t.match(/^#{1,3},##0(\.?)$/))return p+Fa(""+h);if(c=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Is(e,t,-r):Fa(""+r)+"."+Mr("0",c[1].length);if(c=t.match(/^#,#*,#0/))return Is(e,t.replace(/^#,#*,/,""),r);if(c=t.match(/^([0#]+)(\\?-([0#]+))+$/))return o=_o(Is(e,t.replace(/[\\-]/g,""),r)),d=0,_o(_o(t.replace(/\\/g,"")).replace(/[0#]/g,function(w){return d<o.length?o.charAt(d++):w==="0"?"0":""}));if(t.match(Tv))return o=Is(e,"##########",r),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var x="";if(c=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(c[4].length,7),f=Hd(h,Math.pow(10,d)-1,!1),o=""+p,x=ra("n",c[1],f[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),o+=x+c[2]+"/"+c[3],x=qd(f[2],d),x.length<c[4].length&&(x=Rn(c[4].substr(c[4].length-x.length))+x),o+=x,o;if(c=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(c[1].length,c[4].length),7),f=Hd(h,Math.pow(10,d)-1,!0),p+(f[0]||(f[1]?"":"0"))+" "+(f[1]?B0(f[1],d)+c[2]+"/"+c[3]+qd(f[2],d):Mr(" ",2*d+1+c[2].length+c[3].length));if(c=t.match(/^[#0?]+$/))return o=""+r,t.length<=o.length?o:Rn(t.substr(0,t.length-o.length))+o;if(c=t.match(/^([#0]+)\.([#0]+)$/)){o=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),d=o.indexOf(".");var y=t.indexOf(".")-d,v=t.length-o.length-y;return Rn(t.substr(0,y)+o+t.substr(t.length-v))}if(c=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Is(e,t,-r):Fa(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ws(0,3-w.length):"")+w})+"."+ws(0,c[1].length);switch(t){case"###,###":case"##,###":case"#,###":var b=Fa(""+h);return b!=="0"?p+b:"";default:if(t.match(/\.[0#?]*$/))return Is(e,t.slice(0,t.lastIndexOf(".")),r)+Rn(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ra(e,t,r){return(r|0)===r?Is(e,t,r):cs(e,t,r)}function sA(e){for(var t=[],r=!1,s=0,o=0;s<e.length;++s)switch(e.charCodeAt(s)){case 34:r=!r;break;case 95:case 42:case 92:++s;break;case 59:t[t.length]=e.substr(o,s-o),o=s+1}if(t[t.length]=e.substr(o),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Ev=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function kv(e){for(var t=0,r="",s="";t<e.length;)switch(r=e.charAt(t)){case"G":$d(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(s=r;e.charAt(t++)!=="]"&&t<e.length;)s+=e.charAt(t);if(s.match(Ev))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function aA(e,t,r,s){for(var o=[],c="",d=0,f="",h="t",p,x,y,v="H";d<e.length;)switch(f=e.charAt(d)){case"G":if(!$d(e,d))throw new Error("unrecognized character "+f+" in "+e);o[o.length]={t:"G",v:"General"},d+=7;break;case'"':for(c="";(y=e.charCodeAt(++d))!==34&&d<e.length;)c+=String.fromCharCode(y);o[o.length]={t:"t",v:c},++d;break;case"\\":var b=e.charAt(++d),w=b==="("||b===")"?b:"t";o[o.length]={t:w,v:b},++d;break;case"_":o[o.length]={t:"t",v:" "},d+=2;break;case"@":o[o.length]={t:"T",v:t},++d;break;case"B":case"b":if(e.charAt(d+1)==="1"||e.charAt(d+1)==="2"){if(p==null&&(p=Cd(t,r,e.charAt(d+1)==="2"),p==null))return"";o[o.length]={t:"X",v:e.substr(d,2)},h=f,d+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":f=f.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||p==null&&(p=Cd(t,r),p==null))return"";for(c=f;++d<e.length&&e.charAt(d).toLowerCase()===f;)c+=f;f==="m"&&h.toLowerCase()==="h"&&(f="M"),f==="h"&&(f=v),o[o.length]={t:f,v:c},h=f;break;case"A":case"a":case"上":var _={t:f,v:f};if(p==null&&(p=Cd(t,r)),e.substr(d,3).toUpperCase()==="A/P"?(p!=null&&(_.v=p.H>=12?"P":"A"),_.t="T",v="h",d+=3):e.substr(d,5).toUpperCase()==="AM/PM"?(p!=null&&(_.v=p.H>=12?"PM":"AM"),_.t="T",d+=5,v="h"):e.substr(d,5).toUpperCase()==="上午/下午"?(p!=null&&(_.v=p.H>=12?"下午":"上午"),_.t="T",d+=5,v="h"):(_.t="t",++d),p==null&&_.t==="T")return"";o[o.length]=_,h=f;break;case"[":for(c=f;e.charAt(d++)!=="]"&&d<e.length;)c+=e.charAt(d);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(Ev)){if(p==null&&(p=Cd(t,r),p==null))return"";o[o.length]={t:"Z",v:c.toLowerCase()},h=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",kv(e)||(o[o.length]={t:"t",v:c}));break;case".":if(p!=null){for(c=f;++d<e.length&&(f=e.charAt(d))==="0";)c+=f;o[o.length]={t:"s",v:c};break}case"0":case"#":for(c=f;++d<e.length&&"0#?.,E+-%".indexOf(f=e.charAt(d))>-1;)c+=f;o[o.length]={t:"n",v:c};break;case"?":for(c=f;e.charAt(++d)===f;)c+=f;o[o.length]={t:f,v:c},h=f;break;case"*":++d,(e.charAt(d)==" "||e.charAt(d)=="*")&&++d;break;case"(":case")":o[o.length]={t:s===1?"t":f,v:f},++d;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=f;d<e.length&&"0123456789".indexOf(e.charAt(++d))>-1;)c+=e.charAt(d);o[o.length]={t:"D",v:c};break;case" ":o[o.length]={t:f,v:f},++d;break;case"$":o[o.length]={t:"t",v:"$"},++d;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(f)===-1)throw new Error("unrecognized character "+f+" in "+e);o[o.length]={t:"t",v:f},++d;break}var S=0,N=0,R;for(d=o.length-1,h="t";d>=0;--d)switch(o[d].t){case"h":case"H":o[d].t=v,h="h",S<1&&(S=1);break;case"s":(R=o[d].v.match(/\.0+$/))&&(N=Math.max(N,R[0].length-1)),S<3&&(S=3);case"d":case"y":case"M":case"e":h=o[d].t;break;case"m":h==="s"&&(o[d].t="M",S<2&&(S=2));break;case"X":break;case"Z":S<1&&o[d].v.match(/[Hh]/)&&(S=1),S<2&&o[d].v.match(/[Mm]/)&&(S=2),S<3&&o[d].v.match(/[Ss]/)&&(S=3)}switch(S){case 0:break;case 1:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M),p.M>=60&&(p.M=0,++p.H);break;case 2:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M);break}var I="",G;for(d=0;d<o.length;++d)switch(o[d].t){case"t":case"T":case" ":case"D":break;case"X":o[d].v="",o[d].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[d].v=K6(o[d].t.charCodeAt(0),o[d].v,p,N),o[d].t="t";break;case"n":case"?":for(G=d+1;o[G]!=null&&((f=o[G].t)==="?"||f==="D"||(f===" "||f==="t")&&o[G+1]!=null&&(o[G+1].t==="?"||o[G+1].t==="t"&&o[G+1].v==="/")||o[d].t==="("&&(f===" "||f==="n"||f===")")||f==="t"&&(o[G].v==="/"||o[G].v===" "&&o[G+1]!=null&&o[G+1].t=="?"));)o[d].v+=o[G].v,o[G]={v:"",t:";"},++G;I+=o[d].v,d=G-1;break;case"G":o[d].t="t",o[d].v=c0(t,r);break}var Z="",ie,q;if(I.length>0){I.charCodeAt(0)==40?(ie=t<0&&I.charCodeAt(0)===45?-t:t,q=ra("n",I,ie)):(ie=t<0&&s>1?-t:t,q=ra("n",I,ie),ie<0&&o[0]&&o[0].t=="t"&&(q=q.substr(1),o[0].v="-"+o[0].v)),G=q.length-1;var P=o.length;for(d=0;d<o.length;++d)if(o[d]!=null&&o[d].t!="t"&&o[d].v.indexOf(".")>-1){P=d;break}var te=o.length;if(P===o.length&&q.indexOf("E")===-1){for(d=o.length-1;d>=0;--d)o[d]==null||"n?".indexOf(o[d].t)===-1||(G>=o[d].v.length-1?(G-=o[d].v.length,o[d].v=q.substr(G+1,o[d].v.length)):G<0?o[d].v="":(o[d].v=q.substr(0,G+1),G=-1),o[d].t="t",te=d);G>=0&&te<o.length&&(o[te].v=q.substr(0,G+1)+o[te].v)}else if(P!==o.length&&q.indexOf("E")===-1){for(G=q.indexOf(".")-1,d=P;d>=0;--d)if(!(o[d]==null||"n?".indexOf(o[d].t)===-1)){for(x=o[d].v.indexOf(".")>-1&&d===P?o[d].v.indexOf(".")-1:o[d].v.length-1,Z=o[d].v.substr(x+1);x>=0;--x)G>=0&&(o[d].v.charAt(x)==="0"||o[d].v.charAt(x)==="#")&&(Z=q.charAt(G--)+Z);o[d].v=Z,o[d].t="t",te=d}for(G>=0&&te<o.length&&(o[te].v=q.substr(0,G+1)+o[te].v),G=q.indexOf(".")+1,d=P;d<o.length;++d)if(!(o[d]==null||"n?(".indexOf(o[d].t)===-1&&d!==P)){for(x=o[d].v.indexOf(".")>-1&&d===P?o[d].v.indexOf(".")+1:0,Z=o[d].v.substr(0,x);x<o[d].v.length;++x)G<q.length&&(Z+=q.charAt(G++));o[d].v=Z,o[d].t="t",te=d}}}for(d=0;d<o.length;++d)o[d]!=null&&"n?".indexOf(o[d].t)>-1&&(ie=s>1&&t<0&&d>0&&o[d-1].v==="-"?-t:t,o[d].v=ra(o[d].t,o[d].v,ie),o[d].t="t");var ue="";for(d=0;d!==o.length;++d)o[d]!=null&&(ue+=o[d].v);return ue}var M1=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function F1(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function iA(e,t){var r=sA(e),s=r.length,o=r[s-1].indexOf("@");if(s<4&&o>-1&&--s,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||o>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=o>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=o>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=o>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var c=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[s,c];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var d=r[0].match(M1),f=r[1].match(M1);return F1(t,d)?[s,r[0]]:F1(t,f)?[s,r[1]]:[s,r[d!=null&&f!=null?2:1]]}return[s,c]}function za(e,t,r){r==null&&(r={});var s="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?s=r.dateNF:s=e;break;case"number":e==14&&r.dateNF?s=r.dateNF:s=(r.table!=null?r.table:Fr)[e],s==null&&(s=r.table&&r.table[O1[e]]||Fr[O1[e]]),s==null&&(s=U6[e]||"General");break}if($d(s,0))return c0(t,r);t instanceof Date&&(t=yv(t,r.date1904));var o=iA(s,t);if($d(o[1]))return c0(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return aA(o[1],t,r,o[0])}function Cv(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Fr[r]==null){t<0&&(t=r);continue}if(Fr[r]==e){t=r;break}}t<0&&(t=391)}return Fr[t]=e,t}function lu(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Cv(e[t],t)}function cu(){Fr=z6()}var Av=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function oA(e){var t=typeof e=="number"?Fr[e]:e;return t=t.replace(Av,"(\\d+)"),new RegExp("^"+t+"$")}function lA(e,t,r){var s=-1,o=-1,c=-1,d=-1,f=-1,h=-1;(t.match(Av)||[]).forEach(function(y,v){var b=parseInt(r[v+1],10);switch(y.toLowerCase().charAt(0)){case"y":s=b;break;case"d":c=b;break;case"h":d=b;break;case"s":h=b;break;case"m":d>=0?f=b:o=b;break}}),h>=0&&f==-1&&o>=0&&(f=o,o=-1);var p=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(o>=1?o:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);p.length==7&&(p="0"+p),p.length==8&&(p="20"+p);var x=("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2);return d==-1&&f==-1&&h==-1?p:s==-1&&o==-1&&c==-1?x:p+"T"+x}var cA=(function(){var e={};e.version="1.2.0";function t(){for(var q=0,P=new Array(256),te=0;te!=256;++te)q=te,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,P[te]=q;return typeof Int32Array<"u"?new Int32Array(P):P}var r=t();function s(q){var P=0,te=0,ue=0,X=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ue=0;ue!=256;++ue)X[ue]=q[ue];for(ue=0;ue!=256;++ue)for(te=q[ue],P=256+ue;P<4096;P+=256)te=X[P]=te>>>8^q[te&255];var fe=[];for(ue=1;ue!=16;++ue)fe[ue-1]=typeof Int32Array<"u"?X.subarray(ue*256,ue*256+256):X.slice(ue*256,ue*256+256);return fe}var o=s(r),c=o[0],d=o[1],f=o[2],h=o[3],p=o[4],x=o[5],y=o[6],v=o[7],b=o[8],w=o[9],_=o[10],S=o[11],N=o[12],R=o[13],I=o[14];function G(q,P){for(var te=P^-1,ue=0,X=q.length;ue<X;)te=te>>>8^r[(te^q.charCodeAt(ue++))&255];return~te}function Z(q,P){for(var te=P^-1,ue=q.length-15,X=0;X<ue;)te=I[q[X++]^te&255]^R[q[X++]^te>>8&255]^N[q[X++]^te>>16&255]^S[q[X++]^te>>>24]^_[q[X++]]^w[q[X++]]^b[q[X++]]^v[q[X++]]^y[q[X++]]^x[q[X++]]^p[q[X++]]^h[q[X++]]^f[q[X++]]^d[q[X++]]^c[q[X++]]^r[q[X++]];for(ue+=15;X<ue;)te=te>>>8^r[(te^q[X++])&255];return~te}function ie(q,P){for(var te=P^-1,ue=0,X=q.length,fe=0,J=0;ue<X;)fe=q.charCodeAt(ue++),fe<128?te=te>>>8^r[(te^fe)&255]:fe<2048?(te=te>>>8^r[(te^(192|fe>>6&31))&255],te=te>>>8^r[(te^(128|fe&63))&255]):fe>=55296&&fe<57344?(fe=(fe&1023)+64,J=q.charCodeAt(ue++)&1023,te=te>>>8^r[(te^(240|fe>>8&7))&255],te=te>>>8^r[(te^(128|fe>>2&63))&255],te=te>>>8^r[(te^(128|J>>6&15|(fe&3)<<4))&255],te=te>>>8^r[(te^(128|J&63))&255]):(te=te>>>8^r[(te^(224|fe>>12&15))&255],te=te>>>8^r[(te^(128|fe>>6&63))&255],te=te>>>8^r[(te^(128|fe&63))&255]);return~te}return e.table=r,e.bstr=G,e.buf=Z,e.str=ie,e})(),vr=(function(){var t={};t.version="1.2.1";function r(A,U){for(var M=A.split("/"),F=U.split("/"),W=0,H=0,be=Math.min(M.length,F.length);W<be;++W){if(H=M[W].length-F[W].length)return H;if(M[W]!=F[W])return M[W]<F[W]?-1:1}return M.length-F.length}function s(A){if(A.charAt(A.length-1)=="/")return A.slice(0,-1).indexOf("/")===-1?A:s(A.slice(0,-1));var U=A.lastIndexOf("/");return U===-1?A:A.slice(0,U+1)}function o(A){if(A.charAt(A.length-1)=="/")return o(A.slice(0,-1));var U=A.lastIndexOf("/");return U===-1?A:A.slice(U+1)}function c(A,U){typeof U=="string"&&(U=new Date(U));var M=U.getHours();M=M<<6|U.getMinutes(),M=M<<5|U.getSeconds()>>>1,A.write_shift(2,M);var F=U.getFullYear()-1980;F=F<<4|U.getMonth()+1,F=F<<5|U.getDate(),A.write_shift(2,F)}function d(A){var U=A.read_shift(2)&65535,M=A.read_shift(2)&65535,F=new Date,W=M&31;M>>>=5;var H=M&15;M>>>=4,F.setMilliseconds(0),F.setFullYear(M+1980),F.setMonth(H-1),F.setDate(W);var be=U&31;U>>>=5;var De=U&63;return U>>>=6,F.setHours(U),F.setMinutes(De),F.setSeconds(be<<1),F}function f(A){Jn(A,0);for(var U={},M=0;A.l<=A.length-4;){var F=A.read_shift(2),W=A.read_shift(2),H=A.l+W,be={};switch(F){case 21589:M=A.read_shift(1),M&1&&(be.mtime=A.read_shift(4)),W>5&&(M&2&&(be.atime=A.read_shift(4)),M&4&&(be.ctime=A.read_shift(4))),be.mtime&&(be.mt=new Date(be.mtime*1e3));break}A.l=H,U[F]=be}return U}var h;function p(){return h||(h={})}function x(A,U){if(A[0]==80&&A[1]==75)return Ee(A,U);if((A[0]|32)==109&&(A[1]|32)==105)return Tn(A,U);if(A.length<512)throw new Error("CFB file size "+A.length+" < 512");var M=3,F=512,W=0,H=0,be=0,De=0,pe=0,Se=[],we=A.slice(0,512);Jn(we,0);var We=y(we);switch(M=We[0],M){case 3:F=512;break;case 4:F=4096;break;case 0:if(We[1]==0)return Ee(A,U);default:throw new Error("Major Version: Expected 3 or 4 saw "+M)}F!==512&&(we=A.slice(0,F),Jn(we,28));var Ke=A.slice(0,F);v(we,M);var it=we.read_shift(4,"i");if(M===3&&it!==0)throw new Error("# Directory Sectors: Expected 0 saw "+it);we.l+=4,be=we.read_shift(4,"i"),we.l+=4,we.chk("00100000","Mini Stream Cutoff Size: "),De=we.read_shift(4,"i"),W=we.read_shift(4,"i"),pe=we.read_shift(4,"i"),H=we.read_shift(4,"i");for(var Ve=-1,tt=0;tt<109&&(Ve=we.read_shift(4,"i"),!(Ve<0));++tt)Se[tt]=Ve;var St=b(A,F);S(pe,H,St,F,Se);var Kt=R(St,be,Se,F);Kt[be].name="!Directory",W>0&&De!==J&&(Kt[De].name="!MiniFAT"),Kt[Se[0]].name="!FAT",Kt.fat_addrs=Se,Kt.ssz=F;var Qt={},Jt=[],jn=[],k=[];I(be,Kt,St,Jt,W,Qt,jn,De),w(jn,k,Jt),Jt.shift();var de={FileIndex:jn,FullPaths:k};return U&&U.raw&&(de.raw={header:Ke,sectors:St}),de}function y(A){if(A[A.l]==80&&A[A.l+1]==75)return[0,0];A.chk(Q,"Header Signature: "),A.l+=16;var U=A.read_shift(2,"u");return[A.read_shift(2,"u"),U]}function v(A,U){var M=9;switch(A.l+=2,M=A.read_shift(2)){case 9:if(U!=3)throw new Error("Sector Shift: Expected 9 saw "+M);break;case 12:if(U!=4)throw new Error("Sector Shift: Expected 12 saw "+M);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+M)}A.chk("0600","Mini Sector Shift: "),A.chk("000000000000","Reserved: ")}function b(A,U){for(var M=Math.ceil(A.length/U)-1,F=[],W=1;W<M;++W)F[W-1]=A.slice(W*U,(W+1)*U);return F[M-1]=A.slice(M*U),F}function w(A,U,M){for(var F=0,W=0,H=0,be=0,De=0,pe=M.length,Se=[],we=[];F<pe;++F)Se[F]=we[F]=F,U[F]=M[F];for(;De<we.length;++De)F=we[De],W=A[F].L,H=A[F].R,be=A[F].C,Se[F]===F&&(W!==-1&&Se[W]!==W&&(Se[F]=Se[W]),H!==-1&&Se[H]!==H&&(Se[F]=Se[H])),be!==-1&&(Se[be]=F),W!==-1&&F!=Se[F]&&(Se[W]=Se[F],we.lastIndexOf(W)<De&&we.push(W)),H!==-1&&F!=Se[F]&&(Se[H]=Se[F],we.lastIndexOf(H)<De&&we.push(H));for(F=1;F<pe;++F)Se[F]===F&&(H!==-1&&Se[H]!==H?Se[F]=Se[H]:W!==-1&&Se[W]!==W&&(Se[F]=Se[W]));for(F=1;F<pe;++F)if(A[F].type!==0){if(De=F,De!=Se[De])do De=Se[De],U[F]=U[De]+"/"+U[F];while(De!==0&&Se[De]!==-1&&De!=Se[De]);Se[F]=-1}for(U[0]+="/",F=1;F<pe;++F)A[F].type!==2&&(U[F]+="/")}function _(A,U,M){for(var F=A.start,W=A.size,H=[],be=F;M&&W>0&&be>=0;)H.push(U.slice(be*fe,be*fe+fe)),W-=fe,be=ui(M,be*4);return H.length===0?Be(0):hn(H).slice(0,A.size)}function S(A,U,M,F,W){var H=J;if(A===J){if(U!==0)throw new Error("DIFAT chain shorter than expected")}else if(A!==-1){var be=M[A],De=(F>>>2)-1;if(!be)return;for(var pe=0;pe<De&&(H=ui(be,pe*4))!==J;++pe)W.push(H);S(ui(be,F-4),U-1,M,F,W)}}function N(A,U,M,F,W){var H=[],be=[];W||(W=[]);var De=F-1,pe=0,Se=0;for(pe=U;pe>=0;){W[pe]=!0,H[H.length]=pe,be.push(A[pe]);var we=M[Math.floor(pe*4/F)];if(Se=pe*4&De,F<4+Se)throw new Error("FAT boundary crossed: "+pe+" 4 "+F);if(!A[we])break;pe=ui(A[we],Se)}return{nodes:H,data:H1([be])}}function R(A,U,M,F){var W=A.length,H=[],be=[],De=[],pe=[],Se=F-1,we=0,We=0,Ke=0,it=0;for(we=0;we<W;++we)if(De=[],Ke=we+U,Ke>=W&&(Ke-=W),!be[Ke]){pe=[];var Ve=[];for(We=Ke;We>=0;){Ve[We]=!0,be[We]=!0,De[De.length]=We,pe.push(A[We]);var tt=M[Math.floor(We*4/F)];if(it=We*4&Se,F<4+it)throw new Error("FAT boundary crossed: "+We+" 4 "+F);if(!A[tt]||(We=ui(A[tt],it),Ve[We]))break}H[Ke]={nodes:De,data:H1([pe])}}return H}function I(A,U,M,F,W,H,be,De){for(var pe=0,Se=F.length?2:0,we=U[A].data,We=0,Ke=0,it;We<we.length;We+=128){var Ve=we.slice(We,We+128);Jn(Ve,64),Ke=Ve.read_shift(2),it=U0(Ve,0,Ke-Se),F.push(it);var tt={name:it,type:Ve.read_shift(1),color:Ve.read_shift(1),L:Ve.read_shift(4,"i"),R:Ve.read_shift(4,"i"),C:Ve.read_shift(4,"i"),clsid:Ve.read_shift(16),state:Ve.read_shift(4,"i"),start:0,size:0},St=Ve.read_shift(2)+Ve.read_shift(2)+Ve.read_shift(2)+Ve.read_shift(2);St!==0&&(tt.ct=G(Ve,Ve.l-8));var Kt=Ve.read_shift(2)+Ve.read_shift(2)+Ve.read_shift(2)+Ve.read_shift(2);Kt!==0&&(tt.mt=G(Ve,Ve.l-8)),tt.start=Ve.read_shift(4,"i"),tt.size=Ve.read_shift(4,"i"),tt.size<0&&tt.start<0&&(tt.size=tt.type=0,tt.start=J,tt.name=""),tt.type===5?(pe=tt.start,W>0&&pe!==J&&(U[pe].name="!StreamData")):tt.size>=4096?(tt.storage="fat",U[tt.start]===void 0&&(U[tt.start]=N(M,tt.start,U.fat_addrs,U.ssz)),U[tt.start].name=tt.name,tt.content=U[tt.start].data.slice(0,tt.size)):(tt.storage="minifat",tt.size<0?tt.size=0:pe!==J&&tt.start!==J&&U[pe]&&(tt.content=_(tt,U[pe].data,(U[De]||{}).data))),tt.content&&Jn(tt.content,0),H[it]=tt,be.push(tt)}}function G(A,U){return new Date((es(A,U+4)/1e7*Math.pow(2,32)+es(A,U)/1e7-11644473600)*1e3)}function Z(A,U){return p(),x(h.readFileSync(A),U)}function ie(A,U){var M=U&&U.type;switch(M||ir&&Buffer.isBuffer(A)&&(M="buffer"),M||"base64"){case"file":return Z(A,U);case"base64":return x(Ss(ia(A)),U);case"binary":return x(Ss(A),U)}return x(A,U)}function q(A,U){var M=U||{},F=M.root||"Root Entry";if(A.FullPaths||(A.FullPaths=[]),A.FileIndex||(A.FileIndex=[]),A.FullPaths.length!==A.FileIndex.length)throw new Error("inconsistent CFB structure");A.FullPaths.length===0&&(A.FullPaths[0]=F+"/",A.FileIndex[0]={name:F,type:5}),M.CLSID&&(A.FileIndex[0].clsid=M.CLSID),P(A)}function P(A){var U="Sh33tJ5";if(!vr.find(A,"/"+U)){var M=Be(4);M[0]=55,M[1]=M[3]=50,M[2]=54,A.FileIndex.push({name:U,type:2,content:M,size:4,L:69,R:69,C:69}),A.FullPaths.push(A.FullPaths[0]+U),te(A)}}function te(A,U){q(A);for(var M=!1,F=!1,W=A.FullPaths.length-1;W>=0;--W){var H=A.FileIndex[W];switch(H.type){case 0:F?M=!0:(A.FileIndex.pop(),A.FullPaths.pop());break;case 1:case 2:case 5:F=!0,isNaN(H.R*H.L*H.C)&&(M=!0),H.R>-1&&H.L>-1&&H.R==H.L&&(M=!0);break;default:M=!0;break}}if(!(!M&&!U)){var be=new Date(1987,1,19),De=0,pe=Object.create?Object.create(null):{},Se=[];for(W=0;W<A.FullPaths.length;++W)pe[A.FullPaths[W]]=!0,A.FileIndex[W].type!==0&&Se.push([A.FullPaths[W],A.FileIndex[W]]);for(W=0;W<Se.length;++W){var we=s(Se[W][0]);F=pe[we],F||(Se.push([we,{name:o(we).replace("/",""),type:1,clsid:re,ct:be,mt:be,content:null}]),pe[we]=!0)}for(Se.sort(function(it,Ve){return r(it[0],Ve[0])}),A.FullPaths=[],A.FileIndex=[],W=0;W<Se.length;++W)A.FullPaths[W]=Se[W][0],A.FileIndex[W]=Se[W][1];for(W=0;W<Se.length;++W){var We=A.FileIndex[W],Ke=A.FullPaths[W];if(We.name=o(Ke).replace("/",""),We.L=We.R=We.C=-(We.color=1),We.size=We.content?We.content.length:0,We.start=0,We.clsid=We.clsid||re,W===0)We.C=Se.length>1?1:-1,We.size=0,We.type=5;else if(Ke.slice(-1)=="/"){for(De=W+1;De<Se.length&&s(A.FullPaths[De])!=Ke;++De);for(We.C=De>=Se.length?-1:De,De=W+1;De<Se.length&&s(A.FullPaths[De])!=s(Ke);++De);We.R=De>=Se.length?-1:De,We.type=1}else s(A.FullPaths[W+1]||"")==s(Ke)&&(We.R=W+1),We.type=2}}}function ue(A,U){var M=U||{};if(M.fileType=="mad")return Yt(A,M);switch(te(A),M.fileType){case"zip":return Rt(A,M)}var F=(function(it){for(var Ve=0,tt=0,St=0;St<it.FileIndex.length;++St){var Kt=it.FileIndex[St];if(Kt.content){var Qt=Kt.content.length;Qt>0&&(Qt<4096?Ve+=Qt+63>>6:tt+=Qt+511>>9)}}for(var Jt=it.FullPaths.length+3>>2,jn=Ve+7>>3,k=Ve+127>>7,de=jn+tt+Jt+k,ke=de+127>>7,dt=ke<=109?0:Math.ceil((ke-109)/127);de+ke+dt+127>>7>ke;)dt=++ke<=109?0:Math.ceil((ke-109)/127);var _t=[1,dt,ke,k,Jt,tt,Ve,0];return it.FileIndex[0].size=Ve<<6,_t[7]=(it.FileIndex[0].start=_t[0]+_t[1]+_t[2]+_t[3]+_t[4]+_t[5])+(_t[6]+7>>3),_t})(A),W=Be(F[7]<<9),H=0,be=0;{for(H=0;H<8;++H)W.write_shift(1,oe[H]);for(H=0;H<8;++H)W.write_shift(2,0);for(W.write_shift(2,62),W.write_shift(2,3),W.write_shift(2,65534),W.write_shift(2,9),W.write_shift(2,6),H=0;H<3;++H)W.write_shift(2,0);for(W.write_shift(4,0),W.write_shift(4,F[2]),W.write_shift(4,F[0]+F[1]+F[2]+F[3]-1),W.write_shift(4,0),W.write_shift(4,4096),W.write_shift(4,F[3]?F[0]+F[1]+F[2]-1:J),W.write_shift(4,F[3]),W.write_shift(-4,F[1]?F[0]-1:J),W.write_shift(4,F[1]),H=0;H<109;++H)W.write_shift(-4,H<F[2]?F[1]+H:-1)}if(F[1])for(be=0;be<F[1];++be){for(;H<236+be*127;++H)W.write_shift(-4,H<F[2]?F[1]+H:-1);W.write_shift(-4,be===F[1]-1?J:be+1)}var De=function(it){for(be+=it;H<be-1;++H)W.write_shift(-4,H+1);it&&(++H,W.write_shift(-4,J))};for(be=H=0,be+=F[1];H<be;++H)W.write_shift(-4,ye.DIFSECT);for(be+=F[2];H<be;++H)W.write_shift(-4,ye.FATSECT);De(F[3]),De(F[4]);for(var pe=0,Se=0,we=A.FileIndex[0];pe<A.FileIndex.length;++pe)we=A.FileIndex[pe],we.content&&(Se=we.content.length,!(Se<4096)&&(we.start=be,De(Se+511>>9)));for(De(F[6]+7>>3);W.l&511;)W.write_shift(-4,ye.ENDOFCHAIN);for(be=H=0,pe=0;pe<A.FileIndex.length;++pe)we=A.FileIndex[pe],we.content&&(Se=we.content.length,!(!Se||Se>=4096)&&(we.start=be,De(Se+63>>6)));for(;W.l&511;)W.write_shift(-4,ye.ENDOFCHAIN);for(H=0;H<F[4]<<2;++H){var We=A.FullPaths[H];if(!We||We.length===0){for(pe=0;pe<17;++pe)W.write_shift(4,0);for(pe=0;pe<3;++pe)W.write_shift(4,-1);for(pe=0;pe<12;++pe)W.write_shift(4,0);continue}we=A.FileIndex[H],H===0&&(we.start=we.size?we.start-1:J);var Ke=H===0&&M.root||we.name;if(Se=2*(Ke.length+1),W.write_shift(64,Ke,"utf16le"),W.write_shift(2,Se),W.write_shift(1,we.type),W.write_shift(1,we.color),W.write_shift(-4,we.L),W.write_shift(-4,we.R),W.write_shift(-4,we.C),we.clsid)W.write_shift(16,we.clsid,"hex");else for(pe=0;pe<4;++pe)W.write_shift(4,0);W.write_shift(4,we.state||0),W.write_shift(4,0),W.write_shift(4,0),W.write_shift(4,0),W.write_shift(4,0),W.write_shift(4,we.start),W.write_shift(4,we.size),W.write_shift(4,0)}for(H=1;H<A.FileIndex.length;++H)if(we=A.FileIndex[H],we.size>=4096)if(W.l=we.start+1<<9,ir&&Buffer.isBuffer(we.content))we.content.copy(W,W.l,0,we.size),W.l+=we.size+511&-512;else{for(pe=0;pe<we.size;++pe)W.write_shift(1,we.content[pe]);for(;pe&511;++pe)W.write_shift(1,0)}for(H=1;H<A.FileIndex.length;++H)if(we=A.FileIndex[H],we.size>0&&we.size<4096)if(ir&&Buffer.isBuffer(we.content))we.content.copy(W,W.l,0,we.size),W.l+=we.size+63&-64;else{for(pe=0;pe<we.size;++pe)W.write_shift(1,we.content[pe]);for(;pe&63;++pe)W.write_shift(1,0)}if(ir)W.l=W.length;else for(;W.l<W.length;)W.write_shift(1,0);return W}function X(A,U){var M=A.FullPaths.map(function(pe){return pe.toUpperCase()}),F=M.map(function(pe){var Se=pe.split("/");return Se[Se.length-(pe.slice(-1)=="/"?2:1)]}),W=!1;U.charCodeAt(0)===47?(W=!0,U=M[0].slice(0,-1)+U):W=U.indexOf("/")!==-1;var H=U.toUpperCase(),be=W===!0?M.indexOf(H):F.indexOf(H);if(be!==-1)return A.FileIndex[be];var De=!H.match(kd);for(H=H.replace(Pl,""),De&&(H=H.replace(kd,"!")),be=0;be<M.length;++be)if((De?M[be].replace(kd,"!"):M[be]).replace(Pl,"")==H||(De?F[be].replace(kd,"!"):F[be]).replace(Pl,"")==H)return A.FileIndex[be];return null}var fe=64,J=-2,Q="d0cf11e0a1b11ae1",oe=[208,207,17,224,161,177,26,225],re="00000000000000000000000000000000",ye={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:J,FREESECT:-1,HEADER_SIGNATURE:Q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:re,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function le(A,U,M){p();var F=ue(A,M);h.writeFileSync(U,F)}function Ae(A){for(var U=new Array(A.length),M=0;M<A.length;++M)U[M]=String.fromCharCode(A[M]);return U.join("")}function B(A,U){var M=ue(A,U);switch(U&&U.type||"buffer"){case"file":return p(),h.writeFileSync(U.filename,M),M;case"binary":return typeof M=="string"?M:Ae(M);case"base64":return Kl(typeof M=="string"?M:Ae(M));case"buffer":if(ir)return Buffer.isBuffer(M)?M:la(M);case"array":return typeof M=="string"?Ss(M):M}return M}var K;function E(A){try{var U=A.InflateRaw,M=new U;if(M._processChunk(new Uint8Array([3,0]),M._finishFlushFlag),M.bytesRead)K=A;else throw new Error("zlib does not expose bytesRead")}catch(F){console.error("cannot use native zlib: "+(F.message||F))}}function L(A,U){if(!K)return or(A,U);var M=K.InflateRaw,F=new M,W=F._processChunk(A.slice(A.l),F._finishFlushFlag);return A.l+=F.bytesRead,W}function z(A){return K?K.deflateRawSync(A):gt(A)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Me=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function He(A){var U=(A<<1|A<<11)&139536|(A<<5|A<<15)&558144;return(U>>16|U>>8|U)&255}for(var Ce=typeof Uint8Array<"u",ne=Ce?new Uint8Array(256):[],Pe=0;Pe<256;++Pe)ne[Pe]=He(Pe);function $e(A,U){var M=ne[A&255];return U<=8?M>>>8-U:(M=M<<8|ne[A>>8&255],U<=16?M>>>16-U:(M=M<<8|ne[A>>16&255],M>>>24-U))}function rt(A,U){var M=U&7,F=U>>>3;return(A[F]|(M<=6?0:A[F+1]<<8))>>>M&3}function V(A,U){var M=U&7,F=U>>>3;return(A[F]|(M<=5?0:A[F+1]<<8))>>>M&7}function Ne(A,U){var M=U&7,F=U>>>3;return(A[F]|(M<=4?0:A[F+1]<<8))>>>M&15}function st(A,U){var M=U&7,F=U>>>3;return(A[F]|(M<=3?0:A[F+1]<<8))>>>M&31}function Re(A,U){var M=U&7,F=U>>>3;return(A[F]|(M<=1?0:A[F+1]<<8))>>>M&127}function ht(A,U,M){var F=U&7,W=U>>>3,H=(1<<M)-1,be=A[W]>>>F;return M<8-F||(be|=A[W+1]<<8-F,M<16-F)||(be|=A[W+2]<<16-F,M<24-F)||(be|=A[W+3]<<24-F),be&H}function xt(A,U,M){var F=U&7,W=U>>>3;return F<=5?A[W]|=(M&7)<<F:(A[W]|=M<<F&255,A[W+1]=(M&7)>>8-F),U+3}function Dt(A,U,M){var F=U&7,W=U>>>3;return M=(M&1)<<F,A[W]|=M,U+1}function bt(A,U,M){var F=U&7,W=U>>>3;return M<<=F,A[W]|=M&255,M>>>=8,A[W+1]=M,U+8}function Ie(A,U,M){var F=U&7,W=U>>>3;return M<<=F,A[W]|=M&255,M>>>=8,A[W+1]=M&255,A[W+2]=M>>>8,U+16}function nt(A,U){var M=A.length,F=2*M>U?2*M:U+5,W=0;if(M>=U)return A;if(ir){var H=N1(F);if(A.copy)A.copy(H);else for(;W<A.length;++W)H[W]=A[W];return H}else if(Ce){var be=new Uint8Array(F);if(be.set)be.set(A);else for(;W<M;++W)be[W]=A[W];return be}return A.length=F,A}function vt(A){for(var U=new Array(A),M=0;M<A;++M)U[M]=0;return U}function er(A,U,M){var F=1,W=0,H=0,be=0,De=0,pe=A.length,Se=Ce?new Uint16Array(32):vt(32);for(H=0;H<32;++H)Se[H]=0;for(H=pe;H<M;++H)A[H]=0;pe=A.length;var we=Ce?new Uint16Array(pe):vt(pe);for(H=0;H<pe;++H)Se[W=A[H]]++,F<W&&(F=W),we[H]=0;for(Se[0]=0,H=1;H<=F;++H)Se[H+16]=De=De+Se[H-1]<<1;for(H=0;H<pe;++H)De=A[H],De!=0&&(we[H]=Se[De+16]++);var We=0;for(H=0;H<pe;++H)if(We=A[H],We!=0)for(De=$e(we[H],F)>>F-We,be=(1<<F+4-We)-1;be>=0;--be)U[De|be<<We]=We&15|H<<4;return F}var br=Ce?new Uint16Array(512):vt(512),Pt=Ce?new Uint16Array(32):vt(32);if(!Ce){for(var ce=0;ce<512;++ce)br[ce]=0;for(ce=0;ce<32;++ce)Pt[ce]=0}(function(){for(var A=[],U=0;U<32;U++)A.push(5);er(A,Pt,32);var M=[];for(U=0;U<=143;U++)M.push(8);for(;U<=255;U++)M.push(9);for(;U<=279;U++)M.push(7);for(;U<=287;U++)M.push(8);er(M,br,288)})();var Ge=(function(){for(var U=Ce?new Uint8Array(32768):[],M=0,F=0;M<Me.length-1;++M)for(;F<Me[M+1];++F)U[F]=M;for(;F<32768;++F)U[F]=29;var W=Ce?new Uint8Array(259):[];for(M=0,F=0;M<me.length-1;++M)for(;F<me[M+1];++F)W[F]=M;function H(De,pe){for(var Se=0;Se<De.length;){var we=Math.min(65535,De.length-Se),We=Se+we==De.length;for(pe.write_shift(1,+We),pe.write_shift(2,we),pe.write_shift(2,~we&65535);we-- >0;)pe[pe.l++]=De[Se++]}return pe.l}function be(De,pe){for(var Se=0,we=0,We=Ce?new Uint16Array(32768):[];we<De.length;){var Ke=Math.min(65535,De.length-we);if(Ke<10){for(Se=xt(pe,Se,+(we+Ke==De.length)),Se&7&&(Se+=8-(Se&7)),pe.l=Se/8|0,pe.write_shift(2,Ke),pe.write_shift(2,~Ke&65535);Ke-- >0;)pe[pe.l++]=De[we++];Se=pe.l*8;continue}Se=xt(pe,Se,+(we+Ke==De.length)+2);for(var it=0;Ke-- >0;){var Ve=De[we];it=(it<<5^Ve)&32767;var tt=-1,St=0;if((tt=We[it])&&(tt|=we&-32768,tt>we&&(tt-=32768),tt<we))for(;De[tt+St]==De[we+St]&&St<250;)++St;if(St>2){Ve=W[St],Ve<=22?Se=bt(pe,Se,ne[Ve+1]>>1)-1:(bt(pe,Se,3),Se+=5,bt(pe,Se,ne[Ve-23]>>5),Se+=3);var Kt=Ve<8?0:Ve-4>>2;Kt>0&&(Ie(pe,Se,St-me[Ve]),Se+=Kt),Ve=U[we-tt],Se=bt(pe,Se,ne[Ve]>>3),Se-=3;var Qt=Ve<4?0:Ve-2>>1;Qt>0&&(Ie(pe,Se,we-tt-Me[Ve]),Se+=Qt);for(var Jt=0;Jt<St;++Jt)We[it]=we&32767,it=(it<<5^De[we])&32767,++we;Ke-=St-1}else Ve<=143?Ve=Ve+48:Se=Dt(pe,Se,1),Se=bt(pe,Se,ne[Ve]),We[it]=we&32767,++we}Se=bt(pe,Se,0)-1}return pe.l=(Se+7)/8|0,pe.l}return function(pe,Se){return pe.length<8?H(pe,Se):be(pe,Se)}})();function gt(A){var U=Be(50+Math.floor(A.length*1.1)),M=Ge(A,U);return U.slice(0,M)}var It=Ce?new Uint16Array(32768):vt(32768),lr=Ce?new Uint16Array(32768):vt(32768),Cr=Ce?new Uint16Array(128):vt(128),wr=1,nr=1;function Rr(A,U){var M=st(A,U)+257;U+=5;var F=st(A,U)+1;U+=5;var W=Ne(A,U)+4;U+=4;for(var H=0,be=Ce?new Uint8Array(19):vt(19),De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],pe=1,Se=Ce?new Uint8Array(8):vt(8),we=Ce?new Uint8Array(8):vt(8),We=be.length,Ke=0;Ke<W;++Ke)be[Y[Ke]]=H=V(A,U),pe<H&&(pe=H),Se[H]++,U+=3;var it=0;for(Se[0]=0,Ke=1;Ke<=pe;++Ke)we[Ke]=it=it+Se[Ke-1]<<1;for(Ke=0;Ke<We;++Ke)(it=be[Ke])!=0&&(De[Ke]=we[it]++);var Ve=0;for(Ke=0;Ke<We;++Ke)if(Ve=be[Ke],Ve!=0){it=ne[De[Ke]]>>8-Ve;for(var tt=(1<<7-Ve)-1;tt>=0;--tt)Cr[it|tt<<Ve]=Ve&7|Ke<<3}var St=[];for(pe=1;St.length<M+F;)switch(it=Cr[Re(A,U)],U+=it&7,it>>>=3){case 16:for(H=3+rt(A,U),U+=2,it=St[St.length-1];H-- >0;)St.push(it);break;case 17:for(H=3+V(A,U),U+=3;H-- >0;)St.push(0);break;case 18:for(H=11+Re(A,U),U+=7;H-- >0;)St.push(0);break;default:St.push(it),pe<it&&(pe=it);break}var Kt=St.slice(0,M),Qt=St.slice(M);for(Ke=M;Ke<286;++Ke)Kt[Ke]=0;for(Ke=F;Ke<30;++Ke)Qt[Ke]=0;return wr=er(Kt,It,286),nr=er(Qt,lr,30),U}function $t(A,U){if(A[0]==3&&!(A[1]&3))return[xi(U),2];for(var M=0,F=0,W=N1(U||1<<18),H=0,be=W.length>>>0,De=0,pe=0;(F&1)==0;){if(F=V(A,M),M+=3,F>>>1)F>>1==1?(De=9,pe=5):(M=Rr(A,M),De=wr,pe=nr);else{M&7&&(M+=8-(M&7));var Se=A[M>>>3]|A[(M>>>3)+1]<<8;if(M+=32,Se>0)for(!U&&be<H+Se&&(W=nt(W,H+Se),be=W.length);Se-- >0;)W[H++]=A[M>>>3],M+=8;continue}for(;;){!U&&be<H+32767&&(W=nt(W,H+32767),be=W.length);var we=ht(A,M,De),We=F>>>1==1?br[we]:It[we];if(M+=We&15,We>>>=4,(We>>>8&255)===0)W[H++]=We;else{if(We==256)break;We-=257;var Ke=We<8?0:We-4>>2;Ke>5&&(Ke=0);var it=H+me[We];Ke>0&&(it+=ht(A,M,Ke),M+=Ke),we=ht(A,M,pe),We=F>>>1==1?Pt[we]:lr[we],M+=We&15,We>>>=4;var Ve=We<4?0:We-2>>1,tt=Me[We];for(Ve>0&&(tt+=ht(A,M,Ve),M+=Ve),!U&&be<it&&(W=nt(W,it+100),be=W.length);H<it;)W[H]=W[H-tt],++H}}}return U?[W,M+7>>>3]:[W.slice(0,H),M+7>>>3]}function or(A,U){var M=A.slice(A.l||0),F=$t(M,U);return A.l+=F[1],F[0]}function se(A,U){if(A)typeof console<"u"&&console.error(U);else throw new Error(U)}function Ee(A,U){var M=A;Jn(M,0);var F=[],W=[],H={FileIndex:F,FullPaths:W};q(H,{root:U.root});for(var be=M.length-4;(M[be]!=80||M[be+1]!=75||M[be+2]!=5||M[be+3]!=6)&&be>=0;)--be;M.l=be+4,M.l+=4;var De=M.read_shift(2);M.l+=6;var pe=M.read_shift(4);for(M.l=pe,be=0;be<De;++be){M.l+=20;var Se=M.read_shift(4),we=M.read_shift(4),We=M.read_shift(2),Ke=M.read_shift(2),it=M.read_shift(2);M.l+=8;var Ve=M.read_shift(4),tt=f(M.slice(M.l+We,M.l+We+Ke));M.l+=We+Ke+it;var St=M.l;M.l=Ve+4,mt(M,Se,we,H,tt),M.l=St}return H}function mt(A,U,M,F,W){A.l+=2;var H=A.read_shift(2),be=A.read_shift(2),De=d(A);if(H&8257)throw new Error("Unsupported ZIP encryption");for(var pe=A.read_shift(4),Se=A.read_shift(4),we=A.read_shift(4),We=A.read_shift(2),Ke=A.read_shift(2),it="",Ve=0;Ve<We;++Ve)it+=String.fromCharCode(A[A.l++]);if(Ke){var tt=f(A.slice(A.l,A.l+Ke));(tt[21589]||{}).mt&&(De=tt[21589].mt),((W||{})[21589]||{}).mt&&(De=W[21589].mt)}A.l+=Ke;var St=A.slice(A.l,A.l+Se);switch(be){case 8:St=L(A,we);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+be)}var Kt=!1;H&8&&(pe=A.read_shift(4),pe==134695760&&(pe=A.read_shift(4),Kt=!0),Se=A.read_shift(4),we=A.read_shift(4)),Se!=U&&se(Kt,"Bad compressed size: "+U+" != "+Se),we!=M&&se(Kt,"Bad uncompressed size: "+M+" != "+we),gr(F,it,St,{unsafe:!0,mt:De})}function Rt(A,U){var M=U||{},F=[],W=[],H=Be(1),be=M.compression?8:0,De=0,pe=0,Se=0,we=0,We=0,Ke=A.FullPaths[0],it=Ke,Ve=A.FileIndex[0],tt=[],St=0;for(pe=1;pe<A.FullPaths.length;++pe)if(it=A.FullPaths[pe].slice(Ke.length),Ve=A.FileIndex[pe],!(!Ve.size||!Ve.content||it=="Sh33tJ5")){var Kt=we,Qt=Be(it.length);for(Se=0;Se<it.length;++Se)Qt.write_shift(1,it.charCodeAt(Se)&127);Qt=Qt.slice(0,Qt.l),tt[We]=cA.buf(Ve.content,0);var Jt=Ve.content;be==8&&(Jt=z(Jt)),H=Be(30),H.write_shift(4,67324752),H.write_shift(2,20),H.write_shift(2,De),H.write_shift(2,be),Ve.mt?c(H,Ve.mt):H.write_shift(4,0),H.write_shift(-4,tt[We]),H.write_shift(4,Jt.length),H.write_shift(4,Ve.content.length),H.write_shift(2,Qt.length),H.write_shift(2,0),we+=H.length,F.push(H),we+=Qt.length,F.push(Qt),we+=Jt.length,F.push(Jt),H=Be(46),H.write_shift(4,33639248),H.write_shift(2,0),H.write_shift(2,20),H.write_shift(2,De),H.write_shift(2,be),H.write_shift(4,0),H.write_shift(-4,tt[We]),H.write_shift(4,Jt.length),H.write_shift(4,Ve.content.length),H.write_shift(2,Qt.length),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(4,0),H.write_shift(4,Kt),St+=H.l,W.push(H),St+=Qt.length,W.push(Qt),++We}return H=Be(22),H.write_shift(4,101010256),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(2,We),H.write_shift(2,We),H.write_shift(4,St),H.write_shift(4,we),H.write_shift(2,0),hn([hn(F),hn(W),H])}var sr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function at(A,U){if(A.ctype)return A.ctype;var M=A.name||"",F=M.match(/\.([^\.]+)$/);return F&&sr[F[1]]||U&&(F=(M=U).match(/[\.\\]([^\.\\])+$/),F&&sr[F[1]])?sr[F[1]]:"application/octet-stream"}function At(A){for(var U=Kl(A),M=[],F=0;F<U.length;F+=76)M.push(U.slice(F,F+76));return M.join(`\r
`)+`\r
`}function Ot(A){var U=A.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Se){var we=Se.charCodeAt(0).toString(16).toUpperCase();return"="+(we.length==1?"0"+we:we)});U=U.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),U.charAt(0)==`
`&&(U="=0D"+U.slice(1)),U=U.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var M=[],F=U.split(`\r
`),W=0;W<F.length;++W){var H=F[W];if(H.length==0){M.push("");continue}for(var be=0;be<H.length;){var De=76,pe=H.slice(be,be+De);pe.charAt(De-1)=="="?De--:pe.charAt(De-2)=="="?De-=2:pe.charAt(De-3)=="="&&(De-=3),pe=H.slice(be,be+De),be+=De,be<H.length&&(pe+="="),M.push(pe)}}return M.join(`\r
`)}function wn(A){for(var U=[],M=0;M<A.length;++M){for(var F=A[M];M<=A.length&&F.charAt(F.length-1)=="=";)F=F.slice(0,F.length-1)+A[++M];U.push(F)}for(var W=0;W<U.length;++W)U[W]=U[W].replace(/[=][0-9A-Fa-f]{2}/g,function(H){return String.fromCharCode(parseInt(H.slice(1),16))});return Ss(U.join(`\r
`))}function Er(A,U,M){for(var F="",W="",H="",be,De=0;De<10;++De){var pe=U[De];if(!pe||pe.match(/^\s*$/))break;var Se=pe.match(/^(.*?):\s*([^\s].*)$/);if(Se)switch(Se[1].toLowerCase()){case"content-location":F=Se[2].trim();break;case"content-type":H=Se[2].trim();break;case"content-transfer-encoding":W=Se[2].trim();break}}switch(++De,W.toLowerCase()){case"base64":be=Ss(ia(U.slice(De).join("")));break;case"quoted-printable":be=wn(U.slice(De));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+W)}var we=gr(A,F.slice(M.length),be,{unsafe:!0});H&&(we.ctype=H)}function Tn(A,U){if(Ae(A.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var M=U&&U.root||"",F=(ir&&Buffer.isBuffer(A)?A.toString("binary"):Ae(A)).split(`\r
`),W=0,H="";for(W=0;W<F.length;++W)if(H=F[W],!!/^Content-Location:/i.test(H)&&(H=H.slice(H.indexOf("file")),M||(M=H.slice(0,H.lastIndexOf("/")+1)),H.slice(0,M.length)!=M))for(;M.length>0&&(M=M.slice(0,M.length-1),M=M.slice(0,M.lastIndexOf("/")+1),H.slice(0,M.length)!=M););var be=(F[1]||"").match(/boundary="(.*?)"/);if(!be)throw new Error("MAD cannot find boundary");var De="--"+(be[1]||""),pe=[],Se=[],we={FileIndex:pe,FullPaths:Se};q(we);var We,Ke=0;for(W=0;W<F.length;++W){var it=F[W];it!==De&&it!==De+"--"||(Ke++&&Er(we,F.slice(We,W),M),We=W)}return we}function Yt(A,U){var M=U||{},F=M.boundary||"SheetJS";F="------="+F;for(var W=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+F.slice(2)+'"',"","",""],H=A.FullPaths[0],be=H,De=A.FileIndex[0],pe=1;pe<A.FullPaths.length;++pe)if(be=A.FullPaths[pe].slice(H.length),De=A.FileIndex[pe],!(!De.size||!De.content||be=="Sh33tJ5")){be=be.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(St){return"_x"+St.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(St){return"_u"+St.charCodeAt(0).toString(16)+"_"});for(var Se=De.content,we=ir&&Buffer.isBuffer(Se)?Se.toString("binary"):Ae(Se),We=0,Ke=Math.min(1024,we.length),it=0,Ve=0;Ve<=Ke;++Ve)(it=we.charCodeAt(Ve))>=32&&it<128&&++We;var tt=We>=Ke*4/5;W.push(F),W.push("Content-Location: "+(M.root||"file:///C:/SheetJS/")+be),W.push("Content-Transfer-Encoding: "+(tt?"quoted-printable":"base64")),W.push("Content-Type: "+at(De,be)),W.push(""),W.push(tt?Ot(we):At(we))}return W.push(F+`--\r
`),W.join(`\r
`)}function Nt(A){var U={};return q(U,A),U}function gr(A,U,M,F){var W=F&&F.unsafe;W||q(A);var H=!W&&vr.find(A,U);if(!H){var be=A.FullPaths[0];U.slice(0,be.length)==be?be=U:(be.slice(-1)!="/"&&(be+="/"),be=(be+U).replace("//","/")),H={name:o(U),type:2},A.FileIndex.push(H),A.FullPaths.push(be),W||vr.utils.cfb_gc(A)}return H.content=M,H.size=M?M.length:0,F&&(F.CLSID&&(H.clsid=F.CLSID),F.mt&&(H.mt=F.mt),F.ct&&(H.ct=F.ct)),H}function Wn(A,U){q(A);var M=vr.find(A,U);if(M){for(var F=0;F<A.FileIndex.length;++F)if(A.FileIndex[F]==M)return A.FileIndex.splice(F,1),A.FullPaths.splice(F,1),!0}return!1}function ps(A,U,M){q(A);var F=vr.find(A,U);if(F){for(var W=0;W<A.FileIndex.length;++W)if(A.FileIndex[W]==F)return A.FileIndex[W].name=o(M),A.FullPaths[W]=M,!0}return!1}function qn(A){te(A,!0)}return t.find=X,t.read=ie,t.parse=x,t.write=B,t.writeFile=le,t.utils={cfb_new:Nt,cfb_add:gr,cfb_del:Wn,cfb_mov:ps,cfb_gc:qn,ReadShift:Ul,CheckField:Vv,prep_blob:Jn,bconcat:hn,use_zlib:E,_deflateRaw:gt,_inflateRaw:or,consts:ye},t})();function dA(e){return typeof e=="string"?ou(e):Array.isArray(e)?M6(e):e}function ic(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=ou(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var s=r=="utf8"?Ql(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(s,e);if(typeof Blob<"u"){var o=new Blob([dA(s)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(o,e);if(typeof saveAs<"u")return saveAs(o,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var c=URL.createObjectURL(o);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),chrome.downloads.download({url:c,filename:e,saveAs:!0});var d=document.createElement("a");if(d.download!=null)return d.download=e,d.href=c,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),c}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var f=File(e);return f.open("w"),f.encoding="binary",Array.isArray(t)&&(t=ac(t)),f.write(t),f.close(),t}catch(h){if(!h.message||!h.message.match(/onstruct/))throw h}throw new Error("cannot save file "+e)}function xn(e){for(var t=Object.keys(e),r=[],s=0;s<t.length;++s)Object.prototype.hasOwnProperty.call(e,t[s])&&r.push(t[s]);return r}function L1(e,t){for(var r=[],s=xn(e),o=0;o!==s.length;++o)r[e[s[o]][t]]==null&&(r[e[s[o]][t]]=s[o]);return r}function F0(e){for(var t=[],r=xn(e),s=0;s!==r.length;++s)t[e[r[s]]]=r[s];return t}function du(e){for(var t=[],r=xn(e),s=0;s!==r.length;++s)t[e[r[s]]]=parseInt(r[s],10);return t}function uA(e){for(var t=[],r=xn(e),s=0;s!==r.length;++s)t[e[r[s]]]==null&&(t[e[r[s]]]=[]),t[e[r[s]]].push(r[s]);return t}var Gd=new Date(1899,11,30,0,0,0);function zn(e,t){var r=e.getTime(),s=Gd.getTime()+(e.getTimezoneOffset()-Gd.getTimezoneOffset())*6e4;return(r-s)/(1440*60*1e3)}var Nv=new Date,fA=Gd.getTime()+(Nv.getTimezoneOffset()-Gd.getTimezoneOffset())*6e4,P1=Nv.getTimezoneOffset();function Rv(e){var t=new Date;return t.setTime(e*24*60*60*1e3+fA),t.getTimezoneOffset()!==P1&&t.setTime(t.getTime()+(t.getTimezoneOffset()-P1)*6e4),t}var z1=new Date("2017-02-19T19:06:09.000Z"),Dv=isNaN(z1.getFullYear())?new Date("2/19/17"):z1,hA=Dv.getFullYear()==2017;function On(e,t){var r=new Date(e);if(hA)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Dv.getFullYear()==1917&&!isNaN(r.getFullYear())){var s=r.getFullYear();return e.indexOf(""+s)>-1||r.setFullYear(r.getFullYear()+100),r}var o=e.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+o[0],+o[1]-1,+o[2],+o[3]||0,+o[4]||0,+o[5]||0);return e.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function uu(e,t){if(ir&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(c){return r[c]||c})}catch{}for(var s=[],o=0;o!=e.length;++o)s.push(String.fromCharCode(e[o]));return s.join("")}function Un(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Un(e[r]));return t}function Mr(e,t){for(var r="";r.length<t;)r+=e;return r}function na(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,s=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(s))||(s=s.replace(/[(](.*)[)]/,function(o,c){return r=-r,c}),!isNaN(t=Number(s)))?t/r:t}var pA=["january","february","march","april","may","june","july","august","september","october","november","december"];function Xl(e){var t=new Date(e),r=new Date(NaN),s=t.getYear(),o=t.getMonth(),c=t.getDate();if(isNaN(c))return r;var d=e.toLowerCase();if(d.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(d=d.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),d.length>3&&pA.indexOf(d)==-1)return r}else if(d.match(/[a-z]/))return r;return s<0||s>8099?r:(o>0||c>1)&&s!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function Lt(e,t,r){if(e.FullPaths){if(typeof r=="string"){var s;return ir?s=la(r):s=F6(r),vr.utils.cfb_add(e,t,s)}vr.utils.cfb_add(e,t,r)}else e.file(t,r)}function L0(){return vr.utils.cfb_new()}var Gr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,gA={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},P0=F0(gA),z0=/[&<>'"]/g,xA=/[\u0000-\u0008\u000b-\u001f]/g;function hr(e){var t=e+"";return t.replace(z0,function(r){return P0[r]}).replace(xA,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function U1(e){return hr(e).replace(/ /g,"_x0020_")}var Ov=/[\u0000-\u001f]/g;function mA(e){var t=e+"";return t.replace(z0,function(r){return P0[r]}).replace(/\n/g,"<br/>").replace(Ov,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function yA(e){var t=e+"";return t.replace(z0,function(r){return P0[r]}).replace(Ov,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function vA(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function bA(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Mh(e){for(var t="",r=0,s=0,o=0,c=0,d=0,f=0;r<e.length;){if(s=e.charCodeAt(r++),s<128){t+=String.fromCharCode(s);continue}if(o=e.charCodeAt(r++),s>191&&s<224){d=(s&31)<<6,d|=o&63,t+=String.fromCharCode(d);continue}if(c=e.charCodeAt(r++),s<240){t+=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63);continue}d=e.charCodeAt(r++),f=((s&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536,t+=String.fromCharCode(55296+(f>>>10&1023)),t+=String.fromCharCode(56320+(f&1023))}return t}function W1(e){var t=xi(2*e.length),r,s,o=1,c=0,d=0,f;for(s=0;s<e.length;s+=o)o=1,(f=e.charCodeAt(s))<128?r=f:f<224?(r=(f&31)*64+(e.charCodeAt(s+1)&63),o=2):f<240?(r=(f&15)*4096+(e.charCodeAt(s+1)&63)*64+(e.charCodeAt(s+2)&63),o=3):(o=4,r=(f&7)*262144+(e.charCodeAt(s+1)&63)*4096+(e.charCodeAt(s+2)&63)*64+(e.charCodeAt(s+3)&63),r-=65536,d=55296+(r>>>10&1023),r=56320+(r&1023)),d!==0&&(t[c++]=d&255,t[c++]=d>>>8,d=0),t[c++]=r%256,t[c++]=r>>>8;return t.slice(0,c).toString("ucs2")}function q1(e){return la(e,"binary").toString("utf8")}var Ad="foo bar bazâð£",zl=ir&&(q1(Ad)==Mh(Ad)&&q1||W1(Ad)==Mh(Ad)&&W1)||Mh,Ql=ir?function(e){return la(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,s=0,o=0;r<e.length;)switch(s=e.charCodeAt(r++),!0){case s<128:t.push(String.fromCharCode(s));break;case s<2048:t.push(String.fromCharCode(192+(s>>6))),t.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,o=e.charCodeAt(r++)-56320+(s<<10),t.push(String.fromCharCode(240+(o>>18&7))),t.push(String.fromCharCode(144+(o>>12&63))),t.push(String.fromCharCode(128+(o>>6&63))),t.push(String.fromCharCode(128+(o&63)));break;default:t.push(String.fromCharCode(224+(s>>12))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)))}return t.join("")},_A=(function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var s=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),o=0;o<e.length;++o)s=s.replace(e[o][0],e[o][1]);return s}})(),Iv=/(^\s|\s$|\n)/;function pn(e,t){return"<"+e+(t.match(Iv)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Jl(e){return xn(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ze(e,t,r){return"<"+e+(r!=null?Jl(r):"")+(t!=null?(t.match(Iv)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function d0(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function SA(e,t){switch(typeof e){case"string":var r=Ze("vt:lpwstr",hr(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ze((e|0)==e?"vt:i4":"vt:r8",hr(String(e)));case"boolean":return Ze("vt:bool",e?"true":"false")}if(e instanceof Date)return Ze("vt:filetime",d0(e));throw new Error("Unable to serialize "+e)}var sn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Do=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Zn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function wA(e,t){for(var r=1-2*(e[t+7]>>>7),s=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),o=e[t+6]&15,c=5;c>=0;--c)o=o*256+e[t+c];return s==2047?o==0?r*(1/0):NaN:(s==0?s=-1022:(s-=1023,o+=Math.pow(2,52)),r*Math.pow(2,s-52)*o)}function TA(e,t,r){var s=(t<0||1/t==-1/0?1:0)<<7,o=0,c=0,d=s?-t:t;isFinite(d)?d==0?o=c=0:(o=Math.floor(Math.log(d)/Math.LN2),c=d*Math.pow(2,52-o),o<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?o=-1022:(c-=Math.pow(2,52),o+=1023)):(o=2047,c=isNaN(t)?26985:0);for(var f=0;f<=5;++f,c/=256)e[r+f]=c&255;e[r+6]=(o&15)<<4|c&15,e[r+7]=o>>4|s}var $1=function(e){for(var t=[],r=10240,s=0;s<e[0].length;++s)if(e[0][s])for(var o=0,c=e[0][s].length;o<c;o+=r)t.push.apply(t,e[0][s].slice(o,o+r));return t},H1=ir?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:la(t)})):$1(e)}:$1,G1=function(e,t,r){for(var s=[],o=t;o<r;o+=2)s.push(String.fromCharCode(Il(e,o)));return s.join("").replace(Pl,"")},U0=ir?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Pl,""):G1(e,t,r)}:G1,V1=function(e,t,r){for(var s=[],o=t;o<t+r;++o)s.push(("0"+e[o].toString(16)).slice(-2));return s.join("")},Bv=ir?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):V1(e,t,r)}:V1,Y1=function(e,t,r){for(var s=[],o=t;o<r;o++)s.push(String.fromCharCode(vo(e,o)));return s.join("")},oc=ir?function(t,r,s){return Buffer.isBuffer(t)?t.toString("utf8",r,s):Y1(t,r,s)}:Y1,Mv=function(e,t){var r=es(e,t);return r>0?oc(e,t+4,t+4+r-1):""},Fv=Mv,Lv=function(e,t){var r=es(e,t);return r>0?oc(e,t+4,t+4+r-1):""},Pv=Lv,zv=function(e,t){var r=2*es(e,t);return r>0?oc(e,t+4,t+4+r-1):""},Uv=zv,Wv=function(t,r){var s=es(t,r);return s>0?U0(t,r+4,r+4+s):""},qv=Wv,$v=function(e,t){var r=es(e,t);return r>0?oc(e,t+4,t+4+r):""},Hv=$v,Gv=function(e,t){return wA(e,t)},Vd=Gv,W0=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};ir&&(Fv=function(t,r){if(!Buffer.isBuffer(t))return Mv(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},Pv=function(t,r){if(!Buffer.isBuffer(t))return Lv(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},Uv=function(t,r){if(!Buffer.isBuffer(t))return zv(t,r);var s=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s-1)},qv=function(t,r){if(!Buffer.isBuffer(t))return Wv(t,r);var s=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s)},Hv=function(t,r){if(!Buffer.isBuffer(t))return $v(t,r);var s=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+s)},Vd=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Gv(t,r)},W0=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var vo=function(e,t){return e[t]},Il=function(e,t){return e[t+1]*256+e[t]},jA=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},es=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},ui=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},EA=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Ul(e,t){var r="",s,o,c=[],d,f,h,p;switch(t){case"dbcs":if(p=this.l,ir&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(h=0;h<e;++h)r+=String.fromCharCode(Il(this,p)),p+=2;e*=2;break;case"utf8":r=oc(this,this.l,this.l+e);break;case"utf16le":e*=2,r=U0(this,this.l,this.l+e);break;case"wstr":return Ul.call(this,e,"dbcs");case"lpstr-ansi":r=Fv(this,this.l),e=4+es(this,this.l);break;case"lpstr-cp":r=Pv(this,this.l),e=4+es(this,this.l);break;case"lpwstr":r=Uv(this,this.l),e=4+2*es(this,this.l);break;case"lpp4":e=4+es(this,this.l),r=qv(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+es(this,this.l),r=Hv(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(d=vo(this,this.l+e++))!==0;)c.push(Ed(d));r=c.join("");break;case"_wstr":for(e=0,r="";(d=Il(this,this.l+e))!==0;)c.push(Ed(d)),e+=2;e+=2,r=c.join("");break;case"dbcs-cont":for(r="",p=this.l,h=0;h<e;++h){if(this.lens&&this.lens.indexOf(p)!==-1)return d=vo(this,p),this.l=p+1,f=Ul.call(this,e-h,d?"dbcs-cont":"sbcs-cont"),c.join("")+f;c.push(Ed(Il(this,p))),p+=2}r=c.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",p=this.l,h=0;h!=e;++h){if(this.lens&&this.lens.indexOf(p)!==-1)return d=vo(this,p),this.l=p+1,f=Ul.call(this,e-h,d?"dbcs-cont":"sbcs-cont"),c.join("")+f;c.push(Ed(vo(this,p))),p+=1}r=c.join("");break;default:switch(e){case 1:return s=vo(this,this.l),this.l++,s;case 2:return s=(t==="i"?jA:Il)(this,this.l),this.l+=2,s;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(s=(e>0?ui:EA)(this,this.l),this.l+=4,s):(o=es(this,this.l),this.l+=4,o);case 8:case-8:if(t==="f")return e==8?o=Vd(this,this.l):o=Vd([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,o;e=8;case 16:r=Bv(this,this.l,e);break}}return this.l+=e,r}var kA=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},CA=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},AA=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function NA(e,t,r){var s=0,o=0;if(r==="dbcs"){for(o=0;o!=t.length;++o)AA(this,t.charCodeAt(o),this.l+2*o);s=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),o=0;o!=t.length;++o)this[this.l+o]=t.charCodeAt(o)&255;s=t.length}else if(r==="hex"){for(;o<e;++o)this[this.l++]=parseInt(t.slice(2*o,2*o+2),16)||0;return this}else if(r==="utf16le"){var c=Math.min(this.l+e,this.length);for(o=0;o<Math.min(t.length,e);++o){var d=t.charCodeAt(o);this[this.l++]=d&255,this[this.l++]=d>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(e){case 1:s=1,this[this.l]=t&255;break;case 2:s=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:s=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:s=4,kA(this,t,this.l);break;case 8:if(s=8,r==="f"){TA(this,t,this.l);break}case 16:break;case-4:s=4,CA(this,t,this.l);break}return this.l+=s,this}function Vv(e,t){var r=Bv(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Jn(e,t){e.l=t,e.read_shift=Ul,e.chk=Vv,e.write_shift=NA}function Fs(e,t){e.l+=t}function Be(e){var t=xi(e);return Jn(t,0),t}function Pn(){var e=[],t=ir?256:2048,r=function(p){var x=Be(p);return Jn(x,0),x},s=r(t),o=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&e.push(s),s=null)},c=function(p){return s&&p<s.length-s.l?s:(o(),s=r(Math.max(p+1,t)))},d=function(){return o(),hn(e)},f=function(p){o(),s=p,s.l==null&&(s.l=s.length),c(t)};return{next:c,push:f,end:d,_bufs:e}}function qe(e,t,r,s){var o=+t,c;if(!isNaN(o)){s||(s=wI[o].p||(r||[]).length||0),c=1+(o>=128?1:0)+1,s>=128&&++c,s>=16384&&++c,s>=2097152&&++c;var d=e.next(c);o<=127?d.write_shift(1,o):(d.write_shift(1,(o&127)+128),d.write_shift(1,o>>7));for(var f=0;f!=4;++f)if(s>=128)d.write_shift(1,(s&127)+128),s>>=7;else{d.write_shift(1,s);break}s>0&&W0(r)&&e.push(r)}}function Wl(e,t,r){var s=Un(e);if(t.s?(s.cRel&&(s.c+=t.s.c),s.rRel&&(s.r+=t.s.r)):(s.cRel&&(s.c+=t.c),s.rRel&&(s.r+=t.r)),!r||r.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function K1(e,t,r){var s=Un(e);return s.s=Wl(s.s,t.s,r),s.e=Wl(s.e,t.s,r),s}function ql(e,t){if(e.cRel&&e.c<0)for(e=Un(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Un(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=pr(e);return!e.cRel&&e.cRel!=null&&(r=OA(r)),!e.rRel&&e.rRel!=null&&(r=RA(r)),r}function Fh(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+bn(e.s.c)+":"+(e.e.cRel?"":"$")+bn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+gn(e.s.r)+":"+(e.e.rRel?"":"$")+gn(e.e.r):ql(e.s,t.biff)+":"+ql(e.e,t.biff)}function q0(e){return parseInt(DA(e),10)-1}function gn(e){return""+(e+1)}function RA(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function DA(e){return e.replace(/\$(\d+)$/,"$1")}function $0(e){for(var t=IA(e),r=0,s=0;s!==t.length;++s)r=26*r+t.charCodeAt(s)-64;return r-1}function bn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function OA(e){return e.replace(/^([A-Z])/,"$$$1")}function IA(e){return e.replace(/^\$([A-Z])/,"$1")}function BA(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function an(e){for(var t=0,r=0,s=0;s<e.length;++s){var o=e.charCodeAt(s);o>=48&&o<=57?t=10*t+(o-48):o>=65&&o<=90&&(r=26*r+(o-64))}return{c:r-1,r:t-1}}function pr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function ts(e){var t=e.indexOf(":");return t==-1?{s:an(e),e:an(e)}:{s:an(e.slice(0,t)),e:an(e.slice(t+1))}}function Hr(e,t){return typeof t>"u"||typeof t=="number"?Hr(e.s,e.e):(typeof e!="string"&&(e=pr(e)),typeof t!="string"&&(t=pr(t)),e==t?e:e+":"+t)}function kr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,s=0,o=0,c=e.length;for(r=0;s<c&&!((o=e.charCodeAt(s)-64)<1||o>26);++s)r=26*r+o;for(t.s.c=--r,r=0;s<c&&!((o=e.charCodeAt(s)-48)<0||o>9);++s)r=10*r+o;if(t.s.r=--r,s===c||o!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++s,r=0;s!=c&&!((o=e.charCodeAt(s)-64)<1||o>26);++s)r=26*r+o;for(t.e.c=--r,r=0;s!=c&&!((o=e.charCodeAt(s)-48)<0||o>9);++s)r=10*r+o;return t.e.r=--r,t}function X1(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=za(e.z,r?zn(t):t)}catch{}try{return e.w=za((e.XF||{}).numFmtId||(r?14:0),r?zn(t):t)}catch{return""+t}}function oa(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?lc[e.v]||e.v:t==null?X1(e,e.v):X1(e,t))}function bi(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",s={};return s[r]=e,{SheetNames:[r],Sheets:s}}function Yv(e,t,r){var s=r||{},o=e?Array.isArray(e):s.dense,c=e||(o?[]:{}),d=0,f=0;if(c&&s.origin!=null){if(typeof s.origin=="number")d=s.origin;else{var h=typeof s.origin=="string"?an(s.origin):s.origin;d=h.r,f=h.c}c["!ref"]||(c["!ref"]="A1:A1")}var p={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var x=kr(c["!ref"]);p.s.c=x.s.c,p.s.r=x.s.r,p.e.c=Math.max(p.e.c,x.e.c),p.e.r=Math.max(p.e.r,x.e.r),d==-1&&(p.e.r=d=x.e.r+1)}for(var y=0;y!=t.length;++y)if(t[y]){if(!Array.isArray(t[y]))throw new Error("aoa_to_sheet expects an array of arrays");for(var v=0;v!=t[y].length;++v)if(!(typeof t[y][v]>"u")){var b={v:t[y][v]},w=d+y,_=f+v;if(p.s.r>w&&(p.s.r=w),p.s.c>_&&(p.s.c=_),p.e.r<w&&(p.e.r=w),p.e.c<_&&(p.e.c=_),t[y][v]&&typeof t[y][v]=="object"&&!Array.isArray(t[y][v])&&!(t[y][v]instanceof Date))b=t[y][v];else if(Array.isArray(b.v)&&(b.f=t[y][v][1],b.v=b.v[0]),b.v===null)if(b.f)b.t="n";else if(s.nullError)b.t="e",b.v=0;else if(s.sheetStubs)b.t="z";else continue;else typeof b.v=="number"?b.t="n":typeof b.v=="boolean"?b.t="b":b.v instanceof Date?(b.z=s.dateNF||Fr[14],s.cellDates?(b.t="d",b.w=za(b.z,zn(b.v))):(b.t="n",b.v=zn(b.v),b.w=za(b.z,b.v))):b.t="s";if(o)c[w]||(c[w]=[]),c[w][_]&&c[w][_].z&&(b.z=c[w][_].z),c[w][_]=b;else{var S=pr({c:_,r:w});c[S]&&c[S].z&&(b.z=c[S].z),c[S]=b}}}return p.s.c<1e7&&(c["!ref"]=Hr(p)),c}function Oo(e,t){return Yv(null,e,t)}function MA(e){return e.read_shift(4,"i")}function Ts(e,t){return t||(t=Be(4)),t.write_shift(4,e),t}function _n(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function on(e,t){var r=!1;return t==null&&(r=!0,t=Be(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function FA(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function LA(e,t){return t||(t=Be(4)),t.write_shift(2,0),t.write_shift(2,0),t}function H0(e,t){var r=e.l,s=e.read_shift(1),o=_n(e),c=[],d={t:o,h:o};if((s&1)!==0){for(var f=e.read_shift(4),h=0;h!=f;++h)c.push(FA(e));d.r=c}else d.r=[{ich:0,ifnt:0}];return e.l=r+t,d}function PA(e,t){var r=!1;return t==null&&(r=!0,t=Be(15+4*e.t.length)),t.write_shift(1,0),on(e.t,t),r?t.slice(0,t.l):t}var zA=H0;function UA(e,t){var r=!1;return t==null&&(r=!0,t=Be(23+4*e.t.length)),t.write_shift(1,1),on(e.t,t),t.write_shift(4,1),LA({},t),r?t.slice(0,t.l):t}function hs(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function _i(e,t){return t==null&&(t=Be(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Si(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function wi(e,t){return t==null&&(t=Be(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var WA=_n,Kv=on;function G0(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Yd(e,t){var r=!1;return t==null&&(r=!0,t=Be(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var qA=_n,u0=G0,V0=Yd;function Xv(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,s=t[0]&2;e.l+=4;var o=s===0?Vd([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):ui(t,0)>>2;return r?o/100:o}function Qv(e,t){t==null&&(t=Be(4));var r=0,s=0,o=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?s=1:o==(o|0)&&o>=-536870912&&o<1<<29&&(s=1,r=1),s)t.write_shift(-4,((r?o:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Jv(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function $A(e,t){return t||(t=Be(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Ti=Jv,Io=$A;function Bo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function mi(e,t){return(t||Be(8)).write_shift(8,e,"f")}function HA(e){var t={},r=e.read_shift(1),s=r>>>1,o=e.read_shift(1),c=e.read_shift(2,"i"),d=e.read_shift(1),f=e.read_shift(1),h=e.read_shift(1);switch(e.l++,s){case 0:t.auto=1;break;case 1:t.index=o;var p=eN[o];p&&(t.rgb=oy(p));break;case 2:t.rgb=oy([d,f,h]);break;case 3:t.theme=o;break}return c!=0&&(t.tint=c>0?c/32767:c/32768),t}function Kd(e,t){if(t||(t=Be(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var s=e.rgb||"FFFFFF";typeof s=="number"&&(s=("000000"+s.toString(16)).slice(-6)),t.write_shift(1,parseInt(s.slice(0,2),16)),t.write_shift(1,parseInt(s.slice(2,4),16)),t.write_shift(1,parseInt(s.slice(4,6),16)),t.write_shift(1,255)}return t}function GA(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function VA(e,t){t||(t=Be(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var Zv=2,Qn=3,Nd=11,Xd=19,Rd=64,YA=65,KA=71,XA=4108,QA=4126,fn=80,Q1={1:{n:"CodePage",t:Zv},2:{n:"Category",t:fn},3:{n:"PresentationFormat",t:fn},4:{n:"ByteCount",t:Qn},5:{n:"LineCount",t:Qn},6:{n:"ParagraphCount",t:Qn},7:{n:"SlideCount",t:Qn},8:{n:"NoteCount",t:Qn},9:{n:"HiddenCount",t:Qn},10:{n:"MultimediaClipCount",t:Qn},11:{n:"ScaleCrop",t:Nd},12:{n:"HeadingPairs",t:XA},13:{n:"TitlesOfParts",t:QA},14:{n:"Manager",t:fn},15:{n:"Company",t:fn},16:{n:"LinksUpToDate",t:Nd},17:{n:"CharacterCount",t:Qn},19:{n:"SharedDoc",t:Nd},22:{n:"HyperlinksChanged",t:Nd},23:{n:"AppVersion",t:Qn,p:"version"},24:{n:"DigSig",t:YA},26:{n:"ContentType",t:fn},27:{n:"ContentStatus",t:fn},28:{n:"Language",t:fn},29:{n:"Version",t:fn},255:{},2147483648:{n:"Locale",t:Xd},2147483651:{n:"Behavior",t:Xd},1919054434:{}},J1={1:{n:"CodePage",t:Zv},2:{n:"Title",t:fn},3:{n:"Subject",t:fn},4:{n:"Author",t:fn},5:{n:"Keywords",t:fn},6:{n:"Comments",t:fn},7:{n:"Template",t:fn},8:{n:"LastAuthor",t:fn},9:{n:"RevNumber",t:fn},10:{n:"EditTime",t:Rd},11:{n:"LastPrinted",t:Rd},12:{n:"CreatedDate",t:Rd},13:{n:"ModifiedDate",t:Rd},14:{n:"PageCount",t:Qn},15:{n:"WordCount",t:Qn},16:{n:"CharCount",t:Qn},17:{n:"Thumbnail",t:KA},18:{n:"Application",t:fn},19:{n:"DocSecurity",t:Qn},255:{},2147483648:{n:"Locale",t:Xd},2147483651:{n:"Behavior",t:Xd},1919054434:{}};function JA(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var ZA=JA([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),eN=Un(ZA),lc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},tN={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Dd={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function eb(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function tb(e,t){var r=uA(tN),s=[],o;s[s.length]=Gr,s[s.length]=Ze("Types",null,{xmlns:sn.CT,"xmlns:xsd":sn.xsd,"xmlns:xsi":sn.xsi}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(h){return Ze("Default",null,{Extension:h[0],ContentType:h[1]})}));var c=function(h){e[h]&&e[h].length>0&&(o=e[h][0],s[s.length]=Ze("Override",null,{PartName:(o[0]=="/"?"":"/")+o,ContentType:Dd[h][t.bookType]||Dd[h].xlsx}))},d=function(h){(e[h]||[]).forEach(function(p){s[s.length]=Ze("Override",null,{PartName:(p[0]=="/"?"":"/")+p,ContentType:Dd[h][t.bookType]||Dd[h].xlsx})})},f=function(h){(e[h]||[]).forEach(function(p){s[s.length]=Ze("Override",null,{PartName:(p[0]=="/"?"":"/")+p,ContentType:r[h][0]})})};return c("workbooks"),d("sheets"),d("charts"),f("themes"),["strs","styles"].forEach(c),["coreprops","extprops","custprops"].forEach(f),f("vba"),f("comments"),f("threadedcomments"),f("drawings"),d("metadata"),f("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var rr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function rb(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function So(e){var t=[Gr,Ze("Relationships",null,{xmlns:sn.RELS})];return xn(e["!id"]).forEach(function(r){t[t.length]=Ze("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function fr(e,t,r,s,o,c){if(o||(o={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,o.Id="rId"+t,o.Type=s,o.Target=r,[rr.HLINK,rr.XPATH,rr.XMISS].indexOf(o.Type)>-1&&(o.TargetMode="External"),e["!id"][o.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][o.Id]=o,e[("/"+o.Target).replace("//","/")]=o,t}function rN(e){var t=[Gr];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function Z1(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function nN(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function sN(e){var t=[Gr];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(Z1(e[r][0],e[r][1])),t.push(nN("",e[r][0]));return t.push(Z1("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function nb(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Ud.version+"</meta:generator></office:meta></office:document-meta>"}var hi=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Lh(e,t,r,s,o){o[e]!=null||t==null||t===""||(o[e]=t,t=hr(t),s[s.length]=r?Ze(e,t,r):pn(e,t))}function sb(e,t){var r=t||{},s=[Gr,Ze("cp:coreProperties",null,{"xmlns:cp":sn.CORE_PROPS,"xmlns:dc":sn.dc,"xmlns:dcterms":sn.dcterms,"xmlns:dcmitype":sn.dcmitype,"xmlns:xsi":sn.xsi})],o={};if(!e&&!r.Props)return s.join("");e&&(e.CreatedDate!=null&&Lh("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:d0(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},s,o),e.ModifiedDate!=null&&Lh("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:d0(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},s,o));for(var c=0;c!=hi.length;++c){var d=hi[c],f=r.Props&&r.Props[d[1]]!=null?r.Props[d[1]]:e?e[d[1]]:null;f===!0?f="1":f===!1?f="0":typeof f=="number"&&(f=String(f)),f!=null&&Lh(d[0],f,null,s,o)}return s.length>2&&(s[s.length]="</cp:coreProperties>",s[1]=s[1].replace("/>",">")),s.join("")}var wo=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],ab=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function ib(e){var t=[],r=Ze;return e||(e={}),e.Application="SheetJS",t[t.length]=Gr,t[t.length]=Ze("Properties",null,{xmlns:sn.EXT_PROPS,"xmlns:vt":sn.vt}),wo.forEach(function(s){if(e[s[1]]!==void 0){var o;switch(s[2]){case"string":o=hr(String(e[s[1]]));break;case"bool":o=e[s[1]]?"true":"false";break}o!==void 0&&(t[t.length]=r(s[0],o))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(s){return"<vt:lpstr>"+hr(s)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function ob(e){var t=[Gr,Ze("Properties",null,{xmlns:sn.CUST_PROPS,"xmlns:vt":sn.vt})];if(!e)return t.join("");var r=1;return xn(e).forEach(function(o){++r,t[t.length]=Ze("property",SA(e[o]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:hr(o)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ey={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function aN(e,t){var r=[];return xn(ey).map(function(s){for(var o=0;o<hi.length;++o)if(hi[o][1]==s)return hi[o];for(o=0;o<wo.length;++o)if(wo[o][1]==s)return wo[o];throw s}).forEach(function(s){if(e[s[1]]!=null){var o=t&&t.Props&&t.Props[s[1]]!=null?t.Props[s[1]]:e[s[1]];switch(s[2]){case"date":o=new Date(o).toISOString().replace(/\.\d*Z/,"Z");break}typeof o=="number"?o=String(o):o===!0||o===!1?o=o?"1":"0":o instanceof Date&&(o=new Date(o).toISOString().replace(/\.\d*Z/,"")),r.push(pn(ey[s[1]]||s[1],o))}}),Ze("DocumentProperties",r.join(""),{xmlns:Zn.o})}function iN(e,t){var r=["Worksheets","SheetNames"],s="CustomDocumentProperties",o=[];return e&&xn(e).forEach(function(c){if(Object.prototype.hasOwnProperty.call(e,c)){for(var d=0;d<hi.length;++d)if(c==hi[d][1])return;for(d=0;d<wo.length;++d)if(c==wo[d][1])return;for(d=0;d<r.length;++d)if(c==r[d])return;var f=e[c],h="string";typeof f=="number"?(h="float",f=String(f)):f===!0||f===!1?(h="boolean",f=f?"1":"0"):f=String(f),o.push(Ze(U1(c),f,{"dt:dt":h}))}}),t&&xn(t).forEach(function(c){if(Object.prototype.hasOwnProperty.call(t,c)&&!(e&&Object.prototype.hasOwnProperty.call(e,c))){var d=t[c],f="string";typeof d=="number"?(f="float",d=String(d)):d===!0||d===!1?(f="boolean",d=d?"1":"0"):d instanceof Date?(f="dateTime.tz",d=d.toISOString()):d=String(d),o.push(Ze(U1(c),d,{"dt:dt":f}))}}),"<"+s+' xmlns="'+Zn.o+'">'+o.join("")+"</"+s+">"}function oN(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,s=r%Math.pow(2,32),o=(r-s)/Math.pow(2,32);s*=1e7,o*=1e7;var c=s/Math.pow(2,32)|0;c>0&&(s=s%Math.pow(2,32),o+=c);var d=Be(8);return d.write_shift(4,s),d.write_shift(4,o),d}function ty(e,t){var r=Be(4),s=Be(4);switch(r.write_shift(4,e==80?31:e),e){case 3:s.write_shift(-4,t);break;case 5:s=Be(8),s.write_shift(8,t,"f");break;case 11:s.write_shift(4,t?1:0);break;case 64:s=oN(t);break;case 31:case 80:for(s=Be(4+2*(t.length+1)+(t.length%2?0:2)),s.write_shift(4,t.length+1),s.write_shift(0,t,"dbcs");s.l!=s.length;)s.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return hn([r,s])}var lb=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function lN(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function ry(e,t,r){var s=Be(8),o=[],c=[],d=8,f=0,h=Be(8),p=Be(8);if(h.write_shift(4,2),h.write_shift(4,1200),p.write_shift(4,1),c.push(h),o.push(p),d+=8+h.length,!t){p=Be(8),p.write_shift(4,0),o.unshift(p);var x=[Be(4)];for(x[0].write_shift(4,e.length),f=0;f<e.length;++f){var y=e[f][0];for(h=Be(8+2*(y.length+1)+(y.length%2?0:2)),h.write_shift(4,f+2),h.write_shift(4,y.length+1),h.write_shift(0,y,"dbcs");h.l!=h.length;)h.write_shift(1,0);x.push(h)}h=hn(x),c.unshift(h),d+=8+h.length}for(f=0;f<e.length;++f)if(!(t&&!t[e[f][0]])&&!(lb.indexOf(e[f][0])>-1||ab.indexOf(e[f][0])>-1)&&e[f][1]!=null){var v=e[f][1],b=0;if(t){b=+t[e[f][0]];var w=r[b];if(w.p=="version"&&typeof v=="string"){var _=v.split(".");v=(+_[0]<<16)+(+_[1]||0)}h=ty(w.t,v)}else{var S=lN(v);S==-1&&(S=31,v=String(v)),h=ty(S,v)}c.push(h),p=Be(8),p.write_shift(4,t?b:2+f),o.push(p),d+=8+h.length}var N=8*(c.length+1);for(f=0;f<c.length;++f)o[f].write_shift(4,N),N+=c[f].length;return s.write_shift(4,d),s.write_shift(4,c.length),hn([s].concat(o).concat(c))}function ny(e,t,r,s,o,c){var d=Be(o?68:48),f=[d];d.write_shift(2,65534),d.write_shift(2,0),d.write_shift(4,842412599),d.write_shift(16,vr.utils.consts.HEADER_CLSID,"hex"),d.write_shift(4,o?2:1),d.write_shift(16,t,"hex"),d.write_shift(4,o?68:48);var h=ry(e,r,s);if(f.push(h),o){var p=ry(o,null,null);d.write_shift(16,c,"hex"),d.write_shift(4,68+h.length),f.push(p)}return hn(f)}function cN(e,t){t||(t=Be(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function dN(e,t){return e.read_shift(t)===1}function Dn(e,t){return t||(t=Be(2)),t.write_shift(2,+!!e),t}function cb(e){return e.read_shift(2,"u")}function ds(e,t){return t||(t=Be(2)),t.write_shift(2,e),t}function db(e,t,r){return r||(r=Be(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function ub(e,t,r){var s=e.read_shift(r&&r.biff>=12?2:1),o="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var c=e.read_shift(1);c&&(o="dbcs-cont")}else r.biff==12&&(o="wstr");r.biff>=2&&r.biff<=5&&(o="cpstr");var d=s?e.read_shift(s,o):"";return d}function uN(e){var t=e.t||"",r=Be(3);r.write_shift(2,t.length),r.write_shift(1,1);var s=Be(2*t.length);s.write_shift(2*t.length,t,"utf16le");var o=[r,s];return hn(o)}function fN(e,t,r){var s;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var o=e.read_shift(1);return o===0?s=e.read_shift(t,"sbcs-cont"):s=e.read_shift(t,"dbcs-cont"),s}function hN(e,t,r){var s=e.read_shift(r&&r.biff==2?1:2);return s===0?(e.l++,""):fN(e,s,r)}function pN(e,t,r){if(r.biff>5)return hN(e,t,r);var s=e.read_shift(1);return s===0?(e.l++,""):e.read_shift(s,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function fb(e,t,r){return r||(r=Be(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function sy(e,t){t||(t=Be(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function gN(e){var t=Be(512),r=0,s=e.Target;s.slice(0,7)=="file://"&&(s=s.slice(7));var o=s.indexOf("#"),c=o>-1?31:23;switch(s.charAt(0)){case"#":c=28;break;case".":c&=-3;break}t.write_shift(4,2),t.write_shift(4,c);var d=[8,6815827,6619237,4849780,83];for(r=0;r<d.length;++r)t.write_shift(4,d[r]);if(c==28)s=s.slice(1),sy(s,t);else if(c&2){for(d="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<d.length;++r)t.write_shift(1,parseInt(d[r],16));var f=o>-1?s.slice(0,o):s;for(t.write_shift(4,2*(f.length+1)),r=0;r<f.length;++r)t.write_shift(2,f.charCodeAt(r));t.write_shift(2,0),c&8&&sy(o>-1?s.slice(o+1):"",t)}else{for(d="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<d.length;++r)t.write_shift(1,parseInt(d[r],16));for(var h=0;s.slice(h*3,h*3+3)=="../"||s.slice(h*3,h*3+3)=="..\\";)++h;for(t.write_shift(2,h),t.write_shift(4,s.length-3*h+1),r=0;r<s.length-3*h;++r)t.write_shift(1,s.charCodeAt(r+3*h)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function yi(e,t,r,s){return s||(s=Be(6)),s.write_shift(2,e),s.write_shift(2,t),s.write_shift(2,r||0),s}function xN(e,t,r){var s=r.biff>8?4:2,o=e.read_shift(s),c=e.read_shift(s,"i"),d=e.read_shift(s,"i");return[o,c,d]}function mN(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2);return{s:{c:s,r:t},e:{c:o,r}}}function hb(e,t){return t||(t=Be(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Y0(e,t,r){var s=1536,o=16;switch(r.bookType){case"biff8":break;case"biff5":s=1280,o=8;break;case"biff4":s=4,o=6;break;case"biff3":s=3,o=6;break;case"biff2":s=2,o=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var c=Be(o);return c.write_shift(2,s),c.write_shift(2,t),o>4&&c.write_shift(2,29282),o>6&&c.write_shift(2,1997),o>8&&(c.write_shift(2,49161),c.write_shift(2,1),c.write_shift(2,1798),c.write_shift(2,0)),c}function yN(e,t){var r=!t||t.biff==8,s=Be(r?112:54);for(s.write_shift(t.biff==8?2:1,7),r&&s.write_shift(1,0),s.write_shift(4,859007059),s.write_shift(4,5458548|(r?0:536870912));s.l<s.length;)s.write_shift(1,r?0:32);return s}function vN(e,t){var r=!t||t.biff>=8?2:1,s=Be(8+r*e.name.length);s.write_shift(4,e.pos),s.write_shift(1,e.hs||0),s.write_shift(1,e.dt),s.write_shift(1,e.name.length),t.biff>=8&&s.write_shift(1,1),s.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var o=s.slice(0,s.l);return o.l=s.l,o}function bN(e,t){var r=Be(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var s=[],o=0;o<e.length;++o)s[o]=uN(e[o]);var c=hn([r].concat(s));return c.parts=[r.length].concat(s.map(function(d){return d.length})),c}function _N(){var e=Be(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function SN(e){var t=Be(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function wN(e,t){var r=e.name||"Arial",s=t&&t.biff==5,o=s?15+r.length:16+2*r.length,c=Be(o);return c.write_shift(2,e.sz*20),c.write_shift(4,0),c.write_shift(2,400),c.write_shift(4,0),c.write_shift(2,0),c.write_shift(1,r.length),s||c.write_shift(1,1),c.write_shift((s?1:2)*r.length,r,s?"sbcs":"utf16le"),c}function TN(e,t,r,s){var o=Be(10);return yi(e,t,s,o),o.write_shift(4,r),o}function jN(e,t,r,s,o){var c=!o||o.biff==8,d=Be(8+ +c+(1+c)*r.length);return yi(e,t,s,d),d.write_shift(2,r.length),c&&d.write_shift(1,1),d.write_shift((1+c)*r.length,r,c?"utf16le":"sbcs"),d}function EN(e,t,r,s){var o=r&&r.biff==5;s||(s=Be(o?3+t.length:5+2*t.length)),s.write_shift(2,e),s.write_shift(o?1:2,t.length),o||s.write_shift(1,1),s.write_shift((o?1:2)*t.length,t,o?"sbcs":"utf16le");var c=s.length>s.l?s.slice(0,s.l):s;return c.l==null&&(c.l=c.length),c}function kN(e,t){var r=t.biff==8||!t.biff?4:2,s=Be(2*r+6);return s.write_shift(r,e.s.r),s.write_shift(r,e.e.r+1),s.write_shift(2,e.s.c),s.write_shift(2,e.e.c+1),s.write_shift(2,0),s}function ay(e,t,r,s){var o=r&&r.biff==5;s||(s=Be(o?16:20)),s.write_shift(2,0),e.style?(s.write_shift(2,e.numFmtId||0),s.write_shift(2,65524)):(s.write_shift(2,e.numFmtId||0),s.write_shift(2,t<<4));var c=0;return e.numFmtId>0&&o&&(c|=1024),s.write_shift(4,c),s.write_shift(4,0),o||s.write_shift(4,0),s.write_shift(2,0),s}function CN(e){var t=Be(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function AN(e,t,r,s,o,c){var d=Be(8);return yi(e,t,s,d),db(r,c,d),d}function NN(e,t,r,s){var o=Be(14);return yi(e,t,s,o),mi(r,o),o}function RN(e,t,r){if(r.biff<8)return DN(e,t,r);for(var s=[],o=e.l+t,c=e.read_shift(r.biff>8?4:2);c--!==0;)s.push(xN(e,r.biff>8?12:6,r));if(e.l!=o)throw new Error("Bad ExternSheet: "+e.l+" != "+o);return s}function DN(e,t,r){e[e.l+1]==3&&e[e.l]++;var s=ub(e,t,r);return s.charCodeAt(0)==3?s.slice(1):s}function ON(e){var t=Be(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)hb(e[r],t);return t}function IN(e){var t=Be(24),r=an(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var s="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),o=0;o<16;++o)t.write_shift(1,parseInt(s[o],16));return hn([t,gN(e[1])])}function BN(e){var t=e[1].Tooltip,r=Be(10+2*(t.length+1));r.write_shift(2,2048);var s=an(e[0]);r.write_shift(2,s.r),r.write_shift(2,s.r),r.write_shift(2,s.c),r.write_shift(2,s.c);for(var o=0;o<t.length;++o)r.write_shift(2,t.charCodeAt(o));return r.write_shift(2,0),r}function MN(e){return e||(e=Be(4)),e.write_shift(2,1),e.write_shift(2,1),e}function FN(e,t,r){if(!r.cellStyles)return Fs(e,t);var s=r&&r.biff>=12?4:2,o=e.read_shift(s),c=e.read_shift(s),d=e.read_shift(s),f=e.read_shift(s),h=e.read_shift(2);s==2&&(e.l+=2);var p={s:o,e:c,w:d,ixfe:f,flags:h};return(r.biff>=5||!r.biff)&&(p.level=h>>8&7),p}function LN(e,t){var r=Be(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var s=0;return e.hidden&&(s|=1),r.write_shift(1,s),s=e.level||0,r.write_shift(1,s),r.write_shift(2,0),r}function PN(e){for(var t=Be(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function zN(e,t,r){var s=Be(15);return dc(s,e,t),s.write_shift(8,r,"f"),s}function UN(e,t,r){var s=Be(9);return dc(s,e,t),s.write_shift(2,r),s}var WN=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=F0({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(f,h){var p=[],x=xi(1);switch(h.type){case"base64":x=Ss(ia(f));break;case"binary":x=Ss(f);break;case"buffer":case"array":x=f;break}Jn(x,0);var y=x.read_shift(1),v=!!(y&136),b=!1,w=!1;switch(y){case 2:break;case 3:break;case 48:b=!0,v=!0;break;case 49:b=!0,v=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+y.toString(16))}var _=0,S=521;y==2&&(_=x.read_shift(2)),x.l+=3,y!=2&&(_=x.read_shift(4)),_>1048576&&(_=1e6),y!=2&&(S=x.read_shift(2));var N=x.read_shift(2),R=h.codepage||1252;y!=2&&(x.l+=16,x.read_shift(1),x[x.l]!==0&&(R=e[x[x.l]]),x.l+=1,x.l+=2),w&&(x.l+=36);for(var I=[],G={},Z=Math.min(x.length,y==2?521:S-10-(b?264:0)),ie=w?32:11;x.l<Z&&x[x.l]!=13;)switch(G={},G.name=Wd.utils.decode(R,x.slice(x.l,x.l+ie)).replace(/[\u0000\r\n].*$/g,""),x.l+=ie,G.type=String.fromCharCode(x.read_shift(1)),y!=2&&!w&&(G.offset=x.read_shift(4)),G.len=x.read_shift(1),y==2&&(G.offset=x.read_shift(2)),G.dec=x.read_shift(1),G.name.length&&I.push(G),y!=2&&(x.l+=w?13:14),G.type){case"B":(!b||G.len!=8)&&h.WTF&&console.log("Skipping "+G.name+":"+G.type);break;case"G":case"P":h.WTF&&console.log("Skipping "+G.name+":"+G.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+G.type)}if(x[x.l]!==13&&(x.l=S-1),x.read_shift(1)!==13)throw new Error("DBF Terminator not found "+x.l+" "+x[x.l]);x.l=S;var q=0,P=0;for(p[0]=[],P=0;P!=I.length;++P)p[0][P]=I[P].name;for(;_-- >0;){if(x[x.l]===42){x.l+=N;continue}for(++x.l,p[++q]=[],P=0,P=0;P!=I.length;++P){var te=x.slice(x.l,x.l+I[P].len);x.l+=I[P].len,Jn(te,0);var ue=Wd.utils.decode(R,te);switch(I[P].type){case"C":ue.trim().length&&(p[q][P]=ue.replace(/\s+$/,""));break;case"D":ue.length===8?p[q][P]=new Date(+ue.slice(0,4),+ue.slice(4,6)-1,+ue.slice(6,8)):p[q][P]=ue;break;case"F":p[q][P]=parseFloat(ue.trim());break;case"+":case"I":p[q][P]=w?te.read_shift(-4,"i")^2147483648:te.read_shift(4,"i");break;case"L":switch(ue.trim().toUpperCase()){case"Y":case"T":p[q][P]=!0;break;case"N":case"F":p[q][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ue+"|")}break;case"M":if(!v)throw new Error("DBF Unexpected MEMO for type "+y.toString(16));p[q][P]="##MEMO##"+(w?parseInt(ue.trim(),10):te.read_shift(4));break;case"N":ue=ue.replace(/\u0000/g,"").trim(),ue&&ue!="."&&(p[q][P]=+ue||0);break;case"@":p[q][P]=new Date(te.read_shift(-8,"f")-621356832e5);break;case"T":p[q][P]=new Date((te.read_shift(4)-2440588)*864e5+te.read_shift(4));break;case"Y":p[q][P]=te.read_shift(4,"i")/1e4+te.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":p[q][P]=-te.read_shift(-8,"f");break;case"B":if(b&&I[P].len==8){p[q][P]=te.read_shift(8,"f");break}case"G":case"P":te.l+=I[P].len;break;case"0":if(I[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+I[P].type)}}}if(y!=2&&x.l<x.length&&x[x.l++]!=26)throw new Error("DBF EOF Marker missing "+(x.l-1)+" of "+x.length+" "+x[x.l-1].toString(16));return h&&h.sheetRows&&(p=p.slice(0,h.sheetRows)),h.DBF=I,p}function s(f,h){var p=h||{};p.dateNF||(p.dateNF="yyyymmdd");var x=Oo(r(f,p),p);return x["!cols"]=p.DBF.map(function(y){return{wch:y.len,DBF:y}}),delete p.DBF,x}function o(f,h){try{return bi(s(f,h),h)}catch(p){if(h&&h.WTF)throw p}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function d(f,h){var p=h||{};if(+p.codepage>=0&&Yl(+p.codepage),p.type=="string")throw new Error("Cannot write DBF to JS string");var x=Pn(),y=tu(f,{header:1,raw:!0,cellDates:!0}),v=y[0],b=y.slice(1),w=f["!cols"]||[],_=0,S=0,N=0,R=1;for(_=0;_<v.length;++_){if(((w[_]||{}).DBF||{}).name){v[_]=w[_].DBF.name,++N;continue}if(v[_]!=null){if(++N,typeof v[_]=="number"&&(v[_]=v[_].toString(10)),typeof v[_]!="string")throw new Error("DBF Invalid column name "+v[_]+" |"+typeof v[_]+"|");if(v.indexOf(v[_])!==_){for(S=0;S<1024;++S)if(v.indexOf(v[_]+"_"+S)==-1){v[_]+="_"+S;break}}}}var I=kr(f["!ref"]),G=[],Z=[],ie=[];for(_=0;_<=I.e.c-I.s.c;++_){var q="",P="",te=0,ue=[];for(S=0;S<b.length;++S)b[S][_]!=null&&ue.push(b[S][_]);if(ue.length==0||v[_]==null){G[_]="?";continue}for(S=0;S<ue.length;++S){switch(typeof ue[S]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=ue[S]instanceof Date?"D":"C";break;default:P="C"}te=Math.max(te,String(ue[S]).length),q=q&&q!=P?"C":P}te>250&&(te=250),P=((w[_]||{}).DBF||{}).type,P=="C"&&w[_].DBF.len>te&&(te=w[_].DBF.len),q=="B"&&P=="N"&&(q="N",ie[_]=w[_].DBF.dec,te=w[_].DBF.len),Z[_]=q=="C"||P=="N"?te:c[q]||0,R+=Z[_],G[_]=q}var X=x.next(32);for(X.write_shift(4,318902576),X.write_shift(4,b.length),X.write_shift(2,296+32*N),X.write_shift(2,R),_=0;_<4;++_)X.write_shift(4,0);for(X.write_shift(4,0|(+t[gv]||3)<<8),_=0,S=0;_<v.length;++_)if(v[_]!=null){var fe=x.next(32),J=(v[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);fe.write_shift(1,J,"sbcs"),fe.write_shift(1,G[_]=="?"?"C":G[_],"sbcs"),fe.write_shift(4,S),fe.write_shift(1,Z[_]||c[G[_]]||0),fe.write_shift(1,ie[_]||0),fe.write_shift(1,2),fe.write_shift(4,0),fe.write_shift(1,0),fe.write_shift(4,0),fe.write_shift(4,0),S+=Z[_]||c[G[_]]||0}var Q=x.next(264);for(Q.write_shift(4,13),_=0;_<65;++_)Q.write_shift(4,0);for(_=0;_<b.length;++_){var oe=x.next(R);for(oe.write_shift(1,0),S=0;S<v.length;++S)if(v[S]!=null)switch(G[S]){case"L":oe.write_shift(1,b[_][S]==null?63:b[_][S]?84:70);break;case"B":oe.write_shift(8,b[_][S]||0,"f");break;case"N":var re="0";for(typeof b[_][S]=="number"&&(re=b[_][S].toFixed(ie[S]||0)),N=0;N<Z[S]-re.length;++N)oe.write_shift(1,32);oe.write_shift(1,re,"sbcs");break;case"D":b[_][S]?(oe.write_shift(4,("0000"+b[_][S].getFullYear()).slice(-4),"sbcs"),oe.write_shift(2,("00"+(b[_][S].getMonth()+1)).slice(-2),"sbcs"),oe.write_shift(2,("00"+b[_][S].getDate()).slice(-2),"sbcs")):oe.write_shift(8,"00000000","sbcs");break;case"C":var ye=String(b[_][S]!=null?b[_][S]:"").slice(0,Z[S]);for(oe.write_shift(1,ye,"sbcs"),N=0;N<Z[S]-ye.length;++N)oe.write_shift(1,32);break}}return x.next(1).write_shift(1,26),x.end()}return{to_workbook:o,to_sheet:s,from_sheet:d}})(),qN=(function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+xn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(v,b){var w=e[b];return typeof w=="number"?A1(w):w},s=function(v,b,w){var _=b.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return _==59?v:A1(_)};e["|"]=254;function o(v,b){switch(b.type){case"base64":return c(ia(v),b);case"binary":return c(v,b);case"buffer":return c(ir&&Buffer.isBuffer(v)?v.toString("binary"):ac(v),b);case"array":return c(uu(v),b)}throw new Error("Unrecognized type "+b.type)}function c(v,b){var w=v.split(/[\n\r]+/),_=-1,S=-1,N=0,R=0,I=[],G=[],Z=null,ie={},q=[],P=[],te=[],ue=0,X;for(+b.codepage>=0&&Yl(+b.codepage);N!==w.length;++N){ue=0;var fe=w[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(t,r),J=fe.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),Q=J[0],oe;if(fe.length>0)switch(Q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":J[1].charAt(0)=="P"&&G.push(fe.slice(3).replace(/;;/g,";"));break;case"C":var re=!1,ye=!1,le=!1,Ae=!1,B=-1,K=-1;for(R=1;R<J.length;++R)switch(J[R].charAt(0)){case"A":break;case"X":S=parseInt(J[R].slice(1))-1,ye=!0;break;case"Y":for(_=parseInt(J[R].slice(1))-1,ye||(S=0),X=I.length;X<=_;++X)I[X]=[];break;case"K":oe=J[R].slice(1),oe.charAt(0)==='"'?oe=oe.slice(1,oe.length-1):oe==="TRUE"?oe=!0:oe==="FALSE"?oe=!1:isNaN(na(oe))?isNaN(Xl(oe).getDate())||(oe=On(oe)):(oe=na(oe),Z!==null&&kv(Z)&&(oe=Rv(oe))),re=!0;break;case"E":Ae=!0;var E=U5(J[R].slice(1),{r:_,c:S});I[_][S]=[I[_][S],E];break;case"S":le=!0,I[_][S]=[I[_][S],"S5S"];break;case"G":break;case"R":B=parseInt(J[R].slice(1))-1;break;case"C":K=parseInt(J[R].slice(1))-1;break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+fe)}if(re&&(I[_][S]&&I[_][S].length==2?I[_][S][0]=oe:I[_][S]=oe,Z=null),le){if(Ae)throw new Error("SYLK shared formula cannot have own formula");var L=B>-1&&I[B][K];if(!L||!L[1])throw new Error("SYLK shared formula cannot find base");I[_][S][1]=W5(L[1],{r:_-B,c:S-K})}break;case"F":var z=0;for(R=1;R<J.length;++R)switch(J[R].charAt(0)){case"X":S=parseInt(J[R].slice(1))-1,++z;break;case"Y":for(_=parseInt(J[R].slice(1))-1,X=I.length;X<=_;++X)I[X]=[];break;case"M":ue=parseInt(J[R].slice(1))/20;break;case"F":break;case"G":break;case"P":Z=G[parseInt(J[R].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(te=J[R].slice(1).split(" "),X=parseInt(te[0],10);X<=parseInt(te[1],10);++X)ue=parseInt(te[2],10),P[X-1]=ue===0?{hidden:!0}:{wch:ue},K0(P[X-1]);break;case"C":S=parseInt(J[R].slice(1))-1,P[S]||(P[S]={});break;case"R":_=parseInt(J[R].slice(1))-1,q[_]||(q[_]={}),ue>0?(q[_].hpt=ue,q[_].hpx=yb(ue)):ue===0&&(q[_].hidden=!0);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+fe)}z<1&&(Z=null);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+fe)}}return q.length>0&&(ie["!rows"]=q),P.length>0&&(ie["!cols"]=P),b&&b.sheetRows&&(I=I.slice(0,b.sheetRows)),[I,ie]}function d(v,b){var w=o(v,b),_=w[0],S=w[1],N=Oo(_,b);return xn(S).forEach(function(R){N[R]=S[R]}),N}function f(v,b){return bi(d(v,b),b)}function h(v,b,w,_){var S="C;Y"+(w+1)+";X"+(_+1)+";K";switch(v.t){case"n":S+=v.v||0,v.f&&!v.F&&(S+=";E"+Q0(v.f,{r:w,c:_}));break;case"b":S+=v.v?"TRUE":"FALSE";break;case"e":S+=v.w||v.v;break;case"d":S+='"'+(v.w||v.v)+'"';break;case"s":S+='"'+v.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return S}function p(v,b){b.forEach(function(w,_){var S="F;W"+(_+1)+" "+(_+1)+" ";w.hidden?S+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=Qd(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=Jd(w.wpx)),typeof w.wch=="number"&&(S+=Math.round(w.wch))),S.charAt(S.length-1)!=" "&&v.push(S)})}function x(v,b){b.forEach(function(w,_){var S="F;";w.hidden?S+="M0;":w.hpt?S+="M"+20*w.hpt+";":w.hpx&&(S+="M"+20*Zd(w.hpx)+";"),S.length>2&&v.push(S+"R"+(_+1))})}function y(v,b){var w=["ID;PWXL;N;E"],_=[],S=kr(v["!ref"]),N,R=Array.isArray(v),I=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),v["!cols"]&&p(w,v["!cols"]),v["!rows"]&&x(w,v["!rows"]),w.push("B;Y"+(S.e.r-S.s.r+1)+";X"+(S.e.c-S.s.c+1)+";D"+[S.s.c,S.s.r,S.e.c,S.e.r].join(" "));for(var G=S.s.r;G<=S.e.r;++G)for(var Z=S.s.c;Z<=S.e.c;++Z){var ie=pr({r:G,c:Z});N=R?(v[G]||[])[Z]:v[ie],!(!N||N.v==null&&(!N.f||N.F))&&_.push(h(N,v,G,Z))}return w.join(I)+I+_.join(I)+I+"E"+I}return{to_workbook:f,to_sheet:d,from_sheet:y}})(),$N=(function(){function e(c,d){switch(d.type){case"base64":return t(ia(c),d);case"binary":return t(c,d);case"buffer":return t(ir&&Buffer.isBuffer(c)?c.toString("binary"):ac(c),d);case"array":return t(uu(c),d)}throw new Error("Unrecognized type "+d.type)}function t(c,d){for(var f=c.split(`
`),h=-1,p=-1,x=0,y=[];x!==f.length;++x){if(f[x].trim()==="BOT"){y[++h]=[],p=0;continue}if(!(h<0)){var v=f[x].trim().split(","),b=v[0],w=v[1];++x;for(var _=f[x]||"";(_.match(/["]/g)||[]).length&1&&x<f.length-1;)_+=`
`+f[++x];switch(_=_.trim(),+b){case-1:if(_==="BOT"){y[++h]=[],p=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?y[h][p]=!0:_==="FALSE"?y[h][p]=!1:isNaN(na(w))?isNaN(Xl(w).getDate())?y[h][p]=w:y[h][p]=On(w):y[h][p]=na(w),++p;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),y[h][p++]=_!==""?_:null;break}if(_==="EOD")break}}return d&&d.sheetRows&&(y=y.slice(0,d.sheetRows)),y}function r(c,d){return Oo(e(c,d),d)}function s(c,d){return bi(r(c,d),d)}var o=(function(){var c=function(h,p,x,y,v){h.push(p),h.push(x+","+y),h.push('"'+v.replace(/"/g,'""')+'"')},d=function(h,p,x,y){h.push(p+","+x),h.push(p==1?'"'+y.replace(/"/g,'""')+'"':y)};return function(h){var p=[],x=kr(h["!ref"]),y,v=Array.isArray(h);c(p,"TABLE",0,1,"sheetjs"),c(p,"VECTORS",0,x.e.r-x.s.r+1,""),c(p,"TUPLES",0,x.e.c-x.s.c+1,""),c(p,"DATA",0,0,"");for(var b=x.s.r;b<=x.e.r;++b){d(p,-1,0,"BOT");for(var w=x.s.c;w<=x.e.c;++w){var _=pr({r:b,c:w});if(y=v?(h[b]||[])[w]:h[_],!y){d(p,1,0,"");continue}switch(y.t){case"n":var S=y.w;!S&&y.v!=null&&(S=y.v),S==null?y.f&&!y.F?d(p,1,0,"="+y.f):d(p,1,0,""):d(p,0,S,"V");break;case"b":d(p,0,y.v?1:0,y.v?"TRUE":"FALSE");break;case"s":d(p,1,0,isNaN(y.v)?y.v:'="'+y.v+'"');break;case"d":y.w||(y.w=za(y.z||Fr[14],zn(On(y.v)))),d(p,0,y.w,"V");break;default:d(p,1,0,"")}}}d(p,-1,0,"EOD");var N=`\r
`,R=p.join(N);return R}})();return{to_workbook:s,to_sheet:r,from_sheet:o}})(),pb=(function(){function e(y){return y.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(y){return y.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(y,v){for(var b=y.split(`
`),w=-1,_=-1,S=0,N=[];S!==b.length;++S){var R=b[S].trim().split(":");if(R[0]==="cell"){var I=an(R[1]);if(N.length<=I.r)for(w=N.length;w<=I.r;++w)N[w]||(N[w]=[]);switch(w=I.r,_=I.c,R[2]){case"t":N[w][_]=e(R[3]);break;case"v":N[w][_]=+R[3];break;case"vtf":var G=R[R.length-1];case"vtc":switch(R[3]){case"nl":N[w][_]=!!+R[4];break;default:N[w][_]=+R[4];break}R[2]=="vtf"&&(N[w][_]=[N[w][_],G])}}}return v&&v.sheetRows&&(N=N.slice(0,v.sheetRows)),N}function s(y,v){return Oo(r(y,v),v)}function o(y,v){return bi(s(y,v),v)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),d=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,f=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),h="--SocialCalcSpreadsheetControlSave--";function p(y){if(!y||!y["!ref"])return"";for(var v=[],b=[],w,_="",S=ts(y["!ref"]),N=Array.isArray(y),R=S.s.r;R<=S.e.r;++R)for(var I=S.s.c;I<=S.e.c;++I)if(_=pr({r:R,c:I}),w=N?(y[R]||[])[I]:y[_],!(!w||w.v==null||w.t==="z")){switch(b=["cell",_,"t"],w.t){case"s":case"str":b.push(t(w.v));break;case"n":w.f?(b[2]="vtf",b[3]="n",b[4]=w.v,b[5]=t(w.f)):(b[2]="v",b[3]=w.v);break;case"b":b[2]="vt"+(w.f?"f":"c"),b[3]="nl",b[4]=w.v?"1":"0",b[5]=t(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var G=zn(On(w.v));b[2]="vtc",b[3]="nd",b[4]=""+G,b[5]=w.w||za(w.z||Fr[14],G);break;case"e":continue}v.push(b.join(":"))}return v.push("sheet:c:"+(S.e.c-S.s.c+1)+":r:"+(S.e.r-S.s.r+1)+":tvf:1"),v.push("valueformat:1:text-wiki"),v.join(`
`)}function x(y){return[c,d,f,d,p(y),h].join(`
`)}return{to_workbook:o,to_sheet:s,from_sheet:x}})(),HN=(function(){function e(x,y,v,b,w){w.raw?y[v][b]=x:x===""||(x==="TRUE"?y[v][b]=!0:x==="FALSE"?y[v][b]=!1:isNaN(na(x))?isNaN(Xl(x).getDate())?y[v][b]=x:y[v][b]=On(x):y[v][b]=na(x))}function t(x,y){var v=y||{},b=[];if(!x||x.length===0)return b;for(var w=x.split(/[\r\n]/),_=w.length-1;_>=0&&w[_].length===0;)--_;for(var S=10,N=0,R=0;R<=_;++R)N=w[R].indexOf(" "),N==-1?N=w[R].length:N++,S=Math.max(S,N);for(R=0;R<=_;++R){b[R]=[];var I=0;for(e(w[R].slice(0,S).trim(),b,R,I,v),I=1;I<=(w[R].length-S)/10+1;++I)e(w[R].slice(S+(I-1)*10,S+I*10).trim(),b,R,I,v)}return v.sheetRows&&(b=b.slice(0,v.sheetRows)),b}var r={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function o(x){for(var y={},v=!1,b=0,w=0;b<x.length;++b)(w=x.charCodeAt(b))==34?v=!v:!v&&w in r&&(y[w]=(y[w]||0)+1);w=[];for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&w.push([y[b],b]);if(!w.length){y=s;for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&w.push([y[b],b])}return w.sort(function(_,S){return _[0]-S[0]||s[_[1]]-s[S[1]]}),r[w.pop()[1]]||44}function c(x,y){var v=y||{},b="",w=v.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};x.slice(0,4)=="sep="?x.charCodeAt(5)==13&&x.charCodeAt(6)==10?(b=x.charAt(4),x=x.slice(7)):x.charCodeAt(5)==13||x.charCodeAt(5)==10?(b=x.charAt(4),x=x.slice(6)):b=o(x.slice(0,1024)):v&&v.FS?b=v.FS:b=o(x.slice(0,1024));var S=0,N=0,R=0,I=0,G=0,Z=b.charCodeAt(0),ie=!1,q=0,P=x.charCodeAt(0);x=x.replace(/\r\n/mg,`
`);var te=v.dateNF!=null?oA(v.dateNF):null;function ue(){var X=x.slice(I,G),fe={};if(X.charAt(0)=='"'&&X.charAt(X.length-1)=='"'&&(X=X.slice(1,-1).replace(/""/g,'"')),X.length===0)fe.t="z";else if(v.raw)fe.t="s",fe.v=X;else if(X.trim().length===0)fe.t="s",fe.v=X;else if(X.charCodeAt(0)==61)X.charCodeAt(1)==34&&X.charCodeAt(X.length-1)==34?(fe.t="s",fe.v=X.slice(2,-1).replace(/""/g,'"')):q5(X)?(fe.t="n",fe.f=X.slice(1)):(fe.t="s",fe.v=X);else if(X=="TRUE")fe.t="b",fe.v=!0;else if(X=="FALSE")fe.t="b",fe.v=!1;else if(!isNaN(R=na(X)))fe.t="n",v.cellText!==!1&&(fe.w=X),fe.v=R;else if(!isNaN(Xl(X).getDate())||te&&X.match(te)){fe.z=v.dateNF||Fr[14];var J=0;te&&X.match(te)&&(X=lA(X,v.dateNF,X.match(te)||[]),J=1),v.cellDates?(fe.t="d",fe.v=On(X,J)):(fe.t="n",fe.v=zn(On(X,J))),v.cellText!==!1&&(fe.w=za(fe.z,fe.v instanceof Date?zn(fe.v):fe.v)),v.cellNF||delete fe.z}else fe.t="s",fe.v=X;if(fe.t=="z"||(v.dense?(w[S]||(w[S]=[]),w[S][N]=fe):w[pr({c:N,r:S})]=fe),I=G+1,P=x.charCodeAt(I),_.e.c<N&&(_.e.c=N),_.e.r<S&&(_.e.r=S),q==Z)++N;else if(N=0,++S,v.sheetRows&&v.sheetRows<=S)return!0}e:for(;G<x.length;++G)switch(q=x.charCodeAt(G)){case 34:P===34&&(ie=!ie);break;case Z:case 10:case 13:if(!ie&&ue())break e;break}return G-I>0&&ue(),w["!ref"]=Hr(_),w}function d(x,y){return!(y&&y.PRN)||y.FS||x.slice(0,4)=="sep="||x.indexOf("	")>=0||x.indexOf(",")>=0||x.indexOf(";")>=0?c(x,y):Oo(t(x,y),y)}function f(x,y){var v="",b=y.type=="string"?[0,0,0,0]:nB(x,y);switch(y.type){case"base64":v=ia(x);break;case"binary":v=x;break;case"buffer":y.codepage==65001?v=x.toString("utf8"):y.codepage&&typeof Wd<"u"||(v=ir&&Buffer.isBuffer(x)?x.toString("binary"):ac(x));break;case"array":v=uu(x);break;case"string":v=x;break;default:throw new Error("Unrecognized type "+y.type)}return b[0]==239&&b[1]==187&&b[2]==191?v=zl(v.slice(3)):y.type!="string"&&y.type!="buffer"&&y.codepage==65001?v=zl(v):y.type=="binary"&&typeof Wd<"u",v.slice(0,19)=="socialcalc:version:"?pb.to_sheet(y.type=="string"?v:zl(v),y):d(v,y)}function h(x,y){return bi(f(x,y),y)}function p(x){for(var y=[],v=kr(x["!ref"]),b,w=Array.isArray(x),_=v.s.r;_<=v.e.r;++_){for(var S=[],N=v.s.c;N<=v.e.c;++N){var R=pr({r:_,c:N});if(b=w?(x[_]||[])[N]:x[R],!b||b.v==null){S.push("          ");continue}for(var I=(b.w||(oa(b),b.w)||"").slice(0,10);I.length<10;)I+=" ";S.push(I+(N===0?" ":""))}y.push(S.join(""))}return y.join(`
`)}return{to_workbook:h,to_sheet:f,from_sheet:p}})(),iy=(function(){function e(E,L,z){if(E){Jn(E,E.l||0);for(var Y=z.Enum||B;E.l<E.length;){var me=E.read_shift(2),Me=Y[me]||Y[65535],He=E.read_shift(2),Ce=E.l+He,ne=Me.f&&Me.f(E,He,z);if(E.l=Ce,L(ne,Me,me))return}}}function t(E,L){switch(L.type){case"base64":return r(Ss(ia(E)),L);case"binary":return r(Ss(E),L);case"buffer":case"array":return r(E,L)}throw"Unsupported type "+L.type}function r(E,L){if(!E)return E;var z=L||{},Y=z.dense?[]:{},me="Sheet1",Me="",He=0,Ce={},ne=[],Pe=[],$e={s:{r:0,c:0},e:{r:0,c:0}},rt=z.sheetRows||0;if(E[2]==0&&(E[3]==8||E[3]==9)&&E.length>=16&&E[14]==5&&E[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(E[2]==2)z.Enum=B,e(E,function(Re,ht,xt){switch(xt){case 0:z.vers=Re,Re>=4096&&(z.qpro=!0);break;case 6:$e=Re;break;case 204:Re&&(Me=Re);break;case 222:Me=Re;break;case 15:case 51:z.qpro||(Re[1].v=Re[1].v.slice(1));case 13:case 14:case 16:xt==14&&(Re[2]&112)==112&&(Re[2]&15)>1&&(Re[2]&15)<15&&(Re[1].z=z.dateNF||Fr[14],z.cellDates&&(Re[1].t="d",Re[1].v=Rv(Re[1].v))),z.qpro&&Re[3]>He&&(Y["!ref"]=Hr($e),Ce[me]=Y,ne.push(me),Y=z.dense?[]:{},$e={s:{r:0,c:0},e:{r:0,c:0}},He=Re[3],me=Me||"Sheet"+(He+1),Me="");var Dt=z.dense?(Y[Re[0].r]||[])[Re[0].c]:Y[pr(Re[0])];if(Dt){Dt.t=Re[1].t,Dt.v=Re[1].v,Re[1].z!=null&&(Dt.z=Re[1].z),Re[1].f!=null&&(Dt.f=Re[1].f);break}z.dense?(Y[Re[0].r]||(Y[Re[0].r]=[]),Y[Re[0].r][Re[0].c]=Re[1]):Y[pr(Re[0])]=Re[1];break}},z);else if(E[2]==26||E[2]==14)z.Enum=K,E[2]==14&&(z.qpro=!0,E.l=0),e(E,function(Re,ht,xt){switch(xt){case 204:me=Re;break;case 22:Re[1].v=Re[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Re[3]>He&&(Y["!ref"]=Hr($e),Ce[me]=Y,ne.push(me),Y=z.dense?[]:{},$e={s:{r:0,c:0},e:{r:0,c:0}},He=Re[3],me="Sheet"+(He+1)),rt>0&&Re[0].r>=rt)break;z.dense?(Y[Re[0].r]||(Y[Re[0].r]=[]),Y[Re[0].r][Re[0].c]=Re[1]):Y[pr(Re[0])]=Re[1],$e.e.c<Re[0].c&&($e.e.c=Re[0].c),$e.e.r<Re[0].r&&($e.e.r=Re[0].r);break;case 27:Re[14e3]&&(Pe[Re[14e3][0]]=Re[14e3][1]);break;case 1537:Pe[Re[0]]=Re[1],Re[0]==He&&(me=Re[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+E[2]);if(Y["!ref"]=Hr($e),Ce[Me||me]=Y,ne.push(Me||me),!Pe.length)return{SheetNames:ne,Sheets:Ce};for(var V={},Ne=[],st=0;st<Pe.length;++st)Ce[ne[st]]?(Ne.push(Pe[st]||ne[st]),V[Pe[st]]=Ce[Pe[st]]||Ce[ne[st]]):(Ne.push(Pe[st]),V[Pe[st]]={"!ref":"A1"});return{SheetNames:Ne,Sheets:V}}function s(E,L){var z=L||{};if(+z.codepage>=0&&Yl(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=Pn(),me=kr(E["!ref"]),Me=Array.isArray(E),He=[];et(Y,0,c(1030)),et(Y,6,h(me));for(var Ce=Math.min(me.e.r,8191),ne=me.s.r;ne<=Ce;++ne)for(var Pe=gn(ne),$e=me.s.c;$e<=me.e.c;++$e){ne===me.s.r&&(He[$e]=bn($e));var rt=He[$e]+Pe,V=Me?(E[ne]||[])[$e]:E[rt];if(!(!V||V.t=="z"))if(V.t=="n")(V.v|0)==V.v&&V.v>=-32768&&V.v<=32767?et(Y,13,b(ne,$e,V.v)):et(Y,14,_(ne,$e,V.v));else{var Ne=oa(V);et(Y,15,y(ne,$e,Ne.slice(0,239)))}}return et(Y,1),Y.end()}function o(E,L){var z=L||{};if(+z.codepage>=0&&Yl(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=Pn();et(Y,0,d(E));for(var me=0,Me=0;me<E.SheetNames.length;++me)(E.Sheets[E.SheetNames[me]]||{})["!ref"]&&et(Y,27,Ae(E.SheetNames[me],Me++));var He=0;for(me=0;me<E.SheetNames.length;++me){var Ce=E.Sheets[E.SheetNames[me]];if(!(!Ce||!Ce["!ref"])){for(var ne=kr(Ce["!ref"]),Pe=Array.isArray(Ce),$e=[],rt=Math.min(ne.e.r,8191),V=ne.s.r;V<=rt;++V)for(var Ne=gn(V),st=ne.s.c;st<=ne.e.c;++st){V===ne.s.r&&($e[st]=bn(st));var Re=$e[st]+Ne,ht=Pe?(Ce[V]||[])[st]:Ce[Re];if(!(!ht||ht.t=="z"))if(ht.t=="n")et(Y,23,ue(V,st,He,ht.v));else{var xt=oa(ht);et(Y,22,q(V,st,He,xt.slice(0,239)))}}++He}}return et(Y,1),Y.end()}function c(E){var L=Be(2);return L.write_shift(2,E),L}function d(E){var L=Be(26);L.write_shift(2,4096),L.write_shift(2,4),L.write_shift(4,0);for(var z=0,Y=0,me=0,Me=0;Me<E.SheetNames.length;++Me){var He=E.SheetNames[Me],Ce=E.Sheets[He];if(!(!Ce||!Ce["!ref"])){++me;var ne=ts(Ce["!ref"]);z<ne.e.r&&(z=ne.e.r),Y<ne.e.c&&(Y=ne.e.c)}}return z>8191&&(z=8191),L.write_shift(2,z),L.write_shift(1,me),L.write_shift(1,Y),L.write_shift(2,0),L.write_shift(2,0),L.write_shift(1,1),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(4,0),L}function f(E,L,z){var Y={s:{c:0,r:0},e:{c:0,r:0}};return L==8&&z.qpro?(Y.s.c=E.read_shift(1),E.l++,Y.s.r=E.read_shift(2),Y.e.c=E.read_shift(1),E.l++,Y.e.r=E.read_shift(2),Y):(Y.s.c=E.read_shift(2),Y.s.r=E.read_shift(2),L==12&&z.qpro&&(E.l+=2),Y.e.c=E.read_shift(2),Y.e.r=E.read_shift(2),L==12&&z.qpro&&(E.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function h(E){var L=Be(8);return L.write_shift(2,E.s.c),L.write_shift(2,E.s.r),L.write_shift(2,E.e.c),L.write_shift(2,E.e.r),L}function p(E,L,z){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(Y[0].c=E.read_shift(1),Y[3]=E.read_shift(1),Y[0].r=E.read_shift(2),E.l+=2):(Y[2]=E.read_shift(1),Y[0].c=E.read_shift(2),Y[0].r=E.read_shift(2)),Y}function x(E,L,z){var Y=E.l+L,me=p(E,L,z);if(me[1].t="s",z.vers==20768){E.l++;var Me=E.read_shift(1);return me[1].v=E.read_shift(Me,"utf8"),me}return z.qpro&&E.l++,me[1].v=E.read_shift(Y-E.l,"cstr"),me}function y(E,L,z){var Y=Be(7+z.length);Y.write_shift(1,255),Y.write_shift(2,L),Y.write_shift(2,E),Y.write_shift(1,39);for(var me=0;me<Y.length;++me){var Me=z.charCodeAt(me);Y.write_shift(1,Me>=128?95:Me)}return Y.write_shift(1,0),Y}function v(E,L,z){var Y=p(E,L,z);return Y[1].v=E.read_shift(2,"i"),Y}function b(E,L,z){var Y=Be(7);return Y.write_shift(1,255),Y.write_shift(2,L),Y.write_shift(2,E),Y.write_shift(2,z,"i"),Y}function w(E,L,z){var Y=p(E,L,z);return Y[1].v=E.read_shift(8,"f"),Y}function _(E,L,z){var Y=Be(13);return Y.write_shift(1,255),Y.write_shift(2,L),Y.write_shift(2,E),Y.write_shift(8,z,"f"),Y}function S(E,L,z){var Y=E.l+L,me=p(E,L,z);if(me[1].v=E.read_shift(8,"f"),z.qpro)E.l=Y;else{var Me=E.read_shift(2);G(E.slice(E.l,E.l+Me),me),E.l+=Me}return me}function N(E,L,z){var Y=L&32768;return L&=-32769,L=(Y?E:0)+(L>=8192?L-16384:L),(Y?"":"$")+(z?bn(L):gn(L))}var R={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function G(E,L){Jn(E,0);for(var z=[],Y=0,me="",Me="",He="",Ce="";E.l<E.length;){var ne=E[E.l++];switch(ne){case 0:z.push(E.read_shift(8,"f"));break;case 1:Me=N(L[0].c,E.read_shift(2),!0),me=N(L[0].r,E.read_shift(2),!1),z.push(Me+me);break;case 2:{var Pe=N(L[0].c,E.read_shift(2),!0),$e=N(L[0].r,E.read_shift(2),!1);Me=N(L[0].c,E.read_shift(2),!0),me=N(L[0].r,E.read_shift(2),!1),z.push(Pe+$e+":"+Me+me)}break;case 3:if(E.l<E.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(E.read_shift(2));break;case 6:{for(var rt="";ne=E[E.l++];)rt+=String.fromCharCode(ne);z.push('"'+rt.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:Ce=z.pop(),He=z.pop(),z.push(["AND","OR"][ne-20]+"("+He+","+Ce+")");break;default:if(ne<32&&I[ne])Ce=z.pop(),He=z.pop(),z.push(He+I[ne]+Ce);else if(R[ne]){if(Y=R[ne][1],Y==69&&(Y=E[E.l++]),Y>z.length){console.error("WK1 bad formula parse 0x"+ne.toString(16)+":|"+z.join("|")+"|");return}var V=z.slice(-Y);z.length-=Y,z.push(R[ne][0]+"("+V.join(",")+")")}else return ne<=7?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=24?console.error("WK1 unsupported op "+ne.toString(16)):ne<=30?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=115?console.error("WK1 unsupported function opcode "+ne.toString(16)):console.error("WK1 unrecognized opcode "+ne.toString(16))}}z.length==1?L[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function Z(E){var L=[{c:0,r:0},{t:"n",v:0},0];return L[0].r=E.read_shift(2),L[3]=E[E.l++],L[0].c=E[E.l++],L}function ie(E,L){var z=Z(E);return z[1].t="s",z[1].v=E.read_shift(L-4,"cstr"),z}function q(E,L,z,Y){var me=Be(6+Y.length);me.write_shift(2,E),me.write_shift(1,z),me.write_shift(1,L),me.write_shift(1,39);for(var Me=0;Me<Y.length;++Me){var He=Y.charCodeAt(Me);me.write_shift(1,He>=128?95:He)}return me.write_shift(1,0),me}function P(E,L){var z=Z(E);z[1].v=E.read_shift(2);var Y=z[1].v>>1;if(z[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return z[1].v=Y,z}function te(E,L){var z=Z(E),Y=E.read_shift(4),me=E.read_shift(4),Me=E.read_shift(2);if(Me==65535)return Y===0&&me===3221225472?(z[1].t="e",z[1].v=15):Y===0&&me===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var He=Me&32768;return Me=(Me&32767)-16446,z[1].v=(1-He*2)*(me*Math.pow(2,Me+32)+Y*Math.pow(2,Me)),z}function ue(E,L,z,Y){var me=Be(14);if(me.write_shift(2,E),me.write_shift(1,z),me.write_shift(1,L),Y==0)return me.write_shift(4,0),me.write_shift(4,0),me.write_shift(2,65535),me;var Me=0,He=0,Ce=0,ne=0;return Y<0&&(Me=1,Y=-Y),He=Math.log2(Y)|0,Y/=Math.pow(2,He-31),ne=Y>>>0,(ne&2147483648)==0&&(Y/=2,++He,ne=Y>>>0),Y-=ne,ne|=2147483648,ne>>>=0,Y*=Math.pow(2,32),Ce=Y>>>0,me.write_shift(4,Ce),me.write_shift(4,ne),He+=16383+(Me?32768:0),me.write_shift(2,He),me}function X(E,L){var z=te(E);return E.l+=L-14,z}function fe(E,L){var z=Z(E),Y=E.read_shift(4);return z[1].v=Y>>6,z}function J(E,L){var z=Z(E),Y=E.read_shift(8,"f");return z[1].v=Y,z}function Q(E,L){var z=J(E);return E.l+=L-10,z}function oe(E,L){return E[E.l+L-1]==0?E.read_shift(L,"cstr"):""}function re(E,L){var z=E[E.l++];z>L-1&&(z=L-1);for(var Y="";Y.length<z;)Y+=String.fromCharCode(E[E.l++]);return Y}function ye(E,L,z){if(!(!z.qpro||L<21)){var Y=E.read_shift(1);E.l+=17,E.l+=1,E.l+=2;var me=E.read_shift(L-21,"cstr");return[Y,me]}}function le(E,L){for(var z={},Y=E.l+L;E.l<Y;){var me=E.read_shift(2);if(me==14e3){for(z[me]=[0,""],z[me][0]=E.read_shift(2);E[E.l];)z[me][1]+=String.fromCharCode(E[E.l]),E.l++;E.l++}}return z}function Ae(E,L){var z=Be(5+E.length);z.write_shift(2,14e3),z.write_shift(2,L);for(var Y=0;Y<E.length;++Y){var me=E.charCodeAt(Y);z[z.l++]=me>127?95:me}return z[z.l++]=0,z}var B={0:{n:"BOF",f:cb},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:v},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:x},16:{n:"FORMULA",f:S},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:x},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:oe},222:{n:"SHEETNAMELP",f:re},65535:{n:""}},K={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ie},23:{n:"NUMBER17",f:te},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:X},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:le},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:fe},38:{n:"??"},39:{n:"NUMBER27",f:J},40:{n:"FORMULA28",f:Q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:oe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ye},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:o,to_workbook:t}})(),GN=/^\s|\s$|[\t\n\r]/;function gb(e,t){if(!t.bookSST)return"";var r=[Gr];r[r.length]=Ze("sst",null,{xmlns:Do[0],count:e.Count,uniqueCount:e.Unique});for(var s=0;s!=e.length;++s)if(e[s]!=null){var o=e[s],c="<si>";o.r?c+=o.r:(c+="<t",o.t||(o.t=""),o.t.match(GN)&&(c+=' xml:space="preserve"'),c+=">"+hr(o.t)+"</t>"),c+="</si>",r[r.length]=c}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function VN(e){return[e.read_shift(4),e.read_shift(4)]}function YN(e,t){return t||(t=Be(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var KN=PA;function XN(e){var t=Pn();qe(t,159,YN(e));for(var r=0;r<e.length;++r)qe(t,19,KN(e[r]));return qe(t,160),t.end()}function QN(e){for(var t=[],r=e.split(""),s=0;s<r.length;++s)t[s]=r[s].charCodeAt(0);return t}function xb(e){var t=0,r,s=QN(e),o=s.length+1,c,d,f,h,p;for(r=xi(o),r[0]=s.length,c=1;c!=o;++c)r[c]=s[c-1];for(c=o-1;c>=0;--c)d=r[c],f=(t&16384)===0?0:1,h=t<<1&32767,p=f|h,t=p^d;return t^52811}var JN=(function(){function e(o,c){switch(c.type){case"base64":return t(ia(o),c);case"binary":return t(o,c);case"buffer":return t(ir&&Buffer.isBuffer(o)?o.toString("binary"):ac(o),c);case"array":return t(uu(o),c)}throw new Error("Unrecognized type "+c.type)}function t(o,c){var d=c||{},f=d.dense?[]:{},h=o.match(/\\trowd.*?\\row\b/g);if(!h.length)throw new Error("RTF missing table");var p={s:{c:0,r:0},e:{c:0,r:h.length-1}};return h.forEach(function(x,y){Array.isArray(f)&&(f[y]=[]);for(var v=/\\\w+\b/g,b=0,w,_=-1;w=v.exec(x);){switch(w[0]){case"\\cell":var S=x.slice(b,v.lastIndex-w[0].length);if(S[0]==" "&&(S=S.slice(1)),++_,S.length){var N={v:S,t:"s"};Array.isArray(f)?f[y][_]=N:f[pr({r:y,c:_})]=N}break}b=v.lastIndex}_>p.e.c&&(p.e.c=_)}),f["!ref"]=Hr(p),f}function r(o,c){return bi(e(o,c),c)}function s(o){for(var c=["{\\rtf1\\ansi"],d=kr(o["!ref"]),f,h=Array.isArray(o),p=d.s.r;p<=d.e.r;++p){c.push("\\trowd\\trautofit1");for(var x=d.s.c;x<=d.e.c;++x)c.push("\\cellx"+(x+1));for(c.push("\\pard\\intbl"),x=d.s.c;x<=d.e.c;++x){var y=pr({r:p,c:x});f=h?(o[p]||[])[x]:o[y],!(!f||f.v==null&&(!f.f||f.F))&&(c.push(" "+(f.w||(oa(f),f.w))),c.push("\\cell"))}c.push("\\pard\\intbl\\row")}return c.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:s}})();function oy(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var ZN=6,sa=ZN;function Qd(e){return Math.floor((e+Math.round(128/sa)/256)*sa)}function Jd(e){return Math.floor((e-5)/sa*100+.5)/100}function f0(e){return Math.round((e*sa+5)/sa*256)/256}function K0(e){e.width?(e.wpx=Qd(e.width),e.wch=Jd(e.wpx),e.MDW=sa):e.wpx?(e.wch=Jd(e.wpx),e.width=f0(e.wch),e.MDW=sa):typeof e.wch=="number"&&(e.width=f0(e.wch),e.wpx=Qd(e.width),e.MDW=sa),e.customWidth&&delete e.customWidth}var e5=96,mb=e5;function Zd(e){return e*96/mb}function yb(e){return e*mb/96}function t5(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&(t[t.length]=Ze("numFmt",null,{numFmtId:s,formatCode:hr(e[s])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ze("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function r5(e){var t=[];return t[t.length]=Ze("cellXfs",null),e.forEach(function(r){t[t.length]=Ze("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ze("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function vb(e,t){var r=[Gr,Ze("styleSheet",null,{xmlns:Do[0],"xmlns:vt":sn.vt})],s;return e.SSF&&(s=t5(e.SSF))!=null&&(r[r.length]=s),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(s=r5(t.cellXfs))&&(r[r.length]=s),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function n5(e,t){var r=e.read_shift(2),s=_n(e);return[r,s]}function s5(e,t,r){r||(r=Be(6+4*t.length)),r.write_shift(2,e),on(t,r);var s=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),s}function a5(e,t,r){var s={};s.sz=e.read_shift(2)/20;var o=GA(e);o.fItalic&&(s.italic=1),o.fCondense&&(s.condense=1),o.fExtend&&(s.extend=1),o.fShadow&&(s.shadow=1),o.fOutline&&(s.outline=1),o.fStrikeout&&(s.strike=1);var c=e.read_shift(2);switch(c===700&&(s.bold=1),e.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var d=e.read_shift(1);d!=0&&(s.underline=d);var f=e.read_shift(1);f>0&&(s.family=f);var h=e.read_shift(1);switch(h>0&&(s.charset=h),e.l++,s.color=HA(e),e.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=_n(e),s}function i5(e,t){t||(t=Be(153)),t.write_shift(2,e.sz*20),VA(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Kd(e.color,t);var s=0;return s=2,t.write_shift(1,s),on(e.name,t),t.length>t.l?t.slice(0,t.l):t}var o5=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ph,l5=Fs;function ly(e,t){t||(t=Be(84)),Ph||(Ph=F0(o5));var r=Ph[e.patternType];r==null&&(r=40),t.write_shift(4,r);var s=0;if(r!=40)for(Kd({auto:1},t),Kd({auto:1},t);s<12;++s)t.write_shift(4,0);else{for(;s<4;++s)t.write_shift(4,0);for(;s<12;++s)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function c5(e,t){var r=e.l+t,s=e.read_shift(2),o=e.read_shift(2);return e.l=r,{ixfe:s,numFmtId:o}}function bb(e,t,r){r||(r=Be(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var s=0;return r.write_shift(1,s),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Dl(e,t){return t||(t=Be(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var d5=Fs;function u5(e,t){return t||(t=Be(51)),t.write_shift(1,0),Dl(null,t),Dl(null,t),Dl(null,t),Dl(null,t),Dl(null,t),t.length>t.l?t.slice(0,t.l):t}function f5(e,t){return t||(t=Be(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Yd(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function h5(e,t,r){var s=Be(2052);return s.write_shift(4,e),Yd(t,s),Yd(r,s),s.length>s.l?s.slice(0,s.l):s}function p5(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var o=s[0];o<=s[1];++o)t[o]!=null&&++r}),r!=0&&(qe(e,615,Ts(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var o=s[0];o<=s[1];++o)t[o]!=null&&qe(e,44,s5(o,t[o]))}),qe(e,616))}}function g5(e){var t=1;qe(e,611,Ts(t)),qe(e,43,i5({sz:12,color:{theme:1},name:"Calibri",family:2})),qe(e,612)}function x5(e){var t=2;qe(e,603,Ts(t)),qe(e,45,ly({patternType:"none"})),qe(e,45,ly({patternType:"gray125"})),qe(e,604)}function m5(e){var t=1;qe(e,613,Ts(t)),qe(e,46,u5()),qe(e,614)}function y5(e){var t=1;qe(e,626,Ts(t)),qe(e,47,bb({numFmtId:0},65535)),qe(e,627)}function v5(e,t){qe(e,617,Ts(t.length)),t.forEach(function(r){qe(e,47,bb(r,0))}),qe(e,618)}function b5(e){var t=1;qe(e,619,Ts(t)),qe(e,48,f5({xfId:0,name:"Normal"})),qe(e,620)}function _5(e){var t=0;qe(e,505,Ts(t)),qe(e,506)}function S5(e){var t=0;qe(e,508,h5(t,"TableStyleMedium9","PivotStyleMedium4")),qe(e,509)}function w5(e,t){var r=Pn();return qe(r,278),p5(r,e.SSF),g5(r),x5(r),m5(r),y5(r),v5(r,t.cellXfs),b5(r),_5(r),S5(r),qe(r,279),r.end()}function _b(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Gr];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function T5(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:_n(e)}}function j5(e){var t=Be(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),on(e.name,t),t.slice(0,t.l)}function E5(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function k5(e){var t=Be(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function C5(e,t){var r=Be(8+2*t.length);return r.write_shift(4,e),on(t,r),r.slice(0,r.l)}function A5(e){return e.l+=4,e.read_shift(4)!=0}function N5(e,t){var r=Be(8);return r.write_shift(4,e),r.write_shift(4,1),r}function R5(){var e=Pn();return qe(e,332),qe(e,334,Ts(1)),qe(e,335,j5({name:"XLDAPR",version:12e4,flags:3496657072})),qe(e,336),qe(e,339,C5(1,"XLDAPR")),qe(e,52),qe(e,35,Ts(514)),qe(e,4096,Ts(0)),qe(e,4097,ds(1)),qe(e,36),qe(e,53),qe(e,340),qe(e,337,N5(1)),qe(e,51,k5([[1,0]])),qe(e,338),qe(e,333),e.end()}function Sb(){var e=[Gr];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function D5(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=pr(r);var s=e.read_shift(1);return s&2&&(t.l="1"),s&8&&(t.a="1"),t}var bo=1024;function wb(e,t){for(var r=[21600,21600],s=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),o=[Ze("xml",null,{"xmlns:v":Zn.v,"xmlns:o":Zn.o,"xmlns:x":Zn.x,"xmlns:mv":Zn.mv}).replace(/\/>/,">"),Ze("o:shapelayout",Ze("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Ze("v:shapetype",[Ze("v:stroke",null,{joinstyle:"miter"}),Ze("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:s})];bo<e*1e3;)bo+=1e3;return t.forEach(function(c){var d=an(c[0]),f={color2:"#BEFF82",type:"gradient"};f.type=="gradient"&&(f.angle="-180");var h=f.type=="gradient"?Ze("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,p=Ze("v:fill",h,f),x={on:"t",obscured:"t"};++bo,o=o.concat(["<v:shape"+Jl({id:"_x0000_s"+bo,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(c[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",p,Ze("v:shadow",null,x),Ze("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",pn("x:Anchor",[d.c+1,0,d.r+1,0,d.c+3,20,d.r+5,20].join(",")),pn("x:AutoFill","False"),pn("x:Row",String(d.r)),pn("x:Column",String(d.c)),c[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),o.push("</xml>"),o.join("")}function Tb(e){var t=[Gr,Ze("comments",null,{xmlns:Do[0]})],r=[];return t.push("<authors>"),e.forEach(function(s){s[1].forEach(function(o){var c=hr(o.a);r.indexOf(c)==-1&&(r.push(c),t.push("<author>"+c+"</author>")),o.T&&o.ID&&r.indexOf("tc="+o.ID)==-1&&(r.push("tc="+o.ID),t.push("<author>tc="+o.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(s){var o=0,c=[];if(s[1][0]&&s[1][0].T&&s[1][0].ID?o=r.indexOf("tc="+s[1][0].ID):s[1].forEach(function(h){h.a&&(o=r.indexOf(hr(h.a))),c.push(h.t||"")}),t.push('<comment ref="'+s[0]+'" authorId="'+o+'"><text>'),c.length<=1)t.push(pn("t",hr(c[0]||"")));else{for(var d=`Comment:
    `+c[0]+`
`,f=1;f<c.length;++f)d+=`Reply:
    `+c[f]+`
`;t.push(pn("t",hr(d)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function O5(e,t,r){var s=[Gr,Ze("ThreadedComments",null,{xmlns:sn.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(o){var c="";(o[1]||[]).forEach(function(d,f){if(!d.T){delete d.ID;return}d.a&&t.indexOf(d.a)==-1&&t.push(d.a);var h={ref:o[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};f==0?c=h.id:h.parentId=c,d.ID=h.id,d.a&&(h.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(d.a)).slice(-12)+"}"),s.push(Ze("threadedComment",pn("text",d.t||""),h))})}),s.push("</ThreadedComments>"),s.join("")}function I5(e){var t=[Gr,Ze("personList",null,{xmlns:sn.TCMNT,"xmlns:x":Do[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,s){t.push(Ze("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+s).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function B5(e){var t={};t.iauthor=e.read_shift(4);var r=Ti(e);return t.rfx=r.s,t.ref=pr(r.s),e.l+=16,t}function M5(e,t){return t==null&&(t=Be(36)),t.write_shift(4,e[1].iauthor),Io(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var F5=_n;function L5(e){return on(e.slice(0,54))}function P5(e){var t=Pn(),r=[];return qe(t,628),qe(t,630),e.forEach(function(s){s[1].forEach(function(o){r.indexOf(o.a)>-1||(r.push(o.a.slice(0,54)),qe(t,632,L5(o.a)))})}),qe(t,631),qe(t,633),e.forEach(function(s){s[1].forEach(function(o){o.iauthor=r.indexOf(o.a);var c={s:an(s[0]),e:an(s[0])};qe(t,635,M5([c,o])),o.t&&o.t.length>0&&qe(t,637,UA(o)),qe(t,636),delete o.iauthor})}),qe(t,634),qe(t,629),t.end()}function z5(e,t){t.FullPaths.forEach(function(r,s){if(s!=0){var o=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");o.slice(-1)!=="/"&&vr.utils.cfb_add(e,o,t.FileIndex[s].content)}})}var jb=["xlsb","xlsm","xlam","biff8","xla"],U5=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(s,o,c,d){var f=!1,h=!1;c.length==0?h=!0:c.charAt(0)=="["&&(h=!0,c=c.slice(1,-1)),d.length==0?f=!0:d.charAt(0)=="["&&(f=!0,d=d.slice(1,-1));var p=c.length>0?parseInt(c,10)|0:0,x=d.length>0?parseInt(d,10)|0:0;return f?x+=t.c:--x,h?p+=t.r:--p,o+(f?"":"$")+bn(x)+(h?"":"$")+gn(p)}return function(o,c){return t=c,o.replace(e,r)}})(),X0=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Q0=(function(){return function(t,r){return t.replace(X0,function(s,o,c,d,f,h){var p=$0(d)-(c?0:r.c),x=q0(h)-(f?0:r.r),y=x==0?"":f?x+1:"["+x+"]",v=p==0?"":c?p+1:"["+p+"]";return o+"R"+y+"C"+v})}})();function W5(e,t){return e.replace(X0,function(r,s,o,c,d,f){return s+(o=="$"?o+c:bn($0(c)+t.c))+(d=="$"?d+f:gn(q0(f)+t.r))})}function q5(e){return e.length!=1}function $r(e){e.l+=1}function Ua(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Eb(e,t,r){var s=2;if(r){if(r.biff>=2&&r.biff<=5)return kb(e);r.biff==12&&(s=4)}var o=e.read_shift(s),c=e.read_shift(s),d=Ua(e),f=Ua(e);return{s:{r:o,c:d[0],cRel:d[1],rRel:d[2]},e:{r:c,c:f[0],cRel:f[1],rRel:f[2]}}}function kb(e){var t=Ua(e),r=Ua(e),s=e.read_shift(1),o=e.read_shift(1);return{s:{r:t[0],c:s,cRel:t[1],rRel:t[2]},e:{r:r[0],c:o,cRel:r[1],rRel:r[2]}}}function $5(e,t,r){if(r.biff<8)return kb(e);var s=e.read_shift(r.biff==12?4:2),o=e.read_shift(r.biff==12?4:2),c=Ua(e),d=Ua(e);return{s:{r:s,c:c[0],cRel:c[1],rRel:c[2]},e:{r:o,c:d[0],cRel:d[1],rRel:d[2]}}}function Cb(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return H5(e);var s=e.read_shift(r&&r.biff==12?4:2),o=Ua(e);return{r:s,c:o[0],cRel:o[1],rRel:o[2]}}function H5(e){var t=Ua(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function G5(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function V5(e,t,r){var s=r&&r.biff?r.biff:8;if(s>=2&&s<=5)return Y5(e);var o=e.read_shift(s>=12?4:2),c=e.read_shift(2),d=(c&16384)>>14,f=(c&32768)>>15;if(c&=16383,f==1)for(;o>524287;)o-=1048576;if(d==1)for(;c>8191;)c=c-16384;return{r:o,c,cRel:d,rRel:f}}function Y5(e){var t=e.read_shift(2),r=e.read_shift(1),s=(t&32768)>>15,o=(t&16384)>>14;return t&=16383,s==1&&t>=8192&&(t=t-16384),o==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:o,rRel:s}}function K5(e,t,r){var s=(e[e.l++]&96)>>5,o=Eb(e,r.biff>=2&&r.biff<=5?6:8,r);return[s,o]}function X5(e,t,r){var s=(e[e.l++]&96)>>5,o=e.read_shift(2,"i"),c=8;if(r)switch(r.biff){case 5:e.l+=12,c=6;break;case 12:c=12;break}var d=Eb(e,c,r);return[s,o,d]}function Q5(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[s]}function J5(e,t,r){var s=(e[e.l++]&96)>>5,o=e.read_shift(2),c=8;if(r)switch(r.biff){case 5:e.l+=12,c=6;break;case 12:c=12;break}return e.l+=c,[s,o]}function Z5(e,t,r){var s=(e[e.l++]&96)>>5,o=$5(e,t-1,r);return[s,o]}function eR(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[s]}function cy(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function tR(e,t,r){e.l+=2;for(var s=e.read_shift(r&&r.biff==2?1:2),o=[],c=0;c<=s;++c)o.push(e.read_shift(r&&r.biff==2?1:2));return o}function rR(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function nR(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function sR(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function aR(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[s]}function Ab(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function iR(e){return e.read_shift(2),Ab(e)}function oR(e){return e.read_shift(2),Ab(e)}function lR(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var o=Cb(e,0,r);return[s,o]}function cR(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var o=V5(e,0,r);return[s,o]}function dR(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var o=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var c=Cb(e,0,r);return[s,o,c]}function uR(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var o=e.read_shift(r&&r.biff<=3?1:2);return[uD[o],Db[o],s]}function fR(e,t,r){var s=e[e.l++],o=e.read_shift(1),c=r&&r.biff<=3?[s==88?-1:0,e.read_shift(1)]:hR(e);return[o,(c[0]===0?Db:dD)[c[1]]]}function hR(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function pR(e,t,r){e.l+=r&&r.biff==2?3:4}function gR(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var s=e.read_shift(2),o=e.read_shift(r&&r.biff==2?1:2);return[s,o]}function xR(e){return e.l++,lc[e.read_shift(1)]}function mR(e){return e.l++,e.read_shift(2)}function yR(e){return e.l++,e.read_shift(1)!==0}function vR(e){return e.l++,Bo(e)}function bR(e,t,r){return e.l++,ub(e,t-1,r)}function _R(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=dN(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=lc[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Bo(e);break;case 2:r[1]=pN(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function SR(e,t,r){for(var s=e.read_shift(r.biff==12?4:2),o=[],c=0;c!=s;++c)o.push((r.biff==12?Ti:mN)(e));return o}function wR(e,t,r){var s=0,o=0;r.biff==12?(s=e.read_shift(4),o=e.read_shift(4)):(o=1+e.read_shift(1),s=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--s,--o==0&&(o=256));for(var c=0,d=[];c!=s&&(d[c]=[]);++c)for(var f=0;f!=o;++f)d[c][f]=_R(e,r.biff);return d}function TR(e,t,r){var s=e.read_shift(1)>>>5&3,o=!r||r.biff>=8?4:2,c=e.read_shift(o);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[s,0,c]}function jR(e,t,r){if(r.biff==5)return ER(e);var s=e.read_shift(1)>>>5&3,o=e.read_shift(2),c=e.read_shift(4);return[s,o,c]}function ER(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var s=e.read_shift(2);return e.l+=12,[t,r,s]}function kR(e,t,r){var s=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var o=e.read_shift(r&&r.biff==2?1:2);return[s,o]}function CR(e,t,r){var s=e.read_shift(1)>>>5&3,o=e.read_shift(r&&r.biff==2?1:2);return[s,o]}function AR(e,t,r){var s=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[s]}function NR(e,t,r){var s=(e[e.l++]&96)>>5,o=e.read_shift(2),c=4;if(r)switch(r.biff){case 5:c=15;break;case 12:c=6;break}return e.l+=c,[s,o]}var RR=Fs,DR=Fs,OR=Fs;function cc(e,t,r){return e.l+=2,[G5(e)]}function J0(e){return e.l+=6,[]}var IR=cc,BR=J0,MR=J0,FR=cc;function Nb(e){return e.l+=2,[cb(e),e.read_shift(2)&1]}var LR=cc,PR=Nb,zR=J0,UR=cc,WR=cc,qR=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function $R(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(4),o=e.read_shift(2),c=e.read_shift(2),d=qR[r>>2&31];return{ixti:t,coltype:r&3,rt:d,idx:s,c:o,C:c}}function HR(e){return e.l+=2,[e.read_shift(4)]}function GR(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function VR(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function YR(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function KR(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function XR(e){return e.l+=4,[0,0]}var dy={1:{n:"PtgExp",f:gR},2:{n:"PtgTbl",f:OR},3:{n:"PtgAdd",f:$r},4:{n:"PtgSub",f:$r},5:{n:"PtgMul",f:$r},6:{n:"PtgDiv",f:$r},7:{n:"PtgPower",f:$r},8:{n:"PtgConcat",f:$r},9:{n:"PtgLt",f:$r},10:{n:"PtgLe",f:$r},11:{n:"PtgEq",f:$r},12:{n:"PtgGe",f:$r},13:{n:"PtgGt",f:$r},14:{n:"PtgNe",f:$r},15:{n:"PtgIsect",f:$r},16:{n:"PtgUnion",f:$r},17:{n:"PtgRange",f:$r},18:{n:"PtgUplus",f:$r},19:{n:"PtgUminus",f:$r},20:{n:"PtgPercent",f:$r},21:{n:"PtgParen",f:$r},22:{n:"PtgMissArg",f:$r},23:{n:"PtgStr",f:bR},26:{n:"PtgSheet",f:GR},27:{n:"PtgEndSheet",f:VR},28:{n:"PtgErr",f:xR},29:{n:"PtgBool",f:yR},30:{n:"PtgInt",f:mR},31:{n:"PtgNum",f:vR},32:{n:"PtgArray",f:eR},33:{n:"PtgFunc",f:uR},34:{n:"PtgFuncVar",f:fR},35:{n:"PtgName",f:TR},36:{n:"PtgRef",f:lR},37:{n:"PtgArea",f:K5},38:{n:"PtgMemArea",f:kR},39:{n:"PtgMemErr",f:RR},40:{n:"PtgMemNoMem",f:DR},41:{n:"PtgMemFunc",f:CR},42:{n:"PtgRefErr",f:AR},43:{n:"PtgAreaErr",f:Q5},44:{n:"PtgRefN",f:cR},45:{n:"PtgAreaN",f:Z5},46:{n:"PtgMemAreaN",f:YR},47:{n:"PtgMemNoMemN",f:KR},57:{n:"PtgNameX",f:jR},58:{n:"PtgRef3d",f:dR},59:{n:"PtgArea3d",f:X5},60:{n:"PtgRefErr3d",f:NR},61:{n:"PtgAreaErr3d",f:J5},255:{}},QR={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},JR={1:{n:"PtgElfLel",f:Nb},2:{n:"PtgElfRw",f:UR},3:{n:"PtgElfCol",f:IR},6:{n:"PtgElfRwV",f:WR},7:{n:"PtgElfColV",f:FR},10:{n:"PtgElfRadical",f:LR},11:{n:"PtgElfRadicalS",f:zR},13:{n:"PtgElfColS",f:BR},15:{n:"PtgElfColSV",f:MR},16:{n:"PtgElfRadicalLel",f:PR},25:{n:"PtgList",f:$R},29:{n:"PtgSxName",f:HR},255:{}},ZR={0:{n:"PtgAttrNoop",f:XR},1:{n:"PtgAttrSemi",f:aR},2:{n:"PtgAttrIf",f:nR},4:{n:"PtgAttrChoose",f:tR},8:{n:"PtgAttrGoto",f:rR},16:{n:"PtgAttrSum",f:pR},32:{n:"PtgAttrBaxcel",f:cy},33:{n:"PtgAttrBaxcel",f:cy},64:{n:"PtgAttrSpace",f:iR},65:{n:"PtgAttrSpaceSemi",f:oR},128:{n:"PtgAttrIfError",f:sR},255:{}};function eD(e,t,r,s){if(s.biff<8)return Fs(e,t);for(var o=e.l+t,c=[],d=0;d!==r.length;++d)switch(r[d][0]){case"PtgArray":r[d][1]=wR(e,0,s),c.push(r[d][1]);break;case"PtgMemArea":r[d][2]=SR(e,r[d][1],s),c.push(r[d][2]);break;case"PtgExp":s&&s.biff==12&&(r[d][1][1]=e.read_shift(4),c.push(r[d][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[d][0]}return t=o-e.l,t!==0&&c.push(Fs(e,t)),c}function tD(e,t,r){for(var s=e.l+t,o,c,d=[];s!=e.l;)t=s-e.l,c=e[e.l],o=dy[c]||dy[QR[c]],(c===24||c===25)&&(o=(c===24?JR:ZR)[e[e.l+1]]),!o||!o.f?Fs(e,t):d.push([o.n,o.f(e,t,r)]);return d}function rD(e){for(var t=[],r=0;r<e.length;++r){for(var s=e[r],o=[],c=0;c<s.length;++c){var d=s[c];if(d)switch(d[0]){case 2:o.push('"'+d[1].replace(/"/g,'""')+'"');break;default:o.push(d[1])}else o.push("")}t.push(o.join(","))}return t.join(";")}var nD={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function sD(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Rb(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var s=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!s)return"SH33TJSERR1";var o="";if(r.biff>8)switch(e[s[0]][0]){case 357:return o=s[1]==-1?"#REF":e.SheetNames[s[1]],s[1]==s[2]?o:o+":"+e.SheetNames[s[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[s[0]][0];case 355:default:return"SH33TJSSRC"+e[s[0]][0]}switch(e[s[0]][0][0]){case 1025:return o=s[1]==-1?"#REF":e.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?o:o+":"+e.SheetNames[s[2]];case 14849:return e[s[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return e[s[0]][0][3]?(o=s[1]==-1?"#REF":e[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?o:o+":"+e[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function uy(e,t,r){var s=Rb(e,t,r);return s=="#REF"?s:sD(s,r)}function Eo(e,t,r,s,o){var c=o&&o.biff||8,d={s:{c:0,r:0}},f=[],h,p,x,y=0,v=0,b,w="";if(!e[0]||!e[0][0])return"";for(var _=-1,S="",N=0,R=e[0].length;N<R;++N){var I=e[0][N];switch(I[0]){case"PtgUminus":f.push("-"+f.pop());break;case"PtgUplus":f.push("+"+f.pop());break;case"PtgPercent":f.push(f.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(h=f.pop(),p=f.pop(),_>=0){switch(e[0][_][1][0]){case 0:S=Mr(" ",e[0][_][1][1]);break;case 1:S=Mr("\r",e[0][_][1][1]);break;default:if(S="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][_][1][0])}p=p+S,_=-1}f.push(p+nD[I[0]]+h);break;case"PtgIsect":h=f.pop(),p=f.pop(),f.push(p+" "+h);break;case"PtgUnion":h=f.pop(),p=f.pop(),f.push(p+","+h);break;case"PtgRange":h=f.pop(),p=f.pop(),f.push(p+":"+h);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":x=Wl(I[1][1],d,o),f.push(ql(x,c));break;case"PtgRefN":x=r?Wl(I[1][1],r,o):I[1][1],f.push(ql(x,c));break;case"PtgRef3d":y=I[1][1],x=Wl(I[1][2],d,o),w=uy(s,y,o),f.push(w+"!"+ql(x,c));break;case"PtgFunc":case"PtgFuncVar":var G=I[1][0],Z=I[1][1];G||(G=0),G&=127;var ie=G==0?[]:f.slice(-G);f.length-=G,Z==="User"&&(Z=ie.shift()),f.push(Z+"("+ie.join(",")+")");break;case"PtgBool":f.push(I[1]?"TRUE":"FALSE");break;case"PtgInt":f.push(I[1]);break;case"PtgNum":f.push(String(I[1]));break;case"PtgStr":f.push('"'+I[1].replace(/"/g,'""')+'"');break;case"PtgErr":f.push(I[1]);break;case"PtgAreaN":b=K1(I[1][1],r?{s:r}:d,o),f.push(Fh(b,o));break;case"PtgArea":b=K1(I[1][1],d,o),f.push(Fh(b,o));break;case"PtgArea3d":y=I[1][1],b=I[1][2],w=uy(s,y,o),f.push(w+"!"+Fh(b,o));break;case"PtgAttrSum":f.push("SUM("+f.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":v=I[1][2];var q=(s.names||[])[v-1]||(s[0]||[])[v],P=q?q.Name:"SH33TJSNAME"+String(v);P&&P.slice(0,6)=="_xlfn."&&!o.xlfn&&(P=P.slice(6)),f.push(P);break;case"PtgNameX":var te=I[1][1];v=I[1][2];var ue;if(o.biff<=5)te<0&&(te=-te),s[te]&&(ue=s[te][v]);else{var X="";if(((s[te]||[])[0]||[])[0]==14849||(((s[te]||[])[0]||[])[0]==1025?s[te][v]&&s[te][v].itab>0&&(X=s.SheetNames[s[te][v].itab-1]+"!"):X=s.SheetNames[v-1]+"!"),s[te]&&s[te][v])X+=s[te][v].Name;else if(s[0]&&s[0][v])X+=s[0][v].Name;else{var fe=(Rb(s,te,o)||"").split(";;");fe[v-1]?X=fe[v-1]:X+="SH33TJSERRX"}f.push(X);break}ue||(ue={Name:"SH33TJSERRY"}),f.push(ue.Name);break;case"PtgParen":var J="(",Q=")";if(_>=0){switch(S="",e[0][_][1][0]){case 2:J=Mr(" ",e[0][_][1][1])+J;break;case 3:J=Mr("\r",e[0][_][1][1])+J;break;case 4:Q=Mr(" ",e[0][_][1][1])+Q;break;case 5:Q=Mr("\r",e[0][_][1][1])+Q;break;default:if(o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][_][1][0])}_=-1}f.push(J+f.pop()+Q);break;case"PtgRefErr":f.push("#REF!");break;case"PtgRefErr3d":f.push("#REF!");break;case"PtgExp":x={c:I[1][1],r:I[1][0]};var oe={c:r.c,r:r.r};if(s.sharedf[pr(x)]){var re=s.sharedf[pr(x)];f.push(Eo(re,d,oe,s,o))}else{var ye=!1;for(h=0;h!=s.arrayf.length;++h)if(p=s.arrayf[h],!(x.c<p[0].s.c||x.c>p[0].e.c)&&!(x.r<p[0].s.r||x.r>p[0].e.r)){f.push(Eo(p[1],d,oe,s,o)),ye=!0;break}ye||f.push(I[1])}break;case"PtgArray":f.push("{"+rD(I[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":f.push("");break;case"PtgAreaErr":f.push("#REF!");break;case"PtgAreaErr3d":f.push("#REF!");break;case"PtgList":f.push("Table"+I[1].idx+"[#"+I[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(I));default:throw new Error("Unrecognized Formula Token: "+String(I))}var le=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(o.biff!=3&&_>=0&&le.indexOf(e[0][N][0])==-1){I=e[0][_];var Ae=!0;switch(I[1][0]){case 4:Ae=!1;case 0:S=Mr(" ",I[1][1]);break;case 5:Ae=!1;case 1:S=Mr("\r",I[1][1]);break;default:if(S="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+I[1][0])}f.push((Ae?S:"")+f.pop()+(Ae?"":S)),_=-1}}if(f.length>1&&o.WTF)throw new Error("bad formula stack");return f[0]}function aD(e){if(e==null){var t=Be(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return mi(e);return mi(0)}function iD(e,t,r,s,o){var c=yi(t,r,o),d=aD(e.v),f=Be(6),h=33;f.write_shift(2,h),f.write_shift(4,0);for(var p=Be(e.bf.length),x=0;x<e.bf.length;++x)p[x]=e.bf[x];var y=hn([c,d,f,p]);return y}function fu(e,t,r){var s=e.read_shift(4),o=tD(e,s,r),c=e.read_shift(4),d=c>0?eD(e,c,o,r):null;return[o,d]}var oD=fu,hu=fu,lD=fu,cD=fu,dD={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Db={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},uD={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function fD(e){var t="of:="+e.replace(X0,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function hD(e){return e.replace(/\./,"!")}var $l=typeof Map<"u";function Z0(e,t,r){var s=0,o=e.length;if(r){if($l?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var c=$l?r.get(t):r[t];s<c.length;++s)if(e[c[s]].t===t)return e.Count++,c[s]}}else for(;s<o;++s)if(e[s].t===t)return e.Count++,s;return e[o]={t},e.Count++,e.Unique++,r&&($l?(r.has(t)||r.set(t,[]),r.get(t).push(o)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(o))),o}function pu(e,t){var r={min:e+1,max:e+1},s=-1;return t.MDW&&(sa=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?s=Jd(t.wpx):t.wch!=null&&(s=t.wch),s>-1?(r.width=f0(s),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Ob(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function $a(e,t,r){var s=r.revssf[t.z!=null?t.z:"General"],o=60,c=e.length;if(s==null&&r.ssf){for(;o<392;++o)if(r.ssf[o]==null){Cv(t.z,o),r.ssf[o]=t.z,r.revssf[t.z]=s=o;break}}for(o=0;o!=c;++o)if(e[o].numFmtId===s)return o;return e[c]={numFmtId:s,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},c}function pD(e,t,r){if(e&&e["!ref"]){var s=kr(e["!ref"]);if(s.e.c<s.s.c||s.e.r<s.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function gD(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Hr(e[r])+'"/>';return t+"</mergeCells>"}function xD(e,t,r,s,o){var c=!1,d={},f=null;if(s.bookType!=="xlsx"&&t.vbaraw){var h=t.SheetNames[r];try{t.Workbook&&(h=t.Workbook.Sheets[r].CodeName||h)}catch{}c=!0,d.codeName=Ql(hr(h))}if(e&&e["!outline"]){var p={summaryBelow:1,summaryRight:1};e["!outline"].above&&(p.summaryBelow=0),e["!outline"].left&&(p.summaryRight=0),f=(f||"")+Ze("outlinePr",null,p)}!c&&!f||(o[o.length]=Ze("sheetPr",f,d))}var mD=["objects","scenarios","selectLockedCells","selectUnlockedCells"],yD=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function vD(e){var t={sheet:1};return mD.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),yD.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=xb(e.password).toString(16).toUpperCase()),Ze("sheetProtection",null,t)}function bD(e){return Ob(e),Ze("pageMargins",null,e)}function _D(e,t){for(var r=["<cols>"],s,o=0;o!=t.length;++o)(s=t[o])&&(r[r.length]=Ze("col",null,pu(o,s)));return r[r.length]="</cols>",r.join("")}function SD(e,t,r,s){var o=typeof e.ref=="string"?e.ref:Hr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var c=r.Workbook.Names,d=ts(o);d.s.r==d.e.r&&(d.e.r=ts(t["!ref"]).e.r,o=Hr(d));for(var f=0;f<c.length;++f){var h=c[f];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==s){h.Ref="'"+r.SheetNames[s]+"'!"+o;break}}return f==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+r.SheetNames[s]+"'!"+o}),Ze("autoFilter",null,{ref:o})}function wD(e,t,r,s){var o={workbookViewId:"0"};return(((s||{}).Workbook||{}).Views||[])[0]&&(o.rightToLeft=s.Workbook.Views[0].RTL?"1":"0"),Ze("sheetViews",Ze("sheetView",null,o),{})}function TD(e,t,r,s){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var o="",c=e.t,d=e.v;if(e.t!=="z")switch(e.t){case"b":o=e.v?"1":"0";break;case"n":o=""+e.v;break;case"e":o=lc[e.v];break;case"d":s&&s.cellDates?o=On(e.v,-1).toISOString():(e=Un(e),e.t="n",o=""+(e.v=zn(On(e.v)))),typeof e.z>"u"&&(e.z=Fr[14]);break;default:o=e.v;break}var f=pn("v",hr(o)),h={r:t},p=$a(s.cellXfs,e,s);switch(p!==0&&(h.s=p),e.t){case"n":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(s&&s.bookSST){f=pn("v",""+Z0(s.Strings,e.v,s.revStrings)),h.t="s";break}h.t="str";break}if(e.t!=c&&(e.t=c,e.v=d),typeof e.f=="string"&&e.f){var x=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;f=Ze("f",hr(e.f),x)+(e.v!=null?f:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(h.cm=1),Ze("c",f,h)}function jD(e,t,r,s){var o=[],c=[],d=kr(e["!ref"]),f="",h,p="",x=[],y=0,v=0,b=e["!rows"],w=Array.isArray(e),_={r:p},S,N=-1;for(v=d.s.c;v<=d.e.c;++v)x[v]=bn(v);for(y=d.s.r;y<=d.e.r;++y){for(c=[],p=gn(y),v=d.s.c;v<=d.e.c;++v){h=x[v]+p;var R=w?(e[y]||[])[v]:e[h];R!==void 0&&(f=TD(R,h,e,t))!=null&&c.push(f)}(c.length>0||b&&b[y])&&(_={r:p},b&&b[y]&&(S=b[y],S.hidden&&(_.hidden=1),N=-1,S.hpx?N=Zd(S.hpx):S.hpt&&(N=S.hpt),N>-1&&(_.ht=N,_.customHeight=1),S.level&&(_.outlineLevel=S.level)),o[o.length]=Ze("row",c.join(""),_))}if(b)for(;y<b.length;++y)b&&b[y]&&(_={r:y+1},S=b[y],S.hidden&&(_.hidden=1),N=-1,S.hpx?N=Zd(S.hpx):S.hpt&&(N=S.hpt),N>-1&&(_.ht=N,_.customHeight=1),S.level&&(_.outlineLevel=S.level),o[o.length]=Ze("row","",_));return o.join("")}function Ib(e,t,r,s){var o=[Gr,Ze("worksheet",null,{xmlns:Do[0],"xmlns:r":sn.r})],c=r.SheetNames[e],d=0,f="",h=r.Sheets[c];h==null&&(h={});var p=h["!ref"]||"A1",x=kr(p);if(x.e.c>16383||x.e.r>1048575){if(t.WTF)throw new Error("Range "+p+" exceeds format limit A1:XFD1048576");x.e.c=Math.min(x.e.c,16383),x.e.r=Math.min(x.e.c,1048575),p=Hr(x)}s||(s={}),h["!comments"]=[];var y=[];xD(h,r,e,t,o),o[o.length]=Ze("dimension",null,{ref:p}),o[o.length]=wD(h,t,e,r),t.sheetFormat&&(o[o.length]=Ze("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),h["!cols"]!=null&&h["!cols"].length>0&&(o[o.length]=_D(h,h["!cols"])),o[d=o.length]="<sheetData/>",h["!links"]=[],h["!ref"]!=null&&(f=jD(h,t),f.length>0&&(o[o.length]=f)),o.length>d+1&&(o[o.length]="</sheetData>",o[d]=o[d].replace("/>",">")),h["!protect"]&&(o[o.length]=vD(h["!protect"])),h["!autofilter"]!=null&&(o[o.length]=SD(h["!autofilter"],h,r,e)),h["!merges"]!=null&&h["!merges"].length>0&&(o[o.length]=gD(h["!merges"]));var v=-1,b,w=-1;return h["!links"].length>0&&(o[o.length]="<hyperlinks>",h["!links"].forEach(function(_){_[1].Target&&(b={ref:_[0]},_[1].Target.charAt(0)!="#"&&(w=fr(s,-1,hr(_[1].Target).replace(/#.*$/,""),rr.HLINK),b["r:id"]="rId"+w),(v=_[1].Target.indexOf("#"))>-1&&(b.location=hr(_[1].Target.slice(v+1))),_[1].Tooltip&&(b.tooltip=hr(_[1].Tooltip)),o[o.length]=Ze("hyperlink",null,b))}),o[o.length]="</hyperlinks>"),delete h["!links"],h["!margins"]!=null&&(o[o.length]=bD(h["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(o[o.length]=pn("ignoredErrors",Ze("ignoredError",null,{numberStoredAsText:1,sqref:p}))),y.length>0&&(w=fr(s,-1,"../drawings/drawing"+(e+1)+".xml",rr.DRAW),o[o.length]=Ze("drawing",null,{"r:id":"rId"+w}),h["!drawing"]=y),h["!comments"].length>0&&(w=fr(s,-1,"../drawings/vmlDrawing"+(e+1)+".vml",rr.VML),o[o.length]=Ze("legacyDrawing",null,{"r:id":"rId"+w}),h["!legacy"]=w),o.length>1&&(o[o.length]="</worksheet>",o[1]=o[1].replace("/>",">")),o.join("")}function ED(e,t){var r={},s=e.l+t;r.r=e.read_shift(4),e.l+=4;var o=e.read_shift(2);e.l+=1;var c=e.read_shift(1);return e.l=s,c&7&&(r.level=c&7),c&16&&(r.hidden=!0),c&32&&(r.hpt=o/20),r}function kD(e,t,r){var s=Be(145),o=(r["!rows"]||[])[e]||{};s.write_shift(4,e),s.write_shift(4,0);var c=320;o.hpx?c=Zd(o.hpx)*20:o.hpt&&(c=o.hpt*20),s.write_shift(2,c),s.write_shift(1,0);var d=0;o.level&&(d|=o.level),o.hidden&&(d|=16),(o.hpx||o.hpt)&&(d|=32),s.write_shift(1,d),s.write_shift(1,0);var f=0,h=s.l;s.l+=4;for(var p={r:e,c:0},x=0;x<16;++x)if(!(t.s.c>x+1<<10||t.e.c<x<<10)){for(var y=-1,v=-1,b=x<<10;b<x+1<<10;++b){p.c=b;var w=Array.isArray(r)?(r[p.r]||[])[p.c]:r[pr(p)];w&&(y<0&&(y=b),v=b)}y<0||(++f,s.write_shift(4,y),s.write_shift(4,v))}var _=s.l;return s.l=h,s.write_shift(4,f),s.l=_,s.length>s.l?s.slice(0,s.l):s}function CD(e,t,r,s){var o=kD(s,r,t);(o.length>17||(t["!rows"]||[])[s])&&qe(e,0,o)}var AD=Ti,ND=Io;function RD(){}function DD(e,t){var r={},s=e[e.l];return++e.l,r.above=!(s&64),r.left=!(s&128),e.l+=18,r.name=WA(e),r}function OD(e,t,r){r==null&&(r=Be(84+4*e.length));var s=192;t&&(t.above&&(s&=-65),t.left&&(s&=-129)),r.write_shift(1,s);for(var o=1;o<3;++o)r.write_shift(1,0);return Kd({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Kv(e,r),r.slice(0,r.l)}function ID(e){var t=hs(e);return[t]}function BD(e,t,r){return r==null&&(r=Be(8)),_i(t,r)}function MD(e){var t=Si(e);return[t]}function FD(e,t,r){return r==null&&(r=Be(4)),wi(t,r)}function LD(e){var t=hs(e),r=e.read_shift(1);return[t,r,"b"]}function PD(e,t,r){return r==null&&(r=Be(9)),_i(t,r),r.write_shift(1,e.v?1:0),r}function zD(e){var t=Si(e),r=e.read_shift(1);return[t,r,"b"]}function UD(e,t,r){return r==null&&(r=Be(5)),wi(t,r),r.write_shift(1,e.v?1:0),r}function WD(e){var t=hs(e),r=e.read_shift(1);return[t,r,"e"]}function qD(e,t,r){return r==null&&(r=Be(9)),_i(t,r),r.write_shift(1,e.v),r}function $D(e){var t=Si(e),r=e.read_shift(1);return[t,r,"e"]}function HD(e,t,r){return r==null&&(r=Be(8)),wi(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function GD(e){var t=hs(e),r=e.read_shift(4);return[t,r,"s"]}function VD(e,t,r){return r==null&&(r=Be(12)),_i(t,r),r.write_shift(4,t.v),r}function YD(e){var t=Si(e),r=e.read_shift(4);return[t,r,"s"]}function KD(e,t,r){return r==null&&(r=Be(8)),wi(t,r),r.write_shift(4,t.v),r}function XD(e){var t=hs(e),r=Bo(e);return[t,r,"n"]}function QD(e,t,r){return r==null&&(r=Be(16)),_i(t,r),mi(e.v,r),r}function JD(e){var t=Si(e),r=Bo(e);return[t,r,"n"]}function ZD(e,t,r){return r==null&&(r=Be(12)),wi(t,r),mi(e.v,r),r}function eO(e){var t=hs(e),r=Xv(e);return[t,r,"n"]}function tO(e,t,r){return r==null&&(r=Be(12)),_i(t,r),Qv(e.v,r),r}function rO(e){var t=Si(e),r=Xv(e);return[t,r,"n"]}function nO(e,t,r){return r==null&&(r=Be(8)),wi(t,r),Qv(e.v,r),r}function sO(e){var t=hs(e),r=H0(e);return[t,r,"is"]}function aO(e){var t=hs(e),r=_n(e);return[t,r,"str"]}function iO(e,t,r){return r==null&&(r=Be(12+4*e.v.length)),_i(t,r),on(e.v,r),r.length>r.l?r.slice(0,r.l):r}function oO(e){var t=Si(e),r=_n(e);return[t,r,"str"]}function lO(e,t,r){return r==null&&(r=Be(8+4*e.v.length)),wi(t,r),on(e.v,r),r.length>r.l?r.slice(0,r.l):r}function cO(e,t,r){var s=e.l+t,o=hs(e);o.r=r["!row"];var c=e.read_shift(1),d=[o,c,"b"];if(r.cellFormula){e.l+=2;var f=hu(e,s-e.l,r);d[3]=Eo(f,null,o,r.supbooks,r)}else e.l=s;return d}function dO(e,t,r){var s=e.l+t,o=hs(e);o.r=r["!row"];var c=e.read_shift(1),d=[o,c,"e"];if(r.cellFormula){e.l+=2;var f=hu(e,s-e.l,r);d[3]=Eo(f,null,o,r.supbooks,r)}else e.l=s;return d}function uO(e,t,r){var s=e.l+t,o=hs(e);o.r=r["!row"];var c=Bo(e),d=[o,c,"n"];if(r.cellFormula){e.l+=2;var f=hu(e,s-e.l,r);d[3]=Eo(f,null,o,r.supbooks,r)}else e.l=s;return d}function fO(e,t,r){var s=e.l+t,o=hs(e);o.r=r["!row"];var c=_n(e),d=[o,c,"str"];if(r.cellFormula){e.l+=2;var f=hu(e,s-e.l,r);d[3]=Eo(f,null,o,r.supbooks,r)}else e.l=s;return d}var hO=Ti,pO=Io;function gO(e,t){return t==null&&(t=Be(4)),t.write_shift(4,e),t}function xO(e,t){var r=e.l+t,s=Ti(e),o=G0(e),c=_n(e),d=_n(e),f=_n(e);e.l=r;var h={rfx:s,relId:o,loc:c,display:f};return d&&(h.Tooltip=d),h}function mO(e,t){var r=Be(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Io({s:an(e[0]),e:an(e[0])},r),V0("rId"+t,r);var s=e[1].Target.indexOf("#"),o=s==-1?"":e[1].Target.slice(s+1);return on(o||"",r),on(e[1].Tooltip||"",r),on("",r),r.slice(0,r.l)}function yO(){}function vO(e,t,r){var s=e.l+t,o=Jv(e),c=e.read_shift(1),d=[o];if(d[2]=c,r.cellFormula){var f=oD(e,s-e.l,r);d[1]=f}else e.l=s;return d}function bO(e,t,r){var s=e.l+t,o=Ti(e),c=[o];if(r.cellFormula){var d=cD(e,s-e.l,r);c[1]=d,e.l=s}else e.l=s;return c}function _O(e,t,r){r==null&&(r=Be(18));var s=pu(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(s.width||10)*256),r.write_shift(4,0);var o=0;return t.hidden&&(o|=1),typeof s.width=="number"&&(o|=2),t.level&&(o|=t.level<<8),r.write_shift(2,o),r}var Bb=["left","right","top","bottom","header","footer"];function SO(e){var t={};return Bb.forEach(function(r){t[r]=Bo(e)}),t}function wO(e,t){return t==null&&(t=Be(48)),Ob(e),Bb.forEach(function(r){mi(e[r],t)}),t}function TO(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function jO(e,t,r){r==null&&(r=Be(30));var s=924;return(((t||{}).Views||[])[0]||{}).RTL&&(s|=32),r.write_shift(2,s),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function EO(e){var t=Be(24);return t.write_shift(4,4),t.write_shift(4,1),Io(e,t),t}function kO(e,t){return t==null&&(t=Be(66)),t.write_shift(2,e.password?xb(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function CO(){}function AO(){}function NO(e,t,r,s,o,c,d){if(t.v===void 0)return!1;var f="";switch(t.t){case"b":f=t.v?"1":"0";break;case"d":t=Un(t),t.z=t.z||Fr[14],t.v=zn(On(t.v)),t.t="n";break;case"n":case"e":f=""+t.v;break;default:f=t.v;break}var h={r,c:s};switch(h.s=$a(o.cellXfs,t,o),t.l&&c["!links"].push([pr(h),t.l]),t.c&&c["!comments"].push([pr(h),t.c]),t.t){case"s":case"str":return o.bookSST?(f=Z0(o.Strings,t.v,o.revStrings),h.t="s",h.v=f,d?qe(e,18,KD(t,h)):qe(e,7,VD(t,h))):(h.t="str",d?qe(e,17,lO(t,h)):qe(e,6,iO(t,h))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?d?qe(e,13,nO(t,h)):qe(e,2,tO(t,h)):d?qe(e,16,ZD(t,h)):qe(e,5,QD(t,h)),!0;case"b":return h.t="b",d?qe(e,15,UD(t,h)):qe(e,4,PD(t,h)),!0;case"e":return h.t="e",d?qe(e,14,HD(t,h)):qe(e,3,qD(t,h)),!0}return d?qe(e,12,FD(t,h)):qe(e,1,BD(t,h)),!0}function RO(e,t,r,s){var o=kr(t["!ref"]||"A1"),c,d="",f=[];qe(e,145);var h=Array.isArray(t),p=o.e.r;t["!rows"]&&(p=Math.max(o.e.r,t["!rows"].length-1));for(var x=o.s.r;x<=p;++x){d=gn(x),CD(e,t,o,x);var y=!1;if(x<=o.e.r)for(var v=o.s.c;v<=o.e.c;++v){x===o.s.r&&(f[v]=bn(v)),c=f[v]+d;var b=h?(t[x]||[])[v]:t[c];if(!b){y=!1;continue}y=NO(e,b,x,v,s,t,y)}}qe(e,146)}function DO(e,t){!t||!t["!merges"]||(qe(e,177,gO(t["!merges"].length)),t["!merges"].forEach(function(r){qe(e,176,pO(r))}),qe(e,178))}function OO(e,t){!t||!t["!cols"]||(qe(e,390),t["!cols"].forEach(function(r,s){r&&qe(e,60,_O(s,r))}),qe(e,391))}function IO(e,t){!t||!t["!ref"]||(qe(e,648),qe(e,649,EO(kr(t["!ref"]))),qe(e,650))}function BO(e,t,r){t["!links"].forEach(function(s){if(s[1].Target){var o=fr(r,-1,s[1].Target.replace(/#.*$/,""),rr.HLINK);qe(e,494,mO(s,o))}}),delete t["!links"]}function MO(e,t,r,s){if(t["!comments"].length>0){var o=fr(s,-1,"../drawings/vmlDrawing"+(r+1)+".vml",rr.VML);qe(e,551,V0("rId"+o)),t["!legacy"]=o}}function FO(e,t,r,s){if(t["!autofilter"]){var o=t["!autofilter"],c=typeof o.ref=="string"?o.ref:Hr(o.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var d=r.Workbook.Names,f=ts(c);f.s.r==f.e.r&&(f.e.r=ts(t["!ref"]).e.r,c=Hr(f));for(var h=0;h<d.length;++h){var p=d[h];if(p.Name=="_xlnm._FilterDatabase"&&p.Sheet==s){p.Ref="'"+r.SheetNames[s]+"'!"+c;break}}h==d.length&&d.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+r.SheetNames[s]+"'!"+c}),qe(e,161,Io(kr(c))),qe(e,162)}}function LO(e,t,r){qe(e,133),qe(e,137,jO(t,r)),qe(e,138),qe(e,134)}function PO(e,t){t["!protect"]&&qe(e,535,kO(t["!protect"]))}function zO(e,t,r,s){var o=Pn(),c=r.SheetNames[e],d=r.Sheets[c]||{},f=c;try{r&&r.Workbook&&(f=r.Workbook.Sheets[e].CodeName||f)}catch{}var h=kr(d["!ref"]||"A1");if(h.e.c>16383||h.e.r>1048575){if(t.WTF)throw new Error("Range "+(d["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575)}return d["!links"]=[],d["!comments"]=[],qe(o,129),(r.vbaraw||d["!outline"])&&qe(o,147,OD(f,d["!outline"])),qe(o,148,ND(h)),LO(o,d,r.Workbook),OO(o,d),RO(o,d,e,t),PO(o,d),FO(o,d,r,e),DO(o,d),BO(o,d,s),d["!margins"]&&qe(o,476,wO(d["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&IO(o,d),MO(o,d,e,s),qe(o,130),o.end()}function UO(e,t){e.l+=10;var r=_n(e);return{name:r}}var WO=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function qO(e){return!e.Workbook||!e.Workbook.WBProps?"false":bA(e.Workbook.WBProps.date1904)?"true":"false"}var $O="][*?/\\".split("");function Mb(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return $O.forEach(function(s){if(e.indexOf(s)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function HO(e,t,r){e.forEach(function(s,o){Mb(s);for(var c=0;c<o;++c)if(s==e[c])throw new Error("Duplicate Sheet Name: "+s);if(r){var d=t&&t[o]&&t[o].CodeName||s;if(d.charCodeAt(0)==95&&d.length>22)throw new Error("Bad Code Name: Worksheet"+d)}})}function GO(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];HO(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)pD(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function Fb(e){var t=[Gr];t[t.length]=Ze("workbook",null,{xmlns:Do[0],"xmlns:r":sn.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,s={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(WO.forEach(function(f){e.Workbook.WBProps[f[0]]!=null&&e.Workbook.WBProps[f[0]]!=f[1]&&(s[f[0]]=e.Workbook.WBProps[f[0]])}),e.Workbook.WBProps.CodeName&&(s.codeName=e.Workbook.WBProps.CodeName,delete s.CodeName)),t[t.length]=Ze("workbookPr",null,s);var o=e.Workbook&&e.Workbook.Sheets||[],c=0;if(o&&o[0]&&o[0].Hidden){for(t[t.length]="<bookViews>",c=0;c!=e.SheetNames.length&&!(!o[c]||!o[c].Hidden);++c);c==e.SheetNames.length&&(c=0),t[t.length]='<workbookView firstSheet="'+c+'" activeTab="'+c+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",c=0;c!=e.SheetNames.length;++c){var d={name:hr(e.SheetNames[c].slice(0,31))};if(d.sheetId=""+(c+1),d["r:id"]="rId"+(c+1),o[c])switch(o[c].Hidden){case 1:d.state="hidden";break;case 2:d.state="veryHidden";break}t[t.length]=Ze("sheet",null,d)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(f){var h={name:f.Name};f.Comment&&(h.comment=f.Comment),f.Sheet!=null&&(h.localSheetId=""+f.Sheet),f.Hidden&&(h.hidden="1"),f.Ref&&(t[t.length]=Ze("definedName",hr(f.Ref),h))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function VO(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=u0(e),r.name=_n(e),r}function YO(e,t){return t||(t=Be(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),V0(e.strRelID,t),on(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function KO(e,t){var r={},s=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var o=t>8?_n(e):"";return o.length>0&&(r.CodeName=o),r.autoCompressPictures=!!(s&65536),r.backupFile=!!(s&64),r.checkCompatibility=!!(s&4096),r.date1904=!!(s&1),r.filterPrivacy=!!(s&8),r.hidePivotFieldList=!!(s&1024),r.promptedSolutions=!!(s&16),r.publishItems=!!(s&2048),r.refreshAllConnections=!!(s&262144),r.saveExternalLinkValues=!!(s&128),r.showBorderUnselectedTables=!!(s&4),r.showInkAnnotation=!!(s&32),r.showObjects=["all","placeholders","none"][s>>13&3],r.showPivotChartFilter=!!(s&32768),r.updateLinks=["userSet","never","always"][s>>8&3],r}function XO(e,t){t||(t=Be(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Kv(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function QO(e,t,r){var s=e.l+t;e.l+=4,e.l+=1;var o=e.read_shift(4),c=qA(e),d=lD(e,0,r),f=G0(e);e.l=s;var h={Name:c,Ptg:d};return o<268435455&&(h.Sheet=o),f&&(h.Comment=f),h}function JO(e,t){qe(e,143);for(var r=0;r!=t.SheetNames.length;++r){var s=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,o={Hidden:s,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};qe(e,156,YO(o))}qe(e,144)}function ZO(e,t){t||(t=Be(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return on("SheetJS",t),on(Ud.version,t),on(Ud.version,t),on("7262",t),t.length>t.l?t.slice(0,t.l):t}function eI(e,t){t||(t=Be(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function tI(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,s=0,o=-1,c=-1;s<r.length;++s)!r[s]||!r[s].Hidden&&o==-1?o=s:r[s].Hidden==1&&c==-1&&(c=s);c>o||(qe(e,135),qe(e,158,eI(o)),qe(e,136))}}function rI(e,t){var r=Pn();return qe(r,131),qe(r,128,ZO()),qe(r,153,XO(e.Workbook&&e.Workbook.WBProps||null)),tI(r,e),JO(r,e),qe(r,132),r.end()}function nI(e,t,r){return(t.slice(-4)===".bin"?rI:Fb)(e)}function sI(e,t,r,s,o){return(t.slice(-4)===".bin"?zO:Ib)(e,r,s,o)}function aI(e,t,r){return(t.slice(-4)===".bin"?w5:vb)(e,r)}function iI(e,t,r){return(t.slice(-4)===".bin"?XN:gb)(e,r)}function oI(e,t,r){return(t.slice(-4)===".bin"?P5:Tb)(e)}function lI(e){return(e.slice(-4)===".bin"?R5:Sb)()}function cI(e,t){var r=[];return e.Props&&r.push(aN(e.Props,t)),e.Custprops&&r.push(iN(e.Props,e.Custprops)),r.join("")}function dI(){return""}function uI(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(s,o){var c=[];c.push(Ze("NumberFormat",null,{"ss:Format":hr(Fr[s.numFmtId])}));var d={"ss:ID":"s"+(21+o)};r.push(Ze("Style",c.join(""),d))}),Ze("Styles",r.join(""))}function Lb(e){return Ze("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+Q0(e.Ref,{r:0,c:0})})}function fI(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],s=0;s<t.length;++s){var o=t[s];o.Sheet==null&&(o.Name.match(/^_xlfn\./)||r.push(Lb(o)))}return Ze("Names",r.join(""))}function hI(e,t,r,s){if(!e||!((s||{}).Workbook||{}).Names)return"";for(var o=s.Workbook.Names,c=[],d=0;d<o.length;++d){var f=o[d];f.Sheet==r&&(f.Name.match(/^_xlfn\./)||c.push(Lb(f)))}return c.join("")}function pI(e,t,r,s){if(!e)return"";var o=[];if(e["!margins"]&&(o.push("<PageSetup>"),e["!margins"].header&&o.push(Ze("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&o.push(Ze("Footer",null,{"x:Margin":e["!margins"].footer})),o.push(Ze("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),o.push("</PageSetup>")),s&&s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[r])if(s.Workbook.Sheets[r].Hidden)o.push(Ze("Visible",s.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var c=0;c<r&&!(s.Workbook.Sheets[c]&&!s.Workbook.Sheets[c].Hidden);++c);c==r&&o.push("<Selected/>")}return((((s||{}).Workbook||{}).Views||[])[0]||{}).RTL&&o.push("<DisplayRightToLeft/>"),e["!protect"]&&(o.push(pn("ProtectContents","True")),e["!protect"].objects&&o.push(pn("ProtectObjects","True")),e["!protect"].scenarios&&o.push(pn("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?o.push(pn("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&o.push(pn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(d){e["!protect"][d[0]]&&o.push("<"+d[1]+"/>")})),o.length==0?"":Ze("WorksheetOptions",o.join(""),{xmlns:Zn.x})}function gI(e){return e.map(function(t){var r=vA(t.t||""),s=Ze("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ze("Comment",s,{"ss:Author":t.a})}).join("")}function xI(e,t,r,s,o,c,d){if(!e||e.v==null&&e.f==null)return"";var f={};if(e.f&&(f["ss:Formula"]="="+hr(Q0(e.f,d))),e.F&&e.F.slice(0,t.length)==t){var h=an(e.F.slice(t.length+1));f["ss:ArrayRange"]="RC:R"+(h.r==d.r?"":"["+(h.r-d.r)+"]")+"C"+(h.c==d.c?"":"["+(h.c-d.c)+"]")}if(e.l&&e.l.Target&&(f["ss:HRef"]=hr(e.l.Target),e.l.Tooltip&&(f["x:HRefScreenTip"]=hr(e.l.Tooltip))),r["!merges"])for(var p=r["!merges"],x=0;x!=p.length;++x)p[x].s.c!=d.c||p[x].s.r!=d.r||(p[x].e.c>p[x].s.c&&(f["ss:MergeAcross"]=p[x].e.c-p[x].s.c),p[x].e.r>p[x].s.r&&(f["ss:MergeDown"]=p[x].e.r-p[x].s.r));var y="",v="";switch(e.t){case"z":if(!s.sheetStubs)return"";break;case"n":y="Number",v=String(e.v);break;case"b":y="Boolean",v=e.v?"1":"0";break;case"e":y="Error",v=lc[e.v];break;case"d":y="DateTime",v=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Fr[14]);break;case"s":y="String",v=yA(e.v||"");break}var b=$a(s.cellXfs,e,s);f["ss:StyleID"]="s"+(21+b),f["ss:Index"]=d.c+1;var w=e.v!=null?v:"",_=e.t=="z"?"":'<Data ss:Type="'+y+'">'+w+"</Data>";return(e.c||[]).length>0&&(_+=gI(e.c)),Ze("Cell",_,f)}function mI(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=yb(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function yI(e,t,r,s){if(!e["!ref"])return"";var o=kr(e["!ref"]),c=e["!merges"]||[],d=0,f=[];e["!cols"]&&e["!cols"].forEach(function(S,N){K0(S);var R=!!S.width,I=pu(N,S),G={"ss:Index":N+1};R&&(G["ss:Width"]=Qd(I.width)),S.hidden&&(G["ss:Hidden"]="1"),f.push(Ze("Column",null,G))});for(var h=Array.isArray(e),p=o.s.r;p<=o.e.r;++p){for(var x=[mI(p,(e["!rows"]||[])[p])],y=o.s.c;y<=o.e.c;++y){var v=!1;for(d=0;d!=c.length;++d)if(!(c[d].s.c>y)&&!(c[d].s.r>p)&&!(c[d].e.c<y)&&!(c[d].e.r<p)){(c[d].s.c!=y||c[d].s.r!=p)&&(v=!0);break}if(!v){var b={r:p,c:y},w=pr(b),_=h?(e[p]||[])[y]:e[w];x.push(xI(_,w,e,t,r,s,b))}}x.push("</Row>"),x.length>2&&f.push(x.join(""))}return f.join("")}function vI(e,t,r){var s=[],o=r.SheetNames[e],c=r.Sheets[o],d=c?hI(c,t,e,r):"";return d.length>0&&s.push("<Names>"+d+"</Names>"),d=c?yI(c,t,e,r):"",d.length>0&&s.push("<Table>"+d+"</Table>"),s.push(pI(c,t,e,r)),s.join("")}function bI(e,t){t||(t={}),e.SSF||(e.SSF=Un(Fr)),e.SSF&&(cu(),lu(e.SSF),t.revssf=du(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],$a(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(cI(e,t)),r.push(dI()),r.push(""),r.push("");for(var s=0;s<e.SheetNames.length;++s)r.push(Ze("Worksheet",vI(s,t,e),{"ss:Name":hr(e.SheetNames[s])}));return r[2]=uI(e,t),r[3]=fI(e),Gr+Ze("Workbook",r.join(""),{xmlns:Zn.ss,"xmlns:o":Zn.o,"xmlns:x":Zn.x,"xmlns:ss":Zn.ss,"xmlns:dt":Zn.dt,"xmlns:html":Zn.html})}var zh={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function _I(e,t){var r=[],s=[],o=[],c=0,d,f=L1(Q1,"n"),h=L1(J1,"n");if(e.Props)for(d=xn(e.Props),c=0;c<d.length;++c)(Object.prototype.hasOwnProperty.call(f,d[c])?r:Object.prototype.hasOwnProperty.call(h,d[c])?s:o).push([d[c],e.Props[d[c]]]);if(e.Custprops)for(d=xn(e.Custprops),c=0;c<d.length;++c)Object.prototype.hasOwnProperty.call(e.Props||{},d[c])||(Object.prototype.hasOwnProperty.call(f,d[c])?r:Object.prototype.hasOwnProperty.call(h,d[c])?s:o).push([d[c],e.Custprops[d[c]]]);var p=[];for(c=0;c<o.length;++c)lb.indexOf(o[c][0])>-1||ab.indexOf(o[c][0])>-1||o[c][1]!=null&&p.push(o[c]);s.length&&vr.utils.cfb_add(t,"/SummaryInformation",ny(s,zh.SI,h,J1)),(r.length||p.length)&&vr.utils.cfb_add(t,"/DocumentSummaryInformation",ny(r,zh.DSI,f,Q1,p.length?p:null,zh.UDI))}function SI(e,t){var r=t||{},s=vr.utils.cfb_new({root:"R"}),o="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":o="/Workbook",r.biff=8;break;case"biff5":o="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return vr.utils.cfb_add(s,o,Pb(e,r)),r.biff==8&&(e.Props||e.Custprops)&&_I(e,s),r.biff==8&&e.vbaraw&&z5(s,vr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),s}var wI={0:{f:ED},1:{f:ID},2:{f:eO},3:{f:WD},4:{f:LD},5:{f:XD},6:{f:aO},7:{f:GD},8:{f:fO},9:{f:uO},10:{f:cO},11:{f:dO},12:{f:MD},13:{f:rO},14:{f:$D},15:{f:zD},16:{f:JD},17:{f:oO},18:{f:YD},19:{f:H0},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:QO},40:{},42:{},43:{f:a5},44:{f:n5},45:{f:l5},46:{f:d5},47:{f:c5},48:{},49:{f:MA},50:{},51:{f:E5},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:FN},62:{f:sO},63:{f:D5},64:{f:CO},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Fs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:TO},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:DD},148:{f:AD,p:16},151:{f:yO},152:{},153:{f:KO},154:{},155:{},156:{f:VO},157:{},158:{},159:{T:1,f:VN},160:{T:-1},161:{T:1,f:Ti},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:hO},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:T5},336:{T:-1},337:{f:A5,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:u0},357:{},358:{},359:{},360:{T:1},361:{},362:{f:RN},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:vO},427:{f:bO},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:SO},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:RD},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:xO},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:u0},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:F5},633:{T:1},634:{T:-1},635:{T:1,f:B5},636:{T:-1},637:{f:zA},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:UO},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:AO},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function et(e,t,r,s){var o=t;if(!isNaN(o)){var c=s||(r||[]).length||0,d=e.next(4);d.write_shift(2,o),d.write_shift(2,c),c>0&&W0(r)&&e.push(r)}}function TI(e,t,r,s){var o=(r||[]).length||0;if(o<=8224)return et(e,t,r,o);var c=t;if(!isNaN(c)){for(var d=r.parts||[],f=0,h=0,p=0;p+(d[f]||8224)<=8224;)p+=d[f]||8224,f++;var x=e.next(4);for(x.write_shift(2,c),x.write_shift(2,p),e.push(r.slice(h,h+p)),h+=p;h<o;){for(x=e.next(4),x.write_shift(2,60),p=0;p+(d[f]||8224)<=8224;)p+=d[f]||8224,f++;x.write_shift(2,p),e.push(r.slice(h,h+p)),h+=p}}}function dc(e,t,r){return e||(e=Be(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function jI(e,t,r,s){var o=Be(9);return dc(o,e,t),db(r,s||"b",o),o}function EI(e,t,r){var s=Be(8+2*r.length);return dc(s,e,t),s.write_shift(1,r.length),s.write_shift(r.length,r,"sbcs"),s.l<s.length?s.slice(0,s.l):s}function kI(e,t,r,s){if(t.v!=null)switch(t.t){case"d":case"n":var o=t.t=="d"?zn(On(t.v)):t.v;o==(o|0)&&o>=0&&o<65536?et(e,2,UN(r,s,o)):et(e,3,zN(r,s,o));return;case"b":case"e":et(e,5,jI(r,s,t.v,t.t));return;case"s":case"str":et(e,4,EI(r,s,(t.v||"").slice(0,255)));return}et(e,1,dc(null,r,s))}function CI(e,t,r,s){var o=Array.isArray(t),c=kr(t["!ref"]||"A1"),d,f="",h=[];if(c.e.c>255||c.e.r>16383){if(s.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");c.e.c=Math.min(c.e.c,255),c.e.r=Math.min(c.e.c,16383),d=Hr(c)}for(var p=c.s.r;p<=c.e.r;++p){f=gn(p);for(var x=c.s.c;x<=c.e.c;++x){p===c.s.r&&(h[x]=bn(x)),d=h[x]+f;var y=o?(t[p]||[])[x]:t[d];y&&kI(e,y,p,x)}}}function AI(e,t){for(var r=t||{},s=Pn(),o=0,c=0;c<e.SheetNames.length;++c)e.SheetNames[c]==r.sheet&&(o=c);if(o==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return et(s,r.biff==4?1033:r.biff==3?521:9,Y0(e,16,r)),CI(s,e.Sheets[e.SheetNames[o]],o,r),et(s,10),s.end()}function NI(e,t,r){et(e,49,wN({sz:12,name:"Arial"},r))}function RI(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var o=s[0];o<=s[1];++o)t[o]!=null&&et(e,1054,EN(o,t[o],r))})}function DI(e,t){var r=Be(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),et(e,2151,r),r=Be(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),hb(kr(t["!ref"]||"A1"),r),r.write_shift(4,4),et(e,2152,r)}function OI(e,t){for(var r=0;r<16;++r)et(e,224,ay({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(s){et(e,224,ay(s,0,t))})}function II(e,t){for(var r=0;r<t["!links"].length;++r){var s=t["!links"][r];et(e,440,IN(s)),s[1].Tooltip&&et(e,2048,BN(s))}delete t["!links"]}function BI(e,t){if(t){var r=0;t.forEach(function(s,o){++r<=256&&s&&et(e,125,LN(pu(o,s),o))})}}function MI(e,t,r,s,o){var c=16+$a(o.cellXfs,t,o);if(t.v==null&&!t.bf){et(e,513,yi(r,s,c));return}if(t.bf)et(e,6,iD(t,r,s,o,c));else switch(t.t){case"d":case"n":var d=t.t=="d"?zn(On(t.v)):t.v;et(e,515,NN(r,s,d,c));break;case"b":case"e":et(e,517,AN(r,s,t.v,c,o,t.t));break;case"s":case"str":if(o.bookSST){var f=Z0(o.Strings,t.v,o.revStrings);et(e,253,TN(r,s,f,c))}else et(e,516,jN(r,s,(t.v||"").slice(0,255),c,o));break;default:et(e,513,yi(r,s,c))}}function FI(e,t,r){var s=Pn(),o=r.SheetNames[e],c=r.Sheets[o]||{},d=(r||{}).Workbook||{},f=(d.Sheets||[])[e]||{},h=Array.isArray(c),p=t.biff==8,x,y="",v=[],b=kr(c["!ref"]||"A1"),w=p?65536:16384;if(b.e.c>255||b.e.r>=w){if(t.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:IV16384");b.e.c=Math.min(b.e.c,255),b.e.r=Math.min(b.e.c,w-1)}et(s,2057,Y0(r,16,t)),et(s,13,ds(1)),et(s,12,ds(100)),et(s,15,Dn(!0)),et(s,17,Dn(!1)),et(s,16,mi(.001)),et(s,95,Dn(!0)),et(s,42,Dn(!1)),et(s,43,Dn(!1)),et(s,130,ds(1)),et(s,128,CN()),et(s,131,Dn(!1)),et(s,132,Dn(!1)),p&&BI(s,c["!cols"]),et(s,512,kN(b,t)),p&&(c["!links"]=[]);for(var _=b.s.r;_<=b.e.r;++_){y=gn(_);for(var S=b.s.c;S<=b.e.c;++S){_===b.s.r&&(v[S]=bn(S)),x=v[S]+y;var N=h?(c[_]||[])[S]:c[x];N&&(MI(s,N,_,S,t),p&&N.l&&c["!links"].push([x,N.l]))}}var R=f.CodeName||f.name||o;return p&&et(s,574,SN((d.Views||[])[0])),p&&(c["!merges"]||[]).length&&et(s,229,ON(c["!merges"])),p&&II(s,c),et(s,442,fb(R)),p&&DI(s,c),et(s,10),s.end()}function LI(e,t,r){var s=Pn(),o=(e||{}).Workbook||{},c=o.Sheets||[],d=o.WBProps||{},f=r.biff==8,h=r.biff==5;if(et(s,2057,Y0(e,5,r)),r.bookType=="xla"&&et(s,135),et(s,225,f?ds(1200):null),et(s,193,cN(2)),h&&et(s,191),h&&et(s,192),et(s,226),et(s,92,yN("SheetJS",r)),et(s,66,ds(f?1200:1252)),f&&et(s,353,ds(0)),f&&et(s,448),et(s,317,PN(e.SheetNames.length)),f&&e.vbaraw&&et(s,211),f&&e.vbaraw){var p=d.CodeName||"ThisWorkbook";et(s,442,fb(p))}et(s,156,ds(17)),et(s,25,Dn(!1)),et(s,18,Dn(!1)),et(s,19,ds(0)),f&&et(s,431,Dn(!1)),f&&et(s,444,ds(0)),et(s,61,_N()),et(s,64,Dn(!1)),et(s,141,ds(0)),et(s,34,Dn(qO(e)=="true")),et(s,14,Dn(!0)),f&&et(s,439,Dn(!1)),et(s,218,ds(0)),NI(s,e,r),RI(s,e.SSF,r),OI(s,r),f&&et(s,352,Dn(!1));var x=s.end(),y=Pn();f&&et(y,140,MN()),f&&r.Strings&&TI(y,252,bN(r.Strings)),et(y,10);var v=y.end(),b=Pn(),w=0,_=0;for(_=0;_<e.SheetNames.length;++_)w+=(f?12:11)+(f?2:1)*e.SheetNames[_].length;var S=x.length+w+v.length;for(_=0;_<e.SheetNames.length;++_){var N=c[_]||{};et(b,133,vN({pos:S,hs:N.Hidden||0,dt:0,name:e.SheetNames[_]},r)),S+=t[_].length}var R=b.end();if(w!=R.length)throw new Error("BS8 "+w+" != "+R.length);var I=[];return x.length&&I.push(x),R.length&&I.push(R),v.length&&I.push(v),hn(I)}function PI(e,t){var r=t||{},s=[];e&&!e.SSF&&(e.SSF=Un(Fr)),e&&e.SSF&&(cu(),lu(e.SSF),r.revssf=du(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,ep(r),r.cellXfs=[],$a(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var o=0;o<e.SheetNames.length;++o)s[s.length]=FI(o,r,e);return s.unshift(LI(e,s,r)),hn(s)}function Pb(e,t){for(var r=0;r<=e.SheetNames.length;++r){var s=e.Sheets[e.SheetNames[r]];if(!(!s||!s["!ref"])){var o=ts(s["!ref"]);o.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var c=t||{};switch(c.biff||2){case 8:case 5:return PI(e,t);case 4:case 3:case 2:return AI(e,t)}throw new Error("invalid type "+c.bookType+" for BIFF")}function zI(e,t,r,s){for(var o=e["!merges"]||[],c=[],d=t.s.c;d<=t.e.c;++d){for(var f=0,h=0,p=0;p<o.length;++p)if(!(o[p].s.r>r||o[p].s.c>d)&&!(o[p].e.r<r||o[p].e.c<d)){if(o[p].s.r<r||o[p].s.c<d){f=-1;break}f=o[p].e.r-o[p].s.r+1,h=o[p].e.c-o[p].s.c+1;break}if(!(f<0)){var x=pr({r,c:d}),y=s.dense?(e[r]||[])[d]:e[x],v=y&&y.v!=null&&(y.h||mA(y.w||(oa(y),y.w)||""))||"",b={};f>1&&(b.rowspan=f),h>1&&(b.colspan=h),s.editable?v='<span contenteditable="true">'+v+"</span>":y&&(b["data-t"]=y&&y.t||"z",y.v!=null&&(b["data-v"]=y.v),y.z!=null&&(b["data-z"]=y.z),y.l&&(y.l.Target||"#").charAt(0)!="#"&&(v='<a href="'+y.l.Target+'">'+v+"</a>")),b.id=(s.id||"sjs")+"-"+x,c.push(Ze("td",v,b))}}var w="<tr>";return w+c.join("")+"</tr>"}var UI='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',WI="</body></html>";function qI(e,t,r){var s=[];return s.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function zb(e,t){var r=t||{},s=r.header!=null?r.header:UI,o=r.footer!=null?r.footer:WI,c=[s],d=ts(e["!ref"]);r.dense=Array.isArray(e),c.push(qI(e,d,r));for(var f=d.s.r;f<=d.e.r;++f)c.push(zI(e,d,f,r));return c.push("</table>"+o),c.join("")}function Ub(e,t,r){var s=r||{},o=0,c=0;if(s.origin!=null)if(typeof s.origin=="number")o=s.origin;else{var d=typeof s.origin=="string"?an(s.origin):s.origin;o=d.r,c=d.c}var f=t.getElementsByTagName("tr"),h=Math.min(s.sheetRows||1e7,f.length),p={s:{r:0,c:0},e:{r:o,c}};if(e["!ref"]){var x=ts(e["!ref"]);p.s.r=Math.min(p.s.r,x.s.r),p.s.c=Math.min(p.s.c,x.s.c),p.e.r=Math.max(p.e.r,x.e.r),p.e.c=Math.max(p.e.c,x.e.c),o==-1&&(p.e.r=o=x.e.r+1)}var y=[],v=0,b=e["!rows"]||(e["!rows"]=[]),w=0,_=0,S=0,N=0,R=0,I=0;for(e["!cols"]||(e["!cols"]=[]);w<f.length&&_<h;++w){var G=f[w];if(fy(G)){if(s.display)continue;b[_]={hidden:!0}}var Z=G.children;for(S=N=0;S<Z.length;++S){var ie=Z[S];if(!(s.display&&fy(ie))){var q=ie.hasAttribute("data-v")?ie.getAttribute("data-v"):ie.hasAttribute("v")?ie.getAttribute("v"):_A(ie.innerHTML),P=ie.getAttribute("data-z")||ie.getAttribute("z");for(v=0;v<y.length;++v){var te=y[v];te.s.c==N+c&&te.s.r<_+o&&_+o<=te.e.r&&(N=te.e.c+1-c,v=-1)}I=+ie.getAttribute("colspan")||1,((R=+ie.getAttribute("rowspan")||1)>1||I>1)&&y.push({s:{r:_+o,c:N+c},e:{r:_+o+(R||1)-1,c:N+c+(I||1)-1}});var ue={t:"s",v:q},X=ie.getAttribute("data-t")||ie.getAttribute("t")||"";q!=null&&(q.length==0?ue.t=X||"z":s.raw||q.trim().length==0||X=="s"||(q==="TRUE"?ue={t:"b",v:!0}:q==="FALSE"?ue={t:"b",v:!1}:isNaN(na(q))?isNaN(Xl(q).getDate())||(ue={t:"d",v:On(q)},s.cellDates||(ue={t:"n",v:zn(ue.v)}),ue.z=s.dateNF||Fr[14]):ue={t:"n",v:na(q)})),ue.z===void 0&&P!=null&&(ue.z=P);var fe="",J=ie.getElementsByTagName("A");if(J&&J.length)for(var Q=0;Q<J.length&&!(J[Q].hasAttribute("href")&&(fe=J[Q].getAttribute("href"),fe.charAt(0)!="#"));++Q);fe&&fe.charAt(0)!="#"&&(ue.l={Target:fe}),s.dense?(e[_+o]||(e[_+o]=[]),e[_+o][N+c]=ue):e[pr({c:N+c,r:_+o})]=ue,p.e.c<N+c&&(p.e.c=N+c),N+=I}}++_}return y.length&&(e["!merges"]=(e["!merges"]||[]).concat(y)),p.e.r=Math.max(p.e.r,_-1+o),e["!ref"]=Hr(p),_>=h&&(e["!fullref"]=Hr((p.e.r=f.length-w+_-1+o,p))),e}function Wb(e,t){var r=t||{},s=r.dense?[]:{};return Ub(s,e,t)}function $I(e,t){return bi(Wb(e,t),t)}function fy(e){var t="",r=HI(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function HI(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var GI=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Jl({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Gr+t}})(),hy=(function(){var e=function(c){return hr(c).replace(/  +/g,function(d){return'<text:s text:c="'+d.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,s=function(c,d,f){var h=[];h.push('      <table:table table:name="'+hr(d.SheetNames[f])+`" table:style-name="ta1">
`);var p=0,x=0,y=ts(c["!ref"]||"A1"),v=c["!merges"]||[],b=0,w=Array.isArray(c);if(c["!cols"])for(x=0;x<=y.e.c;++x)h.push("        <table:table-column"+(c["!cols"][x]?' table:style-name="co'+c["!cols"][x].ods+'"':"")+`></table:table-column>
`);var _="",S=c["!rows"]||[];for(p=0;p<y.s.r;++p)_=S[p]?' table:style-name="ro'+S[p].ods+'"':"",h.push("        <table:table-row"+_+`></table:table-row>
`);for(;p<=y.e.r;++p){for(_=S[p]?' table:style-name="ro'+S[p].ods+'"':"",h.push("        <table:table-row"+_+`>
`),x=0;x<y.s.c;++x)h.push(t);for(;x<=y.e.c;++x){var N=!1,R={},I="";for(b=0;b!=v.length;++b)if(!(v[b].s.c>x)&&!(v[b].s.r>p)&&!(v[b].e.c<x)&&!(v[b].e.r<p)){(v[b].s.c!=x||v[b].s.r!=p)&&(N=!0),R["table:number-columns-spanned"]=v[b].e.c-v[b].s.c+1,R["table:number-rows-spanned"]=v[b].e.r-v[b].s.r+1;break}if(N){h.push(r);continue}var G=pr({r:p,c:x}),Z=w?(c[p]||[])[x]:c[G];if(Z&&Z.f&&(R["table:formula"]=hr(fD(Z.f)),Z.F&&Z.F.slice(0,G.length)==G)){var ie=ts(Z.F);R["table:number-matrix-columns-spanned"]=ie.e.c-ie.s.c+1,R["table:number-matrix-rows-spanned"]=ie.e.r-ie.s.r+1}if(!Z){h.push(t);continue}switch(Z.t){case"b":I=Z.v?"TRUE":"FALSE",R["office:value-type"]="boolean",R["office:boolean-value"]=Z.v?"true":"false";break;case"n":I=Z.w||String(Z.v||0),R["office:value-type"]="float",R["office:value"]=Z.v||0;break;case"s":case"str":I=Z.v==null?"":Z.v,R["office:value-type"]="string";break;case"d":I=Z.w||On(Z.v).toISOString(),R["office:value-type"]="date",R["office:date-value"]=On(Z.v).toISOString(),R["table:style-name"]="ce1";break;default:h.push(t);continue}var q=e(I);if(Z.l&&Z.l.Target){var P=Z.l.Target;P=P.charAt(0)=="#"?"#"+hD(P.slice(1)):P,P.charAt(0)!="#"&&!P.match(/^\w+:/)&&(P="../"+P),q=Ze("text:a",q,{"xlink:href":P.replace(/&/g,"&amp;")})}h.push("          "+Ze("table:table-cell",Ze("text:p",q,{}),R)+`
`)}h.push(`        </table:table-row>
`)}return h.push(`      </table:table>
`),h.join("")},o=function(c,d){c.push(` <office:automatic-styles>
`),c.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),c.push(`   <number:month number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:day number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:year/>
`),c.push(`  </number:date-style>
`);var f=0;d.SheetNames.map(function(p){return d.Sheets[p]}).forEach(function(p){if(p&&p["!cols"]){for(var x=0;x<p["!cols"].length;++x)if(p["!cols"][x]){var y=p["!cols"][x];if(y.width==null&&y.wpx==null&&y.wch==null)continue;K0(y),y.ods=f;var v=p["!cols"][x].wpx+"px";c.push('  <style:style style:name="co'+f+`" style:family="table-column">
`),c.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+v+`"/>
`),c.push(`  </style:style>
`),++f}}});var h=0;d.SheetNames.map(function(p){return d.Sheets[p]}).forEach(function(p){if(p&&p["!rows"]){for(var x=0;x<p["!rows"].length;++x)if(p["!rows"][x]){p["!rows"][x].ods=h;var y=p["!rows"][x].hpx+"px";c.push('  <style:style style:name="ro'+h+`" style:family="table-row">
`),c.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+y+`"/>
`),c.push(`  </style:style>
`),++h}}}),c.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),c.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),c.push(`  </style:style>
`),c.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),c.push(` </office:automatic-styles>
`)};return function(d,f){var h=[Gr],p=Jl({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),x=Jl({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});f.bookType=="fods"?(h.push("<office:document"+p+x+`>
`),h.push(nb().replace(/office:document-meta/g,"office:meta"))):h.push("<office:document-content"+p+`>
`),o(h,d),h.push(`  <office:body>
`),h.push(`    <office:spreadsheet>
`);for(var y=0;y!=d.SheetNames.length;++y)h.push(s(d.Sheets[d.SheetNames[y]],d,y));return h.push(`    </office:spreadsheet>
`),h.push(`  </office:body>
`),f.bookType=="fods"?h.push("</office:document>"):h.push("</office:document-content>"),h.join("")}})();function qb(e,t){if(t.bookType=="fods")return hy(e,t);var r=L0(),s="",o=[],c=[];return s="mimetype",Lt(r,s,"application/vnd.oasis.opendocument.spreadsheet"),s="content.xml",Lt(r,s,hy(e,t)),o.push([s,"text/xml"]),c.push([s,"ContentFile"]),s="styles.xml",Lt(r,s,GI(e,t)),o.push([s,"text/xml"]),c.push([s,"StylesFile"]),s="meta.xml",Lt(r,s,Gr+nb()),o.push([s,"text/xml"]),c.push([s,"MetadataFile"]),s="manifest.rdf",Lt(r,s,sN(c)),o.push([s,"application/rdf+xml"]),s="META-INF/manifest.xml",Lt(r,s,rN(o)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function eu(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function VI(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Ss(Ql(e))}function YI(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var s=0;s<t.length;++s)if(e[r+s]!=t[s])continue e;return!0}return!1}function Wa(e){var t=e.reduce(function(o,c){return o+c.length},0),r=new Uint8Array(t),s=0;return e.forEach(function(o){r.set(o,s),s+=o.length}),r}function KI(e,t,r){var s=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,o=r/Math.pow(10,s-6176);e[t+15]|=s>>7,e[t+14]|=(s&127)<<1;for(var c=0;o>=1;++c,o/=256)e[t+c]=o&255;e[t+15]|=r>=0?0:128}function Zl(e,t){var r=t?t[0]:0,s=e[r]&127;e:if(e[r++]>=128&&(s|=(e[r]&127)<<7,e[r++]<128||(s|=(e[r]&127)<<14,e[r++]<128)||(s|=(e[r]&127)<<21,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),s}function ur(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function To(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Qr(e){for(var t=[],r=[0];r[0]<e.length;){var s=r[0],o=Zl(e,r),c=o&7;o=Math.floor(o/8);var d=0,f;if(o==0)break;switch(c){case 0:{for(var h=r[0];e[r[0]++]>=128;);f=e.slice(h,r[0])}break;case 5:d=4,f=e.slice(r[0],r[0]+d),r[0]+=d;break;case 1:d=8,f=e.slice(r[0],r[0]+d),r[0]+=d;break;case 2:d=Zl(e,r),f=e.slice(r[0],r[0]+d),r[0]+=d;break;case 3:case 4:default:throw new Error("PB Type ".concat(c," for Field ").concat(o," at offset ").concat(s))}var p={data:f,type:c};t[o]==null?t[o]=[p]:t[o].push(p)}return t}function un(e){var t=[];return e.forEach(function(r,s){r.forEach(function(o){o.data&&(t.push(ur(s*8+o.type)),o.type==2&&t.push(ur(o.data.length)),t.push(o.data))})}),Wa(t)}function ys(e){for(var t,r=[],s=[0];s[0]<e.length;){var o=Zl(e,s),c=Qr(e.slice(s[0],s[0]+o));s[0]+=o;var d={id:To(c[1][0].data),messages:[]};c[2].forEach(function(f){var h=Qr(f.data),p=To(h[3][0].data);d.messages.push({meta:h,data:e.slice(s[0],s[0]+p)}),s[0]+=p}),(t=c[3])!=null&&t[0]&&(d.merge=To(c[3][0].data)>>>0>0),r.push(d)}return r}function go(e){var t=[];return e.forEach(function(r){var s=[];s[1]=[{data:ur(r.id),type:0}],s[2]=[],r.merge!=null&&(s[3]=[{data:ur(+!!r.merge),type:0}]);var o=[];r.messages.forEach(function(d){o.push(d.data),d.meta[3]=[{type:0,data:ur(d.data.length)}],s[2].push({data:un(d.meta),type:2})});var c=un(s);t.push(ur(c.length)),t.push(c),o.forEach(function(d){return t.push(d)})}),Wa(t)}function XI(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],s=Zl(t,r),o=[];r[0]<t.length;){var c=t[r[0]]&3;if(c==0){var d=t[r[0]++]>>2;if(d<60)++d;else{var f=d-59;d=t[r[0]],f>1&&(d|=t[r[0]+1]<<8),f>2&&(d|=t[r[0]+2]<<16),f>3&&(d|=t[r[0]+3]<<24),d>>>=0,d++,r[0]+=f}o.push(t.slice(r[0],r[0]+d)),r[0]+=d;continue}else{var h=0,p=0;if(c==1?(p=(t[r[0]]>>2&7)+4,h=(t[r[0]++]&224)<<3,h|=t[r[0]++]):(p=(t[r[0]++]>>2)+1,c==2?(h=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(h=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),o=[Wa(o)],h==0)throw new Error("Invalid offset 0");if(h>o[0].length)throw new Error("Invalid offset beyond length");if(p>=h)for(o.push(o[0].slice(-h)),p-=h;p>=o[o.length-1].length;)o.push(o[o.length-1]),p-=o[o.length-1].length;o.push(o[0].slice(-h,-h+p))}}var x=Wa(o);if(x.length!=s)throw new Error("Unexpected length: ".concat(x.length," != ").concat(s));return x}function vs(e){for(var t=[],r=0;r<e.length;){var s=e[r++],o=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(XI(s,e.slice(r,r+o))),r+=o}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Wa(t)}function xo(e){for(var t=[],r=0;r<e.length;){var s=Math.min(e.length-r,268435455),o=new Uint8Array(4);t.push(o);var c=ur(s),d=c.length;t.push(c),s<=60?(d++,t.push(new Uint8Array([s-1<<2]))):s<=256?(d+=2,t.push(new Uint8Array([240,s-1&255]))):s<=65536?(d+=3,t.push(new Uint8Array([244,s-1&255,s-1>>8&255]))):s<=16777216?(d+=4,t.push(new Uint8Array([248,s-1&255,s-1>>8&255,s-1>>16&255]))):s<=4294967296&&(d+=5,t.push(new Uint8Array([252,s-1&255,s-1>>8&255,s-1>>16&255,s-1>>>24&255]))),t.push(e.slice(r,r+s)),d+=s,o[0]=0,o[1]=d&255,o[2]=d>>8&255,o[3]=d>>16&255,r+=s}return Wa(t)}function Uh(e,t){var r=new Uint8Array(32),s=eu(r),o=12,c=0;switch(r[0]=5,e.t){case"n":r[1]=2,KI(r,o,e.v),c|=1,o+=16;break;case"b":r[1]=6,s.setFloat64(o,e.v?1:0,!0),c|=2,o+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,s.setUint32(o,t.indexOf(e.v),!0),c|=8,o+=4;break;default:throw"unsupported cell type "+e.t}return s.setUint32(8,c,!0),r.slice(0,o)}function Wh(e,t){var r=new Uint8Array(32),s=eu(r),o=12,c=0;switch(r[0]=3,e.t){case"n":r[2]=2,s.setFloat64(o,e.v,!0),c|=32,o+=8;break;case"b":r[2]=6,s.setFloat64(o,e.v?1:0,!0),c|=32,o+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,s.setUint32(o,t.indexOf(e.v),!0),c|=16,o+=4;break;default:throw"unsupported cell type "+e.t}return s.setUint32(4,c,!0),r.slice(0,o)}function Da(e){var t=Qr(e);return Zl(t[1][0].data)}function QI(e,t,r){var s,o,c,d;if(!((s=e[6])!=null&&s[0])||!((o=e[7])!=null&&o[0]))throw"Mutation only works on post-BNC storages!";var f=((d=(c=e[8])==null?void 0:c[0])==null?void 0:d.data)&&To(e[8][0].data)>0||!1;if(f)throw"Math only works with normal offsets";for(var h=0,p=eu(e[7][0].data),x=0,y=[],v=eu(e[4][0].data),b=0,w=[],_=0;_<t.length;++_){if(t[_]==null){p.setUint16(_*2,65535,!0),v.setUint16(_*2,65535);continue}p.setUint16(_*2,x,!0),v.setUint16(_*2,b,!0);var S,N;switch(typeof t[_]){case"string":S=Uh({t:"s",v:t[_]},r),N=Wh({t:"s",v:t[_]},r);break;case"number":S=Uh({t:"n",v:t[_]},r),N=Wh({t:"n",v:t[_]},r);break;case"boolean":S=Uh({t:"b",v:t[_]},r),N=Wh({t:"b",v:t[_]},r);break;default:throw new Error("Unsupported value "+t[_])}y.push(S),x+=S.length,w.push(N),b+=N.length,++h}for(e[2][0].data=ur(h);_<e[7][0].data.length/2;++_)p.setUint16(_*2,65535,!0),v.setUint16(_*2,65535,!0);return e[6][0].data=Wa(y),e[3][0].data=Wa(w),h}function JI(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var s=ts(r["!ref"]);s.s.r=s.s.c=0;var o=!1;s.e.c>9&&(o=!0,s.e.c=9),s.e.r>49&&(o=!0,s.e.r=49),o&&console.error("The Numbers writer is currently limited to ".concat(Hr(s)));var c=tu(r,{range:s,header:1}),d=["~Sh33tJ5~"];c.forEach(function(L){return L.forEach(function(z){typeof z=="string"&&d.push(z)})});var f={},h=[],p=vr.read(t.numbers,{type:"base64"});p.FileIndex.map(function(L,z){return[L,p.FullPaths[z]]}).forEach(function(L){var z=L[0],Y=L[1];if(z.type==2&&z.name.match(/\.iwa/)){var me=z.content,Me=vs(me),He=ys(Me);He.forEach(function(Ce){h.push(Ce.id),f[Ce.id]={deps:[],location:Y,type:To(Ce.messages[0].meta[1][0].data)}})}}),h.sort(function(L,z){return L-z});var x=h.filter(function(L){return L>1}).map(function(L){return[L,ur(L)]});p.FileIndex.map(function(L,z){return[L,p.FullPaths[z]]}).forEach(function(L){var z=L[0];if(L[1],!!z.name.match(/\.iwa/)){var Y=ys(vs(z.content));Y.forEach(function(me){me.messages.forEach(function(Me){x.forEach(function(He){me.messages.some(function(Ce){return To(Ce.meta[1][0].data)!=11006&&YI(Ce.data,He[1])})&&f[He[0]].deps.push(me.id)})})})}});for(var y=vr.find(p,f[1].location),v=ys(vs(y.content)),b,w=0;w<v.length;++w){var _=v[w];_.id==1&&(b=_)}var S=Da(Qr(b.messages[0].data)[1][0].data);for(y=vr.find(p,f[S].location),v=ys(vs(y.content)),w=0;w<v.length;++w)_=v[w],_.id==S&&(b=_);for(S=Da(Qr(b.messages[0].data)[2][0].data),y=vr.find(p,f[S].location),v=ys(vs(y.content)),w=0;w<v.length;++w)_=v[w],_.id==S&&(b=_);for(S=Da(Qr(b.messages[0].data)[2][0].data),y=vr.find(p,f[S].location),v=ys(vs(y.content)),w=0;w<v.length;++w)_=v[w],_.id==S&&(b=_);var N=Qr(b.messages[0].data);{N[6][0].data=ur(s.e.r+1),N[7][0].data=ur(s.e.c+1);var R=Da(N[46][0].data),I=vr.find(p,f[R].location),G=ys(vs(I.content));{for(var Z=0;Z<G.length&&G[Z].id!=R;++Z);if(G[Z].id!=R)throw"Bad ColumnRowUIDMapArchive";var ie=Qr(G[Z].messages[0].data);ie[1]=[],ie[2]=[],ie[3]=[];for(var q=0;q<=s.e.c;++q){var P=[];P[1]=P[2]=[{type:0,data:ur(q+420690)}],ie[1].push({type:2,data:un(P)}),ie[2].push({type:0,data:ur(q)}),ie[3].push({type:0,data:ur(q)})}ie[4]=[],ie[5]=[],ie[6]=[];for(var te=0;te<=s.e.r;++te)P=[],P[1]=P[2]=[{type:0,data:ur(te+726270)}],ie[4].push({type:2,data:un(P)}),ie[5].push({type:0,data:ur(te)}),ie[6].push({type:0,data:ur(te)});G[Z].messages[0].data=un(ie)}I.content=xo(go(G)),I.size=I.content.length,delete N[46];var ue=Qr(N[4][0].data);{ue[7][0].data=ur(s.e.r+1);var X=Qr(ue[1][0].data),fe=Da(X[2][0].data);I=vr.find(p,f[fe].location),G=ys(vs(I.content));{if(G[0].id!=fe)throw"Bad HeaderStorageBucket";var J=Qr(G[0].messages[0].data);for(te=0;te<c.length;++te){var Q=Qr(J[2][0].data);Q[1][0].data=ur(te),Q[4][0].data=ur(c[te].length),J[2][te]={type:J[2][0].type,data:un(Q)}}G[0].messages[0].data=un(J)}I.content=xo(go(G)),I.size=I.content.length;var oe=Da(ue[2][0].data);I=vr.find(p,f[oe].location),G=ys(vs(I.content));{if(G[0].id!=oe)throw"Bad HeaderStorageBucket";for(J=Qr(G[0].messages[0].data),q=0;q<=s.e.c;++q)Q=Qr(J[2][0].data),Q[1][0].data=ur(q),Q[4][0].data=ur(s.e.r+1),J[2][q]={type:J[2][0].type,data:un(Q)};G[0].messages[0].data=un(J)}I.content=xo(go(G)),I.size=I.content.length;var re=Da(ue[4][0].data);(function(){for(var L=vr.find(p,f[re].location),z=ys(vs(L.content)),Y,me=0;me<z.length;++me){var Me=z[me];Me.id==re&&(Y=Me)}var He=Qr(Y.messages[0].data);{He[3]=[];var Ce=[];d.forEach(function($e,rt){Ce[1]=[{type:0,data:ur(rt)}],Ce[2]=[{type:0,data:ur(1)}],Ce[3]=[{type:2,data:VI($e)}],He[3].push({type:2,data:un(Ce)})})}Y.messages[0].data=un(He);var ne=go(z),Pe=xo(ne);L.content=Pe,L.size=L.content.length})();var ye=Qr(ue[3][0].data);{var le=ye[1][0];delete ye[2];var Ae=Qr(le.data);{var B=Da(Ae[2][0].data);(function(){for(var L=vr.find(p,f[B].location),z=ys(vs(L.content)),Y,me=0;me<z.length;++me){var Me=z[me];Me.id==B&&(Y=Me)}var He=Qr(Y.messages[0].data);{delete He[6],delete ye[7];var Ce=new Uint8Array(He[5][0].data);He[5]=[];for(var ne=0,Pe=0;Pe<=s.e.r;++Pe){var $e=Qr(Ce);ne+=QI($e,c[Pe],d),$e[1][0].data=ur(Pe),He[5].push({data:un($e),type:2})}He[1]=[{type:0,data:ur(s.e.c+1)}],He[2]=[{type:0,data:ur(s.e.r+1)}],He[3]=[{type:0,data:ur(ne)}],He[4]=[{type:0,data:ur(s.e.r+1)}]}Y.messages[0].data=un(He);var rt=go(z),V=xo(rt);L.content=V,L.size=L.content.length})()}le.data=un(Ae)}ue[3][0].data=un(ye)}N[4][0].data=un(ue)}b.messages[0].data=un(N);var K=go(v),E=xo(K);return y.content=E,y.size=y.content.length,p}function ZI(e){return function(r){for(var s=0;s!=e.length;++s){var o=e[s];r[o[0]]===void 0&&(r[o[0]]=o[1]),o[2]==="n"&&(r[o[0]]=Number(r[o[0]]))}}}function ep(e){ZI([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function eB(e,t){return t.bookType=="ods"?qb(e,t):t.bookType=="numbers"?JI(e,t):t.bookType=="xlsb"?tB(e,t):rB(e,t)}function tB(e,t){bo=1024,e&&!e.SSF&&(e.SSF=Un(Fr)),e&&e.SSF&&(cu(),lu(e.SSF),t.revssf=du(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,$l?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",s=jb.indexOf(t.bookType)>-1,o=eb();ep(t=t||{});var c=L0(),d="",f=0;if(t.cellXfs=[],$a(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),d="docProps/core.xml",Lt(c,d,sb(e.Props,t)),o.coreprops.push(d),fr(t.rels,2,d,rr.CORE_PROPS),d="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var h=[],p=0;p<e.SheetNames.length;++p)(e.Workbook.Sheets[p]||{}).Hidden!=2&&h.push(e.SheetNames[p]);e.Props.SheetNames=h}for(e.Props.Worksheets=e.Props.SheetNames.length,Lt(c,d,ib(e.Props)),o.extprops.push(d),fr(t.rels,3,d,rr.EXT_PROPS),e.Custprops!==e.Props&&xn(e.Custprops||{}).length>0&&(d="docProps/custom.xml",Lt(c,d,ob(e.Custprops)),o.custprops.push(d),fr(t.rels,4,d,rr.CUST_PROPS)),f=1;f<=e.SheetNames.length;++f){var x={"!id":{}},y=e.Sheets[e.SheetNames[f-1]],v=(y||{})["!type"]||"sheet";switch(v){case"chart":default:d="xl/worksheets/sheet"+f+"."+r,Lt(c,d,sI(f-1,d,t,e,x)),o.sheets.push(d),fr(t.wbrels,-1,"worksheets/sheet"+f+"."+r,rr.WS[0])}if(y){var b=y["!comments"],w=!1,_="";b&&b.length>0&&(_="xl/comments"+f+"."+r,Lt(c,_,oI(b,_)),o.comments.push(_),fr(x,-1,"../comments"+f+"."+r,rr.CMNT),w=!0),y["!legacy"]&&w&&Lt(c,"xl/drawings/vmlDrawing"+f+".vml",wb(f,y["!comments"])),delete y["!comments"],delete y["!legacy"]}x["!id"].rId1&&Lt(c,rb(d),So(x))}return t.Strings!=null&&t.Strings.length>0&&(d="xl/sharedStrings."+r,Lt(c,d,iI(t.Strings,d,t)),o.strs.push(d),fr(t.wbrels,-1,"sharedStrings."+r,rr.SST)),d="xl/workbook."+r,Lt(c,d,nI(e,d)),o.workbooks.push(d),fr(t.rels,1,d,rr.WB),d="xl/theme/theme1.xml",Lt(c,d,_b(e.Themes,t)),o.themes.push(d),fr(t.wbrels,-1,"theme/theme1.xml",rr.THEME),d="xl/styles."+r,Lt(c,d,aI(e,d,t)),o.styles.push(d),fr(t.wbrels,-1,"styles."+r,rr.STY),e.vbaraw&&s&&(d="xl/vbaProject.bin",Lt(c,d,e.vbaraw),o.vba.push(d),fr(t.wbrels,-1,"vbaProject.bin",rr.VBA)),d="xl/metadata."+r,Lt(c,d,lI(d)),o.metadata.push(d),fr(t.wbrels,-1,"metadata."+r,rr.XLMETA),Lt(c,"[Content_Types].xml",tb(o,t)),Lt(c,"_rels/.rels",So(t.rels)),Lt(c,"xl/_rels/workbook."+r+".rels",So(t.wbrels)),delete t.revssf,delete t.ssf,c}function rB(e,t){bo=1024,e&&!e.SSF&&(e.SSF=Un(Fr)),e&&e.SSF&&(cu(),lu(e.SSF),t.revssf=du(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,$l?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",s=jb.indexOf(t.bookType)>-1,o=eb();ep(t=t||{});var c=L0(),d="",f=0;if(t.cellXfs=[],$a(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),d="docProps/core.xml",Lt(c,d,sb(e.Props,t)),o.coreprops.push(d),fr(t.rels,2,d,rr.CORE_PROPS),d="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var h=[],p=0;p<e.SheetNames.length;++p)(e.Workbook.Sheets[p]||{}).Hidden!=2&&h.push(e.SheetNames[p]);e.Props.SheetNames=h}e.Props.Worksheets=e.Props.SheetNames.length,Lt(c,d,ib(e.Props)),o.extprops.push(d),fr(t.rels,3,d,rr.EXT_PROPS),e.Custprops!==e.Props&&xn(e.Custprops||{}).length>0&&(d="docProps/custom.xml",Lt(c,d,ob(e.Custprops)),o.custprops.push(d),fr(t.rels,4,d,rr.CUST_PROPS));var x=["SheetJ5"];for(t.tcid=0,f=1;f<=e.SheetNames.length;++f){var y={"!id":{}},v=e.Sheets[e.SheetNames[f-1]],b=(v||{})["!type"]||"sheet";switch(b){case"chart":default:d="xl/worksheets/sheet"+f+"."+r,Lt(c,d,Ib(f-1,t,e,y)),o.sheets.push(d),fr(t.wbrels,-1,"worksheets/sheet"+f+"."+r,rr.WS[0])}if(v){var w=v["!comments"],_=!1,S="";if(w&&w.length>0){var N=!1;w.forEach(function(R){R[1].forEach(function(I){I.T==!0&&(N=!0)})}),N&&(S="xl/threadedComments/threadedComment"+f+"."+r,Lt(c,S,O5(w,x,t)),o.threadedcomments.push(S),fr(y,-1,"../threadedComments/threadedComment"+f+"."+r,rr.TCMNT)),S="xl/comments"+f+"."+r,Lt(c,S,Tb(w)),o.comments.push(S),fr(y,-1,"../comments"+f+"."+r,rr.CMNT),_=!0}v["!legacy"]&&_&&Lt(c,"xl/drawings/vmlDrawing"+f+".vml",wb(f,v["!comments"])),delete v["!comments"],delete v["!legacy"]}y["!id"].rId1&&Lt(c,rb(d),So(y))}return t.Strings!=null&&t.Strings.length>0&&(d="xl/sharedStrings."+r,Lt(c,d,gb(t.Strings,t)),o.strs.push(d),fr(t.wbrels,-1,"sharedStrings."+r,rr.SST)),d="xl/workbook."+r,Lt(c,d,Fb(e)),o.workbooks.push(d),fr(t.rels,1,d,rr.WB),d="xl/theme/theme1.xml",Lt(c,d,_b(e.Themes,t)),o.themes.push(d),fr(t.wbrels,-1,"theme/theme1.xml",rr.THEME),d="xl/styles."+r,Lt(c,d,vb(e,t)),o.styles.push(d),fr(t.wbrels,-1,"styles."+r,rr.STY),e.vbaraw&&s&&(d="xl/vbaProject.bin",Lt(c,d,e.vbaraw),o.vba.push(d),fr(t.wbrels,-1,"vbaProject.bin",rr.VBA)),d="xl/metadata."+r,Lt(c,d,Sb()),o.metadata.push(d),fr(t.wbrels,-1,"metadata."+r,rr.XLMETA),x.length>1&&(d="xl/persons/person.xml",Lt(c,d,I5(x)),o.people.push(d),fr(t.wbrels,-1,"persons/person.xml",rr.PEOPLE)),Lt(c,"[Content_Types].xml",tb(o,t)),Lt(c,"_rels/.rels",So(t.rels)),Lt(c,"xl/_rels/workbook."+r+".rels",So(t.wbrels)),delete t.revssf,delete t.ssf,c}function nB(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=ia(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function $b(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return ic(t.file,vr.write(e,{type:ir?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return vr.write(e,t)}function sB(e,t){var r=Un(t||{}),s=eB(e,r);return aB(s,r)}function aB(e,t){var r={},s=ir?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=s;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=s;break;default:throw new Error("Unrecognized type "+t.type)}var o=e.FullPaths?vr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof o=="string"){if(t.type=="binary"||t.type=="base64")return o;o=new Uint8Array(ou(o))}return t.password&&typeof encrypt_agile<"u"?$b(encrypt_agile(o,t.password),t):t.type==="file"?ic(t.file,o):t.type=="string"?zl(o):o}function iB(e,t){var r=t||{},s=SI(e,r);return $b(s,r)}function Bs(e,t,r){r||(r="");var s=r+e;switch(t.type){case"base64":return Kl(Ql(s));case"binary":return Ql(s);case"string":return e;case"file":return ic(t.file,s,"utf8");case"buffer":return ir?la(s,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(s):Bs(s,{type:"binary"}).split("").map(function(o){return o.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function oB(e,t){switch(t.type){case"base64":return Kl(e);case"binary":return e;case"string":return e;case"file":return ic(t.file,e,"binary");case"buffer":return ir?la(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Od(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",s=0;s<e.length;++s)r+=String.fromCharCode(e[s]);return t.type=="base64"?Kl(r):t.type=="string"?zl(r):r;case"file":return ic(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Hb(e,t){B6(),GO(e);var r=Un(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var s=Hb(e,r);return r.type="array",ou(s)}var o=0;if(r.sheet&&(typeof r.sheet=="number"?o=r.sheet:o=e.SheetNames.indexOf(r.sheet),!e.SheetNames[o]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Bs(bI(e,r),r);case"slk":case"sylk":return Bs(qN.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"htm":case"html":return Bs(zb(e.Sheets[e.SheetNames[o]],r),r);case"txt":return oB(Gb(e.Sheets[e.SheetNames[o]],r),r);case"csv":return Bs(tp(e.Sheets[e.SheetNames[o]],r),r,"\uFEFF");case"dif":return Bs($N.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"dbf":return Od(WN.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"prn":return Bs(HN.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"rtf":return Bs(JN.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"eth":return Bs(pb.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"fods":return Bs(qb(e,r),r);case"wk1":return Od(iy.sheet_to_wk1(e.Sheets[e.SheetNames[o]],r),r);case"wk3":return Od(iy.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Od(Pb(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),iB(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return sB(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function lB(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function cB(e,t,r){var s={};return s.type="file",s.file=t,lB(s),Hb(e,s)}function dB(e,t,r,s,o,c,d,f){var h=gn(r),p=f.defval,x=f.raw||!Object.prototype.hasOwnProperty.call(f,"raw"),y=!0,v=o===1?[]:{};if(o!==1)if(Object.defineProperty)try{Object.defineProperty(v,"__rowNum__",{value:r,enumerable:!1})}catch{v.__rowNum__=r}else v.__rowNum__=r;if(!d||e[r])for(var b=t.s.c;b<=t.e.c;++b){var w=d?e[r][b]:e[s[b]+h];if(w===void 0||w.t===void 0){if(p===void 0)continue;c[b]!=null&&(v[c[b]]=p);continue}var _=w.v;switch(w.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(c[b]!=null){if(_==null)if(w.t=="e"&&_===null)v[c[b]]=null;else if(p!==void 0)v[c[b]]=p;else if(x&&_===null)v[c[b]]=null;else continue;else v[c[b]]=x&&(w.t!=="n"||w.t==="n"&&f.rawNumbers!==!1)?_:oa(w,_,f);_!=null&&(y=!1)}}return{row:v,isempty:y}}function tu(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},s=0,o=1,c=[],d=0,f="",h={s:{r:0,c:0},e:{r:0,c:0}},p=t||{},x=p.range!=null?p.range:e["!ref"];switch(p.header===1?s=1:p.header==="A"?s=2:Array.isArray(p.header)?s=3:p.header==null&&(s=0),typeof x){case"string":h=kr(x);break;case"number":h=kr(e["!ref"]),h.s.r=x;break;default:h=x}s>0&&(o=0);var y=gn(h.s.r),v=[],b=[],w=0,_=0,S=Array.isArray(e),N=h.s.r,R=0,I={};S&&!e[N]&&(e[N]=[]);var G=p.skipHidden&&e["!cols"]||[],Z=p.skipHidden&&e["!rows"]||[];for(R=h.s.c;R<=h.e.c;++R)if(!(G[R]||{}).hidden)switch(v[R]=bn(R),r=S?e[N][R]:e[v[R]+y],s){case 1:c[R]=R-h.s.c;break;case 2:c[R]=v[R];break;case 3:c[R]=p.header[R-h.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),f=d=oa(r,null,p),_=I[d]||0,!_)I[d]=1;else{do f=d+"_"+_++;while(I[f]);I[d]=_,I[f]=1}c[R]=f}for(N=h.s.r+o;N<=h.e.r;++N)if(!(Z[N]||{}).hidden){var ie=dB(e,h,N,v,s,c,S,p);(ie.isempty===!1||(s===1?p.blankrows!==!1:p.blankrows))&&(b[w++]=ie.row)}return b.length=w,b}var py=/"/g;function uB(e,t,r,s,o,c,d,f){for(var h=!0,p=[],x="",y=gn(r),v=t.s.c;v<=t.e.c;++v)if(s[v]){var b=f.dense?(e[r]||[])[v]:e[s[v]+y];if(b==null)x="";else if(b.v!=null){h=!1,x=""+(f.rawNumbers&&b.t=="n"?b.v:oa(b,null,f));for(var w=0,_=0;w!==x.length;++w)if((_=x.charCodeAt(w))===o||_===c||_===34||f.forceQuotes){x='"'+x.replace(py,'""')+'"';break}x=="ID"&&(x='"ID"')}else b.f!=null&&!b.F?(h=!1,x="="+b.f,x.indexOf(",")>=0&&(x='"'+x.replace(py,'""')+'"')):x="";p.push(x)}return f.blankrows===!1&&h?null:p.join(d)}function tp(e,t){var r=[],s=t??{};if(e==null||e["!ref"]==null)return"";var o=kr(e["!ref"]),c=s.FS!==void 0?s.FS:",",d=c.charCodeAt(0),f=s.RS!==void 0?s.RS:`
`,h=f.charCodeAt(0),p=new RegExp((c=="|"?"\\|":c)+"+$"),x="",y=[];s.dense=Array.isArray(e);for(var v=s.skipHidden&&e["!cols"]||[],b=s.skipHidden&&e["!rows"]||[],w=o.s.c;w<=o.e.c;++w)(v[w]||{}).hidden||(y[w]=bn(w));for(var _=0,S=o.s.r;S<=o.e.r;++S)(b[S]||{}).hidden||(x=uB(e,o,S,y,d,h,c,s),x!=null&&(s.strip&&(x=x.replace(p,"")),(x||s.blankrows!==!1)&&r.push((_++?f:"")+x)));return delete s.dense,r.join("")}function Gb(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=tp(e,t);return r}function fB(e){var t="",r,s="";if(e==null||e["!ref"]==null)return[];var o=kr(e["!ref"]),c="",d=[],f,h=[],p=Array.isArray(e);for(f=o.s.c;f<=o.e.c;++f)d[f]=bn(f);for(var x=o.s.r;x<=o.e.r;++x)for(c=gn(x),f=o.s.c;f<=o.e.c;++f)if(t=d[f]+c,r=p?(e[x]||[])[f]:e[t],s="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;s=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)s=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)s=""+r.v;else if(r.t=="b")s=r.v?"TRUE":"FALSE";else if(r.w!==void 0)s="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?s="'"+r.v:s=""+r.v}}h[h.length]=t+"="+s}return h}function Vb(e,t,r){var s=r||{},o=+!s.skipHeader,c=e||{},d=0,f=0;if(c&&s.origin!=null)if(typeof s.origin=="number")d=s.origin;else{var h=typeof s.origin=="string"?an(s.origin):s.origin;d=h.r,f=h.c}var p,x={s:{c:0,r:0},e:{c:f,r:d+t.length-1+o}};if(c["!ref"]){var y=kr(c["!ref"]);x.e.c=Math.max(x.e.c,y.e.c),x.e.r=Math.max(x.e.r,y.e.r),d==-1&&(d=y.e.r+1,x.e.r=d+t.length-1+o)}else d==-1&&(d=0,x.e.r=t.length-1+o);var v=s.header||[],b=0;t.forEach(function(_,S){xn(_).forEach(function(N){(b=v.indexOf(N))==-1&&(v[b=v.length]=N);var R=_[N],I="z",G="",Z=pr({c:f+b,r:d+S+o});p=ec(c,Z),R&&typeof R=="object"&&!(R instanceof Date)?c[Z]=R:(typeof R=="number"?I="n":typeof R=="boolean"?I="b":typeof R=="string"?I="s":R instanceof Date?(I="d",s.cellDates||(I="n",R=zn(R)),G=s.dateNF||Fr[14]):R===null&&s.nullError&&(I="e",R=0),p?(p.t=I,p.v=R,delete p.w,delete p.R,G&&(p.z=G)):c[Z]=p={t:I,v:R},G&&(p.z=G))})}),x.e.c=Math.max(x.e.c,f+v.length-1);var w=gn(d);if(o)for(b=0;b<v.length;++b)c[bn(b+f)+w]={t:"s",v:v[b]};return c["!ref"]=Hr(x),c}function hB(e,t){return Vb(null,e,t)}function ec(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var s=an(t);return e[s.r]||(e[s.r]=[]),e[s.r][s.c]||(e[s.r][s.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?ec(e,pr(t)):ec(e,pr({r:t,c:r||0}))}function pB(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function gB(){return{SheetNames:[],Sheets:{}}}function xB(e,t,r,s){var o=1;if(!r)for(;o<=65535&&e.SheetNames.indexOf(r="Sheet"+o)!=-1;++o,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&e.SheetNames.indexOf(r)>=0){var c=r.match(/(^.*?)(\d+)$/);o=c&&+c[2]||0;var d=c&&c[1]||r;for(++o;o<=65535&&e.SheetNames.indexOf(r=d+o)!=-1;++o);}if(Mb(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function mB(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var s=pB(e,t);switch(e.Workbook.Sheets[s]||(e.Workbook.Sheets[s]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[s].Hidden=r}function yB(e,t){return e.z=t,e}function Yb(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function vB(e,t,r){return Yb(e,"#"+t,r)}function bB(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function _B(e,t,r,s){for(var o=typeof t!="string"?t:kr(t),c=typeof t=="string"?t:Hr(t),d=o.s.r;d<=o.e.r;++d)for(var f=o.s.c;f<=o.e.c;++f){var h=ec(e,d,f);h.t="n",h.F=c,delete h.v,d==o.s.r&&f==o.s.c&&(h.f=r,s&&(h.D=!0))}return e}var Js={encode_col:bn,encode_row:gn,encode_cell:pr,encode_range:Hr,decode_col:$0,decode_row:q0,split_cell:BA,decode_cell:an,decode_range:ts,format_cell:oa,sheet_add_aoa:Yv,sheet_add_json:Vb,sheet_add_dom:Ub,aoa_to_sheet:Oo,json_to_sheet:hB,table_to_sheet:Wb,table_to_book:$I,sheet_to_csv:tp,sheet_to_txt:Gb,sheet_to_json:tu,sheet_to_html:zb,sheet_to_formulae:fB,sheet_to_row_object_array:tu,sheet_get_cell:ec,book_new:gB,book_append_sheet:xB,book_set_sheet_visibility:mB,cell_set_number_format:yB,cell_set_hyperlink:Yb,cell_set_internal_link:vB,cell_add_comment:bB,sheet_set_array_formula:_B,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function SB({isOpen:e,onClose:t,vaultEntries:r,businessId:s}){const[o,c]=j.useState("weekly"),[d,f]=j.useState("2025-W37"),[h,p]=j.useState(null),[x,y]=j.useState(!1),[v,b]=j.useState(!1),[w,_]=j.useState(""),[S,N]=j.useState(""),[R,I]=j.useState(!1),G=P=>`€${P.toFixed(2)}`,Z=async(P,te)=>{try{y(!0);let ue,X;if(v&&P&&te)ue=new Date(P),ue.setHours(0,0,0,0),X=new Date(te),X.setHours(23,59,59,999);else if(o==="weekly"){const Ie=new Date,nt=Ie.getDay(),vt=Ie.getDate()-nt+(nt===0?-6:1);ue=new Date(Ie.setDate(vt)),ue.setHours(0,0,0,0),X=new Date(ue),X.setDate(X.getDate()+6),X.setHours(23,59,59,999)}else{const Ie=new Date;ue=new Date(Ie.getFullYear(),Ie.getMonth(),1),X=new Date(Ie.getFullYear(),Ie.getMonth()+1,0,23,59,59,999)}const{data:fe,error:J}=await Oe.from("sales").select("total_amount, discount_applied, cashier_id").gte("datetime",ue.toISOString()).lte("datetime",X.toISOString());if(J)throw J;const Q=fe?.reduce((Ie,nt)=>Ie+(nt.total_amount||0),0)||0,oe=fe?.reduce((Ie,nt)=>Ie+(nt.discount_applied||0),0)||0,re=fe?.length||0,ye=re>0?Q/re:0,{data:le,error:Ae}=await Oe.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(category),
          sales!inner(datetime)
        `).gte("sales.datetime",ue.toISOString()).lte("sales.datetime",X.toISOString());if(Ae)throw Ae;const B=new Map;le?.forEach(Ie=>{const nt=Ie.products?.category||"Other",vt=Ie.quantity*Ie.price_each,er=B.get(nt)||{revenue:0,units:0};B.set(nt,{revenue:er.revenue+vt,units:er.units+Ie.quantity})});const K=Array.from(B.entries()).map(([Ie,nt])=>({name:Ie,revenue:nt.revenue,percentage:Q>0?Number((nt.revenue/Q*100).toFixed(1)):0,units:nt.units})).sort((Ie,nt)=>nt.revenue-Ie.revenue),{data:E,error:L}=await Oe.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(name),
          sales!inner(datetime)
        `).gte("sales.datetime",ue.toISOString()).lte("sales.datetime",X.toISOString());if(L)throw L;const z=new Map;E?.forEach(Ie=>{const nt=Ie.products?.name||"Unknown Product",vt=Ie.quantity*Ie.price_each,er=z.get(nt)||{units:0,revenue:0};z.set(nt,{units:er.units+Ie.quantity,revenue:er.revenue+vt})});const Y=Array.from(z.entries()).map(([Ie,nt])=>({name:Ie,...nt})).sort((Ie,nt)=>nt.revenue-Ie.revenue).slice(0,10).map((Ie,nt)=>({rank:nt+1,...Ie})),{data:me,error:Me}=await Oe.from("products").select("name");if(Me)throw Me;const Ce=(me?.map(Ie=>{const nt=z.get(Ie.name);return{name:Ie.name,units:nt?.units||0,revenue:nt?.revenue||0}})||[]).sort((Ie,nt)=>Ie.revenue-nt.revenue).slice(0,10).map((Ie,nt)=>({rank:nt+1,...Ie})),{data:ne,error:Pe}=await Oe.from("products").select("name, stock_quantity, reorder_level");if(Pe)throw Pe;const $e=ne?.filter(Ie=>Ie.stock_quantity<=Ie.reorder_level).map(Ie=>({product:Ie.name,current:Ie.stock_quantity,reorder:Ie.reorder_level,urgent:Ie.stock_quantity<=Ie.reorder_level*.5}))||[],rt=ne?.filter(Ie=>Ie.stock_quantity===0).map(Ie=>({product:Ie.name,lastStock:"N/A",expectedDelivery:"TBD"}))||[],{data:V,error:Ne}=await Oe.from("sales").select(`
          total_amount,
          cashier_id,
          users!inner(username)
        `).gte("datetime",ue.toISOString()).lte("datetime",X.toISOString());if(Ne)throw Ne;const st=new Map;V?.forEach(Ie=>{const nt=Ie.cashier_id,vt=Ie.users?.username||"Unknown",er=st.get(nt)||{name:vt,revenue:0,transactions:0};st.set(nt,{name:vt,revenue:er.revenue+(Ie.total_amount||0),transactions:er.transactions+1})});const Re=Array.from(st.values()).map(Ie=>({name:Ie.name,revenue:Ie.revenue,transactions:Ie.transactions,avgTransaction:Ie.transactions>0?Ie.revenue/Ie.transactions:0,hours:40,accuracy:99})),{data:ht,error:xt}=await Oe.from("side_business_sales").select(`
          total_amount,
          quantity,
          side_business_items!inner(
            name,
            side_businesses!inner(name)
          )
        `).eq("parent_shop_id",s||1).gte("date_time",ue.toISOString()).lte("date_time",X.toISOString());xt&&console.error("Error fetching side business data:",xt);const Dt=new Map;ht&&ht.forEach(Ie=>{const nt=Ie.side_business_items.side_businesses.name,vt=Ie.side_business_items.name;Dt.has(nt)||Dt.set(nt,{name:nt,revenue:0,transactions:0,items:new Map});const er=Dt.get(nt);er.revenue+=Ie.total_amount,er.transactions+=1,er.items.has(vt)||er.items.set(vt,{name:vt,units:0,revenue:0});const br=er.items.get(vt);br.units+=Ie.quantity,br.revenue+=Ie.total_amount});const bt=Array.from(Dt.values()).map(Ie=>({name:Ie.name,revenue:Ie.revenue,transactions:Ie.transactions,avgTransaction:Ie.transactions>0?Ie.revenue/Ie.transactions:0,topItems:Array.from(Ie.items.values()).sort((nt,vt)=>vt.revenue-nt.revenue).slice(0,3)}));p({kpis:{totalSales:Q,transactions:re,avgTransaction:ye,discounts:oe},categories:K,topProducts:Y,leastSoldProducts:Ce,lowStock:$e,outOfStock:rt,staff:Re,sideBusinesses:bt})}catch(ue){console.error("Error fetching report data:",ue)}finally{y(!1)}};j.useEffect(()=>{e&&Z()},[e,o,d]);const ie=()=>{const P=window.open("","_blank"),te=document.getElementById("sales-report-content").innerHTML;P.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>LandM Store Sales Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
            th { background-color: #f5f5f5; }
            .urgent { color: red; font-weight: bold; }
            .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0; }
            .kpi-card { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
            h1, h2, h3 { color: #333; }
            .print-only { display: block; }
          </style>
        </head>
        <body>
          ${te}
          <script>window.print();<\/script>
        </body>
      </html>
    `)},q=async()=>{try{I(!0);const P=v?w:null,te=v?S:null;let ue="";if(v&&P&&te){const K=new Date(P).toLocaleDateString("en-IE"),E=new Date(te).toLocaleDateString("en-IE");ue=`${K}_to_${E}`}else if(o==="weekly")ue=`Week_${d}`;else{const K=new Date;ue=`${K.getFullYear()}_${String(K.getMonth()+1).padStart(2,"0")}`}const X=Js.book_new(),fe=[["LANDM STORE - FINANCIAL REPORT FOR ACCOUNTANT"],[""],["BUSINESS INFORMATION"],["Company Name:","LandM Store"],["Address:","Unit 2 Glenmore Park, Dundalk, Co. Louth"],["Phone:","087 797 0412"],["VAT Number:","IE1234567A"],["Business Type:","Retail Store"],[""],["REPORTING PERIOD"],["Period:",v?`${w} to ${S}`:o==="weekly"?`Week ${d}`:new Date().toLocaleDateString("en-IE",{year:"numeric",month:"long"})],["Report Generated:",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})],[""],["REVENUE SUMMARY (EXCLUDING VAT)"],["Gross Sales Revenue",h?.kpis.totalSales?h.kpis.totalSales:0],["Less: Customer Discounts",h?.kpis.discounts?h.kpis.discounts:0],["Net Sales Revenue (Before VAT)",h?.kpis.totalSales&&h?.kpis.discounts?h.kpis.totalSales-h.kpis.discounts:h?.kpis.totalSales?h.kpis.totalSales:0],[""],["TRANSACTION ANALYSIS"],["Total Number of Transactions",h?.kpis.transactions||0],["Average Transaction Value",h?.kpis.avgTransaction?h.kpis.avgTransaction:0],["Total Items Sold",h?.categories.reduce((K,E)=>K+E.units,0)||0],[""],["CATEGORY PERFORMANCE"],["Category","Revenue","Percentage of Sales","Units Sold","Average Price per Unit"],...h?.categories.map(K=>[K.name,K.revenue,`${K.percentage}%`,K.units,K.units>0?K.revenue/K.units:0])||[],[""],["TOP PERFORMING PRODUCTS"],["Product Name","Units Sold","Revenue Generated","Average Price per Unit"],...h?.topProducts.slice(0,15).map(K=>[K.name,K.units,K.revenue,K.units>0?K.revenue/K.units:0])||[],[""],["ACCOUNTING NOTES"],["1. All amounts are in Euro (€)"],["2. Revenue figures are exclusive of VAT unless otherwise stated"],["3. Customer discounts are deducted from gross revenue"],["4. This report is generated automatically from POS system data"],["5. For VAT calculations, standard rate should be applied to net sales"],["6. Inventory movements and cost of goods sold are not included in this report"],["7. Report covers retail sales only - side business operations excluded"],[""],["VERIFICATION REQUIRED"],["- Cross-reference with bank deposits"],["- Verify VAT calculations and rates"],["- Confirm discount policies and approvals"],["- Reconcile with physical inventory counts"]],J=Js.aoa_to_sheet(fe);Js.book_append_sheet(X,J,"Financial Summary");const Q=[["DETAILED SALES BREAKDOWN"],[""],["Product Name","Category","Units Sold","Revenue Generated","Average Price per Unit"],...h?.topProducts.map(K=>[K.name,h.categories.find(E=>h.topProducts.filter(L=>h.categories.some(z=>z.name==="Category"&&L.name===K.name)).length>0)?.name||"Other",K.units,K.revenue,K.units>0?K.revenue/K.units:0])||[],[""],["CATEGORY TOTALS"],["Category","Total Revenue","Total Units","Average Price per Unit","Percentage of Total Sales"],...h?.categories.map(K=>[K.name,K.revenue,K.units,K.units>0?K.revenue/K.units:0,`${K.percentage}%`])||[]],oe=Js.aoa_to_sheet(Q);Js.book_append_sheet(X,oe,"Sales Details");const re=[["TRANSACTION ANALYSIS"],[""],["Metric","Value","Notes"],["Total Transactions",h?.kpis.transactions||0,"Number of completed sales"],["Average Transaction Value",h?.kpis.avgTransaction?h.kpis.avgTransaction:0,"Revenue per transaction"],["Total Items Sold",h?.categories.reduce((K,E)=>K+E.units,0)||0,"Sum of all units sold"],["Average Items per Transaction",h?.kpis.transactions>0?h.categories.reduce((K,E)=>K+E.units,0)/h.kpis.transactions:0,"Items sold divided by transactions"],["Discount Rate",h?.kpis.totalSales>0?(h.kpis.discounts/h.kpis.totalSales*100).toFixed(2)+"%":"0%","Percentage of revenue given as discounts"],[""],["DAILY BREAKDOWN (ESTIMATED)"],["Note: Daily breakdown requires individual transaction data"],["Average Daily Revenue",h?.kpis.totalSales&&h?.kpis.transactions>0?h.kpis.totalSales/Math.max(1,h.kpis.transactions/10):0,"Estimated based on transaction volume"],["Average Daily Transactions",h?.kpis.transactions>0?h.kpis.transactions/Math.max(1,h.kpis.transactions/10):0,"Estimated daily transaction count"]],ye=Js.aoa_to_sheet(re);Js.book_append_sheet(X,ye,"Transaction Analysis");const le=[["VAT CALCULATION WORKSHEET"],[""],["IMPORTANT: This is a template - verify VAT rates and calculations"],[""],["Net Sales Revenue (Before VAT)",h?.kpis.totalSales&&h?.kpis.discounts?h.kpis.totalSales-h.kpis.discounts:h?.kpis.totalSales?h.kpis.totalSales:0],[""],["VAT CALCULATIONS (Standard Rate 23%)"],["VAT on Net Sales",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],["Total Revenue Including VAT",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*1.23:h?.kpis.totalSales?h.kpis.totalSales*1.23:0],[""],["VAT CALCULATIONS (Reduced Rate 13.5% - if applicable)"],["Note: Verify which products qualify for reduced rate"],["VAT on Reduced Rate Items",0,"To be calculated based on product categorization"],[""],["VAT SUMMARY"],["Standard Rate VAT (23%)",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],["Reduced Rate VAT (13.5%)",0,"Calculate based on qualifying products"],["Total VAT Collected",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],[""],["VERIFICATION CHECKLIST"],["☐ Verify current VAT rates"],["☐ Confirm product VAT categorization"],["☐ Cross-check with VAT returns"],["☐ Validate calculation methods"],["☐ Check for any exempt or zero-rated items"]],Ae=Js.aoa_to_sheet(le);Js.book_append_sheet(X,Ae,"VAT Calculation");const B=`LandM_Store_Accountant_Report_${ue}_${new Date().toISOString().split("T")[0]}.xlsx`;cB(X,B)}catch(P){console.error("Error exporting to Excel:",P),alert("Failed to export to Excel. Please try again.")}finally{I(!1)}};return e?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"900px",width:"95%",maxHeight:"80vh",overflowY:"auto",color:"#3e3f29"},children:[x&&a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{fontSize:"24px",marginBottom:"20px"}}),a.jsx("p",{children:"Loading report data..."})]}),!x&&!h&&a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"20px",color:"#dc3545"}}),a.jsx("p",{children:"Unable to load report data. Please try again."}),a.jsx("button",{onClick:t,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"8px",marginTop:"20px",cursor:"pointer"},children:"Close"})]}),!x&&h&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[a.jsx("i",{className:"fa-solid fa-chart-line",style:{marginRight:"10px",color:"#7d8d86"}}),"Sales Reports"]}),a.jsx("button",{onClick:t,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:P=>{P.currentTarget.style.background="#7d8d86",P.currentTarget.style.color="#ffffff",P.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:P=>{P.currentTarget.style.background="none",P.currentTarget.style.color="#3e3f29",P.currentTarget.style.transform="rotate(0deg)"},children:"×"})]}),a.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"30px",flexWrap:"wrap",alignItems:"center"},children:[a.jsxs("select",{style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:o,onChange:P=>c(P.target.value),children:[a.jsx("option",{value:"weekly",children:"Weekly Report"}),a.jsx("option",{value:"monthly",children:"Monthly Report"}),a.jsx("option",{value:"custom",children:"Custom Date Range"})]}),o==="weekly"&&a.jsx("input",{type:"week",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:d,onChange:P=>f(P.target.value)}),o==="custom"&&a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsx("input",{type:"date",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:w,onChange:P=>_(P.target.value),placeholder:"Start Date"}),a.jsx("span",{style:{color:"#7d8d86",fontSize:"14px"},children:"to"}),a.jsx("input",{type:"date",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:S,onChange:P=>N(P.target.value),placeholder:"End Date"})]}),a.jsxs("button",{onClick:()=>Z(w,S),disabled:x||o==="custom"&&(!w||!S),style:{background:x?"#cccccc":"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:x?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:P=>{x||(P.currentTarget.style.background="#3e3f29",P.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:P=>{x||(P.currentTarget.style.background="#7d8d86",P.currentTarget.style.transform="translateY(0)")},children:[a.jsx("i",{className:`fa-solid ${x?"fa-spinner fa-spin":"fa-refresh"}`}),x?"Loading...":"Refresh Data"]}),a.jsxs("button",{onClick:ie,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:P=>{P.currentTarget.style.background="#3e3f29",P.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:P=>{P.currentTarget.style.background="#7d8d86",P.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-print"}),"Print Report"]}),a.jsxs("button",{onClick:q,disabled:R||!h||o==="custom"&&(!w||!S),style:{background:R?"#cccccc":"#10b981",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:R?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:P=>{R||(P.currentTarget.style.background="#059669",P.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:P=>{R||(P.currentTarget.style.background="#10b981",P.currentTarget.style.transform="translateY(0)")},children:[a.jsx("i",{className:`fa-solid ${R?"fa-spinner fa-spin":"fa-file-excel"}`}),R?"Exporting...":"Export to Excel"]})]}),a.jsxs("div",{id:"sales-report-content",style:{color:"#3e3f29"},children:[a.jsxs("div",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",paddingBottom:"20px",marginBottom:"30px"},children:[a.jsxs("h1",{style:{color:"#3e3f29",fontSize:"28px",fontWeight:"700",marginBottom:"10px"},children:[a.jsx("i",{className:"fa-solid fa-file-invoice",style:{marginRight:"10px"}}),"LandM Store Sales Report"]}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px"},children:"Reporting Period: Week 37: 9-15 September 2025"})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-chart-bar",style:{marginRight:"10px"}}),"1. Overview (KPIs)"]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Sales"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:G(h.kpis.totalSales)})]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Transactions"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:h.kpis.transactions.toLocaleString()})]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Avg Transaction"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:G(h.kpis.avgTransaction)})]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Discounts"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:G(h.kpis.discounts)})]})]})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-shopping-cart",style:{marginRight:"10px"}}),"2. Sales Breakdown"]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Sales by Category"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Category"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"% of Total"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"})]})}),a.jsx("tbody",{children:h.categories.map((P,te)=>a.jsxs("tr",{style:{background:te%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:G(P.revenue)}),a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[P.percentage,"%"]}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.units})]},te))})]})})]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Top 10 Products Sold"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Rank"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),a.jsx("tbody",{children:h.topProducts.map(P=>a.jsxs("tr",{style:{background:P.rank%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:["#",P.rank]}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.units}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:G(P.revenue)})]},P.rank))})]})})]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Least Sold Products"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),a.jsx("tbody",{children:h.leastSoldProducts.map((P,te)=>a.jsxs("tr",{style:{background:te%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.units}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:G(P.revenue)})]},P.rank))})]})})]})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-warehouse",style:{marginRight:"10px"}}),"3. Inventory Alerts"]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc3545"}}),"Low Stock Products"]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Current Stock"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Reorder Level"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Status"})]})}),a.jsx("tbody",{children:h.lowStock.map((P,te)=>a.jsxs("tr",{style:{background:te%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.product}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.current}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.reorder}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29"},children:P.urgent&&a.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:"URGENT"})})]},te))})]})})]}),h.outOfStock.length>0&&a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-box",style:{color:"#dc3545"}}),"Out of Stock Products"]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Last Stock Date"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Expected Delivery"})]})}),a.jsx("tbody",{children:h.outOfStock.map((P,te)=>a.jsxs("tr",{style:{background:te%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.product}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:P.lastStock}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:P.expectedDelivery})]},te))})]})})]})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-users",style:{marginRight:"10px"}}),"4. Staff Performance"]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Cashier"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue Handled"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Hours"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Accuracy"})]})}),a.jsx("tbody",{children:h.staff.map((P,te)=>a.jsxs("tr",{style:{background:te%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:P.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:G(P.revenue)}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.transactions}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:G(P.avgTransaction)}),a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[P.hours,"h"]}),a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[P.accuracy,"%"]})]},te))})]})})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-store",style:{marginRight:"10px"}}),"5. Side Business Performance"]}),h.sideBusinesses.length>0?a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Business Name"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Top Items"})]})}),a.jsx("tbody",{children:h.sideBusinesses.map((P,te)=>a.jsxs("tr",{style:{background:te%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:P.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:G(P.revenue)}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.transactions}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:G(P.avgTransaction)}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.topItems.map((ue,X)=>a.jsxs("div",{style:{fontSize:"12px",marginBottom:"2px",color:"#7d8d86"},children:[ue.name,": ",ue.units," units (",G(ue.revenue),")"]},X))})]},te))})]})}):a.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#7d8d86",background:"rgba(125, 141, 134, 0.05)",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"24px",marginBottom:"10px",display:"block"}}),"No side business sales data found for this period."]})]}),a.jsxs("section",{style:{borderTop:"2px solid rgba(125, 141, 134, 0.3)",paddingTop:"20px",marginTop:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:[a.jsx("i",{className:"fa-solid fa-file-text",style:{marginRight:"10px"}}),"6. Report Footer"]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"10px"},children:"LandM Store"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Unit 2 Glenmore Park, Dundalk, Co. Louth"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Phone: 087 797 0412"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"VAT Number: IE1234567A"})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[a.jsx("strong",{children:"Reporting Period:"})," Week 37: 9-15 September 2025"]}),a.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[a.jsx("strong",{children:"Generated on:"})," ",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),a.jsx("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",fontStyle:"italic",margin:0},children:"This report was automatically generated by the LandM Store POS System. For questions or clarifications, contact the store manager."})})]})]})]})]})]})}):null}const wB=({isOpen:e,onClose:t})=>{const{user:r}=Sn(),[s,o]=j.useState(""),[c,d]=j.useState(""),[f,h]=j.useState(""),[p,x]=j.useState(!1),[y,v]=j.useState(null),[b,w]=j.useState([]),[_,S]=j.useState(!1),[N,R]=j.useState(!1),[I,G]=j.useState(!1),[Z,ie]=j.useState({title:"",username:"",password:"",website:""}),[q,P]=j.useState(new Set),[te,ue]=j.useState(null),[X,fe]=j.useState(!1),[J,Q]=j.useState(!1),[oe,re]=j.useState(""),[ye,le]=j.useState(""),[Ae,B]=j.useState(!1);j.useEffect(()=>{e&&(o(""),d(""),h(""),x(!1),v(null),w([]),S(!1),R(!1),G(!1),P(new Set),ue(null),fe(!1),Q(!1),re(""),le(""),B(!1),ie({title:"",username:"",password:"",website:""}))},[e]);const K=V=>{s.length<4&&(o(Ne=>Ne+V),d(""),h(""))},E=()=>{o(""),d(""),h("")},L=async V=>{if(r)try{const Ne=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(V)),st=Array.from(new Uint8Array(Ne)).map(xt=>xt.toString(16).padStart(2,"0")).join(""),{data:Re,error:ht}=await Oe.from("vault").insert([{owner_id:r.user_id,pin_hash:st}]).select();if(ht)throw ht;v(Re[0].vault_id),d("✓ Vault created successfully!"),h("success"),x(!0)}catch(Ne){console.error("Error creating vault:",Ne),d("✗ Failed to create vault. Try again."),h("error")}},z=async V=>{if(r)try{const{data:Ne,error:st}=await Oe.from("vault").select("vault_id, pin_hash").eq("owner_id",r.user_id).single();if(st){if(st.code==="PGRST116"){R(!0),d("Creating your vault..."),h("success"),await L(V);return}throw st}const Re=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(V)),ht=Array.from(new Uint8Array(Re)).map(xt=>xt.toString(16).padStart(2,"0")).join("");Ne.pin_hash===ht?(v(Ne.vault_id),d("✓ Access Granted! Vault Unlocked"),h("success"),x(!0),await Y(Ne.vault_id)):(d("✗ Incorrect PIN. Try again."),h("error"),setTimeout(()=>E(),1e3))}catch(Ne){console.error("Error verifying PIN:",Ne),d("✗ Failed to access vault. Try again."),h("error")}},Y=async V=>{try{const{data:Ne,error:st}=await Oe.from("vault_entries").select("entry_id, label, email, password_enc, link, created_at").eq("vault_id",V).order("created_at",{ascending:!1});if(st)throw st;console.log("Raw data from database:",Ne),Ne.length>0&&(console.log("First entry password_enc:",Ne[0].password_enc),console.log("Type of password_enc:",typeof Ne[0].password_enc));const Re=Ne.map(ht=>({...ht,password:ht.password_enc||"No password"}));w(Re),S(!0)}catch(Ne){console.error("Error fetching vault entries:",Ne)}},me=async()=>{if(!y||!Z.title||!Z.password){d("✗ Title and password are required"),h("error");return}try{const{data:V,error:Ne}=await Oe.from("vault_entries").insert([{vault_id:y,label:Z.title,email:Z.username,password_enc:Z.password,link:Z.website}]).select();if(Ne)throw Ne;await Y(y),ie({title:"",username:"",password:"",website:""}),G(!1),d("✓ Password saved successfully!"),h("success")}catch(V){console.error("Error saving entry:",V),d("✗ Failed to save password. Try again."),h("error")}},Me=V=>{P(Ne=>{const st=new Set(Ne);return st.has(V)?st.delete(V):st.add(V),st})},He=async(V,Ne)=>{try{await navigator.clipboard.writeText(V),d(`✓ ${Ne} copied to clipboard!`),h("success"),setTimeout(()=>{d(""),h("")},2e3)}catch{d(`✗ Failed to copy ${Ne}`),h("error"),setTimeout(()=>{d(""),h("")},2e3)}},Ce=V=>{ue(V)},ne=async V=>{if(y)try{const{error:Ne}=await Oe.from("vault_entries").delete().eq("entry_id",V).eq("vault_id",y);if(Ne)throw Ne;await Y(y),ue(null),d("✓ Password deleted successfully!"),h("success"),setTimeout(()=>{d(""),h("")},2e3)}catch(Ne){console.error("Error deleting entry:",Ne),d("✗ Failed to delete password. Try again."),h("error"),setTimeout(()=>{d(""),h("")},2e3)}},Pe=()=>{s.length===4&&z(s)},$e=async()=>{if(oe.length<4){d("✗ PIN must be at least 4 digits"),h("error");return}if(oe!==ye){d("✗ PINs do not match"),h("error");return}if(!y){d("✗ No vault found"),h("error");return}B(!0),d("Updating vault PIN..."),h("success");try{const V=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(oe)),Ne=Array.from(new Uint8Array(V)).map(Re=>Re.toString(16).padStart(2,"0")).join(""),{error:st}=await Oe.from("vault").update({pin_hash:Ne}).eq("vault_id",y);if(st)throw st;d("✓ Vault PIN updated successfully!"),h("success"),re(""),le(""),Q(!1)}catch(V){console.error("Error updating vault PIN:",V),d("✗ Failed to update vault PIN"),h("error")}finally{B(!1)}},rt=V=>{const Ne=V.key;Ne>="0"&&Ne<="9"?K(Ne):Ne==="Backspace"||Ne==="Delete"?s.length>0&&o(st=>st.slice(0,-1)):Ne==="Enter"?Pe():Ne==="Escape"&&t()};return e?a.jsxs(a.Fragment,{children:[!p&&a.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"400px",width:"90%",textAlign:"center"},onKeyDown:rt,tabIndex:-1,children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",border:"1px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px"},children:N?"Creating your vault...":"Enter your 4-digit PIN"}),a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"30px"},children:[0,1,2,3].map(V=>a.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"2px solid rgba(125, 141, 134, 0.3)",background:V<s.length?"linear-gradient(135deg, #7d8d86, #3e3f29)":"transparent",borderColor:V<s.length?"#3e3f29":"rgba(125, 141, 134, 0.3)",transform:V<s.length?"scale(1.1)":"scale(1)",transition:"all 0.3s ease"}},V))}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"15px",marginBottom:"20px"},children:[[1,2,3,4,5,6,7,8,9].map(V=>a.jsx("button",{onClick:()=>K(V.toString()),style:{width:"70px",height:"70px",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)"},onMouseEnter:Ne=>{Ne.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",Ne.currentTarget.style.color="#f1f0e4",Ne.currentTarget.style.transform="translateY(-2px)",Ne.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:Ne=>{Ne.currentTarget.style.background="#ffffff",Ne.currentTarget.style.color="#3e3f29",Ne.currentTarget.style.transform="translateY(0)",Ne.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:V},V)),a.jsx("button",{onClick:()=>K("0"),style:{width:"70px",height:"70px",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)",gridColumn:"2"},onMouseEnter:V=>{V.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",V.currentTarget.style.color="#f1f0e4",V.currentTarget.style.transform="translateY(-2px)",V.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:V=>{V.currentTarget.style.background="#ffffff",V.currentTarget.style.color="#3e3f29",V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:"0"})]}),a.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[a.jsx("button",{onClick:E,style:{padding:"12px 24px",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",background:"transparent",color:"#7d8d86",border:"2px solid rgba(125, 141, 134, 0.3)"},onMouseEnter:V=>{V.currentTarget.style.background="rgba(125, 141, 134, 0.1)",V.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:V=>{V.currentTarget.style.background="transparent",V.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Clear"}),a.jsx("button",{onClick:Pe,disabled:s.length!==4,style:{padding:"12px 24px",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:s.length===4?"pointer":"not-allowed",transition:"all 0.3s ease",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#f1f0e4",border:"2px solid transparent",opacity:s.length===4?1:.5},onMouseEnter:V=>{s.length===4&&(V.currentTarget.style.transform="translateY(-2px)",V.currentTarget.style.boxShadow="0 8px 16px rgba(62, 63, 41, 0.2)")},onMouseLeave:V=>{V.currentTarget.style.transform="translateY(0)",V.currentTarget.style.boxShadow="none"},children:N?"Creating...":"Unlock"})]}),c&&a.jsx("div",{style:{marginTop:"20px",padding:"12px",borderRadius:"10px",fontSize:"14px",fontWeight:"500",background:f==="success"?"rgba(125, 141, 134, 0.1)":"rgba(220, 53, 69, 0.1)",color:f==="success"?"#3e3f29":"#dc3545",border:f==="success"?"1px solid rgba(125, 141, 134, 0.3)":"1px solid rgba(220, 53, 69, 0.3)"},children:c})]})}),p&&a.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"900px",width:"95%",maxHeight:"70vh",minHeight:"500px",overflowY:"auto",textAlign:"center"},onKeyDown:rt,tabIndex:-1,children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",color:"#3e3f29"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[a.jsx("i",{className:"fa-solid fa-vault",style:{marginRight:"10px",color:"#7d8d86"}}),"Password Vault"]}),a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsxs("button",{onClick:()=>Q(!0),style:{background:"#dc3545",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:V=>{V.currentTarget.style.background="#c82333",V.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:V=>{V.currentTarget.style.background="#dc3545",V.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-key"}),"Manage PIN"]}),a.jsxs("button",{onClick:()=>fe(!0),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:V=>{V.currentTarget.style.background="#3e3f29",V.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:V=>{V.currentTarget.style.background="#7d8d86",V.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-chart-line"}),"Reports"]}),a.jsx("button",{onClick:t,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:V=>{V.currentTarget.style.background="#7d8d86",V.currentTarget.style.color="#ffffff",V.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:V=>{V.currentTarget.style.background="none",V.currentTarget.style.color="#3e3f29",V.currentTarget.style.transform="rotate(0deg)"},children:"×"})]})]}),a.jsx("div",{style:{marginBottom:"20px"},children:a.jsxs("button",{onClick:()=>G(!I),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"25px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},onMouseEnter:V=>{V.currentTarget.style.background="#3e3f29",V.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:V=>{V.currentTarget.style.background="#7d8d86",V.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-plus"}),I?"Cancel":"Add Password"]})}),I&&a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",marginBottom:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",textAlign:"center"},children:"Add New Password"}),a.jsxs("div",{style:{display:"grid",gap:"15px"},children:[a.jsx("input",{type:"text",placeholder:"Title (e.g., Facebook, Twitter)",value:Z.title,onChange:V=>ie({...Z,title:V.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:V=>{V.target.style.borderColor="#7d8d86",V.target.style.background="#ffffff"},onBlur:V=>{V.target.style.borderColor="rgba(125, 141, 134, 0.3)",V.target.style.background="#ffffff"}}),a.jsx("input",{type:"text",placeholder:"Username/Email",value:Z.username,onChange:V=>ie({...Z,username:V.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:V=>{V.target.style.borderColor="#7d8d86",V.target.style.background="#ffffff"},onBlur:V=>{V.target.style.borderColor="rgba(125, 141, 134, 0.3)",V.target.style.background="#ffffff"}}),a.jsx("input",{type:"password",placeholder:"Password",value:Z.password,onChange:V=>ie({...Z,password:V.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:V=>{V.target.style.borderColor="#7d8d86",V.target.style.background="#ffffff"},onBlur:V=>{V.target.style.borderColor="rgba(125, 141, 134, 0.3)",V.target.style.background="#ffffff"}}),a.jsx("input",{type:"url",placeholder:"Website (optional)",value:Z.website,onChange:V=>ie({...Z,website:V.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:V=>{V.target.style.borderColor="#7d8d86",V.target.style.background="#ffffff"},onBlur:V=>{V.target.style.borderColor="rgba(125, 141, 134, 0.3)",V.target.style.background="#ffffff"}}),a.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>G(!1),style:{padding:"10px 20px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"20px",background:"transparent",color:"#7d8d86",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:V=>{V.currentTarget.style.background="rgba(125, 141, 134, 0.1)",V.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:V=>{V.currentTarget.style.background="transparent",V.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),a.jsx("button",{onClick:me,disabled:!Z.title||!Z.password,style:{padding:"10px 20px",border:"none",borderRadius:"20px",background:Z.title&&Z.password?"#7d8d86":"rgba(125, 141, 134, 0.3)",color:"#f1f0e4",fontSize:"14px",fontWeight:"600",cursor:Z.title&&Z.password?"pointer":"not-allowed",transition:"all 0.3s ease"},onMouseEnter:V=>{Z.title&&Z.password&&(V.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:V=>{V.currentTarget.style.transform="translateY(0)"},children:"Save Password"})]})]})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-shield-halved"}),"Saved Passwords"]}),b.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:b.map(V=>a.jsxs("div",{style:{background:"#ffffff",borderRadius:"10px",padding:"15px",border:"1px solid rgba(125, 141, 134, 0.2)",transition:"all 0.3s ease",cursor:"pointer",position:"relative"},onMouseEnter:Ne=>{Ne.currentTarget.style.background="rgba(125, 141, 134, 0.1)",Ne.currentTarget.style.borderColor="#7d8d86",Ne.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Ne=>{Ne.currentTarget.style.background="#ffffff",Ne.currentTarget.style.borderColor="rgba(125, 141, 134, 0.2)",Ne.currentTarget.style.transform="translateY(0)"},children:[a.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),Ce(V.entry_id)},style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",color:"#dc3545",fontSize:"16px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.3s ease",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Ne=>{Ne.currentTarget.style.background="rgba(220, 53, 69, 0.1)",Ne.currentTarget.style.transform="scale(1.1)"},onMouseLeave:Ne=>{Ne.currentTarget.style.background="none",Ne.currentTarget.style.transform="scale(1)"},children:"×"}),a.jsx("div",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"5px",paddingRight:"30px"},children:V.label}),a.jsx("div",{style:{color:"#7d8d86",fontSize:"14px",marginBottom:"8px"},children:V.email}),a.jsx("div",{style:{color:"#3e3f29",fontSize:"14px",fontFamily:"monospace",marginBottom:"8px",padding:"4px 8px",background:"rgba(125, 141, 134, 0.1)",borderRadius:"4px",wordBreak:"break-all"},children:q.has(V.entry_id)?V.password:"••••••••"}),a.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>He(V.password,"Password"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Ne=>{Ne.currentTarget.style.background="#3e3f29",Ne.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Ne=>{Ne.currentTarget.style.background="#7d8d86",Ne.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-copy",style:{marginRight:"4px"}}),"Copy"]}),a.jsxs("button",{onClick:()=>He(V.email,"Email"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Ne=>{Ne.currentTarget.style.background="#3e3f29",Ne.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Ne=>{Ne.currentTarget.style.background="#7d8d86",Ne.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-envelope",style:{marginRight:"4px"}}),"Copy Email"]}),a.jsxs("button",{onClick:()=>Me(V.entry_id),style:{background:q.has(V.entry_id)?"#3e3f29":"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Ne=>{Ne.currentTarget.style.background=q.has(V.entry_id)?"#7d8d86":"#3e3f29",Ne.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Ne=>{Ne.currentTarget.style.background=q.has(V.entry_id)?"#3e3f29":"#7d8d86",Ne.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:`fa-solid ${q.has(V.entry_id)?"fa-eye-slash":"fa-eye"}`,style:{marginRight:"4px"}}),q.has(V.entry_id)?"Hide":"Show"]})]})]},V.entry_id))}):a.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#bca88d",fontSize:"14px"},children:[a.jsx("i",{className:"fa-solid fa-folder-open",style:{fontSize:"24px",marginBottom:"8px",display:"block"}}),"No passwords saved yet"]})]})})]})}),te&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"400px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"15px"},children:"Delete Password?"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"25px",lineHeight:"1.5"},children:"Are you sure you want to delete this password? This action cannot be undone."}),a.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>ue(null),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:V=>{V.currentTarget.style.background="rgba(125, 141, 134, 0.1)",V.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:V=>{V.currentTarget.style.background="transparent",V.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),a.jsx("button",{onClick:()=>ne(te),style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:V=>{V.currentTarget.style.background="#c82333",V.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:V=>{V.currentTarget.style.background="#dc3545",V.currentTarget.style.transform="translateY(0)"},children:"Delete"})]})]})}),J&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"500px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[a.jsxs("h3",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-key",style:{color:"#dc3545"}}),"Manage System PIN"]}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px",lineHeight:"1.5"},children:"Change the system access PIN. This PIN is required to access the POS system."}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",marginBottom:"30px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"New PIN (minimum 4 digits)"}),a.jsx("input",{type:"password",value:oe,onChange:V=>re(V.target.value),placeholder:"Enter new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:V=>{V.target.style.borderColor="#dc3545"},onBlur:V=>{V.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"Confirm PIN"}),a.jsx("input",{type:"password",value:ye,onChange:V=>le(V.target.value),placeholder:"Confirm new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:V=>{V.target.style.borderColor="#dc3545"},onBlur:V=>{V.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]})]}),a.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>Q(!1),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:V=>{V.currentTarget.style.background="rgba(125, 141, 134, 0.1)",V.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:V=>{V.currentTarget.style.background="transparent",V.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),a.jsx("button",{onClick:$e,disabled:Ae||oe.length<4||oe!==ye,style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:Ae||oe.length<4||oe!==ye?"rgba(220, 53, 69, 0.3)":"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:Ae||oe.length<4||oe!==ye?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:V=>{!Ae&&oe.length>=4&&oe===ye&&(V.currentTarget.style.background="#c82333",V.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:V=>{V.currentTarget.style.background=Ae||oe.length<4||oe!==ye?"rgba(220, 53, 69, 0.3)":"#dc3545",V.currentTarget.style.transform="translateY(0)"},children:Ae?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-save"}),"Update PIN"]})})]})]})}),a.jsx(SB,{isOpen:X,onClose:()=>fe(!1),vaultEntries:b,businessId:r?.business_id})]}):null},TB=()=>{const{businessId:e,businessLoading:t}=au(),[r,s]=j.useState([]),[o,c]=j.useState(!1),[d,f]=j.useState(!1),[h,p]=j.useState(null),[x,y]=j.useState({username:"",password:"",role:"Cashier",icon:"ryu"}),v=[{name:"lily",label:"Lily"},{name:"chunli",label:"Chun-Li"},{name:"ken",label:"Ken"},{name:"kimberly",label:"Kimberly"},{name:"mai",label:"Mai"},{name:"manon",label:"Manon"},{name:"rashid",label:"Rashid"},{name:"ryu",label:"Ryu"},{name:"zangief",label:"Zangief"}],[b,w]=j.useState(!1),[_,S]=j.useState(""),[N,R]=j.useState(!0),[I,G]=j.useState(!1);j.useEffect(()=>{e&&Z()},[e,t]);const Z=async()=>{if(!e){s([]),R(!1);return}try{R(!0);const{data:J,error:Q}=await Oe.from("users").select("*").eq("business_id",e).order("user_id",{ascending:!1});if(Q){console.error("Error fetching users:",Q),S("Failed to fetch users");return}s(J||[])}catch(J){console.error("Error fetching users:",J),S("Failed to fetch users")}finally{R(!1)}},ie=async J=>{if(J.preventDefault(),w(!0),S(""),!x.username.trim()){S("Username is required"),w(!1);return}if(!x.password.trim()){S("Password is required"),w(!1);return}if(!e){S("Business ID is not available. Please refresh the page and try again."),w(!1);return}try{console.log("Adding user with data:",{username:x.username,role:x.role,icon:x.icon,business_id:e});const{data:Q,error:oe}=await Oe.from("users").select("user_id").eq("username",x.username.trim()).single();if(oe&&oe.code!=="PGRST116")throw console.error("Error checking username:",oe),new Error("Failed to check if username exists");if(Q)throw new Error("Username already exists. Please choose a different username.");const re=Pa(x.password),ye={username:x.username.trim(),password_hash:re,role:x.role,active:!0,business_id:e};ye.icon=x.icon;const{data:le,error:Ae}=await Oe.from("users").insert([ye]).select();if(Ae)throw console.error("Supabase error adding user:",Ae),Ae.code==="23505"?new Error("Username already exists. Please choose a different username."):Ae.code==="23503"?new Error("Invalid business ID. Please refresh the page and try again."):Ae.code==="23502"?new Error("Required field is missing. Please fill in all required fields."):Ae.message.includes("duplicate key value violates unique constraint")?new Error("Username already exists. Please choose a different username."):Ae.message.includes("violates foreign key constraint")?new Error("Invalid business ID. Please refresh the page and try again."):Ae.message.includes("Could not find the 'icon' column")?new Error("Database schema is outdated. Please run the database migration to add the icon column."):new Error(`Database error: ${Ae.message}`);if(!le||le.length===0)throw new Error("No data returned from insert operation");console.log("User added successfully:",le[0]),y({username:"",password:"",role:"Cashier",icon:"ryu"}),c(!1),Z()}catch(Q){console.error("Error adding user:",Q),Q instanceof Error?S(`Failed to add user: ${Q.message}`):S("Failed to add user: Unknown error occurred")}finally{w(!1)}},q=async J=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:Q}=await Oe.from("users").delete().eq("user_id",J);if(Q)throw console.error("Error deleting user:",Q),Q;Z()}catch(Q){console.error("Error deleting user:",Q),S(`Failed to delete user: ${Q instanceof Error?Q.message:"Unknown error"}`)}},P=async(J,Q)=>{try{const{error:oe}=await Oe.from("users").update({active:!Q}).eq("user_id",J);if(oe)throw console.error("Error updating user status:",oe),oe;Z()}catch(oe){console.error("Error updating user status:",oe),S(`Failed to update user: ${oe instanceof Error?oe.message:"Unknown error"}`)}},te=J=>{p(J),y({username:J.username,password:"",role:J.role,icon:J.icon||"ryu"}),f(!0)},ue=async J=>{if(J.preventDefault(),!!h){w(!0),S("");try{const Q={username:x.username,role:x.role,icon:x.icon};x.password.trim()&&(Q.password_hash=Pa(x.password));const{error:oe}=await Oe.from("users").update(Q).eq("user_id",h.user_id);if(oe)throw console.error("Error updating user:",oe),oe;y({username:"",password:"",role:"Cashier",icon:"ryu"}),p(null),f(!1),Z()}catch(Q){console.error("Error updating user:",Q),S(`Failed to update user: ${Q instanceof Error?Q.message:"Unknown error"}`)}finally{w(!1)}}},X=async()=>{if(!e){S("No business selected");return}try{R(!0);const J=`admin_${e}`,{data:Q,error:oe}=await Oe.from("users").select("user_id").eq("business_id",e).eq("username",J).eq("role","Admin").single();if(oe&&oe.code!=="PGRST116"){console.error(`Error checking admin for business ${e}:`,oe),S("Failed to check for existing admin account");return}if(Q)S("Admin account already exists for this business");else{const re=Pa("admin123"),{error:ye}=await Oe.from("users").insert({username:J,password_hash:re,role:"Admin",active:!0,business_id:e,icon:"ryu",created_at:new Date().toISOString()});ye?(console.error(`Error creating admin for business ${e}:`,ye),S("Failed to create admin account")):(console.log(`Admin account created for business ID: ${e}`),S("Admin account created successfully"),Z())}}catch(J){console.error("Error creating admin account:",J),S(`Failed to create admin account: ${J instanceof Error?J.message:"Unknown error"}`)}finally{R(!1)}},fe=J=>{switch(J){case"Admin":return"#ef4444";case"Owner":return"#8b5cf6";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#1a1a1a"}};return N?a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading users..."]}):a.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[a.jsxs("div",{children:[a.jsxs("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 8px 0"},children:[a.jsx("i",{className:"fa-solid fa-users-cog",style:{marginRight:"12px",color:"#7d8d86"}}),"User Management"]}),a.jsx("p",{style:{color:"#1a1a1a",margin:"0",fontSize:"18px"},children:"Manage system users and their permissions"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsxs("button",{onClick:()=>c(!0),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"18px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]}),a.jsxs("button",{onClick:X,style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},disabled:N,children:[a.jsx("i",{className:"fa-solid fa-user-shield"}),"Create Admin Account"]})]})]}),_&&a.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px 16px",borderRadius:"8px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),_]}),a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[a.jsx("div",{style:{padding:"20px 24px",borderBottom:"2px solid #d1d5db",background:"#f9fafb"},children:a.jsxs("h3",{style:{margin:"0",fontSize:"20px",fontWeight:"600",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-list",style:{marginRight:"8px",color:"#7d8d86"}}),"All Users (",r.length,")"]})}),r.length===0?a.jsxs("div",{style:{padding:"48px 24px",textAlign:"center",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-users",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"20px",margin:"0 0 8px 0"},children:"No users found"}),a.jsx("p",{style:{fontSize:"16px",margin:"0"},children:"Add your first user to get started"})]}):a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#f9fafb"},children:[a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Icon"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Role"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Status"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User ID"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Actions"})]})}),a.jsx("tbody",{children:r.map((J,Q)=>a.jsxs("tr",{style:{borderBottom:Q<r.length-1?"1px solid #f3f4f6":"none"},children:[a.jsx("td",{style:{padding:"16px 24px"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a",marginBottom:"4px",fontSize:"16px"},children:J.username}),a.jsxs("div",{style:{fontSize:"15px",color:"#1a1a1a"},children:["ID: ",J.user_id]})]})}),a.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden",border:"2px solid #e5e7eb"},children:J.icon?a.jsx("img",{src:`/retailpos/images/icons/${J.icon}.png`,alt:J.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):a.jsx("i",{className:"fa-solid fa-user",style:{fontSize:"20px",color:"#9ca3af"}})})}),a.jsx("td",{style:{padding:"16px 24px"},children:a.jsx("span",{style:{background:`${fe(J.role)}20`,color:fe(J.role),padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize"},children:J.role})}),a.jsx("td",{style:{padding:"16px 24px"},children:a.jsx("span",{style:{background:J.active?"#dcfce720":"#fef2f220",color:J.active?"#16a34a":"#dc2626",padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:J.active?"Active":"Inactive"})}),a.jsxs("td",{style:{padding:"16px 24px",color:"#1a1a1a",fontSize:"15px"},children:["User #",J.user_id]}),a.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:a.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[a.jsxs("button",{onClick:()=>te(J),style:{background:"#e0f2fe",color:"#0c4a6e",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Edit User",children:[a.jsx("i",{className:"fa-solid fa-pen-to-square"}),"Edit"]}),a.jsxs("button",{onClick:()=>P(J.user_id,J.active),style:{background:J.active?"#fef2f2":"#dcfce7",color:J.active?"#dc2626":"#16a34a",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:J.active?"Deactivate":"Activate",children:[a.jsx("i",{className:`fa-solid fa-${J.active?"ban":"check"}`}),J.active?"Deactivate":"Activate"]}),a.jsxs("button",{onClick:()=>q(J.user_id),style:{background:"#fef2f2",color:"#dc2626",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Delete User",children:[a.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]})]})})]},J.user_id))})]})})]}),o&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsxs("h2",{style:{margin:"0",fontSize:"26px",fontWeight:"600",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-user-plus",style:{marginRight:"8px",color:"#7d8d86"}}),"Add New User"]}),a.jsx("button",{onClick:()=>c(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:a.jsx("i",{className:"fa-solid fa-xmark"})})]}),a.jsxs("form",{onSubmit:ie,children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),a.jsx("input",{type:"text",value:x.username,onChange:J=>y({...x,username:J.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Password *"}),a.jsx("input",{type:"password",value:x.password,onChange:J=>y({...x,password:J.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter password"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),a.jsxs("select",{value:x.role,onChange:J=>y({...x,role:J.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[a.jsx("option",{value:"cashier",children:"Cashier"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"admin",children:"Admin"})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:v.map(J=>a.jsxs("button",{type:"button",onClick:()=>y({...x,icon:J.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:x.icon===J.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:x.icon===J.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:x.icon===J.name?"scale(1.05)":"scale(1)",boxShadow:x.icon===J.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:a.jsx("img",{src:`/retailpos/images/icons/${J.name}.png`,alt:J.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:x.icon===J.name?"brightness(1.1) contrast(1.1)":"none"}})}),x.icon===J.name&&a.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},J.name))})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:()=>c(!1),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:b,style:{background:b?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:b?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]})})]})]})]})}),d&&h&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-user-pen",style:{marginRight:"8px",color:"#7d8d86"}}),"Edit User"]}),a.jsx("button",{onClick:()=>{f(!1),p(null)},style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:a.jsx("i",{className:"fa-solid fa-xmark"})})]}),a.jsxs("form",{onSubmit:ue,children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),a.jsx("input",{type:"text",value:x.username,onChange:J=>y({...x,username:J.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"New Password (leave blank to keep current)"}),a.jsx("input",{type:"password",value:x.password,onChange:J=>y({...x,password:J.target.value}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter new password (optional)"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),a.jsxs("select",{value:x.role,onChange:J=>y({...x,role:J.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[a.jsx("option",{value:"Cashier",children:"Cashier"}),a.jsx("option",{value:"Manager",children:"Manager"}),a.jsx("option",{value:"Admin",children:"Admin"})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:v.map(J=>a.jsxs("button",{type:"button",onClick:()=>y({...x,icon:J.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:x.icon===J.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:x.icon===J.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:x.icon===J.name?"scale(1.05)":"scale(1)",boxShadow:x.icon===J.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:a.jsx("img",{src:`/retailpos/images/icons/${J.name}.png`,alt:J.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:x.icon===J.name?"brightness(1.1) contrast(1.1)":"none"}})}),x.icon===J.name&&a.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},J.name))})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),p(null)},style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:b,style:{background:b?"#9ca3af":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:b?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-floppy-disk"}),"Update User"]})})]})]})]})}),a.jsx("div",{onClick:()=>G(!0),title:"Access Secure Vault - Manage sensitive operations and settings",style:{position:"fixed",bottom:"24px",right:"24px",zIndex:50,width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(125, 141, 134, 0.4)",cursor:"pointer",transition:"all 0.2s ease"},children:a.jsx("i",{className:"fa-solid fa-vault",style:{fontSize:"48px",color:"#f1f0e4"}})}),a.jsx(wB,{isOpen:I,onClose:()=>G(!1)})]})},jB=()=>{const[e,t]=j.useState(""),[r,s]=j.useState(""),[o,c]=j.useState(""),[d,f]=j.useState(!1),h=Cs(),{user:p,login:x,loading:y}=Sn(),v=async b=>{if(b.preventDefault(),c(""),f(!0),!e||!r){c("Please enter both username and password"),f(!1);return}try{await x(e,r)?h("/dashboard"):c("Invalid username or password")}catch(w){console.error("Login error:",w),c("An unexpected error occurred. Please try again.")}finally{f(!1)}};return j.useEffect(()=>{!y&&!p&&h("/login",{replace:!0})},[y,p,h]),y||!p?null:a.jsxs("div",{style:{minHeight:"100vh",height:"100vh",width:"100%",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url(/retailpos/images/backgrounds/minimal.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.2)"}})}),a.jsx("div",{style:{position:"relative",zIndex:10,height:"100vh",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px 16px"},children:a.jsx("div",{style:{width:"100%",maxWidth:"600px"},children:a.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 255, 255, 0.08)",padding:"40px",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 100%)",pointerEvents:"none"}}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"32px",position:"relative",zIndex:1},children:[a.jsx("div",{style:{marginBottom:"20px"},children:a.jsx("img",{src:"/retailpos/images/backgrounds/logo1.png",alt:"Company Logo",style:{width:"200px",height:"auto"}})}),a.jsx("h2",{style:{fontSize:"36px",fontWeight:"bold",color:"white",marginBottom:"8px",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:"Staff Login"}),a.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"16px"},children:["Welcome to ",p.username,"'s business"]})]}),a.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"24px",position:"relative",zIndex:1},onSubmit:v,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"white",marginBottom:"8px",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Username"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:"50%",right:"12px",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2},children:a.jsx("i",{className:"fa-solid fa-user",style:{color:"white",fontSize:"20px"}})}),a.jsx("input",{id:"username",name:"username",type:"text",required:!0,style:{background:"transparent",border:"none",borderBottom:"2px solid rgba(255, 255, 255, 0.4)",color:"white",fontSize:"16px",padding:"12px 40px 12px 0",width:"100%",outline:"none",transition:"border-color 0.3s ease"},onFocus:b=>b.target.style.borderBottomColor="rgba(255, 255, 255, 0.8)",onBlur:b=>b.target.style.borderBottomColor="rgba(255, 255, 255, 0.4)",placeholder:"Enter your username",value:e,onChange:b=>t(b.target.value),disabled:d})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"white",marginBottom:"8px",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Password"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:"50%",right:"12px",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2},children:a.jsx("i",{className:"fa-solid fa-lock",style:{color:"white",fontSize:"20px"}})}),a.jsx("input",{id:"password",name:"password",type:"password",required:!0,style:{background:"transparent",border:"none",borderBottom:"2px solid rgba(255, 255, 255, 0.4)",color:"white",fontSize:"16px",padding:"12px 40px 12px 0",width:"100%",outline:"none",transition:"border-color 0.3s ease"},onFocus:b=>b.target.style.borderBottomColor="rgba(255, 255, 255, 0.8)",onBlur:b=>b.target.style.borderBottomColor="rgba(255, 255, 255, 0.4)",placeholder:"Enter your password",value:r,onChange:b=>s(b.target.value),disabled:d})]})]}),o&&a.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-100 px-4 py-3 rounded-lg backdrop-blur-sm",children:o}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:d,style:{width:"100%",padding:"16px 24px",background:"white",color:"#374151",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:d?"not-allowed":"pointer",opacity:d?.7:1,transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:b=>{if(!d){const w=b.target;w.style.background="#f9fafb",w.style.transform="translateY(-1px)",w.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.2)"}},onMouseLeave:b=>{if(!d){const w=b.target;w.style.background="white",w.style.transform="translateY(0)",w.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"}},children:d?a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{color:"#374151",fontSize:"18px",marginRight:"8px",animation:"spin 1s linear infinite"}}),"Signing in..."]}):"Sign In"})}),a.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:a.jsxs("p",{style:{color:"white",fontSize:"14px"},children:["Not your business?"," ",a.jsx("button",{type:"button",onClick:()=>{window.location.href="/retailpos/login"},style:{color:"#60a5fa",textDecoration:"none",fontWeight:"500",background:"none",border:"none",cursor:"pointer"},onMouseEnter:b=>{const w=b.target;w.style.textDecoration="underline"},onMouseLeave:b=>{const w=b.target;w.style.textDecoration="none"},children:"Switch Business"})]})})]})]})})})]})},EB="_container_k4aew_2",kB="_header_k4aew_10",CB="_title_k4aew_16",AB="_mainContent_k4aew_32",NB="_offlineNotice_k4aew_39",RB="_offlineNoticeContent_k4aew_51",DB="_dateNavigation_k4aew_62",OB="_navButton_k4aew_76",IB="_currentDate_k4aew_102",BB="_controls_k4aew_144",MB="_button_k4aew_151",FB="_buttonPrimary_k4aew_170",LB="_buttonSecondary_k4aew_179",PB="_buttonDanger_k4aew_192",zB="_notesContainer_k4aew_202",UB="_gridBackground_k4aew_218",WB="_gridPattern_k4aew_224",qB="_emptyState_k4aew_234",$B="_emptyStateContent_k4aew_242",HB="_emptyStateIcon_k4aew_247",GB="_emptyStateTitle_k4aew_252",VB="_dragIndicator_k4aew_258",YB="_footer_k4aew_271",KB="_stickyNote_k4aew_279",XB="_stickyNoteDragging_k4aew_286",QB="_note_k4aew_202",JB="_noteOverdue_k4aew_306",ZB="_noteDueToday_k4aew_310",eM="_noteYellow_k4aew_315",tM="_notePink_k4aew_321",rM="_noteBlue_k4aew_327",nM="_noteGreen_k4aew_333",sM="_notePurple_k4aew_339",aM="_noteOrange_k4aew_345",iM="_noteTopStrip_k4aew_351",oM="_noteContent_k4aew_433",lM="_noteContentEditing_k4aew_439",cM="_noteInput_k4aew_445",dM="_noteDateInput_k4aew_456",uM="_noteTextarea_k4aew_466",fM="_noteDisplay_k4aew_480",hM="_noteTitle_k4aew_486",pM="_noteTitleResolved_k4aew_494",gM="_noteDate_k4aew_456",xM="_noteDateOverdue_k4aew_505",mM="_noteDateToday_k4aew_510",yM="_noteBody_k4aew_515",vM="_noteBodyResolved_k4aew_524",bM="_noteCorner_k4aew_529",_M="_noteCornerEffect_k4aew_537",SM="_modalOverlay_k4aew_548",wM="_modal_k4aew_548",TM="_modalHeader_k4aew_569",jM="_modalTitle_k4aew_573",EM="_modalClose_k4aew_593",kM="_modalForm_k4aew_605",CM="_errorMessage_k4aew_611",AM="_errorContent_k4aew_619",NM="_formGroup_k4aew_628",RM="_formLabel_k4aew_633",DM="_formInput_k4aew_641",OM="_formTextarea_k4aew_655",IM="_colorSelection_k4aew_670",BM="_colorOption_k4aew_676",MM="_colorOptionSelected_k4aew_689",FM="_checkboxContainer_k4aew_694",LM="_formCheckbox_k4aew_700",PM="_checkboxLabel_k4aew_707",zM="_preview_k4aew_716",UM="_previewLabel_k4aew_720",WM="_previewNote_k4aew_728",qM="_previewTitle_k4aew_734",$M="_previewDate_k4aew_741",HM="_previewBody_k4aew_751",GM="_modalActions_k4aew_757",VM="_modalButton_k4aew_763",YM="_modalButtonCancel_k4aew_777",KM="_modalButtonSubmit_k4aew_786",XM="_modalButtonDanger_k4aew_795",QM="_loading_k4aew_805",JM="_loadingContent_k4aew_813",ZM="_loadingIcon_k4aew_817",e7="_loadingText_k4aew_823",t7="_confirmationDialog_k4aew_869",r7="_confirmationContent_k4aew_880",n7="_confirmationHeader_k4aew_889",s7="_confirmationIcon_k4aew_895",a7="_confirmationButton_k4aew_926",i7="_confirmationButtonCancel_k4aew_936",o7="_confirmationButtonConfirm_k4aew_945",l7="_calendarModal_k4aew_955",c7="_calendar_k4aew_955",d7="_calendarHeader_k4aew_981",u7="_calendarCloseButton_k4aew_989",f7="_calendarTitle_k4aew_1011",h7="_calendarNavButton_k4aew_1017",p7="_calendarGrid_k4aew_1035",g7="_calendarDayHeader_k4aew_1041",x7="_calendarDay_k4aew_1041",m7="_calendarDayOtherMonth_k4aew_1068",y7="_calendarDayToday_k4aew_1072",v7="_calendarDaySelected_k4aew_1082",b7="_calendarDayWithReminders_k4aew_1092",_7="_calendarDayWithRemindersToday_k4aew_1102",S7="_calendarDayWithRemindersSelected_k4aew_1111",w7="_calendarReminderCount_k4aew_1136",T7="_lilyMascot_k4aew_1178",j7="_lilySpeechBubble_k4aew_1188",E7="_lilySpeechTail_k4aew_1206",k7="_lilyImage_k4aew_1217",xe={container:EB,header:kB,title:CB,mainContent:AB,offlineNotice:NB,offlineNoticeContent:RB,dateNavigation:DB,navButton:OB,currentDate:IB,controls:BB,button:MB,buttonPrimary:FB,buttonSecondary:LB,buttonDanger:PB,notesContainer:zB,gridBackground:UB,gridPattern:WB,emptyState:qB,emptyStateContent:$B,emptyStateIcon:HB,emptyStateTitle:GB,dragIndicator:VB,footer:YB,stickyNote:KB,stickyNoteDragging:XB,note:QB,noteOverdue:JB,noteDueToday:ZB,noteYellow:eM,notePink:tM,noteBlue:rM,noteGreen:nM,notePurple:sM,noteOrange:aM,noteTopStrip:iM,noteContent:oM,noteContentEditing:lM,noteInput:cM,noteDateInput:dM,noteTextarea:uM,noteDisplay:fM,noteTitle:hM,noteTitleResolved:pM,noteDate:gM,noteDateOverdue:xM,noteDateToday:mM,noteBody:yM,noteBodyResolved:vM,noteCorner:bM,noteCornerEffect:_M,modalOverlay:SM,modal:wM,modalHeader:TM,modalTitle:jM,modalClose:EM,modalForm:kM,errorMessage:CM,errorContent:AM,formGroup:NM,formLabel:RM,formInput:DM,formTextarea:OM,colorSelection:IM,colorOption:BM,colorOptionSelected:MM,checkboxContainer:FM,formCheckbox:LM,checkboxLabel:PM,preview:zM,previewLabel:UM,previewNote:WM,previewTitle:qM,previewDate:$M,previewBody:HM,modalActions:GM,modalButton:VM,modalButtonCancel:YM,modalButtonSubmit:KM,modalButtonDanger:XM,loading:QM,loadingContent:JM,loadingIcon:ZM,loadingText:e7,confirmationDialog:t7,confirmationContent:r7,confirmationHeader:n7,confirmationIcon:s7,confirmationButton:a7,confirmationButtonCancel:i7,confirmationButtonConfirm:o7,calendarModal:l7,calendar:c7,calendarHeader:d7,calendarCloseButton:u7,calendarTitle:f7,calendarNavButton:h7,calendarGrid:p7,calendarDayHeader:g7,calendarDay:x7,calendarDayOtherMonth:m7,calendarDayToday:y7,calendarDaySelected:v7,calendarDayWithReminders:b7,calendarDayWithRemindersToday:_7,calendarDayWithRemindersSelected:S7,calendarReminderCount:w7,lilyMascot:T7,lilySpeechBubble:j7,lilySpeechTail:E7,lilyImage:k7};function C7(){const{user:e,currentUserId:t}=Sn(),[r,s]=j.useState([]),[o,c]=j.useState(!0),[d,f]=j.useState(null),[h,p]=j.useState({x:0,y:0}),[x,y]=j.useState(null),[v,b]=j.useState(!1),[w,_]=j.useState(!1),[S,N]=j.useState(!1),[R,I]=j.useState(null),[G,Z]=j.useState({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),[ie,q]=j.useState({title:"",body:"",remind_date:"",color:"yellow",resolved:!1}),[P,te]=j.useState(new Date),[ue,X]=j.useState(!1),[fe,J]=j.useState(!1),[Q,oe]=j.useState(new Date),[re,ye]=j.useState(!1),[le,Ae]=j.useState("Hi! I'm Lily, your reminder assistant! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),[B,K]=j.useState(()=>{const ce=localStorage.getItem("lilyEnabled");return ce!==null?JSON.parse(ce):!0}),[E,L]=j.useState(!0),z={yellow:{bg:xe.noteYellow,border:xe.noteYellow,shadow:xe.noteYellow},pink:{bg:xe.notePink,border:xe.notePink,shadow:xe.notePink},blue:{bg:xe.noteBlue,border:xe.noteBlue,shadow:xe.noteBlue},green:{bg:xe.noteGreen,border:xe.noteGreen,shadow:xe.noteGreen},purple:{bg:xe.notePurple,border:xe.notePurple,shadow:xe.notePurple},orange:{bg:xe.noteOrange,border:xe.noteOrange,shadow:xe.noteOrange}},Y=()=>{const ce=new Date(P);ce.setDate(ce.getDate()-1),te(ce)},me=()=>{const ce=new Date(P);ce.setDate(ce.getDate()+1),te(ce)},Me=ce=>{const Ge=new Date(Q);ce==="prev"?Ge.setMonth(Ge.getMonth()-1):Ge.setMonth(Ge.getMonth()+1),oe(Ge)},He=ce=>{te(ce),J(!1)},Ce=()=>{const ce=new Set;return r.forEach(Ge=>{const gt=new Date(Ge.remind_date);ce.add(gt.toDateString())}),ce},ne=()=>{const ce={};return r.forEach(Ge=>{const It=new Date(Ge.remind_date).toDateString();ce[It]=(ce[It]||0)+1}),ce},Pe=()=>{const ce=Q.getFullYear(),Ge=Q.getMonth(),gt=new Date(ce,Ge,1),It=new Date(gt);It.setDate(It.getDate()-gt.getDay());const lr=[],Cr=Ce(),wr=ne(),nr=new Date,Rr=new Date(P);for(let $t=0;$t<42;$t++){const or=new Date(It);or.setDate(It.getDate()+$t);const se=or.getMonth()===Ge,Ee=or.toDateString()===nr.toDateString(),mt=or.toDateString()===Rr.toDateString(),Rt=Cr.has(or.toDateString()),sr=wr[or.toDateString()]||0;lr.push({date:or,isCurrentMonth:se,isToday:Ee,isSelected:mt,hasReminders:Rt,reminderCount:sr})}return lr},$e=()=>{const ce=!B;K(ce),localStorage.setItem("lilyEnabled",JSON.stringify(ce)),ce&&(Ae("Hi! I'm back! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),ye(!0))},rt=()=>B?a.jsxs("div",{className:xe.lilyMascot,children:[re&&a.jsxs("div",{className:xe.lilySpeechBubble,children:[a.jsx("p",{children:le}),a.jsx("div",{className:xe.lilySpeechTail})]}),a.jsx("div",{className:xe.lilyImage,onClick:()=>{ye(!re)},onDoubleClick:()=>{$e()},children:a.jsx("img",{src:e?.icon?`/retailpos/images/icons/${e.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:e?.icon||"Lily"})})]}):null,V=()=>{const ce=new Date(P);return ce.setHours(0,0,0,0),r.filter(Ge=>{const gt=new Date(Ge.remind_date);gt.setHours(0,0,0,0);const It=gt.getTime()===ce.getTime(),lr=E||!Ge.resolved;return It&&lr})},Ne=async()=>{if(s([]),X(!1),!v)try{const{error:ce}=await Oe.from("reminders").delete().neq("reminder_id",0);ce&&console.error("Error deleting all reminders from database:",ce)}catch(ce){console.error("Error deleting all reminders:",ce)}},st=async()=>{try{if(c(!0),!e?.business_id){s([]),c(!1);return}const{data:ce,error:Ge}=await Oe.from("reminders").select("*").eq("business_id",e.business_id).order("remind_date",{ascending:!0});if(Ge)throw console.error("Database fetch error:",Ge),Ge;console.log("Fetched reminders from database:",ce);const gt=ce?.map((It,lr)=>({...It,x:Math.random()*400+50,y:Math.random()*300+50,rotation:(Math.random()-.5)*6,isEditing:!1,color:Object.keys(z)[lr%Object.keys(z).length]}))||[];console.log("Reminders with UI properties:",gt),s(gt)}catch(ce){console.error("Error fetching reminders:",ce),y("Failed to load reminders. Please try again.")}finally{c(!1)}};j.useEffect(()=>{(async()=>{try{const{data:Ge,error:gt}=await Oe.from("reminders").select("count",{count:"exact",head:!0});gt?(console.error("Table test error:",gt),y("Database table 'reminders' does not exist. Please run the SQL commands from database-schema.sql in your Supabase SQL editor."),b(!0),c(!1)):(console.log("Table exists, fetching reminders..."),st())}catch(Ge){console.error("Table test failed:",Ge),y("Failed to connect to database. Please check your connection.")}})()},[]);const Re=()=>{Z({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),y(null),_(!0)},ht=()=>{_(!1),Z({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"})},xt=()=>{N(!1),I(null),q({title:"",body:"",remind_date:"",color:"yellow",resolved:!1})},Dt=async()=>{if(!R||!ie.title.trim()||!ie.body.trim()){y("Please fill in both title and body for the reminder.");return}await nt(R.reminder_id,{title:ie.title.trim(),body:ie.body.trim(),remind_date:ie.remind_date,color:ie.color,resolved:ie.resolved}),xt()},bt=async()=>{if(!G.title.trim()||!G.body.trim()){y("Please fill in both title and body for the reminder.");return}const ce={title:G.title.trim(),body:G.body.trim(),remind_date:G.remind_date,owner_id:t?parseInt(t):1,business_id:e?.business_id||1};if(v){const Ge=Date.now();s([...r,{...ce,reminder_id:Ge,created_at:new Date().toISOString()}]),ht();return}try{if(t)ce.owner_id=parseInt(t);else{const It=Date.now();s([...r,{...ce,reminder_id:It,created_at:new Date().toISOString()}]),ht();return}const{data:Ge,error:gt}=await Oe.from("reminders").insert([{title:ce.title,body:ce.body,remind_date:ce.remind_date,owner_id:ce.owner_id}]).select().single();if(gt){const It=Date.now();s([...r,{...ce,reminder_id:It,created_at:new Date().toISOString()}]),ht();return}s([...r,{...ce,reminder_id:Ge.reminder_id,created_at:new Date().toISOString()}]),ht()}catch(Ge){console.error("Error adding reminder:",Ge);const gt=Date.now();s([...r,{...ce,reminder_id:gt,created_at:new Date().toISOString()}]),ht()}},Ie=async ce=>{if(s(r.filter(Ge=>Ge.reminder_id!==ce)),!v)try{const{error:Ge}=await Oe.from("reminders").delete().eq("reminder_id",ce);Ge&&console.error("Error deleting reminder from database:",Ge)}catch(Ge){console.error("Error deleting reminder:",Ge)}},nt=async(ce,Ge)=>{if(console.log("updateReminder called with:",{id:ce,updates:Ge,offlineMode:v}),s(r.map(gt=>gt.reminder_id===ce?{...gt,...Ge}:gt)),v){console.log("Offline mode - skipping database update");return}try{if(Ge.title||Ge.body||Ge.remind_date||Ge.resolved!==void 0){console.log("Updating database with:",{title:Ge.title,body:Ge.body,remind_date:Ge.remind_date,resolved:Ge.resolved});const{error:gt}=await Oe.from("reminders").update({title:Ge.title,body:Ge.body,remind_date:Ge.remind_date,resolved:Ge.resolved}).eq("reminder_id",ce);gt?console.error("Error updating reminder in database:",gt):console.log("Successfully updated reminder in database")}}catch(gt){console.error("Error updating reminder:",gt)}},vt=(ce,Ge)=>{ce.preventDefault();const gt=ce.currentTarget.getBoundingClientRect();f(Ge),p({x:ce.clientX-gt.left,y:ce.clientY-gt.top})},er=ce=>{if(d){const Ge=document.getElementById("sticky-container");if(Ge){const gt=Ge.getBoundingClientRect(),It=Math.max(0,Math.min(ce.clientX-gt.left-h.x,gt.width-224)),lr=Math.max(0,Math.min(ce.clientY-gt.top-h.y,gt.height-224));s(r.map(Cr=>Cr.reminder_id===d.reminder_id?{...Cr,x:It,y:lr}:Cr))}}},br=()=>{f(null),p({x:0,y:0})};j.useEffect(()=>{if(d)return document.addEventListener("mousemove",er),document.addEventListener("mouseup",br),()=>{document.removeEventListener("mousemove",er),document.removeEventListener("mouseup",br)}},[d,h]);const Pt=({reminder:ce})=>{const[Ge,gt]=j.useState(ce.title),[It,lr]=j.useState(ce.body),[Cr,wr]=j.useState(ce.remind_date),nr=j.useRef(null);j.useEffect(()=>{ce.isEditing&&nr.current&&(nr.current.focus(),nr.current.select())},[ce.isEditing]);const Rr=At=>{lr(At.target.value),At.target.style.height="auto",At.target.style.height=At.target.scrollHeight+"px"},$t=()=>{Ge.trim()&&It.trim()?nt(ce.reminder_id,{title:Ge.trim(),body:It.trim(),remind_date:Cr,isEditing:!1}):(gt(ce.title),lr(ce.body),wr(ce.remind_date),nt(ce.reminder_id,{isEditing:!1}))},or=At=>{At.key==="Enter"&&At.shiftKey||(At.key==="Enter"?(At.preventDefault(),$t()):At.key==="Escape"&&(gt(ce.title),lr(ce.body),wr(ce.remind_date),nt(ce.reminder_id,{isEditing:!1})))},se=At=>{At.key==="Enter"?(At.preventDefault(),$t()):At.key==="Escape"&&(gt(ce.title),lr(ce.body),wr(ce.remind_date),nt(ce.reminder_id,{isEditing:!1}))},Ee=z[ce.color]||z.yellow,mt=new Date,Rt=new Date(ce.remind_date),sr=Rt<mt&&Rt.toDateString()!==mt.toDateString(),at=Rt.toDateString()===mt.toDateString();return a.jsx("div",{className:`${xe.stickyNote} ${d?.reminder_id===ce.reminder_id?xe.stickyNoteDragging:""}`,style:{left:`${ce.x}px`,top:`${ce.y}px`,transform:`rotate(${ce.rotation}deg)`},children:a.jsxs("div",{className:`${xe.note} ${Ee.bg} ${sr?xe.noteOverdue:at?xe.noteDueToday:""}`,onMouseDown:At=>!ce.isEditing&&vt(At,ce),children:[a.jsx("div",{className:`${xe.noteTopStrip} ${Ee.border}`}),a.jsx("div",{className:xe.noteContent,children:ce.isEditing?a.jsxs("div",{className:xe.noteContentEditing,children:[a.jsx("input",{type:"text",value:Ge,onChange:At=>gt(At.target.value),onKeyDown:se,onBlur:$t,className:xe.noteInput,placeholder:"Reminder title..."}),a.jsx("input",{type:"date",value:Cr,onChange:At=>wr(At.target.value),onKeyDown:se,onBlur:$t,className:xe.noteDateInput}),a.jsx("textarea",{ref:nr,value:It,onChange:Rr,onBlur:$t,onKeyDown:or,className:xe.noteTextarea,style:{fontFamily:"Comic Sans MS, cursive, sans-serif",minHeight:"80px"},placeholder:"Reminder details..."})]}):a.jsxs("div",{onContextMenu:At=>{At.preventDefault(),At.stopPropagation(),console.log("Note right-clicked for reminder:",ce.reminder_id),I(ce),q({title:ce.title,body:ce.body,remind_date:ce.remind_date,color:ce.color||"yellow",resolved:ce.resolved||!1}),N(!0)},className:xe.noteDisplay,children:[a.jsx("div",{className:xe.noteTitle,children:a.jsx("span",{className:ce.resolved?xe.noteTitleResolved:"",children:ce.title})}),a.jsxs("div",{className:`${xe.noteDate} ${sr?xe.noteDateOverdue:at?xe.noteDateToday:""}`,children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(ce.remind_date).toLocaleDateString(),sr&&a.jsx("span",{style:{color:"#dc2626",marginLeft:"0.5rem",fontWeight:"700"},children:"OVERDUE"}),at&&!sr&&a.jsx("span",{style:{color:"#d97706",marginLeft:"0.5rem",fontWeight:"700"},children:"TODAY"})]}),a.jsx("div",{className:`${xe.noteBody} ${ce.resolved?xe.noteBodyResolved:""}`,style:{fontFamily:"Comic Sans MS, cursive, sans-serif"},children:ce.body})]})}),a.jsx("div",{className:xe.noteCorner,children:a.jsx("div",{className:`${xe.noteCornerEffect} ${Ee.bg}`})})]})})};return o?a.jsx("div",{className:xe.loading,children:a.jsxs("div",{className:xe.loadingContent,children:[a.jsx("i",{className:`fa-solid fa-spinner fa-spin ${xe.loadingIcon}`}),a.jsx("p",{className:xe.loadingText,children:"Loading reminders..."})]})}):a.jsxs("div",{className:xe.container,children:[a.jsx("div",{className:xe.header,children:a.jsxs("div",{className:xe.title,children:[a.jsxs("h1",{children:[a.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.75rem"}}),"Reminders"]}),a.jsx("p",{children:"Click and drag to move reminders around • Right-click to edit"})]})}),a.jsxs("div",{className:xe.mainContent,children:[a.jsxs("div",{className:xe.dateNavigation,children:[a.jsx("button",{onClick:Y,className:xe.navButton,onMouseEnter:()=>{B&&(Ae("Click this arrow to go to the previous day! This helps you navigate through your reminders day by day."),ye(!0))},onMouseLeave:()=>{B&&ye(!1)},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("div",{className:xe.currentDate,onClick:()=>J(!fe),style:{cursor:"pointer"},onMouseEnter:()=>{B&&(Ae("Click on this date to open the calendar modal! You can see all your reminders and navigate to any date quickly."),ye(!0))},onMouseLeave:()=>{B&&ye(!1)},children:P.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsx("button",{onClick:me,className:xe.navButton,onMouseEnter:()=>{B&&(Ae("Click this arrow to go to the next day! This helps you navigate through your reminders day by day."),ye(!0))},onMouseLeave:()=>{B&&ye(!1)},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),fe&&a.jsx("div",{className:xe.calendarModal,onClick:()=>J(!1),children:a.jsxs("div",{className:xe.calendar,onClick:ce=>ce.stopPropagation(),children:[a.jsxs("div",{className:xe.calendarHeader,children:[a.jsx("button",{onClick:()=>J(!1),className:xe.calendarCloseButton,children:a.jsx("i",{className:"fa-solid fa-times"})}),a.jsx("button",{onClick:()=>Me("prev"),className:xe.calendarNavButton,children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("div",{className:xe.calendarTitle,children:Q.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>Me("next"),className:xe.calendarNavButton,children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),a.jsxs("div",{className:xe.calendarGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ce=>a.jsx("div",{className:xe.calendarDayHeader,children:ce},ce)),Pe().map((ce,Ge)=>{let gt=xe.calendarDay;return ce.isCurrentMonth?ce.hasReminders&&ce.isToday?gt+=` ${xe.calendarDayWithRemindersToday}`:ce.hasReminders&&ce.isSelected?gt+=` ${xe.calendarDayWithRemindersSelected}`:ce.hasReminders?gt+=` ${xe.calendarDayWithReminders}`:ce.isToday?gt+=` ${xe.calendarDayToday}`:ce.isSelected&&(gt+=` ${xe.calendarDaySelected}`):gt+=` ${xe.calendarDayOtherMonth}`,a.jsxs("div",{className:gt,onClick:()=>He(ce.date),children:[ce.date.getDate(),ce.hasReminders&&a.jsx("div",{className:xe.calendarReminderCount,children:ce.reminderCount})]},Ge)})]})]})}),v&&a.jsx("div",{className:xe.offlineNotice,children:a.jsxs("div",{className:xe.offlineNoticeContent,children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),a.jsxs("div",{children:[a.jsx("strong",{children:"Offline Mode:"})," The reminders table doesn't exist in your database yet. Reminders will work locally but won't be saved permanently.",a.jsx("a",{href:"#",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),style:{textDecoration:"underline",marginLeft:"0.25rem"},children:"Create the table in Supabase"})]})]})}),a.jsxs("div",{className:xe.controls,children:[a.jsxs("button",{onClick:Re,className:`${xe.button} ${xe.buttonPrimary}`,onMouseEnter:()=>{B&&(Ae("Click this button to add a new reminder! You can set the title, content, date, and color for your reminder."),ye(!0))},onMouseLeave:()=>{B&&ye(!1)},children:[a.jsx("i",{className:"fa-solid fa-plus-circle"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Add Reminder"})]}),a.jsxs("button",{onClick:()=>{const ce=document.getElementById("sticky-container");if(ce){const Ge=ce.getBoundingClientRect();s(r.map(gt=>({...gt,x:Math.random()*(Ge.width-224)+20,y:Math.random()*(Ge.height-224)+20,rotation:(Math.random()-.5)*6})))}},className:`${xe.button} ${xe.buttonSecondary}`,onMouseEnter:()=>{B&&(Ae("Click this button to shuffle all your reminders around! This gives them new random positions on the board."),ye(!0))},onMouseLeave:()=>{B&&ye(!1)},children:[a.jsx("i",{className:"fa-solid fa-random"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Shuffle"})]}),a.jsxs("button",{onClick:()=>L(!E),className:`${xe.button} ${E?xe.buttonPrimary:xe.buttonSecondary}`,onMouseEnter:()=>{B&&(Ae(E?"Click to hide completed reminders and focus on what's still pending!":"Click to show all reminders including completed ones!"),ye(!0))},onMouseLeave:()=>{B&&ye(!1)},children:[a.jsx("i",{className:`fa-solid ${E?"fa-eye":"fa-eye-slash"}`}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:E?"Show All":"Hide Completed"})]}),r.length>0&&a.jsxs("button",{onClick:()=>X(!0),className:`${xe.button} ${xe.buttonDanger}`,onMouseEnter:()=>{B&&(Ae("Click this button to remove all reminders at once! Be careful - this action cannot be undone."),ye(!0))},onMouseLeave:()=>{B&&ye(!1)},children:[a.jsx("i",{className:"fa-solid fa-trash-can"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Clear All"})]})]}),a.jsxs("div",{id:"sticky-container",className:xe.notesContainer,style:{minHeight:"600px"},children:[a.jsx("div",{className:xe.gridBackground,children:a.jsx("div",{className:xe.gridPattern})}),V().map(ce=>a.jsx(Pt,{reminder:ce},ce.reminder_id)),V().length===0&&a.jsx("div",{className:xe.emptyState,children:a.jsxs("div",{className:xe.emptyStateContent,children:[a.jsx("div",{className:xe.emptyStateIcon,children:a.jsx("i",{className:"fa-solid fa-sticky-note"})}),a.jsx("h3",{className:xe.emptyStateTitle,children:"No reminders for this date"}),a.jsxs("p",{children:['Click "Add Reminder" to create your first reminder for ',P.toLocaleDateString()]})]})}),d&&a.jsxs("div",{className:xe.dragIndicator,children:[a.jsx("i",{className:"fa-solid fa-arrows-up-down-left-right",style:{marginRight:"0.25rem"}}),"Dragging reminder..."]})]}),a.jsx("div",{className:xe.footer,children:a.jsxs("p",{children:[a.jsx("i",{className:"fa-solid fa-lightbulb",style:{marginRight:"0.25rem"}}),"Tips: Shift+Enter for new lines • Escape to cancel editing • Right-click to edit • Drag reminders around freely"]})}),w&&a.jsx("div",{className:xe.modalOverlay,children:a.jsx("div",{className:xe.modal,children:a.jsxs("div",{className:xe.modalHeader,children:[a.jsxs("div",{className:xe.modalTitle,children:[a.jsxs("h2",{children:[a.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Create New Reminder"]}),a.jsx("button",{onClick:ht,className:xe.modalClose,children:a.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),a.jsxs("form",{onSubmit:ce=>{ce.preventDefault(),bt()},className:xe.modalForm,children:[x&&a.jsx("div",{className:xe.errorMessage,children:a.jsxs("div",{className:xe.errorContent,children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),a.jsx("span",{style:{fontSize:"0.875rem"},children:x})]})}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"title",className:xe.formLabel,children:"Title *"}),a.jsx("input",{type:"text",id:"title",value:G.title,onChange:ce=>Z({...G,title:ce.target.value}),className:xe.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"remind_date",className:xe.formLabel,children:"Remind Date *"}),a.jsx("input",{type:"date",id:"remind_date",value:G.remind_date,onChange:ce=>Z({...G,remind_date:ce.target.value}),className:xe.formInput,required:!0})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{className:xe.formLabel,children:"Color"}),a.jsx("div",{className:xe.colorSelection,children:Object.entries(z).map(([ce,Ge])=>a.jsx("button",{type:"button",onClick:()=>Z({...G,color:ce}),className:`${xe.colorOption} ${Ge.bg} ${G.color===ce?xe.colorOptionSelected:""}`,title:ce},ce))})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"body",className:xe.formLabel,children:"Details *"}),a.jsx("textarea",{id:"body",value:G.body,onChange:ce=>Z({...G,body:ce.target.value}),className:xe.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),G.title&&G.body&&a.jsxs("div",{className:xe.preview,children:[a.jsx("label",{className:xe.previewLabel,children:"Preview"}),a.jsxs("div",{className:`${xe.previewNote} ${z[G.color]?.bg} ${z[G.color]?.border}`,children:[a.jsx("div",{className:xe.previewTitle,children:G.title}),a.jsxs("div",{className:xe.previewDate,children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(G.remind_date).toLocaleDateString()]}),a.jsx("div",{className:xe.previewBody,children:G.body})]})]}),a.jsxs("div",{className:xe.modalActions,children:[a.jsx("button",{type:"button",onClick:ht,className:`${xe.modalButton} ${xe.modalButtonCancel}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${xe.modalButton} ${xe.modalButtonSubmit}`,children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Create Reminder"]})]})]})]})})}),S&&R&&a.jsx("div",{className:xe.modalOverlay,children:a.jsx("div",{className:xe.modal,children:a.jsxs("div",{className:xe.modalHeader,children:[a.jsxs("div",{className:xe.modalTitle,children:[a.jsxs("h2",{children:[a.jsx("i",{className:"fa-solid fa-edit",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Edit Reminder"]}),a.jsx("button",{onClick:xt,className:xe.modalClose,children:a.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),a.jsxs("form",{onSubmit:ce=>{ce.preventDefault(),Dt()},className:xe.modalForm,children:[x&&a.jsx("div",{className:xe.errorMessage,children:a.jsxs("div",{className:xe.errorContent,children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),a.jsx("span",{style:{fontSize:"0.875rem"},children:x})]})}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"edit-title",className:xe.formLabel,children:"Title *"}),a.jsx("input",{type:"text",id:"edit-title",value:ie.title,onChange:ce=>q({...ie,title:ce.target.value}),className:xe.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"edit-remind_date",className:xe.formLabel,children:"Remind Date *"}),a.jsx("input",{type:"date",id:"edit-remind_date",value:ie.remind_date,onChange:ce=>q({...ie,remind_date:ce.target.value}),className:xe.formInput,required:!0})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{className:xe.formLabel,children:"Color"}),a.jsx("div",{className:xe.colorSelection,children:Object.entries(z).map(([ce,Ge])=>a.jsx("button",{type:"button",onClick:()=>q({...ie,color:ce}),className:`${xe.colorOption} ${Ge.bg} ${ie.color===ce?xe.colorOptionSelected:""}`,title:ce},ce))})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{className:xe.formLabel,children:"Status"}),a.jsxs("div",{className:xe.checkboxContainer,children:[a.jsx("input",{type:"checkbox",id:"edit-resolved",checked:ie.resolved,onChange:ce=>q({...ie,resolved:ce.target.checked}),className:xe.formCheckbox}),a.jsxs("label",{htmlFor:"edit-resolved",className:xe.checkboxLabel,children:[a.jsx("i",{className:`fa-solid ${ie.resolved?"fa-check-square":"fa-square"}`,style:{marginRight:"0.5rem"}}),"Mark as completed/resolved"]})]})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"edit-body",className:xe.formLabel,children:"Details *"}),a.jsx("textarea",{id:"edit-body",value:ie.body,onChange:ce=>q({...ie,body:ce.target.value}),className:xe.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),ie.title&&ie.body&&a.jsxs("div",{className:xe.preview,children:[a.jsx("label",{className:xe.previewLabel,children:"Preview"}),a.jsxs("div",{className:`${xe.previewNote} ${z[ie.color]?.bg} ${z[ie.color]?.border}`,children:[a.jsx("div",{className:xe.previewTitle,children:ie.title}),a.jsxs("div",{className:xe.previewDate,children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(ie.remind_date).toLocaleDateString()]}),a.jsx("div",{className:xe.previewBody,children:ie.body})]})]}),a.jsxs("div",{className:xe.modalActions,children:[a.jsxs("button",{type:"button",onClick:()=>{Ie(R.reminder_id),xt()},className:`${xe.modalButton} ${xe.modalButtonDanger}`,children:[a.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),a.jsx("button",{type:"button",onClick:xt,className:`${xe.modalButton} ${xe.modalButtonCancel}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${xe.modalButton} ${xe.modalButtonSubmit}`,children:[a.jsx("i",{className:"fa-solid fa-save"}),"Update Reminder"]})]})]})]})})}),ue&&a.jsx("div",{className:xe.confirmationDialog,children:a.jsxs("div",{className:xe.confirmationContent,children:[a.jsxs("div",{className:xe.confirmationHeader,children:[a.jsx("div",{className:xe.confirmationIcon,children:a.jsx("i",{className:"fa-solid fa-exclamation-triangle"})}),a.jsx("h3",{children:"Remove All Reminders"})]}),a.jsx("p",{children:"Are you sure you want to remove all reminders? This action cannot be undone."}),a.jsxs("div",{className:xe.confirmationButtons,children:[a.jsxs("button",{onClick:()=>X(!1),className:`${xe.confirmationButton} ${xe.confirmationButtonCancel}`,children:[a.jsx("i",{className:"fa-solid fa-times",style:{marginRight:"0.5rem"}}),"Cancel"]}),a.jsxs("button",{onClick:Ne,className:`${xe.confirmationButton} ${xe.confirmationButtonConfirm}`,children:[a.jsx("i",{className:"fa-solid fa-trash",style:{marginRight:"0.5rem"}}),"Remove All"]})]})]})})]}),a.jsx(rt,{})]})}const A7=()=>{const{isCollapsed:e}=O0();return j3(),a.jsxs("div",{style:{height:"100vh",background:"#f8f9fa",color:"#1a1a1a",display:"flex",overflow:"hidden",backgroundImage:"url(/retailpos/images/backgrounds/u2541828551_An_elegant_illustration_of_a_small_African_corner_5e875dd7-e5d8-4655-af92-bb5c9c2865fd_1.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.05)",zIndex:0}}),a.jsx(Tj,{}),a.jsx("main",{style:{flex:1,marginLeft:e?"70px":"200px",padding:"24px",height:"100vh",overflow:"auto",transition:"margin-left 0.3s ease",position:"relative",zIndex:1},children:a.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative",zIndex:1},children:a.jsxs(jy,{children:[a.jsx(vn,{path:"/dashboard",element:a.jsx(Yk,{})}),a.jsx(vn,{path:"/products",element:a.jsx(Td,{children:a.jsx(Xk,{})})}),a.jsx(vn,{path:"/sales",element:a.jsx(Td,{requiredPermission:"canProcessSales",children:a.jsx(tC,{})})}),a.jsx(vn,{path:"/side-businesses",element:a.jsx(Td,{children:a.jsx(T6,{})})}),a.jsx(vn,{path:"/transactions",element:a.jsx(Td,{children:a.jsx(R6,{})})}),a.jsx(vn,{path:"/admin",element:a.jsx(TB,{})}),a.jsx(vn,{path:"/reminders",element:a.jsx(C7,{})}),a.jsx(vn,{path:"/transaction/:transactionId",element:a.jsx(D6,{})})]})})})]})},N7=new Zw({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:1}}});function R7(){return a.jsx(e4,{client:N7,children:a.jsx(y3,{children:a.jsx(b3,{children:a.jsx(S3,{children:a.jsx(_3,{children:a.jsx(T3,{children:a.jsx(_w,{basename:"/retailpos",children:a.jsxs(jy,{children:[a.jsx(vn,{path:"/",element:a.jsx(T1,{})}),a.jsx(vn,{path:"/landing",element:a.jsx(T1,{})}),a.jsx(vn,{path:"/login",element:a.jsx(dv,{})}),a.jsx(vn,{path:"/signup",element:a.jsx(Ak,{})}),a.jsx(vn,{path:"/verify-email",element:a.jsx(Nk,{})}),a.jsx(vn,{path:"/staff-login",element:a.jsx(jB,{})}),a.jsx(vn,{path:"/*",element:a.jsx(wj,{children:a.jsx(A7,{})})})]})})})})})})})})}oS.createRoot(document.getElementById("root")).render(a.jsx(gy.StrictMode,{children:a.jsx(R7,{})}));
