(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var a=!1;try{a=this instanceof n}catch{}return a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:n,key:c,ref:a!==void 0?a:null,props:l}}return reactJsxRuntime_production.Fragment=t,reactJsxRuntime_production.jsx=r,reactJsxRuntime_production.jsxs=r,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=g&&T[g]||T["@@iterator"],typeof T=="function"?T:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,b={};function v(T,J,B){this.props=T,this.context=J,this.refs=b,this.updater=B||_}v.prototype.isReactComponent={},v.prototype.setState=function(T,J){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,J,"setState")},v.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function R(){}R.prototype=v.prototype;function A(T,J,B){this.props=T,this.context=J,this.refs=b,this.updater=B||_}var C=A.prototype=new R;C.constructor=A,E(C,v.prototype),C.isPureReactComponent=!0;var L=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},ae=Object.prototype.hasOwnProperty;function D(T,J,B,j,M,U){return B=U.ref,{$$typeof:e,type:T,key:J,ref:B!==void 0?B:null,props:U}}function ee(T,J){return D(T.type,J,void 0,void 0,void 0,T.props)}function Y(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function le(T){var J={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(B){return J[B]})}var te=/\/+/g;function oe(T,J){return typeof T=="object"&&T!==null&&T.key!=null?le(""+T.key):J.toString(36)}function Be(){}function Pe(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Be,Be):(T.status="pending",T.then(function(J){T.status==="pending"&&(T.status="fulfilled",T.value=J)},function(J){T.status==="pending"&&(T.status="rejected",T.reason=J)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function De(T,J,B,j,M){var U=typeof T;(U==="undefined"||U==="boolean")&&(T=null);var K=!1;if(T===null)K=!0;else switch(U){case"bigint":case"string":case"number":K=!0;break;case"object":switch(T.$$typeof){case e:case t:K=!0;break;case h:return K=T._init,De(K(T._payload),J,B,j,M)}}if(K)return M=M(T),K=j===""?"."+oe(T,0):j,L(M)?(B="",K!=null&&(B=K.replace(te,"$&/")+"/"),De(M,J,B,"",function(Ae){return Ae})):M!=null&&(Y(M)&&(M=ee(M,B+(M.key==null||T&&T.key===M.key?"":(""+M.key).replace(te,"$&/")+"/")+K)),J.push(M)),1;K=0;var Le=j===""?".":j+":";if(L(T))for(var ve=0;ve<T.length;ve++)j=T[ve],U=Le+oe(j,ve),K+=De(j,J,B,U,M);else if(ve=y(T),typeof ve=="function")for(T=ve.call(T),ve=0;!(j=T.next()).done;)j=j.value,U=Le+oe(j,ve++),K+=De(j,J,B,U,M);else if(U==="object"){if(typeof T.then=="function")return De(Pe(T),J,B,j,M);throw J=String(T),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return K}function X(T,J,B){if(T==null)return T;var j=[],M=0;return De(T,j,"","",function(U){return J.call(B,U,M++)}),j}function Se(T){if(T._status===-1){var J=T._result;J=J(),J.then(function(B){(T._status===0||T._status===-1)&&(T._status=1,T._result=B)},function(B){(T._status===0||T._status===-1)&&(T._status=2,T._result=B)}),T._status===-1&&(T._status=0,T._result=J)}if(T._status===1)return T._result.default;throw T._result}var z=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function re(){}return react_production.Children={map:X,forEach:function(T,J,B){X(T,function(){J.apply(this,arguments)},B)},count:function(T){var J=0;return X(T,function(){J++}),J},toArray:function(T){return X(T,function(J){return J})||[]},only:function(T){if(!Y(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},react_production.Component=v,react_production.Fragment=r,react_production.Profiler=a,react_production.PureComponent=A,react_production.StrictMode=n,react_production.Suspense=x,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(T){return I.H.useMemoCache(T)}},react_production.cache=function(T){return function(){return T.apply(null,arguments)}},react_production.cloneElement=function(T,J,B){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var j=E({},T.props),M=T.key,U=void 0;if(J!=null)for(K in J.ref!==void 0&&(U=void 0),J.key!==void 0&&(M=""+J.key),J)!ae.call(J,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&J.ref===void 0||(j[K]=J[K]);var K=arguments.length-2;if(K===1)j.children=B;else if(1<K){for(var Le=Array(K),ve=0;ve<K;ve++)Le[ve]=arguments[ve+2];j.children=Le}return D(T.type,M,void 0,void 0,U,j)},react_production.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:l,_context:T},T},react_production.createElement=function(T,J,B){var j,M={},U=null;if(J!=null)for(j in J.key!==void 0&&(U=""+J.key),J)ae.call(J,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(M[j]=J[j]);var K=arguments.length-2;if(K===1)M.children=B;else if(1<K){for(var Le=Array(K),ve=0;ve<K;ve++)Le[ve]=arguments[ve+2];M.children=Le}if(T&&T.defaultProps)for(j in K=T.defaultProps,K)M[j]===void 0&&(M[j]=K[j]);return D(T,U,void 0,void 0,null,M)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(T){return{$$typeof:d,render:T}},react_production.isValidElement=Y,react_production.lazy=function(T){return{$$typeof:h,_payload:{_status:-1,_result:T},_init:Se}},react_production.memo=function(T,J){return{$$typeof:f,type:T,compare:J===void 0?null:J}},react_production.startTransition=function(T){var J=I.T,B={};I.T=B;try{var j=T(),M=I.S;M!==null&&M(B,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(re,z)}catch(U){z(U)}finally{I.T=J}},react_production.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},react_production.use=function(T){return I.H.use(T)},react_production.useActionState=function(T,J,B){return I.H.useActionState(T,J,B)},react_production.useCallback=function(T,J){return I.H.useCallback(T,J)},react_production.useContext=function(T){return I.H.useContext(T)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(T,J){return I.H.useDeferredValue(T,J)},react_production.useEffect=function(T,J,B){var j=I.H;if(typeof B=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return j.useEffect(T,J)},react_production.useId=function(){return I.H.useId()},react_production.useImperativeHandle=function(T,J,B){return I.H.useImperativeHandle(T,J,B)},react_production.useInsertionEffect=function(T,J){return I.H.useInsertionEffect(T,J)},react_production.useLayoutEffect=function(T,J){return I.H.useLayoutEffect(T,J)},react_production.useMemo=function(T,J){return I.H.useMemo(T,J)},react_production.useOptimistic=function(T,J){return I.H.useOptimistic(T,J)},react_production.useReducer=function(T,J,B){return I.H.useReducer(T,J,B)},react_production.useRef=function(T){return I.H.useRef(T)},react_production.useState=function(T){return I.H.useState(T)},react_production.useSyncExternalStore=function(T,J,B){return I.H.useSyncExternalStore(T,J,B)},react_production.useTransition=function(){return I.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(e){function t(X,Se){var z=X.length;X.push(Se);e:for(;0<z;){var re=z-1>>>1,T=X[re];if(0<a(T,Se))X[re]=Se,X[z]=T,z=re;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var Se=X[0],z=X.pop();if(z!==Se){X[0]=z;e:for(var re=0,T=X.length,J=T>>>1;re<J;){var B=2*(re+1)-1,j=X[B],M=B+1,U=X[M];if(0>a(j,z))M<T&&0>a(U,j)?(X[re]=U,X[M]=z,re=M):(X[re]=j,X[B]=z,re=B);else if(M<T&&0>a(U,z))X[re]=U,X[M]=z,re=M;else break e}}return Se}function a(X,Se){var z=X.sortIndex-Se.sortIndex;return z!==0?z:X.id-Se.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var x=[],f=[],h=1,g=null,y=3,_=!1,E=!1,b=!1,v=!1,R=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function L(X){for(var Se=r(f);Se!==null;){if(Se.callback===null)n(f);else if(Se.startTime<=X)n(f),Se.sortIndex=Se.expirationTime,t(x,Se);else break;Se=r(f)}}function I(X){if(b=!1,L(X),!E)if(r(x)!==null)E=!0,ae||(ae=!0,oe());else{var Se=r(f);Se!==null&&De(I,Se.startTime-X)}}var ae=!1,D=-1,ee=5,Y=-1;function le(){return v?!0:!(e.unstable_now()-Y<ee)}function te(){if(v=!1,ae){var X=e.unstable_now();Y=X;var Se=!0;try{e:{E=!1,b&&(b=!1,A(D),D=-1),_=!0;var z=y;try{t:{for(L(X),g=r(x);g!==null&&!(g.expirationTime>X&&le());){var re=g.callback;if(typeof re=="function"){g.callback=null,y=g.priorityLevel;var T=re(g.expirationTime<=X);if(X=e.unstable_now(),typeof T=="function"){g.callback=T,L(X),Se=!0;break t}g===r(x)&&n(x),L(X)}else n(x);g=r(x)}if(g!==null)Se=!0;else{var J=r(f);J!==null&&De(I,J.startTime-X),Se=!1}}break e}finally{g=null,y=z,_=!1}Se=void 0}}finally{Se?oe():ae=!1}}}var oe;if(typeof C=="function")oe=function(){C(te)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,Pe=Be.port2;Be.port1.onmessage=te,oe=function(){Pe.postMessage(null)}}else oe=function(){R(te,0)};function De(X,Se){D=R(function(){X(e.unstable_now())},Se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(X){switch(y){case 1:case 2:case 3:var Se=3;break;default:Se=y}var z=y;y=Se;try{return X()}finally{y=z}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(X,Se){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var z=y;y=X;try{return Se()}finally{y=z}},e.unstable_scheduleCallback=function(X,Se,z){var re=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?re+z:re):z=re,X){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=z+T,X={id:h++,callback:Se,priorityLevel:X,startTime:z,expirationTime:T,sortIndex:-1},z>re?(X.sortIndex=z,t(f,X),r(x)===null&&X===r(f)&&(b?(A(D),D=-1):b=!0,De(I,z-re))):(X.sortIndex=T,t(x,X),E||_||(E=!0,ae||(ae=!0,oe()))),X},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(X){var Se=y;return function(){var z=y;y=Se;try{return X.apply(this,arguments)}finally{y=z}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var e=requireReact();function t(x){var f="https://react.dev/errors/"+x;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+x+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(x,f,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:x,containerInfo:f,implementation:h}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(x,f){if(x==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,reactDom_production.createPortal=function(x,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(x,f,null,h)},reactDom_production.flushSync=function(x){var f=c.T,h=n.p;try{if(c.T=null,n.p=2,x)return x()}finally{c.T=f,n.p=h,n.d.f()}},reactDom_production.preconnect=function(x,f){typeof x=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(x,f))},reactDom_production.prefetchDNS=function(x){typeof x=="string"&&n.d.D(x)},reactDom_production.preinit=function(x,f){if(typeof x=="string"&&f&&typeof f.as=="string"){var h=f.as,g=d(h,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?n.d.S(x,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:_}):h==="script"&&n.d.X(x,{crossOrigin:g,integrity:y,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},reactDom_production.preinitModule=function(x,f){if(typeof x=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=d(f.as,f.crossOrigin);n.d.M(x,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(x)},reactDom_production.preload=function(x,f){if(typeof x=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,g=d(h,f.crossOrigin);n.d.L(x,h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},reactDom_production.preloadModule=function(x,f){if(typeof x=="string")if(f){var h=d(f.as,f.crossOrigin);n.d.m(x,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(x)},reactDom_production.requestFormReset=function(x){n.d.r(x)},reactDom_production.unstable_batchedUpdates=function(x,f){return x(f)},reactDom_production.useFormState=function(x,f,h){return c.H.useFormState(x,f,h)},reactDom_production.useFormStatus=function(){return c.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var e=requireScheduler(),t=requireReact(),r=requireReactDom();function n(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function d(s){if(l(s)!==s)throw Error(n(188))}function x(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(n(188));return i!==s?null:s}for(var o=s,u=i;;){var p=o.return;if(p===null)break;var m=p.alternate;if(m===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===o)return d(p),s;if(m===u)return d(p),i;m=m.sibling}throw Error(n(188))}if(o.return!==u.return)o=p,u=m;else{for(var w=!1,O=p.child;O;){if(O===o){w=!0,o=p,u=m;break}if(O===u){w=!0,u=p,o=m;break}O=O.sibling}if(!w){for(O=m.child;O;){if(O===o){w=!0,o=m,u=p;break}if(O===u){w=!0,u=m,o=p;break}O=O.sibling}if(!w)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?s:i}function f(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=f(s),i!==null)return i;s=s.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),C=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function oe(s){return s===null||typeof s!="object"?null:(s=te&&s[te]||s["@@iterator"],typeof s=="function"?s:null)}var Be=Symbol.for("react.client.reference");function Pe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Be?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case v:return"Profiler";case b:return"StrictMode";case I:return"Suspense";case ae:return"SuspenseList";case Y:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case C:return(s.displayName||"Context")+".Provider";case A:return(s._context.displayName||"Context")+".Consumer";case L:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return i=s.displayName||null,i!==null?i:Pe(s.type)||"Memo";case ee:i=s._payload,s=s._init;try{return Pe(s(i))}catch{}}return null}var De=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},re=[],T=-1;function J(s){return{current:s}}function B(s){0>T||(s.current=re[T],re[T]=null,T--)}function j(s,i){T++,re[T]=s.current,s.current=i}var M=J(null),U=J(null),K=J(null),Le=J(null);function ve(s,i){switch(j(K,i),j(U,s),j(M,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?Bd(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=Bd(i),s=Id(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}B(M),j(M,s)}function Ae(){B(M),B(U),B(K)}function ye(s){s.memoizedState!==null&&j(Le,s);var i=M.current,o=Id(i,s.type);i!==o&&(j(U,s),j(M,o))}function V(s){U.current===s&&(B(M),B(U)),Le.current===s&&(B(Le),Di._currentValue=z)}var be=Object.prototype.hasOwnProperty,Ne=e.unstable_scheduleCallback,H=e.unstable_cancelCallback,Te=e.unstable_shouldYield,se=e.unstable_requestPaint,Ce=e.unstable_now,pt=e.unstable_getCurrentPriorityLevel,pe=e.unstable_ImmediatePriority,ze=e.unstable_UserBlockingPriority,Ye=e.unstable_NormalPriority,lt=e.unstable_LowPriority,Ke=e.unstable_IdlePriority,nt=e.log,mt=e.unstable_setDisableYieldValue,it=null,Je=null;function bt(s){if(typeof nt=="function"&&mt(s),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(it,s)}catch{}}var ne=Math.clz32?Math.clz32:gt,Ue=Math.log,Qe=Math.LN2;function gt(s){return s>>>=0,s===0?32:31-(Ue(s)/Qe|0)|0}var Nt=256,It=4194304;function Ot(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Wt(s,i,o){var u=s.pendingLanes;if(u===0)return 0;var p=0,m=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var O=u&134217727;return O!==0?(u=O&~m,u!==0?p=Ot(u):(w&=O,w!==0?p=Ot(w):o||(o=O&~s,o!==0&&(p=Ot(o))))):(O=u&~m,O!==0?p=Ot(O):w!==0?p=Ot(w):o||(o=u&~s,o!==0&&(p=Ot(o)))),p===0?0:i!==0&&i!==p&&(i&m)===0&&(m=p&-p,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:p}function Fe(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function tt(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ut(){var s=Nt;return Nt<<=1,(Nt&4194048)===0&&(Nt=256),s}function Q(){var s=It;return It<<=1,(It&62914560)===0&&(It=4194304),s}function ge(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function rt(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function xt(s,i,o,u,p,m){var w=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var O=s.entanglements,Z=s.expirationTimes,me=s.hiddenUpdates;for(o=w&~o;0<o;){var Ie=31-ne(o),Me=1<<Ie;O[Ie]=0,Z[Ie]=-1;var je=me[Ie];if(je!==null)for(me[Ie]=null,Ie=0;Ie<je.length;Ie++){var we=je[Ie];we!==null&&(we.lane&=-536870913)}o&=~Me}u!==0&&Mt(s,u,0),m!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=m&~(w&~i))}function Mt(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-ne(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&4194090}function Dt(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-ne(o),p=1<<u;p&i|s[u]&i&&(s[u]|=i),o&=~p}}function ht(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function yr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Br(){var s=Se.p;return s!==0?s:(s=window.event,s===void 0?32:Zd(s.type))}function vt(s,i){var o=Se.p;try{return Se.p=s,i()}finally{Se.p=o}}var Rr=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Rr,Ct="__reactProps$"+Rr,Ut="__reactContainer$"+Rr,Yr="__reactEvents$"+Rr,_r="__reactListeners$"+Rr,N="__reactHandles$"+Rr,W="__reactResources$"+Rr,F="__reactMarker$"+Rr;function P(s){delete s[Gt],delete s[Ct],delete s[Yr],delete s[_r],delete s[N]}function q(s){var i=s[Gt];if(i)return i;for(var o=s.parentNode;o;){if(i=o[Ut]||o[Gt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=Fd(s);s!==null;){if(o=s[Gt])return o;s=Fd(s)}return i}s=o,o=s.parentNode}return null}function G(s){if(s=s[Gt]||s[Ut]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function he(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(n(33))}function ke(s){var i=s[W];return i||(i=s[W]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ue(s){s[F]=!0}var _e=new Set,Ee={};function $e(s,i){Ve(s,i),Ve(s+"Capture",i)}function Ve(s,i){for(Ee[s]=i,s=0;s<i.length;s++)_e.add(i[s])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qe={},Ze={};function Et(s){return be.call(Ze,s)?!0:be.call(qe,s)?!1:st.test(s)?Ze[s]=!0:(qe[s]=!0,!1)}function Vt(s,i,o){if(Et(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function qt(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function Yt(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}var Lr,$r;function k(s){if(Lr===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Lr=i&&i[1]||"",$r=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lr+s+$r}var ce=!1;function Re(s,i){if(!s||ce)return"";ce=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(we){var je=we}Reflect.construct(s,[],Me)}else{try{Me.call()}catch(we){je=we}s.call(Me.prototype)}}else{try{throw Error()}catch(we){je=we}(Me=s())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(we){if(we&&je&&typeof we.stack=="string")return[we.stack,je.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),w=m[0],O=m[1];if(w&&O){var Z=w.split(`
`),me=O.split(`
`);for(p=u=0;u<Z.length&&!Z[u].includes("DetermineComponentFrameRoot");)u++;for(;p<me.length&&!me[p].includes("DetermineComponentFrameRoot");)p++;if(u===Z.length||p===me.length)for(u=Z.length-1,p=me.length-1;1<=u&&0<=p&&Z[u]!==me[p];)p--;for(;1<=u&&0<=p;u--,p--)if(Z[u]!==me[p]){if(u!==1||p!==1)do if(u--,p--,0>p||Z[u]!==me[p]){var Ie=`
`+Z[u].replace(" at new "," at ");return s.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",s.displayName)),Ie}while(1<=u&&0<=p);break}}}finally{ce=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?k(o):""}function et(s){switch(s.tag){case 26:case 27:case 5:return k(s.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 15:return Re(s.type,!1);case 11:return Re(s.type.render,!1);case 1:return Re(s.type,!0);case 31:return k("Activity");default:return""}}function wt(s){try{var i="";do i+=et(s),s=s.return;while(s);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function at(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ot(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Rt(s){var i=ot(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),u=""+s[i];if(!s.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,m=o.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return p.call(this)},set:function(w){u=""+w,m.call(this,w)}}),Object.defineProperty(s,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function _t(s){s._valueTracker||(s._valueTracker=Rt(s))}function kt(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=ot(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function ur(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var or=/[\n"\\]/g;function nr(s){return s.replace(or,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ir(s,i,o,u,p,m,w,O){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),i!=null?w==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+at(i)):s.value!==""+at(i)&&(s.value=""+at(i)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),i!=null?Ks(s,w,at(i)):o!=null?Ks(s,w,at(o)):u!=null&&s.removeAttribute("value"),p==null&&m!=null&&(s.defaultChecked=!!m),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.name=""+at(O):s.removeAttribute("name")}function dr(s,i,o,u,p,m,w,O){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(s.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;o=o!=null?""+at(o):"",i=i!=null?""+at(i):o,O||i===s.value||(s.value=i),s.defaultValue=i}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=O?s.checked:!!u,s.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w)}function Ks(s,i,o){i==="number"&&ur(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function Kr(s,i,o,u){if(s=s.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<s.length;o++)p=i.hasOwnProperty("$"+s[o].value),s[o].selected!==p&&(s[o].selected=p),p&&u&&(s[o].defaultSelected=!0)}else{for(o=""+at(o),i=null,p=0;p<s.length;p++){if(s[p].value===o){s[p].selected=!0,u&&(s[p].defaultSelected=!0);return}i!==null||s[p].disabled||(i=s[p])}i!==null&&(i.selected=!0)}}function Qs(s,i,o){if(i!=null&&(i=""+at(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+at(o):""}function Qt(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(n(92));if(De(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=at(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u)}function Er(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var S=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fe(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||S.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function Ge(s,i,o){if(i!=null&&typeof i!="object")throw Error(n(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var p in i)u=i[p],i.hasOwnProperty(p)&&o[p]!==u&&fe(s,p,u)}else for(var m in i)i.hasOwnProperty(m)&&fe(s,m,i[m])}function We(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ct=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function He(s){return ct.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var dt=null;function Bt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var At=null,lr=null;function Pt(s){var i=G(s);if(i&&(s=i.stateNode)){var o=s[Ct]||null;e:switch(s=i.stateNode,i.type){case"input":if(ir(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+nr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var p=u[Ct]||null;if(!p)throw Error(n(90));ir(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&kt(u)}break e;case"textarea":Qs(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Kr(s,!!o.multiple,i,!1)}}}var fr=!1;function jr(s,i,o){if(fr)return s(i,o);fr=!0;try{var u=s(i);return u}finally{if(fr=!1,(At!==null||lr!==null)&&(ba(),At&&(i=At,s=lr,lr=At=null,Pt(i),s)))for(i=0;i<s.length;i++)Pt(s[i])}}function Ts(s,i){var o=s.stateNode;if(o===null)return null;var u=o[Ct]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(n(231,i,typeof o));return o}var Qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Js=!1;if(Qr)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){Js=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{Js=!1}var ls=null,Hn=null,Gn=null;function Ml(){if(Gn)return Gn;var s,i=Hn,o=i.length,u,p="value"in ls?ls.value:ls.textContent,m=p.length;for(s=0;s<o&&i[s]===p[s];s++);var w=o-s;for(u=1;u<=w&&i[o-u]===p[m-u];u++);return Gn=p.slice(s,1<u?1-u:void 0)}function Mi(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Fi(){return!0}function Fl(){return!1}function Mr(s){function i(o,u,p,m,w){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(o=s[O],this[O]=o?o(m):m[O]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Fi:Fl,this.isPropagationStopped=Fl,this}return h(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),i}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=Mr(Zs),Vn=h({},Zs,{view:0,detail:0}),af=Mr(Vn),$a,Ua,Xn,zi=h({},Vn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Xn&&(Xn&&s.type==="mousemove"?($a=s.screenX-Xn.screenX,Ua=s.screenY-Xn.screenY):Ua=$a=0,Xn=s),$a)},movementY:function(s){return"movementY"in s?s.movementY:Ua}}),Pl=Mr(zi),of=h({},zi,{dataTransfer:0}),lf=Mr(of),cf=h({},Vn,{relatedTarget:0}),Wa=Mr(cf),uf=h({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),df=Mr(uf),ff=h({},Zs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),xf=Mr(ff),pf=h({},Zs,{data:0}),zl=Mr(pf),hf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yf(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=gf[s])?!!i[s]:!1}function qa(){return yf}var _f=h({},Vn,{key:function(s){if(s.key){var i=hf[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Mi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?mf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(s){return s.type==="keypress"?Mi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Mi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),bf=Mr(_f),vf=h({},zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$l=Mr(vf),Ef=h({},Vn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),jf=Mr(Ef),Sf=h({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),wf=Mr(Sf),Rf=h({},zi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Tf=Mr(Rf),Cf=h({},Zs,{newState:0,oldState:0}),kf=Mr(Cf),Af=[9,13,27,32],Ha=Qr&&"CompositionEvent"in window,Yn=null;Qr&&"documentMode"in document&&(Yn=document.documentMode);var Nf=Qr&&"TextEvent"in window&&!Yn,Ul=Qr&&(!Ha||Yn&&8<Yn&&11>=Yn),Wl=" ",ql=!1;function Hl(s,i){switch(s){case"keyup":return Af.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var mn=!1;function Df(s,i){switch(s){case"compositionend":return Gl(i);case"keypress":return i.which!==32?null:(ql=!0,Wl);case"textInput":return s=i.data,s===Wl&&ql?null:s;default:return null}}function Bf(s,i){if(mn)return s==="compositionend"||!Ha&&Hl(s,i)?(s=Ml(),Gn=Hn=ls=null,mn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ul&&i.locale!=="ko"?null:i.data;default:return null}}var If={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vl(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!If[s.type]:i==="textarea"}function Xl(s,i,o,u){At?lr?lr.push(u):lr=[u]:At=u,i=Ra(i,"onChange"),0<i.length&&(o=new Pi("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var Kn=null,Qn=null;function Of(s){Cd(s,0)}function $i(s){var i=he(s);if(kt(i))return s}function Yl(s,i){if(s==="change")return i}var Kl=!1;if(Qr){var Ga;if(Qr){var Va="oninput"in document;if(!Va){var Ql=document.createElement("div");Ql.setAttribute("oninput","return;"),Va=typeof Ql.oninput=="function"}Ga=Va}else Ga=!1;Kl=Ga&&(!document.documentMode||9<document.documentMode)}function Jl(){Kn&&(Kn.detachEvent("onpropertychange",Zl),Qn=Kn=null)}function Zl(s){if(s.propertyName==="value"&&$i(Qn)){var i=[];Xl(i,Qn,s,Bt(s)),jr(Of,i)}}function Lf(s,i,o){s==="focusin"?(Jl(),Kn=i,Qn=o,Kn.attachEvent("onpropertychange",Zl)):s==="focusout"&&Jl()}function Mf(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return $i(Qn)}function Ff(s,i){if(s==="click")return $i(i)}function Pf(s,i){if(s==="input"||s==="change")return $i(i)}function zf(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Ur=typeof Object.is=="function"?Object.is:zf;function Jn(s,i){if(Ur(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!be.call(i,p)||!Ur(s[p],i[p]))return!1}return!0}function ec(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function tc(s,i){var o=ec(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ec(o)}}function rc(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?rc(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function sc(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=ur(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=ur(s.document)}return i}function Xa(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var $f=Qr&&"documentMode"in document&&11>=document.documentMode,gn=null,Ya=null,Zn=null,Ka=!1;function nc(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ka||gn==null||gn!==ur(u)||(u=gn,"selectionStart"in u&&Xa(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Zn&&Jn(Zn,u)||(Zn=u,u=Ra(Ya,"onSelect"),0<u.length&&(i=new Pi("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=gn)))}function en(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var yn={animationend:en("Animation","AnimationEnd"),animationiteration:en("Animation","AnimationIteration"),animationstart:en("Animation","AnimationStart"),transitionrun:en("Transition","TransitionRun"),transitionstart:en("Transition","TransitionStart"),transitioncancel:en("Transition","TransitionCancel"),transitionend:en("Transition","TransitionEnd")},Qa={},ic={};Qr&&(ic=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);function tn(s){if(Qa[s])return Qa[s];if(!yn[s])return s;var i=yn[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in ic)return Qa[s]=i[o];return s}var ac=tn("animationend"),oc=tn("animationiteration"),lc=tn("animationstart"),Uf=tn("transitionrun"),Wf=tn("transitionstart"),qf=tn("transitioncancel"),cc=tn("transitionend"),uc=new Map,Ja="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ja.push("scrollEnd");function is(s,i){uc.set(s,i),$e(i,[s])}var dc=new WeakMap;function Jr(s,i){if(typeof s=="object"&&s!==null){var o=dc.get(s);return o!==void 0?o:(i={value:s,source:i,stack:wt(i)},dc.set(s,i),i)}return{value:s,source:i,stack:wt(i)}}var Zr=[],_n=0,Za=0;function Ui(){for(var s=_n,i=Za=_n=0;i<s;){var o=Zr[i];Zr[i++]=null;var u=Zr[i];Zr[i++]=null;var p=Zr[i];Zr[i++]=null;var m=Zr[i];if(Zr[i++]=null,u!==null&&p!==null){var w=u.pending;w===null?p.next=p:(p.next=w.next,w.next=p),u.pending=p}m!==0&&fc(o,p,m)}}function Wi(s,i,o,u){Zr[_n++]=s,Zr[_n++]=i,Zr[_n++]=o,Zr[_n++]=u,Za|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function eo(s,i,o,u){return Wi(s,i,o,u),qi(s)}function bn(s,i){return Wi(s,null,null,i),qi(s)}function fc(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var p=!1,m=s.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(s=m.stateNode,s===null||s._visibility&1||(p=!0)),s=m,m=m.return;return s.tag===3?(m=s.stateNode,p&&i!==null&&(p=31-ne(o),s=m.hiddenUpdates,u=s[p],u===null?s[p]=[i]:u.push(i),i.lane=o|536870912),m):null}function qi(s){if(50<Si)throw Si=0,ol=null,Error(n(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var vn={};function Hf(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(s,i,o,u){return new Hf(s,i,o,u)}function to(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ps(s,i){var o=s.alternate;return o===null?(o=Wr(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function xc(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Hi(s,i,o,u,p,m){var w=0;if(u=s,typeof s=="function")to(s)&&(w=1);else if(typeof s=="string")w=Vx(s,o,M.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case Y:return s=Wr(31,o,i,p),s.elementType=Y,s.lanes=m,s;case E:return rn(o.children,p,m,i);case b:w=8,p|=24;break;case v:return s=Wr(12,o,i,p|2),s.elementType=v,s.lanes=m,s;case I:return s=Wr(13,o,i,p),s.elementType=I,s.lanes=m,s;case ae:return s=Wr(19,o,i,p),s.elementType=ae,s.lanes=m,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:case C:w=10;break e;case A:w=9;break e;case L:w=11;break e;case D:w=14;break e;case ee:w=16,u=null;break e}w=29,o=Error(n(130,s===null?"null":typeof s,"")),u=null}return i=Wr(w,o,i,p),i.elementType=s,i.type=u,i.lanes=m,i}function rn(s,i,o,u){return s=Wr(7,s,u,i),s.lanes=o,s}function ro(s,i,o){return s=Wr(6,s,null,i),s.lanes=o,s}function so(s,i,o){return i=Wr(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var En=[],jn=0,Gi=null,Vi=0,es=[],ts=0,sn=null,hs=1,ms="";function nn(s,i){En[jn++]=Vi,En[jn++]=Gi,Gi=s,Vi=i}function pc(s,i,o){es[ts++]=hs,es[ts++]=ms,es[ts++]=sn,sn=s;var u=hs;s=ms;var p=32-ne(u)-1;u&=~(1<<p),o+=1;var m=32-ne(i)+p;if(30<m){var w=p-p%5;m=(u&(1<<w)-1).toString(32),u>>=w,p-=w,hs=1<<32-ne(i)+p|o<<p|u,ms=m+s}else hs=1<<m|o<<p|u,ms=s}function no(s){s.return!==null&&(nn(s,1),pc(s,1,0))}function io(s){for(;s===Gi;)Gi=En[--jn],En[jn]=null,Vi=En[--jn],En[jn]=null;for(;s===sn;)sn=es[--ts],es[ts]=null,ms=es[--ts],es[ts]=null,hs=es[--ts],es[ts]=null}var Or=null,pr=null,Kt=!1,an=null,cs=!1,ao=Error(n(519));function on(s){var i=Error(n(418,""));throw ri(Jr(i,s)),ao}function hc(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[Gt]=s,i[Ct]=u,o){case"dialog":$t("cancel",i),$t("close",i);break;case"iframe":case"object":case"embed":$t("load",i);break;case"video":case"audio":for(o=0;o<Ri.length;o++)$t(Ri[o],i);break;case"source":$t("error",i);break;case"img":case"image":case"link":$t("error",i),$t("load",i);break;case"details":$t("toggle",i);break;case"input":$t("invalid",i),dr(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),_t(i);break;case"select":$t("invalid",i);break;case"textarea":$t("invalid",i),Qt(i,u.value,u.defaultValue,u.children),_t(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||Dd(i.textContent,o)?(u.popover!=null&&($t("beforetoggle",i),$t("toggle",i)),u.onScroll!=null&&$t("scroll",i),u.onScrollEnd!=null&&$t("scrollend",i),u.onClick!=null&&(i.onclick=Ta),i=!0):i=!1,i||on(s)}function mc(s){for(Or=s.return;Or;)switch(Or.tag){case 5:case 13:cs=!1;return;case 27:case 3:cs=!0;return;default:Or=Or.return}}function ei(s){if(s!==Or)return!1;if(!Kt)return mc(s),Kt=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||jl(s.type,s.memoizedProps)),o=!o),o&&pr&&on(s),mc(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(o=s.data,o==="/$"){if(i===0){pr=os(s.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;s=s.nextSibling}pr=null}}else i===27?(i=pr,qs(s.type)?(s=Tl,Tl=null,pr=s):pr=i):pr=Or?os(s.stateNode.nextSibling):null;return!0}function ti(){pr=Or=null,Kt=!1}function gc(){var s=an;return s!==null&&(zr===null?zr=s:zr.push.apply(zr,s),an=null),s}function ri(s){an===null?an=[s]:an.push(s)}var oo=J(null),ln=null,gs=null;function ks(s,i,o){j(oo,i._currentValue),i._currentValue=o}function ys(s){s._currentValue=oo.current,B(oo)}function lo(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function co(s,i,o,u){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var m=p.dependencies;if(m!==null){var w=p.child;m=m.firstContext;e:for(;m!==null;){var O=m;m=p;for(var Z=0;Z<i.length;Z++)if(O.context===i[Z]){m.lanes|=o,O=m.alternate,O!==null&&(O.lanes|=o),lo(m.return,o,s),u||(w=null);break e}m=O.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(n(341));w.lanes|=o,m=w.alternate,m!==null&&(m.lanes|=o),lo(w,o,s),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===s){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function si(s,i,o,u){s=null;for(var p=i,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(n(387));if(w=w.memoizedProps,w!==null){var O=p.type;Ur(p.pendingProps.value,w.value)||(s!==null?s.push(O):s=[O])}}else if(p===Le.current){if(w=p.alternate,w===null)throw Error(n(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Di):s=[Di])}p=p.return}s!==null&&co(i,s,o,u),i.flags|=262144}function Xi(s){for(s=s.firstContext;s!==null;){if(!Ur(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function cn(s){ln=s,gs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ir(s){return yc(ln,s)}function Yi(s,i){return ln===null&&cn(s),yc(s,i)}function yc(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},gs===null){if(s===null)throw Error(n(308));gs=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else gs=gs.next=i;return o}var Gf=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},Vf=e.unstable_scheduleCallback,Xf=e.unstable_NormalPriority,Sr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uo(){return{controller:new Gf,data:new Map,refCount:0}}function ni(s){s.refCount--,s.refCount===0&&Vf(Xf,function(){s.controller.abort()})}var ii=null,fo=0,Sn=0,wn=null;function Yf(s,i){if(ii===null){var o=ii=[];fo=0,Sn=pl(),wn={status:"pending",value:void 0,then:function(u){o.push(u)}}}return fo++,i.then(_c,_c),i}function _c(){if(--fo===0&&ii!==null){wn!==null&&(wn.status="fulfilled");var s=ii;ii=null,Sn=0,wn=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function Kf(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var p=0;p<o.length;p++)(0,o[p])(i)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var bc=X.S;X.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Yf(s,i),bc!==null&&bc(s,i)};var un=J(null);function xo(){var s=un.current;return s!==null?s:ar.pooledCache}function Ki(s,i){i===null?j(un,un.current):j(un,i.pool)}function vc(){var s=xo();return s===null?null:{parent:Sr._currentValue,pool:s}}var ai=Error(n(460)),Ec=Error(n(474)),Qi=Error(n(542)),po={then:function(){}};function jc(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ji(){}function Sc(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(Ji,Ji),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Rc(s),s;default:if(typeof i.status=="string")i.then(Ji,Ji);else{if(s=ar,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=u}},function(u){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Rc(s),s}throw oi=i,ai}}var oi=null;function wc(){if(oi===null)throw Error(n(459));var s=oi;return oi=null,s}function Rc(s){if(s===ai||s===Qi)throw Error(n(483))}var As=!1;function ho(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mo(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ns(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ds(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Jt&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,i=qi(s),fc(s,null,o),i}return Wi(s,u,i,o),qi(s)}function li(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,Dt(s,o)}}function go(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?p=m=w:m=m.next=w,o=o.next}while(o!==null);m===null?p=m=i:m=m.next=i}else p=m=i;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var yo=!1;function ci(){if(yo){var s=wn;if(s!==null)throw s}}function ui(s,i,o,u){yo=!1;var p=s.updateQueue;As=!1;var m=p.firstBaseUpdate,w=p.lastBaseUpdate,O=p.shared.pending;if(O!==null){p.shared.pending=null;var Z=O,me=Z.next;Z.next=null,w===null?m=me:w.next=me,w=Z;var Ie=s.alternate;Ie!==null&&(Ie=Ie.updateQueue,O=Ie.lastBaseUpdate,O!==w&&(O===null?Ie.firstBaseUpdate=me:O.next=me,Ie.lastBaseUpdate=Z))}if(m!==null){var Me=p.baseState;w=0,Ie=me=Z=null,O=m;do{var je=O.lane&-536870913,we=je!==O.lane;if(we?(Ht&je)===je:(u&je)===je){je!==0&&je===Sn&&(yo=!0),Ie!==null&&(Ie=Ie.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Tt=s,jt=O;je=i;var rr=o;switch(jt.tag){case 1:if(Tt=jt.payload,typeof Tt=="function"){Me=Tt.call(rr,Me,je);break e}Me=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=jt.payload,je=typeof Tt=="function"?Tt.call(rr,Me,je):Tt,je==null)break e;Me=h({},Me,je);break e;case 2:As=!0}}je=O.callback,je!==null&&(s.flags|=64,we&&(s.flags|=8192),we=p.callbacks,we===null?p.callbacks=[je]:we.push(je))}else we={lane:je,tag:O.tag,payload:O.payload,callback:O.callback,next:null},Ie===null?(me=Ie=we,Z=Me):Ie=Ie.next=we,w|=je;if(O=O.next,O===null){if(O=p.shared.pending,O===null)break;we=O,O=we.next,we.next=null,p.lastBaseUpdate=we,p.shared.pending=null}}while(!0);Ie===null&&(Z=Me),p.baseState=Z,p.firstBaseUpdate=me,p.lastBaseUpdate=Ie,m===null&&(p.shared.lanes=0),zs|=w,s.lanes=w,s.memoizedState=Me}}function Tc(s,i){if(typeof s!="function")throw Error(n(191,s));s.call(i)}function Cc(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Tc(o[s],i)}var Rn=J(null),Zi=J(0);function kc(s,i){s=ws,j(Zi,s),j(Rn,i),ws=s|i.baseLanes}function _o(){j(Zi,ws),j(Rn,Rn.current)}function bo(){ws=Zi.current,B(Rn),B(Zi)}var Bs=0,Lt=null,er=null,br=null,ea=!1,Tn=!1,dn=!1,ta=0,di=0,Cn=null,Qf=0;function mr(){throw Error(n(321))}function vo(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Ur(s[o],i[o]))return!1;return!0}function Eo(s,i,o,u,p,m){return Bs=m,Lt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=s===null||s.memoizedState===null?fu:xu,dn=!1,m=o(u,p),dn=!1,Tn&&(m=Nc(i,o,u,p)),Ac(s),m}function Ac(s){X.H=oa;var i=er!==null&&er.next!==null;if(Bs=0,br=er=Lt=null,ea=!1,di=0,Cn=null,i)throw Error(n(300));s===null||Tr||(s=s.dependencies,s!==null&&Xi(s)&&(Tr=!0))}function Nc(s,i,o,u){Lt=s;var p=0;do{if(Tn&&(Cn=null),di=0,Tn=!1,25<=p)throw Error(n(301));if(p+=1,br=er=null,s.updateQueue!=null){var m=s.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}X.H=nx,m=i(o,u)}while(Tn);return m}function Jf(){var s=X.H,i=s.useState()[0];return i=typeof i.then=="function"?fi(i):i,s=s.useState()[0],(er!==null?er.memoizedState:null)!==s&&(Lt.flags|=1024),i}function jo(){var s=ta!==0;return ta=0,s}function So(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function wo(s){if(ea){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}ea=!1}Bs=0,br=er=Lt=null,Tn=!1,di=ta=0,Cn=null}function Fr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Lt.memoizedState=br=s:br=br.next=s,br}function vr(){if(er===null){var s=Lt.alternate;s=s!==null?s.memoizedState:null}else s=er.next;var i=br===null?Lt.memoizedState:br.next;if(i!==null)br=i,er=s;else{if(s===null)throw Lt.alternate===null?Error(n(467)):Error(n(310));er=s,s={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},br===null?Lt.memoizedState=br=s:br=br.next=s}return br}function Ro(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fi(s){var i=di;return di+=1,Cn===null&&(Cn=[]),s=Sc(Cn,s,i),i=Lt,(br===null?i.memoizedState:br.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?fu:xu),s}function ra(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return fi(s);if(s.$$typeof===C)return Ir(s)}throw Error(n(438,String(s)))}function To(s){var i=null,o=Lt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Lt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Ro(),Lt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=le;return i.index++,o}function _s(s,i){return typeof i=="function"?i(s):i}function sa(s){var i=vr();return Co(i,er,s)}function Co(s,i,o){var u=s.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=o;var p=s.baseQueue,m=u.pending;if(m!==null){if(p!==null){var w=p.next;p.next=m.next,m.next=w}i.baseQueue=p=m,u.pending=null}if(m=s.baseState,p===null)s.memoizedState=m;else{i=p.next;var O=w=null,Z=null,me=i,Ie=!1;do{var Me=me.lane&-536870913;if(Me!==me.lane?(Ht&Me)===Me:(Bs&Me)===Me){var je=me.revertLane;if(je===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Me===Sn&&(Ie=!0);else if((Bs&je)===je){me=me.next,je===Sn&&(Ie=!0);continue}else Me={lane:0,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},Z===null?(O=Z=Me,w=m):Z=Z.next=Me,Lt.lanes|=je,zs|=je;Me=me.action,dn&&o(m,Me),m=me.hasEagerState?me.eagerState:o(m,Me)}else je={lane:Me,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},Z===null?(O=Z=je,w=m):Z=Z.next=je,Lt.lanes|=Me,zs|=Me;me=me.next}while(me!==null&&me!==i);if(Z===null?w=m:Z.next=O,!Ur(m,s.memoizedState)&&(Tr=!0,Ie&&(o=wn,o!==null)))throw o;s.memoizedState=m,s.baseState=w,s.baseQueue=Z,u.lastRenderedState=m}return p===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function ko(s){var i=vr(),o=i.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=s;var u=o.dispatch,p=o.pending,m=i.memoizedState;if(p!==null){o.pending=null;var w=p=p.next;do m=s(m,w.action),w=w.next;while(w!==p);Ur(m,i.memoizedState)||(Tr=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function Dc(s,i,o){var u=Lt,p=vr(),m=Kt;if(m){if(o===void 0)throw Error(n(407));o=o()}else o=i();var w=!Ur((er||p).memoizedState,o);w&&(p.memoizedState=o,Tr=!0),p=p.queue;var O=Oc.bind(null,u,p,s);if(xi(2048,8,O,[s]),p.getSnapshot!==i||w||br!==null&&br.memoizedState.tag&1){if(u.flags|=2048,kn(9,na(),Ic.bind(null,u,p,o,i),null),ar===null)throw Error(n(349));m||(Bs&124)!==0||Bc(u,i,o)}return o}function Bc(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=Lt.updateQueue,i===null?(i=Ro(),Lt.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function Ic(s,i,o,u){i.value=o,i.getSnapshot=u,Lc(i)&&Mc(s)}function Oc(s,i,o){return o(function(){Lc(i)&&Mc(s)})}function Lc(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Ur(s,o)}catch{return!0}}function Mc(s){var i=bn(s,2);i!==null&&Xr(i,s,2)}function Ao(s){var i=Fr();if(typeof s=="function"){var o=s;if(s=o(),dn){bt(!0);try{o()}finally{bt(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:s},i}function Fc(s,i,o,u){return s.baseState=o,Co(s,er,typeof u=="function"?u:_s)}function Zf(s,i,o,u,p){if(aa(s))throw Error(n(485));if(s=i.action,s!==null){var m={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};X.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,Pc(i,m)):(m.next=o.next,i.pending=o.next=m)}}function Pc(s,i){var o=i.action,u=i.payload,p=s.state;if(i.isTransition){var m=X.T,w={};X.T=w;try{var O=o(p,u),Z=X.S;Z!==null&&Z(w,O),zc(s,i,O)}catch(me){No(s,i,me)}finally{X.T=m}}else try{m=o(p,u),zc(s,i,m)}catch(me){No(s,i,me)}}function zc(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){$c(s,i,u)},function(u){return No(s,i,u)}):$c(s,i,o)}function $c(s,i,o){i.status="fulfilled",i.value=o,Uc(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,Pc(s,o)))}function No(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Uc(i),i=i.next;while(i!==u)}s.action=null}function Uc(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Wc(s,i){return i}function qc(s,i){if(Kt){var o=ar.formState;if(o!==null){e:{var u=Lt;if(Kt){if(pr){t:{for(var p=pr,m=cs;p.nodeType!==8;){if(!m){p=null;break t}if(p=os(p.nextSibling),p===null){p=null;break t}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){pr=os(p.nextSibling),u=p.data==="F!";break e}}on(u)}u=!1}u&&(i=o[0])}}return o=Fr(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wc,lastRenderedState:i},o.queue=u,o=cu.bind(null,Lt,u),u.dispatch=o,u=Ao(!1),m=Lo.bind(null,Lt,!1,u.queue),u=Fr(),p={state:i,dispatch:null,action:s,pending:null},u.queue=p,o=Zf.bind(null,Lt,p,m,o),p.dispatch=o,u.memoizedState=s,[i,o,!1]}function Hc(s){var i=vr();return Gc(i,er,s)}function Gc(s,i,o){if(i=Co(s,i,Wc)[0],s=sa(_s)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=fi(i)}catch(w){throw w===ai?Qi:w}else u=i;i=vr();var p=i.queue,m=p.dispatch;return o!==i.memoizedState&&(Lt.flags|=2048,kn(9,na(),ex.bind(null,p,o),null)),[u,m,s]}function ex(s,i){s.action=i}function Vc(s){var i=vr(),o=er;if(o!==null)return Gc(i,o,s);vr(),i=i.memoizedState,o=vr();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function kn(s,i,o,u){return s={tag:s,create:o,deps:u,inst:i,next:null},i=Lt.updateQueue,i===null&&(i=Ro(),Lt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function na(){return{destroy:void 0,resource:void 0}}function Xc(){return vr().memoizedState}function ia(s,i,o,u){var p=Fr();u=u===void 0?null:u,Lt.flags|=s,p.memoizedState=kn(1|i,na(),o,u)}function xi(s,i,o,u){var p=vr();u=u===void 0?null:u;var m=p.memoizedState.inst;er!==null&&u!==null&&vo(u,er.memoizedState.deps)?p.memoizedState=kn(i,m,o,u):(Lt.flags|=s,p.memoizedState=kn(1|i,m,o,u))}function Yc(s,i){ia(8390656,8,s,i)}function Kc(s,i){xi(2048,8,s,i)}function Qc(s,i){return xi(4,2,s,i)}function Jc(s,i){return xi(4,4,s,i)}function Zc(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function eu(s,i,o){o=o!=null?o.concat([s]):null,xi(4,4,Zc.bind(null,i,s),o)}function Do(){}function tu(s,i){var o=vr();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&vo(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function ru(s,i){var o=vr();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&vo(i,u[1]))return u[0];if(u=s(),dn){bt(!0);try{s()}finally{bt(!1)}}return o.memoizedState=[u,i],u}function Bo(s,i,o){return o===void 0||(Bs&1073741824)!==0?s.memoizedState=i:(s.memoizedState=o,s=id(),Lt.lanes|=s,zs|=s,o)}function su(s,i,o,u){return Ur(o,i)?o:Rn.current!==null?(s=Bo(s,o,u),Ur(s,i)||(Tr=!0),s):(Bs&42)===0?(Tr=!0,s.memoizedState=o):(s=id(),Lt.lanes|=s,zs|=s,i)}function nu(s,i,o,u,p){var m=Se.p;Se.p=m!==0&&8>m?m:8;var w=X.T,O={};X.T=O,Lo(s,!1,i,o);try{var Z=p(),me=X.S;if(me!==null&&me(O,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Ie=Kf(Z,u);pi(s,i,Ie,Vr(s))}else pi(s,i,u,Vr(s))}catch(Me){pi(s,i,{then:function(){},status:"rejected",reason:Me},Vr())}finally{Se.p=m,X.T=w}}function tx(){}function Io(s,i,o,u){if(s.tag!==5)throw Error(n(476));var p=iu(s).queue;nu(s,p,i,z,o===null?tx:function(){return au(s),o(u)})}function iu(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:z},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function au(s){var i=iu(s).next.queue;pi(s,i,{},Vr())}function Oo(){return Ir(Di)}function ou(){return vr().memoizedState}function lu(){return vr().memoizedState}function rx(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=Vr();s=Ns(o);var u=Ds(i,s,o);u!==null&&(Xr(u,i,o),li(u,i,o)),i={cache:uo()},s.payload=i;return}i=i.return}}function sx(s,i,o){var u=Vr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},aa(s)?uu(i,o):(o=eo(s,i,o,u),o!==null&&(Xr(o,s,u),du(o,i,u)))}function cu(s,i,o){var u=Vr();pi(s,i,o,u)}function pi(s,i,o,u){var p={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(aa(s))uu(i,p);else{var m=s.alternate;if(s.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,O=m(w,o);if(p.hasEagerState=!0,p.eagerState=O,Ur(O,w))return Wi(s,i,p,0),ar===null&&Ui(),!1}catch{}finally{}if(o=eo(s,i,p,u),o!==null)return Xr(o,s,u),du(o,i,u),!0}return!1}function Lo(s,i,o,u){if(u={lane:2,revertLane:pl(),action:u,hasEagerState:!1,eagerState:null,next:null},aa(s)){if(i)throw Error(n(479))}else i=eo(s,o,u,2),i!==null&&Xr(i,s,2)}function aa(s){var i=s.alternate;return s===Lt||i!==null&&i===Lt}function uu(s,i){Tn=ea=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function du(s,i,o){if((o&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,Dt(s,o)}}var oa={readContext:Ir,use:ra,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useLayoutEffect:mr,useInsertionEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useSyncExternalStore:mr,useId:mr,useHostTransitionStatus:mr,useFormState:mr,useActionState:mr,useOptimistic:mr,useMemoCache:mr,useCacheRefresh:mr},fu={readContext:Ir,use:ra,useCallback:function(s,i){return Fr().memoizedState=[s,i===void 0?null:i],s},useContext:Ir,useEffect:Yc,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,ia(4194308,4,Zc.bind(null,i,s),o)},useLayoutEffect:function(s,i){return ia(4194308,4,s,i)},useInsertionEffect:function(s,i){ia(4,2,s,i)},useMemo:function(s,i){var o=Fr();i=i===void 0?null:i;var u=s();if(dn){bt(!0);try{s()}finally{bt(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=Fr();if(o!==void 0){var p=o(i);if(dn){bt(!0);try{o(i)}finally{bt(!1)}}}else p=i;return u.memoizedState=u.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},u.queue=s,s=s.dispatch=sx.bind(null,Lt,s),[u.memoizedState,s]},useRef:function(s){var i=Fr();return s={current:s},i.memoizedState=s},useState:function(s){s=Ao(s);var i=s.queue,o=cu.bind(null,Lt,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:Do,useDeferredValue:function(s,i){var o=Fr();return Bo(o,s,i)},useTransition:function(){var s=Ao(!1);return s=nu.bind(null,Lt,s.queue,!0,!1),Fr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=Lt,p=Fr();if(Kt){if(o===void 0)throw Error(n(407));o=o()}else{if(o=i(),ar===null)throw Error(n(349));(Ht&124)!==0||Bc(u,i,o)}p.memoizedState=o;var m={value:o,getSnapshot:i};return p.queue=m,Yc(Oc.bind(null,u,m,s),[s]),u.flags|=2048,kn(9,na(),Ic.bind(null,u,m,o,i),null),o},useId:function(){var s=Fr(),i=ar.identifierPrefix;if(Kt){var o=ms,u=hs;o=(u&~(1<<32-ne(u)-1)).toString(32)+o,i=""+i+"R"+o,o=ta++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=Qf++,i=""+i+"r"+o.toString(32)+"";return s.memoizedState=i},useHostTransitionStatus:Oo,useFormState:qc,useActionState:qc,useOptimistic:function(s){var i=Fr();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Lo.bind(null,Lt,!0,o),o.dispatch=i,[s,i]},useMemoCache:To,useCacheRefresh:function(){return Fr().memoizedState=rx.bind(null,Lt)}},xu={readContext:Ir,use:ra,useCallback:tu,useContext:Ir,useEffect:Kc,useImperativeHandle:eu,useInsertionEffect:Qc,useLayoutEffect:Jc,useMemo:ru,useReducer:sa,useRef:Xc,useState:function(){return sa(_s)},useDebugValue:Do,useDeferredValue:function(s,i){var o=vr();return su(o,er.memoizedState,s,i)},useTransition:function(){var s=sa(_s)[0],i=vr().memoizedState;return[typeof s=="boolean"?s:fi(s),i]},useSyncExternalStore:Dc,useId:ou,useHostTransitionStatus:Oo,useFormState:Hc,useActionState:Hc,useOptimistic:function(s,i){var o=vr();return Fc(o,er,s,i)},useMemoCache:To,useCacheRefresh:lu},nx={readContext:Ir,use:ra,useCallback:tu,useContext:Ir,useEffect:Kc,useImperativeHandle:eu,useInsertionEffect:Qc,useLayoutEffect:Jc,useMemo:ru,useReducer:ko,useRef:Xc,useState:function(){return ko(_s)},useDebugValue:Do,useDeferredValue:function(s,i){var o=vr();return er===null?Bo(o,s,i):su(o,er.memoizedState,s,i)},useTransition:function(){var s=ko(_s)[0],i=vr().memoizedState;return[typeof s=="boolean"?s:fi(s),i]},useSyncExternalStore:Dc,useId:ou,useHostTransitionStatus:Oo,useFormState:Vc,useActionState:Vc,useOptimistic:function(s,i){var o=vr();return er!==null?Fc(o,er,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:To,useCacheRefresh:lu},An=null,hi=0;function la(s){var i=hi;return hi+=1,An===null&&(An=[]),Sc(An,s,i)}function mi(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function ca(s,i){throw i.$$typeof===g?Error(n(525)):(s=Object.prototype.toString.call(i),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function pu(s){var i=s._init;return i(s._payload)}function hu(s){function i(de,ie){if(s){var xe=de.deletions;xe===null?(de.deletions=[ie],de.flags|=16):xe.push(ie)}}function o(de,ie){if(!s)return null;for(;ie!==null;)i(de,ie),ie=ie.sibling;return null}function u(de){for(var ie=new Map;de!==null;)de.key!==null?ie.set(de.key,de):ie.set(de.index,de),de=de.sibling;return ie}function p(de,ie){return de=ps(de,ie),de.index=0,de.sibling=null,de}function m(de,ie,xe){return de.index=xe,s?(xe=de.alternate,xe!==null?(xe=xe.index,xe<ie?(de.flags|=67108866,ie):xe):(de.flags|=67108866,ie)):(de.flags|=1048576,ie)}function w(de){return s&&de.alternate===null&&(de.flags|=67108866),de}function O(de,ie,xe,Oe){return ie===null||ie.tag!==6?(ie=ro(xe,de.mode,Oe),ie.return=de,ie):(ie=p(ie,xe),ie.return=de,ie)}function Z(de,ie,xe,Oe){var ft=xe.type;return ft===E?Ie(de,ie,xe.props.children,Oe,xe.key):ie!==null&&(ie.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===ee&&pu(ft)===ie.type)?(ie=p(ie,xe.props),mi(ie,xe),ie.return=de,ie):(ie=Hi(xe.type,xe.key,xe.props,null,de.mode,Oe),mi(ie,xe),ie.return=de,ie)}function me(de,ie,xe,Oe){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==xe.containerInfo||ie.stateNode.implementation!==xe.implementation?(ie=so(xe,de.mode,Oe),ie.return=de,ie):(ie=p(ie,xe.children||[]),ie.return=de,ie)}function Ie(de,ie,xe,Oe,ft){return ie===null||ie.tag!==7?(ie=rn(xe,de.mode,Oe,ft),ie.return=de,ie):(ie=p(ie,xe),ie.return=de,ie)}function Me(de,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=ro(""+ie,de.mode,xe),ie.return=de,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:return xe=Hi(ie.type,ie.key,ie.props,null,de.mode,xe),mi(xe,ie),xe.return=de,xe;case _:return ie=so(ie,de.mode,xe),ie.return=de,ie;case ee:var Oe=ie._init;return ie=Oe(ie._payload),Me(de,ie,xe)}if(De(ie)||oe(ie))return ie=rn(ie,de.mode,xe,null),ie.return=de,ie;if(typeof ie.then=="function")return Me(de,la(ie),xe);if(ie.$$typeof===C)return Me(de,Yi(de,ie),xe);ca(de,ie)}return null}function je(de,ie,xe,Oe){var ft=ie!==null?ie.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ft!==null?null:O(de,ie,""+xe,Oe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case y:return xe.key===ft?Z(de,ie,xe,Oe):null;case _:return xe.key===ft?me(de,ie,xe,Oe):null;case ee:return ft=xe._init,xe=ft(xe._payload),je(de,ie,xe,Oe)}if(De(xe)||oe(xe))return ft!==null?null:Ie(de,ie,xe,Oe,null);if(typeof xe.then=="function")return je(de,ie,la(xe),Oe);if(xe.$$typeof===C)return je(de,ie,Yi(de,xe),Oe);ca(de,xe)}return null}function we(de,ie,xe,Oe,ft){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return de=de.get(xe)||null,O(ie,de,""+Oe,ft);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case y:return de=de.get(Oe.key===null?xe:Oe.key)||null,Z(ie,de,Oe,ft);case _:return de=de.get(Oe.key===null?xe:Oe.key)||null,me(ie,de,Oe,ft);case ee:var Ft=Oe._init;return Oe=Ft(Oe._payload),we(de,ie,xe,Oe,ft)}if(De(Oe)||oe(Oe))return de=de.get(xe)||null,Ie(ie,de,Oe,ft,null);if(typeof Oe.then=="function")return we(de,ie,xe,la(Oe),ft);if(Oe.$$typeof===C)return we(de,ie,xe,Yi(ie,Oe),ft);ca(ie,Oe)}return null}function Tt(de,ie,xe,Oe){for(var ft=null,Ft=null,yt=ie,St=ie=0,kr=null;yt!==null&&St<xe.length;St++){yt.index>St?(kr=yt,yt=null):kr=yt.sibling;var Xt=je(de,yt,xe[St],Oe);if(Xt===null){yt===null&&(yt=kr);break}s&&yt&&Xt.alternate===null&&i(de,yt),ie=m(Xt,ie,St),Ft===null?ft=Xt:Ft.sibling=Xt,Ft=Xt,yt=kr}if(St===xe.length)return o(de,yt),Kt&&nn(de,St),ft;if(yt===null){for(;St<xe.length;St++)yt=Me(de,xe[St],Oe),yt!==null&&(ie=m(yt,ie,St),Ft===null?ft=yt:Ft.sibling=yt,Ft=yt);return Kt&&nn(de,St),ft}for(yt=u(yt);St<xe.length;St++)kr=we(yt,de,St,xe[St],Oe),kr!==null&&(s&&kr.alternate!==null&&yt.delete(kr.key===null?St:kr.key),ie=m(kr,ie,St),Ft===null?ft=kr:Ft.sibling=kr,Ft=kr);return s&&yt.forEach(function(Ys){return i(de,Ys)}),Kt&&nn(de,St),ft}function jt(de,ie,xe,Oe){if(xe==null)throw Error(n(151));for(var ft=null,Ft=null,yt=ie,St=ie=0,kr=null,Xt=xe.next();yt!==null&&!Xt.done;St++,Xt=xe.next()){yt.index>St?(kr=yt,yt=null):kr=yt.sibling;var Ys=je(de,yt,Xt.value,Oe);if(Ys===null){yt===null&&(yt=kr);break}s&&yt&&Ys.alternate===null&&i(de,yt),ie=m(Ys,ie,St),Ft===null?ft=Ys:Ft.sibling=Ys,Ft=Ys,yt=kr}if(Xt.done)return o(de,yt),Kt&&nn(de,St),ft;if(yt===null){for(;!Xt.done;St++,Xt=xe.next())Xt=Me(de,Xt.value,Oe),Xt!==null&&(ie=m(Xt,ie,St),Ft===null?ft=Xt:Ft.sibling=Xt,Ft=Xt);return Kt&&nn(de,St),ft}for(yt=u(yt);!Xt.done;St++,Xt=xe.next())Xt=we(yt,de,St,Xt.value,Oe),Xt!==null&&(s&&Xt.alternate!==null&&yt.delete(Xt.key===null?St:Xt.key),ie=m(Xt,ie,St),Ft===null?ft=Xt:Ft.sibling=Xt,Ft=Xt);return s&&yt.forEach(function(ip){return i(de,ip)}),Kt&&nn(de,St),ft}function rr(de,ie,xe,Oe){if(typeof xe=="object"&&xe!==null&&xe.type===E&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case y:e:{for(var ft=xe.key;ie!==null;){if(ie.key===ft){if(ft=xe.type,ft===E){if(ie.tag===7){o(de,ie.sibling),Oe=p(ie,xe.props.children),Oe.return=de,de=Oe;break e}}else if(ie.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===ee&&pu(ft)===ie.type){o(de,ie.sibling),Oe=p(ie,xe.props),mi(Oe,xe),Oe.return=de,de=Oe;break e}o(de,ie);break}else i(de,ie);ie=ie.sibling}xe.type===E?(Oe=rn(xe.props.children,de.mode,Oe,xe.key),Oe.return=de,de=Oe):(Oe=Hi(xe.type,xe.key,xe.props,null,de.mode,Oe),mi(Oe,xe),Oe.return=de,de=Oe)}return w(de);case _:e:{for(ft=xe.key;ie!==null;){if(ie.key===ft)if(ie.tag===4&&ie.stateNode.containerInfo===xe.containerInfo&&ie.stateNode.implementation===xe.implementation){o(de,ie.sibling),Oe=p(ie,xe.children||[]),Oe.return=de,de=Oe;break e}else{o(de,ie);break}else i(de,ie);ie=ie.sibling}Oe=so(xe,de.mode,Oe),Oe.return=de,de=Oe}return w(de);case ee:return ft=xe._init,xe=ft(xe._payload),rr(de,ie,xe,Oe)}if(De(xe))return Tt(de,ie,xe,Oe);if(oe(xe)){if(ft=oe(xe),typeof ft!="function")throw Error(n(150));return xe=ft.call(xe),jt(de,ie,xe,Oe)}if(typeof xe.then=="function")return rr(de,ie,la(xe),Oe);if(xe.$$typeof===C)return rr(de,ie,Yi(de,xe),Oe);ca(de,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint"?(xe=""+xe,ie!==null&&ie.tag===6?(o(de,ie.sibling),Oe=p(ie,xe),Oe.return=de,de=Oe):(o(de,ie),Oe=ro(xe,de.mode,Oe),Oe.return=de,de=Oe),w(de)):o(de,ie)}return function(de,ie,xe,Oe){try{hi=0;var ft=rr(de,ie,xe,Oe);return An=null,ft}catch(yt){if(yt===ai||yt===Qi)throw yt;var Ft=Wr(29,yt,null,de.mode);return Ft.lanes=Oe,Ft.return=de,Ft}finally{}}}var Nn=hu(!0),mu=hu(!1),rs=J(null),us=null;function Is(s){var i=s.alternate;j(wr,wr.current&1),j(rs,s),us===null&&(i===null||Rn.current!==null||i.memoizedState!==null)&&(us=s)}function gu(s){if(s.tag===22){if(j(wr,wr.current),j(rs,s),us===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(us=s)}}else Os()}function Os(){j(wr,wr.current),j(rs,rs.current)}function bs(s){B(rs),us===s&&(us=null),B(wr)}var wr=J(0);function ua(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Rl(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Mo(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:h({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Fo={enqueueSetState:function(s,i,o){s=s._reactInternals;var u=Vr(),p=Ns(u);p.payload=i,o!=null&&(p.callback=o),i=Ds(s,p,u),i!==null&&(Xr(i,s,u),li(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=Vr(),p=Ns(u);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=Ds(s,p,u),i!==null&&(Xr(i,s,u),li(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=Vr(),u=Ns(o);u.tag=2,i!=null&&(u.callback=i),i=Ds(s,u,o),i!==null&&(Xr(i,s,o),li(i,s,o))}};function yu(s,i,o,u,p,m,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,m,w):i.prototype&&i.prototype.isPureReactComponent?!Jn(o,u)||!Jn(p,m):!0}function _u(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&Fo.enqueueReplaceState(i,i.state,null)}function fn(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=h({},o));for(var p in s)o[p]===void 0&&(o[p]=s[p])}return o}var da=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function bu(s){da(s)}function vu(s){console.error(s)}function Eu(s){da(s)}function fa(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function ju(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Po(s,i,o){return o=Ns(o),o.tag=3,o.payload={element:null},o.callback=function(){fa(s,i)},o}function Su(s){return s=Ns(s),s.tag=3,s}function wu(s,i,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var m=u.value;s.payload=function(){return p(m)},s.callback=function(){ju(i,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){ju(i,o,u),typeof p!="function"&&($s===null?$s=new Set([this]):$s.add(this));var O=u.stack;this.componentDidCatch(u.value,{componentStack:O!==null?O:""})})}function ix(s,i,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&si(i,o,p,!0),o=rs.current,o!==null){switch(o.tag){case 13:return us===null?cl():o.alternate===null&&hr===0&&(hr=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===po?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),dl(s,u,p)),!1;case 22:return o.flags|=65536,u===po?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),dl(s,u,p)),!1}throw Error(n(435,o.tag))}return dl(s,u,p),cl(),!1}if(Kt)return i=rs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,u!==ao&&(s=Error(n(422),{cause:u}),ri(Jr(s,o)))):(u!==ao&&(i=Error(n(423),{cause:u}),ri(Jr(i,o))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,u=Jr(u,o),p=Po(s.stateNode,u,p),go(s,p),hr!==4&&(hr=2)),!1;var m=Error(n(520),{cause:u});if(m=Jr(m,o),ji===null?ji=[m]:ji.push(m),hr!==4&&(hr=2),i===null)return!0;u=Jr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=p&-p,o.lanes|=s,s=Po(o.stateNode,u,s),go(o,s),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&($s===null||!$s.has(m))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Su(p),wu(p,s,o,u),go(o,p),!1}o=o.return}while(o!==null);return!1}var Ru=Error(n(461)),Tr=!1;function Ar(s,i,o,u){i.child=s===null?mu(i,null,o,u):Nn(i,s.child,o,u)}function Tu(s,i,o,u,p){o=o.render;var m=i.ref;if("ref"in u){var w={};for(var O in u)O!=="ref"&&(w[O]=u[O])}else w=u;return cn(i),u=Eo(s,i,o,w,m,p),O=jo(),s!==null&&!Tr?(So(s,i,p),vs(s,i,p)):(Kt&&O&&no(i),i.flags|=1,Ar(s,i,u,p),i.child)}function Cu(s,i,o,u,p){if(s===null){var m=o.type;return typeof m=="function"&&!to(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,ku(s,i,m,u,p)):(s=Hi(o.type,null,u,i,i.mode,p),s.ref=i.ref,s.return=i,i.child=s)}if(m=s.child,!Vo(s,p)){var w=m.memoizedProps;if(o=o.compare,o=o!==null?o:Jn,o(w,u)&&s.ref===i.ref)return vs(s,i,p)}return i.flags|=1,s=ps(m,u),s.ref=i.ref,s.return=i,i.child=s}function ku(s,i,o,u,p){if(s!==null){var m=s.memoizedProps;if(Jn(m,u)&&s.ref===i.ref)if(Tr=!1,i.pendingProps=u=m,Vo(s,p))(s.flags&131072)!==0&&(Tr=!0);else return i.lanes=s.lanes,vs(s,i,p)}return zo(s,i,o,u,p)}function Au(s,i,o){var u=i.pendingProps,p=u.children,m=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,s!==null){for(p=i.child=s.child,m=0;p!==null;)m=m|p.lanes|p.childLanes,p=p.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return Nu(s,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ki(i,m!==null?m.cachePool:null),m!==null?kc(i,m):_o(),gu(i);else return i.lanes=i.childLanes=536870912,Nu(s,i,m!==null?m.baseLanes|o:o,o)}else m!==null?(Ki(i,m.cachePool),kc(i,m),Os(),i.memoizedState=null):(s!==null&&Ki(i,null),_o(),Os());return Ar(s,i,p,o),i.child}function Nu(s,i,o,u){var p=xo();return p=p===null?null:{parent:Sr._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},s!==null&&Ki(i,null),_o(),gu(i),s!==null&&si(s,i,u,!0),null}function xa(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(n(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function zo(s,i,o,u,p){return cn(i),o=Eo(s,i,o,u,void 0,p),u=jo(),s!==null&&!Tr?(So(s,i,p),vs(s,i,p)):(Kt&&u&&no(i),i.flags|=1,Ar(s,i,o,p),i.child)}function Du(s,i,o,u,p,m){return cn(i),i.updateQueue=null,o=Nc(i,u,o,p),Ac(s),u=jo(),s!==null&&!Tr?(So(s,i,m),vs(s,i,m)):(Kt&&u&&no(i),i.flags|=1,Ar(s,i,o,m),i.child)}function Bu(s,i,o,u,p){if(cn(i),i.stateNode===null){var m=vn,w=o.contextType;typeof w=="object"&&w!==null&&(m=Ir(w)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Fo,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},ho(i),w=o.contextType,m.context=typeof w=="object"&&w!==null?Ir(w):vn,m.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Mo(i,o,w,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&Fo.enqueueReplaceState(m,m.state,null),ui(i,u,m,p),ci(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){m=i.stateNode;var O=i.memoizedProps,Z=fn(o,O);m.props=Z;var me=m.context,Ie=o.contextType;w=vn,typeof Ie=="object"&&Ie!==null&&(w=Ir(Ie));var Me=o.getDerivedStateFromProps;Ie=typeof Me=="function"||typeof m.getSnapshotBeforeUpdate=="function",O=i.pendingProps!==O,Ie||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(O||me!==w)&&_u(i,m,u,w),As=!1;var je=i.memoizedState;m.state=je,ui(i,u,m,p),ci(),me=i.memoizedState,O||je!==me||As?(typeof Me=="function"&&(Mo(i,o,Me,u),me=i.memoizedState),(Z=As||yu(i,o,Z,u,je,me,w))?(Ie||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=me),m.props=u,m.state=me,m.context=w,u=Z):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,mo(s,i),w=i.memoizedProps,Ie=fn(o,w),m.props=Ie,Me=i.pendingProps,je=m.context,me=o.contextType,Z=vn,typeof me=="object"&&me!==null&&(Z=Ir(me)),O=o.getDerivedStateFromProps,(me=typeof O=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==Me||je!==Z)&&_u(i,m,u,Z),As=!1,je=i.memoizedState,m.state=je,ui(i,u,m,p),ci();var we=i.memoizedState;w!==Me||je!==we||As||s!==null&&s.dependencies!==null&&Xi(s.dependencies)?(typeof O=="function"&&(Mo(i,o,O,u),we=i.memoizedState),(Ie=As||yu(i,o,Ie,u,je,we,Z)||s!==null&&s.dependencies!==null&&Xi(s.dependencies))?(me||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,we,Z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,we,Z)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===s.memoizedProps&&je===s.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&je===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=we),m.props=u,m.state=we,m.context=Z,u=Ie):(typeof m.componentDidUpdate!="function"||w===s.memoizedProps&&je===s.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&je===s.memoizedState||(i.flags|=1024),u=!1)}return m=u,xa(s,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,s!==null&&u?(i.child=Nn(i,s.child,null,p),i.child=Nn(i,null,o,p)):Ar(s,i,o,p),i.memoizedState=m.state,s=i.child):s=vs(s,i,p),s}function Iu(s,i,o,u){return ti(),i.flags|=256,Ar(s,i,o,u),i.child}var $o={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uo(s){return{baseLanes:s,cachePool:vc()}}function Wo(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=ss),s}function Ou(s,i,o){var u=i.pendingProps,p=!1,m=(i.flags&128)!==0,w;if((w=m)||(w=s!==null&&s.memoizedState===null?!1:(wr.current&2)!==0),w&&(p=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,s===null){if(Kt){if(p?Is(i):Os(),Kt){var O=pr,Z;if(Z=O){e:{for(Z=O,O=cs;Z.nodeType!==8;){if(!O){O=null;break e}if(Z=os(Z.nextSibling),Z===null){O=null;break e}}O=Z}O!==null?(i.memoizedState={dehydrated:O,treeContext:sn!==null?{id:hs,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},Z=Wr(18,null,null,0),Z.stateNode=O,Z.return=i,i.child=Z,Or=i,pr=null,Z=!0):Z=!1}Z||on(i)}if(O=i.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Rl(O)?i.lanes=32:i.lanes=536870912,null;bs(i)}return O=u.children,u=u.fallback,p?(Os(),p=i.mode,O=pa({mode:"hidden",children:O},p),u=rn(u,p,o,null),O.return=i,u.return=i,O.sibling=u,i.child=O,p=i.child,p.memoizedState=Uo(o),p.childLanes=Wo(s,w,o),i.memoizedState=$o,u):(Is(i),qo(i,O))}if(Z=s.memoizedState,Z!==null&&(O=Z.dehydrated,O!==null)){if(m)i.flags&256?(Is(i),i.flags&=-257,i=Ho(s,i,o)):i.memoizedState!==null?(Os(),i.child=s.child,i.flags|=128,i=null):(Os(),p=u.fallback,O=i.mode,u=pa({mode:"visible",children:u.children},O),p=rn(p,O,o,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,Nn(i,s.child,null,o),u=i.child,u.memoizedState=Uo(o),u.childLanes=Wo(s,w,o),i.memoizedState=$o,i=p);else if(Is(i),Rl(O)){if(w=O.nextSibling&&O.nextSibling.dataset,w)var me=w.dgst;w=me,u=Error(n(419)),u.stack="",u.digest=w,ri({value:u,source:null,stack:null}),i=Ho(s,i,o)}else if(Tr||si(s,i,o,!1),w=(o&s.childLanes)!==0,Tr||w){if(w=ar,w!==null&&(u=o&-o,u=(u&42)!==0?1:ht(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==Z.retryLane))throw Z.retryLane=u,bn(s,u),Xr(w,s,u),Ru;O.data==="$?"||cl(),i=Ho(s,i,o)}else O.data==="$?"?(i.flags|=192,i.child=s.child,i=null):(s=Z.treeContext,pr=os(O.nextSibling),Or=i,Kt=!0,an=null,cs=!1,s!==null&&(es[ts++]=hs,es[ts++]=ms,es[ts++]=sn,hs=s.id,ms=s.overflow,sn=i),i=qo(i,u.children),i.flags|=4096);return i}return p?(Os(),p=u.fallback,O=i.mode,Z=s.child,me=Z.sibling,u=ps(Z,{mode:"hidden",children:u.children}),u.subtreeFlags=Z.subtreeFlags&65011712,me!==null?p=ps(me,p):(p=rn(p,O,o,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,O=s.child.memoizedState,O===null?O=Uo(o):(Z=O.cachePool,Z!==null?(me=Sr._currentValue,Z=Z.parent!==me?{parent:me,pool:me}:Z):Z=vc(),O={baseLanes:O.baseLanes|o,cachePool:Z}),p.memoizedState=O,p.childLanes=Wo(s,w,o),i.memoizedState=$o,u):(Is(i),o=s.child,s=o.sibling,o=ps(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(w=i.deletions,w===null?(i.deletions=[s],i.flags|=16):w.push(s)),i.child=o,i.memoizedState=null,o)}function qo(s,i){return i=pa({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function pa(s,i){return s=Wr(22,s,null,i),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ho(s,i,o){return Nn(i,s.child,null,o),s=qo(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Lu(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),lo(s.return,i,o)}function Go(s,i,o,u,p){var m=s.memoizedState;m===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=p)}function Mu(s,i,o){var u=i.pendingProps,p=u.revealOrder,m=u.tail;if(Ar(s,i,u.children,o),u=wr.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Lu(s,o,i);else if(s.tag===19)Lu(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(j(wr,u),p){case"forwards":for(o=i.child,p=null;o!==null;)s=o.alternate,s!==null&&ua(s)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),Go(i,!1,p,o,m);break;case"backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(s=p.alternate,s!==null&&ua(s)===null){i.child=p;break}s=p.sibling,p.sibling=o,o=p,p=s}Go(i,!0,o,null,m);break;case"together":Go(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function vs(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),zs|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(si(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(n(153));if(i.child!==null){for(s=i.child,o=ps(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=ps(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Vo(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Xi(s)))}function ax(s,i,o){switch(i.tag){case 3:ve(i,i.stateNode.containerInfo),ks(i,Sr,s.memoizedState.cache),ti();break;case 27:case 5:ye(i);break;case 4:ve(i,i.stateNode.containerInfo);break;case 10:ks(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Is(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Ou(s,i,o):(Is(i),s=vs(s,i,o),s!==null?s.sibling:null);Is(i);break;case 19:var p=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(si(s,i,o,!1),u=(o&i.childLanes)!==0),p){if(u)return Mu(s,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),j(wr,wr.current),u)break;return null;case 22:case 23:return i.lanes=0,Au(s,i,o);case 24:ks(i,Sr,s.memoizedState.cache)}return vs(s,i,o)}function Fu(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)Tr=!0;else{if(!Vo(s,o)&&(i.flags&128)===0)return Tr=!1,ax(s,i,o);Tr=(s.flags&131072)!==0}else Tr=!1,Kt&&(i.flags&1048576)!==0&&pc(i,Vi,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var u=i.elementType,p=u._init;if(u=p(u._payload),i.type=u,typeof u=="function")to(u)?(s=fn(u,s),i.tag=1,i=Bu(null,i,u,s,o)):(i.tag=0,i=zo(null,i,u,s,o));else{if(u!=null){if(p=u.$$typeof,p===L){i.tag=11,i=Tu(null,i,u,s,o);break e}else if(p===D){i.tag=14,i=Cu(null,i,u,s,o);break e}}throw i=Pe(u)||u,Error(n(306,i,""))}}return i;case 0:return zo(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,p=fn(u,i.pendingProps),Bu(s,i,u,p,o);case 3:e:{if(ve(i,i.stateNode.containerInfo),s===null)throw Error(n(387));u=i.pendingProps;var m=i.memoizedState;p=m.element,mo(s,i),ui(i,u,null,o);var w=i.memoizedState;if(u=w.cache,ks(i,Sr,u),u!==m.cache&&co(i,[Sr],o,!0),ci(),u=w.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Iu(s,i,u,o);break e}else if(u!==p){p=Jr(Error(n(424)),i),ri(p),i=Iu(s,i,u,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(pr=os(s.firstChild),Or=i,Kt=!0,an=null,cs=!0,o=mu(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ti(),u===p){i=vs(s,i,o);break e}Ar(s,i,u,o)}i=i.child}return i;case 26:return xa(s,i),s===null?(o=Ud(i.type,null,i.pendingProps,null))?i.memoizedState=o:Kt||(o=i.type,s=i.pendingProps,u=Ca(K.current).createElement(o),u[Gt]=i,u[Ct]=s,Dr(u,o,s),ue(u),i.stateNode=u):i.memoizedState=Ud(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return ye(i),s===null&&Kt&&(u=i.stateNode=Pd(i.type,i.pendingProps,K.current),Or=i,cs=!0,p=pr,qs(i.type)?(Tl=p,pr=os(u.firstChild)):pr=p),Ar(s,i,i.pendingProps.children,o),xa(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&Kt&&((p=u=pr)&&(u=Ix(u,i.type,i.pendingProps,cs),u!==null?(i.stateNode=u,Or=i,pr=os(u.firstChild),cs=!1,p=!0):p=!1),p||on(i)),ye(i),p=i.type,m=i.pendingProps,w=s!==null?s.memoizedProps:null,u=m.children,jl(p,m)?u=null:w!==null&&jl(p,w)&&(i.flags|=32),i.memoizedState!==null&&(p=Eo(s,i,Jf,null,null,o),Di._currentValue=p),xa(s,i),Ar(s,i,u,o),i.child;case 6:return s===null&&Kt&&((s=o=pr)&&(o=Ox(o,i.pendingProps,cs),o!==null?(i.stateNode=o,Or=i,pr=null,s=!0):s=!1),s||on(i)),null;case 13:return Ou(s,i,o);case 4:return ve(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=Nn(i,null,u,o):Ar(s,i,u,o),i.child;case 11:return Tu(s,i,i.type,i.pendingProps,o);case 7:return Ar(s,i,i.pendingProps,o),i.child;case 8:return Ar(s,i,i.pendingProps.children,o),i.child;case 12:return Ar(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,ks(i,i.type,u.value),Ar(s,i,u.children,o),i.child;case 9:return p=i.type._context,u=i.pendingProps.children,cn(i),p=Ir(p),u=u(p),i.flags|=1,Ar(s,i,u,o),i.child;case 14:return Cu(s,i,i.type,i.pendingProps,o);case 15:return ku(s,i,i.type,i.pendingProps,o);case 19:return Mu(s,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},s===null?(o=pa(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=ps(s.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Au(s,i,o);case 24:return cn(i),u=Ir(Sr),s===null?(p=xo(),p===null&&(p=ar,m=uo(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=o),p=m),i.memoizedState={parent:u,cache:p},ho(i),ks(i,Sr,p)):((s.lanes&o)!==0&&(mo(s,i),ui(i,null,null,o),ci()),p=s.memoizedState,m=i.memoizedState,p.parent!==u?(p={parent:u,cache:u},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),ks(i,Sr,u)):(u=m.cache,ks(i,Sr,u),u!==p.cache&&co(i,[Sr],o,!0))),Ar(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(n(156,i.tag))}function Es(s){s.flags|=4}function Pu(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Vd(i)){if(i=rs.current,i!==null&&((Ht&4194048)===Ht?us!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||i!==us))throw oi=po,Ec;s.flags|=8192}}function ha(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Q():536870912,s.lanes|=i,On|=i)}function gi(s,i){if(!Kt)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function xr(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var p=s.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function ox(s,i,o){var u=i.pendingProps;switch(io(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(i),null;case 1:return xr(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ys(Sr),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(ei(i)?Es(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,gc())),xr(i),null;case 26:return o=i.memoizedState,s===null?(Es(i),o!==null?(xr(i),Pu(i,o)):(xr(i),i.flags&=-16777217)):o?o!==s.memoizedState?(Es(i),xr(i),Pu(i,o)):(xr(i),i.flags&=-16777217):(s.memoizedProps!==u&&Es(i),xr(i),i.flags&=-16777217),null;case 27:V(i),o=K.current;var p=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==u&&Es(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return xr(i),null}s=M.current,ei(i)?hc(i):(s=Pd(p,u,o),i.stateNode=s,Es(i))}return xr(i),null;case 5:if(V(i),o=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&Es(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return xr(i),null}if(s=M.current,ei(i))hc(i);else{switch(p=Ca(K.current),s){case 1:s=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=p.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?p.createElement("select",{is:u.is}):p.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?p.createElement(o,{is:u.is}):p.createElement(o)}}s[Gt]=i,s[Ct]=u;e:for(p=i.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break e;for(;p.sibling===null;){if(p.return===null||p.return===i)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}i.stateNode=s;e:switch(Dr(s,o,u),o){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Es(i)}}return xr(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&Es(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(n(166));if(s=K.current,ei(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,p=Or,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}s[Gt]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Dd(s.nodeValue,o)),s||on(i)}else s=Ca(s).createTextNode(u),s[Gt]=i,i.stateNode=s}return xr(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=ei(i),u!==null&&u.dehydrated!==null){if(s===null){if(!p)throw Error(n(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Gt]=i}else ti(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;xr(i),p=!1}else p=gc(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(bs(i),i):(bs(i),null)}if(bs(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,s=s!==null&&s.memoizedState!==null,o){u=i.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==p&&(u.flags|=2048)}return o!==s&&o&&(i.child.flags|=8192),ha(i,i.updateQueue),xr(i),null;case 4:return Ae(),s===null&&yl(i.stateNode.containerInfo),xr(i),null;case 10:return ys(i.type),xr(i),null;case 19:if(B(wr),p=i.memoizedState,p===null)return xr(i),null;if(u=(i.flags&128)!==0,m=p.rendering,m===null)if(u)gi(p,!1);else{if(hr!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(m=ua(s),m!==null){for(i.flags|=128,gi(p,!1),s=m.updateQueue,i.updateQueue=s,ha(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)xc(o,s),o=o.sibling;return j(wr,wr.current&1|2),i.child}s=s.sibling}p.tail!==null&&Ce()>ya&&(i.flags|=128,u=!0,gi(p,!1),i.lanes=4194304)}else{if(!u)if(s=ua(m),s!==null){if(i.flags|=128,u=!0,s=s.updateQueue,i.updateQueue=s,ha(i,s),gi(p,!0),p.tail===null&&p.tailMode==="hidden"&&!m.alternate&&!Kt)return xr(i),null}else 2*Ce()-p.renderingStartTime>ya&&o!==536870912&&(i.flags|=128,u=!0,gi(p,!1),i.lanes=4194304);p.isBackwards?(m.sibling=i.child,i.child=m):(s=p.last,s!==null?s.sibling=m:i.child=m,p.last=m)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ce(),i.sibling=null,s=wr.current,j(wr,u?s&1|2:s&1),i):(xr(i),null);case 22:case 23:return bs(i),bo(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(xr(i),i.subtreeFlags&6&&(i.flags|=8192)):xr(i),o=i.updateQueue,o!==null&&ha(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&B(un),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ys(Sr),xr(i),null;case 25:return null;case 30:return null}throw Error(n(156,i.tag))}function lx(s,i){switch(io(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ys(Sr),Ae(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return V(i),null;case 13:if(bs(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(n(340));ti()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return B(wr),null;case 4:return Ae(),null;case 10:return ys(i.type),null;case 22:case 23:return bs(i),bo(),s!==null&&B(un),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return ys(Sr),null;case 25:return null;default:return null}}function zu(s,i){switch(io(i),i.tag){case 3:ys(Sr),Ae();break;case 26:case 27:case 5:V(i);break;case 4:Ae();break;case 13:bs(i);break;case 19:B(wr);break;case 10:ys(i.type);break;case 22:case 23:bs(i),bo(),s!==null&&B(un);break;case 24:ys(Sr)}}function yi(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&s)===s){u=void 0;var m=o.create,w=o.inst;u=m(),w.destroy=u}o=o.next}while(o!==p)}}catch(O){sr(i,i.return,O)}}function Ls(s,i,o){try{var u=i.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var m=p.next;u=m;do{if((u.tag&s)===s){var w=u.inst,O=w.destroy;if(O!==void 0){w.destroy=void 0,p=i;var Z=o,me=O;try{me()}catch(Ie){sr(p,Z,Ie)}}}u=u.next}while(u!==m)}}catch(Ie){sr(i,i.return,Ie)}}function $u(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{Cc(i,o)}catch(u){sr(s,s.return,u)}}}function Uu(s,i,o){o.props=fn(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){sr(s,i,u)}}function _i(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(p){sr(s,i,p)}}function ds(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){sr(s,i,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){sr(s,i,p)}else o.current=null}function Wu(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){sr(s,s.return,p)}}function Xo(s,i,o){try{var u=s.stateNode;kx(u,s.type,o,i),u[Ct]=i}catch(p){sr(s,s.return,p)}}function qu(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&qs(s.type)||s.tag===4}function Yo(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||qu(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&qs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ko(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Ta));else if(u!==4&&(u===27&&qs(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(Ko(s,i,o),s=s.sibling;s!==null;)Ko(s,i,o),s=s.sibling}function ma(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&(u===27&&qs(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(ma(s,i,o),s=s.sibling;s!==null;)ma(s,i,o),s=s.sibling}function Hu(s){var i=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Dr(i,u,o),i[Gt]=s,i[Ct]=o}catch(m){sr(s,s.return,m)}}var js=!1,gr=!1,Qo=!1,Gu=typeof WeakSet=="function"?WeakSet:Set,Cr=null;function cx(s,i){if(s=s.containerInfo,vl=Ia,s=sc(s),Xa(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var w=0,O=-1,Z=-1,me=0,Ie=0,Me=s,je=null;t:for(;;){for(var we;Me!==o||p!==0&&Me.nodeType!==3||(O=w+p),Me!==m||u!==0&&Me.nodeType!==3||(Z=w+u),Me.nodeType===3&&(w+=Me.nodeValue.length),(we=Me.firstChild)!==null;)je=Me,Me=we;for(;;){if(Me===s)break t;if(je===o&&++me===p&&(O=w),je===m&&++Ie===u&&(Z=w),(we=Me.nextSibling)!==null)break;Me=je,je=Me.parentNode}Me=we}o=O===-1||Z===-1?null:{start:O,end:Z}}else o=null}o=o||{start:0,end:0}}else o=null;for(El={focusedElem:s,selectionRange:o},Ia=!1,Cr=i;Cr!==null;)if(i=Cr,s=i.child,(i.subtreeFlags&1024)!==0&&s!==null)s.return=i,Cr=s;else for(;Cr!==null;){switch(i=Cr,m=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&m!==null){s=void 0,o=i,p=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Tt=fn(o.type,p,o.elementType===o.type);s=u.getSnapshotBeforeUpdate(Tt,m),u.__reactInternalSnapshotBeforeUpdate=s}catch(jt){sr(o,o.return,jt)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)wl(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":wl(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=i.sibling,s!==null){s.return=i.return,Cr=s;break}Cr=i.return}}function Vu(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ms(s,o),u&4&&yi(5,o);break;case 1:if(Ms(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(w){sr(o,o.return,w)}else{var p=fn(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(p,i,s.__reactInternalSnapshotBeforeUpdate)}catch(w){sr(o,o.return,w)}}u&64&&$u(o),u&512&&_i(o,o.return);break;case 3:if(Ms(s,o),u&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Cc(s,i)}catch(w){sr(o,o.return,w)}}break;case 27:i===null&&u&4&&Hu(o);case 26:case 5:Ms(s,o),i===null&&u&4&&Wu(o),u&512&&_i(o,o.return);break;case 12:Ms(s,o);break;case 13:Ms(s,o),u&4&&Ku(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=yx.bind(null,o),Lx(s,o))));break;case 22:if(u=o.memoizedState!==null||js,!u){i=i!==null&&i.memoizedState!==null||gr,p=js;var m=gr;js=u,(gr=i)&&!m?Fs(s,o,(o.subtreeFlags&8772)!==0):Ms(s,o),js=p,gr=m}break;case 30:break;default:Ms(s,o)}}function Xu(s){var i=s.alternate;i!==null&&(s.alternate=null,Xu(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&P(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var cr=null,Pr=!1;function Ss(s,i,o){for(o=o.child;o!==null;)Yu(s,i,o),o=o.sibling}function Yu(s,i,o){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(it,o)}catch{}switch(o.tag){case 26:gr||ds(o,i),Ss(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:gr||ds(o,i);var u=cr,p=Pr;qs(o.type)&&(cr=o.stateNode,Pr=!1),Ss(s,i,o),Ci(o.stateNode),cr=u,Pr=p;break;case 5:gr||ds(o,i);case 6:if(u=cr,p=Pr,cr=null,Ss(s,i,o),cr=u,Pr=p,cr!==null)if(Pr)try{(cr.nodeType===9?cr.body:cr.nodeName==="HTML"?cr.ownerDocument.body:cr).removeChild(o.stateNode)}catch(m){sr(o,i,m)}else try{cr.removeChild(o.stateNode)}catch(m){sr(o,i,m)}break;case 18:cr!==null&&(Pr?(s=cr,Md(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),Li(s)):Md(cr,o.stateNode));break;case 4:u=cr,p=Pr,cr=o.stateNode.containerInfo,Pr=!0,Ss(s,i,o),cr=u,Pr=p;break;case 0:case 11:case 14:case 15:gr||Ls(2,o,i),gr||Ls(4,o,i),Ss(s,i,o);break;case 1:gr||(ds(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Uu(o,i,u)),Ss(s,i,o);break;case 21:Ss(s,i,o);break;case 22:gr=(u=gr)||o.memoizedState!==null,Ss(s,i,o),gr=u;break;default:Ss(s,i,o)}}function Ku(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Li(s)}catch(o){sr(i,i.return,o)}}function ux(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Gu),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Gu),i;default:throw Error(n(435,s.tag))}}function Jo(s,i){var o=ux(s);i.forEach(function(u){var p=_x.bind(null,s,u);o.has(u)||(o.add(u),u.then(p,p))})}function qr(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],m=s,w=i,O=w;e:for(;O!==null;){switch(O.tag){case 27:if(qs(O.type)){cr=O.stateNode,Pr=!1;break e}break;case 5:cr=O.stateNode,Pr=!1;break e;case 3:case 4:cr=O.stateNode.containerInfo,Pr=!0;break e}O=O.return}if(cr===null)throw Error(n(160));Yu(m,w,p),cr=null,Pr=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Qu(i,s),i=i.sibling}var as=null;function Qu(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:qr(i,s),Hr(s),u&4&&(Ls(3,s,s.return),yi(3,s),Ls(5,s,s.return));break;case 1:qr(i,s),Hr(s),u&512&&(gr||o===null||ds(o,o.return)),u&64&&js&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=as;if(qr(i,s),Hr(s),u&512&&(gr||o===null||ds(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":m=p.getElementsByTagName("title")[0],(!m||m[F]||m[Gt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(u),p.head.insertBefore(m,p.querySelector("head > title"))),Dr(m,u,o),m[Gt]=s,ue(m),u=m;break e;case"link":var w=Hd("link","href",p).get(u+(o.href||""));if(w){for(var O=0;O<w.length;O++)if(m=w[O],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(O,1);break t}}m=p.createElement(u),Dr(m,u,o),p.head.appendChild(m);break;case"meta":if(w=Hd("meta","content",p).get(u+(o.content||""))){for(O=0;O<w.length;O++)if(m=w[O],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(O,1);break t}}m=p.createElement(u),Dr(m,u,o),p.head.appendChild(m);break;default:throw Error(n(468,u))}m[Gt]=s,ue(m),u=m}s.stateNode=u}else Gd(p,s.type,s.stateNode);else s.stateNode=qd(p,u,s.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Gd(p,s.type,s.stateNode):qd(p,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Xo(s,s.memoizedProps,o.memoizedProps)}break;case 27:qr(i,s),Hr(s),u&512&&(gr||o===null||ds(o,o.return)),o!==null&&u&4&&Xo(s,s.memoizedProps,o.memoizedProps);break;case 5:if(qr(i,s),Hr(s),u&512&&(gr||o===null||ds(o,o.return)),s.flags&32){p=s.stateNode;try{Er(p,"")}catch(we){sr(s,s.return,we)}}u&4&&s.stateNode!=null&&(p=s.memoizedProps,Xo(s,p,o!==null?o.memoizedProps:p)),u&1024&&(Qo=!0);break;case 6:if(qr(i,s),Hr(s),u&4){if(s.stateNode===null)throw Error(n(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(we){sr(s,s.return,we)}}break;case 3:if(Na=null,p=as,as=ka(i.containerInfo),qr(i,s),as=p,Hr(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Li(i.containerInfo)}catch(we){sr(s,s.return,we)}Qo&&(Qo=!1,Ju(s));break;case 4:u=as,as=ka(s.stateNode.containerInfo),qr(i,s),Hr(s),as=u;break;case 12:qr(i,s),Hr(s);break;case 13:qr(i,s),Hr(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(nl=Ce()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Jo(s,u)));break;case 22:p=s.memoizedState!==null;var Z=o!==null&&o.memoizedState!==null,me=js,Ie=gr;if(js=me||p,gr=Ie||Z,qr(i,s),gr=Ie,js=me,Hr(s),u&8192)e:for(i=s.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(o===null||Z||js||gr||xn(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){Z=o=i;try{if(m=Z.stateNode,p)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{O=Z.stateNode;var Me=Z.memoizedProps.style,je=Me!=null&&Me.hasOwnProperty("display")?Me.display:null;O.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(we){sr(Z,Z.return,we)}}}else if(i.tag===6){if(o===null){Z=i;try{Z.stateNode.nodeValue=p?"":Z.memoizedProps}catch(we){sr(Z,Z.return,we)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Jo(s,o))));break;case 19:qr(i,s),Hr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Jo(s,u)));break;case 30:break;case 21:break;default:qr(i,s),Hr(s)}}function Hr(s){var i=s.flags;if(i&2){try{for(var o,u=s.return;u!==null;){if(qu(u)){o=u;break}u=u.return}if(o==null)throw Error(n(160));switch(o.tag){case 27:var p=o.stateNode,m=Yo(s);ma(s,m,p);break;case 5:var w=o.stateNode;o.flags&32&&(Er(w,""),o.flags&=-33);var O=Yo(s);ma(s,O,w);break;case 3:case 4:var Z=o.stateNode.containerInfo,me=Yo(s);Ko(s,me,Z);break;default:throw Error(n(161))}}catch(Ie){sr(s,s.return,Ie)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Ju(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Ju(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function Ms(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Vu(s,i.alternate,i),i=i.sibling}function xn(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Ls(4,i,i.return),xn(i);break;case 1:ds(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Uu(i,i.return,o),xn(i);break;case 27:Ci(i.stateNode);case 26:case 5:ds(i,i.return),xn(i);break;case 22:i.memoizedState===null&&xn(i);break;case 30:xn(i);break;default:xn(i)}s=s.sibling}}function Fs(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,p=s,m=i,w=m.flags;switch(m.tag){case 0:case 11:case 15:Fs(p,m,o),yi(4,m);break;case 1:if(Fs(p,m,o),u=m,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(me){sr(u,u.return,me)}if(u=m,p=u.updateQueue,p!==null){var O=u.stateNode;try{var Z=p.shared.hiddenCallbacks;if(Z!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Z.length;p++)Tc(Z[p],O)}catch(me){sr(u,u.return,me)}}o&&w&64&&$u(m),_i(m,m.return);break;case 27:Hu(m);case 26:case 5:Fs(p,m,o),o&&u===null&&w&4&&Wu(m),_i(m,m.return);break;case 12:Fs(p,m,o);break;case 13:Fs(p,m,o),o&&w&4&&Ku(p,m);break;case 22:m.memoizedState===null&&Fs(p,m,o),_i(m,m.return);break;case 30:break;default:Fs(p,m,o)}i=i.sibling}}function Zo(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&ni(o))}function el(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&ni(s))}function fs(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zu(s,i,o,u),i=i.sibling}function Zu(s,i,o,u){var p=i.flags;switch(i.tag){case 0:case 11:case 15:fs(s,i,o,u),p&2048&&yi(9,i);break;case 1:fs(s,i,o,u);break;case 3:fs(s,i,o,u),p&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&ni(s)));break;case 12:if(p&2048){fs(s,i,o,u),s=i.stateNode;try{var m=i.memoizedProps,w=m.id,O=m.onPostCommit;typeof O=="function"&&O(w,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Z){sr(i,i.return,Z)}}else fs(s,i,o,u);break;case 13:fs(s,i,o,u);break;case 23:break;case 22:m=i.stateNode,w=i.alternate,i.memoizedState!==null?m._visibility&2?fs(s,i,o,u):bi(s,i):m._visibility&2?fs(s,i,o,u):(m._visibility|=2,Dn(s,i,o,u,(i.subtreeFlags&10256)!==0)),p&2048&&Zo(w,i);break;case 24:fs(s,i,o,u),p&2048&&el(i.alternate,i);break;default:fs(s,i,o,u)}}function Dn(s,i,o,u,p){for(p=p&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=s,w=i,O=o,Z=u,me=w.flags;switch(w.tag){case 0:case 11:case 15:Dn(m,w,O,Z,p),yi(8,w);break;case 23:break;case 22:var Ie=w.stateNode;w.memoizedState!==null?Ie._visibility&2?Dn(m,w,O,Z,p):bi(m,w):(Ie._visibility|=2,Dn(m,w,O,Z,p)),p&&me&2048&&Zo(w.alternate,w);break;case 24:Dn(m,w,O,Z,p),p&&me&2048&&el(w.alternate,w);break;default:Dn(m,w,O,Z,p)}i=i.sibling}}function bi(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,p=u.flags;switch(u.tag){case 22:bi(o,u),p&2048&&Zo(u.alternate,u);break;case 24:bi(o,u),p&2048&&el(u.alternate,u);break;default:bi(o,u)}i=i.sibling}}var vi=8192;function Bn(s){if(s.subtreeFlags&vi)for(s=s.child;s!==null;)ed(s),s=s.sibling}function ed(s){switch(s.tag){case 26:Bn(s),s.flags&vi&&s.memoizedState!==null&&Yx(as,s.memoizedState,s.memoizedProps);break;case 5:Bn(s);break;case 3:case 4:var i=as;as=ka(s.stateNode.containerInfo),Bn(s),as=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=vi,vi=16777216,Bn(s),vi=i):Bn(s));break;default:Bn(s)}}function td(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Ei(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Cr=u,sd(u,s)}td(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)rd(s),s=s.sibling}function rd(s){switch(s.tag){case 0:case 11:case 15:Ei(s),s.flags&2048&&Ls(9,s,s.return);break;case 3:Ei(s);break;case 12:Ei(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,ga(s)):Ei(s);break;default:Ei(s)}}function ga(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Cr=u,sd(u,s)}td(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Ls(8,i,i.return),ga(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,ga(i));break;default:ga(i)}s=s.sibling}}function sd(s,i){for(;Cr!==null;){var o=Cr;switch(o.tag){case 0:case 11:case 15:Ls(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ni(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Cr=u;else e:for(o=s;Cr!==null;){u=Cr;var p=u.sibling,m=u.return;if(Xu(u),u===o){Cr=null;break e}if(p!==null){p.return=m,Cr=p;break e}Cr=m}}}var dx={getCacheForType:function(s){var i=Ir(Sr),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o}},fx=typeof WeakMap=="function"?WeakMap:Map,Jt=0,ar=null,zt=null,Ht=0,Zt=0,Gr=null,Ps=!1,In=!1,tl=!1,ws=0,hr=0,zs=0,pn=0,rl=0,ss=0,On=0,ji=null,zr=null,sl=!1,nl=0,ya=1/0,_a=null,$s=null,Nr=0,Us=null,Ln=null,Mn=0,il=0,al=null,nd=null,Si=0,ol=null;function Vr(){if((Jt&2)!==0&&Ht!==0)return Ht&-Ht;if(X.T!==null){var s=Sn;return s!==0?s:pl()}return Br()}function id(){ss===0&&(ss=(Ht&536870912)===0||Kt?ut():536870912);var s=rs.current;return s!==null&&(s.flags|=32),ss}function Xr(s,i,o){(s===ar&&(Zt===2||Zt===9)||s.cancelPendingCommit!==null)&&(Fn(s,0),Ws(s,Ht,ss,!1)),rt(s,o),((Jt&2)===0||s!==ar)&&(s===ar&&((Jt&2)===0&&(pn|=o),hr===4&&Ws(s,Ht,ss,!1)),xs(s))}function ad(s,i,o){if((Jt&6)!==0)throw Error(n(327));var u=!o&&(i&124)===0&&(i&s.expiredLanes)===0||Fe(s,i),p=u?hx(s,i):ul(s,i,!0),m=u;do{if(p===0){In&&!u&&Ws(s,i,0,!1);break}else{if(o=s.current.alternate,m&&!xx(o)){p=ul(s,i,!1),m=!1;continue}if(p===2){if(m=i,s.errorRecoveryDisabledLanes&m)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var O=s;p=ji;var Z=O.current.memoizedState.isDehydrated;if(Z&&(Fn(O,w).flags|=256),w=ul(O,w,!1),w!==2){if(tl&&!Z){O.errorRecoveryDisabledLanes|=m,pn|=m,p=4;break e}m=zr,zr=p,m!==null&&(zr===null?zr=m:zr.push.apply(zr,m))}p=w}if(m=!1,p!==2)continue}}if(p===1){Fn(s,0),Ws(s,i,0,!0);break}e:{switch(u=s,m=p,m){case 0:case 1:throw Error(n(345));case 4:if((i&4194048)!==i)break;case 6:Ws(u,i,ss,!Ps);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((i&62914560)===i&&(p=nl+300-Ce(),10<p)){if(Ws(u,i,ss,!Ps),Wt(u,0,!0)!==0)break e;u.timeoutHandle=Od(od.bind(null,u,o,zr,_a,sl,i,ss,pn,On,Ps,m,2,-0,0),p);break e}od(u,o,zr,_a,sl,i,ss,pn,On,Ps,m,0,-0,0)}}break}while(!0);xs(s)}function od(s,i,o,u,p,m,w,O,Z,me,Ie,Me,je,we){if(s.timeoutHandle=-1,Me=i.subtreeFlags,(Me&8192||(Me&16785408)===16785408)&&(Ni={stylesheets:null,count:0,unsuspend:Xx},ed(i),Me=Kx(),Me!==null)){s.cancelPendingCommit=Me(pd.bind(null,s,i,m,o,u,p,w,O,Z,Ie,1,je,we)),Ws(s,m,w,!me);return}pd(s,i,m,o,u,p,w,O,Z)}function xx(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],m=p.getSnapshot;p=p.value;try{if(!Ur(m(),p))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ws(s,i,o,u){i&=~rl,i&=~pn,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var p=i;0<p;){var m=31-ne(p),w=1<<m;u[m]=-1,p&=~w}o!==0&&Mt(s,o,i)}function ba(){return(Jt&6)===0?(wi(0),!1):!0}function ll(){if(zt!==null){if(Zt===0)var s=zt.return;else s=zt,gs=ln=null,wo(s),An=null,hi=0,s=zt;for(;s!==null;)zu(s.alternate,s),s=s.return;zt=null}}function Fn(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,Nx(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),ll(),ar=s,zt=o=ps(s.current,null),Ht=i,Zt=0,Gr=null,Ps=!1,In=Fe(s,i),tl=!1,On=ss=rl=pn=zs=hr=0,zr=ji=null,sl=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var p=31-ne(u),m=1<<p;i|=s[p],u&=~m}return ws=i,Ui(),o}function ld(s,i){Lt=null,X.H=oa,i===ai||i===Qi?(i=wc(),Zt=3):i===Ec?(i=wc(),Zt=4):Zt=i===Ru?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Gr=i,zt===null&&(hr=1,fa(s,Jr(i,s.current)))}function cd(){var s=X.H;return X.H=oa,s===null?oa:s}function ud(){var s=X.A;return X.A=dx,s}function cl(){hr=4,Ps||(Ht&4194048)!==Ht&&rs.current!==null||(In=!0),(zs&134217727)===0&&(pn&134217727)===0||ar===null||Ws(ar,Ht,ss,!1)}function ul(s,i,o){var u=Jt;Jt|=2;var p=cd(),m=ud();(ar!==s||Ht!==i)&&(_a=null,Fn(s,i)),i=!1;var w=hr;e:do try{if(Zt!==0&&zt!==null){var O=zt,Z=Gr;switch(Zt){case 8:ll(),w=6;break e;case 3:case 2:case 9:case 6:rs.current===null&&(i=!0);var me=Zt;if(Zt=0,Gr=null,Pn(s,O,Z,me),o&&In){w=0;break e}break;default:me=Zt,Zt=0,Gr=null,Pn(s,O,Z,me)}}px(),w=hr;break}catch(Ie){ld(s,Ie)}while(!0);return i&&s.shellSuspendCounter++,gs=ln=null,Jt=u,X.H=p,X.A=m,zt===null&&(ar=null,Ht=0,Ui()),w}function px(){for(;zt!==null;)dd(zt)}function hx(s,i){var o=Jt;Jt|=2;var u=cd(),p=ud();ar!==s||Ht!==i?(_a=null,ya=Ce()+500,Fn(s,i)):In=Fe(s,i);e:do try{if(Zt!==0&&zt!==null){i=zt;var m=Gr;t:switch(Zt){case 1:Zt=0,Gr=null,Pn(s,i,m,1);break;case 2:case 9:if(jc(m)){Zt=0,Gr=null,fd(i);break}i=function(){Zt!==2&&Zt!==9||ar!==s||(Zt=7),xs(s)},m.then(i,i);break e;case 3:Zt=7;break e;case 4:Zt=5;break e;case 7:jc(m)?(Zt=0,Gr=null,fd(i)):(Zt=0,Gr=null,Pn(s,i,m,7));break;case 5:var w=null;switch(zt.tag){case 26:w=zt.memoizedState;case 5:case 27:var O=zt;if(!w||Vd(w)){Zt=0,Gr=null;var Z=O.sibling;if(Z!==null)zt=Z;else{var me=O.return;me!==null?(zt=me,va(me)):zt=null}break t}}Zt=0,Gr=null,Pn(s,i,m,5);break;case 6:Zt=0,Gr=null,Pn(s,i,m,6);break;case 8:ll(),hr=6;break e;default:throw Error(n(462))}}mx();break}catch(Ie){ld(s,Ie)}while(!0);return gs=ln=null,X.H=u,X.A=p,Jt=o,zt!==null?0:(ar=null,Ht=0,Ui(),hr)}function mx(){for(;zt!==null&&!Te();)dd(zt)}function dd(s){var i=Fu(s.alternate,s,ws);s.memoizedProps=s.pendingProps,i===null?va(s):zt=i}function fd(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=Du(o,i,i.pendingProps,i.type,void 0,Ht);break;case 11:i=Du(o,i,i.pendingProps,i.type.render,i.ref,Ht);break;case 5:wo(i);default:zu(o,i),i=zt=xc(i,ws),i=Fu(o,i,ws)}s.memoizedProps=s.pendingProps,i===null?va(s):zt=i}function Pn(s,i,o,u){gs=ln=null,wo(i),An=null,hi=0;var p=i.return;try{if(ix(s,p,i,o,Ht)){hr=1,fa(s,Jr(o,s.current)),zt=null;return}}catch(m){if(p!==null)throw zt=p,m;hr=1,fa(s,Jr(o,s.current)),zt=null;return}i.flags&32768?(Kt||u===1?s=!0:In||(Ht&536870912)!==0?s=!1:(Ps=s=!0,(u===2||u===9||u===3||u===6)&&(u=rs.current,u!==null&&u.tag===13&&(u.flags|=16384))),xd(i,s)):va(i)}function va(s){var i=s;do{if((i.flags&32768)!==0){xd(i,Ps);return}s=i.return;var o=ox(i.alternate,i,ws);if(o!==null){zt=o;return}if(i=i.sibling,i!==null){zt=i;return}zt=i=s}while(i!==null);hr===0&&(hr=5)}function xd(s,i){do{var o=lx(s.alternate,s);if(o!==null){o.flags&=32767,zt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){zt=s;return}zt=s=o}while(s!==null);hr=6,zt=null}function pd(s,i,o,u,p,m,w,O,Z){s.cancelPendingCommit=null;do Ea();while(Nr!==0);if((Jt&6)!==0)throw Error(n(327));if(i!==null){if(i===s.current)throw Error(n(177));if(m=i.lanes|i.childLanes,m|=Za,xt(s,o,m,w,O,Z),s===ar&&(zt=ar=null,Ht=0),Ln=i,Us=s,Mn=o,il=m,al=p,nd=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,bx(Ye,function(){return _d(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,p=Se.p,Se.p=2,w=Jt,Jt|=4;try{cx(s,i,o)}finally{Jt=w,Se.p=p,X.T=u}}Nr=1,hd(),md(),gd()}}function hd(){if(Nr===1){Nr=0;var s=Us,i=Ln,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=Se.p;Se.p=2;var p=Jt;Jt|=4;try{Qu(i,s);var m=El,w=sc(s.containerInfo),O=m.focusedElem,Z=m.selectionRange;if(w!==O&&O&&O.ownerDocument&&rc(O.ownerDocument.documentElement,O)){if(Z!==null&&Xa(O)){var me=Z.start,Ie=Z.end;if(Ie===void 0&&(Ie=me),"selectionStart"in O)O.selectionStart=me,O.selectionEnd=Math.min(Ie,O.value.length);else{var Me=O.ownerDocument||document,je=Me&&Me.defaultView||window;if(je.getSelection){var we=je.getSelection(),Tt=O.textContent.length,jt=Math.min(Z.start,Tt),rr=Z.end===void 0?jt:Math.min(Z.end,Tt);!we.extend&&jt>rr&&(w=rr,rr=jt,jt=w);var de=tc(O,jt),ie=tc(O,rr);if(de&&ie&&(we.rangeCount!==1||we.anchorNode!==de.node||we.anchorOffset!==de.offset||we.focusNode!==ie.node||we.focusOffset!==ie.offset)){var xe=Me.createRange();xe.setStart(de.node,de.offset),we.removeAllRanges(),jt>rr?(we.addRange(xe),we.extend(ie.node,ie.offset)):(xe.setEnd(ie.node,ie.offset),we.addRange(xe))}}}}for(Me=[],we=O;we=we.parentNode;)we.nodeType===1&&Me.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<Me.length;O++){var Oe=Me[O];Oe.element.scrollLeft=Oe.left,Oe.element.scrollTop=Oe.top}}Ia=!!vl,El=vl=null}finally{Jt=p,Se.p=u,X.T=o}}s.current=i,Nr=2}}function md(){if(Nr===2){Nr=0;var s=Us,i=Ln,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=Se.p;Se.p=2;var p=Jt;Jt|=4;try{Vu(s,i.alternate,i)}finally{Jt=p,Se.p=u,X.T=o}}Nr=3}}function gd(){if(Nr===4||Nr===3){Nr=0,se();var s=Us,i=Ln,o=Mn,u=nd;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nr=5:(Nr=0,Ln=Us=null,yd(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&($s=null),yr(o),i=i.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(it,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=X.T,p=Se.p,Se.p=2,X.T=null;try{for(var m=s.onRecoverableError,w=0;w<u.length;w++){var O=u[w];m(O.value,{componentStack:O.stack})}}finally{X.T=i,Se.p=p}}(Mn&3)!==0&&Ea(),xs(s),p=s.pendingLanes,(o&4194090)!==0&&(p&42)!==0?s===ol?Si++:(Si=0,ol=s):Si=0,wi(0)}}function yd(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,ni(i)))}function Ea(s){return hd(),md(),gd(),_d()}function _d(){if(Nr!==5)return!1;var s=Us,i=il;il=0;var o=yr(Mn),u=X.T,p=Se.p;try{Se.p=32>o?32:o,X.T=null,o=al,al=null;var m=Us,w=Mn;if(Nr=0,Ln=Us=null,Mn=0,(Jt&6)!==0)throw Error(n(331));var O=Jt;if(Jt|=4,rd(m.current),Zu(m,m.current,w,o),Jt=O,wi(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(it,m)}catch{}return!0}finally{Se.p=p,X.T=u,yd(s,i)}}function bd(s,i,o){i=Jr(o,i),i=Po(s.stateNode,i,2),s=Ds(s,i,2),s!==null&&(rt(s,2),xs(s))}function sr(s,i,o){if(s.tag===3)bd(s,s,o);else for(;i!==null;){if(i.tag===3){bd(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($s===null||!$s.has(u))){s=Jr(o,s),o=Su(2),u=Ds(i,o,2),u!==null&&(wu(o,u,i,s),rt(u,2),xs(u));break}}i=i.return}}function dl(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new fx;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(o)||(tl=!0,p.add(o),s=gx.bind(null,s,i,o),i.then(s,s))}function gx(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,ar===s&&(Ht&o)===o&&(hr===4||hr===3&&(Ht&62914560)===Ht&&300>Ce()-nl?(Jt&2)===0&&Fn(s,0):rl|=o,On===Ht&&(On=0)),xs(s)}function vd(s,i){i===0&&(i=Q()),s=bn(s,i),s!==null&&(rt(s,i),xs(s))}function yx(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),vd(s,o)}function _x(s,i){var o=0;switch(s.tag){case 13:var u=s.stateNode,p=s.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(i),vd(s,o)}function bx(s,i){return Ne(s,i)}var ja=null,zn=null,fl=!1,Sa=!1,xl=!1,hn=0;function xs(s){s!==zn&&s.next===null&&(zn===null?ja=zn=s:zn=zn.next=s),Sa=!0,fl||(fl=!0,Ex())}function wi(s,i){if(!xl&&Sa){xl=!0;do for(var o=!1,u=ja;u!==null;){if(s!==0){var p=u.pendingLanes;if(p===0)var m=0;else{var w=u.suspendedLanes,O=u.pingedLanes;m=(1<<31-ne(42|s)+1)-1,m&=p&~(w&~O),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,wd(u,m))}else m=Ht,m=Wt(u,u===ar?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Fe(u,m)||(o=!0,wd(u,m));u=u.next}while(o);xl=!1}}function vx(){Ed()}function Ed(){Sa=fl=!1;var s=0;hn!==0&&(Ax()&&(s=hn),hn=0);for(var i=Ce(),o=null,u=ja;u!==null;){var p=u.next,m=jd(u,i);m===0?(u.next=null,o===null?ja=p:o.next=p,p===null&&(zn=o)):(o=u,(s!==0||(m&3)!==0)&&(Sa=!0)),u=p}wi(s)}function jd(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,p=s.expirationTimes,m=s.pendingLanes&-62914561;0<m;){var w=31-ne(m),O=1<<w,Z=p[w];Z===-1?((O&o)===0||(O&u)!==0)&&(p[w]=tt(O,i)):Z<=i&&(s.expiredLanes|=O),m&=~O}if(i=ar,o=Ht,o=Wt(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===i&&(Zt===2||Zt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&H(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Fe(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&H(u),yr(o)){case 2:case 8:o=ze;break;case 32:o=Ye;break;case 268435456:o=Ke;break;default:o=Ye}return u=Sd.bind(null,s),o=Ne(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&H(u),s.callbackPriority=2,s.callbackNode=null,2}function Sd(s,i){if(Nr!==0&&Nr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Ea()&&s.callbackNode!==o)return null;var u=Ht;return u=Wt(s,s===ar?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(ad(s,u,i),jd(s,Ce()),s.callbackNode!=null&&s.callbackNode===o?Sd.bind(null,s):null)}function wd(s,i){if(Ea())return null;ad(s,i,!0)}function Ex(){Dx(function(){(Jt&6)!==0?Ne(pe,vx):Ed()})}function pl(){return hn===0&&(hn=ut()),hn}function Rd(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:He(""+s)}function Td(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function jx(s,i,o,u,p){if(i==="submit"&&o&&o.stateNode===p){var m=Rd((p[Ct]||null).action),w=u.submitter;w&&(i=(i=w[Ct]||null)?Rd(i.formAction):w.getAttribute("formAction"),i!==null&&(m=i,w=null));var O=new Pi("action","action",null,u,p);s.push({event:O,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(hn!==0){var Z=w?Td(p,w):new FormData(p);Io(o,{pending:!0,data:Z,method:p.method,action:m},null,Z)}}else typeof m=="function"&&(O.preventDefault(),Z=w?Td(p,w):new FormData(p),Io(o,{pending:!0,data:Z,method:p.method,action:m},m,Z))},currentTarget:p}]})}}for(var hl=0;hl<Ja.length;hl++){var ml=Ja[hl],Sx=ml.toLowerCase(),wx=ml[0].toUpperCase()+ml.slice(1);is(Sx,"on"+wx)}is(ac,"onAnimationEnd"),is(oc,"onAnimationIteration"),is(lc,"onAnimationStart"),is("dblclick","onDoubleClick"),is("focusin","onFocus"),is("focusout","onBlur"),is(Uf,"onTransitionRun"),is(Wf,"onTransitionStart"),is(qf,"onTransitionCancel"),is(cc,"onTransitionEnd"),Ve("onMouseEnter",["mouseout","mouseover"]),Ve("onMouseLeave",["mouseout","mouseover"]),Ve("onPointerEnter",["pointerout","pointerover"]),Ve("onPointerLeave",["pointerout","pointerover"]),$e("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$e("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$e("onBeforeInput",["compositionend","keypress","textInput","paste"]),$e("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ri));function Cd(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],p=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var w=u.length-1;0<=w;w--){var O=u[w],Z=O.instance,me=O.currentTarget;if(O=O.listener,Z!==m&&p.isPropagationStopped())break e;m=O,p.currentTarget=me;try{m(p)}catch(Ie){da(Ie)}p.currentTarget=null,m=Z}else for(w=0;w<u.length;w++){if(O=u[w],Z=O.instance,me=O.currentTarget,O=O.listener,Z!==m&&p.isPropagationStopped())break e;m=O,p.currentTarget=me;try{m(p)}catch(Ie){da(Ie)}p.currentTarget=null,m=Z}}}}function $t(s,i){var o=i[Yr];o===void 0&&(o=i[Yr]=new Set);var u=s+"__bubble";o.has(u)||(kd(i,s,2,!1),o.add(u))}function gl(s,i,o){var u=0;i&&(u|=4),kd(o,s,u,i)}var wa="_reactListening"+Math.random().toString(36).slice(2);function yl(s){if(!s[wa]){s[wa]=!0,_e.forEach(function(o){o!=="selectionchange"&&(Rx.has(o)||gl(o,!1,s),gl(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[wa]||(i[wa]=!0,gl("selectionchange",!1,i))}}function kd(s,i,o,u){switch(Zd(i)){case 2:var p=Zx;break;case 8:p=ep;break;default:p=Dl}o=p.bind(null,i,o,s),p=void 0,!Js||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?s.addEventListener(i,o,{capture:!0,passive:p}):s.addEventListener(i,o,!0):p!==void 0?s.addEventListener(i,o,{passive:p}):s.addEventListener(i,o,!1)}function _l(s,i,o,u,p){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var O=u.stateNode.containerInfo;if(O===p)break;if(w===4)for(w=u.return;w!==null;){var Z=w.tag;if((Z===3||Z===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;O!==null;){if(w=q(O),w===null)return;if(Z=w.tag,Z===5||Z===6||Z===26||Z===27){u=m=w;continue e}O=O.parentNode}}u=u.return}jr(function(){var me=m,Ie=Bt(o),Me=[];e:{var je=uc.get(s);if(je!==void 0){var we=Pi,Tt=s;switch(s){case"keypress":if(Mi(o)===0)break e;case"keydown":case"keyup":we=bf;break;case"focusin":Tt="focus",we=Wa;break;case"focusout":Tt="blur",we=Wa;break;case"beforeblur":case"afterblur":we=Wa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=lf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=jf;break;case ac:case oc:case lc:we=df;break;case cc:we=wf;break;case"scroll":case"scrollend":we=af;break;case"wheel":we=Tf;break;case"copy":case"cut":case"paste":we=xf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=$l;break;case"toggle":case"beforetoggle":we=kf}var jt=(i&4)!==0,rr=!jt&&(s==="scroll"||s==="scrollend"),de=jt?je!==null?je+"Capture":null:je;jt=[];for(var ie=me,xe;ie!==null;){var Oe=ie;if(xe=Oe.stateNode,Oe=Oe.tag,Oe!==5&&Oe!==26&&Oe!==27||xe===null||de===null||(Oe=Ts(ie,de),Oe!=null&&jt.push(Ti(ie,Oe,xe))),rr)break;ie=ie.return}0<jt.length&&(je=new we(je,Tt,null,o,Ie),Me.push({event:je,listeners:jt}))}}if((i&7)===0){e:{if(je=s==="mouseover"||s==="pointerover",we=s==="mouseout"||s==="pointerout",je&&o!==dt&&(Tt=o.relatedTarget||o.fromElement)&&(q(Tt)||Tt[Ut]))break e;if((we||je)&&(je=Ie.window===Ie?Ie:(je=Ie.ownerDocument)?je.defaultView||je.parentWindow:window,we?(Tt=o.relatedTarget||o.toElement,we=me,Tt=Tt?q(Tt):null,Tt!==null&&(rr=l(Tt),jt=Tt.tag,Tt!==rr||jt!==5&&jt!==27&&jt!==6)&&(Tt=null)):(we=null,Tt=me),we!==Tt)){if(jt=Pl,Oe="onMouseLeave",de="onMouseEnter",ie="mouse",(s==="pointerout"||s==="pointerover")&&(jt=$l,Oe="onPointerLeave",de="onPointerEnter",ie="pointer"),rr=we==null?je:he(we),xe=Tt==null?je:he(Tt),je=new jt(Oe,ie+"leave",we,o,Ie),je.target=rr,je.relatedTarget=xe,Oe=null,q(Ie)===me&&(jt=new jt(de,ie+"enter",Tt,o,Ie),jt.target=xe,jt.relatedTarget=rr,Oe=jt),rr=Oe,we&&Tt)t:{for(jt=we,de=Tt,ie=0,xe=jt;xe;xe=$n(xe))ie++;for(xe=0,Oe=de;Oe;Oe=$n(Oe))xe++;for(;0<ie-xe;)jt=$n(jt),ie--;for(;0<xe-ie;)de=$n(de),xe--;for(;ie--;){if(jt===de||de!==null&&jt===de.alternate)break t;jt=$n(jt),de=$n(de)}jt=null}else jt=null;we!==null&&Ad(Me,je,we,jt,!1),Tt!==null&&rr!==null&&Ad(Me,rr,Tt,jt,!0)}}e:{if(je=me?he(me):window,we=je.nodeName&&je.nodeName.toLowerCase(),we==="select"||we==="input"&&je.type==="file")var ft=Yl;else if(Vl(je))if(Kl)ft=Pf;else{ft=Mf;var Ft=Lf}else we=je.nodeName,!we||we.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?me&&We(me.elementType)&&(ft=Yl):ft=Ff;if(ft&&(ft=ft(s,me))){Xl(Me,ft,o,Ie);break e}Ft&&Ft(s,je,me),s==="focusout"&&me&&je.type==="number"&&me.memoizedProps.value!=null&&Ks(je,"number",je.value)}switch(Ft=me?he(me):window,s){case"focusin":(Vl(Ft)||Ft.contentEditable==="true")&&(gn=Ft,Ya=me,Zn=null);break;case"focusout":Zn=Ya=gn=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":Ka=!1,nc(Me,o,Ie);break;case"selectionchange":if($f)break;case"keydown":case"keyup":nc(Me,o,Ie)}var yt;if(Ha)e:{switch(s){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else mn?Hl(s,o)&&(St="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(St="onCompositionStart");St&&(Ul&&o.locale!=="ko"&&(mn||St!=="onCompositionStart"?St==="onCompositionEnd"&&mn&&(yt=Ml()):(ls=Ie,Hn="value"in ls?ls.value:ls.textContent,mn=!0)),Ft=Ra(me,St),0<Ft.length&&(St=new zl(St,s,null,o,Ie),Me.push({event:St,listeners:Ft}),yt?St.data=yt:(yt=Gl(o),yt!==null&&(St.data=yt)))),(yt=Nf?Df(s,o):Bf(s,o))&&(St=Ra(me,"onBeforeInput"),0<St.length&&(Ft=new zl("onBeforeInput","beforeinput",null,o,Ie),Me.push({event:Ft,listeners:St}),Ft.data=yt)),jx(Me,s,me,o,Ie)}Cd(Me,i)})}function Ti(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Ra(s,i){for(var o=i+"Capture",u=[];s!==null;){var p=s,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=Ts(s,o),p!=null&&u.unshift(Ti(s,p,m)),p=Ts(s,i),p!=null&&u.push(Ti(s,p,m))),s.tag===3)return u;s=s.return}return[]}function $n(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Ad(s,i,o,u,p){for(var m=i._reactName,w=[];o!==null&&o!==u;){var O=o,Z=O.alternate,me=O.stateNode;if(O=O.tag,Z!==null&&Z===u)break;O!==5&&O!==26&&O!==27||me===null||(Z=me,p?(me=Ts(o,m),me!=null&&w.unshift(Ti(o,me,Z))):p||(me=Ts(o,m),me!=null&&w.push(Ti(o,me,Z)))),o=o.return}w.length!==0&&s.push({event:i,listeners:w})}var Tx=/\r\n?/g,Cx=/\u0000|\uFFFD/g;function Nd(s){return(typeof s=="string"?s:""+s).replace(Tx,`
`).replace(Cx,"")}function Dd(s,i){return i=Nd(i),Nd(s)===i}function Ta(){}function tr(s,i,o,u,p,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Er(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Er(s,""+u);break;case"className":qt(s,"class",u);break;case"tabIndex":qt(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":qt(s,o,u);break;case"style":Ge(s,u,m);break;case"data":if(i!=="object"){qt(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=He(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&tr(s,i,"name",p.name,p,null),tr(s,i,"formEncType",p.formEncType,p,null),tr(s,i,"formMethod",p.formMethod,p,null),tr(s,i,"formTarget",p.formTarget,p,null)):(tr(s,i,"encType",p.encType,p,null),tr(s,i,"method",p.method,p,null),tr(s,i,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=He(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=Ta);break;case"onScroll":u!=null&&$t("scroll",s);break;case"onScrollEnd":u!=null&&$t("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(n(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=He(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":$t("beforetoggle",s),$t("toggle",s),Vt(s,"popover",u);break;case"xlinkActuate":Yt(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Vt(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Xe.get(o)||o,Vt(s,o,u))}}function bl(s,i,o,u,p,m){switch(o){case"style":Ge(s,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(n(60));s.innerHTML=o}}break;case"children":typeof u=="string"?Er(s,u):(typeof u=="number"||typeof u=="bigint")&&Er(s,""+u);break;case"onScroll":u!=null&&$t("scroll",s);break;case"onScrollEnd":u!=null&&$t("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Ta);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ee.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),i=o.slice(2,p?o.length-7:void 0),m=s[Ct]||null,m=m!=null?m[o]:null,typeof m=="function"&&s.removeEventListener(i,m,p),typeof u=="function")){typeof m!="function"&&m!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,p);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Vt(s,o,u)}}}function Dr(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",s),$t("load",s);var u=!1,p=!1,m;for(m in o)if(o.hasOwnProperty(m)){var w=o[m];if(w!=null)switch(m){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:tr(s,i,m,w,o,null)}}p&&tr(s,i,"srcSet",o.srcSet,o,null),u&&tr(s,i,"src",o.src,o,null);return;case"input":$t("invalid",s);var O=m=w=p=null,Z=null,me=null;for(u in o)if(o.hasOwnProperty(u)){var Ie=o[u];if(Ie!=null)switch(u){case"name":p=Ie;break;case"type":w=Ie;break;case"checked":Z=Ie;break;case"defaultChecked":me=Ie;break;case"value":m=Ie;break;case"defaultValue":O=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(n(137,i));break;default:tr(s,i,u,Ie,o,null)}}dr(s,m,O,Z,me,w,p,!1),_t(s);return;case"select":$t("invalid",s),u=w=m=null;for(p in o)if(o.hasOwnProperty(p)&&(O=o[p],O!=null))switch(p){case"value":m=O;break;case"defaultValue":w=O;break;case"multiple":u=O;default:tr(s,i,p,O,o,null)}i=m,o=w,s.multiple=!!u,i!=null?Kr(s,!!u,i,!1):o!=null&&Kr(s,!!u,o,!0);return;case"textarea":$t("invalid",s),m=p=u=null;for(w in o)if(o.hasOwnProperty(w)&&(O=o[w],O!=null))switch(w){case"value":u=O;break;case"defaultValue":p=O;break;case"children":m=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(n(91));break;default:tr(s,i,w,O,o,null)}Qt(s,u,p,m),_t(s);return;case"option":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tr(s,i,Z,u,o,null)}return;case"dialog":$t("beforetoggle",s),$t("toggle",s),$t("cancel",s),$t("close",s);break;case"iframe":case"object":$t("load",s);break;case"video":case"audio":for(u=0;u<Ri.length;u++)$t(Ri[u],s);break;case"image":$t("error",s),$t("load",s);break;case"details":$t("toggle",s);break;case"embed":case"source":case"link":$t("error",s),$t("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in o)if(o.hasOwnProperty(me)&&(u=o[me],u!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:tr(s,i,me,u,o,null)}return;default:if(We(i)){for(Ie in o)o.hasOwnProperty(Ie)&&(u=o[Ie],u!==void 0&&bl(s,i,Ie,u,o,void 0));return}}for(O in o)o.hasOwnProperty(O)&&(u=o[O],u!=null&&tr(s,i,O,u,o,null))}function kx(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,w=null,O=null,Z=null,me=null,Ie=null;for(we in o){var Me=o[we];if(o.hasOwnProperty(we)&&Me!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":Z=Me;default:u.hasOwnProperty(we)||tr(s,i,we,null,u,Me)}}for(var je in u){var we=u[je];if(Me=o[je],u.hasOwnProperty(je)&&(we!=null||Me!=null))switch(je){case"type":m=we;break;case"name":p=we;break;case"checked":me=we;break;case"defaultChecked":Ie=we;break;case"value":w=we;break;case"defaultValue":O=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(n(137,i));break;default:we!==Me&&tr(s,i,je,we,u,Me)}}ir(s,w,O,Z,me,Ie,m,p);return;case"select":we=w=O=je=null;for(m in o)if(Z=o[m],o.hasOwnProperty(m)&&Z!=null)switch(m){case"value":break;case"multiple":we=Z;default:u.hasOwnProperty(m)||tr(s,i,m,null,u,Z)}for(p in u)if(m=u[p],Z=o[p],u.hasOwnProperty(p)&&(m!=null||Z!=null))switch(p){case"value":je=m;break;case"defaultValue":O=m;break;case"multiple":w=m;default:m!==Z&&tr(s,i,p,m,u,Z)}i=O,o=w,u=we,je!=null?Kr(s,!!o,je,!1):!!u!=!!o&&(i!=null?Kr(s,!!o,i,!0):Kr(s,!!o,o?[]:"",!1));return;case"textarea":we=je=null;for(O in o)if(p=o[O],o.hasOwnProperty(O)&&p!=null&&!u.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:tr(s,i,O,null,u,p)}for(w in u)if(p=u[w],m=o[w],u.hasOwnProperty(w)&&(p!=null||m!=null))switch(w){case"value":je=p;break;case"defaultValue":we=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==m&&tr(s,i,w,p,u,m)}Qs(s,je,we);return;case"option":for(var Tt in o)if(je=o[Tt],o.hasOwnProperty(Tt)&&je!=null&&!u.hasOwnProperty(Tt))switch(Tt){case"selected":s.selected=!1;break;default:tr(s,i,Tt,null,u,je)}for(Z in u)if(je=u[Z],we=o[Z],u.hasOwnProperty(Z)&&je!==we&&(je!=null||we!=null))switch(Z){case"selected":s.selected=je&&typeof je!="function"&&typeof je!="symbol";break;default:tr(s,i,Z,je,u,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in o)je=o[jt],o.hasOwnProperty(jt)&&je!=null&&!u.hasOwnProperty(jt)&&tr(s,i,jt,null,u,je);for(me in u)if(je=u[me],we=o[me],u.hasOwnProperty(me)&&je!==we&&(je!=null||we!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(n(137,i));break;default:tr(s,i,me,je,u,we)}return;default:if(We(i)){for(var rr in o)je=o[rr],o.hasOwnProperty(rr)&&je!==void 0&&!u.hasOwnProperty(rr)&&bl(s,i,rr,void 0,u,je);for(Ie in u)je=u[Ie],we=o[Ie],!u.hasOwnProperty(Ie)||je===we||je===void 0&&we===void 0||bl(s,i,Ie,je,u,we);return}}for(var de in o)je=o[de],o.hasOwnProperty(de)&&je!=null&&!u.hasOwnProperty(de)&&tr(s,i,de,null,u,je);for(Me in u)je=u[Me],we=o[Me],!u.hasOwnProperty(Me)||je===we||je==null&&we==null||tr(s,i,Me,je,u,we)}var vl=null,El=null;function Ca(s){return s.nodeType===9?s:s.ownerDocument}function Bd(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Id(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function jl(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Sl=null;function Ax(){var s=window.event;return s&&s.type==="popstate"?s===Sl?!1:(Sl=s,!0):(Sl=null,!1)}var Od=typeof setTimeout=="function"?setTimeout:void 0,Nx=typeof clearTimeout=="function"?clearTimeout:void 0,Ld=typeof Promise=="function"?Promise:void 0,Dx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ld<"u"?function(s){return Ld.resolve(null).then(s).catch(Bx)}:Od;function Bx(s){setTimeout(function(){throw s})}function qs(s){return s==="head"}function Md(s,i){var o=i,u=0,p=0;do{var m=o.nextSibling;if(s.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var w=s.ownerDocument;if(o&1&&Ci(w.documentElement),o&2&&Ci(w.body),o&4)for(o=w.head,Ci(o),w=o.firstChild;w;){var O=w.nextSibling,Z=w.nodeName;w[F]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=O}}if(p===0){s.removeChild(m),Li(i);return}p--}else o==="$"||o==="$?"||o==="$!"?p++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Li(i)}function wl(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":wl(o),P(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function Ix(s,i,o,u){for(;s.nodeType===1;){var p=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[F])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(m=s.getAttribute("rel"),m==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(m!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(m=s.getAttribute("src"),(m!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===m)return s}else return s;if(s=os(s.nextSibling),s===null)break}return null}function Ox(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=os(s.nextSibling),s===null))return null;return s}function Rl(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Lx(s,i){var o=s.ownerDocument;if(s.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function os(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}var Tl=null;function Fd(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return s;i--}else o==="/$"&&i++}s=s.previousSibling}return null}function Pd(s,i,o){switch(i=Ca(o),s){case"html":if(s=i.documentElement,!s)throw Error(n(452));return s;case"head":if(s=i.head,!s)throw Error(n(453));return s;case"body":if(s=i.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Ci(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);P(s)}var ns=new Map,zd=new Set;function ka(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Rs=Se.d;Se.d={f:Mx,r:Fx,D:Px,C:zx,L:$x,m:Ux,X:qx,S:Wx,M:Hx};function Mx(){var s=Rs.f(),i=ba();return s||i}function Fx(s){var i=G(s);i!==null&&i.tag===5&&i.type==="form"?au(i):Rs.r(s)}var Un=typeof document>"u"?null:document;function $d(s,i,o){var u=Un;if(u&&typeof i=="string"&&i){var p=nr(i);p='link[rel="'+s+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),zd.has(p)||(zd.add(p),s={rel:s,crossOrigin:o,href:i},u.querySelector(p)===null&&(i=u.createElement("link"),Dr(i,"link",s),ue(i),u.head.appendChild(i)))}}function Px(s){Rs.D(s),$d("dns-prefetch",s,null)}function zx(s,i){Rs.C(s,i),$d("preconnect",s,i)}function $x(s,i,o){Rs.L(s,i,o);var u=Un;if(u&&s&&i){var p='link[rel="preload"][as="'+nr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+nr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+nr(o.imageSizes)+'"]')):p+='[href="'+nr(s)+'"]';var m=p;switch(i){case"style":m=Wn(s);break;case"script":m=qn(s)}ns.has(m)||(s=h({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),ns.set(m,s),u.querySelector(p)!==null||i==="style"&&u.querySelector(ki(m))||i==="script"&&u.querySelector(Ai(m))||(i=u.createElement("link"),Dr(i,"link",s),ue(i),u.head.appendChild(i)))}}function Ux(s,i){Rs.m(s,i);var o=Un;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+nr(u)+'"][href="'+nr(s)+'"]',m=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=qn(s)}if(!ns.has(m)&&(s=h({rel:"modulepreload",href:s},i),ns.set(m,s),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ai(m)))return}u=o.createElement("link"),Dr(u,"link",s),ue(u),o.head.appendChild(u)}}}function Wx(s,i,o){Rs.S(s,i,o);var u=Un;if(u&&s){var p=ke(u).hoistableStyles,m=Wn(s);i=i||"default";var w=p.get(m);if(!w){var O={loading:0,preload:null};if(w=u.querySelector(ki(m)))O.loading=5;else{s=h({rel:"stylesheet",href:s,"data-precedence":i},o),(o=ns.get(m))&&Cl(s,o);var Z=w=u.createElement("link");ue(Z),Dr(Z,"link",s),Z._p=new Promise(function(me,Ie){Z.onload=me,Z.onerror=Ie}),Z.addEventListener("load",function(){O.loading|=1}),Z.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Aa(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:O},p.set(m,w)}}}function qx(s,i){Rs.X(s,i);var o=Un;if(o&&s){var u=ke(o).hoistableScripts,p=qn(s),m=u.get(p);m||(m=o.querySelector(Ai(p)),m||(s=h({src:s,async:!0},i),(i=ns.get(p))&&kl(s,i),m=o.createElement("script"),ue(m),Dr(m,"link",s),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(p,m))}}function Hx(s,i){Rs.M(s,i);var o=Un;if(o&&s){var u=ke(o).hoistableScripts,p=qn(s),m=u.get(p);m||(m=o.querySelector(Ai(p)),m||(s=h({src:s,async:!0,type:"module"},i),(i=ns.get(p))&&kl(s,i),m=o.createElement("script"),ue(m),Dr(m,"link",s),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(p,m))}}function Ud(s,i,o,u){var p=(p=K.current)?ka(p):null;if(!p)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Wn(o.href),o=ke(p).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=Wn(o.href);var m=ke(p).hoistableStyles,w=m.get(s);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(s,w),(m=p.querySelector(ki(s)))&&!m._p&&(w.instance=m,w.state.loading=5),ns.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ns.set(s,o),m||Gx(p,s,o,w.state))),i&&u===null)throw Error(n(528,""));return w}if(i&&u!==null)throw Error(n(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=qn(o),o=ke(p).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function Wn(s){return'href="'+nr(s)+'"'}function ki(s){return'link[rel="stylesheet"]['+s+"]"}function Wd(s){return h({},s,{"data-precedence":s.precedence,precedence:null})}function Gx(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Dr(i,"link",o),ue(i),s.head.appendChild(i))}function qn(s){return'[src="'+nr(s)+'"]'}function Ai(s){return"script[async]"+s}function qd(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+nr(o.href)+'"]');if(u)return i.instance=u,ue(u),u;var p=h({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),ue(u),Dr(u,"style",p),Aa(u,o.precedence,s),i.instance=u;case"stylesheet":p=Wn(o.href);var m=s.querySelector(ki(p));if(m)return i.state.loading|=4,i.instance=m,ue(m),m;u=Wd(o),(p=ns.get(p))&&Cl(u,p),m=(s.ownerDocument||s).createElement("link"),ue(m);var w=m;return w._p=new Promise(function(O,Z){w.onload=O,w.onerror=Z}),Dr(m,"link",u),i.state.loading|=4,Aa(m,o.precedence,s),i.instance=m;case"script":return m=qn(o.src),(p=s.querySelector(Ai(m)))?(i.instance=p,ue(p),p):(u=o,(p=ns.get(m))&&(u=h({},o),kl(u,p)),s=s.ownerDocument||s,p=s.createElement("script"),ue(p),Dr(p,"link",u),s.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(n(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Aa(u,o.precedence,s));return i.instance}function Aa(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,m=p,w=0;w<u.length;w++){var O=u[w];if(O.dataset.precedence===i)m=O;else if(m!==p)break}m?m.parentNode.insertBefore(s,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function Cl(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function kl(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Na=null;function Hd(s,i,o){if(Na===null){var u=new Map,p=Na=new Map;p.set(o,u)}else p=Na,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),p=0;p<o.length;p++){var m=o[p];if(!(m[F]||m[Gt]||s==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(i)||"";w=s+w;var O=u.get(w);O?O.push(m):u.set(w,[m])}}return u}function Gd(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function Vx(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Vd(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ni=null;function Xx(){}function Yx(s,i,o){if(Ni===null)throw Error(n(475));var u=Ni;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var p=Wn(o.href),m=s.querySelector(ki(p));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Da.bind(u),s.then(u,u)),i.state.loading|=4,i.instance=m,ue(m);return}m=s.ownerDocument||s,o=Wd(o),(p=ns.get(p))&&Cl(o,p),m=m.createElement("link"),ue(m);var w=m;w._p=new Promise(function(O,Z){w.onload=O,w.onerror=Z}),Dr(m,"link",o),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Da.bind(u),s.addEventListener("load",i),s.addEventListener("error",i))}}function Kx(){if(Ni===null)throw Error(n(475));var s=Ni;return s.stylesheets&&s.count===0&&Al(s,s.stylesheets),0<s.count?function(i){var o=setTimeout(function(){if(s.stylesheets&&Al(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(o)}}:null}function Da(){if(this.count--,this.count===0){if(this.stylesheets)Al(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ba=null;function Al(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ba=new Map,i.forEach(Qx,s),Ba=null,Da.call(s))}function Qx(s,i){if(!(i.state.loading&4)){var o=Ba.get(s);if(o)var u=o.get(null);else{o=new Map,Ba.set(s,o);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var w=p[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}p=i.instance,w=p.getAttribute("data-precedence"),m=o.get(w)||u,m===u&&o.set(null,p),o.set(w,p),this.count++,u=Da.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),m?m.parentNode.insertBefore(p,m.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),i.state.loading|=4}}var Di={$$typeof:C,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Jx(s,i,o,u,p,m,w,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ge(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.hiddenUpdates=ge(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Xd(s,i,o,u,p,m,w,O,Z,me,Ie,Me){return s=new Jx(s,i,o,w,O,Z,me,Me),i=1,m===!0&&(i|=24),m=Wr(3,null,null,i),s.current=m,m.stateNode=s,i=uo(),i.refCount++,s.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},ho(m),s}function Yd(s){return s?(s=vn,s):vn}function Kd(s,i,o,u,p,m){p=Yd(p),u.context===null?u.context=p:u.pendingContext=p,u=Ns(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Ds(s,u,i),o!==null&&(Xr(o,s,i),li(o,s,i))}function Qd(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function Nl(s,i){Qd(s,i),(s=s.alternate)&&Qd(s,i)}function Jd(s){if(s.tag===13){var i=bn(s,67108864);i!==null&&Xr(i,s,67108864),Nl(s,67108864)}}var Ia=!0;function Zx(s,i,o,u){var p=X.T;X.T=null;var m=Se.p;try{Se.p=2,Dl(s,i,o,u)}finally{Se.p=m,X.T=p}}function ep(s,i,o,u){var p=X.T;X.T=null;var m=Se.p;try{Se.p=8,Dl(s,i,o,u)}finally{Se.p=m,X.T=p}}function Dl(s,i,o,u){if(Ia){var p=Bl(u);if(p===null)_l(s,i,u,Oa,o),ef(s,u);else if(rp(p,s,i,o,u))u.stopPropagation();else if(ef(s,u),i&4&&-1<tp.indexOf(s)){for(;p!==null;){var m=G(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=Ot(m.pendingLanes);if(w!==0){var O=m;for(O.pendingLanes|=2,O.entangledLanes|=2;w;){var Z=1<<31-ne(w);O.entanglements[1]|=Z,w&=~Z}xs(m),(Jt&6)===0&&(ya=Ce()+500,wi(0))}}break;case 13:O=bn(m,2),O!==null&&Xr(O,m,2),ba(),Nl(m,2)}if(m=Bl(u),m===null&&_l(s,i,u,Oa,o),m===p)break;p=m}p!==null&&u.stopPropagation()}else _l(s,i,u,null,o)}}function Bl(s){return s=Bt(s),Il(s)}var Oa=null;function Il(s){if(Oa=null,s=q(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Oa=s,null}function Zd(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pt()){case pe:return 2;case ze:return 8;case Ye:case lt:return 32;case Ke:return 268435456;default:return 32}default:return 32}}var Ol=!1,Hs=null,Gs=null,Vs=null,Bi=new Map,Ii=new Map,Xs=[],tp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ef(s,i){switch(s){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":Bi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(i.pointerId)}}function Oi(s,i,o,u,p,m){return s===null||s.nativeEvent!==m?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[p]},i!==null&&(i=G(i),i!==null&&Jd(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),s)}function rp(s,i,o,u,p){switch(i){case"focusin":return Hs=Oi(Hs,s,i,o,u,p),!0;case"dragenter":return Gs=Oi(Gs,s,i,o,u,p),!0;case"mouseover":return Vs=Oi(Vs,s,i,o,u,p),!0;case"pointerover":var m=p.pointerId;return Bi.set(m,Oi(Bi.get(m)||null,s,i,o,u,p)),!0;case"gotpointercapture":return m=p.pointerId,Ii.set(m,Oi(Ii.get(m)||null,s,i,o,u,p)),!0}return!1}function tf(s){var i=q(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,vt(s.priority,function(){if(o.tag===13){var u=Vr();u=ht(u);var p=bn(o,u);p!==null&&Xr(p,o,u),Nl(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function La(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=Bl(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);dt=u,o.target.dispatchEvent(u),dt=null}else return i=G(o),i!==null&&Jd(i),s.blockedOn=o,!1;i.shift()}return!0}function rf(s,i,o){La(s)&&o.delete(i)}function sp(){Ol=!1,Hs!==null&&La(Hs)&&(Hs=null),Gs!==null&&La(Gs)&&(Gs=null),Vs!==null&&La(Vs)&&(Vs=null),Bi.forEach(rf),Ii.forEach(rf)}function Ma(s,i){s.blockedOn===i&&(s.blockedOn=null,Ol||(Ol=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sp)))}var Fa=null;function sf(s){Fa!==s&&(Fa=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Fa===s&&(Fa=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],p=s[i+2];if(typeof u!="function"){if(Il(u||o)===null)continue;break}var m=G(o);m!==null&&(s.splice(i,3),i-=3,Io(m,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function Li(s){function i(Z){return Ma(Z,s)}Hs!==null&&Ma(Hs,s),Gs!==null&&Ma(Gs,s),Vs!==null&&Ma(Vs,s),Bi.forEach(i),Ii.forEach(i);for(var o=0;o<Xs.length;o++){var u=Xs[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Xs.length&&(o=Xs[0],o.blockedOn===null);)tf(o),o.blockedOn===null&&Xs.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],m=o[u+1],w=p[Ct]||null;if(typeof m=="function")w||sf(o);else if(w){var O=null;if(m&&m.hasAttribute("formAction")){if(p=m,w=m[Ct]||null)O=w.formAction;else if(Il(p)!==null)continue}else O=w.action;typeof O=="function"?o[u+1]=O:(o.splice(u,3),u-=3),sf(o)}}}function Ll(s){this._internalRoot=s}Pa.prototype.render=Ll.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(n(409));var o=i.current,u=Vr();Kd(o,u,s,i,null,null)},Pa.prototype.unmount=Ll.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Kd(s.current,2,null,s,null,null),ba(),i[Ut]=null}};function Pa(s){this._internalRoot=s}Pa.prototype.unstable_scheduleHydration=function(s){if(s){var i=Br();s={blockedOn:null,target:s,priority:i};for(var o=0;o<Xs.length&&i!==0&&i<Xs[o].priority;o++);Xs.splice(o,0,s),o===0&&tf(s)}};var nf=t.version;if(nf!=="19.1.1")throw Error(n(527,nf,"19.1.1"));Se.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=x(i),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var np={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{it=za.inject(np),Je=za}catch{}}return reactDomClient_production.createRoot=function(s,i){if(!a(s))throw Error(n(299));var o=!1,u="",p=bu,m=vu,w=Eu,O=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(O=i.unstable_transitionCallbacks)),i=Xd(s,1,!1,null,null,o,u,p,m,w,O,null),s[Ut]=i.current,yl(s),new Ll(i)},reactDomClient_production.hydrateRoot=function(s,i,o){if(!a(s))throw Error(n(299));var u=!1,p="",m=bu,w=vu,O=Eu,Z=null,me=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(O=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(Z=o.unstable_transitionCallbacks),o.formState!==void 0&&(me=o.formState)),i=Xd(s,1,!0,i,o??null,u,p,m,w,O,Z,me),i.context=Yd(null),o=i.current,u=Vr(),u=ht(u),p=Ns(u),p.callback=null,Ds(o,p,u),o=u,i.current.lanes=o,rt(i,o),xs(i),s[Ut]=i.current,yl(s),new Pa(i)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(e={}){function t(n,a){let{pathname:l,search:c,hash:d}=n.location;return createLocation("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:createPath(a)}return getUrlBasedHistory(t,r,null,e)}function invariant(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function warning(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,t){return{usr:e.state,key:e.key,idx:t}}function createLocation(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?parsePath(t):t,state:r,key:t&&t.key||n||createKey()}}function createPath({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function parsePath(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function getUrlBasedHistory(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:l=!1}=n,c=a.history,d="POP",x=null,f=h();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function h(){return(c.state||{idx:null}).idx}function g(){d="POP";let v=h(),R=v==null?null:v-f;f=v,x&&x({action:d,location:b.location,delta:R})}function y(v,R){d="PUSH";let A=createLocation(b.location,v,R);f=h()+1;let C=getHistoryState(A,f),L=b.createHref(A);try{c.pushState(C,"",L)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(L)}l&&x&&x({action:d,location:b.location,delta:1})}function _(v,R){d="REPLACE";let A=createLocation(b.location,v,R);f=h();let C=getHistoryState(A,f),L=b.createHref(A);c.replaceState(C,"",L),l&&x&&x({action:d,location:b.location,delta:0})}function E(v){return createBrowserURLImpl(v)}let b={get action(){return d},get location(){return e(a,c)},listen(v){if(x)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,g),x=v,()=>{a.removeEventListener(PopStateEventType,g),x=null}},createHref(v){return t(a,v)},createURL:E,encodeLocation(v){let R=E(v);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:y,replace:_,go(v){return c.go(v)}};return b}function createBrowserURLImpl(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:createPath(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function matchRoutes(e,t,r="/"){return matchRoutesImpl(e,t,r,!1)}function matchRoutesImpl(e,t,r,n){let a=typeof t=="string"?parsePath(t):t,l=stripBasename(a.pathname||"/",r);if(l==null)return null;let c=flattenRoutes(e);rankRouteBranches(c);let d=null;for(let x=0;d==null&&x<c.length;++x){let f=decodePath(l);d=matchRouteBranch(c[x],f,n)}return d}function flattenRoutes(e,t=[],r=[],n="",a=!1){let l=(c,d,x=a,f)=>{let h={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&x)return;invariant(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let g=joinPaths([n,h.relativePath]),y=r.concat(h);c.children&&c.children.length>0&&(invariant(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),flattenRoutes(c.children,t,y,g,x)),!(c.path==null&&!c.index)&&t.push({path:g,score:computeScore(g,c.index),routesMeta:y})};return e.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let x of explodeOptionalSegments(c.path))l(c,d,!0,x)}),t}function explodeOptionalSegments(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let c=explodeOptionalSegments(n.join("/")),d=[];return d.push(...c.map(x=>x===""?l:[l,x].join("/"))),a&&d.push(...c),d.map(x=>e.startsWith("/")&&x===""?"/":x)}function rankRouteBranches(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:compareIndexes(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,t){let r=e.split("/"),n=r.length;return r.some(isSplat)&&(n+=splatPenalty),t&&(n+=indexRouteValue),r.filter(a=>!isSplat(a)).reduce((a,l)=>a+(paramRe.test(l)?dynamicSegmentValue:l===""?emptySegmentValue:staticSegmentValue),n)}function compareIndexes(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function matchRouteBranch(e,t,r=!1){let{routesMeta:n}=e,a={},l="/",c=[];for(let d=0;d<n.length;++d){let x=n[d],f=d===n.length-1,h=l==="/"?t:t.slice(l.length)||"/",g=matchPath({path:x.relativePath,caseSensitive:x.caseSensitive,end:f},h),y=x.route;if(!g&&f&&r&&!n[n.length-1].route.index&&(g=matchPath({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},h)),!g)return null;Object.assign(a,g.params),c.push({params:a,pathname:joinPaths([l,g.pathname]),pathnameBase:normalizePathname(joinPaths([l,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(l=joinPaths([l,g.pathnameBase]))}return c}function matchPath(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=compilePath(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((f,{paramName:h,isOptional:g},y)=>{if(h==="*"){let E=d[y]||"";c=l.slice(0,l.length-E.length).replace(/(.)\/+$/,"$1")}const _=d[y];return g&&!_?f[h]=void 0:f[h]=(_||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:e}}function compilePath(e,t=!1,r=!0){warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,x)=>(n.push({paramName:d,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function decodePath(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return warning(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function stripBasename(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function resolvePath(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?parsePath(e):e;return{pathname:r?r.startsWith("/")?r:resolvePathname(r,t):t,search:normalizeSearch(n),hash:normalizeHash(a)}}function resolvePathname(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function getInvalidPathError(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function getResolveToMatches(e){let t=getPathContributingMatches(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function resolveTo(e,t,r,n=!1){let a;typeof e=="string"?a=parsePath(e):(a={...e},invariant(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let l=e===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=r;else{let g=t.length-1;if(!n&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;a.pathname=y.join("/")}d=g>=0?t[g]:"/"}let x=resolvePath(a,d),f=c&&c!=="/"&&c.endsWith("/"),h=(l||c===".")&&r.endsWith("/");return!x.pathname.endsWith("/")&&(f||h)&&(x.pathname+="/"),x}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(e,{relative:t}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=reactExports.useContext(NavigationContext),{hash:a,pathname:l,search:c}=useResolvedPath(e,{relative:t}),d=l;return r!=="/"&&(d=l==="/"?r:joinPaths([r,l])),n.createHref({pathname:d,search:c,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:t,navigator:r}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),l=JSON.stringify(getResolveToMatches(n)),c=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{c.current=!0}),reactExports.useCallback((x,f={})=>{if(warning(c.current,navigateEffectWarning),!c.current)return;if(typeof x=="number"){r.go(x);return}let h=resolveTo(x,JSON.parse(l),a,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:joinPaths([t,h.pathname])),(f.replace?r.replace:r.push)(h,f.state,f)},[t,r,l,a,e])}reactExports.createContext(null);function useParams(){let{matches:e}=reactExports.useContext(RouteContext),t=e[e.length-1];return t?t.params:{}}function useResolvedPath(e,{relative:t}={}){let{matches:r}=reactExports.useContext(RouteContext),{pathname:n}=useLocation(),a=JSON.stringify(getResolveToMatches(r));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function useRoutes(e,t){return useRoutesImpl(e,t)}function useRoutesImpl(e,t,r,n,a){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),d=c[c.length-1],x=d?d.params:{},f=d?d.pathname:"/",h=d?d.pathnameBase:"/",g=d&&d.route;{let A=g&&g.path||"";warningOnce(f,!g||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let y=useLocation(),_;if(t){let A=typeof t=="string"?parsePath(t):t;invariant(h==="/"||A.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${A.pathname}" was given in the \`location\` prop.`),_=A}else _=y;let E=_.pathname||"/",b=E;if(h!=="/"){let A=h.replace(/^\//,"").split("/");b="/"+E.replace(/^\//,"").split("/").slice(A.length).join("/")}let v=matchRoutes(e,{pathname:b});warning(g||v!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),warning(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=_renderMatches(v&&v.map(A=>Object.assign({},A,{params:Object.assign({},x,A.params),pathname:joinPaths([h,l.encodeLocation?l.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:joinPaths([h,l.encodeLocation?l.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),c,r,n,a);return t&&R?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},R):R}function DefaultErrorComponent(){let e=useRouteError(),t=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:l},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:l},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},t),r?reactExports.createElement("pre",{style:a},r):null,c)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:e,match:t,children:r}){let n=reactExports.useContext(DataRouterContext);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),reactExports.createElement(RouteContext.Provider,{value:e},r)}function _renderMatches(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,c=r?.errors;if(c!=null){let f=l.findIndex(h=>h.route.id&&c?.[h.route.id]!==void 0);invariant(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,f+1))}let d=!1,x=-1;if(r)for(let f=0;f<l.length;f++){let h=l[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(x=f),h.route.id){let{loaderData:g,errors:y}=r,_=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||_){d=!0,x>=0?l=l.slice(0,x+1):l=[l[0]];break}}}return l.reduceRight((f,h,g)=>{let y,_=!1,E=null,b=null;r&&(y=c&&h.route.id?c[h.route.id]:void 0,E=h.route.errorElement||defaultErrorElement,d&&(x<0&&g===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,b=null):x===g&&(_=!0,b=h.route.hydrateFallbackElement||null)));let v=t.concat(l.slice(0,g+1)),R=()=>{let A;return y?A=E:_?A=b:h.route.Component?A=reactExports.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=f,reactExports.createElement(RenderedRoute,{match:h,routeContext:{outlet:f,matches:v,isDataRoute:r!=null},children:A})};return r&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?reactExports.createElement(RenderErrorBoundary,{location:r.location,revalidation:r.revalidation,component:E,error:y,children:R(),routeContext:{outlet:null,matches:v,isDataRoute:!0},unstable_onError:n}):R()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let t=reactExports.useContext(DataRouterContext);return invariant(t,getDataRouterConsoleError(e)),t}function useDataRouterState(e){let t=reactExports.useContext(DataRouterStateContext);return invariant(t,getDataRouterConsoleError(e)),t}function useRouteContext(e){let t=reactExports.useContext(RouteContext);return invariant(t,getDataRouterConsoleError(e)),t}function useCurrentRouteId(e){let t=useRouteContext(e),r=t.matches[t.matches.length-1];return invariant(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let e=reactExports.useContext(RouteErrorContext),t=useDataRouterState("useRouteError"),r=useCurrentRouteId("useRouteError");return e!==void 0?e:t.errors?.[r]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),t=useCurrentRouteId("useNavigate"),r=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{r.current=!0}),reactExports.useCallback(async(a,l={})=>{warning(r.current,navigateEffectWarning),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...l}))},[e,t])}var alreadyWarned={};function warningOnce(e,t,r){!t&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning(!1,r))}reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:t,state:r,unstable_onError:n}){return useRoutesImpl(e,void 0,r,n,t)}function Navigate({to:e,replace:t,state:r,relative:n}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=reactExports.useContext(NavigationContext);warning(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),d=useNavigate(),x=resolveTo(e,getResolveToMatches(l),c,n==="path"),f=JSON.stringify(x);return reactExports.useEffect(()=>{d(JSON.parse(f),{replace:t,state:r,relative:n})},[d,f,n,t,r]),null}function Route(e){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:l=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),d=reactExports.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof r=="string"&&(r=parsePath(r));let{pathname:x="/",search:f="",hash:h="",state:g=null,key:y="default"}=r,_=reactExports.useMemo(()=>{let E=stripBasename(x,c);return E==null?null:{location:{pathname:E,search:f,hash:h,state:g,key:y},navigationType:n}},[c,x,f,h,g,y,n]);return warning(_!=null,`<Router basename="${c}"> is not able to match the URL "${x}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:reactExports.createElement(NavigationContext.Provider,{value:d},reactExports.createElement(LocationContext.Provider,{children:t,value:_}))}function Routes({children:e,location:t}){return useRoutes(createRoutesFromChildren(e),t)}function createRoutesFromChildren(e,t=[]){let r=[];return reactExports.Children.forEach(e,(n,a)=>{if(!reactExports.isValidElement(n))return;let l=[...t,a];if(n.type===reactExports.Fragment){r.push.apply(r,createRoutesFromChildren(n.props.children,l));return}invariant(n.type===Route,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=createRoutesFromChildren(n.props.children,l)),r.push(c)}),r}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return e!=null&&typeof e.tagName=="string"}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,t){return e.button===0&&(!t||t==="_self")&&!isModifiedEvent(e)}function createSearchParams(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function getSearchParamsForLocation(e,t){let r=createSearchParams(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(l=>{r.append(a,l)})}),r}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,t){let r,n,a,l,c;if(isFormElement(e)){let d=e.getAttribute("action");n=d?stripBasename(d,t):null,r=e.getAttribute("method")||defaultMethod,a=getFormEncType(e.getAttribute("enctype"))||defaultEncType,l=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=e.getAttribute("formaction")||d.getAttribute("action");if(n=x?stripBasename(x,t):null,r=e.getAttribute("formmethod")||d.getAttribute("method")||defaultMethod,a=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(d.getAttribute("enctype"))||defaultEncType,l=new FormData(d,e),!isFormDataSubmitterSupported()){let{name:f,type:h,value:g}=e;if(h==="image"){let y=f?`${f}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else f&&l.append(f,g)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=defaultMethod,n=null,a=defaultEncType,c=e}return l&&a==="text/plain"&&(c=l,l=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function singleFetchUrl(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&stripBasename(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function loadRouteModule(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,t,r){let n=await Promise.all(e.map(async a=>{let l=t.routes[a.route.id];if(l){let c=await loadRouteModule(l,r);return c.links?c.links():[]}return[]}));return dedupeLinkDescriptors(n.flat(1).filter(isHtmlLinkDescriptor).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function getNewMatchesForLinks(e,t,r,n,a,l){let c=(x,f)=>r[f]?x.route.id!==r[f].route.id:!0,d=(x,f)=>r[f].pathname!==x.pathname||r[f].route.path?.endsWith("*")&&r[f].params["*"]!==x.params["*"];return l==="assets"?t.filter((x,f)=>c(x,f)||d(x,f)):l==="data"?t.filter((x,f)=>{let h=n.routes[x.route.id];if(!h||!h.hasLoader)return!1;if(c(x,f)||d(x,f))return!0;if(x.route.shouldRevalidate){let g=x.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function getModuleLinkHrefs(e,t,{includeHydrateFallback:r}={}){return dedupeHrefs(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function dedupeLinkDescriptors(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let l=JSON.stringify(sortKeys(a));return r.has(l)||(r.add(l),n.push({key:l,link:a})),n},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,t){let r=reactExports.useContext(FrameworkContext),[n,a]=reactExports.useState(!1),[l,c]=reactExports.useState(!1),{onFocus:d,onBlur:x,onMouseEnter:f,onMouseLeave:h,onTouchStart:g}=t,y=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let b=R=>{R.forEach(A=>{c(A.isIntersecting)})},v=new IntersectionObserver(b,{threshold:.5});return y.current&&v.observe(y.current),()=>{v.disconnect()}}},[e]),reactExports.useEffect(()=>{if(n){let b=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(b)}}},[n]);let _=()=>{a(!0)},E=()=>{a(!1),c(!1)};return r?e!=="intent"?[l,y,{}]:[l,y,{onFocus:composeEventHandlers(d,_),onBlur:composeEventHandlers(x,E),onMouseEnter:composeEventHandlers(f,_),onMouseLeave:composeEventHandlers(h,E),onTouchStart:composeEventHandlers(g,_)}]:[!1,y,{}]}function composeEventHandlers(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function PrefetchPageLinks({page:e,...t}){let{router:r}=useDataRouterContext2(),n=reactExports.useMemo(()=>matchRoutes(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:n,...t}):null}function useKeyedPrefetchLinks(e){let{manifest:t,routeModules:r}=useFrameworkContext(),[n,a]=reactExports.useState([]);return reactExports.useEffect(()=>{let l=!1;return getKeyedPrefetchLinks(e,t,r).then(c=>{l||a(c)}),()=>{l=!0}},[e,t,r]),n}function PrefetchPageLinksImpl({page:e,matches:t,...r}){let n=useLocation(),{manifest:a,routeModules:l}=useFrameworkContext(),{basename:c}=useDataRouterContext2(),{loaderData:d,matches:x}=useDataRouterStateContext(),f=reactExports.useMemo(()=>getNewMatchesForLinks(e,t,x,a,n,"data"),[e,t,x,a,n]),h=reactExports.useMemo(()=>getNewMatchesForLinks(e,t,x,a,n,"assets"),[e,t,x,a,n]),g=reactExports.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let E=new Set,b=!1;if(t.forEach(R=>{let A=a.routes[R.route.id];!A||!A.hasLoader||(!f.some(C=>C.route.id===R.route.id)&&R.route.id in d&&l[R.route.id]?.shouldRevalidate||A.hasClientLoader?b=!0:E.add(R.route.id))}),E.size===0)return[];let v=singleFetchUrl(e,c,"data");return b&&E.size>0&&v.searchParams.set("_routes",t.filter(R=>E.has(R.route.id)).map(R=>R.route.id).join(",")),[v.pathname+v.search]},[c,d,n,a,f,t,e,l]),y=reactExports.useMemo(()=>getModuleLinkHrefs(h,a),[h,a]),_=useKeyedPrefetchLinks(h);return reactExports.createElement(reactExports.Fragment,null,g.map(E=>reactExports.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...r})),y.map(E=>reactExports.createElement("link",{key:E,rel:"modulepreload",href:E,...r})),_.map(({key:E,link:b})=>reactExports.createElement("link",{key:E,nonce:r.nonce,...b})))}function mergeRefs(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.9.1")}catch{}function BrowserRouter({basename:e,children:t,window:r}){let n=reactExports.useRef();n.current==null&&(n.current=createBrowserHistory({window:r,v5Compat:!0}));let a=n.current,[l,c]=reactExports.useState({action:a.action,location:a.location}),d=reactExports.useCallback(x=>{reactExports.startTransition(()=>c(x))},[c]);return reactExports.useLayoutEffect(()=>a.listen(d),[a,d]),reactExports.createElement(Router,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:l,replace:c,state:d,target:x,to:f,preventScrollReset:h,viewTransition:g,...y},_){let{basename:E}=reactExports.useContext(NavigationContext),b=typeof f=="string"&&ABSOLUTE_URL_REGEX2.test(f),v,R=!1;if(typeof f=="string"&&b&&(v=f,isBrowser$1))try{let Y=new URL(window.location.href),le=f.startsWith("//")?new URL(Y.protocol+f):new URL(f),te=stripBasename(le.pathname,E);le.origin===Y.origin&&te!=null?f=te+le.search+le.hash:R=!0}catch{warning(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=useHref(f,{relative:a}),[C,L,I]=usePrefetchBehavior(n,y),ae=useLinkClickHandler(f,{replace:c,state:d,target:x,preventScrollReset:h,relative:a,viewTransition:g});function D(Y){t&&t(Y),Y.defaultPrevented||ae(Y)}let ee=reactExports.createElement("a",{...y,...I,href:v||A,onClick:R||l?t:D,ref:mergeRefs(_,L),target:x,"data-discover":!b&&r==="render"?"true":void 0});return C&&!b?reactExports.createElement(reactExports.Fragment,null,ee,reactExports.createElement(PrefetchPageLinks,{page:A})):ee});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:l,to:c,viewTransition:d,children:x,...f},h){let g=useResolvedPath(c,{relative:f.relative}),y=useLocation(),_=reactExports.useContext(DataRouterStateContext),{navigator:E,basename:b}=reactExports.useContext(NavigationContext),v=_!=null&&useViewTransitionState(g)&&d===!0,R=E.encodeLocation?E.encodeLocation(g).pathname:g.pathname,A=y.pathname,C=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(A=A.toLowerCase(),C=C?C.toLowerCase():null,R=R.toLowerCase()),C&&b&&(C=stripBasename(C,b)||C);const L=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let I=A===R||!a&&A.startsWith(R)&&A.charAt(L)==="/",ae=C!=null&&(C===R||!a&&C.startsWith(R)&&C.charAt(R.length)==="/"),D={isActive:I,isPending:ae,isTransitioning:v},ee=I?t:void 0,Y;typeof n=="function"?Y=n(D):Y=[n,I?"active":null,ae?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let le=typeof l=="function"?l(D):l;return reactExports.createElement(Link,{...f,"aria-current":ee,className:Y,ref:h,style:le,to:c,viewTransition:d},typeof x=="function"?x(D):x)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:l,method:c=defaultMethod,action:d,onSubmit:x,relative:f,preventScrollReset:h,viewTransition:g,...y},_)=>{let E=useSubmit(),b=useFormAction(d,{relative:f}),v=c.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&ABSOLUTE_URL_REGEX2.test(d),A=C=>{if(x&&x(C),C.defaultPrevented)return;C.preventDefault();let L=C.nativeEvent.submitter,I=L?.getAttribute("formmethod")||c;E(L||C.currentTarget,{fetcherKey:t,method:I,navigate:r,replace:a,state:l,relative:f,preventScrollReset:h,viewTransition:g})};return reactExports.createElement("form",{ref:_,method:v,action:b,onSubmit:n?x:A,...y,"data-discover":!R&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let t=reactExports.useContext(DataRouterContext);return invariant(t,getDataRouterConsoleError2(e)),t}function useLinkClickHandler(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=useNavigate(),x=useLocation(),f=useResolvedPath(e,{relative:l});return reactExports.useCallback(h=>{if(shouldProcessLinkClick(h,t)){h.preventDefault();let g=r!==void 0?r:createPath(x)===createPath(f);d(e,{replace:g,state:n,preventScrollReset:a,relative:l,viewTransition:c})}},[x,d,f,r,n,t,e,a,l,c])}function useSearchParams(e){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=reactExports.useRef(createSearchParams(e)),r=reactExports.useRef(!1),n=useLocation(),a=reactExports.useMemo(()=>getSearchParamsForLocation(n.search,r.current?null:t.current),[n.search]),l=useNavigate(),c=reactExports.useCallback((d,x)=>{const f=createSearchParams(typeof d=="function"?d(new URLSearchParams(a)):d);r.current=!0,l("?"+f,x)},[l,a]);return[a,c]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:t}=reactExports.useContext(NavigationContext),r=useRouteId();return reactExports.useCallback(async(n,a={})=>{let{action:l,method:c,encType:d,formData:x,body:f}=getFormSubmissionInfo(n,t);if(a.navigate===!1){let h=a.fetcherKey||getUniqueFetcherId();await e.fetch(h,r,a.action||l,{preventScrollReset:a.preventScrollReset,formData:x,body:f,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await e.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:x,body:f,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function useFormAction(e,{relative:t}={}){let{basename:r}=reactExports.useContext(NavigationContext),n=reactExports.useContext(RouteContext);invariant(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),l={...useResolvedPath(e||".",{relative:t})},c=useLocation();if(e==null){l.search=c.search;let d=new URLSearchParams(l.search),x=d.getAll("index");if(x.some(h=>h==="")){d.delete("index"),x.filter(g=>g).forEach(g=>d.append("index",g));let h=d.toString();l.search=h?`?${h}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:joinPaths([r,l.pathname])),createPath(l)}function useViewTransitionState(e,{relative:t}={}){let r=reactExports.useContext(ViewTransitionContext);invariant(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=useDataRouterContext3("useViewTransitionState"),a=useResolvedPath(e,{relative:t});if(!r.isTransitioning)return!1;let l=stripBasename(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=stripBasename(r.nextLocation.pathname,n)||r.nextLocation.pathname;return matchPath(a.pathname,c)!=null||matchPath(a.pathname,l)!=null}var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},defaultTimeoutProvider={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},TimeoutManager=class{#e=defaultTimeoutProvider;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},timeoutManager=new TimeoutManager;function systemSetTimeoutZero(e){setTimeout(e,0)}var isServer=typeof window>"u"||"Deno"in globalThis;function noop$2(){}function functionalUpdate(e,t){return typeof e=="function"?e(t):e}function isValidTimeout(e){return typeof e=="number"&&e>=0&&e!==1/0}function timeUntilStale(e,t){return Math.max(e+(t||0)-Date.now(),0)}function resolveStaleTime(e,t){return typeof e=="function"?e(t):e}function resolveEnabled(e,t){return typeof e=="function"?e(t):e}function matchQuery(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:l,queryKey:c,stale:d}=e;if(c){if(n){if(t.queryHash!==hashQueryKeyByOptions(c,t.options))return!1}else if(!partialMatchKey(t.queryKey,c))return!1}if(r!=="all"){const x=t.isActive();if(r==="active"&&!x||r==="inactive"&&x)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||a&&a!==t.state.fetchStatus||l&&!l(t))}function matchMutation(e,t){const{exact:r,status:n,predicate:a,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(r){if(hashKey(t.options.mutationKey)!==hashKey(l))return!1}else if(!partialMatchKey(t.options.mutationKey,l))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function hashQueryKeyByOptions(e,t){return(t?.queryKeyHashFn||hashKey)(e)}function hashKey(e){return JSON.stringify(e,(t,r)=>isPlainObject$1(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function partialMatchKey(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>partialMatchKey(e[r],t[r])):!1}var hasOwn=Object.prototype.hasOwnProperty;function replaceEqualDeep(e,t){if(e===t)return e;const r=isPlainArray(e)&&isPlainArray(t);if(!r&&!(isPlainObject$1(e)&&isPlainObject$1(t)))return t;const a=(r?e:Object.keys(e)).length,l=r?t:Object.keys(t),c=l.length,d=r?new Array(c):{};let x=0;for(let f=0;f<c;f++){const h=r?f:l[f],g=e[h],y=t[h];if(g===y){d[h]=g,(r?f<a:hasOwn.call(e,h))&&x++;continue}if(g===null||y===null||typeof g!="object"||typeof y!="object"){d[h]=y;continue}const _=replaceEqualDeep(g,y);d[h]=_,_===g&&x++}return a===c&&x===a?e:d}function shallowEqualObjects(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function isPlainArray(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function isPlainObject$1(e){if(!hasObjectPrototype(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!hasObjectPrototype(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hasObjectPrototype(e){return Object.prototype.toString.call(e)==="[object Object]"}function sleep$1(e){return new Promise(t=>{timeoutManager.setTimeout(t,e)})}function replaceData(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?replaceEqualDeep(e,t):t}function addToEnd(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function addToStart(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var skipToken=Symbol();function ensureQueryFn(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function shouldThrowError(e,t){return typeof e=="function"?e(...t):!!e}var FocusManager=class extends Subscribable{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!isServer&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},focusManager=new FocusManager;function pendingThenable(){let e,t;const r=new Promise((a,l)=>{e=a,t=l});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var defaultScheduler=systemSetTimeoutZero;function createNotifyManager(){let e=[],t=0,r=d=>{d()},n=d=>{d()},a=defaultScheduler;const l=d=>{t?e.push(d):a(()=>{r(d)})},c=()=>{const d=e;e=[],d.length&&a(()=>{n(()=>{d.forEach(x=>{r(x)})})})};return{batch:d=>{let x;t++;try{x=d()}finally{t--,t||c()}return x},batchCalls:d=>(...x)=>{l(()=>{d(...x)})},schedule:l,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{n=d},setScheduler:d=>{a=d}}}var notifyManager=createNotifyManager(),OnlineManager=class extends Subscribable{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!isServer&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},onlineManager=new OnlineManager;function defaultRetryDelay(e){return Math.min(1e3*2**e,3e4)}function canFetch(e){return(e??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function createRetryer(e){let t=!1,r=0,n;const a=pendingThenable(),l=()=>a.status!=="pending",c=b=>{if(!l()){const v=new CancelledError(b);y(v),e.onCancel?.(v)}},d=()=>{t=!0},x=()=>{t=!1},f=()=>focusManager.isFocused()&&(e.networkMode==="always"||onlineManager.isOnline())&&e.canRun(),h=()=>canFetch(e.networkMode)&&e.canRun(),g=b=>{l()||(n?.(),a.resolve(b))},y=b=>{l()||(n?.(),a.reject(b))},_=()=>new Promise(b=>{n=v=>{(l()||f())&&b(v)},e.onPause?.()}).then(()=>{n=void 0,l()||e.onContinue?.()}),E=()=>{if(l())return;let b;const v=r===0?e.initialPromise:void 0;try{b=v??e.fn()}catch(R){b=Promise.reject(R)}Promise.resolve(b).then(g).catch(R=>{if(l())return;const A=e.retry??(isServer?0:3),C=e.retryDelay??defaultRetryDelay,L=typeof C=="function"?C(r,R):C,I=A===!0||typeof A=="number"&&r<A||typeof A=="function"&&A(r,R);if(t||!I){y(R);return}r++,e.onFail?.(r,R),sleep$1(L).then(()=>f()?void 0:_()).then(()=>{t?y(R):E()})})};return{promise:a,status:()=>a.status,cancel:c,continue:()=>(n?.(),a),cancelRetry:d,continueRetry:x,canStart:h,start:()=>(h()?E():_().then(E),a)}}var Removable=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&(this.#e=timeoutManager.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(isServer?1/0:300*1e3))}clearGcTimeout(){this.#e&&(timeoutManager.clearTimeout(this.#e),this.#e=void 0)}},Query=class extends Removable{#e;#t;#r;#n;#s;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=getDefaultState$1(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=getDefaultState$1(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=replaceData(this.state.data,e,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#s?.promise;return this.#s?.cancel(e),t?t.then(noop$2).catch(noop$2):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>resolveStaleTime(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(x=>x.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,n=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},a=()=>{const d=ensureQueryFn(this.options,t),f=(()=>{const h={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(h),h})();return this.#o=!1,this.options.persister?this.options.persister(d,f,this):d(f)},c=(()=>{const d={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return n(d),d})();this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#i({type:"fetch",meta:c.fetchOptions?.meta}),this.#s=createRetryer({initialPromise:t?.initialPromise,fn:c.fetchFn,onCancel:d=>{d instanceof CancelledError&&d.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(d,x)=>{this.#i({type:"failed",failureCount:d,error:x})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const d=await this.#s.start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),this.#r.config.onSuccess?.(d,this),this.#r.config.onSettled?.(d,this.state.error,this),d}catch(d){if(d instanceof CancelledError){if(d.silent)return this.#s.promise;if(d.revert){if(this.state.data===void 0)throw d;return this.state.data}}throw this.#i({type:"error",error:d}),this.#r.config.onError?.(d,this),this.#r.config.onSettled?.(this.state.data,d,this),d}finally{this.scheduleGc()}}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...fetchState(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const a=e.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),notifyManager.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function fetchState(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var QueryObserver=class extends Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#i=null,this.#o=pendingThenable(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#n=void 0;#s;#a;#o;#i;#h;#f;#x;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),shouldFetchOnMount(this.#t,this.options)?this.#d():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#v(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#E(),this.#t.setOptions(this.options),t._defaulted&&!shallowEqualObjects(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&shouldFetchOptionally(this.#t,r,this.options,t)&&this.#d(),this.updateResult(),n&&(this.#t!==r||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(t.enabled,this.#t)||resolveStaleTime(this.options.staleTime,this.#t)!==resolveStaleTime(t.staleTime,this.#t))&&this.#m();const a=this.#g();n&&(this.#t!==r||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(t.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return shouldAssignObserverCurrentProperties(this,r)&&(this.#n=r,this.#a=this.options,this.#s=this.#t.state),r}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(e){this.#E();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(noop$2)),t}#m(){this.#b();const e=resolveStaleTime(this.options.staleTime,this.#t);if(isServer||this.#n.isStale||!isValidTimeout(e))return;const r=timeUntilStale(this.#n.dataUpdatedAt,e)+1;this.#c=timeoutManager.setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#v(),this.#l=e,!(isServer||resolveEnabled(this.options.enabled,this.#t)===!1||!isValidTimeout(this.#l)||this.#l===0)&&(this.#u=timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.#d()},this.#l))}#_(){this.#m(),this.#y(this.#g())}#b(){this.#c&&(timeoutManager.clearTimeout(this.#c),this.#c=void 0)}#v(){this.#u&&(timeoutManager.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,n=this.options,a=this.#n,l=this.#s,c=this.#a,x=e!==r?e.state:this.#r,{state:f}=e;let h={...f},g=!1,y;if(t._optimisticResults){const ee=this.hasListeners(),Y=!ee&&shouldFetchOnMount(e,t),le=ee&&shouldFetchOptionally(e,r,t,n);(Y||le)&&(h={...h,...fetchState(f.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:_,errorUpdatedAt:E,status:b}=h;y=h.data;let v=!1;if(t.placeholderData!==void 0&&y===void 0&&b==="pending"){let ee;a?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(ee=a.data,v=!0):ee=typeof t.placeholderData=="function"?t.placeholderData(this.#x?.state.data,this.#x):t.placeholderData,ee!==void 0&&(b="success",y=replaceData(a?.data,ee,t),g=!0)}if(t.select&&y!==void 0&&!v)if(a&&y===l?.data&&t.select===this.#h)y=this.#f;else try{this.#h=t.select,y=t.select(y),y=replaceData(a?.data,y,t),this.#f=y,this.#i=null}catch(ee){this.#i=ee}this.#i&&(_=this.#i,y=this.#f,E=Date.now(),b="error");const R=h.fetchStatus==="fetching",A=b==="pending",C=b==="error",L=A&&R,I=y!==void 0,D={status:b,fetchStatus:h.fetchStatus,isPending:A,isSuccess:b==="success",isError:C,isInitialLoading:L,isLoading:L,data:y,dataUpdatedAt:h.dataUpdatedAt,error:_,errorUpdatedAt:E,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>x.dataUpdateCount||h.errorUpdateCount>x.errorUpdateCount,isFetching:R,isRefetching:R&&!A,isLoadingError:C&&!I,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:C&&I,isStale:isStale(e,t),refetch:this.refetch,promise:this.#o,isEnabled:resolveEnabled(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const ee=te=>{D.status==="error"?te.reject(D.error):D.data!==void 0&&te.resolve(D.data)},Y=()=>{const te=this.#o=D.promise=pendingThenable();ee(te)},le=this.#o;switch(le.status){case"pending":e.queryHash===r.queryHash&&ee(le);break;case"fulfilled":(D.status==="error"||D.data!==le.value)&&Y();break;case"rejected":(D.status!=="error"||D.error!==le.reason)&&Y();break}}return D}updateResult(){const e=this.#n,t=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#a=this.options,this.#s.data!==void 0&&(this.#x=this.#t),shallowEqualObjects(t,e))return;this.#n=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#p.size)return!0;const l=new Set(a??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#n).some(c=>{const d=c;return this.#n[d]!==e[d]&&l.has(d)})};this.#j({listeners:r()})}#E(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#j(e){notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function shouldLoadOnMount(e,t){return resolveEnabled(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function shouldFetchOnMount(e,t){return shouldLoadOnMount(e,t)||e.state.data!==void 0&&shouldFetchOn(e,t,t.refetchOnMount)}function shouldFetchOn(e,t,r){if(resolveEnabled(t.enabled,e)!==!1&&resolveStaleTime(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&isStale(e,t)}return!1}function shouldFetchOptionally(e,t,r,n){return(e!==t||resolveEnabled(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&isStale(e,r)}function isStale(e,t){return resolveEnabled(t.enabled,e)!==!1&&e.isStaleByTime(resolveStaleTime(t.staleTime,e))}function shouldAssignObserverCurrentProperties(e,t){return!shallowEqualObjects(e.getCurrentResult(),t)}function infiniteQueryBehavior(e){return{onFetch:(t,r)=>{const n=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],c=t.state.data?.pageParams||[];let d={pages:[],pageParams:[]},x=0;const f=async()=>{let h=!1;const g=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?h=!0:t.signal.addEventListener("abort",()=>{h=!0}),t.signal)})},y=ensureQueryFn(t.options,t.fetchOptions),_=async(E,b,v)=>{if(h)return Promise.reject();if(b==null&&E.pages.length)return Promise.resolve(E);const A=(()=>{const ae={client:t.client,queryKey:t.queryKey,pageParam:b,direction:v?"backward":"forward",meta:t.options.meta};return g(ae),ae})(),C=await y(A),{maxPages:L}=t.options,I=v?addToStart:addToEnd;return{pages:I(E.pages,C,L),pageParams:I(E.pageParams,b,L)}};if(a&&l.length){const E=a==="backward",b=E?getPreviousPageParam:getNextPageParam,v={pages:l,pageParams:c},R=b(n,v);d=await _(v,R,E)}else{const E=e??l.length;do{const b=x===0?c[0]??n.initialPageParam:getNextPageParam(n,d);if(x>0&&b==null)break;d=await _(d,b),x++}while(x<E)}return d};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=f}}}function getNextPageParam(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function getPreviousPageParam(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Mutation=class extends Removable{#e;#t;#r;#n;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#s({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",a=!this.#n.canStart();try{if(n)t();else{this.#s({type:"pending",variables:e,isPaused:a}),await this.#r.config.onMutate?.(e,this,r);const c=await this.options.onMutate?.(e,r);c!==this.state.context&&this.#s({type:"pending",context:c,variables:e,isPaused:a})}const l=await this.#n.start();return await this.#r.config.onSuccess?.(l,e,this.state.context,this,r),await this.options.onSuccess?.(l,e,this.state.context,r),await this.#r.config.onSettled?.(l,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(l,null,e,this.state.context,r),this.#s({type:"success",data:l}),l}catch(l){try{throw await this.#r.config.onError?.(l,e,this.state.context,this,r),await this.options.onError?.(l,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,l,e,this.state.context,r),l}finally{this.#s({type:"error",error:l})}}finally{this.#r.runNext(this)}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),notifyManager.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MutationCache=class extends Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new Mutation({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=scopeFor(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=scopeFor(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=scopeFor(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(a=>a.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=scopeFor(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){notifyManager.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>matchMutation(t,r))}findAll(e={}){return this.getAll().filter(t=>matchMutation(e,t))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(t=>t.continue().catch(noop$2))))}};function scopeFor(e){return e.options.scope?.id}var MutationObserver$1=class extends Subscribable{#e;#t=void 0;#r;#n;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),shallowEqualObjects(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&hashKey(r.mutationKey)!==hashKey(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#a()}mutate(t,r){return this.#n=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#s(){const t=this.#r?.state??getDefaultState();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){notifyManager.batch(()=>{if(this.#n&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#n.onSuccess?.(t.data,r,n,a),this.#n.onSettled?.(t.data,null,r,n,a)):t?.type==="error"&&(this.#n.onError?.(t.error,r,n,a),this.#n.onSettled?.(void 0,t.error,r,n,a))}this.listeners.forEach(r=>{r(this.#t)})})}},QueryCache=class extends Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,a=t.queryHash??hashQueryKeyByOptions(n,t);let l=this.get(a);return l||(l=new Query({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(l)),l}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>matchQuery(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>matchQuery(e,r)):t}notify(e){notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},QueryClient=class{#e;#t;#r;#n;#s;#a;#o;#i;constructor(e={}){this.#e=e.queryCache||new QueryCache,this.#t=e.mutationCache||new MutationCache,this.#r=e.defaultOptions||{},this.#n=new Map,this.#s=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(resolveStaleTime(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),l=this.#e.get(n.queryHash)?.state.data,c=functionalUpdate(t,l);if(c!==void 0)return this.#e.build(this,n).setData(c,{...r,manual:!0})}setQueriesData(e,t,r){return notifyManager.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;notifyManager.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return notifyManager.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=notifyManager.batch(()=>this.#e.findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(noop$2).catch(noop$2)}invalidateQueries(e,t={}){return notifyManager.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=notifyManager.batch(()=>this.#e.findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let l=a.fetch(void 0,r);return r.throwOnError||(l=l.catch(noop$2)),a.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(noop$2)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(resolveStaleTime(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(noop$2).catch(noop$2)}fetchInfiniteQuery(e){return e.behavior=infiniteQueryBehavior(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(noop$2).catch(noop$2)}ensureInfiniteQueryData(e){return e.behavior=infiniteQueryBehavior(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return onlineManager.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(hashKey(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{partialMatchKey(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#s.set(hashKey(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(n=>{partialMatchKey(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hashQueryKeyByOptions(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===skipToken&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},QueryClientContext=reactExports.createContext(void 0),useQueryClient=e=>{const t=reactExports.useContext(QueryClientContext);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},QueryClientProvider=({client:e,children:t})=>(reactExports.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:e,children:t})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext),ensurePreventErrorBoundaryRetry=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},useClearResetErrorBoundary=e=>{reactExports.useEffect(()=>{e.clearReset()},[e])},getHasError=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||shouldThrowError(r,[e.error,n])),ensureSuspenseTimers=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},willFetch=(e,t)=>e.isLoading&&e.isFetching&&!t,shouldSuspend=(e,t)=>e?.suspense&&t.isPending,fetchOptimistic=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function useBaseQuery(e,t,r){const n=useIsRestoring(),a=useQueryErrorResetBoundary(),l=useQueryClient(),c=l.defaultQueryOptions(e);l.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=n?"isRestoring":"optimistic",ensureSuspenseTimers(c),ensurePreventErrorBoundaryRetry(c,a),useClearResetErrorBoundary(a);const d=!l.getQueryCache().get(c.queryHash),[x]=reactExports.useState(()=>new t(l,c)),f=x.getOptimisticResult(c),h=!n&&e.subscribed!==!1;if(reactExports.useSyncExternalStore(reactExports.useCallback(g=>{const y=h?x.subscribe(notifyManager.batchCalls(g)):noop$2;return x.updateResult(),y},[x,h]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),reactExports.useEffect(()=>{x.setOptions(c)},[c,x]),shouldSuspend(c,f))throw fetchOptimistic(c,x,a);if(getHasError({result:f,errorResetBoundary:a,throwOnError:c.throwOnError,query:l.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(c,f),c.experimental_prefetchInRender&&!isServer&&willFetch(f,n)&&(d?fetchOptimistic(c,x,a):l.getQueryCache().get(c.queryHash)?.promise)?.catch(noop$2).finally(()=>{x.updateResult()}),c.notifyOnChangeProps?f:x.trackResult(f)}function useQuery(e,t){return useBaseQuery(e,QueryObserver)}function useMutation(e,t){const r=useQueryClient(),[n]=reactExports.useState(()=>new MutationObserver$1(r,e));reactExports.useEffect(()=>{n.setOptions(e)},[n,e]);const a=reactExports.useSyncExternalStore(reactExports.useCallback(c=>n.subscribe(notifyManager.batchCalls(c)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),l=reactExports.useCallback((c,d)=>{n.mutate(c,d).catch(noop$2)},[n]);if(a.error&&shouldThrowError(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let f=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var c=f;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),x=d?.nonce||d?.getAttribute("nonce");a=f(r.map(h=>{if(h=assetsURL(h),h in seen)return;seen[h]=!0;const g=h.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":scriptRel,g||(_.as="script"),_.crossOrigin="",_.href=h,x&&_.setAttribute("nonce",x),document.head.appendChild(_),g)return new Promise((E,b)=>{_.addEventListener("load",E),_.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function l(d){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=d,window.dispatchEvent(x),!x.defaultPrevented)throw d}return a.then(d=>{for(const x of d||[])x.status==="rejected"&&l(x.reason);return t().catch(l)})},resolveFetch$3=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>__vitePreload(async()=>{const{default:n}=await Promise.resolve().then(()=>browser);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class FunctionsError extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class FunctionsFetchError extends FunctionsError{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class FunctionsRelayError extends FunctionsError{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class FunctionsHttpError extends FunctionsError{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var FunctionRegion;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$7=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(h){try{f(n.next(h))}catch(g){c(g)}}function x(h){try{f(n.throw(h))}catch(g){c(g)}}function f(h){h.done?l(h.value):a(h.value).then(d,x)}f((n=n.apply(e,t||[])).next())})};class FunctionsClient{constructor(t,{headers:r={},customFetch:n,region:a=FunctionRegion.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=resolveFetch$3(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return __awaiter$7(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:c}=r;let d={},{region:x}=r;x||(x=this.region);const f=new URL(`${this.url}/${t}`);x&&x!=="any"&&(d["x-region"]=x,f.searchParams.set("forceFunctionRegion",x));let h;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",h=c):typeof c=="string"?(d["Content-Type"]="text/plain",h=c):typeof FormData<"u"&&c instanceof FormData?h=c:(d["Content-Type"]="application/json",h=JSON.stringify(c)));const g=yield this.fetch(f.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:h}).catch(b=>{throw new FunctionsFetchError(b)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new FunctionsRelayError(g);if(!g.ok)throw new FunctionsHttpError(g);let _=((n=g.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),E;return _==="application/json"?E=yield g.json():_==="application/octet-stream"?E=yield g.blob():_==="text/event-stream"?E=g:_==="multipart/form-data"?E=yield g.formData():E=yield g.text(),{data:E,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof FunctionsHttpError||a instanceof FunctionsRelayError?a.context:void 0}}})}}var cjs={},PostgrestClient$1={},PostgrestQueryBuilder$1={},PostgrestFilterBuilder$1={},PostgrestTransformBuilder$1={},PostgrestBuilder$1={},getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request$1=globalObject.Request,Response$1=globalObject.Response,browser=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request:Request$1,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(browser);var PostgrestError$1={},hasRequiredPostgrestError;function requirePostgrestError(){if(hasRequiredPostgrestError)return PostgrestError$1;hasRequiredPostgrestError=1,Object.defineProperty(PostgrestError$1,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return PostgrestError$1.default=e,PostgrestError$1}var hasRequiredPostgrestBuilder;function requirePostgrestBuilder(){if(hasRequiredPostgrestBuilder)return PostgrestBuilder$1;hasRequiredPostgrestBuilder=1;var e=PostgrestBuilder$1&&PostgrestBuilder$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestBuilder$1,"__esModule",{value:!0});const t=e(require$$0),r=e(requirePostgrestError());class n{constructor(l){var c,d;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(c=l.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=l.signal,this.isMaybeSingle=(d=l.isMaybeSingle)!==null&&d!==void 0?d:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,c){return this.headers=new Headers(this.headers),this.headers.set(l,c),this}then(l,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let x=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,g,y,_;let E=null,b=null,v=null,R=f.status,A=f.statusText;if(f.ok){if(this.method!=="HEAD"){const ae=await f.text();ae===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?b=ae:b=JSON.parse(ae))}const L=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),I=(y=f.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");L&&I&&I.length>1&&(v=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(E={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,v=null,R=406,A="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const L=await f.text();try{E=JSON.parse(L),Array.isArray(E)&&f.status===404&&(b=[],E=null,R=200,A="OK")}catch{f.status===404&&L===""?(R=204,A="No Content"):E={message:L}}if(E&&this.isMaybeSingle&&(!((_=E?.details)===null||_===void 0)&&_.includes("0 rows"))&&(E=null,R=200,A="OK"),E&&this.shouldThrowOnError)throw new r.default(E)}return{error:E,data:b,count:v,status:R,statusText:A}});return this.shouldThrowOnError||(x=x.catch(f=>{var h,g,y;return{error:{message:`${(h=f?.name)!==null&&h!==void 0?h:"FetchError"}: ${f?.message}`,details:`${(g=f?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=f?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),x.then(l,c)}returns(){return this}overrideTypes(){return this}}return PostgrestBuilder$1.default=n,PostgrestBuilder$1}var hasRequiredPostgrestTransformBuilder;function requirePostgrestTransformBuilder(){if(hasRequiredPostgrestTransformBuilder)return PostgrestTransformBuilder$1;hasRequiredPostgrestTransformBuilder=1;var e=PostgrestTransformBuilder$1&&PostgrestTransformBuilder$1.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(PostgrestTransformBuilder$1,"__esModule",{value:!0});const t=e(requirePostgrestBuilder());class r extends t.default{select(a){let l=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:d,referencedTable:x=d}={}){const f=x?`${x}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:d=c}={}){const x=typeof d>"u"?"offset":`${d}.offset`,f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(x,`${a}`),this.url.searchParams.set(f,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:d=!1,wal:x=!1,format:f="text"}={}){var h;const g=[a?"analyze":null,l?"verbose":null,c?"settings":null,d?"buffers":null,x?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${y}"; options=${g};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return PostgrestTransformBuilder$1.default=r,PostgrestTransformBuilder$1}var hasRequiredPostgrestFilterBuilder;function requirePostgrestFilterBuilder(){if(hasRequiredPostgrestFilterBuilder)return PostgrestFilterBuilder$1;hasRequiredPostgrestFilterBuilder=1;var e=PostgrestFilterBuilder$1&&PostgrestFilterBuilder$1.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(PostgrestFilterBuilder$1,"__esModule",{value:!0});const t=e(requirePostgrestTransformBuilder());class r extends t.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const c=Array.from(new Set(l)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:c,type:d}={}){let x="";d==="plain"?x="pl":d==="phrase"?x="ph":d==="websearch"&&(x="w");const f=c===void 0?"":`(${c})`;return this.url.searchParams.append(a,`${x}fts${f}.${l}`),this}match(a){return Object.entries(a).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(a,l,c){return this.url.searchParams.append(a,`not.${l}.${c}`),this}or(a,{foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,l,c){return this.url.searchParams.append(a,`${l}.${c}`),this}}return PostgrestFilterBuilder$1.default=r,PostgrestFilterBuilder$1}var hasRequiredPostgrestQueryBuilder;function requirePostgrestQueryBuilder(){if(hasRequiredPostgrestQueryBuilder)return PostgrestQueryBuilder$1;hasRequiredPostgrestQueryBuilder=1;var e=PostgrestQueryBuilder$1&&PostgrestQueryBuilder$1.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(PostgrestQueryBuilder$1,"__esModule",{value:!0});const t=e(requirePostgrestFilterBuilder());class r{constructor(a,{headers:l={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=d}select(a,{head:l=!1,count:c}={}){const d=l?"HEAD":"GET";let x=!1;const f=(a??"*").split("").map(h=>/\s/.test(h)&&!x?"":(h==='"'&&(x=!x),h)).join("");return this.url.searchParams.set("select",f),c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var d;const x="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(f.length>0){const h=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:d,defaultToNull:x=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),x||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((y,_)=>y.concat(Object.keys(_)),[]);if(g.length>0){const y=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(a,{count:l}={}){var c;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return PostgrestQueryBuilder$1.default=r,PostgrestQueryBuilder$1}var hasRequiredPostgrestClient;function requirePostgrestClient(){if(hasRequiredPostgrestClient)return PostgrestClient$1;hasRequiredPostgrestClient=1;var e=PostgrestClient$1&&PostgrestClient$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestClient$1,"__esModule",{value:!0});const t=e(requirePostgrestQueryBuilder()),r=e(requirePostgrestFilterBuilder());class n{constructor(l,{headers:c={},schema:d,fetch:x}={}){this.url=l,this.headers=new Headers(c),this.schemaName=d,this.fetch=x}from(l){const c=new URL(`${this.url}/${l}`);return new t.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new n(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:d=!1,get:x=!1,count:f}={}){var h;let g;const y=new URL(`${this.url}/rpc/${l}`);let _;d||x?(g=d?"HEAD":"GET",Object.entries(c).filter(([b,v])=>v!==void 0).map(([b,v])=>[b,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([b,v])=>{y.searchParams.append(b,v)})):(g="POST",_=c);const E=new Headers(this.headers);return f&&E.set("Prefer",`count=${f}`),new r.default({method:g,url:y,headers:E,schema:this.schemaName,body:_,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return PostgrestClient$1.default=n,PostgrestClient$1}var hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var e=cjs&&cjs.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(cjs,"__esModule",{value:!0}),cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const t=e(requirePostgrestClient());cjs.PostgrestClient=t.default;const r=e(requirePostgrestQueryBuilder());cjs.PostgrestQueryBuilder=r.default;const n=e(requirePostgrestFilterBuilder());cjs.PostgrestFilterBuilder=n.default;const a=e(requirePostgrestTransformBuilder());cjs.PostgrestTransformBuilder=a.default;const l=e(requirePostgrestBuilder());cjs.PostgrestBuilder=l.default;const c=e(requirePostgrestError());return cjs.PostgrestError=c.default,cjs.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},cjs}var cjsExports=requireCjs();const index=getDefaultExportFromCjs(cjsExports),{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=index;class WebSocketFactory{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const version$3="2.15.5",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(e){e.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),l=r.getUint8(2);let c=this.HEADER_LENGTH+2;const d=n.decode(t.slice(c,c+a));c=c+a;const x=n.decode(t.slice(c,c+l));c=c+l;const f=JSON.parse(n.decode(t.slice(c,t.byteLength)));return{ref:null,topic:d,event:x,payload:f}}}class Timer{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((l,c)=>(l[c]=convertColumn(c,e,t,a),l),{})},convertColumn=(e,t,r,n)=>{const a=t.find(d=>d.name===e),l=a?.type,c=r[e];return l&&!n.includes(l)?convertCell(l,c):noop$1(c)},convertCell=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return toArray(t,r)}switch(e){case PostgresTypes.bool:return toBoolean(t);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(t);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(t);case PostgresTypes.timestamp:return toTimestampString(t);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(t);default:return noop$1(t)}},noop$1=e=>e,toBoolean=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},toNumber=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},toJson=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},toArray=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let l;const c=e.slice(1,r);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(d=>convertCell(t,d))}return e},toTimestampString=e=>typeof e=="string"?e.replace(" ","T"):e,httpEndpointURL=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Push{constructor(t,r,n={},a=DEFAULT_TIMEOUT){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,a,l,c),this.pendingDiffs.forEach(x=>{this.state=RealtimePresence.syncDiff(this.state,x,l,c)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=RealtimePresence.syncDiff(this.state,a,l,c),d())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const l=this.cloneDeep(t),c=this.transformState(r),d={},x={};return this.map(l,(f,h)=>{c[f]||(x[f]=h)}),this.map(c,(f,h)=>{const g=l[f];if(g){const y=h.map(v=>v.presence_ref),_=g.map(v=>v.presence_ref),E=h.filter(v=>_.indexOf(v.presence_ref)<0),b=g.filter(v=>y.indexOf(v.presence_ref)<0);E.length>0&&(d[f]=E),b.length>0&&(x[f]=b)}else d[f]=h}),this.syncDiff(l,{joins:d,leaves:x},n,a)}static syncDiff(t,r,n,a){const{joins:l,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(l,(d,x)=>{var f;const h=(f=t[d])!==null&&f!==void 0?f:[];if(t[d]=this.cloneDeep(x),h.length>0){const g=t[d].map(_=>_.presence_ref),y=h.filter(_=>g.indexOf(_.presence_ref)<0);t[d].unshift(...y)}n(d,h,x)}),this.map(c,(d,x)=>{let f=t[d];if(!f)return;const h=x.map(g=>g.presence_ref);f=f.filter(g=>h.indexOf(g.presence_ref)<0),t[d]=f,a(d,f,x),f.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:c,presence:d,private:x}}=this.params,f=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(_=>_.filter))!==null&&a!==void 0?a:[],h=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,g={},y={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:h}),postgres_changes:f,private:x};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(_=>t?.(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,_)),this._onClose(()=>t?.(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:_})=>{var E;if(this.socket.setAuth(),_===void 0){t?.(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,v=(E=b?.length)!==null&&E!==void 0?E:0,R=[];for(let A=0;A<v;A++){const C=b[A],{filter:{event:L,schema:I,table:ae,filter:D}}=C,ee=_&&_[A];if(ee&&ee.event===L&&ee.schema===I&&ee.table===ae&&ee.filter===D)R.push(Object.assign(Object.assign({},C),{id:ee.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,t?.(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,t&&t(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",_=>{this.state=CHANNEL_STATES.errored,t?.(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{t?.(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===CHANNEL_STATES.joined&&t===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:l,payload:c}=t,x={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,d,x;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((x=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||x===void 0)&&x.ack)&&l("ok"),f.receive("ok",()=>l("ok")),f.receive("error",()=>l("error")),f.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=CHANNEL_STATES.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Push(this,CHANNEL_EVENTS.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,l=setTimeout(()=>a.abort(),n),c=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(l),c}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Push(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,l;const c=t.toLocaleLowerCase(),{close:d,error:x,leave:f,join:h}=CHANNEL_EVENTS;if(n&&[d,x,f,h].indexOf(c)>=0&&n!==this._joinRef())return;let y=this._onMessage(c,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(_=>{var E,b,v;return((E=_.filter)===null||E===void 0?void 0:E.event)==="*"||((v=(b=_.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===c}).map(_=>_.callback(y,n)):(l=this.bindings[c])===null||l===void 0||l.filter(_=>{var E,b,v,R,A,C;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in _){const L=_.id,I=(E=_.filter)===null||E===void 0?void 0:E.event;return L&&((b=r.ids)===null||b===void 0?void 0:b.includes(L))&&(I==="*"||I?.toLocaleLowerCase()===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const L=(A=(R=_?.filter)===null||R===void 0?void 0:R.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return L==="*"||L===((C=r?.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===c}).map(_=>{if(typeof y=="object"&&"ids"in y){const E=y.data,{schema:b,table:v,commit_timestamp:R,type:A,errors:C}=E;y=Object.assign(Object.assign({},{schema:b,table:v,commit_timestamp:R,eventType:A,new:{},old:{},errors:C}),this._getPayloadRecords(E))}_.callback(y,n)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),l={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===n&&RealtimeChannel.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(CHANNEL_EVENTS.close,{},t)}_onError(t){this._on(CHANNEL_EVENTS.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=convertChangeData(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=convertChangeData(t.columns,t.old_record)),r}}const noop=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop,this.ref=0,this.reconnectTimer=null,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...c)=>__vitePreload(async()=>{const{default:d}=await Promise.resolve().then(()=>browser);return{default:d}},void 0).then(({default:d})=>d(...c)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...c)=>l(...c)},!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(l=>l.topic===n);if(a)return a;{const l=new RealtimeChannel(`realtime:${t}`,r,this);return this.channels.push(l),l}}push(t){const{topic:r,event:n,payload:a,ref:l}=t,c=()=>{this.encode(t,d=>{var x;(x=this.conn)===null||x===void 0||x.send(d)})};this.log("push",`${r} ${n} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:l,ref:c}=r,d=c?`(${c})`:"",x=l.status||"";this.log("receive",`${x} ${n} ${a} ${d}`.trim(),l),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(a,l,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(CHANNEL_EVENTS.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([WORKER_SCRIPT],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:DEFAULT_VERSION};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(CHANNEL_EVENTS.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,l,c,d,x,f,h;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(a=t?.heartbeatIntervalMs)!==null&&a!==void 0?a:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=t?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=t?.heartbeatCallback)!==null&&d!==void 0?d:noop,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(x=t?.reconnectAfterMs)!==null&&x!==void 0?x:(g=>RECONNECT_INTERVALS[g-1]||DEFAULT_RECONNECT_FALLBACK),this.encode=(f=t?.encode)!==null&&f!==void 0?f:((g,y)=>y(JSON.stringify(g))),this.decode=(h=t?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class StorageError extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class StorageApiError extends StorageError{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class StorageUnknownError extends StorageError{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var __awaiter$6=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(h){try{f(n.next(h))}catch(g){c(g)}}function x(h){try{f(n.throw(h))}catch(g){c(g)}}function f(h){h.done?l(h.value):a(h.value).then(d,x)}f((n=n.apply(e,t||[])).next())})};const resolveFetch$2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>__vitePreload(async()=>{const{default:n}=await Promise.resolve().then(()=>browser);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},resolveResponse=()=>__awaiter$6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser),void 0)).Response:Response}),recursiveToCamel=e=>{if(Array.isArray(e))return e.map(r=>recursiveToCamel(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[a]=recursiveToCamel(n)}),t},isPlainObject=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var __awaiter$5=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(h){try{f(n.next(h))}catch(g){c(g)}}function x(h){try{f(n.throw(h))}catch(g){c(g)}}function f(h){h.done?l(h.value):a(h.value).then(d,x)}f((n=n.apply(e,t||[])).next())})};const _getErrorMessage$1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),handleError$1=(e,t,r)=>__awaiter$5(void 0,void 0,void 0,function*(){const n=yield resolveResponse();e instanceof n&&!r?.noResolveJson?e.json().then(a=>{const l=e.status||500,c=a?.statusCode||l+"";t(new StorageApiError(_getErrorMessage$1(a),l,c))}).catch(a=>{t(new StorageUnknownError(_getErrorMessage$1(a),a))}):t(new StorageUnknownError(_getErrorMessage$1(e),e))}),_getRequestParams$1=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"||!n?a:(isPlainObject(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t?.headers),a.body=JSON.stringify(n)):a.body=n,t?.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function _handleRequest$1(e,t,r,n,a,l){return __awaiter$5(this,void 0,void 0,function*(){return new Promise((c,d)=>{e(r,_getRequestParams$1(t,n,a,l)).then(x=>{if(!x.ok)throw x;return n?.noResolveJson?x:x.json()}).then(x=>c(x)).catch(x=>handleError$1(x,d,n))})})}function get(e,t,r,n){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(e,"GET",t,r,n)})}function post(e,t,r,n,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(e,"POST",t,n,a,r)})}function put(e,t,r,n,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(e,"PUT",t,n,a,r)})}function head(e,t,r,n){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function remove(e,t,r,n,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(e,"DELETE",t,n,a,r)})}var __awaiter$4=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(h){try{f(n.next(h))}catch(g){c(g)}}function x(h){try{f(n.throw(h))}catch(g){c(g)}}function f(h){h.done?l(h.value):a(h.value).then(d,x)}f((n=n.apply(e,t||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=resolveFetch$2(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return __awaiter$4(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),a);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const x=c.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),x&&l.append("metadata",this.encodeMetadata(x)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl),x&&l.append("metadata",this.encodeMetadata(x))):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,x&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(x)))),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const f=this._removeEmptyFolders(r),h=this._getFinalPath(f),g=yield(t=="PUT"?put:post)(this.fetch,`${this.url}/object/${h}`,l,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(isStorageError(l))return{data:null,error:l};throw l}})}upload(t,r,n){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return __awaiter$4(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",r);try{let x;const f=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},a),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&n instanceof Blob?(x=new FormData,x.append("cacheControl",f.cacheControl),x.append("",n)):typeof FormData<"u"&&n instanceof FormData?(x=n,x.append("cacheControl",f.cacheControl)):(x=n,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const g=yield put(this.fetch,d.toString(),x,{headers:h});return{data:{path:l,fullPath:g.Key},error:null}}catch(x){if(this.shouldThrowOnError)throw x;if(isStorageError(x))return{data:null,error:x};throw x}})}createSignedUploadUrl(t,r){return __awaiter$4(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r?.upsert&&(a["x-upsert"]="true");const l=yield post(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),c=new URL(this.url+l.url),d=c.searchParams.get("token");if(!d)throw new StorageError("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:d},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}})}update(t,r,n){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}copy(t,r,n){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return __awaiter$4(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),l=yield post(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const c=n?.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return __awaiter$4(this,void 0,void 0,function*(){try{const a=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),l=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}download(t,r){return __awaiter$4(this,void 0,void 0,function*(){const a=typeof r?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(r?.transform||{}),c=l?`?${l}`:"";try{const d=this._getFinalPath(t);return{data:yield(yield get(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}info(t){return __awaiter$4(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield get(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:recursiveToCamel(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}})}exists(t){return __awaiter$4(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield head(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(isStorageError(n)&&n instanceof StorageUnknownError){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],l=r?.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&a.push(l);const d=typeof r?.transform<"u"?"render/image":"object",x=this.transformOptsToQueryString(r?.transform||{});x!==""&&a.push(x);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${f}`)}}}remove(t){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}})}list(t,r,n){return __awaiter$4(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),r),{prefix:t||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}listV2(t,r){return __awaiter$4(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield post(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const version$2="2.12.1",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$3=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(h){try{f(n.next(h))}catch(g){c(g)}}function x(h){try{f(n.throw(h))}catch(g){c(g)}}function f(h){h.done?l(h.value):a(h.value).then(d,x)}f((n=n.apply(e,t||[])).next())})};class StorageBucketApi{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const l=new URL(t);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),r),this.fetch=resolveFetch$2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(isStorageError(t))return{data:null,error:t};throw t}})}getBucket(t){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}})}emptyBucket(t){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}})}deleteBucket(t){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}})}}class StorageClient extends StorageBucketApi{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new StorageFileApi(this.url,this.headers,t,this.fetch)}}const version$1="2.57.4";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$2=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(h){try{f(n.next(h))}catch(g){c(g)}}function x(h){try{f(n.throw(h))}catch(g){c(g)}}function f(h){h.done?l(h.value):a(h.value).then(d,x)}f((n=n.apply(e,t||[])).next())})};const resolveFetch$1=e=>{let t;return e?t=e:typeof fetch>"u"?t=nodeFetch:t=fetch,(...r)=>t(...r)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(e,t,r)=>{const n=resolveFetch$1(r),a=resolveHeadersConstructor();return(l,c)=>__awaiter$2(void 0,void 0,void 0,function*(){var d;const x=(d=yield t())!==null&&d!==void 0?d:e;let f=new a(c?.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${x}`),n(l,Object.assign(Object.assign({},c),{headers:f}))})};var __awaiter$1=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(h){try{f(n.next(h))}catch(g){c(g)}}function x(h){try{f(n.throw(h))}catch(g){c(g)}}function f(h){h.done?l(h.value):a(h.value).then(d,x)}f((n=n.apply(e,t||[])).next())})};function ensureTrailingSlash(e){return e.endsWith("/")?e:e+"/"}function applySettingDefaults(e,t){var r,n;const{db:a,auth:l,realtime:c,global:d}=e,{db:x,auth:f,realtime:h,global:g}=t,y={db:Object.assign(Object.assign({},x),a),auth:Object.assign(Object.assign({},f),l),realtime:Object.assign(Object.assign({},h),c),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(r=g?.headers)!==null&&r!==void 0?r:{}),(n=d?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>__awaiter$1(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function validateSupabaseUrl(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ensureTrailingSlash(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const version="2.71.1",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=600*1e3;class AuthError extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function isAuthError(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class AuthApiError extends AuthError{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function isAuthApiError(e){return isAuthError(e)&&e.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class CustomAuthError extends AuthError{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(e){return isAuthError(e)&&e.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(e){return isAuthError(e)&&e.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function isAuthRetryableFetchError(e){return isAuthError(e)&&e.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class AuthInvalidJwtError extends CustomAuthError{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<IGNORE_BASE64URL.length;t+=1)e[IGNORE_BASE64URL[t].charCodeAt(0)]=-2;for(let t=0;t<TO_BASE64URL.length;t+=1)e[TO_BASE64URL[t].charCodeAt(0)]=t;return e})();function byteToBase64URL(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(TO_BASE64URL[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(TO_BASE64URL[n]),t.queuedBits-=6}}function byteFromBase64URL(e,t,r){const n=FROM_BASE64URL[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function stringFromBase64URL(e){const t=[],r=c=>{t.push(String.fromCodePoint(c))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{stringFromUTF8(c,n,r)};for(let c=0;c<e.length;c+=1)byteFromBase64URL(e.charCodeAt(c),a,l);return t.join("")}function codepointToUTF8(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function stringToUTF8(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}codepointToUTF8(n,t)}}function stringFromUTF8(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function base64UrlToUint8Array(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)byteFromBase64URL(e.charCodeAt(a),r,n);return new Uint8Array(t)}function stringToUint8Array(e){const t=[];return stringToUTF8(e,r=>t.push(r)),new Uint8Array(t)}function bytesToBase64URL(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>byteToBase64URL(a,r,n)),byteToBase64URL(null,r,n),t.join("")}function expiresAt(e){return Math.round(Date.now()/1e3)+e}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,l)=>{t[l]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const resolveFetch=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>__vitePreload(async()=>{const{default:n}=await Promise.resolve().then(()=>browser);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},looksLikeFetchResponse=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",setItemAsync=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},getItemAsync=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},removeItemAsync=async(e,t)=>{await e.removeItem(t)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Deferred.promiseConstructor=Promise;function decodeJWT(e){const t=e.split(".");if(t.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!BASE64URL_REGEX.test(t[n]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(t[0])),payload:JSON.parse(stringFromBase64URL(t[1])),signature:base64UrlToUint8Array(t[2]),raw:{header:t[0],payload:t[1]}}}async function sleep(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function retryable(e,t){return new Promise((n,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await e(l);if(!t(l,null,c)){n(c);return}}catch(c){if(!t(l,c)){a(c);return}}})()})}function dec2hex(e){return("0"+e.toString(16)).substr(-2)}function generatePKCEVerifier(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let l=0;l<56;l++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,dec2hex).join("")}async function sha256(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function generatePKCEChallenge(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await sha256(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(e,t,r=!1){const n=generatePKCEVerifier();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await setItemAsync(e,`${t}-code-verifier`,a);const l=await generatePKCEChallenge(n);return[l,n===l?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(e){const t=e.headers.get(API_VERSION_HEADER_NAME);if(!t||!t.match(API_VERSION_REGEX))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function validateExp(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function getAlgorithm(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(e){if(!UUID_REGEX.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function deepClone(e){return JSON.parse(JSON.stringify(e))}var __rest$1=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const _getErrorMessage=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),NETWORK_ERROR_CODES=[502,503,504];async function handleError(e){var t;if(!looksLikeFetchResponse(e))throw new AuthRetryableFetchError(_getErrorMessage(e),0);if(NETWORK_ERROR_CODES.includes(e.status))throw new AuthRetryableFetchError(_getErrorMessage(e),e.status);let r;try{r=await e.json()}catch(l){throw new AuthUnknownError(_getErrorMessage(l),l)}let n;const a=parseResponseAPIVersion(e);if(a&&a.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new AuthSessionMissingError}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(r),e.status,r.weak_password.reasons);throw new AuthApiError(_getErrorMessage(r),e.status||500,n)}const _getRequestParams=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function _request(e,t,r,n){var a;const l=Object.assign({},n?.headers);l[API_VERSION_HEADER_NAME]||(l[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),n?.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const c=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(c.redirect_to=n.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",x=await _handleRequest(e,t,r+d,{headers:l,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(x):{data:Object.assign({},x),error:null}}async function _handleRequest(e,t,r,n,a,l){const c=_getRequestParams(t,n,a,l);let d;try{d=await e(r,Object.assign({},c))}catch(x){throw console.error(x),new AuthRetryableFetchError(_getErrorMessage(x),0)}if(d.ok||await handleError(d),n?.noResolveJson)return d;try{return await d.json()}catch(x){await handleError(x)}}function _sessionResponse(e){var t;let r=null;hasSession(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=expiresAt(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function _sessionResponsePassword(e){const t=_sessionResponse(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function _userResponse(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function _ssoResponse(e){return{data:e,error:null}}function _generateLinkResponse(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:l}=e,c=__rest$1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:l},x=Object.assign({},c);return{data:{properties:d,user:x},error:null}}function _noResolveJsonResponse(e){return e}function hasSession(e){return e.access_token&&e.refresh_token&&e.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];var __rest=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class GoTrueAdminApi{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=resolveFetch(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=__rest(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:_generateLinkResponse,redirectTo:r?.redirectTo})}catch(r){if(isAuthError(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_userResponse})}catch(r){if(isAuthError(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,l,c,d,x;try{const f={nextPage:null,lastPage:0,total:0},h=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(l=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:_noResolveJsonResponse});if(h.error)throw h.error;const g=await h.json(),y=(c=h.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(x=(d=h.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&x!==void 0?x:[];return _.length>0&&(_.forEach(E=>{const b=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(E.split(";")[1].split("=")[1]);f[`${v}Page`]=b}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(isAuthError(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){validateUUID(t);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_userResponse})}catch(r){if(isAuthError(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){validateUUID(t);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){validateUUID(t);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){validateUUID(t.userId);try{const{data:r,error:n}=await _request(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _deleteFactor(t){validateUUID(t.userId),validateUUID(t.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}}function memoryLocalStorageAdapter(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(e,t,r){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(internals.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lockNoOp(e,t,r){return await r()}const GLOBAL_JWKS={};class GoTrueClient{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},DEFAULT_OPTIONS),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new GoTrueAdminApi({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=resolveFetch(a.fetch),this.lock=a.lock||lockNoOp,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:isBrowser()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=GLOBAL_JWKS[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=GLOBAL_JWKS[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=parseParametersFromURL(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),isBrowser()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:l}=await this._getSessionFromURL(r,n);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),isAuthImplicitGrantRedirectError(l)){const x=(t=l.details)===null||t===void 0?void 0:t.code;if(x==="identity_already_exists"||x==="identity_not_found"||x==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return isAuthError(r)?{error:r}:{error:new AuthUnknownError("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const l=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t?.options)===null||a===void 0?void 0:a.captchaToken}},xform:_sessionResponse}),{data:c,error:d}=l;if(d||!c)return{data:{user:null,session:null},error:d};const x=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:f,session:x},error:null}}catch(l){if(isAuthError(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(t){var r,n,a;try{let l;if("email"in t){const{email:h,password:g,options:y}=t;let _=null,E=null;this.flowType==="pkce"&&([_,E]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),l=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:h,password:g,data:(r=y?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:_,code_challenge_method:E},xform:_sessionResponse})}else if("phone"in t){const{phone:h,password:g,options:y}=t;l=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:g,data:(n=y?.data)!==null&&n!==void 0?n:{},channel:(a=y?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:c,error:d}=l;if(d||!c)return{data:{user:null,session:null},error:d};const x=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:f,session:x},error:null}}catch(l){if(isAuthError(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(t){try{let r;if("email"in t){const{email:l,password:c,options:d}=t;r=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in t){const{phone:l,password:c,options:d}=t;r=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(isAuthError(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,l,c,d,x,f,h,g,y,_;let E,b;if("message"in t)E=t.message,b=t.signature;else{const{chain:v,wallet:R,statement:A,options:C}=t;let L;if(isBrowser())if(typeof R=="object")L=R;else{const ae=window;if("solana"in ae&&typeof ae.solana=="object"&&("signIn"in ae.solana&&typeof ae.solana.signIn=="function"||"signMessage"in ae.solana&&typeof ae.solana.signMessage=="function"))L=ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=R}const I=new URL((r=C?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in L&&L.signIn){const ae=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C?.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),A?{statement:A}:null));let D;if(Array.isArray(ae)&&ae[0]&&typeof ae[0]=="object")D=ae[0];else if(ae&&typeof ae=="object"&&"signedMessage"in ae&&"signature"in ae)D=ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)E=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),b=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${I.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(a=(n=C?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=C?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((c=C?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((d=C?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((x=C?.signInWithSolana)===null||x===void 0)&&x.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((f=C?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((g=(h=C?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||g===void 0)&&g.length?["Resources",...C.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const ae=await L.signMessage(new TextEncoder().encode(E),"utf8");if(!ae||!(ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=ae}}try{const{data:v,error:R}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:bytesToBase64URL(b)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(_=t.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:_sessionResponse});if(R)throw R;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:R})}catch(v){if(isAuthError(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const r=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:l,error:c}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(isAuthError(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:l,nonce:c}=t,d=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:_sessionResponse}),{data:x,error:f}=d;return f?{data:{user:null,session:null},error:f}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:x,error:f})}catch(r){if(isAuthError(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,l,c;try{if("email"in t){const{email:d,options:x}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:g}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=x?.data)!==null&&r!==void 0?r:{},create_user:(n=x?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:x?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in t){const{phone:d,options:x}=t,{data:f,error:h}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=x?.data)!==null&&a!==void 0?a:{},create_user:(l=x?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},channel:(c=x?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:h}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(d){if(isAuthError(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(t){var r,n;try{let a,l;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,l=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:c,error:d}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:_sessionResponse});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const x=c.session,f=c.user;return x?.access_token&&(await this._saveSession(x),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",x)),{data:{user:f,session:x},error:null}}catch(a){if(isAuthError(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let l=null,c=null;return this.flowType==="pkce"&&([l,c]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:_ssoResponse})}catch(l){if(isAuthError(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new AuthSessionMissingError;const{error:a}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(isAuthError(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:l}=t,{error:c}=await _request(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in t){const{phone:n,type:a,options:l}=t,{data:c,error:d}=await _request(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:d}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(r){if(isAuthError(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const c=await getItemAsync(this.userStorage,this.storageKey+"-user");c?.user?t.user=c.user:t.user=userNotAvailableProxy()}if(this.storage.isServer&&t.user){let c=this.suppressGetSessionWarning;t=new Proxy(t,{get:(x,f,h)=>(!c&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(x,f,h))})}return{data:{session:t},error:null}}const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_userResponse}):await this._useSession(async r=>{var n,a,l;const{data:c,error:d}=r;if(d)throw d;return!(!((n=c.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:_userResponse})})}catch(r){if(isAuthError(r))return isAuthSessionMissingError(r)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:l}=n;if(l)throw l;if(!a.session)throw new AuthSessionMissingError;const c=a.session;let d=null,x=null;this.flowType==="pkce"&&t.email!=null&&([d,x]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:f,error:h}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:x}),jwt:c.access_token,xform:_userResponse});if(h)throw h;return c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new AuthSessionMissingError;const r=Date.now()/1e3;let n=r,a=!0,l=null;const{payload:c}=decodeJWT(t.access_token);if(c.exp&&(n=c.exp,a=n<=r),a){const{session:d,error:x}=await this._callRefreshToken(t.refresh_token);if(x)return{data:{user:null,session:null},error:x};if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:x}=await this._getUser(t.access_token);if(x)throw x;l={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(r){if(isAuthError(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:c,error:d}=r;if(d)throw d;t=(n=c.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new AuthSessionMissingError;const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(isAuthError(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(t.error||t.error_description||t.error_code)throw new AuthImplicitGrantRedirectError(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:A,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:d,expires_at:x,token_type:f}=t;if(!l||!d||!c||!f)throw new AuthImplicitGrantRedirectError("No session defined in URL");const h=Math.round(Date.now()/1e3),g=parseInt(d);let y=h+g;x&&(y=parseInt(x));const _=y-h;_*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${g}s`);const E=y-g;h-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,y,h):h-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,y,h);const{data:b,error:v}=await this._getUser(l);if(v)throw v;const R={provider_token:n,provider_refresh_token:a,access_token:l,expires_in:g,expires_at:y,refresh_token:c,token_type:f,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:t.type},error:null}}catch(n){if(isAuthError(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:l}=r;if(l)return{error:l};const c=(n=a.session)===null||n===void 0?void 0:n.access_token;if(c){const{error:d}=await this.admin.signOut(c,t);if(d&&!(isAuthApiError(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return t!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=uuid(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:l},error:c}=r;if(c)throw c;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(isAuthError(l))return{data:null,error:l};throw l}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async l=>{var c,d,x,f,h;const{data:g,error:y}=l;if(y)throw y;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(x=t.options)===null||x===void 0?void 0:x.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",_,{headers:this.headers,jwt:(h=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return isBrowser()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(isAuthError(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:l,error:c}=r;if(c)throw c;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await retryable(async a=>(a>0&&await sleep(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_sessionResponse})),(a,l)=>{const c=200*Math.pow(2,a);return l&&isAuthRetryableFetchError(l)&&Date.now()+c-n<AUTO_REFRESH_TICK_DURATION_MS})}catch(n){if(this._debug(r,"error",n),isAuthError(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),isBrowser()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await getItemAsync(this.storage,this.storageKey);if(a&&this.userStorage){let c=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await setItemAsync(this.userStorage,this.storageKey+"-user",c)),a.user=(t=c?.user)!==null&&t!==void 0?t:userNotAvailableProxy()}else if(a&&!a.user&&!a.user){const c=await getItemAsync(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,a)):a.user=userNotAvailableProxy()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const l=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),isAuthRetryableFetchError(c)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(n,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Deferred;const{data:l,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!l.session)throw new AuthSessionMissingError;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={session:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(a,"error",l),isAuthError(l)){const c={session:null,error:l};return isAuthRetryableFetchError(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(x){l.push(x)}});if(await Promise.all(c),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const l=deepClone(a);await setItemAsync(this.storage,this.storageKey,l)}else{const a=deepClone(r);await setItemAsync(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&isBrowser()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),a<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[l,c]=await getCodeChallengeAndMethod(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(n?.queryParams){const l=new URLSearchParams(n.queryParams);a.push(l.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;return l?{data:null,error:l}:await _request(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:l,error:c}=r;if(c)return{data:null,error:c};const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:x,error:f}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=l?.session)===null||n===void 0?void 0:n.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&(!((a=x?.totp)===null||a===void 0)&&a.qr_code)&&(x.totp.qr_code=`data:image/svg+xml;utf-8,${x.totp.qr_code}`),{data:x,error:null})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;if(l)return{data:null,error:l};const{data:c,error:d}=await _request(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:d})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;return l?{data:null,error:l}:await _request(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=t?.factors||[],a=n.filter(c=>c.factor_type==="totp"&&c.status==="verified"),l=n.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:n,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:l}=t;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=decodeJWT(a.access_token);let d=null;c.aal&&(d=c.aal);let x=d;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(x="aal2");const h=c.amr||[];return{data:{currentLevel:d,nextLevel:x,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(d=>d.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(d=>d.kid===t),n&&this.jwks_cached_at+JWKS_TTL>a)return n;const{data:l,error:c}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,n=l.keys.find(d=>d.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:_,error:E}=await this.getSession();if(E||!_.session)return{data:null,error:E};n=_.session.access_token}const{header:a,payload:l,signature:c,raw:{header:d,payload:x}}=decodeJWT(n);r?.allowExpired||validateExp(l.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!f){const{error:_}=await this.getUser(n);if(_)throw _;return{data:{claims:l,header:a,signature:c},error:null}}const h=getAlgorithm(a.alg),g=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,g,c,stringToUint8Array(`${d}.${x}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(t){super(t)}}var __awaiter=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(h){try{f(n.next(h))}catch(g){c(g)}}function x(h){try{f(n.throw(h))}catch(g){c(g)}}function f(h){h.done?l(h.value):a(h.value).then(d,x)}f((n=n.apply(e,t||[])).next())})};class SupabaseClient{constructor(t,r,n){var a,l,c;this.supabaseUrl=t,this.supabaseKey=r;const d=validateSupabaseUrl(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const x=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:x}),global:DEFAULT_GLOBAL_OPTIONS},h=applySettingDefaults(n??{},f);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=h.global.headers)!==null&&l!==void 0?l:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=h.auth)!==null&&c!==void 0?c:{},this.headers,h.global.fetch),this.fetch=fetchWithAuth(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new PostgrestClient(new URL("rest/v1",d).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,n?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return __awaiter(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:l,storageKey:c,flowType:d,lock:x,debug:f},h,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),h),storageKey:c,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:l,flowType:d,lock:x,debug:f,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(e,t,r)=>new SupabaseClient(e,t,r);function shouldShowDeprecationWarning(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const supabaseUrl="https://wuluriiajnaruvaldlhb.supabase.co",supabaseAnonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bHVyaWlham5hcnV2YWxkbGhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4MDc4OTQsImV4cCI6MjA3MzM4Mzg5NH0.-Dx4fALDwoKHjsxOy1hKsME_DG4ZCQi2PdLCq5wV_hI",instrumentedFetch=async(e,t)=>{const r=e instanceof Request?e:void 0,n=r?.url??(typeof e=="string"?e:e instanceof URL?e.toString():""),a=(t?.method??r?.method??"GET").toUpperCase();if(n.includes("/rest/v1"))try{const{pathname:l}=new URL(n);console.info("[supabase]",a,l),l.includes("pg_timezone_names")&&console.trace("Timezone list requested from Supabase")}catch{console.info("[supabase]",a,n)}return fetch(e,t)},supabase=createClient(supabaseUrl,supabaseAnonKey,{global:{fetch:instrumentedFetch}}),hashPassword=e=>{let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return t.toString()},hashPasswordAlternative=e=>{let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return t.toString()},AuthContext=reactExports.createContext(void 0),useAuth=()=>{const e=reactExports.useContext(AuthContext);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},AuthProvider=({children:e})=>{const[t,r]=reactExports.useState(null),[n,a]=reactExports.useState(null),[l,c]=reactExports.useState(!0);reactExports.useEffect(()=>{const b=setTimeout(()=>{l&&c(!1)},3e4);(async()=>{try{const{data:{session:A}}=await supabase.auth.getSession();if(A?.user)a(A.user),await d(A.user.id);else{const C=localStorage.getItem("pos_user");C&&r(JSON.parse(C))}}catch{}finally{c(!1)}})();const{data:{subscription:R}}=supabase.auth.onAuthStateChange(async(A,C)=>{if(A==="SIGNED_IN"&&C?.user){a(C.user);try{await d(C.user.id)}catch{}}else A==="SIGNED_OUT"?(a(null),r(null),localStorage.removeItem("pos_user")):A==="TOKEN_REFRESHED"&&C?.user&&a(C.user)});return()=>{clearTimeout(b),R.unsubscribe()}},[]);const d=async b=>{try{const{data:v,error:R}=await supabase.from("users").select("*").eq("user_id",parseInt(b)).single();if(R){console.error("Error loading user:",R),r(null);return}const A={user_id:v.user_id,username:v.username,role:v.role,active:v.active,icon:v.icon,business_id:v.business_id??null};r(A),localStorage.setItem("pos_user",JSON.stringify(A))}catch(v){console.error("Error in loadUserProfile:",v),r(null)}},x=async(b,v)=>{try{c(!0);const R=hashPassword(v),{data:A,error:C}=await supabase.from("users").select("business_id").eq("username",b).eq("password_hash",R).eq("active",!0).single();return C||!A?{success:!1}:{success:!0,businessId:A.business_id}}catch{return{success:!1}}finally{c(!1)}},f=async(b,v)=>{try{c(!0);const{data:R,error:A}=await supabase.from("users").select("*").eq("email",b).eq("active",!0).maybeSingle();if(R&&!A){const L=await h(R.username,v);return L&&localStorage.setItem("lastLogin",new Date().toLocaleString()),L}const C=await h(b,v);return C&&localStorage.setItem("lastLogin",new Date().toLocaleString()),C}catch{return!1}finally{c(!1)}},h=async(b,v)=>{try{const R=hashPassword(v),{data:A,error:C}=await supabase.from("users").select("*").eq("username",b).eq("password_hash",R).eq("active",!0).maybeSingle();if(C)return console.error("Legacy login error:",C),!1;if(!A)return console.log("No user found with those credentials"),!1;const L={user_id:A.user_id,username:A.username,role:A.role,active:A.active,icon:A.icon,business_id:A.business_id??null,last_used:A.last_used};return r(L),localStorage.setItem("pos_user",JSON.stringify(L)),localStorage.setItem("lastLogin",new Date().toLocaleString()),localStorage.setItem("lastPassword",v),await supabase.from("users").update({last_used:new Date().toISOString()}).eq("user_id",A.user_id),!0}catch{return!1}},E={user:t,supabaseUser:n,login:f,authenticate:x,register:async(b,v,R,A,C,L,I,ae,D,ee,Y,le,te,oe,Be,Pe)=>{try{c(!0);const{data:De}=await supabase.from("users").select("user_id").eq("username",b).maybeSingle();if(De)return console.error("Username already exists"),{success:!1};const{data:X}=await supabase.from("business_info").select("business_id").eq("name",R).maybeSingle();if(X)return console.error("Business name already exists"),{success:!1};const{data:Se}=await supabase.from("pending_registrations").select("id").eq("email",L||b).eq("status","pending").maybeSingle();if(Se)return console.error("Registration already pending for this email"),{success:!1};const z=Be&&Pe?`${Be} - ${Pe}`:null,{data:re,error:T}=await supabase.from("business_info").insert({name:R,business_name:R,business_type:ae||"Retail Store",description:D||null,address:ee||"Default Address",phone_number:Y||null,website:te||null,vat_number:oe||null,business_hours:z,currency:le||"USD",created_at:new Date().toISOString()}).select("business_id").single();if(T||!re)return console.error("Error creating business:",T),{success:!1};try{const{error:K}=await supabase.from("branches").insert({branch_name:"Main Branch",address:ee||"Default Address",phone:Y||null,manager_id:null,shop_image:"shop1",business_id:re.business_id,active:!0,created_at:new Date().toISOString()});K?console.warn("Failed to create default branch:",K):console.log("Default branch created successfully for business:",re.business_id)}catch(K){console.warn("Failed to create default branch:",K)}const J=hashPassword(v),B=A&&C?`${A} ${C}`:A||C||null,{data:j,error:M}=await supabase.from("users").insert({username:b,password_hash:J,role:"owner",active:!1,business_id:re.business_id,email:L||null,full_name:B,created_at:new Date().toISOString()}).select("*").single();if(M||!j)return console.error("Error creating user:",M),await supabase.from("business_info").delete().eq("business_id",re.business_id),{success:!1};const{error:U}=await supabase.from("pending_registrations").insert({user_id:j.user_id,email:L||b,business_name:R,first_name:A,last_name:C,phone:I,business_type:ae,business_description:D,business_address:ee,business_phone:Y,currency:le,website:te,vat_number:oe,open_time:Be,close_time:Pe,status:"pending"});return U?(console.error("Error creating pending registration:",U),await supabase.from("users").delete().eq("user_id",j.user_id),await supabase.from("business_info").delete().eq("business_id",re.business_id),{success:!1}):{success:!0,pendingApproval:!0}}catch(De){return console.error("Registration error:",De),{success:!1}}finally{c(!1)}},switchUser:async(b,v,R=!1)=>{try{c(!0),console.log("Switching to user ID:",b,"with",R?"PIN":"password","length:",v.length);let A,C;if(R){const I=await supabase.from("users").select("*").eq("user_id",b).eq("pin",v).eq("active",!0).single();A=I.data,C=I.error}else{const I=hashPassword(v);console.log("Hashed password:",I),console.log("Target user ID:",b);const{data:ae}=await supabase.from("users").select("password_hash, username").eq("user_id",b).single();console.log("User data from DB:",ae),console.log("Expected hash:",I),console.log("Actual hash in DB:",ae?.password_hash);let D=await supabase.from("users").select("*").eq("user_id",b).eq("password_hash",I).eq("active",!0).single();if(D.error||!D.data){console.log("First attempt failed, trying with integer hash");const ee=parseInt(I);D=await supabase.from("users").select("*").eq("user_id",b).eq("password_hash",ee).eq("active",!0).single()}if(D.error||!D.data){console.log("Integer hash failed, trying with alternative hash function");const ee=hashPasswordAlternative(v);console.log("Alternative hash:",ee),D=await supabase.from("users").select("*").eq("user_id",b).eq("password_hash",ee).eq("active",!0).single()}(D.error||!D.data)&&(console.log("Alternative hash failed, trying with stored hash for debugging"),D=await supabase.from("users").select("*").eq("user_id",b).eq("password_hash",ae?.password_hash).eq("active",!0).single(),D.data&&console.log("SUCCESS with stored hash! This means the password is correct but hash function is inconsistent")),A=D.data,C=D.error}if(C||!A)return console.error("User switch failed:",C),console.error("Query result - data:",A,"error:",C),!1;console.log("Found target user data:",A),await supabase.from("users").update({last_used:new Date().toISOString()}).eq("user_id",b);const L={user_id:A.user_id,username:A.username,role:A.role,active:A.active,icon:A.icon,business_id:A.business_id??null,last_used:new Date().toISOString(),pin:A.pin};return console.log("Before switch - Current user:",t?.username,"Role:",t?.role),r(L),localStorage.setItem("pos_user",JSON.stringify(L)),localStorage.setItem("lastLogin",new Date().toLocaleString()),R||localStorage.setItem("lastPassword",v),await new Promise(I=>setTimeout(I,50)),console.log("After switch - New user:",L.username,"Role:",L.role),console.log("User switched successfully to:",L.username,"Role:",L.role),console.log("Updated localStorage user:",JSON.parse(localStorage.getItem("pos_user")||"{}")),console.log("User state should now be updated - no redirect should occur"),!0}catch(A){return console.error("User switch error:",A),!1}finally{c(!1)}},logout:async()=>{try{n&&await supabase.auth.signOut(),r(null),a(null),localStorage.removeItem("pos_user"),localStorage.removeItem("lastPassword"),window.location.href="/retailpos/login"}catch{window.location.href="/retailpos/login"}},loading:l,currentUserId:n?.id||t?.user_id?.toString()};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:E,children:e})},BusinessContext=reactExports.createContext(void 0),BusinessProvider=({children:e})=>{const{user:t,loading:r}=useAuth(),[n,a]=reactExports.useState(null),[l,c]=reactExports.useState(!0),[d,x]=reactExports.useState(null),f=reactExports.useCallback(async()=>{if(!t?.business_id){a(null),c(!1);return}try{c(!0),x(null);const{data:y,error:_}=await supabase.from("business_info").select("*").eq("business_id",t.business_id).single();if(_)throw _;a(y),localStorage.setItem("current_business_id",y.business_id.toString())}catch(y){console.error("Error loading business:",y),x(y instanceof Error?y.message:"Failed to load business"),a(null)}finally{c(!1)}},[t]),h=reactExports.useCallback(async()=>{await f()},[f]);reactExports.useEffect(()=>{r||f()},[f,r]);const g={currentBusiness:n,currentBusinessId:n?.business_id??null,loading:l||r,error:d,refreshBusiness:h};return jsxRuntimeExports.jsx(BusinessContext.Provider,{value:g,children:e})},useBusiness=()=>{const e=reactExports.useContext(BusinessContext);if(e===void 0)throw new Error("useBusiness must be used within a BusinessProvider");return e},BranchContext=reactExports.createContext(void 0),BranchProvider=({children:e})=>{const[t,r]=reactExports.useState(null),[n,a]=reactExports.useState(!0),[l,c]=reactExports.useState(!1),[d,x]=reactExports.useState(null);reactExports.useEffect(()=>{const g=localStorage.getItem("selected_branch_id"),y=localStorage.getItem("selected_branch_name");g&&y&&r({branch_id:parseInt(g),branch_name:y,address:"",phone:"",shop_image:"shop1",business_id:0,active:!0,created_at:new Date().toISOString()}),a(!1)},[]);const f=g=>{r(g),g?(localStorage.setItem("selected_branch_id",g.branch_id.toString()),localStorage.setItem("selected_branch_name",g.branch_name)):(localStorage.removeItem("selected_branch_id"),localStorage.removeItem("selected_branch_name"))},h={selectedBranch:t,selectedBranchId:t?.branch_id??null,setSelectedBranch:f,loading:n,isSwitchingBranch:l,setSwitchingBranch:c,switchingToBranch:d,setSwitchingToBranch:x};return jsxRuntimeExports.jsx(BranchContext.Provider,{value:h,children:e})},useBranch=()=>{const e=reactExports.useContext(BranchContext);if(e===void 0)throw new Error("useBranch must be used within a BranchProvider");return e},NavContext=reactExports.createContext(void 0),NavProvider=({children:e})=>{const[t,r]=reactExports.useState(!1);return jsxRuntimeExports.jsx(NavContext.Provider,{value:{isCollapsed:t,setIsCollapsed:r},children:e})},useNav=()=>{const e=reactExports.useContext(NavContext);if(e===void 0)throw new Error("useNav must be used within a NavProvider");return e},ROLE_PERMISSIONS={Admin:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Owner:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Manager:{canManageUsers:!1,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!1,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Cashier:{canManageUsers:!1,canManageProducts:!1,canProcessSales:!0,canViewReports:!1,canChangeSettings:!1,canUploadImages:!1,canLookupProducts:!0,canLookupCustomers:!0}},RoleContext=reactExports.createContext(void 0),RoleProvider=({children:e})=>{const{user:t}=useAuth(),r=t?.role||"Cashier",n=r.charAt(0).toUpperCase()+r.slice(1).toLowerCase(),a=ROLE_PERMISSIONS[n]||ROLE_PERMISSIONS.Cashier,l=x=>a[x]||!1,d={userRole:n,permissions:a,hasPermission:l,canAccessRoute:x=>{switch(x){case"/admin":return l("canManageUsers");case"/products":return l("canManageProducts")||l("canLookupProducts");case"/sales":return l("canProcessSales");case"/transactions":return l("canProcessSales");case"/side-businesses":return l("canProcessSales");case"/reminders":return l("canProcessSales");case"/customers":return l("canLookupCustomers");case"/":return!0;default:return!0}}};return jsxRuntimeExports.jsx(RoleContext.Provider,{value:d,children:e})},useRole=()=>{const e=reactExports.useContext(RoleContext);if(e===void 0)throw new Error("useRole must be used within a RoleProvider");return e},PinContext=reactExports.createContext(void 0),PinProvider=({children:e})=>{const[t,r]=reactExports.useState(null),[n,a]=reactExports.useState(!1);reactExports.useEffect(()=>{const d=sessionStorage.getItem("pin_validated");r(d==="true")},[]);const l=async d=>{a(!0);const x="1967";return await new Promise(f=>setTimeout(f,500)),d===x?(r(!0),sessionStorage.setItem("pin_validated","true"),a(!1),!0):(r(!1),a(!1),!1)},c=d=>{r(d)};return jsxRuntimeExports.jsx(PinContext.Provider,{value:{isPinValid:t,isCheckingPin:n,validatePin:l,setPinValid:c},children:e})},useNavCollapse=()=>{const{isCollapsed:e,setIsCollapsed:t}=useNav();reactExports.useEffect(()=>{const r=a=>{if(e)return;const l=document.querySelector("nav");if(l&&l.contains(a.target))return;a.target.closest('button, a, input, select, textarea, [role="button"], [onclick]')||t(!0)},n=setTimeout(()=>{document.addEventListener("click",r)},100);return()=>{clearTimeout(n),document.removeEventListener("click",r)}},[e,t])},container$2="_container_zy2kz_18",header$2="_header_zy2kz_24",headerContent="_headerContent_zy2kz_30",headerLeft$1="_headerLeft_zy2kz_55",logoContainer$1="_logoContainer_zy2kz_60",logo="_logo_zy2kz_60",headerRight="_headerRight_zy2kz_78",backLink="_backLink_zy2kz_83",mainContent$1="_mainContent_zy2kz_95",formContainer="_formContainer_zy2kz_101",formWrapper="_formWrapper_zy2kz_121",formHeader="_formHeader_zy2kz_130",formTitle="_formTitle_zy2kz_134",formSubtitle="_formSubtitle_zy2kz_141",form$1="_form_zy2kz_101",label="_label_zy2kz_154",input="_input_zy2kz_162",inputError="_inputError_zy2kz_178",passwordContainer="_passwordContainer_zy2kz_182",passwordToggle="_passwordToggle_zy2kz_186",error="_error_zy2kz_199",errorMessage$3="_errorMessage_zy2kz_205",formOptions="_formOptions_zy2kz_216",rememberMe="_rememberMe_zy2kz_222",checkbox="_checkbox_zy2kz_227",checkboxLabel$1="_checkboxLabel_zy2kz_235",forgotPassword="_forgotPassword_zy2kz_241",forgotPasswordLink="_forgotPasswordLink_zy2kz_245",submitButton$1="_submitButton_zy2kz_260",backButton="_backButton_zy2kz_286",buttonGroup="_buttonGroup_zy2kz_303",socialLogin="_socialLogin_zy2kz_332",divider="_divider_zy2kz_336",dividerLine="_dividerLine_zy2kz_340",dividerText="_dividerText_zy2kz_349",socialButtons="_socialButtons_zy2kz_362",socialButton="_socialButton_zy2kz_362",signUpLink="_signUpLink_zy2kz_402",signUpText="_signUpText_zy2kz_415",successMessage$1="_successMessage_zy2kz_428",successIcon="_successIcon_zy2kz_435",successTitle="_successTitle_zy2kz_456",successText="_successText_zy2kz_462",imageContainer="_imageContainer_zy2kz_467",logoOverlay="_logoOverlay_zy2kz_478",overlayLogo="_overlayLogo_zy2kz_486",styles$6={container:container$2,header:header$2,headerContent,headerLeft:headerLeft$1,logoContainer:logoContainer$1,logo,headerRight,backLink,mainContent:mainContent$1,formContainer,formWrapper,formHeader,formTitle,formSubtitle,form:form$1,label,input,inputError,passwordContainer,passwordToggle,error,errorMessage:errorMessage$3,formOptions,rememberMe,checkbox,checkboxLabel:checkboxLabel$1,forgotPassword,forgotPasswordLink,submitButton:submitButton$1,backButton,buttonGroup,socialLogin,divider,dividerLine,dividerText,socialButtons,socialButton,signUpLink,signUpText,successMessage:successMessage$1,successIcon,successTitle,successText,imageContainer,logoOverlay,overlayLogo},Login=()=>{const e=useNavigate(),{login:t,loading:r}=useAuth(),[n,a]=reactExports.useState({email:"",password:"",rememberMe:!1}),[l,c]=reactExports.useState({}),[d,x]=reactExports.useState(!1),[f,h]=reactExports.useState(!1),[g,y]=reactExports.useState(!1),[_,E]=reactExports.useState(!1),[b,v]=reactExports.useState(!1),R=te=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te),A=te=>{c(oe=>{const Be={...oe};return delete Be[te],Be})},C=()=>{let te=!0;const oe={};return n.email.trim()?R(n.email)||(oe.email="Please enter a valid email address",te=!1):(oe.email="Email is required",te=!1),n.password||(oe.password="Password is required",te=!1),c(oe),te},L=()=>{let te=!0;const oe={};return n.email.trim()?R(n.email)||(oe.resetEmail="Please enter a valid email address",te=!1):(oe.resetEmail="Email is required",te=!1),c(oe),te},I=te=>{const{name:oe,value:Be,type:Pe,checked:De}=te.target;a(X=>({...X,[oe]:Pe==="checkbox"?De:Be})),l[oe]&&A(oe)},ae=async te=>{te.preventDefault(),C()&&(v(!0),await t(n.email,n.password)?e("/select-user"):c({general:"Invalid email or password"}),v(!1))},D=async te=>{te.preventDefault(),L()&&(v(!0),setTimeout(()=>{v(!1),E(!0)},2e3))},ee=()=>{x(!d)},Y=te=>{te.preventDefault(),h(!0),c({})},le=()=>{h(!1),E(!1),y(!1),c({}),a(te=>({...te,password:""}))};return jsxRuntimeExports.jsxs("div",{className:styles$6.container,children:[jsxRuntimeExports.jsx("header",{className:styles$6.header,children:jsxRuntimeExports.jsxs("div",{className:styles$6.headerContent,children:[jsxRuntimeExports.jsx("div",{className:styles$6.headerLeft,children:jsxRuntimeExports.jsx("div",{className:styles$6.logoContainer,children:jsxRuntimeExports.jsxs("svg",{className:styles$6.logo,viewBox:"0 0 200 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{cx:"25",cy:"30",r:"14",fill:"#7d8d86"}),jsxRuntimeExports.jsx("text",{x:"45",y:"38",fontFamily:"Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",fontSize:"22",fontWeight:"600",fill:"#3e3f29",children:"TillPoint"})]})})}),jsxRuntimeExports.jsx("div",{className:styles$6.headerRight,children:jsxRuntimeExports.jsx("a",{href:"/",className:styles$6.backLink,children:" Back to Home"})})]})}),jsxRuntimeExports.jsxs("div",{className:styles$6.mainContent,children:[jsxRuntimeExports.jsx("div",{className:styles$6.formContainer,children:jsxRuntimeExports.jsxs("div",{className:styles$6.formWrapper,children:[!f&&!g&&!_&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:styles$6.formHeader,children:[jsxRuntimeExports.jsx("h2",{className:styles$6.formTitle,children:"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:styles$6.formSubtitle,children:"Sign in to your TillPoint account"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ae,className:styles$6.form,children:[l.general&&jsxRuntimeExports.jsx("div",{className:styles$6.errorMessage,children:l.general}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:styles$6.label,children:"Email Address"}),jsxRuntimeExports.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:I,required:!0,className:`${styles$6.input} ${l.email?styles$6.inputError:""}`,placeholder:"Enter your email"}),l.email&&jsxRuntimeExports.jsx("span",{className:styles$6.error,children:l.email})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:styles$6.label,children:"Password"}),jsxRuntimeExports.jsxs("div",{className:styles$6.passwordContainer,children:[jsxRuntimeExports.jsx("input",{type:d?"text":"password",id:"password",name:"password",value:n.password,onChange:I,required:!0,className:`${styles$6.input} ${l.password?styles$6.inputError:""}`,placeholder:"Enter your password"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:ee,className:styles$6.passwordToggle,children:jsxRuntimeExports.jsx("i",{className:`fas ${d?"fa-eye-slash":"fa-eye"}`})})]}),l.password&&jsxRuntimeExports.jsx("span",{className:styles$6.error,children:l.password})]}),jsxRuntimeExports.jsxs("div",{className:styles$6.formOptions,children:[jsxRuntimeExports.jsxs("div",{className:styles$6.rememberMe,children:[jsxRuntimeExports.jsx("input",{id:"remember-me",name:"rememberMe",type:"checkbox",checked:n.rememberMe,onChange:I,className:styles$6.checkbox}),jsxRuntimeExports.jsx("label",{htmlFor:"remember-me",className:styles$6.checkboxLabel,children:"Remember me"})]}),jsxRuntimeExports.jsx("div",{className:styles$6.forgotPassword,children:jsxRuntimeExports.jsx("button",{type:"button",onClick:Y,className:styles$6.forgotPasswordLink,children:"Forgot your password?"})})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:styles$6.submitButton,disabled:b,children:b?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fas fa-spinner fa-spin"}),"Signing In..."]}):"Sign In"})]}),jsxRuntimeExports.jsxs("div",{className:styles$6.socialLogin,children:[jsxRuntimeExports.jsxs("div",{className:styles$6.divider,children:[jsxRuntimeExports.jsx("div",{className:styles$6.dividerLine}),jsxRuntimeExports.jsx("div",{className:styles$6.dividerText,children:jsxRuntimeExports.jsx("span",{children:"Or continue with"})})]}),jsxRuntimeExports.jsxs("div",{className:styles$6.socialButtons,children:[jsxRuntimeExports.jsxs("button",{type:"button",className:styles$6.socialButton,children:[jsxRuntimeExports.jsx("i",{className:"fab fa-google"}),"Google"]}),jsxRuntimeExports.jsxs("button",{type:"button",className:styles$6.socialButton,children:[jsxRuntimeExports.jsx("i",{className:"fab fa-microsoft"}),"Microsoft"]})]})]}),jsxRuntimeExports.jsx("div",{className:styles$6.signUpLink,children:jsxRuntimeExports.jsxs("p",{children:["Don't have an account? ",jsxRuntimeExports.jsx("a",{href:"/retailpos/signup",className:styles$6.signUpText,children:"Sign up here"})]})})]}),f&&!_&&jsxRuntimeExports.jsxs("form",{onSubmit:D,className:styles$6.form,children:[jsxRuntimeExports.jsxs("div",{className:styles$6.formHeader,children:[jsxRuntimeExports.jsx("h3",{className:styles$6.formTitle,children:"Reset Password"}),jsxRuntimeExports.jsx("p",{className:styles$6.formSubtitle,children:"Enter your email address and we'll send you a link to reset your password"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"reset-email",className:styles$6.label,children:"Email Address"}),jsxRuntimeExports.jsx("input",{type:"email",id:"reset-email",name:"email",value:n.email,onChange:I,required:!0,className:`${styles$6.input} ${l.resetEmail?styles$6.inputError:""}`,placeholder:"Enter your email"}),l.resetEmail&&jsxRuntimeExports.jsx("span",{className:styles$6.error,children:l.resetEmail})]}),jsxRuntimeExports.jsxs("div",{className:styles$6.buttonGroup,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:le,className:styles$6.backButton,children:"Back to Sign In"}),jsxRuntimeExports.jsx("button",{type:"submit",className:styles$6.submitButton,disabled:b,children:b?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fas fa-spinner fa-spin"}),"Sending..."]}):"Send Reset Link"})]})]}),g&&jsxRuntimeExports.jsxs("div",{className:styles$6.successMessage,children:[jsxRuntimeExports.jsx("div",{className:styles$6.successIcon,children:jsxRuntimeExports.jsx("i",{className:"fas fa-check"})}),jsxRuntimeExports.jsx("h3",{className:styles$6.successTitle,children:"Welcome Back!"}),jsxRuntimeExports.jsx("p",{className:styles$6.successText,children:"You have successfully signed in to your account."}),jsxRuntimeExports.jsx("button",{onClick:()=>e("/select-user"),className:styles$6.submitButton,children:"Go to Staff Login"})]}),_&&jsxRuntimeExports.jsxs("div",{className:styles$6.successMessage,children:[jsxRuntimeExports.jsx("div",{className:styles$6.successIcon,children:jsxRuntimeExports.jsx("i",{className:"fas fa-envelope"})}),jsxRuntimeExports.jsx("h3",{className:styles$6.successTitle,children:"Reset Link Sent!"}),jsxRuntimeExports.jsx("p",{className:styles$6.successText,children:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions."}),jsxRuntimeExports.jsx("button",{onClick:le,className:styles$6.submitButton,children:"Back to Sign In"})]})]})}),jsxRuntimeExports.jsx("div",{className:styles$6.imageContainer,children:jsxRuntimeExports.jsx("div",{className:styles$6.logoOverlay,children:jsxRuntimeExports.jsx("img",{src:"/retailpos/images/tillpointlogo.png",alt:"TillPoint Logo",className:styles$6.overlayLogo})})})]})]})},ProtectedRoute=({children:e})=>{const{user:t,supabaseUser:r,loading:n}=useAuth();return n?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-4",children:"Loading..."})]})}):!t&&!r?jsxRuntimeExports.jsx(Login,{}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e})},RoleProtectedRoute=({children:e,requiredPermission:t,fallbackRoute:r="/"})=>{const n=useLocation(),{canAccessRoute:a,hasPermission:l}=useRole();return a(n.pathname)?t&&!l(t)?jsxRuntimeExports.jsx(Navigate,{to:r,replace:!0}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e}):jsxRuntimeExports.jsx(Navigate,{to:r,replace:!0})},Navigation=()=>{const e=useLocation(),{isCollapsed:t,setIsCollapsed:r}=useNav(),{canAccessRoute:n}=useRole(),l=[{path:"/dashboard",label:"Dashboard",icon:"fas fa-home"},{path:"/products",label:"Products",icon:"fas fa-box"},{path:"/sales",label:"Sales",icon:"fas fa-dollar-sign"},{path:"/transactions",label:"Transactions",icon:"fas fa-receipt"},{path:"/side-businesses",label:"Side Businesses",icon:"fas fa-briefcase"},{path:"/reminders",label:"Reminders",icon:"fas fa-sticky-note"},{path:"/admin",label:"Admin",icon:"fas fa-users-cog"}].filter(c=>n(c.path));return jsxRuntimeExports.jsxs("nav",{style:{width:t?"70px":"200px",height:"100vh",background:"#1a1a1a",borderRight:"1px solid #333333",display:"flex",flexDirection:"column",position:"fixed",left:0,top:0,zIndex:50,padding:t?"20px 10px 20px 10px":"20px 16px 20px 16px",boxShadow:"2px 0 8px rgba(0, 0, 0, 0.3)",transition:"width 0.3s ease, padding 0.3s ease"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:t?"center":"flex-start",gap:"12px",marginBottom:"32px",paddingBottom:"16px",borderBottom:"1px solid #333333"},children:[jsxRuntimeExports.jsx("div",{onClick:()=>r(!t),style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:c=>c.target.style.setProperty("background-color","#333333"),onMouseLeave:c=>c.target.style.setProperty("background-color","transparent"),children:jsxRuntimeExports.jsx("div",{style:{width:"16px",height:"2px",background:"#ffffff",position:"relative",transition:"transform 0.3s ease"},children:jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"6px",left:0,width:"16px",height:"2px",background:"#ffffff",transition:"transform 0.3s ease"}})})}),!t&&jsxRuntimeExports.jsx("h1",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"bold",margin:0,transition:"opacity 0.3s ease"},children:"Retail POS"})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1,overflowY:"auto"},children:l.map(c=>jsxRuntimeExports.jsxs(Link,{to:c.path,style:{display:"flex",alignItems:"center",justifyContent:t?"center":"flex-start",gap:"12px",padding:t?"12px 8px":"12px 16px",borderRadius:"8px",textDecoration:"none",transition:"all 0.2s ease",background:e.pathname===c.path?"#333333":"transparent",color:e.pathname===c.path?"#ffffff":"#cccccc"},onMouseEnter:d=>{if(e.pathname!==c.path){const x=d.currentTarget;x.style.backgroundColor="#333333",x.style.color="#ffffff"}},onMouseLeave:d=>{if(e.pathname!==c.path){const x=d.currentTarget;x.style.backgroundColor="transparent",x.style.color="#cccccc"}},children:[jsxRuntimeExports.jsx("i",{className:c.icon,style:{fontSize:"16px",width:"20px"}}),!t&&jsxRuntimeExports.jsx("span",{style:{fontSize:"13px",fontWeight:"500",transition:"opacity 0.3s ease"},children:c.label})]},c.path))})]})},SelectUserModal=({isOpen:e,onClose:t,onUserSwitch:r})=>{const{user:n,switchUser:a}=useAuth(),[l,c]=reactExports.useState([]),[d,x]=reactExports.useState(!0),[f,h]=reactExports.useState(null),[g,y]=reactExports.useState(!1),[_,E]=reactExports.useState(""),[b,v]=reactExports.useState(""),[R,A]=reactExports.useState(!1),[C,L]=reactExports.useState(!1),[I,ae]=reactExports.useState(""),[D,ee]=reactExports.useState(""),[Y,le]=reactExports.useState(!1),[te,oe]=reactExports.useState(!1),[Be,Pe]=reactExports.useState(!1);reactExports.useEffect(()=>{e&&n?.business_id&&De()},[e,n?.business_id]),reactExports.useEffect(()=>{e&&n?.pin&&!Y&&L(!0)},[e,n?.pin,Y]);const De=async()=>{if(n?.business_id)try{x(!0);const j=localStorage.getItem("selected_branch_id"),{data:M,error:U}=await supabase.from("users").select("*").eq("business_id",n.business_id).eq("active",!0).or(`branch_id.eq.${j},role.eq.owner`).order("user_id",{ascending:!1});if(U){console.error("Error fetching users:",U);return}const K=await Promise.all((M||[]).map(async Le=>{if(Le.branch_id){const{data:ve}=await supabase.from("branches").select("branch_name").eq("branch_id",Le.branch_id).single();return{...Le,branch_name:ve?.branch_name||"Branch Not Found"}}return{...Le,branch_name:"No Branch Assigned"}}));c(K)}catch(j){console.error("Error fetching users:",j)}finally{x(!1)}},X=j=>{h(j),y(!0),E(""),v(""),oe(!1)},Se=async j=>{if(j.preventDefault(),!(!f||!_)){A(!0),v("");try{await r(f,_,te)}catch(M){console.log("Password error:",M),v(te?"Invalid PIN. Please try again.":"Invalid password. Please try again.")}finally{A(!1)}}},z=()=>{y(!1),h(null),E(""),v(""),A(!1),oe(!1)},re=j=>{h(j),E(""),v(""),oe(!1),Pe(!1)},T=async j=>{if(j.preventDefault(),!I){ee("Please enter your PIN");return}n?.pin&&n.pin===I?(L(!1),le(!0),ae(""),ee("")):ee("Invalid PIN. Please try again.")},J=j=>{switch(j.toLowerCase()){case"admin":return"#dc2626";case"owner":return"#7c3aed";case"manager":return"#ea580c";case"cashier":return"#2563eb";default:return"#6b7280"}},B=j=>{if(!j)return"Never";const M=new Date(j);return Number.isNaN(M.getTime())?"Never":M.toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})};return e?jsxRuntimeExports.jsx("div",{style:{position:"fixed",inset:"0",backgroundColor:"#0b0d10",backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02) 2px, transparent 2px, transparent 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",zIndex:9999},children:jsxRuntimeExports.jsxs("div",{style:{background:"transparent",width:"100%",maxWidth:"1200px",padding:"20px"},children:[jsxRuntimeExports.jsx("div",{style:{background:"#000000",borderRadius:"12px",border:"4px solid #4a5568",boxShadow:"inset 0 0 20px rgba(0,0,0,0.5)",padding:"16px"},children:jsxRuntimeExports.jsxs("div",{style:{background:"#000000",borderRadius:"8px",padding:"24px",position:"relative",overflow:"hidden",height:"700px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid #4a5568",position:"relative"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#ef4444"}}),jsxRuntimeExports.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#eab308"}}),jsxRuntimeExports.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#7d8d86"}})]}),jsxRuntimeExports.jsx("h2",{style:{fontSize:"32px",fontWeight:"bold",color:"#ffffff",margin:0},children:"Switch User"}),jsxRuntimeExports.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"color 0.2s ease",fontSize:"32px"},onMouseEnter:j=>{j.currentTarget.style.color="#ffffff"},onMouseLeave:j=>{j.currentTarget.style.color="#9ca3af"},"aria-label":"Close",children:""})]}),jsxRuntimeExports.jsx("div",{children:C?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:8,padding:24,marginBottom:24,textAlign:"center"},children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:16},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-lock",style:{fontSize:"48px",color:"#7d8d86",marginBottom:"16px"}}),jsxRuntimeExports.jsx("h3",{style:{color:"#ffffff",fontSize:"24px",margin:"0 0 8px 0"},children:"PIN Required"}),jsxRuntimeExports.jsx("p",{style:{color:"#9ca3af",fontSize:"16px",margin:0},children:"Enter your PIN to access the user system"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:T,style:{display:"flex",flexDirection:"column",gap:16,maxWidth:"300px",margin:"0 auto"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"password",value:I,onChange:j=>{ae(j.target.value),D&&ee("")},style:{width:"200px",padding:12,background:"#1a202c",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,boxSizing:"border-box",textAlign:"center",letterSpacing:"2px"},placeholder:"Enter PIN",maxLength:6,required:!0,autoFocus:!0}),D&&jsxRuntimeExports.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:"8px 12px",marginTop:8,display:"flex",alignItems:"center",gap:8},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc2626",fontSize:14}}),jsxRuntimeExports.jsx("p",{style:{fontSize:14,color:"#dc2626",margin:0,fontWeight:500},children:D})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:12},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:t,style:{flex:1,padding:"12px 16px",background:"#4a5568",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,fontWeight:500,cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:j=>{j.currentTarget.style.background="#6b7280"},onMouseLeave:j=>{j.currentTarget.style.background="#4a5568"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",style:{flex:1,padding:"12px 16px",background:"#7d8d86",border:"2px solid #7d8d86",borderRadius:8,color:"#000000",fontSize:18,fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:j=>{j.currentTarget.style.background="#3e3f29",j.currentTarget.style.borderColor="#3e3f29"},onMouseLeave:j=>{j.currentTarget.style.background="#7d8d86",j.currentTarget.style.borderColor="#7d8d86"},children:"Verify PIN"})]})]})]})}):g?jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundImage:"url(images/mcbackground3.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"#0b0d10",position:"relative"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",pointerEvents:"none"}}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,gap:"32px",padding:"40px 0",position:"relative",zIndex:1},children:[jsxRuntimeExports.jsx("div",{style:{position:"relative"},children:jsxRuntimeExports.jsx("div",{style:{width:"160px",height:"160px",borderRadius:"50%",background:"rgba(0,0,0,0.6)",border:"3px solid rgba(255,255,255,0.4)",backdropFilter:"blur(15px)",boxShadow:"0 8px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:f?.icon?jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${f.icon}.png`,alt:f.icon,style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"50%"}}):jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",style:{width:"80px",height:"80px",color:"rgba(255,255,255,0.85)"},fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"})})})}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center"},children:[jsxRuntimeExports.jsx("div",{style:{color:"#ffffff",fontSize:"32px",fontWeight:"600",letterSpacing:"0.5px",textShadow:"0 2px 8px rgba(0,0,0,0.8)"},children:f?.username}),jsxRuntimeExports.jsx("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px",marginTop:"8px",textShadow:"0 1px 4px rgba(0,0,0,0.8)"},children:f?.role})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Se,style:{width:"100%",maxWidth:"400px"},children:[f?.pin&&jsxRuntimeExports.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"4px",backdropFilter:"blur(10px)"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{oe(!1),E(""),v("")},style:{padding:"8px 16px",background:te?"transparent":"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:te?"rgba(255,255,255,0.7)":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Password"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{oe(!0),E(""),v("")},style:{padding:"8px 16px",background:te?"rgba(255,255,255,0.2)":"transparent",border:"none",borderRadius:"6px",color:te?"#ffffff":"rgba(255,255,255,0.7)",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"PIN"})]})}),jsxRuntimeExports.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[jsxRuntimeExports.jsx("input",{type:"password",value:_,onChange:j=>{E(j.target.value),b&&v("")},placeholder:te?"Enter PIN":"Password",maxLength:te?6:void 0,required:!0,autoFocus:!0,style:{width:"100%",height:"48px",borderRadius:"24px",paddingLeft:"20px",paddingRight:"56px",color:"#ffffff",fontSize:"16px",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(15px)",border:"2px solid rgba(255,255,255,0.4)",boxShadow:"0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)",outline:"none",textAlign:te?"center":"left",letterSpacing:te?"2px":"normal",boxSizing:"border-box",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onFocus:j=>{j.target.style.border="2px solid rgba(255,255,255,0.8)",j.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onBlur:j=>{j.target.style.border="2px solid rgba(255,255,255,0.4)",j.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:R,style:{position:"absolute",right:"4px",top:"4px",height:"40px",width:"40px",borderRadius:"50%",background:R?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.95)",border:"2px solid rgba(255,255,255,0.8)",display:"flex",alignItems:"center",justifyContent:"center",cursor:R?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 6px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)",opacity:R?.7:1},onMouseEnter:j=>{R||(j.currentTarget.style.background="#ffffff")},onMouseLeave:j=>{R||(j.currentTarget.style.background="rgba(255,255,255,0.95)")},children:R?jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{color:"#0f2d6e",fontSize:"16px"}}):jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:"#0f2d6e"},fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M13 5l7 7-7 7v-4H4v-6h9V5z"})})})]}),b&&jsxRuntimeExports.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",backdropFilter:"blur(10px)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#fca5a5",fontSize:"14px",textShadow:"0 1px 2px rgba(0,0,0,0.8)"}}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#fca5a5",margin:0,fontWeight:500,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:b})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:z,style:{background:"none",border:"none",color:"rgba(255,255,255,0.9)",fontSize:"14px",cursor:"pointer",textDecoration:"none",transition:"color 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:j=>{j.currentTarget.style.color="#ffffff"},onMouseLeave:j=>{j.currentTarget.style.color="rgba(255,255,255,0.9)"},children:" Back to users"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:"Press Enter to sign in"})]})]})]}),jsxRuntimeExports.jsx("div",{style:{padding:"24px",display:"flex",justifyContent:"flex-start",position:"relative",zIndex:1},children:l.length>2?jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>Pe(!Be),style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:j=>{j.currentTarget.style.background="rgba(0,0,0,0.6)",j.currentTarget.style.color="#ffffff"},onMouseLeave:j=>{j.currentTarget.style.background="rgba(0,0,0,0.4)",j.currentTarget.style.color="rgba(255,255,255,0.9)"},title:`Switch User (${l.length} users)`,children:jsxRuntimeExports.jsx("svg",{style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),Be&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10},onClick:()=>Pe(!1)}),jsxRuntimeExports.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"500px",maxHeight:"500px",backgroundColor:"rgba(0, 0, 0, 0.7)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.6)",zIndex:20,backdropFilter:"blur(15px)",overflow:"hidden"},children:[jsxRuntimeExports.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(255, 255, 255, 0.03)"},children:[jsxRuntimeExports.jsx("h3",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"600",margin:"0 0 4px 0"},children:"Switch User"}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"12px",margin:"0"},children:"Choose a user to switch to"})]}),jsxRuntimeExports.jsx("div",{style:{maxHeight:"420px",overflowY:"auto",padding:"12px"},children:jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:l.filter(j=>j.user_id!==f?.user_id).map(j=>jsxRuntimeExports.jsxs("button",{onClick:()=>re(j),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",color:"#ffffff",cursor:"pointer",transition:"all 0.2s ease",minHeight:"120px"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",M.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",M.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)"},children:[jsxRuntimeExports.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:j.icon?jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${j.icon}.png`,alt:j.icon,style:{width:"42px",height:"42px",objectFit:"cover",borderRadius:"50%"}}):jsxRuntimeExports.jsx("div",{style:{fontSize:"20px",color:"rgba(255,255,255,0.7)"},children:""})}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:j.username}),jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",color:J(j.role),marginBottom:"2px",fontWeight:"500"},children:j.role}),jsxRuntimeExports.jsx("div",{style:{fontSize:"10px",color:"#999"},children:B(j.last_used)})]})]},j.user_id))})})]})]})]}):jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"12px",maxWidth:"400px",maxHeight:"200px",overflowY:"auto",paddingRight:"8px"},children:l.filter(j=>j.user_id!==f?.user_id).map(j=>jsxRuntimeExports.jsxs("button",{onClick:()=>{h(j),E(""),v(""),oe(!1)},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",borderRadius:"12px",color:"rgba(255,255,255,0.9)",cursor:"pointer",transition:"all 0.2s ease",minHeight:"100px"},onMouseEnter:M=>{M.currentTarget.style.background="rgba(0,0,0,0.5)",M.currentTarget.style.color="#ffffff"},onMouseLeave:M=>{M.currentTarget.style.background="rgba(0,0,0,0.4)",M.currentTarget.style.color="rgba(255,255,255,0.9)"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:j.icon?jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${j.icon}.png`,alt:j.icon,style:{width:"32px",height:"32px",objectFit:"cover",borderRadius:"50%"}}):jsxRuntimeExports.jsx("div",{style:{fontSize:"16px",color:"rgba(255,255,255,0.7)"},children:""})}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",fontSize:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textShadow:"0 1px 2px rgba(0,0,0,0.8)",marginBottom:"2px"},children:j.username}),jsxRuntimeExports.jsx("div",{style:{fontSize:"10px",color:J(j.role),fontWeight:"500"},children:j.role})]})]},j.user_id))})}),jsxRuntimeExports.jsxs("div",{style:{position:"absolute",right:"24px",bottom:"24px",display:"flex",alignItems:"center",gap:"16px",color:"rgba(255,255,255,0.8)",zIndex:1},children:[jsxRuntimeExports.jsx("button",{title:"Accessibility",style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:j=>{j.currentTarget.style.background="rgba(0,0,0,0.6)",j.currentTarget.style.color="#ffffff"},onMouseLeave:j=>{j.currentTarget.style.background="rgba(0,0,0,0.4)",j.currentTarget.style.color="rgba(255,255,255,0.9)"},children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M11 2h2v4h-2zM4 9h16v2H4zM6 12l4 .5V22H8v-7.5L6 14v-2zm12 0v2l-2 .5V22h-2v-9.5l4-.5z"})})}),jsxRuntimeExports.jsx("button",{onClick:t,style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:j=>{j.currentTarget.style.background="#991b1b",j.currentTarget.style.border="1px solid #991b1b",j.currentTarget.style.color="#ffffff"},onMouseLeave:j=>{j.currentTarget.style.background="rgba(0,0,0,0.4)",j.currentTarget.style.border="1px solid rgba(255,255,255,0.3)",j.currentTarget.style.color="rgba(255,255,255,0.9)"},children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:[jsxRuntimeExports.jsx("path",{d:"M11 2h2v10h-2z"}),jsxRuntimeExports.jsx("path",{d:"M7.05 4.05a8.5 8.5 0 1 0 9.9 0l-1.41 1.41a6.5 6.5 0 1 1-7.08 0z"})]})})]})]}):d?jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:"#9ca3af"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:12,fontSize:"24px"}}),jsxRuntimeExports.jsx("span",{style:{fontSize:"18px"},children:"Loading users..."})]}):jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"20px"},children:l.map(j=>jsxRuntimeExports.jsx("button",{style:{background:"rgba(26, 26, 26, 0.3)",border:"1px solid #4a5568",borderBottom:"3px solid #7d8d86",borderRadius:"8px",padding:24,cursor:"pointer",transition:"all 0.2s ease",width:"100%",textAlign:"left",position:"relative",minHeight:"160px"},onMouseEnter:M=>{M.currentTarget.style.background="rgba(125,141,134,0.1)",M.currentTarget.style.borderColor="#7d8d86",M.currentTarget.style.boxShadow="0 0 20px rgba(125,141,134,0.2)"},onMouseLeave:M=>{M.currentTarget.style.background="rgba(26, 26, 26, 0.3)",M.currentTarget.style.borderColor="#4a5568",M.currentTarget.style.boxShadow="none"},onClick:()=>X(j),children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,height:"100%"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[jsxRuntimeExports.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#1a202c",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"2px solid #4a5568"},children:j.icon?jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${j.icon}.png`,alt:j.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):jsxRuntimeExports.jsx("div",{style:{fontSize:24,color:"#4a5568"},children:""})}),jsxRuntimeExports.jsx("div",{style:{flex:1},children:jsxRuntimeExports.jsxs("div",{style:{marginBottom:8,display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:24,fontWeight:500,color:"#ffffff"},children:j.username}),j.pin&&jsxRuntimeExports.jsx("div",{style:{background:"#10b981",color:"#ffffff",fontSize:"10px",fontWeight:"600",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"PIN"})]})})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,flex:1},children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("span",{style:{background:`${J(j.role)}20`,color:J(j.role),padding:"6px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize",display:"inline-block"},children:j.role})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:14,color:"#7d8d86",fontWeight:"500"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-building",style:{fontSize:"12px"}}),jsxRuntimeExports.jsx("span",{children:j.branch_name||"No Branch Assigned"})]}),jsxRuntimeExports.jsxs("div",{style:{fontSize:14,color:"#9ca3af",lineHeight:"1.4"},children:["Last login: ",B(j.last_used)]})]})]})},j.user_id))})})})]})}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:jsxRuntimeExports.jsx("div",{style:{width:60,height:60,background:"linear-gradient(145deg, #4a5568, #2d3748)",borderRadius:"0 0 15px 15px",boxShadow:"0 4px 8px rgba(0,0,0,0.4)",border:"2px solid #4a5568"}})}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:jsxRuntimeExports.jsx("div",{style:{width:300,height:30,background:"linear-gradient(145deg, #2d3748, #1a202c)",borderRadius:50,boxShadow:"0 6px 20px rgba(0,0,0,0.5)",border:"1px solid #4a5568"}})})]})}):null},backdrop="_backdrop_1lrks_2",hidden="_hidden_1lrks_10",visible="_visible_1lrks_15",drawer="_drawer_1lrks_20",open="_open_1lrks_38",header$1="_header_1lrks_42",headerLeft="_headerLeft_1lrks_55",title$1="_title_1lrks_62",closeButton="_closeButton_1lrks_70",messages="_messages_1lrks_84",successMessage="_successMessage_1lrks_89",errorMessage$2="_errorMessage_1lrks_98",body="_body_1lrks_107",nav$1="_nav_1lrks_114",navList="_navList_1lrks_138",navButton$2="_navButton_1lrks_147",active$1="_active_1lrks_165",content="_content_1lrks_171",mobileTabs="_mobileTabs_1lrks_176",mobileTabsList="_mobileTabsList_1lrks_187",mobileTabButton="_mobileTabButton_1lrks_193",scrollContent="_scrollContent_1lrks_211",section="_section_1lrks_238",sectionTitle="_sectionTitle_1lrks_242",sectionCard="_sectionCard_1lrks_249",grid="_grid_1lrks_260",gridTwo="_gridTwo_1lrks_267",field="_field_1lrks_277",fieldLabel="_fieldLabel_1lrks_284",required$1="_required_1lrks_292",fieldInput="_fieldInput_1lrks_298",fieldTextarea="_fieldTextarea_1lrks_322",fieldSelect="_fieldSelect_1lrks_349",logoSection="_logoSection_1lrks_375",logoPreview="_logoPreview_1lrks_381",logoPreviewPlaceholder="_logoPreviewPlaceholder_1lrks_399",logoUpload="_logoUpload_1lrks_404",logoFileInput="_logoFileInput_1lrks_412",logoFileButton="_logoFileButton_1lrks_416",logoHelpText="_logoHelpText_1lrks_434",footer$2="_footer_1lrks_441",footerContent$1="_footerContent_1lrks_451",cancelButton="_cancelButton_1lrks_458",saveButton="_saveButton_1lrks_473",spacer="_spacer_1lrks_494",styles$5={backdrop,hidden,visible,drawer,open,header:header$1,headerLeft,title:title$1,closeButton,messages,successMessage,errorMessage:errorMessage$2,body,nav:nav$1,navList,navButton:navButton$2,active:active$1,content,mobileTabs,mobileTabsList,mobileTabButton,scrollContent,section,sectionTitle,sectionCard,grid,gridTwo,field,fieldLabel,required:required$1,fieldInput,fieldTextarea,fieldSelect,logoSection,logoPreview,logoPreviewPlaceholder,logoUpload,logoFileInput,logoFileButton,logoHelpText,footer:footer$2,footerContent:footerContent$1,cancelButton,saveButton,spacer},SECTION_IDS=[{id:"branding",label:"Branding"},{id:"basic",label:"Basic Info"},{id:"contact",label:"Contact"},{id:"biz",label:"Business Settings"},{id:"receipt",label:"Receipt"}],SectionCard=React.forwardRef(function({id:t,title:r,children:n},a){return jsxRuntimeExports.jsxs("section",{id:t,ref:a,className:styles$5.section,children:[jsxRuntimeExports.jsx("h3",{className:styles$5.sectionTitle,children:r}),jsxRuntimeExports.jsx("div",{className:styles$5.sectionCard,children:n})]})});function Grid({two:e,children:t}){return jsxRuntimeExports.jsx("div",{className:`${styles$5.grid} ${e?styles$5.gridTwo:""}`,children:t})}function Field({label:e,value:t,onChange:r,placeholder:n,multiline:a,required:l}){return jsxRuntimeExports.jsxs("label",{className:styles$5.field,children:[jsxRuntimeExports.jsx("span",{className:`${styles$5.fieldLabel} ${l?styles$5.required:""}`,children:e}),a?jsxRuntimeExports.jsx("textarea",{value:t,onChange:c=>r(c.target.value),placeholder:n,className:styles$5.fieldTextarea,rows:4}):jsxRuntimeExports.jsx("input",{value:t,onChange:c=>r(c.target.value),placeholder:n,className:styles$5.fieldInput})]})}function Select({label:e,value:t,onChange:r,options:n}){return jsxRuntimeExports.jsxs("label",{className:styles$5.field,children:[jsxRuntimeExports.jsx("span",{className:styles$5.fieldLabel,children:e}),jsxRuntimeExports.jsx("select",{value:t,onChange:a=>r(a.target.value),className:styles$5.fieldSelect,children:n.map(a=>jsxRuntimeExports.jsx("option",{value:a,children:a},a))})]})}function LogoPreview({src:e}){return jsxRuntimeExports.jsx("div",{className:styles$5.logoPreview,children:e?jsxRuntimeExports.jsx("img",{src:e,alt:"logo"}):jsxRuntimeExports.jsx("div",{className:styles$5.logoPreviewPlaceholder,children:"No logo"})})}const BusinessSettingsModal=({isOpen:e,onClose:t})=>{const{currentBusiness:r,refreshBusiness:n}=useBusiness(),[a,l]=reactExports.useState(!1),[c,d]=reactExports.useState(null),[x,f]=reactExports.useState(!1),[h,g]=reactExports.useState("branding"),[y,_]=reactExports.useState({logo:null,logoPreview:null,name:"",displayName:"",type:"Retail Store",website:"",description:"",address:"",phone:"",vat:"",currency:"USD ($)",timezone:"UTC",hours:"9:00 AM - 6:00 PM",receiptFooter:"Thank you for shopping with us!"}),E=reactExports.useRef(null),b=reactExports.useMemo(()=>Object.fromEntries(SECTION_IDS.map(({id:D})=>[D,React.createRef()])),[]);reactExports.useEffect(()=>{e&&r&&_({logo:null,logoPreview:r.logo_url||null,name:r.name||"",displayName:r.business_name||r.name||"",type:r.business_type||"Retail Store",website:r.website||"",description:r.description||"",address:r.address||"",phone:r.phone_number||"",vat:r.vat_number||"",currency:r.currency?`${r.currency} (${v(r.currency)})`:"USD ($)",timezone:r.timezone||"UTC",hours:r.business_hours||"9:00 AM - 6:00 PM",receiptFooter:r.receipt_footer||"Thank you for shopping with us!"})},[e,r]),reactExports.useEffect(()=>{e&&g("branding")},[e]);const v=D=>({USD:"$",EUR:"",GBP:"",CAD:"C$",AUD:"A$",JPY:""})[D]||"$",R=D=>{const ee=b[D].current;!ee||!E.current||(g(D),E.current.scrollTo({top:ee.offsetTop-16,behavior:"smooth"}))},A=D=>_(ee=>({...ee,...D})),C=D=>{const ee=D.target.files?.[0];if(!ee)return;const Y=URL.createObjectURL(ee);A({logo:ee,logoPreview:Y})},L=async D=>{try{const ee=D.name.split(".").pop(),Y=`${Date.now()}.${ee}`,le=`${r?.business_id}/business-logos/${Y}`,{error:te}=await supabase.storage.from("business-assets").upload(le,D);if(te)throw te;const{data:oe}=supabase.storage.from("business-assets").getPublicUrl(le);return oe.publicUrl}catch(ee){return console.error("Error uploading logo:",ee),null}},I=async()=>{if(r){l(!0),d(null),f(!1);try{let D=y.logoPreview;if(y.logo){const le=await L(y.logo);le&&(D=le)}const ee=y.currency.split(" ")[0],{error:Y}=await supabase.from("business_info").update({name:y.name,business_name:y.displayName,business_type:y.type,description:y.description,address:y.address,phone_number:y.phone||null,vat_number:y.vat||null,website:y.website||null,business_hours:y.hours||null,currency:ee,timezone:y.timezone,receipt_footer:y.receiptFooter,logo_url:D||null,updated_at:new Date().toISOString()}).eq("business_id",r.business_id);if(Y)throw Y;f(!0),await n(),setTimeout(()=>{t(),f(!1)},1500)}catch(D){console.error("Error updating business info:",D),d(D instanceof Error?D.message:"Failed to update business information")}finally{l(!1)}}},ae=()=>{d(null),f(!1),g("branding"),t()};return e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`${styles$5.backdrop} ${e?styles$5.visible:styles$5.hidden}`,onClick:ae}),jsxRuntimeExports.jsxs("aside",{className:`${styles$5.drawer} ${e?styles$5.open:""}`,role:"dialog","aria-modal":"true",children:[jsxRuntimeExports.jsxs("div",{className:styles$5.header,children:[jsxRuntimeExports.jsx("div",{className:styles$5.headerLeft,children:jsxRuntimeExports.jsx("h2",{className:styles$5.title,children:"SETTINGS"})}),jsxRuntimeExports.jsx("button",{onClick:ae,className:styles$5.closeButton,"aria-label":"Close",children:"[X]"})]}),(x||c)&&jsxRuntimeExports.jsxs("div",{className:styles$5.messages,children:[x&&jsxRuntimeExports.jsx("div",{className:styles$5.successMessage,children:" Business information updated successfully!"}),c&&jsxRuntimeExports.jsxs("div",{className:styles$5.errorMessage,children:[" ",c]})]}),jsxRuntimeExports.jsxs("div",{className:styles$5.body,children:[jsxRuntimeExports.jsx("nav",{className:styles$5.nav,children:jsxRuntimeExports.jsx("ul",{className:styles$5.navList,children:SECTION_IDS.map(D=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>R(D.id),className:`${styles$5.navButton} ${h===D.id?styles$5.active:""}`,children:D.label})},D.id))})}),jsxRuntimeExports.jsxs("div",{className:styles$5.content,children:[jsxRuntimeExports.jsx("div",{className:styles$5.mobileTabs,children:jsxRuntimeExports.jsx("div",{className:styles$5.mobileTabsList,children:SECTION_IDS.map(D=>jsxRuntimeExports.jsx("button",{onClick:()=>R(D.id),className:`${styles$5.mobileTabButton} ${h===D.id?styles$5.active:""}`,children:D.label},D.id))})}),jsxRuntimeExports.jsxs("div",{ref:E,className:styles$5.scrollContent,children:[jsxRuntimeExports.jsx(SectionCard,{id:"branding",ref:b.branding,title:"Branding",children:jsxRuntimeExports.jsxs("div",{className:styles$5.logoSection,children:[jsxRuntimeExports.jsx(LogoPreview,{src:y.logoPreview}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:styles$5.logoUpload,children:"Business Logo"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/png,image/jpeg",onChange:C,className:styles$5.logoFileInput,id:"logo-input"}),jsxRuntimeExports.jsx("label",{htmlFor:"logo-input",className:styles$5.logoFileButton,children:"Choose File"}),jsxRuntimeExports.jsx("p",{className:styles$5.logoHelpText,children:"Recommended: 200200px, PNG or JPG"})]})]})}),jsxRuntimeExports.jsxs(SectionCard,{id:"basic",ref:b.basic,title:"Basic Information",children:[jsxRuntimeExports.jsxs(Grid,{two:!0,children:[jsxRuntimeExports.jsx(Field,{label:"Business Name",value:y.name,onChange:D=>A({name:D}),placeholder:"Enter your legal business name",required:!0}),jsxRuntimeExports.jsx(Field,{label:"Display Name",value:y.displayName,onChange:D=>A({displayName:D}),placeholder:"Enter your business display name"}),jsxRuntimeExports.jsx(Select,{label:"Business Type",value:y.type,onChange:D=>A({type:D}),options:["Retail Store","Restaurant","Caf","Salon/Spa","Service Business","Other"]}),jsxRuntimeExports.jsx(Field,{label:"Website",value:y.website,onChange:D=>A({website:D}),placeholder:"https://yourwebsite.com"})]}),jsxRuntimeExports.jsx(Field,{label:"Description",value:y.description,onChange:D=>A({description:D}),multiline:!0,placeholder:"Brief description of your business..."})]}),jsxRuntimeExports.jsxs(SectionCard,{id:"contact",ref:b.contact,title:"Contact Information",children:[jsxRuntimeExports.jsx(Field,{label:"Address",value:y.address,onChange:D=>A({address:D}),placeholder:"Enter your complete business address",required:!0}),jsxRuntimeExports.jsxs(Grid,{two:!0,children:[jsxRuntimeExports.jsx(Field,{label:"Phone Number",value:y.phone,onChange:D=>A({phone:D}),placeholder:"+1 (555) 123-4567"}),jsxRuntimeExports.jsx(Field,{label:"VAT/Tax Number",value:y.vat,onChange:D=>A({vat:D}),placeholder:"Enter tax ID"})]})]}),jsxRuntimeExports.jsxs(SectionCard,{id:"biz",ref:b.biz,title:"Business Settings",children:[jsxRuntimeExports.jsxs(Grid,{two:!0,children:[jsxRuntimeExports.jsx(Select,{label:"Currency",value:y.currency,onChange:D=>A({currency:D}),options:["USD ($)","EUR ()","GBP ()","CAD (C$)","AUD (A$)","JPY ()"]}),jsxRuntimeExports.jsx(Select,{label:"Timezone",value:y.timezone,onChange:D=>A({timezone:D}),options:["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Asia/Tokyo"]})]}),jsxRuntimeExports.jsx(Field,{label:"Business Hours",value:y.hours,onChange:D=>A({hours:D}),placeholder:"Mon-Fri 9AM-6PM, Sat 10AM-4PM"})]}),jsxRuntimeExports.jsx(SectionCard,{id:"receipt",ref:b.receipt,title:"Receipt Footer",children:jsxRuntimeExports.jsx(Field,{label:"Footer Text",value:y.receiptFooter,onChange:D=>A({receiptFooter:D}),multiline:!0,placeholder:"Thank you for your business! Visit us again soon."})}),jsxRuntimeExports.jsx("div",{className:styles$5.spacer})]})]})]}),jsxRuntimeExports.jsx("div",{className:styles$5.footer,children:jsxRuntimeExports.jsxs("div",{className:styles$5.footerContent,children:[jsxRuntimeExports.jsx("button",{onClick:ae,className:styles$5.cancelButton,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:I,disabled:a,className:styles$5.saveButton,children:a?"Saving...":"Save Changes"})]})})]})]}):null},UserMenu=()=>{const{user:e,logout:t,switchUser:r}=useAuth(),{userRole:n}=useRole(),[a,l]=reactExports.useState(!1),[c,d]=reactExports.useState(!1),[x,f]=reactExports.useState(!1),h=reactExports.useRef(null);console.log("UserMenu - Current user:",e?.username,"Role:",e?.role,"UserRole from context:",n),console.log("UserMenu - User object:",e),reactExports.useEffect(()=>{console.log("UserMenu - User changed to:",e?.username,"Role:",e?.role)},[e]),reactExports.useEffect(()=>{const v=R=>{h.current&&!h.current.contains(R.target)&&l(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]),reactExports.useEffect(()=>{const v=R=>{R.key==="Escape"&&l(!1)};return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[]);const g=v=>{switch(v.toLowerCase()){case"admin":return"#dc2626";case"owner":return"#7c3aed";case"manager":return"#ea580c";case"cashier":return"#2563eb";default:return"#6b7280"}},y=async()=>{await t(),l(!1)},_=()=>{l(!1),d(!0)},E=async(v,R,A)=>{try{if(console.log("Attempting to switch to user:",v.username,"using",A?"PIN":"password"),await r(v.user_id,R,A))console.log("User switch successful, closing modal"),d(!1),setTimeout(()=>{console.log("User switch completed - Current user should now be:",v.username)},100);else throw new Error(A?"Invalid PIN":"Invalid password")}catch(C){throw console.error("Error switching user:",C),C}},b=()=>{f(!0),l(!1)};return jsxRuntimeExports.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3},ref:h,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>l(!a),style:{display:"flex",alignItems:"center",gap:"8px",background:"#f3f4f6",border:"none",borderRadius:"25px",padding:"8px 12px",cursor:"pointer",transition:"all 0.2s ease",color:"#111827"},onMouseEnter:v=>{v.currentTarget.style.background="#e5e7eb"},onMouseLeave:v=>{v.currentTarget.style.background="#f3f4f6"},children:[jsxRuntimeExports.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"none"},children:e?.icon?jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${e.icon}.png`,alt:e.icon,style:{width:"28px",height:"28px",objectFit:"cover",borderRadius:"50%"}}):jsxRuntimeExports.jsx("i",{className:"fa-solid fa-user",style:{fontSize:"16px",color:"#9ca3af"}})}),jsxRuntimeExports.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e?.username||"Unknown User",children:e?.username||"Unknown User"}),jsxRuntimeExports.jsx("i",{className:`fa-solid fa-chevron-${a?"up":"down"}`,style:{fontSize:"12px",color:"#4b5563"}})]}),a&&jsxRuntimeExports.jsxs("div",{style:{position:"absolute",right:"0",top:"100%",marginTop:"8px",minWidth:"200px",maxWidth:"300px",background:"#ffffff",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",padding:"8px 0",zIndex:1001},children:[jsxRuntimeExports.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e5e7eb",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("div",{style:{color:"#111827",fontSize:"14px",fontWeight:"500",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},title:e?.username||"Unknown User",children:e?.username||"Unknown User"}),jsxRuntimeExports.jsx("div",{style:{color:g(n),fontSize:"12px",textTransform:"capitalize",fontWeight:"500"},children:n})]}),jsxRuntimeExports.jsxs("button",{onClick:_,style:{width:"100%",textAlign:"left",padding:"12px 16px",background:"transparent",border:"none",color:"#111827",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s ease"},onMouseEnter:v=>{v.currentTarget.style.background="#f9fafb"},onMouseLeave:v=>{v.currentTarget.style.background="transparent"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-user-group",style:{fontSize:"16px",color:"#4b5563"}}),jsxRuntimeExports.jsx("span",{children:"Switch User"})]}),jsxRuntimeExports.jsxs("button",{onClick:b,style:{width:"100%",textAlign:"left",padding:"12px 16px",background:"transparent",border:"none",color:"#111827",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s ease"},onMouseEnter:v=>{v.currentTarget.style.background="#f9fafb"},onMouseLeave:v=>{v.currentTarget.style.background="transparent"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-gear",style:{fontSize:"16px",color:"#4b5563"}}),jsxRuntimeExports.jsx("span",{children:"Settings"})]}),jsxRuntimeExports.jsx("div",{style:{borderTop:"1px solid #e5e7eb",margin:"8px 0"}}),jsxRuntimeExports.jsxs("button",{onClick:y,style:{width:"100%",textAlign:"left",padding:"12px 16px",background:"transparent",border:"none",color:"#dc2626",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s ease"},onMouseEnter:v=>{v.currentTarget.style.background="#fef2f2"},onMouseLeave:v=>{v.currentTarget.style.background="transparent"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-sign-out-alt",style:{fontSize:"16px",color:"#dc2626"}}),jsxRuntimeExports.jsx("span",{children:"Logout"})]})]}),jsxRuntimeExports.jsx(SelectUserModal,{isOpen:c,onClose:()=>d(!1),onUserSwitch:E}),jsxRuntimeExports.jsx(BusinessSettingsModal,{isOpen:x,onClose:()=>f(!1)})]})},AnimatedDots=()=>{const[e,t]=reactExports.useState("");return reactExports.useEffect(()=>{const r=setInterval(()=>{t(n=>n===""?".":n==="."?"..":n===".."?"...":"")},500);return()=>clearInterval(r)},[]),jsxRuntimeExports.jsx("span",{children:e})},LoadingScreen=({isVisible:e,message:t="Switching Branch..."})=>e?jsxRuntimeExports.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:"url(images/loading/loadingbg.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",animation:"fadeIn 0.3s ease-in-out"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"40px",left:"40px",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"12px"},children:jsxRuntimeExports.jsxs("div",{style:{color:"#ffffff",fontSize:"24px",fontWeight:"600",textShadow:"0 2px 4px rgba(0, 0, 0, 0.5)",textAlign:"left",background:"rgba(0, 0, 0, 0.4)",padding:"12px 24px",borderRadius:"25px",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[t.replace("...",""),jsxRuntimeExports.jsx(AnimatedDots,{})]})}),jsxRuntimeExports.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        
        @keyframes fadeOut {
          from {
            opacity: 1;
          }
          to {
            opacity: 0;
          }
        }
        
        @keyframes bounce {
          0%, 20%, 50%, 80%, 100% {
            transform: translateY(0) scale(1);
          }
          40% {
            transform: translateY(-10px) scale(1.05);
          }
          60% {
            transform: translateY(-5px) scale(1.02);
          }
        }
        
      `})]}):null,container$1="_container_1e6yx_2",nav="_nav_1e6yx_21",navContent="_navContent_1e6yx_27",navFlex="_navFlex_1e6yx_33",logoContainer="_logoContainer_1e6yx_40",logoImage="_logoImage_1e6yx_46",navLinks="_navLinks_1e6yx_59",navLink="_navLink_1e6yx_59",navButton$1="_navButton_1e6yx_77",heroSection="_heroSection_1e6yx_94",heroContent="_heroContent_1e6yx_99",heroTitle="_heroTitle_1e6yx_106",heroTitleHighlight="_heroTitleHighlight_1e6yx_114",heroSubtitle="_heroSubtitle_1e6yx_119",heroButtons="_heroButtons_1e6yx_128",primaryButton$1="_primaryButton_1e6yx_136",secondaryButton="_secondaryButton_1e6yx_155",heroStats="_heroStats_1e6yx_174",statItem="_statItem_1e6yx_183",statNumber="_statNumber_1e6yx_187",statLabel="_statLabel_1e6yx_195",featuresSection="_featuresSection_1e6yx_203",featuresContent="_featuresContent_1e6yx_210",featuresHeader="_featuresHeader_1e6yx_216",featuresTitle="_featuresTitle_1e6yx_221",featuresSubtitle="_featuresSubtitle_1e6yx_228",featuresGrid="_featuresGrid_1e6yx_235",featureCard="_featureCard_1e6yx_241",featureIcon="_featureIcon_1e6yx_253",featureTitle="_featureTitle_1e6yx_259",featureDescription="_featureDescription_1e6yx_266",benefitsSection="_benefitsSection_1e6yx_271",benefitsContent="_benefitsContent_1e6yx_278",benefitsGrid="_benefitsGrid_1e6yx_284",benefitsTitle="_benefitsTitle_1e6yx_291",benefitItem="_benefitItem_1e6yx_298",benefitIcon="_benefitIcon_1e6yx_304",benefitContent="_benefitContent_1e6yx_321",ctaCard="_ctaCard_1e6yx_332",ctaIcon="_ctaIcon_1e6yx_341",ctaTitle="_ctaTitle_1e6yx_347",ctaDescription="_ctaDescription_1e6yx_354",ctaButton="_ctaButton_1e6yx_359",ctaSection="_ctaSection_1e6yx_376",ctaContent="_ctaContent_1e6yx_382",ctaSectionTitle="_ctaSectionTitle_1e6yx_388",ctaSectionDescription="_ctaSectionDescription_1e6yx_395",ctaSectionButtons="_ctaSectionButtons_1e6yx_402",ctaSectionPrimaryButton="_ctaSectionPrimaryButton_1e6yx_410",ctaSectionSecondaryButton="_ctaSectionSecondaryButton_1e6yx_429",pricingSection="_pricingSection_1e6yx_449",pricingContent="_pricingContent_1e6yx_456",pricingHeader="_pricingHeader_1e6yx_462",pricingSubtitle="_pricingSubtitle_1e6yx_467",pricingTitle="_pricingTitle_1e6yx_476",pricingGrid="_pricingGrid_1e6yx_483",pricingCard="_pricingCard_1e6yx_491",popularCard="_popularCard_1e6yx_507",pricingIcon="_pricingIcon_1e6yx_518",pricingCardHeader="_pricingCardHeader_1e6yx_526",pricingPlanName="_pricingPlanName_1e6yx_530",pricingPrice="_pricingPrice_1e6yx_537",priceAmount="_priceAmount_1e6yx_545",pricePeriod="_pricePeriod_1e6yx_551",pricingFeatures="_pricingFeatures_1e6yx_557",featuresList="_featuresList_1e6yx_561",featureItem="_featureItem_1e6yx_567",pricingAction="_pricingAction_1e6yx_575",pricingButton="_pricingButton_1e6yx_579",contactSection="_contactSection_1e6yx_601",contactContent="_contactContent_1e6yx_607",contactHeader="_contactHeader_1e6yx_613",contactTitle="_contactTitle_1e6yx_618",contactSubtitle="_contactSubtitle_1e6yx_625",contactGrid="_contactGrid_1e6yx_632",contactInfo="_contactInfo_1e6yx_638",contactItem="_contactItem_1e6yx_644",contactIcon="_contactIcon_1e6yx_650",contactDetails="_contactDetails_1e6yx_666",contactForm="_contactForm_1e6yx_678",form="_form_1e6yx_685",formRow="_formRow_1e6yx_691",formGroup$1="_formGroup_1e6yx_697",submitButton="_submitButton_1e6yx_730",footer$1="_footer_1e6yx_748",footerContent="_footerContent_1e6yx_754",footerGrid="_footerGrid_1e6yx_760",footerBrand="_footerBrand_1e6yx_767",footerBrandTitle="_footerBrandTitle_1e6yx_771",footerBrandDescription="_footerBrandDescription_1e6yx_777",footerSection="_footerSection_1e6yx_783",footerLinks="_footerLinks_1e6yx_789",footerLink="_footerLink_1e6yx_789",footerDivider="_footerDivider_1e6yx_810",styles$4={container:container$1,nav,navContent,navFlex,logoContainer,logoImage,navLinks,navLink,navButton:navButton$1,heroSection,heroContent,heroTitle,heroTitleHighlight,heroSubtitle,heroButtons,primaryButton:primaryButton$1,secondaryButton,heroStats,statItem,statNumber,statLabel,featuresSection,featuresContent,featuresHeader,featuresTitle,featuresSubtitle,featuresGrid,featureCard,featureIcon,featureTitle,featureDescription,benefitsSection,benefitsContent,benefitsGrid,benefitsTitle,benefitItem,benefitIcon,benefitContent,ctaCard,ctaIcon,ctaTitle,ctaDescription,ctaButton,ctaSection,ctaContent,ctaSectionTitle,ctaSectionDescription,ctaSectionButtons,ctaSectionPrimaryButton,ctaSectionSecondaryButton,pricingSection,pricingContent,pricingHeader,pricingSubtitle,pricingTitle,pricingGrid,pricingCard,popularCard,pricingIcon,pricingCardHeader,pricingPlanName,pricingPrice,priceAmount,pricePeriod,pricingFeatures,featuresList,featureItem,pricingAction,pricingButton,contactSection,contactContent,contactHeader,contactTitle,contactSubtitle,contactGrid,contactInfo,contactItem,contactIcon,contactDetails,contactForm,form,formRow,formGroup:formGroup$1,submitButton,footer:footer$1,footerContent,footerGrid,footerBrand,footerBrandTitle,footerBrandDescription,footerSection,footerLinks,footerLink,footerDivider},Landing=()=>{reactExports.useEffect(()=>{document.body.style.overflow="auto",document.documentElement.style.overflow="auto";const r=document.getElementById("root");return r&&(r.style.overflow="auto",r.style.height="auto"),()=>{document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",r&&(r.style.overflow="hidden",r.style.height="100%")}},[]);const e=[{icon:"fas fa-microphone-alt",title:"AI Voice Announcements",description:"ChatGPT-powered voice that announces orders in real-time. Perfect for busy kitchens, drive-thrus, and accessibility. No more shouting across the room."},{icon:"fas fa-store",title:"Side Businesses Made Simple",description:"Run multiple businesses from one system. Coffee shop + bakery? Restaurant + catering? We've got you covered with separate tracking and reporting."},{icon:"fas fa-weight-hanging",title:"Weighted Products Done Right",description:"Finally, a POS that handles produce, meat, and bulk items properly. Weigh, price, and track everything from apples to deli meats with precision."},{icon:"fas fa-layer-group",title:"Multi-Location Magic",description:"Manage multiple locations from one dashboard. Switch between stores instantly, see consolidated reports, and keep everything organized without the headache."},{icon:"fas fa-credit-card",title:"Partial Payments That Work",description:"Layaway, split payments, store credit - handle any payment scenario your customers throw at you. No more awkward 'I'll pay the rest later' situations."},{icon:"fas fa-chart-line",title:"Analytics That Actually Help",description:"See what's selling, what's not, and what's making you money. Real insights, not just pretty charts that don't tell you anything useful."}],t=[{name:"Starter",price:"9",period:"month",description:"Perfect for small businesses and single locations",icon:"fas fa-cube",iconColor:"#FF69B4",features:["Single Business/Location management","Basic POS - Sales, products, customers","Up to 2 staff users (Admin + 1 Cashier)","Basic inventory management","Simple reporting (daily/weekly sales)","Barcode scanning support","Partial payments handling","Email support (48-hour response)","Mobile responsive design"],popular:!1},{name:"Professional",price:"19",period:"month",description:"Ideal for growing businesses with multiple locations",icon:"fas fa-trophy",iconColor:"#7D8D86",features:["Multi-location support (up to 3 locations)","Up to 5 staff users with role-based permissions","Advanced analytics dashboard with charts","Side businesses management","Weighted products support","Text-to-Speech integration (OpenAI TTS)","Advanced reporting (monthly, product analytics)","Customer loyalty points system","Inventory tracking with reorder levels","Priority support (24-hour response)"],popular:!0},{name:"Enterprise",price:"49",period:"month",description:"For large businesses and franchises",icon:"fas fa-gift",iconColor:"#6A5ACD",features:["Unlimited locations and businesses","Unlimited staff users","Advanced multi-tenant architecture","Custom branding options","API access for integrations","Advanced vault and password management","Custom reporting and analytics","Dedicated account manager","24/7 phone support (+353 852287083)","Custom training sessions","Priority feature requests"],popular:!1}];return jsxRuntimeExports.jsxs("div",{className:styles$4.container,children:[jsxRuntimeExports.jsx("nav",{className:styles$4.nav,children:jsxRuntimeExports.jsx("div",{className:styles$4.navContent,children:jsxRuntimeExports.jsxs("div",{className:styles$4.navFlex,children:[jsxRuntimeExports.jsx("div",{className:styles$4.logoContainer,children:jsxRuntimeExports.jsxs("svg",{className:styles$4.logoImage,viewBox:"0 0 200 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{cx:"25",cy:"30",r:"14",fill:"#7d8d86"}),jsxRuntimeExports.jsx("text",{x:"45",y:"38",fontFamily:"Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",fontSize:"22",fontWeight:"600",fill:"#3e3f29",children:"TillPoint"})]})}),jsxRuntimeExports.jsxs("div",{className:styles$4.navLinks,children:[jsxRuntimeExports.jsx("a",{href:"#features",className:styles$4.navLink,children:"Features"}),jsxRuntimeExports.jsx("a",{href:"#pricing",className:styles$4.navLink,children:"Pricing"}),jsxRuntimeExports.jsx("a",{href:"#contact",className:styles$4.navLink,children:"Contact"}),jsxRuntimeExports.jsx(Link,{to:"/login",className:styles$4.navLink,children:"Sign In"}),jsxRuntimeExports.jsx(Link,{to:"/signup",className:styles$4.navButton,children:"Sign Up"})]})]})})}),jsxRuntimeExports.jsx("section",{className:styles$4.heroSection,children:jsxRuntimeExports.jsxs("div",{className:styles$4.heroContent,children:[jsxRuntimeExports.jsxs("h1",{className:styles$4.heroTitle,children:["The POS That Actually",jsxRuntimeExports.jsx("span",{className:styles$4.heroTitleHighlight,children:"Gets Your Business"})]}),jsxRuntimeExports.jsx("p",{className:styles$4.heroSubtitle,children:"Stop wrestling with clunky POS systems. TillPoint is built by retailers, for retailers. Multi-location support, AI voice announcements, weighted products, and side businesses - all the features you actually need, none of the bloat you don't."}),jsxRuntimeExports.jsxs("div",{className:styles$4.heroButtons,children:[jsxRuntimeExports.jsxs(Link,{to:"/login",className:styles$4.primaryButton,children:[jsxRuntimeExports.jsx("i",{className:"fas fa-play-circle"})," Try Demo"]}),jsxRuntimeExports.jsxs(Link,{to:"/signup",className:styles$4.secondaryButton,children:[jsxRuntimeExports.jsx("i",{className:"fas fa-rocket"})," Start Free Trial"]})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.heroStats,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.statItem,children:[jsxRuntimeExports.jsx("span",{className:styles$4.statNumber,children:"3"}),jsxRuntimeExports.jsx("span",{className:styles$4.statLabel,children:"Plans"})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.statItem,children:[jsxRuntimeExports.jsx("span",{className:styles$4.statNumber,children:"9"}),jsxRuntimeExports.jsx("span",{className:styles$4.statLabel,children:"Starting"})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.statItem,children:[jsxRuntimeExports.jsx("span",{className:styles$4.statNumber,children:"24/7"}),jsxRuntimeExports.jsx("span",{className:styles$4.statLabel,children:"Support"})]})]})]})}),jsxRuntimeExports.jsx("section",{id:"features",className:styles$4.featuresSection,children:jsxRuntimeExports.jsxs("div",{className:styles$4.featuresContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.featuresHeader,children:[jsxRuntimeExports.jsx("h2",{className:styles$4.featuresTitle,children:"The Features That Actually Matter"}),jsxRuntimeExports.jsx("p",{className:styles$4.featuresSubtitle,children:"We built TillPoint because we were tired of POS systems that promise everything but deliver nothing. Here's what makes us different."})]}),jsxRuntimeExports.jsx("div",{className:styles$4.featuresGrid,children:e.map((r,n)=>jsxRuntimeExports.jsxs("div",{className:styles$4.featureCard,children:[jsxRuntimeExports.jsx("div",{className:styles$4.featureIcon,children:jsxRuntimeExports.jsx("i",{className:r.icon})}),jsxRuntimeExports.jsx("h3",{className:styles$4.featureTitle,children:r.title}),jsxRuntimeExports.jsx("p",{className:styles$4.featureDescription,children:r.description})]},n))})]})}),jsxRuntimeExports.jsx("section",{id:"pricing",className:styles$4.pricingSection,children:jsxRuntimeExports.jsxs("div",{className:styles$4.pricingContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.pricingHeader,children:[jsxRuntimeExports.jsx("h2",{className:styles$4.pricingSubtitle,children:"PRICING PLAN"}),jsxRuntimeExports.jsx("h1",{className:styles$4.pricingTitle,children:"Pricing Table"})]}),jsxRuntimeExports.jsx("div",{className:styles$4.pricingGrid,children:t.map((r,n)=>jsxRuntimeExports.jsxs("div",{className:`${styles$4.pricingCard} ${r.popular?styles$4.popularCard:""}`,children:[jsxRuntimeExports.jsx("div",{className:styles$4.pricingIcon,style:{color:r.iconColor},children:jsxRuntimeExports.jsx("i",{className:r.icon})}),jsxRuntimeExports.jsxs("div",{className:styles$4.pricingCardHeader,children:[jsxRuntimeExports.jsx("h3",{className:styles$4.pricingPlanName,children:r.name}),jsxRuntimeExports.jsxs("div",{className:styles$4.pricingPrice,children:[jsxRuntimeExports.jsx("span",{className:styles$4.priceAmount,children:r.price}),jsxRuntimeExports.jsxs("span",{className:styles$4.pricePeriod,children:["/",r.period]})]})]}),jsxRuntimeExports.jsx("div",{className:styles$4.pricingFeatures,children:jsxRuntimeExports.jsx("ul",{className:styles$4.featuresList,children:r.features.map((a,l)=>jsxRuntimeExports.jsx("li",{className:styles$4.featureItem,children:a},l))})}),jsxRuntimeExports.jsx("div",{className:styles$4.pricingAction,children:jsxRuntimeExports.jsx(Link,{to:"/signup",className:styles$4.pricingButton,style:{backgroundColor:r.iconColor},children:"Get Started"})})]},n))})]})}),jsxRuntimeExports.jsx("section",{className:styles$4.benefitsSection,children:jsxRuntimeExports.jsx("div",{className:styles$4.benefitsContent,children:jsxRuntimeExports.jsxs("div",{className:styles$4.benefitsGrid,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:styles$4.benefitsTitle,children:"Built by Retailers, For Retailers"}),jsxRuntimeExports.jsxs("div",{className:styles$4.benefitItem,children:[jsxRuntimeExports.jsx("div",{className:styles$4.benefitIcon,children:jsxRuntimeExports.jsx("i",{className:"fas fa-rocket"})}),jsxRuntimeExports.jsxs("div",{className:styles$4.benefitContent,children:[jsxRuntimeExports.jsx("h3",{children:"No More POS Headaches"}),jsxRuntimeExports.jsx("p",{children:"We've been there. Clunky interfaces, missing features, terrible support. TillPoint fixes all of that."})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.benefitItem,children:[jsxRuntimeExports.jsx("div",{className:styles$4.benefitIcon,children:jsxRuntimeExports.jsx("i",{className:"fas fa-phone"})}),jsxRuntimeExports.jsxs("div",{className:styles$4.benefitContent,children:[jsxRuntimeExports.jsx("h3",{children:"Real Support, Real People"}),jsxRuntimeExports.jsx("p",{children:"Call us at +353 852287083. We actually answer the phone and know our product inside and out."})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.benefitItem,children:[jsxRuntimeExports.jsx("div",{className:styles$4.benefitIcon,children:jsxRuntimeExports.jsx("i",{className:"fas fa-shield-alt"})}),jsxRuntimeExports.jsxs("div",{className:styles$4.benefitContent,children:[jsxRuntimeExports.jsx("h3",{children:"Your Data, Your Business"}),jsxRuntimeExports.jsx("p",{children:"Multi-tenant architecture means your data is completely isolated. No sharing, no snooping, no BS."})]})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.ctaCard,children:[jsxRuntimeExports.jsx("div",{className:styles$4.ctaIcon,children:jsxRuntimeExports.jsx("i",{className:"fas fa-play-circle"})}),jsxRuntimeExports.jsx("h3",{className:styles$4.ctaTitle,children:"Try It Before You Buy It"}),jsxRuntimeExports.jsx("p",{className:styles$4.ctaDescription,children:"No credit card required. Jump into our demo and see why retailers are switching to TillPoint."}),jsxRuntimeExports.jsxs(Link,{to:"/login",className:styles$4.ctaButton,children:[jsxRuntimeExports.jsx("i",{className:"fas fa-play-circle"})," Try Demo Now"]})]})]})})}),jsxRuntimeExports.jsx("section",{className:styles$4.ctaSection,children:jsxRuntimeExports.jsxs("div",{className:styles$4.ctaContent,children:[jsxRuntimeExports.jsx("h2",{className:styles$4.ctaSectionTitle,children:"Stop Fighting Your POS System"}),jsxRuntimeExports.jsx("p",{className:styles$4.ctaSectionDescription,children:"Life's too short for bad software. Try TillPoint risk-free and see why retailers are finally happy with their POS."}),jsxRuntimeExports.jsxs("div",{className:styles$4.ctaSectionButtons,children:[jsxRuntimeExports.jsxs(Link,{to:"/login",className:styles$4.ctaSectionPrimaryButton,children:[jsxRuntimeExports.jsx("i",{className:"fas fa-play-circle"})," Try Demo"]}),jsxRuntimeExports.jsxs(Link,{to:"/signup",className:styles$4.ctaSectionSecondaryButton,children:[jsxRuntimeExports.jsx("i",{className:"fas fa-rocket"})," Start Free Trial"]})]})]})}),jsxRuntimeExports.jsx("section",{id:"contact",className:styles$4.contactSection,children:jsxRuntimeExports.jsxs("div",{className:styles$4.contactContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.contactHeader,children:[jsxRuntimeExports.jsx("h2",{className:styles$4.contactTitle,children:"Questions? We've Got Answers"}),jsxRuntimeExports.jsx("p",{className:styles$4.contactSubtitle,children:"Not sure if TillPoint is right for you? Drop us a line. We're real people who actually care about your business."})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.contactGrid,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.contactInfo,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.contactItem,children:[jsxRuntimeExports.jsx("div",{className:styles$4.contactIcon,children:jsxRuntimeExports.jsx("i",{className:"fas fa-envelope"})}),jsxRuntimeExports.jsxs("div",{className:styles$4.contactDetails,children:[jsxRuntimeExports.jsx("h3",{children:"Email Us"}),jsxRuntimeExports.jsx("p",{children:"support@tillpoint.com"}),jsxRuntimeExports.jsx("p",{children:"sales@tillpoint.com"})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.contactItem,children:[jsxRuntimeExports.jsx("div",{className:styles$4.contactIcon,children:jsxRuntimeExports.jsx("i",{className:"fas fa-phone"})}),jsxRuntimeExports.jsxs("div",{className:styles$4.contactDetails,children:[jsxRuntimeExports.jsx("h3",{children:"Call Us"}),jsxRuntimeExports.jsx("p",{children:"+353 852287083"}),jsxRuntimeExports.jsx("p",{children:"Mon-Fri 9AM-6PM GMT"})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.contactItem,children:[jsxRuntimeExports.jsx("div",{className:styles$4.contactIcon,children:jsxRuntimeExports.jsx("i",{className:"fas fa-map-marker-alt"})}),jsxRuntimeExports.jsxs("div",{className:styles$4.contactDetails,children:[jsxRuntimeExports.jsx("h3",{children:"Visit Us"}),jsxRuntimeExports.jsx("p",{children:"123 Business Street"}),jsxRuntimeExports.jsx("p",{children:"Suite 100, City, State 12345"})]})]})]}),jsxRuntimeExports.jsx("div",{className:styles$4.contactForm,children:jsxRuntimeExports.jsxs("form",{className:styles$4.form,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.formRow,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"firstName",children:"First Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"firstName",name:"firstName",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"lastName",children:"Last Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"lastName",name:"lastName",required:!0})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",children:"Email Address"}),jsxRuntimeExports.jsx("input",{type:"email",id:"email",name:"email",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"phone",children:"Phone Number"}),jsxRuntimeExports.jsx("input",{type:"tel",id:"phone",name:"phone"})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"company",children:"Company Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"company",name:"company"})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"message",children:"Message"}),jsxRuntimeExports.jsx("textarea",{id:"message",name:"message",rows:5,required:!0})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:styles$4.submitButton,children:"Send Message"})]})})]})]})}),jsxRuntimeExports.jsx("footer",{className:styles$4.footer,children:jsxRuntimeExports.jsxs("div",{className:styles$4.footerContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.footerGrid,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.footerBrand,children:[jsxRuntimeExports.jsx("h3",{className:styles$4.footerBrandTitle,children:"TillPoint"}),jsxRuntimeExports.jsx("p",{className:styles$4.footerBrandDescription,children:"The modern point-of-sale system designed for today's businesses. Powerful, intuitive, and built to grow with you."})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.footerSection,children:[jsxRuntimeExports.jsx("h4",{children:"Product"}),jsxRuntimeExports.jsxs("ul",{className:styles$4.footerLinks,children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",className:styles$4.footerLink,children:"Features"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",className:styles$4.footerLink,children:"Pricing"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",className:styles$4.footerLink,children:"Integrations"})})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.footerSection,children:[jsxRuntimeExports.jsx("h4",{children:"Support"}),jsxRuntimeExports.jsxs("ul",{className:styles$4.footerLinks,children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",className:styles$4.footerLink,children:"Help Center"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",className:styles$4.footerLink,children:"Contact Us"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",className:styles$4.footerLink,children:"Documentation"})})]})]})]}),jsxRuntimeExports.jsx("div",{className:styles$4.footerDivider,children:jsxRuntimeExports.jsx("p",{children:" 2024 TillPoint. All rights reserved."})})]})})]})},SidebarStepper=({steps:e,currentStep:t,onStepClick:r})=>jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",height:"100%",gap:"2rem",position:"relative"},children:e.map((n,a)=>{const l=a+1,c=t===l,d=t>l;return jsxRuntimeExports.jsxs("div",{onClick:()=>r(l),style:{display:"flex",alignItems:"center",gap:"1rem",cursor:"pointer",fontWeight:c?"600":"400",color:c?"#7d8d86":d?"#16a34a":"#6b7280",position:"relative"},children:[jsxRuntimeExports.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",backgroundColor:c?"#f1f0e4":d?"#dcfce7":"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",border:c?"2px solid #7d8d86":"1px solid #d1d5db",position:"relative",zIndex:2},children:jsxRuntimeExports.jsx("div",{style:{transform:"scale(1.3)"},children:n.icon})}),a<e.length-1&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"28px",top:"56px",width:"2px",height:"calc(100% + 2rem)",backgroundColor:d?"#16a34a":"#d1d5db",zIndex:1}}),jsxRuntimeExports.jsx("span",{style:{fontSize:"1.2rem"},children:n.label})]},a)})}),steps=[{label:"Account Setup",icon:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",style:{width:20,height:20},children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 20.25a9.75 9.75 0 1115 0v.75H4.5v-.75z"})})},{label:"Business Info",icon:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",style:{width:20,height:20},children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21V3h18v18H3zm3-9h12"})})},{label:"Contact Details",icon:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",style:{width:20,height:20},children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75L12 12l9.75-5.25M2.25 17.25l9.75 5.25 9.75-5.25M2.25 6.75v10.5m19.5-10.5v10.5"})})},{label:"Finish",icon:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",style:{width:20,height:20},children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})})}],Signup=()=>{const[e,t]=reactExports.useState(1),[r,n]=reactExports.useState(!1),[a,l]=reactExports.useState(null),{register:c}=useAuth(),d=useNavigate(),[x,f]=reactExports.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",businessName:"",businessType:"",businessDescription:"",businessAddress:"",businessPhone:"",currency:"USD",website:"",vatNumber:"",openTime:"09:00",closeTime:"18:00"}),h=Math.round(e/steps.length*100),g=E=>{const{name:b,value:v}=E.target;f(R=>({...R,[b]:v}))},y=async E=>{E.preventDefault(),l(null),n(!0);try{if(!x.firstName||!x.lastName||!x.email||!x.password)throw new Error("Please fill in all required account fields");if(!x.businessName||!x.businessType||!x.businessAddress)throw new Error("Please fill in all required business fields");if(x.password!==x.confirmPassword)throw new Error("Passwords do not match");const b=x.email.split("@")[0],v=await c(b,x.password,x.businessName,x.firstName,x.lastName,x.email,x.phone,x.businessType,x.businessDescription,x.businessAddress,x.businessPhone,x.currency,x.website,x.vatNumber,x.openTime,x.closeTime);if(v.success)v.pendingApproval?(l(null),l(`Registration submitted successfully!

Your account is now pending admin approval. You will be able to log in once an administrator approves your registration.

Please check back later or contact support if you have any questions.`)):d("/login",{state:{message:"Account created successfully! Please sign in.",email:x.email}});else throw new Error("Failed to create account. Please try again.")}catch(b){l(b instanceof Error?b.message:"An error occurred during signup")}finally{n(!1)}},_={padding:"0.65rem 1.5rem",borderRadius:"9999px",backgroundColor:"#7d8d86",border:"none",color:"#f1f0e4",fontWeight:"600",cursor:"pointer",transition:"background-color 0.2s ease"};return jsxRuntimeExports.jsxs("div",{style:{minHeight:"100vh",backgroundImage:"url('images/signupbg.png')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",position:"relative"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(4px)",zIndex:1}}),jsxRuntimeExports.jsx("header",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",borderBottom:"1px solid #e5e7eb",position:"relative",zIndex:10},children:jsxRuntimeExports.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"0 2rem",display:"flex",justifyContent:"space-between",alignItems:"center",height:"4rem"},children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"center"},children:jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:jsxRuntimeExports.jsxs("svg",{style:{height:"60px",width:"200px"},viewBox:"0 0 200 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{cx:"25",cy:"30",r:"14",fill:"#7d8d86"}),jsxRuntimeExports.jsx("text",{x:"45",y:"38",fontFamily:"Inter, sans-serif",fontSize:"22",fontWeight:"600",fill:"#3e3f29",children:"TillPoint"})]})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Link,{to:"/",style:{color:"#374151",fontWeight:"600",fontSize:"1.125rem",textDecoration:"none",transition:"color 0.2s"},children:" Back to Home"})})]})}),jsxRuntimeExports.jsx("div",{style:{padding:"3rem 2rem",textAlign:"center",position:"relative",zIndex:10},children:jsxRuntimeExports.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto"},children:[jsxRuntimeExports.jsxs("h1",{style:{fontSize:"3.5rem",fontWeight:"700",marginBottom:"1rem",color:"white",textShadow:"0 2px 4px rgba(0, 0, 0, 0.5)"},children:["Welcome to ",jsxRuntimeExports.jsx("span",{style:{color:"#7d8d86"},children:"TillPoint"})]}),jsxRuntimeExports.jsx("p",{style:{fontSize:"1.75rem",color:"white",opacity:"0.9",maxWidth:"600px",margin:"0 auto",textShadow:"0 2px 4px rgba(0, 0, 0, 0.5)"},children:"Complete the 4 steps to get started"})]})}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"2rem",minHeight:"calc(100vh - 12rem)",position:"relative",zIndex:10},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"1.5rem",maxWidth:"1200px",width:"100%"},children:[jsxRuntimeExports.jsx("aside",{style:{width:"280px",background:"#fff",border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",padding:"2rem 1.5rem",height:"600px",display:"flex",flexDirection:"column"},children:jsxRuntimeExports.jsx(SidebarStepper,{steps,currentStep:e,onStepClick:t})}),jsxRuntimeExports.jsxs("main",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[jsxRuntimeExports.jsxs("div",{style:{width:"100%",maxWidth:"800px",background:"#fff",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",padding:"2rem",display:"flex",flexDirection:"column",boxSizing:"border-box"},children:[jsxRuntimeExports.jsx("h1",{style:{textAlign:"center",fontSize:"1.5rem",fontWeight:"700",marginBottom:"0.5rem"},children:steps[e-1].label}),jsxRuntimeExports.jsxs("p",{style:{textAlign:"center",color:"#374151",marginBottom:"1.5rem"},children:["Step ",e," of ",steps.length]}),jsxRuntimeExports.jsx("div",{style:{height:"6px",background:"#e5e7eb",borderRadius:"9999px",marginBottom:"2rem",overflow:"hidden"},children:jsxRuntimeExports.jsx("div",{style:{height:"100%",width:`${h}%`,backgroundColor:"#7d8d86"}})}),a&&jsxRuntimeExports.jsx("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"1rem",borderRadius:"12px",marginBottom:"1.5rem",fontSize:"0.9rem",whiteSpace:"pre-line",textAlign:"left"},children:a}),jsxRuntimeExports.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:jsxRuntimeExports.jsxs("form",{onSubmit:y,style:{flex:1,display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"grid",gap:"1.5rem",flex:1},children:[e===1&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[jsxRuntimeExports.jsx("input",{name:"firstName",placeholder:"First Name *",value:x.firstName,onChange:g,required:!0,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}}),jsxRuntimeExports.jsx("input",{name:"lastName",placeholder:"Last Name *",value:x.lastName,onChange:g,required:!0,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}})]}),jsxRuntimeExports.jsx("input",{name:"email",type:"email",placeholder:"Email *",value:x.email,onChange:g,required:!0,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}}),jsxRuntimeExports.jsx("input",{name:"phone",type:"tel",placeholder:"Phone (optional)",value:x.phone,onChange:g,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[jsxRuntimeExports.jsx("input",{name:"password",type:"password",placeholder:"Password *",value:x.password,onChange:g,required:!0,autoComplete:"new-password",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}}),jsxRuntimeExports.jsx("input",{name:"confirmPassword",type:"password",placeholder:"Confirm Password *",value:x.confirmPassword,onChange:g,required:!0,autoComplete:"new-password",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}})]})]}),e===2&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{name:"businessName",placeholder:"Business Name *",value:x.businessName,onChange:g,required:!0,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}}),jsxRuntimeExports.jsxs("select",{name:"businessType",value:x.businessType,onChange:g,required:!0,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",backgroundColor:"white",boxSizing:"border-box"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select Business Type *"}),jsxRuntimeExports.jsx("option",{value:"Retail",children:"Retail"}),jsxRuntimeExports.jsx("option",{value:"Restaurant",children:"Restaurant"}),jsxRuntimeExports.jsx("option",{value:"Healthcare",children:"Healthcare"}),jsxRuntimeExports.jsx("option",{value:"Beauty",children:"Beauty & Wellness"}),jsxRuntimeExports.jsx("option",{value:"Automotive",children:"Automotive"}),jsxRuntimeExports.jsx("option",{value:"Professional Services",children:"Professional Services"}),jsxRuntimeExports.jsx("option",{value:"Other",children:"Other"})]}),jsxRuntimeExports.jsx("textarea",{name:"businessDescription",placeholder:"Business Description (optional)",value:x.businessDescription,onChange:g,rows:3,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",resize:"vertical",boxSizing:"border-box"}}),jsxRuntimeExports.jsx("input",{name:"businessAddress",placeholder:"Business Address *",value:x.businessAddress,onChange:g,required:!0,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[jsxRuntimeExports.jsx("input",{name:"businessPhone",type:"tel",placeholder:"Business Phone *",value:x.businessPhone,onChange:g,required:!0,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}}),jsxRuntimeExports.jsxs("select",{name:"currency",value:x.currency,onChange:g,required:!0,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",backgroundColor:"white",boxSizing:"border-box"},children:[jsxRuntimeExports.jsx("option",{value:"USD",children:"USD"}),jsxRuntimeExports.jsx("option",{value:"EUR",children:"EUR"}),jsxRuntimeExports.jsx("option",{value:"GBP",children:"GBP"}),jsxRuntimeExports.jsx("option",{value:"JPY",children:"JPY"}),jsxRuntimeExports.jsx("option",{value:"CAD",children:"CAD"}),jsxRuntimeExports.jsx("option",{value:"AUD",children:"AUD"})]})]})]}),e===3&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{name:"website",type:"url",placeholder:"Website (optional)",value:x.website,onChange:g,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}}),jsxRuntimeExports.jsx("input",{name:"vatNumber",placeholder:"VAT/Tax Number (optional)",value:x.vatNumber,onChange:g,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"1rem",color:"#1f2937",fontWeight:"600"},children:"Opening Time"}),jsxRuntimeExports.jsx("input",{name:"openTime",type:"time",value:x.openTime,onChange:g,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box",cursor:"pointer",backgroundColor:"white"}})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"1rem",color:"#1f2937",fontWeight:"600"},children:"Closing Time"}),jsxRuntimeExports.jsx("input",{name:"closeTime",type:"time",value:x.closeTime,onChange:g,autoComplete:"off",style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"2px solid #9ca3af",fontSize:"1rem",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box",cursor:"pointer",backgroundColor:"white"}})]})]})]}),e===4&&jsxRuntimeExports.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[jsxRuntimeExports.jsx("h3",{style:{marginBottom:"1rem",color:"#374151",fontSize:"1.25rem"},children:"Review Your Information"}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{style:{color:"#374151"},children:"Account Details:"}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["Name: ",x.firstName," ",x.lastName]}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["Email: ",x.email]}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["Phone: ",x.phone||"Not provided"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{style:{color:"#374151"},children:"Business Information:"}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["Business Name: ",x.businessName]}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["Type: ",x.businessType]}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["Address: ",x.businessAddress]}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["Phone: ",x.businessPhone]}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["Currency: ",x.currency]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{style:{color:"#374151"},children:"Contact Details:"}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["Website: ",x.website||"Not provided"]}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["VAT Number: ",x.vatNumber||"Not provided"]}),jsxRuntimeExports.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:["Business Hours: ",x.openTime," - ",x.closeTime]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"2rem",borderTop:"1px solid #e5e7eb"},children:[e>1?jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>t(e-1),style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#e5e7eb",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1.5rem",color:"#374151"},children:""}):jsxRuntimeExports.jsx("div",{}),e===steps.length?jsxRuntimeExports.jsx("button",{type:"submit",disabled:r,style:{..._,padding:"0.875rem 2rem",fontSize:"1rem",fontWeight:"600",opacity:r?.7:1,cursor:r?"not-allowed":"pointer"},children:r?"Creating Account...":"Submit"}):jsxRuntimeExports.jsx("div",{}),e<steps.length?jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>t(e+1),style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#7d8d86",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1.5rem",color:"#f1f0e4",transition:"background-color 0.2s ease"},children:""}):jsxRuntimeExports.jsx("div",{})]})]})})]}),jsxRuntimeExports.jsx("div",{style:{width:"100%",maxWidth:"800px",display:"flex",justifyContent:"center",marginTop:"1.5rem"},children:jsxRuntimeExports.jsxs("p",{style:{textAlign:"center",color:"white",fontSize:"1.25rem",textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)",margin:0},children:["Already have an account?"," ",jsxRuntimeExports.jsx(Link,{to:"/login",style:{color:"#f1f0e4",fontWeight:"600",textDecoration:"underline",transition:"color 0.2s ease"},children:"Sign in"})]})})]})]})})]})},formatCurrency=(e,t={},r)=>{const n=typeof e=="number"&&isFinite(e)?e:0,a=f=>f&&{USD:"USD",EUR:"EUR",GBP:"GBP",CAD:"CAD",AUD:"AUD",JPY:"JPY"}[f]||"EUR",{locale:l="en-IE",currency:c=a(r),minimumFractionDigits:d=2,maximumFractionDigits:x=2}=t;try{return new Intl.NumberFormat(l,{style:"currency",currency:c,minimumFractionDigits:d,maximumFractionDigits:x}).format(n)}catch{return`${c} ${n.toFixed(2)}`}},formatCurrencyCompact=(e,t={},r)=>{const n=typeof e=="number"&&isFinite(e)?e:0,a=d=>d&&{USD:"USD",EUR:"EUR",GBP:"GBP",CAD:"CAD",AUD:"AUD",JPY:"JPY"}[d]||"EUR",{locale:l="en-IE",currency:c=a(r)}=t;try{return new Intl.NumberFormat(l,{style:"currency",currency:c,notation:"compact",maximumFractionDigits:1}).format(n)}catch{const d=Math.abs(n);return d>=1e6?`${formatCurrency(n/1e6,{...t,maximumFractionDigits:1},r)}M`:d>=1e3?`${formatCurrency(n/1e3,{...t,maximumFractionDigits:1},r)}K`:formatCurrency(n,t,r)}},useBusinessId=()=>{const{user:e}=useAuth();return{businessId:e?.business_id,businessLoading:!1,businessError:null,hasBusinessSelected:e?.business_id!=null}},fetchSalesData=async(e,t)=>{console.log("[fetchSalesData] fetching sales data for business:",e,"branch:",t);let r=supabase.from("sales").select(`
      *,
      customers (name),
      sale_items (
        *,
        products (
          name,
          price,
          is_weighted,
          price_per_unit,
          weight_unit
        )
      )
    `).eq("business_id",e).order("datetime",{ascending:!1}),n=supabase.from("side_business_sales").select(`
      *,
      side_business_items (
        name,
        price
      )
    `).eq("parent_shop_id",e).order("date_time",{ascending:!1});t&&(r=r.eq("branch_id",t),n=n.eq("branch_id",t));const[a,l]=await Promise.all([r,n]);if(a.error)throw a.error;if(l.error)throw l.error;return{sales:a.data?.map(d=>{const x=d.notes&&(d.notes.includes("PARTIAL PAYMENT")||d.notes.includes("Amount Paid Today")||d.notes.includes("Remaining Balance"));let f=0,h=0,g="";if(x&&d.notes){const y=d.notes.match(/Amount Paid Today: (\d+\.?\d*)/),_=d.notes.match(/Remaining Balance: (\d+\.?\d*)/);f=y?parseFloat(y[1]):0,h=_?parseFloat(_[1]):0,g=d.notes}return{...d,customer_name:d.customers?.name||"Walk-in Customer",cashier_name:d.shop_staff?.username||"System User",is_partial_payment:x,partial_amount:f,remaining_amount:h,partial_notes:g,items:d.sale_items||[]}})||[],sideBusinessSales:l.data||[]}},useSalesData=()=>{const{user:e}=useAuth(),{selectedBranchId:t}=useBranch();return useQuery({queryKey:["salesData",e?.business_id,t],queryFn:()=>fetchSalesData(e?.business_id,t),enabled:!!e?.business_id,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0})},fetchProductsData=async(e,t)=>{console.log("[fetchProductsData] fetching products data for business:",e,"branch:",t);let r=supabase.from("products").select("*").eq("business_id",e).order("name"),n=supabase.from("side_business_items").select("*").eq("parent_shop_id",e).order("name");t&&(r=r.eq("branch_id",t),n=n.eq("branch_id",t));const[a,l]=await Promise.all([r,n]);if(a.error)throw a.error;if(l.error)throw l.error;const c=[...new Set(a.data?.map(d=>d.category).filter(Boolean))];return{products:a.data||[],sideBusinessItems:l.data||[],categories:c}},useProductsData=()=>{const{user:e}=useAuth(),{selectedBranchId:t}=useBranch();return useQuery({queryKey:["productsData",e?.business_id,t],queryFn:()=>fetchProductsData(e?.business_id,t),enabled:!!e?.business_id,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0})},BranchSelector=({className:e="",showLabel:t=!0,size:r="md"})=>{const{selectedBranch:n,selectedBranchId:a,setSelectedBranch:l,setSwitchingBranch:c,setSwitchingToBranch:d}=useBranch(),{businessId:x}=useBusinessId(),{user:f}=useAuth(),[h,g]=reactExports.useState([]),[y,_]=reactExports.useState(!1),[E,b]=reactExports.useState(!1);if(f?.role?.toLowerCase()!=="owner")return null;reactExports.useEffect(()=>{x&&v()},[x]);const v=async()=>{if(x)try{_(!0);const{data:L,error:I}=await supabase.from("branches").select("*").eq("business_id",x).eq("active",!0).order("branch_name");if(I){console.error("Error fetching branches:",I);return}g(L||[])}catch(L){console.error("Error fetching branches:",L)}finally{_(!1)}},R=L=>{l(L),b(!1),d(L.branch_name),c(!0),setTimeout(()=>{c(!1),d(null);const I=document.createElement("div");I.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
        z-index: 1000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        animation: slideIn 0.3s ease-out;
      `,I.textContent=`Switched to ${L.branch_name}`,document.body.appendChild(I),setTimeout(()=>{I.style.animation="slideOut 0.3s ease-in",setTimeout(()=>{document.body.removeChild(I)},300)},2e3)},1500)};if(h.length<=1)return null;const C={sm:{fontSize:"14px",padding:"6px 12px",iconSize:"16px"},md:{fontSize:"16px",padding:"8px 16px",iconSize:"20px"},lg:{fontSize:"18px",padding:"12px 20px",iconSize:"24px"}}[r];return jsxRuntimeExports.jsxs("div",{style:{position:"relative",...e?{className:e}:{}},children:[t&&jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Current Branch"}),jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>b(!E),disabled:y,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:C.fontSize,padding:C.padding,backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"8px",cursor:y?"not-allowed":"pointer",opacity:y?.5:1,transition:"all 0.2s ease",outline:"none"},onMouseEnter:L=>{y||(L.currentTarget.style.borderColor="#9ca3af")},onMouseLeave:L=>{y||(L.currentTarget.style.borderColor="#d1d5db")},onFocus:L=>{L.currentTarget.style.borderColor="#3b82f6",L.currentTarget.style.boxShadow="0 0 0 2px rgba(59, 130, 246, 0.5)"},onBlur:L=>{L.currentTarget.style.borderColor="#d1d5db",L.currentTarget.style.boxShadow="none"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#10b981",borderRadius:"50%"}}),jsxRuntimeExports.jsx("span",{style:{fontWeight:"500",color:"#111827",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n?.branch_name||"Select Branch"})]}),jsxRuntimeExports.jsx("svg",{style:{width:C.iconSize,height:C.iconSize,color:"#9ca3af",transform:E?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),E&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10},onClick:()=>b(!1)}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",zIndex:20,maxHeight:"240px",overflowY:"auto"},children:h.map(L=>jsxRuntimeExports.jsxs("button",{onClick:()=>R(L),style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",textAlign:"left",backgroundColor:L.branch_id===a?"#eff6ff":"transparent",borderLeft:L.branch_id===a?"4px solid #3b82f6":"4px solid transparent",border:"none",cursor:"pointer",transition:"background-color 0.15s ease"},onMouseEnter:I=>{L.branch_id!==a&&(I.currentTarget.style.backgroundColor="#f9fafb")},onMouseLeave:I=>{L.branch_id!==a&&(I.currentTarget.style.backgroundColor="transparent")},children:[jsxRuntimeExports.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:L.branch_id===a?"#3b82f6":"#d1d5db"}}),jsxRuntimeExports.jsxs("div",{style:{flex:1,minWidth:0},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",color:"#111827",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:L.branch_name}),L.address&&jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:L.address})]}),L.branch_id===a&&jsxRuntimeExports.jsx("svg",{style:{width:"16px",height:"16px",color:"#3b82f6",flexShrink:0},fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},L.branch_id))})]})]}),jsxRuntimeExports.jsx("style",{children:`
        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        @keyframes slideOut {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(100%);
            opacity: 0;
          }
        }
      `})]})},useLowStockItems=()=>{const{data:e,isLoading:t,error:r,refetch:n}=useProductsData(),{businessId:a}=useBusinessId(),{selectedBranchId:l}=useBranch(),{user:c}=useAuth(),d=reactExports.useMemo(()=>e?.products?e.products.filter(g=>g.stock_quantity<=g.reorder_level).map(g=>({product_id:g.product_id,name:g.name,stock_quantity:g.stock_quantity,reorder_level:g.reorder_level,category:g.category,supplier_info:g.supplier_info,is_low_stock:!0})).sort((g,y)=>g.stock_quantity-y.stock_quantity):[],[e]),x=()=>{const g=new Date,y=g.getFullYear(),_=String(g.getMonth()+1).padStart(2,"0"),E=String(g.getDate()).padStart(2,"0"),b=String(g.getHours()).padStart(2,"0"),v=String(g.getMinutes()).padStart(2,"0"),R=String(g.getSeconds()).padStart(2,"0");return`${y}-${_}-${E}T${b}:${v}:${R}`},f=async(g,y)=>{if(!a||y<=0)return console.error("Invalid business ID or quantity for restock"),!1;try{console.log("Restocking product:",g,"with quantity:",y);const{data:_,error:E}=await supabase.from("products").select("stock_quantity, reorder_level").eq("product_id",g).eq("business_id",a).single();if(E||!_)return console.error("Error fetching product for restock:",E),!1;const b=_.stock_quantity+y,{error:v}=await supabase.from("products").update({stock_quantity:b,last_updated:x()}).eq("product_id",g).eq("business_id",a);if(v)return console.error("Error updating product stock:",v),!1;try{const{error:R}=await supabase.from("inventory_movements").insert({product_id:g,quantity_change:y,movement_type:"Restock",reference_id:null,business_id:a,branch_id:l,notes:`Manual restock: +${y} units`,created_by:c?.user_id});R&&console.error("Error recording inventory movement:",R)}catch(R){console.warn("Inventory movements table may not exist yet:",R)}return await n(),console.log("Successfully restocked product:",g),!0}catch(_){return console.error("Error in restockProduct:",_),!1}},h=async g=>{if(!a)return console.error("Invalid business ID for quick restock"),!1;try{console.log("Quick restocking product:",g,"adding 30 units");const{data:y,error:_}=await supabase.from("products").select("stock_quantity").eq("product_id",g).eq("business_id",a).single();if(_||!y)return console.error("Error fetching product for quick restock:",_),!1;const E=30,b=y.stock_quantity+E,{error:v}=await supabase.from("products").update({stock_quantity:b,last_updated:x()}).eq("product_id",g).eq("business_id",a);if(v)return console.error("Error updating product stock:",v),!1;try{const{error:R}=await supabase.from("inventory_movements").insert({product_id:g,quantity_change:E,movement_type:"Quick Restock",reference_id:null,business_id:a,branch_id:l,notes:`Quick restock: +${E} units`,created_by:c?.user_id});R&&console.error("Error recording inventory movement:",R)}catch(R){console.warn("Inventory movements table may not exist yet:",R)}return await n(),console.log("Successfully quick restocked product:",g,"added:",E),!0}catch(y){return console.error("Error in quickRestock:",y),!1}};return{lowStockProducts:d,lowStockItems:d,loading:t,error:r?.message||null,restockProduct:f,quickRestock:h}},LowStockCard=({product:e,onRestock:t,onQuickRestock:r})=>{const[n,a]=reactExports.useState(!1),[l,c]=reactExports.useState(""),[d,x]=reactExports.useState(!1),f=async()=>{x(!0);const _=await r(e.product_id);x(!1),_&&a(!1)},h=async()=>{const _=parseInt(l);if(isNaN(_)||_<=0)return;x(!0);const E=await t(e.product_id,_);x(!1),E&&(a(!1),c(""))},g=()=>e.stock_quantity<=2?"#ef4444":e.stock_quantity<=5?"#f59e0b":"#eab308",y=()=>e.stock_quantity<=2?"Critical":e.stock_quantity<=5?"Low":"Below Reorder";return jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:_=>{_.currentTarget.style.transform="translateY(-2px)",_.currentTarget.style.boxShadow="0 4px 16px rgba(62, 63, 41, 0.15)"},onMouseLeave:_=>{_.currentTarget.style.transform="translateY(0)",_.currentTarget.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.1)"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",background:g(),color:"white",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:y()}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[jsxRuntimeExports.jsxs("div",{style:{width:"60px",height:"60px",borderRadius:"8px",background:"#f9fafb",border:"1px solid rgba(125, 141, 134, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:[e.image_url?jsxRuntimeExports.jsx("img",{src:e.image_url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:_=>{_.currentTarget.style.setProperty("display","none")(_.currentTarget.nextElementSibling).style.setProperty("display","flex")}}):null,jsxRuntimeExports.jsx("div",{style:{display:e.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:"#7d8d86",fontSize:"20px"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-box"})})]}),jsxRuntimeExports.jsxs("div",{style:{flex:1,minWidth:0},children:[jsxRuntimeExports.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0",lineHeight:"1.3"},children:e.name}),jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"0 0 8px 0"},children:e.category}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[jsxRuntimeExports.jsxs("span",{style:{fontSize:"12px",color:"#3e3f29",fontWeight:"500"},children:["Stock: ",e.stock_quantity]}),jsxRuntimeExports.jsx("span",{style:{fontSize:"12px",color:"#7d8d86"},children:""}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86"},children:["Reorder at: ",e.reorder_level]})]}),n?jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[jsxRuntimeExports.jsx("input",{type:"number",value:l,onChange:_=>c(_.target.value),placeholder:"Qty",min:"1",style:{width:"60px",padding:"6px 8px",border:"1px solid #7d8d86",borderRadius:"6px",fontSize:"12px",outline:"none"}}),jsxRuntimeExports.jsx("button",{onClick:h,disabled:d||!l,style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:d||!l?"not-allowed":"pointer",opacity:d||!l?.7:1,transition:"all 0.2s ease"},onMouseEnter:_=>{!d&&l&&(_.currentTarget.style.background="#bca88d")},onMouseLeave:_=>{!d&&l&&(_.currentTarget.style.background="#7d8d86")},children:d?jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):"Restock"}),jsxRuntimeExports.jsx("button",{onClick:()=>{a(!1),c("")},disabled:d,style:{background:"transparent",color:"#7d8d86",border:"none",fontSize:"12px",cursor:d?"not-allowed":"pointer",opacity:d?.7:1},children:"Cancel"})]}):jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsxs("button",{onClick:f,disabled:d,style:{background:"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:d?"not-allowed":"pointer",opacity:d?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:_=>{d||(_.currentTarget.style.background="#059669")},onMouseLeave:_=>{d||(_.currentTarget.style.background="#10b981")},children:[d?jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):jsxRuntimeExports.jsx("i",{className:"fa-solid fa-bolt"}),"Quick Restock (+30)"]}),jsxRuntimeExports.jsx("button",{onClick:()=>a(!0),disabled:d,style:{background:"transparent",color:"#7d8d86",border:"1px solid #7d8d86",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:d?"not-allowed":"pointer",opacity:d?.7:1,transition:"all 0.2s ease"},onMouseEnter:_=>{d||(_.currentTarget.style.background="#7d8d86",_.currentTarget.style.color="white")},onMouseLeave:_=>{d||(_.currentTarget.style.background="transparent",_.currentTarget.style.color="#7d8d86")},children:"Custom"})]})]})]})]})},LowStockSection=()=>{const{lowStockItems:e,loading:t,error:r,restockProduct:n,quickRestock:a}=useLowStockItems(),[l,c]=reactExports.useState(0),d=e[l]||null,x=l<e.length-1,f=l>0,h=()=>{x&&c(l+1)},g=()=>{f&&c(l-1)};return t?jsxRuntimeExports.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading low stock items..."]})}):r?jsxRuntimeExports.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),jsxRuntimeExports.jsx("p",{style:{margin:0,fontSize:"14px"},children:r})]})}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:e.length>0?"#fbbf24":"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"18px",color:e.length>0?"#d97706":"#059669"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Low Stock Items"}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[e.length," item",e.length!==1?"s":""," need",e.length===1?"s":""," restocking"]})]})]}),e.length>1&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{onClick:g,disabled:!f,style:{background:f?"#7d8d86":"#e5e7eb",color:f?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:f?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:y=>{f&&(y.currentTarget.style.background="#bca88d")},onMouseLeave:y=>{f&&(y.currentTarget.style.background="#7d8d86")},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left"})}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86",fontWeight:"500",minWidth:"40px",textAlign:"center"},children:[l+1," / ",e.length]}),jsxRuntimeExports.jsx("button",{onClick:h,disabled:!x,style:{background:x?"#7d8d86":"#e5e7eb",color:x?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:x?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:y=>{x&&(y.currentTarget.style.background="#bca88d")},onMouseLeave:y=>{x&&(y.currentTarget.style.background="#7d8d86")},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]}),e.length===0?jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#7d8d86"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-check-circle",style:{fontSize:"48px",marginBottom:"16px",color:"#10b981"}}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",margin:0,fontWeight:"500"},children:"All items are well stocked!"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0",opacity:.8},children:"No items need restocking at the moment."})]}):d?jsxRuntimeExports.jsx(LowStockCard,{product:d,onRestock:n,onQuickRestock:a},d.product_id):null]})},getDateRange$1=(e,t)=>{const r=t||new Date;switch(e){case"today":{const n=r.toISOString().split("T")[0];return{start:`${n}T00:00:00`,end:`${n}T23:59:59`}}case"week":{const n=new Date(r);n.setDate(r.getDate()-r.getDay()),n.setHours(0,0,0,0);const a=new Date(n);return a.setDate(n.getDate()+6),a.setHours(23,59,59,999),{start:n.toISOString(),end:a.toISOString()}}case"month":{const n=new Date(r.getFullYear(),r.getMonth(),1),a=new Date(r.getFullYear(),r.getMonth()+1,0,23,59,59,999);return{start:n.toISOString(),end:a.toISOString()}}default:return{start:"",end:""}}},processProductAnalytics=(e,t,r)=>{const{start:n,end:a}=getDateRange$1(t,r),l=e.filter(d=>{const x=new Date(d.datetime).toISOString();return x>=n&&x<=a}),c=new Map;return l.forEach(d=>{d.sale_items?.forEach(x=>{const f=x.product_id,h=c.get(f)||{quantity:0,total:0,name:x.products?.name||"Unknown",image_url:x.products?.image_url};c.set(f,{quantity:h.quantity+(x.quantity||0),total:h.total+(parseFloat(x.calculated_price)||0),name:h.name,image_url:h.image_url})})}),Array.from(c.entries()).map(([d,x])=>({product_id:d,product_name:x.name,quantity_sold:x.quantity,total_sales:x.total,image_url:x.image_url})).sort((d,x)=>x.total_sales-d.total_sales)},useProductAnalytics=e=>{const{data:t,isLoading:r,error:n}=useSalesData(),a=reactExports.useMemo(()=>t?.sales?processProductAnalytics(t.sales,"today",e):[],[t,e]),l=reactExports.useMemo(()=>t?.sales?processProductAnalytics(t.sales,"week",e):[],[t,e]),c=reactExports.useMemo(()=>t?.sales?processProductAnalytics(t.sales,"month",e):[],[t,e]);return{todayProducts:a,weekProducts:l,monthProducts:c,loading:r,error:n?.message||null}},ProductAnalyticsSection=({activePeriod:e,selectedDate:t})=>{const{todayProducts:r,weekProducts:n,monthProducts:a,loading:l,error:c}=useProductAnalytics(t),[d,x]=reactExports.useState(e??"today");reactExports.useEffect(()=>{e&&x(e)},[e]);const f=_=>{switch(_){case"today":return r;case"week":return n;case"month":return a}},h=_=>{switch(_){case"today":if(t){const E=new Date;return t.toDateString()===E.toDateString()?"Today":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}return"Today";case"week":return"This Week";case"month":return"This Month"}},g=["today","week","month"],y=f(d);return l?jsxRuntimeExports.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db"},children:[jsxRuntimeExports.jsx("style",{children:"@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}} .skeleton{background-image:linear-gradient(90deg,#e5e7eb 0px,#f3f4f6 40px,#e5e7eb 80px);background-size:600px 100%;animation:shimmer 1.2s infinite linear;border-radius:8px}"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[jsxRuntimeExports.jsx("div",{className:"skeleton",style:{width:"40px",height:"40px"}}),jsxRuntimeExports.jsx("div",{className:"skeleton",style:{width:"160px",height:"18px"}})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[jsxRuntimeExports.jsx("div",{className:"skeleton",style:{width:"80px",height:"28px"}}),jsxRuntimeExports.jsx("div",{className:"skeleton",style:{width:"100px",height:"28px"}}),jsxRuntimeExports.jsx("div",{className:"skeleton",style:{width:"100px",height:"28px"}})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Array.from({length:5}).map((_,E)=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",border:"1px solid rgba(125,141,134,0.1)",borderRadius:"8px"},children:[jsxRuntimeExports.jsx("div",{className:"skeleton",style:{width:"32px",height:"32px"}}),jsxRuntimeExports.jsx("div",{className:"skeleton",style:{width:"40px",height:"40px"}}),jsxRuntimeExports.jsxs("div",{style:{flex:1},children:[jsxRuntimeExports.jsx("div",{className:"skeleton",style:{width:"160px",height:"12px",marginBottom:"6px"}}),jsxRuntimeExports.jsx("div",{className:"skeleton",style:{width:"100px",height:"10px"}})]}),jsxRuntimeExports.jsx("div",{className:"skeleton",style:{width:"70px",height:"14px"}})]},E))})]}):c?jsxRuntimeExports.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),jsxRuntimeExports.jsx("p",{style:{margin:0,fontSize:"14px"},children:c})]})}):jsxRuntimeExports.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#bca88d",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"18px",color:"#3e3f29"}})}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"20px",fontWeight:600,color:"#3e3f29",margin:0},children:"Top Products"})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:g.map(_=>jsxRuntimeExports.jsxs("button",{onClick:()=>x(_),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:d===_?"#7d8d86":"#ffffff",color:d===_?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:[jsxRuntimeExports.jsx("i",{className:`fa-solid ${_==="today"?"fa-calendar-day":_==="week"?"fa-calendar-week":"fa-calendar"}`,style:{fontSize:"12px",marginRight:6}}),h(_)]},_))}),y.length===0?jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",color:"#7d8d86",padding:"16px"},children:["No products for ",h(d)]}):jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:y.slice(0,3).map((_,E)=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"white",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.1)"},children:[jsxRuntimeExports.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:E===0?"#fbbf24":E===1?"#e5e7eb":E===2?"#f59e0b":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:E===1?"#6b7280":"#3e3f29",fontSize:"12px",fontWeight:700},children:E===0?jsxRuntimeExports.jsx("i",{className:"fa-solid fa-crown",style:{fontSize:14}}):E+1}),jsxRuntimeExports.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"#f9fafb",border:"1px solid #e5e7eb",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:_.image_url?jsxRuntimeExports.jsx("img",{src:_.image_url,alt:_.product_name,style:{width:"100%",height:"100%",objectFit:"cover"}}):jsxRuntimeExports.jsx("i",{className:"fa-solid fa-box",style:{color:"#7d8d86"}})}),jsxRuntimeExports.jsxs("div",{style:{flex:1,minWidth:0},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:14,fontWeight:600,color:"#3e3f29",margin:"0 0 2px 0"},children:_.product_name}),jsxRuntimeExports.jsxs("p",{style:{fontSize:12,color:"#7d8d86",margin:0},children:[_.quantity_sold," sold"]})]}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"right"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:14,fontWeight:600,color:"#10b981",margin:0},children:formatCurrency(_.total_sales)}),E===0&&jsxRuntimeExports.jsx("p",{style:{fontSize:10,color:"#d97706",margin:"2px 0 0 0",fontWeight:500},children:"TOP SELLER"})]})]},_.product_id))})]})},convertToBusinessTimezone=(e,t="UTC")=>{try{return new Date(e.toLocaleString("en-US",{timeZone:t}))}catch{return console.warn(`Invalid timezone: ${t}, falling back to UTC`),new Date(e.toLocaleString("en-US",{timeZone:"UTC"}))}},getBusinessHoursRange=(e="9:00 AM - 6:00 PM")=>{try{if(!e||e.trim()==="")return{startMinutes:540,endMinutes:1080};const t=[/(\d{1,2}):(\d{2})\s*(AM|PM)\s*-\s*(\d{1,2}):(\d{2})\s*(AM|PM)/i,/(\d{1,2})\s*(AM|PM)\s*-\s*(\d{1,2})\s*(AM|PM)/i,/(\d{1,2}):(\d{2})\s*-\s*(\d{1,2}):(\d{2})/,/(\d{1,2})\s*-\s*(\d{1,2})/,/(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun|Weekdays?|Daily)[\s\-,]*(\d{1,2}):?(\d{0,2})\s*(AM|PM)?[\s\-,]*(\d{1,2}):?(\d{0,2})\s*(AM|PM)?/i];for(const r of t){const n=e.match(r);if(n){const a=(d,x="0",f="")=>{let h=parseInt(d);const g=parseInt(x||"0");return f.toUpperCase()==="PM"&&h!==12&&(h+=12),f.toUpperCase()==="AM"&&h===12&&(h=0),!f&&h>12||!f&&h<=12&&h<6&&(h+=12),h*60+g};let l,c;if(r===t[0]){const[,d,x,f,h,g,y]=n;l=a(d,x,f),c=a(h,g,y)}else if(r===t[1]){const[,d,x,f,h]=n;l=a(d,"0",x),c=a(f,"0",h)}else if(r===t[2]){const[,d,x,f,h]=n;l=a(d,x),c=a(f,h)}else if(r===t[3]){const[,d,x]=n;l=a(d,"0"),c=a(x,"0")}else if(r===t[4]){const[,d,x,f,h,g,y]=n;l=a(d,x||"0",f),c=a(h,g||"0",y)}else l=540,c=1080;if(l>=0&&c<=1440&&l<c)return{startMinutes:l,endMinutes:c}}}console.warn(`Could not parse business hours format: "${e}". Using default hours.`)}catch(t){console.warn(`Error parsing business hours: ${e}`,t)}return{startMinutes:540,endMinutes:1080}},getDateRange=(e,t="UTC",r)=>{const n=convertToBusinessTimezone(r||new Date,t),a=new Date(n.getFullYear(),n.getMonth(),n.getDate());switch(e){case"today":return{start:a,end:new Date(a.getTime()+1440*60*1e3)};case"week":const l=new Date(a);return l.setDate(a.getDate()-a.getDay()),{start:l,end:new Date(l.getTime()+10080*60*1e3)};case"month":const c=new Date(a.getFullYear(),a.getMonth(),1),d=new Date(a.getFullYear(),a.getMonth()+1,1);return{start:c,end:d};default:return{start:a,end:a}}},processWeeklyData=(e,t,r="UTC",n)=>{const{start:a,end:l}=getDateRange("week",r,n),c={};for(let d=0;d<7;d++){const f=new Date(a.getTime()+d*24*60*60*1e3).toISOString().split("T")[0];c[f]={totalSales:0,transactionCount:0}}return e.forEach(d=>{const f=convertToBusinessTimezone(new Date(d.datetime),r).toISOString().split("T")[0];c[f]&&(c[f].totalSales+=parseFloat(d.total_amount)||0,c[f].transactionCount+=1)}),t.forEach(d=>{const f=convertToBusinessTimezone(new Date(d.date_time),r).toISOString().split("T")[0];c[f]&&(c[f].totalSales+=parseFloat(d.total_amount)||0,c[f].transactionCount+=1)}),Object.entries(c).map(([d,x])=>({day:new Date(d).toLocaleDateString("en-US",{weekday:"short"}),date:d,totalSales:x.totalSales,transactionCount:x.transactionCount,averageTransaction:x.transactionCount>0?x.totalSales/x.transactionCount:0}))},processHourlyData=(e,t,r="UTC",n="9:00 AM - 6:00 PM",a)=>{const l={},{startMinutes:c,endMinutes:d}=getBusinessHoursRange(n),x=a?e.filter(y=>{const _=convertToBusinessTimezone(new Date(y.datetime),r),E=convertToBusinessTimezone(a,r);return _.toDateString()===E.toDateString()}):e,f=a?t.filter(y=>{const _=convertToBusinessTimezone(new Date(y.date_time),r),E=convertToBusinessTimezone(a,r);return _.toDateString()===E.toDateString()}):t,h=Math.floor(c/60),g=Math.floor(d/60);for(let y=h;y<=g;y++)l[y]={totalSales:0,transactionCount:0};return x.forEach(y=>{const _=convertToBusinessTimezone(new Date(y.datetime),r),E=_.getHours(),b=_.getMinutes(),v=E*60+b;v>=c&&v<=d&&(l[E].totalSales+=parseFloat(y.total_amount)||0,l[E].transactionCount+=1)}),f.forEach(y=>{const _=convertToBusinessTimezone(new Date(y.date_time),r),E=_.getHours(),b=_.getMinutes(),v=E*60+b;v>=c&&v<=d&&(l[E].totalSales+=parseFloat(y.total_amount)||0,l[E].transactionCount+=1)}),Object.entries(l).map(([y,_])=>({hour:parseInt(y),hourLabel:`${y}:00`,totalSales:_.totalSales,transactionCount:_.transactionCount})).sort((y,_)=>y.hour-_.hour)},processMonthlyData=(e,t,r="UTC",n)=>{const{start:a,end:l}=getDateRange("month",r,n),c={},d=new Date(a);for(;d<l;){const x=d.toISOString().split("T")[0];c[x]={totalSales:0,transactionCount:0},d.setDate(d.getDate()+1)}return e.forEach(x=>{const h=convertToBusinessTimezone(new Date(x.datetime),r).toISOString().split("T")[0];c[h]&&(c[h].totalSales+=parseFloat(x.total_amount)||0,c[h].transactionCount+=1)}),t.forEach(x=>{const h=convertToBusinessTimezone(new Date(x.date_time),r).toISOString().split("T")[0];c[h]&&(c[h].totalSales+=parseFloat(x.total_amount)||0,c[h].transactionCount+=1)}),Object.entries(c).map(([x,f])=>({day:new Date(x).toLocaleDateString("en-US",{day:"numeric"}),date:x,totalSales:f.totalSales,transactionCount:f.transactionCount,averageTransaction:f.transactionCount>0?f.totalSales/f.transactionCount:0}))},useSalesAnalytics=(e,t=0,r=0)=>{const{data:n,isLoading:a,error:l}=useSalesData(),{currentBusiness:c}=useBusiness(),d=c?.timezone||"UTC",x=c?.business_hours||"9:00 AM - 6:00 PM",f=reactExports.useMemo(()=>{if(!e)return;const E=new Date,b=new Date(E);b.setDate(E.getDate()-E.getDay());const v=new Date(b);return v.setDate(b.getDate()+t*7),v},[e,t]),h=reactExports.useMemo(()=>{if(!e)return;const E=new Date;return new Date(E.getFullYear(),E.getMonth()+r,1)},[e,r]),g=reactExports.useMemo(()=>n?processWeeklyData(n.sales,n.sideBusinessSales,d,f):[],[n,d,f]),y=reactExports.useMemo(()=>n?processHourlyData(n.sales,n.sideBusinessSales,d,x,e):[],[n,d,x,e]),_=reactExports.useMemo(()=>n?processMonthlyData(n.sales,n.sideBusinessSales,d,h):[],[n,d,h]);return{weeklyData:g,hourlyData:y,monthlyData:_,loading:a,error:l?.message||null,businessTimezone:d,businessHours:x,refreshHourlyData:()=>{},refreshWeeklyData:()=>{},refreshMonthlyData:()=>{}}},SalesChart=({selectedDate:e,activePeriod:t})=>{const[r,n]=reactExports.useState("weekly"),[a,l]=reactExports.useState(new Date().toISOString().split("T")[0]),[c,d]=reactExports.useState(0),[x,f]=reactExports.useState(0),{weeklyData:h,hourlyData:g,monthlyData:y,loading:_,error:E,businessHours:b}=useSalesAnalytics(e,c,x),{currentBusiness:v}=useBusiness(),[R,A]=reactExports.useState({visible:!1,x:0,y:0,data:null}),C=z=>{l(z)};reactExports.useEffect(()=>{if(!e)return;const re=(Ae=>`${Ae.getFullYear()}-${String(Ae.getMonth()+1).padStart(2,"0")}-${String(Ae.getDate()).padStart(2,"0")}`)(e);l(re);const T=Ae=>{const ye=new Date(Ae);return ye.setHours(0,0,0,0),ye.setDate(ye.getDate()-ye.getDay()),ye},J=T(e),B=new Date;B.setHours(0,0,0,0);const j=T(B),M=J.getTime()-j.getTime(),U=Math.round(M/(1e3*60*60*24)),K=Math.round(U/7);d(K);const Le=new Date,ve=(e.getFullYear()-Le.getFullYear())*12+(e.getMonth()-Le.getMonth());f(ve)},[e]),reactExports.useEffect(()=>{t&&n(t==="today"?"hourly":t==="week"?"weekly":"monthly")},[t]);const L=()=>{const z=c-1;d(z)},I=()=>{const z=c+1;d(z)},ae=()=>{d(0)},D=()=>{const z=new Date,re=z.getDay(),T=new Date(z);T.setDate(z.getDate()-re+c*7);const J=new Date(T);J.setDate(T.getDate()+6);const B=j=>j.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${B(T)} - ${B(J)}`},ee=(z,re)=>{A({visible:!0,x:z.clientX,y:z.clientY,data:re})},Y=()=>{A({visible:!1,x:0,y:0,data:null})},le=z=>{const re=Math.max(...z.map(T=>T.totalSales));return re===0?1:Math.ceil(re*1.1)},te=(z,re)=>z===0?0:Math.max(z/re*180,4),oe=(z,re=!0)=>{if(re){const T=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316"];return T[z%T.length]}else{const T=Math.min(z/9,1),J=Math.floor(59+180*T),B=Math.floor(130+-62*T),j=Math.floor(246+-178*T);return`rgb(${J}, ${B}, ${j})`}};if(_)return jsxRuntimeExports.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading sales data..."]})});if(E)return jsxRuntimeExports.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),jsxRuntimeExports.jsx("p",{style:{margin:0,fontSize:"14px"},children:E})]})});const Be=(z="9:00 AM - 6:00 PM")=>{try{const re=z.match(/(\d{1,2}):(\d{2})\s*(AM|PM)\s*-\s*(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(re){const[,T,J,B,j,M,U]=re,K=(Ae,ye,V)=>{let be=parseInt(Ae);const Ne=parseInt(ye);return V.toUpperCase()==="PM"&&be!==12&&(be+=12),V.toUpperCase()==="AM"&&be===12&&(be=0),be},Le=K(T,J,B),ve=K(j,M,U);return{startHour:Le,endHour:ve}}}catch{console.warn(`Could not parse business hours: ${z}`)}return{startHour:9,endHour:18}},Pe=(()=>{if(r!=="hourly")return g;const{startHour:z,endHour:re}=Be(b);return g.filter(T=>T.hour>=z&&T.hour<=re)})(),De=r==="weekly"?h:r==="monthly"?y:Pe,X=De.length>0?le(De):100,Se=r==="monthly"?Math.ceil(De.length/12):1;return De.length===0&&!_&&!E?jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"5px solid #000000 !important",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",margin:"0",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",textAlign:"center",minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(v?.logo_url,jsxRuntimeExports.jsx("img",{src:v?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:v?.business_name||v?.name||"Business Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:z=>{const re=z.target;re.style.display="none";const T=re.parentElement;T&&(T.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(v?.business_name||v?.name)&&jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:v?.business_name||v?.name})]})]}),jsxRuntimeExports.jsxs("div",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"16px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),jsxRuntimeExports.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"500"},children:"No sales data available"}),jsxRuntimeExports.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.8},children:r==="weekly"?"No sales recorded for this week":"No sales recorded for this date"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-100%) scale(0.9); }
          to { opacity: 1; transform: translateY(-100%) scale(1); }
        }
      `}),jsxRuntimeExports.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",maxWidth:"1000px",margin:"0 auto",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(v?.logo_url,jsxRuntimeExports.jsx("img",{src:v?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:v?.business_name||v?.name||"Business Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:z=>{const re=z.target;re.style.display="none";const T=re.parentElement;T&&(T.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(v?.business_name||v?.name)&&jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:v?.business_name||v?.name})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",background:"#f9fafb",borderRadius:"8px",padding:"4px",gap:"4px",marginBottom:"24px",maxWidth:"300px",border:"2px solid #d1d5db"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>n("weekly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:r==="weekly"?"#7d8d86":"transparent",color:r==="weekly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:z=>{r!=="weekly"&&(z.currentTarget.style.background="#e5e7eb",z.currentTarget.style.color="#3e3f29")},onMouseLeave:z=>{r!=="weekly"&&(z.currentTarget.style.background="transparent",z.currentTarget.style.color="#7d8d86")},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-calendar-week",style:{fontSize:"12px"}}),"Weekly"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("hourly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:r==="hourly"?"#7d8d86":"transparent",color:r==="hourly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:z=>{r!=="hourly"&&(z.currentTarget.style.background="#e5e7eb",z.currentTarget.style.color="#3e3f29")},onMouseLeave:z=>{r!=="hourly"&&(z.currentTarget.style.background="transparent",z.currentTarget.style.color="#7d8d86")},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"12px"}}),"Hourly"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("monthly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:r==="monthly"?"#7d8d86":"transparent",color:r==="monthly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:z=>{r!=="monthly"&&(z.currentTarget.style.background="#e5e7eb",z.currentTarget.style.color="#3e3f29")},onMouseLeave:z=>{r!=="monthly"&&(z.currentTarget.style.background="transparent",z.currentTarget.style.color="#7d8d86")},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"12px"}}),"Monthly"]})]}),r==="weekly"&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[jsxRuntimeExports.jsxs("button",{onClick:L,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:z=>{z.currentTarget.style.background="#f3f4f6",z.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:z=>{z.currentTarget.style.background="#ffffff",z.currentTarget.style.borderColor="#d1d5db"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Week"]}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",marginBottom:"2px"},children:D()}),jsxRuntimeExports.jsx("button",{onClick:ae,style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline",transition:"color 0.2s ease"},onMouseEnter:z=>{z.currentTarget.style.color="#3e3f29"},onMouseLeave:z=>{z.currentTarget.style.color="#7d8d86"},children:c===0?"Current Week":"Go to Current Week"})]}),jsxRuntimeExports.jsxs("button",{onClick:I,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:z=>{z.currentTarget.style.background="#f3f4f6",z.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:z=>{z.currentTarget.style.background="#ffffff",z.currentTarget.style.borderColor="#d1d5db"},children:["Next Week",jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),r==="monthly"&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{const z=x-1;f(z)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Month"]}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#3e3f29",marginBottom:"2px"},children:new Date(new Date().getFullYear(),new Date().getMonth()+x,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),jsxRuntimeExports.jsx("button",{onClick:()=>{f(0)},style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline"},children:x===0?"Current Month":"Go to Current Month"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{const z=x+1;f(z)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:["Next Month",jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),r==="hourly"&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px",padding:"12px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29"},children:"Select Date:"}),b&&jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",color:"#7d8d86",background:"#e5e7eb",padding:"4px 8px",borderRadius:"4px",fontWeight:"500"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-clock",style:{marginRight:"4px"}}),"Business Hours: ",b]})]}),jsxRuntimeExports.jsx("input",{type:"date",value:a,onChange:z=>C(z.target.value),style:{padding:"8px 12px",border:"2px solid #d1d5db",borderRadius:"6px",fontSize:"14px",color:"#3e3f29",background:"white",outline:"none"}})]}),jsxRuntimeExports.jsxs("div",{style:{width:"100%",height:"400px",background:"white",borderRadius:"12px",padding:"40px",border:"2px solid #d1d5db",position:"relative",overflow:"visible",margin:"0",boxSizing:"border-box",fontFamily:"inherit",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"15px",top:"40px",bottom:"30px",fontSize:"11px",color:"#9ca3af",fontWeight:"500",zIndex:1,padding:"10px 0",height:"260px"},children:[100,75,50,25,0].map((z,re)=>jsxRuntimeExports.jsx("span",{style:{position:"absolute",textAlign:"right",minWidth:"20px",top:`${re*25}%`,transform:"translateY(-50%)"},children:formatCurrencyCompact(X*z/100,{},v?.currency)},z))}),jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",flex:1,gap:r==="weekly"?"20px":r==="monthly"?"6px":"12px",marginBottom:"30px",padding:"0 40px 0 70px",position:"relative",zIndex:2,overflow:"visible",width:"100%",boxSizing:"border-box",minHeight:"260px"},children:De.map((z,re)=>{const T=te(z.totalSales,X),J=oe(re,r!=="hourly");return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",flex:1,maxWidth:r==="weekly"?"100px":r==="monthly"?"24px":"80px",overflow:"visible",boxSizing:"border-box",height:"100%"},children:[jsxRuntimeExports.jsx("div",{style:{width:"100%",maxWidth:r==="weekly"?"80px":r==="monthly"?"16px":"60px",height:`${T}px`,background:J,borderRadius:"8px 8px 0 0",marginBottom:"12px",position:"relative",transition:"all 0.3s ease",cursor:"pointer",boxSizing:"border-box",display:"block"},onMouseEnter:B=>{B.currentTarget.style.transform="scaleY(1.05)",B.currentTarget.style.opacity="0.8",ee(B,z)},onMouseLeave:B=>{B.currentTarget.style.transform="scaleY(1)",B.currentTarget.style.opacity="1",Y()}}),jsxRuntimeExports.jsx("span",{style:{fontSize:r==="weekly"?"13px":"11px",fontWeight:"500",color:"#7d8d86",textAlign:"center",display:"block",margin:"0",padding:"0"},children:r==="weekly"?z.day:r==="monthly"?re%Se===0?z.day:"":z.hourLabel})]},re)})})]}),R.visible&&R.data&&jsxRuntimeExports.jsxs("div",{style:{position:"fixed",left:R.x+10,top:R.y-10,background:"rgba(31, 41, 55, 0.95)",color:"#ffffff",padding:"12px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",pointerEvents:"none",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",zIndex:9999,backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",transform:"translateY(-100%)",animation:"fadeIn 0.2s ease-out"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:r==="weekly"?oe(0,!0):oe(0,!1)}}),jsxRuntimeExports.jsx("span",{style:{fontWeight:"600",fontSize:"13px"},children:r==="weekly"?R.data.day:R.data.hourLabel})]}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginBottom:"2px"},children:[R.data.transactionCount," transaction",R.data.transactionCount!==1?"s":""]}),jsxRuntimeExports.jsx("div",{style:{fontWeight:"600",fontSize:"14px",color:"#60a5fa"},children:formatCurrency(R.data.totalSales)})]})]}),jsxRuntimeExports.jsx("div",{style:{width:"100%",maxWidth:"1000px",margin:"12px auto 0 auto",display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",flexWrap:"wrap",background:"#3e3f29",borderRadius:"8px",padding:"8px 12px",border:"2px solid #d1d5db"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:"#7d8d86"}}),jsxRuntimeExports.jsx("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:500},children:r==="weekly"?"Daily Sales":r==="monthly"?"Daily Sales (Month)":"Hourly Sales"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"12px",color:"#f1f0e4"}}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:500},children:["Max: ",formatCurrency(X,{},v?.currency)]})]})]})})]})},Dashboard=()=>{const e=useNavigate(),{businessId:t,businessLoading:r}=useBusinessId(),{selectedBranchId:n}=useBranch(),{data:a}=useSalesData(),{data:l}=useProductsData(),{user:c,switchUser:d}=useAuth(),{currentBusiness:x}=useBusiness(),[f,h]=reactExports.useState({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),[g,y]=reactExports.useState(!0),[_,E]=reactExports.useState(null),[b,v]=reactExports.useState([]),[R,A]=reactExports.useState(!1),[C,L]=reactExports.useState(!1),[I,ae]=reactExports.useState(new Date),[D,ee]=reactExports.useState(new Date),[Y,le]=reactExports.useState([]),[te,oe]=reactExports.useState("today"),[Be,Pe]=reactExports.useState([]),[De,X]=reactExports.useState(0),[Se,z]=reactExports.useState(0);reactExports.useEffect(()=>{if(a&&l&&!r&&t!=null){const pe=new Date;pe.setHours(0,0,0,0);const ze=new Date(pe);ze.setDate(ze.getDate()+1);const Ye=a.sales.filter(it=>{const Je=new Date(it.datetime);return Je>=pe&&Je<ze}),lt=a.sideBusinessSales.filter(it=>{const Je=new Date(it.date_time);return Je>=pe&&Je<ze}),Ke=Ye.reduce((it,Je)=>it+(parseFloat(Je.total_amount.toString())||0),0),nt=lt.reduce((it,Je)=>it+(parseFloat(Je.total_amount.toString())||0),0),mt=l.products.filter(it=>it.stock_quantity<=it.reorder_level).length;h({totalProducts:l.products.length,totalSales:a.sales.length,totalCustomers:0,todayRevenue:Ke,todaySideBusinessRevenue:nt,todayTransactions:Ye.length,lowStockItems:mt}),z(lt.length),y(!1)}else t==null&&!r&&(h({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),z(0),y(!1))},[t,r,a?.sales?.length,l?.products?.length]),reactExports.useEffect(()=>{if(a&&l&&!r&&t!=null&&f.todayTransactions===0){const pe=new Date;I.toDateString()===pe.toDateString()&&te==="today"&&re()}},[te,I,t,r,a,l,f.todayTransactions]),reactExports.useEffect(()=>{t&&!r&&(te==="today"?T(I):J(te,I))},[t,r,I,te,n]);const re=async()=>{if(t==null){h({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),y(!1);return}try{y(!0);let pe=supabase.from("sales").select("sale_id",{count:"exact",head:!0}).eq("business_id",t).limit(1e3);n&&(pe=pe.eq("branch_id",n));const[ze,Ye,lt]=await Promise.all([supabase.from("products").select("product_id",{count:"exact",head:!0}).eq("business_id",t).limit(1e3),pe,supabase.from("customers").select("customer_id",{count:"exact",head:!0}).eq("business_id",t).limit(1e3)]),Ke=ut=>`${ut.getFullYear()}-${String(ut.getMonth()+1).padStart(2,"0")}-${String(ut.getDate()).padStart(2,"0")}`,nt=Ke(new Date);let mt=supabase.from("sales").select("total_amount",{count:"exact"}).eq("business_id",t).gte("datetime",`${nt}T00:00:00`).lt("datetime",`${nt}T23:59:59`);n&&(mt=mt.eq("branch_id",n));const{data:it,count:Je}=await mt,bt=it?.reduce((ut,Q)=>ut+(Q.total_amount||0),0)||0,ne=new Date;ne.setDate(ne.getDate()-1);const Ue=Ke(ne);let Qe=supabase.from("sales").select("sale_id",{count:"exact",head:!0}).eq("business_id",t).gte("datetime",`${Ue}T00:00:00`).lt("datetime",`${Ue}T23:59:59`);n&&(Qe=Qe.eq("branch_id",n));const{count:gt}=await Qe;X(gt||0);let Nt=supabase.from("side_business_sales").select(`
          total_amount,
          side_business_items!inner(
            side_businesses!inner(
              business_id,
              name,
              image_url
            )
          )
        `,{count:"exact"}).eq("side_business_items.side_businesses.parent_shop_id",t).gte("date_time",`${nt}T00:00:00`).lt("date_time",`${nt}T23:59:59`);n&&(Nt=Nt.eq("branch_id",n));const{data:It,count:Ot}=await Nt,Wt=It?.reduce((ut,Q)=>ut+(Q.total_amount||0),0)||0;z(Ot||0);const Fe=new Map;It&&It.forEach(ut=>{const Q=ut.side_business_items?.side_businesses;if(Q){const ge=Q.business_id,rt=Fe.get(ge);rt?rt.total_amount+=ut.total_amount||0:Fe.set(ge,{business_id:ge,name:Q.name,image_url:Q.image_url,total_amount:ut.total_amount||0})}}),Pe(Array.from(Fe.values()));const{count:tt}=await supabase.from("products").select("product_id",{count:"exact",head:!0}).lt("stock_quantity",10);h({totalProducts:ze.count||0,totalSales:Ye.count||0,totalCustomers:lt.count||0,todayRevenue:bt,todaySideBusinessRevenue:Wt,todayTransactions:Je||0,lowStockItems:tt||0})}catch(pe){console.error("Error fetching dashboard stats:",pe);const ze=pe instanceof Error?pe.message:"Unknown error";alert(`Dashboard loading error: ${ze}. Please check your database permissions.`)}finally{y(!1)}},T=async pe=>{if(t!=null)try{const lt=(Je=>`${Je.getFullYear()}-${String(Je.getMonth()+1).padStart(2,"0")}-${String(Je.getDate()).padStart(2,"0")}`)(pe||I);let Ke=supabase.from("sales").select(`
          sale_id,
          datetime,
          total_amount,
          payment_method,
          partial_payment,
          partial_amount,
          remaining_amount,
          partial_notes,
          sale_items (quantity)
        `).eq("business_id",t).gte("datetime",`${lt}T00:00:00`).lt("datetime",`${lt}T23:59:59`).order("datetime",{ascending:!1}).limit(5);n&&(Ke=Ke.eq("branch_id",n));const{data:nt,error:mt}=await Ke;if(mt){console.error("Error fetching recent transactions:",mt);return}const it=(nt||[]).map(Je=>({sale_id:Je.sale_id,datetime:Je.datetime,total_amount:Je.total_amount,payment_method:Je.payment_method,items_count:Je.sale_items?.reduce((bt,ne)=>bt+ne.quantity,0)||0,status:"completed",partial_payment:Je.partial_payment,partial_amount:Je.partial_amount,remaining_amount:Je.remaining_amount,partial_notes:Je.partial_notes}));le(it)}catch(ze){console.error("Error in fetchRecentTransactions:",ze)}},J=async(pe,ze)=>{if(t!=null)try{const{start:Ye,end:lt}=Ne(pe,ze);let Ke=supabase.from("sales").select(`
          sale_id,
          datetime,
          total_amount,
          payment_method,
          partial_payment,
          partial_amount,
          remaining_amount,
          partial_notes,
          sale_items (quantity)
        `).eq("business_id",t).gte("datetime",Ye).lt("datetime",lt).order("datetime",{ascending:!1}).limit(5);n&&(Ke=Ke.eq("branch_id",n));const{data:nt,error:mt}=await Ke;if(mt){console.error("Error fetching recent transactions for period:",mt);return}const it=(nt||[]).map(Je=>({sale_id:Je.sale_id,datetime:Je.datetime,total_amount:Je.total_amount,payment_method:Je.payment_method,items_count:Je.sale_items?.reduce((bt,ne)=>bt+ne.quantity,0)||0,status:"completed",partial_payment:Je.partial_payment,partial_amount:Je.partial_amount,remaining_amount:Je.remaining_amount,partial_notes:Je.partial_notes}));le(it)}catch(Ye){console.error("Error in fetchRecentTransactionsForPeriod:",Ye)}},B=async pe=>{try{A(!0);const ze=new Date(pe);E(ze),v([]);const lt=(it=>`${it.getFullYear()}-${String(it.getMonth()+1).padStart(2,"0")}-${String(it.getDate()).padStart(2,"0")}`)(ze),{data:Ke,error:nt}=await supabase.from("sales").select(`
          sale_id,
          datetime,
          total_amount,
          payment_method,
          sale_items (quantity)
        `).gte("datetime",`${lt}T00:00:00`).lt("datetime",`${lt}T23:59:59`).order("datetime",{ascending:!1});if(nt){console.error("Error fetching transactions:",nt);return}const mt=(Ke||[]).map(it=>({transaction_id:`TXN-${it.sale_id.toString().padStart(6,"0")}`,datetime:it.datetime,total_amount:it.total_amount,payment_method:it.payment_method,items_count:it.sale_items?.reduce((Je,bt)=>Je+bt.quantity,0)||0}));v(mt)}catch(ze){console.error("Error fetching transactions:",ze)}finally{A(!1)}},j=()=>{E(null),v([])},M=pe=>{j(),e(`/transaction/${pe}`)},U=pe=>{ae(pe),L(!1),K(pe)},K=async pe=>{try{y(!0);const ze=ut=>`${ut.getFullYear()}-${String(ut.getMonth()+1).padStart(2,"0")}-${String(ut.getDate()).padStart(2,"0")}`,Ye=ze(pe);let lt=supabase.from("sales").select("sale_id",{count:"exact",head:!0}).eq("business_id",t).gte("datetime",`${Ye}T00:00:00`).lt("datetime",`${Ye}T23:59:59`);n&&(lt=lt.eq("branch_id",n));const[Ke,nt,mt]=await Promise.all([supabase.from("products").select("product_id",{count:"exact",head:!0}).eq("business_id",t),lt,supabase.from("customers").select("customer_id",{count:"exact",head:!0}).eq("business_id",t)]);let it=supabase.from("sales").select("total_amount",{count:"exact"}).eq("business_id",t).gte("datetime",`${Ye}T00:00:00`).lt("datetime",`${Ye}T23:59:59`);n&&(it=it.eq("branch_id",n));const{data:Je,count:bt}=await it,ne=Je?.reduce((ut,Q)=>ut+(Q.total_amount||0),0)||0,Ue=new Date(pe);Ue.setDate(Ue.getDate()-1);const Qe=ze(Ue);let gt=supabase.from("sales").select("sale_id",{count:"exact",head:!0}).eq("business_id",t).gte("datetime",`${Qe}T00:00:00`).lt("datetime",`${Qe}T23:59:59`);n&&(gt=gt.eq("branch_id",n));const{count:Nt}=await gt;X(Nt||0);const{data:It,count:Ot}=await supabase.from("side_business_sales").select(`
          total_amount,
          side_business_items!inner(
            side_businesses!inner(
              business_id,
              name,
              image_url
            )
          )
        `,{count:"exact"}).gte("date_time",`${Ye}T00:00:00`).lt("date_time",`${Ye}T23:59:59`),Wt=It?.reduce((ut,Q)=>ut+(Q.total_amount||0),0)||0;z(Ot||0);const Fe=new Map;It&&It.forEach(ut=>{const Q=ut.side_business_items?.side_businesses;if(Q){const ge=Q.business_id,rt=Fe.get(ge);rt?rt.total_amount+=ut.total_amount||0:Fe.set(ge,{business_id:ge,name:Q.name,image_url:Q.image_url,total_amount:ut.total_amount||0})}}),Pe(Array.from(Fe.values()));const{count:tt}=await supabase.from("products").select("product_id",{count:"exact",head:!0}).lt("stock_quantity",10);h({totalProducts:Ke.count||0,totalSales:nt.count||0,totalCustomers:mt.count||0,todayRevenue:ne,todaySideBusinessRevenue:Wt,todayTransactions:bt||0,lowStockItems:tt||0}),z(Ot||0)}catch(ze){console.error("Error fetching dashboard stats for date:",ze)}finally{y(!1)}},Le=(pe,ze)=>{const Ye=new Date(pe,ze,1),lt=new Date(Ye);lt.setDate(lt.getDate()-Ye.getDay());const Ke=[],nt=new Date(lt);for(let mt=0;mt<42;mt++)Ke.push(new Date(nt)),nt.setDate(nt.getDate()+1);return Ke},ve=()=>{switch(te){case"today":const pe=new Date;return I.toDateString()===pe.toDateString()?"Today's Sales":`${I.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Sales`;case"week":return"This Week Sales";case"month":return"This Month Sales";default:return"Today's Sales"}},Ae=()=>{switch(te){case"today":const pe=new Date;return I.toDateString()===pe.toDateString()?"Today's Transactions":`${I.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Transactions`;case"week":return"This Week Transactions";case"month":return"This Month Transactions";default:return"Today's Transactions"}},ye=()=>{if(De===0)return f.todayTransactions>0?"+100%":"0%";const pe=(f.todayTransactions-De)/De*100;return`${pe>=0?"+":""}${pe.toFixed(0)}%`},V=()=>f.todayTransactions-Se,be=()=>{const pe=V(),ze=ye();return{text:`Products: ${pe} | Side Business: ${Se} (${ze} from yesterday)`,icon:"fa-solid fa-chart-pie"}},Ne=(pe,ze)=>{const Ye=lt=>`${lt.getFullYear()}-${String(lt.getMonth()+1).padStart(2,"0")}-${String(lt.getDate()).padStart(2,"0")}`;switch(pe){case"today":const lt=Ye(ze);return{start:`${lt}T00:00:00`,end:`${lt}T23:59:59`};case"week":const Ke=new Date(ze);Ke.setDate(ze.getDate()-ze.getDay()),Ke.setHours(0,0,0,0);const nt=new Date(Ke);return nt.setDate(Ke.getDate()+6),nt.setHours(23,59,59,999),{start:Ke.toISOString(),end:nt.toISOString()};case"month":const mt=new Date(ze.getFullYear(),ze.getMonth(),1);mt.setHours(0,0,0,0);const it=new Date(ze.getFullYear(),ze.getMonth()+1,0);return it.setHours(23,59,59,999),{start:mt.toISOString(),end:it.toISOString()};default:return{start:"",end:""}}},H=pe=>{const ze=new Date,Ye=pe.toDateString()===ze.toDateString(),lt=pe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return Ye?"Today's Transactions":`${lt} Transactions`},Te=pe=>{const ze=new Date,Ye=pe.toDateString()===ze.toDateString(),lt=pe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return Ye?"No transactions found for today":`No transactions found for ${lt}`},se=(pe,ze,Ye=150)=>{const lt=pe+ze;if(lt===0)return null;const nt=pe/lt*100/100*360,mt=(bt,ne,Ue)=>{const Qe=it(Ye/2,Ye/2,Ue,ne),gt=it(Ye/2,Ye/2,Ue,bt),Nt=ne-bt<=180?"0":"1";return`M ${Ye/2} ${Ye/2} L ${Qe.x} ${Qe.y} A ${Ue} ${Ue} 0 ${Nt} 0 ${gt.x} ${gt.y} Z`},it=(bt,ne,Ue,Qe)=>{const gt=(Qe-90)*Math.PI/180;return{x:bt+Ue*Math.cos(gt),y:ne+Ue*Math.sin(gt)}},Je=Ye*.4;return jsxRuntimeExports.jsxs("svg",{width:Ye,height:Ye,style:{marginRight:"16px"},children:[pe>0&&jsxRuntimeExports.jsx("path",{d:mt(0,nt,Je),fill:"#dc2626",stroke:"#ffffff",strokeWidth:"3"}),ze>0&&jsxRuntimeExports.jsx("path",{d:mt(nt,360,Je),fill:"#f59e0b",stroke:"#ffffff",strokeWidth:"3"})]})},pt=[{title:ve(),value:formatCurrency(f.todayRevenue+f.todaySideBusinessRevenue,{},x?.currency),change:`Products: ${formatCurrency(f.todayRevenue,{},x?.currency)} | Side Business: ${formatCurrency(f.todaySideBusinessRevenue,{},x?.currency)}`,changeColor:"#1a1a1a",icon:"fa-solid fa-euro-sign",bgColor:"#1a1a1a",iconColor:"#f1f0e4"},{title:Ae(),value:f.todayTransactions,change:be().text,changeIcon:be().icon,changeColor:"#bca88d",icon:"fa-solid fa-shopping-cart",bgColor:"#bca88d",iconColor:"#1a1a1a",pieChart:{productCount:V(),sideBusinessCount:Se}}];return jsxRuntimeExports.jsxs("div",{style:{padding:"0"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:"32px",position:"relative"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:0},children:jsxRuntimeExports.jsx(BranchSelector,{size:"md"})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[jsxRuntimeExports.jsxs("div",{onClick:()=>L(!0),style:{background:"#1a1a1a",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",transition:"all 0.2s ease",minWidth:"200px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),jsxRuntimeExports.jsx("span",{style:{color:"#bca88d"},children:I.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-down",style:{fontSize:"12px",color:"#bca88d",transition:"transform 0.2s ease"}})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"4px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>oe("today"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:te==="today"?"#7d8d86":"transparent",color:te==="today"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Today"}),jsxRuntimeExports.jsx("button",{onClick:()=>oe("week"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:te==="week"?"#7d8d86":"transparent",color:te==="week"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"This Week"}),jsxRuntimeExports.jsx("button",{onClick:()=>oe("month"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:te==="month"?"#7d8d86":"transparent",color:te==="month"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"This Month"})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"24px",marginBottom:"32px",minHeight:"140px"},children:[pt.map((pe,ze)=>jsxRuntimeExports.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",transition:"all 0.3s ease",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{color:"#1a1a1a",fontSize:"16px",fontWeight:"500",margin:"0 0 12px 0"},children:pe.title}),jsxRuntimeExports.jsx("p",{style:{fontSize:"36px",fontWeight:"bold",color:"#1a1a1a",margin:"0 0 8px 0",lineHeight:"1.1"},children:pe.value}),jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",fontSize:"14px",fontWeight:"500",color:pe.changeColor,margin:0},children:pe.pieChart?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[se(pe.pieChart.productCount,pe.pieChart.sideBusinessCount,120),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#dc2626"}}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a"},children:["Products: ",pe.pieChart.productCount]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#f59e0b"}}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a"},children:["Side Business: ",pe.pieChart.sideBusinessCount]})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[pe.changeIcon&&jsxRuntimeExports.jsx("i",{className:pe.changeIcon,style:{fontSize:"12px"}}),jsxRuntimeExports.jsx("span",{children:pe.change})]})}),ze===0&&Be.length>0&&jsxRuntimeExports.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:"12px",maxWidth:"100%"},children:Be.map(Ye=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",padding:"8px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",overflow:"hidden",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:Ye.image_url?jsxRuntimeExports.jsx("img",{src:Ye.image_url,alt:Ye.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:lt=>{const Ke=lt.target;Ke.style.display="none";const nt=Ke.parentElement;nt&&(nt.innerHTML='<i class="fa-solid fa-store" style="font-size: 18px; color: #7d8d86;"></i>')}}):jsxRuntimeExports.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"18px",color:"#7d8d86"}})}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"11px",color:"#7d8d86",fontWeight:"500",margin:"0 0 2px 0",lineHeight:"1.2"},children:Ye.name}),jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",color:"#1a1a1a",fontWeight:"600",margin:0},children:formatCurrency(Ye.total_amount,{},x?.currency)})]})]},Ye.business_id))})})]}),jsxRuntimeExports.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"14px",background:pe.bgColor,display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"flex-end",marginTop:"16px"},children:jsxRuntimeExports.jsx("i",{className:pe.icon,style:{fontSize:"24px",color:pe.iconColor}})})]})},ze)),jsxRuntimeExports.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:jsxRuntimeExports.jsx(LowStockSection,{})}),jsxRuntimeExports.jsx(ProductAnalyticsSection,{activePeriod:te,selectedDate:I})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"24px",marginBottom:"32px"},children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:jsxRuntimeExports.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"5px solid #000000 !important"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"18px",color:"#f1f0e4"}})}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:(()=>{switch(te){case"today":const pe=new Date;return I.toDateString()===pe.toDateString()?"Recent Transactions":`${I.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Transactions`;case"week":return"This Week Transactions";case"month":return"This Month Transactions";default:return"Recent Transactions"}})()})]}),jsxRuntimeExports.jsx("button",{onClick:()=>B(I),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"View All"})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Y.length>0?Y.map(pe=>jsxRuntimeExports.jsxs("div",{onClick:()=>e(`/transaction/TXN-${pe.sale_id.toString().padStart(6,"0")}`),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:pe.partial_payment?"#fef2f2":"white",borderRadius:"8px",border:pe.partial_payment?"1px solid #fecaca":"1px solid transparent",cursor:"pointer",transition:"all 0.2s ease"},children:[jsxRuntimeExports.jsxs("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:pe.partial_payment?"#f59e0b":pe.status==="completed"?"#10b981":"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[jsxRuntimeExports.jsx("i",{className:`fa-solid ${pe.partial_payment?"fa-exclamation":pe.status==="completed"?"fa-check":"fa-hourglass-half"}`,style:{fontSize:"12px",color:"white"}}),pe.partial_payment&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"8px",height:"8px",borderRadius:"50%",background:"#dc2626",border:"1px solid white"}})]}),jsxRuntimeExports.jsxs("div",{style:{flex:1},children:[jsxRuntimeExports.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 2px 0"},children:["#TXN-",pe.sale_id.toString().padStart(6,"0")]}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[pe.items_count," item",pe.items_count!==1?"s":""," | ",pe.payment_method,pe.partial_payment&&jsxRuntimeExports.jsx("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"8px"},children:" PARTIAL"})]})]}),jsxRuntimeExports.jsx("div",{style:{textAlign:"right"},children:pe.partial_payment?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981",margin:"0 0 2px 0"},children:formatCurrency(pe.partial_amount||0,{},x?.currency)}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"11px",color:"#6b7280",margin:"0 0 2px 0",fontWeight:"500"},children:["of ",formatCurrency((pe.partial_amount||0)+(pe.remaining_amount||0),{},x?.currency)]}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"10px",color:"#dc2626",margin:0,fontWeight:"600"},children:["OWES: ",formatCurrency(pe.remaining_amount||0,{},x?.currency)]})]}):jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:0},children:formatCurrency(pe.total_amount,{},x?.currency)})})]},pe.sale_id)):jsxRuntimeExports.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#1a1a1a",fontSize:"14px"},children:(()=>{switch(te){case"today":const pe=new Date;return I.toDateString()===pe.toDateString()?"No recent transactions":`No transactions on ${I.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`;case"week":return"No transactions this week";case"month":return"No transactions this month";default:return"No recent transactions"}})()})})]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(SalesChart,{selectedDate:I,activePeriod:te})})]}),_&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",margin:0},children:H(_)}),jsxRuntimeExports.jsx("button",{onClick:j,style:{background:"none",border:"none",fontSize:"24px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:""})]}),R?jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"40px"},children:jsxRuntimeExports.jsxs("div",{style:{fontSize:"16px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading transactions..."]})}):b.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:b.map((pe,ze)=>jsxRuntimeExports.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>M(pe.transaction_id),children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"16px"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"14px"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 4px 0"},children:pe.transaction_id}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[new Date(pe.datetime).toLocaleTimeString()," | ",pe.items_count," items | ",pe.payment_method]})]})]}),jsxRuntimeExports.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1a1a1a"},children:formatCurrency(pe.total_amount,{},x?.currency)})]},ze))}):jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#1a1a1a"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",margin:0},children:Te(_)})]})]})}),C&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:D.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>ee(new Date(D.getFullYear(),D.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left"})}),jsxRuntimeExports.jsx("button",{onClick:()=>ee(new Date(D.getFullYear(),D.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right"})}),jsxRuntimeExports.jsx("button",{onClick:()=>L(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:""})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(pe=>jsxRuntimeExports.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#1a1a1a",padding:"8px 4px"},children:pe},pe)),Le(D.getFullYear(),D.getMonth()).map((pe,ze)=>{const Ye=pe.getMonth()===D.getMonth(),lt=pe.toDateString()===new Date().toDateString(),Ke=pe.toDateString()===I.toDateString();return jsxRuntimeExports.jsx("button",{onClick:()=>U(pe),style:{background:Ke?"#1a1a1a":"transparent",color:Ke?"#f1f0e4":Ye?"#1a1a1a":"#bca88d",border:lt?"2px solid #1a1a1a":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:Ye?1:.5},children:pe.getDate()},ze)})]}),jsxRuntimeExports.jsx("div",{style:{textAlign:"center"},children:jsxRuntimeExports.jsx("button",{onClick:()=>U(new Date),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Today"})})]})})]})};async function uploadProductImage(e,t,r){if(console.log("?? Starting image upload for product:",t),console.log("?? File details:",{name:e.name,size:e.size,type:e.type}),r==null)return console.error("Cannot upload product image without an active business"),null;try{const n=`product-images/${t}.${e.name.split(".").pop()}`;console.log("?? Uploading to Supabase Storage:",n);const{error:a}=await supabase.storage.from("products").upload(n,e,{contentType:e.type,upsert:!0});if(a)return console.error("? Upload failed:",a),null;const{data:{publicUrl:l}}=supabase.storage.from("products").getPublicUrl(n);console.log("? Image uploaded successfully:",l),console.log("?? Updating database with public URL...");const{error:c}=await supabase.from("products").update({image_url:l}).eq("product_id",t).eq("business_id",r);return c?(console.error("? DB update failed:",c),null):(console.log("? Database updated with public URL"),l)}catch(n){return console.error("?? Unexpected error during upload:",n),null}}const Products=()=>{const{hasPermission:e}=useRole(),{user:t}=useAuth(),{businessId:r,businessLoading:n}=useBusinessId(),{selectedBranchId:a}=useBranch(),[l,c]=reactExports.useState([]),[d,x]=reactExports.useState(!0),[f,h]=reactExports.useState(null),[g,y]=reactExports.useState({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),[_,E]=reactExports.useState(null),[b,v]=reactExports.useState(!1),[R,A]=reactExports.useState(null),[C,L]=reactExports.useState(null),[I,ae]=reactExports.useState(!1),[D,ee]=reactExports.useState("daily"),[Y,le]=reactExports.useState(""),[te,oe]=reactExports.useState("all"),[Be,Pe]=reactExports.useState(!1),[De,X]=reactExports.useState([]),[Se,z]=reactExports.useState(!1),[re,T]=reactExports.useState(!1),[J,B]=reactExports.useState(null),[j,M]=reactExports.useState({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),[U,K]=reactExports.useState(!1),[Le,ve]=reactExports.useState(!1),[Ae,ye]=reactExports.useState("Hi! I'm Lily, your inventory assistant! I can help you understand your stock levels and manage your products. Hover over the stats cards to see what they mean!"),[V,be]=reactExports.useState(!1),[Ne,H]=reactExports.useState(null),[Te,se]=reactExports.useState(null),[Ce,pt]=reactExports.useState(!1),[pe,ze]=reactExports.useState(null),[Ye,lt]=reactExports.useState(null),[Ke,nt]=reactExports.useState(1),[mt,it]=reactExports.useState(10),[Je,bt]=reactExports.useState(0),[ne,Ue]=reactExports.useState([]),[Qe,gt]=reactExports.useState([]),[Nt,It]=reactExports.useState(null),[Ot,Wt]=reactExports.useState(null),Fe=300*1e3,tt=async(k=!1)=>{if(r==null){gt([]);return}if(!k&&Nt&&Nt.businessId===r&&Nt.branchId===a&&Date.now()-Nt.timestamp<Fe){const ce=Nt.data.map(Re=>({...Re,price:0,stock_quantity:0,supplier_info:"",reorder_level:0,image_url:null,created_at:"",updated_at:""}));gt(ce);return}try{let ce=supabase.from("products").select("product_id, name, category").eq("business_id",r);a&&(ce=ce.eq("branch_id",a));const{data:Re,error:et}=await ce.order("name",{ascending:!0});if(et){console.error("Error fetching all products for suggestions:",et);return}const wt=Re||[],at=wt.map(ot=>({...ot,price:0,stock_quantity:0,supplier_info:"",reorder_level:0,image_url:null,created_at:"",updated_at:""}));gt(at),It({data:wt,timestamp:Date.now(),businessId:r,branchId:a})}catch(ce){console.error("Error fetching all products for suggestions:",ce)}},ut=async()=>{if(r==null){Ue([]);return}try{let k=supabase.from("products").select("category").eq("business_id",r);a&&(k=k.eq("branch_id",a));const{data:ce,error:Re}=await k.not("category","is",null).not("category","eq","");if(Re){console.error("Error fetching categories:",Re);return}const et=Array.from(new Set(ce.map(wt=>wt.category))).filter(wt=>wt&&wt.trim()!=="").sort();Ue(et)}catch(k){console.error("Error fetching distinct categories:",k)}};reactExports.useEffect(()=>{if(r==null){c([]),gt([]),Ue([]),y({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),bt(0);return}Dt(1,mt,Y,te,_),ut(),tt(!0),ht(!0)},[r,n,a]),reactExports.useEffect(()=>{console.log("Modal state changed:",{showEditModal:re,editingProduct:J?.name})},[re,J]);const Q=()=>{nt(1),Dt(1,mt,Y,te)},ge=k=>{k.key==="Enter"&&(Q(),Pe(!1))},rt=k=>{const ce=k.target.value;if(le(ce),ce.length>=2){const Re=W(ce);X(Re),Pe(Re.length>0)}else Pe(!1),X([])},xt=k=>{const ce=k.type==="product"?k.product.name:k.name;le(ce),Pe(!1),X([]),nt(1),Dt(1,mt,ce,te)},Mt=()=>{le(""),Pe(!1),X([]),nt(1),Dt(1,mt,"",te)};reactExports.useEffect(()=>{r!=null&&(nt(1),Dt(1,mt,Y,te,_))},[te,r,n,a]);const Dt=async(k=Ke,ce=mt,Re=Y,et=te,wt=null)=>{if(r==null){c([]),bt(0),x(!1);return}try{if(x(!0),h(null),wt&&wt!=="totalProducts"){let at=supabase.from("products").select("*").eq("business_id",r);if(a&&(at=at.eq("branch_id",a)),at=at.order("product_id",{ascending:!0}),Re&&Re.trim()){const or=`name.ilike.%${Re.trim()}%,category.ilike.%${Re.trim()}%`;at=at.or(or)}et&&et!=="all"&&(at=at.eq("category",et)),wt==="outOfStock"&&(at=at.eq("stock_quantity",0));const{data:ot,error:Rt}=await at;if(Rt)throw Rt;let _t=ot||[];wt==="inStock"?_t=_t.filter(or=>or.stock_quantity>or.reorder_level):wt==="lowStock"&&(_t=_t.filter(or=>or.stock_quantity<=or.reorder_level&&or.stock_quantity>0)),bt(_t.length);const kt=(k-1)*ce,ur=_t.slice(kt,kt+ce);c(ur)}else{let at=supabase.from("products").select("product_id",{count:"exact",head:!0}).eq("business_id",r),ot=supabase.from("products").select("*").eq("business_id",r);if(a&&(at=at.eq("branch_id",a),ot=ot.eq("branch_id",a)),ot=ot.order("product_id",{ascending:!0}),Re&&Re.trim()){const nr=`name.ilike.%${Re.trim()}%,category.ilike.%${Re.trim()}%`;at=at.or(nr),ot=ot.or(nr)}et&&et!=="all"&&(at=at.eq("category",et),ot=ot.eq("category",et));const{count:Rt,error:_t}=await at;if(_t)throw _t;bt(Rt||0);const kt=(k-1)*ce,{data:ur,error:or}=await ot.range(kt,kt+ce-1);if(or)throw or;c(ur||[])}}catch(at){const ot=at instanceof Error?at.message:"Failed to fetch products";h(ot),console.error("Error fetching products:",at),alert(`Products loading error: ${ot}. Please check your database permissions.`)}finally{x(!1)}},ht=async(k=!1)=>{if(r==null){y({totalProducts:0,inStock:0,lowStock:0,outOfStock:0});return}if(!k&&Ot&&Ot.businessId===r&&Ot.branchId===a&&Date.now()-Ot.timestamp<Fe){y(Ot.data);return}try{let ce=supabase.from("products").select("stock_quantity, reorder_level").eq("business_id",r);a&&(ce=ce.eq("branch_id",a));const{data:Re,error:et}=await ce;if(et)throw et;if(Re){const wt=Re.length,at=Re.filter(kt=>kt.stock_quantity>kt.reorder_level).length,ot=Re.filter(kt=>kt.stock_quantity<=kt.reorder_level&&kt.stock_quantity>0).length,Rt=Re.filter(kt=>kt.stock_quantity===0).length,_t={totalProducts:wt,inStock:at,lowStock:ot,outOfStock:Rt};y(_t),Wt({data:_t,timestamp:Date.now(),businessId:r,branchId:a})}}catch(ce){console.error("Error fetching summary stats:",ce)}},yr=k=>{_===k?(E(null),le(""),oe("all"),nt(1),Dt(1,mt,"","all")):(E(k),le(""),oe("all"),nt(1),Dt(1,mt,"","all",k))},Br=k=>{const ce=new Date,Re=new Date(ce.getTime()-720*60*60*1e3);new Date(ce.getTime()-10080*60*1e3);const et=k.filter(Rt=>Rt.sales&&new Date(Rt.sales.datetime)>=Re),wt=[];for(let Rt=29;Rt>=0;Rt--){const _t=new Date(ce.getTime()-Rt*24*60*60*1e3),kt=_t.toISOString().split("T")[0],ur=et.filter(ir=>ir.sales&&ir.sales.datetime.startsWith(kt)),or=ur.length,nr=ur.reduce((ir,dr)=>ir+(dr.calculated_price||dr.price_each*dr.quantity),0);wt.push({date:kt,day:_t.getDate(),month:_t.getMonth()+1,sales:or,revenue:nr})}const at=[];for(let Rt=3;Rt>=0;Rt--){const _t=new Date(ce.getTime()-(Rt+1)*7*24*60*60*1e3),kt=new Date(ce.getTime()-Rt*7*24*60*60*1e3),ur=et.filter(ir=>{if(!ir.sales)return!1;const dr=new Date(ir.sales.datetime);return dr>=_t&&dr<kt}),or=ur.length,nr=ur.reduce((ir,dr)=>ir+(dr.calculated_price||dr.price_each*dr.quantity),0);at.push({week:`Week ${4-Rt}`,startDate:_t.toISOString().split("T")[0],endDate:kt.toISOString().split("T")[0],sales:or,revenue:nr})}const ot=[];for(let Rt=5;Rt>=0;Rt--){const _t=new Date(ce.getFullYear(),ce.getMonth()-Rt,1),kt=new Date(ce.getFullYear(),ce.getMonth()-Rt+1,0),ur=k.filter(ir=>{if(!ir.sales)return!1;const dr=new Date(ir.sales.datetime);return dr>=_t&&dr<=kt}),or=ur.length,nr=ur.reduce((ir,dr)=>ir+(dr.calculated_price||dr.price_each*dr.quantity),0);ot.push({month:_t.toLocaleDateString("en-US",{month:"short",year:"numeric"}),sales:or,revenue:nr})}return{daily:wt,weekly:at,monthly:ot}},vt=async k=>{if(r==null){L(null);return}try{ae(!0),h(null),console.log("Fetching insights for product:",k.product_id,k.name);const ce=k.sales_count||0,Re=k.total_revenue||0,et=k.last_sold_date,wt=ce>0?(ce/30).toFixed(1):0,at=Re*.6,ot=Re-at,Rt=Re>0?ot/Re*100:0,{data:_t,error:kt}=await supabase.from("sale_items").select(`
          *,
          sales (
            sale_id,
            datetime,
            total_amount,
            payment_method,
            customers (name),
            business_id
          )
        `).eq("product_id",k.product_id).eq("sales.business_id",r).order("datetime",{ascending:!1,foreignTable:"sales"});if(kt)throw kt;console.log("All sales query result:",{data:_t});const ur=_t?.slice(0,10)||[],or=ur?.map(Qt=>({date:Qt.sales?new Date(Qt.sales.datetime).toLocaleDateString():"Unknown",time:Qt.sales?new Date(Qt.sales.datetime).toLocaleTimeString():"Unknown",quantity:Qt.weight||Qt.quantity,unit:Qt.weight?k.weight_unit||"kg":"units",price:Qt.calculated_price||Qt.price_each*Qt.quantity,customer:Qt.sales?.customers?.name||"Walk-in Customer",cashier:"System User"}))||[],nr=ur?.reduce((Qt,Er)=>Qt+(Er.weight||Er.quantity),0)||0,ir=new Date;ir.setDate(ir.getDate()-30);const Ks=(ur?.filter(Qt=>Qt.sales&&new Date(Qt.sales.datetime)>=ir)||[]).reduce((Qt,Er)=>{if(Er.sales&&Er.sales.datetime){const S=new Date(Er.sales.datetime).toDateString();Qt[S]=(Qt[S]||0)+1}return Qt},{}),Kr=Object.entries(Ks).sort(([,Qt],[,Er])=>Er-Qt).slice(0,5).map(([Qt,Er])=>({date:Qt,count:Er})),Qs=Br(_t||[]);console.log("Calculated insights:",{totalSales:ce,totalRevenue:Re,totalQuantitySold:nr,averageSalesPerDay:wt,topSellingDays:Kr,estimatedProfit:ot,profitMargin:Rt,recentSalesList:or,lastSoldDate:et,chartData:Qs}),L({product:k,totalSales:ce,totalRevenue:Re,totalQuantitySold:nr,averageSalesPerDay:parseFloat(wt),topSellingDays:Kr,estimatedProfit:ot,profitMargin:Rt,recentSalesList:or,lastSoldDate:et,chartData:Qs,salesData:_t||[]})}catch(ce){console.error("Error fetching product insights:",ce),h(ce instanceof Error?ce.message:"Failed to fetch product insights")}finally{ae(!1)}},Rr=k=>{A(k),v(!0),vt(k)},Gt=l,Ct=Math.ceil(Je/mt),Ut=Je>0?(Ke-1)*mt+1:0,Yr=Math.min(Ke*mt,Je),_r=["all",...ne],N=k=>!k||k.length<2?[]:ne.filter(Re=>Re.toLowerCase().includes(k.toLowerCase())||k.toLowerCase().includes(Re.toLowerCase())||Re.toLowerCase().split(" ").some(et=>et.includes(k.toLowerCase())||k.toLowerCase().includes(et))).slice(0,5),W=k=>{if(!k||k.length<2)return[];const ce=k.toLowerCase(),Re=[],et=[];Qe.forEach(ot=>{ot.name.toLowerCase().includes(ce)&&Re.push({type:"product",product:ot}),ot.category.toLowerCase().includes(ce)&&Re.push({type:"product",product:ot}),ot.description&&ot.description.toLowerCase().includes(ce)&&Re.push({type:"product",product:ot}),ot.sku&&ot.sku.toLowerCase().includes(ce)&&Re.push({type:"product",product:ot})}),ne.forEach(ot=>{ot.toLowerCase().includes(ce)&&et.push({type:"category",name:ot})});const wt=Re.filter((ot,Rt,_t)=>ot.type==="product"&&_t.findIndex(kt=>kt.type==="product"&&kt.product.product_id===ot.product.product_id)===Rt).slice(0,6),at=et.filter((ot,Rt,_t)=>ot.type==="category"&&_t.findIndex(kt=>kt.type==="category"&&kt.name===ot.name)===Rt).slice(0,2);return[...wt,...at]},F=k=>{k>=1&&k<=Ct&&(nt(k),Dt(k,mt,Y,te))},P=k=>{it(k),nt(1),Dt(1,k,Y,te)},q=()=>{Ke>1&&F(Ke-1)},G=()=>{Ke<Ct&&F(Ke+1)},he=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(k){const ce=Math.random()*16|0;return(k==="x"?ce:ce&3|8).toString(16)}),ke=(k,ce,Re=!1)=>{const et=(ot,Rt,_t=!0)=>{if(!ot||ot.trim()===""){if(_t)throw new Error(`${Rt} is required`);return 0}const kt=parseFloat(ot);if(isNaN(kt))throw new Error(`${Rt} must be a valid number`);return kt},wt=(ot,Rt,_t=!0)=>{if(!ot||ot.trim()===""){if(_t)throw new Error(`${Rt} is required`);return 0}const kt=parseInt(ot);if(isNaN(kt)||!Number.isInteger(kt))throw new Error(`${Rt} must be a valid whole number`);return kt},at={name:k.product_name?.trim()||(()=>{throw new Error("Product name is required")})(),category:k.category?.trim()||(()=>{throw new Error("Category is required")})(),price:k.is_weighted?0:et(k.price,"Price",!Re),stock_quantity:wt(k.stock_quantity,"Stock quantity",!Re),supplier_info:k.supplier_info?.trim()||"",reorder_level:wt(k.reorder_level,"Reorder level",!Re),tax_rate:k.tax_rate?et(k.tax_rate,"Tax rate",!1):0,last_updated:new Date().toISOString(),is_weighted:k.is_weighted||!1,weight_unit:k.is_weighted?k.weight_unit:null,price_per_unit:k.is_weighted&&k.price_per_unit?et(k.price_per_unit,"Price per unit",!1):null,description:k.description?.trim()||"",sku:k.sku?.trim()||"",barcode:(()=>{const ot=k.barcode?.trim();return ot&&ot.length>0?ot:null})()};return ce?{...at,product_id:ce}:at},ue=k=>{if(k.key!=="Enter")return;const ce=k.target;!ce||ce instanceof HTMLTextAreaElement||ce instanceof HTMLButtonElement||ce instanceof HTMLInputElement&&ce.type==="submit"||!(ce instanceof HTMLInputElement||ce instanceof HTMLSelectElement)||(k.preventDefault(),k.stopPropagation())},_e=async k=>{if(k.preventDefault(),console.log("Form submitted, newProduct:",j),K(!0),r==null){h("Please select a business before adding products"),K(!1);return}try{const ce=he();console.log("Generated product ID:",ce);const Re=ke(j,ce),et={...Re,business_id:r,branch_id:a};console.log("Inserting product data:",et);const{data:wt,error:at}=await supabase.from("products").insert([et]).select();if(at)throw console.error("Supabase error:",at),at;const ot=wt?.[0]?{...wt[0],barcode:Re.barcode??null}:null;if(!ot)throw new Error("Product insertion returned no data");if(console.log("Product added successfully!"),Ne){const Rt=await Ze(ce);if(Rt){const _t={...ot,image_url:Rt};c(kt=>[...kt,_t])}else c(_t=>[..._t,ot])}else c(Rt=>[...Rt,ot]);bt(Rt=>Rt+1),M({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),H(null),se(null),z(!1),ut(),tt(!0),ht(!0)}catch(ce){console.error("Error adding product:",ce);let Re="Failed to add product";ce instanceof Error&&ce.message&&(ce.message.includes("is required")||ce.message.includes("must be a valid")?Re=ce.message:ce.message.includes("duplicate key value violates unique constraint")?Re="A product with this ID already exists. Please try again.":ce.message.includes("violates check constraint")?Re="Invalid data provided. Please check your input values.":ce.message.includes("not-null constraint")?Re="Required fields are missing. Please fill in all required fields.":Re=`Failed to add product: ${ce.message}`),h(Re)}finally{K(!1)}},Ee=async k=>{if(k.preventDefault(),!!J){if(r==null){h("Please select a business before updating products");return}K(!0),h(null);try{console.log("Editing product data:",j);const ce=ke(j,void 0,!0);console.log("Transformed product data:",ce);const{data:Re,error:et}=await supabase.from("products").update({...ce,branch_id:a}).eq("product_id",J.product_id).eq("business_id",r).select();if(et)throw console.error("Supabase error:",et),console.error("Error details:",JSON.stringify(et,null,2)),et;let wt=Re?.[0]?{...Re[0],barcode:ce.barcode??null}:null;if(!wt)throw new Error("Product update returned no data");if(Ne){const at=await Ze(J.product_id);at&&(wt={...wt,image_url:at})}c(l.map(at=>at.product_id===J.product_id?wt:at)),Ve(),T(!1),B(null),ut(),tt(!0),ht(!0)}catch(ce){console.error("Failed to update product:",ce);let Re="Failed to update product";ce instanceof Error&&ce.message&&(ce.message.includes("is required")||ce.message.includes("must be a valid")?Re=ce.message:ce.message.includes("violates check constraint")?Re="Invalid data provided. Please check your input values.":ce.message.includes("not-null constraint")?Re="Required fields are missing. Please fill in all required fields.":Re=`Failed to update product: ${ce.message}`),h(Re)}finally{K(!1)}}},$e=async k=>{if(r==null){h("Please select a business before deleting products");return}try{console.log("??? Starting delete for product:",k);const{error:ce}=await supabase.from("products").delete().eq("product_id",k).eq("business_id",r);if(ce)throw console.error("?? Error deleting product:",ce),ce;console.log("? Product deleted successfully"),c(l.filter(Re=>Re.product_id!==k)),lt(null),bt(Re=>Math.max(0,Re-1)),tt(!0),ht(!0)}catch(ce){console.error("? Delete failed:",ce),h(ce instanceof Error?ce.message:"Failed to delete product")}},Ve=()=>{M({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),H(null),se(null),z(!1),T(!1),B(null)},st=k=>{console.log("Starting edit for product:",k),B(k),M({product_name:k.name,category:k.category,price:k.is_weighted?k.price_per_unit?.toString()||"":k.price.toString(),stock_quantity:k.stock_quantity.toString(),reorder_level:k.reorder_level.toString(),supplier_info:k.supplier_info||"",tax_rate:k.tax_rate?.toString()||"",description:k.description||"",sku:k.sku||"",barcode:k.barcode||"",is_weighted:k.is_weighted||!1,weight_unit:k.weight_unit||"",price_per_unit:k.price_per_unit?.toString()||""}),se(k.image_url||null),H(null),T(!0),console.log("Edit modal should be open now")},qe=k=>{const ce=k.target.files?.[0];if(ce){H(ce);const Re=new FileReader;Re.onload=et=>{se(et.target?.result)},Re.readAsDataURL(ce)}},Ze=async k=>{if(!Ne)return null;if(r==null)return console.error("Cannot upload image without selecting a business"),null;try{return await uploadProductImage(Ne,k,r)}catch(ce){return console.error("Image upload failed:",ce),null}},Et=k=>{ze(k),pt(!0)},Vt=()=>{pt(!1),ze(null)},qt=(k,ce)=>k===0?{status:"out",color:"#ef4444",bgColor:"#fef2f2",textColor:"#dc2626"}:k<=ce?{status:"low",color:"#f59e0b",bgColor:"#fffbeb",textColor:"#d97706"}:{status:"good",color:"#10b981",bgColor:"#f0fdf4",textColor:"#059669"},Yt=k=>{const ce=k.toLowerCase();return ce.includes("small")?"#3b82f6":ce.includes("large")?"#ef4444":ce.includes("medium")?"#f59e0b":"#7d8d86"},Lr=k=>{const ce=k.split(" ");return ce.map((Re,et)=>{const wt=Re.toLowerCase();let at="#1a1a1a";return wt==="small"?at="#3b82f6":wt==="large"?at="#ef4444":wt==="medium"&&(at="#f59e0b"),jsxRuntimeExports.jsxs("span",{style:{color:at},children:[Re,et<ce.length-1?" ":""]},et)})},$r=()=>jsxRuntimeExports.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,display:"flex",alignItems:"flex-end",gap:"12px"},children:[Le&&jsxRuntimeExports.jsxs("div",{style:{background:"#f8fafc",border:"2px solid #7d8d86",borderRadius:"16px",padding:"12px 16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",maxWidth:"250px",fontSize:"14px",color:"#3e3f29",position:"relative",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("p",{style:{margin:0,fontWeight:"500"},children:Ae}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:"-8px",right:"20px",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"8px solid #7d8d86"}})]}),jsxRuntimeExports.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"#f8fafc",border:"3px solid #7d8d86",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease"},onClick:()=>ve(!Le),onMouseEnter:k=>{const ce=k.target;ce.style.transform="scale(1.05)"},onMouseLeave:k=>{const ce=k.target;ce.style.transform="scale(1)"},children:jsxRuntimeExports.jsx("img",{src:t?.icon?`/retailpos/images/icons/${t.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:t?.icon||"Lily",style:{width:"50px",height:"50px",borderRadius:"50%"}})})]});return jsxRuntimeExports.jsxs("div",{style:{padding:"24px",background:"#f8fafc",minHeight:"100vh",border:"1px solid rgba(125, 141, 134, 0.1)",borderRadius:"16px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px",padding:"20px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:"Inventory Management"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:"0 0 12px 0"},children:"Manage your product inventory, stock levels, and suppliers."}),jsxRuntimeExports.jsx(BranchSelector,{size:"sm",showLabel:!1})]}),e("canManageProducts")&&jsxRuntimeExports.jsxs("button",{onClick:()=>{console.log("Add Product button clicked"),z(!0),console.log("showAddModal set to true")},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},onMouseEnter:k=>{k.target.style.background="#bca88d",ye("Click this button to add a new product to your inventory! You'll need to fill in details like name, price, stock quantity, and reorder level."),ve(!0)},onMouseLeave:k=>{k.target.style.background="#7d8d86",ve(!1)},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"16px"}}),jsxRuntimeExports.jsx("span",{children:"Add Product"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginBottom:"32px",padding:"20px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsx("div",{onClick:()=>yr("totalProducts"),style:{background:_==="totalProducts"?"#f0f8f0":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:_==="totalProducts"?"2px solid #7d8d86":"2px solid transparent"},onMouseEnter:k=>{_!=="totalProducts"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{_!=="totalProducts"&&(k.target.style.background="#f8fafc")},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"18px",color:"#f1f0e4"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:g.totalProducts}),jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Total Products"})]})]})}),jsxRuntimeExports.jsx("div",{onClick:()=>yr("inStock"),style:{background:_==="inStock"?"#f0fdf4":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:_==="inStock"?"2px solid #10b981":"2px solid transparent"},onMouseEnter:k=>{_!=="inStock"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{_!=="inStock"&&(k.target.style.background="#f8fafc")},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-circle-check",style:{fontSize:"18px",color:"white"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:g.inStock}),jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"In Stock"})]})]})}),jsxRuntimeExports.jsx("div",{onClick:()=>yr("lowStock"),style:{background:_==="lowStock"?"#fffbeb":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:_==="lowStock"?"2px solid #f59e0b":"2px solid transparent"},onMouseEnter:k=>{_!=="lowStock"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{_!=="lowStock"&&(k.target.style.background="#f8fafc")},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-triangle-exclamation",style:{fontSize:"18px",color:"white"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:g.lowStock}),jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Low Stock"})]})]})}),jsxRuntimeExports.jsx("div",{onClick:()=>yr("outOfStock"),style:{background:_==="outOfStock"?"#fef2f2":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:_==="outOfStock"?"2px solid #ef4444":"2px solid transparent"},onMouseEnter:k=>{_!=="outOfStock"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{_!=="outOfStock"&&(k.target.style.background="#f8fafc")},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-circle-xmark",style:{fontSize:"18px",color:"white"}})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:g.outOfStock}),jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Out of Stock"})]})]})})]}),jsxRuntimeExports.jsx("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"2px solid rgba(125, 141, 134, 0.3)"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"center",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx("div",{style:{flex:"1",minWidth:"250px",maxWidth:"400px"},children:jsxRuntimeExports.jsxs("div",{style:{position:"relative",display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsxs("div",{style:{position:"relative",flex:1},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-search",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#7d8d86",fontSize:"14px",zIndex:1}}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search products... (Press Enter to search)",value:Y,onChange:rt,onKeyPress:ge,onBlur:()=>{setTimeout(()=>Pe(!1),200)},onFocus:()=>{Y.length>=2&&De.length>0&&Pe(!0)},style:{width:"100%",padding:"10px 12px 10px 36px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",boxSizing:"border-box"}}),Y&&jsxRuntimeExports.jsx("button",{onClick:Mt,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"12px",transition:"color 0.2s ease"},onMouseEnter:k=>k.target.style.color="#ef4444",onMouseLeave:k=>k.target.style.color="#7d8d86",children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"})}),Be&&De.length>0&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #d1d5db",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:50,maxHeight:"300px",overflow:"auto"},children:De.map((k,ce)=>jsxRuntimeExports.jsx("div",{onClick:()=>xt(k),style:{padding:"12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ce<De.length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:Re=>Re.target.style.background="#f9fafb",onMouseLeave:Re=>Re.target.style.background="#f8fafc",children:k.type==="product"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"6px",overflow:"hidden",flexShrink:0,backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:k.product.image_url?jsxRuntimeExports.jsx("img",{src:k.product.image_url,alt:k.product.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):jsxRuntimeExports.jsx("i",{className:"fa-solid fa-box",style:{color:"#9ca3af",fontSize:"16px"}})}),jsxRuntimeExports.jsxs("div",{style:{flex:1,minWidth:0},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",marginBottom:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.product.name}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("span",{children:k.product.category}),jsxRuntimeExports.jsx("span",{children:"?"}),jsxRuntimeExports.jsx("span",{style:{fontWeight:"500",color:"#059669"},children:k.product.is_weighted?`?${k.product.price_per_unit}/${k.product.weight_unit}`:`?${k.product.price}`}),k.product.sku&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"?"}),jsxRuntimeExports.jsxs("span",{children:["SKU: ",k.product.sku]})]})]})]}),jsxRuntimeExports.jsx("i",{className:"fa-solid fa-box",style:{color:"#7d8d86",fontSize:"14px",flexShrink:0}})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-tags",style:{color:"#7d8d86",fontSize:"16px",width:"16px",flexShrink:0}}),jsxRuntimeExports.jsxs("div",{style:{flex:1,minWidth:0},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.name}),jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Category"})]}),jsxRuntimeExports.jsx("i",{className:"fa-solid fa-arrow-right",style:{color:"#7d8d86",fontSize:"12px",flexShrink:0}})]})},ce))})]}),jsxRuntimeExports.jsxs("button",{onClick:Q,style:{padding:"10px 16px",background:"#7d8d86",color:"#f1f0e4",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},onMouseEnter:k=>k.target.style.background="#bca88d",onMouseLeave:k=>k.target.style.background="#7d8d86",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"12px"}}),"Search"]})]})}),jsxRuntimeExports.jsx("div",{style:{minWidth:"180px"},children:jsxRuntimeExports.jsx("select",{value:te,onChange:k=>oe(k.target.value),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",cursor:"pointer"},children:_r.map(k=>jsxRuntimeExports.jsx("option",{value:k,children:k==="all"?"All Categories":k},k))})})]})}),jsxRuntimeExports.jsx("div",{style:{background:"#f8fafc",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid rgba(125, 141, 134, 0.3)"},children:jsxRuntimeExports.jsx("div",{style:{overflowX:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[jsxRuntimeExports.jsx("thead",{style:{background:"#3e3f29",borderBottom:"4px solid #7d8d86"},children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Product"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Category"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Price"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Stock"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Status"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86"},children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{style:{border:"1px solid rgba(125, 141, 134, 0.2)"},children:Gt.length===0?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsxs("td",{colSpan:6,style:{padding:"40px",textAlign:"center",color:"#7d8d86"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",margin:0},children:"No products found"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0"},children:"Add your first product to get started!"})]})}):Gt.map(k=>{const ce=qt(k.stock_quantity,k.reorder_level);return jsxRuntimeExports.jsxs("tr",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",borderLeft:"1px solid rgba(125, 141, 134, 0.2)",borderRight:"1px solid rgba(125, 141, 134, 0.2)",transition:"background 0.2s ease",cursor:"pointer"},onClick:()=>Rr(k),onMouseEnter:Re=>Re.target.style.background="rgba(125, 141, 134, 0.05)",onMouseLeave:Re=>Re.target.style.background="transparent",children:[jsxRuntimeExports.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[k.image_url&&jsxRuntimeExports.jsx("img",{src:k.image_url,alt:k.name,onClick:Re=>{Re.stopPropagation(),k.image_url&&Et(k.image_url)},style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:Re=>{const et=Re.target;et.style.transform="scale(1.05)",et.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",ye("Click on the image to see it in full size! This helps you get a better look at the product."),ve(!0)},onMouseLeave:Re=>{const et=Re.target;et.style.transform="scale(1)",et.style.boxShadow="none",ve(!1)}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 4px 0"},children:Lr(k.name)}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["ID: ",k.product_id]})]})]})}),jsxRuntimeExports.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:jsxRuntimeExports.jsx("span",{style:{background:"#f3f4f6",color:Yt(k.category),padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",border:`1px solid ${Yt(k.category)}`},children:k.category})}),jsxRuntimeExports.jsxs("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:k.is_weighted&&k.price_per_unit&&k.weight_unit?`?${k.price_per_unit.toFixed(2)}/${k.weight_unit}`:`?${k.price.toFixed(2)}`}),k.is_weighted&&jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"4px 0 0 0"},children:"Sold by weight"})]}),jsxRuntimeExports.jsxs("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:k.stock_quantity}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["Reorder: ",k.reorder_level]})]}),jsxRuntimeExports.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:jsxRuntimeExports.jsx("span",{style:{background:ce.bgColor,color:ce.textColor,padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:ce.status==="good"?"In Stock":ce.status==="low"?"Low Stock":"Out of Stock"})}),jsxRuntimeExports.jsx("td",{style:{padding:"16px"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e("canManageProducts")&&jsxRuntimeExports.jsxs("button",{onClick:Re=>{Re.stopPropagation(),console.log("Edit button clicked for product:",k.name),st(k)},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:Re=>{Re.target.style.background="#bca88d",ye(`Click to edit "${k.name}". You can update the price, stock quantity, reorder level, and other details!`),ve(!0)},onMouseLeave:Re=>{Re.target.style.background="#7d8d86",ve(!1)},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-pen-to-square",style:{marginRight:"4px"}}),"Edit"]}),jsxRuntimeExports.jsxs("button",{onClick:Re=>{Re.stopPropagation(),lt(k)},style:{background:"#ef4444",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:Re=>Re.target.style.background="#dc2626",onMouseLeave:Re=>Re.target.style.background="#ef4444",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-trash-can",style:{marginRight:"4px"}}),"Delete"]})]})})]},k.product_id)})})]})})}),jsxRuntimeExports.jsx("div",{style:{marginTop:"16px",fontSize:"14px",color:"#7d8d86",textAlign:"center",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)",marginBottom:"16px"},children:Je>0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Showing ",Ut,"-",Yr," of ",Je," products",Ct>1&&jsxRuntimeExports.jsxs("span",{style:{marginLeft:"16px"},children:["(Page ",Ke," of ",Ct,")"]})]}):"No products found"}),Ct>1&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",marginBottom:"24px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("label",{style:{fontSize:"14px",color:"#3e3f29",fontWeight:"500"},children:"Show:"}),jsxRuntimeExports.jsxs("select",{value:mt,onChange:k=>P(parseInt(k.target.value)),style:{padding:"6px 12px",border:"2px solid #bca88d",borderRadius:"6px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",cursor:"pointer"},children:[jsxRuntimeExports.jsx("option",{value:5,children:"5"}),jsxRuntimeExports.jsx("option",{value:10,children:"10"}),jsxRuntimeExports.jsx("option",{value:25,children:"25"}),jsxRuntimeExports.jsx("option",{value:50,children:"50"}),jsxRuntimeExports.jsx("option",{value:100,children:"100"})]}),jsxRuntimeExports.jsx("span",{style:{fontSize:"14px",color:"#7d8d86"},children:"per page"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsxs("button",{onClick:q,disabled:Ke===1,style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ke===1?"#f3f4f6":"white",color:Ke===1?"#9ca3af":"#3e3f29",cursor:Ke===1?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:k=>{Ke!==1&&(k.target.style.background="#f8f9fa")},onMouseLeave:k=>{Ke!==1&&(k.target.style.background="#f8fafc")},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left",style:{marginRight:"4px"}}),"Previous"]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:"4px"},children:Array.from({length:Math.min(5,Ct)},(k,ce)=>{let Re;return Ct<=5||Ke<=3?Re=ce+1:Ke>=Ct-2?Re=Ct-4+ce:Re=Ke-2+ce,jsxRuntimeExports.jsx("button",{onClick:()=>F(Re),style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ke===Re?"#7d8d86":"white",color:Ke===Re?"#f1f0e4":"#3e3f29",cursor:"pointer",fontSize:"14px",fontWeight:Ke===Re?"600":"400",transition:"all 0.2s ease",minWidth:"40px"},onMouseEnter:et=>{Ke!==Re&&(et.target.style.background="#f8f9fa")},onMouseLeave:et=>{Ke!==Re&&(et.target.style.background="#f8fafc")},children:Re},Re)})}),jsxRuntimeExports.jsxs("button",{onClick:G,disabled:Ke===Ct,style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ke===Ct?"#f3f4f6":"white",color:Ke===Ct?"#9ca3af":"#3e3f29",cursor:Ke===Ct?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:k=>{Ke!==Ct&&(k.target.style.background="#f8f9fa")},onMouseLeave:k=>{Ke!==Ct&&(k.target.style.background="#f8fafc")},children:["Next",jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right",style:{marginLeft:"4px"}})]})]})]}),Se&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:jsxRuntimeExports.jsxs("div",{style:{background:"#f8fafc",borderRadius:"16px",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Add New Product"}),jsxRuntimeExports.jsx("button",{onClick:Ve,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#f3f4f6",k.target.style.color="#3e3f29",ye("Click this X button to close the form without saving. It's the same as clicking Cancel!"),ve(!0)},onMouseLeave:k=>{k.target.style.background="none",k.target.style.color="#7d8d86",ve(!1)},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:_e,onKeyDown:ue,children:[f&&jsxRuntimeExports.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:f}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:j.product_name,onChange:k=>M({...j,product_name:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:j.category,onChange:k=>{M({...j,category:k.target.value}),be(k.target.value.length>=2)},onFocus:()=>{be(j.category.length>=2),ye("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),ve(!0)},onBlur:()=>setTimeout(()=>be(!1),200),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),V&&N(j.category).length>0&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#f8fafc",border:"2px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:N(j.category).map((k,ce)=>jsxRuntimeExports.jsxs("div",{onClick:()=>{M({...j,category:k}),be(!1),ye(`Great choice! I've selected "${k}" for you. This helps keep your categories organized!`),ve(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ce<N(j.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:Re=>Re.target.style.background="#f8f9fa",onMouseLeave:Re=>Re.target.style.background="transparent",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),k]},ce))})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"is_weighted",checked:j.is_weighted,onChange:k=>M({...j,is_weighted:k.target.checked}),style:{width:"16px",height:"16px"}}),jsxRuntimeExports.jsx("label",{htmlFor:"is_weighted",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),j.is_weighted&&jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),jsxRuntimeExports.jsxs("select",{value:j.weight_unit,onChange:k=>M({...j,weight_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select unit"}),jsxRuntimeExports.jsx("option",{value:"kg",children:"Kilogram (kg)"}),jsxRuntimeExports.jsx("option",{value:"g",children:"Gram (g)"}),jsxRuntimeExports.jsx("option",{value:"lb",children:"Pound (lb)"}),jsxRuntimeExports.jsx("option",{value:"oz",children:"Ounce (oz)"}),jsxRuntimeExports.jsx("option",{value:"l",children:"Liter (l)"}),jsxRuntimeExports.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",j.weight_unit||"unit"," *"]}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",required:j.is_weighted,value:j.price_per_unit,onChange:k=>M({...j,price_per_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",j.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",required:!j.is_weighted,value:j.is_weighted?"0":j.price,onChange:k=>{j.is_weighted||M({...j,price:k.target.value})},style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:j.is_weighted?"#f9fafb":"white",color:j.is_weighted?"#6b7280":"#3e3f29",cursor:j.is_weighted?"not-allowed":"text"},placeholder:j.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:j.is_weighted})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),jsxRuntimeExports.jsx("input",{type:"number",required:!0,value:j.stock_quantity,onChange:k=>M({...j,stock_quantity:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),jsxRuntimeExports.jsx("input",{type:"number",required:!0,value:j.reorder_level,onChange:k=>M({...j,reorder_level:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"10"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",value:j.tax_rate,onChange:k=>M({...j,tax_rate:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),jsxRuntimeExports.jsx("input",{type:"text",value:j.supplier_info,onChange:k=>M({...j,supplier_info:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU (Auto-generated if empty)"}),jsxRuntimeExports.jsx("input",{type:"text",value:j.sku,onChange:k=>M({...j,sku:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Leave empty for auto-generation"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Barcode"}),jsxRuntimeExports.jsx("input",{type:"text",value:j.barcode,onChange:k=>M({...j,barcode:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Scan or enter barcode"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:qe,style:{display:"none"},id:"image-upload"}),jsxRuntimeExports.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:k=>{k.target.style.borderColor="#7d8d86",k.target.style.color="#3e3f29",ye("Click here to upload a product image! This helps customers see what they're buying."),ve(!0)},onMouseLeave:k=>{k.target.style.borderColor="#bca88d",k.target.style.color="#7d8d86",ve(!1)},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(Te||J?.image_url)&&jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[jsxRuntimeExports.jsx("img",{src:Te||J?.image_url,alt:"Preview",onClick:()=>{const k=Te||J?.image_url;k&&Et(k)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:k=>{const ce=k.target;ce.style.transform="scale(1.05)",ce.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:k=>{const ce=k.target;ce.style.transform="scale(1)",ce.style.boxShadow="none"}}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{se(null),H(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:j.description,onChange:k=>M({...j,description:k.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Ve,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#e5e7eb",ye("This will close the form and clear all the information you've entered. Don't worry, you can always start over!"),ve(!0)},onMouseLeave:k=>{k.target.style.background="#f3f4f6",ve(!1)},children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:U,style:{background:U?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:U?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:k=>{U||(ye("This will save your new product to the inventory! Make sure all required fields are filled out before clicking."),ve(!0))},onMouseLeave:k=>{U||ve(!1)},children:U?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Adding..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus"}),"Add Product"]})})]})]})]})}),re&&J&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:jsxRuntimeExports.jsxs("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Edit Product"}),jsxRuntimeExports.jsx("button",{onClick:Ve,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#f3f4f6",k.target.style.color="#3e3f29",ye("Click this X button to close the edit form without saving. It's the same as clicking Cancel!"),ve(!0)},onMouseLeave:k=>{k.target.style.background="none",k.target.style.color="#7d8d86",ve(!1)},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Ee,onKeyDown:ue,children:[f&&jsxRuntimeExports.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:f}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:j.product_name,onChange:k=>M({...j,product_name:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:j.category,onChange:k=>{M({...j,category:k.target.value}),be(k.target.value.length>=2)},onFocus:()=>{be(j.category.length>=2),ye("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),ve(!0)},onBlur:()=>setTimeout(()=>be(!1),200),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),V&&N(j.category).length>0&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#f8fafc",border:"2px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:N(j.category).map((k,ce)=>jsxRuntimeExports.jsxs("div",{onClick:()=>{M({...j,category:k}),be(!1),ye(`Great choice! I've selected "${k}" for you. This helps keep your categories organized!`),ve(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ce<N(j.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:Re=>Re.target.style.background="#f8f9fa",onMouseLeave:Re=>Re.target.style.background="transparent",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),k]},ce))})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"is_weighted_edit",checked:j.is_weighted,onChange:k=>M({...j,is_weighted:k.target.checked}),style:{width:"16px",height:"16px"}}),jsxRuntimeExports.jsx("label",{htmlFor:"is_weighted_edit",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),j.is_weighted&&jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),jsxRuntimeExports.jsxs("select",{value:j.weight_unit,onChange:k=>M({...j,weight_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select unit"}),jsxRuntimeExports.jsx("option",{value:"kg",children:"Kilogram (kg)"}),jsxRuntimeExports.jsx("option",{value:"g",children:"Gram (g)"}),jsxRuntimeExports.jsx("option",{value:"lb",children:"Pound (lb)"}),jsxRuntimeExports.jsx("option",{value:"oz",children:"Ounce (oz)"}),jsxRuntimeExports.jsx("option",{value:"l",children:"Liter (l)"}),jsxRuntimeExports.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",j.weight_unit||"unit"," *"]}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",required:j.is_weighted,value:j.price_per_unit,onChange:k=>M({...j,price_per_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",j.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",required:!j.is_weighted,value:j.is_weighted?"0":j.price,onChange:k=>{j.is_weighted||M({...j,price:k.target.value})},style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:j.is_weighted?"#f9fafb":"white",color:j.is_weighted?"#6b7280":"#3e3f29",cursor:j.is_weighted?"not-allowed":"text"},placeholder:j.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:j.is_weighted})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),jsxRuntimeExports.jsx("input",{type:"number",required:!0,value:j.stock_quantity,onChange:k=>M({...j,stock_quantity:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),jsxRuntimeExports.jsx("input",{type:"number",required:!0,value:j.reorder_level,onChange:k=>M({...j,reorder_level:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"10"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",value:j.tax_rate,onChange:k=>M({...j,tax_rate:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),jsxRuntimeExports.jsx("input",{type:"text",value:j.supplier_info,onChange:k=>M({...j,supplier_info:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU"}),jsxRuntimeExports.jsx("input",{type:"text",value:j.sku,onChange:k=>M({...j,sku:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Update SKU"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Barcode"}),jsxRuntimeExports.jsx("input",{type:"text",value:j.barcode,onChange:k=>M({...j,barcode:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Scan or enter barcode"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:qe,style:{display:"none"},id:"image-upload"}),jsxRuntimeExports.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:k=>{k.target.style.borderColor="#7d8d86",k.target.style.color="#3e3f29",ye("Click here to upload a product image! This helps customers see what they're buying."),ve(!0)},onMouseLeave:k=>{k.target.style.borderColor="#bca88d",k.target.style.color="#7d8d86",ve(!1)},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(Te||J?.image_url)&&jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[jsxRuntimeExports.jsx("img",{src:Te||J?.image_url,alt:"Preview",onClick:()=>{const k=Te||J?.image_url;k&&Et(k)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:k=>{const ce=k.target;ce.style.transform="scale(1.05)",ce.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:k=>{const ce=k.target;ce.style.transform="scale(1)",ce.style.boxShadow="none"}}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{se(null),H(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:j.description,onChange:k=>M({...j,description:k.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Ve,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#e5e7eb",ye("This will close the edit form and discard any changes you've made. Don't worry, you can always edit again!"),ve(!0)},onMouseLeave:k=>{k.target.style.background="#f3f4f6",ve(!1)},children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:U,style:{background:U?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:U?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:k=>{U||(ye("This will save your changes to the product! Make sure all required fields are filled out before clicking."),ve(!0))},onMouseLeave:k=>{U||ve(!1)},children:U?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Updating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-save"}),"Update Product"]})})]})]})]})}),Ce&&pe&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:Vt,children:jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"400px",height:"400px",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:`url(${pe})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:"8px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",backgroundColor:"#ffffff"},onClick:k=>k.stopPropagation(),children:jsxRuntimeExports.jsx("button",{onClick:Vt,style:{position:"absolute",top:"-40px",right:"-40px",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.9)",border:"none",color:"#3e3f29",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s ease"},onMouseEnter:k=>k.target.style.background="rgba(255, 255, 255, 1)",onMouseLeave:k=>k.target.style.background="rgba(255, 255, 255, 0.9)",children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"})})})}),Ye&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",marginBottom:"16px",textAlign:"center"},children:"Delete Product"}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"16px",color:"#1a1a1a",marginBottom:"8px",textAlign:"center"},children:["Are you sure you want to delete ",jsxRuntimeExports.jsx("strong",{children:Ye.name}),"?"]}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#ef4444",marginBottom:"24px",textAlign:"center"},children:"This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>lt(null),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:k=>k.target.style.background="#4b5563",onMouseLeave:k=>k.target.style.background="#6b7280",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>$e(Ye.product_id),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:k=>k.target.style.background="#dc2626",onMouseLeave:k=>k.target.style.background="#ef4444",children:"Delete Product"})]})]})}),b&&R&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>v(!1),children:jsxRuntimeExports.jsxs("div",{style:{background:"#f8fafc",borderRadius:"16px",padding:"32px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onClick:k=>k.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px",paddingBottom:"20px",borderBottom:"2px solid #f1f5f9"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[R.image_url&&jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[jsxRuntimeExports.jsx("img",{src:R.image_url,alt:R.name,style:{width:"80px",height:"80px",borderRadius:"16px",objectFit:"cover",border:"3px solid #e5e7eb",background:"#f3f4f6",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#10b981",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:jsxRuntimeExports.jsx("i",{className:"fas fa-chart-line"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-analytics",style:{color:"#7d8d86",fontSize:"20px"}}),jsxRuntimeExports.jsx("h2",{style:{margin:0,fontSize:"28px",fontWeight:"700",color:"#1e293b",letterSpacing:"-0.025em"},children:"Product Insights"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"4px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-box",style:{color:"#7d8d86",fontSize:"16px"}}),jsxRuntimeExports.jsx("p",{style:{margin:0,fontSize:"18px",color:"#374151",fontWeight:"600"},children:R.name})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-tags",style:{color:"#9ca3af",fontSize:"14px"}}),jsxRuntimeExports.jsx("p",{style:{margin:0,fontSize:"14px",color:"#6b7280"},children:R.category}),R.sku&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fas fa-barcode",style:{color:"#9ca3af",fontSize:"14px",marginLeft:"16px"}}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:["SKU: ",R.sku]})]})]})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>v(!1),style:{width:"40px",height:"40px",borderRadius:"50%",background:"#f8fafc",border:"2px solid #e2e8f0",color:"#6b7280",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:k=>{k.currentTarget.style.background="#ef4444",k.currentTarget.style.color="white",k.currentTarget.style.borderColor="#ef4444"},onMouseLeave:k=>{k.currentTarget.style.background="#f8fafc",k.currentTarget.style.color="#6b7280",k.currentTarget.style.borderColor="#e2e8f0"},children:jsxRuntimeExports.jsx("i",{className:"fas fa-times"})})]}),I?jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",fontSize:"18px",color:"#7d8d86",background:"#f8fafc",padding:"20px 32px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"20px",color:"#3b82f6"}}),"Loading insights..."]}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#9ca3af",marginTop:"12px"},children:"Analyzing sales data and trends"})]}):C?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"40px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-chart-bar",style:{color:"#7d8d86",fontSize:"20px"}}),jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1e293b"},children:"Performance Overview"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px"},children:[jsxRuntimeExports.jsxs("div",{style:{background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #93c5fd",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#3b82f6",fontSize:"16px"},children:jsxRuntimeExports.jsx("i",{className:"fas fa-shopping-cart"})}),jsxRuntimeExports.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e40af",marginBottom:"8px"},children:C.totalSales}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#1e40af",fontWeight:"500"},children:"Total Sales"})]}),jsxRuntimeExports.jsxs("div",{style:{background:"linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #86efac",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#10b981",fontSize:"16px"},children:jsxRuntimeExports.jsx("i",{className:"fas fa-euro-sign"})}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#166534",marginBottom:"8px"},children:["?",C.totalRevenue.toFixed(2)]}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#166534",fontWeight:"500"},children:"Total Revenue"})]}),jsxRuntimeExports.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #fbbf24",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#f59e0b",fontSize:"16px"},children:jsxRuntimeExports.jsx("i",{className:"fas fa-weight"})}),jsxRuntimeExports.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#92400e",marginBottom:"8px"},children:C.totalQuantitySold.toFixed(1)}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:"500"},children:[R.is_weighted?R.weight_unit||"kg":"Units"," Sold"]})]}),jsxRuntimeExports.jsxs("div",{style:{background:"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #f9a8d4",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#ec4899",fontSize:"16px"},children:jsxRuntimeExports.jsx("i",{className:"fas fa-percentage"})}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#be185d",marginBottom:"8px"},children:[C.profitMargin.toFixed(1),"%"]}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#be185d",fontWeight:"500"},children:"Est. Profit Margin"})]})]})]}),C.chartData&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"40px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-chart-line",style:{color:"#7d8d86",fontSize:"20px"}}),jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1e293b"},children:"Sales Trends & Analytics"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>ee("daily"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:D==="daily"?"#3b82f6":"#f8fafc",color:D==="daily"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:D==="daily"?"0 4px 6px rgba(59, 130, 246, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-calendar-day"}),"Daily (30 days)"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>ee("weekly"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:D==="weekly"?"#10b981":"#f8fafc",color:D==="weekly"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:D==="weekly"?"0 4px 6px rgba(16, 185, 129, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-calendar-week"}),"Weekly (4 weeks)"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>ee("monthly"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:D==="monthly"?"#f59e0b":"#f8fafc",color:D==="monthly"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:D==="monthly"?"0 4px 6px rgba(245, 158, 11, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-calendar-alt"}),"Monthly (6 months)"]})]}),jsxRuntimeExports.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",minHeight:"220px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[D==="daily"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-chart-bar",style:{color:"#3b82f6",fontSize:"16px"}}),jsxRuntimeExports.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Daily Sales (Last 30 Days)"})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"end",gap:"4px",height:"150px"},children:C.chartData.daily.map((k,ce)=>{const Re=Math.max(...C.chartData.daily.map(wt=>wt.sales)),et=Re>0?k.sales/Re*120:0;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[jsxRuntimeExports.jsx("div",{style:{width:"100%",height:`${et}px`,background:k.sales>0?"#7d8d86":"#e5e7eb",borderRadius:"2px 2px 0 0",minHeight:"2px"},title:`${k.date}: ${k.sales} sales, ?${k.revenue.toFixed(2)}`}),jsxRuntimeExports.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:k.day})]},ce)})})]}),D==="weekly"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-chart-area",style:{color:"#10b981",fontSize:"16px"}}),jsxRuntimeExports.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Weekly Sales (Last 4 Weeks)"})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"end",gap:"8px",height:"150px"},children:C.chartData.weekly.map((k,ce)=>{const Re=Math.max(...C.chartData.weekly.map(wt=>wt.sales)),et=Re>0?k.sales/Re*120:0;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[jsxRuntimeExports.jsx("div",{style:{width:"100%",height:`${et}px`,background:k.sales>0?"#10b981":"#e5e7eb",borderRadius:"4px 4px 0 0",minHeight:"2px"},title:`${k.week}: ${k.sales} sales, ?${k.revenue.toFixed(2)}`}),jsxRuntimeExports.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:k.week})]},ce)})})]}),D==="monthly"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-chart-pie",style:{color:"#f59e0b",fontSize:"16px"}}),jsxRuntimeExports.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Monthly Sales (Last 6 Months)"})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"end",gap:"8px",height:"150px"},children:C.chartData.monthly.map((k,ce)=>{const Re=Math.max(...C.chartData.monthly.map(wt=>wt.sales)),et=Re>0?k.sales/Re*120:0;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[jsxRuntimeExports.jsx("div",{style:{width:"100%",height:`${et}px`,background:k.sales>0?"#f59e0b":"#e5e7eb",borderRadius:"4px 4px 0 0",minHeight:"2px"},title:`${k.month}: ${k.sales} sales, ?${k.revenue.toFixed(2)}`}),jsxRuntimeExports.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:k.month.split(" ")[0]})]},ce)})})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",marginBottom:"32px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-info-circle",style:{color:"#7d8d86",fontSize:"20px"}}),jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Product Information"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-barcode",style:{color:"#6b7280",fontSize:"16px"}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Product ID"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:R.product_id})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-tags",style:{color:"#6b7280",fontSize:"16px"}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Category"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:R.category})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-boxes",style:{color:"#6b7280",fontSize:"16px"}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Current Stock"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:R.stock_quantity})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-exclamation-triangle",style:{color:"#6b7280",fontSize:"16px"}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Reorder Level"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:R.reorder_level})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-euro-sign",style:{color:"#6b7280",fontSize:"16px"}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Price"}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:["?",R.is_weighted?`${R.price_per_unit}/${R.weight_unit}`:R.price.toFixed(2)]})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-weight",style:{color:"#6b7280",fontSize:"16px"}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Type"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:R.is_weighted?"Weighted Product":"Regular Product"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px",marginBottom:"32px"},children:[jsxRuntimeExports.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Sales Performance"}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",lineHeight:"1.6"},children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"8px"},children:[jsxRuntimeExports.jsx("strong",{children:"Average sales per day:"})," ",C.averageSalesPerDay.toFixed(1)]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"8px"},children:[jsxRuntimeExports.jsx("strong",{children:"Estimated profit:"})," ?",C.estimatedProfit.toFixed(2)]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"8px"},children:[jsxRuntimeExports.jsx("strong",{children:"Last sold:"})," ",C.lastSoldDate?new Date(C.lastSoldDate).toLocaleDateString():"Never"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Price per unit:"})," ?",R.is_weighted?`${R.price_per_unit}/${R.weight_unit}`:R.price.toFixed(2)]})]})]}),jsxRuntimeExports.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Top Selling Days (Last 30 Days)"}),C.topSellingDays.length>0?jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#7d8d86"},children:C.topSellingDays.map((k,ce)=>jsxRuntimeExports.jsxs("div",{style:{marginBottom:"4px"},children:[new Date(k.date).toLocaleDateString(),": ",k.count," sales"]},ce))}):jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#7d8d86"},children:"No sales in the last 30 days"})]})]}),jsxRuntimeExports.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-receipt",style:{color:"#7d8d86",fontSize:"20px"}}),jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Recent Sales"})]}),C.recentSalesList.length>0?jsxRuntimeExports.jsx("div",{style:{maxHeight:"300px",overflow:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",fontSize:"14px"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{borderBottom:"2px solid #e5e7eb",background:"#f9fafb"},children:[jsxRuntimeExports.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-calendar",style:{fontSize:"12px",color:"#6b7280",marginRight:"6px"}}),"Date"]}),jsxRuntimeExports.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-hashtag",style:{fontSize:"12px",color:"#6b7280",marginRight:"6px"}}),"Quantity"]}),jsxRuntimeExports.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-euro-sign",style:{fontSize:"12px",color:"#6b7280",marginRight:"6px"}}),"Price"]}),jsxRuntimeExports.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-user",style:{fontSize:"12px",color:"#6b7280",marginRight:"6px"}}),"Customer"]}),jsxRuntimeExports.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-user-tie",style:{fontSize:"12px",color:"#6b7280",marginRight:"6px"}}),"Cashier"]})]})}),jsxRuntimeExports.jsx("tbody",{children:C.recentSalesList.map((k,ce)=>jsxRuntimeExports.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[jsxRuntimeExports.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:[k.date," ",k.time]}),jsxRuntimeExports.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:[k.quantity," ",k.unit]}),jsxRuntimeExports.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:["?",k.price.toFixed(2)]}),jsxRuntimeExports.jsx("td",{style:{padding:"8px 0",color:"#3e3f29"},children:k.customer}),jsxRuntimeExports.jsx("td",{style:{padding:"8px 0",color:"#3e3f29"},children:k.cashier})]},ce))})]})}):jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#7d8d86",textAlign:"center",padding:"20px"},children:"No sales recorded for this product"})]})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"40px",marginBottom:"32px",background:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)",borderRadius:"16px",border:"1px solid #fecaca"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",fontSize:"20px",color:"#dc2626",marginBottom:"12px",fontWeight:"600"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-chart-line",style:{fontSize:"24px"}}),"No Sales Data Available"]}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#991b1b"},children:"This product hasn't been sold yet"})]}),jsxRuntimeExports.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Product Information"}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",fontSize:"14px",color:"#7d8d86"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Product ID:"})," ",R.product_id]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Category:"})," ",R.category]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Current Stock:"})," ",R.stock_quantity]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Reorder Level:"})," ",R.reorder_level]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Price:"})," ?",R.is_weighted?`${R.price_per_unit}/${R.weight_unit}`:R.price.toFixed(2)]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Type:"})," ",R.is_weighted?"Weighted Product":"Regular Product"]})]})]})]})]})}),jsxRuntimeExports.jsx($r,{})]})};let activeScanner=null,isModalOpen=!1;const setModalOpen=e=>{isModalOpen=e},useBarcodeScanner=({onBarcodeScanned:e,debounceMs:t=100,minLength:r=8,maxLength:n=20,isActive:a=!0,context:l="default"})=>{const[c,d]=reactExports.useState(!1),[x,f]=reactExports.useState(""),[h,g]=reactExports.useState(0),y=reactExports.useCallback(b=>{if(!activeScanner||activeScanner.context!==l||isModalOpen&&l!=="product-modal")return;const v=Date.now();if(v-h>t*3&&f(""),g(v),b.key==="Enter"){b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation();const R=x.trim();if(console.log(" Barcode scanner detected Enter, input:",R,"length:",R.length,"min:",r,"max:",n),R.length>=r&&R.length<=n){console.log(" Barcode valid, calling onBarcodeScanned"),e(R),f("");return}f("");return}b.key.length===1&&f(R=>{const A=R+b.key;return console.log(" Barcode scanner input:",A),A}),b.key==="Tab"||b.key==="Shift"||b.key==="Control"||b.key},[x,h,t,r,n,e,l]),_=reactExports.useCallback(()=>{d(!0),f(""),g(Date.now()),activeScanner={context:l,onBarcodeScanned:e}},[l,e]),E=reactExports.useCallback(()=>{d(!1),f(""),activeScanner&&activeScanner.context===l&&(activeScanner=null)},[l]);return reactExports.useEffect(()=>{if(c&&a){document.addEventListener("keydown",y,!0);const b=v=>{if(v.target&&v.target.tagName==="INPUT"){const R=v.target;R.value&&R.value.length>=r&&R.value.length<=n&&(console.log(" Fallback barcode detected:",R.value),e(R.value),R.value="")}};return document.addEventListener("input",b,!0),()=>{document.removeEventListener("keydown",y,!0),document.removeEventListener("input",b,!0)}}},[c,a,y,r,n,e]),{isListening:c,startListening:_,stopListening:E,currentInput:x}},generateReceiptHTML=(e,t,r,n,a)=>{const l=`RCP-${Date.now()}`,c=new Date,d=c.toLocaleDateString("en-IE"),x=c.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"}),h=(v=>v&&{USD:"$",EUR:"",GBP:"",CAD:"C$",AUD:"A$",JPY:""}[v]||"")(n?.currency),g=n?.business_name||n?.name||"Business",y=n?.address||"",_=n?.phone_number||"",E=n?.logo_url||"/retailpos/images/backgrounds/logo1.png",b=n?.receipt_footer||"Thank you for shopping with us!";return`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Receipt - ${l}</title>
      <style>
        body { 
          font-family: 'Courier New', monospace; 
          font-size: 12px; 
          line-height: 1.4; 
          margin: 0; 
          padding: 10px; 
          background: white;
          color: black;
        }
        .receipt { 
          width: 100%; 
          max-width: 400px; 
          margin: 0 auto; 
          border: 1px solid #ccc; 
          padding: 20px; 
          background: white;
        }
        .header { 
          text-align: center; 
          margin-bottom: 15px; 
          border-bottom: 1px dashed #333; 
          padding-bottom: 10px; 
        }
        .logo-fallback {
          display: none;
          background: #333;
          color: white;
          padding: 8px;
          text-align: center;
          font-weight: bold;
          margin-bottom: 10px;
        }
        .business-info { 
          font-size: 10px; 
          margin: 8px 0; 
        }
        .divider { 
          border-top: 1px dashed #333; 
          margin: 10px 0; 
        }
        .item-row { 
          display: flex; 
          justify-content: space-between; 
          margin: 3px 0; 
        }
        .total-row { 
          font-weight: bold; 
          border-top: 1px solid #333; 
          padding-top: 5px; 
          margin-top: 8px; 
        }
        .payment-info { 
          margin: 10px 0; 
        }
        .partial-payment-info {
          margin: 10px 0;
          padding: 8px;
          background: #fef3c7;
          border: 1px solid #f59e0b;
          border-radius: 4px;
        }
        .notes-section {
          margin: 10px 0;
          padding: 8px;
          background: #f5f5f5;
          border-radius: 4px;
        }
        .footer { 
          text-align: center; 
          margin-top: 15px; 
          font-size: 10px; 
          border-top: 1px dashed #333; 
          padding-top: 10px; 
        }
        .warning {
          color: #dc2626;
          font-weight: bold;
        }
        .success {
          color: #059669;
          font-weight: bold;
        }
      </style>
    </head>
    <body>
      <div class="receipt">
        <div class="header">
          <img src="${E}" alt="${g}" style="max-width: 80px; height: auto; display: block; margin: 0 auto 10px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
          <div class="logo-fallback" style="display: none; font-size: 24px; font-weight: bold; margin-bottom: 8px; color: #3e3f29;">${g}</div>
          <div class="business-info">
            ${y?`<div>${y}</div>`:""}
            ${_?`<div>${_}</div>`:""}
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="item-row">
          <span>Date: ${d}</span>
          <span>Time: ${x}</span>
        </div>
        <div class="item-row">
          <span>Receipt: ${l}</span>
          <span>Cashier: ${r?.username||"System"}</span>
        </div>
        
        ${t.customerName?`
        <div class="item-row">
          <span>Customer: ${t.customerName}</span>
        </div>
        `:""}
        
        <div class="divider"></div>
        
        ${e.items.map(v=>{const R=v.product?.name||v.sideBusinessItem?.name||"Unknown Item",A=v.product?.price||v.customPrice||v.sideBusinessItem?.price||0;return`
          <div class="item-row">
            <span>${R} x${v.quantity}</span>
            <span>${h}${(A*v.quantity).toFixed(2)}</span>
          </div>
        `}).join("")}
        
        <div class="divider"></div>
        
        <div class="item-row total-row">
          <span>SUBTOTAL:</span>
          <span>${h}${e.subtotal.toFixed(2)}</span>
        </div>
        <div class="item-row total-row">
          <span>GRAND TOTAL:</span>
          <span>${h}${e.total.toFixed(2)}</span>
        </div>
        
        <div class="payment-info">
          <div class="item-row">
            <span>Payment Method:</span>
            <span>${t.method.toUpperCase()}</span>
          </div>
          ${t.method==="cash"?`
          <div class="item-row">
            <span>Amount Received:</span>
            <span>${h}${parseFloat(t.amountEntered).toFixed(2)}</span>
          </div>
          <div class="item-row">
            <span>Change Given:</span>
            <span>${h}${t.change.toFixed(2)}</span>
          </div>
          `:t.method==="card"?`
          <div class="item-row">
            <span>Card: ****1234</span>
            <span>Approval: ${Math.floor(Math.random()*1e4)}</span>
          </div>
          `:""}
        </div>
        
        ${a?`
        <div class="partial-payment-info">
          <div style="font-weight: bold; margin-bottom: 5px; color: #92400e;">
            <i class="fa-solid fa-credit-card" style="margin-right: 5px;"></i>
            PARTIAL PAYMENT
          </div>
          <div class="item-row">
            <span>Amount Paid Today:</span>
            <span class="success">${h}${a.amountPaid.toFixed(2)}</span>
          </div>
          <div class="item-row">
            <span>Remaining Balance:</span>
            <span class="warning">${h}${a.amountRemaining.toFixed(2)}</span>
          </div>
          ${a.dueDate?`
          <div class="item-row">
            <span>Due Date:</span>
            <span>${new Date(a.dueDate).toLocaleDateString()}</span>
          </div>
          `:""}
          ${a.notes?`
          <div style="margin-top: 5px; font-size: 10px; color: #92400e;">
            Note: ${a.notes}
          </div>
          `:""}
        </div>
        `:""}
        
        ${t.receiptNotes?`
        <div class="divider"></div>
        <div class="notes-section">
          <div style="font-weight: bold; margin-bottom: 5px;">Notes:</div>
          <div style="font-size: 9px; line-height: 1.3; margin-left: 10px;">${t.receiptNotes}</div>
        </div>
        `:""}
        
        <div class="divider"></div>
        
        <div class="footer">
          <div>${b}</div>
          <div style="margin-top: 5px;">${g}</div>
          ${a?`
          <div style="margin-top: 10px; font-size: 9px; color: #92400e;">
            <strong>Please keep this receipt for your records</strong><br>
            Remaining balance: ${h}${a.amountRemaining.toFixed(2)}
          </div>
          `:""}
        </div>
      </div>
    </body>
    </html>
  `},printReceipt=(e,t,r,n,a)=>{const l=window.open("","_blank");l&&(l.document.write(generateReceiptHTML(e,t,r,n,a)),l.document.close(),l.print(),l.close())},ELEVENLABS_VOICES=[{id:"pNInz6obpgDQGcFmaJgB",name:"Adam (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"EXAVITQu4vr4xnSDxMaL",name:"Bella (Warm, Friendly)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Josh (Professional, Clear)",type:"standard",costPer1K:.18},{id:"AZnzlk1XvdvUeBnXmlld",name:"Domi (Confident, Energetic)",type:"standard",costPer1K:.18},{id:"ErXwobaYiN019PkySvjV",name:"Elli (Natural, Conversational)",type:"standard",costPer1K:.18},{id:"MF3mGyEYCl7XYWbV9V6O",name:"Rachel (Professional, Warm)",type:"standard",costPer1K:.18},{id:"TxGEqnHWrfWFTfGW9XjX",name:"Drew (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Clyde (Friendly, Approachable)",type:"standard",costPer1K:.18}],OPENAI_VOICES=[{id:"alloy",name:"Alloy (Neutral, Balanced)",type:"standard",costPer1K:.015},{id:"echo",name:"Echo (Clear, Professional)",type:"standard",costPer1K:.015},{id:"fable",name:"Fable (Warm, Storytelling)",type:"standard",costPer1K:.015},{id:"onyx",name:"Onyx (Deep, Authoritative)",type:"standard",costPer1K:.015},{id:"nova",name:"Nova (Friendly, Energetic)",type:"standard",costPer1K:.015},{id:"shimmer",name:"Shimmer (Soft, Gentle)",type:"standard",costPer1K:.015}];class TTSService{settings;usage;isInitialized=!1;constructor(){this.settings=this.loadSettings(),this.usage=this.loadUsage(),this.initializeUsage()}loadSettings(){const r="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";console.log("Environment variables loaded:"),console.log("VITE_ELEVENLABS_KEY:","Missing"),console.log("VITE_OPENAI_API_KEY:","Present");const n={enabled:!0,useElevenLabs:!1,selectedVoice:"pNInz6obpgDQGcFmaJgB",apiKey:"",dailyLimit:1e3,useOpenAI:!0,openaiApiKey:r,openaiVoice:"alloy"};try{const a=localStorage.getItem("tts-settings");if(a){const l=JSON.parse(a),c={...n,...l};return console.log("Loaded TTS settings from localStorage:",c),c}return console.log("No saved TTS settings, using defaults:",n),n}catch(a){return console.error("Error loading TTS settings:",a),n}}loadUsage(){const t={totalCharacters:0,totalCost:0,dailyUsage:0,dailyCost:0,lastResetDate:new Date().toISOString().split("T")[0]};try{const r=localStorage.getItem("tts-usage");return r?{...t,...JSON.parse(r)}:t}catch{return t}}saveSettings(){try{localStorage.setItem("tts-settings",JSON.stringify(this.settings))}catch(t){console.error("Failed to save TTS settings:",t)}}saveUsage(){try{localStorage.setItem("tts-usage",JSON.stringify(this.usage))}catch(t){console.error("Failed to save TTS usage:",t)}}initializeUsage(){const t=new Date().toISOString().split("T")[0];this.usage.lastResetDate!==t&&(this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=t,this.saveUsage())}getSettings(){return{...this.settings}}getUsage(){return this.initializeUsage(),{...this.usage}}updateSettings(t){this.settings={...this.settings,...t},this.saveSettings()}async speak(t){if(console.log("TTS Service speak called with:",t),console.log("TTS Settings:",this.settings),console.log("useElevenLabs:",this.settings.useElevenLabs),console.log("useOpenAI:",this.settings.useOpenAI),console.log("openaiApiKey present:",!!this.settings.openaiApiKey),console.log("openaiApiKey length:",this.settings.openaiApiKey?.length||0),!this.settings.enabled)return console.log("TTS not enabled"),!1;if(!this.settings.apiKey&&!this.settings.openaiApiKey)return console.log("No TTS API keys available, disabling TTS"),this.settings.enabled=!1,this.saveSettings(),!1;const r=t.length,n=this.calculateCost(r);if(this.usage.dailyUsage+r>this.settings.dailyLimit&&console.log("Daily limit exceeded, trying OpenAI fallback"),this.settings.useElevenLabs&&this.settings.apiKey&&this.usage.dailyUsage+r<=this.settings.dailyLimit){if(console.log("Trying ElevenLabs TTS with voice:",this.settings.selectedVoice),await this.speakWithElevenLabs(t))return this.updateUsage(r,n),!0;console.log("ElevenLabs failed, trying OpenAI fallback...")}if(this.settings.useOpenAI&&this.settings.openaiApiKey){console.log("Trying OpenAI TTS with voice:",this.settings.openaiVoice);const a=this.calculateOpenAICost(r);if(await this.speakWithOpenAI(t))return this.updateUsage(r,a),!0;console.log("OpenAI TTS failed")}return this.isBrowserTTSAvailable()?(console.log("Trying browser TTS as final fallback"),this.speakWithBrowserTTS(t)):(console.log("No TTS method available"),!1)}async speakWithDelay(t,r=2e3){return new Promise(n=>{setTimeout(async()=>{const a=await this.speak(t);n(a)},r)})}async speakWithElevenLabs(t){try{console.log("Making ElevenLabs API call..."),console.log("Voice ID:",this.settings.selectedVoice),console.log("API Key:",this.settings.apiKey.substring(0,10)+"...");const r=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${this.settings.selectedVoice}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":this.settings.apiKey},body:JSON.stringify({text:t,model_id:"eleven_monolingual_v1",voice_settings:{stability:.5,similarity_boost:.5}})});if(console.log("ElevenLabs response status:",r.status),!r.ok){const c=await r.text();throw console.error("ElevenLabs API error response:",c),new Error(`ElevenLabs API error: ${r.status} - ${c}`)}const n=await r.blob();console.log("Audio blob received, size:",n.size);const a=URL.createObjectURL(n),l=new Audio(a);return new Promise(c=>{l.onended=()=>{console.log("ElevenLabs audio playback ended"),URL.revokeObjectURL(a),c(!0)},l.onerror=d=>{console.error("ElevenLabs audio playback error:",d),URL.revokeObjectURL(a),c(!1)},l.onloadstart=()=>console.log("ElevenLabs audio started loading"),l.oncanplay=()=>console.log("ElevenLabs audio can play"),console.log("Starting ElevenLabs audio playback..."),l.play()})}catch(r){return console.error("ElevenLabs TTS error:",r),!1}}async speakWithOpenAI(t){try{console.log("Making OpenAI TTS API call..."),console.log("Voice:",this.settings.openaiVoice),console.log("API Key:",this.settings.openaiApiKey.substring(0,10)+"...");const r=await fetch("https://api.openai.com/v1/audio/speech",{method:"POST",headers:{Authorization:`Bearer ${this.settings.openaiApiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"tts-1",input:t,voice:this.settings.openaiVoice,response_format:"mp3"})});if(console.log("OpenAI response status:",r.status),!r.ok){const c=await r.text();throw console.error("OpenAI API error response:",c),new Error(`OpenAI API error: ${r.status} - ${c}`)}const n=await r.blob();console.log("OpenAI audio blob received, size:",n.size);const a=URL.createObjectURL(n),l=new Audio(a);return new Promise(c=>{l.onended=()=>{console.log("OpenAI audio playback ended"),URL.revokeObjectURL(a),c(!0)},l.onerror=d=>{console.error("OpenAI audio playback error:",d),URL.revokeObjectURL(a),c(!1)},l.onloadstart=()=>console.log("OpenAI audio started loading"),l.oncanplay=()=>console.log("OpenAI audio can play"),console.log("Starting OpenAI audio playback..."),l.play()})}catch(r){return console.error("OpenAI TTS error:",r),!1}}calculateCost(t){const r=ELEVENLABS_VOICES.find(n=>n.id===this.settings.selectedVoice);return r?t/1e3*r.costPer1K:0}calculateOpenAICost(t){const r=OPENAI_VOICES.find(n=>n.id===this.settings.openaiVoice);return r?t/1e3*r.costPer1K:0}updateUsage(t,r){this.usage.totalCharacters+=t,this.usage.totalCost+=r,this.usage.dailyUsage+=t,this.usage.dailyCost+=r,this.saveUsage()}stop(){console.log("TTS service stop called")}getAvailableVoices(){return ELEVENLABS_VOICES}getAvailableOpenAIVoices(){return OPENAI_VOICES}resetDailyUsage(){this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=new Date().toISOString().split("T")[0],this.saveUsage()}refreshSettings(){console.log("Refreshing TTS settings from environment..."),this.settings=this.loadSettings(),console.log("New settings loaded:",this.settings)}resetToDefaults(){console.log("Clearing all TTS settings and reloading from environment...");try{localStorage.removeItem("tts-settings"),console.log("Cleared localStorage settings")}catch(t){console.error("Error clearing settings:",t)}this.settings=this.loadSettings(),console.log("Reset to defaults:",this.settings)}isBrowserTTSAvailable(){return"speechSynthesis"in window&&"SpeechSynthesisUtterance"in window}async speakWithBrowserTTS(t){return this.isBrowserTTSAvailable()?new Promise(r=>{try{const n=new SpeechSynthesisUtterance(t);n.rate=.9,n.pitch=1,n.volume=.8,n.onend=()=>{console.log("Browser TTS completed"),r(!0)},n.onerror=a=>{console.error("Browser TTS error:",a.error),r(!1)},console.log("Starting browser TTS..."),speechSynthesis.speak(n)}catch(n){console.error("Browser TTS failed:",n),r(!1)}}):(console.log("Browser TTS not available"),!1)}async testOpenAI(){if(console.log("Testing OpenAI TTS connection..."),console.log("OpenAI API Key present:",!!this.settings.openaiApiKey),console.log("OpenAI Voice:",this.settings.openaiVoice),!this.settings.openaiApiKey)return console.error("No OpenAI API key found"),!1;try{const t=await this.speakWithOpenAI("Test message");return console.log("OpenAI test result:",t),t}catch(t){return console.error("OpenAI test failed:",t),!1}}async testBrowserTTS(){return console.log("Testing browser TTS..."),this.speakWithBrowserTTS("Test message")}}const ttsService=new TTSService,calculator="_calculator_17u22_1",tabHeaders="_tabHeaders_17u22_10",tabButton="_tabButton_17u22_16",active="_active_17u22_28",inactive="_inactive_17u22_32",tabIndicator="_tabIndicator_17u22_40",equationDisplay="_equationDisplay_17u22_49",mainDisplay="_mainDisplay_17u22_56",calculatorGrid="_calculatorGrid_17u22_68",button$1="_button_17u22_74",gray700="_gray700_17u22_90",gray800="_gray800_17u22_98",red500="_red500_17u22_106",smallText="_smallText_17u22_118",converterContainer="_converterContainer_17u22_122",converterTypeGrid="_converterTypeGrid_17u22_128",converterTypeButton="_converterTypeButton_17u22_134",currencyStatus="_currencyStatus_17u22_158",currencyStatusText="_currencyStatusText_17u22_165",refreshButton="_refreshButton_17u22_169",converterSection="_converterSection_17u22_187",converterLabel="_converterLabel_17u22_193",converterSelect="_converterSelect_17u22_198",converterInput="_converterInput_17u22_215",styles$3={calculator,tabHeaders,tabButton,active,inactive,tabIndicator,equationDisplay,mainDisplay,calculatorGrid,button:button$1,gray700,gray800,red500,smallText,converterContainer,converterTypeGrid,converterTypeButton,currencyStatus,currencyStatusText,refreshButton,converterSection,converterLabel,converterSelect,converterInput};function Calculator(){const[display,setDisplay]=reactExports.useState("0"),[equation,setEquation]=reactExports.useState(""),[waitingForNewValue,setWaitingForNewValue]=reactExports.useState(!1),[activeTab,setActiveTab]=reactExports.useState("Calculator"),[converterType,setConverterType]=reactExports.useState("Length"),[fromUnit,setFromUnit]=reactExports.useState("meters"),[toUnit,setToUnit]=reactExports.useState("feet"),[fromValue,setFromValue]=reactExports.useState("1"),[toValue,setToValue]=reactExports.useState("3.28084"),[exchangeRates,setExchangeRates]=reactExports.useState({}),[isLoadingRates,setIsLoadingRates]=reactExports.useState(!1),fetchExchangeRates=async()=>{const e="d173a811ba2e02c8c8806711";setIsLoadingRates(!0);try{const r=await(await fetch(`https://v6.exchangerate-api.com/v6/${e}/latest/USD`)).json();r.result==="success"?setExchangeRates(r.conversion_rates):console.error("Failed to fetch exchange rates:",r.error)}catch(t){console.error("Error fetching exchange rates:",t)}finally{setIsLoadingRates(!1)}};reactExports.useEffect(()=>{converterType==="Currency"&&Object.keys(exchangeRates).length===0&&fetchExchangeRates()},[converterType,exchangeRates]),reactExports.useEffect(()=>{if(converterType==="Currency"&&Object.keys(exchangeRates).length>0&&fromValue&&!isNaN(Number(fromValue))){const e=convert(Number(fromValue),fromUnit,toUnit,converterType);setToValue(e.toFixed(6).replace(/\.?0+$/,""))}},[exchangeRates,converterType,fromValue,fromUnit,toUnit]),reactExports.useEffect(()=>{if(fromValue&&!isNaN(Number(fromValue))){if(converterType==="Currency"&&Object.keys(exchangeRates).length>0){const e=convert(Number(fromValue),fromUnit,toUnit,converterType);setToValue(e.toFixed(6).replace(/\.?0+$/,""))}else if(converterType!=="Currency"){const e=convert(Number(fromValue),fromUnit,toUnit,converterType);setToValue(e.toFixed(6).replace(/\.?0+$/,""))}}},[fromUnit,toUnit,converterType,exchangeRates]);const inputNumber=e=>{waitingForNewValue?(setDisplay(String(e)),setWaitingForNewValue(!1)):setDisplay(display==="0"?String(e):display+e)},inputOperation=nextOperation=>{const inputValue=parseFloat(display);if(equation==="")setEquation(`${inputValue} ${nextOperation} `);else{const currentEquation=equation+display;try{const result=eval(currentEquation.replace(//g,"*").replace(//g,"/"));setEquation(`${result} ${nextOperation} `),setDisplay(String(result))}catch(e){setDisplay("Error"),setEquation("");return}}setWaitingForNewValue(!0)},calculate=()=>{if(equation&&!waitingForNewValue){const currentEquation=equation+display;try{const result=eval(currentEquation.replace(//g,"*").replace(//g,"/"));setEquation(currentEquation+" = "+result),setDisplay(String(result)),setWaitingForNewValue(!0)}catch(e){setDisplay("Error"),setEquation("")}}},clear=()=>{setDisplay("0"),setEquation(""),setWaitingForNewValue(!1)},percentage=()=>{const e=parseFloat(display)/100;setDisplay(String(e))},decimal=()=>{waitingForNewValue?(setDisplay("0."),setWaitingForNewValue(!1)):display.indexOf(".")===-1&&setDisplay(display+".")},conversionRates={Length:{meters:{feet:3.28084,inches:39.3701,yards:1.09361,kilometers:.001,centimeters:100,millimeters:1e3},feet:{meters:.3048,inches:12,yards:.333333,kilometers:3048e-7,centimeters:30.48,millimeters:304.8},inches:{meters:.0254,feet:.0833333,yards:.0277778,kilometers:254e-7,centimeters:2.54,millimeters:25.4},yards:{meters:.9144,feet:3,inches:36,kilometers:9144e-7,centimeters:91.44,millimeters:914.4},kilometers:{meters:1e3,feet:3280.84,inches:39370.1,yards:1093.61,centimeters:1e5,millimeters:1e6},centimeters:{meters:.01,feet:.0328084,inches:.393701,yards:.0109361,kilometers:1e-5,millimeters:10},millimeters:{meters:.001,feet:.00328084,inches:.0393701,yards:.00109361,kilometers:1e-6,centimeters:.1}},Weight:{kilograms:{pounds:2.20462,ounces:35.274,grams:1e3,tons:.001,stones:.157473},pounds:{kilograms:.453592,ounces:16,grams:453.592,tons:453592e-9,stones:.0714286},ounces:{kilograms:.0283495,pounds:.0625,grams:28.3495,tons:283495e-10,stones:.00446429},grams:{kilograms:.001,pounds:.00220462,ounces:.035274,tons:1e-6,stones:157473e-9},tons:{kilograms:1e3,pounds:2204.62,ounces:35274,grams:1e6,stones:157.473},stones:{kilograms:6.35029,pounds:14,ounces:224,grams:6350.29,tons:.00635029}},Temperature:{celsius:{fahrenheit:e=>e*9/5+32,kelvin:e=>e+273.15},fahrenheit:{celsius:e=>(e-32)*5/9,kelvin:e=>(e-32)*5/9+273.15},kelvin:{celsius:e=>e-273.15,fahrenheit:e=>(e-273.15)*9/5+32}}},unitOptions={Length:["meters","feet","inches","yards","kilometers","centimeters","millimeters"],Weight:["kilograms","pounds","ounces","grams","tons","stones"],Temperature:["celsius","fahrenheit","kelvin"],Currency:["USD","EUR","GBP","JPY","CAD","AUD","CHF","CNY","NGN","ZAR","EGP","KES","GHS","MAD","TND","DZD","ETB","UGX","TZS","MWK","ZMW","BWP","SLL","LRD","GMD","SLE","CDF","RWF","BIF","DJF","KMF","MGA","SCR","MUR","AOA","XOF","XAF","STN","CVE","SZL","LSL","NAD","ZWL"]},convert=(e,t,r,n)=>{if(n==="Temperature"){const a=conversionRates[n][t][r];return a(e)}else if(n==="Currency"){if(Object.keys(exchangeRates).length===0)return 0;if(t==="USD"){const a=exchangeRates[r];return e*a}else if(r==="USD"){const a=exchangeRates[t];return e/a}else{const a=exchangeRates[t],l=exchangeRates[r];return e/a*l}}else{const a=conversionRates[n][t][r];return e*a}},handleFromValueChange=e=>{if(setFromValue(e),e&&!isNaN(Number(e))&&converterType==="Currency"&&Object.keys(exchangeRates).length>0){const t=convert(Number(e),fromUnit,toUnit,converterType);setToValue(t.toFixed(6).replace(/\.?0+$/,""))}else if(e&&!isNaN(Number(e))&&converterType!=="Currency"){const t=convert(Number(e),fromUnit,toUnit,converterType);setToValue(t.toFixed(6).replace(/\.?0+$/,""))}else setToValue("")},handleToValueChange=e=>{if(setToValue(e),e&&!isNaN(Number(e))&&converterType==="Currency"&&Object.keys(exchangeRates).length>0){const t=convert(Number(e),toUnit,fromUnit,converterType);setFromValue(t.toFixed(6).replace(/\.?0+$/,""))}else if(e&&!isNaN(Number(e))&&converterType!=="Currency"){const t=convert(Number(e),toUnit,fromUnit,converterType);setFromValue(t.toFixed(6).replace(/\.?0+$/,""))}else setFromValue("")},handleConverterTypeChange=e=>{setConverterType(e);const t=unitOptions[e];if(e==="Currency")if(setFromUnit("NGN"),setToUnit("USD"),setFromValue("1"),Object.keys(exchangeRates).length>0){const r=convert(1,"NGN","USD",e);setToValue(r.toFixed(6).replace(/\.?0+$/,""))}else setToValue("0");else{setFromUnit(t[0]),setToUnit(t[1]),setFromValue("1");const r=convert(1,t[0],t[1],e);setToValue(r.toFixed(6).replace(/\.?0+$/,""))}},Button=({onClick:e,className:t,children:r,isActive:n=!1})=>jsxRuntimeExports.jsx("button",{onClick:e,className:`${styles$3.button} ${t} ${n?styles$3.active:""}`,children:r});return jsxRuntimeExports.jsxs("div",{className:styles$3.calculator,children:[jsxRuntimeExports.jsxs("div",{className:styles$3.tabHeaders,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>setActiveTab("Calculator"),className:`${styles$3.tabButton} ${activeTab==="Calculator"?styles$3.active:styles$3.inactive}`,children:["Calculator",activeTab==="Calculator"&&jsxRuntimeExports.jsx("div",{className:styles$3.tabIndicator})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>setActiveTab("Converter"),className:`${styles$3.tabButton} ${activeTab==="Converter"?styles$3.active:styles$3.inactive}`,children:["Converter",activeTab==="Converter"&&jsxRuntimeExports.jsx("div",{className:styles$3.tabIndicator})]})]}),activeTab==="Calculator"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$3.equationDisplay,children:equation}),jsxRuntimeExports.jsx("div",{className:styles$3.mainDisplay,children:display}),jsxRuntimeExports.jsxs("div",{className:styles$3.calculatorGrid,children:[jsxRuntimeExports.jsx(Button,{onClick:clear,className:styles$3.gray700,children:"C"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputOperation("+"),className:styles$3.gray700,children:"+"}),jsxRuntimeExports.jsx(Button,{onClick:percentage,className:styles$3.gray700,children:"%"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputOperation(""),className:styles$3.gray700,children:""}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputNumber("7"),className:styles$3.gray800,children:"7"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputNumber("8"),className:styles$3.gray800,children:"8"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputNumber("9"),className:styles$3.gray800,children:"9"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputOperation(""),className:styles$3.gray700,children:""}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputNumber("4"),className:styles$3.gray800,children:"4"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputNumber("5"),className:styles$3.gray800,children:"5"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputNumber("6"),className:styles$3.gray800,children:"6"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputOperation("-"),className:styles$3.gray700,children:""}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputNumber("1"),className:styles$3.gray800,children:"1"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputNumber("2"),className:styles$3.gray800,children:"2"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputNumber("3"),className:styles$3.gray800,children:"3"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputOperation("+"),className:styles$3.gray700,children:"+"}),jsxRuntimeExports.jsx(Button,{onClick:clear,className:`${styles$3.gray700} ${styles$3.smallText}`,children:"GT"}),jsxRuntimeExports.jsx(Button,{onClick:()=>inputNumber("0"),className:styles$3.gray800,children:"0"}),jsxRuntimeExports.jsx(Button,{onClick:decimal,className:styles$3.gray800,children:"."}),jsxRuntimeExports.jsx(Button,{onClick:calculate,className:styles$3.red500,isActive:!0,children:"="})]})]}):jsxRuntimeExports.jsxs("div",{className:styles$3.converterContainer,children:[jsxRuntimeExports.jsx("div",{className:styles$3.converterTypeGrid,children:["Length","Weight","Temperature","Currency"].map(e=>jsxRuntimeExports.jsx("button",{onClick:()=>handleConverterTypeChange(e),className:`${styles$3.converterTypeButton} ${converterType===e?styles$3.active:styles$3.inactive}`,children:e},e))}),converterType==="Currency"&&jsxRuntimeExports.jsxs("div",{className:styles$3.currencyStatus,children:[jsxRuntimeExports.jsx("span",{className:styles$3.currencyStatusText,children:isLoadingRates?"Loading rates...":Object.keys(exchangeRates).length>0?"Live rates":"API key needed"}),Object.keys(exchangeRates).length>0&&jsxRuntimeExports.jsxs("button",{onClick:fetchExchangeRates,className:styles$3.refreshButton,disabled:isLoadingRates,children:[isLoadingRates?"":""," Refresh"]})]}),jsxRuntimeExports.jsxs("div",{className:styles$3.converterSection,children:[jsxRuntimeExports.jsx("div",{className:styles$3.converterLabel,children:"From"}),jsxRuntimeExports.jsx("select",{value:fromUnit,onChange:e=>{if(setFromUnit(e.target.value),fromValue&&!isNaN(Number(fromValue))){if(converterType==="Currency"&&Object.keys(exchangeRates).length>0){const t=convert(Number(fromValue),e.target.value,toUnit,converterType);setToValue(t.toFixed(6).replace(/\.?0+$/,""))}else if(converterType!=="Currency"){const t=convert(Number(fromValue),e.target.value,toUnit,converterType);setToValue(t.toFixed(6).replace(/\.?0+$/,""))}}},className:styles$3.converterSelect,children:unitOptions[converterType].map(e=>jsxRuntimeExports.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),jsxRuntimeExports.jsx("input",{type:"number",value:fromValue,onChange:e=>handleFromValueChange(e.target.value),className:styles$3.converterInput,placeholder:"Enter value"})]}),jsxRuntimeExports.jsxs("div",{className:styles$3.converterSection,children:[jsxRuntimeExports.jsx("div",{className:styles$3.converterLabel,children:"To"}),jsxRuntimeExports.jsx("select",{value:toUnit,onChange:e=>{if(setToUnit(e.target.value),fromValue&&!isNaN(Number(fromValue))){if(converterType==="Currency"&&Object.keys(exchangeRates).length>0){const t=convert(Number(fromValue),fromUnit,e.target.value,converterType);setToValue(t.toFixed(6).replace(/\.?0+$/,""))}else if(converterType!=="Currency"){const t=convert(Number(fromValue),fromUnit,e.target.value,converterType);setToValue(t.toFixed(6).replace(/\.?0+$/,""))}}},className:styles$3.converterSelect,children:unitOptions[converterType].map(e=>jsxRuntimeExports.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),jsxRuntimeExports.jsx("input",{type:"number",value:toValue,onChange:e=>handleToValueChange(e.target.value),className:styles$3.converterInput,placeholder:"Result"})]})]})]})}const getLocalDateTime=()=>{const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),l=String(e.getMinutes()).padStart(2,"0"),c=String(e.getSeconds()).padStart(2,"0");return`${t}-${r}-${n} ${a}:${l}:${c}`},generateOrderDetailNumber=()=>Math.floor(Math.random()*1e7),orderEndMessages=["Order confirmed! Your jollof rice dreams are one step closer.","Thanks for shopping! Even suya is jealous of your taste.","Your order is secured tighter than plantain at a party.","Order complete! Somewhere, egusi soup just smiled at you.","Confirmed! Your basket was blessed by the spirit of fufu.","You did it! May your order arrive faster than puff-puff disappears.","Order locked! Your kitchen is about to smell like victory.","Thanks for shopping! Even aunties will approve of this order.","Your order is in! We'll protect it like Nigerians protect their jollof recipe.","Success! Your food is coming with more flavor than a pepper soup challenge.","Confirmed  your taste is hotter than shito pepper.","Order complete! Don't worry, we didn't forget the Maggi cubes.","Transaction approved! Time to prepare for a feast fit for ancestors.","Done! May your meals be as sweet as ripe plantain.","Your order is confirmed  better hide it before the neighbors smell it!"],speakOrderItems=async e=>{if(e.length===0){await ttsService.speak("No items in order yet.");return}let t=`Order contains ${e.length} item${e.length===1?"":"s"}. `,r=0;e.forEach((n,a)=>{const l=n.product?.name||n.sideBusinessItem?.name||"Unknown Item",c=n.quantity;let d=0;n.customPrice?d=n.customPrice:n.calculatedPrice?d=n.calculatedPrice/c:n.product?.price?d=n.product.price:n.sideBusinessItem?.price&&(d=n.sideBusinessItem.price);let x=0;n.weight&&n.calculatedPrice?(x=n.calculatedPrice,t+=`Item ${a+1}: ${l}, ${n.weight} units at ${n.product?.price_per_unit?.toFixed(2)||"0.00"} per unit, `):(x=d*c,t+=`Item ${a+1}: ${l}, quantity ${c}, ${d.toFixed(2)} each, `),r+=x;const f=[`making this ${r.toFixed(2)}. `,`total so far ${r.toFixed(2)}. `,`${r.toFixed(2)} total. `,`running total ${r.toFixed(2)}. `,`${r.toFixed(2)}. `,`now at ${r.toFixed(2)}. `],h=f[Math.floor(Math.random()*f.length)];t+=h}),await ttsService.speak(t),setTimeout(async()=>{const n=orderEndMessages[Math.floor(Math.random()*orderEndMessages.length)];await ttsService.speak(n)},500)},speakOrderTotal=async e=>{const t=[`Your total is ${e.toFixed(2)}. Time to feast!`,`Total: ${e.toFixed(2)}. Your taste buds are about to dance!`,`${e.toFixed(2)} total. May your meals be blessed!`,`Order total: ${e.toFixed(2)}. Even jollof rice approves!`],r=t[Math.floor(Math.random()*t.length)];await ttsService.speak(r)},speakItemAdded=async(e,t)=>{await ttsService.speak(`${e} added to order for ${t.toFixed(2)}.`)},Sales=()=>{const{user:e}=useAuth(),{businessId:t,businessLoading:r}=useBusinessId(),{selectedBranchId:n}=useBranch(),{currentBusiness:a}=useBusiness(),{isCollapsed:l}=useNav(),[c]=useSearchParams(),d=useNavigate(),[x,f]=reactExports.useState([]),[h,g]=reactExports.useState([]),[y,_]=reactExports.useState([]),[E,b]=reactExports.useState([]),[v,R]=reactExports.useState([]),[A,C]=reactExports.useState("All"),[L,I]=reactExports.useState(""),[ae,D]=reactExports.useState([]),[ee,Y]=reactExports.useState([]),[le,te]=reactExports.useState(!1),[oe,Be]=reactExports.useState(!1),[Pe,De]=reactExports.useState(()=>generateOrderDetailNumber()),[X,Se]=reactExports.useState({items:[],subtotal:0,tax:0,discount:0,total:0}),[z,re]=reactExports.useState(""),[T,J]=reactExports.useState(""),[B,j]=reactExports.useState(!0),[M,U]=reactExports.useState(!1),[K,Le]=reactExports.useState("cash"),[ve,Ae]=reactExports.useState(""),[ye,V]=reactExports.useState(0),[be,Ne]=reactExports.useState(""),[H,Te]=reactExports.useState(!1),[se,Ce]=reactExports.useState(!1),[pt,pe]=reactExports.useState(null),[ze,Ye]=reactExports.useState(""),[lt,Ke]=reactExports.useState(!1),[nt,mt]=reactExports.useState(null),[it,Je]=reactExports.useState(""),[bt,ne]=reactExports.useState(null),[Ue,Qe]=reactExports.useState(!1),[gt,Nt]=reactExports.useState(""),[It,Ot]=reactExports.useState(""),[Wt,Fe]=reactExports.useState(""),[tt,ut]=reactExports.useState([]),[,Q]=reactExports.useState(ttsService.getSettings()),[ge,rt]=reactExports.useState(!1),[xt,Mt]=reactExports.useState(!1),[Dt,ht]=reactExports.useState("idle"),[yr,Br]=reactExports.useState(""),[vt,Rr]=reactExports.useState(!1),[Gt,Ct]=reactExports.useState(!1),[Ut,Yr]=reactExports.useState(""),[_r,N]=reactExports.useState(0),[W,F]=reactExports.useState(""),[P,q]=reactExports.useState(null),[G,he]=reactExports.useState(null),[ke,ue]=reactExports.useState(!1);reactExports.useEffect(()=>{if(t==null){f([]),g([]),Y([]),R(["All"]),ut([]),he(null),q(null),ue(!1);return}_e(),$e();const S=c.get("transaction");S&&(q(S),ue(!0),Ve(S))},[c,t,r]),reactExports.useEffect(()=>{t&&!r&&ee.length>0?qe():t&&!r&&!ee.length&&Ee(A,L)},[A,L]),reactExports.useEffect(()=>{const S=fe=>{fe.key==="Enter"&&fe.ctrlKey&&X.items.length>0&&(fe.preventDefault(),U(!0)),fe.key==="Escape"&&(I(""),te(!1))};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[X.items]),reactExports.useEffect(()=>{qe()},[x,h,A,L,ee]),reactExports.useEffect(()=>{ee.length>0&&y.length===0&&_(ee)},[ee,y.length]),reactExports.useEffect(()=>{Vt()},[X.items]),reactExports.useEffect(()=>{const S=parseFloat(ve)||0,fe=vt?parseFloat(Ut)||0:X.total,Ge=S-fe;V(Ge>0?Ge:0)},[ve,X.total,vt,Ut]),reactExports.useEffect(()=>{if(vt){const S=parseFloat(Ut)||0,fe=Math.max(0,X.total-S);N(fe)}else N(0)},[vt,Ut,X.total]),reactExports.useEffect(()=>{Ae(vt&&Ut||X.total.toString())},[X.total,vt,Ut]);const _e=async()=>{if(t==null){f([]),g([]),Y([]),R(["All"]),j(!1),Be(!1);return}try{j(!0);const{data:S,error:fe}=await supabase.from("products").select("*").eq("business_id",t).order("sales_count",{ascending:!1}).limit(100);if(fe)throw fe;const{data:Ge,error:We}=await supabase.from("side_business_items").select(`
          *,
          side_businesses (name, business_type)
        `).eq("parent_shop_id",t).order("name");if(We)throw We;const Xe=S||[],ct=Ge||[];Y(Xe),g(ct);const He=Xe.map(At=>At.category).filter(Boolean),dt=ct.map(At=>At.side_businesses?.name).filter(Boolean),Bt=["All",...new Set([...He,...dt])];R(Bt),j(!1),Be(!1)}catch(S){console.error("Error fetching products:",S),f([]),g([]),Y([]),R(["All"]),j(!1),Be(!1)}},Ee=async(S,fe)=>{if(t==null){f([]),Be(!1);return}try{ee.length||j(!0);let Ge=supabase.from("products").select("*").eq("business_id",t).order("sales_count",{ascending:!1}).limit(50);if(S&&S!=="All"&&(Ge=Ge.eq("category",S)),fe&&fe.trim()){const He=fe.trim();Ge=Ge.or(`name.ilike.%${He}%,category.ilike.%${He}%,description.ilike.%${He}%,sku.ilike.%${He}%`)}const{data:We,error:Xe}=await Ge;if(Xe)throw Xe;f(We||[])}catch{}finally{j(!1),Be(!1)}},$e=async()=>{if(t==null){ut([]);return}try{const{data:S,error:fe}=await supabase.from("side_businesses").select("business_id, name").eq("business_type","service").eq("parent_shop_id",t).order("name");if(fe)throw fe;ut(S||[])}catch(S){console.error("Error fetching service businesses:",S),ut([])}},Ve=async S=>{if(t!=null)try{const fe=parseInt(S.replace("TXN-","")),{data:Ge,error:We}=await supabase.from("sales").select(`
          *,
          customers (name)
        `).eq("sale_id",fe).eq("business_id",t).single();if(We||!Ge){console.error("Error fetching transaction:",We);return}he(Ge);const{data:Xe,error:ct}=await supabase.from("sale_items").select(`
          *,
          products (
            name,
            category,
            price,
            stock_quantity,
            image_url,
            is_weighted,
            weight_unit,
            price_per_unit
          )
        `).eq("sale_id",fe);if(ct){console.error("Error fetching sale items:",ct);return}const He=(Xe||[]).map(Pt=>{const jr={product:{product_id:Pt.product_id.toString(),name:Pt.products?.name||"Unknown Product",price:Pt.price_each,category:Pt.products?.category||"Unknown",stock_quantity:Pt.products?.stock_quantity||0,image_url:Pt.products?.image_url,is_weighted:Pt.products?.is_weighted||!1,weight_unit:Pt.products?.weight_unit,price_per_unit:Pt.products?.price_per_unit},quantity:Pt.quantity,originalQuantity:Pt.quantity};return Pt.products?.is_weighted&&Pt.weight&&Pt.calculated_price&&(jr.weight=Pt.weight,jr.calculatedPrice=Pt.calculated_price,jr.originalWeight=Pt.weight,jr.originalCalculatedPrice=Pt.calculated_price),jr}),{data:dt,error:Bt}=await supabase.from("side_business_sales").select(`
          sale_id,
          quantity,
          total_amount,
          item_id,
          parent_shop_id,
          side_business_items (
            item_id,
            business_id,
            name,
            price,
            stock_qty,
            side_businesses (
              name,
              business_type
            )
          )
        `).eq("sale_id",fe).eq("parent_shop_id",t);Bt&&console.error("Error fetching side business items:",Bt);const At=(dt||[]).map(Pt=>{const fr=Pt.side_business_items;if(!fr)return null;const jr=Pt.quantity??0,Ts=Number(Pt.total_amount??0),Qr=jr>0?Ts/jr:fr.price??0,Js={item_id:fr.item_id,business_id:fr.business_id,name:fr.name,price:fr.price,stock_qty:fr.stock_qty,side_businesses:fr.side_businesses?{name:fr.side_businesses.name,business_type:fr.side_businesses.business_type}:void 0},Cs={sideBusinessItem:Js,quantity:jr||1,originalQuantity:jr||0},ls=Number.isFinite(Qr)?Qr:0,Hn=Js.price??0;return(Js.price==null||jr>0&&Math.abs(Hn*jr-Ts)>.01)&&(Cs.customPrice=ls),Cs}).filter(Pt=>Pt!==null),lr=[...He,...At];Se({items:lr,subtotal:0,tax:0,discount:0,total:0}),De(Number.isFinite(fe)?fe:generateOrderDetailNumber()),Ge.customers?.name&&re(Ge.customers.name)}catch{}},st=S=>{if(S.length<2){D([]),te(!1);return}const fe=S.toLowerCase().trim(),Ge=x.filter(ct=>{const He=ct.name.toLowerCase().includes(fe),dt=ct.category?.toLowerCase().includes(fe),Bt=ct.description?.toLowerCase().includes(fe),At=ct.sku?.toLowerCase().includes(fe);return He||dt||Bt||At}).slice(0,3),We=h.filter(ct=>{const He=ct.name.toLowerCase().includes(fe),dt=ct.side_businesses?.name.toLowerCase().includes(fe);return He||dt}).slice(0,2),Xe=[...Ge,...We].slice(0,5);D(Xe),te(Xe.length>0)},qe=()=>{let S=ee;if(A!=="All"&&(S=S.filter(Ge=>Ge.category===A)),L){const Ge=L.toLowerCase().trim();S=S.filter(We=>We.name.toLowerCase().includes(Ge)||We.category?.toLowerCase().includes(Ge)||We.description?.toLowerCase().includes(Ge)||We.sku?.toLowerCase().includes(Ge))}_(S);let fe=h;A!=="All"&&(fe=fe.filter(Ge=>Ge.side_businesses?.name===A)),L&&(fe=fe.filter(Ge=>Ge.name.toLowerCase().includes(L.toLowerCase()))),b(fe)},Ze=S=>{I(S),S.trim()&&/^\d{8,20}$/.test(S.trim())&&setTimeout(()=>{if(L===S&&S.trim()&&/^\d{8,20}$/.test(S.trim())){console.log(" Auto-detected barcode in search:",S.trim()),_t(S.trim()),I("");return}},100),st(S)},Et=S=>{I(S.name),te(!1),D([]),"product_id"in S?qt(S):Lr(S)},Vt=()=>{const S=X.items.reduce((Xe,ct)=>{if(ct.product)return ct.weight&&ct.calculatedPrice?Xe+ct.calculatedPrice:Xe+ct.product.price*ct.quantity;if(ct.sideBusinessItem){const He=ct.customPrice||ct.sideBusinessItem.price||0;return Xe+He*ct.quantity}return Xe},0),fe=0,Ge=0,We=S-Ge;Se(Xe=>({...Xe,subtotal:S,tax:fe,discount:Ge,total:We}))},qt=S=>{if(S.is_weighted&&S.price_per_unit&&S.weight_unit){mt(S),Je(""),Ke(!0);return}Se(fe=>fe.items.find(We=>We.product?.product_id===S.product_id&&!We.weight)?{...fe,items:fe.items.map(We=>We.product?.product_id===S.product_id&&!We.weight?{...We,quantity:We.quantity+1}:We)}:{...fe,items:[...fe.items,{product:S,quantity:1,originalQuantity:0}]}),speakItemAdded(S.name,S.price)},Yt=(S,fe)=>{const Ge=fe*(S.price_per_unit||0);Se(bt?We=>({...We,items:We.items.map(Xe=>Xe.product?.product_id===bt&&Xe.weight?{...Xe,weight:fe,calculatedPrice:Ge}:Xe)}):We=>({...We,items:[...We.items,{product:S,quantity:1,weight:fe,calculatedPrice:Ge,originalQuantity:0,originalWeight:0,originalCalculatedPrice:0}]})),Ke(!1),mt(null),ne(null),Je("")},Lr=S=>{if(S.price==null)pe(S),Ye(""),Ce(!0);else{Se(We=>We.items.find(ct=>ct.sideBusinessItem?.item_id===S.item_id)?{...We,items:We.items.map(ct=>ct.sideBusinessItem?.item_id===S.item_id?{...ct,quantity:ct.quantity+1}:ct)}:{...We,items:[...We.items,{sideBusinessItem:S,quantity:1,originalQuantity:0}]});const fe=S.name,Ge=S.price||0;speakItemAdded(fe,Ge)}},$r=()=>{if(!pt)return;const S=parseFloat(ze);if(isNaN(S)||S<0){alert("Please enter a valid price");return}Se(fe=>fe.items.find(We=>We.sideBusinessItem?.item_id===pt.item_id&&We.customPrice===S)?{...fe,items:fe.items.map(We=>We.sideBusinessItem?.item_id===pt.item_id&&We.customPrice===S?{...We,quantity:We.quantity+1}:We)}:{...fe,items:[...fe.items,{sideBusinessItem:pt,quantity:1,customPrice:S,originalQuantity:0}]}),Ce(!1),pe(null),Ye("")},k=async()=>{if(t==null){alert("Please select a business before creating a quick service item");return}if(!gt.trim()||!It||!Wt){alert("Please fill in all fields");return}const S=parseFloat(It);if(isNaN(S)||S<0){alert("Please enter a valid price");return}try{const fe={item_id:Date.now(),business_id:parseInt(Wt),name:gt.trim(),price:S,stock_quantity:null,side_businesses:{name:tt.find(Ge=>Ge.business_id.toString()===Wt)?.name||"Service",business_type:"service"}};Se(Ge=>({...Ge,items:[...Ge.items,{sideBusinessItem:fe,quantity:1,customPrice:S,originalQuantity:0}]})),speakItemAdded(gt.trim(),S),Nt(""),Ot(""),Fe(""),Qe(!1)}catch(fe){console.error("Error creating quick service:",fe),alert("Failed to create service. Please try again.")}},ce=(S,fe)=>{if(fe<=0){ir(S);return}Se(Ge=>({...Ge,items:Ge.items.map(We=>We.product?.product_id===S?{...We,quantity:fe}:We.sideBusinessItem?.item_id.toString()===S||`sb-${We.sideBusinessItem?.item_id}`===S?{...We,quantity:fe}:We)}))},Re=(S,fe)=>{if(fe<=0){ir(S);return}Se(Ge=>({...Ge,items:Ge.items.map(We=>{if(We.product?.product_id===S&&We.weight){const Xe=fe*(We.product.price_per_unit||0);return{...We,weight:fe,calculatedPrice:Xe}}return We})}))},et=S=>typeof S=="string"?S.trim().toLowerCase():"",wt=S=>{const fe=et(S);return x.find(Ge=>et(Ge.barcode)===fe)||null},at=(S,fe=0)=>{if(S==null||S=="")return fe;if(typeof S=="number")return Number.isFinite(S)?S:fe;const Ge=parseFloat(String(S));return Number.isFinite(Ge)?Ge:fe},ot=(S,fe=0)=>{if(S==null||S=="")return fe;if(typeof S=="number")return Number.isFinite(S)?Math.trunc(S):fe;const Ge=parseInt(String(S),10);return Number.isFinite(Ge)?Ge:fe},Rt=S=>({...S,price:at(S.price),stock_quantity:ot(S.stock_quantity),reorder_level:ot(S.reorder_level),tax_rate:at(S.tax_rate),is_weighted:!!S.is_weighted,price_per_unit:S.price_per_unit==null?null:at(S.price_per_unit),total_revenue:S.total_revenue==null?void 0:at(S.total_revenue),sales_count:S.sales_count==null?void 0:ot(S.sales_count),last_updated:S.last_updated,weight_unit:S.weight_unit,description:S.description,sku:S.sku,barcode:typeof S.barcode=="string"?S.barcode.trim():S.barcode,supplier_info:S.supplier_info,image_url:S.image_url}),_t=async S=>{console.log(" Barcode scanned:",S);let fe=wt(S);if(console.log(" Local product found:",fe),!fe){if(t==null){ht("not_found"),Br(S),setTimeout(()=>{ht("idle")},3e3);return}const Ge=et(S);console.log(" Searching database for barcode:",Ge,"business_id:",t);const{data:We,error:Xe}=await supabase.from("products").select("*").eq("business_id",t).ilike("barcode",Ge).limit(1);console.log(" Database query result:",We,"error:",Xe),Xe&&console.error("Barcode lookup failed:",Xe);const ct=We&&We.length>0?We[0]:null;if(ct){const He=Rt(ct);fe=He,f(dt=>dt.some(At=>At.product_id===He.product_id)?dt:[He,...dt].slice(0,50)),Y(dt=>dt.some(At=>At.product_id===He.product_id)?dt:[He,...dt].slice(0,50))}}fe?(console.log(" Adding product to order:",fe.name),qt(fe),ht("scanned"),Br(S),setTimeout(()=>{ht("idle")},2e3)):(console.log(" Product not found for barcode:",S),ht("not_found"),Br(S),setTimeout(()=>{ht("idle")},3e3))},kt=()=>{xt?(or(),Mt(!1),ht("idle")):(ur(),Mt(!0),ht("listening"))},{startListening:ur,stopListening:or}=useBarcodeScanner({onBarcodeScanned:_t,debounceMs:30,minLength:8,maxLength:20,isActive:xt,context:"sales-page"});reactExports.useEffect(()=>{setModalOpen(se||lt||Ue||M)},[se,lt,Ue,M]),reactExports.useEffect(()=>{if(!xt)return;const S=fe=>{if(fe.target&&fe.target.tagName==="INPUT"){const Ge=fe.target,We=Ge.value.trim();We.length>=8&&We.length<=20&&/^[A-Za-z0-9]+$/.test(We)&&(console.log(" Global barcode fallback detected:",We),_t(We),Ge.value="")}};return document.addEventListener("input",S,!0),()=>{document.removeEventListener("input",S,!0)}},[xt,_t]);const nr=S=>{S.product&&S.weight&&(mt(S.product),Je(S.weight.toString()),Ke(!0),ne(S.product.product_id))},ir=S=>{Se(fe=>({...fe,items:fe.items.filter(Ge=>Ge.product?.product_id!==S&&Ge.sideBusinessItem?.item_id.toString()!==S&&`sb-${Ge.sideBusinessItem?.item_id}`!==S)}))},dr=()=>{if(window.confirm("Are you sure you want to reset the current transaction? This will clear all items from the order.")){Se({items:[],subtotal:0,tax:0,discount:0,total:0}),De(generateOrderDetailNumber()),re(""),J(""),Le("cash"),Ae(""),V(0),Ne("");const S=document.createElement("div");S.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,S.textContent="Transaction reset successfully!",document.body.appendChild(S),setTimeout(()=>{document.body.removeChild(S)},3e3)}},Ks=()=>{const S={method:K,amountEntered:ve,change:ye,customerName:z,receiptNotes:be},fe=vt?{amountPaid:parseFloat(Ut)||0,amountRemaining:_r,dueDate:null,notes:W}:void 0;return generateReceiptHTML(X,S,e,a,fe)},Kr=()=>{const S={method:K,amountEntered:ve,change:ye,customerName:z,receiptNotes:be},fe=vt?{amountPaid:parseFloat(Ut)||0,amountRemaining:_r,dueDate:null,notes:W}:void 0;printReceipt(X,S,e,a,fe)},Qs=async()=>{if(!(X.items.length===0||r)){if(t==null){alert("Please select a business before processing a sale.");return}try{let S;if(ke&&P){const Xe=parseInt(P.replace("TXN-","")),{data:ct,error:He}=await supabase.from("sales").update({total_amount:X.total,payment_method:K}).eq("sale_id",Xe).eq("business_id",t).select().single();if(He)throw He;S=ct}else{let Xe=null;if(z.trim()){let Bt=supabase.from("customers").select("customer_id").eq("business_id",t).eq("name",z.trim());n&&(Bt=Bt.eq("branch_id",n));const{data:At,error:lr}=await Bt.single();if(At&&!lr)Xe=At.customer_id;else{const{data:Pt,error:fr}=await supabase.from("customers").insert([{name:z.trim(),phone_number:T.trim()||"000-000-0000",email:null,business_id:t,branch_id:n}]).select().single();fr?(console.error("Error creating customer:",fr),Xe=null):Xe=Pt.customer_id}}let ct="";vt&&(ct=`PARTIAL PAYMENT
Amount Paid Today: ${(parseFloat(Ut)||0).toFixed(2)}
Remaining Balance: ${_r.toFixed(2)}`,W&&(ct+=`

Partial Payment Notes: ${W}`)),be&&(ct+=(ct?`

`:"")+be);let He,dt;try{const Bt={datetime:getLocalDateTime(),total_amount:vt?parseFloat(Ut)||0:X.total,payment_method:K,cashier_id:e?.user_id,customer_id:Xe,discount_applied:X.discount,partial_payment:vt,partial_amount:vt?parseFloat(Ut)||0:null,remaining_amount:vt?_r:null,partial_notes:vt?W:null,notes:ct||null,business_id:t,branch_id:n},At=await supabase.from("sales").insert([Bt]).select("*").single();He=At.data,dt=At.error}catch{const At={datetime:getLocalDateTime(),total_amount:vt?parseFloat(Ut)||0:X.total,payment_method:K,cashier_id:e?.user_id,customer_id:Xe,discount_applied:X.discount,partial_payment:vt,partial_amount:vt?parseFloat(Ut)||0:null,remaining_amount:vt?_r:null,partial_notes:vt?W:null,business_id:t,branch_id:n},lr=await supabase.from("sales").insert([At]).select("*").single();He=lr.data,dt=lr.error}if(dt)throw dt;S=He}if(ke&&P){const Xe=X.items.filter(He=>He.product).reduce((He,dt)=>{const Bt=dt.originalQuantity??0,At=dt.quantity-Bt;if(dt.weight&&dt.calculatedPrice){const lr=dt.originalWeight??0,Pt=(dt.weight||0)-lr,fr=dt.originalCalculatedPrice??0,jr=(dt.calculatedPrice||0)-fr;Pt>0&&jr>0&&He.push({record:{sale_id:S.sale_id,product_id:dt.product.product_id,quantity:At>0?At:1,price_each:dt.product.price,weight:Pt,calculated_price:jr},revenue:jr})}else At>0&&He.push({record:{sale_id:S.sale_id,product_id:dt.product.product_id,quantity:At,price_each:dt.product.price,weight:null,calculated_price:null},revenue:dt.product.price*At});return He},[]);if(Xe.length>0){const{error:He}=await supabase.from("sale_items").insert(Xe.map(dt=>dt.record));if(He)throw He;for(const dt of Xe){const{error:Bt}=await supabase.rpc("increment_product_sales",{product_id_param:dt.record.product_id,revenue_amount:dt.revenue,business_id_param:t});Bt&&console.error("Error updating product sales counter:",Bt)}}const ct=X.items.filter(He=>He.sideBusinessItem);for(const He of ct){const dt=He.originalQuantity??0,Bt=He.quantity-dt;if(Bt<=0)continue;let At=He.sideBusinessItem.item_id;if(At>1e9){const{data:Pt,error:fr}=await supabase.from("side_business_items").insert({business_id:He.sideBusinessItem.business_id,parent_shop_id:t,name:He.sideBusinessItem.name,price:He.customPrice||He.sideBusinessItem.price,stock_quantity:null,notes:"Created via Quick Service",branch_id:n}).select().single();if(fr)throw fr;At=Pt.item_id}const{error:lr}=await supabase.from("side_business_sales").insert({item_id:At,quantity:Bt,price_each:He.customPrice||He.sideBusinessItem.price||0,total_amount:(He.customPrice||He.sideBusinessItem.price||0)*Bt,payment_method:K,date_time:getLocalDateTime(),business_id:He.sideBusinessItem.business_id,parent_shop_id:t,branch_id:n});if(lr)throw lr}}else{const Xe=X.items.filter(He=>He.product).map(He=>({sale_id:S.sale_id,product_id:He.product.product_id,quantity:He.quantity,price_each:He.product.price,weight:He.weight||null,calculated_price:He.calculatedPrice||null})),ct=X.items.filter(He=>He.sideBusinessItem);for(const He of ct){let dt=He.sideBusinessItem.item_id;if(dt>1e9){const{data:At,error:lr}=await supabase.from("side_business_items").insert({business_id:He.sideBusinessItem.business_id,parent_shop_id:t,name:He.sideBusinessItem.name,price:He.customPrice||He.sideBusinessItem.price,stock_quantity:null,notes:"Created via Quick Service",branch_id:n}).select().single();if(lr)throw lr;dt=At.item_id}const{error:Bt}=await supabase.from("side_business_sales").insert({item_id:dt,quantity:He.quantity,price_each:He.customPrice||He.sideBusinessItem.price||0,total_amount:(He.customPrice||He.sideBusinessItem.price||0)*He.quantity,payment_method:K,date_time:getLocalDateTime(),business_id:He.sideBusinessItem.business_id,parent_shop_id:t,branch_id:n});if(Bt)throw Bt}if(Xe.length>0){const{error:He}=await supabase.from("sale_items").insert(Xe);if(He)throw He;for(const dt of Xe){const Bt=dt.calculated_price||dt.price_each*dt.quantity,{error:At}=await supabase.rpc("increment_product_sales",{product_id_param:dt.product_id,revenue_amount:Bt,business_id_param:t});At&&console.error("Error updating product sales counter:",At)}}}const fe=X.items.filter(Xe=>Xe.product).map(Xe=>{const ct=Xe.originalQuantity??0,He=Xe.quantity-ct;return{item:Xe,quantityDelta:He}}).filter(({quantityDelta:Xe})=>Xe>0);for(const{item:Xe,quantityDelta:ct}of fe){const{error:He}=await supabase.from("products").update({stock_quantity:Xe.product.stock_quantity-ct,last_updated:getLocalDateTime()}).eq("product_id",Xe.product.product_id).eq("business_id",t);if(He)throw He;const{error:dt}=await supabase.from("inventory_movements").insert([{product_id:Xe.product.product_id,quantity_change:-ct,movement_type:"Sale",reference_id:S.sale_id,business_id:t}]);if(dt)throw dt}const Ge=X.items.filter(Xe=>Xe.sideBusinessItem);for(const Xe of Ge){if(!Xe.sideBusinessItem||Xe.sideBusinessItem.stock_quantity===null)continue;const ct=Xe.originalQuantity??0,He=Xe.quantity-ct;if(He<=0)continue;const{error:dt}=await supabase.from("side_business_items").update({stock_quantity:Xe.sideBusinessItem.stock_quantity-He}).eq("item_id",Xe.sideBusinessItem.item_id).eq("parent_shop_id",t);if(dt)throw dt}Se({items:[],subtotal:0,tax:0,discount:0,total:0}),De(generateOrderDetailNumber()),re(""),J(""),Le("cash"),Ae(""),V(0),Ne(""),vt&&_r>0&&S?.sale_id&&await Er(z,T,_r,S.sale_id),Rr(!1),Yr(""),N(0),F("");const We=document.createElement("div");We.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,We.textContent=ke?"Items added to transaction successfully!":vt?`Partial payment processed! ${(parseFloat(Ut)||0).toFixed(2)} paid, ${_r.toFixed(2)} remaining. Reminder created.`:"Sale processed successfully!",document.body.appendChild(We),setTimeout(()=>{document.body.removeChild(We)},3e3),speakOrderTotal(X.total),U(!1),ke&&P&&setTimeout(()=>{d(`/transaction/${P}`)},2e3)}catch(S){alert(`Failed to process sale: ${S instanceof Error?S.message:"Unknown error"}`)}}},Qt=()=>{const S=new Date,fe=S.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),Ge=S.toLocaleDateString("en-GB",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"});return`${fe} - ${Ge}`},Er=async(S,fe,Ge,We)=>{if(t!=null)try{const Xe=e?.user_id||1,ct=`Payment Due: ${S||"Customer"}`,He=fe?`
Phone: ${fe}`:"",dt=`Customer owes ${Ge.toFixed(2)} from Sale #${We}. Please follow up for payment.${He}`,Bt=new Date;Bt.setDate(Bt.getDate()+1);const At=Bt.toISOString().split("T")[0],lr={title:ct,body:dt,remind_date:At,owner_id:Xe,business_id:t,branch_id:n,sale_id:We},{error:Pt}=await supabase.from("reminders").insert([lr]).select().single();Pt?(console.error("Error creating partial payment reminder:",Pt),console.error("Reminder data attempted:",lr)):console.log("Partial payment reminder created successfully")}catch(Xe){console.error("Error creating partial payment reminder:",Xe)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{style:{position:"fixed",top:0,left:l?"70px":"200px",right:0,bottom:0,display:"flex",height:"100vh",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",fontFamily:"Poppins, sans-serif",zIndex:1e3,transition:"left 0.3s ease"},children:[jsxRuntimeExports.jsxs("div",{style:{flex:1,background:"#ffffff",margin:"0",borderRadius:"0",display:"flex",flexDirection:"column",overflow:"hidden",borderRight:"2px solid #e5e7eb"},children:[jsxRuntimeExports.jsxs("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:ke?"#fef3c7":"#f9fafb"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-cash-register",style:{marginRight:"12px",color:"#7d8d86"}}),"Point Of Sales"]}),jsxRuntimeExports.jsx(BranchSelector,{size:"sm",showLabel:!1})]}),ke&&jsxRuntimeExports.jsxs("div",{style:{background:"#f59e0b",color:"#92400e",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus-circle"}),"Adding to Transaction #",P]})]}),ke&&jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:"8px 0 0 0",fontStyle:"italic"},children:"Adding new items to existing transaction. Existing items will be preserved."})]}),jsxRuntimeExports.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f5f5f5"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",maxWidth:"800px",margin:"0 auto"},children:[jsxRuntimeExports.jsxs("div",{style:{position:"relative",flex:1,background:"#ffffff",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"2px solid #000000",transition:"all 0.3s ease"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-search",style:{color:"#6b7280",fontSize:"18px",marginRight:"12px"}}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search products, categories, SKU, or scan barcode...",value:L,onChange:S=>Ze(S.target.value),onFocus:S=>{S.target.parentElement.parentElement.style.borderColor="#3b82f6",S.target.parentElement.parentElement.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.15)",te(ae.length>0)},onBlur:S=>{S.target.parentElement.parentElement.style.borderColor="#000000",S.target.parentElement.parentElement.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",setTimeout(()=>te(!1),200)},onKeyDown:S=>{if(S.key==="Enter"){S.preventDefault();const fe=L.trim();if(fe&&/^\d{8,20}$/.test(fe)){console.log(" Barcode detected in search:",fe),_t(fe),I("");return}fe&&te(!1)}},style:{flex:1,padding:"4px 8px",border:"none",background:"transparent",fontSize:"16px",outline:"none",color:"#1f2937",fontWeight:"500"}}),L&&jsxRuntimeExports.jsx("button",{onClick:()=>{I(""),te(!1),D([])},style:{background:"#f3f4f6",border:"none",borderRadius:"6px",padding:"6px",cursor:"pointer",color:"#6b7280",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:S=>{S.target.style.background="#e5e7eb"(S.target).style.color="#374151"},onMouseLeave:S=>{S.target.style.background="#f3f4f6"(S.target).style.color="#6b7280"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"})})]}),le&&ae.length>0&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"none",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",zIndex:1e3,maxHeight:"300px",overflowY:"auto",marginTop:"8px",backdropFilter:"blur(10px)"},children:ae.map((S,fe)=>{const Ge="product_id"in S,We="item_id"in S;return jsxRuntimeExports.jsxs("div",{onClick:()=>Et(S),style:{padding:"16px 20px",cursor:"pointer",borderBottom:fe<ae.length-1?"1px solid #f1f5f9":"none",display:"flex",alignItems:"center",gap:"16px",transition:"all 0.2s ease",borderRadius:fe===0?"16px 16px 0 0":fe===ae.length-1?"0 0 16px 16px":"0"},onMouseEnter:Xe=>{Xe.target.style.background="linear-gradient(135deg, #f8fafc, #f1f5f9)"(Xe.target).style.transform="translateX(4px)"},onMouseLeave:Xe=>{Xe.target.style.background="transparent"(Xe.target).style.transform="translateX(0)"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",background:Ge&&S.image_url?`url(${S.image_url})`:"linear-gradient(135deg, #667eea, #764ba2)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",color:"#ffffff",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:We&&jsxRuntimeExports.jsx("i",{className:"fa-solid fa-briefcase"})}),jsxRuntimeExports.jsxs("div",{style:{flex:1},children:[jsxRuntimeExports.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"600",color:"#1e293b",lineHeight:"1.3"},children:S.name}),jsxRuntimeExports.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:Ge?`${S.category}  ${S.price.toFixed(2)}`:`${S.side_businesses?.name||"Side Business"}  ${S.price?`${S.price.toFixed(2)}`:"Custom Price"}`})]}),jsxRuntimeExports.jsxs("div",{style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"#ffffff",borderRadius:"8px",padding:"8px 12px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus"}),"Add"]})]},Ge?S.product_id:`sb-${S.item_id}`)})})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Qe(!0),style:{padding:"14px 32px",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"500",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",minWidth:"120px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",background:"#000000",color:"white"},onMouseEnter:S=>{S.currentTarget.style.background="#333333",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(31, 41, 55, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.background="#000000",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseDown:S=>{S.currentTarget.style.background="#1a1a1a",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 4px 15px rgba(31, 41, 55, 0.15)"},onMouseUp:S=>{S.currentTarget.style.background="#333333",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(31, 41, 55, 0.2)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus-circle",style:{marginRight:"8px"}}),"Quick Service"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ct(!0),style:{padding:"14px 32px",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"500",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",minWidth:"120px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",background:"#6b7280",color:"white"},onMouseEnter:S=>{S.currentTarget.style.background="#4b5563",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.background="#6b7280",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseDown:S=>{S.currentTarget.style.background="#374151",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.15)"},onMouseUp:S=>{S.currentTarget.style.background="#4b5563",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.2)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-calculator",style:{marginRight:"8px"}}),"Calculator"]})]})]})}),jsxRuntimeExports.jsxs("div",{style:{display:"none",padding:"16px 32px",borderBottom:"1px solid #e5e7eb",background:xt?"#f0f9ff":"#f9fafb",transition:"background-color 0.3s ease"},children:[xt&&jsxRuntimeExports.jsx("input",{type:"text",style:{position:"absolute",left:"-9999px",opacity:0,pointerEvents:"none"},onInput:S=>{const fe=S.target.value;fe&&fe.length>=8&&fe.length<=20&&(console.log(" Hidden input barcode detected:",fe),_t(fe),S.target.value="")},autoFocus:!0}),jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:jsxRuntimeExports.jsxs("div",{style:{position:"relative",flex:1,minWidth:"300px",maxWidth:"400px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Barcode Scanner"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Scan or enter barcode manually",style:{flex:1,padding:"12px 16px",border:`2px solid ${xt?"#3b82f6":"#d1d5db"}`,borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.3s ease",background:xt?"#f0f9ff":"#ffffff",color:xt?"#1e40af":"#1f2937"},onKeyDown:S=>{if(S.key==="Enter"){const fe=S.target.value.trim();fe&&fe.length>=8&&fe.length<=20&&(console.log(" Manual barcode input:",fe),_t(fe),S.target.value="")}}}),jsxRuntimeExports.jsx("button",{onClick:kt,style:{padding:"14px 32px",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"500",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",minWidth:"120px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",background:Dt==="listening"?"#dc2626":Dt==="scanned"?"#16a34a":Dt==="not_found"?"#ea580c":"#000000",color:"white"},onMouseEnter:S=>{S.currentTarget.style.background,S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseDown:S=>{S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.15)"},onMouseUp:S=>{S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.2)"},children:Dt==="listening"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-stop",style:{marginRight:"8px"}}),"Stop Scanner"]}):Dt==="scanned"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-check",style:{marginRight:"8px"}}),"Item Added!"]}):Dt==="not_found"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Not Found"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-barcode",style:{marginRight:"8px"}}),"Scan Barcode"]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ct(!0),style:{padding:"14px 32px",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"500",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",minWidth:"120px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",background:"#000000",color:"white"},onMouseEnter:S=>{S.currentTarget.style.background="#333333",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(31, 41, 55, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.background="#000000",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseDown:S=>{S.currentTarget.style.background="#1a1a1a",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 4px 15px rgba(31, 41, 55, 0.15)"},onMouseUp:S=>{S.currentTarget.style.background="#333333",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(31, 41, 55, 0.2)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-calculator",style:{marginRight:"8px"}}),"Calculator"]})]})]})})]}),jsxRuntimeExports.jsx("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb"},children:jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"0px",overflowX:"auto",paddingBottom:"0px",borderBottom:"2px solid #e5e7eb"},children:v.map(S=>{let fe=0;S==="All"?fe=x.length+h.length:fe=h.filter(ct=>ct.side_businesses?.name===S).length;const Ge=ct=>{const He=[{bg:"#FFE4E1",text:"#8B4513",border:"#FFB6C1"},{bg:"#E6F3FF",text:"#003366",border:"#87CEEB"},{bg:"#F0FFF0",text:"#006400",border:"#98FB98"},{bg:"#FFF8DC",text:"#B8860B",border:"#F0E68C"},{bg:"#F5F0FF",text:"#4B0082",border:"#DDA0DD"},{bg:"#FFF0F5",text:"#8B008B",border:"#FFB6C1"},{bg:"#F0FFFF",text:"#008B8B",border:"#AFEEEE"},{bg:"#FFF5EE",text:"#A0522D",border:"#F5DEB3"}],dt=ct.split("").reduce((Bt,At)=>(Bt=(Bt<<5)-Bt+At.charCodeAt(0),Bt&Bt),0);return He[Math.abs(dt)%He.length]},We=A===S,Xe=Ge(S);return jsxRuntimeExports.jsxs("button",{onClick:()=>C(S),style:{background:We?Xe.bg:"#ffffff",color:Xe.text,border:We?`2px solid ${Xe.border}`:`2px solid ${Xe.border}`,borderBottom:We?`2px solid ${Xe.bg}`:"none",borderRadius:"8px 8px 0 0",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",whiteSpace:"nowrap",transition:"all 0.2s ease",minWidth:"120px",position:"relative",zIndex:We?2:1,marginBottom:We?"-2px":"0px"},onMouseEnter:ct=>{We||(ct.currentTarget.style.background=Xe.bg,ct.currentTarget.style.color=Xe.text)},onMouseLeave:ct=>{We||(ct.currentTarget.style.background="#ffffff",ct.currentTarget.style.color=Xe.text)},children:[S," ",fe>0?`(${fe})`:""]},S)})})}),jsxRuntimeExports.jsxs("div",{style:{flex:1,padding:"24px 32px",overflowY:"auto",transition:"opacity 0.2s ease"},children:[jsxRuntimeExports.jsx("div",{style:{marginBottom:"16px"},children:jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 4px 0"},children:"Products"})}),y.length===0?jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",color:"#374151",margin:"0 0 8px 0"},children:"No products found"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",margin:"0",color:"#6b7280"},children:L?`No products match "${L}"`:"Try selecting a different category"})]}):jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"12px",transition:"all 0.3s ease"},children:[y.map(S=>jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:fe=>{fe.currentTarget.style.transform="translateY(-1px)",fe.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",fe.currentTarget.style.border="2px solid #6b7280"},onMouseLeave:fe=>{fe.currentTarget.style.transform="translateY(0)",fe.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",fe.currentTarget.style.border="2px solid #6b7280"},children:[(()=>{const fe=X.items.filter(Ge=>Ge.product?.product_id===S.product_id&&!Ge.weight).reduce((Ge,We)=>Ge+We.quantity,0);return fe>0?jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"8px",left:"8px",background:"#dc2626",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"600",zIndex:1,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},children:fe}):null})(),jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100px",background:S.image_url?`url(${S.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:!S.image_url&&jsxRuntimeExports.jsx("i",{className:"fa-solid fa-image",style:{fontSize:"24px",color:"#9ca3af"}})}),jsxRuntimeExports.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:S.name}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:S.is_weighted&&S.price_per_unit&&S.weight_unit?S.weight_unit==="g"&&S.price_per_unit<1?`${(S.price_per_unit*1e3).toFixed(2)}/kg`:S.weight_unit==="kg"&&S.price_per_unit>=1?`${S.price_per_unit.toFixed(2)}/kg`:`${S.price_per_unit.toFixed(2)}/${S.weight_unit}`:`${S.price.toFixed(2)}`}),jsxRuntimeExports.jsxs("button",{onClick:()=>qt(S),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:fe=>{fe.currentTarget.style.background="#3e3f29"},onMouseLeave:fe=>{fe.currentTarget.style.background="#7d8d86"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},S.product_id)),E.map(S=>jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",border:"3px solid #374151",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:fe=>{fe.currentTarget.style.transform="translateY(-1px)",fe.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseLeave:fe=>{fe.currentTarget.style.transform="translateY(0)",fe.currentTarget.style.boxShadow="none"},children:[jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100px",background:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"24px",color:"#9ca3af"}})}),jsxRuntimeExports.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:S.name}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:S.price?`${S.price.toFixed(2)}`:"Custom Price"}),jsxRuntimeExports.jsxs("button",{onClick:()=>Lr(S),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:fe=>{fe.currentTarget.style.background="#3e3f29"},onMouseLeave:fe=>{fe.currentTarget.style.background="#7d8d86"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},`sb-${S.item_id}`))]})]})]}),jsxRuntimeExports.jsxs("div",{style:{width:"500px",background:"#f8f9fa",margin:"0",borderRadius:"0",display:"flex",flexDirection:"column",overflow:"hidden"},children:[jsxRuntimeExports.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",background:"#e5e7eb"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px",fontWeight:"600"},children:e?.username?.charAt(0).toUpperCase()}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{style:{margin:"0",fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["Hello, ",e?.username]})})]}),jsxRuntimeExports.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:Qt()})]}),jsxRuntimeExports.jsxs("div",{style:{flex:1,padding:"24px",overflowY:"auto"},children:[jsxRuntimeExports.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:["Order Detail #",Pe]}),X.items.length===0?jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",color:"#6b7280",padding:"40px 0"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),jsxRuntimeExports.jsx("p",{children:"No items in order"})]}):jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:X.items.map(S=>{const fe=S.product?.product_id||`sb-${S.sideBusinessItem?.item_id}`,Ge=S.product?.name||S.sideBusinessItem?.name||"Unknown Item",We=S.product?.price||S.customPrice||S.sideBusinessItem?.price||0,Xe=!!S.sideBusinessItem;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#ffffff",borderRadius:"8px",border:"3px solid #374151",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",background:Xe?"linear-gradient(135deg, #f3f4f6, #e5e7eb)":S.product?.image_url?`url(${S.product.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:Xe&&jsxRuntimeExports.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"16px",color:"#9ca3af"}})}),jsxRuntimeExports.jsxs("div",{style:{flex:1},children:[jsxRuntimeExports.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:Ge.length>20?Ge.substring(0,20)+"...":Ge}),jsxRuntimeExports.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#7d8d86",fontWeight:"600"},children:S.weight&&S.calculatedPrice?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[S.weight," ",S.product?.weight_unit,"  ",S.calculatedPrice.toFixed(2)]}):`${We.toFixed(2)}`})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!S.weight&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ce(fe,S.quantity-1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),jsxRuntimeExports.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:S.quantity}),jsxRuntimeExports.jsx("button",{onClick:()=>ce(fe,S.quantity+1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),S.weight&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>Re(fe,S.weight-.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),jsxRuntimeExports.jsxs("button",{onClick:()=>nr(S),style:{minWidth:"60px",height:"24px",borderRadius:"4px",border:"1px solid #7d8d86",background:"#f9fafb",color:"#7d8d86",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"500",padding:"0 4px"},title:"Click to edit weight",children:[S.weight," ",S.product?.weight_unit]}),jsxRuntimeExports.jsx("button",{onClick:()=>Re(fe,S.weight+.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ir(fe),style:{width:"24px",height:"24px",borderRadius:"4px",border:"none",background:"#374151",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",marginLeft:"4px"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-trash"})})]})]},fe)})})]}),X.items.length>0&&jsxRuntimeExports.jsxs("div",{style:{background:"#f1f3f4",border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"4px"},children:["Items: ",X.items.length]}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",color:"#9ca3af"},children:["Subtotal: ",X.subtotal.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"right"},children:[jsxRuntimeExports.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",marginBottom:"2px"},children:["Total: ",X.total.toFixed(2)]}),jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Ready to pay"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",marginBottom:"12px"},children:[jsxRuntimeExports.jsxs("button",{onClick:dr,disabled:X.items.length===0,style:{width:"120px",padding:"14px 16px",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"500",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:X.items.length===0?"not-allowed":"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",background:X.items.length===0?"#9ca3af":"#000000",color:"white",opacity:X.items.length===0?.6:1},onMouseEnter:S=>{X.items.length>0&&(S.currentTarget.style.background="#333333",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(31, 41, 55, 0.2)")},onMouseLeave:S=>{X.items.length>0&&(S.currentTarget.style.background="#000000",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)")},onMouseDown:S=>{X.items.length>0&&(S.currentTarget.style.background="#1a1a1a",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 4px 15px rgba(31, 41, 55, 0.15)")},onMouseUp:S=>{X.items.length>0&&(S.currentTarget.style.background="#333333",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(31, 41, 55, 0.2)")},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-rotate-left",style:{marginRight:"8px"}}),"Reset"]}),jsxRuntimeExports.jsxs("button",{onClick:async()=>{if(X.items.length!==0){if(ge){console.log("Stopping TTS..."),ttsService.stop(),rt(!1);return}console.log("Announce Order clicked!"),console.log("Order items:",X.items),rt(!0),ttsService.updateSettings({enabled:!0}),Q(ttsService.getSettings()),console.log("TTS Settings after enabling:",ttsService.getSettings());try{await speakOrderItems(X.items),setTimeout(()=>{ttsService.updateSettings({enabled:!1}),Q(ttsService.getSettings()),rt(!1)},3e3)}catch(S){console.error("TTS Error:",S),rt(!1),ttsService.updateSettings({enabled:!1}),Q(ttsService.getSettings())}}},disabled:X.items.length===0,style:{width:"100px",padding:"14px 12px",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"500",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:X.items.length===0?"not-allowed":"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",background:X.items.length===0?"#9ca3af":"#4a5568",color:"white",opacity:X.items.length===0?.6:1},onMouseEnter:S=>{X.items.length>0&&(S.currentTarget.style.background="#2d3748",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(31, 41, 55, 0.2)")},onMouseLeave:S=>{X.items.length>0&&(S.currentTarget.style.background="#4a5568",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)")},onMouseDown:S=>{X.items.length>0&&(S.currentTarget.style.background="#1a202c",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 4px 15px rgba(31, 41, 55, 0.15)")},onMouseUp:S=>{X.items.length>0&&(S.currentTarget.style.background="#2d3748",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(31, 41, 55, 0.2)")},children:[jsxRuntimeExports.jsx("i",{className:ge?"fa-solid fa-stop":"fa-solid fa-play",style:{marginRight:"8px",fontSize:"14px"}}),ge?"Stop":"Play"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>U(!0),disabled:X.items.length===0,style:{width:"140px",padding:"14px 20px",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"500",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:X.items.length===0?"not-allowed":"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",background:X.items.length===0?"#9ca3af":"#000000",color:"white",opacity:X.items.length===0?.6:1},onMouseEnter:S=>{X.items.length>0&&(S.currentTarget.style.background="#333333",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(31, 41, 55, 0.2)")},onMouseLeave:S=>{X.items.length>0&&(S.currentTarget.style.background="#000000",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)")},onMouseDown:S=>{X.items.length>0&&(S.currentTarget.style.background="#1a1a1a",S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 4px 15px rgba(31, 41, 55, 0.15)")},onMouseUp:S=>{X.items.length>0&&(S.currentTarget.style.background="#333333",S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 8px 25px rgba(31, 41, 55, 0.2)")},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-credit-card",style:{marginRight:"8px"}}),"Purchase"]})]})]})]}),M&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"20px",width:"95%",maxWidth:"700px",maxHeight:"95vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"8px",borderBottom:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1f2937"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-receipt",style:{marginRight:"12px",color:"#7d8d86"}}),"Sales Summary"]}),jsxRuntimeExports.jsx("button",{onClick:()=>U(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#6b7280",cursor:"pointer",padding:"4px"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-xmark"})})]}),jsxRuntimeExports.jsx("div",{style:{marginBottom:"16px"},children:jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Customer Information"})}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Customer Name (Optional)"}),jsxRuntimeExports.jsx("input",{type:"text",value:z,onChange:S=>re(S.target.value),placeholder:"Enter customer name (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Phone Number (Optional)"}),jsxRuntimeExports.jsx("input",{type:"tel",value:T,onChange:S=>J(S.target.value),placeholder:"Enter phone number (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"16px"}})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Payment Method"}),jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:["cash","card","credit"].map(S=>jsxRuntimeExports.jsxs("button",{onClick:()=>Le(S),style:{background:K===S?"#7d8d86":"#f3f4f6",color:K===S?"white":"#374151",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",textTransform:"capitalize",transition:"all 0.2s ease"},children:[jsxRuntimeExports.jsx("i",{className:`fa-solid fa-${S==="cash"?"money-bill":S==="card"?"credit-card":"hand-holding-dollar"}`,style:{marginRight:"6px"}}),S]},S))})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0"},children:"Payment Options"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Rr(!vt),vt?(Yr(""),N(0)):(Yr(X.total.toString()),N(0))},style:{background:vt?"#ef4444":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:[jsxRuntimeExports.jsx("i",{className:`fa-solid fa-${vt?"times":"credit-card"}`,style:{fontSize:"12px"}}),vt?"Disable Partial":"Enable Partial Payment"]})]}),vt&&jsxRuntimeExports.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-info-circle",style:{color:"#f59e0b"}}),jsxRuntimeExports.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#92400e"},children:"Partial Payment Enabled"})]}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"14px",color:"#92400e"},children:[jsxRuntimeExports.jsxs("div",{children:["Amount to pay now: ",jsxRuntimeExports.jsxs("strong",{children:["",(parseFloat(Ut)||0).toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{children:["Remaining amount: ",jsxRuntimeExports.jsxs("strong",{children:["",_r.toFixed(2)]})]}),_r>0&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#fef2f2",border:"1px solid #fca5a5",borderRadius:"4px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"6px",color:"#dc2626"}}),jsxRuntimeExports.jsxs("strong",{style:{color:"#dc2626"},children:["Still need to pay: ",_r.toFixed(2)]})]})]})]}),vt&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Amount to Pay Now ()"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",min:"0",max:X.total,value:Ut,onChange:S=>{const fe=S.target.value;Yr(fe);const Ge=parseFloat(fe)||0;N(Math.max(0,X.total-Ge))},style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},placeholder:`Enter amount (max ${X.total.toFixed(2)})`})]}),vt&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Notes (Optional)"}),jsxRuntimeExports.jsx("textarea",{value:W,onChange:S=>F(S.target.value),placeholder:"Add any notes about this partial payment...",style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit",transition:"border-color 0.2s ease"}})]})]}),K==="cash"&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Amount Received"}),jsxRuntimeExports.jsx("div",{style:{marginBottom:"12px"},children:jsxRuntimeExports.jsxs("button",{onClick:()=>Ae(vt?Ut:X.total.toFixed(2)),style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:S=>S.target.style.background="#f9fafb",onMouseOut:S=>S.target.style.background="#ffffff",children:["Set Exact Amount (",vt?(parseFloat(Ut)||0).toFixed(2):X.total.toFixed(2),")"]})}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",value:ve,onChange:S=>Ae(S.target.value),placeholder:`Enter amount: ${vt?(parseFloat(Ut)||0).toFixed(2):X.total.toFixed(2)}`,style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"block",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"18px",fontWeight:"500",outline:"none",background:"#ffffff",textAlign:"center"}}),ye>0&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",color:"#0c4a6e",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-coins",style:{marginRight:"8px"}}),"Change: ",ye.toFixed(2)]}),vt&&_r>0&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"2px solid #dc2626",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Still need to pay: ",_r.toFixed(2)]}),ve&&parseFloat(ve)<X.total&&!vt&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"1px solid #f87171",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Need ",((vt?parseFloat(Ut)||0:X.total)-parseFloat(ve)).toFixed(2)," more"]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Receipt Notes (Optional)"}),jsxRuntimeExports.jsx("textarea",{value:be,onChange:S=>Ne(S.target.value),placeholder:"Add notes for receipt (e.g., partial payment, special instructions, etc.)",style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit"}}),jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:"8px 0 0 0"},children:"These notes will appear on the printed receipt"})]}),jsxRuntimeExports.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"12px",marginBottom:"16px"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Summary"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Subtotal"}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["",X.subtotal.toFixed(2)]})]}),X.discount>0&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Discount"}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["",X.discount.toFixed(2)]})]}),vt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Amount to Pay Now"}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#7d8d86"},children:["",(parseFloat(Ut)||0).toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Remaining Amount"}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#ef4444"},children:["",_r.toFixed(2)]})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid #d1d5db",marginTop:"8px"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:vt?"Total Order":"Total"}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"18px",fontWeight:"600",color:"#7d8d86"},children:["",X.total.toFixed(2)]})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"space-between"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Te(!0),style:{background:"#ffffff",color:"#3e3f29",border:"1px solid #3e3f29",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-eye"}),"View Receipt"]}),jsxRuntimeExports.jsxs("button",{onClick:Kr,style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>U(!1),style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),jsxRuntimeExports.jsxs("button",{onClick:Qs,disabled:K==="cash"&&(!ve||parseFloat(ve)<(vt?parseFloat(Ut)||0:X.total)),style:{background:K==="cash"&&(!ve||parseFloat(ve)<(vt?parseFloat(Ut)||0:X.total))?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:K==="cash"&&(!ve||parseFloat(ve)<(vt?parseFloat(Ut)||0:X.total))?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:K==="cash"&&(!ve||parseFloat(ve)<(vt?parseFloat(Ut)||0:X.total))?.6:1},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-credit-card"}),vt?"Process Partial Payment":"Process Sale"]})]})]})]})}),H&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",width:"95vw",height:"95vh",overflow:"auto",position:"relative"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>Te(!1),style:{position:"absolute",top:"12px",right:"12px",background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#6b7280",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},onMouseOver:S=>S.target.style.background="#f3f4f6",onMouseOut:S=>S.target.style.background="none",children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"})}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0",textAlign:"center"},children:"Receipt Preview"}),jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:Ks()},style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"30px",background:"#ffffff",fontFamily:"Courier New, monospace",fontSize:"16px",lineHeight:"1.6",maxWidth:"600px",margin:"0 auto"}})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>Te(!1),style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Te(!1),Kr()},style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #3e3f29 0%, #7d8d86 100%)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]})]})}),se&&pt&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[jsxRuntimeExports.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"Enter Custom Price"}),jsxRuntimeExports.jsxs("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#6b7280"},children:["Set the price for: ",jsxRuntimeExports.jsx("strong",{children:pt.name})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price ()"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",min:"0",value:ze,onChange:S=>Ye(S.target.value),placeholder:"0.00",style:{width:"100%",maxWidth:"300px",padding:"12px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onKeyDown:S=>{S.key==="Enter"&&$r()},autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Ce(!1),pe(null),Ye("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:$r,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Add to Order"})]})]})}),lt&&nt&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:bt?"Edit Weight":"Enter Weight"}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"16px"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:"0 0 8px 0"},children:nt.name}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"12px",color:"#9ca3af",margin:"0 0 12px 0"},children:["Price: ",nt.price_per_unit?.toFixed(2)," per ",nt.weight_unit]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:["Weight (",nt.weight_unit,")"]}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",min:"0",value:it,onChange:S=>Je(S.target.value),placeholder:`Enter weight in ${nt.weight_unit}`,style:{width:"100%",maxWidth:"300px",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:S=>S.target.style.borderColor="#7d8d86",onBlur:S=>S.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),it&&parseFloat(it)>0&&jsxRuntimeExports.jsxs("div",{style:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#374151",margin:"0 0 4px 0"},children:"Total Price:"}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:["",((parseFloat(it)||0)*(nt.price_per_unit||0)).toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Ke(!1),mt(null),ne(null),Je("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const S=parseFloat(it);S>0&&Yt(nt,S)},disabled:!it||parseFloat(it)<=0,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!it||parseFloat(it)<=0?"#d1d5db":"#7d8d86",color:!it||parseFloat(it)<=0?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:!it||parseFloat(it)<=0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:bt?"Update Weight":"Add to Order"})]})]})}),Ue&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[jsxRuntimeExports.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"24px",fontWeight:"600",color:"#1f2937",display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus-circle",style:{color:"#10b981"}}),"Create Quick Service"]}),jsxRuntimeExports.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280"},children:"Create a service on-the-fly with custom name and price. No need to predefine items!"}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Business"}),jsxRuntimeExports.jsxs("select",{value:Wt,onChange:S=>Fe(S.target.value),style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:S=>S.target.style.borderColor="#7d8d86",onBlur:S=>S.target.style.borderColor="#e5e7eb",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a service business"}),tt.map(S=>jsxRuntimeExports.jsx("option",{value:S.business_id,children:S.name},S.business_id))]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:gt,onChange:S=>Nt(S.target.value),placeholder:"e.g., Haircut, Consultation, Repair...",style:{width:"100%",maxWidth:"300px",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:S=>S.target.style.borderColor="#7d8d86",onBlur:S=>S.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price ()"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",min:"0",value:It,onChange:S=>Ot(S.target.value),placeholder:"0.00",style:{width:"100%",maxWidth:"300px",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:S=>S.target.style.borderColor="#7d8d86",onBlur:S=>S.target.style.borderColor="#e5e7eb"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Qe(!1),Nt(""),Ot(""),Fe("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),jsxRuntimeExports.jsxs("button",{onClick:k,disabled:!gt.trim()||!It||!Wt,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!gt.trim()||!It||!Wt?"#d1d5db":"linear-gradient(135deg, #10b981, #059669)",color:!gt.trim()||!It||!Wt?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"600",cursor:!gt.trim()||!It||!Wt?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus"}),"Add to Order"]})]})]})}),Gt&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{position:"relative",backgroundColor:"transparent",borderRadius:"16px",padding:"0",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ct(!1),style:{position:"absolute",top:"10px",right:"10px",background:"rgba(0, 0, 0, 0.7)",border:"none",borderRadius:"50%",width:"40px",height:"40px",fontSize:"20px",cursor:"pointer",color:"#ffffff",zIndex:1001,display:"flex",alignItems:"center",justifyContent:"center"},children:""}),jsxRuntimeExports.jsx(Calculator,{})]})})]})},searchContainer="_searchContainer_tecz1_2",searchBarSection="_searchBarSection_tecz1_12",searchBarWrapper="_searchBarWrapper_tecz1_16",searchInputWrapper="_searchInputWrapper_tecz1_22",searchIcon="_searchIcon_tecz1_40",searchInput="_searchInput_tecz1_22",clearButton="_clearButton_tecz1_65",searchResults="_searchResults_tecz1_87",resultsCount="_resultsCount_tecz1_91",filtersSection="_filtersSection_tecz1_98",filtersContainer="_filtersContainer_tecz1_103",filterGroup="_filterGroup_tecz1_110",filterLabel="_filterLabel_tecz1_116",filterSelect="_filterSelect_tecz1_123",sortToggleButton="_sortToggleButton_tecz1_140",clearFiltersButton="_clearFiltersButton_tecz1_158",styles$2={searchContainer,searchBarSection,searchBarWrapper,searchInputWrapper,searchIcon,searchInput,clearButton,searchResults,resultsCount,filtersSection,filtersContainer,filterGroup,filterLabel,filterSelect,sortToggleButton,clearFiltersButton},SearchContainer=({searchTerm:e="",onSearchChange:t,searchPlaceholder:r="Search...",showSearchResults:n=!1,searchResultsCount:a=0,onClearSearch:l,filters:c=[],sortOptions:d=[],onSortToggle:x,sortOrder:f="desc",onClearFilters:h,hasActiveFilters:g=!1})=>jsxRuntimeExports.jsxs("div",{className:styles$2.searchContainer,children:[t&&jsxRuntimeExports.jsx("div",{className:styles$2.searchBarSection,children:jsxRuntimeExports.jsxs("div",{className:styles$2.searchBarWrapper,children:[jsxRuntimeExports.jsxs("div",{className:styles$2.searchInputWrapper,children:[jsxRuntimeExports.jsx("i",{className:`fa-solid fa-search ${styles$2.searchIcon}`}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:r,value:e,onChange:y=>t(y.target.value),className:styles$2.searchInput}),e&&l&&jsxRuntimeExports.jsx("button",{onClick:l,className:styles$2.clearButton,title:"Clear search",children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"})})]}),n&&e&&jsxRuntimeExports.jsx("div",{className:styles$2.searchResults,children:jsxRuntimeExports.jsxs("span",{className:styles$2.resultsCount,children:[a," result",a!==1?"s":""," found"]})})]})}),(c.length>0||d.length>0||x||g)&&jsxRuntimeExports.jsx("div",{className:styles$2.filtersSection,children:jsxRuntimeExports.jsxs("div",{className:styles$2.filtersContainer,children:[c.map((y,_)=>jsxRuntimeExports.jsxs("div",{className:styles$2.filterGroup,children:[jsxRuntimeExports.jsxs("label",{className:styles$2.filterLabel,children:[y.label,":"]}),jsxRuntimeExports.jsx("select",{value:y.value,onChange:E=>y.onChange(E.target.value),className:styles$2.filterSelect,children:y.options.map(E=>jsxRuntimeExports.jsx("option",{value:E.value,children:E.label},E.value))})]},_)),d.map((y,_)=>jsxRuntimeExports.jsxs("div",{className:styles$2.filterGroup,children:[jsxRuntimeExports.jsxs("label",{className:styles$2.filterLabel,children:[y.label,":"]}),jsxRuntimeExports.jsx("select",{value:y.value,onChange:E=>y.onChange(E.target.value),className:styles$2.filterSelect,children:y.options.map(E=>jsxRuntimeExports.jsx("option",{value:E.value,children:E.label},E.value))})]},_)),x&&jsxRuntimeExports.jsx("button",{onClick:x,className:styles$2.sortToggleButton,title:`Sort ${f==="asc"?"Descending":"Ascending"}`,children:jsxRuntimeExports.jsx("i",{className:`fa-solid fa-sort-${f==="asc"?"up":"down"}`})}),g&&h&&jsxRuntimeExports.jsxs("button",{onClick:h,className:styles$2.clearFiltersButton,title:"Clear all filters",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"}),"Clear"]})]})})]}),sideBusinessesContainer="_sideBusinessesContainer_2opul_2",pageHeader="_pageHeader_2opul_8",pageTitle="_pageTitle_2opul_17",primaryButton="_primaryButton_2opul_31",statisticsGrid="_statisticsGrid_2opul_54",statisticsCard="_statisticsCard_2opul_61",statisticsCardContent="_statisticsCardContent_2opul_75",statisticsInfo="_statisticsInfo_2opul_81",statisticsLabel="_statisticsLabel_2opul_85",statisticsValue="_statisticsValue_2opul_92",statisticsIcon="_statisticsIcon_2opul_99",statisticsIconPurple="_statisticsIconPurple_2opul_104",statisticsIconBlue="_statisticsIconBlue_2opul_108",statisticsIconGreen="_statisticsIconGreen_2opul_112",statisticsIconOrange="_statisticsIconOrange_2opul_116",mainContentGrid="_mainContentGrid_2opul_121",contentPanel="_contentPanel_2opul_128",contentPanelHeader="_contentPanelHeader_2opul_142",contentPanelTitle="_contentPanelTitle_2opul_151",contentPanelBody="_contentPanelBody_2opul_158",emptyStateMessage="_emptyStateMessage_2opul_165",emptyStateMessageIcon="_emptyStateMessageIcon_2opul_171",emptyStateMessageText="_emptyStateMessageText_2opul_177",listContainer="_listContainer_2opul_184",listContainerDivided="_listContainerDivided_2opul_189",listItemCard="_listItemCard_2opul_193",listItemCardContent="_listItemCardContent_2opul_210",listItemCardIcon="_listItemCardIcon_2opul_217",listItemCardMain="_listItemCardMain_2opul_234",listItemCardTitle="_listItemCardTitle_2opul_238",listItemCardSubtitle="_listItemCardSubtitle_2opul_245",listItemCardMeta="_listItemCardMeta_2opul_251",listItemCardPrice="_listItemCardPrice_2opul_258",listItemCardStock="_listItemCardStock_2opul_264",listItemCardCount="_listItemCardCount_2opul_269",listItemCardTime="_listItemCardTime_2opul_274",listItemCardActions="_listItemCardActions_2opul_279",actionButton="_actionButton_2opul_284",actionButtonIcon="_actionButtonIcon_2opul_303",statusBadge="_statusBadge_2opul_308",statusBadgeRental="_statusBadgeRental_2opul_316",statusBadgeResale="_statusBadgeResale_2opul_321",statusBadgeService="_statusBadgeService_2opul_326",statusBadgeGray="_statusBadgeGray_2opul_331",statusBadgeCash="_statusBadgeCash_2opul_336",statusBadgeCard="_statusBadgeCard_2opul_341",statusBadgeMobile="_statusBadgeMobile_2opul_346",modalOverlay$1="_modalOverlay_2opul_352",modalDialog="_modalDialog_2opul_363",modalDialogTitle="_modalDialogTitle_2opul_373",modalDialogForm="_modalDialogForm_2opul_380",formFieldGroup="_formFieldGroup_2opul_386",formFieldLabel="_formFieldLabel_2opul_391",formFieldInput="_formFieldInput_2opul_399",formFieldTextarea="_formFieldTextarea_2opul_421",formFieldSelect="_formFieldSelect_2opul_445",actionButtonDanger="_actionButtonDanger_2opul_498",standardButton="_standardButton_2opul_508",standardButtonSecondary="_standardButtonSecondary_2opul_518",standardButtonDanger="_standardButtonDanger_2opul_527",standardButtonSuccess="_standardButtonSuccess_2opul_536",businessDetailModalHeader="_businessDetailModalHeader_2opul_546",businessAnalyticsSection="_businessAnalyticsSection_2opul_556",analyticsSectionTitle="_analyticsSectionTitle_2opul_560",analyticsGrid="_analyticsGrid_2opul_569",analyticsCard="_analyticsCard_2opul_576",analyticsCardHeader="_analyticsCardHeader_2opul_589",analyticsIcon="_analyticsIcon_2opul_596",analyticsIconBlue="_analyticsIconBlue_2opul_602",analyticsIconGreen="_analyticsIconGreen_2opul_606",analyticsIconPurple="_analyticsIconPurple_2opul_610",analyticsPeriod="_analyticsPeriod_2opul_614",analyticsCardContent="_analyticsCardContent_2opul_620",analyticsMetric="_analyticsMetric_2opul_626",analyticsLabel="_analyticsLabel_2opul_632",analyticsValue="_analyticsValue_2opul_638",itemsSectionHeader="_itemsSectionHeader_2opul_645",restockButton="_restockButton_2opul_652",restockActionButton="_restockActionButton_2opul_671",editActionButton="_editActionButton_2opul_681",formFieldHelp="_formFieldHelp_2opul_692",modalHeader$1="_modalHeader_2opul_700",modalCloseButton="_modalCloseButton_2opul_709",required="_required_2opul_726",errorMessage$1="_errorMessage_2opul_732",listItemCardNotes="_listItemCardNotes_2opul_750",restockInfo="_restockInfo_2opul_761",restockItemName="_restockItemName_2opul_769",restockCurrentStock="_restockCurrentStock_2opul_776",restockPreview="_restockPreview_2opul_782",restockPreviewText="_restockPreviewText_2opul_790",businessDetailModalIcon="_businessDetailModalIcon_2opul_805",businessDetailModalInfo="_businessDetailModalInfo_2opul_821",businessDetailModalName="_businessDetailModalName_2opul_825",businessDetailModalDescription="_businessDetailModalDescription_2opul_832",businessDetailModalMeta="_businessDetailModalMeta_2opul_838",businessDetailModalDate="_businessDetailModalDate_2opul_844",businessDetailModalStats="_businessDetailModalStats_2opul_849",businessDetailModalItems="_businessDetailModalItems_2opul_856",noItemsMessage="_noItemsMessage_2opul_867",deleteConfirmationWarning="_deleteConfirmationWarning_2opul_874",deleteConfirmationWarningText="_deleteConfirmationWarningText_2opul_880",modalDialogActions="_modalDialogActions_2opul_887",errorStateContainer="_errorStateContainer_2opul_895",errorStateContent="_errorStateContent_2opul_903",errorStateIcon="_errorStateIcon_2opul_912",errorStateTitle="_errorStateTitle_2opul_918",errorStateText="_errorStateText_2opul_924",errorStateRetryButton="_errorStateRetryButton_2opul_929",styles$1={sideBusinessesContainer,pageHeader,pageTitle,primaryButton,statisticsGrid,statisticsCard,statisticsCardContent,statisticsInfo,statisticsLabel,statisticsValue,statisticsIcon,statisticsIconPurple,statisticsIconBlue,statisticsIconGreen,statisticsIconOrange,mainContentGrid,contentPanel,contentPanelHeader,contentPanelTitle,contentPanelBody,emptyStateMessage,emptyStateMessageIcon,emptyStateMessageText,listContainer,listContainerDivided,listItemCard,listItemCardContent,listItemCardIcon,listItemCardMain,listItemCardTitle,listItemCardSubtitle,listItemCardMeta,listItemCardPrice,listItemCardStock,listItemCardCount,listItemCardTime,listItemCardActions,actionButton,actionButtonIcon,statusBadge,statusBadgeRental,statusBadgeResale,statusBadgeService,statusBadgeGray,statusBadgeCash,statusBadgeCard,statusBadgeMobile,modalOverlay:modalOverlay$1,modalDialog,modalDialogTitle,modalDialogForm,formFieldGroup,formFieldLabel,formFieldInput,formFieldTextarea,formFieldSelect,actionButtonDanger,standardButton,standardButtonSecondary,standardButtonDanger,standardButtonSuccess,businessDetailModalHeader,businessAnalyticsSection,analyticsSectionTitle,analyticsGrid,analyticsCard,analyticsCardHeader,analyticsIcon,analyticsIconBlue,analyticsIconGreen,analyticsIconPurple,analyticsPeriod,analyticsCardContent,analyticsMetric,analyticsLabel,analyticsValue,itemsSectionHeader,restockButton,restockActionButton,editActionButton,formFieldHelp,modalHeader:modalHeader$1,modalCloseButton,required,errorMessage:errorMessage$1,listItemCardNotes,restockInfo,restockItemName,restockCurrentStock,restockPreview,restockPreviewText,businessDetailModalIcon,businessDetailModalInfo,businessDetailModalName,businessDetailModalDescription,businessDetailModalMeta,businessDetailModalDate,businessDetailModalStats,businessDetailModalItems,noItemsMessage,deleteConfirmationWarning,deleteConfirmationWarningText,modalDialogActions,errorStateContainer,errorStateContent,errorStateIcon,errorStateTitle,errorStateText,errorStateRetryButton};async function uploadSideBusinessImage(e,t,r){console.log(" Starting image upload for side business:",t),console.log(" File details:",{name:e.name,size:e.size,type:e.type}),console.log(" User ID:",r);try{if(!r)return console.error(" No user ID provided"),null;console.log(" User ID provided:",r);const{data:n,error:a}=await supabase.storage.listBuckets();a?console.error(" Error listing buckets:",a):console.log(" Available buckets:",n?.map(f=>f.name));const l=`sidebusiness-images/${t}.${e.name.split(".").pop()}`;console.log(" Uploading to Supabase Storage:",l);const{error:c}=await supabase.storage.from("products").upload(l,e,{contentType:e.type,upsert:!0});if(c)return console.error(" Upload failed:",c),null;const{data:{publicUrl:d}}=supabase.storage.from("products").getPublicUrl(l);console.log(" Image uploaded successfully:",d),console.log(" Updating database with public URL...");const{error:x}=await supabase.from("side_businesses").update({image_url:d}).eq("business_id",t);return x?(console.error(" DB update failed:",x),null):(console.log(" Database updated with public URL"),d)}catch(n){return console.error(" Unexpected error during upload:",n),null}}const SideBusinesses=()=>{const{user:e}=useAuth(),{selectedBranchId:t}=useBranch(),[r,n]=reactExports.useState([]),[a,l]=reactExports.useState([]),[c,d]=reactExports.useState([]),[x,f]=reactExports.useState(!0),[h,g]=reactExports.useState(null),[y,_]=reactExports.useState("all"),[E,b]=reactExports.useState("all"),[v,R]=reactExports.useState(""),[A,C]=reactExports.useState("created_at"),[L,I]=reactExports.useState("desc"),[ae,D]=reactExports.useState(!1),[ee,Y]=reactExports.useState(!1),[le,te]=reactExports.useState(new Set),[oe,Be]=reactExports.useState(!1),[Pe,De]=reactExports.useState(null),[X,Se]=reactExports.useState(!1),[z,re]=reactExports.useState(null),[T,J]=reactExports.useState(null),[B,j]=reactExports.useState(null),[M,U]=reactExports.useState(!1),[K,Le]=reactExports.useState({item_id:null,current_stock:0,restock_quantity:""}),[ve,Ae]=reactExports.useState(!1),[ye,V]=reactExports.useState(null),[be,Ne]=reactExports.useState({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),[H,Te]=reactExports.useState(null),[se,Ce]=reactExports.useState(!1),[pt,pe]=reactExports.useState({business_id:"",name:"",price:"",stock_qty:"",notes:""}),[ze,Ye]=reactExports.useState({item_id:"",quantity:1,total_amount:"",payment_method:"cash"});reactExports.useEffect(()=>{if(ze.item_id&&ze.quantity>0){const Q=a.find(ge=>ge.item_id.toString()===ze.item_id);if(Q&&Q.price&&Q.price>0){const ge=r.find(rt=>rt.name===Q.side_businesses?.name);if(ge&&ge.business_type!=="service"){const rt=(Q.price*ze.quantity).toFixed(2);Ye(xt=>({...xt,total_amount:rt}))}}}},[ze.item_id,ze.quantity,a,r]),reactExports.useEffect(()=>{lt()},[t]);const lt=async()=>{try{if(f(!0),g(null),!e?.business_id){n([]),l([]),d([]),f(!1);return}let Q=supabase.from("side_businesses").select("*").eq("parent_shop_id",e.business_id);t&&(Q=Q.eq("branch_id",t));const{data:ge,error:rt}=await Q.order("created_at",{ascending:!1});if(rt)throw rt;let xt=supabase.from("side_business_items").select(`
          *,
          side_businesses (name)
        `).eq("parent_shop_id",e.business_id);t&&(xt=xt.eq("branch_id",t));const{data:Mt,error:Dt}=await xt.order("created_at",{ascending:!1});if(Dt)throw Dt;let ht=supabase.from("side_business_sales").select(`
          *,
          side_business_items (
            name,
            side_businesses (name)
          )
        `).eq("parent_shop_id",e.business_id);t&&(ht=ht.eq("branch_id",t));const{data:yr,error:Br}=await ht.order("date_time",{ascending:!1}).limit(10);if(Br)throw Br;n(ge||[]),l(Mt||[]),d(yr||[])}catch(Q){g(Q instanceof Error?Q.message:"Failed to fetch data")}finally{f(!1)}},Ke=async Q=>{if(Q.preventDefault(),!be.name.trim()){g("Business name is required");return}if(!be.business_type){g("Business type is required");return}if(!e?.user_id){g("User not authenticated");return}try{g(null);const{data:ge,error:rt}=await supabase.from("side_businesses").insert({owner_id:e.user_id,name:be.name.trim(),description:be.description.trim()||null,business_type:be.business_type,parent_shop_id:e.business_id,branch_id:t}).select();if(rt)throw console.error("Database error:",rt),new Error(`Database error: ${rt.message}`);if(!ge||ge.length===0)throw new Error("No data returned from insert");const xt=ge[0].business_id;if(H){Ce(!0);try{await uploadSideBusinessImage(H,xt.toString(),e.user_id)}catch(Mt){console.error("Error uploading image:",Mt)}finally{Ce(!1)}}Ne({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),Te(null),D(!1),await lt()}catch(ge){console.error("Error adding business:",ge),g(ge instanceof Error?ge.message:"Failed to add business")}},nt=async Q=>{Q.preventDefault();try{const{error:ge}=await supabase.from("side_business_items").insert({business_id:parseInt(pt.business_id),name:pt.name,price:pt.price?parseFloat(pt.price):null,stock_quantity:pt.stock_qty?parseInt(pt.stock_qty):null,notes:pt.notes.trim()||null,parent_shop_id:e?.business_id,branch_id:t});if(ge)throw ge;pe({business_id:"",name:"",price:"",stock_qty:"",notes:""}),Y(!1),lt()}catch(ge){g(ge instanceof Error?ge.message:"Failed to add item")}},mt=async Q=>{Q.preventDefault();try{const ge=a.find(ht=>ht.item_id.toString()===ze.item_id);if(!ge)throw new Error("Selected item not found");const rt=parseFloat(ze.total_amount),xt=ze.quantity,Mt=xt>0?rt/xt:0,{error:Dt}=await supabase.from("side_business_sales").insert({item_id:parseInt(ze.item_id),quantity:xt,price_each:Mt,total_amount:rt,payment_method:ze.payment_method,business_id:ge.business_id,parent_shop_id:e?.business_id,branch_id:t});if(Dt)throw Dt;Ye({item_id:"",quantity:1,total_amount:"",payment_method:"cash"}),Be(!1),lt()}catch(ge){g(ge instanceof Error?ge.message:"Failed to add sale")}},it=async Q=>{try{console.log(" Starting delete for sale:",Q);const{error:ge}=await supabase.from("side_business_sales").delete().eq("sale_id",Q);if(ge)throw console.error(" Error deleting sale:",ge),ge;console.log(" Sale deleted successfully"),J(null),lt()}catch(ge){console.error(" Delete sale failed:",ge),g(ge instanceof Error?ge.message:"Failed to delete sale")}},Je=async Q=>{try{console.log(" Starting delete for business:",Q);const{data:ge,error:rt}=await supabase.from("side_business_items").select("item_id").eq("business_id",Q);if(rt)throw console.error(" Error fetching items:",rt),rt;if(console.log(" Found items to delete:",ge?.length||0),ge&&ge.length>0){const Dt=ge.map(yr=>yr.item_id);console.log(" Deleting sales for items:",Dt);const{error:ht}=await supabase.from("side_business_sales").delete().in("item_id",Dt);if(ht)throw console.error(" Error deleting sales:",ht),ht;console.log(" Sales deleted successfully")}console.log(" Deleting items for business:",Q);const{error:xt}=await supabase.from("side_business_items").delete().eq("business_id",Q);if(xt)throw console.error(" Error deleting items:",xt),xt;console.log(" Items deleted successfully"),console.log(" Deleting business:",Q);const{error:Mt}=await supabase.from("side_businesses").delete().eq("business_id",Q);if(Mt)throw console.error(" Error deleting business:",Mt),Mt;console.log(" Business deleted successfully"),re(null),lt()}catch(ge){console.error(" Delete failed:",ge),g(ge instanceof Error?ge.message:"Failed to delete business")}},bt=async Q=>{try{const ge=new Date,rt=new Date(ge.getFullYear(),ge.getMonth(),ge.getDate()),xt=new Date(rt);xt.setDate(rt.getDate()-rt.getDay());const Mt=new Date(ge.getFullYear(),ge.getMonth(),1),{data:Dt}=await supabase.from("side_business_items").select("item_id, stock_quantity").eq("business_id",Q),ht=Dt?.reduce((Gt,Ct)=>Gt+(Ct.stock_quantity||0),0)||0,yr=Dt?.map(Gt=>Gt.item_id)||[];if(yr.length===0){j({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}});return}const{data:Br}=await supabase.from("side_business_sales").select("total_amount").in("item_id",yr).gte("date_time",rt.toISOString()),{data:vt}=await supabase.from("side_business_sales").select("total_amount").in("item_id",yr).gte("date_time",xt.toISOString()),{data:Rr}=await supabase.from("side_business_sales").select("total_amount").in("item_id",yr).gte("date_time",Mt.toISOString());j({currentStock:ht,dailySales:{count:Br?.length||0,revenue:Br?.reduce((Gt,Ct)=>Gt+Ct.total_amount,0)||0},weeklySales:{count:vt?.length||0,revenue:vt?.reduce((Gt,Ct)=>Gt+Ct.total_amount,0)||0},monthlySales:{count:Rr?.length||0,revenue:Rr?.reduce((Gt,Ct)=>Gt+Ct.total_amount,0)||0}})}catch(ge){console.error("Error fetching business analytics:",ge),j({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}})}},ne=async Q=>{if(Q.preventDefault(),!(!K.item_id||!K.restock_quantity))try{const ge=K.current_stock+parseInt(K.restock_quantity),{error:rt}=await supabase.from("side_business_items").update({stock_quantity:ge}).eq("item_id",K.item_id);if(rt)throw rt;Le({item_id:null,current_stock:0,restock_quantity:""}),U(!1),lt(),Pe&&bt(Pe.business_id)}catch(ge){g(ge instanceof Error?ge.message:"Failed to restock item")}},Ue=Q=>{Le({item_id:Q.item_id,current_stock:Q.stock_qty||0,restock_quantity:""}),U(!0)},Qe=Q=>{V(Q),Ae(!0)},gt=async Q=>{if(Q.preventDefault(),!!ye)try{const{error:ge}=await supabase.from("side_business_items").update({name:ye.name,price:ye.price,notes:ye.notes}).eq("item_id",ye.item_id);if(ge)throw ge;Ae(!1),V(null),lt(),Pe&&bt(Pe.business_id)}catch(ge){g(ge instanceof Error?ge.message:"Failed to update item")}},Nt=Q=>{De(Q),Se(!0),bt(Q.business_id)},It=Q=>{switch(Q){case"rental":return styles$1.statusBadgeRental;case"resale":return styles$1.statusBadgeResale;case"service":return styles$1.statusBadgeService;default:return styles$1.statusBadgeGray}},Ot=Q=>{switch(Q){case"cash":return styles$1.statusBadgeCash;case"card":return styles$1.statusBadgeCard;case"mobile":return styles$1.statusBadgeMobile;default:return styles$1.statusBadgeGray}},Wt=a.filter(Q=>{const ge=y==="all"||Q.business_id.toString()===y,rt=v===""||Q.name.toLowerCase().includes(v.toLowerCase())||Q.side_businesses?.name.toLowerCase().includes(v.toLowerCase());return ge&&rt}).sort((Q,ge)=>{let rt,xt;switch(A){case"name":rt=Q.name.toLowerCase(),xt=ge.name.toLowerCase();break;case"price":rt=Q.price||0,xt=ge.price||0;break;case"created_at":rt=new Date(Q.created_at),xt=new Date(ge.created_at);break;default:return 0}return L==="asc"?rt-xt:xt-rt}),Fe=r.filter(Q=>{const ge=E==="all"||Q.business_type===E,rt=v===""||Q.name.toLowerCase().includes(v.toLowerCase())||Q.description?.toLowerCase().includes(v.toLowerCase());return ge&&rt}).sort((Q,ge)=>{let rt,xt;switch(A){case"name":rt=Q.name.toLowerCase(),xt=ge.name.toLowerCase();break;case"created_at":rt=new Date(Q.created_at),xt=new Date(ge.created_at);break;default:return 0}return L==="asc"?rt-xt:xt-rt}),tt=c.filter(Q=>{const ge=a.find(ht=>ht.item_id===Q.item_id)?.business_id,rt=y==="all"||ge?.toString()===y,xt=r.find(ht=>ht.business_id===ge),Mt=E==="all"||xt?.business_type===E,Dt=v===""||Q.side_business_items?.name.toLowerCase().includes(v.toLowerCase())||Q.side_business_items?.side_businesses?.name.toLowerCase().includes(v.toLowerCase());return rt&&Mt&&Dt}).sort((Q,ge)=>{const rt=new Date(Q.date_time),xt=new Date(ge.date_time);return L==="asc"?rt.getTime()-xt.getTime():xt.getTime()-rt.getTime()}),ut=[...new Set(r.map(Q=>Q.business_type).filter(Boolean))];return h?jsxRuntimeExports.jsx("div",{className:styles$1.errorStateContainer,children:jsxRuntimeExports.jsxs("div",{className:styles$1.errorStateContent,children:[jsxRuntimeExports.jsx("i",{className:`fa-solid fa-exclamation-triangle ${styles$1.errorStateIcon}`}),jsxRuntimeExports.jsx("h2",{className:styles$1.errorStateTitle,children:"Error Loading Side Businesses"}),jsxRuntimeExports.jsx("p",{className:styles$1.errorStateText,children:h}),jsxRuntimeExports.jsx("button",{className:styles$1.errorStateRetryButton,onClick:lt,children:"Try Again"})]})}):jsxRuntimeExports.jsxs("div",{className:styles$1.sideBusinessesContainer,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.pageHeader,children:[jsxRuntimeExports.jsxs("h1",{className:styles$1.pageTitle,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-briefcase"}),"Side Businesses"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>D(!0),className:styles$1.primaryButton,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus"}),"Add Business"]})]}),jsxRuntimeExports.jsx(SearchContainer,{searchTerm:v,onSearchChange:R,searchPlaceholder:"Search businesses, items, or sales...",showSearchResults:!!v,searchResultsCount:Wt.length+Fe.length+tt.length,onClearSearch:()=>R(""),filters:[{label:"Business",value:y,onChange:_,options:[{value:"all",label:"All Businesses"},...r.map(Q=>({value:Q.business_id.toString(),label:Q.name}))]},{label:"Type",value:E,onChange:b,options:[{value:"all",label:"All Types"},...ut.map(Q=>({value:Q,label:Q.charAt(0).toUpperCase()+Q.slice(1)}))]}],sortOptions:[{label:"Sort",value:A,onChange:Q=>C(Q),options:[{value:"created_at",label:"Date Created"},{value:"name",label:"Name"},{value:"price",label:"Price"}]}],onSortToggle:()=>I(L==="asc"?"desc":"asc"),sortOrder:L,hasActiveFilters:y!=="all"||E!=="all",onClearFilters:()=>{_("all"),b("all")}}),jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsGrid,children:[jsxRuntimeExports.jsx("div",{className:styles$1.statisticsCard,children:jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsInfo,children:[jsxRuntimeExports.jsx("p",{className:styles$1.statisticsLabel,children:"Total Businesses"}),jsxRuntimeExports.jsx("p",{className:styles$1.statisticsValue,children:Fe.length})]}),jsxRuntimeExports.jsx("i",{className:`fas fa-briefcase ${styles$1.statisticsIcon} ${styles$1.statisticsIconPurple}`})]})}),jsxRuntimeExports.jsx("div",{className:styles$1.statisticsCard,children:jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsInfo,children:[jsxRuntimeExports.jsx("p",{className:styles$1.statisticsLabel,children:"Total Items"}),jsxRuntimeExports.jsx("p",{className:styles$1.statisticsValue,children:Wt.length})]}),jsxRuntimeExports.jsx("i",{className:`fas fa-box ${styles$1.statisticsIcon} ${styles$1.statisticsIconBlue}`})]})}),jsxRuntimeExports.jsx("div",{className:styles$1.statisticsCard,children:jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsInfo,children:[jsxRuntimeExports.jsx("p",{className:styles$1.statisticsLabel,children:"Total Sales"}),jsxRuntimeExports.jsx("p",{className:styles$1.statisticsValue,children:tt.length})]}),jsxRuntimeExports.jsx("i",{className:`fas fa-chart-line ${styles$1.statisticsIcon} ${styles$1.statisticsIconGreen}`})]})}),jsxRuntimeExports.jsx("div",{className:styles$1.statisticsCard,children:jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsInfo,children:[jsxRuntimeExports.jsx("p",{className:styles$1.statisticsLabel,children:"Revenue"}),jsxRuntimeExports.jsxs("p",{className:styles$1.statisticsValue,children:["",tt.reduce((Q,ge)=>Q+ge.total_amount,0).toFixed(2)]})]}),jsxRuntimeExports.jsx("i",{className:`fas fa-euro-sign ${styles$1.statisticsIcon} ${styles$1.statisticsIconOrange}`})]})})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.mainContentGrid,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.contentPanel,children:[jsxRuntimeExports.jsx("div",{className:styles$1.contentPanelHeader,children:jsxRuntimeExports.jsx("h2",{className:styles$1.contentPanelTitle,children:"Businesses"})}),jsxRuntimeExports.jsx("div",{className:styles$1.contentPanelBody,children:Fe.length===0?jsxRuntimeExports.jsxs("div",{className:styles$1.emptyStateMessage,children:[jsxRuntimeExports.jsx("i",{className:`fa-solid fa-briefcase ${styles$1.emptyStateMessageIcon}`}),jsxRuntimeExports.jsx("p",{className:styles$1.emptyStateMessageText,children:"No businesses found. Add your first side business to get started!"})]}):jsxRuntimeExports.jsx("div",{className:`${styles$1.listContainer} ${styles$1.listContainerDivided}`,children:Fe.map(Q=>jsxRuntimeExports.jsx("div",{className:styles$1.listItemCard,onClick:()=>Nt(Q),children:jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardContent,children:[jsxRuntimeExports.jsx("div",{className:styles$1.listItemCardIcon,children:Q.image_url&&jsxRuntimeExports.jsx("img",{src:Q.image_url,alt:Q.name,style:{width:"40px",height:"40px",borderRadius:"8px",objectFit:"cover"}})}),jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardMain,children:[jsxRuntimeExports.jsx("h3",{className:styles$1.listItemCardTitle,children:Q.name}),Q.description&&jsxRuntimeExports.jsx("p",{className:styles$1.listItemCardSubtitle,children:Q.description}),jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardMeta,children:[jsxRuntimeExports.jsx("span",{className:`${styles$1.statusBadge} ${It(Q.business_type)}`,children:Q.business_type||"service"}),jsxRuntimeExports.jsxs("span",{className:styles$1.listItemCardCount,children:[a.filter(ge=>ge.business_id===Q.business_id).length," items"]})]})]}),jsxRuntimeExports.jsx("div",{className:styles$1.listItemCardActions,children:jsxRuntimeExports.jsxs("button",{onClick:ge=>{ge.stopPropagation(),re(Q)},className:`${styles$1.actionButton} ${styles$1.actionButtonDanger}`,title:"Delete Business",children:[jsxRuntimeExports.jsx("i",{className:`fas fa-trash ${styles$1.actionButtonIcon}`}),"Delete"]})})]})},Q.business_id))})})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.contentPanel,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.contentPanelHeader,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.contentPanelTitle,children:"Items"}),jsxRuntimeExports.jsxs("button",{onClick:()=>Y(!0),className:styles$1.actionButton,style:{marginLeft:"auto"},children:[jsxRuntimeExports.jsx("i",{className:`fas fa-plus ${styles$1.actionButtonIcon}`}),"Add Item"]})]}),jsxRuntimeExports.jsx("div",{className:styles$1.contentPanelBody,children:Wt.length===0?jsxRuntimeExports.jsxs("div",{className:styles$1.emptyStateMessage,children:[jsxRuntimeExports.jsx("i",{className:`fa-solid fa-box ${styles$1.emptyStateMessageIcon}`}),jsxRuntimeExports.jsx("p",{className:styles$1.emptyStateMessageText,children:"No items found. Add items to your businesses!"})]}):jsxRuntimeExports.jsx("div",{className:`${styles$1.listContainer} ${styles$1.listContainerDivided}`,children:Wt.map(Q=>jsxRuntimeExports.jsx("div",{className:styles$1.listItemCard,children:jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardMain,children:[jsxRuntimeExports.jsx("h3",{className:styles$1.listItemCardTitle,children:Q.name}),jsxRuntimeExports.jsx("p",{className:styles$1.listItemCardSubtitle,children:Q.side_businesses?.name||"Unknown Business"}),jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardMeta,children:[Q.price?jsxRuntimeExports.jsxs("span",{className:styles$1.listItemCardPrice,children:["",Q.price]}):jsxRuntimeExports.jsx("span",{className:styles$1.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),Q.stock_qty!==null&&jsxRuntimeExports.jsxs("span",{className:styles$1.listItemCardStock,children:["Stock: ",Q.stock_qty]}),r.find(ge=>ge.business_id===Q.business_id)?.business_type==="service"&&jsxRuntimeExports.jsx("span",{className:`${styles$1.statusBadge} ${styles$1.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]})]}),jsxRuntimeExports.jsx("div",{className:styles$1.listItemCardActions,children:jsxRuntimeExports.jsxs("button",{onClick:()=>{Ye(ge=>({...ge,item_id:Q.item_id.toString()})),Be(!0)},className:styles$1.actionButton,children:[jsxRuntimeExports.jsx("i",{className:`fas fa-plus ${styles$1.actionButtonIcon}`}),"Sale"]})})]})},Q.item_id))})})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.contentPanel,children:[jsxRuntimeExports.jsx("div",{className:styles$1.contentPanelHeader,children:jsxRuntimeExports.jsx("h2",{className:styles$1.contentPanelTitle,children:"Recent Sales"})}),jsxRuntimeExports.jsx("div",{className:styles$1.contentPanelBody,children:tt.length===0?jsxRuntimeExports.jsxs("div",{className:styles$1.emptyStateMessage,children:[jsxRuntimeExports.jsx("i",{className:`fa-solid fa-receipt ${styles$1.emptyStateMessageIcon}`}),jsxRuntimeExports.jsx("p",{className:styles$1.emptyStateMessageText,children:"No sales recorded yet."})]}):jsxRuntimeExports.jsx("div",{className:`${styles$1.listContainer} ${styles$1.listContainerDivided}`,children:tt.map(Q=>jsxRuntimeExports.jsx("div",{className:styles$1.listItemCard,children:jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardMain,children:[jsxRuntimeExports.jsx("h3",{className:styles$1.listItemCardTitle,children:Q.side_business_items?.name||"Unknown Item"}),jsxRuntimeExports.jsx("p",{className:styles$1.listItemCardSubtitle,children:Q.side_business_items?.side_businesses?.name||"Unknown Business"}),jsxRuntimeExports.jsxs("p",{className:styles$1.listItemCardTime,children:[new Date(Q.date_time).toLocaleDateString()," at ",new Date(Q.date_time).toLocaleTimeString()]}),jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardMeta,children:[jsxRuntimeExports.jsxs("span",{className:styles$1.listItemCardCount,children:["Qty: ",Q.quantity]}),jsxRuntimeExports.jsxs("span",{className:styles$1.listItemCardPrice,children:["",Q.total_amount]}),jsxRuntimeExports.jsx("span",{className:`${styles$1.statusBadge} ${Ot(Q.payment_method)}`,children:Q.payment_method})]})]}),jsxRuntimeExports.jsx("div",{className:styles$1.listItemCardActions,children:jsxRuntimeExports.jsxs("button",{onClick:ge=>{ge.stopPropagation(),J(Q)},className:`${styles$1.actionButton} ${styles$1.actionButtonDanger}`,title:"Delete Sale",children:[jsxRuntimeExports.jsx("i",{className:`fas fa-trash ${styles$1.actionButtonIcon}`}),"Delete"]})})]})},Q.sale_id))})})]})]}),ae&&jsxRuntimeExports.jsx("div",{className:styles$1.modalOverlay,children:jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialog,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.modalHeader,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.modalDialogTitle,children:"Create New Business"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Ne({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),D(!1),g(null)},className:styles$1.modalCloseButton,children:jsxRuntimeExports.jsx("i",{className:"fas fa-times"})})]}),h&&jsxRuntimeExports.jsxs("div",{className:styles$1.errorMessage,children:[jsxRuntimeExports.jsx("i",{className:"fas fa-exclamation-triangle"}),h]}),jsxRuntimeExports.jsxs("form",{onSubmit:Ke,className:styles$1.modalDialogForm,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsxs("label",{className:styles$1.formFieldLabel,children:["Business Name ",jsxRuntimeExports.jsx("span",{className:styles$1.required,children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:be.name,onChange:Q=>Ne(ge=>({...ge,name:Q.target.value})),className:styles$1.formFieldInput,placeholder:"Enter business name",maxLength:100})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:be.description,onChange:Q=>Ne(ge=>({...ge,description:Q.target.value})),className:styles$1.formFieldTextarea,rows:3,placeholder:"Brief description of your business",maxLength:500}),jsxRuntimeExports.jsx("small",{className:styles$1.formFieldHelp,children:"Optional: Describe what your business does"})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsxs("label",{className:styles$1.formFieldLabel,children:["Business Type ",jsxRuntimeExports.jsx("span",{className:styles$1.required,children:"*"})]}),jsxRuntimeExports.jsxs("select",{value:be.business_type,onChange:Q=>Ne(ge=>({...ge,business_type:Q.target.value})),className:styles$1.formFieldSelect,required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select business type"}),jsxRuntimeExports.jsx("option",{value:"service",children:"Service (Custom pricing per transaction)"}),jsxRuntimeExports.jsx("option",{value:"rental",children:"Rental (Fixed pricing with stock)"}),jsxRuntimeExports.jsx("option",{value:"resale",children:"Resale (Fixed pricing with stock)"})]}),jsxRuntimeExports.jsxs("small",{className:styles$1.formFieldHelp,children:[be.business_type==="service"&&"Services allow custom pricing for each transaction",be.business_type==="rental"&&"Rentals have fixed prices and track stock quantities",be.business_type==="resale"&&"Resale items have fixed prices and track stock quantities"]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Business Image"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Q=>{const ge=Q.target.files?.[0];Te(ge||null)},className:styles$1.formFieldInput}),jsxRuntimeExports.jsx("small",{className:styles$1.formFieldHelp,children:"Optional: Upload an image for your business (max 5MB, will be compressed)"}),H&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#f0f0f0",borderRadius:"4px"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#7d8d86"}}),"Selected: ",H.name]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialogActions,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Ne({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),Te(null),D(!1),g(null)},className:`${styles$1.standardButton} ${styles$1.standardButtonSecondary}`,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:!be.name.trim()||!be.business_type||se,className:`${styles$1.standardButton} ${styles$1.standardButtonPrimary}`,children:se?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fas fa-spinner fa-spin",style:{marginRight:"8px"}}),"Creating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Create Business"]})})]})]})]})}),ee&&jsxRuntimeExports.jsx("div",{className:styles$1.modalOverlay,children:jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialog,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.modalDialogTitle,children:"Add Item"}),jsxRuntimeExports.jsxs("form",{onSubmit:nt,className:styles$1.modalDialogForm,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Business"}),jsxRuntimeExports.jsxs("select",{required:!0,value:pt.business_id,onChange:Q=>pe(ge=>({...ge,business_id:Q.target.value})),className:styles$1.formFieldSelect,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a business"}),r.map(Q=>jsxRuntimeExports.jsxs("option",{value:Q.business_id,children:[Q.name," (",Q.business_type,")"]},Q.business_id))]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Item Name"}),jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:pt.name,onChange:Q=>pe(ge=>({...ge,name:Q.target.value})),className:styles$1.formFieldInput,placeholder:"e.g., Haircut, Chair Rental, etc."})]}),pt.business_id&&r.find(Q=>Q.business_id.toString()===pt.business_id)?.business_type!=="service"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Price ()"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",value:pt.price,onChange:Q=>pe(ge=>({...ge,price:Q.target.value})),className:styles$1.formFieldInput,placeholder:"0.00"})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Stock Quantity"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",value:pt.stock_qty,onChange:Q=>pe(ge=>({...ge,stock_qty:Q.target.value})),className:styles$1.formFieldInput,placeholder:"0"})]})]}),pt.business_id&&r.find(Q=>Q.business_id.toString()===pt.business_id)?.business_type==="service"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$1.formFieldGroup,children:jsxRuntimeExports.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:0},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"8px"}}),"Service items don't have fixed prices or stock. You'll enter the amount when recording a sale."]})}),jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Service Notes"}),jsxRuntimeExports.jsx("textarea",{value:pt.notes,onChange:Q=>pe(ge=>({...ge,notes:Q.target.value})),className:styles$1.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details for this service...",maxLength:500}),jsxRuntimeExports.jsx("small",{className:styles$1.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details for this service"})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialogActions,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Y(!1),className:`${styles$1.standardButton} ${styles$1.standardButtonSecondary}`,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",className:`${styles$1.standardButton} ${styles$1.standardButtonSuccess}`,children:"Add Item"})]})]})]})}),oe&&jsxRuntimeExports.jsx("div",{className:styles$1.modalOverlay,style:{zIndex:2e3},children:jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialog,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.modalDialogTitle,children:"Record Sale"}),jsxRuntimeExports.jsxs("form",{onSubmit:mt,className:styles$1.modalDialogForm,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.formGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Item"}),jsxRuntimeExports.jsxs("select",{required:!0,value:ze.item_id,onChange:Q=>Ye(ge=>({...ge,item_id:Q.target.value})),className:styles$1.formFieldSelect,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select an item"}),a.map(Q=>jsxRuntimeExports.jsxs("option",{value:Q.item_id,children:[Q.name," - ",Q.side_businesses?.name,Q.side_businesses&&r.find(ge=>ge.name===Q.side_businesses?.name)?.business_type==="service"?" (Service - Custom Amount)":Q.price?` (${Q.price})`:""]},Q.item_id))]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.formGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Quantity"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",required:!0,value:ze.quantity,onChange:Q=>Ye(ge=>({...ge,quantity:parseInt(Q.target.value)})),className:styles$1.formFieldInput})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.formGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Total Amount ()"}),(()=>{const Q=a.find(Mt=>Mt.item_id.toString()===ze.item_id),rt=(Q?r.find(Mt=>Mt.name===Q.side_businesses?.name):null)?.business_type==="service",xt=Q&&Q.price&&Q.price>0;return rt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",required:!0,value:ze.total_amount,onChange:Mt=>Ye(Dt=>({...Dt,total_amount:Mt.target.value})),className:styles$1.formFieldInput,placeholder:"0.00"}),jsxRuntimeExports.jsxs("p",{style:{color:"#7d8d86",fontSize:"12px",margin:"4px 0 0 0"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"4px"}}),"Enter the custom amount for this service"]})]}):xt?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",value:ze.total_amount,readOnly:!0,className:styles$1.formFieldInput,style:{backgroundColor:"#f9fafb",color:"#6b7280"}})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",required:!0,value:ze.total_amount,onChange:Mt=>Ye(Dt=>({...Dt,total_amount:Mt.target.value})),className:styles$1.formFieldInput,placeholder:"0.00"}),jsxRuntimeExports.jsxs("p",{style:{color:"#f59e0b",fontSize:"12px",margin:"4px 0 0 0"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"4px"}}),"This item has no set price. Please enter the amount manually."]})]})})()]}),jsxRuntimeExports.jsxs("div",{className:styles$1.formGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Payment Method"}),jsxRuntimeExports.jsxs("select",{value:ze.payment_method,onChange:Q=>Ye(ge=>({...ge,payment_method:Q.target.value})),className:styles$1.formFieldSelect,children:[jsxRuntimeExports.jsx("option",{value:"cash",children:"Cash"}),jsxRuntimeExports.jsx("option",{value:"card",children:"Card"}),jsxRuntimeExports.jsx("option",{value:"mobile",children:"Mobile"})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialogActions,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Be(!1),className:`${styles$1.standardButton} ${styles$1.standardButtonSecondary}`,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",className:`${styles$1.standardButton} ${styles$1.standardButtonSuccess}`,children:"Record Sale"})]})]})]})}),X&&Pe&&jsxRuntimeExports.jsx("div",{className:styles$1.modalOverlay,children:jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialog,style:{maxWidth:"600px"},children:[jsxRuntimeExports.jsx("h2",{className:styles$1.modalDialogTitle,children:"Business Details"}),jsxRuntimeExports.jsxs("div",{className:styles$1.businessDetailModalHeader,children:[jsxRuntimeExports.jsx("div",{className:styles$1.businessDetailModalIcon,children:Pe.image_url?jsxRuntimeExports.jsx("img",{src:Pe.image_url,alt:Pe.name,style:{width:"100%",height:"100%",borderRadius:"16px",objectFit:"cover"}}):jsxRuntimeExports.jsx("i",{className:Pe.icon||"fa-solid fa-briefcase"})}),jsxRuntimeExports.jsxs("div",{className:styles$1.businessDetailModalInfo,children:[jsxRuntimeExports.jsx("h3",{className:styles$1.businessDetailModalName,children:Pe.name}),jsxRuntimeExports.jsx("p",{className:styles$1.businessDetailModalDescription,children:Pe.description||"No description provided"}),jsxRuntimeExports.jsxs("div",{className:styles$1.businessDetailModalMeta,children:[jsxRuntimeExports.jsx("span",{className:`${styles$1.statusBadge} ${It(Pe.business_type)}`,children:Pe.business_type||"service"}),jsxRuntimeExports.jsxs("span",{className:styles$1.businessDetailModalDate,children:["Created: ",new Date(Pe.created_at).toLocaleDateString()]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.businessDetailModalStats,children:[jsxRuntimeExports.jsx("div",{className:styles$1.statisticsCard,children:jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsInfo,children:[jsxRuntimeExports.jsx("p",{className:styles$1.statisticsLabel,children:"Total Items"}),jsxRuntimeExports.jsx("p",{className:styles$1.statisticsValue,children:a.filter(Q=>Q.business_id===Pe.business_id).length})]}),jsxRuntimeExports.jsx("i",{className:`fas fa-box ${styles$1.statisticsIcon} ${styles$1.statisticsIconBlue}`})]})}),jsxRuntimeExports.jsx("div",{className:styles$1.statisticsCard,children:jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.statisticsInfo,children:[jsxRuntimeExports.jsx("p",{className:styles$1.statisticsLabel,children:"Current Stock"}),jsxRuntimeExports.jsx("p",{className:styles$1.statisticsValue,children:B?.currentStock||0})]}),jsxRuntimeExports.jsx("i",{className:`fas fa-warehouse ${styles$1.statisticsIcon} ${styles$1.statisticsIconOrange}`})]})})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.businessAnalyticsSection,children:[jsxRuntimeExports.jsx("h4",{className:styles$1.analyticsSectionTitle,children:"Sales Analytics"}),jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsGrid,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsCard,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsCardHeader,children:[jsxRuntimeExports.jsx("i",{className:`fas fa-calendar-day ${styles$1.analyticsIcon} ${styles$1.analyticsIconBlue}`}),jsxRuntimeExports.jsx("span",{className:styles$1.analyticsPeriod,children:"Today"})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsMetric,children:[jsxRuntimeExports.jsx("span",{className:styles$1.analyticsLabel,children:"Sales"}),jsxRuntimeExports.jsx("span",{className:styles$1.analyticsValue,children:B?.dailySales.count||0})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsMetric,children:[jsxRuntimeExports.jsx("span",{className:styles$1.analyticsLabel,children:"Revenue"}),jsxRuntimeExports.jsxs("span",{className:styles$1.analyticsValue,children:["",(B?.dailySales.revenue||0).toFixed(2)]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsCard,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsCardHeader,children:[jsxRuntimeExports.jsx("i",{className:`fas fa-calendar-week ${styles$1.analyticsIcon} ${styles$1.analyticsIconGreen}`}),jsxRuntimeExports.jsx("span",{className:styles$1.analyticsPeriod,children:"This Week"})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsMetric,children:[jsxRuntimeExports.jsx("span",{className:styles$1.analyticsLabel,children:"Sales"}),jsxRuntimeExports.jsx("span",{className:styles$1.analyticsValue,children:B?.weeklySales.count||0})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsMetric,children:[jsxRuntimeExports.jsx("span",{className:styles$1.analyticsLabel,children:"Revenue"}),jsxRuntimeExports.jsxs("span",{className:styles$1.analyticsValue,children:["",(B?.weeklySales.revenue||0).toFixed(2)]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsCard,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsCardHeader,children:[jsxRuntimeExports.jsx("i",{className:`fas fa-calendar-alt ${styles$1.analyticsIcon} ${styles$1.analyticsIconPurple}`}),jsxRuntimeExports.jsx("span",{className:styles$1.analyticsPeriod,children:"This Month"})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsMetric,children:[jsxRuntimeExports.jsx("span",{className:styles$1.analyticsLabel,children:"Sales"}),jsxRuntimeExports.jsx("span",{className:styles$1.analyticsValue,children:B?.monthlySales.count||0})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.analyticsMetric,children:[jsxRuntimeExports.jsx("span",{className:styles$1.analyticsLabel,children:"Revenue"}),jsxRuntimeExports.jsxs("span",{className:styles$1.analyticsValue,children:["",(B?.monthlySales.revenue||0).toFixed(2)]})]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.businessDetailModalItems,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.itemsSectionHeader,children:[jsxRuntimeExports.jsx("h4",{children:"Items in this business:"}),jsxRuntimeExports.jsxs("button",{onClick:()=>Y(!0),className:styles$1.restockButton,title:"Add new item",children:[jsxRuntimeExports.jsx("i",{className:"fas fa-plus"}),"Add Item"]})]}),a.filter(Q=>Q.business_id===Pe.business_id).length===0?jsxRuntimeExports.jsx("p",{className:styles$1.noItemsMessage,children:"No items added yet."}):jsxRuntimeExports.jsx("div",{className:styles$1.listContainer,children:a.filter(Q=>Q.business_id===Pe.business_id).map(Q=>jsxRuntimeExports.jsx("div",{className:styles$1.listItemCard,children:jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardContent,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardMain,children:[jsxRuntimeExports.jsx("h4",{className:styles$1.listItemCardTitle,children:Q.name}),jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardMeta,children:[Q.price?jsxRuntimeExports.jsxs("span",{className:styles$1.listItemCardPrice,children:["",Q.price]}):jsxRuntimeExports.jsx("span",{className:styles$1.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),Q.stock_qty!==null&&jsxRuntimeExports.jsxs("span",{className:styles$1.listItemCardStock,children:["Stock: ",Q.stock_qty]}),Pe?.business_type==="service"&&jsxRuntimeExports.jsx("span",{className:`${styles$1.statusBadge} ${styles$1.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]}),Q.notes&&jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardNotes,children:[jsxRuntimeExports.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"6px",color:"#6b7280"}}),jsxRuntimeExports.jsx("span",{style:{fontSize:"12px",color:"#6b7280",fontStyle:"italic"},children:Q.notes.length>100?`${Q.notes.substring(0,100)}...`:Q.notes})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.listItemCardActions,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Qe(Q),className:`${styles$1.actionButton} ${styles$1.editActionButton}`,title:"Edit item",children:[jsxRuntimeExports.jsx("i",{className:`fas fa-edit ${styles$1.actionButtonIcon}`}),"Edit"]}),Q.stock_qty!==null&&jsxRuntimeExports.jsxs("button",{onClick:()=>Ue(Q),className:`${styles$1.actionButton} ${styles$1.restockActionButton}`,title:"Restock item",children:[jsxRuntimeExports.jsx("i",{className:`fas fa-boxes-stacked ${styles$1.actionButtonIcon}`}),"Restock"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Ye(ge=>({...ge,item_id:Q.item_id.toString()})),Be(!0)},className:styles$1.actionButton,title:"Record sale",children:[jsxRuntimeExports.jsx("i",{className:`fas fa-plus ${styles$1.actionButtonIcon}`}),"Sale"]})]})]})},Q.item_id))})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialogActions,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Se(!1),className:`${styles$1.standardButton} ${styles$1.standardButtonSecondary}`,children:"Close"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Se(!1),re(Pe)},className:`${styles$1.standardButton} ${styles$1.standardButtonDanger}`,children:"Delete Business"})]})]})}),z&&jsxRuntimeExports.jsx("div",{className:styles$1.modalOverlay,children:jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialog,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.modalDialogTitle,children:"Delete Business"}),jsxRuntimeExports.jsxs("p",{className:styles$1.deleteConfirmationWarning,children:["Are you sure you want to delete ",jsxRuntimeExports.jsx("strong",{children:z.name}),"?"]}),jsxRuntimeExports.jsx("p",{className:styles$1.deleteConfirmationWarningText,children:"This will permanently delete the business, all its items, and all related sales records. This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialogActions,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>re(null),className:`${styles$1.standardButton} ${styles$1.standardButtonSecondary}`,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Je(z.business_id),className:`${styles$1.standardButton} ${styles$1.standardButtonDanger}`,children:"Delete Business"})]})]})}),T&&jsxRuntimeExports.jsx("div",{className:styles$1.modalOverlay,children:jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialog,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.modalDialogTitle,children:"Delete Sale"}),jsxRuntimeExports.jsx("p",{className:styles$1.deleteConfirmationWarning,children:"Are you sure you want to delete this sale?"}),jsxRuntimeExports.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"8px",margin:"16px 0",border:"1px solid #e9ecef"},children:[jsxRuntimeExports.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:T.side_business_items?.name||"Unknown Item"}),jsxRuntimeExports.jsx("p",{style:{margin:"0 0 4px 0",color:"#6c757d",fontSize:"14px"},children:T.side_business_items?.side_businesses?.name||"Unknown Business"}),jsxRuntimeExports.jsxs("p",{style:{margin:"0 0 4px 0",color:"#6c757d",fontSize:"14px"},children:["Quantity: ",T.quantity,"  Total: ",T.total_amount]}),jsxRuntimeExports.jsxs("p",{style:{margin:"0",color:"#6c757d",fontSize:"14px"},children:[new Date(T.date_time).toLocaleDateString()," at ",new Date(T.date_time).toLocaleTimeString()]})]}),jsxRuntimeExports.jsx("p",{className:styles$1.deleteConfirmationWarningText,children:"This will permanently delete the sale record. This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialogActions,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>J(null),className:`${styles$1.standardButton} ${styles$1.standardButtonSecondary}`,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>it(T.sale_id),className:`${styles$1.standardButton} ${styles$1.standardButtonDanger}`,children:"Delete Sale"})]})]})}),M&&K.item_id&&jsxRuntimeExports.jsx("div",{className:styles$1.modalOverlay,style:{zIndex:2e3},children:jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialog,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.modalDialogTitle,children:"Restock Item"}),jsxRuntimeExports.jsxs("div",{className:styles$1.restockInfo,children:[jsxRuntimeExports.jsx("p",{className:styles$1.restockItemName,children:a.find(Q=>Q.item_id===K.item_id)?.name}),jsxRuntimeExports.jsxs("p",{className:styles$1.restockCurrentStock,children:["Current Stock: ",jsxRuntimeExports.jsx("strong",{children:K.current_stock})]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ne,className:styles$1.modalDialogForm,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Restock Quantity"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",required:!0,value:K.restock_quantity,onChange:Q=>Le(ge=>({...ge,restock_quantity:Q.target.value})),className:styles$1.formFieldInput,placeholder:"Enter quantity to add"})]}),jsxRuntimeExports.jsx("div",{className:styles$1.restockPreview,children:jsxRuntimeExports.jsxs("p",{className:styles$1.restockPreviewText,children:["New stock will be: ",jsxRuntimeExports.jsx("strong",{children:K.current_stock+(parseInt(K.restock_quantity)||0)})]})}),jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialogActions,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>U(!1),className:`${styles$1.standardButton} ${styles$1.standardButtonSecondary}`,children:"Cancel"}),jsxRuntimeExports.jsxs("button",{type:"submit",className:`${styles$1.standardButton} ${styles$1.standardButtonSuccess}`,children:[jsxRuntimeExports.jsx("i",{className:"fas fa-boxes-stacked",style:{marginRight:"8px"}}),"Restock Item"]})]})]})]})}),ve&&ye&&jsxRuntimeExports.jsx("div",{className:styles$1.modalOverlay,style:{zIndex:2e3},children:jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialog,children:[jsxRuntimeExports.jsx("h2",{className:styles$1.modalDialogTitle,children:"Edit Item"}),jsxRuntimeExports.jsxs("form",{onSubmit:gt,className:styles$1.modalDialogForm,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Item Name"}),jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:ye.name,onChange:Q=>V(ge=>ge?{...ge,name:Q.target.value}:null),className:styles$1.formFieldInput,placeholder:"Enter item name"})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Price ()"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",min:"0",value:ye.price||"",onChange:Q=>V(ge=>ge?{...ge,price:Q.target.value?parseFloat(Q.target.value):null}:null),className:styles$1.formFieldInput,placeholder:"Enter price (leave empty for custom pricing)"}),jsxRuntimeExports.jsx("small",{className:styles$1.formFieldHelp,children:"Leave empty for service items with custom pricing"})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.formFieldGroup,children:[jsxRuntimeExports.jsx("label",{className:styles$1.formFieldLabel,children:"Notes"}),jsxRuntimeExports.jsx("textarea",{value:ye.notes||"",onChange:Q=>V(ge=>ge?{...ge,notes:Q.target.value}:null),className:styles$1.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details...",maxLength:500}),jsxRuntimeExports.jsx("small",{className:styles$1.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details"})]}),jsxRuntimeExports.jsxs("div",{className:styles$1.modalDialogActions,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ae(!1),className:`${styles$1.standardButton} ${styles$1.standardButtonSecondary}`,children:"Cancel"}),jsxRuntimeExports.jsxs("button",{type:"submit",className:`${styles$1.standardButton} ${styles$1.standardButtonPrimary}`,children:[jsxRuntimeExports.jsx("i",{className:"fas fa-save",style:{marginRight:"8px"}}),"Update Item"]})]})]})]})})]})},useTransactions=()=>{const{data:e,isLoading:t,error:r}=useSalesData(),n=useQueryClient(),a=useMutation({mutationFn:async c=>{const{error:d}=await supabase.from("sales").update({partial_payment:!1,notes:null}).eq("sale_id",c);if(d)throw d},onSuccess:()=>{n.invalidateQueries({queryKey:["salesData"]})}}),l=useMutation({mutationFn:async c=>{const{error:d}=await supabase.from("sale_items").delete().eq("sale_id",c);if(d)throw d;const{error:x}=await supabase.from("sales").delete().eq("sale_id",c);if(x)throw x},onSuccess:()=>{n.invalidateQueries({queryKey:["salesData"]})}});return{transactions:e?.sales||[],loading:t,error:r?.message||null,fetchTransactions:()=>n.invalidateQueries({queryKey:["salesData"]}),deleteTransaction:l.mutateAsync,resolvePartialPayment:a.mutateAsync}},PageLayout=({children:e,maxWidth:t="1400px"})=>jsxRuntimeExports.jsx("div",{style:{minHeight:"100vh",background:"#f8fafc",fontFamily:"Poppins, sans-serif",padding:"20px"},children:jsxRuntimeExports.jsx("div",{style:{maxWidth:t,margin:"0 auto",background:"#ffffff",borderRadius:"12px",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:e})}),PageHeader=({title:e,subtitle:t,icon:r,children:n})=>jsxRuntimeExports.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:n?"16px":"0"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[r&&jsxRuntimeExports.jsx("i",{className:r,style:{marginRight:"12px",color:"#7d8d86"}}),e]}),t&&jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",color:"#6b7280",margin:"0"},children:t})]}),n]})}),Card=({children:e,className:t="",style:r={},padding:n="md",background:a="white",hover:l=!1})=>{const c={borderRadius:"12px",border:"1px solid #e5e7eb",transition:l?"all 0.2s ease":"none",...r},d={white:{background:"#ffffff"},gray:{background:"#f9fafb"}},x={sm:{padding:"12px"},md:{padding:"20px"},lg:{padding:"24px"}},f={...c,...d[a],...x[n]};return jsxRuntimeExports.jsx("div",{className:t,style:f,onMouseEnter:h=>{l&&(h.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",h.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:h=>{l&&(h.currentTarget.style.boxShadow="none",h.currentTarget.style.transform="translateY(0)")},children:e})},TransactionFilters=({searchTerm:e,setSearchTerm:t,paymentFilter:r,setPaymentFilter:n,dateFilter:a,setDateFilter:l,selectedDate:c,showCalendar:d,setShowCalendar:x,itemsPerPage:f,setItemsPerPage:h,onCalendarDateSelect:g,generateCalendarDays:y,calendarDate:_,setCalendarDate:E,partialPaymentFilter:b,setPartialPaymentFilter:v})=>jsxRuntimeExports.jsxs(Card,{background:"gray",padding:"md",children:[jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",alignItems:"end"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Search Transactions"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search by ID, customer, cashier...",value:e,onChange:R=>t(R.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"}})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Method"}),jsxRuntimeExports.jsxs("select",{value:r,onChange:R=>n(R.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All Methods"}),jsxRuntimeExports.jsx("option",{value:"cash",children:"Cash"}),jsxRuntimeExports.jsx("option",{value:"card",children:"Card"}),jsxRuntimeExports.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Type"}),jsxRuntimeExports.jsxs("select",{value:b,onChange:R=>v(R.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All Payments"}),jsxRuntimeExports.jsx("option",{value:"full",children:"Full Payments"}),jsxRuntimeExports.jsx("option",{value:"partial",children:"Partial Payments"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Date Range"}),jsxRuntimeExports.jsxs("select",{value:a,onChange:R=>l(R.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All Time"}),jsxRuntimeExports.jsx("option",{value:"today",children:"Today"}),jsxRuntimeExports.jsx("option",{value:"week",children:"Last 7 Days"}),jsxRuntimeExports.jsx("option",{value:"month",children:"Last 30 Days"}),jsxRuntimeExports.jsx("option",{value:"custom",children:"Custom Date"})]})]}),a==="custom"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Select Date"}),jsxRuntimeExports.jsx("button",{onClick:()=>x(!d),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff",cursor:"pointer",textAlign:"left"},children:c?new Date(c).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Select a date"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Items Per Page"}),jsxRuntimeExports.jsxs("select",{value:f,onChange:R=>h(Number(R.target.value)),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[jsxRuntimeExports.jsx("option",{value:10,children:"10"}),jsxRuntimeExports.jsx("option",{value:25,children:"25"}),jsxRuntimeExports.jsx("option",{value:50,children:"50"}),jsxRuntimeExports.jsx("option",{value:100,children:"100"})]})]})]}),d&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>E(new Date(_.getFullYear(),_.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left"})}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:_.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),jsxRuntimeExports.jsx("button",{onClick:()=>E(new Date(_.getFullYear(),_.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(R=>jsxRuntimeExports.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:R},R))}),jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:y().map((R,A)=>{const C=R.getMonth()===_.getMonth(),L=R.toDateString()===new Date().toDateString(),I=c&&R.toDateString()===new Date(c).toDateString();return jsxRuntimeExports.jsx("button",{onClick:()=>g(R),style:{background:I?"#7d8d86":"transparent",color:I?"#f1f0e4":C?"#3e3f29":"#bca88d",border:L?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:C?1:.5},children:R.getDate()},A)})}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:jsxRuntimeExports.jsx("button",{onClick:()=>g(new Date),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer"},children:"Today"})})]})})]}),Button=({children:e,onClick:t,type:r="button",variant:n="primary",size:a="md",disabled:l=!1,className:c="",style:d={}})=>{const x={border:"none",borderRadius:"6px",cursor:l?"not-allowed":"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500",...d},f={primary:{background:"#7d8d86",color:"#ffffff"},secondary:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db"},danger:{background:"#3e3f29",color:"#f1f0e4"},success:{background:"#10b981",color:"#ffffff"}},h={primary:{background:"#6a7a73"},secondary:{background:"#e5e7eb"},danger:{background:"#2a2b1f"},success:{background:"#059669"}},g={sm:{padding:"6px 12px",fontSize:"12px"},md:{padding:"8px 16px",fontSize:"14px"},lg:{padding:"12px 24px",fontSize:"16px"}},y={...x,...f[n],...g[a],opacity:l?.6:1};return jsxRuntimeExports.jsx("button",{type:r,onClick:t,disabled:l,className:c,style:y,onMouseEnter:_=>{l||Object.assign(_.currentTarget.style,h[n])},onMouseLeave:_=>{l||Object.assign(_.currentTarget.style,f[n])},children:e})},TransactionCard=({transaction:e,onTransactionClick:t,onDeleteTransaction:r,onResolvePartialPayment:n})=>{const a=d=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d),l=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),c=d=>{switch(d.toLowerCase()){case"cash":return"fa-solid fa-money-bill";case"card":return"fa-solid fa-credit-card";case"mobile_money":return"fa-solid fa-mobile";default:return"fa-solid fa-money-bill"}};return jsxRuntimeExports.jsxs("div",{className:"transaction-card",onClick:()=>t(e.sale_id),style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",background:e.partial_payment?"#fef2f2":"#ffffff",borderRadius:"8px",border:e.partial_payment?"2px solid #dc2626":"2px solid #374151",cursor:"pointer",transition:"all 0.2s ease",position:"relative",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",marginBottom:"12px"},onMouseEnter:d=>{const x=d.currentTarget;x.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",x.style.transform="translateY(-2px)",x.style.border=e.partial_payment?"2px solid #dc2626":"2px solid #374151"},onMouseLeave:d=>{const x=d.currentTarget;x.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.15)",x.style.transform="translateY(0)",x.style.border=e.partial_payment?"2px solid #dc2626":"2px solid #374151"},children:[jsxRuntimeExports.jsxs("div",{style:{width:"60px",textAlign:"center"},children:[jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#7d8d86",background:"#f3f4f6",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:["#",e.sale_id.toString().slice(-6)]}),e.partial_payment&&jsxRuntimeExports.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"#ffffff",background:"#dc2626",padding:"2px 6px",borderRadius:"3px",marginTop:"4px",display:"inline-block"},children:"PARTIAL"})]}),jsxRuntimeExports.jsx("div",{style:{minWidth:"140px",fontSize:"14px",color:"#6b7280"},children:l(e.datetime)}),jsxRuntimeExports.jsx("div",{style:{flex:1,minWidth:"120px",fontSize:"14px",color:"#374151",fontWeight:"500"},children:e.customer_name}),jsxRuntimeExports.jsx("div",{style:{minWidth:"100px",fontSize:"14px",color:"#6b7280"},children:e.cashier_name}),jsxRuntimeExports.jsxs("div",{style:{minWidth:"120px",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"#374151"},children:[jsxRuntimeExports.jsx("i",{className:c(e.payment_method),style:{color:"#7d8d86"}}),jsxRuntimeExports.jsx("span",{style:{textTransform:"capitalize"},children:e.payment_method.replace("_"," ")})]}),jsxRuntimeExports.jsx("div",{style:{minWidth:"120px",textAlign:"right",fontSize:"16px",fontWeight:"600",color:e.partial_payment?"#dc2626":"#059669"},children:e.partial_payment?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{fontSize:"14px",color:"#dc2626"},children:["Paid: ",a(e.partial_amount||0)]}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",color:"#dc2626"},children:["Owed: ",a(e.remaining_amount||0)]})]}):a(e.total_amount)}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.partial_payment&&n&&jsxRuntimeExports.jsxs(Button,{variant:"primary",size:"sm",onClick:d=>{d.stopPropagation(),n(e.sale_id)},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px"}}),"Resolve"]}),jsxRuntimeExports.jsxs(Button,{variant:"danger",size:"sm",onClick:d=>{d.stopPropagation(),r(e.sale_id)},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"10px"}}),"Delete"]}),jsxRuntimeExports.jsx("div",{style:{color:"#7d8d86"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]})},Pagination=({currentPage:e,totalPages:t,onPageChange:r,startIndex:n,endIndex:a,totalItems:l})=>{if(t<=1)return null;const c=()=>{const d=[];if(t<=5)for(let f=1;f<=t;f++)d.push(f);else if(e<=3){for(let f=1;f<=4;f++)d.push(f);d.push("..."),d.push(t)}else if(e>=t-2){d.push(1),d.push("...");for(let f=t-3;f<=t;f++)d.push(f)}else{d.push(1),d.push("...");for(let f=e-1;f<=e+1;f++)d.push(f);d.push("..."),d.push(t)}return d};return jsxRuntimeExports.jsxs("div",{style:{background:"#f9fafb",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[jsxRuntimeExports.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-list"}),jsxRuntimeExports.jsxs("span",{children:["Showing ",n+1,"-",Math.min(a,l)," of ",l," transactions"]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",size:"sm",onClick:()=>r(e-1),disabled:e===1,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left"}),"Previous"]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:c().map((d,x)=>jsxRuntimeExports.jsx(React.Fragment,{children:d==="..."?jsxRuntimeExports.jsx("span",{style:{padding:"8px 12px",color:"#6b7280",fontSize:"14px"},children:"..."}):jsxRuntimeExports.jsx(Button,{variant:e===d?"primary":"secondary",size:"sm",onClick:()=>r(d),style:{minWidth:"40px"},children:d})},x))}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",size:"sm",onClick:()=>r(e+1),disabled:e===t,children:["Next",jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right"})]})]})]})},Calendar=({isOpen:e,onClose:t,selectedDate:r,onDateSelect:n,onTodaySelect:a,calendarDate:l,onCalendarDateChange:c})=>{const d=(x,f)=>{const h=new Date(x,f,1),g=new Date(h);g.setDate(g.getDate()-h.getDay());const y=[],_=new Date(g);for(let E=0;E<42;E++)y.push(new Date(_)),_.setDate(_.getDate()+1);return y};return e?jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},children:l.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>c(new Date(l.getFullYear(),l.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:x=>{const f=x.currentTarget;f.style.background="#f3f4f6",f.style.color="#3e3f29"},onMouseLeave:x=>{const f=x.currentTarget;f.style.background="none",f.style.color="#7d8d86"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left"})}),jsxRuntimeExports.jsx("button",{onClick:()=>c(new Date(l.getFullYear(),l.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:x=>{const f=x.currentTarget;f.style.background="#f3f4f6",f.style.color="#3e3f29"},onMouseLeave:x=>{const f=x.currentTarget;f.style.background="none",f.style.color="#7d8d86"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right"})}),jsxRuntimeExports.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"20px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:x=>{const f=x.currentTarget;f.style.background="#f3f4f6",f.style.color="#3e3f29"},onMouseLeave:x=>{const f=x.currentTarget;f.style.background="none",f.style.color="#7d8d86"},children:""})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(x=>jsxRuntimeExports.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:x},x)),d(l.getFullYear(),l.getMonth()).map((x,f)=>{const h=x.getMonth()===l.getMonth(),g=new Date,y=new Date(g.getFullYear(),g.getMonth(),g.getDate()),_=new Date(x.getFullYear(),x.getMonth(),x.getDate()),E=new Date(r.getFullYear(),r.getMonth(),r.getDate()),b=_.getTime()===y.getTime(),v=_.getTime()===E.getTime();return jsxRuntimeExports.jsx("button",{onClick:()=>n(x),style:{background:v?"#7d8d86":"transparent",color:v?"#ffffff":h?"#1f2937":"#9ca3af",border:b?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:h?1:.5},onMouseEnter:R=>{if(!v){const A=R.currentTarget;A.style.background="#f3f4f6",A.style.color="#1f2937"}},onMouseLeave:R=>{if(!v){const A=R.currentTarget;A.style.background="transparent",A.style.color=h?"#1f2937":"#9ca3af"}},children:x.getDate()},f)})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:jsxRuntimeExports.jsx("button",{onClick:a,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:x=>{const f=x.currentTarget;f.style.background="#6a7a73"},onMouseLeave:x=>{const f=x.currentTarget;f.style.background="#7d8d86"},children:"Today"})})]})}):null},Transactions=()=>{const e=useNavigate(),{user:t}=useAuth(),{selectedBranchId:r}=useBranch(),{transactions:n,error:a,deleteTransaction:l,resolvePartialPayment:c}=useTransactions(),[d,x]=reactExports.useState(""),[f,h]=reactExports.useState("all"),[g,y]=reactExports.useState("all"),[_,E]=reactExports.useState(null),[b,v]=reactExports.useState("all"),[R,A]=reactExports.useState(!1),[C,L]=reactExports.useState(new Date),[I,ae]=reactExports.useState(()=>{const Ae=new Date;return new Date(Ae.getFullYear(),Ae.getMonth(),Ae.getDate())}),[D,ee]=reactExports.useState(1),[Y,le]=reactExports.useState(25),[te]=reactExports.useState("datetime"),[oe]=reactExports.useState("desc"),Be=Ae=>Ae.filter(ye=>{const V=!d||ye.sale_id.toString().includes(d)||ye.customer_name?.toLowerCase().includes(d.toLowerCase())||ye.cashier_name?.toLowerCase().includes(d.toLowerCase()),be=f==="all"||ye.payment_method===f,Ne=()=>b==="all"?!0:b==="partial"?ye.partial_payment===!0:b==="full"?!ye.partial_payment:!0,H=()=>{if(_){const pe=new Date(ye.datetime),ze=new Date(pe.getFullYear(),pe.getMonth(),pe.getDate()),[Ye,lt,Ke]=_.split("-").map(Number),nt=new Date(Ye,lt-1,Ke);return ze.getTime()===nt.getTime()}if(g==="all")return!0;const Te=new Date,se=new Date(ye.datetime),Ce=new Date(Te.getFullYear(),Te.getMonth(),Te.getDate()),pt=new Date(se.getFullYear(),se.getMonth(),se.getDate());switch(g){case"today":return pt.getTime()===Ce.getTime();case"week":const pe=new Date(Te.getTime()-10080*60*1e3);return se>=pe;case"month":const ze=new Date(Te.getTime()-720*60*60*1e3);return se>=ze;default:return!0}};return V&&be&&Ne()&&H()}),Pe=Ae=>[...Ae].sort((ye,V)=>{let be=ye[te],Ne=V[te];return te==="datetime"&&(be=new Date(be).getTime(),Ne=new Date(Ne).getTime()),oe==="asc"?be>Ne?1:-1:be<Ne?1:-1}),De=Be(n),X=Pe(De),Se=Math.ceil(X.length/Y),z=(D-1)*Y,re=z+Y,T=X.slice(z,re),J=()=>{const Ae=C.getFullYear(),ye=C.getMonth(),V=new Date(Ae,ye,1),be=new Date(V);be.setDate(be.getDate()-V.getDay());const Ne=[];for(let H=0;H<42;H++){const Te=new Date(be);Te.setDate(be.getDate()+H),Ne.push(Te)}return Ne},B=Ae=>{const ye=new Date(Ae.getFullYear(),Ae.getMonth(),Ae.getDate());ae(ye);const V=ye.getFullYear(),be=String(ye.getMonth()+1).padStart(2,"0"),Ne=String(ye.getDate()).padStart(2,"0"),H=`${V}-${be}-${Ne}`;E(H),y("custom"),A(!1)},j=()=>{const Ae=new Date,ye=new Date(Ae.getFullYear(),Ae.getMonth(),Ae.getDate());ae(ye);const V=ye.getFullYear(),be=String(ye.getMonth()+1).padStart(2,"0"),Ne=String(ye.getDate()).padStart(2,"0"),H=`${V}-${be}-${Ne}`;E(H),y("custom"),A(!1)},M=Ae=>{e(`/transaction/${Ae}`)},U=async Ae=>{window.confirm("Are you sure you want to delete this transaction? This action cannot be undone and will restore the stock for all items in this transaction.")&&await l(Ae)&&alert("Transaction deleted successfully!")},K=async Ae=>{window.confirm("Are you sure you want to mark this partial payment as resolved? This will update the transaction to show it as fully paid.")&&await c(Ae)&&alert("Partial payment resolved successfully!")},Le=Ae=>{ee(Ae),window.scrollTo({top:0,behavior:"smooth"})},ve=Ae=>{le(Ae),ee(1)};return reactExports.useEffect(()=>{ee(1)},[d,f,g,_,te,oe]),reactExports.useEffect(()=>{ee(1)},[r]),a?jsxRuntimeExports.jsx(PageLayout,{children:jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:jsxRuntimeExports.jsxs("div",{style:{fontSize:"18px",color:"#ef4444",textAlign:"center"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"12px",display:"block"}}),a]})})}):jsxRuntimeExports.jsxs(PageLayout,{children:[jsxRuntimeExports.jsx(PageHeader,{title:"Transactions",subtitle:"View and manage all sales transactions",icon:"fa-solid fa-receipt",children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[jsxRuntimeExports.jsxs("div",{onClick:()=>A(!0),style:{background:"#3e3f29",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),jsxRuntimeExports.jsx("span",{style:{color:"#bca88d"},children:I.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#1a1a1a",fontSize:"14px",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-receipt"}),jsxRuntimeExports.jsxs("span",{children:["Showing ",z+1,"-",Math.min(re,X.length)," of ",X.length," transactions",_&&jsxRuntimeExports.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","on ",new Date(_).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),g!=="all"&&!_&&jsxRuntimeExports.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","(",g==="today"?"Today":g==="week"?"Last 7 days":g==="month"?"Last 30 days":g,")"]})]})]})]})}),jsxRuntimeExports.jsxs("div",{style:{padding:"24px 32px",flex:1},children:[jsxRuntimeExports.jsx(TransactionFilters,{searchTerm:d,setSearchTerm:x,paymentFilter:f,setPaymentFilter:h,dateFilter:g,setDateFilter:y,selectedDate:_,showCalendar:R,setShowCalendar:A,itemsPerPage:Y,setItemsPerPage:ve,onCalendarDateSelect:B,generateCalendarDays:J,calendarDate:C,setCalendarDate:L,partialPaymentFilter:b,setPartialPaymentFilter:v}),jsxRuntimeExports.jsx(Card,{children:T.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:T.map(Ae=>jsxRuntimeExports.jsx(TransactionCard,{transaction:Ae,onTransactionClick:M,onDeleteTransaction:U,onResolvePartialPayment:K},Ae.sale_id))}):jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",display:"block",color:"#d1d5db"}}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",margin:"0 0 8px 0"},children:"No transactions found"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",margin:0},children:d||f!=="all"||b!=="all"||g!=="all"||I?"Try adjusting your filters to see more results.":"No transactions have been recorded yet."})]})}),jsxRuntimeExports.jsx(Pagination,{currentPage:D,totalPages:Se,onPageChange:Le,startIndex:z,endIndex:re,totalItems:X.length}),jsxRuntimeExports.jsx(Calendar,{isOpen:R,onClose:()=>A(!1),selectedDate:I,onDateSelect:B,onTodaySelect:j,calendarDate:C,onCalendarDateChange:L})]})]})},TransactionDetail=()=>{const{transactionId:e}=useParams(),t=useNavigate();useLocation();const{selectedBranchId:r}=useBranch(),[n,a]=reactExports.useState(null),[l,c]=reactExports.useState([]),[d,x]=reactExports.useState(!0),[f,h]=reactExports.useState(!1),[g,y]=reactExports.useState(!1),[_,E]=reactExports.useState({payment_method:"",customer_id:null,notes:""}),[b,v]=reactExports.useState([]),[R,A]=reactExports.useState({}),[C,L]=reactExports.useState(Date.now());reactExports.useEffect(()=>{e&&(I(),ae())},[e]),reactExports.useEffect(()=>{ae()},[r]),reactExports.useEffect(()=>{const z=()=>{document.visibilityState==="visible"&&e&&(console.log("Page became visible, refreshing transaction data"),I())};return document.addEventListener("visibilitychange",z),()=>{document.removeEventListener("visibilitychange",z)}},[e]),reactExports.useEffect(()=>{const z=()=>{e&&(console.log("Window focused, refreshing transaction data"),I())};return window.addEventListener("focus",z),()=>{window.removeEventListener("focus",z)}},[e]),reactExports.useEffect(()=>{e&&I()},[e]);const I=async()=>{try{x(!0),L(Date.now());const z=parseInt(e?.replace("TXN-","")||"0");if(!z){console.error("Invalid transaction ID"),t("/sales");return}const{data:re,error:T}=await supabase.from("sales").select(`
          *,
          customers (name)
        `).eq("sale_id",z).single();let J=!1,B;if(T){console.log("Not a regular sale, checking side business sales...");const{data:j,error:M}=await supabase.from("side_business_sales").select(`
            *,
            side_business_items (
              name,
              side_businesses (name)
            )
          `).eq("sale_id",z).single();if(M){console.error("Error fetching transaction (both regular and side business):",T,M),t("/sales");return}J=!0,B={sale_id:j.sale_id,datetime:j.date_time,total_amount:j.total_amount,payment_method:j.payment_method,customer_name:null,cashier_name:"System User",business_id:j.business_id,branch_id:j.branch_id,notes:null,partial_payment:!1,partial_amount:null,remaining_amount:null,partial_notes:null},console.log("Fetched side business transaction data:",B)}else B={...re,customer_name:re.customers?.name||null,cashier_name:"System User"},console.log("Fetched regular transaction data:",B);if(a(B),J){const{data:j,error:M}=await supabase.from("side_business_sales").select(`
            *,
            side_business_items (
              name,
              side_businesses (name)
            )
          `).eq("sale_id",z);if(M)console.error("Error fetching side business transaction items:",M);else{console.log("Fetched side business items data:",j);const U=(j||[]).map(K=>({sale_item_id:K.sale_id,product_id:`sb-${K.item_id}`,quantity:K.quantity,unit_price:K.price_each,total_price:K.total_amount,product_name:K.side_business_items?.name||"Unknown Side Business Item",product_category:K.side_business_items?.side_businesses?.name||"Side Business",product_image:null,weight:void 0,weight_unit:void 0,price_per_unit:void 0,is_weighted:!1}));c(U)}}else{const{data:j,error:M}=await supabase.from("sale_items").select(`
            *,
            products (
              name,
              category,
              weight_unit,
              price_per_unit,
              is_weighted,
              image_url
            )
          `).eq("sale_id",z);if(M)console.error("Error fetching transaction items:",M);else{console.log("Fetched items data:",j);const U=(j||[]).map(K=>(K.products?.is_weighted&&console.log("Weighted item data:",{name:K.products.name,weight:K.weight,weight_unit:K.products.weight_unit,price_per_unit:K.products.price_per_unit,calculated_price:K.calculated_price,price_each:K.price_each}),{sale_item_id:K.sale_item_id,product_id:K.product_id,quantity:K.quantity,unit_price:K.price_each,total_price:K.calculated_price||(K.products?.is_weighted&&K.weight&&K.products?.price_per_unit?K.weight*K.products.price_per_unit:K.quantity*K.price_each),product_name:K.products?.name||"Unknown Product",product_category:K.products?.category||"Unknown Category",product_image:K.products?.image_url||null,weight:K.weight||void 0,weight_unit:K.products?.weight_unit||void 0,price_per_unit:K.products?.price_per_unit||void 0,is_weighted:K.products?.is_weighted||!1}));c(U)}}}catch(z){console.error("Error fetching transaction details:",z),t("/sales")}finally{x(!1)}},ae=async()=>{try{let z=supabase.from("customers").select("id, name");r&&(z=z.eq("branch_id",r));const{data:re,error:T}=await z.order("name");T?console.error("Error fetching customers:",T):v(re||[])}catch(z){console.error("Error fetching customers:",z)}},D=()=>{t("/dashboard")},ee=()=>{t(`/sales?transaction=${e}`)},Y=async()=>{if(n)try{y(!0);const z=parseInt(e?.replace("TXN-","")||"0"),{error:re}=await supabase.from("sales").update({payment_method:_.payment_method,customer_id:_.customer_id,notes:_.notes}).eq("sale_id",z);if(re){console.error("Error updating transaction:",re),alert("Failed to update transaction. Please try again.");return}await I(),h(!1),alert("Transaction updated successfully!")}catch(z){console.error("Error saving transaction:",z),alert("Failed to save changes. Please try again.")}finally{y(!1)}},le=()=>{h(!1),E({payment_method:"",customer_id:null,notes:""}),A({})},te=(z,re)=>{re<0||A(T=>({...T,[z]:re}))},oe=async z=>{if(confirm("Are you sure you want to remove this item from the transaction?"))try{const{error:re}=await supabase.from("sale_items").delete().eq("sale_item_id",z);if(re){console.error("Error removing item:",re),alert("Failed to remove item. Please try again.");return}await I(),alert("Item removed successfully!")}catch(re){console.error("Error removing item:",re),alert("Failed to remove item. Please try again.")}},Be=async(z,re)=>{if(re<=0){oe(z);return}try{const T=l.find(j=>j.sale_item_id===z);if(!T)return;const J=re*T.unit_price,{error:B}=await supabase.from("sale_items").update({quantity:re,total_price:J}).eq("sale_item_id",z);if(B){console.error("Error updating item quantity:",B),alert("Failed to update item quantity. Please try again.");return}await I(),A(j=>{const M={...j};return delete M[z],M}),alert("Item quantity updated successfully!")}catch(T){console.error("Error updating item quantity:",T),alert("Failed to update item quantity. Please try again.")}},Pe=async z=>{try{const{error:re}=await supabase.from("reminders").update({resolved:!0}).eq("sale_id",z).eq("resolved",!1);re?console.error("Error resolving related reminders:",re):console.log("Related reminders resolved successfully")}catch(re){console.error("Error resolving related reminders:",re)}},De=async()=>{if(!(!n||!n.partial_payment||!window.confirm(`Complete payment for Transaction #${e}?

This will mark the remaining balance of ${n.remaining_amount?.toFixed(2)||"0.00"} as paid.

The transaction will be marked as fully paid.`)))try{const re=parseInt(e?.replace("TXN-","")||"0"),{error:T}=await supabase.from("sales").update({partial_payment:!1,partial_amount:null,remaining_amount:null,partial_notes:null,notes:n.notes?`${n.notes}

Payment completed on ${new Date().toLocaleString()}`:`Payment completed on ${new Date().toLocaleString()}`}).eq("sale_id",re);if(T){console.error("Error completing payment:",T),alert("Failed to complete payment. Please try again.");return}await Pe(re),alert("Payment completed successfully! Related reminders have been resolved."),await I()}catch(re){console.error("Error completing payment:",re),alert("Failed to complete payment. Please try again.")}},X=async()=>{if(!(!n||!window.confirm(`Are you sure you want to delete Transaction #${e}?

This will:
 Remove all items from this transaction
 Restore stock quantities for all items
 Delete the transaction record

This action cannot be undone!`)))try{const re=parseInt(e?.replace("TXN-","")||"0");for(const B of l){const{data:j,error:M}=await supabase.from("products").select("stock_quantity").eq("product_id",B.product_id).single();if(M){console.error("Error fetching product stock:",M);continue}const{error:U}=await supabase.from("products").update({stock_quantity:j.stock_quantity+B.quantity,last_updated:new Date().toISOString()}).eq("product_id",B.product_id);U&&console.error("Error restoring stock:",U);const{error:K}=await supabase.from("inventory_movements").insert([{product_id:B.product_id,quantity_change:B.quantity,movement_type:"Transaction Deletion",reference_id:re,notes:`Stock restored from deleted transaction #${e}`}]);K&&console.error("Error creating inventory movement:",K)}const{error:T}=await supabase.from("sale_items").delete().eq("sale_id",re);if(T){console.error("Error deleting sale items:",T),alert("Failed to delete transaction items. Please try again.");return}const{error:J}=await supabase.from("sales").delete().eq("sale_id",re);if(J){console.error("Error deleting sale:",J),alert("Failed to delete transaction. Please try again.");return}alert("Transaction deleted successfully!"),t("/dashboard")}catch(re){console.error("Error deleting transaction:",re),alert("Failed to delete transaction. Please try again.")}},Se=z=>new Date(z).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?jsxRuntimeExports.jsxs("div",{style:{padding:"0"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[jsxRuntimeExports.jsx("button",{onClick:D,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease"},onMouseEnter:z=>{z.target.style.background="#7d8d86",z.target.style.color="#f1f0e4"},onMouseLeave:z=>{z.target.style.background="none",z.target.style.color="#7d8d86"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-arrow-left"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0",display:"flex",alignItems:"center",gap:"12px"},children:["Transaction #",e,l.length>0&&l[0].product_id.startsWith("sb-")&&jsxRuntimeExports.jsxs("span",{style:{fontSize:"14px",fontWeight:"normal",background:"#f3f4f6",color:"#6b7280",padding:"4px 8px",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-briefcase",style:{marginRight:"4px"}}),"Side Business"]})]}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:Se(n.datetime)})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px"},children:[jsxRuntimeExports.jsxs("button",{onClick:X,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:z=>{z.target.style.background="#dc2626"},onMouseLeave:z=>{z.target.style.background="#ef4444"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"14px"}}),"Delete Transaction"]}),f?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:Y,disabled:g,style:{background:g?"#9ca3af":"#10b981",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:g?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:z=>{g||(z.target.style.background="#059669")},onMouseLeave:z=>{g||(z.target.style.background="#10b981")},children:[jsxRuntimeExports.jsx("i",{className:`fa-solid ${g?"fa-spinner":"fa-save"}`,style:{fontSize:"14px",animation:g?"spin 1s linear infinite":"none"}}),g?"Saving...":"Save"]}),jsxRuntimeExports.jsxs("button",{onClick:le,disabled:g,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:g?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:z=>{g||(z.target.style.background="#dc2626")},onMouseLeave:z=>{g||(z.target.style.background="#ef4444")},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"14px"}}),"Cancel"]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:I,style:{background:"#3b82f6",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:z=>{z.target.style.background="#2563eb"},onMouseLeave:z=>{z.target.style.background="#3b82f6"},title:`Last refreshed: ${new Date(C).toLocaleTimeString()}`,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-refresh",style:{fontSize:"14px"}}),"Refresh"]}),jsxRuntimeExports.jsxs("button",{onClick:ee,style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:z=>{z.target.style.background="#bca88d"},onMouseLeave:z=>{z.target.style.background="#7d8d86"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-edit",style:{fontSize:"14px"}}),"Edit"]})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Total Amount"}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"28px",fontWeight:"bold",color:"#3e3f29",margin:0},children:["",n.total_amount.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Payment Method"}),f?jsxRuntimeExports.jsxs("select",{value:_.payment_method,onChange:z=>E({..._,payment_method:z.target.value}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[jsxRuntimeExports.jsx("option",{value:"cash",children:"Cash"}),jsxRuntimeExports.jsx("option",{value:"card",children:"Card"}),jsxRuntimeExports.jsx("option",{value:"credit",children:"Credit"})]}):jsxRuntimeExports.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0,textTransform:"capitalize"},children:n.payment_method})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Customer"}),f?jsxRuntimeExports.jsxs("select",{value:_.customer_id||"",onChange:z=>E({..._,customer_id:z.target.value?parseInt(z.target.value):null}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Walk-in Customer"}),b.map(z=>jsxRuntimeExports.jsx("option",{value:z.id,children:z.name},z.id))]}):jsxRuntimeExports.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:n.customer_name||"Walk-in Customer"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Cashier"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:n.cashier_name||"System"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Items Count"}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:[l.length," items"]})]}),n.discount_applied&&n.discount_applied>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Discount Applied"}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#ef4444",margin:0},children:["-",n.discount_applied.toFixed(2)]})]})]}),n.partial_payment&&jsxRuntimeExports.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px",marginTop:"24px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-credit-card",style:{color:"#f59e0b",fontSize:"16px"}}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#92400e",margin:0},children:"Partial Payment Transaction"})]}),jsxRuntimeExports.jsxs("button",{onClick:De,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:z=>{z.target.style.background="#6b7280"},onMouseLeave:z=>{z.target.style.background="#7d8d86"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"12px"}}),"Complete Payment"]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Amount Paid"}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#059669",margin:0},children:["",n.partial_amount?.toFixed(2)||"0.00"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Remaining Balance"}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#dc2626",margin:0},children:["",n.remaining_amount?.toFixed(2)||"0.00"]})]}),n.partial_notes&&jsxRuntimeExports.jsxs("div",{style:{gridColumn:"1 / -1"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Notes"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:0,fontStyle:"italic"},children:n.partial_notes})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"24px"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Notes"}),f?jsxRuntimeExports.jsx("textarea",{value:_.notes,onChange:z=>E({..._,notes:z.target.value}),placeholder:"Add transaction notes...",style:{width:"100%",minHeight:"80px",fontSize:"14px",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"12px",resize:"vertical",fontFamily:"inherit"}}):jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",color:"#3e3f29",margin:0,fontStyle:n.notes?"normal":"italic",opacity:n.notes?1:.6},children:n.notes||"No notes added"})]})]}),jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[jsxRuntimeExports.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 24px 0",display:"flex",alignItems:"center",gap:"12px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"20px"}}),"Transaction Items"]}),l.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:(()=>{const z=l.reduce((re,T)=>{const J=`${T.product_id}-${T.weight||"no-weight"}`;return re[J]||(re[J]={...T,totalQuantity:0,totalPrice:0,saleItemIds:[]}),re[J].totalQuantity+=T.quantity,re[J].totalPrice+=T.total_price||T.quantity*T.unit_price,re[J].saleItemIds.push(T.sale_item_id),re},{});return Object.values(z).map((re,T)=>{const J=R[re.sale_item_id]!==void 0,B=J?R[re.sale_item_id]:re.totalQuantity,j=re.is_weighted&&re.weight?re.totalPrice:B*re.unit_price;return jsxRuntimeExports.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease"},onMouseEnter:M=>{M.target.style.boxShadow="0 4px 12px rgba(62, 63, 41, 0.1)",M.target.style.transform="translateY(-2px)"},onMouseLeave:M=>{M.target.style.boxShadow="none",M.target.style.transform="translateY(0)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:re.product_image?`url(${re.product_image})`:re.is_weighted?"#f59e0b":"#7d8d86",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"18px",fontWeight:"bold",position:"relative",border:"2px solid rgba(125, 141, 134, 0.2)"},children:!re.product_image&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[re.is_weighted&&re.weight?`${re.weight}${re.weight_unit}`:re.totalQuantity,re.is_weighted&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",width:"16px",height:"16px",borderRadius:"50%",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"#ffffff"},children:""})]})}),f&&!re.is_weighted&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>te(re.sale_item_id,B-1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),jsxRuntimeExports.jsx("div",{style:{minWidth:"48px",height:"48px",borderRadius:"12px",background:J?"#fef3c7":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:J?"#92400e":"#f1f0e4",fontSize:"18px",fontWeight:"bold",border:J?"2px solid #f59e0b":"none"},children:B}),jsxRuntimeExports.jsx("button",{onClick:()=>te(re.sale_item_id,B+1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#10b981",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),J&&jsxRuntimeExports.jsx("button",{onClick:()=>Be(re.sale_item_id,B),style:{padding:"6px 12px",borderRadius:"6px",background:"#3b82f6",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer"},children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>oe(re.sale_item_id),style:{padding:"6px 12px",borderRadius:"6px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer",marginLeft:"8px"},children:"Remove"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:re.product_name}),jsxRuntimeExports.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[re.product_category,"  ",re.is_weighted&&re.weight&&re.weight_unit&&re.price_per_unit?`${re.weight} ${re.weight_unit}  ${re.price_per_unit.toFixed(2)}/${re.weight_unit}`:`${re.unit_price.toFixed(2)} each`]}),re.is_weighted&&f&&jsxRuntimeExports.jsx("p",{style:{fontSize:"12px",color:"#f59e0b",margin:"4px 0 0 0",fontStyle:"italic"},children:"Weighted items cannot be edited after sale"})]})]}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:J?"#f59e0b":"#3e3f29"},children:["",j.toFixed(2)]})]},T)})})()}):jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#7d8d86"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-box",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",margin:0},children:"No items found for this transaction"})]})]})]}):jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",color:"#7d8d86"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",margin:0},children:"Transaction not found"})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var XLSX={};XLSX.version="0.18.5";var current_ansi=1252,VALID_ANSI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],set_ansi=function(e){VALID_ANSI.indexOf(e)!=-1&&(current_ansi=e)};function reset_ansi(){set_ansi(1252)}var set_cp=function(e){set_ansi(e)};function reset_cp(){set_cp(1200),reset_ansi()}var _getchar=function e(t){return String.fromCharCode(t)},_getansi=function e(t){return String.fromCharCode(t)},$cptable,Base64_map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Base64_encode(e){for(var t="",r=0,n=0,a=0,l=0,c=0,d=0,x=0,f=0;f<e.length;)r=e.charCodeAt(f++),l=r>>2,n=e.charCodeAt(f++),c=(r&3)<<4|n>>4,a=e.charCodeAt(f++),d=(n&15)<<2|a>>6,x=a&63,isNaN(n)?d=x=64:isNaN(a)&&(x=64),t+=Base64_map.charAt(l)+Base64_map.charAt(c)+Base64_map.charAt(d)+Base64_map.charAt(x);return t}function Base64_decode(e){var t="",r=0,n=0,a=0,l=0,c=0,d=0,x=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var f=0;f<e.length;)l=Base64_map.indexOf(e.charAt(f++)),c=Base64_map.indexOf(e.charAt(f++)),r=l<<2|c>>4,t+=String.fromCharCode(r),d=Base64_map.indexOf(e.charAt(f++)),n=(c&15)<<4|d>>2,d!==64&&(t+=String.fromCharCode(n)),x=Base64_map.indexOf(e.charAt(f++)),a=(d&3)<<6|x,x!==64&&(t+=String.fromCharCode(a));return t}var has_buf=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Buffer_from=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function new_raw_buf(e){return has_buf?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function new_unsafe_buf(e){return has_buf?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var s2a=function e(t){return has_buf?Buffer_from(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function s2ab(e){if(typeof ArrayBuffer>"u")return s2a(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function a2s(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function a2u(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var bconcat=has_buf?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Buffer_from(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(l){return Array.isArray(l)?l:[].slice.call(l)}))};function utf8decode(e){for(var t=[],r=0,n=e.length+250,a=new_raw_buf(e.length+255),l=0;l<e.length;++l){var c=e.charCodeAt(l);if(c<128)a[r++]=c;else if(c<2048)a[r++]=192|c>>6&31,a[r++]=128|c&63;else if(c>=55296&&c<57344){c=(c&1023)+64;var d=e.charCodeAt(++l)&1023;a[r++]=240|c>>8&7,a[r++]=128|c>>2&63,a[r++]=128|d>>6&15|(c&3)<<4,a[r++]=128|d&63}else a[r++]=224|c>>12&15,a[r++]=128|c>>6&63,a[r++]=128|c&63;r>n&&(t.push(a.slice(0,r)),r=0,a=new_raw_buf(65535),n=65530)}return t.push(a.slice(0,r)),bconcat(t)}var chr0=/\u0000/g,chr1=/[\u0001-\u0006]/g;function _strrev(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function pad0(e,t){var r=""+e;return r.length>=t?r:fill("0",t-r.length)+r}function pad_(e,t){var r=""+e;return r.length>=t?r:fill(" ",t-r.length)+r}function rpad_(e,t){var r=""+e;return r.length>=t?r:r+fill(" ",t-r.length)}function pad0r1(e,t){var r=""+Math.round(e);return r.length>=t?r:fill("0",t-r.length)+r}function pad0r2(e,t){var r=""+e;return r.length>=t?r:fill("0",t-r.length)+r}var p2_32=Math.pow(2,32);function pad0r(e,t){if(e>p2_32||e<-p2_32)return pad0r1(e,t);var r=Math.round(e);return pad0r2(r,t)}function SSF_isgeneral(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function SSF_init_table(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var table_fmt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},SSF_default_map={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SSF_default_str={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function SSF_frac(e,t,r){for(var n=e<0?-1:1,a=e*n,l=0,c=1,d=0,x=1,f=0,h=0,g=Math.floor(a);f<t&&(g=Math.floor(a),d=g*c+l,h=g*f+x,!(a-g<5e-8));)a=1/(a-g),l=c,c=d,x=f,f=h;if(h>t&&(f>t?(h=x,d=l):(h=f,d=c)),!r)return[0,n*d,h];var y=Math.floor(n*d/h);return[y,n*d-y*h,h]}function SSF_parse_date_code(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),l=0,c=[],d={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(d.u)<1e-6&&(d.u=0),t&&t.date1904&&(n+=1462),d.u>.9999&&(d.u=0,++a==86400&&(d.T=a=0,++n,++d.D)),n===60)c=r?[1317,10,29]:[1900,2,29],l=3;else if(n===0)c=r?[1317,8,29]:[1900,1,0],l=6;else{n>60&&--n;var x=new Date(1900,0,1);x.setDate(x.getDate()+n-1),c=[x.getFullYear(),x.getMonth()+1,x.getDate()],l=x.getDay(),n<60&&(l=(l+6)%7),r&&(l=SSF_fix_hijri(x,c))}return d.y=c[0],d.m=c[1],d.d=c[2],d.S=a%60,a=Math.floor(a/60),d.M=a%60,a=Math.floor(a/60),d.H=a,d.q=l,d}var SSFbasedate=new Date(1899,11,31,0,0,0),SSFdnthresh=SSFbasedate.getTime(),SSFbase1904=new Date(1900,2,1,0,0,0);function datenum_local(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=SSFbase1904&&(r+=1440*60*1e3),(r-(SSFdnthresh+(e.getTimezoneOffset()-SSFbasedate.getTimezoneOffset())*6e4))/(1440*60*1e3)}function SSF_strip_decimal(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function SSF_normalize_exp(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SSF_small_exp(e){var t=e<0?12:11,r=SSF_strip_decimal(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function SSF_large_exp(e){var t=SSF_strip_decimal(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function SSF_general_num(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=SSF_small_exp(e):t===10?r=e.toFixed(10).substr(0,12):r=SSF_large_exp(e),SSF_strip_decimal(SSF_normalize_exp(r.toUpperCase()))}function SSF_general(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):SSF_general_num(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return SSF_format(14,datenum_local(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function SSF_fix_hijri(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function SSF_write_date(e,t,r,n){var a="",l=0,c=0,d=r.y,x,f=0;switch(e){case 98:d=r.y+543;case 121:switch(t.length){case 1:case 2:x=d%100,f=2;break;default:x=d%1e4,f=4;break}break;case 109:switch(t.length){case 1:case 2:x=r.m,f=t.length;break;case 3:return months[r.m-1][1];case 5:return months[r.m-1][0];default:return months[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:x=r.d,f=t.length;break;case 3:return days[r.q][0];default:return days[r.q][1]}break;case 104:switch(t.length){case 1:case 2:x=1+(r.H+11)%12,f=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:x=r.H,f=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:x=r.M,f=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?pad0(r.S,t.length):(n>=2?c=n===3?1e3:100:c=n===1?10:1,l=Math.round(c*(r.S+r.u)),l>=60*c&&(l=0),t==="s"?l===0?"0":""+l/c:(a=pad0(l,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":x=r.D*24+r.H;break;case"[m]":case"[mm]":x=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":x=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}f=t.length===3?1:2;break;case 101:x=d,f=1;break}var h=f>0?pad0(x,f):"";return h}function commaify(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var pct1=/%/g;function write_num_pct(e,t,r){var n=t.replace(pct1,""),a=t.length-n.length;return write_num(e,n,r*Math.pow(10,2*a))+fill("%",a)}function write_num_cm(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return write_num(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function write_num_exp(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+write_num_exp(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var l=Math.floor(Math.log(t)*Math.LOG10E)%a;if(l<0&&(l+=a),r=(t/Math.pow(10,l)).toPrecision(n+1+(a+l)%a),r.indexOf("e")===-1){var c=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+l):r+="E+"+(c-l);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,x,f,h){return x+f+h.substr(0,(a+l)%a)+"."+h.substr(l)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var frac1=/# (\?+)( ?)\/( ?)(\d+)/;function write_num_f1(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),l=Math.floor(a/n),c=a-l*n,d=n;return r+(l===0?"":""+l)+" "+(c===0?fill(" ",e[1].length+1+e[4].length):pad_(c,e[1].length)+e[2]+"/"+e[3]+pad0(d,e[4].length))}function write_num_f2(e,t,r){return r+(t===0?"":""+t)+fill(" ",e[1].length+2+e[4].length)}var dec1=/^#*0*\.([0#]+)/,closeparen=/\).*[0#]/,phone=/\(###\) ###\\?-####/;function hashq(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function rnd(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function dec(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function carry(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function flr(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function write_num_flt(e,t,r){if(e.charCodeAt(0)===40&&!t.match(closeparen)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?write_num_flt("n",n,r):"("+write_num_flt("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return write_num_cm(e,t,r);if(t.indexOf("%")!==-1)return write_num_pct(e,t,r);if(t.indexOf("E")!==-1)return write_num_exp(t,r);if(t.charCodeAt(0)===36)return"$"+write_num_flt(e,t.substr(t.charAt(1)==" "?2:1),r);var a,l,c,d,x=Math.abs(r),f=r<0?"-":"";if(t.match(/^00+$/))return f+pad0r(x,t.length);if(t.match(/^[#?]+$/))return a=pad0r(r,0),a==="0"&&(a=""),a.length>t.length?a:hashq(t.substr(0,t.length-a.length))+a;if(l=t.match(frac1))return write_num_f1(l,x,f);if(t.match(/^#+0+$/))return f+pad0r(x,t.length-t.indexOf("0"));if(l=t.match(dec1))return a=rnd(r,l[1].length).replace(/^([^\.]+)$/,"$1."+hashq(l[1])).replace(/\.$/,"."+hashq(l[1])).replace(/\.(\d*)$/,function(E,b){return"."+b+fill("0",hashq(l[1]).length-b.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),l=t.match(/^(0*)\.(#*)$/))return f+rnd(x,l[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,l[1].length?"0.":".");if(l=t.match(/^#{1,3},##0(\.?)$/))return f+commaify(pad0r(x,0));if(l=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+write_num_flt(e,t,-r):commaify(""+(Math.floor(r)+carry(r,l[1].length)))+"."+pad0(dec(r,l[1].length),l[1].length);if(l=t.match(/^#,#*,#0/))return write_num_flt(e,t.replace(/^#,#*,/,""),r);if(l=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=_strrev(write_num_flt(e,t.replace(/[\\-]/g,""),r)),c=0,_strrev(_strrev(t.replace(/\\/g,"")).replace(/[0#]/g,function(E){return c<a.length?a.charAt(c++):E==="0"?"0":""}));if(t.match(phone))return a=write_num_flt(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var h="";if(l=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(l[4].length,7),d=SSF_frac(x,Math.pow(10,c)-1,!1),a=""+f,h=write_num("n",l[1],d[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),a+=h+l[2]+"/"+l[3],h=rpad_(d[2],c),h.length<l[4].length&&(h=hashq(l[4].substr(l[4].length-h.length))+h),a+=h,a;if(l=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(l[1].length,l[4].length),7),d=SSF_frac(x,Math.pow(10,c)-1,!0),f+(d[0]||(d[1]?"":"0"))+" "+(d[1]?pad_(d[1],c)+l[2]+"/"+l[3]+rpad_(d[2],c):fill(" ",2*c+1+l[2].length+l[3].length));if(l=t.match(/^[#0?]+$/))return a=pad0r(r,0),t.length<=a.length?a:hashq(t.substr(0,t.length-a.length))+a;if(l=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(l[2].length,10)).replace(/([^0])0+$/,"$1"),c=a.indexOf(".");var g=t.indexOf(".")-c,y=t.length-a.length-g;return hashq(t.substr(0,g)+a+t.substr(t.length-y))}if(l=t.match(/^00,000\.([#0]*0)$/))return c=dec(r,l[1].length),r<0?"-"+write_num_flt(e,t,-r):commaify(flr(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(E){return"00,"+(E.length<3?pad0(0,3-E.length):"")+E})+"."+pad0(c,l[1].length);switch(t){case"###,##0.00":return write_num_flt(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var _=commaify(pad0r(x,0));return _!=="0"?f+_:"";case"###,###.00":return write_num_flt(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return write_num_flt(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function write_num_cm2(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return write_num(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function write_num_pct2(e,t,r){var n=t.replace(pct1,""),a=t.length-n.length;return write_num(e,n,r*Math.pow(10,2*a))+fill("%",a)}function write_num_exp2(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+write_num_exp2(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var l=Math.floor(Math.log(t)*Math.LOG10E)%a;if(l<0&&(l+=a),r=(t/Math.pow(10,l)).toPrecision(n+1+(a+l)%a),!r.match(/[Ee]/)){var c=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+l):r+="E+"+(c-l),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,x,f,h){return x+f+h.substr(0,(a+l)%a)+"."+h.substr(l)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function write_num_int(e,t,r){if(e.charCodeAt(0)===40&&!t.match(closeparen)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?write_num_int("n",n,r):"("+write_num_int("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return write_num_cm2(e,t,r);if(t.indexOf("%")!==-1)return write_num_pct2(e,t,r);if(t.indexOf("E")!==-1)return write_num_exp2(t,r);if(t.charCodeAt(0)===36)return"$"+write_num_int(e,t.substr(t.charAt(1)==" "?2:1),r);var a,l,c,d,x=Math.abs(r),f=r<0?"-":"";if(t.match(/^00+$/))return f+pad0(x,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:hashq(t.substr(0,t.length-a.length))+a;if(l=t.match(frac1))return write_num_f2(l,x,f);if(t.match(/^#+0+$/))return f+pad0(x,t.length-t.indexOf("0"));if(l=t.match(dec1))return a=(""+r).replace(/^([^\.]+)$/,"$1."+hashq(l[1])).replace(/\.$/,"."+hashq(l[1])),a=a.replace(/\.(\d*)$/,function(E,b){return"."+b+fill("0",hashq(l[1]).length-b.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),l=t.match(/^(0*)\.(#*)$/))return f+(""+x).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,l[1].length?"0.":".");if(l=t.match(/^#{1,3},##0(\.?)$/))return f+commaify(""+x);if(l=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+write_num_int(e,t,-r):commaify(""+r)+"."+fill("0",l[1].length);if(l=t.match(/^#,#*,#0/))return write_num_int(e,t.replace(/^#,#*,/,""),r);if(l=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=_strrev(write_num_int(e,t.replace(/[\\-]/g,""),r)),c=0,_strrev(_strrev(t.replace(/\\/g,"")).replace(/[0#]/g,function(E){return c<a.length?a.charAt(c++):E==="0"?"0":""}));if(t.match(phone))return a=write_num_int(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var h="";if(l=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(l[4].length,7),d=SSF_frac(x,Math.pow(10,c)-1,!1),a=""+f,h=write_num("n",l[1],d[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),a+=h+l[2]+"/"+l[3],h=rpad_(d[2],c),h.length<l[4].length&&(h=hashq(l[4].substr(l[4].length-h.length))+h),a+=h,a;if(l=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(l[1].length,l[4].length),7),d=SSF_frac(x,Math.pow(10,c)-1,!0),f+(d[0]||(d[1]?"":"0"))+" "+(d[1]?pad_(d[1],c)+l[2]+"/"+l[3]+rpad_(d[2],c):fill(" ",2*c+1+l[2].length+l[3].length));if(l=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:hashq(t.substr(0,t.length-a.length))+a;if(l=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(l[2].length,10)).replace(/([^0])0+$/,"$1"),c=a.indexOf(".");var g=t.indexOf(".")-c,y=t.length-a.length-g;return hashq(t.substr(0,g)+a+t.substr(t.length-y))}if(l=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+write_num_int(e,t,-r):commaify(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(E){return"00,"+(E.length<3?pad0(0,3-E.length):"")+E})+"."+pad0(0,l[1].length);switch(t){case"###,###":case"##,###":case"#,###":var _=commaify(""+x);return _!=="0"?f+_:"";default:if(t.match(/\.[0#?]*$/))return write_num_int(e,t.slice(0,t.lastIndexOf(".")),r)+hashq(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function write_num(e,t,r){return(r|0)===r?write_num_int(e,t,r):write_num_flt(e,t,r)}function SSF_split_fmt(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var SSF_abstime=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fmt_is_date(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":SSF_isgeneral(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(SSF_abstime))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function eval_fmt(e,t,r,n){for(var a=[],l="",c=0,d="",x="t",f,h,g,y="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!SSF_isgeneral(e,c))throw new Error("unrecognized character "+d+" in "+e);a[a.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";(g=e.charCodeAt(++c))!==34&&c<e.length;)l+=String.fromCharCode(g);a[a.length]={t:"t",v:l},++c;break;case"\\":var _=e.charAt(++c),E=_==="("||_===")"?_:"t";a[a.length]={t:E,v:_},++c;break;case"_":a[a.length]={t:"t",v:" "},c+=2;break;case"@":a[a.length]={t:"T",v:t},++c;break;case"B":case"b":if(e.charAt(c+1)==="1"||e.charAt(c+1)==="2"){if(f==null&&(f=SSF_parse_date_code(t,r,e.charAt(c+1)==="2"),f==null))return"";a[a.length]={t:"X",v:e.substr(c,2)},x=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||f==null&&(f=SSF_parse_date_code(t,r),f==null))return"";for(l=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)l+=d;d==="m"&&x.toLowerCase()==="h"&&(d="M"),d==="h"&&(d=y),a[a.length]={t:d,v:l},x=d;break;case"A":case"a":case"":var b={t:d,v:d};if(f==null&&(f=SSF_parse_date_code(t,r)),e.substr(c,3).toUpperCase()==="A/P"?(f!=null&&(b.v=f.H>=12?"P":"A"),b.t="T",y="h",c+=3):e.substr(c,5).toUpperCase()==="AM/PM"?(f!=null&&(b.v=f.H>=12?"PM":"AM"),b.t="T",c+=5,y="h"):e.substr(c,5).toUpperCase()==="/"?(f!=null&&(b.v=f.H>=12?"":""),b.t="T",c+=5,y="h"):(b.t="t",++c),f==null&&b.t==="T")return"";a[a.length]=b,x=d;break;case"[":for(l=d;e.charAt(c++)!=="]"&&c<e.length;)l+=e.charAt(c);if(l.slice(-1)!=="]")throw'unterminated "[" block: |'+l+"|";if(l.match(SSF_abstime)){if(f==null&&(f=SSF_parse_date_code(t,r),f==null))return"";a[a.length]={t:"Z",v:l.toLowerCase()},x=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(e)||(a[a.length]={t:"t",v:l}));break;case".":if(f!=null){for(l=d;++c<e.length&&(d=e.charAt(c))==="0";)l+=d;a[a.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)l+=d;a[a.length]={t:"n",v:l};break;case"?":for(l=d;e.charAt(++c)===d;)l+=d;a[a.length]={t:d,v:l},x=d;break;case"*":++c,(e.charAt(c)==" "||e.charAt(c)=="*")&&++c;break;case"(":case")":a[a.length]={t:n===1?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);a[a.length]={t:"D",v:l};break;case" ":a[a.length]={t:d,v:d},++c;break;case"$":a[a.length]={t:"t",v:"$"},++c;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(d)===-1)throw new Error("unrecognized character "+d+" in "+e);a[a.length]={t:"t",v:d},++c;break}var v=0,R=0,A;for(c=a.length-1,x="t";c>=0;--c)switch(a[c].t){case"h":case"H":a[c].t=y,x="h",v<1&&(v=1);break;case"s":(A=a[c].v.match(/\.0+$/))&&(R=Math.max(R,A[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":x=a[c].t;break;case"m":x==="s"&&(a[c].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&a[c].v.match(/[Hh]/)&&(v=1),v<2&&a[c].v.match(/[Mm]/)&&(v=2),v<3&&a[c].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M),f.M>=60&&(f.M=0,++f.H);break;case 2:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M);break}var C="",L;for(c=0;c<a.length;++c)switch(a[c].t){case"t":case"T":case" ":case"D":break;case"X":a[c].v="",a[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[c].v=SSF_write_date(a[c].t.charCodeAt(0),a[c].v,f,R),a[c].t="t";break;case"n":case"?":for(L=c+1;a[L]!=null&&((d=a[L].t)==="?"||d==="D"||(d===" "||d==="t")&&a[L+1]!=null&&(a[L+1].t==="?"||a[L+1].t==="t"&&a[L+1].v==="/")||a[c].t==="("&&(d===" "||d==="n"||d===")")||d==="t"&&(a[L].v==="/"||a[L].v===" "&&a[L+1]!=null&&a[L+1].t=="?"));)a[c].v+=a[L].v,a[L]={v:"",t:";"},++L;C+=a[c].v,c=L-1;break;case"G":a[c].t="t",a[c].v=SSF_general(t,r);break}var I="",ae,D;if(C.length>0){C.charCodeAt(0)==40?(ae=t<0&&C.charCodeAt(0)===45?-t:t,D=write_num("n",C,ae)):(ae=t<0&&n>1?-t:t,D=write_num("n",C,ae),ae<0&&a[0]&&a[0].t=="t"&&(D=D.substr(1),a[0].v="-"+a[0].v)),L=D.length-1;var ee=a.length;for(c=0;c<a.length;++c)if(a[c]!=null&&a[c].t!="t"&&a[c].v.indexOf(".")>-1){ee=c;break}var Y=a.length;if(ee===a.length&&D.indexOf("E")===-1){for(c=a.length-1;c>=0;--c)a[c]==null||"n?".indexOf(a[c].t)===-1||(L>=a[c].v.length-1?(L-=a[c].v.length,a[c].v=D.substr(L+1,a[c].v.length)):L<0?a[c].v="":(a[c].v=D.substr(0,L+1),L=-1),a[c].t="t",Y=c);L>=0&&Y<a.length&&(a[Y].v=D.substr(0,L+1)+a[Y].v)}else if(ee!==a.length&&D.indexOf("E")===-1){for(L=D.indexOf(".")-1,c=ee;c>=0;--c)if(!(a[c]==null||"n?".indexOf(a[c].t)===-1)){for(h=a[c].v.indexOf(".")>-1&&c===ee?a[c].v.indexOf(".")-1:a[c].v.length-1,I=a[c].v.substr(h+1);h>=0;--h)L>=0&&(a[c].v.charAt(h)==="0"||a[c].v.charAt(h)==="#")&&(I=D.charAt(L--)+I);a[c].v=I,a[c].t="t",Y=c}for(L>=0&&Y<a.length&&(a[Y].v=D.substr(0,L+1)+a[Y].v),L=D.indexOf(".")+1,c=ee;c<a.length;++c)if(!(a[c]==null||"n?(".indexOf(a[c].t)===-1&&c!==ee)){for(h=a[c].v.indexOf(".")>-1&&c===ee?a[c].v.indexOf(".")+1:0,I=a[c].v.substr(0,h);h<a[c].v.length;++h)L<D.length&&(I+=D.charAt(L++));a[c].v=I,a[c].t="t",Y=c}}}for(c=0;c<a.length;++c)a[c]!=null&&"n?".indexOf(a[c].t)>-1&&(ae=n>1&&t<0&&c>0&&a[c-1].v==="-"?-t:t,a[c].v=write_num(a[c].t,a[c].v,ae),a[c].t="t");var le="";for(c=0;c!==a.length;++c)a[c]!=null&&(le+=a[c].v);return le}var cfregex2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function chkcond(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function choose_fmt(e,t){var r=SSF_split_fmt(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var l=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,l];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var c=r[0].match(cfregex2),d=r[1].match(cfregex2);return chkcond(t,c)?[n,r[0]]:chkcond(t,d)?[n,r[1]]:[n,r[c!=null&&d!=null?2:1]]}return[n,l]}function SSF_format(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:table_fmt)[e],n==null&&(n=r.table&&r.table[SSF_default_map[e]]||table_fmt[SSF_default_map[e]]),n==null&&(n=SSF_default_str[e]||"General");break}if(SSF_isgeneral(n,0))return SSF_general(t,r);t instanceof Date&&(t=datenum_local(t,r.date1904));var a=choose_fmt(n,t);if(SSF_isgeneral(a[1]))return SSF_general(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return eval_fmt(a[1],t,r,a[0])}function SSF_load(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(table_fmt[r]==null){t<0&&(t=r);continue}if(table_fmt[r]==e){t=r;break}}t<0&&(t=391)}return table_fmt[t]=e,t}function SSF_load_table(e){for(var t=0;t!=392;++t)e[t]!==void 0&&SSF_load(e[t],t)}function make_ssf(){table_fmt=SSF_init_table()}var dateNFregex=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function dateNF_regex(e){var t=typeof e=="number"?table_fmt[e]:e;return t=t.replace(dateNFregex,"(\\d+)"),new RegExp("^"+t+"$")}function dateNF_fix(e,t,r){var n=-1,a=-1,l=-1,c=-1,d=-1,x=-1;(t.match(dateNFregex)||[]).forEach(function(g,y){var _=parseInt(r[y+1],10);switch(g.toLowerCase().charAt(0)){case"y":n=_;break;case"d":l=_;break;case"h":c=_;break;case"s":x=_;break;case"m":c>=0?d=_:a=_;break}}),x>=0&&d==-1&&a>=0&&(d=a,a=-1);var f=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(l>=1?l:1)).slice(-2);f.length==7&&(f="0"+f),f.length==8&&(f="20"+f);var h=("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(x>=0?x:0)).slice(-2);return c==-1&&d==-1&&x==-1?f:n==-1&&a==-1&&l==-1?h:f+"T"+h}var CRC32=(function(){var e={};e.version="1.2.0";function t(){for(var D=0,ee=new Array(256),Y=0;Y!=256;++Y)D=Y,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,ee[Y]=D;return typeof Int32Array<"u"?new Int32Array(ee):ee}var r=t();function n(D){var ee=0,Y=0,le=0,te=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(le=0;le!=256;++le)te[le]=D[le];for(le=0;le!=256;++le)for(Y=D[le],ee=256+le;ee<4096;ee+=256)Y=te[ee]=Y>>>8^D[Y&255];var oe=[];for(le=1;le!=16;++le)oe[le-1]=typeof Int32Array<"u"?te.subarray(le*256,le*256+256):te.slice(le*256,le*256+256);return oe}var a=n(r),l=a[0],c=a[1],d=a[2],x=a[3],f=a[4],h=a[5],g=a[6],y=a[7],_=a[8],E=a[9],b=a[10],v=a[11],R=a[12],A=a[13],C=a[14];function L(D,ee){for(var Y=ee^-1,le=0,te=D.length;le<te;)Y=Y>>>8^r[(Y^D.charCodeAt(le++))&255];return~Y}function I(D,ee){for(var Y=ee^-1,le=D.length-15,te=0;te<le;)Y=C[D[te++]^Y&255]^A[D[te++]^Y>>8&255]^R[D[te++]^Y>>16&255]^v[D[te++]^Y>>>24]^b[D[te++]]^E[D[te++]]^_[D[te++]]^y[D[te++]]^g[D[te++]]^h[D[te++]]^f[D[te++]]^x[D[te++]]^d[D[te++]]^c[D[te++]]^l[D[te++]]^r[D[te++]];for(le+=15;te<le;)Y=Y>>>8^r[(Y^D[te++])&255];return~Y}function ae(D,ee){for(var Y=ee^-1,le=0,te=D.length,oe=0,Be=0;le<te;)oe=D.charCodeAt(le++),oe<128?Y=Y>>>8^r[(Y^oe)&255]:oe<2048?(Y=Y>>>8^r[(Y^(192|oe>>6&31))&255],Y=Y>>>8^r[(Y^(128|oe&63))&255]):oe>=55296&&oe<57344?(oe=(oe&1023)+64,Be=D.charCodeAt(le++)&1023,Y=Y>>>8^r[(Y^(240|oe>>8&7))&255],Y=Y>>>8^r[(Y^(128|oe>>2&63))&255],Y=Y>>>8^r[(Y^(128|Be>>6&15|(oe&3)<<4))&255],Y=Y>>>8^r[(Y^(128|Be&63))&255]):(Y=Y>>>8^r[(Y^(224|oe>>12&15))&255],Y=Y>>>8^r[(Y^(128|oe>>6&63))&255],Y=Y>>>8^r[(Y^(128|oe&63))&255]);return~Y}return e.table=r,e.bstr=L,e.buf=I,e.str=ae,e})(),CFB=(function e(){var t={};t.version="1.2.1";function r(N,W){for(var F=N.split("/"),P=W.split("/"),q=0,G=0,he=Math.min(F.length,P.length);q<he;++q){if(G=F[q].length-P[q].length)return G;if(F[q]!=P[q])return F[q]<P[q]?-1:1}return F.length-P.length}function n(N){if(N.charAt(N.length-1)=="/")return N.slice(0,-1).indexOf("/")===-1?N:n(N.slice(0,-1));var W=N.lastIndexOf("/");return W===-1?N:N.slice(0,W+1)}function a(N){if(N.charAt(N.length-1)=="/")return a(N.slice(0,-1));var W=N.lastIndexOf("/");return W===-1?N:N.slice(W+1)}function l(N,W){typeof W=="string"&&(W=new Date(W));var F=W.getHours();F=F<<6|W.getMinutes(),F=F<<5|W.getSeconds()>>>1,N.write_shift(2,F);var P=W.getFullYear()-1980;P=P<<4|W.getMonth()+1,P=P<<5|W.getDate(),N.write_shift(2,P)}function c(N){var W=N.read_shift(2)&65535,F=N.read_shift(2)&65535,P=new Date,q=F&31;F>>>=5;var G=F&15;F>>>=4,P.setMilliseconds(0),P.setFullYear(F+1980),P.setMonth(G-1),P.setDate(q);var he=W&31;W>>>=5;var ke=W&63;return W>>>=6,P.setHours(W),P.setMinutes(ke),P.setSeconds(he<<1),P}function d(N){prep_blob(N,0);for(var W={},F=0;N.l<=N.length-4;){var P=N.read_shift(2),q=N.read_shift(2),G=N.l+q,he={};switch(P){case 21589:F=N.read_shift(1),F&1&&(he.mtime=N.read_shift(4)),q>5&&(F&2&&(he.atime=N.read_shift(4)),F&4&&(he.ctime=N.read_shift(4))),he.mtime&&(he.mt=new Date(he.mtime*1e3));break}N.l=G,W[P]=he}return W}var x;function f(){return x||(x={})}function h(N,W){if(N[0]==80&&N[1]==75)return Q(N,W);if((N[0]|32)==109&&(N[1]|32)==105)return vt(N,W);if(N.length<512)throw new Error("CFB file size "+N.length+" < 512");var F=3,P=512,q=0,G=0,he=0,ke=0,ue=0,_e=[],Ee=N.slice(0,512);prep_blob(Ee,0);var $e=g(Ee);switch(F=$e[0],F){case 3:P=512;break;case 4:P=4096;break;case 0:if($e[1]==0)return Q(N,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+F)}P!==512&&(Ee=N.slice(0,P),prep_blob(Ee,28));var Ve=N.slice(0,P);y(Ee,F);var st=Ee.read_shift(4,"i");if(F===3&&st!==0)throw new Error("# Directory Sectors: Expected 0 saw "+st);Ee.l+=4,he=Ee.read_shift(4,"i"),Ee.l+=4,Ee.chk("00100000","Mini Stream Cutoff Size: "),ke=Ee.read_shift(4,"i"),q=Ee.read_shift(4,"i"),ue=Ee.read_shift(4,"i"),G=Ee.read_shift(4,"i");for(var qe=-1,Ze=0;Ze<109&&(qe=Ee.read_shift(4,"i"),!(qe<0));++Ze)_e[Ze]=qe;var Et=_(N,P);v(ue,G,Et,P,_e);var Vt=A(Et,he,_e,P);Vt[he].name="!Directory",q>0&&ke!==Be&&(Vt[ke].name="!MiniFAT"),Vt[_e[0]].name="!FAT",Vt.fat_addrs=_e,Vt.ssz=P;var qt={},Yt=[],Lr=[],$r=[];C(he,Vt,Et,Yt,q,qt,Lr,ke),E(Lr,$r,Yt),Yt.shift();var k={FileIndex:Lr,FullPaths:$r};return W&&W.raw&&(k.raw={header:Ve,sectors:Et}),k}function g(N){if(N[N.l]==80&&N[N.l+1]==75)return[0,0];N.chk(Pe,"Header Signature: "),N.l+=16;var W=N.read_shift(2,"u");return[N.read_shift(2,"u"),W]}function y(N,W){var F=9;switch(N.l+=2,F=N.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+F);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+F);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+F)}N.chk("0600","Mini Sector Shift: "),N.chk("000000000000","Reserved: ")}function _(N,W){for(var F=Math.ceil(N.length/W)-1,P=[],q=1;q<F;++q)P[q-1]=N.slice(q*W,(q+1)*W);return P[F-1]=N.slice(F*W),P}function E(N,W,F){for(var P=0,q=0,G=0,he=0,ke=0,ue=F.length,_e=[],Ee=[];P<ue;++P)_e[P]=Ee[P]=P,W[P]=F[P];for(;ke<Ee.length;++ke)P=Ee[ke],q=N[P].L,G=N[P].R,he=N[P].C,_e[P]===P&&(q!==-1&&_e[q]!==q&&(_e[P]=_e[q]),G!==-1&&_e[G]!==G&&(_e[P]=_e[G])),he!==-1&&(_e[he]=P),q!==-1&&P!=_e[P]&&(_e[q]=_e[P],Ee.lastIndexOf(q)<ke&&Ee.push(q)),G!==-1&&P!=_e[P]&&(_e[G]=_e[P],Ee.lastIndexOf(G)<ke&&Ee.push(G));for(P=1;P<ue;++P)_e[P]===P&&(G!==-1&&_e[G]!==G?_e[P]=_e[G]:q!==-1&&_e[q]!==q&&(_e[P]=_e[q]));for(P=1;P<ue;++P)if(N[P].type!==0){if(ke=P,ke!=_e[ke])do ke=_e[ke],W[P]=W[ke]+"/"+W[P];while(ke!==0&&_e[ke]!==-1&&ke!=_e[ke]);_e[P]=-1}for(W[0]+="/",P=1;P<ue;++P)N[P].type!==2&&(W[P]+="/")}function b(N,W,F){for(var P=N.start,q=N.size,G=[],he=P;F&&q>0&&he>=0;)G.push(W.slice(he*oe,he*oe+oe)),q-=oe,he=__readInt32LE(F,he*4);return G.length===0?new_buf(0):bconcat(G).slice(0,N.size)}function v(N,W,F,P,q){var G=Be;if(N===Be){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(N!==-1){var he=F[N],ke=(P>>>2)-1;if(!he)return;for(var ue=0;ue<ke&&(G=__readInt32LE(he,ue*4))!==Be;++ue)q.push(G);v(__readInt32LE(he,P-4),W-1,F,P,q)}}function R(N,W,F,P,q){var G=[],he=[];q||(q=[]);var ke=P-1,ue=0,_e=0;for(ue=W;ue>=0;){q[ue]=!0,G[G.length]=ue,he.push(N[ue]);var Ee=F[Math.floor(ue*4/P)];if(_e=ue*4&ke,P<4+_e)throw new Error("FAT boundary crossed: "+ue+" 4 "+P);if(!N[Ee])break;ue=__readInt32LE(N[Ee],_e)}return{nodes:G,data:__toBuffer([he])}}function A(N,W,F,P){var q=N.length,G=[],he=[],ke=[],ue=[],_e=P-1,Ee=0,$e=0,Ve=0,st=0;for(Ee=0;Ee<q;++Ee)if(ke=[],Ve=Ee+W,Ve>=q&&(Ve-=q),!he[Ve]){ue=[];var qe=[];for($e=Ve;$e>=0;){qe[$e]=!0,he[$e]=!0,ke[ke.length]=$e,ue.push(N[$e]);var Ze=F[Math.floor($e*4/P)];if(st=$e*4&_e,P<4+st)throw new Error("FAT boundary crossed: "+$e+" 4 "+P);if(!N[Ze]||($e=__readInt32LE(N[Ze],st),qe[$e]))break}G[Ve]={nodes:ke,data:__toBuffer([ue])}}return G}function C(N,W,F,P,q,G,he,ke){for(var ue=0,_e=P.length?2:0,Ee=W[N].data,$e=0,Ve=0,st;$e<Ee.length;$e+=128){var qe=Ee.slice($e,$e+128);prep_blob(qe,64),Ve=qe.read_shift(2),st=__utf16le(qe,0,Ve-_e),P.push(st);var Ze={name:st,type:qe.read_shift(1),color:qe.read_shift(1),L:qe.read_shift(4,"i"),R:qe.read_shift(4,"i"),C:qe.read_shift(4,"i"),clsid:qe.read_shift(16),state:qe.read_shift(4,"i"),start:0,size:0},Et=qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2);Et!==0&&(Ze.ct=L(qe,qe.l-8));var Vt=qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2);Vt!==0&&(Ze.mt=L(qe,qe.l-8)),Ze.start=qe.read_shift(4,"i"),Ze.size=qe.read_shift(4,"i"),Ze.size<0&&Ze.start<0&&(Ze.size=Ze.type=0,Ze.start=Be,Ze.name=""),Ze.type===5?(ue=Ze.start,q>0&&ue!==Be&&(W[ue].name="!StreamData")):Ze.size>=4096?(Ze.storage="fat",W[Ze.start]===void 0&&(W[Ze.start]=R(F,Ze.start,W.fat_addrs,W.ssz)),W[Ze.start].name=Ze.name,Ze.content=W[Ze.start].data.slice(0,Ze.size)):(Ze.storage="minifat",Ze.size<0?Ze.size=0:ue!==Be&&Ze.start!==Be&&W[ue]&&(Ze.content=b(Ze,W[ue].data,(W[ke]||{}).data))),Ze.content&&prep_blob(Ze.content,0),G[st]=Ze,he.push(Ze)}}function L(N,W){return new Date((__readUInt32LE(N,W+4)/1e7*Math.pow(2,32)+__readUInt32LE(N,W)/1e7-11644473600)*1e3)}function I(N,W){return f(),h(x.readFileSync(N),W)}function ae(N,W){var F=W&&W.type;switch(F||has_buf&&Buffer.isBuffer(N)&&(F="buffer"),F||"base64"){case"file":return I(N,W);case"base64":return h(s2a(Base64_decode(N)),W);case"binary":return h(s2a(N),W)}return h(N,W)}function D(N,W){var F=W||{},P=F.root||"Root Entry";if(N.FullPaths||(N.FullPaths=[]),N.FileIndex||(N.FileIndex=[]),N.FullPaths.length!==N.FileIndex.length)throw new Error("inconsistent CFB structure");N.FullPaths.length===0&&(N.FullPaths[0]=P+"/",N.FileIndex[0]={name:P,type:5}),F.CLSID&&(N.FileIndex[0].clsid=F.CLSID),ee(N)}function ee(N){var W="Sh33tJ5";if(!CFB.find(N,"/"+W)){var F=new_buf(4);F[0]=55,F[1]=F[3]=50,F[2]=54,N.FileIndex.push({name:W,type:2,content:F,size:4,L:69,R:69,C:69}),N.FullPaths.push(N.FullPaths[0]+W),Y(N)}}function Y(N,W){D(N);for(var F=!1,P=!1,q=N.FullPaths.length-1;q>=0;--q){var G=N.FileIndex[q];switch(G.type){case 0:P?F=!0:(N.FileIndex.pop(),N.FullPaths.pop());break;case 1:case 2:case 5:P=!0,isNaN(G.R*G.L*G.C)&&(F=!0),G.R>-1&&G.L>-1&&G.R==G.L&&(F=!0);break;default:F=!0;break}}if(!(!F&&!W)){var he=new Date(1987,1,19),ke=0,ue=Object.create?Object.create(null):{},_e=[];for(q=0;q<N.FullPaths.length;++q)ue[N.FullPaths[q]]=!0,N.FileIndex[q].type!==0&&_e.push([N.FullPaths[q],N.FileIndex[q]]);for(q=0;q<_e.length;++q){var Ee=n(_e[q][0]);P=ue[Ee],P||(_e.push([Ee,{name:a(Ee).replace("/",""),type:1,clsid:X,ct:he,mt:he,content:null}]),ue[Ee]=!0)}for(_e.sort(function(st,qe){return r(st[0],qe[0])}),N.FullPaths=[],N.FileIndex=[],q=0;q<_e.length;++q)N.FullPaths[q]=_e[q][0],N.FileIndex[q]=_e[q][1];for(q=0;q<_e.length;++q){var $e=N.FileIndex[q],Ve=N.FullPaths[q];if($e.name=a(Ve).replace("/",""),$e.L=$e.R=$e.C=-($e.color=1),$e.size=$e.content?$e.content.length:0,$e.start=0,$e.clsid=$e.clsid||X,q===0)$e.C=_e.length>1?1:-1,$e.size=0,$e.type=5;else if(Ve.slice(-1)=="/"){for(ke=q+1;ke<_e.length&&n(N.FullPaths[ke])!=Ve;++ke);for($e.C=ke>=_e.length?-1:ke,ke=q+1;ke<_e.length&&n(N.FullPaths[ke])!=n(Ve);++ke);$e.R=ke>=_e.length?-1:ke,$e.type=1}else n(N.FullPaths[q+1]||"")==n(Ve)&&($e.R=q+1),$e.type=2}}}function le(N,W){var F=W||{};if(F.fileType=="mad")return Rr(N,F);switch(Y(N),F.fileType){case"zip":return rt(N,F)}var P=(function(st){for(var qe=0,Ze=0,Et=0;Et<st.FileIndex.length;++Et){var Vt=st.FileIndex[Et];if(Vt.content){var qt=Vt.content.length;qt>0&&(qt<4096?qe+=qt+63>>6:Ze+=qt+511>>9)}}for(var Yt=st.FullPaths.length+3>>2,Lr=qe+7>>3,$r=qe+127>>7,k=Lr+Ze+Yt+$r,ce=k+127>>7,Re=ce<=109?0:Math.ceil((ce-109)/127);k+ce+Re+127>>7>ce;)Re=++ce<=109?0:Math.ceil((ce-109)/127);var et=[1,Re,ce,$r,Yt,Ze,qe,0];return st.FileIndex[0].size=qe<<6,et[7]=(st.FileIndex[0].start=et[0]+et[1]+et[2]+et[3]+et[4]+et[5])+(et[6]+7>>3),et})(N),q=new_buf(P[7]<<9),G=0,he=0;{for(G=0;G<8;++G)q.write_shift(1,De[G]);for(G=0;G<8;++G)q.write_shift(2,0);for(q.write_shift(2,62),q.write_shift(2,3),q.write_shift(2,65534),q.write_shift(2,9),q.write_shift(2,6),G=0;G<3;++G)q.write_shift(2,0);for(q.write_shift(4,0),q.write_shift(4,P[2]),q.write_shift(4,P[0]+P[1]+P[2]+P[3]-1),q.write_shift(4,0),q.write_shift(4,4096),q.write_shift(4,P[3]?P[0]+P[1]+P[2]-1:Be),q.write_shift(4,P[3]),q.write_shift(-4,P[1]?P[0]-1:Be),q.write_shift(4,P[1]),G=0;G<109;++G)q.write_shift(-4,G<P[2]?P[1]+G:-1)}if(P[1])for(he=0;he<P[1];++he){for(;G<236+he*127;++G)q.write_shift(-4,G<P[2]?P[1]+G:-1);q.write_shift(-4,he===P[1]-1?Be:he+1)}var ke=function(st){for(he+=st;G<he-1;++G)q.write_shift(-4,G+1);st&&(++G,q.write_shift(-4,Be))};for(he=G=0,he+=P[1];G<he;++G)q.write_shift(-4,Se.DIFSECT);for(he+=P[2];G<he;++G)q.write_shift(-4,Se.FATSECT);ke(P[3]),ke(P[4]);for(var ue=0,_e=0,Ee=N.FileIndex[0];ue<N.FileIndex.length;++ue)Ee=N.FileIndex[ue],Ee.content&&(_e=Ee.content.length,!(_e<4096)&&(Ee.start=he,ke(_e+511>>9)));for(ke(P[6]+7>>3);q.l&511;)q.write_shift(-4,Se.ENDOFCHAIN);for(he=G=0,ue=0;ue<N.FileIndex.length;++ue)Ee=N.FileIndex[ue],Ee.content&&(_e=Ee.content.length,!(!_e||_e>=4096)&&(Ee.start=he,ke(_e+63>>6)));for(;q.l&511;)q.write_shift(-4,Se.ENDOFCHAIN);for(G=0;G<P[4]<<2;++G){var $e=N.FullPaths[G];if(!$e||$e.length===0){for(ue=0;ue<17;++ue)q.write_shift(4,0);for(ue=0;ue<3;++ue)q.write_shift(4,-1);for(ue=0;ue<12;++ue)q.write_shift(4,0);continue}Ee=N.FileIndex[G],G===0&&(Ee.start=Ee.size?Ee.start-1:Be);var Ve=G===0&&F.root||Ee.name;if(_e=2*(Ve.length+1),q.write_shift(64,Ve,"utf16le"),q.write_shift(2,_e),q.write_shift(1,Ee.type),q.write_shift(1,Ee.color),q.write_shift(-4,Ee.L),q.write_shift(-4,Ee.R),q.write_shift(-4,Ee.C),Ee.clsid)q.write_shift(16,Ee.clsid,"hex");else for(ue=0;ue<4;++ue)q.write_shift(4,0);q.write_shift(4,Ee.state||0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,Ee.start),q.write_shift(4,Ee.size),q.write_shift(4,0)}for(G=1;G<N.FileIndex.length;++G)if(Ee=N.FileIndex[G],Ee.size>=4096)if(q.l=Ee.start+1<<9,has_buf&&Buffer.isBuffer(Ee.content))Ee.content.copy(q,q.l,0,Ee.size),q.l+=Ee.size+511&-512;else{for(ue=0;ue<Ee.size;++ue)q.write_shift(1,Ee.content[ue]);for(;ue&511;++ue)q.write_shift(1,0)}for(G=1;G<N.FileIndex.length;++G)if(Ee=N.FileIndex[G],Ee.size>0&&Ee.size<4096)if(has_buf&&Buffer.isBuffer(Ee.content))Ee.content.copy(q,q.l,0,Ee.size),q.l+=Ee.size+63&-64;else{for(ue=0;ue<Ee.size;++ue)q.write_shift(1,Ee.content[ue]);for(;ue&63;++ue)q.write_shift(1,0)}if(has_buf)q.l=q.length;else for(;q.l<q.length;)q.write_shift(1,0);return q}function te(N,W){var F=N.FullPaths.map(function(ue){return ue.toUpperCase()}),P=F.map(function(ue){var _e=ue.split("/");return _e[_e.length-(ue.slice(-1)=="/"?2:1)]}),q=!1;W.charCodeAt(0)===47?(q=!0,W=F[0].slice(0,-1)+W):q=W.indexOf("/")!==-1;var G=W.toUpperCase(),he=q===!0?F.indexOf(G):P.indexOf(G);if(he!==-1)return N.FileIndex[he];var ke=!G.match(chr1);for(G=G.replace(chr0,""),ke&&(G=G.replace(chr1,"!")),he=0;he<F.length;++he)if((ke?F[he].replace(chr1,"!"):F[he]).replace(chr0,"")==G||(ke?P[he].replace(chr1,"!"):P[he]).replace(chr0,"")==G)return N.FileIndex[he];return null}var oe=64,Be=-2,Pe="d0cf11e0a1b11ae1",De=[208,207,17,224,161,177,26,225],X="00000000000000000000000000000000",Se={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Be,FREESECT:-1,HEADER_SIGNATURE:Pe,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:X,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function z(N,W,F){f();var P=le(N,F);x.writeFileSync(W,P)}function re(N){for(var W=new Array(N.length),F=0;F<N.length;++F)W[F]=String.fromCharCode(N[F]);return W.join("")}function T(N,W){var F=le(N,W);switch(W&&W.type||"buffer"){case"file":return f(),x.writeFileSync(W.filename,F),F;case"binary":return typeof F=="string"?F:re(F);case"base64":return Base64_encode(typeof F=="string"?F:re(F));case"buffer":if(has_buf)return Buffer.isBuffer(F)?F:Buffer_from(F);case"array":return typeof F=="string"?s2a(F):F}return F}var J;function B(N){try{var W=N.InflateRaw,F=new W;if(F._processChunk(new Uint8Array([3,0]),F._finishFlushFlag),F.bytesRead)J=N;else throw new Error("zlib does not expose bytesRead")}catch(P){console.error("cannot use native zlib: "+(P.message||P))}}function j(N,W){if(!J)return tt(N,W);var F=J.InflateRaw,P=new F,q=P._processChunk(N.slice(N.l),P._finishFlushFlag);return N.l+=P.bytesRead,q}function M(N){return J?J.deflateRawSync(N):Ue(N)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ve(N){var W=(N<<1|N<<11)&139536|(N<<5|N<<15)&558144;return(W>>16|W>>8|W)&255}for(var Ae=typeof Uint8Array<"u",ye=Ae?new Uint8Array(256):[],V=0;V<256;++V)ye[V]=ve(V);function be(N,W){var F=ye[N&255];return W<=8?F>>>8-W:(F=F<<8|ye[N>>8&255],W<=16?F>>>16-W:(F=F<<8|ye[N>>16&255],F>>>24-W))}function Ne(N,W){var F=W&7,P=W>>>3;return(N[P]|(F<=6?0:N[P+1]<<8))>>>F&3}function H(N,W){var F=W&7,P=W>>>3;return(N[P]|(F<=5?0:N[P+1]<<8))>>>F&7}function Te(N,W){var F=W&7,P=W>>>3;return(N[P]|(F<=4?0:N[P+1]<<8))>>>F&15}function se(N,W){var F=W&7,P=W>>>3;return(N[P]|(F<=3?0:N[P+1]<<8))>>>F&31}function Ce(N,W){var F=W&7,P=W>>>3;return(N[P]|(F<=1?0:N[P+1]<<8))>>>F&127}function pt(N,W,F){var P=W&7,q=W>>>3,G=(1<<F)-1,he=N[q]>>>P;return F<8-P||(he|=N[q+1]<<8-P,F<16-P)||(he|=N[q+2]<<16-P,F<24-P)||(he|=N[q+3]<<24-P),he&G}function pe(N,W,F){var P=W&7,q=W>>>3;return P<=5?N[q]|=(F&7)<<P:(N[q]|=F<<P&255,N[q+1]=(F&7)>>8-P),W+3}function ze(N,W,F){var P=W&7,q=W>>>3;return F=(F&1)<<P,N[q]|=F,W+1}function Ye(N,W,F){var P=W&7,q=W>>>3;return F<<=P,N[q]|=F&255,F>>>=8,N[q+1]=F,W+8}function lt(N,W,F){var P=W&7,q=W>>>3;return F<<=P,N[q]|=F&255,F>>>=8,N[q+1]=F&255,N[q+2]=F>>>8,W+16}function Ke(N,W){var F=N.length,P=2*F>W?2*F:W+5,q=0;if(F>=W)return N;if(has_buf){var G=new_unsafe_buf(P);if(N.copy)N.copy(G);else for(;q<N.length;++q)G[q]=N[q];return G}else if(Ae){var he=new Uint8Array(P);if(he.set)he.set(N);else for(;q<F;++q)he[q]=N[q];return he}return N.length=P,N}function nt(N){for(var W=new Array(N),F=0;F<N;++F)W[F]=0;return W}function mt(N,W,F){var P=1,q=0,G=0,he=0,ke=0,ue=N.length,_e=Ae?new Uint16Array(32):nt(32);for(G=0;G<32;++G)_e[G]=0;for(G=ue;G<F;++G)N[G]=0;ue=N.length;var Ee=Ae?new Uint16Array(ue):nt(ue);for(G=0;G<ue;++G)_e[q=N[G]]++,P<q&&(P=q),Ee[G]=0;for(_e[0]=0,G=1;G<=P;++G)_e[G+16]=ke=ke+_e[G-1]<<1;for(G=0;G<ue;++G)ke=N[G],ke!=0&&(Ee[G]=_e[ke+16]++);var $e=0;for(G=0;G<ue;++G)if($e=N[G],$e!=0)for(ke=be(Ee[G],P)>>P-$e,he=(1<<P+4-$e)-1;he>=0;--he)W[ke|he<<$e]=$e&15|G<<4;return P}var it=Ae?new Uint16Array(512):nt(512),Je=Ae?new Uint16Array(32):nt(32);if(!Ae){for(var bt=0;bt<512;++bt)it[bt]=0;for(bt=0;bt<32;++bt)Je[bt]=0}(function(){for(var N=[],W=0;W<32;W++)N.push(5);mt(N,Je,32);var F=[];for(W=0;W<=143;W++)F.push(8);for(;W<=255;W++)F.push(9);for(;W<=279;W++)F.push(7);for(;W<=287;W++)F.push(8);mt(F,it,288)})();var ne=(function(){for(var W=Ae?new Uint8Array(32768):[],F=0,P=0;F<Le.length-1;++F)for(;P<Le[F+1];++P)W[P]=F;for(;P<32768;++P)W[P]=29;var q=Ae?new Uint8Array(259):[];for(F=0,P=0;F<K.length-1;++F)for(;P<K[F+1];++P)q[P]=F;function G(ke,ue){for(var _e=0;_e<ke.length;){var Ee=Math.min(65535,ke.length-_e),$e=_e+Ee==ke.length;for(ue.write_shift(1,+$e),ue.write_shift(2,Ee),ue.write_shift(2,~Ee&65535);Ee-- >0;)ue[ue.l++]=ke[_e++]}return ue.l}function he(ke,ue){for(var _e=0,Ee=0,$e=Ae?new Uint16Array(32768):[];Ee<ke.length;){var Ve=Math.min(65535,ke.length-Ee);if(Ve<10){for(_e=pe(ue,_e,+(Ee+Ve==ke.length)),_e&7&&(_e+=8-(_e&7)),ue.l=_e/8|0,ue.write_shift(2,Ve),ue.write_shift(2,~Ve&65535);Ve-- >0;)ue[ue.l++]=ke[Ee++];_e=ue.l*8;continue}_e=pe(ue,_e,+(Ee+Ve==ke.length)+2);for(var st=0;Ve-- >0;){var qe=ke[Ee];st=(st<<5^qe)&32767;var Ze=-1,Et=0;if((Ze=$e[st])&&(Ze|=Ee&-32768,Ze>Ee&&(Ze-=32768),Ze<Ee))for(;ke[Ze+Et]==ke[Ee+Et]&&Et<250;)++Et;if(Et>2){qe=q[Et],qe<=22?_e=Ye(ue,_e,ye[qe+1]>>1)-1:(Ye(ue,_e,3),_e+=5,Ye(ue,_e,ye[qe-23]>>5),_e+=3);var Vt=qe<8?0:qe-4>>2;Vt>0&&(lt(ue,_e,Et-K[qe]),_e+=Vt),qe=W[Ee-Ze],_e=Ye(ue,_e,ye[qe]>>3),_e-=3;var qt=qe<4?0:qe-2>>1;qt>0&&(lt(ue,_e,Ee-Ze-Le[qe]),_e+=qt);for(var Yt=0;Yt<Et;++Yt)$e[st]=Ee&32767,st=(st<<5^ke[Ee])&32767,++Ee;Ve-=Et-1}else qe<=143?qe=qe+48:_e=ze(ue,_e,1),_e=Ye(ue,_e,ye[qe]),$e[st]=Ee&32767,++Ee}_e=Ye(ue,_e,0)-1}return ue.l=(_e+7)/8|0,ue.l}return function(ue,_e){return ue.length<8?G(ue,_e):he(ue,_e)}})();function Ue(N){var W=new_buf(50+Math.floor(N.length*1.1)),F=ne(N,W);return W.slice(0,F)}var Qe=Ae?new Uint16Array(32768):nt(32768),gt=Ae?new Uint16Array(32768):nt(32768),Nt=Ae?new Uint16Array(128):nt(128),It=1,Ot=1;function Wt(N,W){var F=se(N,W)+257;W+=5;var P=se(N,W)+1;W+=5;var q=Te(N,W)+4;W+=4;for(var G=0,he=Ae?new Uint8Array(19):nt(19),ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ue=1,_e=Ae?new Uint8Array(8):nt(8),Ee=Ae?new Uint8Array(8):nt(8),$e=he.length,Ve=0;Ve<q;++Ve)he[U[Ve]]=G=H(N,W),ue<G&&(ue=G),_e[G]++,W+=3;var st=0;for(_e[0]=0,Ve=1;Ve<=ue;++Ve)Ee[Ve]=st=st+_e[Ve-1]<<1;for(Ve=0;Ve<$e;++Ve)(st=he[Ve])!=0&&(ke[Ve]=Ee[st]++);var qe=0;for(Ve=0;Ve<$e;++Ve)if(qe=he[Ve],qe!=0){st=ye[ke[Ve]]>>8-qe;for(var Ze=(1<<7-qe)-1;Ze>=0;--Ze)Nt[st|Ze<<qe]=qe&7|Ve<<3}var Et=[];for(ue=1;Et.length<F+P;)switch(st=Nt[Ce(N,W)],W+=st&7,st>>>=3){case 16:for(G=3+Ne(N,W),W+=2,st=Et[Et.length-1];G-- >0;)Et.push(st);break;case 17:for(G=3+H(N,W),W+=3;G-- >0;)Et.push(0);break;case 18:for(G=11+Ce(N,W),W+=7;G-- >0;)Et.push(0);break;default:Et.push(st),ue<st&&(ue=st);break}var Vt=Et.slice(0,F),qt=Et.slice(F);for(Ve=F;Ve<286;++Ve)Vt[Ve]=0;for(Ve=P;Ve<30;++Ve)qt[Ve]=0;return It=mt(Vt,Qe,286),Ot=mt(qt,gt,30),W}function Fe(N,W){if(N[0]==3&&!(N[1]&3))return[new_raw_buf(W),2];for(var F=0,P=0,q=new_unsafe_buf(W||1<<18),G=0,he=q.length>>>0,ke=0,ue=0;(P&1)==0;){if(P=H(N,F),F+=3,P>>>1)P>>1==1?(ke=9,ue=5):(F=Wt(N,F),ke=It,ue=Ot);else{F&7&&(F+=8-(F&7));var _e=N[F>>>3]|N[(F>>>3)+1]<<8;if(F+=32,_e>0)for(!W&&he<G+_e&&(q=Ke(q,G+_e),he=q.length);_e-- >0;)q[G++]=N[F>>>3],F+=8;continue}for(;;){!W&&he<G+32767&&(q=Ke(q,G+32767),he=q.length);var Ee=pt(N,F,ke),$e=P>>>1==1?it[Ee]:Qe[Ee];if(F+=$e&15,$e>>>=4,($e>>>8&255)===0)q[G++]=$e;else{if($e==256)break;$e-=257;var Ve=$e<8?0:$e-4>>2;Ve>5&&(Ve=0);var st=G+K[$e];Ve>0&&(st+=pt(N,F,Ve),F+=Ve),Ee=pt(N,F,ue),$e=P>>>1==1?Je[Ee]:gt[Ee],F+=$e&15,$e>>>=4;var qe=$e<4?0:$e-2>>1,Ze=Le[$e];for(qe>0&&(Ze+=pt(N,F,qe),F+=qe),!W&&he<st&&(q=Ke(q,st+100),he=q.length);G<st;)q[G]=q[G-Ze],++G}}}return W?[q,F+7>>>3]:[q.slice(0,G),F+7>>>3]}function tt(N,W){var F=N.slice(N.l||0),P=Fe(F,W);return N.l+=P[1],P[0]}function ut(N,W){if(N)typeof console<"u"&&console.error(W);else throw new Error(W)}function Q(N,W){var F=N;prep_blob(F,0);var P=[],q=[],G={FileIndex:P,FullPaths:q};D(G,{root:W.root});for(var he=F.length-4;(F[he]!=80||F[he+1]!=75||F[he+2]!=5||F[he+3]!=6)&&he>=0;)--he;F.l=he+4,F.l+=4;var ke=F.read_shift(2);F.l+=6;var ue=F.read_shift(4);for(F.l=ue,he=0;he<ke;++he){F.l+=20;var _e=F.read_shift(4),Ee=F.read_shift(4),$e=F.read_shift(2),Ve=F.read_shift(2),st=F.read_shift(2);F.l+=8;var qe=F.read_shift(4),Ze=d(F.slice(F.l+$e,F.l+$e+Ve));F.l+=$e+Ve+st;var Et=F.l;F.l=qe+4,ge(F,_e,Ee,G,Ze),F.l=Et}return G}function ge(N,W,F,P,q){N.l+=2;var G=N.read_shift(2),he=N.read_shift(2),ke=c(N);if(G&8257)throw new Error("Unsupported ZIP encryption");for(var ue=N.read_shift(4),_e=N.read_shift(4),Ee=N.read_shift(4),$e=N.read_shift(2),Ve=N.read_shift(2),st="",qe=0;qe<$e;++qe)st+=String.fromCharCode(N[N.l++]);if(Ve){var Ze=d(N.slice(N.l,N.l+Ve));(Ze[21589]||{}).mt&&(ke=Ze[21589].mt),((q||{})[21589]||{}).mt&&(ke=q[21589].mt)}N.l+=Ve;var Et=N.slice(N.l,N.l+_e);switch(he){case 8:Et=j(N,Ee);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+he)}var Vt=!1;G&8&&(ue=N.read_shift(4),ue==134695760&&(ue=N.read_shift(4),Vt=!0),_e=N.read_shift(4),Ee=N.read_shift(4)),_e!=W&&ut(Vt,"Bad compressed size: "+W+" != "+_e),Ee!=F&&ut(Vt,"Bad uncompressed size: "+F+" != "+Ee),Ct(P,st,Et,{unsafe:!0,mt:ke})}function rt(N,W){var F=W||{},P=[],q=[],G=new_buf(1),he=F.compression?8:0,ke=0,ue=0,_e=0,Ee=0,$e=0,Ve=N.FullPaths[0],st=Ve,qe=N.FileIndex[0],Ze=[],Et=0;for(ue=1;ue<N.FullPaths.length;++ue)if(st=N.FullPaths[ue].slice(Ve.length),qe=N.FileIndex[ue],!(!qe.size||!qe.content||st=="Sh33tJ5")){var Vt=Ee,qt=new_buf(st.length);for(_e=0;_e<st.length;++_e)qt.write_shift(1,st.charCodeAt(_e)&127);qt=qt.slice(0,qt.l),Ze[$e]=CRC32.buf(qe.content,0);var Yt=qe.content;he==8&&(Yt=M(Yt)),G=new_buf(30),G.write_shift(4,67324752),G.write_shift(2,20),G.write_shift(2,ke),G.write_shift(2,he),qe.mt?l(G,qe.mt):G.write_shift(4,0),G.write_shift(-4,Ze[$e]),G.write_shift(4,Yt.length),G.write_shift(4,qe.content.length),G.write_shift(2,qt.length),G.write_shift(2,0),Ee+=G.length,P.push(G),Ee+=qt.length,P.push(qt),Ee+=Yt.length,P.push(Yt),G=new_buf(46),G.write_shift(4,33639248),G.write_shift(2,0),G.write_shift(2,20),G.write_shift(2,ke),G.write_shift(2,he),G.write_shift(4,0),G.write_shift(-4,Ze[$e]),G.write_shift(4,Yt.length),G.write_shift(4,qe.content.length),G.write_shift(2,qt.length),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(4,0),G.write_shift(4,Vt),Et+=G.l,q.push(G),Et+=qt.length,q.push(qt),++$e}return G=new_buf(22),G.write_shift(4,101010256),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(2,$e),G.write_shift(2,$e),G.write_shift(4,Et),G.write_shift(4,Ee),G.write_shift(2,0),bconcat([bconcat(P),bconcat(q),G])}var xt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Mt(N,W){if(N.ctype)return N.ctype;var F=N.name||"",P=F.match(/\.([^\.]+)$/);return P&&xt[P[1]]||W&&(P=(F=W).match(/[\.\\]([^\.\\])+$/),P&&xt[P[1]])?xt[P[1]]:"application/octet-stream"}function Dt(N){for(var W=Base64_encode(N),F=[],P=0;P<W.length;P+=76)F.push(W.slice(P,P+76));return F.join(`\r
`)+`\r
`}function ht(N){var W=N.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(_e){var Ee=_e.charCodeAt(0).toString(16).toUpperCase();return"="+(Ee.length==1?"0"+Ee:Ee)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var F=[],P=W.split(`\r
`),q=0;q<P.length;++q){var G=P[q];if(G.length==0){F.push("");continue}for(var he=0;he<G.length;){var ke=76,ue=G.slice(he,he+ke);ue.charAt(ke-1)=="="?ke--:ue.charAt(ke-2)=="="?ke-=2:ue.charAt(ke-3)=="="&&(ke-=3),ue=G.slice(he,he+ke),he+=ke,he<G.length&&(ue+="="),F.push(ue)}}return F.join(`\r
`)}function yr(N){for(var W=[],F=0;F<N.length;++F){for(var P=N[F];F<=N.length&&P.charAt(P.length-1)=="=";)P=P.slice(0,P.length-1)+N[++F];W.push(P)}for(var q=0;q<W.length;++q)W[q]=W[q].replace(/[=][0-9A-Fa-f]{2}/g,function(G){return String.fromCharCode(parseInt(G.slice(1),16))});return s2a(W.join(`\r
`))}function Br(N,W,F){for(var P="",q="",G="",he,ke=0;ke<10;++ke){var ue=W[ke];if(!ue||ue.match(/^\s*$/))break;var _e=ue.match(/^(.*?):\s*([^\s].*)$/);if(_e)switch(_e[1].toLowerCase()){case"content-location":P=_e[2].trim();break;case"content-type":G=_e[2].trim();break;case"content-transfer-encoding":q=_e[2].trim();break}}switch(++ke,q.toLowerCase()){case"base64":he=s2a(Base64_decode(W.slice(ke).join("")));break;case"quoted-printable":he=yr(W.slice(ke));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+q)}var Ee=Ct(N,P.slice(F.length),he,{unsafe:!0});G&&(Ee.ctype=G)}function vt(N,W){if(re(N.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var F=W&&W.root||"",P=(has_buf&&Buffer.isBuffer(N)?N.toString("binary"):re(N)).split(`\r
`),q=0,G="";for(q=0;q<P.length;++q)if(G=P[q],!!/^Content-Location:/i.test(G)&&(G=G.slice(G.indexOf("file")),F||(F=G.slice(0,G.lastIndexOf("/")+1)),G.slice(0,F.length)!=F))for(;F.length>0&&(F=F.slice(0,F.length-1),F=F.slice(0,F.lastIndexOf("/")+1),G.slice(0,F.length)!=F););var he=(P[1]||"").match(/boundary="(.*?)"/);if(!he)throw new Error("MAD cannot find boundary");var ke="--"+(he[1]||""),ue=[],_e=[],Ee={FileIndex:ue,FullPaths:_e};D(Ee);var $e,Ve=0;for(q=0;q<P.length;++q){var st=P[q];st!==ke&&st!==ke+"--"||(Ve++&&Br(Ee,P.slice($e,q),F),$e=q)}return Ee}function Rr(N,W){var F=W||{},P=F.boundary||"SheetJS";P="------="+P;for(var q=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+P.slice(2)+'"',"","",""],G=N.FullPaths[0],he=G,ke=N.FileIndex[0],ue=1;ue<N.FullPaths.length;++ue)if(he=N.FullPaths[ue].slice(G.length),ke=N.FileIndex[ue],!(!ke.size||!ke.content||he=="Sh33tJ5")){he=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Et){return"_x"+Et.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Et){return"_u"+Et.charCodeAt(0).toString(16)+"_"});for(var _e=ke.content,Ee=has_buf&&Buffer.isBuffer(_e)?_e.toString("binary"):re(_e),$e=0,Ve=Math.min(1024,Ee.length),st=0,qe=0;qe<=Ve;++qe)(st=Ee.charCodeAt(qe))>=32&&st<128&&++$e;var Ze=$e>=Ve*4/5;q.push(P),q.push("Content-Location: "+(F.root||"file:///C:/SheetJS/")+he),q.push("Content-Transfer-Encoding: "+(Ze?"quoted-printable":"base64")),q.push("Content-Type: "+Mt(ke,he)),q.push(""),q.push(Ze?ht(Ee):Dt(Ee))}return q.push(P+`--\r
`),q.join(`\r
`)}function Gt(N){var W={};return D(W,N),W}function Ct(N,W,F,P){var q=P&&P.unsafe;q||D(N);var G=!q&&CFB.find(N,W);if(!G){var he=N.FullPaths[0];W.slice(0,he.length)==he?he=W:(he.slice(-1)!="/"&&(he+="/"),he=(he+W).replace("//","/")),G={name:a(W),type:2},N.FileIndex.push(G),N.FullPaths.push(he),q||CFB.utils.cfb_gc(N)}return G.content=F,G.size=F?F.length:0,P&&(P.CLSID&&(G.clsid=P.CLSID),P.mt&&(G.mt=P.mt),P.ct&&(G.ct=P.ct)),G}function Ut(N,W){D(N);var F=CFB.find(N,W);if(F){for(var P=0;P<N.FileIndex.length;++P)if(N.FileIndex[P]==F)return N.FileIndex.splice(P,1),N.FullPaths.splice(P,1),!0}return!1}function Yr(N,W,F){D(N);var P=CFB.find(N,W);if(P){for(var q=0;q<N.FileIndex.length;++q)if(N.FileIndex[q]==P)return N.FileIndex[q].name=a(F),N.FullPaths[q]=F,!0}return!1}function _r(N){Y(N,!0)}return t.find=te,t.read=ae,t.parse=h,t.write=T,t.writeFile=z,t.utils={cfb_new:Gt,cfb_add:Ct,cfb_del:Ut,cfb_mov:Yr,cfb_gc:_r,ReadShift,CheckField,prep_blob,bconcat,use_zlib:B,_deflateRaw:Ue,_inflateRaw:tt,consts:Se},t})();function blobify(e){return typeof e=="string"?s2ab(e):Array.isArray(e)?a2u(e):e}function write_dl(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=s2ab(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?utf8write(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([blobify(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var l=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(l)},6e4),chrome.downloads.download({url:l,filename:e,saveAs:!0});var c=document.createElement("a");if(c.download!=null)return c.download=e,c.href=l,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(l)},6e4),l}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var d=File(e);return d.open("w"),d.encoding="binary",Array.isArray(t)&&(t=a2s(t)),d.write(t),d.close(),t}catch(x){if(!x.message||!x.message.match(/onstruct/))throw x}throw new Error("cannot save file "+e)}function keys(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function evert_key(e,t){for(var r=[],n=keys(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function evert(e){for(var t=[],r=keys(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function evert_num(e){for(var t=[],r=keys(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function evert_arr(e){for(var t=[],r=keys(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var basedate=new Date(1899,11,30,0,0,0);function datenum(e,t){var r=e.getTime(),n=basedate.getTime()+(e.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var refdate=new Date,dnthresh=basedate.getTime()+(refdate.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4,refoffset=refdate.getTimezoneOffset();function numdate(e){var t=new Date;return t.setTime(e*24*60*60*1e3+dnthresh),t.getTimezoneOffset()!==refoffset&&t.setTime(t.getTime()+(t.getTimezoneOffset()-refoffset)*6e4),t}var good_pd_date_1=new Date("2017-02-19T19:06:09.000Z"),good_pd_date=isNaN(good_pd_date_1.getFullYear())?new Date("2/19/17"):good_pd_date_1,good_pd=good_pd_date.getFullYear()==2017;function parseDate(e,t){var r=new Date(e);if(good_pd)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(good_pd_date.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],l=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(l=new Date(l.getTime()-l.getTimezoneOffset()*60*1e3)),l}function cc2str(e,t){if(has_buf&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(l){return r[l]||l})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function dup(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=dup(e[r]));return t}function fill(e,t){for(var r="";r.length<t;)r+=e;return r}function fuzzynum(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,l){return r=-r,l}),!isNaN(t=Number(n)))?t/r:t}var lower_months=["january","february","march","april","may","june","july","august","september","october","november","december"];function fuzzydate(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),l=t.getDate();if(isNaN(l))return r;var c=e.toLowerCase();if(c.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(c=c.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),c.length>3&&lower_months.indexOf(c)==-1)return r}else if(c.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||l>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function zip_add_file(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return has_buf?n=Buffer_from(r):n=utf8decode(r),CFB.utils.cfb_add(e,t,n)}CFB.utils.cfb_add(e,t,r)}else e.file(t,r)}function zip_new(){return CFB.utils.cfb_new()}var XML_HEADER=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,encodings={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rencoding=evert(encodings),decregex=/[&<>'"]/g,charegex=/[\u0000-\u0008\u000b-\u001f]/g;function escapexml(e){var t=e+"";return t.replace(decregex,function(r){return rencoding[r]}).replace(charegex,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function escapexmltag(e){return escapexml(e).replace(/ /g,"_x0020_")}var htmlcharegex=/[\u0000-\u001f]/g;function escapehtml(e){var t=e+"";return t.replace(decregex,function(r){return rencoding[r]}).replace(/\n/g,"<br/>").replace(htmlcharegex,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function escapexlml(e){var t=e+"";return t.replace(decregex,function(r){return rencoding[r]}).replace(htmlcharegex,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function xlml_unfixstr(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function parsexmlbool(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function utf8reada(e){for(var t="",r=0,n=0,a=0,l=0,c=0,d=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){c=(n&31)<<6,c|=a&63,t+=String.fromCharCode(c);continue}if(l=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|l&63);continue}c=e.charCodeAt(r++),d=((n&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536,t+=String.fromCharCode(55296+(d>>>10&1023)),t+=String.fromCharCode(56320+(d&1023))}return t}function utf8readb(e){var t=new_raw_buf(2*e.length),r,n,a=1,l=0,c=0,d;for(n=0;n<e.length;n+=a)a=1,(d=e.charCodeAt(n))<128?r=d:d<224?(r=(d&31)*64+(e.charCodeAt(n+1)&63),a=2):d<240?(r=(d&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(d&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,c=55296+(r>>>10&1023),r=56320+(r&1023)),c!==0&&(t[l++]=c&255,t[l++]=c>>>8,c=0),t[l++]=r%256,t[l++]=r>>>8;return t.slice(0,l).toString("ucs2")}function utf8readc(e){return Buffer_from(e,"binary").toString("utf8")}var utf8corpus="foo bar baz",utf8read=has_buf&&(utf8readc(utf8corpus)==utf8reada(utf8corpus)&&utf8readc||utf8readb(utf8corpus)==utf8reada(utf8corpus)&&utf8readb)||utf8reada,utf8write=has_buf?function(e){return Buffer_from(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},htmldecode=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}})(),wtregex=/(^\s|\s$|\n)/;function writetag(e,t){return"<"+e+(t.match(wtregex)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function wxt_helper(e){return keys(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function writextag(e,t,r){return"<"+e+(r!=null?wxt_helper(r):"")+(t!=null?(t.match(wtregex)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function write_w3cdtf(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function write_vt(e,t){switch(typeof e){case"string":var r=writextag("vt:lpwstr",escapexml(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return writextag((e|0)==e?"vt:i4":"vt:r8",escapexml(String(e)));case"boolean":return writextag("vt:bool",e?"true":"false")}if(e instanceof Date)return writextag("vt:filetime",write_w3cdtf(e));throw new Error("Unable to serialize "+e)}var XMLNS={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},XMLNS_main=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],XLMLNS={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function read_double_le(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,l=5;l>=0;--l)a=a*256+e[t+l];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function write_double_le(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,l=0,c=n?-t:t;isFinite(c)?c==0?a=l=0:(a=Math.floor(Math.log(c)/Math.LN2),l=c*Math.pow(2,52-a),a<=-1023&&(!isFinite(l)||l<Math.pow(2,52))?a=-1022:(l-=Math.pow(2,52),a+=1023)):(a=2047,l=isNaN(t)?26985:0);for(var d=0;d<=5;++d,l/=256)e[r+d]=l&255;e[r+6]=(a&15)<<4|l&15,e[r+7]=a>>4|n}var ___toBuffer=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,l=e[0][n].length;a<l;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},__toBuffer=has_buf?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Buffer_from(t)})):___toBuffer(e)}:___toBuffer,___utf16le=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(__readUInt16LE(e,a)));return n.join("").replace(chr0,"")},__utf16le=has_buf?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(chr0,""):___utf16le(e,t,r)}:___utf16le,___hexlify=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},__hexlify=has_buf?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):___hexlify(e,t,r)}:___hexlify,___utf8=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(__readUInt8(e,a)));return n.join("")},__utf8=has_buf?function e(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):___utf8(t,r,n)}:___utf8,___lpstr=function(e,t){var r=__readUInt32LE(e,t);return r>0?__utf8(e,t+4,t+4+r-1):""},__lpstr=___lpstr,___cpstr=function(e,t){var r=__readUInt32LE(e,t);return r>0?__utf8(e,t+4,t+4+r-1):""},__cpstr=___cpstr,___lpwstr=function(e,t){var r=2*__readUInt32LE(e,t);return r>0?__utf8(e,t+4,t+4+r-1):""},__lpwstr=___lpwstr,___lpp4=function e(t,r){var n=__readUInt32LE(t,r);return n>0?__utf16le(t,r+4,r+4+n):""},__lpp4=___lpp4,___8lpp4=function(e,t){var r=__readUInt32LE(e,t);return r>0?__utf8(e,t+4,t+4+r):""},__8lpp4=___8lpp4,___double=function(e,t){return read_double_le(e,t)},__double=___double,is_buf=function e(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};has_buf&&(__lpstr=function(t,r){if(!Buffer.isBuffer(t))return ___lpstr(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},__cpstr=function(t,r){if(!Buffer.isBuffer(t))return ___cpstr(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},__lpwstr=function(t,r){if(!Buffer.isBuffer(t))return ___lpwstr(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},__lpp4=function(t,r){if(!Buffer.isBuffer(t))return ___lpp4(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},__8lpp4=function(t,r){if(!Buffer.isBuffer(t))return ___8lpp4(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},__double=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):___double(t,r)},is_buf=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var __readUInt8=function(e,t){return e[t]},__readUInt16LE=function(e,t){return e[t+1]*256+e[t]},__readInt16LE=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},__readUInt32LE=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},__readInt32LE=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},__readInt32BE=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function ReadShift(e,t){var r="",n,a,l=[],c,d,x,f;switch(t){case"dbcs":if(f=this.l,has_buf&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(x=0;x<e;++x)r+=String.fromCharCode(__readUInt16LE(this,f)),f+=2;e*=2;break;case"utf8":r=__utf8(this,this.l,this.l+e);break;case"utf16le":e*=2,r=__utf16le(this,this.l,this.l+e);break;case"wstr":return ReadShift.call(this,e,"dbcs");case"lpstr-ansi":r=__lpstr(this,this.l),e=4+__readUInt32LE(this,this.l);break;case"lpstr-cp":r=__cpstr(this,this.l),e=4+__readUInt32LE(this,this.l);break;case"lpwstr":r=__lpwstr(this,this.l),e=4+2*__readUInt32LE(this,this.l);break;case"lpp4":e=4+__readUInt32LE(this,this.l),r=__lpp4(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+__readUInt32LE(this,this.l),r=__8lpp4(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(c=__readUInt8(this,this.l+e++))!==0;)l.push(_getchar(c));r=l.join("");break;case"_wstr":for(e=0,r="";(c=__readUInt16LE(this,this.l+e))!==0;)l.push(_getchar(c)),e+=2;e+=2,r=l.join("");break;case"dbcs-cont":for(r="",f=this.l,x=0;x<e;++x){if(this.lens&&this.lens.indexOf(f)!==-1)return c=__readUInt8(this,f),this.l=f+1,d=ReadShift.call(this,e-x,c?"dbcs-cont":"sbcs-cont"),l.join("")+d;l.push(_getchar(__readUInt16LE(this,f))),f+=2}r=l.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",f=this.l,x=0;x!=e;++x){if(this.lens&&this.lens.indexOf(f)!==-1)return c=__readUInt8(this,f),this.l=f+1,d=ReadShift.call(this,e-x,c?"dbcs-cont":"sbcs-cont"),l.join("")+d;l.push(_getchar(__readUInt8(this,f))),f+=1}r=l.join("");break;default:switch(e){case 1:return n=__readUInt8(this,this.l),this.l++,n;case 2:return n=(t==="i"?__readInt16LE:__readUInt16LE)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?__readInt32LE:__readInt32BE)(this,this.l),this.l+=4,n):(a=__readUInt32LE(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=__double(this,this.l):a=__double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=__hexlify(this,this.l,e);break}}return this.l+=e,r}var __writeUInt32LE=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},__writeInt32LE=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},__writeUInt16LE=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function WriteShift(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)__writeUInt16LE(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var l=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var c=t.charCodeAt(a);this[this.l++]=c&255,this[this.l++]=c>>8}for(;this.l<l;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,__writeUInt32LE(this,t,this.l);break;case 8:if(n=8,r==="f"){write_double_le(this,t,this.l);break}case 16:break;case-4:n=4,__writeInt32LE(this,t,this.l);break}return this.l+=n,this}function CheckField(e,t){var r=__hexlify(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function prep_blob(e,t){e.l=t,e.read_shift=ReadShift,e.chk=CheckField,e.write_shift=WriteShift}function parsenoop(e,t){e.l+=t}function new_buf(e){var t=new_raw_buf(e);return prep_blob(t,0),t}function buf_array(){var e=[],t=has_buf?256:2048,r=function(f){var h=new_buf(f);return prep_blob(h,0),h},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},l=function(f){return n&&f<n.length-n.l?n:(a(),n=r(Math.max(f+1,t)))},c=function(){return a(),bconcat(e)},d=function(f){a(),n=f,n.l==null&&(n.l=n.length),l(t)};return{next:l,push:d,end:c,_bufs:e}}function write_record(e,t,r,n){var a=+t,l;if(!isNaN(a)){n||(n=XLSBRecordEnum[a].p||(r||[]).length||0),l=1+(a>=128?1:0)+1,n>=128&&++l,n>=16384&&++l,n>=2097152&&++l;var c=e.next(l);a<=127?c.write_shift(1,a):(c.write_shift(1,(a&127)+128),c.write_shift(1,a>>7));for(var d=0;d!=4;++d)if(n>=128)c.write_shift(1,(n&127)+128),n>>=7;else{c.write_shift(1,n);break}n>0&&is_buf(r)&&e.push(r)}}function shift_cell_xls(e,t,r){var n=dup(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function shift_range_xls(e,t,r){var n=dup(e);return n.s=shift_cell_xls(n.s,t.s,r),n.e=shift_cell_xls(n.e,t.s,r),n}function encode_cell_xls(e,t){if(e.cRel&&e.c<0)for(e=dup(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=dup(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=encode_cell(e);return!e.cRel&&e.cRel!=null&&(r=fix_col(r)),!e.rRel&&e.rRel!=null&&(r=fix_row(r)),r}function encode_range_xls(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+encode_col(e.s.c)+":"+(e.e.cRel?"":"$")+encode_col(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+encode_row(e.s.r)+":"+(e.e.rRel?"":"$")+encode_row(e.e.r):encode_cell_xls(e.s,t.biff)+":"+encode_cell_xls(e.e,t.biff)}function decode_row(e){return parseInt(unfix_row(e),10)-1}function encode_row(e){return""+(e+1)}function fix_row(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function unfix_row(e){return e.replace(/\$(\d+)$/,"$1")}function decode_col(e){for(var t=unfix_col(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function encode_col(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function fix_col(e){return e.replace(/^([A-Z])/,"$$$1")}function unfix_col(e){return e.replace(/^\$([A-Z])/,"$1")}function split_cell(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function decode_cell(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function encode_cell(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function decode_range(e){var t=e.indexOf(":");return t==-1?{s:decode_cell(e),e:decode_cell(e)}:{s:decode_cell(e.slice(0,t)),e:decode_cell(e.slice(t+1))}}function encode_range(e,t){return typeof t>"u"||typeof t=="number"?encode_range(e.s,e.e):(typeof e!="string"&&(e=encode_cell(e)),typeof t!="string"&&(t=encode_cell(t)),e==t?e:e+":"+t)}function safe_decode_range(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,l=e.length;for(r=0;n<l&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<l&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===l||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=l&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=l&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function safe_format_cell(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=SSF_format(e.z,r?datenum(t):t)}catch{}try{return e.w=SSF_format((e.XF||{}).numFmtId||(r?14:0),r?datenum(t):t)}catch{return""+t}}function format_cell(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?BErr[e.v]||e.v:t==null?safe_format_cell(e,e.v):safe_format_cell(e,t))}function sheet_to_workbook(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function sheet_add_aoa(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,l=e||(a?[]:{}),c=0,d=0;if(l&&n.origin!=null){if(typeof n.origin=="number")c=n.origin;else{var x=typeof n.origin=="string"?decode_cell(n.origin):n.origin;c=x.r,d=x.c}l["!ref"]||(l["!ref"]="A1:A1")}var f={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(l["!ref"]){var h=safe_decode_range(l["!ref"]);f.s.c=h.s.c,f.s.r=h.s.r,f.e.c=Math.max(f.e.c,h.e.c),f.e.r=Math.max(f.e.r,h.e.r),c==-1&&(f.e.r=c=h.e.r+1)}for(var g=0;g!=t.length;++g)if(t[g]){if(!Array.isArray(t[g]))throw new Error("aoa_to_sheet expects an array of arrays");for(var y=0;y!=t[g].length;++y)if(!(typeof t[g][y]>"u")){var _={v:t[g][y]},E=c+g,b=d+y;if(f.s.r>E&&(f.s.r=E),f.s.c>b&&(f.s.c=b),f.e.r<E&&(f.e.r=E),f.e.c<b&&(f.e.c=b),t[g][y]&&typeof t[g][y]=="object"&&!Array.isArray(t[g][y])&&!(t[g][y]instanceof Date))_=t[g][y];else if(Array.isArray(_.v)&&(_.f=t[g][y][1],_.v=_.v[0]),_.v===null)if(_.f)_.t="n";else if(n.nullError)_.t="e",_.v=0;else if(n.sheetStubs)_.t="z";else continue;else typeof _.v=="number"?_.t="n":typeof _.v=="boolean"?_.t="b":_.v instanceof Date?(_.z=n.dateNF||table_fmt[14],n.cellDates?(_.t="d",_.w=SSF_format(_.z,datenum(_.v))):(_.t="n",_.v=datenum(_.v),_.w=SSF_format(_.z,_.v))):_.t="s";if(a)l[E]||(l[E]=[]),l[E][b]&&l[E][b].z&&(_.z=l[E][b].z),l[E][b]=_;else{var v=encode_cell({c:b,r:E});l[v]&&l[v].z&&(_.z=l[v].z),l[v]=_}}}return f.s.c<1e7&&(l["!ref"]=encode_range(f)),l}function aoa_to_sheet(e,t){return sheet_add_aoa(null,e,t)}function parse_Int32LE(e){return e.read_shift(4,"i")}function write_UInt32LE(e,t){return t||(t=new_buf(4)),t.write_shift(4,e),t}function parse_XLWideString(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function write_XLWideString(e,t){var r=!1;return t==null&&(r=!0,t=new_buf(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function parse_StrRun(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function write_StrRun(e,t){return t||(t=new_buf(4)),t.write_shift(2,0),t.write_shift(2,0),t}function parse_RichStr(e,t){var r=e.l,n=e.read_shift(1),a=parse_XLWideString(e),l=[],c={t:a,h:a};if((n&1)!==0){for(var d=e.read_shift(4),x=0;x!=d;++x)l.push(parse_StrRun(e));c.r=l}else c.r=[{ich:0,ifnt:0}];return e.l=r+t,c}function write_RichStr(e,t){var r=!1;return t==null&&(r=!0,t=new_buf(15+4*e.t.length)),t.write_shift(1,0),write_XLWideString(e.t,t),r?t.slice(0,t.l):t}var parse_BrtCommentText=parse_RichStr;function write_BrtCommentText(e,t){var r=!1;return t==null&&(r=!0,t=new_buf(23+4*e.t.length)),t.write_shift(1,1),write_XLWideString(e.t,t),t.write_shift(4,1),write_StrRun({},t),r?t.slice(0,t.l):t}function parse_XLSBCell(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function write_XLSBCell(e,t){return t==null&&(t=new_buf(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function parse_XLSBShortCell(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function write_XLSBShortCell(e,t){return t==null&&(t=new_buf(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var parse_XLSBCodeName=parse_XLWideString,write_XLSBCodeName=write_XLWideString;function parse_XLNullableWideString(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function write_XLNullableWideString(e,t){var r=!1;return t==null&&(r=!0,t=new_buf(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var parse_XLNameWideString=parse_XLWideString,parse_RelID=parse_XLNullableWideString,write_RelID=write_XLNullableWideString;function parse_RkNumber(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?__double([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):__readInt32LE(t,0)>>2;return r?a/100:a}function write_RkNumber(e,t){t==null&&(t=new_buf(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function parse_RfX(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function write_RfX(e,t){return t||(t=new_buf(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var parse_UncheckedRfX=parse_RfX,write_UncheckedRfX=write_RfX;function parse_Xnum(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function write_Xnum(e,t){return(t||new_buf(8)).write_shift(8,e,"f")}function parse_BrtColor(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),l=e.read_shift(2,"i"),c=e.read_shift(1),d=e.read_shift(1),x=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var f=XLSIcv[a];f&&(t.rgb=rgb2Hex(f));break;case 2:t.rgb=rgb2Hex([c,d,x]);break;case 3:t.theme=a;break}return l!=0&&(t.tint=l>0?l/32767:l/32768),t}function write_BrtColor(e,t){if(t||(t=new_buf(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function parse_FontFlags(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function write_FontFlags(e,t){t||(t=new_buf(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var VT_I2=2,VT_I4=3,VT_BOOL=11,VT_UI4=19,VT_FILETIME=64,VT_BLOB=65,VT_CF=71,VT_VECTOR_VARIANT=4108,VT_VECTOR_LPSTR=4126,VT_STRING=80,DocSummaryPIDDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Category",t:VT_STRING},3:{n:"PresentationFormat",t:VT_STRING},4:{n:"ByteCount",t:VT_I4},5:{n:"LineCount",t:VT_I4},6:{n:"ParagraphCount",t:VT_I4},7:{n:"SlideCount",t:VT_I4},8:{n:"NoteCount",t:VT_I4},9:{n:"HiddenCount",t:VT_I4},10:{n:"MultimediaClipCount",t:VT_I4},11:{n:"ScaleCrop",t:VT_BOOL},12:{n:"HeadingPairs",t:VT_VECTOR_VARIANT},13:{n:"TitlesOfParts",t:VT_VECTOR_LPSTR},14:{n:"Manager",t:VT_STRING},15:{n:"Company",t:VT_STRING},16:{n:"LinksUpToDate",t:VT_BOOL},17:{n:"CharacterCount",t:VT_I4},19:{n:"SharedDoc",t:VT_BOOL},22:{n:"HyperlinksChanged",t:VT_BOOL},23:{n:"AppVersion",t:VT_I4,p:"version"},24:{n:"DigSig",t:VT_BLOB},26:{n:"ContentType",t:VT_STRING},27:{n:"ContentStatus",t:VT_STRING},28:{n:"Language",t:VT_STRING},29:{n:"Version",t:VT_STRING},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},SummaryPIDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Title",t:VT_STRING},3:{n:"Subject",t:VT_STRING},4:{n:"Author",t:VT_STRING},5:{n:"Keywords",t:VT_STRING},6:{n:"Comments",t:VT_STRING},7:{n:"Template",t:VT_STRING},8:{n:"LastAuthor",t:VT_STRING},9:{n:"RevNumber",t:VT_STRING},10:{n:"EditTime",t:VT_FILETIME},11:{n:"LastPrinted",t:VT_FILETIME},12:{n:"CreatedDate",t:VT_FILETIME},13:{n:"ModifiedDate",t:VT_FILETIME},14:{n:"PageCount",t:VT_I4},15:{n:"WordCount",t:VT_I4},16:{n:"CharCount",t:VT_I4},17:{n:"Thumbnail",t:VT_CF},18:{n:"Application",t:VT_STRING},19:{n:"DocSecurity",t:VT_I4},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}};function rgbify(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var _XLSIcv=rgbify([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XLSIcv=dup(_XLSIcv),BErr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ct2type={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},CT_LIST={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function new_ct(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function write_ct(e,t){var r=evert_arr(ct2type),n=[],a;n[n.length]=XML_HEADER,n[n.length]=writextag("Types",null,{xmlns:XMLNS.CT,"xmlns:xsd":XMLNS.xsd,"xmlns:xsi":XMLNS.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(x){return writextag("Default",null,{Extension:x[0],ContentType:x[1]})}));var l=function(x){e[x]&&e[x].length>0&&(a=e[x][0],n[n.length]=writextag("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:CT_LIST[x][t.bookType]||CT_LIST[x].xlsx}))},c=function(x){(e[x]||[]).forEach(function(f){n[n.length]=writextag("Override",null,{PartName:(f[0]=="/"?"":"/")+f,ContentType:CT_LIST[x][t.bookType]||CT_LIST[x].xlsx})})},d=function(x){(e[x]||[]).forEach(function(f){n[n.length]=writextag("Override",null,{PartName:(f[0]=="/"?"":"/")+f,ContentType:r[x][0]})})};return l("workbooks"),c("sheets"),c("charts"),d("themes"),["strs","styles"].forEach(l),["coreprops","extprops","custprops"].forEach(d),d("vba"),d("comments"),d("threadedcomments"),d("drawings"),c("metadata"),d("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var RELS={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function get_rels_path(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function write_rels(e){var t=[XML_HEADER,writextag("Relationships",null,{xmlns:XMLNS.RELS})];return keys(e["!id"]).forEach(function(r){t[t.length]=writextag("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function add_rels(e,t,r,n,a,l){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[RELS.HLINK,RELS.XPATH,RELS.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function write_manifest(e){var t=[XML_HEADER];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function write_rdf_type(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf_has(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf(e){var t=[XML_HEADER];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(write_rdf_type(e[r][0],e[r][1])),t.push(write_rdf_has("",e[r][0]));return t.push(write_rdf_type("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function write_meta_ods(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+XLSX.version+"</meta:generator></office:meta></office:document-meta>"}var CORE_PROPS=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function cp_doit(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=escapexml(t),n[n.length]=r?writextag(e,t,r):writetag(e,t))}function write_core_props(e,t){var r=t||{},n=[XML_HEADER,writextag("cp:coreProperties",null,{"xmlns:cp":XMLNS.CORE_PROPS,"xmlns:dc":XMLNS.dc,"xmlns:dcterms":XMLNS.dcterms,"xmlns:dcmitype":XMLNS.dcmitype,"xmlns:xsi":XMLNS.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&cp_doit("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:write_w3cdtf(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&cp_doit("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:write_w3cdtf(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var l=0;l!=CORE_PROPS.length;++l){var c=CORE_PROPS[l],d=r.Props&&r.Props[c[1]]!=null?r.Props[c[1]]:e?e[c[1]]:null;d===!0?d="1":d===!1?d="0":typeof d=="number"&&(d=String(d)),d!=null&&cp_doit(c[0],d,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var EXT_PROPS=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],PseudoPropsPairs=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function write_ext_props(e){var t=[],r=writextag;return e||(e={}),e.Application="SheetJS",t[t.length]=XML_HEADER,t[t.length]=writextag("Properties",null,{xmlns:XMLNS.EXT_PROPS,"xmlns:vt":XMLNS.vt}),EXT_PROPS.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=escapexml(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+escapexml(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function write_cust_props(e){var t=[XML_HEADER,writextag("Properties",null,{xmlns:XMLNS.CUST_PROPS,"xmlns:vt":XMLNS.vt})];if(!e)return t.join("");var r=1;return keys(e).forEach(function(a){++r,t[t.length]=writextag("property",write_vt(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:escapexml(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var XLMLDocPropsMap={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function xlml_write_docprops(e,t){var r=[];return keys(XLMLDocPropsMap).map(function(n){for(var a=0;a<CORE_PROPS.length;++a)if(CORE_PROPS[a][1]==n)return CORE_PROPS[a];for(a=0;a<EXT_PROPS.length;++a)if(EXT_PROPS[a][1]==n)return EXT_PROPS[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(writetag(XLMLDocPropsMap[n[1]]||n[1],a))}}),writextag("DocumentProperties",r.join(""),{xmlns:XLMLNS.o})}function xlml_write_custprops(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&keys(e).forEach(function(l){if(Object.prototype.hasOwnProperty.call(e,l)){for(var c=0;c<CORE_PROPS.length;++c)if(l==CORE_PROPS[c][1])return;for(c=0;c<EXT_PROPS.length;++c)if(l==EXT_PROPS[c][1])return;for(c=0;c<r.length;++c)if(l==r[c])return;var d=e[l],x="string";typeof d=="number"?(x="float",d=String(d)):d===!0||d===!1?(x="boolean",d=d?"1":"0"):d=String(d),a.push(writextag(escapexmltag(l),d,{"dt:dt":x}))}}),t&&keys(t).forEach(function(l){if(Object.prototype.hasOwnProperty.call(t,l)&&!(e&&Object.prototype.hasOwnProperty.call(e,l))){var c=t[l],d="string";typeof c=="number"?(d="float",c=String(c)):c===!0||c===!1?(d="boolean",c=c?"1":"0"):c instanceof Date?(d="dateTime.tz",c=c.toISOString()):c=String(c),a.push(writextag(escapexmltag(l),c,{"dt:dt":d}))}}),"<"+n+' xmlns="'+XLMLNS.o+'">'+a.join("")+"</"+n+">"}function write_FILETIME(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var l=n/Math.pow(2,32)|0;l>0&&(n=n%Math.pow(2,32),a+=l);var c=new_buf(8);return c.write_shift(4,n),c.write_shift(4,a),c}function write_TypedPropertyValue(e,t){var r=new_buf(4),n=new_buf(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=new_buf(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=write_FILETIME(t);break;case 31:case 80:for(n=new_buf(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return bconcat([r,n])}var XLSPSSkip=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function guess_property_type(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function write_PropertySet(e,t,r){var n=new_buf(8),a=[],l=[],c=8,d=0,x=new_buf(8),f=new_buf(8);if(x.write_shift(4,2),x.write_shift(4,1200),f.write_shift(4,1),l.push(x),a.push(f),c+=8+x.length,!t){f=new_buf(8),f.write_shift(4,0),a.unshift(f);var h=[new_buf(4)];for(h[0].write_shift(4,e.length),d=0;d<e.length;++d){var g=e[d][0];for(x=new_buf(8+2*(g.length+1)+(g.length%2?0:2)),x.write_shift(4,d+2),x.write_shift(4,g.length+1),x.write_shift(0,g,"dbcs");x.l!=x.length;)x.write_shift(1,0);h.push(x)}x=bconcat(h),l.unshift(x),c+=8+x.length}for(d=0;d<e.length;++d)if(!(t&&!t[e[d][0]])&&!(XLSPSSkip.indexOf(e[d][0])>-1||PseudoPropsPairs.indexOf(e[d][0])>-1)&&e[d][1]!=null){var y=e[d][1],_=0;if(t){_=+t[e[d][0]];var E=r[_];if(E.p=="version"&&typeof y=="string"){var b=y.split(".");y=(+b[0]<<16)+(+b[1]||0)}x=write_TypedPropertyValue(E.t,y)}else{var v=guess_property_type(y);v==-1&&(v=31,y=String(y)),x=write_TypedPropertyValue(v,y)}l.push(x),f=new_buf(8),f.write_shift(4,t?_:2+d),a.push(f),c+=8+x.length}var R=8*(l.length+1);for(d=0;d<l.length;++d)a[d].write_shift(4,R),R+=l[d].length;return n.write_shift(4,c),n.write_shift(4,l.length),bconcat([n].concat(a).concat(l))}function write_PropertySetStream(e,t,r,n,a,l){var c=new_buf(a?68:48),d=[c];c.write_shift(2,65534),c.write_shift(2,0),c.write_shift(4,842412599),c.write_shift(16,CFB.utils.consts.HEADER_CLSID,"hex"),c.write_shift(4,a?2:1),c.write_shift(16,t,"hex"),c.write_shift(4,a?68:48);var x=write_PropertySet(e,r,n);if(d.push(x),a){var f=write_PropertySet(a,null,null);c.write_shift(16,l,"hex"),c.write_shift(4,68+x.length),d.push(f)}return bconcat(d)}function writezeroes(e,t){t||(t=new_buf(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function parsebool(e,t){return e.read_shift(t)===1}function writebool(e,t){return t||(t=new_buf(2)),t.write_shift(2,+!!e),t}function parseuint16(e){return e.read_shift(2,"u")}function writeuint16(e,t){return t||(t=new_buf(2)),t.write_shift(2,e),t}function write_Bes(e,t,r){return r||(r=new_buf(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function parse_ShortXLUnicodeString(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var l=e.read_shift(1);l&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var c=n?e.read_shift(n,a):"";return c}function write_XLUnicodeRichExtendedString(e){var t=e.t||"",r=new_buf(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=new_buf(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return bconcat(a)}function parse_XLUnicodeStringNoCch(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function parse_XLUnicodeString(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):parse_XLUnicodeStringNoCch(e,n,r)}function parse_XLUnicodeString2(e,t,r){if(r.biff>5)return parse_XLUnicodeString(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function write_XLUnicodeString(e,t,r){return r||(r=new_buf(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function write_HyperlinkString(e,t){t||(t=new_buf(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function write_Hyperlink(e){var t=new_buf(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),l=a>-1?31:23;switch(n.charAt(0)){case"#":l=28;break;case".":l&=-3;break}t.write_shift(4,2),t.write_shift(4,l);var c=[8,6815827,6619237,4849780,83];for(r=0;r<c.length;++r)t.write_shift(4,c[r]);if(l==28)n=n.slice(1),write_HyperlinkString(n,t);else if(l&2){for(c="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<c.length;++r)t.write_shift(1,parseInt(c[r],16));var d=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(d.length+1)),r=0;r<d.length;++r)t.write_shift(2,d.charCodeAt(r));t.write_shift(2,0),l&8&&write_HyperlinkString(a>-1?n.slice(a+1):"",t)}else{for(c="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<c.length;++r)t.write_shift(1,parseInt(c[r],16));for(var x=0;n.slice(x*3,x*3+3)=="../"||n.slice(x*3,x*3+3)=="..\\";)++x;for(t.write_shift(2,x),t.write_shift(4,n.length-3*x+1),r=0;r<n.length-3*x;++r)t.write_shift(1,n.charCodeAt(r+3*x)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function write_XLSCell(e,t,r,n){return n||(n=new_buf(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function parse_XTI(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),l=e.read_shift(n,"i"),c=e.read_shift(n,"i");return[a,l,c]}function parse_Ref8U(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function write_Ref8U(e,t){return t||(t=new_buf(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function write_BOF(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var l=new_buf(a);return l.write_shift(2,n),l.write_shift(2,t),a>4&&l.write_shift(2,29282),a>6&&l.write_shift(2,1997),a>8&&(l.write_shift(2,49161),l.write_shift(2,1),l.write_shift(2,1798),l.write_shift(2,0)),l}function write_WriteAccess(e,t){var r=!t||t.biff==8,n=new_buf(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function write_BoundSheet8(e,t){var r=!t||t.biff>=8?2:1,n=new_buf(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function write_SST(e,t){var r=new_buf(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=write_XLUnicodeRichExtendedString(e[a]);var l=bconcat([r].concat(n));return l.parts=[r.length].concat(n.map(function(c){return c.length})),l}function write_Window1(){var e=new_buf(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function write_Window2(e){var t=new_buf(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function write_Font(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,l=new_buf(a);return l.write_shift(2,e.sz*20),l.write_shift(4,0),l.write_shift(2,400),l.write_shift(4,0),l.write_shift(2,0),l.write_shift(1,r.length),n||l.write_shift(1,1),l.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),l}function write_LabelSst(e,t,r,n){var a=new_buf(10);return write_XLSCell(e,t,n,a),a.write_shift(4,r),a}function write_Label(e,t,r,n,a){var l=!a||a.biff==8,c=new_buf(8+ +l+(1+l)*r.length);return write_XLSCell(e,t,n,c),c.write_shift(2,r.length),l&&c.write_shift(1,1),c.write_shift((1+l)*r.length,r,l?"utf16le":"sbcs"),c}function write_Format(e,t,r,n){var a=r&&r.biff==5;n||(n=new_buf(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var l=n.length>n.l?n.slice(0,n.l):n;return l.l==null&&(l.l=l.length),l}function write_Dimensions(e,t){var r=t.biff==8||!t.biff?4:2,n=new_buf(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function write_XF(e,t,r,n){var a=r&&r.biff==5;n||(n=new_buf(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var l=0;return e.numFmtId>0&&a&&(l|=1024),n.write_shift(4,l),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function write_Guts(e){var t=new_buf(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function write_BoolErr(e,t,r,n,a,l){var c=new_buf(8);return write_XLSCell(e,t,n,c),write_Bes(r,l,c),c}function write_Number(e,t,r,n){var a=new_buf(14);return write_XLSCell(e,t,n,a),write_Xnum(r,a),a}function parse_ExternSheet(e,t,r){if(r.biff<8)return parse_BIFF5ExternSheet(e,t,r);for(var n=[],a=e.l+t,l=e.read_shift(r.biff>8?4:2);l--!==0;)n.push(parse_XTI(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function parse_BIFF5ExternSheet(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=parse_ShortXLUnicodeString(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function write_MergeCells(e){var t=new_buf(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)write_Ref8U(e[r],t);return t}function write_HLink(e){var t=new_buf(24),r=decode_cell(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return bconcat([t,write_Hyperlink(e[1])])}function write_HLinkTooltip(e){var t=e[1].Tooltip,r=new_buf(10+2*(t.length+1));r.write_shift(2,2048);var n=decode_cell(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function write_Country(e){return e||(e=new_buf(4)),e.write_shift(2,1),e.write_shift(2,1),e}function parse_ColInfo(e,t,r){if(!r.cellStyles)return parsenoop(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(n),d=e.read_shift(n),x=e.read_shift(2);n==2&&(e.l+=2);var f={s:a,e:l,w:c,ixfe:d,flags:x};return(r.biff>=5||!r.biff)&&(f.level=x>>8&7),f}function write_ColInfo(e,t){var r=new_buf(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function write_RRTabId(e){for(var t=new_buf(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function write_BIFF2NUM(e,t,r){var n=new_buf(15);return write_BIFF2Cell(n,e,t),n.write_shift(8,r,"f"),n}function write_BIFF2INT(e,t,r){var n=new_buf(9);return write_BIFF2Cell(n,e,t),n.write_shift(2,r),n}var DBF=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=evert({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(d,x){var f=[],h=new_raw_buf(1);switch(x.type){case"base64":h=s2a(Base64_decode(d));break;case"binary":h=s2a(d);break;case"buffer":case"array":h=d;break}prep_blob(h,0);var g=h.read_shift(1),y=!!(g&136),_=!1,E=!1;switch(g){case 2:break;case 3:break;case 48:_=!0,y=!0;break;case 49:_=!0,y=!0;break;case 131:break;case 139:break;case 140:E=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+g.toString(16))}var b=0,v=521;g==2&&(b=h.read_shift(2)),h.l+=3,g!=2&&(b=h.read_shift(4)),b>1048576&&(b=1e6),g!=2&&(v=h.read_shift(2));var R=h.read_shift(2),A=x.codepage||1252;g!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(A=e[h[h.l]]),h.l+=1,h.l+=2),E&&(h.l+=36);for(var C=[],L={},I=Math.min(h.length,g==2?521:v-10-(_?264:0)),ae=E?32:11;h.l<I&&h[h.l]!=13;)switch(L={},L.name=$cptable.utils.decode(A,h.slice(h.l,h.l+ae)).replace(/[\u0000\r\n].*$/g,""),h.l+=ae,L.type=String.fromCharCode(h.read_shift(1)),g!=2&&!E&&(L.offset=h.read_shift(4)),L.len=h.read_shift(1),g==2&&(L.offset=h.read_shift(2)),L.dec=h.read_shift(1),L.name.length&&C.push(L),g!=2&&(h.l+=E?13:14),L.type){case"B":(!_||L.len!=8)&&x.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"G":case"P":x.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+L.type)}if(h[h.l]!==13&&(h.l=v-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=v;var D=0,ee=0;for(f[0]=[],ee=0;ee!=C.length;++ee)f[0][ee]=C[ee].name;for(;b-- >0;){if(h[h.l]===42){h.l+=R;continue}for(++h.l,f[++D]=[],ee=0,ee=0;ee!=C.length;++ee){var Y=h.slice(h.l,h.l+C[ee].len);h.l+=C[ee].len,prep_blob(Y,0);var le=$cptable.utils.decode(A,Y);switch(C[ee].type){case"C":le.trim().length&&(f[D][ee]=le.replace(/\s+$/,""));break;case"D":le.length===8?f[D][ee]=new Date(+le.slice(0,4),+le.slice(4,6)-1,+le.slice(6,8)):f[D][ee]=le;break;case"F":f[D][ee]=parseFloat(le.trim());break;case"+":case"I":f[D][ee]=E?Y.read_shift(-4,"i")^2147483648:Y.read_shift(4,"i");break;case"L":switch(le.trim().toUpperCase()){case"Y":case"T":f[D][ee]=!0;break;case"N":case"F":f[D][ee]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+le+"|")}break;case"M":if(!y)throw new Error("DBF Unexpected MEMO for type "+g.toString(16));f[D][ee]="##MEMO##"+(E?parseInt(le.trim(),10):Y.read_shift(4));break;case"N":le=le.replace(/\u0000/g,"").trim(),le&&le!="."&&(f[D][ee]=+le||0);break;case"@":f[D][ee]=new Date(Y.read_shift(-8,"f")-621356832e5);break;case"T":f[D][ee]=new Date((Y.read_shift(4)-2440588)*864e5+Y.read_shift(4));break;case"Y":f[D][ee]=Y.read_shift(4,"i")/1e4+Y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":f[D][ee]=-Y.read_shift(-8,"f");break;case"B":if(_&&C[ee].len==8){f[D][ee]=Y.read_shift(8,"f");break}case"G":case"P":Y.l+=C[ee].len;break;case"0":if(C[ee].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[ee].type)}}}if(g!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return x&&x.sheetRows&&(f=f.slice(0,x.sheetRows)),x.DBF=C,f}function n(d,x){var f=x||{};f.dateNF||(f.dateNF="yyyymmdd");var h=aoa_to_sheet(r(d,f),f);return h["!cols"]=f.DBF.map(function(g){return{wch:g.len,DBF:g}}),delete f.DBF,h}function a(d,x){try{return sheet_to_workbook(n(d,x),x)}catch(f){if(x&&x.WTF)throw f}return{SheetNames:[],Sheets:{}}}var l={B:8,C:250,L:1,D:8,"?":0,"":0};function c(d,x){var f=x||{};if(+f.codepage>=0&&set_cp(+f.codepage),f.type=="string")throw new Error("Cannot write DBF to JS string");var h=buf_array(),g=sheet_to_json(d,{header:1,raw:!0,cellDates:!0}),y=g[0],_=g.slice(1),E=d["!cols"]||[],b=0,v=0,R=0,A=1;for(b=0;b<y.length;++b){if(((E[b]||{}).DBF||{}).name){y[b]=E[b].DBF.name,++R;continue}if(y[b]!=null){if(++R,typeof y[b]=="number"&&(y[b]=y[b].toString(10)),typeof y[b]!="string")throw new Error("DBF Invalid column name "+y[b]+" |"+typeof y[b]+"|");if(y.indexOf(y[b])!==b){for(v=0;v<1024;++v)if(y.indexOf(y[b]+"_"+v)==-1){y[b]+="_"+v;break}}}}var C=safe_decode_range(d["!ref"]),L=[],I=[],ae=[];for(b=0;b<=C.e.c-C.s.c;++b){var D="",ee="",Y=0,le=[];for(v=0;v<_.length;++v)_[v][b]!=null&&le.push(_[v][b]);if(le.length==0||y[b]==null){L[b]="?";continue}for(v=0;v<le.length;++v){switch(typeof le[v]){case"number":ee="B";break;case"string":ee="C";break;case"boolean":ee="L";break;case"object":ee=le[v]instanceof Date?"D":"C";break;default:ee="C"}Y=Math.max(Y,String(le[v]).length),D=D&&D!=ee?"C":ee}Y>250&&(Y=250),ee=((E[b]||{}).DBF||{}).type,ee=="C"&&E[b].DBF.len>Y&&(Y=E[b].DBF.len),D=="B"&&ee=="N"&&(D="N",ae[b]=E[b].DBF.dec,Y=E[b].DBF.len),I[b]=D=="C"||ee=="N"?Y:l[D]||0,A+=I[b],L[b]=D}var te=h.next(32);for(te.write_shift(4,318902576),te.write_shift(4,_.length),te.write_shift(2,296+32*R),te.write_shift(2,A),b=0;b<4;++b)te.write_shift(4,0);for(te.write_shift(4,0|(+t[current_ansi]||3)<<8),b=0,v=0;b<y.length;++b)if(y[b]!=null){var oe=h.next(32),Be=(y[b].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);oe.write_shift(1,Be,"sbcs"),oe.write_shift(1,L[b]=="?"?"C":L[b],"sbcs"),oe.write_shift(4,v),oe.write_shift(1,I[b]||l[L[b]]||0),oe.write_shift(1,ae[b]||0),oe.write_shift(1,2),oe.write_shift(4,0),oe.write_shift(1,0),oe.write_shift(4,0),oe.write_shift(4,0),v+=I[b]||l[L[b]]||0}var Pe=h.next(264);for(Pe.write_shift(4,13),b=0;b<65;++b)Pe.write_shift(4,0);for(b=0;b<_.length;++b){var De=h.next(A);for(De.write_shift(1,0),v=0;v<y.length;++v)if(y[v]!=null)switch(L[v]){case"L":De.write_shift(1,_[b][v]==null?63:_[b][v]?84:70);break;case"B":De.write_shift(8,_[b][v]||0,"f");break;case"N":var X="0";for(typeof _[b][v]=="number"&&(X=_[b][v].toFixed(ae[v]||0)),R=0;R<I[v]-X.length;++R)De.write_shift(1,32);De.write_shift(1,X,"sbcs");break;case"D":_[b][v]?(De.write_shift(4,("0000"+_[b][v].getFullYear()).slice(-4),"sbcs"),De.write_shift(2,("00"+(_[b][v].getMonth()+1)).slice(-2),"sbcs"),De.write_shift(2,("00"+_[b][v].getDate()).slice(-2),"sbcs")):De.write_shift(8,"00000000","sbcs");break;case"C":var Se=String(_[b][v]!=null?_[b][v]:"").slice(0,I[v]);for(De.write_shift(1,Se,"sbcs"),R=0;R<I[v]-Se.length;++R)De.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:a,to_sheet:n,from_sheet:c}})(),SYLK=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+keys(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(y,_){var E=e[_];return typeof E=="number"?_getansi(E):E},n=function(y,_,E){var b=_.charCodeAt(0)-32<<4|E.charCodeAt(0)-48;return b==59?y:_getansi(b)};e["|"]=254;function a(y,_){switch(_.type){case"base64":return l(Base64_decode(y),_);case"binary":return l(y,_);case"buffer":return l(has_buf&&Buffer.isBuffer(y)?y.toString("binary"):a2s(y),_);case"array":return l(cc2str(y),_)}throw new Error("Unrecognized type "+_.type)}function l(y,_){var E=y.split(/[\n\r]+/),b=-1,v=-1,R=0,A=0,C=[],L=[],I=null,ae={},D=[],ee=[],Y=[],le=0,te;for(+_.codepage>=0&&set_cp(+_.codepage);R!==E.length;++R){le=0;var oe=E[R].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),Be=oe.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),Pe=Be[0],De;if(oe.length>0)switch(Pe){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Be[1].charAt(0)=="P"&&L.push(oe.slice(3).replace(/;;/g,";"));break;case"C":var X=!1,Se=!1,z=!1,re=!1,T=-1,J=-1;for(A=1;A<Be.length;++A)switch(Be[A].charAt(0)){case"A":break;case"X":v=parseInt(Be[A].slice(1))-1,Se=!0;break;case"Y":for(b=parseInt(Be[A].slice(1))-1,Se||(v=0),te=C.length;te<=b;++te)C[te]=[];break;case"K":De=Be[A].slice(1),De.charAt(0)==='"'?De=De.slice(1,De.length-1):De==="TRUE"?De=!0:De==="FALSE"?De=!1:isNaN(fuzzynum(De))?isNaN(fuzzydate(De).getDate())||(De=parseDate(De)):(De=fuzzynum(De),I!==null&&fmt_is_date(I)&&(De=numdate(De))),X=!0;break;case"E":re=!0;var B=rc_to_a1(Be[A].slice(1),{r:b,c:v});C[b][v]=[C[b][v],B];break;case"S":z=!0,C[b][v]=[C[b][v],"S5S"];break;case"G":break;case"R":T=parseInt(Be[A].slice(1))-1;break;case"C":J=parseInt(Be[A].slice(1))-1;break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+oe)}if(X&&(C[b][v]&&C[b][v].length==2?C[b][v][0]=De:C[b][v]=De,I=null),z){if(re)throw new Error("SYLK shared formula cannot have own formula");var j=T>-1&&C[T][J];if(!j||!j[1])throw new Error("SYLK shared formula cannot find base");C[b][v][1]=shift_formula_str(j[1],{r:b-T,c:v-J})}break;case"F":var M=0;for(A=1;A<Be.length;++A)switch(Be[A].charAt(0)){case"X":v=parseInt(Be[A].slice(1))-1,++M;break;case"Y":for(b=parseInt(Be[A].slice(1))-1,te=C.length;te<=b;++te)C[te]=[];break;case"M":le=parseInt(Be[A].slice(1))/20;break;case"F":break;case"G":break;case"P":I=L[parseInt(Be[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(Y=Be[A].slice(1).split(" "),te=parseInt(Y[0],10);te<=parseInt(Y[1],10);++te)le=parseInt(Y[2],10),ee[te-1]=le===0?{hidden:!0}:{wch:le},process_col(ee[te-1]);break;case"C":v=parseInt(Be[A].slice(1))-1,ee[v]||(ee[v]={});break;case"R":b=parseInt(Be[A].slice(1))-1,D[b]||(D[b]={}),le>0?(D[b].hpt=le,D[b].hpx=pt2px(le)):le===0&&(D[b].hidden=!0);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+oe)}M<1&&(I=null);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+oe)}}return D.length>0&&(ae["!rows"]=D),ee.length>0&&(ae["!cols"]=ee),_&&_.sheetRows&&(C=C.slice(0,_.sheetRows)),[C,ae]}function c(y,_){var E=a(y,_),b=E[0],v=E[1],R=aoa_to_sheet(b,_);return keys(v).forEach(function(A){R[A]=v[A]}),R}function d(y,_){return sheet_to_workbook(c(y,_),_)}function x(y,_,E,b){var v="C;Y"+(E+1)+";X"+(b+1)+";K";switch(y.t){case"n":v+=y.v||0,y.f&&!y.F&&(v+=";E"+a1_to_rc(y.f,{r:E,c:b}));break;case"b":v+=y.v?"TRUE":"FALSE";break;case"e":v+=y.w||y.v;break;case"d":v+='"'+(y.w||y.v)+'"';break;case"s":v+='"'+y.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function f(y,_){_.forEach(function(E,b){var v="F;W"+(b+1)+" "+(b+1)+" ";E.hidden?v+="0":(typeof E.width=="number"&&!E.wpx&&(E.wpx=width2px(E.width)),typeof E.wpx=="number"&&!E.wch&&(E.wch=px2char(E.wpx)),typeof E.wch=="number"&&(v+=Math.round(E.wch))),v.charAt(v.length-1)!=" "&&y.push(v)})}function h(y,_){_.forEach(function(E,b){var v="F;";E.hidden?v+="M0;":E.hpt?v+="M"+20*E.hpt+";":E.hpx&&(v+="M"+20*px2pt(E.hpx)+";"),v.length>2&&y.push(v+"R"+(b+1))})}function g(y,_){var E=["ID;PWXL;N;E"],b=[],v=safe_decode_range(y["!ref"]),R,A=Array.isArray(y),C=`\r
`;E.push("P;PGeneral"),E.push("F;P0;DG0G8;M255"),y["!cols"]&&f(E,y["!cols"]),y["!rows"]&&h(E,y["!rows"]),E.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var L=v.s.r;L<=v.e.r;++L)for(var I=v.s.c;I<=v.e.c;++I){var ae=encode_cell({r:L,c:I});R=A?(y[L]||[])[I]:y[ae],!(!R||R.v==null&&(!R.f||R.F))&&b.push(x(R,y,L,I))}return E.join(C)+C+b.join(C)+C+"E"+C}return{to_workbook:d,to_sheet:c,from_sheet:g}})(),DIF=(function(){function e(l,c){switch(c.type){case"base64":return t(Base64_decode(l),c);case"binary":return t(l,c);case"buffer":return t(has_buf&&Buffer.isBuffer(l)?l.toString("binary"):a2s(l),c);case"array":return t(cc2str(l),c)}throw new Error("Unrecognized type "+c.type)}function t(l,c){for(var d=l.split(`
`),x=-1,f=-1,h=0,g=[];h!==d.length;++h){if(d[h].trim()==="BOT"){g[++x]=[],f=0;continue}if(!(x<0)){var y=d[h].trim().split(","),_=y[0],E=y[1];++h;for(var b=d[h]||"";(b.match(/["]/g)||[]).length&1&&h<d.length-1;)b+=`
`+d[++h];switch(b=b.trim(),+_){case-1:if(b==="BOT"){g[++x]=[],f=0;continue}else if(b!=="EOD")throw new Error("Unrecognized DIF special command "+b);break;case 0:b==="TRUE"?g[x][f]=!0:b==="FALSE"?g[x][f]=!1:isNaN(fuzzynum(E))?isNaN(fuzzydate(E).getDate())?g[x][f]=E:g[x][f]=parseDate(E):g[x][f]=fuzzynum(E),++f;break;case 1:b=b.slice(1,b.length-1),b=b.replace(/""/g,'"'),b&&b.match(/^=".*"$/)&&(b=b.slice(2,-1)),g[x][f++]=b!==""?b:null;break}if(b==="EOD")break}}return c&&c.sheetRows&&(g=g.slice(0,c.sheetRows)),g}function r(l,c){return aoa_to_sheet(e(l,c),c)}function n(l,c){return sheet_to_workbook(r(l,c),c)}var a=(function(){var l=function(x,f,h,g,y){x.push(f),x.push(h+","+g),x.push('"'+y.replace(/"/g,'""')+'"')},c=function(x,f,h,g){x.push(f+","+h),x.push(f==1?'"'+g.replace(/"/g,'""')+'"':g)};return function(x){var f=[],h=safe_decode_range(x["!ref"]),g,y=Array.isArray(x);l(f,"TABLE",0,1,"sheetjs"),l(f,"VECTORS",0,h.e.r-h.s.r+1,""),l(f,"TUPLES",0,h.e.c-h.s.c+1,""),l(f,"DATA",0,0,"");for(var _=h.s.r;_<=h.e.r;++_){c(f,-1,0,"BOT");for(var E=h.s.c;E<=h.e.c;++E){var b=encode_cell({r:_,c:E});if(g=y?(x[_]||[])[E]:x[b],!g){c(f,1,0,"");continue}switch(g.t){case"n":var v=g.w;!v&&g.v!=null&&(v=g.v),v==null?g.f&&!g.F?c(f,1,0,"="+g.f):c(f,1,0,""):c(f,0,v,"V");break;case"b":c(f,0,g.v?1:0,g.v?"TRUE":"FALSE");break;case"s":c(f,1,0,isNaN(g.v)?g.v:'="'+g.v+'"');break;case"d":g.w||(g.w=SSF_format(g.z||table_fmt[14],datenum(parseDate(g.v)))),c(f,0,g.w,"V");break;default:c(f,1,0,"")}}}c(f,-1,0,"EOD");var R=`\r
`,A=f.join(R);return A}})();return{to_workbook:n,to_sheet:r,from_sheet:a}})(),ETH=(function(){function e(g){return g.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(g){return g.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(g,y){for(var _=g.split(`
`),E=-1,b=-1,v=0,R=[];v!==_.length;++v){var A=_[v].trim().split(":");if(A[0]==="cell"){var C=decode_cell(A[1]);if(R.length<=C.r)for(E=R.length;E<=C.r;++E)R[E]||(R[E]=[]);switch(E=C.r,b=C.c,A[2]){case"t":R[E][b]=e(A[3]);break;case"v":R[E][b]=+A[3];break;case"vtf":var L=A[A.length-1];case"vtc":switch(A[3]){case"nl":R[E][b]=!!+A[4];break;default:R[E][b]=+A[4];break}A[2]=="vtf"&&(R[E][b]=[R[E][b],L])}}}return y&&y.sheetRows&&(R=R.slice(0,y.sheetRows)),R}function n(g,y){return aoa_to_sheet(r(g,y),y)}function a(g,y){return sheet_to_workbook(n(g,y),y)}var l=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),c=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,d=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),x="--SocialCalcSpreadsheetControlSave--";function f(g){if(!g||!g["!ref"])return"";for(var y=[],_=[],E,b="",v=decode_range(g["!ref"]),R=Array.isArray(g),A=v.s.r;A<=v.e.r;++A)for(var C=v.s.c;C<=v.e.c;++C)if(b=encode_cell({r:A,c:C}),E=R?(g[A]||[])[C]:g[b],!(!E||E.v==null||E.t==="z")){switch(_=["cell",b,"t"],E.t){case"s":case"str":_.push(t(E.v));break;case"n":E.f?(_[2]="vtf",_[3]="n",_[4]=E.v,_[5]=t(E.f)):(_[2]="v",_[3]=E.v);break;case"b":_[2]="vt"+(E.f?"f":"c"),_[3]="nl",_[4]=E.v?"1":"0",_[5]=t(E.f||(E.v?"TRUE":"FALSE"));break;case"d":var L=datenum(parseDate(E.v));_[2]="vtc",_[3]="nd",_[4]=""+L,_[5]=E.w||SSF_format(E.z||table_fmt[14],L);break;case"e":continue}y.push(_.join(":"))}return y.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),y.push("valueformat:1:text-wiki"),y.join(`
`)}function h(g){return[l,c,d,c,f(g),x].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:h}})(),PRN=(function(){function e(h,g,y,_,E){E.raw?g[y][_]=h:h===""||(h==="TRUE"?g[y][_]=!0:h==="FALSE"?g[y][_]=!1:isNaN(fuzzynum(h))?isNaN(fuzzydate(h).getDate())?g[y][_]=h:g[y][_]=parseDate(h):g[y][_]=fuzzynum(h))}function t(h,g){var y=g||{},_=[];if(!h||h.length===0)return _;for(var E=h.split(/[\r\n]/),b=E.length-1;b>=0&&E[b].length===0;)--b;for(var v=10,R=0,A=0;A<=b;++A)R=E[A].indexOf(" "),R==-1?R=E[A].length:R++,v=Math.max(v,R);for(A=0;A<=b;++A){_[A]=[];var C=0;for(e(E[A].slice(0,v).trim(),_,A,C,y),C=1;C<=(E[A].length-v)/10+1;++C)e(E[A].slice(v+(C-1)*10,v+C*10).trim(),_,A,C,y)}return y.sheetRows&&(_=_.slice(0,y.sheetRows)),_}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(h){for(var g={},y=!1,_=0,E=0;_<h.length;++_)(E=h.charCodeAt(_))==34?y=!y:!y&&E in r&&(g[E]=(g[E]||0)+1);E=[];for(_ in g)Object.prototype.hasOwnProperty.call(g,_)&&E.push([g[_],_]);if(!E.length){g=n;for(_ in g)Object.prototype.hasOwnProperty.call(g,_)&&E.push([g[_],_])}return E.sort(function(b,v){return b[0]-v[0]||n[b[1]]-n[v[1]]}),r[E.pop()[1]]||44}function l(h,g){var y=g||{},_="",E=y.dense?[]:{},b={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(_=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(_=h.charAt(4),h=h.slice(6)):_=a(h.slice(0,1024)):y&&y.FS?_=y.FS:_=a(h.slice(0,1024));var v=0,R=0,A=0,C=0,L=0,I=_.charCodeAt(0),ae=!1,D=0,ee=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var Y=y.dateNF!=null?dateNF_regex(y.dateNF):null;function le(){var te=h.slice(C,L),oe={};if(te.charAt(0)=='"'&&te.charAt(te.length-1)=='"'&&(te=te.slice(1,-1).replace(/""/g,'"')),te.length===0)oe.t="z";else if(y.raw)oe.t="s",oe.v=te;else if(te.trim().length===0)oe.t="s",oe.v=te;else if(te.charCodeAt(0)==61)te.charCodeAt(1)==34&&te.charCodeAt(te.length-1)==34?(oe.t="s",oe.v=te.slice(2,-1).replace(/""/g,'"')):fuzzyfmla(te)?(oe.t="n",oe.f=te.slice(1)):(oe.t="s",oe.v=te);else if(te=="TRUE")oe.t="b",oe.v=!0;else if(te=="FALSE")oe.t="b",oe.v=!1;else if(!isNaN(A=fuzzynum(te)))oe.t="n",y.cellText!==!1&&(oe.w=te),oe.v=A;else if(!isNaN(fuzzydate(te).getDate())||Y&&te.match(Y)){oe.z=y.dateNF||table_fmt[14];var Be=0;Y&&te.match(Y)&&(te=dateNF_fix(te,y.dateNF,te.match(Y)||[]),Be=1),y.cellDates?(oe.t="d",oe.v=parseDate(te,Be)):(oe.t="n",oe.v=datenum(parseDate(te,Be))),y.cellText!==!1&&(oe.w=SSF_format(oe.z,oe.v instanceof Date?datenum(oe.v):oe.v)),y.cellNF||delete oe.z}else oe.t="s",oe.v=te;if(oe.t=="z"||(y.dense?(E[v]||(E[v]=[]),E[v][R]=oe):E[encode_cell({c:R,r:v})]=oe),C=L+1,ee=h.charCodeAt(C),b.e.c<R&&(b.e.c=R),b.e.r<v&&(b.e.r=v),D==I)++R;else if(R=0,++v,y.sheetRows&&y.sheetRows<=v)return!0}e:for(;L<h.length;++L)switch(D=h.charCodeAt(L)){case 34:ee===34&&(ae=!ae);break;case I:case 10:case 13:if(!ae&&le())break e;break}return L-C>0&&le(),E["!ref"]=encode_range(b),E}function c(h,g){return!(g&&g.PRN)||g.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?l(h,g):aoa_to_sheet(t(h,g),g)}function d(h,g){var y="",_=g.type=="string"?[0,0,0,0]:firstbyte(h,g);switch(g.type){case"base64":y=Base64_decode(h);break;case"binary":y=h;break;case"buffer":g.codepage==65001?y=h.toString("utf8"):g.codepage&&typeof $cptable<"u"||(y=has_buf&&Buffer.isBuffer(h)?h.toString("binary"):a2s(h));break;case"array":y=cc2str(h);break;case"string":y=h;break;default:throw new Error("Unrecognized type "+g.type)}return _[0]==239&&_[1]==187&&_[2]==191?y=utf8read(y.slice(3)):g.type!="string"&&g.type!="buffer"&&g.codepage==65001?y=utf8read(y):g.type=="binary"&&typeof $cptable<"u",y.slice(0,19)=="socialcalc:version:"?ETH.to_sheet(g.type=="string"?y:utf8read(y),g):c(y,g)}function x(h,g){return sheet_to_workbook(d(h,g),g)}function f(h){for(var g=[],y=safe_decode_range(h["!ref"]),_,E=Array.isArray(h),b=y.s.r;b<=y.e.r;++b){for(var v=[],R=y.s.c;R<=y.e.c;++R){var A=encode_cell({r:b,c:R});if(_=E?(h[b]||[])[R]:h[A],!_||_.v==null){v.push("          ");continue}for(var C=(_.w||(format_cell(_),_.w)||"").slice(0,10);C.length<10;)C+=" ";v.push(C+(R===0?" ":""))}g.push(v.join(""))}return g.join(`
`)}return{to_workbook:x,to_sheet:d,from_sheet:f}})(),WK_=(function(){function e(B,j,M){if(B){prep_blob(B,B.l||0);for(var U=M.Enum||T;B.l<B.length;){var K=B.read_shift(2),Le=U[K]||U[65535],ve=B.read_shift(2),Ae=B.l+ve,ye=Le.f&&Le.f(B,ve,M);if(B.l=Ae,j(ye,Le,K))return}}}function t(B,j){switch(j.type){case"base64":return r(s2a(Base64_decode(B)),j);case"binary":return r(s2a(B),j);case"buffer":case"array":return r(B,j)}throw"Unsupported type "+j.type}function r(B,j){if(!B)return B;var M=j||{},U=M.dense?[]:{},K="Sheet1",Le="",ve=0,Ae={},ye=[],V=[],be={s:{r:0,c:0},e:{r:0,c:0}},Ne=M.sheetRows||0;if(B[2]==0&&(B[3]==8||B[3]==9)&&B.length>=16&&B[14]==5&&B[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(B[2]==2)M.Enum=T,e(B,function(Ce,pt,pe){switch(pe){case 0:M.vers=Ce,Ce>=4096&&(M.qpro=!0);break;case 6:be=Ce;break;case 204:Ce&&(Le=Ce);break;case 222:Le=Ce;break;case 15:case 51:M.qpro||(Ce[1].v=Ce[1].v.slice(1));case 13:case 14:case 16:pe==14&&(Ce[2]&112)==112&&(Ce[2]&15)>1&&(Ce[2]&15)<15&&(Ce[1].z=M.dateNF||table_fmt[14],M.cellDates&&(Ce[1].t="d",Ce[1].v=numdate(Ce[1].v))),M.qpro&&Ce[3]>ve&&(U["!ref"]=encode_range(be),Ae[K]=U,ye.push(K),U=M.dense?[]:{},be={s:{r:0,c:0},e:{r:0,c:0}},ve=Ce[3],K=Le||"Sheet"+(ve+1),Le="");var ze=M.dense?(U[Ce[0].r]||[])[Ce[0].c]:U[encode_cell(Ce[0])];if(ze){ze.t=Ce[1].t,ze.v=Ce[1].v,Ce[1].z!=null&&(ze.z=Ce[1].z),Ce[1].f!=null&&(ze.f=Ce[1].f);break}M.dense?(U[Ce[0].r]||(U[Ce[0].r]=[]),U[Ce[0].r][Ce[0].c]=Ce[1]):U[encode_cell(Ce[0])]=Ce[1];break}},M);else if(B[2]==26||B[2]==14)M.Enum=J,B[2]==14&&(M.qpro=!0,B.l=0),e(B,function(Ce,pt,pe){switch(pe){case 204:K=Ce;break;case 22:Ce[1].v=Ce[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ce[3]>ve&&(U["!ref"]=encode_range(be),Ae[K]=U,ye.push(K),U=M.dense?[]:{},be={s:{r:0,c:0},e:{r:0,c:0}},ve=Ce[3],K="Sheet"+(ve+1)),Ne>0&&Ce[0].r>=Ne)break;M.dense?(U[Ce[0].r]||(U[Ce[0].r]=[]),U[Ce[0].r][Ce[0].c]=Ce[1]):U[encode_cell(Ce[0])]=Ce[1],be.e.c<Ce[0].c&&(be.e.c=Ce[0].c),be.e.r<Ce[0].r&&(be.e.r=Ce[0].r);break;case 27:Ce[14e3]&&(V[Ce[14e3][0]]=Ce[14e3][1]);break;case 1537:V[Ce[0]]=Ce[1],Ce[0]==ve&&(K=Ce[1]);break}},M);else throw new Error("Unrecognized LOTUS BOF "+B[2]);if(U["!ref"]=encode_range(be),Ae[Le||K]=U,ye.push(Le||K),!V.length)return{SheetNames:ye,Sheets:Ae};for(var H={},Te=[],se=0;se<V.length;++se)Ae[ye[se]]?(Te.push(V[se]||ye[se]),H[V[se]]=Ae[V[se]]||Ae[ye[se]]):(Te.push(V[se]),H[V[se]]={"!ref":"A1"});return{SheetNames:Te,Sheets:H}}function n(B,j){var M=j||{};if(+M.codepage>=0&&set_cp(+M.codepage),M.type=="string")throw new Error("Cannot write WK1 to JS string");var U=buf_array(),K=safe_decode_range(B["!ref"]),Le=Array.isArray(B),ve=[];write_biff_rec(U,0,l(1030)),write_biff_rec(U,6,x(K));for(var Ae=Math.min(K.e.r,8191),ye=K.s.r;ye<=Ae;++ye)for(var V=encode_row(ye),be=K.s.c;be<=K.e.c;++be){ye===K.s.r&&(ve[be]=encode_col(be));var Ne=ve[be]+V,H=Le?(B[ye]||[])[be]:B[Ne];if(!(!H||H.t=="z"))if(H.t=="n")(H.v|0)==H.v&&H.v>=-32768&&H.v<=32767?write_biff_rec(U,13,_(ye,be,H.v)):write_biff_rec(U,14,b(ye,be,H.v));else{var Te=format_cell(H);write_biff_rec(U,15,g(ye,be,Te.slice(0,239)))}}return write_biff_rec(U,1),U.end()}function a(B,j){var M=j||{};if(+M.codepage>=0&&set_cp(+M.codepage),M.type=="string")throw new Error("Cannot write WK3 to JS string");var U=buf_array();write_biff_rec(U,0,c(B));for(var K=0,Le=0;K<B.SheetNames.length;++K)(B.Sheets[B.SheetNames[K]]||{})["!ref"]&&write_biff_rec(U,27,re(B.SheetNames[K],Le++));var ve=0;for(K=0;K<B.SheetNames.length;++K){var Ae=B.Sheets[B.SheetNames[K]];if(!(!Ae||!Ae["!ref"])){for(var ye=safe_decode_range(Ae["!ref"]),V=Array.isArray(Ae),be=[],Ne=Math.min(ye.e.r,8191),H=ye.s.r;H<=Ne;++H)for(var Te=encode_row(H),se=ye.s.c;se<=ye.e.c;++se){H===ye.s.r&&(be[se]=encode_col(se));var Ce=be[se]+Te,pt=V?(Ae[H]||[])[se]:Ae[Ce];if(!(!pt||pt.t=="z"))if(pt.t=="n")write_biff_rec(U,23,le(H,se,ve,pt.v));else{var pe=format_cell(pt);write_biff_rec(U,22,D(H,se,ve,pe.slice(0,239)))}}++ve}}return write_biff_rec(U,1),U.end()}function l(B){var j=new_buf(2);return j.write_shift(2,B),j}function c(B){var j=new_buf(26);j.write_shift(2,4096),j.write_shift(2,4),j.write_shift(4,0);for(var M=0,U=0,K=0,Le=0;Le<B.SheetNames.length;++Le){var ve=B.SheetNames[Le],Ae=B.Sheets[ve];if(!(!Ae||!Ae["!ref"])){++K;var ye=decode_range(Ae["!ref"]);M<ye.e.r&&(M=ye.e.r),U<ye.e.c&&(U=ye.e.c)}}return M>8191&&(M=8191),j.write_shift(2,M),j.write_shift(1,K),j.write_shift(1,U),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(1,1),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(4,0),j}function d(B,j,M){var U={s:{c:0,r:0},e:{c:0,r:0}};return j==8&&M.qpro?(U.s.c=B.read_shift(1),B.l++,U.s.r=B.read_shift(2),U.e.c=B.read_shift(1),B.l++,U.e.r=B.read_shift(2),U):(U.s.c=B.read_shift(2),U.s.r=B.read_shift(2),j==12&&M.qpro&&(B.l+=2),U.e.c=B.read_shift(2),U.e.r=B.read_shift(2),j==12&&M.qpro&&(B.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function x(B){var j=new_buf(8);return j.write_shift(2,B.s.c),j.write_shift(2,B.s.r),j.write_shift(2,B.e.c),j.write_shift(2,B.e.r),j}function f(B,j,M){var U=[{c:0,r:0},{t:"n",v:0},0,0];return M.qpro&&M.vers!=20768?(U[0].c=B.read_shift(1),U[3]=B.read_shift(1),U[0].r=B.read_shift(2),B.l+=2):(U[2]=B.read_shift(1),U[0].c=B.read_shift(2),U[0].r=B.read_shift(2)),U}function h(B,j,M){var U=B.l+j,K=f(B,j,M);if(K[1].t="s",M.vers==20768){B.l++;var Le=B.read_shift(1);return K[1].v=B.read_shift(Le,"utf8"),K}return M.qpro&&B.l++,K[1].v=B.read_shift(U-B.l,"cstr"),K}function g(B,j,M){var U=new_buf(7+M.length);U.write_shift(1,255),U.write_shift(2,j),U.write_shift(2,B),U.write_shift(1,39);for(var K=0;K<U.length;++K){var Le=M.charCodeAt(K);U.write_shift(1,Le>=128?95:Le)}return U.write_shift(1,0),U}function y(B,j,M){var U=f(B,j,M);return U[1].v=B.read_shift(2,"i"),U}function _(B,j,M){var U=new_buf(7);return U.write_shift(1,255),U.write_shift(2,j),U.write_shift(2,B),U.write_shift(2,M,"i"),U}function E(B,j,M){var U=f(B,j,M);return U[1].v=B.read_shift(8,"f"),U}function b(B,j,M){var U=new_buf(13);return U.write_shift(1,255),U.write_shift(2,j),U.write_shift(2,B),U.write_shift(8,M,"f"),U}function v(B,j,M){var U=B.l+j,K=f(B,j,M);if(K[1].v=B.read_shift(8,"f"),M.qpro)B.l=U;else{var Le=B.read_shift(2);L(B.slice(B.l,B.l+Le),K),B.l+=Le}return K}function R(B,j,M){var U=j&32768;return j&=-32769,j=(U?B:0)+(j>=8192?j-16384:j),(U?"":"$")+(M?encode_col(j):encode_row(j))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function L(B,j){prep_blob(B,0);for(var M=[],U=0,K="",Le="",ve="",Ae="";B.l<B.length;){var ye=B[B.l++];switch(ye){case 0:M.push(B.read_shift(8,"f"));break;case 1:Le=R(j[0].c,B.read_shift(2),!0),K=R(j[0].r,B.read_shift(2),!1),M.push(Le+K);break;case 2:{var V=R(j[0].c,B.read_shift(2),!0),be=R(j[0].r,B.read_shift(2),!1);Le=R(j[0].c,B.read_shift(2),!0),K=R(j[0].r,B.read_shift(2),!1),M.push(V+be+":"+Le+K)}break;case 3:if(B.l<B.length){console.error("WK1 premature formula end");return}break;case 4:M.push("("+M.pop()+")");break;case 5:M.push(B.read_shift(2));break;case 6:{for(var Ne="";ye=B[B.l++];)Ne+=String.fromCharCode(ye);M.push('"'+Ne.replace(/"/g,'""')+'"')}break;case 8:M.push("-"+M.pop());break;case 23:M.push("+"+M.pop());break;case 22:M.push("NOT("+M.pop()+")");break;case 20:case 21:Ae=M.pop(),ve=M.pop(),M.push(["AND","OR"][ye-20]+"("+ve+","+Ae+")");break;default:if(ye<32&&C[ye])Ae=M.pop(),ve=M.pop(),M.push(ve+C[ye]+Ae);else if(A[ye]){if(U=A[ye][1],U==69&&(U=B[B.l++]),U>M.length){console.error("WK1 bad formula parse 0x"+ye.toString(16)+":|"+M.join("|")+"|");return}var H=M.slice(-U);M.length-=U,M.push(A[ye][0]+"("+H.join(",")+")")}else return ye<=7?console.error("WK1 invalid opcode "+ye.toString(16)):ye<=24?console.error("WK1 unsupported op "+ye.toString(16)):ye<=30?console.error("WK1 invalid opcode "+ye.toString(16)):ye<=115?console.error("WK1 unsupported function opcode "+ye.toString(16)):console.error("WK1 unrecognized opcode "+ye.toString(16))}}M.length==1?j[1].f=""+M[0]:console.error("WK1 bad formula parse |"+M.join("|")+"|")}function I(B){var j=[{c:0,r:0},{t:"n",v:0},0];return j[0].r=B.read_shift(2),j[3]=B[B.l++],j[0].c=B[B.l++],j}function ae(B,j){var M=I(B);return M[1].t="s",M[1].v=B.read_shift(j-4,"cstr"),M}function D(B,j,M,U){var K=new_buf(6+U.length);K.write_shift(2,B),K.write_shift(1,M),K.write_shift(1,j),K.write_shift(1,39);for(var Le=0;Le<U.length;++Le){var ve=U.charCodeAt(Le);K.write_shift(1,ve>=128?95:ve)}return K.write_shift(1,0),K}function ee(B,j){var M=I(B);M[1].v=B.read_shift(2);var U=M[1].v>>1;if(M[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return M[1].v=U,M}function Y(B,j){var M=I(B),U=B.read_shift(4),K=B.read_shift(4),Le=B.read_shift(2);if(Le==65535)return U===0&&K===3221225472?(M[1].t="e",M[1].v=15):U===0&&K===3489660928?(M[1].t="e",M[1].v=42):M[1].v=0,M;var ve=Le&32768;return Le=(Le&32767)-16446,M[1].v=(1-ve*2)*(K*Math.pow(2,Le+32)+U*Math.pow(2,Le)),M}function le(B,j,M,U){var K=new_buf(14);if(K.write_shift(2,B),K.write_shift(1,M),K.write_shift(1,j),U==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var Le=0,ve=0,Ae=0,ye=0;return U<0&&(Le=1,U=-U),ve=Math.log2(U)|0,U/=Math.pow(2,ve-31),ye=U>>>0,(ye&2147483648)==0&&(U/=2,++ve,ye=U>>>0),U-=ye,ye|=2147483648,ye>>>=0,U*=Math.pow(2,32),Ae=U>>>0,K.write_shift(4,Ae),K.write_shift(4,ye),ve+=16383+(Le?32768:0),K.write_shift(2,ve),K}function te(B,j){var M=Y(B);return B.l+=j-14,M}function oe(B,j){var M=I(B),U=B.read_shift(4);return M[1].v=U>>6,M}function Be(B,j){var M=I(B),U=B.read_shift(8,"f");return M[1].v=U,M}function Pe(B,j){var M=Be(B);return B.l+=j-10,M}function De(B,j){return B[B.l+j-1]==0?B.read_shift(j,"cstr"):""}function X(B,j){var M=B[B.l++];M>j-1&&(M=j-1);for(var U="";U.length<M;)U+=String.fromCharCode(B[B.l++]);return U}function Se(B,j,M){if(!(!M.qpro||j<21)){var U=B.read_shift(1);B.l+=17,B.l+=1,B.l+=2;var K=B.read_shift(j-21,"cstr");return[U,K]}}function z(B,j){for(var M={},U=B.l+j;B.l<U;){var K=B.read_shift(2);if(K==14e3){for(M[K]=[0,""],M[K][0]=B.read_shift(2);B[B.l];)M[K][1]+=String.fromCharCode(B[B.l]),B.l++;B.l++}}return M}function re(B,j){var M=new_buf(5+B.length);M.write_shift(2,14e3),M.write_shift(2,j);for(var U=0;U<B.length;++U){var K=B.charCodeAt(U);M[M.l++]=K>127?95:K}return M[M.l++]=0,M}var T={0:{n:"BOF",f:parseuint16},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:d},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:y},14:{n:"NUMBER",f:E},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:De},222:{n:"SHEETNAMELP",f:X},65535:{n:""}},J={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ae},23:{n:"NUMBER17",f:Y},24:{n:"NUMBER18",f:ee},25:{n:"FORMULA19",f:te},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:z},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:oe},38:{n:"??"},39:{n:"NUMBER27",f:Be},40:{n:"FORMULA28",f:Pe},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:De},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Se},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}})(),straywsregex=/^\s|\s$|[\t\n\r]/;function write_sst_xml(e,t){if(!t.bookSST)return"";var r=[XML_HEADER];r[r.length]=writextag("sst",null,{xmlns:XMLNS_main[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],l="<si>";a.r?l+=a.r:(l+="<t",a.t||(a.t=""),a.t.match(straywsregex)&&(l+=' xml:space="preserve"'),l+=">"+escapexml(a.t)+"</t>"),l+="</si>",r[r.length]=l}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function parse_BrtBeginSst(e){return[e.read_shift(4),e.read_shift(4)]}function write_BrtBeginSst(e,t){return t||(t=new_buf(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var write_BrtSSTItem=write_RichStr;function write_sst_bin(e){var t=buf_array();write_record(t,159,write_BrtBeginSst(e));for(var r=0;r<e.length;++r)write_record(t,19,write_BrtSSTItem(e[r]));return write_record(t,160),t.end()}function _JS2ANSI(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function crypto_CreatePasswordVerifier_Method1(e){var t=0,r,n=_JS2ANSI(e),a=n.length+1,l,c,d,x,f;for(r=new_raw_buf(a),r[0]=n.length,l=1;l!=a;++l)r[l]=n[l-1];for(l=a-1;l>=0;--l)c=r[l],d=(t&16384)===0?0:1,x=t<<1&32767,f=d|x,t=f^c;return t^52811}var RTF=(function(){function e(a,l){switch(l.type){case"base64":return t(Base64_decode(a),l);case"binary":return t(a,l);case"buffer":return t(has_buf&&Buffer.isBuffer(a)?a.toString("binary"):a2s(a),l);case"array":return t(cc2str(a),l)}throw new Error("Unrecognized type "+l.type)}function t(a,l){var c=l||{},d=c.dense?[]:{},x=a.match(/\\trowd.*?\\row\b/g);if(!x.length)throw new Error("RTF missing table");var f={s:{c:0,r:0},e:{c:0,r:x.length-1}};return x.forEach(function(h,g){Array.isArray(d)&&(d[g]=[]);for(var y=/\\\w+\b/g,_=0,E,b=-1;E=y.exec(h);){switch(E[0]){case"\\cell":var v=h.slice(_,y.lastIndex-E[0].length);if(v[0]==" "&&(v=v.slice(1)),++b,v.length){var R={v,t:"s"};Array.isArray(d)?d[g][b]=R:d[encode_cell({r:g,c:b})]=R}break}_=y.lastIndex}b>f.e.c&&(f.e.c=b)}),d["!ref"]=encode_range(f),d}function r(a,l){return sheet_to_workbook(e(a,l),l)}function n(a){for(var l=["{\\rtf1\\ansi"],c=safe_decode_range(a["!ref"]),d,x=Array.isArray(a),f=c.s.r;f<=c.e.r;++f){l.push("\\trowd\\trautofit1");for(var h=c.s.c;h<=c.e.c;++h)l.push("\\cellx"+(h+1));for(l.push("\\pard\\intbl"),h=c.s.c;h<=c.e.c;++h){var g=encode_cell({r:f,c:h});d=x?(a[f]||[])[h]:a[g],!(!d||d.v==null&&(!d.f||d.F))&&(l.push(" "+(d.w||(format_cell(d),d.w))),l.push("\\cell"))}l.push("\\pard\\intbl\\row")}return l.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function rgb2Hex(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var DEF_MDW=6,MDW=DEF_MDW;function width2px(e){return Math.floor((e+Math.round(128/MDW)/256)*MDW)}function px2char(e){return Math.floor((e-5)/MDW*100+.5)/100}function char2width(e){return Math.round((e*MDW+5)/MDW*256)/256}function process_col(e){e.width?(e.wpx=width2px(e.width),e.wch=px2char(e.wpx),e.MDW=MDW):e.wpx?(e.wch=px2char(e.wpx),e.width=char2width(e.wch),e.MDW=MDW):typeof e.wch=="number"&&(e.width=char2width(e.wch),e.wpx=width2px(e.width),e.MDW=MDW),e.customWidth&&delete e.customWidth}var DEF_PPI=96,PPI=DEF_PPI;function px2pt(e){return e*96/PPI}function pt2px(e){return e*PPI/96}function write_numFmts(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=writextag("numFmt",null,{numFmtId:n,formatCode:escapexml(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=writextag("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function write_cellXfs(e){var t=[];return t[t.length]=writextag("cellXfs",null),e.forEach(function(r){t[t.length]=writextag("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=writextag("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function write_sty_xml(e,t){var r=[XML_HEADER,writextag("styleSheet",null,{xmlns:XMLNS_main[0],"xmlns:vt":XMLNS.vt})],n;return e.SSF&&(n=write_numFmts(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=write_cellXfs(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function parse_BrtFmt(e,t){var r=e.read_shift(2),n=parse_XLWideString(e);return[r,n]}function write_BrtFmt(e,t,r){r||(r=new_buf(6+4*t.length)),r.write_shift(2,e),write_XLWideString(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function parse_BrtFont(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=parse_FontFlags(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var l=e.read_shift(2);switch(l===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var c=e.read_shift(1);c!=0&&(n.underline=c);var d=e.read_shift(1);d>0&&(n.family=d);var x=e.read_shift(1);switch(x>0&&(n.charset=x),e.l++,n.color=parse_BrtColor(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=parse_XLWideString(e),n}function write_BrtFont(e,t){t||(t=new_buf(153)),t.write_shift(2,e.sz*20),write_FontFlags(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),write_BrtColor(e.color,t);var n=0;return n=2,t.write_shift(1,n),write_XLWideString(e.name,t),t.length>t.l?t.slice(0,t.l):t}var XLSBFillPTNames=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rev_XLSBFillPTNames,parse_BrtFill=parsenoop;function write_BrtFill(e,t){t||(t=new_buf(84)),rev_XLSBFillPTNames||(rev_XLSBFillPTNames=evert(XLSBFillPTNames));var r=rev_XLSBFillPTNames[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(write_BrtColor({auto:1},t),write_BrtColor({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function parse_BrtXF(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function write_BrtXF(e,t,r){r||(r=new_buf(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function write_Blxf(e,t){return t||(t=new_buf(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var parse_BrtBorder=parsenoop;function write_BrtBorder(e,t){return t||(t=new_buf(51)),t.write_shift(1,0),write_Blxf(null,t),write_Blxf(null,t),write_Blxf(null,t),write_Blxf(null,t),write_Blxf(null,t),t.length>t.l?t.slice(0,t.l):t}function write_BrtStyle(e,t){return t||(t=new_buf(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),write_XLNullableWideString(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function write_BrtBeginTableStyles(e,t,r){var n=new_buf(2052);return n.write_shift(4,e),write_XLNullableWideString(t,n),write_XLNullableWideString(r,n),n.length>n.l?n.slice(0,n.l):n}function write_FMTS_bin(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(write_record(e,615,write_UInt32LE(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&write_record(e,44,write_BrtFmt(a,t[a]))}),write_record(e,616))}}function write_FONTS_bin(e){var t=1;write_record(e,611,write_UInt32LE(t)),write_record(e,43,write_BrtFont({sz:12,color:{theme:1},name:"Calibri",family:2})),write_record(e,612)}function write_FILLS_bin(e){var t=2;write_record(e,603,write_UInt32LE(t)),write_record(e,45,write_BrtFill({patternType:"none"})),write_record(e,45,write_BrtFill({patternType:"gray125"})),write_record(e,604)}function write_BORDERS_bin(e){var t=1;write_record(e,613,write_UInt32LE(t)),write_record(e,46,write_BrtBorder()),write_record(e,614)}function write_CELLSTYLEXFS_bin(e){var t=1;write_record(e,626,write_UInt32LE(t)),write_record(e,47,write_BrtXF({numFmtId:0},65535)),write_record(e,627)}function write_CELLXFS_bin(e,t){write_record(e,617,write_UInt32LE(t.length)),t.forEach(function(r){write_record(e,47,write_BrtXF(r,0))}),write_record(e,618)}function write_STYLES_bin(e){var t=1;write_record(e,619,write_UInt32LE(t)),write_record(e,48,write_BrtStyle({xfId:0,name:"Normal"})),write_record(e,620)}function write_DXFS_bin(e){var t=0;write_record(e,505,write_UInt32LE(t)),write_record(e,506)}function write_TABLESTYLES_bin(e){var t=0;write_record(e,508,write_BrtBeginTableStyles(t,"TableStyleMedium9","PivotStyleMedium4")),write_record(e,509)}function write_sty_bin(e,t){var r=buf_array();return write_record(r,278),write_FMTS_bin(r,e.SSF),write_FONTS_bin(r),write_FILLS_bin(r),write_BORDERS_bin(r),write_CELLSTYLEXFS_bin(r),write_CELLXFS_bin(r,t.cellXfs),write_STYLES_bin(r),write_DXFS_bin(r),write_TABLESTYLES_bin(r),write_record(r,279),r.end()}function write_theme(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[XML_HEADER];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function parse_BrtMdtinfo(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:parse_XLWideString(e)}}function write_BrtMdtinfo(e){var t=new_buf(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),write_XLWideString(e.name,t),t.slice(0,t.l)}function parse_BrtMdb(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function write_BrtMdb(e){var t=new_buf(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function write_BrtBeginEsfmd(e,t){var r=new_buf(8+2*t.length);return r.write_shift(4,e),write_XLWideString(t,r),r.slice(0,r.l)}function parse_BrtBeginEsmdb(e){return e.l+=4,e.read_shift(4)!=0}function write_BrtBeginEsmdb(e,t){var r=new_buf(8);return r.write_shift(4,e),r.write_shift(4,1),r}function write_xlmeta_bin(){var e=buf_array();return write_record(e,332),write_record(e,334,write_UInt32LE(1)),write_record(e,335,write_BrtMdtinfo({name:"XLDAPR",version:12e4,flags:3496657072})),write_record(e,336),write_record(e,339,write_BrtBeginEsfmd(1,"XLDAPR")),write_record(e,52),write_record(e,35,write_UInt32LE(514)),write_record(e,4096,write_UInt32LE(0)),write_record(e,4097,writeuint16(1)),write_record(e,36),write_record(e,53),write_record(e,340),write_record(e,337,write_BrtBeginEsmdb(1)),write_record(e,51,write_BrtMdb([[1,0]])),write_record(e,338),write_record(e,333),e.end()}function write_xlmeta_xml(){var e=[XML_HEADER];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function parse_BrtCalcChainItem$(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=encode_cell(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var _shapeid=1024;function write_comments_vml(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[writextag("xml",null,{"xmlns:v":XLMLNS.v,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:mv":XLMLNS.mv}).replace(/\/>/,">"),writextag("o:shapelayout",writextag("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),writextag("v:shapetype",[writextag("v:stroke",null,{joinstyle:"miter"}),writextag("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];_shapeid<e*1e3;)_shapeid+=1e3;return t.forEach(function(l){var c=decode_cell(l[0]),d={color2:"#BEFF82",type:"gradient"};d.type=="gradient"&&(d.angle="-180");var x=d.type=="gradient"?writextag("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,f=writextag("v:fill",x,d),h={on:"t",obscured:"t"};++_shapeid,a=a.concat(["<v:shape"+wxt_helper({id:"_x0000_s"+_shapeid,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(l[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",f,writextag("v:shadow",null,h),writextag("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",writetag("x:Anchor",[c.c+1,0,c.r+1,0,c.c+3,20,c.r+5,20].join(",")),writetag("x:AutoFill","False"),writetag("x:Row",String(c.r)),writetag("x:Column",String(c.c)),l[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function write_comments_xml(e){var t=[XML_HEADER,writextag("comments",null,{xmlns:XMLNS_main[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var l=escapexml(a.a);r.indexOf(l)==-1&&(r.push(l),t.push("<author>"+l+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,l=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(x){x.a&&(a=r.indexOf(escapexml(x.a))),l.push(x.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),l.length<=1)t.push(writetag("t",escapexml(l[0]||"")));else{for(var c=`Comment:
    `+l[0]+`
`,d=1;d<l.length;++d)c+=`Reply:
    `+l[d]+`
`;t.push(writetag("t",escapexml(c)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function write_tcmnt_xml(e,t,r){var n=[XML_HEADER,writextag("ThreadedComments",null,{xmlns:XMLNS.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var l="";(a[1]||[]).forEach(function(c,d){if(!c.T){delete c.ID;return}c.a&&t.indexOf(c.a)==-1&&t.push(c.a);var x={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};d==0?l=x.id:x.parentId=l,c.ID=x.id,c.a&&(x.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(c.a)).slice(-12)+"}"),n.push(writextag("threadedComment",writetag("text",c.t||""),x))})}),n.push("</ThreadedComments>"),n.join("")}function write_people_xml(e){var t=[XML_HEADER,writextag("personList",null,{xmlns:XMLNS.TCMNT,"xmlns:x":XMLNS_main[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(writextag("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function parse_BrtBeginComment(e){var t={};t.iauthor=e.read_shift(4);var r=parse_UncheckedRfX(e);return t.rfx=r.s,t.ref=encode_cell(r.s),e.l+=16,t}function write_BrtBeginComment(e,t){return t==null&&(t=new_buf(36)),t.write_shift(4,e[1].iauthor),write_UncheckedRfX(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var parse_BrtCommentAuthor=parse_XLWideString;function write_BrtCommentAuthor(e){return write_XLWideString(e.slice(0,54))}function write_comments_bin(e){var t=buf_array(),r=[];return write_record(t,628),write_record(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),write_record(t,632,write_BrtCommentAuthor(a.a)))})}),write_record(t,631),write_record(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var l={s:decode_cell(n[0]),e:decode_cell(n[0])};write_record(t,635,write_BrtBeginComment([l,a])),a.t&&a.t.length>0&&write_record(t,637,write_BrtCommentText(a)),write_record(t,636),delete a.iauthor})}),write_record(t,634),write_record(t,629),t.end()}function fill_vba_xls(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&CFB.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var VBAFMTS=["xlsb","xlsm","xlam","biff8","xla"],rc_to_a1=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,l,c){var d=!1,x=!1;l.length==0?x=!0:l.charAt(0)=="["&&(x=!0,l=l.slice(1,-1)),c.length==0?d=!0:c.charAt(0)=="["&&(d=!0,c=c.slice(1,-1));var f=l.length>0?parseInt(l,10)|0:0,h=c.length>0?parseInt(c,10)|0:0;return d?h+=t.c:--h,x?f+=t.r:--f,a+(d?"":"$")+encode_col(h)+(x?"":"$")+encode_row(f)}return function(a,l){return t=l,a.replace(e,r)}})(),crefregex=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a1_to_rc=(function(){return function(t,r){return t.replace(crefregex,function(n,a,l,c,d,x){var f=decode_col(c)-(l?0:r.c),h=decode_row(x)-(d?0:r.r),g=h==0?"":d?h+1:"["+h+"]",y=f==0?"":l?f+1:"["+f+"]";return a+"R"+g+"C"+y})}})();function shift_formula_str(e,t){return e.replace(crefregex,function(r,n,a,l,c,d){return n+(a=="$"?a+l:encode_col(decode_col(l)+t.c))+(c=="$"?c+d:encode_row(decode_row(d)+t.r))})}function fuzzyfmla(e){return e.length!=1}function parseread1(e){e.l+=1}function parse_ColRelU(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function parse_RgceArea(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return parse_RgceArea_BIFF2(e);r.biff==12&&(n=4)}var a=e.read_shift(n),l=e.read_shift(n),c=parse_ColRelU(e),d=parse_ColRelU(e);return{s:{r:a,c:c[0],cRel:c[1],rRel:c[2]},e:{r:l,c:d[0],cRel:d[1],rRel:d[2]}}}function parse_RgceArea_BIFF2(e){var t=parse_ColRelU(e),r=parse_ColRelU(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function parse_RgceAreaRel(e,t,r){if(r.biff<8)return parse_RgceArea_BIFF2(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),l=parse_ColRelU(e),c=parse_ColRelU(e);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:a,c:c[0],cRel:c[1],rRel:c[2]}}}function parse_RgceLoc(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return parse_RgceLoc_BIFF2(e);var n=e.read_shift(r&&r.biff==12?4:2),a=parse_ColRelU(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function parse_RgceLoc_BIFF2(e){var t=parse_ColRelU(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function parse_RgceElfLoc(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function parse_RgceLocRel(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return parse_RgceLocRel_BIFF2(e);var a=e.read_shift(n>=12?4:2),l=e.read_shift(2),c=(l&16384)>>14,d=(l&32768)>>15;if(l&=16383,d==1)for(;a>524287;)a-=1048576;if(c==1)for(;l>8191;)l=l-16384;return{r:a,c:l,cRel:c,rRel:d}}function parse_RgceLocRel_BIFF2(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function parse_PtgArea(e,t,r){var n=(e[e.l++]&96)>>5,a=parse_RgceArea(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function parse_PtgArea3d(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),l=8;if(r)switch(r.biff){case 5:e.l+=12,l=6;break;case 12:l=12;break}var c=parse_RgceArea(e,l,r);return[n,a,c]}function parse_PtgAreaErr(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function parse_PtgAreaErr3d(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),l=8;if(r)switch(r.biff){case 5:e.l+=12,l=6;break;case 12:l=12;break}return e.l+=l,[n,a]}function parse_PtgAreaN(e,t,r){var n=(e[e.l++]&96)>>5,a=parse_RgceAreaRel(e,t-1,r);return[n,a]}function parse_PtgArray(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function parse_PtgAttrBaxcel(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function parse_PtgAttrChoose(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],l=0;l<=n;++l)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function parse_PtgAttrGoto(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function parse_PtgAttrIf(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function parse_PtgAttrIfError(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function parse_PtgAttrSemi(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function parse_PtgAttrSpaceType(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function parse_PtgAttrSpace(e){return e.read_shift(2),parse_PtgAttrSpaceType(e)}function parse_PtgAttrSpaceSemi(e){return e.read_shift(2),parse_PtgAttrSpaceType(e)}function parse_PtgRef(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=parse_RgceLoc(e,0,r);return[n,a]}function parse_PtgRefN(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=parse_RgceLocRel(e,0,r);return[n,a]}function parse_PtgRef3d(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var l=parse_RgceLoc(e,0,r);return[n,a,l]}function parse_PtgFunc(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[FtabArgc[a],Ftab[a],n]}function parse_PtgFuncVar(e,t,r){var n=e[e.l++],a=e.read_shift(1),l=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:parsetab(e);return[a,(l[0]===0?Ftab:Cetab)[l[1]]]}function parsetab(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function parse_PtgAttrSum(e,t,r){e.l+=r&&r.biff==2?3:4}function parse_PtgExp(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function parse_PtgErr(e){return e.l++,BErr[e.read_shift(1)]}function parse_PtgInt(e){return e.l++,e.read_shift(2)}function parse_PtgBool(e){return e.l++,e.read_shift(1)!==0}function parse_PtgNum(e){return e.l++,parse_Xnum(e)}function parse_PtgStr(e,t,r){return e.l++,parse_ShortXLUnicodeString(e,t-1,r)}function parse_SerAr(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=parsebool(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=BErr[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=parse_Xnum(e);break;case 2:r[1]=parse_XLUnicodeString2(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function parse_PtgExtraMem(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],l=0;l!=n;++l)a.push((r.biff==12?parse_UncheckedRfX:parse_Ref8U)(e));return a}function parse_PtgExtraArray(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var l=0,c=[];l!=n&&(c[l]=[]);++l)for(var d=0;d!=a;++d)c[l][d]=parse_SerAr(e,r.biff);return c}function parse_PtgName(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,l=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,l]}function parse_PtgNameX(e,t,r){if(r.biff==5)return parse_PtgNameX_BIFF5(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),l=e.read_shift(4);return[n,a,l]}function parse_PtgNameX_BIFF5(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function parse_PtgMemArea(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function parse_PtgMemFunc(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function parse_PtgRefErr(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function parse_PtgRefErr3d(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),l=4;if(r)switch(r.biff){case 5:l=15;break;case 12:l=6;break}return e.l+=l,[n,a]}var parse_PtgMemErr=parsenoop,parse_PtgMemNoMem=parsenoop,parse_PtgTbl=parsenoop;function parse_PtgElfLoc(e,t,r){return e.l+=2,[parse_RgceElfLoc(e)]}function parse_PtgElfNoop(e){return e.l+=6,[]}var parse_PtgElfCol=parse_PtgElfLoc,parse_PtgElfColS=parse_PtgElfNoop,parse_PtgElfColSV=parse_PtgElfNoop,parse_PtgElfColV=parse_PtgElfLoc;function parse_PtgElfLel(e){return e.l+=2,[parseuint16(e),e.read_shift(2)&1]}var parse_PtgElfRadical=parse_PtgElfLoc,parse_PtgElfRadicalLel=parse_PtgElfLel,parse_PtgElfRadicalS=parse_PtgElfNoop,parse_PtgElfRw=parse_PtgElfLoc,parse_PtgElfRwV=parse_PtgElfLoc,PtgListRT=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function parse_PtgList(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),l=e.read_shift(2),c=PtgListRT[r>>2&31];return{ixti:t,coltype:r&3,rt:c,idx:n,c:a,C:l}}function parse_PtgSxName(e){return e.l+=2,[e.read_shift(4)]}function parse_PtgSheet(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function parse_PtgEndSheet(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function parse_PtgMemAreaN(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function parse_PtgMemNoMemN(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function parse_PtgAttrNoop(e){return e.l+=4,[0,0]}var PtgTypes={1:{n:"PtgExp",f:parse_PtgExp},2:{n:"PtgTbl",f:parse_PtgTbl},3:{n:"PtgAdd",f:parseread1},4:{n:"PtgSub",f:parseread1},5:{n:"PtgMul",f:parseread1},6:{n:"PtgDiv",f:parseread1},7:{n:"PtgPower",f:parseread1},8:{n:"PtgConcat",f:parseread1},9:{n:"PtgLt",f:parseread1},10:{n:"PtgLe",f:parseread1},11:{n:"PtgEq",f:parseread1},12:{n:"PtgGe",f:parseread1},13:{n:"PtgGt",f:parseread1},14:{n:"PtgNe",f:parseread1},15:{n:"PtgIsect",f:parseread1},16:{n:"PtgUnion",f:parseread1},17:{n:"PtgRange",f:parseread1},18:{n:"PtgUplus",f:parseread1},19:{n:"PtgUminus",f:parseread1},20:{n:"PtgPercent",f:parseread1},21:{n:"PtgParen",f:parseread1},22:{n:"PtgMissArg",f:parseread1},23:{n:"PtgStr",f:parse_PtgStr},26:{n:"PtgSheet",f:parse_PtgSheet},27:{n:"PtgEndSheet",f:parse_PtgEndSheet},28:{n:"PtgErr",f:parse_PtgErr},29:{n:"PtgBool",f:parse_PtgBool},30:{n:"PtgInt",f:parse_PtgInt},31:{n:"PtgNum",f:parse_PtgNum},32:{n:"PtgArray",f:parse_PtgArray},33:{n:"PtgFunc",f:parse_PtgFunc},34:{n:"PtgFuncVar",f:parse_PtgFuncVar},35:{n:"PtgName",f:parse_PtgName},36:{n:"PtgRef",f:parse_PtgRef},37:{n:"PtgArea",f:parse_PtgArea},38:{n:"PtgMemArea",f:parse_PtgMemArea},39:{n:"PtgMemErr",f:parse_PtgMemErr},40:{n:"PtgMemNoMem",f:parse_PtgMemNoMem},41:{n:"PtgMemFunc",f:parse_PtgMemFunc},42:{n:"PtgRefErr",f:parse_PtgRefErr},43:{n:"PtgAreaErr",f:parse_PtgAreaErr},44:{n:"PtgRefN",f:parse_PtgRefN},45:{n:"PtgAreaN",f:parse_PtgAreaN},46:{n:"PtgMemAreaN",f:parse_PtgMemAreaN},47:{n:"PtgMemNoMemN",f:parse_PtgMemNoMemN},57:{n:"PtgNameX",f:parse_PtgNameX},58:{n:"PtgRef3d",f:parse_PtgRef3d},59:{n:"PtgArea3d",f:parse_PtgArea3d},60:{n:"PtgRefErr3d",f:parse_PtgRefErr3d},61:{n:"PtgAreaErr3d",f:parse_PtgAreaErr3d},255:{}},PtgDupes={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ptg18={1:{n:"PtgElfLel",f:parse_PtgElfLel},2:{n:"PtgElfRw",f:parse_PtgElfRw},3:{n:"PtgElfCol",f:parse_PtgElfCol},6:{n:"PtgElfRwV",f:parse_PtgElfRwV},7:{n:"PtgElfColV",f:parse_PtgElfColV},10:{n:"PtgElfRadical",f:parse_PtgElfRadical},11:{n:"PtgElfRadicalS",f:parse_PtgElfRadicalS},13:{n:"PtgElfColS",f:parse_PtgElfColS},15:{n:"PtgElfColSV",f:parse_PtgElfColSV},16:{n:"PtgElfRadicalLel",f:parse_PtgElfRadicalLel},25:{n:"PtgList",f:parse_PtgList},29:{n:"PtgSxName",f:parse_PtgSxName},255:{}},Ptg19={0:{n:"PtgAttrNoop",f:parse_PtgAttrNoop},1:{n:"PtgAttrSemi",f:parse_PtgAttrSemi},2:{n:"PtgAttrIf",f:parse_PtgAttrIf},4:{n:"PtgAttrChoose",f:parse_PtgAttrChoose},8:{n:"PtgAttrGoto",f:parse_PtgAttrGoto},16:{n:"PtgAttrSum",f:parse_PtgAttrSum},32:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},33:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},64:{n:"PtgAttrSpace",f:parse_PtgAttrSpace},65:{n:"PtgAttrSpaceSemi",f:parse_PtgAttrSpaceSemi},128:{n:"PtgAttrIfError",f:parse_PtgAttrIfError},255:{}};function parse_RgbExtra(e,t,r,n){if(n.biff<8)return parsenoop(e,t);for(var a=e.l+t,l=[],c=0;c!==r.length;++c)switch(r[c][0]){case"PtgArray":r[c][1]=parse_PtgExtraArray(e,0,n),l.push(r[c][1]);break;case"PtgMemArea":r[c][2]=parse_PtgExtraMem(e,r[c][1],n),l.push(r[c][2]);break;case"PtgExp":n&&n.biff==12&&(r[c][1][1]=e.read_shift(4),l.push(r[c][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[c][0]}return t=a-e.l,t!==0&&l.push(parsenoop(e,t)),l}function parse_Rgce(e,t,r){for(var n=e.l+t,a,l,c=[];n!=e.l;)t=n-e.l,l=e[e.l],a=PtgTypes[l]||PtgTypes[PtgDupes[l]],(l===24||l===25)&&(a=(l===24?Ptg18:Ptg19)[e[e.l+1]]),!a||!a.f?parsenoop(e,t):c.push([a.n,a.f(e,t,r)]);return c}function stringify_array(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],l=0;l<n.length;++l){var c=n[l];if(c)switch(c[0]){case 2:a.push('"'+c[1].replace(/"/g,'""')+'"');break;default:a.push(c[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var PtgBinOp={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function formula_quote_sheet_name(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function get_ixti_raw(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(l){return l.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function get_ixti(e,t,r){var n=get_ixti_raw(e,t,r);return n=="#REF"?n:formula_quote_sheet_name(n,r)}function stringify_formula(e,t,r,n,a){var l=a&&a.biff||8,c={s:{c:0,r:0}},d=[],x,f,h,g=0,y=0,_,E="";if(!e[0]||!e[0][0])return"";for(var b=-1,v="",R=0,A=e[0].length;R<A;++R){var C=e[0][R];switch(C[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(x=d.pop(),f=d.pop(),b>=0){switch(e[0][b][1][0]){case 0:v=fill(" ",e[0][b][1][1]);break;case 1:v=fill("\r",e[0][b][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][b][1][0])}f=f+v,b=-1}d.push(f+PtgBinOp[C[0]]+x);break;case"PtgIsect":x=d.pop(),f=d.pop(),d.push(f+" "+x);break;case"PtgUnion":x=d.pop(),f=d.pop(),d.push(f+","+x);break;case"PtgRange":x=d.pop(),f=d.pop(),d.push(f+":"+x);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=shift_cell_xls(C[1][1],c,a),d.push(encode_cell_xls(h,l));break;case"PtgRefN":h=r?shift_cell_xls(C[1][1],r,a):C[1][1],d.push(encode_cell_xls(h,l));break;case"PtgRef3d":g=C[1][1],h=shift_cell_xls(C[1][2],c,a),E=get_ixti(n,g,a),d.push(E+"!"+encode_cell_xls(h,l));break;case"PtgFunc":case"PtgFuncVar":var L=C[1][0],I=C[1][1];L||(L=0),L&=127;var ae=L==0?[]:d.slice(-L);d.length-=L,I==="User"&&(I=ae.shift()),d.push(I+"("+ae.join(",")+")");break;case"PtgBool":d.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":d.push(C[1]);break;case"PtgNum":d.push(String(C[1]));break;case"PtgStr":d.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":d.push(C[1]);break;case"PtgAreaN":_=shift_range_xls(C[1][1],r?{s:r}:c,a),d.push(encode_range_xls(_,a));break;case"PtgArea":_=shift_range_xls(C[1][1],c,a),d.push(encode_range_xls(_,a));break;case"PtgArea3d":g=C[1][1],_=C[1][2],E=get_ixti(n,g,a),d.push(E+"!"+encode_range_xls(_,a));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":y=C[1][2];var D=(n.names||[])[y-1]||(n[0]||[])[y],ee=D?D.Name:"SH33TJSNAME"+String(y);ee&&ee.slice(0,6)=="_xlfn."&&!a.xlfn&&(ee=ee.slice(6)),d.push(ee);break;case"PtgNameX":var Y=C[1][1];y=C[1][2];var le;if(a.biff<=5)Y<0&&(Y=-Y),n[Y]&&(le=n[Y][y]);else{var te="";if(((n[Y]||[])[0]||[])[0]==14849||(((n[Y]||[])[0]||[])[0]==1025?n[Y][y]&&n[Y][y].itab>0&&(te=n.SheetNames[n[Y][y].itab-1]+"!"):te=n.SheetNames[y-1]+"!"),n[Y]&&n[Y][y])te+=n[Y][y].Name;else if(n[0]&&n[0][y])te+=n[0][y].Name;else{var oe=(get_ixti_raw(n,Y,a)||"").split(";;");oe[y-1]?te=oe[y-1]:te+="SH33TJSERRX"}d.push(te);break}le||(le={Name:"SH33TJSERRY"}),d.push(le.Name);break;case"PtgParen":var Be="(",Pe=")";if(b>=0){switch(v="",e[0][b][1][0]){case 2:Be=fill(" ",e[0][b][1][1])+Be;break;case 3:Be=fill("\r",e[0][b][1][1])+Be;break;case 4:Pe=fill(" ",e[0][b][1][1])+Pe;break;case 5:Pe=fill("\r",e[0][b][1][1])+Pe;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][b][1][0])}b=-1}d.push(Be+d.pop()+Pe);break;case"PtgRefErr":d.push("#REF!");break;case"PtgRefErr3d":d.push("#REF!");break;case"PtgExp":h={c:C[1][1],r:C[1][0]};var De={c:r.c,r:r.r};if(n.sharedf[encode_cell(h)]){var X=n.sharedf[encode_cell(h)];d.push(stringify_formula(X,c,De,n,a))}else{var Se=!1;for(x=0;x!=n.arrayf.length;++x)if(f=n.arrayf[x],!(h.c<f[0].s.c||h.c>f[0].e.c)&&!(h.r<f[0].s.r||h.r>f[0].e.r)){d.push(stringify_formula(f[1],c,De,n,a)),Se=!0;break}Se||d.push(C[1])}break;case"PtgArray":d.push("{"+stringify_array(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":b=R;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":d.push("");break;case"PtgAreaErr":d.push("#REF!");break;case"PtgAreaErr3d":d.push("#REF!");break;case"PtgList":d.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var z=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&b>=0&&z.indexOf(e[0][R][0])==-1){C=e[0][b];var re=!0;switch(C[1][0]){case 4:re=!1;case 0:v=fill(" ",C[1][1]);break;case 5:re=!1;case 1:v=fill("\r",C[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}d.push((re?v:"")+d.pop()+(re?"":v)),b=-1}}if(d.length>1&&a.WTF)throw new Error("bad formula stack");return d[0]}function write_FormulaValue(e){if(e==null){var t=new_buf(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return write_Xnum(e);return write_Xnum(0)}function write_Formula(e,t,r,n,a){var l=write_XLSCell(t,r,a),c=write_FormulaValue(e.v),d=new_buf(6),x=33;d.write_shift(2,x),d.write_shift(4,0);for(var f=new_buf(e.bf.length),h=0;h<e.bf.length;++h)f[h]=e.bf[h];var g=bconcat([l,c,d,f]);return g}function parse_XLSBParsedFormula(e,t,r){var n=e.read_shift(4),a=parse_Rgce(e,n,r),l=e.read_shift(4),c=l>0?parse_RgbExtra(e,l,a,r):null;return[a,c]}var parse_XLSBArrayParsedFormula=parse_XLSBParsedFormula,parse_XLSBCellParsedFormula=parse_XLSBParsedFormula,parse_XLSBNameParsedFormula=parse_XLSBParsedFormula,parse_XLSBSharedParsedFormula=parse_XLSBParsedFormula,Cetab={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Ftab={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},FtabArgc={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function csf_to_ods_formula(e){var t="of:="+e.replace(crefregex,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function csf_to_ods_3D(e){return e.replace(/\./,"!")}var browser_has_Map=typeof Map<"u";function get_sst_id(e,t,r){var n=0,a=e.length;if(r){if(browser_has_Map?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var l=browser_has_Map?r.get(t):r[t];n<l.length;++n)if(e[l[n]].t===t)return e.Count++,l[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(browser_has_Map?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function col_obj_w(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(MDW=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=px2char(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=char2width(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function default_margins(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function get_cell_style(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,l=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){SSF_load(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=l;++a)if(e[a].numFmtId===n)return a;return e[l]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},l}function check_ws(e,t,r){if(e&&e["!ref"]){var n=safe_decode_range(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function write_ws_xml_merges(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+encode_range(e[r])+'"/>';return t+"</mergeCells>"}function write_ws_xml_sheetpr(e,t,r,n,a){var l=!1,c={},d=null;if(n.bookType!=="xlsx"&&t.vbaraw){var x=t.SheetNames[r];try{t.Workbook&&(x=t.Workbook.Sheets[r].CodeName||x)}catch{}l=!0,c.codeName=utf8write(escapexml(x))}if(e&&e["!outline"]){var f={summaryBelow:1,summaryRight:1};e["!outline"].above&&(f.summaryBelow=0),e["!outline"].left&&(f.summaryRight=0),d=(d||"")+writextag("outlinePr",null,f)}!l&&!d||(a[a.length]=writextag("sheetPr",d,c))}var sheetprot_deffalse=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sheetprot_deftrue=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function write_ws_xml_protection(e){var t={sheet:1};return sheetprot_deffalse.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),sheetprot_deftrue.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=crypto_CreatePasswordVerifier_Method1(e.password).toString(16).toUpperCase()),writextag("sheetProtection",null,t)}function write_ws_xml_margins(e){return default_margins(e),writextag("pageMargins",null,e)}function write_ws_xml_cols(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=writextag("col",null,col_obj_w(a,n)));return r[r.length]="</cols>",r.join("")}function write_ws_xml_autofilter(e,t,r,n){var a=typeof e.ref=="string"?e.ref:encode_range(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var l=r.Workbook.Names,c=decode_range(a);c.s.r==c.e.r&&(c.e.r=decode_range(t["!ref"]).e.r,a=encode_range(c));for(var d=0;d<l.length;++d){var x=l[d];if(x.Name=="_xlnm._FilterDatabase"&&x.Sheet==n){x.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return d==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),writextag("autoFilter",null,{ref:a})}function write_ws_xml_sheetviews(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),writextag("sheetViews",writextag("sheetView",null,a),{})}function write_ws_xml_cell(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",l=e.t,c=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=BErr[e.v];break;case"d":n&&n.cellDates?a=parseDate(e.v,-1).toISOString():(e=dup(e),e.t="n",a=""+(e.v=datenum(parseDate(e.v)))),typeof e.z>"u"&&(e.z=table_fmt[14]);break;default:a=e.v;break}var d=writetag("v",escapexml(a)),x={r:t},f=get_cell_style(n.cellXfs,e,n);switch(f!==0&&(x.s=f),e.t){case"n":break;case"d":x.t="d";break;case"b":x.t="b";break;case"e":x.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){d=writetag("v",""+get_sst_id(n.Strings,e.v,n.revStrings)),x.t="s";break}x.t="str";break}if(e.t!=l&&(e.t=l,e.v=c),typeof e.f=="string"&&e.f){var h=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;d=writextag("f",escapexml(e.f),h)+(e.v!=null?d:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(x.cm=1),writextag("c",d,x)}function write_ws_xml_data(e,t,r,n){var a=[],l=[],c=safe_decode_range(e["!ref"]),d="",x,f="",h=[],g=0,y=0,_=e["!rows"],E=Array.isArray(e),b={r:f},v,R=-1;for(y=c.s.c;y<=c.e.c;++y)h[y]=encode_col(y);for(g=c.s.r;g<=c.e.r;++g){for(l=[],f=encode_row(g),y=c.s.c;y<=c.e.c;++y){x=h[y]+f;var A=E?(e[g]||[])[y]:e[x];A!==void 0&&(d=write_ws_xml_cell(A,x,e,t))!=null&&l.push(d)}(l.length>0||_&&_[g])&&(b={r:f},_&&_[g]&&(v=_[g],v.hidden&&(b.hidden=1),R=-1,v.hpx?R=px2pt(v.hpx):v.hpt&&(R=v.hpt),R>-1&&(b.ht=R,b.customHeight=1),v.level&&(b.outlineLevel=v.level)),a[a.length]=writextag("row",l.join(""),b))}if(_)for(;g<_.length;++g)_&&_[g]&&(b={r:g+1},v=_[g],v.hidden&&(b.hidden=1),R=-1,v.hpx?R=px2pt(v.hpx):v.hpt&&(R=v.hpt),R>-1&&(b.ht=R,b.customHeight=1),v.level&&(b.outlineLevel=v.level),a[a.length]=writextag("row","",b));return a.join("")}function write_ws_xml(e,t,r,n){var a=[XML_HEADER,writextag("worksheet",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r})],l=r.SheetNames[e],c=0,d="",x=r.Sheets[l];x==null&&(x={});var f=x["!ref"]||"A1",h=safe_decode_range(f);if(h.e.c>16383||h.e.r>1048575){if(t.WTF)throw new Error("Range "+f+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),f=encode_range(h)}n||(n={}),x["!comments"]=[];var g=[];write_ws_xml_sheetpr(x,r,e,t,a),a[a.length]=writextag("dimension",null,{ref:f}),a[a.length]=write_ws_xml_sheetviews(x,t,e,r),t.sheetFormat&&(a[a.length]=writextag("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),x["!cols"]!=null&&x["!cols"].length>0&&(a[a.length]=write_ws_xml_cols(x,x["!cols"])),a[c=a.length]="<sheetData/>",x["!links"]=[],x["!ref"]!=null&&(d=write_ws_xml_data(x,t),d.length>0&&(a[a.length]=d)),a.length>c+1&&(a[a.length]="</sheetData>",a[c]=a[c].replace("/>",">")),x["!protect"]&&(a[a.length]=write_ws_xml_protection(x["!protect"])),x["!autofilter"]!=null&&(a[a.length]=write_ws_xml_autofilter(x["!autofilter"],x,r,e)),x["!merges"]!=null&&x["!merges"].length>0&&(a[a.length]=write_ws_xml_merges(x["!merges"]));var y=-1,_,E=-1;return x["!links"].length>0&&(a[a.length]="<hyperlinks>",x["!links"].forEach(function(b){b[1].Target&&(_={ref:b[0]},b[1].Target.charAt(0)!="#"&&(E=add_rels(n,-1,escapexml(b[1].Target).replace(/#.*$/,""),RELS.HLINK),_["r:id"]="rId"+E),(y=b[1].Target.indexOf("#"))>-1&&(_.location=escapexml(b[1].Target.slice(y+1))),b[1].Tooltip&&(_.tooltip=escapexml(b[1].Tooltip)),a[a.length]=writextag("hyperlink",null,_))}),a[a.length]="</hyperlinks>"),delete x["!links"],x["!margins"]!=null&&(a[a.length]=write_ws_xml_margins(x["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=writetag("ignoredErrors",writextag("ignoredError",null,{numberStoredAsText:1,sqref:f}))),g.length>0&&(E=add_rels(n,-1,"../drawings/drawing"+(e+1)+".xml",RELS.DRAW),a[a.length]=writextag("drawing",null,{"r:id":"rId"+E}),x["!drawing"]=g),x["!comments"].length>0&&(E=add_rels(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",RELS.VML),a[a.length]=writextag("legacyDrawing",null,{"r:id":"rId"+E}),x["!legacy"]=E),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function parse_BrtRowHdr(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var l=e.read_shift(1);return e.l=n,l&7&&(r.level=l&7),l&16&&(r.hidden=!0),l&32&&(r.hpt=a/20),r}function write_BrtRowHdr(e,t,r){var n=new_buf(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var l=320;a.hpx?l=px2pt(a.hpx)*20:a.hpt&&(l=a.hpt*20),n.write_shift(2,l),n.write_shift(1,0);var c=0;a.level&&(c|=a.level),a.hidden&&(c|=16),(a.hpx||a.hpt)&&(c|=32),n.write_shift(1,c),n.write_shift(1,0);var d=0,x=n.l;n.l+=4;for(var f={r:e,c:0},h=0;h<16;++h)if(!(t.s.c>h+1<<10||t.e.c<h<<10)){for(var g=-1,y=-1,_=h<<10;_<h+1<<10;++_){f.c=_;var E=Array.isArray(r)?(r[f.r]||[])[f.c]:r[encode_cell(f)];E&&(g<0&&(g=_),y=_)}g<0||(++d,n.write_shift(4,g),n.write_shift(4,y))}var b=n.l;return n.l=x,n.write_shift(4,d),n.l=b,n.length>n.l?n.slice(0,n.l):n}function write_row_header(e,t,r,n){var a=write_BrtRowHdr(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&write_record(e,0,a)}var parse_BrtWsDim=parse_UncheckedRfX,write_BrtWsDim=write_UncheckedRfX;function parse_BrtWsFmtInfo(){}function parse_BrtWsProp(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=parse_XLSBCodeName(e),r}function write_BrtWsProp(e,t,r){r==null&&(r=new_buf(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return write_BrtColor({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),write_XLSBCodeName(e,r),r.slice(0,r.l)}function parse_BrtCellBlank(e){var t=parse_XLSBCell(e);return[t]}function write_BrtCellBlank(e,t,r){return r==null&&(r=new_buf(8)),write_XLSBCell(t,r)}function parse_BrtShortBlank(e){var t=parse_XLSBShortCell(e);return[t]}function write_BrtShortBlank(e,t,r){return r==null&&(r=new_buf(4)),write_XLSBShortCell(t,r)}function parse_BrtCellBool(e){var t=parse_XLSBCell(e),r=e.read_shift(1);return[t,r,"b"]}function write_BrtCellBool(e,t,r){return r==null&&(r=new_buf(9)),write_XLSBCell(t,r),r.write_shift(1,e.v?1:0),r}function parse_BrtShortBool(e){var t=parse_XLSBShortCell(e),r=e.read_shift(1);return[t,r,"b"]}function write_BrtShortBool(e,t,r){return r==null&&(r=new_buf(5)),write_XLSBShortCell(t,r),r.write_shift(1,e.v?1:0),r}function parse_BrtCellError(e){var t=parse_XLSBCell(e),r=e.read_shift(1);return[t,r,"e"]}function write_BrtCellError(e,t,r){return r==null&&(r=new_buf(9)),write_XLSBCell(t,r),r.write_shift(1,e.v),r}function parse_BrtShortError(e){var t=parse_XLSBShortCell(e),r=e.read_shift(1);return[t,r,"e"]}function write_BrtShortError(e,t,r){return r==null&&(r=new_buf(8)),write_XLSBShortCell(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function parse_BrtCellIsst(e){var t=parse_XLSBCell(e),r=e.read_shift(4);return[t,r,"s"]}function write_BrtCellIsst(e,t,r){return r==null&&(r=new_buf(12)),write_XLSBCell(t,r),r.write_shift(4,t.v),r}function parse_BrtShortIsst(e){var t=parse_XLSBShortCell(e),r=e.read_shift(4);return[t,r,"s"]}function write_BrtShortIsst(e,t,r){return r==null&&(r=new_buf(8)),write_XLSBShortCell(t,r),r.write_shift(4,t.v),r}function parse_BrtCellReal(e){var t=parse_XLSBCell(e),r=parse_Xnum(e);return[t,r,"n"]}function write_BrtCellReal(e,t,r){return r==null&&(r=new_buf(16)),write_XLSBCell(t,r),write_Xnum(e.v,r),r}function parse_BrtShortReal(e){var t=parse_XLSBShortCell(e),r=parse_Xnum(e);return[t,r,"n"]}function write_BrtShortReal(e,t,r){return r==null&&(r=new_buf(12)),write_XLSBShortCell(t,r),write_Xnum(e.v,r),r}function parse_BrtCellRk(e){var t=parse_XLSBCell(e),r=parse_RkNumber(e);return[t,r,"n"]}function write_BrtCellRk(e,t,r){return r==null&&(r=new_buf(12)),write_XLSBCell(t,r),write_RkNumber(e.v,r),r}function parse_BrtShortRk(e){var t=parse_XLSBShortCell(e),r=parse_RkNumber(e);return[t,r,"n"]}function write_BrtShortRk(e,t,r){return r==null&&(r=new_buf(8)),write_XLSBShortCell(t,r),write_RkNumber(e.v,r),r}function parse_BrtCellRString(e){var t=parse_XLSBCell(e),r=parse_RichStr(e);return[t,r,"is"]}function parse_BrtCellSt(e){var t=parse_XLSBCell(e),r=parse_XLWideString(e);return[t,r,"str"]}function write_BrtCellSt(e,t,r){return r==null&&(r=new_buf(12+4*e.v.length)),write_XLSBCell(t,r),write_XLWideString(e.v,r),r.length>r.l?r.slice(0,r.l):r}function parse_BrtShortSt(e){var t=parse_XLSBShortCell(e),r=parse_XLWideString(e);return[t,r,"str"]}function write_BrtShortSt(e,t,r){return r==null&&(r=new_buf(8+4*e.v.length)),write_XLSBShortCell(t,r),write_XLWideString(e.v,r),r.length>r.l?r.slice(0,r.l):r}function parse_BrtFmlaBool(e,t,r){var n=e.l+t,a=parse_XLSBCell(e);a.r=r["!row"];var l=e.read_shift(1),c=[a,l,"b"];if(r.cellFormula){e.l+=2;var d=parse_XLSBCellParsedFormula(e,n-e.l,r);c[3]=stringify_formula(d,null,a,r.supbooks,r)}else e.l=n;return c}function parse_BrtFmlaError(e,t,r){var n=e.l+t,a=parse_XLSBCell(e);a.r=r["!row"];var l=e.read_shift(1),c=[a,l,"e"];if(r.cellFormula){e.l+=2;var d=parse_XLSBCellParsedFormula(e,n-e.l,r);c[3]=stringify_formula(d,null,a,r.supbooks,r)}else e.l=n;return c}function parse_BrtFmlaNum(e,t,r){var n=e.l+t,a=parse_XLSBCell(e);a.r=r["!row"];var l=parse_Xnum(e),c=[a,l,"n"];if(r.cellFormula){e.l+=2;var d=parse_XLSBCellParsedFormula(e,n-e.l,r);c[3]=stringify_formula(d,null,a,r.supbooks,r)}else e.l=n;return c}function parse_BrtFmlaString(e,t,r){var n=e.l+t,a=parse_XLSBCell(e);a.r=r["!row"];var l=parse_XLWideString(e),c=[a,l,"str"];if(r.cellFormula){e.l+=2;var d=parse_XLSBCellParsedFormula(e,n-e.l,r);c[3]=stringify_formula(d,null,a,r.supbooks,r)}else e.l=n;return c}var parse_BrtMergeCell=parse_UncheckedRfX,write_BrtMergeCell=write_UncheckedRfX;function write_BrtBeginMergeCells(e,t){return t==null&&(t=new_buf(4)),t.write_shift(4,e),t}function parse_BrtHLink(e,t){var r=e.l+t,n=parse_UncheckedRfX(e),a=parse_XLNullableWideString(e),l=parse_XLWideString(e),c=parse_XLWideString(e),d=parse_XLWideString(e);e.l=r;var x={rfx:n,relId:a,loc:l,display:d};return c&&(x.Tooltip=c),x}function write_BrtHLink(e,t){var r=new_buf(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));write_UncheckedRfX({s:decode_cell(e[0]),e:decode_cell(e[0])},r),write_RelID("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return write_XLWideString(a||"",r),write_XLWideString(e[1].Tooltip||"",r),write_XLWideString("",r),r.slice(0,r.l)}function parse_BrtPane(){}function parse_BrtArrFmla(e,t,r){var n=e.l+t,a=parse_RfX(e),l=e.read_shift(1),c=[a];if(c[2]=l,r.cellFormula){var d=parse_XLSBArrayParsedFormula(e,n-e.l,r);c[1]=d}else e.l=n;return c}function parse_BrtShrFmla(e,t,r){var n=e.l+t,a=parse_UncheckedRfX(e),l=[a];if(r.cellFormula){var c=parse_XLSBSharedParsedFormula(e,n-e.l,r);l[1]=c,e.l=n}else e.l=n;return l}function write_BrtColInfo(e,t,r){r==null&&(r=new_buf(18));var n=col_obj_w(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var BrtMarginKeys=["left","right","top","bottom","header","footer"];function parse_BrtMargins(e){var t={};return BrtMarginKeys.forEach(function(r){t[r]=parse_Xnum(e)}),t}function write_BrtMargins(e,t){return t==null&&(t=new_buf(48)),default_margins(e),BrtMarginKeys.forEach(function(r){write_Xnum(e[r],t)}),t}function parse_BrtBeginWsView(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function write_BrtBeginWsView(e,t,r){r==null&&(r=new_buf(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function write_BrtCellIgnoreEC(e){var t=new_buf(24);return t.write_shift(4,4),t.write_shift(4,1),write_UncheckedRfX(e,t),t}function write_BrtSheetProtection(e,t){return t==null&&(t=new_buf(66)),t.write_shift(2,e.password?crypto_CreatePasswordVerifier_Method1(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function parse_BrtDVal(){}function parse_BrtDVal14(){}function write_ws_bin_cell(e,t,r,n,a,l,c){if(t.v===void 0)return!1;var d="";switch(t.t){case"b":d=t.v?"1":"0";break;case"d":t=dup(t),t.z=t.z||table_fmt[14],t.v=datenum(parseDate(t.v)),t.t="n";break;case"n":case"e":d=""+t.v;break;default:d=t.v;break}var x={r,c:n};switch(x.s=get_cell_style(a.cellXfs,t,a),t.l&&l["!links"].push([encode_cell(x),t.l]),t.c&&l["!comments"].push([encode_cell(x),t.c]),t.t){case"s":case"str":return a.bookSST?(d=get_sst_id(a.Strings,t.v,a.revStrings),x.t="s",x.v=d,c?write_record(e,18,write_BrtShortIsst(t,x)):write_record(e,7,write_BrtCellIsst(t,x))):(x.t="str",c?write_record(e,17,write_BrtShortSt(t,x)):write_record(e,6,write_BrtCellSt(t,x))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?c?write_record(e,13,write_BrtShortRk(t,x)):write_record(e,2,write_BrtCellRk(t,x)):c?write_record(e,16,write_BrtShortReal(t,x)):write_record(e,5,write_BrtCellReal(t,x)),!0;case"b":return x.t="b",c?write_record(e,15,write_BrtShortBool(t,x)):write_record(e,4,write_BrtCellBool(t,x)),!0;case"e":return x.t="e",c?write_record(e,14,write_BrtShortError(t,x)):write_record(e,3,write_BrtCellError(t,x)),!0}return c?write_record(e,12,write_BrtShortBlank(t,x)):write_record(e,1,write_BrtCellBlank(t,x)),!0}function write_CELLTABLE(e,t,r,n){var a=safe_decode_range(t["!ref"]||"A1"),l,c="",d=[];write_record(e,145);var x=Array.isArray(t),f=a.e.r;t["!rows"]&&(f=Math.max(a.e.r,t["!rows"].length-1));for(var h=a.s.r;h<=f;++h){c=encode_row(h),write_row_header(e,t,a,h);var g=!1;if(h<=a.e.r)for(var y=a.s.c;y<=a.e.c;++y){h===a.s.r&&(d[y]=encode_col(y)),l=d[y]+c;var _=x?(t[h]||[])[y]:t[l];if(!_){g=!1;continue}g=write_ws_bin_cell(e,_,h,y,n,t,g)}}write_record(e,146)}function write_MERGECELLS(e,t){!t||!t["!merges"]||(write_record(e,177,write_BrtBeginMergeCells(t["!merges"].length)),t["!merges"].forEach(function(r){write_record(e,176,write_BrtMergeCell(r))}),write_record(e,178))}function write_COLINFOS(e,t){!t||!t["!cols"]||(write_record(e,390),t["!cols"].forEach(function(r,n){r&&write_record(e,60,write_BrtColInfo(n,r))}),write_record(e,391))}function write_IGNOREECS(e,t){!t||!t["!ref"]||(write_record(e,648),write_record(e,649,write_BrtCellIgnoreEC(safe_decode_range(t["!ref"]))),write_record(e,650))}function write_HLINKS(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=add_rels(r,-1,n[1].Target.replace(/#.*$/,""),RELS.HLINK);write_record(e,494,write_BrtHLink(n,a))}}),delete t["!links"]}function write_LEGACYDRAWING(e,t,r,n){if(t["!comments"].length>0){var a=add_rels(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",RELS.VML);write_record(e,551,write_RelID("rId"+a)),t["!legacy"]=a}}function write_AUTOFILTER(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],l=typeof a.ref=="string"?a.ref:encode_range(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var c=r.Workbook.Names,d=decode_range(l);d.s.r==d.e.r&&(d.e.r=decode_range(t["!ref"]).e.r,l=encode_range(d));for(var x=0;x<c.length;++x){var f=c[x];if(f.Name=="_xlnm._FilterDatabase"&&f.Sheet==n){f.Ref="'"+r.SheetNames[n]+"'!"+l;break}}x==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+l}),write_record(e,161,write_UncheckedRfX(safe_decode_range(l))),write_record(e,162)}}function write_WSVIEWS2(e,t,r){write_record(e,133),write_record(e,137,write_BrtBeginWsView(t,r)),write_record(e,138),write_record(e,134)}function write_SHEETPROTECT(e,t){t["!protect"]&&write_record(e,535,write_BrtSheetProtection(t["!protect"]))}function write_ws_bin(e,t,r,n){var a=buf_array(),l=r.SheetNames[e],c=r.Sheets[l]||{},d=l;try{r&&r.Workbook&&(d=r.Workbook.Sheets[e].CodeName||d)}catch{}var x=safe_decode_range(c["!ref"]||"A1");if(x.e.c>16383||x.e.r>1048575){if(t.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");x.e.c=Math.min(x.e.c,16383),x.e.r=Math.min(x.e.c,1048575)}return c["!links"]=[],c["!comments"]=[],write_record(a,129),(r.vbaraw||c["!outline"])&&write_record(a,147,write_BrtWsProp(d,c["!outline"])),write_record(a,148,write_BrtWsDim(x)),write_WSVIEWS2(a,c,r.Workbook),write_COLINFOS(a,c),write_CELLTABLE(a,c,e,t),write_SHEETPROTECT(a,c),write_AUTOFILTER(a,c,r,e),write_MERGECELLS(a,c),write_HLINKS(a,c,n),c["!margins"]&&write_record(a,476,write_BrtMargins(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&write_IGNOREECS(a,c),write_LEGACYDRAWING(a,c,e,n),write_record(a,130),a.end()}function parse_BrtCsProp(e,t){e.l+=10;var r=parse_XLWideString(e);return{name:r}}var WBPropsDef=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function safe1904(e){return!e.Workbook||!e.Workbook.WBProps?"false":parsexmlbool(e.Workbook.WBProps.date1904)?"true":"false"}var badchars="][*?/\\".split("");function check_ws_name(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return badchars.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function check_wb_names(e,t,r){e.forEach(function(n,a){check_ws_name(n);for(var l=0;l<a;++l)if(n==e[l])throw new Error("Duplicate Sheet Name: "+n);if(r){var c=t&&t[a]&&t[a].CodeName||n;if(c.charCodeAt(0)==95&&c.length>22)throw new Error("Bad Code Name: Worksheet"+c)}})}function check_wb(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];check_wb_names(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)check_ws(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function write_wb_xml(e){var t=[XML_HEADER];t[t.length]=writextag("workbook",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(WBPropsDef.forEach(function(d){e.Workbook.WBProps[d[0]]!=null&&e.Workbook.WBProps[d[0]]!=d[1]&&(n[d[0]]=e.Workbook.WBProps[d[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=writextag("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],l=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",l=0;l!=e.SheetNames.length&&!(!a[l]||!a[l].Hidden);++l);l==e.SheetNames.length&&(l=0),t[t.length]='<workbookView firstSheet="'+l+'" activeTab="'+l+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",l=0;l!=e.SheetNames.length;++l){var c={name:escapexml(e.SheetNames[l].slice(0,31))};if(c.sheetId=""+(l+1),c["r:id"]="rId"+(l+1),a[l])switch(a[l].Hidden){case 1:c.state="hidden";break;case 2:c.state="veryHidden";break}t[t.length]=writextag("sheet",null,c)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(d){var x={name:d.Name};d.Comment&&(x.comment=d.Comment),d.Sheet!=null&&(x.localSheetId=""+d.Sheet),d.Hidden&&(x.hidden="1"),d.Ref&&(t[t.length]=writextag("definedName",escapexml(d.Ref),x))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function parse_BrtBundleSh(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=parse_RelID(e),r.name=parse_XLWideString(e),r}function write_BrtBundleSh(e,t){return t||(t=new_buf(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),write_RelID(e.strRelID,t),write_XLWideString(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function parse_BrtWbProp(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?parse_XLWideString(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function write_BrtWbProp(e,t){t||(t=new_buf(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),write_XLSBCodeName(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function parse_BrtName(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),l=parse_XLNameWideString(e),c=parse_XLSBNameParsedFormula(e,0,r),d=parse_XLNullableWideString(e);e.l=n;var x={Name:l,Ptg:c};return a<268435455&&(x.Sheet=a),d&&(x.Comment=d),x}function write_BUNDLESHS(e,t){write_record(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};write_record(e,156,write_BrtBundleSh(a))}write_record(e,144)}function write_BrtFileVersion(e,t){t||(t=new_buf(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return write_XLWideString("SheetJS",t),write_XLWideString(XLSX.version,t),write_XLWideString(XLSX.version,t),write_XLWideString("7262",t),t.length>t.l?t.slice(0,t.l):t}function write_BrtBookView(e,t){t||(t=new_buf(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function write_BOOKVIEWS(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,l=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&l==-1&&(l=n);l>a||(write_record(e,135),write_record(e,158,write_BrtBookView(a)),write_record(e,136))}}function write_wb_bin(e,t){var r=buf_array();return write_record(r,131),write_record(r,128,write_BrtFileVersion()),write_record(r,153,write_BrtWbProp(e.Workbook&&e.Workbook.WBProps||null)),write_BOOKVIEWS(r,e),write_BUNDLESHS(r,e),write_record(r,132),r.end()}function write_wb(e,t,r){return(t.slice(-4)===".bin"?write_wb_bin:write_wb_xml)(e)}function write_ws(e,t,r,n,a){return(t.slice(-4)===".bin"?write_ws_bin:write_ws_xml)(e,r,n,a)}function write_sty(e,t,r){return(t.slice(-4)===".bin"?write_sty_bin:write_sty_xml)(e,r)}function write_sst(e,t,r){return(t.slice(-4)===".bin"?write_sst_bin:write_sst_xml)(e,r)}function write_cmnt(e,t,r){return(t.slice(-4)===".bin"?write_comments_bin:write_comments_xml)(e)}function write_xlmeta(e){return(e.slice(-4)===".bin"?write_xlmeta_bin:write_xlmeta_xml)()}function write_props_xlml(e,t){var r=[];return e.Props&&r.push(xlml_write_docprops(e.Props,t)),e.Custprops&&r.push(xlml_write_custprops(e.Props,e.Custprops)),r.join("")}function write_wb_xlml(){return""}function write_sty_xlml(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var l=[];l.push(writextag("NumberFormat",null,{"ss:Format":escapexml(table_fmt[n.numFmtId])}));var c={"ss:ID":"s"+(21+a)};r.push(writextag("Style",l.join(""),c))}),writextag("Styles",r.join(""))}function write_name_xlml(e){return writextag("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+a1_to_rc(e.Ref,{r:0,c:0})})}function write_names_xlml(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(write_name_xlml(a)))}return writextag("Names",r.join(""))}function write_ws_xlml_names(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,l=[],c=0;c<a.length;++c){var d=a[c];d.Sheet==r&&(d.Name.match(/^_xlfn\./)||l.push(write_name_xlml(d)))}return l.join("")}function write_ws_xlml_wsopts(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(writextag("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(writextag("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(writextag("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(writextag("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var l=0;l<r&&!(n.Workbook.Sheets[l]&&!n.Workbook.Sheets[l].Hidden);++l);l==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(writetag("ProtectContents","True")),e["!protect"].objects&&a.push(writetag("ProtectObjects","True")),e["!protect"].scenarios&&a.push(writetag("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(writetag("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(writetag("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(c){e["!protect"][c[0]]&&a.push("<"+c[1]+"/>")})),a.length==0?"":writextag("WorksheetOptions",a.join(""),{xmlns:XLMLNS.x})}function write_ws_xlml_comment(e){return e.map(function(t){var r=xlml_unfixstr(t.t||""),n=writextag("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return writextag("Comment",n,{"ss:Author":t.a})}).join("")}function write_ws_xlml_cell(e,t,r,n,a,l,c){if(!e||e.v==null&&e.f==null)return"";var d={};if(e.f&&(d["ss:Formula"]="="+escapexml(a1_to_rc(e.f,c))),e.F&&e.F.slice(0,t.length)==t){var x=decode_cell(e.F.slice(t.length+1));d["ss:ArrayRange"]="RC:R"+(x.r==c.r?"":"["+(x.r-c.r)+"]")+"C"+(x.c==c.c?"":"["+(x.c-c.c)+"]")}if(e.l&&e.l.Target&&(d["ss:HRef"]=escapexml(e.l.Target),e.l.Tooltip&&(d["x:HRefScreenTip"]=escapexml(e.l.Tooltip))),r["!merges"])for(var f=r["!merges"],h=0;h!=f.length;++h)f[h].s.c!=c.c||f[h].s.r!=c.r||(f[h].e.c>f[h].s.c&&(d["ss:MergeAcross"]=f[h].e.c-f[h].s.c),f[h].e.r>f[h].s.r&&(d["ss:MergeDown"]=f[h].e.r-f[h].s.r));var g="",y="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":g="Number",y=String(e.v);break;case"b":g="Boolean",y=e.v?"1":"0";break;case"e":g="Error",y=BErr[e.v];break;case"d":g="DateTime",y=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||table_fmt[14]);break;case"s":g="String",y=escapexlml(e.v||"");break}var _=get_cell_style(n.cellXfs,e,n);d["ss:StyleID"]="s"+(21+_),d["ss:Index"]=c.c+1;var E=e.v!=null?y:"",b=e.t=="z"?"":'<Data ss:Type="'+g+'">'+E+"</Data>";return(e.c||[]).length>0&&(b+=write_ws_xlml_comment(e.c)),writextag("Cell",b,d)}function write_ws_xlml_row(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=pt2px(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function write_ws_xlml_table(e,t,r,n){if(!e["!ref"])return"";var a=safe_decode_range(e["!ref"]),l=e["!merges"]||[],c=0,d=[];e["!cols"]&&e["!cols"].forEach(function(v,R){process_col(v);var A=!!v.width,C=col_obj_w(R,v),L={"ss:Index":R+1};A&&(L["ss:Width"]=width2px(C.width)),v.hidden&&(L["ss:Hidden"]="1"),d.push(writextag("Column",null,L))});for(var x=Array.isArray(e),f=a.s.r;f<=a.e.r;++f){for(var h=[write_ws_xlml_row(f,(e["!rows"]||[])[f])],g=a.s.c;g<=a.e.c;++g){var y=!1;for(c=0;c!=l.length;++c)if(!(l[c].s.c>g)&&!(l[c].s.r>f)&&!(l[c].e.c<g)&&!(l[c].e.r<f)){(l[c].s.c!=g||l[c].s.r!=f)&&(y=!0);break}if(!y){var _={r:f,c:g},E=encode_cell(_),b=x?(e[f]||[])[g]:e[E];h.push(write_ws_xlml_cell(b,E,e,t,r,n,_))}}h.push("</Row>"),h.length>2&&d.push(h.join(""))}return d.join("")}function write_ws_xlml(e,t,r){var n=[],a=r.SheetNames[e],l=r.Sheets[a],c=l?write_ws_xlml_names(l,t,e,r):"";return c.length>0&&n.push("<Names>"+c+"</Names>"),c=l?write_ws_xlml_table(l,t,e,r):"",c.length>0&&n.push("<Table>"+c+"</Table>"),n.push(write_ws_xlml_wsopts(l,t,e,r)),n.join("")}function write_xlml(e,t){t||(t={}),e.SSF||(e.SSF=dup(table_fmt)),e.SSF&&(make_ssf(),SSF_load_table(e.SSF),t.revssf=evert_num(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],get_cell_style(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(write_props_xlml(e,t)),r.push(write_wb_xlml()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(writextag("Worksheet",write_ws_xlml(n,t,e),{"ss:Name":escapexml(e.SheetNames[n])}));return r[2]=write_sty_xlml(e,t),r[3]=write_names_xlml(e),XML_HEADER+writextag("Workbook",r.join(""),{xmlns:XLMLNS.ss,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:ss":XLMLNS.ss,"xmlns:dt":XLMLNS.dt,"xmlns:html":XLMLNS.html})}var PSCLSID={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function write_xls_props(e,t){var r=[],n=[],a=[],l=0,c,d=evert_key(DocSummaryPIDDSI,"n"),x=evert_key(SummaryPIDSI,"n");if(e.Props)for(c=keys(e.Props),l=0;l<c.length;++l)(Object.prototype.hasOwnProperty.call(d,c[l])?r:Object.prototype.hasOwnProperty.call(x,c[l])?n:a).push([c[l],e.Props[c[l]]]);if(e.Custprops)for(c=keys(e.Custprops),l=0;l<c.length;++l)Object.prototype.hasOwnProperty.call(e.Props||{},c[l])||(Object.prototype.hasOwnProperty.call(d,c[l])?r:Object.prototype.hasOwnProperty.call(x,c[l])?n:a).push([c[l],e.Custprops[c[l]]]);var f=[];for(l=0;l<a.length;++l)XLSPSSkip.indexOf(a[l][0])>-1||PseudoPropsPairs.indexOf(a[l][0])>-1||a[l][1]!=null&&f.push(a[l]);n.length&&CFB.utils.cfb_add(t,"/SummaryInformation",write_PropertySetStream(n,PSCLSID.SI,x,SummaryPIDSI)),(r.length||f.length)&&CFB.utils.cfb_add(t,"/DocumentSummaryInformation",write_PropertySetStream(r,PSCLSID.DSI,d,DocSummaryPIDDSI,f.length?f:null,PSCLSID.UDI))}function write_xlscfb(e,t){var r=t||{},n=CFB.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return CFB.utils.cfb_add(n,a,write_biff_buf(e,r)),r.biff==8&&(e.Props||e.Custprops)&&write_xls_props(e,n),r.biff==8&&e.vbaraw&&fill_vba_xls(n,CFB.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var XLSBRecordEnum={0:{f:parse_BrtRowHdr},1:{f:parse_BrtCellBlank},2:{f:parse_BrtCellRk},3:{f:parse_BrtCellError},4:{f:parse_BrtCellBool},5:{f:parse_BrtCellReal},6:{f:parse_BrtCellSt},7:{f:parse_BrtCellIsst},8:{f:parse_BrtFmlaString},9:{f:parse_BrtFmlaNum},10:{f:parse_BrtFmlaBool},11:{f:parse_BrtFmlaError},12:{f:parse_BrtShortBlank},13:{f:parse_BrtShortRk},14:{f:parse_BrtShortError},15:{f:parse_BrtShortBool},16:{f:parse_BrtShortReal},17:{f:parse_BrtShortSt},18:{f:parse_BrtShortIsst},19:{f:parse_RichStr},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:parse_BrtName},40:{},42:{},43:{f:parse_BrtFont},44:{f:parse_BrtFmt},45:{f:parse_BrtFill},46:{f:parse_BrtBorder},47:{f:parse_BrtXF},48:{},49:{f:parse_Int32LE},50:{},51:{f:parse_BrtMdb},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:parse_ColInfo},62:{f:parse_BrtCellRString},63:{f:parse_BrtCalcChainItem$},64:{f:parse_BrtDVal},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:parsenoop,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:parse_BrtBeginWsView},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:parse_BrtWsProp},148:{f:parse_BrtWsDim,p:16},151:{f:parse_BrtPane},152:{},153:{f:parse_BrtWbProp},154:{},155:{},156:{f:parse_BrtBundleSh},157:{},158:{},159:{T:1,f:parse_BrtBeginSst},160:{T:-1},161:{T:1,f:parse_UncheckedRfX},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:parse_BrtMergeCell},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:parse_BrtMdtinfo},336:{T:-1},337:{f:parse_BrtBeginEsmdb,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:parse_RelID},357:{},358:{},359:{},360:{T:1},361:{},362:{f:parse_ExternSheet},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:parse_BrtArrFmla},427:{f:parse_BrtShrFmla},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:parse_BrtMargins},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:parse_BrtWsFmtInfo},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:parse_BrtHLink},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:parse_RelID},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:parse_BrtCommentAuthor},633:{T:1},634:{T:-1},635:{T:1,f:parse_BrtBeginComment},636:{T:-1},637:{f:parse_BrtCommentText},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:parse_BrtCsProp},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:parse_BrtDVal14},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function write_biff_rec(e,t,r,n){var a=t;if(!isNaN(a)){var l=n||(r||[]).length||0,c=e.next(4);c.write_shift(2,a),c.write_shift(2,l),l>0&&is_buf(r)&&e.push(r)}}function write_biff_continue(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return write_biff_rec(e,t,r,a);var l=t;if(!isNaN(l)){for(var c=r.parts||[],d=0,x=0,f=0;f+(c[d]||8224)<=8224;)f+=c[d]||8224,d++;var h=e.next(4);for(h.write_shift(2,l),h.write_shift(2,f),e.push(r.slice(x,x+f)),x+=f;x<a;){for(h=e.next(4),h.write_shift(2,60),f=0;f+(c[d]||8224)<=8224;)f+=c[d]||8224,d++;h.write_shift(2,f),e.push(r.slice(x,x+f)),x+=f}}}function write_BIFF2Cell(e,t,r){return e||(e=new_buf(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function write_BIFF2BERR(e,t,r,n){var a=new_buf(9);return write_BIFF2Cell(a,e,t),write_Bes(r,n||"b",a),a}function write_BIFF2LABEL(e,t,r){var n=new_buf(8+2*r.length);return write_BIFF2Cell(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function write_ws_biff2_cell(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?datenum(parseDate(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?write_biff_rec(e,2,write_BIFF2INT(r,n,a)):write_biff_rec(e,3,write_BIFF2NUM(r,n,a));return;case"b":case"e":write_biff_rec(e,5,write_BIFF2BERR(r,n,t.v,t.t));return;case"s":case"str":write_biff_rec(e,4,write_BIFF2LABEL(r,n,(t.v||"").slice(0,255)));return}write_biff_rec(e,1,write_BIFF2Cell(null,r,n))}function write_ws_biff2(e,t,r,n){var a=Array.isArray(t),l=safe_decode_range(t["!ref"]||"A1"),c,d="",x=[];if(l.e.c>255||l.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");l.e.c=Math.min(l.e.c,255),l.e.r=Math.min(l.e.c,16383),c=encode_range(l)}for(var f=l.s.r;f<=l.e.r;++f){d=encode_row(f);for(var h=l.s.c;h<=l.e.c;++h){f===l.s.r&&(x[h]=encode_col(h)),c=x[h]+d;var g=a?(t[f]||[])[h]:t[c];g&&write_ws_biff2_cell(e,g,f,h)}}}function write_biff2_buf(e,t){for(var r=t||{},n=buf_array(),a=0,l=0;l<e.SheetNames.length;++l)e.SheetNames[l]==r.sheet&&(a=l);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return write_biff_rec(n,r.biff==4?1033:r.biff==3?521:9,write_BOF(e,16,r)),write_ws_biff2(n,e.Sheets[e.SheetNames[a]],a,r),write_biff_rec(n,10),n.end()}function write_FONTS_biff8(e,t,r){write_biff_rec(e,49,write_Font({sz:12,name:"Arial"},r))}function write_FMTS_biff8(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&write_biff_rec(e,1054,write_Format(a,t[a],r))})}function write_FEAT(e,t){var r=new_buf(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),write_biff_rec(e,2151,r),r=new_buf(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),write_Ref8U(safe_decode_range(t["!ref"]||"A1"),r),r.write_shift(4,4),write_biff_rec(e,2152,r)}function write_CELLXFS_biff8(e,t){for(var r=0;r<16;++r)write_biff_rec(e,224,write_XF({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){write_biff_rec(e,224,write_XF(n,0,t))})}function write_ws_biff8_hlinks(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];write_biff_rec(e,440,write_HLink(n)),n[1].Tooltip&&write_biff_rec(e,2048,write_HLinkTooltip(n))}delete t["!links"]}function write_ws_cols_biff8(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&write_biff_rec(e,125,write_ColInfo(col_obj_w(a,n),a))})}}function write_ws_biff8_cell(e,t,r,n,a){var l=16+get_cell_style(a.cellXfs,t,a);if(t.v==null&&!t.bf){write_biff_rec(e,513,write_XLSCell(r,n,l));return}if(t.bf)write_biff_rec(e,6,write_Formula(t,r,n,a,l));else switch(t.t){case"d":case"n":var c=t.t=="d"?datenum(parseDate(t.v)):t.v;write_biff_rec(e,515,write_Number(r,n,c,l));break;case"b":case"e":write_biff_rec(e,517,write_BoolErr(r,n,t.v,l,a,t.t));break;case"s":case"str":if(a.bookSST){var d=get_sst_id(a.Strings,t.v,a.revStrings);write_biff_rec(e,253,write_LabelSst(r,n,d,l))}else write_biff_rec(e,516,write_Label(r,n,(t.v||"").slice(0,255),l,a));break;default:write_biff_rec(e,513,write_XLSCell(r,n,l))}}function write_ws_biff8(e,t,r){var n=buf_array(),a=r.SheetNames[e],l=r.Sheets[a]||{},c=(r||{}).Workbook||{},d=(c.Sheets||[])[e]||{},x=Array.isArray(l),f=t.biff==8,h,g="",y=[],_=safe_decode_range(l["!ref"]||"A1"),E=f?65536:16384;if(_.e.c>255||_.e.r>=E){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:IV16384");_.e.c=Math.min(_.e.c,255),_.e.r=Math.min(_.e.c,E-1)}write_biff_rec(n,2057,write_BOF(r,16,t)),write_biff_rec(n,13,writeuint16(1)),write_biff_rec(n,12,writeuint16(100)),write_biff_rec(n,15,writebool(!0)),write_biff_rec(n,17,writebool(!1)),write_biff_rec(n,16,write_Xnum(.001)),write_biff_rec(n,95,writebool(!0)),write_biff_rec(n,42,writebool(!1)),write_biff_rec(n,43,writebool(!1)),write_biff_rec(n,130,writeuint16(1)),write_biff_rec(n,128,write_Guts()),write_biff_rec(n,131,writebool(!1)),write_biff_rec(n,132,writebool(!1)),f&&write_ws_cols_biff8(n,l["!cols"]),write_biff_rec(n,512,write_Dimensions(_,t)),f&&(l["!links"]=[]);for(var b=_.s.r;b<=_.e.r;++b){g=encode_row(b);for(var v=_.s.c;v<=_.e.c;++v){b===_.s.r&&(y[v]=encode_col(v)),h=y[v]+g;var R=x?(l[b]||[])[v]:l[h];R&&(write_ws_biff8_cell(n,R,b,v,t),f&&R.l&&l["!links"].push([h,R.l]))}}var A=d.CodeName||d.name||a;return f&&write_biff_rec(n,574,write_Window2((c.Views||[])[0])),f&&(l["!merges"]||[]).length&&write_biff_rec(n,229,write_MergeCells(l["!merges"])),f&&write_ws_biff8_hlinks(n,l),write_biff_rec(n,442,write_XLUnicodeString(A)),f&&write_FEAT(n,l),write_biff_rec(n,10),n.end()}function write_biff8_global(e,t,r){var n=buf_array(),a=(e||{}).Workbook||{},l=a.Sheets||[],c=a.WBProps||{},d=r.biff==8,x=r.biff==5;if(write_biff_rec(n,2057,write_BOF(e,5,r)),r.bookType=="xla"&&write_biff_rec(n,135),write_biff_rec(n,225,d?writeuint16(1200):null),write_biff_rec(n,193,writezeroes(2)),x&&write_biff_rec(n,191),x&&write_biff_rec(n,192),write_biff_rec(n,226),write_biff_rec(n,92,write_WriteAccess("SheetJS",r)),write_biff_rec(n,66,writeuint16(d?1200:1252)),d&&write_biff_rec(n,353,writeuint16(0)),d&&write_biff_rec(n,448),write_biff_rec(n,317,write_RRTabId(e.SheetNames.length)),d&&e.vbaraw&&write_biff_rec(n,211),d&&e.vbaraw){var f=c.CodeName||"ThisWorkbook";write_biff_rec(n,442,write_XLUnicodeString(f))}write_biff_rec(n,156,writeuint16(17)),write_biff_rec(n,25,writebool(!1)),write_biff_rec(n,18,writebool(!1)),write_biff_rec(n,19,writeuint16(0)),d&&write_biff_rec(n,431,writebool(!1)),d&&write_biff_rec(n,444,writeuint16(0)),write_biff_rec(n,61,write_Window1()),write_biff_rec(n,64,writebool(!1)),write_biff_rec(n,141,writeuint16(0)),write_biff_rec(n,34,writebool(safe1904(e)=="true")),write_biff_rec(n,14,writebool(!0)),d&&write_biff_rec(n,439,writebool(!1)),write_biff_rec(n,218,writeuint16(0)),write_FONTS_biff8(n,e,r),write_FMTS_biff8(n,e.SSF,r),write_CELLXFS_biff8(n,r),d&&write_biff_rec(n,352,writebool(!1));var h=n.end(),g=buf_array();d&&write_biff_rec(g,140,write_Country()),d&&r.Strings&&write_biff_continue(g,252,write_SST(r.Strings)),write_biff_rec(g,10);var y=g.end(),_=buf_array(),E=0,b=0;for(b=0;b<e.SheetNames.length;++b)E+=(d?12:11)+(d?2:1)*e.SheetNames[b].length;var v=h.length+E+y.length;for(b=0;b<e.SheetNames.length;++b){var R=l[b]||{};write_biff_rec(_,133,write_BoundSheet8({pos:v,hs:R.Hidden||0,dt:0,name:e.SheetNames[b]},r)),v+=t[b].length}var A=_.end();if(E!=A.length)throw new Error("BS8 "+E+" != "+A.length);var C=[];return h.length&&C.push(h),A.length&&C.push(A),y.length&&C.push(y),bconcat(C)}function write_biff8_buf(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=dup(table_fmt)),e&&e.SSF&&(make_ssf(),SSF_load_table(e.SSF),r.revssf=evert_num(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,fix_write_opts(r),r.cellXfs=[],get_cell_style(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=write_ws_biff8(a,r,e);return n.unshift(write_biff8_global(e,n,r)),bconcat(n)}function write_biff_buf(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=decode_range(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var l=t||{};switch(l.biff||2){case 8:case 5:return write_biff8_buf(e,t);case 4:case 3:case 2:return write_biff2_buf(e,t)}throw new Error("invalid type "+l.bookType+" for BIFF")}function make_html_row(e,t,r,n){for(var a=e["!merges"]||[],l=[],c=t.s.c;c<=t.e.c;++c){for(var d=0,x=0,f=0;f<a.length;++f)if(!(a[f].s.r>r||a[f].s.c>c)&&!(a[f].e.r<r||a[f].e.c<c)){if(a[f].s.r<r||a[f].s.c<c){d=-1;break}d=a[f].e.r-a[f].s.r+1,x=a[f].e.c-a[f].s.c+1;break}if(!(d<0)){var h=encode_cell({r,c}),g=n.dense?(e[r]||[])[c]:e[h],y=g&&g.v!=null&&(g.h||escapehtml(g.w||(format_cell(g),g.w)||""))||"",_={};d>1&&(_.rowspan=d),x>1&&(_.colspan=x),n.editable?y='<span contenteditable="true">'+y+"</span>":g&&(_["data-t"]=g&&g.t||"z",g.v!=null&&(_["data-v"]=g.v),g.z!=null&&(_["data-z"]=g.z),g.l&&(g.l.Target||"#").charAt(0)!="#"&&(y='<a href="'+g.l.Target+'">'+y+"</a>")),_.id=(n.id||"sjs")+"-"+h,l.push(writextag("td",y,_))}}var E="<tr>";return E+l.join("")+"</tr>"}var HTML_BEGIN='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',HTML_END="</body></html>";function make_html_preamble(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function sheet_to_html(e,t){var r=t||{},n=r.header!=null?r.header:HTML_BEGIN,a=r.footer!=null?r.footer:HTML_END,l=[n],c=decode_range(e["!ref"]);r.dense=Array.isArray(e),l.push(make_html_preamble(e,c,r));for(var d=c.s.r;d<=c.e.r;++d)l.push(make_html_row(e,c,d,r));return l.push("</table>"+a),l.join("")}function sheet_add_dom(e,t,r){var n=r||{},a=0,l=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var c=typeof n.origin=="string"?decode_cell(n.origin):n.origin;a=c.r,l=c.c}var d=t.getElementsByTagName("tr"),x=Math.min(n.sheetRows||1e7,d.length),f={s:{r:0,c:0},e:{r:a,c:l}};if(e["!ref"]){var h=decode_range(e["!ref"]);f.s.r=Math.min(f.s.r,h.s.r),f.s.c=Math.min(f.s.c,h.s.c),f.e.r=Math.max(f.e.r,h.e.r),f.e.c=Math.max(f.e.c,h.e.c),a==-1&&(f.e.r=a=h.e.r+1)}var g=[],y=0,_=e["!rows"]||(e["!rows"]=[]),E=0,b=0,v=0,R=0,A=0,C=0;for(e["!cols"]||(e["!cols"]=[]);E<d.length&&b<x;++E){var L=d[E];if(is_dom_element_hidden(L)){if(n.display)continue;_[b]={hidden:!0}}var I=L.children;for(v=R=0;v<I.length;++v){var ae=I[v];if(!(n.display&&is_dom_element_hidden(ae))){var D=ae.hasAttribute("data-v")?ae.getAttribute("data-v"):ae.hasAttribute("v")?ae.getAttribute("v"):htmldecode(ae.innerHTML),ee=ae.getAttribute("data-z")||ae.getAttribute("z");for(y=0;y<g.length;++y){var Y=g[y];Y.s.c==R+l&&Y.s.r<b+a&&b+a<=Y.e.r&&(R=Y.e.c+1-l,y=-1)}C=+ae.getAttribute("colspan")||1,((A=+ae.getAttribute("rowspan")||1)>1||C>1)&&g.push({s:{r:b+a,c:R+l},e:{r:b+a+(A||1)-1,c:R+l+(C||1)-1}});var le={t:"s",v:D},te=ae.getAttribute("data-t")||ae.getAttribute("t")||"";D!=null&&(D.length==0?le.t=te||"z":n.raw||D.trim().length==0||te=="s"||(D==="TRUE"?le={t:"b",v:!0}:D==="FALSE"?le={t:"b",v:!1}:isNaN(fuzzynum(D))?isNaN(fuzzydate(D).getDate())||(le={t:"d",v:parseDate(D)},n.cellDates||(le={t:"n",v:datenum(le.v)}),le.z=n.dateNF||table_fmt[14]):le={t:"n",v:fuzzynum(D)})),le.z===void 0&&ee!=null&&(le.z=ee);var oe="",Be=ae.getElementsByTagName("A");if(Be&&Be.length)for(var Pe=0;Pe<Be.length&&!(Be[Pe].hasAttribute("href")&&(oe=Be[Pe].getAttribute("href"),oe.charAt(0)!="#"));++Pe);oe&&oe.charAt(0)!="#"&&(le.l={Target:oe}),n.dense?(e[b+a]||(e[b+a]=[]),e[b+a][R+l]=le):e[encode_cell({c:R+l,r:b+a})]=le,f.e.c<R+l&&(f.e.c=R+l),R+=C}}++b}return g.length&&(e["!merges"]=(e["!merges"]||[]).concat(g)),f.e.r=Math.max(f.e.r,b-1+a),e["!ref"]=encode_range(f),b>=x&&(e["!fullref"]=encode_range((f.e.r=d.length-E+b-1+a,f))),e}function parse_dom_table(e,t){var r=t||{},n=r.dense?[]:{};return sheet_add_dom(n,e,t)}function table_to_book(e,t){return sheet_to_workbook(parse_dom_table(e,t),t)}function is_dom_element_hidden(e){var t="",r=get_get_computed_style_function(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function get_get_computed_style_function(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var write_styles_ods=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return XML_HEADER+t}})(),write_content_ods=(function(){var e=function(l){return escapexml(l).replace(/  +/g,function(c){return'<text:s text:c="'+c.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(l,c,d){var x=[];x.push('      <table:table table:name="'+escapexml(c.SheetNames[d])+`" table:style-name="ta1">
`);var f=0,h=0,g=decode_range(l["!ref"]||"A1"),y=l["!merges"]||[],_=0,E=Array.isArray(l);if(l["!cols"])for(h=0;h<=g.e.c;++h)x.push("        <table:table-column"+(l["!cols"][h]?' table:style-name="co'+l["!cols"][h].ods+'"':"")+`></table:table-column>
`);var b="",v=l["!rows"]||[];for(f=0;f<g.s.r;++f)b=v[f]?' table:style-name="ro'+v[f].ods+'"':"",x.push("        <table:table-row"+b+`></table:table-row>
`);for(;f<=g.e.r;++f){for(b=v[f]?' table:style-name="ro'+v[f].ods+'"':"",x.push("        <table:table-row"+b+`>
`),h=0;h<g.s.c;++h)x.push(t);for(;h<=g.e.c;++h){var R=!1,A={},C="";for(_=0;_!=y.length;++_)if(!(y[_].s.c>h)&&!(y[_].s.r>f)&&!(y[_].e.c<h)&&!(y[_].e.r<f)){(y[_].s.c!=h||y[_].s.r!=f)&&(R=!0),A["table:number-columns-spanned"]=y[_].e.c-y[_].s.c+1,A["table:number-rows-spanned"]=y[_].e.r-y[_].s.r+1;break}if(R){x.push(r);continue}var L=encode_cell({r:f,c:h}),I=E?(l[f]||[])[h]:l[L];if(I&&I.f&&(A["table:formula"]=escapexml(csf_to_ods_formula(I.f)),I.F&&I.F.slice(0,L.length)==L)){var ae=decode_range(I.F);A["table:number-matrix-columns-spanned"]=ae.e.c-ae.s.c+1,A["table:number-matrix-rows-spanned"]=ae.e.r-ae.s.r+1}if(!I){x.push(t);continue}switch(I.t){case"b":C=I.v?"TRUE":"FALSE",A["office:value-type"]="boolean",A["office:boolean-value"]=I.v?"true":"false";break;case"n":C=I.w||String(I.v||0),A["office:value-type"]="float",A["office:value"]=I.v||0;break;case"s":case"str":C=I.v==null?"":I.v,A["office:value-type"]="string";break;case"d":C=I.w||parseDate(I.v).toISOString(),A["office:value-type"]="date",A["office:date-value"]=parseDate(I.v).toISOString(),A["table:style-name"]="ce1";break;default:x.push(t);continue}var D=e(C);if(I.l&&I.l.Target){var ee=I.l.Target;ee=ee.charAt(0)=="#"?"#"+csf_to_ods_3D(ee.slice(1)):ee,ee.charAt(0)!="#"&&!ee.match(/^\w+:/)&&(ee="../"+ee),D=writextag("text:a",D,{"xlink:href":ee.replace(/&/g,"&amp;")})}x.push("          "+writextag("table:table-cell",writextag("text:p",D,{}),A)+`
`)}x.push(`        </table:table-row>
`)}return x.push(`      </table:table>
`),x.join("")},a=function(l,c){l.push(` <office:automatic-styles>
`),l.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),l.push(`   <number:month number:style="long"/>
`),l.push(`   <number:text>/</number:text>
`),l.push(`   <number:day number:style="long"/>
`),l.push(`   <number:text>/</number:text>
`),l.push(`   <number:year/>
`),l.push(`  </number:date-style>
`);var d=0;c.SheetNames.map(function(f){return c.Sheets[f]}).forEach(function(f){if(f&&f["!cols"]){for(var h=0;h<f["!cols"].length;++h)if(f["!cols"][h]){var g=f["!cols"][h];if(g.width==null&&g.wpx==null&&g.wch==null)continue;process_col(g),g.ods=d;var y=f["!cols"][h].wpx+"px";l.push('  <style:style style:name="co'+d+`" style:family="table-column">
`),l.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+y+`"/>
`),l.push(`  </style:style>
`),++d}}});var x=0;c.SheetNames.map(function(f){return c.Sheets[f]}).forEach(function(f){if(f&&f["!rows"]){for(var h=0;h<f["!rows"].length;++h)if(f["!rows"][h]){f["!rows"][h].ods=x;var g=f["!rows"][h].hpx+"px";l.push('  <style:style style:name="ro'+x+`" style:family="table-row">
`),l.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+g+`"/>
`),l.push(`  </style:style>
`),++x}}}),l.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),l.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),l.push(`  </style:style>
`),l.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),l.push(` </office:automatic-styles>
`)};return function(c,d){var x=[XML_HEADER],f=wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=wxt_helper({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});d.bookType=="fods"?(x.push("<office:document"+f+h+`>
`),x.push(write_meta_ods().replace(/office:document-meta/g,"office:meta"))):x.push("<office:document-content"+f+`>
`),a(x,c),x.push(`  <office:body>
`),x.push(`    <office:spreadsheet>
`);for(var g=0;g!=c.SheetNames.length;++g)x.push(n(c.Sheets[c.SheetNames[g]],c,g));return x.push(`    </office:spreadsheet>
`),x.push(`  </office:body>
`),d.bookType=="fods"?x.push("</office:document>"):x.push("</office:document-content>"),x.join("")}})();function write_ods(e,t){if(t.bookType=="fods")return write_content_ods(e,t);var r=zip_new(),n="",a=[],l=[];return n="mimetype",zip_add_file(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",zip_add_file(r,n,write_content_ods(e,t)),a.push([n,"text/xml"]),l.push([n,"ContentFile"]),n="styles.xml",zip_add_file(r,n,write_styles_ods(e,t)),a.push([n,"text/xml"]),l.push([n,"StylesFile"]),n="meta.xml",zip_add_file(r,n,XML_HEADER+write_meta_ods()),a.push([n,"text/xml"]),l.push([n,"MetadataFile"]),n="manifest.rdf",zip_add_file(r,n,write_rdf(l)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",zip_add_file(r,n,write_manifest(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function u8_to_dataview(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function stru8(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):s2a(utf8write(e))}function u8contains(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function u8concat(e){var t=e.reduce(function(a,l){return a+l.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function writeDecimal128LE(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var l=0;a>=1;++l,a/=256)e[t+l]=a&255;e[t+15]|=r>=0?0:128}function parse_varint49(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function write_varint49(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function varint_to_i32(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function parse_shallow(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=parse_varint49(e,r),l=a&7;a=Math.floor(a/8);var c=0,d;if(a==0)break;switch(l){case 0:{for(var x=r[0];e[r[0]++]>=128;);d=e.slice(x,r[0])}break;case 5:c=4,d=e.slice(r[0],r[0]+c),r[0]+=c;break;case 1:c=8,d=e.slice(r[0],r[0]+c),r[0]+=c;break;case 2:c=parse_varint49(e,r),d=e.slice(r[0],r[0]+c),r[0]+=c;break;case 3:case 4:default:throw new Error("PB Type ".concat(l," for Field ").concat(a," at offset ").concat(n))}var f={data:d,type:l};t[a]==null?t[a]=[f]:t[a].push(f)}return t}function write_shallow(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(write_varint49(n*8+a.type)),a.type==2&&t.push(write_varint49(a.data.length)),t.push(a.data))})}),u8concat(t)}function parse_iwa_file(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=parse_varint49(e,n),l=parse_shallow(e.slice(n[0],n[0]+a));n[0]+=a;var c={id:varint_to_i32(l[1][0].data),messages:[]};l[2].forEach(function(d){var x=parse_shallow(d.data),f=varint_to_i32(x[3][0].data);c.messages.push({meta:x,data:e.slice(n[0],n[0]+f)}),n[0]+=f}),(t=l[3])!=null&&t[0]&&(c.merge=varint_to_i32(l[3][0].data)>>>0>0),r.push(c)}return r}function write_iwa_file(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:write_varint49(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:write_varint49(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(c){a.push(c.data),c.meta[3]=[{type:0,data:write_varint49(c.data.length)}],n[2].push({data:write_shallow(c.meta),type:2})});var l=write_shallow(n);t.push(write_varint49(l.length)),t.push(l),a.forEach(function(c){return t.push(c)})}),u8concat(t)}function parse_snappy_chunk(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=parse_varint49(t,r),a=[];r[0]<t.length;){var l=t[r[0]]&3;if(l==0){var c=t[r[0]++]>>2;if(c<60)++c;else{var d=c-59;c=t[r[0]],d>1&&(c|=t[r[0]+1]<<8),d>2&&(c|=t[r[0]+2]<<16),d>3&&(c|=t[r[0]+3]<<24),c>>>=0,c++,r[0]+=d}a.push(t.slice(r[0],r[0]+c)),r[0]+=c;continue}else{var x=0,f=0;if(l==1?(f=(t[r[0]]>>2&7)+4,x=(t[r[0]++]&224)<<3,x|=t[r[0]++]):(f=(t[r[0]++]>>2)+1,l==2?(x=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(x=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[u8concat(a)],x==0)throw new Error("Invalid offset 0");if(x>a[0].length)throw new Error("Invalid offset beyond length");if(f>=x)for(a.push(a[0].slice(-x)),f-=x;f>=a[a.length-1].length;)a.push(a[a.length-1]),f-=a[a.length-1].length;a.push(a[0].slice(-x,-x+f))}}var h=u8concat(a);if(h.length!=n)throw new Error("Unexpected length: ".concat(h.length," != ").concat(n));return h}function decompress_iwa_file(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(parse_snappy_chunk(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return u8concat(t)}function compress_iwa_file(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var l=write_varint49(n),c=l.length;t.push(l),n<=60?(c++,t.push(new Uint8Array([n-1<<2]))):n<=256?(c+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(c+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(c+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(c+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),c+=n,a[0]=0,a[1]=c&255,a[2]=c>>8&255,a[3]=c>>16&255,r+=n}return u8concat(t)}function write_new_storage(e,t){var r=new Uint8Array(32),n=u8_to_dataview(r),a=12,l=0;switch(r[0]=5,e.t){case"n":r[1]=2,writeDecimal128LE(r,a,e.v),l|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),l|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),l|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,l,!0),r.slice(0,a)}function write_old_storage(e,t){var r=new Uint8Array(32),n=u8_to_dataview(r),a=12,l=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),l|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),l|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),l|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,l,!0),r.slice(0,a)}function parse_TSP_Reference(e){var t=parse_shallow(e);return parse_varint49(t[1][0].data)}function write_tile_row(e,t,r){var n,a,l,c;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var d=((c=(l=e[8])==null?void 0:l[0])==null?void 0:c.data)&&varint_to_i32(e[8][0].data)>0||!1;if(d)throw"Math only works with normal offsets";for(var x=0,f=u8_to_dataview(e[7][0].data),h=0,g=[],y=u8_to_dataview(e[4][0].data),_=0,E=[],b=0;b<t.length;++b){if(t[b]==null){f.setUint16(b*2,65535,!0),y.setUint16(b*2,65535);continue}f.setUint16(b*2,h,!0),y.setUint16(b*2,_,!0);var v,R;switch(typeof t[b]){case"string":v=write_new_storage({t:"s",v:t[b]},r),R=write_old_storage({t:"s",v:t[b]},r);break;case"number":v=write_new_storage({t:"n",v:t[b]},r),R=write_old_storage({t:"n",v:t[b]},r);break;case"boolean":v=write_new_storage({t:"b",v:t[b]},r),R=write_old_storage({t:"b",v:t[b]},r);break;default:throw new Error("Unsupported value "+t[b])}g.push(v),h+=v.length,E.push(R),_+=R.length,++x}for(e[2][0].data=write_varint49(x);b<e[7][0].data.length/2;++b)f.setUint16(b*2,65535,!0),y.setUint16(b*2,65535,!0);return e[6][0].data=u8concat(g),e[3][0].data=u8concat(E),x}function write_numbers_iwa(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=decode_range(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(encode_range(n)));var l=sheet_to_json(r,{range:n,header:1}),c=["~Sh33tJ5~"];l.forEach(function(j){return j.forEach(function(M){typeof M=="string"&&c.push(M)})});var d={},x=[],f=CFB.read(t.numbers,{type:"base64"});f.FileIndex.map(function(j,M){return[j,f.FullPaths[M]]}).forEach(function(j){var M=j[0],U=j[1];if(M.type==2&&M.name.match(/\.iwa/)){var K=M.content,Le=decompress_iwa_file(K),ve=parse_iwa_file(Le);ve.forEach(function(Ae){x.push(Ae.id),d[Ae.id]={deps:[],location:U,type:varint_to_i32(Ae.messages[0].meta[1][0].data)}})}}),x.sort(function(j,M){return j-M});var h=x.filter(function(j){return j>1}).map(function(j){return[j,write_varint49(j)]});f.FileIndex.map(function(j,M){return[j,f.FullPaths[M]]}).forEach(function(j){var M=j[0];if(j[1],!!M.name.match(/\.iwa/)){var U=parse_iwa_file(decompress_iwa_file(M.content));U.forEach(function(K){K.messages.forEach(function(Le){h.forEach(function(ve){K.messages.some(function(Ae){return varint_to_i32(Ae.meta[1][0].data)!=11006&&u8contains(Ae.data,ve[1])})&&d[ve[0]].deps.push(K.id)})})})}});for(var g=CFB.find(f,d[1].location),y=parse_iwa_file(decompress_iwa_file(g.content)),_,E=0;E<y.length;++E){var b=y[E];b.id==1&&(_=b)}var v=parse_TSP_Reference(parse_shallow(_.messages[0].data)[1][0].data);for(g=CFB.find(f,d[v].location),y=parse_iwa_file(decompress_iwa_file(g.content)),E=0;E<y.length;++E)b=y[E],b.id==v&&(_=b);for(v=parse_TSP_Reference(parse_shallow(_.messages[0].data)[2][0].data),g=CFB.find(f,d[v].location),y=parse_iwa_file(decompress_iwa_file(g.content)),E=0;E<y.length;++E)b=y[E],b.id==v&&(_=b);for(v=parse_TSP_Reference(parse_shallow(_.messages[0].data)[2][0].data),g=CFB.find(f,d[v].location),y=parse_iwa_file(decompress_iwa_file(g.content)),E=0;E<y.length;++E)b=y[E],b.id==v&&(_=b);var R=parse_shallow(_.messages[0].data);{R[6][0].data=write_varint49(n.e.r+1),R[7][0].data=write_varint49(n.e.c+1);var A=parse_TSP_Reference(R[46][0].data),C=CFB.find(f,d[A].location),L=parse_iwa_file(decompress_iwa_file(C.content));{for(var I=0;I<L.length&&L[I].id!=A;++I);if(L[I].id!=A)throw"Bad ColumnRowUIDMapArchive";var ae=parse_shallow(L[I].messages[0].data);ae[1]=[],ae[2]=[],ae[3]=[];for(var D=0;D<=n.e.c;++D){var ee=[];ee[1]=ee[2]=[{type:0,data:write_varint49(D+420690)}],ae[1].push({type:2,data:write_shallow(ee)}),ae[2].push({type:0,data:write_varint49(D)}),ae[3].push({type:0,data:write_varint49(D)})}ae[4]=[],ae[5]=[],ae[6]=[];for(var Y=0;Y<=n.e.r;++Y)ee=[],ee[1]=ee[2]=[{type:0,data:write_varint49(Y+726270)}],ae[4].push({type:2,data:write_shallow(ee)}),ae[5].push({type:0,data:write_varint49(Y)}),ae[6].push({type:0,data:write_varint49(Y)});L[I].messages[0].data=write_shallow(ae)}C.content=compress_iwa_file(write_iwa_file(L)),C.size=C.content.length,delete R[46];var le=parse_shallow(R[4][0].data);{le[7][0].data=write_varint49(n.e.r+1);var te=parse_shallow(le[1][0].data),oe=parse_TSP_Reference(te[2][0].data);C=CFB.find(f,d[oe].location),L=parse_iwa_file(decompress_iwa_file(C.content));{if(L[0].id!=oe)throw"Bad HeaderStorageBucket";var Be=parse_shallow(L[0].messages[0].data);for(Y=0;Y<l.length;++Y){var Pe=parse_shallow(Be[2][0].data);Pe[1][0].data=write_varint49(Y),Pe[4][0].data=write_varint49(l[Y].length),Be[2][Y]={type:Be[2][0].type,data:write_shallow(Pe)}}L[0].messages[0].data=write_shallow(Be)}C.content=compress_iwa_file(write_iwa_file(L)),C.size=C.content.length;var De=parse_TSP_Reference(le[2][0].data);C=CFB.find(f,d[De].location),L=parse_iwa_file(decompress_iwa_file(C.content));{if(L[0].id!=De)throw"Bad HeaderStorageBucket";for(Be=parse_shallow(L[0].messages[0].data),D=0;D<=n.e.c;++D)Pe=parse_shallow(Be[2][0].data),Pe[1][0].data=write_varint49(D),Pe[4][0].data=write_varint49(n.e.r+1),Be[2][D]={type:Be[2][0].type,data:write_shallow(Pe)};L[0].messages[0].data=write_shallow(Be)}C.content=compress_iwa_file(write_iwa_file(L)),C.size=C.content.length;var X=parse_TSP_Reference(le[4][0].data);(function(){for(var j=CFB.find(f,d[X].location),M=parse_iwa_file(decompress_iwa_file(j.content)),U,K=0;K<M.length;++K){var Le=M[K];Le.id==X&&(U=Le)}var ve=parse_shallow(U.messages[0].data);{ve[3]=[];var Ae=[];c.forEach(function(be,Ne){Ae[1]=[{type:0,data:write_varint49(Ne)}],Ae[2]=[{type:0,data:write_varint49(1)}],Ae[3]=[{type:2,data:stru8(be)}],ve[3].push({type:2,data:write_shallow(Ae)})})}U.messages[0].data=write_shallow(ve);var ye=write_iwa_file(M),V=compress_iwa_file(ye);j.content=V,j.size=j.content.length})();var Se=parse_shallow(le[3][0].data);{var z=Se[1][0];delete Se[2];var re=parse_shallow(z.data);{var T=parse_TSP_Reference(re[2][0].data);(function(){for(var j=CFB.find(f,d[T].location),M=parse_iwa_file(decompress_iwa_file(j.content)),U,K=0;K<M.length;++K){var Le=M[K];Le.id==T&&(U=Le)}var ve=parse_shallow(U.messages[0].data);{delete ve[6],delete Se[7];var Ae=new Uint8Array(ve[5][0].data);ve[5]=[];for(var ye=0,V=0;V<=n.e.r;++V){var be=parse_shallow(Ae);ye+=write_tile_row(be,l[V],c),be[1][0].data=write_varint49(V),ve[5].push({data:write_shallow(be),type:2})}ve[1]=[{type:0,data:write_varint49(n.e.c+1)}],ve[2]=[{type:0,data:write_varint49(n.e.r+1)}],ve[3]=[{type:0,data:write_varint49(ye)}],ve[4]=[{type:0,data:write_varint49(n.e.r+1)}]}U.messages[0].data=write_shallow(ve);var Ne=write_iwa_file(M),H=compress_iwa_file(Ne);j.content=H,j.size=j.content.length})()}z.data=write_shallow(re)}le[3][0].data=write_shallow(Se)}R[4][0].data=write_shallow(le)}_.messages[0].data=write_shallow(R);var J=write_iwa_file(y),B=compress_iwa_file(J);return g.content=B,g.size=g.content.length,f}function fix_opts_func(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function fix_write_opts(e){fix_opts_func([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function write_zip(e,t){return t.bookType=="ods"?write_ods(e,t):t.bookType=="numbers"?write_numbers_iwa(e,t):t.bookType=="xlsb"?write_zip_xlsxb(e,t):write_zip_xlsx(e,t)}function write_zip_xlsxb(e,t){_shapeid=1024,e&&!e.SSF&&(e.SSF=dup(table_fmt)),e&&e.SSF&&(make_ssf(),SSF_load_table(e.SSF),t.revssf=evert_num(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,browser_has_Map?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=VBAFMTS.indexOf(t.bookType)>-1,a=new_ct();fix_write_opts(t=t||{});var l=zip_new(),c="",d=0;if(t.cellXfs=[],get_cell_style(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),c="docProps/core.xml",zip_add_file(l,c,write_core_props(e.Props,t)),a.coreprops.push(c),add_rels(t.rels,2,c,RELS.CORE_PROPS),c="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var x=[],f=0;f<e.SheetNames.length;++f)(e.Workbook.Sheets[f]||{}).Hidden!=2&&x.push(e.SheetNames[f]);e.Props.SheetNames=x}for(e.Props.Worksheets=e.Props.SheetNames.length,zip_add_file(l,c,write_ext_props(e.Props)),a.extprops.push(c),add_rels(t.rels,3,c,RELS.EXT_PROPS),e.Custprops!==e.Props&&keys(e.Custprops||{}).length>0&&(c="docProps/custom.xml",zip_add_file(l,c,write_cust_props(e.Custprops)),a.custprops.push(c),add_rels(t.rels,4,c,RELS.CUST_PROPS)),d=1;d<=e.SheetNames.length;++d){var h={"!id":{}},g=e.Sheets[e.SheetNames[d-1]],y=(g||{})["!type"]||"sheet";switch(y){case"chart":default:c="xl/worksheets/sheet"+d+"."+r,zip_add_file(l,c,write_ws(d-1,c,t,e,h)),a.sheets.push(c),add_rels(t.wbrels,-1,"worksheets/sheet"+d+"."+r,RELS.WS[0])}if(g){var _=g["!comments"],E=!1,b="";_&&_.length>0&&(b="xl/comments"+d+"."+r,zip_add_file(l,b,write_cmnt(_,b)),a.comments.push(b),add_rels(h,-1,"../comments"+d+"."+r,RELS.CMNT),E=!0),g["!legacy"]&&E&&zip_add_file(l,"xl/drawings/vmlDrawing"+d+".vml",write_comments_vml(d,g["!comments"])),delete g["!comments"],delete g["!legacy"]}h["!id"].rId1&&zip_add_file(l,get_rels_path(c),write_rels(h))}return t.Strings!=null&&t.Strings.length>0&&(c="xl/sharedStrings."+r,zip_add_file(l,c,write_sst(t.Strings,c,t)),a.strs.push(c),add_rels(t.wbrels,-1,"sharedStrings."+r,RELS.SST)),c="xl/workbook."+r,zip_add_file(l,c,write_wb(e,c)),a.workbooks.push(c),add_rels(t.rels,1,c,RELS.WB),c="xl/theme/theme1.xml",zip_add_file(l,c,write_theme(e.Themes,t)),a.themes.push(c),add_rels(t.wbrels,-1,"theme/theme1.xml",RELS.THEME),c="xl/styles."+r,zip_add_file(l,c,write_sty(e,c,t)),a.styles.push(c),add_rels(t.wbrels,-1,"styles."+r,RELS.STY),e.vbaraw&&n&&(c="xl/vbaProject.bin",zip_add_file(l,c,e.vbaraw),a.vba.push(c),add_rels(t.wbrels,-1,"vbaProject.bin",RELS.VBA)),c="xl/metadata."+r,zip_add_file(l,c,write_xlmeta(c)),a.metadata.push(c),add_rels(t.wbrels,-1,"metadata."+r,RELS.XLMETA),zip_add_file(l,"[Content_Types].xml",write_ct(a,t)),zip_add_file(l,"_rels/.rels",write_rels(t.rels)),zip_add_file(l,"xl/_rels/workbook."+r+".rels",write_rels(t.wbrels)),delete t.revssf,delete t.ssf,l}function write_zip_xlsx(e,t){_shapeid=1024,e&&!e.SSF&&(e.SSF=dup(table_fmt)),e&&e.SSF&&(make_ssf(),SSF_load_table(e.SSF),t.revssf=evert_num(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,browser_has_Map?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=VBAFMTS.indexOf(t.bookType)>-1,a=new_ct();fix_write_opts(t=t||{});var l=zip_new(),c="",d=0;if(t.cellXfs=[],get_cell_style(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),c="docProps/core.xml",zip_add_file(l,c,write_core_props(e.Props,t)),a.coreprops.push(c),add_rels(t.rels,2,c,RELS.CORE_PROPS),c="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var x=[],f=0;f<e.SheetNames.length;++f)(e.Workbook.Sheets[f]||{}).Hidden!=2&&x.push(e.SheetNames[f]);e.Props.SheetNames=x}e.Props.Worksheets=e.Props.SheetNames.length,zip_add_file(l,c,write_ext_props(e.Props)),a.extprops.push(c),add_rels(t.rels,3,c,RELS.EXT_PROPS),e.Custprops!==e.Props&&keys(e.Custprops||{}).length>0&&(c="docProps/custom.xml",zip_add_file(l,c,write_cust_props(e.Custprops)),a.custprops.push(c),add_rels(t.rels,4,c,RELS.CUST_PROPS));var h=["SheetJ5"];for(t.tcid=0,d=1;d<=e.SheetNames.length;++d){var g={"!id":{}},y=e.Sheets[e.SheetNames[d-1]],_=(y||{})["!type"]||"sheet";switch(_){case"chart":default:c="xl/worksheets/sheet"+d+"."+r,zip_add_file(l,c,write_ws_xml(d-1,t,e,g)),a.sheets.push(c),add_rels(t.wbrels,-1,"worksheets/sheet"+d+"."+r,RELS.WS[0])}if(y){var E=y["!comments"],b=!1,v="";if(E&&E.length>0){var R=!1;E.forEach(function(A){A[1].forEach(function(C){C.T==!0&&(R=!0)})}),R&&(v="xl/threadedComments/threadedComment"+d+"."+r,zip_add_file(l,v,write_tcmnt_xml(E,h,t)),a.threadedcomments.push(v),add_rels(g,-1,"../threadedComments/threadedComment"+d+"."+r,RELS.TCMNT)),v="xl/comments"+d+"."+r,zip_add_file(l,v,write_comments_xml(E)),a.comments.push(v),add_rels(g,-1,"../comments"+d+"."+r,RELS.CMNT),b=!0}y["!legacy"]&&b&&zip_add_file(l,"xl/drawings/vmlDrawing"+d+".vml",write_comments_vml(d,y["!comments"])),delete y["!comments"],delete y["!legacy"]}g["!id"].rId1&&zip_add_file(l,get_rels_path(c),write_rels(g))}return t.Strings!=null&&t.Strings.length>0&&(c="xl/sharedStrings."+r,zip_add_file(l,c,write_sst_xml(t.Strings,t)),a.strs.push(c),add_rels(t.wbrels,-1,"sharedStrings."+r,RELS.SST)),c="xl/workbook."+r,zip_add_file(l,c,write_wb_xml(e)),a.workbooks.push(c),add_rels(t.rels,1,c,RELS.WB),c="xl/theme/theme1.xml",zip_add_file(l,c,write_theme(e.Themes,t)),a.themes.push(c),add_rels(t.wbrels,-1,"theme/theme1.xml",RELS.THEME),c="xl/styles."+r,zip_add_file(l,c,write_sty_xml(e,t)),a.styles.push(c),add_rels(t.wbrels,-1,"styles."+r,RELS.STY),e.vbaraw&&n&&(c="xl/vbaProject.bin",zip_add_file(l,c,e.vbaraw),a.vba.push(c),add_rels(t.wbrels,-1,"vbaProject.bin",RELS.VBA)),c="xl/metadata."+r,zip_add_file(l,c,write_xlmeta_xml()),a.metadata.push(c),add_rels(t.wbrels,-1,"metadata."+r,RELS.XLMETA),h.length>1&&(c="xl/persons/person.xml",zip_add_file(l,c,write_people_xml(h)),a.people.push(c),add_rels(t.wbrels,-1,"persons/person.xml",RELS.PEOPLE)),zip_add_file(l,"[Content_Types].xml",write_ct(a,t)),zip_add_file(l,"_rels/.rels",write_rels(t.rels)),zip_add_file(l,"xl/_rels/workbook."+r+".rels",write_rels(t.wbrels)),delete t.revssf,delete t.ssf,l}function firstbyte(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Base64_decode(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function write_cfb_ctr(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return write_dl(t.file,CFB.write(e,{type:has_buf?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return CFB.write(e,t)}function write_zip_type(e,t){var r=dup(t||{}),n=write_zip(e,r);return write_zip_denouement(n,r)}function write_zip_denouement(e,t){var r={},n=has_buf?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?CFB.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(s2ab(a))}return t.password&&typeof encrypt_agile<"u"?write_cfb_ctr(encrypt_agile(a,t.password),t):t.type==="file"?write_dl(t.file,a):t.type=="string"?utf8read(a):a}function write_cfb_type(e,t){var r=t||{},n=write_xlscfb(e,r);return write_cfb_ctr(n,r)}function write_string_type(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Base64_encode(utf8write(n));case"binary":return utf8write(n);case"string":return e;case"file":return write_dl(t.file,n,"utf8");case"buffer":return has_buf?Buffer_from(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):write_string_type(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function write_stxt_type(e,t){switch(t.type){case"base64":return Base64_encode(e);case"binary":return e;case"string":return e;case"file":return write_dl(t.file,e,"binary");case"buffer":return has_buf?Buffer_from(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function write_binary_type(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Base64_encode(r):t.type=="string"?utf8read(r):r;case"file":return write_dl(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function writeSync(e,t){reset_cp(),check_wb(e);var r=dup(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=writeSync(e,r);return r.type="array",s2ab(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return write_string_type(write_xlml(e,r),r);case"slk":case"sylk":return write_string_type(SYLK.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return write_string_type(sheet_to_html(e.Sheets[e.SheetNames[a]],r),r);case"txt":return write_stxt_type(sheet_to_txt(e.Sheets[e.SheetNames[a]],r),r);case"csv":return write_string_type(sheet_to_csv(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return write_string_type(DIF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return write_binary_type(DBF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return write_string_type(PRN.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return write_string_type(RTF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return write_string_type(ETH.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return write_string_type(write_ods(e,r),r);case"wk1":return write_binary_type(WK_.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return write_binary_type(WK_.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),write_binary_type(write_biff_buf(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),write_cfb_type(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return write_zip_type(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function resolve_book_type(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function writeFileSync(e,t,r){var n={};return n.type="file",n.file=t,resolve_book_type(n),writeSync(e,n)}function make_json_row(e,t,r,n,a,l,c,d){var x=encode_row(r),f=d.defval,h=d.raw||!Object.prototype.hasOwnProperty.call(d,"raw"),g=!0,y=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(y,"__rowNum__",{value:r,enumerable:!1})}catch{y.__rowNum__=r}else y.__rowNum__=r;if(!c||e[r])for(var _=t.s.c;_<=t.e.c;++_){var E=c?e[r][_]:e[n[_]+x];if(E===void 0||E.t===void 0){if(f===void 0)continue;l[_]!=null&&(y[l[_]]=f);continue}var b=E.v;switch(E.t){case"z":if(b==null)break;continue;case"e":b=b==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+E.t)}if(l[_]!=null){if(b==null)if(E.t=="e"&&b===null)y[l[_]]=null;else if(f!==void 0)y[l[_]]=f;else if(h&&b===null)y[l[_]]=null;else continue;else y[l[_]]=h&&(E.t!=="n"||E.t==="n"&&d.rawNumbers!==!1)?b:format_cell(E,b,d);b!=null&&(g=!1)}}return{row:y,isempty:g}}function sheet_to_json(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,l=[],c=0,d="",x={s:{r:0,c:0},e:{r:0,c:0}},f=t||{},h=f.range!=null?f.range:e["!ref"];switch(f.header===1?n=1:f.header==="A"?n=2:Array.isArray(f.header)?n=3:f.header==null&&(n=0),typeof h){case"string":x=safe_decode_range(h);break;case"number":x=safe_decode_range(e["!ref"]),x.s.r=h;break;default:x=h}n>0&&(a=0);var g=encode_row(x.s.r),y=[],_=[],E=0,b=0,v=Array.isArray(e),R=x.s.r,A=0,C={};v&&!e[R]&&(e[R]=[]);var L=f.skipHidden&&e["!cols"]||[],I=f.skipHidden&&e["!rows"]||[];for(A=x.s.c;A<=x.e.c;++A)if(!(L[A]||{}).hidden)switch(y[A]=encode_col(A),r=v?e[R][A]:e[y[A]+g],n){case 1:l[A]=A-x.s.c;break;case 2:l[A]=y[A];break;case 3:l[A]=f.header[A-x.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),d=c=format_cell(r,null,f),b=C[c]||0,!b)C[c]=1;else{do d=c+"_"+b++;while(C[d]);C[c]=b,C[d]=1}l[A]=d}for(R=x.s.r+a;R<=x.e.r;++R)if(!(I[R]||{}).hidden){var ae=make_json_row(e,x,R,y,n,l,v,f);(ae.isempty===!1||(n===1?f.blankrows!==!1:f.blankrows))&&(_[E++]=ae.row)}return _.length=E,_}var qreg=/"/g;function make_csv_row(e,t,r,n,a,l,c,d){for(var x=!0,f=[],h="",g=encode_row(r),y=t.s.c;y<=t.e.c;++y)if(n[y]){var _=d.dense?(e[r]||[])[y]:e[n[y]+g];if(_==null)h="";else if(_.v!=null){x=!1,h=""+(d.rawNumbers&&_.t=="n"?_.v:format_cell(_,null,d));for(var E=0,b=0;E!==h.length;++E)if((b=h.charCodeAt(E))===a||b===l||b===34||d.forceQuotes){h='"'+h.replace(qreg,'""')+'"';break}h=="ID"&&(h='"ID"')}else _.f!=null&&!_.F?(x=!1,h="="+_.f,h.indexOf(",")>=0&&(h='"'+h.replace(qreg,'""')+'"')):h="";f.push(h)}return d.blankrows===!1&&x?null:f.join(c)}function sheet_to_csv(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=safe_decode_range(e["!ref"]),l=n.FS!==void 0?n.FS:",",c=l.charCodeAt(0),d=n.RS!==void 0?n.RS:`
`,x=d.charCodeAt(0),f=new RegExp((l=="|"?"\\|":l)+"+$"),h="",g=[];n.dense=Array.isArray(e);for(var y=n.skipHidden&&e["!cols"]||[],_=n.skipHidden&&e["!rows"]||[],E=a.s.c;E<=a.e.c;++E)(y[E]||{}).hidden||(g[E]=encode_col(E));for(var b=0,v=a.s.r;v<=a.e.r;++v)(_[v]||{}).hidden||(h=make_csv_row(e,a,v,g,c,x,l,n),h!=null&&(n.strip&&(h=h.replace(f,"")),(h||n.blankrows!==!1)&&r.push((b++?d:"")+h)));return delete n.dense,r.join("")}function sheet_to_txt(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=sheet_to_csv(e,t);return r}function sheet_to_formulae(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=safe_decode_range(e["!ref"]),l="",c=[],d,x=[],f=Array.isArray(e);for(d=a.s.c;d<=a.e.c;++d)c[d]=encode_col(d);for(var h=a.s.r;h<=a.e.r;++h)for(l=encode_row(h),d=a.s.c;d<=a.e.c;++d)if(t=c[d]+l,r=f?(e[h]||[])[d]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}x[x.length]=t+"="+n}return x}function sheet_add_json(e,t,r){var n=r||{},a=+!n.skipHeader,l=e||{},c=0,d=0;if(l&&n.origin!=null)if(typeof n.origin=="number")c=n.origin;else{var x=typeof n.origin=="string"?decode_cell(n.origin):n.origin;c=x.r,d=x.c}var f,h={s:{c:0,r:0},e:{c:d,r:c+t.length-1+a}};if(l["!ref"]){var g=safe_decode_range(l["!ref"]);h.e.c=Math.max(h.e.c,g.e.c),h.e.r=Math.max(h.e.r,g.e.r),c==-1&&(c=g.e.r+1,h.e.r=c+t.length-1+a)}else c==-1&&(c=0,h.e.r=t.length-1+a);var y=n.header||[],_=0;t.forEach(function(b,v){keys(b).forEach(function(R){(_=y.indexOf(R))==-1&&(y[_=y.length]=R);var A=b[R],C="z",L="",I=encode_cell({c:d+_,r:c+v+a});f=ws_get_cell_stub(l,I),A&&typeof A=="object"&&!(A instanceof Date)?l[I]=A:(typeof A=="number"?C="n":typeof A=="boolean"?C="b":typeof A=="string"?C="s":A instanceof Date?(C="d",n.cellDates||(C="n",A=datenum(A)),L=n.dateNF||table_fmt[14]):A===null&&n.nullError&&(C="e",A=0),f?(f.t=C,f.v=A,delete f.w,delete f.R,L&&(f.z=L)):l[I]=f={t:C,v:A},L&&(f.z=L))})}),h.e.c=Math.max(h.e.c,d+y.length-1);var E=encode_row(c);if(a)for(_=0;_<y.length;++_)l[encode_col(_+d)+E]={t:"s",v:y[_]};return l["!ref"]=encode_range(h),l}function json_to_sheet(e,t){return sheet_add_json(null,e,t)}function ws_get_cell_stub(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=decode_cell(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?ws_get_cell_stub(e,encode_cell(t)):ws_get_cell_stub(e,encode_cell({r:t,c:r||0}))}function wb_sheet_idx(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function book_new(){return{SheetNames:[],Sheets:{}}}function book_append_sheet(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var l=r.match(/(^.*?)(\d+)$/);a=l&&+l[2]||0;var c=l&&l[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=c+a)!=-1;++a);}if(check_ws_name(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function book_set_sheet_visibility(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=wb_sheet_idx(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function cell_set_number_format(e,t){return e.z=t,e}function cell_set_hyperlink(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function cell_set_internal_link(e,t,r){return cell_set_hyperlink(e,"#"+t,r)}function cell_add_comment(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function sheet_set_array_formula(e,t,r,n){for(var a=typeof t!="string"?t:safe_decode_range(t),l=typeof t=="string"?t:encode_range(t),c=a.s.r;c<=a.e.r;++c)for(var d=a.s.c;d<=a.e.c;++d){var x=ws_get_cell_stub(e,c,d);x.t="n",x.F=l,delete x.v,c==a.s.r&&d==a.s.c&&(x.f=r,n&&(x.D=!0))}return e}var utils={encode_col,encode_row,encode_cell,encode_range,decode_col,decode_row,split_cell,decode_cell,decode_range,format_cell,sheet_add_aoa,sheet_add_json,sheet_add_dom,aoa_to_sheet,json_to_sheet,table_to_sheet:parse_dom_table,table_to_book,sheet_to_csv,sheet_to_txt,sheet_to_json,sheet_to_html,sheet_to_formulae,sheet_to_row_object_array:sheet_to_json,sheet_get_cell:ws_get_cell_stub,book_new,book_append_sheet,book_set_sheet_visibility,cell_set_number_format,cell_set_hyperlink,cell_set_internal_link,cell_add_comment,sheet_set_array_formula,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function VaultReports({isOpen:e,onClose:t,vaultEntries:r,businessId:n}){const{currentBusiness:a}=useBusiness(),[l,c]=reactExports.useState("weekly"),[d,x]=reactExports.useState("2025-W37"),[f,h]=reactExports.useState(null),[g,y]=reactExports.useState(!1),[_,E]=reactExports.useState(!1),[b,v]=reactExports.useState(""),[R,A]=reactExports.useState(""),[C,L]=reactExports.useState(!1),[I,ae]=reactExports.useState([]),[D,ee]=reactExports.useState(null),Y=a?.business_name||a?.name||"Business",le=a?.address||"Not specified",te=a?.phone_number||"Not specified",oe=a?.vat_number||"Not specified",Pe=(T=>T&&{USD:"$",EUR:"",GBP:"",CAD:"C$",AUD:"A$",JPY:""}[T]||"")(a?.currency),De=T=>`${Pe}${T.toFixed(2)}`,X=async()=>{if(a?.business_id)try{const{data:T,error:J}=await supabase.from("branches").select("branch_id, branch_name").eq("business_id",a.business_id).eq("active",!0).order("branch_name");if(J)throw J;ae(T||[])}catch(T){console.error("Error fetching branches:",T)}},Se=async(T,J)=>{try{y(!0);let B,j;if(_&&T&&J)B=new Date(T),B.setHours(0,0,0,0),j=new Date(J),j.setHours(23,59,59,999);else if(l==="weekly"){const Fe=new Date,tt=Fe.getDay(),ut=Fe.getDate()-tt+(tt===0?-6:1);B=new Date(Fe.setDate(ut)),B.setHours(0,0,0,0),j=new Date(B),j.setDate(j.getDate()+6),j.setHours(23,59,59,999)}else{const Fe=new Date;B=new Date(Fe.getFullYear(),Fe.getMonth(),1),j=new Date(Fe.getFullYear(),Fe.getMonth()+1,0,23,59,59,999)}let M=supabase.from("sales").select("total_amount, discount_applied, cashier_id").gte("datetime",B.toISOString()).lte("datetime",j.toISOString());D&&(M=M.eq("branch_id",D));const{data:U,error:K}=await M;if(K)throw K;const Le=U?.reduce((Fe,tt)=>Fe+(tt.total_amount||0),0)||0,ve=U?.reduce((Fe,tt)=>Fe+(tt.discount_applied||0),0)||0,Ae=U?.length||0,ye=Ae>0?Le/Ae:0;let V=supabase.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(category),
          sales!inner(datetime, branch_id)
        `).gte("sales.datetime",B.toISOString()).lte("sales.datetime",j.toISOString());D&&(V=V.eq("sales.branch_id",D));const{data:be,error:Ne}=await V;if(Ne)throw Ne;const H=new Map;be?.forEach(Fe=>{const tt=Fe.products?.category||"Other",ut=Fe.quantity*Fe.price_each,Q=H.get(tt)||{revenue:0,units:0};H.set(tt,{revenue:Q.revenue+ut,units:Q.units+Fe.quantity})});const Te=Array.from(H.entries()).map(([Fe,tt])=>({name:Fe,revenue:tt.revenue,percentage:Le>0?Number((tt.revenue/Le*100).toFixed(1)):0,units:tt.units})).sort((Fe,tt)=>tt.revenue-Fe.revenue);let se=supabase.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(name),
          sales!inner(datetime, branch_id)
        `).gte("sales.datetime",B.toISOString()).lte("sales.datetime",j.toISOString());D&&(se=se.eq("sales.branch_id",D));const{data:Ce,error:pt}=await se;if(pt)throw pt;const pe=new Map;Ce?.forEach(Fe=>{const tt=Fe.products?.name||"Unknown Product",ut=Fe.quantity*Fe.price_each,Q=pe.get(tt)||{units:0,revenue:0};pe.set(tt,{units:Q.units+Fe.quantity,revenue:Q.revenue+ut})});const ze=Array.from(pe.entries()).map(([Fe,tt])=>({name:Fe,...tt})).sort((Fe,tt)=>tt.revenue-Fe.revenue).slice(0,10).map((Fe,tt)=>({rank:tt+1,...Fe})),{data:Ye,error:lt}=await supabase.from("products").select("name");if(lt)throw lt;const nt=(Ye?.map(Fe=>{const tt=pe.get(Fe.name);return{name:Fe.name,units:tt?.units||0,revenue:tt?.revenue||0}})||[]).sort((Fe,tt)=>Fe.revenue-tt.revenue).slice(0,10).map((Fe,tt)=>({rank:tt+1,...Fe})),{data:mt,error:it}=await supabase.from("products").select("name, stock_quantity, reorder_level");if(it)throw it;const Je=mt?.filter(Fe=>Fe.stock_quantity<=Fe.reorder_level).map(Fe=>({product:Fe.name,current:Fe.stock_quantity,reorder:Fe.reorder_level,urgent:Fe.stock_quantity<=Fe.reorder_level*.5}))||[],bt=mt?.filter(Fe=>Fe.stock_quantity===0).map(Fe=>({product:Fe.name,lastStock:"N/A",expectedDelivery:"TBD"}))||[],{data:ne,error:Ue}=await supabase.from("sales").select(`
          total_amount,
          cashier_id
        `).gte("datetime",B.toISOString()).lte("datetime",j.toISOString());if(Ue)throw Ue;const Qe=new Map;ne?.forEach(Fe=>{const tt=Fe.cashier_id,ut="System User",Q=Qe.get(tt)||{name:ut,revenue:0,transactions:0};Qe.set(tt,{name:ut,revenue:Q.revenue+(Fe.total_amount||0),transactions:Q.transactions+1})});const gt=Array.from(Qe.values()).map(Fe=>({name:Fe.name,revenue:Fe.revenue,transactions:Fe.transactions,avgTransaction:Fe.transactions>0?Fe.revenue/Fe.transactions:0,hours:40,accuracy:99})),{data:Nt,error:It}=await supabase.from("side_business_sales").select(`
          total_amount,
          quantity,
          side_business_items!inner(
            name,
            side_businesses!inner(name)
          )
        `).eq("parent_shop_id",n||1).gte("date_time",B.toISOString()).lte("date_time",j.toISOString());It&&console.error("Error fetching side business data:",It);const Ot=new Map;Nt&&Nt.forEach(Fe=>{const tt=Fe.side_business_items.side_businesses.name,ut=Fe.side_business_items.name;Ot.has(tt)||Ot.set(tt,{name:tt,revenue:0,transactions:0,items:new Map});const Q=Ot.get(tt);Q.revenue+=Fe.total_amount,Q.transactions+=1,Q.items.has(ut)||Q.items.set(ut,{name:ut,units:0,revenue:0});const ge=Q.items.get(ut);ge.units+=Fe.quantity,ge.revenue+=Fe.total_amount});const Wt=Array.from(Ot.values()).map(Fe=>({name:Fe.name,revenue:Fe.revenue,transactions:Fe.transactions,avgTransaction:Fe.transactions>0?Fe.revenue/Fe.transactions:0,topItems:Array.from(Fe.items.values()).sort((tt,ut)=>ut.revenue-tt.revenue).slice(0,3)}));h({kpis:{totalSales:Le,transactions:Ae,avgTransaction:ye,discounts:ve},categories:Te,topProducts:ze,leastSoldProducts:nt,lowStock:Je,outOfStock:bt,staff:gt,sideBusinesses:Wt})}catch(B){console.error("Error fetching report data:",B)}finally{y(!1)}};reactExports.useEffect(()=>{e&&(X(),Se())},[e,l,d]),reactExports.useEffect(()=>{e&&f&&Se(b,R)},[D]);const z=()=>{const T=window.open("","_blank"),J=document.getElementById("sales-report-content").innerHTML;T.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>${Y} Sales Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
            th { background-color: #f5f5f5; }
            .urgent { color: red; font-weight: bold; }
            .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0; }
            .kpi-card { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
            h1, h2, h3 { color: #333; }
            .print-only { display: block; }
          </style>
        </head>
        <body>
          ${J}
          <script>window.print();<\/script>
        </body>
      </html>
    `)},re=async()=>{try{L(!0);const T=_?b:null,J=_?R:null;let B="";if(_&&T&&J){const Ne=new Date(T).toLocaleDateString("en-IE"),H=new Date(J).toLocaleDateString("en-IE");B=`${Ne}_to_${H}`}else if(l==="weekly")B=`Week_${d}`;else{const Ne=new Date;B=`${Ne.getFullYear()}_${String(Ne.getMonth()+1).padStart(2,"0")}`}const j=utils.book_new(),M=[[`${Y} - FINANCIAL REPORT FOR ACCOUNTANT`],[""],["BUSINESS INFORMATION"],["Company Name:",Y],["Address:",le],["Phone:",te],["VAT Number:",oe],["Business Type:","Retail Store"],[""],["REPORTING PERIOD"],["Period:",_?`${b} to ${R}`:l==="weekly"?`Week ${d}`:new Date().toLocaleDateString("en-IE",{year:"numeric",month:"long"})],["Report Generated:",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})],[""],["REVENUE SUMMARY (EXCLUDING VAT)"],["Gross Sales Revenue",f?.kpis.totalSales?f.kpis.totalSales:0],["Less: Customer Discounts",f?.kpis.discounts?f.kpis.discounts:0],["Net Sales Revenue (Before VAT)",f?.kpis.totalSales&&f?.kpis.discounts?f.kpis.totalSales-f.kpis.discounts:f?.kpis.totalSales?f.kpis.totalSales:0],[""],["TRANSACTION ANALYSIS"],["Total Number of Transactions",f?.kpis.transactions||0],["Average Transaction Value",f?.kpis.avgTransaction?f.kpis.avgTransaction:0],["Total Items Sold",f?.categories.reduce((Ne,H)=>Ne+H.units,0)||0],[""],["CATEGORY PERFORMANCE"],["Category","Revenue","Percentage of Sales","Units Sold","Average Price per Unit"],...f?.categories.map(Ne=>[Ne.name,Ne.revenue,`${Ne.percentage}%`,Ne.units,Ne.units>0?Ne.revenue/Ne.units:0])||[],[""],["TOP PERFORMING PRODUCTS"],["Product Name","Units Sold","Revenue Generated","Average Price per Unit"],...f?.topProducts.slice(0,15).map(Ne=>[Ne.name,Ne.units,Ne.revenue,Ne.units>0?Ne.revenue/Ne.units:0])||[],[""],["ACCOUNTING NOTES"],[`1. All amounts are in ${a?.currency||"EUR"} (${Pe})`],["2. Revenue figures are exclusive of VAT unless otherwise stated"],["3. Customer discounts are deducted from gross revenue"],["4. This report is generated automatically from POS system data"],["5. For VAT calculations, standard rate should be applied to net sales"],["6. Inventory movements and cost of goods sold are not included in this report"],["7. Report covers retail sales only - side business operations excluded"],[""],["VERIFICATION REQUIRED"],["- Cross-reference with bank deposits"],["- Verify VAT calculations and rates"],["- Confirm discount policies and approvals"],["- Reconcile with physical inventory counts"]],U=utils.aoa_to_sheet(M);utils.book_append_sheet(j,U,"Financial Summary");const K=[["DETAILED SALES BREAKDOWN"],[""],["Product Name","Category","Units Sold","Revenue Generated","Average Price per Unit"],...f?.topProducts.map(Ne=>[Ne.name,f.categories.find(H=>f.topProducts.filter(Te=>f.categories.some(se=>se.name==="Category"&&Te.name===Ne.name)).length>0)?.name||"Other",Ne.units,Ne.revenue,Ne.units>0?Ne.revenue/Ne.units:0])||[],[""],["CATEGORY TOTALS"],["Category","Total Revenue","Total Units","Average Price per Unit","Percentage of Total Sales"],...f?.categories.map(Ne=>[Ne.name,Ne.revenue,Ne.units,Ne.units>0?Ne.revenue/Ne.units:0,`${Ne.percentage}%`])||[]],Le=utils.aoa_to_sheet(K);utils.book_append_sheet(j,Le,"Sales Details");const ve=[["TRANSACTION ANALYSIS"],[""],["Metric","Value","Notes"],["Total Transactions",f?.kpis.transactions||0,"Number of completed sales"],["Average Transaction Value",f?.kpis.avgTransaction?f.kpis.avgTransaction:0,"Revenue per transaction"],["Total Items Sold",f?.categories.reduce((Ne,H)=>Ne+H.units,0)||0,"Sum of all units sold"],["Average Items per Transaction",f?.kpis.transactions>0?f.categories.reduce((Ne,H)=>Ne+H.units,0)/f.kpis.transactions:0,"Items sold divided by transactions"],["Discount Rate",f?.kpis.totalSales>0?(f.kpis.discounts/f.kpis.totalSales*100).toFixed(2)+"%":"0%","Percentage of revenue given as discounts"],[""],["DAILY BREAKDOWN (ESTIMATED)"],["Note: Daily breakdown requires individual transaction data"],["Average Daily Revenue",f?.kpis.totalSales&&f?.kpis.transactions>0?f.kpis.totalSales/Math.max(1,f.kpis.transactions/10):0,"Estimated based on transaction volume"],["Average Daily Transactions",f?.kpis.transactions>0?f.kpis.transactions/Math.max(1,f.kpis.transactions/10):0,"Estimated daily transaction count"]],Ae=utils.aoa_to_sheet(ve);utils.book_append_sheet(j,Ae,"Transaction Analysis");const ye=[["VAT CALCULATION WORKSHEET"],[""],["IMPORTANT: This is a template - verify VAT rates and calculations"],[""],["Net Sales Revenue (Before VAT)",f?.kpis.totalSales&&f?.kpis.discounts?f.kpis.totalSales-f.kpis.discounts:f?.kpis.totalSales?f.kpis.totalSales:0],[""],["VAT CALCULATIONS (Standard Rate 23%)"],["VAT on Net Sales",f?.kpis.totalSales&&f?.kpis.discounts?(f.kpis.totalSales-f.kpis.discounts)*.23:f?.kpis.totalSales?f.kpis.totalSales*.23:0],["Total Revenue Including VAT",f?.kpis.totalSales&&f?.kpis.discounts?(f.kpis.totalSales-f.kpis.discounts)*1.23:f?.kpis.totalSales?f.kpis.totalSales*1.23:0],[""],["VAT CALCULATIONS (Reduced Rate 13.5% - if applicable)"],["Note: Verify which products qualify for reduced rate"],["VAT on Reduced Rate Items",0,"To be calculated based on product categorization"],[""],["VAT SUMMARY"],["Standard Rate VAT (23%)",f?.kpis.totalSales&&f?.kpis.discounts?(f.kpis.totalSales-f.kpis.discounts)*.23:f?.kpis.totalSales?f.kpis.totalSales*.23:0],["Reduced Rate VAT (13.5%)",0,"Calculate based on qualifying products"],["Total VAT Collected",f?.kpis.totalSales&&f?.kpis.discounts?(f.kpis.totalSales-f.kpis.discounts)*.23:f?.kpis.totalSales?f.kpis.totalSales*.23:0],[""],["VERIFICATION CHECKLIST"],[" Verify current VAT rates"],[" Confirm product VAT categorization"],[" Cross-check with VAT returns"],[" Validate calculation methods"],[" Check for any exempt or zero-rated items"]],V=utils.aoa_to_sheet(ye);utils.book_append_sheet(j,V,"VAT Calculation");const be=`LandM_Store_Accountant_Report_${B}_${new Date().toISOString().split("T")[0]}.xlsx`;writeFileSync(j,be)}catch(T){console.error("Error exporting to Excel:",T),alert("Failed to export to Excel. Please try again.")}finally{L(!1)}};return e?jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"900px",width:"95%",maxHeight:"80vh",overflowY:"auto",color:"#3e3f29"},children:[g&&jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{fontSize:"24px",marginBottom:"20px"}}),jsxRuntimeExports.jsx("p",{children:"Loading report data..."})]}),!g&&!f&&jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"20px",color:"#dc3545"}}),jsxRuntimeExports.jsx("p",{children:"Unable to load report data. Please try again."}),jsxRuntimeExports.jsx("button",{onClick:t,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"8px",marginTop:"20px",cursor:"pointer"},children:"Close"})]}),!g&&f&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[jsxRuntimeExports.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chart-line",style:{marginRight:"10px",color:"#7d8d86"}}),"Sales Reports"]}),jsxRuntimeExports.jsx("button",{onClick:t,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:T=>{T.currentTarget.style.background="#7d8d86",T.currentTarget.style.color="#ffffff",T.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:T=>{T.currentTarget.style.background="none",T.currentTarget.style.color="#3e3f29",T.currentTarget.style.transform="rotate(0deg)"},children:""})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"30px",flexWrap:"wrap",alignItems:"center"},children:[jsxRuntimeExports.jsxs("select",{style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:l,onChange:T=>c(T.target.value),children:[jsxRuntimeExports.jsx("option",{value:"weekly",children:"Weekly Report"}),jsxRuntimeExports.jsx("option",{value:"monthly",children:"Monthly Report"}),jsxRuntimeExports.jsx("option",{value:"custom",children:"Custom Date Range"})]}),jsxRuntimeExports.jsxs("select",{style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:D||"",onChange:T=>ee(T.target.value?parseInt(T.target.value):null),children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Branches"}),I.map(T=>jsxRuntimeExports.jsx("option",{value:T.branch_id,children:T.branch_name},T.branch_id))]}),l==="weekly"&&jsxRuntimeExports.jsx("input",{type:"week",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:d,onChange:T=>x(T.target.value)}),l==="custom"&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[jsxRuntimeExports.jsx("input",{type:"date",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:b,onChange:T=>v(T.target.value),placeholder:"Start Date"}),jsxRuntimeExports.jsx("span",{style:{color:"#7d8d86",fontSize:"14px"},children:"to"}),jsxRuntimeExports.jsx("input",{type:"date",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:R,onChange:T=>A(T.target.value),placeholder:"End Date"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Se(b,R),disabled:g||l==="custom"&&(!b||!R),style:{background:g?"#cccccc":"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:g?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:T=>{g||(T.currentTarget.style.background="#3e3f29",T.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:T=>{g||(T.currentTarget.style.background="#7d8d86",T.currentTarget.style.transform="translateY(0)")},children:[jsxRuntimeExports.jsx("i",{className:`fa-solid ${g?"fa-spinner fa-spin":"fa-refresh"}`}),g?"Loading...":"Refresh Data"]}),jsxRuntimeExports.jsxs("button",{onClick:z,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:T=>{T.currentTarget.style.background="#3e3f29",T.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:T=>{T.currentTarget.style.background="#7d8d86",T.currentTarget.style.transform="translateY(0)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-print"}),"Print Report"]}),jsxRuntimeExports.jsxs("button",{onClick:re,disabled:C||!f||l==="custom"&&(!b||!R),style:{background:C?"#cccccc":"#10b981",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:C?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:T=>{C||(T.currentTarget.style.background="#059669",T.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:T=>{C||(T.currentTarget.style.background="#10b981",T.currentTarget.style.transform="translateY(0)")},children:[jsxRuntimeExports.jsx("i",{className:`fa-solid ${C?"fa-spinner fa-spin":"fa-file-excel"}`}),C?"Exporting...":"Export to Excel"]})]}),jsxRuntimeExports.jsxs("div",{id:"sales-report-content",style:{color:"#3e3f29"},children:[jsxRuntimeExports.jsxs("div",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",paddingBottom:"20px",marginBottom:"30px"},children:[jsxRuntimeExports.jsxs("h1",{style:{color:"#3e3f29",fontSize:"28px",fontWeight:"700",marginBottom:"10px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-file-invoice",style:{marginRight:"10px"}}),a?.business_name||a?.name||"Business"," Sales Report"]}),jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"16px"},children:"Reporting Period: Week 37: 9-15 September 2025"})]}),jsxRuntimeExports.jsxs("section",{style:{marginBottom:"40px"},children:[jsxRuntimeExports.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chart-bar",style:{marginRight:"10px"}}),"1. Overview (KPIs)"]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[jsxRuntimeExports.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Sales"}),jsxRuntimeExports.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:De(f.kpis.totalSales)})]}),jsxRuntimeExports.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Transactions"}),jsxRuntimeExports.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:f.kpis.transactions.toLocaleString()})]}),jsxRuntimeExports.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Avg Transaction"}),jsxRuntimeExports.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:De(f.kpis.avgTransaction)})]}),jsxRuntimeExports.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Discounts"}),jsxRuntimeExports.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:De(f.kpis.discounts)})]})]})]}),jsxRuntimeExports.jsxs("section",{style:{marginBottom:"40px"},children:[jsxRuntimeExports.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-shopping-cart",style:{marginRight:"10px"}}),"2. Sales Breakdown"]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"30px"},children:[jsxRuntimeExports.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Sales by Category"}),jsxRuntimeExports.jsx("div",{style:{overflowX:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Category"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"% of Total"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"})]})}),jsxRuntimeExports.jsx("tbody",{children:f.categories.map((T,J)=>jsxRuntimeExports.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.name}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:De(T.revenue)}),jsxRuntimeExports.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[T.percentage,"%"]}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.units})]},J))})]})})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"30px"},children:[jsxRuntimeExports.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Top 10 Products Sold"}),jsxRuntimeExports.jsx("div",{style:{overflowX:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Rank"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),jsxRuntimeExports.jsx("tbody",{children:f.topProducts.map(T=>jsxRuntimeExports.jsxs("tr",{style:{background:T.rank%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[jsxRuntimeExports.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:["#",T.rank]}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.name}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.units}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:De(T.revenue)})]},T.rank))})]})})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"30px"},children:[jsxRuntimeExports.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Least Sold Products"}),jsxRuntimeExports.jsx("div",{style:{overflowX:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),jsxRuntimeExports.jsx("tbody",{children:f.leastSoldProducts.map((T,J)=>jsxRuntimeExports.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.name}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.units}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:De(T.revenue)})]},T.rank))})]})})]})]}),jsxRuntimeExports.jsxs("section",{style:{marginBottom:"40px"},children:[jsxRuntimeExports.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-warehouse",style:{marginRight:"10px"}}),"3. Inventory Alerts"]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"30px"},children:[jsxRuntimeExports.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc3545"}}),"Low Stock Products"]}),jsxRuntimeExports.jsx("div",{style:{overflowX:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Current Stock"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Reorder Level"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Status"})]})}),jsxRuntimeExports.jsx("tbody",{children:f.lowStock.map((T,J)=>jsxRuntimeExports.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.product}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.current}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.reorder}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29"},children:T.urgent&&jsxRuntimeExports.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:"URGENT"})})]},J))})]})})]}),f.outOfStock.length>0&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"30px"},children:[jsxRuntimeExports.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-box",style:{color:"#dc3545"}}),"Out of Stock Products"]}),jsxRuntimeExports.jsx("div",{style:{overflowX:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Last Stock Date"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Expected Delivery"})]})}),jsxRuntimeExports.jsx("tbody",{children:f.outOfStock.map((T,J)=>jsxRuntimeExports.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.product}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:T.lastStock}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:T.expectedDelivery})]},J))})]})})]})]}),jsxRuntimeExports.jsxs("section",{style:{marginBottom:"40px"},children:[jsxRuntimeExports.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-users",style:{marginRight:"10px"}}),"4. Staff Performance"]}),jsxRuntimeExports.jsx("div",{style:{overflowX:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Cashier"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue Handled"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Hours"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Accuracy"})]})}),jsxRuntimeExports.jsx("tbody",{children:f.staff.map((T,J)=>jsxRuntimeExports.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:T.name}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:De(T.revenue)}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.transactions}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:De(T.avgTransaction)}),jsxRuntimeExports.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[T.hours,"h"]}),jsxRuntimeExports.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[T.accuracy,"%"]})]},J))})]})})]}),jsxRuntimeExports.jsxs("section",{style:{marginBottom:"40px"},children:[jsxRuntimeExports.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-store",style:{marginRight:"10px"}}),"5. Side Business Performance"]}),f.sideBusinesses.length>0?jsxRuntimeExports.jsx("div",{style:{overflowX:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Business Name"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),jsxRuntimeExports.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Top Items"})]})}),jsxRuntimeExports.jsx("tbody",{children:f.sideBusinesses.map((T,J)=>jsxRuntimeExports.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:T.name}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:De(T.revenue)}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.transactions}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:De(T.avgTransaction)}),jsxRuntimeExports.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.topItems.map((B,j)=>jsxRuntimeExports.jsxs("div",{style:{fontSize:"12px",marginBottom:"2px",color:"#7d8d86"},children:[B.name,": ",B.units," units (",De(B.revenue),")"]},j))})]},J))})]})}):jsxRuntimeExports.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#7d8d86",background:"rgba(125, 141, 134, 0.05)",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"24px",marginBottom:"10px",display:"block"}}),"No side business sales data found for this period."]})]}),jsxRuntimeExports.jsxs("section",{style:{borderTop:"2px solid rgba(125, 141, 134, 0.3)",paddingTop:"20px",marginTop:"40px"},children:[jsxRuntimeExports.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-file-text",style:{marginRight:"10px"}}),"6. Report Footer"]}),jsxRuntimeExports.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"10px"},children:a?.business_name||a?.name||"Business"}),jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Unit 2 Glenmore Park, Dundalk, Co. Louth"}),jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Phone: 087 797 0412"}),jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"VAT Number: IE1234567A"})]}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"right"},children:[jsxRuntimeExports.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[jsxRuntimeExports.jsx("strong",{children:"Reporting Period:"})," Week 37: 9-15 September 2025"]}),jsxRuntimeExports.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[jsxRuntimeExports.jsx("strong",{children:"Generated on:"})," ",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),jsxRuntimeExports.jsx("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:jsxRuntimeExports.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",fontStyle:"italic",margin:0},children:["This report was automatically generated by the ",a?.business_name||a?.name||"Business"," POS System. For questions or clarifications, contact the store manager."]})})]})]})]})]})]})}):null}const VaultModal=({isOpen:e,onClose:t})=>{const{user:r}=useAuth(),[n,a]=reactExports.useState(""),[l,c]=reactExports.useState(""),[d,x]=reactExports.useState(""),[f,h]=reactExports.useState(!1),[g,y]=reactExports.useState(null),[_,E]=reactExports.useState([]),[b,v]=reactExports.useState(!1),[R,A]=reactExports.useState(!1),[C,L]=reactExports.useState(!1),[I,ae]=reactExports.useState({title:"",username:"",password:"",website:""}),[D,ee]=reactExports.useState(new Set),[Y,le]=reactExports.useState(null),[te,oe]=reactExports.useState(!1),[Be,Pe]=reactExports.useState(!1),[De,X]=reactExports.useState(""),[Se,z]=reactExports.useState(""),[re,T]=reactExports.useState(!1);reactExports.useEffect(()=>{e&&(a(""),c(""),x(""),h(!1),y(null),E([]),v(!1),A(!1),L(!1),ee(new Set),le(null),oe(!1),Pe(!1),X(""),z(""),T(!1),ae({title:"",username:"",password:"",website:""}))},[e]);const J=H=>{n.length<4&&(a(Te=>Te+H),c(""),x(""))},B=()=>{a(""),c(""),x("")},j=async H=>{if(r)try{const Te=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(H)),se=Array.from(new Uint8Array(Te)).map(pe=>pe.toString(16).padStart(2,"0")).join(""),{data:Ce,error:pt}=await supabase.from("vault").insert([{owner_id:r.user_id,pin_hash:se}]).select();if(pt)throw pt;y(Ce[0].vault_id),c(" Vault created successfully!"),x("success"),h(!0)}catch(Te){console.error("Error creating vault:",Te),c(" Failed to create vault. Try again."),x("error")}},M=async H=>{if(r)try{const{data:Te,error:se}=await supabase.from("vault").select("vault_id, pin_hash").eq("owner_id",r.user_id).single();if(se){if(se.code==="PGRST116"){A(!0),c("Creating your vault..."),x("success"),await j(H);return}throw se}const Ce=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(H)),pt=Array.from(new Uint8Array(Ce)).map(pe=>pe.toString(16).padStart(2,"0")).join("");Te.pin_hash===pt?(y(Te.vault_id),c(" Access Granted! Vault Unlocked"),x("success"),h(!0),await U(Te.vault_id)):(c(" Incorrect PIN. Try again."),x("error"),setTimeout(()=>B(),1e3))}catch(Te){console.error("Error verifying PIN:",Te),c(" Failed to access vault. Try again."),x("error")}},U=async H=>{try{const{data:Te,error:se}=await supabase.from("vault_entries").select("entry_id, label, email, password_enc, link, created_at").eq("vault_id",H).order("created_at",{ascending:!1});if(se)throw se;console.log("Raw data from database:",Te),Te.length>0&&(console.log("First entry password_enc:",Te[0].password_enc),console.log("Type of password_enc:",typeof Te[0].password_enc));const Ce=Te.map(pt=>({...pt,password:pt.password_enc||"No password"}));E(Ce),v(!0)}catch(Te){console.error("Error fetching vault entries:",Te)}},K=async()=>{if(!g||!I.title||!I.password){c(" Title and password are required"),x("error");return}try{const{data:H,error:Te}=await supabase.from("vault_entries").insert([{vault_id:g,label:I.title,email:I.username,password_enc:I.password,link:I.website}]).select();if(Te)throw Te;await U(g),ae({title:"",username:"",password:"",website:""}),L(!1),c(" Password saved successfully!"),x("success")}catch(H){console.error("Error saving entry:",H),c(" Failed to save password. Try again."),x("error")}},Le=H=>{ee(Te=>{const se=new Set(Te);return se.has(H)?se.delete(H):se.add(H),se})},ve=async(H,Te)=>{try{await navigator.clipboard.writeText(H),c(` ${Te} copied to clipboard!`),x("success"),setTimeout(()=>{c(""),x("")},2e3)}catch{c(` Failed to copy ${Te}`),x("error"),setTimeout(()=>{c(""),x("")},2e3)}},Ae=H=>{le(H)},ye=async H=>{if(g)try{const{error:Te}=await supabase.from("vault_entries").delete().eq("entry_id",H).eq("vault_id",g);if(Te)throw Te;await U(g),le(null),c(" Password deleted successfully!"),x("success"),setTimeout(()=>{c(""),x("")},2e3)}catch(Te){console.error("Error deleting entry:",Te),c(" Failed to delete password. Try again."),x("error"),setTimeout(()=>{c(""),x("")},2e3)}},V=()=>{n.length===4&&M(n)},be=async()=>{if(De.length<4){c(" PIN must be at least 4 digits"),x("error");return}if(De!==Se){c(" PINs do not match"),x("error");return}if(!g){c(" No vault found"),x("error");return}T(!0),c("Updating vault PIN..."),x("success");try{const H=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(De)),Te=Array.from(new Uint8Array(H)).map(Ce=>Ce.toString(16).padStart(2,"0")).join(""),{error:se}=await supabase.from("vault").update({pin_hash:Te}).eq("vault_id",g);if(se)throw se;c(" Vault PIN updated successfully!"),x("success"),X(""),z(""),Pe(!1)}catch(H){console.error("Error updating vault PIN:",H),c(" Failed to update vault PIN"),x("error")}finally{T(!1)}},Ne=H=>{const Te=H.key;Te>="0"&&Te<="9"?J(Te):Te==="Backspace"||Te==="Delete"?n.length>0&&a(se=>se.slice(0,-1)):Te==="Enter"?V():Te==="Escape"&&t()};return e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!f&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",zIndex:999,backdropFilter:"blur(4px)"},onClick:t}),jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"400px",width:"90%",textAlign:"center"},onKeyDown:Ne,tabIndex:-1,children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",border:"1px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29"},children:[jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px"},children:R?"Creating your vault...":"Enter your 4-digit PIN"}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"30px"},children:[0,1,2,3].map(H=>jsxRuntimeExports.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"2px solid rgba(125, 141, 134, 0.3)",background:H<n.length?"linear-gradient(135deg, #7d8d86, #3e3f29)":"transparent",borderColor:H<n.length?"#3e3f29":"rgba(125, 141, 134, 0.3)",transform:H<n.length?"scale(1.1)":"scale(1)",transition:"all 0.3s ease"}},H))}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"15px",marginBottom:"20px"},children:[[1,2,3,4,5,6,7,8,9].map(H=>jsxRuntimeExports.jsx("button",{onClick:()=>J(H.toString()),style:{width:"70px",height:"70px",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)"},onMouseEnter:Te=>{Te.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",Te.currentTarget.style.color="#f1f0e4",Te.currentTarget.style.transform="translateY(-2px)",Te.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:Te=>{Te.currentTarget.style.background="#ffffff",Te.currentTarget.style.color="#3e3f29",Te.currentTarget.style.transform="translateY(0)",Te.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:H},H)),jsxRuntimeExports.jsx("button",{onClick:()=>J("0"),style:{width:"70px",height:"70px",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)",gridColumn:"2"},onMouseEnter:H=>{H.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",H.currentTarget.style.color="#f1f0e4",H.currentTarget.style.transform="translateY(-2px)",H.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:H=>{H.currentTarget.style.background="#ffffff",H.currentTarget.style.color="#3e3f29",H.currentTarget.style.transform="translateY(0)",H.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:"0"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:B,style:{padding:"12px 24px",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",background:"transparent",color:"#7d8d86",border:"2px solid rgba(125, 141, 134, 0.3)"},onMouseEnter:H=>{H.currentTarget.style.background="rgba(125, 141, 134, 0.1)",H.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:H=>{H.currentTarget.style.background="transparent",H.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Clear"}),jsxRuntimeExports.jsx("button",{onClick:V,disabled:n.length!==4,style:{padding:"12px 24px",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:n.length===4?"pointer":"not-allowed",transition:"all 0.3s ease",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#f1f0e4",border:"2px solid transparent",opacity:n.length===4?1:.5},onMouseEnter:H=>{n.length===4&&(H.currentTarget.style.transform="translateY(-2px)",H.currentTarget.style.boxShadow="0 8px 16px rgba(62, 63, 41, 0.2)")},onMouseLeave:H=>{H.currentTarget.style.transform="translateY(0)",H.currentTarget.style.boxShadow="none"},children:R?"Creating...":"Unlock"})]}),l&&jsxRuntimeExports.jsx("div",{style:{marginTop:"20px",padding:"12px",borderRadius:"10px",fontSize:"14px",fontWeight:"500",background:d==="success"?"rgba(125, 141, 134, 0.1)":"rgba(220, 53, 69, 0.1)",color:d==="success"?"#3e3f29":"#dc3545",border:d==="success"?"1px solid rgba(125, 141, 134, 0.3)":"1px solid rgba(220, 53, 69, 0.3)"},children:l})]})})]}),f&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"900px",width:"95%",maxHeight:"70vh",minHeight:"500px",overflowY:"auto",textAlign:"center"},onKeyDown:Ne,tabIndex:-1,children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",color:"#3e3f29"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[jsxRuntimeExports.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-vault",style:{marginRight:"10px",color:"#7d8d86"}}),"Password Vault"]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Pe(!0),style:{background:"#dc3545",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:H=>{H.currentTarget.style.background="#c82333",H.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:H=>{H.currentTarget.style.background="#dc3545",H.currentTarget.style.transform="translateY(0)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-key"}),"Manage PIN"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>oe(!0),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:H=>{H.currentTarget.style.background="#3e3f29",H.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:H=>{H.currentTarget.style.background="#7d8d86",H.currentTarget.style.transform="translateY(0)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chart-line"}),"Reports"]}),jsxRuntimeExports.jsx("button",{onClick:t,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:H=>{H.currentTarget.style.background="#7d8d86",H.currentTarget.style.color="#ffffff",H.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:H=>{H.currentTarget.style.background="none",H.currentTarget.style.color="#3e3f29",H.currentTarget.style.transform="rotate(0deg)"},children:""})]})]}),jsxRuntimeExports.jsx("div",{style:{marginBottom:"20px"},children:jsxRuntimeExports.jsxs("button",{onClick:()=>L(!C),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"25px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},onMouseEnter:H=>{H.currentTarget.style.background="#3e3f29",H.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:H=>{H.currentTarget.style.background="#7d8d86",H.currentTarget.style.transform="translateY(0)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus"}),C?"Cancel":"Add Password"]})}),C&&jsxRuntimeExports.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",marginBottom:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",textAlign:"center"},children:"Add New Password"}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gap:"15px"},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Title (e.g., Facebook, Twitter)",value:I.title,onChange:H=>ae({...I,title:H.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:H=>{H.target.style.borderColor="#7d8d86",H.target.style.background="#ffffff"},onBlur:H=>{H.target.style.borderColor="rgba(125, 141, 134, 0.3)",H.target.style.background="#ffffff"}}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Username/Email",value:I.username,onChange:H=>ae({...I,username:H.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:H=>{H.target.style.borderColor="#7d8d86",H.target.style.background="#ffffff"},onBlur:H=>{H.target.style.borderColor="rgba(125, 141, 134, 0.3)",H.target.style.background="#ffffff"}}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Password",value:I.password,onChange:H=>ae({...I,password:H.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:H=>{H.target.style.borderColor="#7d8d86",H.target.style.background="#ffffff"},onBlur:H=>{H.target.style.borderColor="rgba(125, 141, 134, 0.3)",H.target.style.background="#ffffff"}}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"Website (optional)",value:I.website,onChange:H=>ae({...I,website:H.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:H=>{H.target.style.borderColor="#7d8d86",H.target.style.background="#ffffff"},onBlur:H=>{H.target.style.borderColor="rgba(125, 141, 134, 0.3)",H.target.style.background="#ffffff"}}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>L(!1),style:{padding:"10px 20px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"20px",background:"transparent",color:"#7d8d86",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:H=>{H.currentTarget.style.background="rgba(125, 141, 134, 0.1)",H.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:H=>{H.currentTarget.style.background="transparent",H.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:K,disabled:!I.title||!I.password,style:{padding:"10px 20px",border:"none",borderRadius:"20px",background:I.title&&I.password?"#7d8d86":"rgba(125, 141, 134, 0.3)",color:"#f1f0e4",fontSize:"14px",fontWeight:"600",cursor:I.title&&I.password?"pointer":"not-allowed",transition:"all 0.3s ease"},onMouseEnter:H=>{I.title&&I.password&&(H.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:H=>{H.currentTarget.style.transform="translateY(0)"},children:"Save Password"})]})]})]}),jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:jsxRuntimeExports.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[jsxRuntimeExports.jsxs("div",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-shield-halved"}),"Saved Passwords"]}),_.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:_.map(H=>jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"10px",padding:"15px",border:"1px solid rgba(125, 141, 134, 0.2)",transition:"all 0.3s ease",cursor:"pointer",position:"relative"},onMouseEnter:Te=>{Te.currentTarget.style.background="rgba(125, 141, 134, 0.1)",Te.currentTarget.style.borderColor="#7d8d86",Te.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Te=>{Te.currentTarget.style.background="#ffffff",Te.currentTarget.style.borderColor="rgba(125, 141, 134, 0.2)",Te.currentTarget.style.transform="translateY(0)"},children:[jsxRuntimeExports.jsx("button",{onClick:Te=>{Te.stopPropagation(),Ae(H.entry_id)},style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",color:"#dc3545",fontSize:"16px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.3s ease",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Te=>{Te.currentTarget.style.background="rgba(220, 53, 69, 0.1)",Te.currentTarget.style.transform="scale(1.1)"},onMouseLeave:Te=>{Te.currentTarget.style.background="none",Te.currentTarget.style.transform="scale(1)"},children:""}),jsxRuntimeExports.jsx("div",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"5px",paddingRight:"30px"},children:H.label}),jsxRuntimeExports.jsx("div",{style:{color:"#7d8d86",fontSize:"14px",marginBottom:"8px"},children:H.email}),jsxRuntimeExports.jsx("div",{style:{color:"#3e3f29",fontSize:"14px",fontFamily:"monospace",marginBottom:"8px",padding:"4px 8px",background:"rgba(125, 141, 134, 0.1)",borderRadius:"4px",wordBreak:"break-all"},children:D.has(H.entry_id)?H.password:""}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>ve(H.password,"Password"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Te=>{Te.currentTarget.style.background="#3e3f29",Te.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Te=>{Te.currentTarget.style.background="#7d8d86",Te.currentTarget.style.transform="translateY(0)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-copy",style:{marginRight:"4px"}}),"Copy"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>ve(H.email,"Email"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Te=>{Te.currentTarget.style.background="#3e3f29",Te.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Te=>{Te.currentTarget.style.background="#7d8d86",Te.currentTarget.style.transform="translateY(0)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-envelope",style:{marginRight:"4px"}}),"Copy Email"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Le(H.entry_id),style:{background:D.has(H.entry_id)?"#3e3f29":"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Te=>{Te.currentTarget.style.background=D.has(H.entry_id)?"#7d8d86":"#3e3f29",Te.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Te=>{Te.currentTarget.style.background=D.has(H.entry_id)?"#3e3f29":"#7d8d86",Te.currentTarget.style.transform="translateY(0)"},children:[jsxRuntimeExports.jsx("i",{className:`fa-solid ${D.has(H.entry_id)?"fa-eye-slash":"fa-eye"}`,style:{marginRight:"4px"}}),D.has(H.entry_id)?"Hide":"Show"]})]})]},H.entry_id))}):jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#bca88d",fontSize:"14px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-folder-open",style:{fontSize:"24px",marginBottom:"8px",display:"block"}}),"No passwords saved yet"]})]})})]})}),Y&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"400px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[jsxRuntimeExports.jsx("h3",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"15px"},children:"Delete Password?"}),jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"25px",lineHeight:"1.5"},children:"Are you sure you want to delete this password? This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>le(null),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:H=>{H.currentTarget.style.background="rgba(125, 141, 134, 0.1)",H.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:H=>{H.currentTarget.style.background="transparent",H.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>ye(Y),style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:H=>{H.currentTarget.style.background="#c82333",H.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:H=>{H.currentTarget.style.background="#dc3545",H.currentTarget.style.transform="translateY(0)"},children:"Delete"})]})]})}),Be&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"500px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[jsxRuntimeExports.jsxs("h3",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-key",style:{color:"#dc3545"}}),"Manage System PIN"]}),jsxRuntimeExports.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px",lineHeight:"1.5"},children:"Change the system access PIN. This PIN is required to access the POS system."}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",marginBottom:"30px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"New PIN (minimum 4 digits)"}),jsxRuntimeExports.jsx("input",{type:"password",value:De,onChange:H=>X(H.target.value),placeholder:"Enter new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:H=>{H.target.style.borderColor="#dc3545"},onBlur:H=>{H.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"Confirm PIN"}),jsxRuntimeExports.jsx("input",{type:"password",value:Se,onChange:H=>z(H.target.value),placeholder:"Confirm new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:H=>{H.target.style.borderColor="#dc3545"},onBlur:H=>{H.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>Pe(!1),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:H=>{H.currentTarget.style.background="rgba(125, 141, 134, 0.1)",H.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:H=>{H.currentTarget.style.background="transparent",H.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:be,disabled:re||De.length<4||De!==Se,style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:re||De.length<4||De!==Se?"rgba(220, 53, 69, 0.3)":"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:re||De.length<4||De!==Se?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:H=>{!re&&De.length>=4&&De===Se&&(H.currentTarget.style.background="#c82333",H.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:H=>{H.currentTarget.style.background=re||De.length<4||De!==Se?"rgba(220, 53, 69, 0.3)":"#dc3545",H.currentTarget.style.transform="translateY(0)"},children:re?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-save"}),"Update PIN"]})})]})]})}),jsxRuntimeExports.jsx(VaultReports,{isOpen:te,onClose:()=>oe(!1),vaultEntries:_,businessId:r?.business_id})]}):null},PendingRegistrations=()=>{const{user:e}=useAuth(),[t,r]=reactExports.useState([]),[n,a]=reactExports.useState(!0),[l,c]=reactExports.useState(null),[d,x]=reactExports.useState(null),[f,h]=reactExports.useState(!1),[g,y]=reactExports.useState(""),[_,E]=reactExports.useState(null);reactExports.useEffect(()=>{b()},[]);const b=async()=>{try{a(!0);const{data:L,error:I}=await supabase.from("pending_registrations").select("*").order("created_at",{ascending:!1});if(I){console.error("Error fetching pending registrations:",I),c("Failed to fetch pending registrations");return}r(L||[])}catch(L){console.error("Error:",L),c("An error occurred while fetching registrations")}finally{a(!1)}},v=async L=>{try{E(L.id);const{error:I}=await supabase.from("users").update({active:!0}).eq("user_id",L.user_id);if(I){console.error("Error activating user:",I),c("Failed to activate user");return}const{error:ae}=await supabase.from("pending_registrations").update({approved:!0,approved_at:new Date().toISOString(),approved_by:e?.user_id,status:"approved"}).eq("id",L.id);if(ae){console.error("Error updating pending registration:",ae),c("Failed to update registration status");return}await b(),h(!1),x(null)}catch(I){console.error("Error approving registration:",I),c("An error occurred while approving the registration")}finally{E(null)}},R=async L=>{if(!g.trim()){c("Please provide a reason for rejection");return}try{E(L.id);const{error:I}=await supabase.from("pending_registrations").update({approved:!1,approved_at:new Date().toISOString(),approved_by:e?.user_id,rejection_reason:g,status:"rejected"}).eq("id",L.id);if(I){console.error("Error updating pending registration:",I),c("Failed to update registration status");return}await b(),h(!1),x(null),y("")}catch(I){console.error("Error rejecting registration:",I),c("An error occurred while rejecting the registration")}finally{E(null)}},A=L=>new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),C=L=>{switch(L){case"pending":return"#f59e0b";case"approved":return"#10b981";case"rejected":return"#ef4444";default:return"#6b7280"}};return n?jsxRuntimeExports.jsx("div",{style:{padding:"20px",textAlign:"center"},children:jsxRuntimeExports.jsx("div",{style:{fontSize:"18px",color:"#7d8d86"},children:"Loading pending registrations..."})}):jsxRuntimeExports.jsxs("div",{style:{padding:"20px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:0},children:"Pending Registrations"}),jsxRuntimeExports.jsx("button",{onClick:b,style:{padding:"8px 16px",backgroundColor:"#7d8d86",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Refresh"})]}),l&&jsxRuntimeExports.jsx("div",{style:{padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",color:"#dc2626",marginBottom:"16px"},children:l}),t.length===0?jsxRuntimeExports.jsx("div",{style:{padding:"40px",textAlign:"center",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:jsxRuntimeExports.jsx("div",{style:{fontSize:"16px",color:"#6b7280"},children:"No pending registrations found"})}):jsxRuntimeExports.jsx("div",{style:{backgroundColor:"white",borderRadius:"8px",border:"1px solid #e5e7eb",overflow:"hidden"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[jsxRuntimeExports.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:"Business"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:"Contact"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:"Status"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #e5e7eb"},children:"Date"}),jsxRuntimeExports.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #e5e7eb"},children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{children:t.map(L=>jsxRuntimeExports.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[jsxRuntimeExports.jsx("td",{style:{padding:"12px"},children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"600",color:"#3e3f29"},children:L.business_name}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:L.business_type})]})}),jsxRuntimeExports.jsx("td",{style:{padding:"12px"},children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{color:"#3e3f29"},children:[L.first_name," ",L.last_name]}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:L.email})]})}),jsxRuntimeExports.jsx("td",{style:{padding:"12px"},children:jsxRuntimeExports.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",backgroundColor:C(L.status)+"20",color:C(L.status)},children:L.status.toUpperCase()})}),jsxRuntimeExports.jsx("td",{style:{padding:"12px",color:"#6b7280"},children:A(L.created_at)}),jsxRuntimeExports.jsx("td",{style:{padding:"12px",textAlign:"center"},children:jsxRuntimeExports.jsx("button",{onClick:()=>{x(L),h(!0)},style:{padding:"6px 12px",backgroundColor:"#7d8d86",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"View Details"})})]},L.id))})]})}),f&&d&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#3e3f29",marginBottom:"20px"},children:"Registration Details"}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px"},children:"Business Information"}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"14px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Business Name:"})," ",d.business_name]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Business Type:"})," ",d.business_type]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Address:"})," ",d.business_address]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Phone:"})," ",d.business_phone]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Website:"})," ",d.website||"N/A"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"VAT Number:"})," ",d.vat_number||"N/A"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Currency:"})," ",d.currency]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Hours:"})," ",d.open_time," - ",d.close_time]})]}),d.business_description&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"8px"},children:[jsxRuntimeExports.jsx("strong",{children:"Description:"})," ",d.business_description]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px"},children:"Contact Information"}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"14px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Name:"})," ",d.first_name," ",d.last_name]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Email:"})," ",d.email]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Phone:"})," ",d.phone||"N/A"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Registered:"})," ",A(d.created_at)]})]})]}),d.status==="pending"&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px"},children:"Rejection Reason (if rejecting)"}),jsxRuntimeExports.jsx("textarea",{value:g,onChange:L=>y(L.target.value),placeholder:"Enter reason for rejection...",style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"14px",minHeight:"80px",resize:"vertical"}})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{h(!1),x(null),y("")},style:{padding:"8px 16px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Close"}),d.status==="pending"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>R(d),disabled:_===d.id,style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:_===d.id?"not-allowed":"pointer",opacity:_===d.id?.6:1},children:_===d.id?"Rejecting...":"Reject"}),jsxRuntimeExports.jsx("button",{onClick:()=>v(d),disabled:_===d.id,style:{padding:"8px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:_===d.id?"not-allowed":"pointer",opacity:_===d.id?.6:1},children:_===d.id?"Approving...":"Approve"})]})]})]})})]})},Admin=()=>{const{businessId:e,businessLoading:t}=useBusinessId(),{selectedBranchId:r}=useBranch(),[n,a]=reactExports.useState([]),[l,c]=reactExports.useState([]),[d,x]=reactExports.useState(!1),[f,h]=reactExports.useState(!1),[g,y]=reactExports.useState(!1),[_,E]=reactExports.useState(!1),[b,v]=reactExports.useState(null),[R,A]=reactExports.useState(null),[C,L]=reactExports.useState({username:"",password:"",role:"Cashier",icon:"ryu",branch_id:r||void 0}),[I,ae]=reactExports.useState({branch_name:"",address:"",phone:"",manager_id:void 0,shop_image:"shop1"}),D=[{name:"lily",label:"Lily"},{name:"chunli",label:"Chun-Li"},{name:"ken",label:"Ken"},{name:"kimberly",label:"Kimberly"},{name:"mai",label:"Mai"},{name:"manon",label:"Manon"},{name:"rashid",label:"Rashid"},{name:"ryu",label:"Ryu"},{name:"zangief",label:"Zangief"}],ee=[{name:"shop1",label:"Shop 1"},{name:"shop2",label:"Shop 2"},{name:"shop3",label:"Shop 3"},{name:"shop4",label:"Shop 4"}],[Y,le]=reactExports.useState(!1),[te,oe]=reactExports.useState(""),[Be,Pe]=reactExports.useState(!0),[De,X]=reactExports.useState(!1),[Se,z]=reactExports.useState(!1);reactExports.useEffect(()=>{e&&(re(),T())},[e,t,r]),reactExports.useEffect(()=>{L(V=>({...V,branch_id:r||void 0}))},[r]);const re=async()=>{if(!e){a([]),Pe(!1);return}try{Pe(!0);let V=supabase.from("users").select("*").eq("business_id",e).order("user_id",{ascending:!1});r&&(V=V.eq("branch_id",r));const{data:be,error:Ne}=await V;if(Ne){console.error("Error fetching users:",Ne),oe("Failed to fetch users");return}const H=await Promise.all((be||[]).map(async Te=>{if(Te.branch_id){const{data:se}=await supabase.from("branches").select("branch_name").eq("branch_id",Te.branch_id).single();return{...Te,branch_name:se?.branch_name||"Branch Not Found"}}return{...Te,branch_name:"No Branch Assigned"}}));a(H)}catch(V){console.error("Error fetching users:",V),oe("Failed to fetch users")}finally{Pe(!1)}},T=async()=>{if(!e){c([]);return}try{const{data:V,error:be}=await supabase.from("branches").select("*").eq("business_id",e).order("branch_id",{ascending:!1});if(be){console.error("Error fetching branches:",be),oe("Failed to fetch branches");return}c(V||[])}catch(V){console.error("Error fetching branches:",V),oe("Failed to fetch branches")}},J=async V=>{if(V.preventDefault(),le(!0),oe(""),!C.username.trim()){oe("Username is required"),le(!1);return}if(!C.password.trim()){oe("Password is required"),le(!1);return}if(!e){oe("Business ID is not available. Please refresh the page and try again."),le(!1);return}try{console.log("Adding user with data:",{username:C.username,role:C.role,icon:C.icon,business_id:e});const{data:be,error:Ne}=await supabase.from("users").select("user_id").eq("username",C.username.trim()).eq("business_id",e).single();if(Ne&&Ne.code!=="PGRST116")throw console.error("Error checking username:",Ne),new Error("Failed to check if username exists");if(be)throw new Error("Username already exists. Please choose a different username.");const H=hashPassword(C.password);console.log("Creating user with password:",C.password),console.log("Generated hash:",H),console.log("Hash type:",typeof H);const Te={username:C.username.trim(),password_hash:H,role:C.role,active:!0,business_id:e,branch_id:C.branch_id};Te.icon=C.icon;const{data:se,error:Ce}=await supabase.from("users").insert([Te]).select();if(Ce)throw console.error("Supabase error adding user:",Ce),Ce.code==="23505"?new Error("Username already exists. Please choose a different username."):Ce.code==="23503"?new Error("Invalid business ID. Please refresh the page and try again."):Ce.code==="23502"?new Error("Required field is missing. Please fill in all required fields."):Ce.message.includes("duplicate key value violates unique constraint")?new Error("Username already exists. Please choose a different username."):Ce.message.includes("violates foreign key constraint")?new Error("Invalid business ID. Please refresh the page and try again."):Ce.message.includes("Could not find the 'icon' column")?new Error("Database schema is outdated. Please run the database migration to add the icon column."):new Error(`Database error: ${Ce.message}`);if(!se||se.length===0)throw new Error("No data returned from insert operation");console.log("User added successfully:",se[0]),L({username:"",password:"",role:"Cashier",icon:"ryu"}),x(!1),re()}catch(be){console.error("Error adding user:",be),be instanceof Error?oe(`Failed to add user: ${be.message}`):oe("Failed to add user: Unknown error occurred")}finally{le(!1)}},B=async V=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:be}=await supabase.from("users").delete().eq("user_id",V);if(be)throw console.error("Error deleting user:",be),be;re()}catch(be){console.error("Error deleting user:",be),oe(`Failed to delete user: ${be instanceof Error?be.message:"Unknown error"}`)}},j=async(V,be)=>{try{const{error:Ne}=await supabase.from("users").update({active:!be}).eq("user_id",V);if(Ne)throw console.error("Error updating user status:",Ne),Ne;re()}catch(Ne){console.error("Error updating user status:",Ne),oe(`Failed to update user: ${Ne instanceof Error?Ne.message:"Unknown error"}`)}},M=V=>{v(V),L({username:V.username,password:"",role:V.role,icon:V.icon||"ryu",branch_id:V.branch_id}),h(!0)},U=async V=>{if(V.preventDefault(),!!b){le(!0),oe("");try{const be={username:C.username,role:C.role,icon:C.icon,branch_id:C.branch_id};if(C.password.trim()){const H=hashPassword(C.password);console.log("Updating user password:",C.password),console.log("Generated hash:",H),console.log("Hash type:",typeof H),be.password_hash=H}const{error:Ne}=await supabase.from("users").update(be).eq("user_id",b.user_id);if(Ne)throw console.error("Error updating user:",Ne),Ne;L({username:"",password:"",role:"Cashier",icon:"ryu"}),v(null),h(!1),re()}catch(be){console.error("Error updating user:",be),oe(`Failed to update user: ${be instanceof Error?be.message:"Unknown error"}`)}finally{le(!1)}}},K=async V=>{if(V.preventDefault(),le(!0),oe(""),!I.branch_name.trim()){oe("Branch name is required"),le(!1);return}if(!I.address.trim()){oe("Address is required"),le(!1);return}if(!e){oe("Business ID is not available. Please refresh the page and try again."),le(!1);return}try{const be={branch_name:I.branch_name.trim(),address:I.address.trim(),phone:I.phone.trim()||null,manager_id:I.manager_id||null,shop_image:I.shop_image,business_id:e,active:!0,created_at:new Date().toISOString()},{data:Ne,error:H}=await supabase.from("branches").insert([be]).select();if(H)throw console.error("Supabase error adding branch:",H),new Error(`Database error: ${H.message}`);if(!Ne||Ne.length===0)throw new Error("No data returned from insert operation");console.log("Branch added successfully:",Ne[0]),ae({branch_name:"",address:"",phone:"",manager_id:void 0,shop_image:"shop1"}),y(!1),T()}catch(be){console.error("Error adding branch:",be),be instanceof Error?oe(`Failed to add branch: ${be.message}`):oe("Failed to add branch: Unknown error occurred")}finally{le(!1)}},Le=async V=>{if(confirm("Are you sure you want to delete this branch?"))try{const{error:be}=await supabase.from("branches").delete().eq("branch_id",V);if(be)throw console.error("Error deleting branch:",be),be;T()}catch(be){console.error("Error deleting branch:",be),oe(`Failed to delete branch: ${be instanceof Error?be.message:"Unknown error"}`)}},ve=V=>{A(V),ae({branch_name:V.branch_name,address:V.address,phone:V.phone,manager_id:V.manager_id,shop_image:V.shop_image}),E(!0)},Ae=async V=>{if(V.preventDefault(),!!R){le(!0),oe("");try{const be={branch_name:I.branch_name.trim(),address:I.address.trim(),phone:I.phone.trim()||null,manager_id:I.manager_id||null,shop_image:I.shop_image},{error:Ne}=await supabase.from("branches").update(be).eq("branch_id",R.branch_id);if(Ne)throw console.error("Error updating branch:",Ne),Ne;ae({branch_name:"",address:"",phone:"",manager_id:void 0,shop_image:"shop1"}),A(null),E(!1),T()}catch(be){console.error("Error updating branch:",be),oe(`Failed to update branch: ${be instanceof Error?be.message:"Unknown error"}`)}finally{le(!1)}}},ye=V=>{switch(V){case"Admin":return"#ef4444";case"Owner":return"#8b5cf6";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#1a1a1a"}};return Be?jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#1a1a1a"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading users..."]}):jsxRuntimeExports.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 8px 0"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-users-cog",style:{marginRight:"12px",color:"#7d8d86"}}),"User Management"]}),jsxRuntimeExports.jsx("p",{style:{color:"#1a1a1a",margin:"0",fontSize:"18px"},children:"Manage system users and their permissions"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",alignItems:"flex-end"},children:[jsxRuntimeExports.jsx(BranchSelector,{size:"sm"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"12px"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>z(!Se),style:{background:Se?"#7d8d86":"#e5e7eb",color:Se?"white":"#3e3f29",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"18px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-user-plus"}),"Pending Registrations"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>x(!0),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"18px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>y(!0),style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-building"}),"Add Branch"]})]})]})]}),te&&jsxRuntimeExports.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px 16px",borderRadius:"8px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),te]}),Se&&jsxRuntimeExports.jsx("div",{style:{marginBottom:"32px"},children:jsxRuntimeExports.jsx(PendingRegistrations,{})}),jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[jsxRuntimeExports.jsx("div",{style:{padding:"20px 24px",borderBottom:"2px solid #d1d5db",background:"#f9fafb"},children:jsxRuntimeExports.jsxs("h3",{style:{margin:"0",fontSize:"20px",fontWeight:"600",color:"#1a1a1a"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-list",style:{marginRight:"8px",color:"#7d8d86"}}),"All Users (",n.length,")"]})}),n.length===0?jsxRuntimeExports.jsxs("div",{style:{padding:"48px 24px",textAlign:"center",color:"#1a1a1a"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-users",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),jsxRuntimeExports.jsx("p",{style:{fontSize:"20px",margin:"0 0 8px 0"},children:"No users found"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",margin:"0"},children:"Add your first user to get started"})]}):jsxRuntimeExports.jsx("div",{style:{overflowX:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"#f9fafb"},children:[jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Icon"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Role"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Status"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User ID"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{children:n.map((V,be)=>jsxRuntimeExports.jsxs("tr",{style:{borderBottom:be<n.length-1?"1px solid #f3f4f6":"none"},children:[jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px"},children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a",marginBottom:"4px",fontSize:"16px"},children:V.username}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"15px",color:"#1a1a1a"},children:["ID: ",V.user_id]})]})}),jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:jsxRuntimeExports.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden",border:"2px solid #e5e7eb"},children:V.icon?jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${V.icon}.png`,alt:V.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):jsxRuntimeExports.jsx("i",{className:"fa-solid fa-user",style:{fontSize:"20px",color:"#9ca3af"}})})}),jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px"},children:jsxRuntimeExports.jsx("span",{style:{background:`${ye(V.role)}20`,color:ye(V.role),padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize"},children:V.role})}),jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px"},children:jsxRuntimeExports.jsx("span",{style:{background:V.active?"#dcfce720":"#fef2f220",color:V.active?"#16a34a":"#dc2626",padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:V.active?"Active":"Inactive"})}),jsxRuntimeExports.jsxs("td",{style:{padding:"16px 24px",color:"#1a1a1a",fontSize:"15px"},children:["User #",V.user_id]}),jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>M(V),style:{background:"#e0f2fe",color:"#0c4a6e",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Edit User",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-pen-to-square"}),"Edit"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>j(V.user_id,V.active),style:{background:V.active?"#fef2f2":"#dcfce7",color:V.active?"#dc2626":"#16a34a",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:V.active?"Deactivate":"Activate",children:[jsxRuntimeExports.jsx("i",{className:`fa-solid fa-${V.active?"ban":"check"}`}),V.active?"Deactivate":"Activate"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>B(V.user_id),style:{background:"#fef2f2",color:"#dc2626",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Delete User",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]})]})})]},V.user_id))})]})})]}),jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",overflow:"hidden",marginTop:"32px"},children:[jsxRuntimeExports.jsx("div",{style:{padding:"20px 24px",borderBottom:"2px solid #d1d5db",background:"#f9fafb"},children:jsxRuntimeExports.jsxs("h3",{style:{margin:"0",fontSize:"20px",fontWeight:"600",color:"#1a1a1a"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-building",style:{marginRight:"8px",color:"#3b82f6"}}),"Branches (",l.length,")"]})}),l.length===0?jsxRuntimeExports.jsxs("div",{style:{padding:"48px 24px",textAlign:"center",color:"#1a1a1a"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-building",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),jsxRuntimeExports.jsx("p",{style:{fontSize:"20px",margin:"0 0 8px 0"},children:"No branches found"}),jsxRuntimeExports.jsx("p",{style:{fontSize:"16px",margin:"0"},children:"Add your first branch to get started"})]}):jsxRuntimeExports.jsx("div",{style:{overflowX:"auto"},children:jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{background:"#f9fafb"},children:[jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Branch Name"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Shop Image"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Address"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Phone"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Manager"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Status"}),jsxRuntimeExports.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{children:l.map((V,be)=>jsxRuntimeExports.jsxs("tr",{style:{borderBottom:be<l.length-1?"1px solid #f3f4f6":"none"},children:[jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px"},children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a",marginBottom:"4px",fontSize:"16px"},children:V.branch_name}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"15px",color:"#6b7280"},children:["ID: ",V.branch_id]})]})}),jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:jsxRuntimeExports.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"12px",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden",border:"2px solid #e5e7eb"},children:V.shop_image?jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",backgroundImage:`url(images/shop/${V.shop_image}.png)`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"white",borderRadius:"10px"}}):jsxRuntimeExports.jsx("i",{className:"fa-solid fa-building",style:{fontSize:"24px",color:"#9ca3af"}})})}),jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px",color:"#1a1a1a",fontSize:"15px"},children:V.address}),jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px",color:"#1a1a1a",fontSize:"15px"},children:V.phone||"N/A"}),jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px",color:"#1a1a1a",fontSize:"15px"},children:V.manager_id?`User #${V.manager_id}`:"Not assigned"}),jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px"},children:jsxRuntimeExports.jsx("span",{style:{background:V.active?"#dcfce720":"#fef2f220",color:V.active?"#16a34a":"#dc2626",padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:V.active?"Active":"Inactive"})}),jsxRuntimeExports.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>ve(V),style:{background:"#e0f2fe",color:"#0c4a6e",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Edit Branch",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-pen-to-square"}),"Edit"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Le(V.branch_id),style:{background:"#fef2f2",color:"#dc2626",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Delete Branch",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]})]})})]},V.branch_id))})]})})]}),d&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[jsxRuntimeExports.jsxs("h2",{style:{margin:"0",fontSize:"26px",fontWeight:"600",color:"#1a1a1a"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-user-plus",style:{marginRight:"8px",color:"#7d8d86"}}),"Add New User"]}),jsxRuntimeExports.jsx("button",{onClick:()=>x(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-xmark"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:J,children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),jsxRuntimeExports.jsx("input",{type:"text",value:C.username,onChange:V=>L({...C,username:V.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Password *"}),jsxRuntimeExports.jsx("input",{type:"password",value:C.password,onChange:V=>L({...C,password:V.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter password"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),jsxRuntimeExports.jsxs("select",{value:C.role,onChange:V=>L({...C,role:V.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[jsxRuntimeExports.jsx("option",{value:"cashier",children:"Cashier"}),jsxRuntimeExports.jsx("option",{value:"manager",children:"Manager"}),jsxRuntimeExports.jsx("option",{value:"admin",children:"Admin"})]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Branch *"}),jsxRuntimeExports.jsxs("select",{value:C.branch_id||"",onChange:V=>L({...C,branch_id:V.target.value?parseInt(V.target.value):void 0}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a branch"}),l.map(V=>jsxRuntimeExports.jsx("option",{value:V.branch_id,children:V.branch_name},V.branch_id))]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:D.map(V=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>L({...C,icon:V.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:C.icon===V.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:C.icon===V.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:C.icon===V.name?"scale(1.05)":"scale(1)",boxShadow:C.icon===V.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${V.name}.png`,alt:V.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:C.icon===V.name?"brightness(1.1) contrast(1.1)":"none"}})}),C.icon===V.name&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},V.name))})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>x(!1),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Y,style:{background:Y?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:Y?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:Y?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Adding..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]})})]})]})]})}),f&&b&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[jsxRuntimeExports.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1a1a1a"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-user-pen",style:{marginRight:"8px",color:"#7d8d86"}}),"Edit User"]}),jsxRuntimeExports.jsx("button",{onClick:()=>{h(!1),v(null)},style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-xmark"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:U,children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),jsxRuntimeExports.jsx("input",{type:"text",value:C.username,onChange:V=>L({...C,username:V.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"New Password (leave blank to keep current)"}),jsxRuntimeExports.jsx("input",{type:"password",value:C.password,onChange:V=>L({...C,password:V.target.value}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter new password (optional)"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),jsxRuntimeExports.jsxs("select",{value:C.role,onChange:V=>L({...C,role:V.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[jsxRuntimeExports.jsx("option",{value:"Cashier",children:"Cashier"}),jsxRuntimeExports.jsx("option",{value:"Manager",children:"Manager"}),jsxRuntimeExports.jsx("option",{value:"Admin",children:"Admin"})]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Branch *"}),jsxRuntimeExports.jsxs("select",{value:C.branch_id||"",onChange:V=>L({...C,branch_id:V.target.value?parseInt(V.target.value):void 0}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a branch"}),l.map(V=>jsxRuntimeExports.jsx("option",{value:V.branch_id,children:V.branch_name},V.branch_id))]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:D.map(V=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>L({...C,icon:V.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:C.icon===V.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:C.icon===V.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:C.icon===V.name?"scale(1.05)":"scale(1)",boxShadow:C.icon===V.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${V.name}.png`,alt:V.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:C.icon===V.name?"brightness(1.1) contrast(1.1)":"none"}})}),C.icon===V.name&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},V.name))})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{h(!1),v(null)},style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Y,style:{background:Y?"#9ca3af":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:Y?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:Y?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-floppy-disk"}),"Update User"]})})]})]})]})}),g&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[jsxRuntimeExports.jsxs("h2",{style:{margin:"0",fontSize:"26px",fontWeight:"600",color:"#1a1a1a"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-building",style:{marginRight:"8px",color:"#3b82f6"}}),"Add New Branch"]}),jsxRuntimeExports.jsx("button",{onClick:()=>y(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-xmark"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:K,children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Branch Name *"}),jsxRuntimeExports.jsx("input",{type:"text",value:I.branch_name,onChange:V=>ae({...I,branch_name:V.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter branch name"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Address *"}),jsxRuntimeExports.jsx("textarea",{value:I.address,onChange:V=>ae({...I,address:V.target.value}),required:!0,rows:3,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",resize:"vertical"},placeholder:"Enter branch address"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Phone Number"}),jsxRuntimeExports.jsx("input",{type:"tel",value:I.phone,onChange:V=>ae({...I,phone:V.target.value}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter phone number (optional)"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Manager (Optional)"}),jsxRuntimeExports.jsxs("select",{value:I.manager_id||"",onChange:V=>ae({...I,manager_id:V.target.value?parseInt(V.target.value):void 0}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a manager (optional)"}),n.filter(V=>V.role==="Manager"||V.role==="Admin").map(V=>jsxRuntimeExports.jsxs("option",{value:V.user_id,children:[V.username," (",V.role,")"]},V.user_id))]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Shop Image *"}),jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:ee.map(V=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>ae({...I,shop_image:V.name}),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"16px",border:I.shop_image===V.name?"3px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"20px",background:I.shop_image===V.name?"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:I.shop_image===V.name?"scale(1.05)":"scale(1)",boxShadow:I.shop_image===V.name?"0 8px 25px rgba(59, 130, 246, 0.3), 0 0 0 1px rgba(59, 130, 246, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"80px",height:"80px",borderRadius:"12px",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginBottom:"8px"},children:jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",backgroundImage:`url(images/shop/${V.name}.png)`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"white",filter:I.shop_image===V.name?"brightness(1.1) contrast(1.1)":"none"}})}),jsxRuntimeExports.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:I.shop_image===V.name?"white":"#1a1a1a"},children:V.label}),I.shop_image===V.name&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},V.name))})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>y(!1),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Y,style:{background:Y?"#9ca3af":"linear-gradient(135deg, #3b82f6, #1d4ed8)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:Y?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:Y?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Adding..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-building"}),"Add Branch"]})})]})]})]})}),_&&R&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[jsxRuntimeExports.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1a1a1a"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-building",style:{marginRight:"8px",color:"#3b82f6"}}),"Edit Branch"]}),jsxRuntimeExports.jsx("button",{onClick:()=>{E(!1),A(null)},style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-xmark"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Ae,children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Branch Name *"}),jsxRuntimeExports.jsx("input",{type:"text",value:I.branch_name,onChange:V=>ae({...I,branch_name:V.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter branch name"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Address *"}),jsxRuntimeExports.jsx("textarea",{value:I.address,onChange:V=>ae({...I,address:V.target.value}),required:!0,rows:3,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",resize:"vertical"},placeholder:"Enter branch address"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Phone Number"}),jsxRuntimeExports.jsx("input",{type:"tel",value:I.phone,onChange:V=>ae({...I,phone:V.target.value}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter phone number (optional)"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Manager (Optional)"}),jsxRuntimeExports.jsxs("select",{value:I.manager_id||"",onChange:V=>ae({...I,manager_id:V.target.value?parseInt(V.target.value):void 0}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a manager (optional)"}),n.filter(V=>V.role==="Manager"||V.role==="Admin").map(V=>jsxRuntimeExports.jsxs("option",{value:V.user_id,children:[V.username," (",V.role,")"]},V.user_id))]})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"24px"},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Shop Image *"}),jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:ee.map(V=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>ae({...I,shop_image:V.name}),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"16px",border:I.shop_image===V.name?"3px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"20px",background:I.shop_image===V.name?"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:I.shop_image===V.name?"scale(1.05)":"scale(1)",boxShadow:I.shop_image===V.name?"0 8px 25px rgba(59, 130, 246, 0.3), 0 0 0 1px rgba(59, 130, 246, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[jsxRuntimeExports.jsx("div",{style:{position:"relative",width:"80px",height:"80px",borderRadius:"12px",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",marginBottom:"8px"},children:jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",backgroundImage:`url(images/shop/${V.name}.png)`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"white",filter:I.shop_image===V.name?"brightness(1.1) contrast(1.1)":"none"}})}),jsxRuntimeExports.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:I.shop_image===V.name?"white":"#1a1a1a"},children:V.label}),I.shop_image===V.name&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},V.name))})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{E(!1),A(null)},style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Y,style:{background:Y?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:Y?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:Y?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-floppy-disk"}),"Update Branch"]})})]})]})]})}),jsxRuntimeExports.jsx("div",{onClick:()=>X(!0),title:"Access Secure Vault - Manage sensitive operations and settings",style:{position:"fixed",bottom:"24px",right:"24px",zIndex:50,width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(125, 141, 134, 0.4)",cursor:"pointer",transition:"all 0.2s ease"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-vault",style:{fontSize:"48px",color:"#f1f0e4"}})}),jsxRuntimeExports.jsx(VaultModal,{isOpen:De,onClose:()=>X(!1)})]})},container="_container_k4aew_2",header="_header_k4aew_10",title="_title_k4aew_16",mainContent="_mainContent_k4aew_32",offlineNotice="_offlineNotice_k4aew_39",offlineNoticeContent="_offlineNoticeContent_k4aew_51",dateNavigation="_dateNavigation_k4aew_62",navButton="_navButton_k4aew_76",currentDate="_currentDate_k4aew_102",controls="_controls_k4aew_144",button="_button_k4aew_151",buttonPrimary="_buttonPrimary_k4aew_170",buttonSecondary="_buttonSecondary_k4aew_179",buttonDanger="_buttonDanger_k4aew_192",notesContainer="_notesContainer_k4aew_202",gridBackground="_gridBackground_k4aew_218",gridPattern="_gridPattern_k4aew_224",emptyState="_emptyState_k4aew_234",emptyStateContent="_emptyStateContent_k4aew_242",emptyStateIcon="_emptyStateIcon_k4aew_247",emptyStateTitle="_emptyStateTitle_k4aew_252",dragIndicator="_dragIndicator_k4aew_258",footer="_footer_k4aew_271",stickyNote="_stickyNote_k4aew_279",stickyNoteDragging="_stickyNoteDragging_k4aew_286",note="_note_k4aew_202",noteOverdue="_noteOverdue_k4aew_306",noteDueToday="_noteDueToday_k4aew_310",noteYellow="_noteYellow_k4aew_315",notePink="_notePink_k4aew_321",noteBlue="_noteBlue_k4aew_327",noteGreen="_noteGreen_k4aew_333",notePurple="_notePurple_k4aew_339",noteOrange="_noteOrange_k4aew_345",noteTopStrip="_noteTopStrip_k4aew_351",noteContent="_noteContent_k4aew_433",noteContentEditing="_noteContentEditing_k4aew_439",noteInput="_noteInput_k4aew_445",noteDateInput="_noteDateInput_k4aew_456",noteTextarea="_noteTextarea_k4aew_466",noteDisplay="_noteDisplay_k4aew_480",noteTitle="_noteTitle_k4aew_486",noteTitleResolved="_noteTitleResolved_k4aew_494",noteDate="_noteDate_k4aew_456",noteDateOverdue="_noteDateOverdue_k4aew_505",noteDateToday="_noteDateToday_k4aew_510",noteBody="_noteBody_k4aew_515",noteBodyResolved="_noteBodyResolved_k4aew_524",noteCorner="_noteCorner_k4aew_529",noteCornerEffect="_noteCornerEffect_k4aew_537",modalOverlay="_modalOverlay_k4aew_548",modal="_modal_k4aew_548",modalHeader="_modalHeader_k4aew_569",modalTitle="_modalTitle_k4aew_573",modalClose="_modalClose_k4aew_593",modalForm="_modalForm_k4aew_605",errorMessage="_errorMessage_k4aew_611",errorContent="_errorContent_k4aew_619",formGroup="_formGroup_k4aew_628",formLabel="_formLabel_k4aew_633",formInput="_formInput_k4aew_641",formTextarea="_formTextarea_k4aew_655",colorSelection="_colorSelection_k4aew_670",colorOption="_colorOption_k4aew_676",colorOptionSelected="_colorOptionSelected_k4aew_689",checkboxContainer="_checkboxContainer_k4aew_694",formCheckbox="_formCheckbox_k4aew_700",checkboxLabel="_checkboxLabel_k4aew_707",preview="_preview_k4aew_716",previewLabel="_previewLabel_k4aew_720",previewNote="_previewNote_k4aew_728",previewTitle="_previewTitle_k4aew_734",previewDate="_previewDate_k4aew_741",previewBody="_previewBody_k4aew_751",modalActions="_modalActions_k4aew_757",modalButton="_modalButton_k4aew_763",modalButtonCancel="_modalButtonCancel_k4aew_777",modalButtonSubmit="_modalButtonSubmit_k4aew_786",modalButtonDanger="_modalButtonDanger_k4aew_795",confirmationDialog="_confirmationDialog_k4aew_869",confirmationContent="_confirmationContent_k4aew_880",confirmationHeader="_confirmationHeader_k4aew_889",confirmationIcon="_confirmationIcon_k4aew_895",confirmationButton="_confirmationButton_k4aew_926",confirmationButtonCancel="_confirmationButtonCancel_k4aew_936",confirmationButtonConfirm="_confirmationButtonConfirm_k4aew_945",calendarModal="_calendarModal_k4aew_955",calendar="_calendar_k4aew_955",calendarHeader="_calendarHeader_k4aew_981",calendarCloseButton="_calendarCloseButton_k4aew_989",calendarTitle="_calendarTitle_k4aew_1011",calendarNavButton="_calendarNavButton_k4aew_1017",calendarGrid="_calendarGrid_k4aew_1035",calendarDayHeader="_calendarDayHeader_k4aew_1041",calendarDay="_calendarDay_k4aew_1041",calendarDayOtherMonth="_calendarDayOtherMonth_k4aew_1068",calendarDayToday="_calendarDayToday_k4aew_1072",calendarDaySelected="_calendarDaySelected_k4aew_1082",calendarDayWithReminders="_calendarDayWithReminders_k4aew_1092",calendarDayWithRemindersToday="_calendarDayWithRemindersToday_k4aew_1102",calendarDayWithRemindersSelected="_calendarDayWithRemindersSelected_k4aew_1111",calendarReminderCount="_calendarReminderCount_k4aew_1136",lilyMascot="_lilyMascot_k4aew_1178",lilySpeechBubble="_lilySpeechBubble_k4aew_1188",lilySpeechTail="_lilySpeechTail_k4aew_1206",lilyImage="_lilyImage_k4aew_1217",styles={container,header,title,mainContent,offlineNotice,offlineNoticeContent,dateNavigation,navButton,currentDate,controls,button,buttonPrimary,buttonSecondary,buttonDanger,notesContainer,gridBackground,gridPattern,emptyState,emptyStateContent,emptyStateIcon,emptyStateTitle,dragIndicator,footer,stickyNote,stickyNoteDragging,note,noteOverdue,noteDueToday,noteYellow,notePink,noteBlue,noteGreen,notePurple,noteOrange,noteTopStrip,noteContent,noteContentEditing,noteInput,noteDateInput,noteTextarea,noteDisplay,noteTitle,noteTitleResolved,noteDate,noteDateOverdue,noteDateToday,noteBody,noteBodyResolved,noteCorner,noteCornerEffect,modalOverlay,modal,modalHeader,modalTitle,modalClose,modalForm,errorMessage,errorContent,formGroup,formLabel,formInput,formTextarea,colorSelection,colorOption,colorOptionSelected,checkboxContainer,formCheckbox,checkboxLabel,preview,previewLabel,previewNote,previewTitle,previewDate,previewBody,modalActions,modalButton,modalButtonCancel,modalButtonSubmit,modalButtonDanger,confirmationDialog,confirmationContent,confirmationHeader,confirmationIcon,confirmationButton,confirmationButtonCancel,confirmationButtonConfirm,calendarModal,calendar,calendarHeader,calendarCloseButton,calendarTitle,calendarNavButton,calendarGrid,calendarDayHeader,calendarDay,calendarDayOtherMonth,calendarDayToday,calendarDaySelected,calendarDayWithReminders,calendarDayWithRemindersToday,calendarDayWithRemindersSelected,calendarReminderCount,lilyMascot,lilySpeechBubble,lilySpeechTail,lilyImage};function Reminders(){const{user:e,currentUserId:t}=useAuth(),{selectedBranchId:r}=useBranch(),[n,a]=reactExports.useState([]),[l,c]=reactExports.useState(!0),[d,x]=reactExports.useState(null),[f,h]=reactExports.useState({x:0,y:0}),[g,y]=reactExports.useState(null),[_,E]=reactExports.useState(!1),[b,v]=reactExports.useState(!1),[R,A]=reactExports.useState(!1),[C,L]=reactExports.useState(null),[I,ae]=reactExports.useState({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),[D,ee]=reactExports.useState({title:"",body:"",remind_date:"",color:"yellow",resolved:!1}),[Y,le]=reactExports.useState(new Date),[te,oe]=reactExports.useState(!1),[Be,Pe]=reactExports.useState(!1),[De,X]=reactExports.useState(new Date),[Se,z]=reactExports.useState(!1),[re,T]=reactExports.useState("Hi! I'm Lily, your reminder assistant! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),[J,B]=reactExports.useState(()=>{const ne=localStorage.getItem("lilyEnabled");return ne!==null?JSON.parse(ne):!0}),[j,M]=reactExports.useState(!0),U={yellow:{bg:styles.noteYellow,border:styles.noteYellow,shadow:styles.noteYellow},pink:{bg:styles.notePink,border:styles.notePink,shadow:styles.notePink},blue:{bg:styles.noteBlue,border:styles.noteBlue,shadow:styles.noteBlue},green:{bg:styles.noteGreen,border:styles.noteGreen,shadow:styles.noteGreen},purple:{bg:styles.notePurple,border:styles.notePurple,shadow:styles.notePurple},orange:{bg:styles.noteOrange,border:styles.noteOrange,shadow:styles.noteOrange}},K=()=>{const ne=new Date(Y);ne.setDate(ne.getDate()-1),le(ne)},Le=()=>{const ne=new Date(Y);ne.setDate(ne.getDate()+1),le(ne)},ve=ne=>{const Ue=new Date(De);ne==="prev"?Ue.setMonth(Ue.getMonth()-1):Ue.setMonth(Ue.getMonth()+1),X(Ue)},Ae=ne=>{le(ne),Pe(!1)},ye=()=>{const ne=new Set;return n.forEach(Ue=>{const Qe=new Date(Ue.remind_date);ne.add(Qe.toDateString())}),ne},V=()=>{const ne={};return n.forEach(Ue=>{const gt=new Date(Ue.remind_date).toDateString();ne[gt]=(ne[gt]||0)+1}),ne},be=()=>{const ne=De.getFullYear(),Ue=De.getMonth(),Qe=new Date(ne,Ue,1),gt=new Date(Qe);gt.setDate(gt.getDate()-Qe.getDay());const Nt=[],It=ye(),Ot=V(),Wt=new Date,Fe=new Date(Y);for(let tt=0;tt<42;tt++){const ut=new Date(gt);ut.setDate(gt.getDate()+tt);const Q=ut.getMonth()===Ue,ge=ut.toDateString()===Wt.toDateString(),rt=ut.toDateString()===Fe.toDateString(),xt=It.has(ut.toDateString()),Mt=Ot[ut.toDateString()]||0;Nt.push({date:ut,isCurrentMonth:Q,isToday:ge,isSelected:rt,hasReminders:xt,reminderCount:Mt})}return Nt},Ne=()=>{const ne=!J;B(ne),localStorage.setItem("lilyEnabled",JSON.stringify(ne)),ne&&(T("Hi! I'm back! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),z(!0))},H=()=>J?jsxRuntimeExports.jsxs("div",{className:styles.lilyMascot,children:[Se&&jsxRuntimeExports.jsxs("div",{className:styles.lilySpeechBubble,children:[jsxRuntimeExports.jsx("p",{children:re}),jsxRuntimeExports.jsx("div",{className:styles.lilySpeechTail})]}),jsxRuntimeExports.jsx("div",{className:styles.lilyImage,onClick:()=>{z(!Se)},onDoubleClick:()=>{Ne()},children:jsxRuntimeExports.jsx("img",{src:e?.icon?`/retailpos/images/icons/${e.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:e?.icon||"Lily"})})]}):null,Te=()=>{const ne=new Date(Y);return ne.setHours(0,0,0,0),n.filter(Ue=>{const Qe=new Date(Ue.remind_date);Qe.setHours(0,0,0,0);const gt=Qe.getTime()===ne.getTime(),Nt=j||!Ue.resolved;return gt&&Nt})},se=async()=>{if(a([]),oe(!1),!_)try{const{error:ne}=await supabase.from("reminders").delete().neq("reminder_id",0);ne&&console.error("Error deleting all reminders from database:",ne)}catch(ne){console.error("Error deleting all reminders:",ne)}},Ce=async()=>{try{if(c(!0),!e?.business_id){a([]),c(!1);return}let ne=supabase.from("reminders").select("*").eq("business_id",e.business_id);r&&(ne=ne.eq("branch_id",r));const{data:Ue,error:Qe}=await ne.order("remind_date",{ascending:!0});if(Qe)throw console.error("Database fetch error:",Qe),Qe;console.log("Fetched reminders from database:",Ue);const gt=Ue?.map((Nt,It)=>({...Nt,x:Math.random()*400+50,y:Math.random()*300+50,rotation:(Math.random()-.5)*6,isEditing:!1,color:Object.keys(U)[It%Object.keys(U).length]}))||[];console.log("Reminders with UI properties:",gt),a(gt)}catch(ne){console.error("Error fetching reminders:",ne),y("Failed to load reminders. Please try again.")}finally{c(!1)}};reactExports.useEffect(()=>{(async()=>{try{const{data:Ue,error:Qe}=await supabase.from("reminders").select("count",{count:"exact",head:!0});Qe?(console.error("Table test error:",Qe),y("Database table 'reminders' does not exist. Please run the SQL commands from database-schema.sql in your Supabase SQL editor."),E(!0),c(!1)):(console.log("Table exists, fetching reminders..."),Ce())}catch(Ue){console.error("Table test failed:",Ue),y("Failed to connect to database. Please check your connection.")}})()},[]),reactExports.useEffect(()=>{e?.business_id&&Ce()},[r]);const pt=()=>{ae({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),y(null),v(!0)},pe=()=>{v(!1),ae({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"})},ze=()=>{A(!1),L(null),ee({title:"",body:"",remind_date:"",color:"yellow",resolved:!1})},Ye=async()=>{if(!C||!D.title.trim()||!D.body.trim()){y("Please fill in both title and body for the reminder.");return}await nt(C.reminder_id,{title:D.title.trim(),body:D.body.trim(),remind_date:D.remind_date,color:D.color,resolved:D.resolved}),ze()},lt=async()=>{if(!I.title.trim()||!I.body.trim()){y("Please fill in both title and body for the reminder.");return}const ne={title:I.title.trim(),body:I.body.trim(),remind_date:I.remind_date,owner_id:t?parseInt(t):1,business_id:e?.business_id||1,branch_id:r};if(_){const Ue=Date.now();a([...n,{...ne,reminder_id:Ue,created_at:new Date().toISOString()}]),pe();return}try{if(t)ne.owner_id=parseInt(t);else{const gt=Date.now();a([...n,{...ne,reminder_id:gt,created_at:new Date().toISOString()}]),pe();return}const{data:Ue,error:Qe}=await supabase.from("reminders").insert([{title:ne.title,body:ne.body,remind_date:ne.remind_date,owner_id:ne.owner_id,branch_id:ne.branch_id}]).select().single();if(Qe){const gt=Date.now();a([...n,{...ne,reminder_id:gt,created_at:new Date().toISOString()}]),pe();return}a([...n,{...ne,reminder_id:Ue.reminder_id,created_at:new Date().toISOString()}]),pe()}catch(Ue){console.error("Error adding reminder:",Ue);const Qe=Date.now();a([...n,{...ne,reminder_id:Qe,created_at:new Date().toISOString()}]),pe()}},Ke=async ne=>{if(a(n.filter(Ue=>Ue.reminder_id!==ne)),!_)try{const{error:Ue}=await supabase.from("reminders").delete().eq("reminder_id",ne);Ue&&console.error("Error deleting reminder from database:",Ue)}catch(Ue){console.error("Error deleting reminder:",Ue)}},nt=async(ne,Ue)=>{if(console.log("updateReminder called with:",{id:ne,updates:Ue,offlineMode:_}),a(n.map(Qe=>Qe.reminder_id===ne?{...Qe,...Ue}:Qe)),_){console.log("Offline mode - skipping database update");return}try{if(Ue.title||Ue.body||Ue.remind_date||Ue.resolved!==void 0){console.log("Updating database with:",{title:Ue.title,body:Ue.body,remind_date:Ue.remind_date,resolved:Ue.resolved});const{error:Qe}=await supabase.from("reminders").update({title:Ue.title,body:Ue.body,remind_date:Ue.remind_date,resolved:Ue.resolved}).eq("reminder_id",ne);Qe?console.error("Error updating reminder in database:",Qe):console.log("Successfully updated reminder in database")}}catch(Qe){console.error("Error updating reminder:",Qe)}},mt=(ne,Ue)=>{ne.preventDefault();const Qe=ne.currentTarget.getBoundingClientRect();x(Ue),h({x:ne.clientX-Qe.left,y:ne.clientY-Qe.top})},it=ne=>{if(d){const Ue=document.getElementById("sticky-container");if(Ue){const Qe=Ue.getBoundingClientRect(),gt=Math.max(0,Math.min(ne.clientX-Qe.left-f.x,Qe.width-224)),Nt=Math.max(0,Math.min(ne.clientY-Qe.top-f.y,Qe.height-224));a(n.map(It=>It.reminder_id===d.reminder_id?{...It,x:gt,y:Nt}:It))}}},Je=()=>{x(null),h({x:0,y:0})};reactExports.useEffect(()=>{if(d)return document.addEventListener("mousemove",it),document.addEventListener("mouseup",Je),()=>{document.removeEventListener("mousemove",it),document.removeEventListener("mouseup",Je)}},[d,f]);const bt=({reminder:ne})=>{const[Ue,Qe]=reactExports.useState(ne.title),[gt,Nt]=reactExports.useState(ne.body),[It,Ot]=reactExports.useState(ne.remind_date),Wt=reactExports.useRef(null);reactExports.useEffect(()=>{ne.isEditing&&Wt.current&&(Wt.current.focus(),Wt.current.select())},[ne.isEditing]);const Fe=ht=>{Nt(ht.target.value),ht.target.style.height="auto",ht.target.style.height=ht.target.scrollHeight+"px"},tt=()=>{Ue.trim()&&gt.trim()?nt(ne.reminder_id,{title:Ue.trim(),body:gt.trim(),remind_date:It,isEditing:!1}):(Qe(ne.title),Nt(ne.body),Ot(ne.remind_date),nt(ne.reminder_id,{isEditing:!1}))},ut=ht=>{ht.key==="Enter"&&ht.shiftKey||(ht.key==="Enter"?(ht.preventDefault(),tt()):ht.key==="Escape"&&(Qe(ne.title),Nt(ne.body),Ot(ne.remind_date),nt(ne.reminder_id,{isEditing:!1})))},Q=ht=>{ht.key==="Enter"?(ht.preventDefault(),tt()):ht.key==="Escape"&&(Qe(ne.title),Nt(ne.body),Ot(ne.remind_date),nt(ne.reminder_id,{isEditing:!1}))},ge=U[ne.color]||U.yellow,rt=new Date,xt=new Date(ne.remind_date),Mt=xt<rt&&xt.toDateString()!==rt.toDateString(),Dt=xt.toDateString()===rt.toDateString();return jsxRuntimeExports.jsx("div",{className:`${styles.stickyNote} ${d?.reminder_id===ne.reminder_id?styles.stickyNoteDragging:""}`,style:{left:`${ne.x}px`,top:`${ne.y}px`,transform:`rotate(${ne.rotation}deg)`},children:jsxRuntimeExports.jsxs("div",{className:`${styles.note} ${ge.bg} ${Mt?styles.noteOverdue:Dt?styles.noteDueToday:""}`,onMouseDown:ht=>!ne.isEditing&&mt(ht,ne),children:[jsxRuntimeExports.jsx("div",{className:`${styles.noteTopStrip} ${ge.border}`}),jsxRuntimeExports.jsx("div",{className:styles.noteContent,children:ne.isEditing?jsxRuntimeExports.jsxs("div",{className:styles.noteContentEditing,children:[jsxRuntimeExports.jsx("input",{type:"text",value:Ue,onChange:ht=>Qe(ht.target.value),onKeyDown:Q,onBlur:tt,className:styles.noteInput,placeholder:"Reminder title..."}),jsxRuntimeExports.jsx("input",{type:"date",value:It,onChange:ht=>Ot(ht.target.value),onKeyDown:Q,onBlur:tt,className:styles.noteDateInput}),jsxRuntimeExports.jsx("textarea",{ref:Wt,value:gt,onChange:Fe,onBlur:tt,onKeyDown:ut,className:styles.noteTextarea,style:{fontFamily:"Comic Sans MS, cursive, sans-serif",minHeight:"80px"},placeholder:"Reminder details..."})]}):jsxRuntimeExports.jsxs("div",{onContextMenu:ht=>{ht.preventDefault(),ht.stopPropagation(),console.log("Note right-clicked for reminder:",ne.reminder_id),L(ne),ee({title:ne.title,body:ne.body,remind_date:ne.remind_date,color:ne.color||"yellow",resolved:ne.resolved||!1}),A(!0)},className:styles.noteDisplay,children:[jsxRuntimeExports.jsx("div",{className:styles.noteTitle,children:jsxRuntimeExports.jsx("span",{className:ne.resolved?styles.noteTitleResolved:"",children:ne.title})}),jsxRuntimeExports.jsxs("div",{className:`${styles.noteDate} ${Mt?styles.noteDateOverdue:Dt?styles.noteDateToday:""}`,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(ne.remind_date).toLocaleDateString(),Mt&&jsxRuntimeExports.jsx("span",{style:{color:"#dc2626",marginLeft:"0.5rem",fontWeight:"700"},children:"OVERDUE"}),Dt&&!Mt&&jsxRuntimeExports.jsx("span",{style:{color:"#d97706",marginLeft:"0.5rem",fontWeight:"700"},children:"TODAY"})]}),jsxRuntimeExports.jsx("div",{className:`${styles.noteBody} ${ne.resolved?styles.noteBodyResolved:""}`,style:{fontFamily:"Comic Sans MS, cursive, sans-serif"},children:ne.body})]})}),jsxRuntimeExports.jsx("div",{className:styles.noteCorner,children:jsxRuntimeExports.jsx("div",{className:`${styles.noteCornerEffect} ${ge.bg}`})})]})})};return jsxRuntimeExports.jsxs("div",{className:styles.container,children:[jsxRuntimeExports.jsx("div",{className:styles.header,children:jsxRuntimeExports.jsxs("div",{className:styles.title,children:[jsxRuntimeExports.jsxs("h1",{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.75rem"}}),"Reminders"]}),jsxRuntimeExports.jsx("p",{children:"Click and drag to move reminders around  Right-click to edit"})]})}),jsxRuntimeExports.jsxs("div",{className:styles.mainContent,children:[jsxRuntimeExports.jsxs("div",{className:styles.dateNavigation,children:[jsxRuntimeExports.jsx("button",{onClick:K,className:styles.navButton,onMouseEnter:()=>{J&&(T("Click this arrow to go to the previous day! This helps you navigate through your reminders day by day."),z(!0))},onMouseLeave:()=>{J&&z(!1)},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left"})}),jsxRuntimeExports.jsx("div",{className:styles.currentDate,onClick:()=>Pe(!Be),style:{cursor:"pointer"},onMouseEnter:()=>{J&&(T("Click on this date to open the calendar modal! You can see all your reminders and navigate to any date quickly."),z(!0))},onMouseLeave:()=>{J&&z(!1)},children:Y.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),jsxRuntimeExports.jsx("button",{onClick:Le,className:styles.navButton,onMouseEnter:()=>{J&&(T("Click this arrow to go to the next day! This helps you navigate through your reminders day by day."),z(!0))},onMouseLeave:()=>{J&&z(!1)},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),Be&&jsxRuntimeExports.jsx("div",{className:styles.calendarModal,onClick:()=>Pe(!1),children:jsxRuntimeExports.jsxs("div",{className:styles.calendar,onClick:ne=>ne.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:styles.calendarHeader,children:[jsxRuntimeExports.jsx("button",{onClick:()=>Pe(!1),className:styles.calendarCloseButton,children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times"})}),jsxRuntimeExports.jsx("button",{onClick:()=>ve("prev"),className:styles.calendarNavButton,children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left"})}),jsxRuntimeExports.jsx("div",{className:styles.calendarTitle,children:De.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),jsxRuntimeExports.jsx("button",{onClick:()=>ve("next"),className:styles.calendarNavButton,children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),jsxRuntimeExports.jsxs("div",{className:styles.calendarGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ne=>jsxRuntimeExports.jsx("div",{className:styles.calendarDayHeader,children:ne},ne)),be().map((ne,Ue)=>{let Qe=styles.calendarDay;return ne.isCurrentMonth?ne.hasReminders&&ne.isToday?Qe+=` ${styles.calendarDayWithRemindersToday}`:ne.hasReminders&&ne.isSelected?Qe+=` ${styles.calendarDayWithRemindersSelected}`:ne.hasReminders?Qe+=` ${styles.calendarDayWithReminders}`:ne.isToday?Qe+=` ${styles.calendarDayToday}`:ne.isSelected&&(Qe+=` ${styles.calendarDaySelected}`):Qe+=` ${styles.calendarDayOtherMonth}`,jsxRuntimeExports.jsxs("div",{className:Qe,onClick:()=>Ae(ne.date),children:[ne.date.getDate(),ne.hasReminders&&jsxRuntimeExports.jsx("div",{className:styles.calendarReminderCount,children:ne.reminderCount})]},Ue)})]})]})}),_&&jsxRuntimeExports.jsx("div",{className:styles.offlineNotice,children:jsxRuntimeExports.jsxs("div",{className:styles.offlineNoticeContent,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Offline Mode:"})," The reminders table doesn't exist in your database yet. Reminders will work locally but won't be saved permanently.",jsxRuntimeExports.jsx("a",{href:"#",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),style:{textDecoration:"underline",marginLeft:"0.25rem"},children:"Create the table in Supabase"})]})]})}),jsxRuntimeExports.jsxs("div",{className:styles.controls,children:[jsxRuntimeExports.jsxs("button",{onClick:pt,className:`${styles.button} ${styles.buttonPrimary}`,onMouseEnter:()=>{J&&(T("Click this button to add a new reminder! You can set the title, content, date, and color for your reminder."),z(!0))},onMouseLeave:()=>{J&&z(!1)},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus-circle"}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"0.5rem"},children:"Add Reminder"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{const ne=document.getElementById("sticky-container");if(ne){const Ue=ne.getBoundingClientRect();a(n.map(Qe=>({...Qe,x:Math.random()*(Ue.width-224)+20,y:Math.random()*(Ue.height-224)+20,rotation:(Math.random()-.5)*6})))}},className:`${styles.button} ${styles.buttonSecondary}`,onMouseEnter:()=>{J&&(T("Click this button to shuffle all your reminders around! This gives them new random positions on the board."),z(!0))},onMouseLeave:()=>{J&&z(!1)},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-random"}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"0.5rem"},children:"Shuffle"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>M(!j),className:`${styles.button} ${j?styles.buttonPrimary:styles.buttonSecondary}`,onMouseEnter:()=>{J&&(T(j?"Click to hide completed reminders and focus on what's still pending!":"Click to show all reminders including completed ones!"),z(!0))},onMouseLeave:()=>{J&&z(!1)},children:[jsxRuntimeExports.jsx("i",{className:`fa-solid ${j?"fa-eye":"fa-eye-slash"}`}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"0.5rem"},children:j?"Show All":"Hide Completed"})]}),n.length>0&&jsxRuntimeExports.jsxs("button",{onClick:()=>oe(!0),className:`${styles.button} ${styles.buttonDanger}`,onMouseEnter:()=>{J&&(T("Click this button to remove all reminders at once! Be careful - this action cannot be undone."),z(!0))},onMouseLeave:()=>{J&&z(!1)},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-trash-can"}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"0.5rem"},children:"Clear All"})]})]}),jsxRuntimeExports.jsxs("div",{id:"sticky-container",className:styles.notesContainer,style:{minHeight:"600px"},children:[jsxRuntimeExports.jsx("div",{className:styles.gridBackground,children:jsxRuntimeExports.jsx("div",{className:styles.gridPattern})}),Te().map(ne=>jsxRuntimeExports.jsx(bt,{reminder:ne},ne.reminder_id)),Te().length===0&&jsxRuntimeExports.jsx("div",{className:styles.emptyState,children:jsxRuntimeExports.jsxs("div",{className:styles.emptyStateContent,children:[jsxRuntimeExports.jsx("div",{className:styles.emptyStateIcon,children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-sticky-note"})}),jsxRuntimeExports.jsx("h3",{className:styles.emptyStateTitle,children:"No reminders for this date"}),jsxRuntimeExports.jsxs("p",{children:['Click "Add Reminder" to create your first reminder for ',Y.toLocaleDateString()]})]})}),d&&jsxRuntimeExports.jsxs("div",{className:styles.dragIndicator,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-arrows-up-down-left-right",style:{marginRight:"0.25rem"}}),"Dragging reminder..."]})]}),jsxRuntimeExports.jsx("div",{className:styles.footer,children:jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-lightbulb",style:{marginRight:"0.25rem"}}),"Tips: Shift+Enter for new lines  Escape to cancel editing  Right-click to edit  Drag reminders around freely"]})}),b&&jsxRuntimeExports.jsx("div",{className:styles.modalOverlay,children:jsxRuntimeExports.jsx("div",{className:styles.modal,children:jsxRuntimeExports.jsxs("div",{className:styles.modalHeader,children:[jsxRuntimeExports.jsxs("div",{className:styles.modalTitle,children:[jsxRuntimeExports.jsxs("h2",{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Create New Reminder"]}),jsxRuntimeExports.jsx("button",{onClick:pe,className:styles.modalClose,children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ne=>{ne.preventDefault(),lt()},className:styles.modalForm,children:[g&&jsxRuntimeExports.jsx("div",{className:styles.errorMessage,children:jsxRuntimeExports.jsxs("div",{className:styles.errorContent,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem"},children:g})]})}),jsxRuntimeExports.jsxs("div",{className:styles.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"title",className:styles.formLabel,children:"Title *"}),jsxRuntimeExports.jsx("input",{type:"text",id:"title",value:I.title,onChange:ne=>ae({...I,title:ne.target.value}),className:styles.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{className:styles.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"remind_date",className:styles.formLabel,children:"Remind Date *"}),jsxRuntimeExports.jsx("input",{type:"date",id:"remind_date",value:I.remind_date,onChange:ne=>ae({...I,remind_date:ne.target.value}),className:styles.formInput,required:!0})]}),jsxRuntimeExports.jsxs("div",{className:styles.formGroup,children:[jsxRuntimeExports.jsx("label",{className:styles.formLabel,children:"Color"}),jsxRuntimeExports.jsx("div",{className:styles.colorSelection,children:Object.entries(U).map(([ne,Ue])=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ae({...I,color:ne}),className:`${styles.colorOption} ${Ue.bg} ${I.color===ne?styles.colorOptionSelected:""}`,title:ne},ne))})]}),jsxRuntimeExports.jsxs("div",{className:styles.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"body",className:styles.formLabel,children:"Details *"}),jsxRuntimeExports.jsx("textarea",{id:"body",value:I.body,onChange:ne=>ae({...I,body:ne.target.value}),className:styles.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),I.title&&I.body&&jsxRuntimeExports.jsxs("div",{className:styles.preview,children:[jsxRuntimeExports.jsx("label",{className:styles.previewLabel,children:"Preview"}),jsxRuntimeExports.jsxs("div",{className:`${styles.previewNote} ${U[I.color]?.bg} ${U[I.color]?.border}`,children:[jsxRuntimeExports.jsx("div",{className:styles.previewTitle,children:I.title}),jsxRuntimeExports.jsxs("div",{className:styles.previewDate,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(I.remind_date).toLocaleDateString()]}),jsxRuntimeExports.jsx("div",{className:styles.previewBody,children:I.body})]})]}),jsxRuntimeExports.jsxs("div",{className:styles.modalActions,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:pe,className:`${styles.modalButton} ${styles.modalButtonCancel}`,children:"Cancel"}),jsxRuntimeExports.jsxs("button",{type:"submit",className:`${styles.modalButton} ${styles.modalButtonSubmit}`,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-plus"}),"Create Reminder"]})]})]})]})})}),R&&C&&jsxRuntimeExports.jsx("div",{className:styles.modalOverlay,children:jsxRuntimeExports.jsx("div",{className:styles.modal,children:jsxRuntimeExports.jsxs("div",{className:styles.modalHeader,children:[jsxRuntimeExports.jsxs("div",{className:styles.modalTitle,children:[jsxRuntimeExports.jsxs("h2",{children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-edit",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Edit Reminder"]}),jsxRuntimeExports.jsx("button",{onClick:ze,className:styles.modalClose,children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ne=>{ne.preventDefault(),Ye()},className:styles.modalForm,children:[g&&jsxRuntimeExports.jsx("div",{className:styles.errorMessage,children:jsxRuntimeExports.jsxs("div",{className:styles.errorContent,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem"},children:g})]})}),jsxRuntimeExports.jsxs("div",{className:styles.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"edit-title",className:styles.formLabel,children:"Title *"}),jsxRuntimeExports.jsx("input",{type:"text",id:"edit-title",value:D.title,onChange:ne=>ee({...D,title:ne.target.value}),className:styles.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{className:styles.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"edit-remind_date",className:styles.formLabel,children:"Remind Date *"}),jsxRuntimeExports.jsx("input",{type:"date",id:"edit-remind_date",value:D.remind_date,onChange:ne=>ee({...D,remind_date:ne.target.value}),className:styles.formInput,required:!0})]}),jsxRuntimeExports.jsxs("div",{className:styles.formGroup,children:[jsxRuntimeExports.jsx("label",{className:styles.formLabel,children:"Color"}),jsxRuntimeExports.jsx("div",{className:styles.colorSelection,children:Object.entries(U).map(([ne,Ue])=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ee({...D,color:ne}),className:`${styles.colorOption} ${Ue.bg} ${D.color===ne?styles.colorOptionSelected:""}`,title:ne},ne))})]}),jsxRuntimeExports.jsxs("div",{className:styles.formGroup,children:[jsxRuntimeExports.jsx("label",{className:styles.formLabel,children:"Status"}),jsxRuntimeExports.jsxs("div",{className:styles.checkboxContainer,children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"edit-resolved",checked:D.resolved,onChange:ne=>ee({...D,resolved:ne.target.checked}),className:styles.formCheckbox}),jsxRuntimeExports.jsxs("label",{htmlFor:"edit-resolved",className:styles.checkboxLabel,children:[jsxRuntimeExports.jsx("i",{className:`fa-solid ${D.resolved?"fa-check-square":"fa-square"}`,style:{marginRight:"0.5rem"}}),"Mark as completed/resolved"]})]})]}),jsxRuntimeExports.jsxs("div",{className:styles.formGroup,children:[jsxRuntimeExports.jsx("label",{htmlFor:"edit-body",className:styles.formLabel,children:"Details *"}),jsxRuntimeExports.jsx("textarea",{id:"edit-body",value:D.body,onChange:ne=>ee({...D,body:ne.target.value}),className:styles.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),D.title&&D.body&&jsxRuntimeExports.jsxs("div",{className:styles.preview,children:[jsxRuntimeExports.jsx("label",{className:styles.previewLabel,children:"Preview"}),jsxRuntimeExports.jsxs("div",{className:`${styles.previewNote} ${U[D.color]?.bg} ${U[D.color]?.border}`,children:[jsxRuntimeExports.jsx("div",{className:styles.previewTitle,children:D.title}),jsxRuntimeExports.jsxs("div",{className:styles.previewDate,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(D.remind_date).toLocaleDateString()]}),jsxRuntimeExports.jsx("div",{className:styles.previewBody,children:D.body})]})]}),jsxRuntimeExports.jsxs("div",{className:styles.modalActions,children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{Ke(C.reminder_id),ze()},className:`${styles.modalButton} ${styles.modalButtonDanger}`,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:ze,className:`${styles.modalButton} ${styles.modalButtonCancel}`,children:"Cancel"}),jsxRuntimeExports.jsxs("button",{type:"submit",className:`${styles.modalButton} ${styles.modalButtonSubmit}`,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-save"}),"Update Reminder"]})]})]})]})})}),te&&jsxRuntimeExports.jsx("div",{className:styles.confirmationDialog,children:jsxRuntimeExports.jsxs("div",{className:styles.confirmationContent,children:[jsxRuntimeExports.jsxs("div",{className:styles.confirmationHeader,children:[jsxRuntimeExports.jsx("div",{className:styles.confirmationIcon,children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle"})}),jsxRuntimeExports.jsx("h3",{children:"Remove All Reminders"})]}),jsxRuntimeExports.jsx("p",{children:"Are you sure you want to remove all reminders? This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:styles.confirmationButtons,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>oe(!1),className:`${styles.confirmationButton} ${styles.confirmationButtonCancel}`,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-times",style:{marginRight:"0.5rem"}}),"Cancel"]}),jsxRuntimeExports.jsxs("button",{onClick:se,className:`${styles.confirmationButton} ${styles.confirmationButtonConfirm}`,children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-trash",style:{marginRight:"0.5rem"}}),"Remove All"]})]})]})})]}),jsxRuntimeExports.jsx(H,{})]})}const SelectUser=()=>{const e=useNavigate(),{user:t,switchUser:r}=useAuth(),[n,a]=reactExports.useState([]),[l,c]=reactExports.useState([]),[d,x]=reactExports.useState(!0),[f,h]=reactExports.useState(null),[g,y]=reactExports.useState(null),[_,E]=reactExports.useState(!1),[b,v]=reactExports.useState(0),[R,A]=reactExports.useState(null),[C,L]=reactExports.useState(!1),[I,ae]=reactExports.useState(""),[D,ee]=reactExports.useState(""),[Y,le]=reactExports.useState(!1),[te,oe]=reactExports.useState(!1),[Be,Pe]=reactExports.useState(""),[De,X]=reactExports.useState(""),[Se,z]=reactExports.useState(!1),[re,T]=reactExports.useState(!1),[J,B]=reactExports.useState(!1);reactExports.useEffect(()=>{t?.business_id&&(j(),M())},[t?.business_id]),reactExports.useEffect(()=>{t?.pin&&!Se&&oe(!0)},[t?.pin,Se]);const j=async()=>{if(t?.business_id)try{x(!0);const{data:se,error:Ce}=await supabase.from("users").select("*").eq("business_id",t.business_id).eq("active",!0).order("user_id",{ascending:!1});if(Ce){console.error("Error fetching users:",Ce);return}const pt=await Promise.all((se||[]).map(async pe=>{if(pe.branch_id){const{data:ze}=await supabase.from("branches").select("branch_name").eq("branch_id",pe.branch_id).single();return{...pe,branch_name:ze?.branch_name||"Branch Not Found"}}return{...pe,branch_name:"No Branch Assigned"}}));a(pt)}catch(se){console.error("Error fetching users:",se)}finally{x(!1)}},M=async()=>{if(t?.business_id)try{const{data:se,error:Ce}=await supabase.from("branches").select("*").eq("business_id",t.business_id).eq("active",!0).order("branch_id",{ascending:!1});if(Ce){console.error("Error fetching branches:",Ce);return}c(se||[]),se&&se.length>1?E(!0):se&&se.length===1&&y(se[0])}catch(se){console.error("Error fetching branches:",se)}},U=se=>{h(se),L(!0),ae(""),ee(""),T(!1)},K=se=>{y(se),E(!1)},Le=()=>{A("right"),v(se=>(se+1)%l.length)},ve=()=>{A("left"),v(se=>(se-1+l.length)%l.length)},Ae=()=>{l[b]&&K(l[b])},ye=async se=>{if(se.preventDefault(),!(!f||!I||!g)){le(!0),ee("");try{if(await r(f.user_id,I,re))localStorage.setItem("selected_branch_id",g.branch_id.toString()),localStorage.setItem("selected_branch_name",g.branch_name),e("/dashboard");else throw new Error(re?"Invalid PIN":"Invalid password")}catch(Ce){console.log("Password error:",Ce),ee(re?"Invalid PIN. Please try again.":"Invalid password. Please try again.")}finally{le(!1)}}},V=()=>{L(!1),h(null),ae(""),ee(""),le(!1),T(!1),l.length>1&&E(!0)},be=se=>{h(se),L(!0),ae(""),ee(""),T(!1),B(!1)},Ne=se=>{switch(se.toLowerCase()){case"admin":return"#dc2626";case"owner":return"#7c3aed";case"manager":return"#ea580c";case"cashier":return"#2563eb";default:return"#6b7280"}},H=se=>{if(!se)return"Never";const Ce=new Date(se);return Number.isNaN(Ce.getTime())?"Never":Ce.toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})},Te=async se=>{if(se.preventDefault(),!Be){X("Please enter your PIN");return}t?.pin&&t.pin===Be?(oe(!1),z(!0),Pe(""),X("")):X("Invalid PIN. Please try again.")};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{children:`
          @keyframes slideInFromRight {
            from {
              opacity: 0;
              transform: translateX(50px);
            }
            to {
              opacity: 1;
              transform: translateX(0);
            }
          }
          @keyframes slideInFromLeft {
            from {
              opacity: 0;
              transform: translateX(-50px);
            }
            to {
              opacity: 1;
              transform: translateX(0);
            }
          }
        `}),jsxRuntimeExports.jsx("div",{style:{position:"fixed",inset:"0",backgroundColor:"#0b0d10",backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02) 2px, transparent 2px, transparent 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",zIndex:9999},children:jsxRuntimeExports.jsxs("div",{style:{background:"transparent",width:"100%",maxWidth:"1200px",padding:"20px"},children:[jsxRuntimeExports.jsx("div",{style:{background:"#000000",borderRadius:"12px",border:"4px solid #4a5568",boxShadow:"inset 0 0 20px rgba(0,0,0,0.5)",padding:"16px"},children:jsxRuntimeExports.jsxs("div",{style:{background:"#000000",borderRadius:"8px",padding:"24px",position:"relative",overflow:"hidden",height:"700px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid #4a5568",position:"relative"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#ef4444"}}),jsxRuntimeExports.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#eab308"}}),jsxRuntimeExports.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#7d8d86"}})]}),jsxRuntimeExports.jsx("h2",{style:{fontSize:"32px",fontWeight:"bold",color:"#ffffff",margin:0},children:_?"Select Branch":"Select User"}),jsxRuntimeExports.jsx("button",{onClick:()=>{C?V():e("/login")},style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"color 0.2s ease",fontSize:"32px"},onMouseEnter:se=>{se.currentTarget.style.color="#ffffff"},onMouseLeave:se=>{se.currentTarget.style.color="#9ca3af"},"aria-label":"Close",children:""})]}),jsxRuntimeExports.jsx("div",{children:te?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:8,padding:24,marginBottom:24,textAlign:"center"},children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:16},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-lock",style:{fontSize:"48px",color:"#7d8d86",marginBottom:"16px"}}),jsxRuntimeExports.jsx("h3",{style:{color:"#ffffff",fontSize:"24px",margin:"0 0 8px 0"},children:"PIN Required"}),jsxRuntimeExports.jsx("p",{style:{color:"#9ca3af",fontSize:"16px",margin:0},children:"Enter your PIN to access the user system"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Te,style:{display:"flex",flexDirection:"column",gap:16,maxWidth:"300px",margin:"0 auto"},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"password",value:Be,onChange:se=>{Pe(se.target.value),De&&X("")},style:{width:"200px",padding:12,background:"#1a202c",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,boxSizing:"border-box",textAlign:"center",letterSpacing:"2px"},placeholder:"Enter PIN",maxLength:6,required:!0,autoFocus:!0}),De&&jsxRuntimeExports.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:"8px 12px",marginTop:8,display:"flex",alignItems:"center",gap:8},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc2626",fontSize:14}}),jsxRuntimeExports.jsx("p",{style:{fontSize:14,color:"#dc2626",margin:0,fontWeight:500},children:De})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:12},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{e("/login")},style:{flex:1,padding:"12px 16px",background:"#4a5568",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,fontWeight:500,cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:se=>{se.currentTarget.style.background="#6b7280"},onMouseLeave:se=>{se.currentTarget.style.background="#4a5568"},children:"Back to Login"}),jsxRuntimeExports.jsx("button",{type:"submit",style:{flex:1,padding:"12px 16px",background:"#7d8d86",border:"2px solid #7d8d86",borderRadius:8,color:"#000000",fontSize:18,fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:se=>{se.currentTarget.style.background="#3e3f29",se.currentTarget.style.borderColor="#3e3f29"},onMouseLeave:se=>{se.currentTarget.style.background="#7d8d86",se.currentTarget.style.borderColor="#7d8d86"},children:"Verify PIN"})]})]})]})}):C?jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundImage:"url(images/mcbackground3.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"#0b0d10",position:"relative"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",pointerEvents:"none"}}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,gap:"32px",padding:"40px 0",position:"relative",zIndex:1},children:[jsxRuntimeExports.jsx("div",{style:{position:"relative"},children:jsxRuntimeExports.jsx("div",{style:{width:"160px",height:"160px",borderRadius:"50%",background:"rgba(0,0,0,0.6)",border:"3px solid rgba(255,255,255,0.4)",backdropFilter:"blur(15px)",boxShadow:"0 8px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:f?.icon?jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${f.icon}.png`,alt:f.icon,style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"50%"}}):jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",style:{width:"80px",height:"80px",color:"rgba(255,255,255,0.85)"},fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"})})})}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center"},children:[jsxRuntimeExports.jsx("div",{style:{color:"#ffffff",fontSize:"32px",fontWeight:"600",letterSpacing:"0.5px",textShadow:"0 2px 8px rgba(0,0,0,0.8)"},children:f?.username}),jsxRuntimeExports.jsx("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px",marginTop:"8px",textShadow:"0 1px 4px rgba(0,0,0,0.8)"},children:f?.role})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ye,style:{width:"100%",maxWidth:"400px"},children:[f?.pin&&jsxRuntimeExports.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"4px",backdropFilter:"blur(10px)"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{T(!1),ae(""),ee("")},style:{padding:"8px 16px",background:re?"transparent":"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:re?"rgba(255,255,255,0.7)":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Password"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{T(!0),ae(""),ee("")},style:{padding:"8px 16px",background:re?"rgba(255,255,255,0.2)":"transparent",border:"none",borderRadius:"6px",color:re?"#ffffff":"rgba(255,255,255,0.7)",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"PIN"})]})}),jsxRuntimeExports.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[jsxRuntimeExports.jsx("input",{type:"password",value:I,onChange:se=>{ae(se.target.value),D&&ee("")},placeholder:re?"Enter PIN":"Password",maxLength:re?6:void 0,required:!0,autoFocus:!0,style:{width:"100%",height:"48px",borderRadius:"24px",paddingLeft:"20px",paddingRight:"56px",color:"#ffffff",fontSize:"16px",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(15px)",border:"2px solid rgba(255,255,255,0.4)",boxShadow:"0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)",outline:"none",textAlign:re?"center":"left",letterSpacing:re?"2px":"normal",boxSizing:"border-box",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onFocus:se=>{se.target.style.border="2px solid rgba(255,255,255,0.8)",se.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onBlur:se=>{se.target.style.border="2px solid rgba(255,255,255,0.4)",se.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Y,style:{position:"absolute",right:"4px",top:"4px",height:"40px",width:"40px",borderRadius:"50%",background:Y?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.95)",border:"2px solid rgba(255,255,255,0.8)",display:"flex",alignItems:"center",justifyContent:"center",cursor:Y?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 6px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)",opacity:Y?.7:1},onMouseEnter:se=>{Y||(se.currentTarget.style.background="#ffffff")},onMouseLeave:se=>{Y||(se.currentTarget.style.background="rgba(255,255,255,0.95)")},children:Y?jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{color:"#0f2d6e",fontSize:"16px"}}):jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:"#0f2d6e"},fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M13 5l7 7-7 7v-4H4v-6h9V5z"})})})]}),D&&jsxRuntimeExports.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",backdropFilter:"blur(10px)"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#fca5a5",fontSize:"14px",textShadow:"0 1px 2px rgba(0,0,0,0.8)"}}),jsxRuntimeExports.jsx("p",{style:{fontSize:"14px",color:"#fca5a5",margin:0,fontWeight:500,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:D})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:V,style:{background:"none",border:"none",color:"rgba(255,255,255,0.9)",fontSize:"14px",cursor:"pointer",textDecoration:"none",transition:"color 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:se=>{se.currentTarget.style.color="#ffffff"},onMouseLeave:se=>{se.currentTarget.style.color="rgba(255,255,255,0.9)"},children:" Back to users"}),jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:"Press Enter to sign in"})]})]})]}),jsxRuntimeExports.jsx("div",{style:{padding:"24px",display:"flex",justifyContent:"flex-start",position:"relative",zIndex:1},children:n.length>2?jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>B(!J),style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:se=>{se.currentTarget.style.background="rgba(0,0,0,0.6)",se.currentTarget.style.color="#ffffff"},onMouseLeave:se=>{se.currentTarget.style.background="rgba(0,0,0,0.4)",se.currentTarget.style.color="rgba(255,255,255,0.9)"},title:`Switch User (${n.length} users)`,children:jsxRuntimeExports.jsx("svg",{style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),J&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10},onClick:()=>B(!1)}),jsxRuntimeExports.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"500px",maxHeight:"500px",backgroundColor:"rgba(0, 0, 0, 0.7)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.6)",zIndex:20,backdropFilter:"blur(15px)",overflow:"hidden"},children:[jsxRuntimeExports.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(255, 255, 255, 0.03)"},children:[jsxRuntimeExports.jsx("h3",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"600",margin:"0 0 4px 0"},children:"Switch User"}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"12px",margin:"0"},children:"Choose a user to switch to"})]}),jsxRuntimeExports.jsx("div",{style:{maxHeight:"420px",overflowY:"auto",padding:"12px"},children:jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:n.filter(se=>se.user_id!==f?.user_id).map(se=>jsxRuntimeExports.jsxs("button",{onClick:()=>be(se),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",color:"#ffffff",cursor:"pointer",transition:"all 0.2s ease",minHeight:"120px"},onMouseEnter:Ce=>{Ce.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",Ce.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)"},onMouseLeave:Ce=>{Ce.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",Ce.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)"},children:[jsxRuntimeExports.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:se.icon?jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${se.icon}.png`,alt:se.icon,style:{width:"42px",height:"42px",objectFit:"cover",borderRadius:"50%"}}):jsxRuntimeExports.jsx("div",{style:{fontSize:"20px",color:"rgba(255,255,255,0.7)"},children:""})}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:se.username}),jsxRuntimeExports.jsx("div",{style:{fontSize:"11px",color:Ne(se.role),marginBottom:"2px",fontWeight:"500"},children:se.role}),jsxRuntimeExports.jsx("div",{style:{fontSize:"10px",color:"#999"},children:H(se.last_used)})]})]},se.user_id))})})]})]})]}):jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"12px",maxWidth:"400px",maxHeight:"200px",overflowY:"auto",paddingRight:"8px"},children:n.filter(se=>se.user_id!==f?.user_id).map(se=>jsxRuntimeExports.jsxs("button",{onClick:()=>{h(se),ae(""),ee(""),T(!1)},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",borderRadius:"12px",color:"rgba(255,255,255,0.9)",cursor:"pointer",transition:"all 0.2s ease",minHeight:"100px"},onMouseEnter:Ce=>{Ce.currentTarget.style.background="rgba(0,0,0,0.5)",Ce.currentTarget.style.color="#ffffff"},onMouseLeave:Ce=>{Ce.currentTarget.style.background="rgba(0,0,0,0.4)",Ce.currentTarget.style.color="rgba(255,255,255,0.9)"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:se.icon?jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${se.icon}.png`,alt:se.icon,style:{width:"32px",height:"32px",objectFit:"cover",borderRadius:"50%"}}):jsxRuntimeExports.jsx("div",{style:{fontSize:"16px",color:"rgba(255,255,255,0.7)"},children:""})}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:"500",fontSize:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textShadow:"0 1px 2px rgba(0,0,0,0.8)",marginBottom:"2px"},children:se.username}),jsxRuntimeExports.jsx("div",{style:{fontSize:"10px",color:Ne(se.role),fontWeight:"500"},children:se.role})]})]},se.user_id))})}),jsxRuntimeExports.jsxs("div",{style:{position:"absolute",right:"24px",bottom:"24px",display:"flex",alignItems:"center",gap:"16px",color:"rgba(255,255,255,0.8)",zIndex:1},children:[jsxRuntimeExports.jsx("button",{title:"Accessibility",style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:se=>{se.currentTarget.style.background="rgba(0,0,0,0.6)",se.currentTarget.style.color="#ffffff"},onMouseLeave:se=>{se.currentTarget.style.background="rgba(0,0,0,0.4)",se.currentTarget.style.color="rgba(255,255,255,0.9)"},children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M11 2h2v4h-2zM4 9h16v2H4zM6 12l4 .5V22H8v-7.5L6 14v-2zm12 0v2l-2 .5V22h-2v-9.5l4-.5z"})})}),jsxRuntimeExports.jsx("button",{onClick:()=>e("/login"),style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:se=>{se.currentTarget.style.background="#991b1b",se.currentTarget.style.border="1px solid #991b1b",se.currentTarget.style.color="#ffffff"},onMouseLeave:se=>{se.currentTarget.style.background="rgba(0,0,0,0.4)",se.currentTarget.style.border="1px solid rgba(255,255,255,0.3)",se.currentTarget.style.color="rgba(255,255,255,0.9)"},children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:[jsxRuntimeExports.jsx("path",{d:"M11 2h2v10h-2z"}),jsxRuntimeExports.jsx("path",{d:"M7.05 4.05a8.5 8.5 0 1 0 9.9 0l-1.41 1.41a6.5 6.5 0 1 1-7.08 0z"})]})})]})]}):d?jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:"#9ca3af"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:12,fontSize:"24px"}}),jsxRuntimeExports.jsx("span",{style:{fontSize:"18px"},children:"Loading users..."})]}):_?jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"32px",padding:"40px 20px"},children:[jsxRuntimeExports.jsx("div",{style:{color:"#ffffff",fontSize:"28px",fontWeight:"600",textAlign:"center",marginBottom:"24px"},children:"Choose Your Branch"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"40px",maxWidth:"800px",width:"100%",margin:"0 auto"},children:[jsxRuntimeExports.jsx("button",{onClick:ve,style:{background:"rgba(26, 26, 26, 0.3)",border:"1px solid #4a5568",borderRadius:"50%",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"#ffffff"},onMouseEnter:se=>{se.currentTarget.style.background="rgba(59, 130, 246, 0.2)",se.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:se=>{se.currentTarget.style.background="rgba(26, 26, 26, 0.3)",se.currentTarget.style.borderColor="#4a5568"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"24px"}})}),l[b]&&jsxRuntimeExports.jsxs("div",{style:{background:"transparent",border:"none",padding:"20px",cursor:"pointer",transition:"all 0.3s ease-in-out",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",minHeight:"300px",width:"280px",animation:R==="right"?"slideInFromRight 0.3s ease-in-out":R==="left"?"slideInFromLeft 0.3s ease-in-out":"none"},onClick:Ae,children:[jsxRuntimeExports.jsx("div",{style:{width:"200px",height:"200px",backgroundImage:`url(images/shop/${l[b].shop_image}.png)`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"white",borderRadius:"20px",transition:"all 0.3s ease-in-out"}}),jsxRuntimeExports.jsx("div",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"500",textAlign:"center",transition:"all 0.3s ease-in-out",marginTop:"8px"},children:l[b].branch_name})]},l[b].branch_id),jsxRuntimeExports.jsx("button",{onClick:Le,style:{background:"rgba(26, 26, 26, 0.3)",border:"1px solid #4a5568",borderRadius:"50%",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"#ffffff"},onMouseEnter:se=>{se.currentTarget.style.background="rgba(59, 130, 246, 0.2)",se.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:se=>{se.currentTarget.style.background="rgba(26, 26, 26, 0.3)",se.currentTarget.style.borderColor="#4a5568"},children:jsxRuntimeExports.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"24px"}})})]}),jsxRuntimeExports.jsxs("div",{style:{color:"#9ca3af",fontSize:"16px",textAlign:"center",marginTop:"24px"},children:[b+1," of ",l.length]})]}):jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",maxWidth:"1200px",margin:"0 auto"},children:n.map(se=>jsxRuntimeExports.jsx("button",{style:{background:"rgba(26, 26, 26, 0.3)",border:"1px solid #4a5568",borderBottom:"3px solid #7d8d86",borderRadius:"8px",padding:24,cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",position:"relative",minHeight:"160px"},onMouseEnter:Ce=>{Ce.currentTarget.style.background="rgba(125,141,134,0.1)",Ce.currentTarget.style.borderColor="#7d8d86",Ce.currentTarget.style.boxShadow="0 0 20px rgba(125,141,134,0.2)"},onMouseLeave:Ce=>{Ce.currentTarget.style.background="rgba(26, 26, 26, 0.3)",Ce.currentTarget.style.borderColor="#4a5568",Ce.currentTarget.style.boxShadow="none"},onClick:()=>U(se),children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,height:"100%"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[jsxRuntimeExports.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#1a202c",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"2px solid #4a5568"},children:se.icon?jsxRuntimeExports.jsx("img",{src:`/retailpos/images/icons/${se.icon}.png`,alt:se.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):jsxRuntimeExports.jsx("div",{style:{fontSize:24,color:"#4a5568"},children:""})}),jsxRuntimeExports.jsx("div",{style:{flex:1},children:jsxRuntimeExports.jsxs("div",{style:{marginBottom:8,display:"flex",alignItems:"center",gap:"8px"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:24,fontWeight:500,color:"#ffffff"},children:se.username}),se.pin&&jsxRuntimeExports.jsx("div",{style:{background:"#10b981",color:"#ffffff",fontSize:"10px",fontWeight:"600",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"PIN"})]})})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,flex:1},children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("span",{style:{background:`${Ne(se.role)}20`,color:Ne(se.role),padding:"6px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize",display:"inline-block"},children:se.role})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:14,color:"#7d8d86",fontWeight:"500"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-building",style:{fontSize:"12px"}}),jsxRuntimeExports.jsx("span",{children:se.branch_name||"No Branch Assigned"})]}),jsxRuntimeExports.jsxs("div",{style:{fontSize:14,color:"#9ca3af",lineHeight:"1.4"},children:["Last login: ",H(se.last_used)]})]})]})},se.user_id))})})})]})}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:jsxRuntimeExports.jsx("div",{style:{width:60,height:60,background:"linear-gradient(145deg, #4a5568, #2d3748)",borderRadius:"0 0 15px 15px",boxShadow:"0 4px 8px rgba(0,0,0,0.4)",border:"2px solid #4a5568"}})}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:jsxRuntimeExports.jsx("div",{style:{width:300,height:30,background:"linear-gradient(145deg, #2d3748, #1a202c)",borderRadius:50,boxShadow:"0 6px 20px rgba(0,0,0,0.5)",border:"1px solid #4a5568"}})})]})})]})},AppContent=()=>{const{isCollapsed:e}=useNav(),{isSwitchingBranch:t,switchingToBranch:r}=useBranch();return useNavCollapse(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{style:{height:"100vh",background:"#f8f9fa",color:"#1a1a1a",display:"flex",overflow:"hidden",backgroundImage:"url(/retailpos/images/backgrounds/u2541828551_An_elegant_illustration_of_a_small_African_corner_5e875dd7-e5d8-4655-af92-bb5c9c2865fd_1.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.05)",zIndex:0}}),jsxRuntimeExports.jsx(Navigation,{}),jsxRuntimeExports.jsx(UserMenu,{}),jsxRuntimeExports.jsx("main",{style:{flex:1,marginLeft:e?"70px":"200px",padding:"24px",height:"100vh",overflow:"auto",transition:"margin-left 0.3s ease",position:"relative",zIndex:1},children:jsxRuntimeExports.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative",zIndex:1},children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(Dashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/products",element:jsxRuntimeExports.jsx(RoleProtectedRoute,{children:jsxRuntimeExports.jsx(Products,{})})}),jsxRuntimeExports.jsx(Route,{path:"/sales",element:jsxRuntimeExports.jsx(RoleProtectedRoute,{requiredPermission:"canProcessSales",children:jsxRuntimeExports.jsx(Sales,{})})}),jsxRuntimeExports.jsx(Route,{path:"/side-businesses",element:jsxRuntimeExports.jsx(RoleProtectedRoute,{requiredPermission:"canProcessSales",children:jsxRuntimeExports.jsx(SideBusinesses,{})})}),jsxRuntimeExports.jsx(Route,{path:"/transactions",element:jsxRuntimeExports.jsx(RoleProtectedRoute,{children:jsxRuntimeExports.jsx(Transactions,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:jsxRuntimeExports.jsx(RoleProtectedRoute,{requiredPermission:"canManageUsers",children:jsxRuntimeExports.jsx(Admin,{})})}),jsxRuntimeExports.jsx(Route,{path:"/reminders",element:jsxRuntimeExports.jsx(Reminders,{})}),jsxRuntimeExports.jsx(Route,{path:"/transaction/:transactionId",element:jsxRuntimeExports.jsx(TransactionDetail,{})})]})})})]}),jsxRuntimeExports.jsx(LoadingScreen,{isVisible:t,message:r?`Switching to ${r}...`:"Switching Branch..."})]})},queryClient=new QueryClient({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:1}}});function App(){return jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(BusinessProvider,{children:jsxRuntimeExports.jsx(BranchProvider,{children:jsxRuntimeExports.jsx(RoleProvider,{children:jsxRuntimeExports.jsx(NavProvider,{children:jsxRuntimeExports.jsx(PinProvider,{children:jsxRuntimeExports.jsx(BrowserRouter,{basename:"/",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Landing,{})}),jsxRuntimeExports.jsx(Route,{path:"/landing",element:jsxRuntimeExports.jsx(Landing,{})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(Login,{})}),jsxRuntimeExports.jsx(Route,{path:"/signup",element:jsxRuntimeExports.jsx(Signup,{})}),jsxRuntimeExports.jsx(Route,{path:"/select-user",element:jsxRuntimeExports.jsx(SelectUser,{})}),jsxRuntimeExports.jsx(Route,{path:"/*",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(AppContent,{})})})]})})})})})})})})})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
