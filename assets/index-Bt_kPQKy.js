(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}})();function c0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function G_(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function a(){var i=!1;try{i=this instanceof a}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var i=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,i.get?i:{enumerable:!0,get:function(){return e[a]}})}),r}var fh={exports:{}},Tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function V_(){if(wm)return Tl;wm=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,i,c){var u=null;if(c!==void 0&&(u=""+c),i.key!==void 0&&(u=""+i.key),"key"in i){c={};for(var f in i)f!=="key"&&(c[f]=i[f])}else c=i;return i=c.ref,{$$typeof:e,type:a,key:u,ref:i!==void 0?i:null,props:c}}return Tl.Fragment=t,Tl.jsx=r,Tl.jsxs=r,Tl}var Tm;function Y_(){return Tm||(Tm=1,fh.exports=V_()),fh.exports}var o=Y_(),hh={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em;function K_(){if(Em)return It;Em=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function S(M,Q,k){this.props=M,this.context=Q,this.refs=_,this.updater=k||b}S.prototype.isReactComponent={},S.prototype.setState=function(M,Q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Q,"setState")},S.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function A(){}A.prototype=S.prototype;function D(M,Q,k){this.props=M,this.context=Q,this.refs=_,this.updater=k||b}var I=D.prototype=new A;I.constructor=D,w(I,S.prototype),I.isPureReactComponent=!0;var G=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function V(M,Q,k,L,W,X){return k=X.ref,{$$typeof:e,type:M,key:Q,ref:k!==void 0?k:null,props:X}}function P(M,Q){return V(M.type,Q,void 0,void 0,void 0,M.props)}function z(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function ie(M){var Q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(k){return Q[k]})}var K=/\/+/g;function xe(M,Q){return typeof M=="object"&&M!==null&&M.key!=null?ie(""+M.key):Q.toString(36)}function ee(){}function re(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ee,ee):(M.status="pending",M.then(function(Q){M.status==="pending"&&(M.status="fulfilled",M.value=Q)},function(Q){M.status==="pending"&&(M.status="rejected",M.reason=Q)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function _e(M,Q,k,L,W){var X=typeof M;(X==="undefined"||X==="boolean")&&(M=null);var ge=!1;if(M===null)ge=!0;else switch(X){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(M.$$typeof){case e:case t:ge=!0;break;case g:return ge=M._init,_e(ge(M._payload),Q,k,L,W)}}if(ge)return W=W(M),ge=L===""?"."+xe(M,0):L,G(W)?(k="",ge!=null&&(k=ge.replace(K,"$&/")+"/"),_e(W,Q,k,"",function(Ce){return Ce})):W!=null&&(z(W)&&(W=P(W,k+(W.key==null||M&&M.key===W.key?"":(""+W.key).replace(K,"$&/")+"/")+ge)),Q.push(W)),1;ge=0;var Me=L===""?".":L+":";if(G(M))for(var qe=0;qe<M.length;qe++)L=M[qe],X=Me+xe(L,qe),ge+=_e(L,Q,k,X,W);else if(qe=v(M),typeof qe=="function")for(M=qe.call(M),qe=0;!(L=M.next()).done;)L=L.value,X=Me+xe(L,qe++),ge+=_e(L,Q,k,X,W);else if(X==="object"){if(typeof M.then=="function")return _e(re(M),Q,k,L,W);throw Q=String(M),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ge}function ne(M,Q,k){if(M==null)return M;var L=[],W=0;return _e(M,L,"","",function(X){return Q.call(k,X,W++)}),L}function ve(M){if(M._status===-1){var Q=M._result;Q=Q(),Q.then(function(k){(M._status===0||M._status===-1)&&(M._status=1,M._result=k)},function(k){(M._status===0||M._status===-1)&&(M._status=2,M._result=k)}),M._status===-1&&(M._status=0,M._result=Q)}if(M._status===1)return M._result.default;throw M._result}var le=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Ae(){}return It.Children={map:ne,forEach:function(M,Q,k){ne(M,function(){Q.apply(this,arguments)},k)},count:function(M){var Q=0;return ne(M,function(){Q++}),Q},toArray:function(M){return ne(M,function(Q){return Q})||[]},only:function(M){if(!z(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},It.Component=S,It.Fragment=r,It.Profiler=i,It.PureComponent=D,It.StrictMode=a,It.Suspense=h,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,It.__COMPILER_RUNTIME={__proto__:null,c:function(M){return Z.H.useMemoCache(M)}},It.cache=function(M){return function(){return M.apply(null,arguments)}},It.cloneElement=function(M,Q,k){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var L=w({},M.props),W=M.key,X=void 0;if(Q!=null)for(ge in Q.ref!==void 0&&(X=void 0),Q.key!==void 0&&(W=""+Q.key),Q)!oe.call(Q,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&Q.ref===void 0||(L[ge]=Q[ge]);var ge=arguments.length-2;if(ge===1)L.children=k;else if(1<ge){for(var Me=Array(ge),qe=0;qe<ge;qe++)Me[qe]=arguments[qe+2];L.children=Me}return V(M.type,W,void 0,void 0,X,L)},It.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},It.createElement=function(M,Q,k){var L,W={},X=null;if(Q!=null)for(L in Q.key!==void 0&&(X=""+Q.key),Q)oe.call(Q,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(W[L]=Q[L]);var ge=arguments.length-2;if(ge===1)W.children=k;else if(1<ge){for(var Me=Array(ge),qe=0;qe<ge;qe++)Me[qe]=arguments[qe+2];W.children=Me}if(M&&M.defaultProps)for(L in ge=M.defaultProps,ge)W[L]===void 0&&(W[L]=ge[L]);return V(M,X,void 0,void 0,null,W)},It.createRef=function(){return{current:null}},It.forwardRef=function(M){return{$$typeof:f,render:M}},It.isValidElement=z,It.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:ve}},It.memo=function(M,Q){return{$$typeof:p,type:M,compare:Q===void 0?null:Q}},It.startTransition=function(M){var Q=Z.T,k={};Z.T=k;try{var L=M(),W=Z.S;W!==null&&W(k,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(Ae,le)}catch(X){le(X)}finally{Z.T=Q}},It.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},It.use=function(M){return Z.H.use(M)},It.useActionState=function(M,Q,k){return Z.H.useActionState(M,Q,k)},It.useCallback=function(M,Q){return Z.H.useCallback(M,Q)},It.useContext=function(M){return Z.H.useContext(M)},It.useDebugValue=function(){},It.useDeferredValue=function(M,Q){return Z.H.useDeferredValue(M,Q)},It.useEffect=function(M,Q,k){var L=Z.H;if(typeof k=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return L.useEffect(M,Q)},It.useId=function(){return Z.H.useId()},It.useImperativeHandle=function(M,Q,k){return Z.H.useImperativeHandle(M,Q,k)},It.useInsertionEffect=function(M,Q){return Z.H.useInsertionEffect(M,Q)},It.useLayoutEffect=function(M,Q){return Z.H.useLayoutEffect(M,Q)},It.useMemo=function(M,Q){return Z.H.useMemo(M,Q)},It.useOptimistic=function(M,Q){return Z.H.useOptimistic(M,Q)},It.useReducer=function(M,Q,k){return Z.H.useReducer(M,Q,k)},It.useRef=function(M){return Z.H.useRef(M)},It.useState=function(M){return Z.H.useState(M)},It.useSyncExternalStore=function(M,Q,k){return Z.H.useSyncExternalStore(M,Q,k)},It.useTransition=function(){return Z.H.useTransition()},It.version="19.1.1",It}var km;function u0(){return km||(km=1,hh.exports=K_()),hh.exports}var E=u0();const dy=c0(E);var ph={exports:{}},El={},gh={exports:{}},xh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm;function X_(){return jm||(jm=1,(function(e){function t(ne,ve){var le=ne.length;ne.push(ve);e:for(;0<le;){var Ae=le-1>>>1,M=ne[Ae];if(0<i(M,ve))ne[Ae]=ve,ne[le]=M,le=Ae;else break e}}function r(ne){return ne.length===0?null:ne[0]}function a(ne){if(ne.length===0)return null;var ve=ne[0],le=ne.pop();if(le!==ve){ne[0]=le;e:for(var Ae=0,M=ne.length,Q=M>>>1;Ae<Q;){var k=2*(Ae+1)-1,L=ne[k],W=k+1,X=ne[W];if(0>i(L,le))W<M&&0>i(X,L)?(ne[Ae]=X,ne[W]=le,Ae=W):(ne[Ae]=L,ne[k]=le,Ae=k);else if(W<M&&0>i(X,le))ne[Ae]=X,ne[W]=le,Ae=W;else break e}}return ve}function i(ne,ve){var le=ne.sortIndex-ve.sortIndex;return le!==0?le:ne.id-ve.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var h=[],p=[],g=1,y=null,v=3,b=!1,w=!1,_=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function G(ne){for(var ve=r(p);ve!==null;){if(ve.callback===null)a(p);else if(ve.startTime<=ne)a(p),ve.sortIndex=ve.expirationTime,t(h,ve);else break;ve=r(p)}}function Z(ne){if(_=!1,G(ne),!w)if(r(h)!==null)w=!0,oe||(oe=!0,xe());else{var ve=r(p);ve!==null&&_e(Z,ve.startTime-ne)}}var oe=!1,V=-1,P=5,z=-1;function ie(){return S?!0:!(e.unstable_now()-z<P)}function K(){if(S=!1,oe){var ne=e.unstable_now();z=ne;var ve=!0;try{e:{w=!1,_&&(_=!1,D(V),V=-1),b=!0;var le=v;try{t:{for(G(ne),y=r(h);y!==null&&!(y.expirationTime>ne&&ie());){var Ae=y.callback;if(typeof Ae=="function"){y.callback=null,v=y.priorityLevel;var M=Ae(y.expirationTime<=ne);if(ne=e.unstable_now(),typeof M=="function"){y.callback=M,G(ne),ve=!0;break t}y===r(h)&&a(h),G(ne)}else a(h);y=r(h)}if(y!==null)ve=!0;else{var Q=r(p);Q!==null&&_e(Z,Q.startTime-ne),ve=!1}}break e}finally{y=null,v=le,b=!1}ve=void 0}}finally{ve?xe():oe=!1}}}var xe;if(typeof I=="function")xe=function(){I(K)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=K,xe=function(){re.postMessage(null)}}else xe=function(){A(K,0)};function _e(ne,ve){V=A(function(){ne(e.unstable_now())},ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(ne){switch(v){case 1:case 2:case 3:var ve=3;break;default:ve=v}var le=v;v=ve;try{return ne()}finally{v=le}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(ne,ve){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var le=v;v=ne;try{return ve()}finally{v=le}},e.unstable_scheduleCallback=function(ne,ve,le){var Ae=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Ae+le:Ae):le=Ae,ne){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=le+M,ne={id:g++,callback:ve,priorityLevel:ne,startTime:le,expirationTime:M,sortIndex:-1},le>Ae?(ne.sortIndex=le,t(p,ne),r(h)===null&&ne===r(p)&&(_?(D(V),V=-1):_=!0,_e(Z,le-Ae))):(ne.sortIndex=M,t(h,ne),w||b||(w=!0,oe||(oe=!0,xe()))),ne},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(ne){var ve=v;return function(){var le=v;v=ve;try{return ne.apply(this,arguments)}finally{v=le}}}})(xh)),xh}var Cm;function Q_(){return Cm||(Cm=1,gh.exports=X_()),gh.exports}var mh={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function J_(){if(Am)return gn;Am=1;var e=u0();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(h,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:p,implementation:g}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,gn.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(h,p,null,g)},gn.flushSync=function(h){var p=u.T,g=a.p;try{if(u.T=null,a.p=2,h)return h()}finally{u.T=p,a.p=g,a.d.f()}},gn.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(h,p))},gn.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},gn.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,y=f(g,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?a.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:b}):g==="script"&&a.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},gn.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=f(p.as,p.crossOrigin);a.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(h)},gn.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=f(g,p.crossOrigin);a.d.L(h,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},gn.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=f(p.as,p.crossOrigin);a.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(h)},gn.requestFormReset=function(h){a.d.r(h)},gn.unstable_batchedUpdates=function(h,p){return h(p)},gn.useFormState=function(h,p,g){return u.H.useFormState(h,p,g)},gn.useFormStatus=function(){return u.H.useHostTransitionStatus()},gn.version="19.1.1",gn}var Rm;function Z_(){if(Rm)return mh.exports;Rm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mh.exports=J_(),mh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function eS(){if(Dm)return El;Dm=1;var e=Q_(),t=u0(),r=Z_();function a(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(c(n)!==n)throw Error(a(188))}function h(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(a(188));return s!==n?null:n}for(var l=n,d=s;;){var x=l.return;if(x===null)break;var m=x.alternate;if(m===null){if(d=x.return,d!==null){l=d;continue}break}if(x.child===m.child){for(m=x.child;m;){if(m===l)return f(x),n;if(m===d)return f(x),s;m=m.sibling}throw Error(a(188))}if(l.return!==d.return)l=x,d=m;else{for(var T=!1,O=x.child;O;){if(O===l){T=!0,l=x,d=m;break}if(O===d){T=!0,d=x,l=m;break}O=O.sibling}if(!T){for(O=m.child;O;){if(O===l){T=!0,l=m,d=x;break}if(O===d){T=!0,d=m,l=x;break}O=O.sibling}if(!T)throw Error(a(189))}}if(l.alternate!==d)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function xe(n){return n===null||typeof n!="object"?null:(n=K&&n[K]||n["@@iterator"],typeof n=="function"?n:null)}var ee=Symbol.for("react.client.reference");function re(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ee?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case S:return"Profiler";case _:return"StrictMode";case Z:return"Suspense";case oe:return"SuspenseList";case z:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case I:return(n.displayName||"Context")+".Provider";case D:return(n._context.displayName||"Context")+".Consumer";case G:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return s=n.displayName||null,s!==null?s:re(n.type)||"Memo";case P:s=n._payload,n=n._init;try{return re(n(s))}catch{}}return null}var _e=Array.isArray,ne=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Ae=[],M=-1;function Q(n){return{current:n}}function k(n){0>M||(n.current=Ae[M],Ae[M]=null,M--)}function L(n,s){M++,Ae[M]=n.current,n.current=s}var W=Q(null),X=Q(null),ge=Q(null),Me=Q(null);function qe(n,s){switch(L(ge,s),L(X,n),L(W,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Qx(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Qx(s),n=Jx(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}k(W),L(W,n)}function Ce(){k(W),k(X),k(ge)}function te(n){n.memoizedState!==null&&L(Me,n);var s=W.current,l=Jx(s,n.type);s!==l&&(L(X,n),L(W,l))}function Pe(n){X.current===n&&(k(W),k(X)),Me.current===n&&(k(Me),vl._currentValue=le)}var He=Object.prototype.hasOwnProperty,tt=e.unstable_scheduleCallback,Y=e.unstable_cancelCallback,Re=e.unstable_shouldYield,nt=e.unstable_requestPaint,De=e.unstable_now,ut=e.unstable_getCurrentPriorityLevel,ht=e.unstable_ImmediatePriority,At=e.unstable_UserBlockingPriority,mt=e.unstable_NormalPriority,Ie=e.unstable_LowPriority,rt=e.unstable_IdlePriority,xt=e.log,Qt=e.unstable_setDisableYieldValue,mr=null,Mt=null;function ce(n){if(typeof xt=="function"&&Qt(n),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(mr,n)}catch{}}var $e=Math.clz32?Math.clz32:sr,ft=Math.log,Dt=Math.LN2;function sr(n){return n>>>=0,n===0?32:31-(ft(n)/Dt|0)|0}var Er=256,br=4194304;function er(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Cr(n,s,l){var d=n.pendingLanes;if(d===0)return 0;var x=0,m=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var O=d&134217727;return O!==0?(d=O&~m,d!==0?x=er(d):(T&=O,T!==0?x=er(T):l||(l=O&~n,l!==0&&(x=er(l))))):(O=d&~m,O!==0?x=er(O):T!==0?x=er(T):l||(l=d&~n,l!==0&&(x=er(l)))),x===0?0:s!==0&&s!==x&&(s&m)===0&&(m=x&-x,l=s&-s,m>=l||m===32&&(l&4194048)!==0)?s:x}function Ut(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function ar(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ae(){var n=Er;return Er<<=1,(Er&4194048)===0&&(Er=256),n}function ke(){var n=br;return br<<=1,(br&62914560)===0&&(br=4194304),n}function pt(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Ct(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function tr(n,s,l,d,x,m){var T=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var O=n.entanglements,J=n.expirationTimes,be=n.hiddenUpdates;for(l=T&~l;0<l;){var Fe=31-$e(l),ze=1<<Fe;O[Fe]=0,J[Fe]=-1;var Te=be[Fe];if(Te!==null)for(be[Fe]=null,Fe=0;Fe<Te.length;Fe++){var Ee=Te[Fe];Ee!==null&&(Ee.lane&=-536870913)}l&=~ze}d!==0&&at(n,d,0),m!==0&&x===0&&n.tag!==0&&(n.suspendedLanes|=m&~(T&~s))}function at(n,s,l){n.pendingLanes|=s,n.suspendedLanes&=~s;var d=31-$e(s);n.entangledLanes|=s,n.entanglements[d]=n.entanglements[d]|1073741824|l&4194090}function kt(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var d=31-$e(l),x=1<<d;x&s|n[d]&s&&(n[d]|=s),l&=~x}}function Rt(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function yn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function wr(){var n=ve.p;return n!==0?n:(n=window.event,n===void 0?32:mm(n.type))}function vn(n,s){var l=ve.p;try{return ve.p=n,s()}finally{ve.p=l}}var $t=Math.random().toString(36).slice(2),jt="__reactFiber$"+$t,fr="__reactProps$"+$t,Ln="__reactContainer$"+$t,da="__reactEvents$"+$t,Pn="__reactListeners$"+$t,R="__reactHandles$"+$t,U="__reactResources$"+$t,B="__reactMarker$"+$t;function F(n){delete n[jt],delete n[fr],delete n[da],delete n[Pn],delete n[R]}function H(n){var s=n[jt];if(s)return s;for(var l=n.parentNode;l;){if(s=l[Ln]||l[jt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=rm(n);n!==null;){if(l=n[jt])return l;n=rm(n)}return s}n=l,l=n.parentNode}return null}function q(n){if(n=n[jt]||n[Ln]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function ye(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(a(33))}function Ne(n){var s=n[U];return s||(s=n[U]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function fe(n){n[B]=!0}var Se=new Set,we={};function Ue(n,s){Ye(n,s),Ye(n+"Capture",s)}function Ye(n,s){for(we[n]=s,n=0;n<s.length;n++)Se.add(s[n])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ge={},et={};function vt(n){return He.call(et,n)?!0:He.call(Ge,n)?!1:st.test(n)?et[n]=!0:(Ge[n]=!0,!1)}function Gt(n,s,l){if(vt(s))if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+l)}}function Yt(n,s,l){if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+l)}}function Kt(n,s,l,d){if(d===null)n.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(s,l,""+d)}}var bn,j;function ue(n){if(bn===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);bn=s&&s[1]||"",j=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bn+n+j}var je=!1;function lt(n,s){if(!n||je)return"";je=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(Ee){var Te=Ee}Reflect.construct(n,[],ze)}else{try{ze.call()}catch(Ee){Te=Ee}n.call(ze.prototype)}}else{try{throw Error()}catch(Ee){Te=Ee}(ze=n())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(Ee){if(Ee&&Te&&typeof Ee.stack=="string")return[Ee.stack,Te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=d.DetermineComponentFrameRoot(),T=m[0],O=m[1];if(T&&O){var J=T.split(`
`),be=O.split(`
`);for(x=d=0;d<J.length&&!J[d].includes("DetermineComponentFrameRoot");)d++;for(;x<be.length&&!be[x].includes("DetermineComponentFrameRoot");)x++;if(d===J.length||x===be.length)for(d=J.length-1,x=be.length-1;1<=d&&0<=x&&J[d]!==be[x];)x--;for(;1<=d&&0<=x;d--,x--)if(J[d]!==be[x]){if(d!==1||x!==1)do if(d--,x--,0>x||J[d]!==be[x]){var Fe=`
`+J[d].replace(" at new "," at ");return n.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",n.displayName)),Fe}while(1<=d&&0<=x);break}}}finally{je=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?ue(l):""}function yt(n){switch(n.tag){case 26:case 27:case 5:return ue(n.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return lt(n.type,!1);case 11:return lt(n.type.render,!1);case 1:return lt(n.type,!0);case 31:return ue("Activity");default:return""}}function bt(n){try{var s="";do s+=yt(n),n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function it(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function St(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wt(n){var s=St(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),d=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var x=l.get,m=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return x.call(this)},set:function(T){d=""+T,m.call(this,T)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ft(n){n._valueTracker||(n._valueTracker=wt(n))}function Br(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return n&&(d=St(n)?n.checked?"true":"false":n.value),n=d,n!==l?(s.setValue(n),!0):!1}function yr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var _n=/[\n"\\]/g;function C(n){return n.replace(_n,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function he(n,s,l,d,x,m,T,O){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),s!=null?T==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+it(s)):n.value!==""+it(s)&&(n.value=""+it(s)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),s!=null?Qe(n,T,it(s)):l!=null?Qe(n,T,it(l)):d!=null&&n.removeAttribute("value"),x==null&&m!=null&&(n.defaultChecked=!!m),x!=null&&(n.checked=x&&typeof x!="function"&&typeof x!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?n.name=""+it(O):n.removeAttribute("name")}function Ke(n,s,l,d,x,m,T,O){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;l=l!=null?""+it(l):"",s=s!=null?""+it(s):l,O||s===n.value||(n.value=s),n.defaultValue=s}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=O?n.checked:!!d,n.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T)}function Qe(n,s,l){s==="number"&&yr(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Ve(n,s,l,d){if(n=n.options,s){s={};for(var x=0;x<l.length;x++)s["$"+l[x]]=!0;for(l=0;l<n.length;l++)x=s.hasOwnProperty("$"+n[l].value),n[l].selected!==x&&(n[l].selected=x),x&&d&&(n[l].defaultSelected=!0)}else{for(l=""+it(l),s=null,x=0;x<n.length;x++){if(n[x].value===l){n[x].selected=!0,d&&(n[x].defaultSelected=!0);return}s!==null||n[x].disabled||(s=n[x])}s!==null&&(s.selected=!0)}}function Xe(n,s,l){if(s!=null&&(s=""+it(s),s!==n.value&&(n.value=s),l==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=l!=null?""+it(l):""}function ot(n,s,l,d){if(s==null){if(d!=null){if(l!=null)throw Error(a(92));if(_e(d)){if(1<d.length)throw Error(a(93));d=d[0]}l=d}l==null&&(l=""),s=l}l=it(s),n.defaultValue=l,d=n.textContent,d===l&&d!==""&&d!==null&&(n.value=d)}function ct(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var Xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ot(n,s,l){var d=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":d?n.setProperty(s,l):typeof l!="number"||l===0||Xt.has(s)?s==="float"?n.cssFloat=l:n[s]=(""+l).trim():n[s]=l+"px"}function Pt(n,s,l){if(s!=null&&typeof s!="object")throw Error(a(62));if(n=n.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var x in s)d=s[x],s.hasOwnProperty(x)&&l[x]!==d&&Ot(n,x,d)}else for(var m in s)s.hasOwnProperty(m)&&Ot(n,m,s[m])}function Mr(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$b=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oc(n){return $b.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var dd=null;function fd(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _i=null,Si=null;function Z0(n){var s=q(n);if(s&&(n=s.stateNode)){var l=n[fr]||null;e:switch(n=s.stateNode,s.type){case"input":if(he(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+C(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==n&&d.form===n.form){var x=d[fr]||null;if(!x)throw Error(a(90));he(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(s=0;s<l.length;s++)d=l[s],d.form===n.form&&Br(d)}break e;case"textarea":Xe(n,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Ve(n,!!l.multiple,s,!1)}}}var hd=!1;function ep(n,s,l){if(hd)return n(s,l);hd=!0;try{var d=n(s);return d}finally{if(hd=!1,(_i!==null||Si!==null)&&(Gc(),_i&&(s=_i,n=Si,Si=_i=null,Z0(s),n)))for(s=0;s<n.length;s++)Z0(n[s])}}function No(n,s){var l=n.stateNode;if(l===null)return null;var d=l[fr]||null;if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,s,typeof l));return l}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pd=!1;if(Ia)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){pd=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{pd=!1}var ss=null,gd=null,lc=null;function tp(){if(lc)return lc;var n,s=gd,l=s.length,d,x="value"in ss?ss.value:ss.textContent,m=x.length;for(n=0;n<l&&s[n]===x[n];n++);var T=l-n;for(d=1;d<=T&&s[l-d]===x[m-d];d++);return lc=x.slice(n,1<d?1-d:void 0)}function cc(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function uc(){return!0}function rp(){return!1}function Dn(n){function s(l,d,x,m,T){this._reactName=l,this._targetInst=x,this.type=d,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var O in n)n.hasOwnProperty(O)&&(l=n[O],this[O]=l?l(m):m[O]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?uc:rp,this.isPropagationStopped=rp,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=uc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=uc)},persist:function(){},isPersistent:uc}),s}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dc=Dn(zs),Io=g({},zs,{view:0,detail:0}),Gb=Dn(Io),xd,md,Bo,fc=g({},Io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vd,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bo&&(Bo&&n.type==="mousemove"?(xd=n.screenX-Bo.screenX,md=n.screenY-Bo.screenY):md=xd=0,Bo=n),xd)},movementY:function(n){return"movementY"in n?n.movementY:md}}),np=Dn(fc),Vb=g({},fc,{dataTransfer:0}),Yb=Dn(Vb),Kb=g({},Io,{relatedTarget:0}),yd=Dn(Kb),Xb=g({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Qb=Dn(Xb),Jb=g({},zs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Zb=Dn(Jb),e2=g({},zs,{data:0}),ap=Dn(e2),t2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a2(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=n2[n])?!!s[n]:!1}function vd(){return a2}var s2=g({},Io,{key:function(n){if(n.key){var s=t2[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=cc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?r2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vd,charCode:function(n){return n.type==="keypress"?cc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?cc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),i2=Dn(s2),o2=g({},fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sp=Dn(o2),l2=g({},Io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vd}),c2=Dn(l2),u2=g({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),d2=Dn(u2),f2=g({},fc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),h2=Dn(f2),p2=g({},zs,{newState:0,oldState:0}),g2=Dn(p2),x2=[9,13,27,32],bd=Ia&&"CompositionEvent"in window,Mo=null;Ia&&"documentMode"in document&&(Mo=document.documentMode);var m2=Ia&&"TextEvent"in window&&!Mo,ip=Ia&&(!bd||Mo&&8<Mo&&11>=Mo),op=" ",lp=!1;function cp(n,s){switch(n){case"keyup":return x2.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function up(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wi=!1;function y2(n,s){switch(n){case"compositionend":return up(s);case"keypress":return s.which!==32?null:(lp=!0,op);case"textInput":return n=s.data,n===op&&lp?null:n;default:return null}}function v2(n,s){if(wi)return n==="compositionend"||!bd&&cp(n,s)?(n=tp(),lc=gd=ss=null,wi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ip&&s.locale!=="ko"?null:s.data;default:return null}}var b2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!b2[n.type]:s==="textarea"}function fp(n,s,l,d){_i?Si?Si.push(d):Si=[d]:_i=d,s=Jc(s,"onChange"),0<s.length&&(l=new dc("onChange","change",null,l,d),n.push({event:l,listeners:s}))}var Fo=null,Lo=null;function _2(n){Gx(n,0)}function hc(n){var s=ye(n);if(Br(s))return n}function hp(n,s){if(n==="change")return s}var pp=!1;if(Ia){var _d;if(Ia){var Sd="oninput"in document;if(!Sd){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),Sd=typeof gp.oninput=="function"}_d=Sd}else _d=!1;pp=_d&&(!document.documentMode||9<document.documentMode)}function xp(){Fo&&(Fo.detachEvent("onpropertychange",mp),Lo=Fo=null)}function mp(n){if(n.propertyName==="value"&&hc(Lo)){var s=[];fp(s,Lo,n,fd(n)),ep(_2,s)}}function S2(n,s,l){n==="focusin"?(xp(),Fo=s,Lo=l,Fo.attachEvent("onpropertychange",mp)):n==="focusout"&&xp()}function w2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hc(Lo)}function T2(n,s){if(n==="click")return hc(s)}function E2(n,s){if(n==="input"||n==="change")return hc(s)}function k2(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var zn=typeof Object.is=="function"?Object.is:k2;function Po(n,s){if(zn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var x=l[d];if(!He.call(s,x)||!zn(n[x],s[x]))return!1}return!0}function yp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vp(n,s){var l=yp(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=s&&d>=s)return{node:l,offset:s-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=yp(l)}}function bp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?bp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function _p(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=yr(n.document);s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=yr(n.document)}return s}function wd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var j2=Ia&&"documentMode"in document&&11>=document.documentMode,Ti=null,Td=null,zo=null,Ed=!1;function Sp(n,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ed||Ti==null||Ti!==yr(d)||(d=Ti,"selectionStart"in d&&wd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),zo&&Po(zo,d)||(zo=d,d=Jc(Td,"onSelect"),0<d.length&&(s=new dc("onSelect","select",null,s,l),n.push({event:s,listeners:d}),s.target=Ti)))}function Us(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Ei={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},kd={},wp={};Ia&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function Ws(n){if(kd[n])return kd[n];if(!Ei[n])return n;var s=Ei[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in wp)return kd[n]=s[l];return n}var Tp=Ws("animationend"),Ep=Ws("animationiteration"),kp=Ws("animationstart"),C2=Ws("transitionrun"),A2=Ws("transitionstart"),R2=Ws("transitioncancel"),jp=Ws("transitionend"),Cp=new Map,jd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jd.push("scrollEnd");function fa(n,s){Cp.set(n,s),Ue(s,[n])}var Ap=new WeakMap;function Jn(n,s){if(typeof n=="object"&&n!==null){var l=Ap.get(n);return l!==void 0?l:(s={value:n,source:s,stack:bt(s)},Ap.set(n,s),s)}return{value:n,source:s,stack:bt(s)}}var Zn=[],ki=0,Cd=0;function pc(){for(var n=ki,s=Cd=ki=0;s<n;){var l=Zn[s];Zn[s++]=null;var d=Zn[s];Zn[s++]=null;var x=Zn[s];Zn[s++]=null;var m=Zn[s];if(Zn[s++]=null,d!==null&&x!==null){var T=d.pending;T===null?x.next=x:(x.next=T.next,T.next=x),d.pending=x}m!==0&&Rp(l,x,m)}}function gc(n,s,l,d){Zn[ki++]=n,Zn[ki++]=s,Zn[ki++]=l,Zn[ki++]=d,Cd|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function Ad(n,s,l,d){return gc(n,s,l,d),xc(n)}function ji(n,s){return gc(n,null,null,s),xc(n)}function Rp(n,s,l){n.lanes|=l;var d=n.alternate;d!==null&&(d.lanes|=l);for(var x=!1,m=n.return;m!==null;)m.childLanes|=l,d=m.alternate,d!==null&&(d.childLanes|=l),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(x=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,x&&s!==null&&(x=31-$e(l),n=m.hiddenUpdates,d=n[x],d===null?n[x]=[s]:d.push(s),s.lane=l|536870912),m):null}function xc(n){if(50<dl)throw dl=0,Mf=null,Error(a(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ci={};function D2(n,s,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(n,s,l,d){return new D2(n,s,l,d)}function Rd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ba(n,s){var l=n.alternate;return l===null?(l=Un(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Dp(n,s){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,s=l.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function mc(n,s,l,d,x,m){var T=0;if(d=n,typeof n=="function")Rd(n)&&(T=1);else if(typeof n=="string")T=O_(n,l,W.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case z:return n=Un(31,l,s,x),n.elementType=z,n.lanes=m,n;case w:return Hs(l.children,x,m,s);case _:T=8,x|=24;break;case S:return n=Un(12,l,s,x|2),n.elementType=S,n.lanes=m,n;case Z:return n=Un(13,l,s,x),n.elementType=Z,n.lanes=m,n;case oe:return n=Un(19,l,s,x),n.elementType=oe,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:case I:T=10;break e;case D:T=9;break e;case G:T=11;break e;case V:T=14;break e;case P:T=16,d=null;break e}T=29,l=Error(a(130,n===null?"null":typeof n,"")),d=null}return s=Un(T,l,s,x),s.elementType=n,s.type=d,s.lanes=m,s}function Hs(n,s,l,d){return n=Un(7,n,d,s),n.lanes=l,n}function Dd(n,s,l){return n=Un(6,n,null,s),n.lanes=l,n}function Nd(n,s,l){return s=Un(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Ai=[],Ri=0,yc=null,vc=0,ea=[],ta=0,qs=null,Ma=1,Fa="";function $s(n,s){Ai[Ri++]=vc,Ai[Ri++]=yc,yc=n,vc=s}function Np(n,s,l){ea[ta++]=Ma,ea[ta++]=Fa,ea[ta++]=qs,qs=n;var d=Ma;n=Fa;var x=32-$e(d)-1;d&=~(1<<x),l+=1;var m=32-$e(s)+x;if(30<m){var T=x-x%5;m=(d&(1<<T)-1).toString(32),d>>=T,x-=T,Ma=1<<32-$e(s)+x|l<<x|d,Fa=m+n}else Ma=1<<m|l<<x|d,Fa=n}function Od(n){n.return!==null&&($s(n,1),Np(n,1,0))}function Id(n){for(;n===yc;)yc=Ai[--Ri],Ai[Ri]=null,vc=Ai[--Ri],Ai[Ri]=null;for(;n===qs;)qs=ea[--ta],ea[ta]=null,Fa=ea[--ta],ea[ta]=null,Ma=ea[--ta],ea[ta]=null}var Sn=null,Rr=null,rr=!1,Gs=null,Ea=!1,Bd=Error(a(519));function Vs(n){var s=Error(a(418,""));throw Ho(Jn(s,n)),Bd}function Op(n){var s=n.stateNode,l=n.type,d=n.memoizedProps;switch(s[jt]=n,s[fr]=d,l){case"dialog":Ht("cancel",s),Ht("close",s);break;case"iframe":case"object":case"embed":Ht("load",s);break;case"video":case"audio":for(l=0;l<hl.length;l++)Ht(hl[l],s);break;case"source":Ht("error",s);break;case"img":case"image":case"link":Ht("error",s),Ht("load",s);break;case"details":Ht("toggle",s);break;case"input":Ht("invalid",s),Ke(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Ft(s);break;case"select":Ht("invalid",s);break;case"textarea":Ht("invalid",s),ot(s,d.value,d.defaultValue,d.children),Ft(s)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||d.suppressHydrationWarning===!0||Xx(s.textContent,l)?(d.popover!=null&&(Ht("beforetoggle",s),Ht("toggle",s)),d.onScroll!=null&&Ht("scroll",s),d.onScrollEnd!=null&&Ht("scrollend",s),d.onClick!=null&&(s.onclick=Zc),s=!0):s=!1,s||Vs(n)}function Ip(n){for(Sn=n.return;Sn;)switch(Sn.tag){case 5:case 13:Ea=!1;return;case 27:case 3:Ea=!0;return;default:Sn=Sn.return}}function Uo(n){if(n!==Sn)return!1;if(!rr)return Ip(n),rr=!0,!1;var s=n.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Jf(n.type,n.memoizedProps)),l=!l),l&&Rr&&Vs(n),Ip(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(l=n.data,l==="/$"){if(s===0){Rr=pa(n.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;n=n.nextSibling}Rr=null}}else s===27?(s=Rr,_s(n.type)?(n=rh,rh=null,Rr=n):Rr=s):Rr=Sn?pa(n.stateNode.nextSibling):null;return!0}function Wo(){Rr=Sn=null,rr=!1}function Bp(){var n=Gs;return n!==null&&(In===null?In=n:In.push.apply(In,n),Gs=null),n}function Ho(n){Gs===null?Gs=[n]:Gs.push(n)}var Md=Q(null),Ys=null,La=null;function is(n,s,l){L(Md,s._currentValue),s._currentValue=l}function Pa(n){n._currentValue=Md.current,k(Md)}function Fd(n,s,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===l)break;n=n.return}}function Ld(n,s,l,d){var x=n.child;for(x!==null&&(x.return=n);x!==null;){var m=x.dependencies;if(m!==null){var T=x.child;m=m.firstContext;e:for(;m!==null;){var O=m;m=x;for(var J=0;J<s.length;J++)if(O.context===s[J]){m.lanes|=l,O=m.alternate,O!==null&&(O.lanes|=l),Fd(m.return,l,n),d||(T=null);break e}m=O.next}}else if(x.tag===18){if(T=x.return,T===null)throw Error(a(341));T.lanes|=l,m=T.alternate,m!==null&&(m.lanes|=l),Fd(T,l,n),T=null}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===n){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}}function qo(n,s,l,d){n=null;for(var x=s,m=!1;x!==null;){if(!m){if((x.flags&524288)!==0)m=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var T=x.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var O=x.type;zn(x.pendingProps.value,T.value)||(n!==null?n.push(O):n=[O])}}else if(x===Me.current){if(T=x.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(n!==null?n.push(vl):n=[vl])}x=x.return}n!==null&&Ld(s,n,l,d),s.flags|=262144}function bc(n){for(n=n.firstContext;n!==null;){if(!zn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ks(n){Ys=n,La=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function pn(n){return Mp(Ys,n)}function _c(n,s){return Ys===null&&Ks(n),Mp(n,s)}function Mp(n,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},La===null){if(n===null)throw Error(a(308));La=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else La=La.next=s;return l}var N2=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(l,d){n.push(d)}};this.abort=function(){s.aborted=!0,n.forEach(function(l){return l()})}},O2=e.unstable_scheduleCallback,I2=e.unstable_NormalPriority,qr={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pd(){return{controller:new N2,data:new Map,refCount:0}}function $o(n){n.refCount--,n.refCount===0&&O2(I2,function(){n.controller.abort()})}var Go=null,zd=0,Di=0,Ni=null;function B2(n,s){if(Go===null){var l=Go=[];zd=0,Di=Hf(),Ni={status:"pending",value:void 0,then:function(d){l.push(d)}}}return zd++,s.then(Fp,Fp),s}function Fp(){if(--zd===0&&Go!==null){Ni!==null&&(Ni.status="fulfilled");var n=Go;Go=null,Di=0,Ni=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function M2(n,s){var l=[],d={status:"pending",value:null,reason:null,then:function(x){l.push(x)}};return n.then(function(){d.status="fulfilled",d.value=s;for(var x=0;x<l.length;x++)(0,l[x])(s)},function(x){for(d.status="rejected",d.reason=x,x=0;x<l.length;x++)(0,l[x])(void 0)}),d}var Lp=ne.S;ne.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&B2(n,s),Lp!==null&&Lp(n,s)};var Xs=Q(null);function Ud(){var n=Xs.current;return n!==null?n:_r.pooledCache}function Sc(n,s){s===null?L(Xs,Xs.current):L(Xs,s.pool)}function Pp(){var n=Ud();return n===null?null:{parent:qr._currentValue,pool:n}}var Vo=Error(a(460)),zp=Error(a(474)),wc=Error(a(542)),Wd={then:function(){}};function Up(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Tc(){}function Wp(n,s,l){switch(l=n[l],l===void 0?n.push(s):l!==s&&(s.then(Tc,Tc),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,qp(n),n;default:if(typeof s.status=="string")s.then(Tc,Tc);else{if(n=_r,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=s,n.status="pending",n.then(function(d){if(s.status==="pending"){var x=s;x.status="fulfilled",x.value=d}},function(d){if(s.status==="pending"){var x=s;x.status="rejected",x.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,qp(n),n}throw Yo=s,Vo}}var Yo=null;function Hp(){if(Yo===null)throw Error(a(459));var n=Yo;return Yo=null,n}function qp(n){if(n===Vo||n===wc)throw Error(a(483))}var os=!1;function Hd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ls(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function cs(n,s,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(ir&2)!==0){var x=d.pending;return x===null?s.next=s:(s.next=x.next,x.next=s),d.pending=s,s=xc(n),Rp(n,null,l),s}return gc(n,d,s,l),xc(n)}function Ko(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var d=s.lanes;d&=n.pendingLanes,l|=d,s.lanes=l,kt(n,l)}}function $d(n,s){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var x=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?x=m=T:m=m.next=T,l=l.next}while(l!==null);m===null?x=m=s:m=m.next=s}else x=m=s;l={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:m,shared:d.shared,callbacks:d.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}var Gd=!1;function Xo(){if(Gd){var n=Ni;if(n!==null)throw n}}function Qo(n,s,l,d){Gd=!1;var x=n.updateQueue;os=!1;var m=x.firstBaseUpdate,T=x.lastBaseUpdate,O=x.shared.pending;if(O!==null){x.shared.pending=null;var J=O,be=J.next;J.next=null,T===null?m=be:T.next=be,T=J;var Fe=n.alternate;Fe!==null&&(Fe=Fe.updateQueue,O=Fe.lastBaseUpdate,O!==T&&(O===null?Fe.firstBaseUpdate=be:O.next=be,Fe.lastBaseUpdate=J))}if(m!==null){var ze=x.baseState;T=0,Fe=be=J=null,O=m;do{var Te=O.lane&-536870913,Ee=Te!==O.lane;if(Ee?(Vt&Te)===Te:(d&Te)===Te){Te!==0&&Te===Di&&(Gd=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Et=n,_t=O;Te=s;var gr=l;switch(_t.tag){case 1:if(Et=_t.payload,typeof Et=="function"){ze=Et.call(gr,ze,Te);break e}ze=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=_t.payload,Te=typeof Et=="function"?Et.call(gr,ze,Te):Et,Te==null)break e;ze=g({},ze,Te);break e;case 2:os=!0}}Te=O.callback,Te!==null&&(n.flags|=64,Ee&&(n.flags|=8192),Ee=x.callbacks,Ee===null?x.callbacks=[Te]:Ee.push(Te))}else Ee={lane:Te,tag:O.tag,payload:O.payload,callback:O.callback,next:null},Fe===null?(be=Fe=Ee,J=ze):Fe=Fe.next=Ee,T|=Te;if(O=O.next,O===null){if(O=x.shared.pending,O===null)break;Ee=O,O=Ee.next,Ee.next=null,x.lastBaseUpdate=Ee,x.shared.pending=null}}while(!0);Fe===null&&(J=ze),x.baseState=J,x.firstBaseUpdate=be,x.lastBaseUpdate=Fe,m===null&&(x.shared.lanes=0),ms|=T,n.lanes=T,n.memoizedState=ze}}function $p(n,s){if(typeof n!="function")throw Error(a(191,n));n.call(s)}function Gp(n,s){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)$p(l[n],s)}var Oi=Q(null),Ec=Q(0);function Vp(n,s){n=Ga,L(Ec,n),L(Oi,s),Ga=n|s.baseLanes}function Vd(){L(Ec,Ga),L(Oi,Oi.current)}function Yd(){Ga=Ec.current,k(Oi),k(Ec)}var us=0,Lt=null,hr=null,Pr=null,kc=!1,Ii=!1,Qs=!1,jc=0,Jo=0,Bi=null,F2=0;function Fr(){throw Error(a(321))}function Kd(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!zn(n[l],s[l]))return!1;return!0}function Xd(n,s,l,d,x,m){return us=m,Lt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ne.H=n===null||n.memoizedState===null?Rg:Dg,Qs=!1,m=l(d,x),Qs=!1,Ii&&(m=Kp(s,l,d,x)),Yp(n),m}function Yp(n){ne.H=Oc;var s=hr!==null&&hr.next!==null;if(us=0,Pr=hr=Lt=null,kc=!1,Jo=0,Bi=null,s)throw Error(a(300));n===null||Qr||(n=n.dependencies,n!==null&&bc(n)&&(Qr=!0))}function Kp(n,s,l,d){Lt=n;var x=0;do{if(Ii&&(Bi=null),Jo=0,Ii=!1,25<=x)throw Error(a(301));if(x+=1,Pr=hr=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ne.H=q2,m=s(l,d)}while(Ii);return m}function L2(){var n=ne.H,s=n.useState()[0];return s=typeof s.then=="function"?Zo(s):s,n=n.useState()[0],(hr!==null?hr.memoizedState:null)!==n&&(Lt.flags|=1024),s}function Qd(){var n=jc!==0;return jc=0,n}function Jd(n,s,l){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l}function Zd(n){if(kc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}kc=!1}us=0,Pr=hr=Lt=null,Ii=!1,Jo=jc=0,Bi=null}function Nn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?Lt.memoizedState=Pr=n:Pr=Pr.next=n,Pr}function zr(){if(hr===null){var n=Lt.alternate;n=n!==null?n.memoizedState:null}else n=hr.next;var s=Pr===null?Lt.memoizedState:Pr.next;if(s!==null)Pr=s,hr=n;else{if(n===null)throw Lt.alternate===null?Error(a(467)):Error(a(310));hr=n,n={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},Pr===null?Lt.memoizedState=Pr=n:Pr=Pr.next=n}return Pr}function ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(n){var s=Jo;return Jo+=1,Bi===null&&(Bi=[]),n=Wp(Bi,n,s),s=Lt,(Pr===null?s.memoizedState:Pr.next)===null&&(s=s.alternate,ne.H=s===null||s.memoizedState===null?Rg:Dg),n}function Cc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Zo(n);if(n.$$typeof===I)return pn(n)}throw Error(a(438,String(n)))}function tf(n){var s=null,l=Lt.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var d=Lt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(x){return x.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=ef(),Lt.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(n),d=0;d<n;d++)l[d]=ie;return s.index++,l}function za(n,s){return typeof s=="function"?s(n):s}function Ac(n){var s=zr();return rf(s,hr,n)}function rf(n,s,l){var d=n.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=l;var x=n.baseQueue,m=d.pending;if(m!==null){if(x!==null){var T=x.next;x.next=m.next,m.next=T}s.baseQueue=x=m,d.pending=null}if(m=n.baseState,x===null)n.memoizedState=m;else{s=x.next;var O=T=null,J=null,be=s,Fe=!1;do{var ze=be.lane&-536870913;if(ze!==be.lane?(Vt&ze)===ze:(us&ze)===ze){var Te=be.revertLane;if(Te===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),ze===Di&&(Fe=!0);else if((us&Te)===Te){be=be.next,Te===Di&&(Fe=!0);continue}else ze={lane:0,revertLane:be.revertLane,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},J===null?(O=J=ze,T=m):J=J.next=ze,Lt.lanes|=Te,ms|=Te;ze=be.action,Qs&&l(m,ze),m=be.hasEagerState?be.eagerState:l(m,ze)}else Te={lane:ze,revertLane:be.revertLane,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},J===null?(O=J=Te,T=m):J=J.next=Te,Lt.lanes|=ze,ms|=ze;be=be.next}while(be!==null&&be!==s);if(J===null?T=m:J.next=O,!zn(m,n.memoizedState)&&(Qr=!0,Fe&&(l=Ni,l!==null)))throw l;n.memoizedState=m,n.baseState=T,n.baseQueue=J,d.lastRenderedState=m}return x===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function nf(n){var s=zr(),l=s.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var d=l.dispatch,x=l.pending,m=s.memoizedState;if(x!==null){l.pending=null;var T=x=x.next;do m=n(m,T.action),T=T.next;while(T!==x);zn(m,s.memoizedState)||(Qr=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),l.lastRenderedState=m}return[m,d]}function Xp(n,s,l){var d=Lt,x=zr(),m=rr;if(m){if(l===void 0)throw Error(a(407));l=l()}else l=s();var T=!zn((hr||x).memoizedState,l);T&&(x.memoizedState=l,Qr=!0),x=x.queue;var O=Zp.bind(null,d,x,n);if(el(2048,8,O,[n]),x.getSnapshot!==s||T||Pr!==null&&Pr.memoizedState.tag&1){if(d.flags|=2048,Mi(9,Rc(),Jp.bind(null,d,x,l,s),null),_r===null)throw Error(a(349));m||(us&124)!==0||Qp(d,s,l)}return l}function Qp(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=Lt.updateQueue,s===null?(s=ef(),Lt.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function Jp(n,s,l,d){s.value=l,s.getSnapshot=d,eg(s)&&tg(n)}function Zp(n,s,l){return l(function(){eg(s)&&tg(n)})}function eg(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!zn(n,l)}catch{return!0}}function tg(n){var s=ji(n,2);s!==null&&Gn(s,n,2)}function af(n){var s=Nn();if(typeof n=="function"){var l=n;if(n=l(),Qs){ce(!0);try{l()}finally{ce(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:n},s}function rg(n,s,l,d){return n.baseState=l,rf(n,hr,typeof d=="function"?d:za)}function P2(n,s,l,d,x){if(Nc(n))throw Error(a(485));if(n=s.action,n!==null){var m={payload:x,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};ne.T!==null?l(!0):m.isTransition=!1,d(m),l=s.pending,l===null?(m.next=s.pending=m,ng(s,m)):(m.next=l.next,s.pending=l.next=m)}}function ng(n,s){var l=s.action,d=s.payload,x=n.state;if(s.isTransition){var m=ne.T,T={};ne.T=T;try{var O=l(x,d),J=ne.S;J!==null&&J(T,O),ag(n,s,O)}catch(be){sf(n,s,be)}finally{ne.T=m}}else try{m=l(x,d),ag(n,s,m)}catch(be){sf(n,s,be)}}function ag(n,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){sg(n,s,d)},function(d){return sf(n,s,d)}):sg(n,s,l)}function sg(n,s,l){s.status="fulfilled",s.value=l,ig(s),n.state=l,s=n.pending,s!==null&&(l=s.next,l===s?n.pending=null:(l=l.next,s.next=l,ng(n,l)))}function sf(n,s,l){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=l,ig(s),s=s.next;while(s!==d)}n.action=null}function ig(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function og(n,s){return s}function lg(n,s){if(rr){var l=_r.formState;if(l!==null){e:{var d=Lt;if(rr){if(Rr){t:{for(var x=Rr,m=Ea;x.nodeType!==8;){if(!m){x=null;break t}if(x=pa(x.nextSibling),x===null){x=null;break t}}m=x.data,x=m==="F!"||m==="F"?x:null}if(x){Rr=pa(x.nextSibling),d=x.data==="F!";break e}}Vs(d)}d=!1}d&&(s=l[0])}}return l=Nn(),l.memoizedState=l.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:og,lastRenderedState:s},l.queue=d,l=jg.bind(null,Lt,d),d.dispatch=l,d=af(!1),m=df.bind(null,Lt,!1,d.queue),d=Nn(),x={state:s,dispatch:null,action:n,pending:null},d.queue=x,l=P2.bind(null,Lt,x,m,l),x.dispatch=l,d.memoizedState=n,[s,l,!1]}function cg(n){var s=zr();return ug(s,hr,n)}function ug(n,s,l){if(s=rf(n,s,og)[0],n=Ac(za)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=Zo(s)}catch(T){throw T===Vo?wc:T}else d=s;s=zr();var x=s.queue,m=x.dispatch;return l!==s.memoizedState&&(Lt.flags|=2048,Mi(9,Rc(),z2.bind(null,x,l),null)),[d,m,n]}function z2(n,s){n.action=s}function dg(n){var s=zr(),l=hr;if(l!==null)return ug(s,l,n);zr(),s=s.memoizedState,l=zr();var d=l.queue.dispatch;return l.memoizedState=n,[s,d,!1]}function Mi(n,s,l,d){return n={tag:n,create:l,deps:d,inst:s,next:null},s=Lt.updateQueue,s===null&&(s=ef(),Lt.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,s.lastEffect=n),n}function Rc(){return{destroy:void 0,resource:void 0}}function fg(){return zr().memoizedState}function Dc(n,s,l,d){var x=Nn();d=d===void 0?null:d,Lt.flags|=n,x.memoizedState=Mi(1|s,Rc(),l,d)}function el(n,s,l,d){var x=zr();d=d===void 0?null:d;var m=x.memoizedState.inst;hr!==null&&d!==null&&Kd(d,hr.memoizedState.deps)?x.memoizedState=Mi(s,m,l,d):(Lt.flags|=n,x.memoizedState=Mi(1|s,m,l,d))}function hg(n,s){Dc(8390656,8,n,s)}function pg(n,s){el(2048,8,n,s)}function gg(n,s){return el(4,2,n,s)}function xg(n,s){return el(4,4,n,s)}function mg(n,s){if(typeof s=="function"){n=n();var l=s(n);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function yg(n,s,l){l=l!=null?l.concat([n]):null,el(4,4,mg.bind(null,s,n),l)}function of(){}function vg(n,s){var l=zr();s=s===void 0?null:s;var d=l.memoizedState;return s!==null&&Kd(s,d[1])?d[0]:(l.memoizedState=[n,s],n)}function bg(n,s){var l=zr();s=s===void 0?null:s;var d=l.memoizedState;if(s!==null&&Kd(s,d[1]))return d[0];if(d=n(),Qs){ce(!0);try{n()}finally{ce(!1)}}return l.memoizedState=[d,s],d}function lf(n,s,l){return l===void 0||(us&1073741824)!==0?n.memoizedState=s:(n.memoizedState=l,n=wx(),Lt.lanes|=n,ms|=n,l)}function _g(n,s,l,d){return zn(l,s)?l:Oi.current!==null?(n=lf(n,l,d),zn(n,s)||(Qr=!0),n):(us&42)===0?(Qr=!0,n.memoizedState=l):(n=wx(),Lt.lanes|=n,ms|=n,s)}function Sg(n,s,l,d,x){var m=ve.p;ve.p=m!==0&&8>m?m:8;var T=ne.T,O={};ne.T=O,df(n,!1,s,l);try{var J=x(),be=ne.S;if(be!==null&&be(O,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var Fe=M2(J,d);tl(n,s,Fe,$n(n))}else tl(n,s,d,$n(n))}catch(ze){tl(n,s,{then:function(){},status:"rejected",reason:ze},$n())}finally{ve.p=m,ne.T=T}}function U2(){}function cf(n,s,l,d){if(n.tag!==5)throw Error(a(476));var x=wg(n).queue;Sg(n,x,s,le,l===null?U2:function(){return Tg(n),l(d)})}function wg(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:le},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:l},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Tg(n){var s=wg(n).next.queue;tl(n,s,{},$n())}function uf(){return pn(vl)}function Eg(){return zr().memoizedState}function kg(){return zr().memoizedState}function W2(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var l=$n();n=ls(l);var d=cs(s,n,l);d!==null&&(Gn(d,s,l),Ko(d,s,l)),s={cache:Pd()},n.payload=s;return}s=s.return}}function H2(n,s,l){var d=$n();l={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Nc(n)?Cg(s,l):(l=Ad(n,s,l,d),l!==null&&(Gn(l,n,d),Ag(l,s,d)))}function jg(n,s,l){var d=$n();tl(n,s,l,d)}function tl(n,s,l,d){var x={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Nc(n))Cg(s,x);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var T=s.lastRenderedState,O=m(T,l);if(x.hasEagerState=!0,x.eagerState=O,zn(O,T))return gc(n,s,x,0),_r===null&&pc(),!1}catch{}finally{}if(l=Ad(n,s,x,d),l!==null)return Gn(l,n,d),Ag(l,s,d),!0}return!1}function df(n,s,l,d){if(d={lane:2,revertLane:Hf(),action:d,hasEagerState:!1,eagerState:null,next:null},Nc(n)){if(s)throw Error(a(479))}else s=Ad(n,l,d,2),s!==null&&Gn(s,n,2)}function Nc(n){var s=n.alternate;return n===Lt||s!==null&&s===Lt}function Cg(n,s){Ii=kc=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Ag(n,s,l){if((l&4194048)!==0){var d=s.lanes;d&=n.pendingLanes,l|=d,s.lanes=l,kt(n,l)}}var Oc={readContext:pn,use:Cc,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useLayoutEffect:Fr,useInsertionEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useSyncExternalStore:Fr,useId:Fr,useHostTransitionStatus:Fr,useFormState:Fr,useActionState:Fr,useOptimistic:Fr,useMemoCache:Fr,useCacheRefresh:Fr},Rg={readContext:pn,use:Cc,useCallback:function(n,s){return Nn().memoizedState=[n,s===void 0?null:s],n},useContext:pn,useEffect:hg,useImperativeHandle:function(n,s,l){l=l!=null?l.concat([n]):null,Dc(4194308,4,mg.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Dc(4194308,4,n,s)},useInsertionEffect:function(n,s){Dc(4,2,n,s)},useMemo:function(n,s){var l=Nn();s=s===void 0?null:s;var d=n();if(Qs){ce(!0);try{n()}finally{ce(!1)}}return l.memoizedState=[d,s],d},useReducer:function(n,s,l){var d=Nn();if(l!==void 0){var x=l(s);if(Qs){ce(!0);try{l(s)}finally{ce(!1)}}}else x=s;return d.memoizedState=d.baseState=x,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:x},d.queue=n,n=n.dispatch=H2.bind(null,Lt,n),[d.memoizedState,n]},useRef:function(n){var s=Nn();return n={current:n},s.memoizedState=n},useState:function(n){n=af(n);var s=n.queue,l=jg.bind(null,Lt,s);return s.dispatch=l,[n.memoizedState,l]},useDebugValue:of,useDeferredValue:function(n,s){var l=Nn();return lf(l,n,s)},useTransition:function(){var n=af(!1);return n=Sg.bind(null,Lt,n.queue,!0,!1),Nn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,l){var d=Lt,x=Nn();if(rr){if(l===void 0)throw Error(a(407));l=l()}else{if(l=s(),_r===null)throw Error(a(349));(Vt&124)!==0||Qp(d,s,l)}x.memoizedState=l;var m={value:l,getSnapshot:s};return x.queue=m,hg(Zp.bind(null,d,m,n),[n]),d.flags|=2048,Mi(9,Rc(),Jp.bind(null,d,m,l,s),null),l},useId:function(){var n=Nn(),s=_r.identifierPrefix;if(rr){var l=Fa,d=Ma;l=(d&~(1<<32-$e(d)-1)).toString(32)+l,s="«"+s+"R"+l,l=jc++,0<l&&(s+="H"+l.toString(32)),s+="»"}else l=F2++,s="«"+s+"r"+l.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:uf,useFormState:lg,useActionState:lg,useOptimistic:function(n){var s=Nn();s.memoizedState=s.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=df.bind(null,Lt,!0,l),l.dispatch=s,[n,s]},useMemoCache:tf,useCacheRefresh:function(){return Nn().memoizedState=W2.bind(null,Lt)}},Dg={readContext:pn,use:Cc,useCallback:vg,useContext:pn,useEffect:pg,useImperativeHandle:yg,useInsertionEffect:gg,useLayoutEffect:xg,useMemo:bg,useReducer:Ac,useRef:fg,useState:function(){return Ac(za)},useDebugValue:of,useDeferredValue:function(n,s){var l=zr();return _g(l,hr.memoizedState,n,s)},useTransition:function(){var n=Ac(za)[0],s=zr().memoizedState;return[typeof n=="boolean"?n:Zo(n),s]},useSyncExternalStore:Xp,useId:Eg,useHostTransitionStatus:uf,useFormState:cg,useActionState:cg,useOptimistic:function(n,s){var l=zr();return rg(l,hr,n,s)},useMemoCache:tf,useCacheRefresh:kg},q2={readContext:pn,use:Cc,useCallback:vg,useContext:pn,useEffect:pg,useImperativeHandle:yg,useInsertionEffect:gg,useLayoutEffect:xg,useMemo:bg,useReducer:nf,useRef:fg,useState:function(){return nf(za)},useDebugValue:of,useDeferredValue:function(n,s){var l=zr();return hr===null?lf(l,n,s):_g(l,hr.memoizedState,n,s)},useTransition:function(){var n=nf(za)[0],s=zr().memoizedState;return[typeof n=="boolean"?n:Zo(n),s]},useSyncExternalStore:Xp,useId:Eg,useHostTransitionStatus:uf,useFormState:dg,useActionState:dg,useOptimistic:function(n,s){var l=zr();return hr!==null?rg(l,hr,n,s):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:tf,useCacheRefresh:kg},Fi=null,rl=0;function Ic(n){var s=rl;return rl+=1,Fi===null&&(Fi=[]),Wp(Fi,n,s)}function nl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Bc(n,s){throw s.$$typeof===y?Error(a(525)):(n=Object.prototype.toString.call(s),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Ng(n){var s=n._init;return s(n._payload)}function Og(n){function s(de,se){if(n){var me=de.deletions;me===null?(de.deletions=[se],de.flags|=16):me.push(se)}}function l(de,se){if(!n)return null;for(;se!==null;)s(de,se),se=se.sibling;return null}function d(de){for(var se=new Map;de!==null;)de.key!==null?se.set(de.key,de):se.set(de.index,de),de=de.sibling;return se}function x(de,se){return de=Ba(de,se),de.index=0,de.sibling=null,de}function m(de,se,me){return de.index=me,n?(me=de.alternate,me!==null?(me=me.index,me<se?(de.flags|=67108866,se):me):(de.flags|=67108866,se)):(de.flags|=1048576,se)}function T(de){return n&&de.alternate===null&&(de.flags|=67108866),de}function O(de,se,me,Le){return se===null||se.tag!==6?(se=Dd(me,de.mode,Le),se.return=de,se):(se=x(se,me),se.return=de,se)}function J(de,se,me,Le){var dt=me.type;return dt===w?Fe(de,se,me.props.children,Le,me.key):se!==null&&(se.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===P&&Ng(dt)===se.type)?(se=x(se,me.props),nl(se,me),se.return=de,se):(se=mc(me.type,me.key,me.props,null,de.mode,Le),nl(se,me),se.return=de,se)}function be(de,se,me,Le){return se===null||se.tag!==4||se.stateNode.containerInfo!==me.containerInfo||se.stateNode.implementation!==me.implementation?(se=Nd(me,de.mode,Le),se.return=de,se):(se=x(se,me.children||[]),se.return=de,se)}function Fe(de,se,me,Le,dt){return se===null||se.tag!==7?(se=Hs(me,de.mode,Le,dt),se.return=de,se):(se=x(se,me),se.return=de,se)}function ze(de,se,me){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=Dd(""+se,de.mode,me),se.return=de,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case v:return me=mc(se.type,se.key,se.props,null,de.mode,me),nl(me,se),me.return=de,me;case b:return se=Nd(se,de.mode,me),se.return=de,se;case P:var Le=se._init;return se=Le(se._payload),ze(de,se,me)}if(_e(se)||xe(se))return se=Hs(se,de.mode,me,null),se.return=de,se;if(typeof se.then=="function")return ze(de,Ic(se),me);if(se.$$typeof===I)return ze(de,_c(de,se),me);Bc(de,se)}return null}function Te(de,se,me,Le){var dt=se!==null?se.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return dt!==null?null:O(de,se,""+me,Le);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case v:return me.key===dt?J(de,se,me,Le):null;case b:return me.key===dt?be(de,se,me,Le):null;case P:return dt=me._init,me=dt(me._payload),Te(de,se,me,Le)}if(_e(me)||xe(me))return dt!==null?null:Fe(de,se,me,Le,null);if(typeof me.then=="function")return Te(de,se,Ic(me),Le);if(me.$$typeof===I)return Te(de,se,_c(de,me),Le);Bc(de,me)}return null}function Ee(de,se,me,Le,dt){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return de=de.get(me)||null,O(se,de,""+Le,dt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case v:return de=de.get(Le.key===null?me:Le.key)||null,J(se,de,Le,dt);case b:return de=de.get(Le.key===null?me:Le.key)||null,be(se,de,Le,dt);case P:var zt=Le._init;return Le=zt(Le._payload),Ee(de,se,me,Le,dt)}if(_e(Le)||xe(Le))return de=de.get(me)||null,Fe(se,de,Le,dt,null);if(typeof Le.then=="function")return Ee(de,se,me,Ic(Le),dt);if(Le.$$typeof===I)return Ee(de,se,me,_c(se,Le),dt);Bc(se,Le)}return null}function Et(de,se,me,Le){for(var dt=null,zt=null,gt=se,Tt=se=0,Zr=null;gt!==null&&Tt<me.length;Tt++){gt.index>Tt?(Zr=gt,gt=null):Zr=gt.sibling;var Jt=Te(de,gt,me[Tt],Le);if(Jt===null){gt===null&&(gt=Zr);break}n&&gt&&Jt.alternate===null&&s(de,gt),se=m(Jt,se,Tt),zt===null?dt=Jt:zt.sibling=Jt,zt=Jt,gt=Zr}if(Tt===me.length)return l(de,gt),rr&&$s(de,Tt),dt;if(gt===null){for(;Tt<me.length;Tt++)gt=ze(de,me[Tt],Le),gt!==null&&(se=m(gt,se,Tt),zt===null?dt=gt:zt.sibling=gt,zt=gt);return rr&&$s(de,Tt),dt}for(gt=d(gt);Tt<me.length;Tt++)Zr=Ee(gt,de,Tt,me[Tt],Le),Zr!==null&&(n&&Zr.alternate!==null&&gt.delete(Zr.key===null?Tt:Zr.key),se=m(Zr,se,Tt),zt===null?dt=Zr:zt.sibling=Zr,zt=Zr);return n&&gt.forEach(function(ks){return s(de,ks)}),rr&&$s(de,Tt),dt}function _t(de,se,me,Le){if(me==null)throw Error(a(151));for(var dt=null,zt=null,gt=se,Tt=se=0,Zr=null,Jt=me.next();gt!==null&&!Jt.done;Tt++,Jt=me.next()){gt.index>Tt?(Zr=gt,gt=null):Zr=gt.sibling;var ks=Te(de,gt,Jt.value,Le);if(ks===null){gt===null&&(gt=Zr);break}n&&gt&&ks.alternate===null&&s(de,gt),se=m(ks,se,Tt),zt===null?dt=ks:zt.sibling=ks,zt=ks,gt=Zr}if(Jt.done)return l(de,gt),rr&&$s(de,Tt),dt;if(gt===null){for(;!Jt.done;Tt++,Jt=me.next())Jt=ze(de,Jt.value,Le),Jt!==null&&(se=m(Jt,se,Tt),zt===null?dt=Jt:zt.sibling=Jt,zt=Jt);return rr&&$s(de,Tt),dt}for(gt=d(gt);!Jt.done;Tt++,Jt=me.next())Jt=Ee(gt,de,Tt,Jt.value,Le),Jt!==null&&(n&&Jt.alternate!==null&&gt.delete(Jt.key===null?Tt:Jt.key),se=m(Jt,se,Tt),zt===null?dt=Jt:zt.sibling=Jt,zt=Jt);return n&&gt.forEach(function($_){return s(de,$_)}),rr&&$s(de,Tt),dt}function gr(de,se,me,Le){if(typeof me=="object"&&me!==null&&me.type===w&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case v:e:{for(var dt=me.key;se!==null;){if(se.key===dt){if(dt=me.type,dt===w){if(se.tag===7){l(de,se.sibling),Le=x(se,me.props.children),Le.return=de,de=Le;break e}}else if(se.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===P&&Ng(dt)===se.type){l(de,se.sibling),Le=x(se,me.props),nl(Le,me),Le.return=de,de=Le;break e}l(de,se);break}else s(de,se);se=se.sibling}me.type===w?(Le=Hs(me.props.children,de.mode,Le,me.key),Le.return=de,de=Le):(Le=mc(me.type,me.key,me.props,null,de.mode,Le),nl(Le,me),Le.return=de,de=Le)}return T(de);case b:e:{for(dt=me.key;se!==null;){if(se.key===dt)if(se.tag===4&&se.stateNode.containerInfo===me.containerInfo&&se.stateNode.implementation===me.implementation){l(de,se.sibling),Le=x(se,me.children||[]),Le.return=de,de=Le;break e}else{l(de,se);break}else s(de,se);se=se.sibling}Le=Nd(me,de.mode,Le),Le.return=de,de=Le}return T(de);case P:return dt=me._init,me=dt(me._payload),gr(de,se,me,Le)}if(_e(me))return Et(de,se,me,Le);if(xe(me)){if(dt=xe(me),typeof dt!="function")throw Error(a(150));return me=dt.call(me),_t(de,se,me,Le)}if(typeof me.then=="function")return gr(de,se,Ic(me),Le);if(me.$$typeof===I)return gr(de,se,_c(de,me),Le);Bc(de,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,se!==null&&se.tag===6?(l(de,se.sibling),Le=x(se,me),Le.return=de,de=Le):(l(de,se),Le=Dd(me,de.mode,Le),Le.return=de,de=Le),T(de)):l(de,se)}return function(de,se,me,Le){try{rl=0;var dt=gr(de,se,me,Le);return Fi=null,dt}catch(gt){if(gt===Vo||gt===wc)throw gt;var zt=Un(29,gt,null,de.mode);return zt.lanes=Le,zt.return=de,zt}finally{}}}var Li=Og(!0),Ig=Og(!1),ra=Q(null),ka=null;function ds(n){var s=n.alternate;L($r,$r.current&1),L(ra,n),ka===null&&(s===null||Oi.current!==null||s.memoizedState!==null)&&(ka=n)}function Bg(n){if(n.tag===22){if(L($r,$r.current),L(ra,n),ka===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(ka=n)}}else fs()}function fs(){L($r,$r.current),L(ra,ra.current)}function Ua(n){k(ra),ka===n&&(ka=null),k($r)}var $r=Q(0);function Mc(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||th(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ff(n,s,l,d){s=n.memoizedState,l=l(d,s),l=l==null?s:g({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var hf={enqueueSetState:function(n,s,l){n=n._reactInternals;var d=$n(),x=ls(d);x.payload=s,l!=null&&(x.callback=l),s=cs(n,x,d),s!==null&&(Gn(s,n,d),Ko(s,n,d))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var d=$n(),x=ls(d);x.tag=1,x.payload=s,l!=null&&(x.callback=l),s=cs(n,x,d),s!==null&&(Gn(s,n,d),Ko(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=$n(),d=ls(l);d.tag=2,s!=null&&(d.callback=s),s=cs(n,d,l),s!==null&&(Gn(s,n,l),Ko(s,n,l))}};function Mg(n,s,l,d,x,m,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,m,T):s.prototype&&s.prototype.isPureReactComponent?!Po(l,d)||!Po(x,m):!0}function Fg(n,s,l,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==n&&hf.enqueueReplaceState(s,s.state,null)}function Js(n,s){var l=s;if("ref"in s){l={};for(var d in s)d!=="ref"&&(l[d]=s[d])}if(n=n.defaultProps){l===s&&(l=g({},l));for(var x in n)l[x]===void 0&&(l[x]=n[x])}return l}var Fc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Lg(n){Fc(n)}function Pg(n){console.error(n)}function zg(n){Fc(n)}function Lc(n,s){try{var l=n.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function Ug(n,s,l){try{var d=n.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function pf(n,s,l){return l=ls(l),l.tag=3,l.payload={element:null},l.callback=function(){Lc(n,s)},l}function Wg(n){return n=ls(n),n.tag=3,n}function Hg(n,s,l,d){var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var m=d.value;n.payload=function(){return x(m)},n.callback=function(){Ug(s,l,d)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){Ug(s,l,d),typeof x!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function $2(n,s,l,d,x){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=l.alternate,s!==null&&qo(s,l,x,!0),l=ra.current,l!==null){switch(l.tag){case 13:return ka===null?Lf():l.alternate===null&&Dr===0&&(Dr=3),l.flags&=-257,l.flags|=65536,l.lanes=x,d===Wd?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([d]):s.add(d),zf(n,d,x)),!1;case 22:return l.flags|=65536,d===Wd?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([d]):l.add(d)),zf(n,d,x)),!1}throw Error(a(435,l.tag))}return zf(n,d,x),Lf(),!1}if(rr)return s=ra.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=x,d!==Bd&&(n=Error(a(422),{cause:d}),Ho(Jn(n,l)))):(d!==Bd&&(s=Error(a(423),{cause:d}),Ho(Jn(s,l))),n=n.current.alternate,n.flags|=65536,x&=-x,n.lanes|=x,d=Jn(d,l),x=pf(n.stateNode,d,x),$d(n,x),Dr!==4&&(Dr=2)),!1;var m=Error(a(520),{cause:d});if(m=Jn(m,l),ul===null?ul=[m]:ul.push(m),Dr!==4&&(Dr=2),s===null)return!0;d=Jn(d,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,n=x&-x,l.lanes|=n,n=pf(l.stateNode,d,n),$d(l,n),!1;case 1:if(s=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ys===null||!ys.has(m))))return l.flags|=65536,x&=-x,l.lanes|=x,x=Wg(x),Hg(x,n,l,d),$d(l,x),!1}l=l.return}while(l!==null);return!1}var qg=Error(a(461)),Qr=!1;function an(n,s,l,d){s.child=n===null?Ig(s,null,l,d):Li(s,n.child,l,d)}function $g(n,s,l,d,x){l=l.render;var m=s.ref;if("ref"in d){var T={};for(var O in d)O!=="ref"&&(T[O]=d[O])}else T=d;return Ks(s),d=Xd(n,s,l,T,m,x),O=Qd(),n!==null&&!Qr?(Jd(n,s,x),Wa(n,s,x)):(rr&&O&&Od(s),s.flags|=1,an(n,s,d,x),s.child)}function Gg(n,s,l,d,x){if(n===null){var m=l.type;return typeof m=="function"&&!Rd(m)&&m.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=m,Vg(n,s,m,d,x)):(n=mc(l.type,null,d,s,s.mode,x),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Sf(n,x)){var T=m.memoizedProps;if(l=l.compare,l=l!==null?l:Po,l(T,d)&&n.ref===s.ref)return Wa(n,s,x)}return s.flags|=1,n=Ba(m,d),n.ref=s.ref,n.return=s,s.child=n}function Vg(n,s,l,d,x){if(n!==null){var m=n.memoizedProps;if(Po(m,d)&&n.ref===s.ref)if(Qr=!1,s.pendingProps=d=m,Sf(n,x))(n.flags&131072)!==0&&(Qr=!0);else return s.lanes=n.lanes,Wa(n,s,x)}return gf(n,s,l,d,x)}function Yg(n,s,l){var d=s.pendingProps,x=d.children,m=n!==null?n.memoizedState:null;if(d.mode==="hidden"){if((s.flags&128)!==0){if(d=m!==null?m.baseLanes|l:l,n!==null){for(x=s.child=n.child,m=0;x!==null;)m=m|x.lanes|x.childLanes,x=x.sibling;s.childLanes=m&~d}else s.childLanes=0,s.child=null;return Kg(n,s,d,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Sc(s,m!==null?m.cachePool:null),m!==null?Vp(s,m):Vd(),Bg(s);else return s.lanes=s.childLanes=536870912,Kg(n,s,m!==null?m.baseLanes|l:l,l)}else m!==null?(Sc(s,m.cachePool),Vp(s,m),fs(),s.memoizedState=null):(n!==null&&Sc(s,null),Vd(),fs());return an(n,s,x,l),s.child}function Kg(n,s,l,d){var x=Ud();return x=x===null?null:{parent:qr._currentValue,pool:x},s.memoizedState={baseLanes:l,cachePool:x},n!==null&&Sc(s,null),Vd(),Bg(s),n!==null&&qo(n,s,d,!0),null}function Pc(n,s){var l=s.ref;if(l===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(s.flags|=4194816)}}function gf(n,s,l,d,x){return Ks(s),l=Xd(n,s,l,d,void 0,x),d=Qd(),n!==null&&!Qr?(Jd(n,s,x),Wa(n,s,x)):(rr&&d&&Od(s),s.flags|=1,an(n,s,l,x),s.child)}function Xg(n,s,l,d,x,m){return Ks(s),s.updateQueue=null,l=Kp(s,d,l,x),Yp(n),d=Qd(),n!==null&&!Qr?(Jd(n,s,m),Wa(n,s,m)):(rr&&d&&Od(s),s.flags|=1,an(n,s,l,m),s.child)}function Qg(n,s,l,d,x){if(Ks(s),s.stateNode===null){var m=Ci,T=l.contextType;typeof T=="object"&&T!==null&&(m=pn(T)),m=new l(d,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=hf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=d,m.state=s.memoizedState,m.refs={},Hd(s),T=l.contextType,m.context=typeof T=="object"&&T!==null?pn(T):Ci,m.state=s.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(ff(s,l,T,d),m.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&hf.enqueueReplaceState(m,m.state,null),Qo(s,d,m,x),Xo(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(n===null){m=s.stateNode;var O=s.memoizedProps,J=Js(l,O);m.props=J;var be=m.context,Fe=l.contextType;T=Ci,typeof Fe=="object"&&Fe!==null&&(T=pn(Fe));var ze=l.getDerivedStateFromProps;Fe=typeof ze=="function"||typeof m.getSnapshotBeforeUpdate=="function",O=s.pendingProps!==O,Fe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(O||be!==T)&&Fg(s,m,d,T),os=!1;var Te=s.memoizedState;m.state=Te,Qo(s,d,m,x),Xo(),be=s.memoizedState,O||Te!==be||os?(typeof ze=="function"&&(ff(s,l,ze,d),be=s.memoizedState),(J=os||Mg(s,l,J,d,Te,be,T))?(Fe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=be),m.props=d,m.state=be,m.context=T,d=J):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{m=s.stateNode,qd(n,s),T=s.memoizedProps,Fe=Js(l,T),m.props=Fe,ze=s.pendingProps,Te=m.context,be=l.contextType,J=Ci,typeof be=="object"&&be!==null&&(J=pn(be)),O=l.getDerivedStateFromProps,(be=typeof O=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ze||Te!==J)&&Fg(s,m,d,J),os=!1,Te=s.memoizedState,m.state=Te,Qo(s,d,m,x),Xo();var Ee=s.memoizedState;T!==ze||Te!==Ee||os||n!==null&&n.dependencies!==null&&bc(n.dependencies)?(typeof O=="function"&&(ff(s,l,O,d),Ee=s.memoizedState),(Fe=os||Mg(s,l,Fe,d,Te,Ee,J)||n!==null&&n.dependencies!==null&&bc(n.dependencies))?(be||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(d,Ee,J),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(d,Ee,J)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===n.memoizedProps&&Te===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Te===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Ee),m.props=d,m.state=Ee,m.context=J,d=Fe):(typeof m.componentDidUpdate!="function"||T===n.memoizedProps&&Te===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Te===n.memoizedState||(s.flags|=1024),d=!1)}return m=d,Pc(n,s),d=(s.flags&128)!==0,m||d?(m=s.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&d?(s.child=Li(s,n.child,null,x),s.child=Li(s,null,l,x)):an(n,s,l,x),s.memoizedState=m.state,n=s.child):n=Wa(n,s,x),n}function Jg(n,s,l,d){return Wo(),s.flags|=256,an(n,s,l,d),s.child}var xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(n){return{baseLanes:n,cachePool:Pp()}}function yf(n,s,l){return n=n!==null?n.childLanes&~l:0,s&&(n|=na),n}function Zg(n,s,l){var d=s.pendingProps,x=!1,m=(s.flags&128)!==0,T;if((T=m)||(T=n!==null&&n.memoizedState===null?!1:($r.current&2)!==0),T&&(x=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,n===null){if(rr){if(x?ds(s):fs(),rr){var O=Rr,J;if(J=O){e:{for(J=O,O=Ea;J.nodeType!==8;){if(!O){O=null;break e}if(J=pa(J.nextSibling),J===null){O=null;break e}}O=J}O!==null?(s.memoizedState={dehydrated:O,treeContext:qs!==null?{id:Ma,overflow:Fa}:null,retryLane:536870912,hydrationErrors:null},J=Un(18,null,null,0),J.stateNode=O,J.return=s,s.child=J,Sn=s,Rr=null,J=!0):J=!1}J||Vs(s)}if(O=s.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return th(O)?s.lanes=32:s.lanes=536870912,null;Ua(s)}return O=d.children,d=d.fallback,x?(fs(),x=s.mode,O=zc({mode:"hidden",children:O},x),d=Hs(d,x,l,null),O.return=s,d.return=s,O.sibling=d,s.child=O,x=s.child,x.memoizedState=mf(l),x.childLanes=yf(n,T,l),s.memoizedState=xf,d):(ds(s),vf(s,O))}if(J=n.memoizedState,J!==null&&(O=J.dehydrated,O!==null)){if(m)s.flags&256?(ds(s),s.flags&=-257,s=bf(n,s,l)):s.memoizedState!==null?(fs(),s.child=n.child,s.flags|=128,s=null):(fs(),x=d.fallback,O=s.mode,d=zc({mode:"visible",children:d.children},O),x=Hs(x,O,l,null),x.flags|=2,d.return=s,x.return=s,d.sibling=x,s.child=d,Li(s,n.child,null,l),d=s.child,d.memoizedState=mf(l),d.childLanes=yf(n,T,l),s.memoizedState=xf,s=x);else if(ds(s),th(O)){if(T=O.nextSibling&&O.nextSibling.dataset,T)var be=T.dgst;T=be,d=Error(a(419)),d.stack="",d.digest=T,Ho({value:d,source:null,stack:null}),s=bf(n,s,l)}else if(Qr||qo(n,s,l,!1),T=(l&n.childLanes)!==0,Qr||T){if(T=_r,T!==null&&(d=l&-l,d=(d&42)!==0?1:Rt(d),d=(d&(T.suspendedLanes|l))!==0?0:d,d!==0&&d!==J.retryLane))throw J.retryLane=d,ji(n,d),Gn(T,n,d),qg;O.data==="$?"||Lf(),s=bf(n,s,l)}else O.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=J.treeContext,Rr=pa(O.nextSibling),Sn=s,rr=!0,Gs=null,Ea=!1,n!==null&&(ea[ta++]=Ma,ea[ta++]=Fa,ea[ta++]=qs,Ma=n.id,Fa=n.overflow,qs=s),s=vf(s,d.children),s.flags|=4096);return s}return x?(fs(),x=d.fallback,O=s.mode,J=n.child,be=J.sibling,d=Ba(J,{mode:"hidden",children:d.children}),d.subtreeFlags=J.subtreeFlags&65011712,be!==null?x=Ba(be,x):(x=Hs(x,O,l,null),x.flags|=2),x.return=s,d.return=s,d.sibling=x,s.child=d,d=x,x=s.child,O=n.child.memoizedState,O===null?O=mf(l):(J=O.cachePool,J!==null?(be=qr._currentValue,J=J.parent!==be?{parent:be,pool:be}:J):J=Pp(),O={baseLanes:O.baseLanes|l,cachePool:J}),x.memoizedState=O,x.childLanes=yf(n,T,l),s.memoizedState=xf,d):(ds(s),l=n.child,n=l.sibling,l=Ba(l,{mode:"visible",children:d.children}),l.return=s,l.sibling=null,n!==null&&(T=s.deletions,T===null?(s.deletions=[n],s.flags|=16):T.push(n)),s.child=l,s.memoizedState=null,l)}function vf(n,s){return s=zc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function zc(n,s){return n=Un(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function bf(n,s,l){return Li(s,n.child,null,l),n=vf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ex(n,s,l){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),Fd(n.return,s,l)}function _f(n,s,l,d,x){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:x}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=d,m.tail=l,m.tailMode=x)}function tx(n,s,l){var d=s.pendingProps,x=d.revealOrder,m=d.tail;if(an(n,s,d.children,l),d=$r.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ex(n,l,s);else if(n.tag===19)ex(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}switch(L($r,d),x){case"forwards":for(l=s.child,x=null;l!==null;)n=l.alternate,n!==null&&Mc(n)===null&&(x=l),l=l.sibling;l=x,l===null?(x=s.child,s.child=null):(x=l.sibling,l.sibling=null),_f(s,!1,x,l,m);break;case"backwards":for(l=null,x=s.child,s.child=null;x!==null;){if(n=x.alternate,n!==null&&Mc(n)===null){s.child=x;break}n=x.sibling,x.sibling=l,l=x,x=n}_f(s,!0,l,null,m);break;case"together":_f(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Wa(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),ms|=s.lanes,(l&s.childLanes)===0)if(n!==null){if(qo(n,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(a(153));if(s.child!==null){for(n=s.child,l=Ba(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=Ba(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function Sf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&bc(n)))}function G2(n,s,l){switch(s.tag){case 3:qe(s,s.stateNode.containerInfo),is(s,qr,n.memoizedState.cache),Wo();break;case 27:case 5:te(s);break;case 4:qe(s,s.stateNode.containerInfo);break;case 10:is(s,s.type,s.memoizedProps.value);break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(ds(s),s.flags|=128,null):(l&s.child.childLanes)!==0?Zg(n,s,l):(ds(s),n=Wa(n,s,l),n!==null?n.sibling:null);ds(s);break;case 19:var x=(n.flags&128)!==0;if(d=(l&s.childLanes)!==0,d||(qo(n,s,l,!1),d=(l&s.childLanes)!==0),x){if(d)return tx(n,s,l);s.flags|=128}if(x=s.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),L($r,$r.current),d)break;return null;case 22:case 23:return s.lanes=0,Yg(n,s,l);case 24:is(s,qr,n.memoizedState.cache)}return Wa(n,s,l)}function rx(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps)Qr=!0;else{if(!Sf(n,l)&&(s.flags&128)===0)return Qr=!1,G2(n,s,l);Qr=(n.flags&131072)!==0}else Qr=!1,rr&&(s.flags&1048576)!==0&&Np(s,vc,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var d=s.elementType,x=d._init;if(d=x(d._payload),s.type=d,typeof d=="function")Rd(d)?(n=Js(d,n),s.tag=1,s=Qg(null,s,d,n,l)):(s.tag=0,s=gf(null,s,d,n,l));else{if(d!=null){if(x=d.$$typeof,x===G){s.tag=11,s=$g(null,s,d,n,l);break e}else if(x===V){s.tag=14,s=Gg(null,s,d,n,l);break e}}throw s=re(d)||d,Error(a(306,s,""))}}return s;case 0:return gf(n,s,s.type,s.pendingProps,l);case 1:return d=s.type,x=Js(d,s.pendingProps),Qg(n,s,d,x,l);case 3:e:{if(qe(s,s.stateNode.containerInfo),n===null)throw Error(a(387));d=s.pendingProps;var m=s.memoizedState;x=m.element,qd(n,s),Qo(s,d,null,l);var T=s.memoizedState;if(d=T.cache,is(s,qr,d),d!==m.cache&&Ld(s,[qr],l,!0),Xo(),d=T.element,m.isDehydrated)if(m={element:d,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Jg(n,s,d,l);break e}else if(d!==x){x=Jn(Error(a(424)),s),Ho(x),s=Jg(n,s,d,l);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Rr=pa(n.firstChild),Sn=s,rr=!0,Gs=null,Ea=!0,l=Ig(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Wo(),d===x){s=Wa(n,s,l);break e}an(n,s,d,l)}s=s.child}return s;case 26:return Pc(n,s),n===null?(l=im(s.type,null,s.pendingProps,null))?s.memoizedState=l:rr||(l=s.type,n=s.pendingProps,d=eu(ge.current).createElement(l),d[jt]=s,d[fr]=n,on(d,l,n),fe(d),s.stateNode=d):s.memoizedState=im(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return te(s),n===null&&rr&&(d=s.stateNode=nm(s.type,s.pendingProps,ge.current),Sn=s,Ea=!0,x=Rr,_s(s.type)?(rh=x,Rr=pa(d.firstChild)):Rr=x),an(n,s,s.pendingProps.children,l),Pc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&rr&&((x=d=Rr)&&(d=b_(d,s.type,s.pendingProps,Ea),d!==null?(s.stateNode=d,Sn=s,Rr=pa(d.firstChild),Ea=!1,x=!0):x=!1),x||Vs(s)),te(s),x=s.type,m=s.pendingProps,T=n!==null?n.memoizedProps:null,d=m.children,Jf(x,m)?d=null:T!==null&&Jf(x,T)&&(s.flags|=32),s.memoizedState!==null&&(x=Xd(n,s,L2,null,null,l),vl._currentValue=x),Pc(n,s),an(n,s,d,l),s.child;case 6:return n===null&&rr&&((n=l=Rr)&&(l=__(l,s.pendingProps,Ea),l!==null?(s.stateNode=l,Sn=s,Rr=null,n=!0):n=!1),n||Vs(s)),null;case 13:return Zg(n,s,l);case 4:return qe(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=Li(s,null,d,l):an(n,s,d,l),s.child;case 11:return $g(n,s,s.type,s.pendingProps,l);case 7:return an(n,s,s.pendingProps,l),s.child;case 8:return an(n,s,s.pendingProps.children,l),s.child;case 12:return an(n,s,s.pendingProps.children,l),s.child;case 10:return d=s.pendingProps,is(s,s.type,d.value),an(n,s,d.children,l),s.child;case 9:return x=s.type._context,d=s.pendingProps.children,Ks(s),x=pn(x),d=d(x),s.flags|=1,an(n,s,d,l),s.child;case 14:return Gg(n,s,s.type,s.pendingProps,l);case 15:return Vg(n,s,s.type,s.pendingProps,l);case 19:return tx(n,s,l);case 31:return d=s.pendingProps,l=s.mode,d={mode:d.mode,children:d.children},n===null?(l=zc(d,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=Ba(n.child,d),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return Yg(n,s,l);case 24:return Ks(s),d=pn(qr),n===null?(x=Ud(),x===null&&(x=_r,m=Pd(),x.pooledCache=m,m.refCount++,m!==null&&(x.pooledCacheLanes|=l),x=m),s.memoizedState={parent:d,cache:x},Hd(s),is(s,qr,x)):((n.lanes&l)!==0&&(qd(n,s),Qo(s,null,null,l),Xo()),x=n.memoizedState,m=s.memoizedState,x.parent!==d?(x={parent:d,cache:d},s.memoizedState=x,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=x),is(s,qr,d)):(d=m.cache,is(s,qr,d),d!==x.cache&&Ld(s,[qr],l,!0))),an(n,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function Ha(n){n.flags|=4}function nx(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!dm(s)){if(s=ra.current,s!==null&&((Vt&4194048)===Vt?ka!==null:(Vt&62914560)!==Vt&&(Vt&536870912)===0||s!==ka))throw Yo=Wd,zp;n.flags|=8192}}function Uc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?ke():536870912,n.lanes|=s,Wi|=s)}function al(n,s){if(!rr)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ar(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(s)for(var x=n.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=n,x=x.sibling;else for(x=n.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=n,x=x.sibling;return n.subtreeFlags|=d,n.childLanes=l,s}function V2(n,s,l){var d=s.pendingProps;switch(Id(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(s),null;case 1:return Ar(s),null;case 3:return l=s.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),Pa(qr),Ce(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Uo(s)?Ha(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Bp())),Ar(s),null;case 26:return l=s.memoizedState,n===null?(Ha(s),l!==null?(Ar(s),nx(s,l)):(Ar(s),s.flags&=-16777217)):l?l!==n.memoizedState?(Ha(s),Ar(s),nx(s,l)):(Ar(s),s.flags&=-16777217):(n.memoizedProps!==d&&Ha(s),Ar(s),s.flags&=-16777217),null;case 27:Pe(s),l=ge.current;var x=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Ha(s);else{if(!d){if(s.stateNode===null)throw Error(a(166));return Ar(s),null}n=W.current,Uo(s)?Op(s):(n=nm(x,d,l),s.stateNode=n,Ha(s))}return Ar(s),null;case 5:if(Pe(s),l=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Ha(s);else{if(!d){if(s.stateNode===null)throw Error(a(166));return Ar(s),null}if(n=W.current,Uo(s))Op(s);else{switch(x=eu(ge.current),n){case 1:n=x.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:n=x.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":n=x.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":n=x.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof d.is=="string"?x.createElement("select",{is:d.is}):x.createElement("select"),d.multiple?n.multiple=!0:d.size&&(n.size=d.size);break;default:n=typeof d.is=="string"?x.createElement(l,{is:d.is}):x.createElement(l)}}n[jt]=s,n[fr]=d;e:for(x=s.child;x!==null;){if(x.tag===5||x.tag===6)n.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===s)break e;for(;x.sibling===null;){if(x.return===null||x.return===s)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}s.stateNode=n;e:switch(on(n,l,d),l){case"button":case"input":case"select":case"textarea":n=!!d.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ha(s)}}return Ar(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==d&&Ha(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(a(166));if(n=ge.current,Uo(s)){if(n=s.stateNode,l=s.memoizedProps,d=null,x=Sn,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}n[jt]=s,n=!!(n.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Xx(n.nodeValue,l)),n||Vs(s)}else n=eu(n).createTextNode(d),n[jt]=s,s.stateNode=n}return Ar(s),null;case 13:if(d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(x=Uo(s),d!==null&&d.dehydrated!==null){if(n===null){if(!x)throw Error(a(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(a(317));x[jt]=s}else Wo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ar(s),x=!1}else x=Bp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=x),x=!0;if(!x)return s.flags&256?(Ua(s),s):(Ua(s),null)}if(Ua(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=d!==null,n=n!==null&&n.memoizedState!==null,l){d=s.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool);var m=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(m=d.memoizedState.cachePool.pool),m!==x&&(d.flags|=2048)}return l!==n&&l&&(s.child.flags|=8192),Uc(s,s.updateQueue),Ar(s),null;case 4:return Ce(),n===null&&Vf(s.stateNode.containerInfo),Ar(s),null;case 10:return Pa(s.type),Ar(s),null;case 19:if(k($r),x=s.memoizedState,x===null)return Ar(s),null;if(d=(s.flags&128)!==0,m=x.rendering,m===null)if(d)al(x,!1);else{if(Dr!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Mc(n),m!==null){for(s.flags|=128,al(x,!1),n=m.updateQueue,s.updateQueue=n,Uc(s,n),s.subtreeFlags=0,n=l,l=s.child;l!==null;)Dp(l,n),l=l.sibling;return L($r,$r.current&1|2),s.child}n=n.sibling}x.tail!==null&&De()>qc&&(s.flags|=128,d=!0,al(x,!1),s.lanes=4194304)}else{if(!d)if(n=Mc(m),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,Uc(s,n),al(x,!0),x.tail===null&&x.tailMode==="hidden"&&!m.alternate&&!rr)return Ar(s),null}else 2*De()-x.renderingStartTime>qc&&l!==536870912&&(s.flags|=128,d=!0,al(x,!1),s.lanes=4194304);x.isBackwards?(m.sibling=s.child,s.child=m):(n=x.last,n!==null?n.sibling=m:s.child=m,x.last=m)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=De(),s.sibling=null,n=$r.current,L($r,d?n&1|2:n&1),s):(Ar(s),null);case 22:case 23:return Ua(s),Yd(),d=s.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(l&536870912)!==0&&(s.flags&128)===0&&(Ar(s),s.subtreeFlags&6&&(s.flags|=8192)):Ar(s),l=s.updateQueue,l!==null&&Uc(s,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==l&&(s.flags|=2048),n!==null&&k(Xs),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Pa(qr),Ar(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function Y2(n,s){switch(Id(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Pa(qr),Ce(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Pe(s),null;case 13:if(Ua(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Wo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return k($r),null;case 4:return Ce(),null;case 10:return Pa(s.type),null;case 22:case 23:return Ua(s),Yd(),n!==null&&k(Xs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Pa(qr),null;case 25:return null;default:return null}}function ax(n,s){switch(Id(s),s.tag){case 3:Pa(qr),Ce();break;case 26:case 27:case 5:Pe(s);break;case 4:Ce();break;case 13:Ua(s);break;case 19:k($r);break;case 10:Pa(s.type);break;case 22:case 23:Ua(s),Yd(),n!==null&&k(Xs);break;case 24:Pa(qr)}}function sl(n,s){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var x=d.next;l=x;do{if((l.tag&n)===n){d=void 0;var m=l.create,T=l.inst;d=m(),T.destroy=d}l=l.next}while(l!==x)}}catch(O){vr(s,s.return,O)}}function hs(n,s,l){try{var d=s.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var m=x.next;d=m;do{if((d.tag&n)===n){var T=d.inst,O=T.destroy;if(O!==void 0){T.destroy=void 0,x=s;var J=l,be=O;try{be()}catch(Fe){vr(x,J,Fe)}}}d=d.next}while(d!==m)}}catch(Fe){vr(s,s.return,Fe)}}function sx(n){var s=n.updateQueue;if(s!==null){var l=n.stateNode;try{Gp(s,l)}catch(d){vr(n,n.return,d)}}}function ix(n,s,l){l.props=Js(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(d){vr(n,s,d)}}function il(n,s){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof l=="function"?n.refCleanup=l(d):l.current=d}}catch(x){vr(n,s,x)}}function ja(n,s){var l=n.ref,d=n.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(x){vr(n,s,x)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(x){vr(n,s,x)}else l.current=null}function ox(n){var s=n.type,l=n.memoizedProps,d=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(x){vr(n,n.return,x)}}function wf(n,s,l){try{var d=n.stateNode;g_(d,n.type,l,s),d[fr]=s}catch(x){vr(n,n.return,x)}}function lx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&_s(n.type)||n.tag===4}function Tf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&_s(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ef(n,s,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(n),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Zc));else if(d!==4&&(d===27&&_s(n.type)&&(l=n.stateNode,s=null),n=n.child,n!==null))for(Ef(n,s,l),n=n.sibling;n!==null;)Ef(n,s,l),n=n.sibling}function Wc(n,s,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(d!==4&&(d===27&&_s(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Wc(n,s,l),n=n.sibling;n!==null;)Wc(n,s,l),n=n.sibling}function cx(n){var s=n.stateNode,l=n.memoizedProps;try{for(var d=n.type,x=s.attributes;x.length;)s.removeAttributeNode(x[0]);on(s,d,l),s[jt]=n,s[fr]=l}catch(m){vr(n,n.return,m)}}var qa=!1,Lr=!1,kf=!1,ux=typeof WeakSet=="function"?WeakSet:Set,Jr=null;function K2(n,s){if(n=n.containerInfo,Xf=iu,n=_p(n),wd(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var x=d.anchorOffset,m=d.focusNode;d=d.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var T=0,O=-1,J=-1,be=0,Fe=0,ze=n,Te=null;t:for(;;){for(var Ee;ze!==l||x!==0&&ze.nodeType!==3||(O=T+x),ze!==m||d!==0&&ze.nodeType!==3||(J=T+d),ze.nodeType===3&&(T+=ze.nodeValue.length),(Ee=ze.firstChild)!==null;)Te=ze,ze=Ee;for(;;){if(ze===n)break t;if(Te===l&&++be===x&&(O=T),Te===m&&++Fe===d&&(J=T),(Ee=ze.nextSibling)!==null)break;ze=Te,Te=ze.parentNode}ze=Ee}l=O===-1||J===-1?null:{start:O,end:J}}else l=null}l=l||{start:0,end:0}}else l=null;for(Qf={focusedElem:n,selectionRange:l},iu=!1,Jr=s;Jr!==null;)if(s=Jr,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Jr=n;else for(;Jr!==null;){switch(s=Jr,m=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,l=s,x=m.memoizedProps,m=m.memoizedState,d=l.stateNode;try{var Et=Js(l.type,x,l.elementType===l.type);n=d.getSnapshotBeforeUpdate(Et,m),d.__reactInternalSnapshotBeforeUpdate=n}catch(_t){vr(l,l.return,_t)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,l=n.nodeType,l===9)eh(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":eh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=s.sibling,n!==null){n.return=s.return,Jr=n;break}Jr=s.return}}function dx(n,s,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:ps(n,l),d&4&&sl(5,l);break;case 1:if(ps(n,l),d&4)if(n=l.stateNode,s===null)try{n.componentDidMount()}catch(T){vr(l,l.return,T)}else{var x=Js(l.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(x,s,n.__reactInternalSnapshotBeforeUpdate)}catch(T){vr(l,l.return,T)}}d&64&&sx(l),d&512&&il(l,l.return);break;case 3:if(ps(n,l),d&64&&(n=l.updateQueue,n!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Gp(n,s)}catch(T){vr(l,l.return,T)}}break;case 27:s===null&&d&4&&cx(l);case 26:case 5:ps(n,l),s===null&&d&4&&ox(l),d&512&&il(l,l.return);break;case 12:ps(n,l);break;case 13:ps(n,l),d&4&&px(n,l),d&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=a_.bind(null,l),S_(n,l))));break;case 22:if(d=l.memoizedState!==null||qa,!d){s=s!==null&&s.memoizedState!==null||Lr,x=qa;var m=Lr;qa=d,(Lr=s)&&!m?gs(n,l,(l.subtreeFlags&8772)!==0):ps(n,l),qa=x,Lr=m}break;case 30:break;default:ps(n,l)}}function fx(n){var s=n.alternate;s!==null&&(n.alternate=null,fx(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&F(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var kr=null,On=!1;function $a(n,s,l){for(l=l.child;l!==null;)hx(n,s,l),l=l.sibling}function hx(n,s,l){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(mr,l)}catch{}switch(l.tag){case 26:Lr||ja(l,s),$a(n,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Lr||ja(l,s);var d=kr,x=On;_s(l.type)&&(kr=l.stateNode,On=!1),$a(n,s,l),gl(l.stateNode),kr=d,On=x;break;case 5:Lr||ja(l,s);case 6:if(d=kr,x=On,kr=null,$a(n,s,l),kr=d,On=x,kr!==null)if(On)try{(kr.nodeType===9?kr.body:kr.nodeName==="HTML"?kr.ownerDocument.body:kr).removeChild(l.stateNode)}catch(m){vr(l,s,m)}else try{kr.removeChild(l.stateNode)}catch(m){vr(l,s,m)}break;case 18:kr!==null&&(On?(n=kr,tm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),wl(n)):tm(kr,l.stateNode));break;case 4:d=kr,x=On,kr=l.stateNode.containerInfo,On=!0,$a(n,s,l),kr=d,On=x;break;case 0:case 11:case 14:case 15:Lr||hs(2,l,s),Lr||hs(4,l,s),$a(n,s,l);break;case 1:Lr||(ja(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"&&ix(l,s,d)),$a(n,s,l);break;case 21:$a(n,s,l);break;case 22:Lr=(d=Lr)||l.memoizedState!==null,$a(n,s,l),Lr=d;break;default:$a(n,s,l)}}function px(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{wl(n)}catch(l){vr(s,s.return,l)}}function X2(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new ux),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new ux),s;default:throw Error(a(435,n.tag))}}function jf(n,s){var l=X2(n);s.forEach(function(d){var x=s_.bind(null,n,d);l.has(d)||(l.add(d),d.then(x,x))})}function Wn(n,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var x=l[d],m=n,T=s,O=T;e:for(;O!==null;){switch(O.tag){case 27:if(_s(O.type)){kr=O.stateNode,On=!1;break e}break;case 5:kr=O.stateNode,On=!1;break e;case 3:case 4:kr=O.stateNode.containerInfo,On=!0;break e}O=O.return}if(kr===null)throw Error(a(160));hx(m,T,x),kr=null,On=!1,m=x.alternate,m!==null&&(m.return=null),x.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)gx(s,n),s=s.sibling}var ha=null;function gx(n,s){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Wn(s,n),Hn(n),d&4&&(hs(3,n,n.return),sl(3,n),hs(5,n,n.return));break;case 1:Wn(s,n),Hn(n),d&512&&(Lr||l===null||ja(l,l.return)),d&64&&qa&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var x=ha;if(Wn(s,n),Hn(n),d&512&&(Lr||l===null||ja(l,l.return)),d&4){var m=l!==null?l.memoizedState:null;if(d=n.memoizedState,l===null)if(d===null)if(n.stateNode===null){e:{d=n.type,l=n.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":m=x.getElementsByTagName("title")[0],(!m||m[B]||m[jt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=x.createElement(d),x.head.insertBefore(m,x.querySelector("head > title"))),on(m,d,l),m[jt]=n,fe(m),d=m;break e;case"link":var T=cm("link","href",x).get(d+(l.href||""));if(T){for(var O=0;O<T.length;O++)if(m=T[O],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(O,1);break t}}m=x.createElement(d),on(m,d,l),x.head.appendChild(m);break;case"meta":if(T=cm("meta","content",x).get(d+(l.content||""))){for(O=0;O<T.length;O++)if(m=T[O],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(O,1);break t}}m=x.createElement(d),on(m,d,l),x.head.appendChild(m);break;default:throw Error(a(468,d))}m[jt]=n,fe(m),d=m}n.stateNode=d}else um(x,n.type,n.stateNode);else n.stateNode=lm(x,d,n.memoizedProps);else m!==d?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,d===null?um(x,n.type,n.stateNode):lm(x,d,n.memoizedProps)):d===null&&n.stateNode!==null&&wf(n,n.memoizedProps,l.memoizedProps)}break;case 27:Wn(s,n),Hn(n),d&512&&(Lr||l===null||ja(l,l.return)),l!==null&&d&4&&wf(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Wn(s,n),Hn(n),d&512&&(Lr||l===null||ja(l,l.return)),n.flags&32){x=n.stateNode;try{ct(x,"")}catch(Ee){vr(n,n.return,Ee)}}d&4&&n.stateNode!=null&&(x=n.memoizedProps,wf(n,x,l!==null?l.memoizedProps:x)),d&1024&&(kf=!0);break;case 6:if(Wn(s,n),Hn(n),d&4){if(n.stateNode===null)throw Error(a(162));d=n.memoizedProps,l=n.stateNode;try{l.nodeValue=d}catch(Ee){vr(n,n.return,Ee)}}break;case 3:if(nu=null,x=ha,ha=tu(s.containerInfo),Wn(s,n),ha=x,Hn(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{wl(s.containerInfo)}catch(Ee){vr(n,n.return,Ee)}kf&&(kf=!1,xx(n));break;case 4:d=ha,ha=tu(n.stateNode.containerInfo),Wn(s,n),Hn(n),ha=d;break;case 12:Wn(s,n),Hn(n);break;case 13:Wn(s,n),Hn(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Of=De()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,jf(n,d)));break;case 22:x=n.memoizedState!==null;var J=l!==null&&l.memoizedState!==null,be=qa,Fe=Lr;if(qa=be||x,Lr=Fe||J,Wn(s,n),Lr=Fe,qa=be,Hn(n),d&8192)e:for(s=n.stateNode,s._visibility=x?s._visibility&-2:s._visibility|1,x&&(l===null||J||qa||Lr||Zs(n)),l=null,s=n;;){if(s.tag===5||s.tag===26){if(l===null){J=l=s;try{if(m=J.stateNode,x)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{O=J.stateNode;var ze=J.memoizedProps.style,Te=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;O.style.display=Te==null||typeof Te=="boolean"?"":(""+Te).trim()}}catch(Ee){vr(J,J.return,Ee)}}}else if(s.tag===6){if(l===null){J=s;try{J.stateNode.nodeValue=x?"":J.memoizedProps}catch(Ee){vr(J,J.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=n.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,jf(n,l))));break;case 19:Wn(s,n),Hn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,jf(n,d)));break;case 30:break;case 21:break;default:Wn(s,n),Hn(n)}}function Hn(n){var s=n.flags;if(s&2){try{for(var l,d=n.return;d!==null;){if(lx(d)){l=d;break}d=d.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var x=l.stateNode,m=Tf(n);Wc(n,m,x);break;case 5:var T=l.stateNode;l.flags&32&&(ct(T,""),l.flags&=-33);var O=Tf(n);Wc(n,O,T);break;case 3:case 4:var J=l.stateNode.containerInfo,be=Tf(n);Ef(n,be,J);break;default:throw Error(a(161))}}catch(Fe){vr(n,n.return,Fe)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function xx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;xx(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ps(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)dx(n,s.alternate,s),s=s.sibling}function Zs(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:hs(4,s,s.return),Zs(s);break;case 1:ja(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&ix(s,s.return,l),Zs(s);break;case 27:gl(s.stateNode);case 26:case 5:ja(s,s.return),Zs(s);break;case 22:s.memoizedState===null&&Zs(s);break;case 30:Zs(s);break;default:Zs(s)}n=n.sibling}}function gs(n,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,x=n,m=s,T=m.flags;switch(m.tag){case 0:case 11:case 15:gs(x,m,l),sl(4,m);break;case 1:if(gs(x,m,l),d=m,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(be){vr(d,d.return,be)}if(d=m,x=d.updateQueue,x!==null){var O=d.stateNode;try{var J=x.shared.hiddenCallbacks;if(J!==null)for(x.shared.hiddenCallbacks=null,x=0;x<J.length;x++)$p(J[x],O)}catch(be){vr(d,d.return,be)}}l&&T&64&&sx(m),il(m,m.return);break;case 27:cx(m);case 26:case 5:gs(x,m,l),l&&d===null&&T&4&&ox(m),il(m,m.return);break;case 12:gs(x,m,l);break;case 13:gs(x,m,l),l&&T&4&&px(x,m);break;case 22:m.memoizedState===null&&gs(x,m,l),il(m,m.return);break;case 30:break;default:gs(x,m,l)}s=s.sibling}}function Cf(n,s){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&$o(l))}function Af(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&$o(n))}function Ca(n,s,l,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)mx(n,s,l,d),s=s.sibling}function mx(n,s,l,d){var x=s.flags;switch(s.tag){case 0:case 11:case 15:Ca(n,s,l,d),x&2048&&sl(9,s);break;case 1:Ca(n,s,l,d);break;case 3:Ca(n,s,l,d),x&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&$o(n)));break;case 12:if(x&2048){Ca(n,s,l,d),n=s.stateNode;try{var m=s.memoizedProps,T=m.id,O=m.onPostCommit;typeof O=="function"&&O(T,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(J){vr(s,s.return,J)}}else Ca(n,s,l,d);break;case 13:Ca(n,s,l,d);break;case 23:break;case 22:m=s.stateNode,T=s.alternate,s.memoizedState!==null?m._visibility&2?Ca(n,s,l,d):ol(n,s):m._visibility&2?Ca(n,s,l,d):(m._visibility|=2,Pi(n,s,l,d,(s.subtreeFlags&10256)!==0)),x&2048&&Cf(T,s);break;case 24:Ca(n,s,l,d),x&2048&&Af(s.alternate,s);break;default:Ca(n,s,l,d)}}function Pi(n,s,l,d,x){for(x=x&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=n,T=s,O=l,J=d,be=T.flags;switch(T.tag){case 0:case 11:case 15:Pi(m,T,O,J,x),sl(8,T);break;case 23:break;case 22:var Fe=T.stateNode;T.memoizedState!==null?Fe._visibility&2?Pi(m,T,O,J,x):ol(m,T):(Fe._visibility|=2,Pi(m,T,O,J,x)),x&&be&2048&&Cf(T.alternate,T);break;case 24:Pi(m,T,O,J,x),x&&be&2048&&Af(T.alternate,T);break;default:Pi(m,T,O,J,x)}s=s.sibling}}function ol(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=n,d=s,x=d.flags;switch(d.tag){case 22:ol(l,d),x&2048&&Cf(d.alternate,d);break;case 24:ol(l,d),x&2048&&Af(d.alternate,d);break;default:ol(l,d)}s=s.sibling}}var ll=8192;function zi(n){if(n.subtreeFlags&ll)for(n=n.child;n!==null;)yx(n),n=n.sibling}function yx(n){switch(n.tag){case 26:zi(n),n.flags&ll&&n.memoizedState!==null&&B_(ha,n.memoizedState,n.memoizedProps);break;case 5:zi(n);break;case 3:case 4:var s=ha;ha=tu(n.stateNode.containerInfo),zi(n),ha=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=ll,ll=16777216,zi(n),ll=s):zi(n));break;default:zi(n)}}function vx(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function cl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];Jr=d,_x(d,n)}vx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)bx(n),n=n.sibling}function bx(n){switch(n.tag){case 0:case 11:case 15:cl(n),n.flags&2048&&hs(9,n,n.return);break;case 3:cl(n);break;case 12:cl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Hc(n)):cl(n);break;default:cl(n)}}function Hc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];Jr=d,_x(d,n)}vx(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:hs(8,s,s.return),Hc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Hc(s));break;default:Hc(s)}n=n.sibling}}function _x(n,s){for(;Jr!==null;){var l=Jr;switch(l.tag){case 0:case 11:case 15:hs(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:$o(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Jr=d;else e:for(l=n;Jr!==null;){d=Jr;var x=d.sibling,m=d.return;if(fx(d),d===l){Jr=null;break e}if(x!==null){x.return=m,Jr=x;break e}Jr=m}}}var Q2={getCacheForType:function(n){var s=pn(qr),l=s.data.get(n);return l===void 0&&(l=n(),s.data.set(n,l)),l}},J2=typeof WeakMap=="function"?WeakMap:Map,ir=0,_r=null,Wt=null,Vt=0,or=0,qn=null,xs=!1,Ui=!1,Rf=!1,Ga=0,Dr=0,ms=0,ei=0,Df=0,na=0,Wi=0,ul=null,In=null,Nf=!1,Of=0,qc=1/0,$c=null,ys=null,sn=0,vs=null,Hi=null,qi=0,If=0,Bf=null,Sx=null,dl=0,Mf=null;function $n(){if((ir&2)!==0&&Vt!==0)return Vt&-Vt;if(ne.T!==null){var n=Di;return n!==0?n:Hf()}return wr()}function wx(){na===0&&(na=(Vt&536870912)===0||rr?ae():536870912);var n=ra.current;return n!==null&&(n.flags|=32),na}function Gn(n,s,l){(n===_r&&(or===2||or===9)||n.cancelPendingCommit!==null)&&($i(n,0),bs(n,Vt,na,!1)),Ct(n,l),((ir&2)===0||n!==_r)&&(n===_r&&((ir&2)===0&&(ei|=l),Dr===4&&bs(n,Vt,na,!1)),Aa(n))}function Tx(n,s,l){if((ir&6)!==0)throw Error(a(327));var d=!l&&(s&124)===0&&(s&n.expiredLanes)===0||Ut(n,s),x=d?t_(n,s):Pf(n,s,!0),m=d;do{if(x===0){Ui&&!d&&bs(n,s,0,!1);break}else{if(l=n.current.alternate,m&&!Z2(l)){x=Pf(n,s,!1),m=!1;continue}if(x===2){if(m=s,n.errorRecoveryDisabledLanes&m)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var O=n;x=ul;var J=O.current.memoizedState.isDehydrated;if(J&&($i(O,T).flags|=256),T=Pf(O,T,!1),T!==2){if(Rf&&!J){O.errorRecoveryDisabledLanes|=m,ei|=m,x=4;break e}m=In,In=x,m!==null&&(In===null?In=m:In.push.apply(In,m))}x=T}if(m=!1,x!==2)continue}}if(x===1){$i(n,0),bs(n,s,0,!0);break}e:{switch(d=n,m=x,m){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:bs(d,s,na,!xs);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(x=Of+300-De(),10<x)){if(bs(d,s,na,!xs),Cr(d,0,!0)!==0)break e;d.timeoutHandle=Zx(Ex.bind(null,d,l,In,$c,Nf,s,na,ei,Wi,xs,m,2,-0,0),x);break e}Ex(d,l,In,$c,Nf,s,na,ei,Wi,xs,m,0,-0,0)}}break}while(!0);Aa(n)}function Ex(n,s,l,d,x,m,T,O,J,be,Fe,ze,Te,Ee){if(n.timeoutHandle=-1,ze=s.subtreeFlags,(ze&8192||(ze&16785408)===16785408)&&(yl={stylesheets:null,count:0,unsuspend:I_},yx(s),ze=M_(),ze!==null)){n.cancelPendingCommit=ze(Nx.bind(null,n,s,m,l,d,x,T,O,J,Fe,1,Te,Ee)),bs(n,m,T,!be);return}Nx(n,s,m,l,d,x,T,O,J)}function Z2(n){for(var s=n;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var x=l[d],m=x.getSnapshot;x=x.value;try{if(!zn(m(),x))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bs(n,s,l,d){s&=~Df,s&=~ei,n.suspendedLanes|=s,n.pingedLanes&=~s,d&&(n.warmLanes|=s),d=n.expirationTimes;for(var x=s;0<x;){var m=31-$e(x),T=1<<m;d[m]=-1,x&=~T}l!==0&&at(n,l,s)}function Gc(){return(ir&6)===0?(fl(0),!1):!0}function Ff(){if(Wt!==null){if(or===0)var n=Wt.return;else n=Wt,La=Ys=null,Zd(n),Fi=null,rl=0,n=Wt;for(;n!==null;)ax(n.alternate,n),n=n.return;Wt=null}}function $i(n,s){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,m_(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Ff(),_r=n,Wt=l=Ba(n.current,null),Vt=s,or=0,qn=null,xs=!1,Ui=Ut(n,s),Rf=!1,Wi=na=Df=ei=ms=Dr=0,In=ul=null,Nf=!1,(s&8)!==0&&(s|=s&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=s;0<d;){var x=31-$e(d),m=1<<x;s|=n[x],d&=~m}return Ga=s,pc(),l}function kx(n,s){Lt=null,ne.H=Oc,s===Vo||s===wc?(s=Hp(),or=3):s===zp?(s=Hp(),or=4):or=s===qg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,qn=s,Wt===null&&(Dr=1,Lc(n,Jn(s,n.current)))}function jx(){var n=ne.H;return ne.H=Oc,n===null?Oc:n}function Cx(){var n=ne.A;return ne.A=Q2,n}function Lf(){Dr=4,xs||(Vt&4194048)!==Vt&&ra.current!==null||(Ui=!0),(ms&134217727)===0&&(ei&134217727)===0||_r===null||bs(_r,Vt,na,!1)}function Pf(n,s,l){var d=ir;ir|=2;var x=jx(),m=Cx();(_r!==n||Vt!==s)&&($c=null,$i(n,s)),s=!1;var T=Dr;e:do try{if(or!==0&&Wt!==null){var O=Wt,J=qn;switch(or){case 8:Ff(),T=6;break e;case 3:case 2:case 9:case 6:ra.current===null&&(s=!0);var be=or;if(or=0,qn=null,Gi(n,O,J,be),l&&Ui){T=0;break e}break;default:be=or,or=0,qn=null,Gi(n,O,J,be)}}e_(),T=Dr;break}catch(Fe){kx(n,Fe)}while(!0);return s&&n.shellSuspendCounter++,La=Ys=null,ir=d,ne.H=x,ne.A=m,Wt===null&&(_r=null,Vt=0,pc()),T}function e_(){for(;Wt!==null;)Ax(Wt)}function t_(n,s){var l=ir;ir|=2;var d=jx(),x=Cx();_r!==n||Vt!==s?($c=null,qc=De()+500,$i(n,s)):Ui=Ut(n,s);e:do try{if(or!==0&&Wt!==null){s=Wt;var m=qn;t:switch(or){case 1:or=0,qn=null,Gi(n,s,m,1);break;case 2:case 9:if(Up(m)){or=0,qn=null,Rx(s);break}s=function(){or!==2&&or!==9||_r!==n||(or=7),Aa(n)},m.then(s,s);break e;case 3:or=7;break e;case 4:or=5;break e;case 7:Up(m)?(or=0,qn=null,Rx(s)):(or=0,qn=null,Gi(n,s,m,7));break;case 5:var T=null;switch(Wt.tag){case 26:T=Wt.memoizedState;case 5:case 27:var O=Wt;if(!T||dm(T)){or=0,qn=null;var J=O.sibling;if(J!==null)Wt=J;else{var be=O.return;be!==null?(Wt=be,Vc(be)):Wt=null}break t}}or=0,qn=null,Gi(n,s,m,5);break;case 6:or=0,qn=null,Gi(n,s,m,6);break;case 8:Ff(),Dr=6;break e;default:throw Error(a(462))}}r_();break}catch(Fe){kx(n,Fe)}while(!0);return La=Ys=null,ne.H=d,ne.A=x,ir=l,Wt!==null?0:(_r=null,Vt=0,pc(),Dr)}function r_(){for(;Wt!==null&&!Re();)Ax(Wt)}function Ax(n){var s=rx(n.alternate,n,Ga);n.memoizedProps=n.pendingProps,s===null?Vc(n):Wt=s}function Rx(n){var s=n,l=s.alternate;switch(s.tag){case 15:case 0:s=Xg(l,s,s.pendingProps,s.type,void 0,Vt);break;case 11:s=Xg(l,s,s.pendingProps,s.type.render,s.ref,Vt);break;case 5:Zd(s);default:ax(l,s),s=Wt=Dp(s,Ga),s=rx(l,s,Ga)}n.memoizedProps=n.pendingProps,s===null?Vc(n):Wt=s}function Gi(n,s,l,d){La=Ys=null,Zd(s),Fi=null,rl=0;var x=s.return;try{if($2(n,x,s,l,Vt)){Dr=1,Lc(n,Jn(l,n.current)),Wt=null;return}}catch(m){if(x!==null)throw Wt=x,m;Dr=1,Lc(n,Jn(l,n.current)),Wt=null;return}s.flags&32768?(rr||d===1?n=!0:Ui||(Vt&536870912)!==0?n=!1:(xs=n=!0,(d===2||d===9||d===3||d===6)&&(d=ra.current,d!==null&&d.tag===13&&(d.flags|=16384))),Dx(s,n)):Vc(s)}function Vc(n){var s=n;do{if((s.flags&32768)!==0){Dx(s,xs);return}n=s.return;var l=V2(s.alternate,s,Ga);if(l!==null){Wt=l;return}if(s=s.sibling,s!==null){Wt=s;return}Wt=s=n}while(s!==null);Dr===0&&(Dr=5)}function Dx(n,s){do{var l=Y2(n.alternate,n);if(l!==null){l.flags&=32767,Wt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(n=n.sibling,n!==null)){Wt=n;return}Wt=n=l}while(n!==null);Dr=6,Wt=null}function Nx(n,s,l,d,x,m,T,O,J){n.cancelPendingCommit=null;do Yc();while(sn!==0);if((ir&6)!==0)throw Error(a(327));if(s!==null){if(s===n.current)throw Error(a(177));if(m=s.lanes|s.childLanes,m|=Cd,tr(n,l,m,T,O,J),n===_r&&(Wt=_r=null,Vt=0),Hi=s,vs=n,qi=l,If=m,Bf=x,Sx=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,i_(mt,function(){return Fx(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=ne.T,ne.T=null,x=ve.p,ve.p=2,T=ir,ir|=4;try{K2(n,s,l)}finally{ir=T,ve.p=x,ne.T=d}}sn=1,Ox(),Ix(),Bx()}}function Ox(){if(sn===1){sn=0;var n=vs,s=Hi,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null;var d=ve.p;ve.p=2;var x=ir;ir|=4;try{gx(s,n);var m=Qf,T=_p(n.containerInfo),O=m.focusedElem,J=m.selectionRange;if(T!==O&&O&&O.ownerDocument&&bp(O.ownerDocument.documentElement,O)){if(J!==null&&wd(O)){var be=J.start,Fe=J.end;if(Fe===void 0&&(Fe=be),"selectionStart"in O)O.selectionStart=be,O.selectionEnd=Math.min(Fe,O.value.length);else{var ze=O.ownerDocument||document,Te=ze&&ze.defaultView||window;if(Te.getSelection){var Ee=Te.getSelection(),Et=O.textContent.length,_t=Math.min(J.start,Et),gr=J.end===void 0?_t:Math.min(J.end,Et);!Ee.extend&&_t>gr&&(T=gr,gr=_t,_t=T);var de=vp(O,_t),se=vp(O,gr);if(de&&se&&(Ee.rangeCount!==1||Ee.anchorNode!==de.node||Ee.anchorOffset!==de.offset||Ee.focusNode!==se.node||Ee.focusOffset!==se.offset)){var me=ze.createRange();me.setStart(de.node,de.offset),Ee.removeAllRanges(),_t>gr?(Ee.addRange(me),Ee.extend(se.node,se.offset)):(me.setEnd(se.node,se.offset),Ee.addRange(me))}}}}for(ze=[],Ee=O;Ee=Ee.parentNode;)Ee.nodeType===1&&ze.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ze.length;O++){var Le=ze[O];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}iu=!!Xf,Qf=Xf=null}finally{ir=x,ve.p=d,ne.T=l}}n.current=s,sn=2}}function Ix(){if(sn===2){sn=0;var n=vs,s=Hi,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=ne.T,ne.T=null;var d=ve.p;ve.p=2;var x=ir;ir|=4;try{dx(n,s.alternate,s)}finally{ir=x,ve.p=d,ne.T=l}}sn=3}}function Bx(){if(sn===4||sn===3){sn=0,nt();var n=vs,s=Hi,l=qi,d=Sx;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?sn=5:(sn=0,Hi=vs=null,Mx(n,n.pendingLanes));var x=n.pendingLanes;if(x===0&&(ys=null),yn(l),s=s.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(mr,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=ne.T,x=ve.p,ve.p=2,ne.T=null;try{for(var m=n.onRecoverableError,T=0;T<d.length;T++){var O=d[T];m(O.value,{componentStack:O.stack})}}finally{ne.T=s,ve.p=x}}(qi&3)!==0&&Yc(),Aa(n),x=n.pendingLanes,(l&4194090)!==0&&(x&42)!==0?n===Mf?dl++:(dl=0,Mf=n):dl=0,fl(0)}}function Mx(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,$o(s)))}function Yc(n){return Ox(),Ix(),Bx(),Fx()}function Fx(){if(sn!==5)return!1;var n=vs,s=If;If=0;var l=yn(qi),d=ne.T,x=ve.p;try{ve.p=32>l?32:l,ne.T=null,l=Bf,Bf=null;var m=vs,T=qi;if(sn=0,Hi=vs=null,qi=0,(ir&6)!==0)throw Error(a(331));var O=ir;if(ir|=4,bx(m.current),mx(m,m.current,T,l),ir=O,fl(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(mr,m)}catch{}return!0}finally{ve.p=x,ne.T=d,Mx(n,s)}}function Lx(n,s,l){s=Jn(l,s),s=pf(n.stateNode,s,2),n=cs(n,s,2),n!==null&&(Ct(n,2),Aa(n))}function vr(n,s,l){if(n.tag===3)Lx(n,n,l);else for(;s!==null;){if(s.tag===3){Lx(s,n,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ys===null||!ys.has(d))){n=Jn(l,n),l=Wg(2),d=cs(s,l,2),d!==null&&(Hg(l,d,s,n),Ct(d,2),Aa(d));break}}s=s.return}}function zf(n,s,l){var d=n.pingCache;if(d===null){d=n.pingCache=new J2;var x=new Set;d.set(s,x)}else x=d.get(s),x===void 0&&(x=new Set,d.set(s,x));x.has(l)||(Rf=!0,x.add(l),n=n_.bind(null,n,s,l),s.then(n,n))}function n_(n,s,l){var d=n.pingCache;d!==null&&d.delete(s),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,_r===n&&(Vt&l)===l&&(Dr===4||Dr===3&&(Vt&62914560)===Vt&&300>De()-Of?(ir&2)===0&&$i(n,0):Df|=l,Wi===Vt&&(Wi=0)),Aa(n)}function Px(n,s){s===0&&(s=ke()),n=ji(n,s),n!==null&&(Ct(n,s),Aa(n))}function a_(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),Px(n,l)}function s_(n,s){var l=0;switch(n.tag){case 13:var d=n.stateNode,x=n.memoizedState;x!==null&&(l=x.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(a(314))}d!==null&&d.delete(s),Px(n,l)}function i_(n,s){return tt(n,s)}var Kc=null,Vi=null,Uf=!1,Xc=!1,Wf=!1,ti=0;function Aa(n){n!==Vi&&n.next===null&&(Vi===null?Kc=Vi=n:Vi=Vi.next=n),Xc=!0,Uf||(Uf=!0,l_())}function fl(n,s){if(!Wf&&Xc){Wf=!0;do for(var l=!1,d=Kc;d!==null;){if(n!==0){var x=d.pendingLanes;if(x===0)var m=0;else{var T=d.suspendedLanes,O=d.pingedLanes;m=(1<<31-$e(42|n)+1)-1,m&=x&~(T&~O),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Hx(d,m))}else m=Vt,m=Cr(d,d===_r?m:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(m&3)===0||Ut(d,m)||(l=!0,Hx(d,m));d=d.next}while(l);Wf=!1}}function o_(){zx()}function zx(){Xc=Uf=!1;var n=0;ti!==0&&(x_()&&(n=ti),ti=0);for(var s=De(),l=null,d=Kc;d!==null;){var x=d.next,m=Ux(d,s);m===0?(d.next=null,l===null?Kc=x:l.next=x,x===null&&(Vi=l)):(l=d,(n!==0||(m&3)!==0)&&(Xc=!0)),d=x}fl(n)}function Ux(n,s){for(var l=n.suspendedLanes,d=n.pingedLanes,x=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var T=31-$e(m),O=1<<T,J=x[T];J===-1?((O&l)===0||(O&d)!==0)&&(x[T]=ar(O,s)):J<=s&&(n.expiredLanes|=O),m&=~O}if(s=_r,l=Vt,l=Cr(n,n===s?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,l===0||n===s&&(or===2||or===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&Y(d),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Ut(n,l)){if(s=l&-l,s===n.callbackPriority)return s;switch(d!==null&&Y(d),yn(l)){case 2:case 8:l=At;break;case 32:l=mt;break;case 268435456:l=rt;break;default:l=mt}return d=Wx.bind(null,n),l=tt(l,d),n.callbackPriority=s,n.callbackNode=l,s}return d!==null&&d!==null&&Y(d),n.callbackPriority=2,n.callbackNode=null,2}function Wx(n,s){if(sn!==0&&sn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Yc()&&n.callbackNode!==l)return null;var d=Vt;return d=Cr(n,n===_r?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(Tx(n,d,s),Ux(n,De()),n.callbackNode!=null&&n.callbackNode===l?Wx.bind(null,n):null)}function Hx(n,s){if(Yc())return null;Tx(n,s,!0)}function l_(){y_(function(){(ir&6)!==0?tt(ht,o_):zx()})}function Hf(){return ti===0&&(ti=ae()),ti}function qx(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:oc(""+n)}function $x(n,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,n.id&&l.setAttribute("form",n.id),s.parentNode.insertBefore(l,s),n=new FormData(n),l.parentNode.removeChild(l),n}function c_(n,s,l,d,x){if(s==="submit"&&l&&l.stateNode===x){var m=qx((x[fr]||null).action),T=d.submitter;T&&(s=(s=T[fr]||null)?qx(s.formAction):T.getAttribute("formAction"),s!==null&&(m=s,T=null));var O=new dc("action","action",null,d,x);n.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ti!==0){var J=T?$x(x,T):new FormData(x);cf(l,{pending:!0,data:J,method:x.method,action:m},null,J)}}else typeof m=="function"&&(O.preventDefault(),J=T?$x(x,T):new FormData(x),cf(l,{pending:!0,data:J,method:x.method,action:m},m,J))},currentTarget:x}]})}}for(var qf=0;qf<jd.length;qf++){var $f=jd[qf],u_=$f.toLowerCase(),d_=$f[0].toUpperCase()+$f.slice(1);fa(u_,"on"+d_)}fa(Tp,"onAnimationEnd"),fa(Ep,"onAnimationIteration"),fa(kp,"onAnimationStart"),fa("dblclick","onDoubleClick"),fa("focusin","onFocus"),fa("focusout","onBlur"),fa(C2,"onTransitionRun"),fa(A2,"onTransitionStart"),fa(R2,"onTransitionCancel"),fa(jp,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Ue("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ue("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ue("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ue("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ue("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ue("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hl));function Gx(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],x=d.event;d=d.listeners;e:{var m=void 0;if(s)for(var T=d.length-1;0<=T;T--){var O=d[T],J=O.instance,be=O.currentTarget;if(O=O.listener,J!==m&&x.isPropagationStopped())break e;m=O,x.currentTarget=be;try{m(x)}catch(Fe){Fc(Fe)}x.currentTarget=null,m=J}else for(T=0;T<d.length;T++){if(O=d[T],J=O.instance,be=O.currentTarget,O=O.listener,J!==m&&x.isPropagationStopped())break e;m=O,x.currentTarget=be;try{m(x)}catch(Fe){Fc(Fe)}x.currentTarget=null,m=J}}}}function Ht(n,s){var l=s[da];l===void 0&&(l=s[da]=new Set);var d=n+"__bubble";l.has(d)||(Vx(s,n,2,!1),l.add(d))}function Gf(n,s,l){var d=0;s&&(d|=4),Vx(l,n,d,s)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function Vf(n){if(!n[Qc]){n[Qc]=!0,Se.forEach(function(l){l!=="selectionchange"&&(f_.has(l)||Gf(l,!1,n),Gf(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Qc]||(s[Qc]=!0,Gf("selectionchange",!1,s))}}function Vx(n,s,l,d){switch(mm(s)){case 2:var x=P_;break;case 8:x=z_;break;default:x=oh}l=x.bind(null,s,l,n),x=void 0,!pd||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(x=!0),d?x!==void 0?n.addEventListener(s,l,{capture:!0,passive:x}):n.addEventListener(s,l,!0):x!==void 0?n.addEventListener(s,l,{passive:x}):n.addEventListener(s,l,!1)}function Yf(n,s,l,d,x){var m=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var O=d.stateNode.containerInfo;if(O===x)break;if(T===4)for(T=d.return;T!==null;){var J=T.tag;if((J===3||J===4)&&T.stateNode.containerInfo===x)return;T=T.return}for(;O!==null;){if(T=H(O),T===null)return;if(J=T.tag,J===5||J===6||J===26||J===27){d=m=T;continue e}O=O.parentNode}}d=d.return}ep(function(){var be=m,Fe=fd(l),ze=[];e:{var Te=Cp.get(n);if(Te!==void 0){var Ee=dc,Et=n;switch(n){case"keypress":if(cc(l)===0)break e;case"keydown":case"keyup":Ee=i2;break;case"focusin":Et="focus",Ee=yd;break;case"focusout":Et="blur",Ee=yd;break;case"beforeblur":case"afterblur":Ee=yd;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=np;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=Yb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=c2;break;case Tp:case Ep:case kp:Ee=Qb;break;case jp:Ee=d2;break;case"scroll":case"scrollend":Ee=Gb;break;case"wheel":Ee=h2;break;case"copy":case"cut":case"paste":Ee=Zb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=sp;break;case"toggle":case"beforetoggle":Ee=g2}var _t=(s&4)!==0,gr=!_t&&(n==="scroll"||n==="scrollend"),de=_t?Te!==null?Te+"Capture":null:Te;_t=[];for(var se=be,me;se!==null;){var Le=se;if(me=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||me===null||de===null||(Le=No(se,de),Le!=null&&_t.push(pl(se,Le,me))),gr)break;se=se.return}0<_t.length&&(Te=new Ee(Te,Et,null,l,Fe),ze.push({event:Te,listeners:_t}))}}if((s&7)===0){e:{if(Te=n==="mouseover"||n==="pointerover",Ee=n==="mouseout"||n==="pointerout",Te&&l!==dd&&(Et=l.relatedTarget||l.fromElement)&&(H(Et)||Et[Ln]))break e;if((Ee||Te)&&(Te=Fe.window===Fe?Fe:(Te=Fe.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ee?(Et=l.relatedTarget||l.toElement,Ee=be,Et=Et?H(Et):null,Et!==null&&(gr=c(Et),_t=Et.tag,Et!==gr||_t!==5&&_t!==27&&_t!==6)&&(Et=null)):(Ee=null,Et=be),Ee!==Et)){if(_t=np,Le="onMouseLeave",de="onMouseEnter",se="mouse",(n==="pointerout"||n==="pointerover")&&(_t=sp,Le="onPointerLeave",de="onPointerEnter",se="pointer"),gr=Ee==null?Te:ye(Ee),me=Et==null?Te:ye(Et),Te=new _t(Le,se+"leave",Ee,l,Fe),Te.target=gr,Te.relatedTarget=me,Le=null,H(Fe)===be&&(_t=new _t(de,se+"enter",Et,l,Fe),_t.target=me,_t.relatedTarget=gr,Le=_t),gr=Le,Ee&&Et)t:{for(_t=Ee,de=Et,se=0,me=_t;me;me=Yi(me))se++;for(me=0,Le=de;Le;Le=Yi(Le))me++;for(;0<se-me;)_t=Yi(_t),se--;for(;0<me-se;)de=Yi(de),me--;for(;se--;){if(_t===de||de!==null&&_t===de.alternate)break t;_t=Yi(_t),de=Yi(de)}_t=null}else _t=null;Ee!==null&&Yx(ze,Te,Ee,_t,!1),Et!==null&&gr!==null&&Yx(ze,gr,Et,_t,!0)}}e:{if(Te=be?ye(be):window,Ee=Te.nodeName&&Te.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&Te.type==="file")var dt=hp;else if(dp(Te))if(pp)dt=E2;else{dt=w2;var zt=S2}else Ee=Te.nodeName,!Ee||Ee.toLowerCase()!=="input"||Te.type!=="checkbox"&&Te.type!=="radio"?be&&Mr(be.elementType)&&(dt=hp):dt=T2;if(dt&&(dt=dt(n,be))){fp(ze,dt,l,Fe);break e}zt&&zt(n,Te,be),n==="focusout"&&be&&Te.type==="number"&&be.memoizedProps.value!=null&&Qe(Te,"number",Te.value)}switch(zt=be?ye(be):window,n){case"focusin":(dp(zt)||zt.contentEditable==="true")&&(Ti=zt,Td=be,zo=null);break;case"focusout":zo=Td=Ti=null;break;case"mousedown":Ed=!0;break;case"contextmenu":case"mouseup":case"dragend":Ed=!1,Sp(ze,l,Fe);break;case"selectionchange":if(j2)break;case"keydown":case"keyup":Sp(ze,l,Fe)}var gt;if(bd)e:{switch(n){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else wi?cp(n,l)&&(Tt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Tt="onCompositionStart");Tt&&(ip&&l.locale!=="ko"&&(wi||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&wi&&(gt=tp()):(ss=Fe,gd="value"in ss?ss.value:ss.textContent,wi=!0)),zt=Jc(be,Tt),0<zt.length&&(Tt=new ap(Tt,n,null,l,Fe),ze.push({event:Tt,listeners:zt}),gt?Tt.data=gt:(gt=up(l),gt!==null&&(Tt.data=gt)))),(gt=m2?y2(n,l):v2(n,l))&&(Tt=Jc(be,"onBeforeInput"),0<Tt.length&&(zt=new ap("onBeforeInput","beforeinput",null,l,Fe),ze.push({event:zt,listeners:Tt}),zt.data=gt)),c_(ze,n,be,l,Fe)}Gx(ze,s)})}function pl(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Jc(n,s){for(var l=s+"Capture",d=[];n!==null;){var x=n,m=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||m===null||(x=No(n,l),x!=null&&d.unshift(pl(n,x,m)),x=No(n,s),x!=null&&d.push(pl(n,x,m))),n.tag===3)return d;n=n.return}return[]}function Yi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Yx(n,s,l,d,x){for(var m=s._reactName,T=[];l!==null&&l!==d;){var O=l,J=O.alternate,be=O.stateNode;if(O=O.tag,J!==null&&J===d)break;O!==5&&O!==26&&O!==27||be===null||(J=be,x?(be=No(l,m),be!=null&&T.unshift(pl(l,be,J))):x||(be=No(l,m),be!=null&&T.push(pl(l,be,J)))),l=l.return}T.length!==0&&n.push({event:s,listeners:T})}var h_=/\r\n?/g,p_=/\u0000|\uFFFD/g;function Kx(n){return(typeof n=="string"?n:""+n).replace(h_,`
`).replace(p_,"")}function Xx(n,s){return s=Kx(s),Kx(n)===s}function Zc(){}function pr(n,s,l,d,x,m){switch(l){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||ct(n,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&ct(n,""+d);break;case"className":Yt(n,"class",d);break;case"tabIndex":Yt(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Yt(n,l,d);break;case"style":Pt(n,d,m);break;case"data":if(s!=="object"){Yt(n,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||l!=="href")){n.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=oc(""+d),n.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(s!=="input"&&pr(n,s,"name",x.name,x,null),pr(n,s,"formEncType",x.formEncType,x,null),pr(n,s,"formMethod",x.formMethod,x,null),pr(n,s,"formTarget",x.formTarget,x,null)):(pr(n,s,"encType",x.encType,x,null),pr(n,s,"method",x.method,x,null),pr(n,s,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=oc(""+d),n.setAttribute(l,d);break;case"onClick":d!=null&&(n.onclick=Zc);break;case"onScroll":d!=null&&Ht("scroll",n);break;case"onScrollEnd":d!=null&&Ht("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(x.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}l=oc(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""+d):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":d===!0?n.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,d):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(l,d):n.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(l):n.setAttribute(l,d);break;case"popover":Ht("beforetoggle",n),Ht("toggle",n),Gt(n,"popover",d);break;case"xlinkActuate":Kt(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Kt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Kt(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Kt(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Kt(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Kt(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Kt(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Kt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Kt(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Gt(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Rn.get(l)||l,Gt(n,l,d))}}function Kf(n,s,l,d,x,m){switch(l){case"style":Pt(n,d,m);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(x.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof d=="string"?ct(n,d):(typeof d=="number"||typeof d=="bigint")&&ct(n,""+d);break;case"onScroll":d!=null&&Ht("scroll",n);break;case"onScrollEnd":d!=null&&Ht("scrollend",n);break;case"onClick":d!=null&&(n.onclick=Zc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!we.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(x=l.endsWith("Capture"),s=l.slice(2,x?l.length-7:void 0),m=n[fr]||null,m=m!=null?m[l]:null,typeof m=="function"&&n.removeEventListener(s,m,x),typeof d=="function")){typeof m!="function"&&m!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(s,d,x);break e}l in n?n[l]=d:d===!0?n.setAttribute(l,""):Gt(n,l,d)}}}function on(n,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",n),Ht("load",n);var d=!1,x=!1,m;for(m in l)if(l.hasOwnProperty(m)){var T=l[m];if(T!=null)switch(m){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:pr(n,s,m,T,l,null)}}x&&pr(n,s,"srcSet",l.srcSet,l,null),d&&pr(n,s,"src",l.src,l,null);return;case"input":Ht("invalid",n);var O=m=T=x=null,J=null,be=null;for(d in l)if(l.hasOwnProperty(d)){var Fe=l[d];if(Fe!=null)switch(d){case"name":x=Fe;break;case"type":T=Fe;break;case"checked":J=Fe;break;case"defaultChecked":be=Fe;break;case"value":m=Fe;break;case"defaultValue":O=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(a(137,s));break;default:pr(n,s,d,Fe,l,null)}}Ke(n,m,O,J,be,T,x,!1),Ft(n);return;case"select":Ht("invalid",n),d=T=m=null;for(x in l)if(l.hasOwnProperty(x)&&(O=l[x],O!=null))switch(x){case"value":m=O;break;case"defaultValue":T=O;break;case"multiple":d=O;default:pr(n,s,x,O,l,null)}s=m,l=T,n.multiple=!!d,s!=null?Ve(n,!!d,s,!1):l!=null&&Ve(n,!!d,l,!0);return;case"textarea":Ht("invalid",n),m=x=d=null;for(T in l)if(l.hasOwnProperty(T)&&(O=l[T],O!=null))switch(T){case"value":d=O;break;case"defaultValue":x=O;break;case"children":m=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(91));break;default:pr(n,s,T,O,l,null)}ot(n,d,x,m),Ft(n);return;case"option":for(J in l)if(l.hasOwnProperty(J)&&(d=l[J],d!=null))switch(J){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:pr(n,s,J,d,l,null)}return;case"dialog":Ht("beforetoggle",n),Ht("toggle",n),Ht("cancel",n),Ht("close",n);break;case"iframe":case"object":Ht("load",n);break;case"video":case"audio":for(d=0;d<hl.length;d++)Ht(hl[d],n);break;case"image":Ht("error",n),Ht("load",n);break;case"details":Ht("toggle",n);break;case"embed":case"source":case"link":Ht("error",n),Ht("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in l)if(l.hasOwnProperty(be)&&(d=l[be],d!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:pr(n,s,be,d,l,null)}return;default:if(Mr(s)){for(Fe in l)l.hasOwnProperty(Fe)&&(d=l[Fe],d!==void 0&&Kf(n,s,Fe,d,l,void 0));return}}for(O in l)l.hasOwnProperty(O)&&(d=l[O],d!=null&&pr(n,s,O,d,l,null))}function g_(n,s,l,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,m=null,T=null,O=null,J=null,be=null,Fe=null;for(Ee in l){var ze=l[Ee];if(l.hasOwnProperty(Ee)&&ze!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":J=ze;default:d.hasOwnProperty(Ee)||pr(n,s,Ee,null,d,ze)}}for(var Te in d){var Ee=d[Te];if(ze=l[Te],d.hasOwnProperty(Te)&&(Ee!=null||ze!=null))switch(Te){case"type":m=Ee;break;case"name":x=Ee;break;case"checked":be=Ee;break;case"defaultChecked":Fe=Ee;break;case"value":T=Ee;break;case"defaultValue":O=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(a(137,s));break;default:Ee!==ze&&pr(n,s,Te,Ee,d,ze)}}he(n,T,O,J,be,Fe,m,x);return;case"select":Ee=T=O=Te=null;for(m in l)if(J=l[m],l.hasOwnProperty(m)&&J!=null)switch(m){case"value":break;case"multiple":Ee=J;default:d.hasOwnProperty(m)||pr(n,s,m,null,d,J)}for(x in d)if(m=d[x],J=l[x],d.hasOwnProperty(x)&&(m!=null||J!=null))switch(x){case"value":Te=m;break;case"defaultValue":O=m;break;case"multiple":T=m;default:m!==J&&pr(n,s,x,m,d,J)}s=O,l=T,d=Ee,Te!=null?Ve(n,!!l,Te,!1):!!d!=!!l&&(s!=null?Ve(n,!!l,s,!0):Ve(n,!!l,l?[]:"",!1));return;case"textarea":Ee=Te=null;for(O in l)if(x=l[O],l.hasOwnProperty(O)&&x!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:pr(n,s,O,null,d,x)}for(T in d)if(x=d[T],m=l[T],d.hasOwnProperty(T)&&(x!=null||m!=null))switch(T){case"value":Te=x;break;case"defaultValue":Ee=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(a(91));break;default:x!==m&&pr(n,s,T,x,d,m)}Xe(n,Te,Ee);return;case"option":for(var Et in l)if(Te=l[Et],l.hasOwnProperty(Et)&&Te!=null&&!d.hasOwnProperty(Et))switch(Et){case"selected":n.selected=!1;break;default:pr(n,s,Et,null,d,Te)}for(J in d)if(Te=d[J],Ee=l[J],d.hasOwnProperty(J)&&Te!==Ee&&(Te!=null||Ee!=null))switch(J){case"selected":n.selected=Te&&typeof Te!="function"&&typeof Te!="symbol";break;default:pr(n,s,J,Te,d,Ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in l)Te=l[_t],l.hasOwnProperty(_t)&&Te!=null&&!d.hasOwnProperty(_t)&&pr(n,s,_t,null,d,Te);for(be in d)if(Te=d[be],Ee=l[be],d.hasOwnProperty(be)&&Te!==Ee&&(Te!=null||Ee!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(a(137,s));break;default:pr(n,s,be,Te,d,Ee)}return;default:if(Mr(s)){for(var gr in l)Te=l[gr],l.hasOwnProperty(gr)&&Te!==void 0&&!d.hasOwnProperty(gr)&&Kf(n,s,gr,void 0,d,Te);for(Fe in d)Te=d[Fe],Ee=l[Fe],!d.hasOwnProperty(Fe)||Te===Ee||Te===void 0&&Ee===void 0||Kf(n,s,Fe,Te,d,Ee);return}}for(var de in l)Te=l[de],l.hasOwnProperty(de)&&Te!=null&&!d.hasOwnProperty(de)&&pr(n,s,de,null,d,Te);for(ze in d)Te=d[ze],Ee=l[ze],!d.hasOwnProperty(ze)||Te===Ee||Te==null&&Ee==null||pr(n,s,ze,Te,d,Ee)}var Xf=null,Qf=null;function eu(n){return n.nodeType===9?n:n.ownerDocument}function Qx(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jx(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Jf(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Zf=null;function x_(){var n=window.event;return n&&n.type==="popstate"?n===Zf?!1:(Zf=n,!0):(Zf=null,!1)}var Zx=typeof setTimeout=="function"?setTimeout:void 0,m_=typeof clearTimeout=="function"?clearTimeout:void 0,em=typeof Promise=="function"?Promise:void 0,y_=typeof queueMicrotask=="function"?queueMicrotask:typeof em<"u"?function(n){return em.resolve(null).then(n).catch(v_)}:Zx;function v_(n){setTimeout(function(){throw n})}function _s(n){return n==="head"}function tm(n,s){var l=s,d=0,x=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(0<d&&8>d){l=d;var T=n.ownerDocument;if(l&1&&gl(T.documentElement),l&2&&gl(T.body),l&4)for(l=T.head,gl(l),T=l.firstChild;T;){var O=T.nextSibling,J=T.nodeName;T[B]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=O}}if(x===0){n.removeChild(m),wl(s);return}x--}else l==="$"||l==="$?"||l==="$!"?x++:d=l.charCodeAt(0)-48;else d=0;l=m}while(l);wl(s)}function eh(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":eh(l),F(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function b_(n,s,l,d){for(;n.nodeType===1;){var x=l;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[B])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==x.rel||n.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||n.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||n.getAttribute("title")!==(x.title==null?null:x.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(x.src==null?null:x.src)||n.getAttribute("type")!==(x.type==null?null:x.type)||n.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=x.name==null?null:""+x.name;if(x.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=pa(n.nextSibling),n===null)break}return null}function __(n,s,l){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=pa(n.nextSibling),n===null))return null;return n}function th(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function S_(n,s){var l=n.ownerDocument;if(n.data!=="$?"||l.readyState==="complete")s();else{var d=function(){s(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function pa(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var rh=null;function rm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}function nm(n,s,l){switch(s=eu(l),n){case"html":if(n=s.documentElement,!n)throw Error(a(452));return n;case"head":if(n=s.head,!n)throw Error(a(453));return n;case"body":if(n=s.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function gl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);F(n)}var aa=new Map,am=new Set;function tu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Va=ve.d;ve.d={f:w_,r:T_,D:E_,C:k_,L:j_,m:C_,X:R_,S:A_,M:D_};function w_(){var n=Va.f(),s=Gc();return n||s}function T_(n){var s=q(n);s!==null&&s.tag===5&&s.type==="form"?Tg(s):Va.r(n)}var Ki=typeof document>"u"?null:document;function sm(n,s,l){var d=Ki;if(d&&typeof s=="string"&&s){var x=C(s);x='link[rel="'+n+'"][href="'+x+'"]',typeof l=="string"&&(x+='[crossorigin="'+l+'"]'),am.has(x)||(am.add(x),n={rel:n,crossOrigin:l,href:s},d.querySelector(x)===null&&(s=d.createElement("link"),on(s,"link",n),fe(s),d.head.appendChild(s)))}}function E_(n){Va.D(n),sm("dns-prefetch",n,null)}function k_(n,s){Va.C(n,s),sm("preconnect",n,s)}function j_(n,s,l){Va.L(n,s,l);var d=Ki;if(d&&n&&s){var x='link[rel="preload"][as="'+C(s)+'"]';s==="image"&&l&&l.imageSrcSet?(x+='[imagesrcset="'+C(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(x+='[imagesizes="'+C(l.imageSizes)+'"]')):x+='[href="'+C(n)+'"]';var m=x;switch(s){case"style":m=Xi(n);break;case"script":m=Qi(n)}aa.has(m)||(n=g({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:n,as:s},l),aa.set(m,n),d.querySelector(x)!==null||s==="style"&&d.querySelector(xl(m))||s==="script"&&d.querySelector(ml(m))||(s=d.createElement("link"),on(s,"link",n),fe(s),d.head.appendChild(s)))}}function C_(n,s){Va.m(n,s);var l=Ki;if(l&&n){var d=s&&typeof s.as=="string"?s.as:"script",x='link[rel="modulepreload"][as="'+C(d)+'"][href="'+C(n)+'"]',m=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Qi(n)}if(!aa.has(m)&&(n=g({rel:"modulepreload",href:n},s),aa.set(m,n),l.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ml(m)))return}d=l.createElement("link"),on(d,"link",n),fe(d),l.head.appendChild(d)}}}function A_(n,s,l){Va.S(n,s,l);var d=Ki;if(d&&n){var x=Ne(d).hoistableStyles,m=Xi(n);s=s||"default";var T=x.get(m);if(!T){var O={loading:0,preload:null};if(T=d.querySelector(xl(m)))O.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":s},l),(l=aa.get(m))&&nh(n,l);var J=T=d.createElement("link");fe(J),on(J,"link",n),J._p=new Promise(function(be,Fe){J.onload=be,J.onerror=Fe}),J.addEventListener("load",function(){O.loading|=1}),J.addEventListener("error",function(){O.loading|=2}),O.loading|=4,ru(T,s,d)}T={type:"stylesheet",instance:T,count:1,state:O},x.set(m,T)}}}function R_(n,s){Va.X(n,s);var l=Ki;if(l&&n){var d=Ne(l).hoistableScripts,x=Qi(n),m=d.get(x);m||(m=l.querySelector(ml(x)),m||(n=g({src:n,async:!0},s),(s=aa.get(x))&&ah(n,s),m=l.createElement("script"),fe(m),on(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},d.set(x,m))}}function D_(n,s){Va.M(n,s);var l=Ki;if(l&&n){var d=Ne(l).hoistableScripts,x=Qi(n),m=d.get(x);m||(m=l.querySelector(ml(x)),m||(n=g({src:n,async:!0,type:"module"},s),(s=aa.get(x))&&ah(n,s),m=l.createElement("script"),fe(m),on(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},d.set(x,m))}}function im(n,s,l,d){var x=(x=ge.current)?tu(x):null;if(!x)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Xi(l.href),l=Ne(x).hoistableStyles,d=l.get(s),d||(d={type:"style",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Xi(l.href);var m=Ne(x).hoistableStyles,T=m.get(n);if(T||(x=x.ownerDocument||x,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,T),(m=x.querySelector(xl(n)))&&!m._p&&(T.instance=m,T.state.loading=5),aa.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},aa.set(n,l),m||N_(x,n,l,T.state))),s&&d===null)throw Error(a(528,""));return T}if(s&&d!==null)throw Error(a(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Qi(l),l=Ne(x).hoistableScripts,d=l.get(s),d||(d={type:"script",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Xi(n){return'href="'+C(n)+'"'}function xl(n){return'link[rel="stylesheet"]['+n+"]"}function om(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function N_(n,s,l,d){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=n.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),on(s,"link",l),fe(s),n.head.appendChild(s))}function Qi(n){return'[src="'+C(n)+'"]'}function ml(n){return"script[async]"+n}function lm(n,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var d=n.querySelector('style[data-href~="'+C(l.href)+'"]');if(d)return s.instance=d,fe(d),d;var x=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),fe(d),on(d,"style",x),ru(d,l.precedence,n),s.instance=d;case"stylesheet":x=Xi(l.href);var m=n.querySelector(xl(x));if(m)return s.state.loading|=4,s.instance=m,fe(m),m;d=om(l),(x=aa.get(x))&&nh(d,x),m=(n.ownerDocument||n).createElement("link"),fe(m);var T=m;return T._p=new Promise(function(O,J){T.onload=O,T.onerror=J}),on(m,"link",d),s.state.loading|=4,ru(m,l.precedence,n),s.instance=m;case"script":return m=Qi(l.src),(x=n.querySelector(ml(m)))?(s.instance=x,fe(x),x):(d=l,(x=aa.get(m))&&(d=g({},l),ah(d,x)),n=n.ownerDocument||n,x=n.createElement("script"),fe(x),on(x,"link",d),n.head.appendChild(x),s.instance=x);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,ru(d,l.precedence,n));return s.instance}function ru(n,s,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,m=x,T=0;T<d.length;T++){var O=d[T];if(O.dataset.precedence===s)m=O;else if(m!==x)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(n,s.firstChild))}function nh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function ah(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var nu=null;function cm(n,s,l){if(nu===null){var d=new Map,x=nu=new Map;x.set(l,d)}else x=nu,d=x.get(l),d||(d=new Map,x.set(l,d));if(d.has(n))return d;for(d.set(n,null),l=l.getElementsByTagName(n),x=0;x<l.length;x++){var m=l[x];if(!(m[B]||m[jt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(s)||"";T=n+T;var O=d.get(T);O?O.push(m):d.set(T,[m])}}return d}function um(n,s,l){n=n.ownerDocument||n,n.head.insertBefore(l,s==="title"?n.querySelector("head > title"):null)}function O_(n,s,l){if(l===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function dm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var yl=null;function I_(){}function B_(n,s,l){if(yl===null)throw Error(a(475));var d=yl;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var x=Xi(l.href),m=n.querySelector(xl(x));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(d.count++,d=au.bind(d),n.then(d,d)),s.state.loading|=4,s.instance=m,fe(m);return}m=n.ownerDocument||n,l=om(l),(x=aa.get(x))&&nh(l,x),m=m.createElement("link"),fe(m);var T=m;T._p=new Promise(function(O,J){T.onload=O,T.onerror=J}),on(m,"link",l),s.instance=m}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(d.count++,s=au.bind(d),n.addEventListener("load",s),n.addEventListener("error",s))}}function M_(){if(yl===null)throw Error(a(475));var n=yl;return n.stylesheets&&n.count===0&&sh(n,n.stylesheets),0<n.count?function(s){var l=setTimeout(function(){if(n.stylesheets&&sh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(l)}}:null}function au(){if(this.count--,this.count===0){if(this.stylesheets)sh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var su=null;function sh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,su=new Map,s.forEach(F_,n),su=null,au.call(n))}function F_(n,s){if(!(s.state.loading&4)){var l=su.get(n);if(l)var d=l.get(null);else{l=new Map,su.set(n,l);for(var x=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<x.length;m++){var T=x[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),d=T)}d&&l.set(null,d)}x=s.instance,T=x.getAttribute("data-precedence"),m=l.get(T)||d,m===d&&l.set(null,x),l.set(T,x),this.count++,d=au.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),m?m.parentNode.insertBefore(x,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(x,n.firstChild)),s.state.loading|=4}}var vl={$$typeof:I,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function L_(n,s,l,d,x,m,T,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.hiddenUpdates=pt(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function fm(n,s,l,d,x,m,T,O,J,be,Fe,ze){return n=new L_(n,s,l,T,O,J,be,ze),s=1,m===!0&&(s|=24),m=Un(3,null,null,s),n.current=m,m.stateNode=n,s=Pd(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:d,isDehydrated:l,cache:s},Hd(m),n}function hm(n){return n?(n=Ci,n):Ci}function pm(n,s,l,d,x,m){x=hm(x),d.context===null?d.context=x:d.pendingContext=x,d=ls(s),d.payload={element:l},m=m===void 0?null:m,m!==null&&(d.callback=m),l=cs(n,d,s),l!==null&&(Gn(l,n,s),Ko(l,n,s))}function gm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function ih(n,s){gm(n,s),(n=n.alternate)&&gm(n,s)}function xm(n){if(n.tag===13){var s=ji(n,67108864);s!==null&&Gn(s,n,67108864),ih(n,67108864)}}var iu=!0;function P_(n,s,l,d){var x=ne.T;ne.T=null;var m=ve.p;try{ve.p=2,oh(n,s,l,d)}finally{ve.p=m,ne.T=x}}function z_(n,s,l,d){var x=ne.T;ne.T=null;var m=ve.p;try{ve.p=8,oh(n,s,l,d)}finally{ve.p=m,ne.T=x}}function oh(n,s,l,d){if(iu){var x=lh(d);if(x===null)Yf(n,s,d,ou,l),ym(n,d);else if(W_(x,n,s,l,d))d.stopPropagation();else if(ym(n,d),s&4&&-1<U_.indexOf(n)){for(;x!==null;){var m=q(x);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=er(m.pendingLanes);if(T!==0){var O=m;for(O.pendingLanes|=2,O.entangledLanes|=2;T;){var J=1<<31-$e(T);O.entanglements[1]|=J,T&=~J}Aa(m),(ir&6)===0&&(qc=De()+500,fl(0))}}break;case 13:O=ji(m,2),O!==null&&Gn(O,m,2),Gc(),ih(m,2)}if(m=lh(d),m===null&&Yf(n,s,d,ou,l),m===x)break;x=m}x!==null&&d.stopPropagation()}else Yf(n,s,d,null,l)}}function lh(n){return n=fd(n),ch(n)}var ou=null;function ch(n){if(ou=null,n=H(n),n!==null){var s=c(n);if(s===null)n=null;else{var l=s.tag;if(l===13){if(n=u(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ou=n,null}function mm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case ht:return 2;case At:return 8;case mt:case Ie:return 32;case rt:return 268435456;default:return 32}default:return 32}}var uh=!1,Ss=null,ws=null,Ts=null,bl=new Map,_l=new Map,Es=[],U_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ym(n,s){switch(n){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":bl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(s.pointerId)}}function Sl(n,s,l,d,x,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:m,targetContainers:[x]},s!==null&&(s=q(s),s!==null&&xm(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,x!==null&&s.indexOf(x)===-1&&s.push(x),n)}function W_(n,s,l,d,x){switch(s){case"focusin":return Ss=Sl(Ss,n,s,l,d,x),!0;case"dragenter":return ws=Sl(ws,n,s,l,d,x),!0;case"mouseover":return Ts=Sl(Ts,n,s,l,d,x),!0;case"pointerover":var m=x.pointerId;return bl.set(m,Sl(bl.get(m)||null,n,s,l,d,x)),!0;case"gotpointercapture":return m=x.pointerId,_l.set(m,Sl(_l.get(m)||null,n,s,l,d,x)),!0}return!1}function vm(n){var s=H(n.target);if(s!==null){var l=c(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){n.blockedOn=s,vn(n.priority,function(){if(l.tag===13){var d=$n();d=Rt(d);var x=ji(l,d);x!==null&&Gn(x,l,d),ih(l,d)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function lu(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=lh(n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);dd=d,l.target.dispatchEvent(d),dd=null}else return s=q(l),s!==null&&xm(s),n.blockedOn=l,!1;s.shift()}return!0}function bm(n,s,l){lu(n)&&l.delete(s)}function H_(){uh=!1,Ss!==null&&lu(Ss)&&(Ss=null),ws!==null&&lu(ws)&&(ws=null),Ts!==null&&lu(Ts)&&(Ts=null),bl.forEach(bm),_l.forEach(bm)}function cu(n,s){n.blockedOn===s&&(n.blockedOn=null,uh||(uh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,H_)))}var uu=null;function _m(n){uu!==n&&(uu=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){uu===n&&(uu=null);for(var s=0;s<n.length;s+=3){var l=n[s],d=n[s+1],x=n[s+2];if(typeof d!="function"){if(ch(d||l)===null)continue;break}var m=q(l);m!==null&&(n.splice(s,3),s-=3,cf(m,{pending:!0,data:x,method:l.method,action:d},d,x))}}))}function wl(n){function s(J){return cu(J,n)}Ss!==null&&cu(Ss,n),ws!==null&&cu(ws,n),Ts!==null&&cu(Ts,n),bl.forEach(s),_l.forEach(s);for(var l=0;l<Es.length;l++){var d=Es[l];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Es.length&&(l=Es[0],l.blockedOn===null);)vm(l),l.blockedOn===null&&Es.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var x=l[d],m=l[d+1],T=x[fr]||null;if(typeof m=="function")T||_m(l);else if(T){var O=null;if(m&&m.hasAttribute("formAction")){if(x=m,T=m[fr]||null)O=T.formAction;else if(ch(x)!==null)continue}else O=T.action;typeof O=="function"?l[d+1]=O:(l.splice(d,3),d-=3),_m(l)}}}function dh(n){this._internalRoot=n}du.prototype.render=dh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(a(409));var l=s.current,d=$n();pm(l,d,n,s,null,null)},du.prototype.unmount=dh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;pm(n.current,2,null,n,null,null),Gc(),s[Ln]=null}};function du(n){this._internalRoot=n}du.prototype.unstable_scheduleHydration=function(n){if(n){var s=wr();n={blockedOn:null,target:n,priority:s};for(var l=0;l<Es.length&&s!==0&&s<Es[l].priority;l++);Es.splice(l,0,n),l===0&&vm(n)}};var Sm=t.version;if(Sm!=="19.1.1")throw Error(a(527,Sm,"19.1.1"));ve.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=h(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var q_={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{mr=fu.inject(q_),Mt=fu}catch{}}return El.createRoot=function(n,s){if(!i(n))throw Error(a(299));var l=!1,d="",x=Lg,m=Pg,T=zg,O=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(x=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(O=s.unstable_transitionCallbacks)),s=fm(n,1,!1,null,null,l,d,x,m,T,O,null),n[Ln]=s.current,Vf(n),new dh(s)},El.hydrateRoot=function(n,s,l){if(!i(n))throw Error(a(299));var d=!1,x="",m=Lg,T=Pg,O=zg,J=null,be=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(O=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(J=l.unstable_transitionCallbacks),l.formState!==void 0&&(be=l.formState)),s=fm(n,1,!0,s,l??null,d,x,m,T,O,J,be),s.context=hm(null),l=s.current,d=$n(),d=Rt(d),x=ls(d),x.callback=null,cs(l,x,d),l=d,s.current.lanes=l,Ct(s,l),Aa(s),n[Ln]=s.current,Vf(n),new du(s)},El.version="19.1.1",El}var Nm;function tS(){if(Nm)return ph.exports;Nm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ph.exports=eS(),ph.exports}var rS=tS();const nS=c0(rS);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Om="popstate";function aS(e={}){function t(a,i){let{pathname:c,search:u,hash:f}=a.location;return Ph("",{pathname:c,search:u,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){return typeof i=="string"?i:Ul(i)}return iS(t,r,null,e)}function jr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ca(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sS(){return Math.random().toString(36).substring(2,10)}function Im(e,t){return{usr:e.state,key:e.key,idx:t}}function Ph(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?wo(t):t,state:r,key:t&&t.key||a||sS()}}function Ul({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function iS(e,t,r,a={}){let{window:i=document.defaultView,v5Compat:c=!1}=a,u=i.history,f="POP",h=null,p=g();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function g(){return(u.state||{idx:null}).idx}function y(){f="POP";let S=g(),A=S==null?null:S-p;p=S,h&&h({action:f,location:_.location,delta:A})}function v(S,A){f="PUSH";let D=Ph(_.location,S,A);p=g()+1;let I=Im(D,p),G=_.createHref(D);try{u.pushState(I,"",G)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;i.location.assign(G)}c&&h&&h({action:f,location:_.location,delta:1})}function b(S,A){f="REPLACE";let D=Ph(_.location,S,A);p=g();let I=Im(D,p),G=_.createHref(D);u.replaceState(I,"",G),c&&h&&h({action:f,location:_.location,delta:0})}function w(S){return oS(S)}let _={get action(){return f},get location(){return e(i,u)},listen(S){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Om,y),h=S,()=>{i.removeEventListener(Om,y),h=null}},createHref(S){return t(i,S)},createURL:w,encodeLocation(S){let A=w(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:b,go(S){return u.go(S)}};return _}function oS(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),jr(r,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:Ul(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function fy(e,t,r="/"){return lS(e,t,r,!1)}function lS(e,t,r,a){let i=typeof t=="string"?wo(t):t,c=ts(i.pathname||"/",r);if(c==null)return null;let u=hy(e);cS(u);let f=null;for(let h=0;f==null&&h<u.length;++h){let p=bS(c);f=yS(u[h],p,a)}return f}function hy(e,t=[],r=[],a="",i=!1){let c=(u,f,h=i,p)=>{let g={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(a)&&h)return;jr(g.relativePath.startsWith(a),`Absolute route path "${g.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(a.length)}let y=Qa([a,g.relativePath]),v=r.concat(g);u.children&&u.children.length>0&&(jr(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),hy(u.children,t,v,y,h)),!(u.path==null&&!u.index)&&t.push({path:y,score:xS(y,u.index),routesMeta:v})};return e.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))c(u,f);else for(let h of py(u.path))c(u,f,!0,h)}),t}function py(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,i=r.endsWith("?"),c=r.replace(/\?$/,"");if(a.length===0)return i?[c,""]:[c];let u=py(a.join("/")),f=[];return f.push(...u.map(h=>h===""?c:[c,h].join("/"))),i&&f.push(...u),f.map(h=>e.startsWith("/")&&h===""?"/":h)}function cS(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:mS(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var uS=/^:[\w-]+$/,dS=3,fS=2,hS=1,pS=10,gS=-2,Bm=e=>e==="*";function xS(e,t){let r=e.split("/"),a=r.length;return r.some(Bm)&&(a+=gS),t&&(a+=fS),r.filter(i=>!Bm(i)).reduce((i,c)=>i+(uS.test(c)?dS:c===""?hS:pS),a)}function mS(e,t){return e.length===t.length&&e.slice(0,-1).every((a,i)=>a===t[i])?e[e.length-1]-t[t.length-1]:0}function yS(e,t,r=!1){let{routesMeta:a}=e,i={},c="/",u=[];for(let f=0;f<a.length;++f){let h=a[f],p=f===a.length-1,g=c==="/"?t:t.slice(c.length)||"/",y=Nu({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),v=h.route;if(!y&&p&&r&&!a[a.length-1].route.index&&(y=Nu({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(i,y.params),u.push({params:i,pathname:Qa([c,y.pathname]),pathnameBase:TS(Qa([c,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(c=Qa([c,y.pathnameBase]))}return u}function Nu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=vS(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let c=i[0],u=c.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:a.reduce((p,{paramName:g,isOptional:y},v)=>{if(g==="*"){let w=f[v]||"";u=c.slice(0,c.length-w.length).replace(/(.)\/+$/,"$1")}const b=f[v];return y&&!b?p[g]=void 0:p[g]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:u,pattern:e}}function vS(e,t=!1,r=!0){ca(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,h)=>(a.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),a]}function bS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ca(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ts(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function _S(e,t="/"){let{pathname:r,search:a="",hash:i=""}=typeof e=="string"?wo(e):e;return{pathname:r?r.startsWith("/")?r:SS(r,t):t,search:ES(a),hash:kS(i)}}function SS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function yh(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wS(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function d0(e){let t=wS(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function f0(e,t,r,a=!1){let i;typeof e=="string"?i=wo(e):(i={...e},jr(!i.pathname||!i.pathname.includes("?"),yh("?","pathname","search",i)),jr(!i.pathname||!i.pathname.includes("#"),yh("#","pathname","hash",i)),jr(!i.search||!i.search.includes("#"),yh("#","search","hash",i)));let c=e===""||i.pathname==="",u=c?"/":i.pathname,f;if(u==null)f=r;else{let y=t.length-1;if(!a&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),y-=1;i.pathname=v.join("/")}f=y>=0?t[y]:"/"}let h=_S(i,f),p=u&&u!=="/"&&u.endsWith("/"),g=(c||u===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}var Qa=e=>e.join("/").replace(/\/\/+/g,"/"),TS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ES=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,kS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var gy=["POST","PUT","PATCH","DELETE"];new Set(gy);var CS=["GET",...gy];new Set(CS);var To=E.createContext(null);To.displayName="DataRouter";var Ju=E.createContext(null);Ju.displayName="DataRouterState";E.createContext(!1);var xy=E.createContext({isTransitioning:!1});xy.displayName="ViewTransition";var AS=E.createContext(new Map);AS.displayName="Fetchers";var RS=E.createContext(null);RS.displayName="Await";var Sa=E.createContext(null);Sa.displayName="Navigation";var Ql=E.createContext(null);Ql.displayName="Location";var wa=E.createContext({outlet:null,matches:[],isDataRoute:!1});wa.displayName="Route";var h0=E.createContext(null);h0.displayName="RouteError";function DS(e,{relative:t}={}){jr(Eo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=E.useContext(Sa),{hash:i,pathname:c,search:u}=Jl(e,{relative:t}),f=c;return r!=="/"&&(f=c==="/"?r:Qa([r,c])),a.createHref({pathname:f,search:u,hash:i})}function Eo(){return E.useContext(Ql)!=null}function Ta(){return jr(Eo(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Ql).location}var my="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yy(e){E.useContext(Sa).static||E.useLayoutEffect(e)}function Fs(){let{isDataRoute:e}=E.useContext(wa);return e?$S():NS()}function NS(){jr(Eo(),"useNavigate() may be used only in the context of a <Router> component.");let e=E.useContext(To),{basename:t,navigator:r}=E.useContext(Sa),{matches:a}=E.useContext(wa),{pathname:i}=Ta(),c=JSON.stringify(d0(a)),u=E.useRef(!1);return yy(()=>{u.current=!0}),E.useCallback((h,p={})=>{if(ca(u.current,my),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=f0(h,JSON.parse(c),i,p.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Qa([t,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[t,r,c,i,e])}E.createContext(null);function OS(){let{matches:e}=E.useContext(wa),t=e[e.length-1];return t?t.params:{}}function Jl(e,{relative:t}={}){let{matches:r}=E.useContext(wa),{pathname:a}=Ta(),i=JSON.stringify(d0(r));return E.useMemo(()=>f0(e,JSON.parse(i),a,t==="path"),[e,i,a,t])}function IS(e,t){return vy(e,t)}function vy(e,t,r,a,i){jr(Eo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=E.useContext(Sa),{matches:u}=E.useContext(wa),f=u[u.length-1],h=f?f.params:{},p=f?f.pathname:"/",g=f?f.pathnameBase:"/",y=f&&f.route;{let D=y&&y.path||"";by(p,!y||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let v=Ta(),b;if(t){let D=typeof t=="string"?wo(t):t;jr(g==="/"||D.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${D.pathname}" was given in the \`location\` prop.`),b=D}else b=v;let w=b.pathname||"/",_=w;if(g!=="/"){let D=g.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(D.length).join("/")}let S=fy(e,{pathname:_});ca(y||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ca(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=PS(S&&S.map(D=>Object.assign({},D,{params:Object.assign({},h,D.params),pathname:Qa([g,c.encodeLocation?c.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?g:Qa([g,c.encodeLocation?c.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),u,r,a,i);return t&&A?E.createElement(Ql.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},A):A}function BS(){let e=qS(),t=jS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=E.createElement(E.Fragment,null,E.createElement("p",null,"💿 Hey developer 👋"),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:c},"ErrorBoundary")," or"," ",E.createElement("code",{style:c},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),r?E.createElement("pre",{style:i},r):null,u)}var MS=E.createElement(BS,null),FS=class extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?E.createElement(wa.Provider,{value:this.props.routeContext},E.createElement(h0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LS({routeContext:e,match:t,children:r}){let a=E.useContext(To);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(wa.Provider,{value:e},r)}function PS(e,t=[],r=null,a=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let c=e,u=r?.errors;if(u!=null){let p=c.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);jr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,p+1))}let f=!1,h=-1;if(r)for(let p=0;p<c.length;p++){let g=c[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:y,errors:v}=r,b=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||b){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((p,g,y)=>{let v,b=!1,w=null,_=null;r&&(v=u&&g.route.id?u[g.route.id]:void 0,w=g.route.errorElement||MS,f&&(h<0&&y===0?(by("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,_=null):h===y&&(b=!0,_=g.route.hydrateFallbackElement||null)));let S=t.concat(c.slice(0,y+1)),A=()=>{let D;return v?D=w:b?D=_:g.route.Component?D=E.createElement(g.route.Component,null):g.route.element?D=g.route.element:D=p,E.createElement(LS,{match:g,routeContext:{outlet:p,matches:S,isDataRoute:r!=null},children:D})};return r&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?E.createElement(FS,{location:r.location,revalidation:r.revalidation,component:w,error:v,children:A(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:a}):A()},null)}function p0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zS(e){let t=E.useContext(To);return jr(t,p0(e)),t}function US(e){let t=E.useContext(Ju);return jr(t,p0(e)),t}function WS(e){let t=E.useContext(wa);return jr(t,p0(e)),t}function g0(e){let t=WS(e),r=t.matches[t.matches.length-1];return jr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function HS(){return g0("useRouteId")}function qS(){let e=E.useContext(h0),t=US("useRouteError"),r=g0("useRouteError");return e!==void 0?e:t.errors?.[r]}function $S(){let{router:e}=zS("useNavigate"),t=g0("useNavigate"),r=E.useRef(!1);return yy(()=>{r.current=!0}),E.useCallback(async(i,c={})=>{ca(r.current,my),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...c}))},[e,t])}var Mm={};function by(e,t,r){!t&&!Mm[e]&&(Mm[e]=!0,ca(!1,r))}E.memo(GS);function GS({routes:e,future:t,state:r,unstable_onError:a}){return vy(e,void 0,r,a,t)}function Fm({to:e,replace:t,state:r,relative:a}){jr(Eo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=E.useContext(Sa);ca(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=E.useContext(wa),{pathname:u}=Ta(),f=Fs(),h=f0(e,d0(c),u,a==="path"),p=JSON.stringify(h);return E.useEffect(()=>{f(JSON.parse(p),{replace:t,state:r,relative:a})},[f,p,a,t,r]),null}function ia(e){jr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VS({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:i,static:c=!1}){jr(!Eo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),f=E.useMemo(()=>({basename:u,navigator:i,static:c,future:{}}),[u,i,c]);typeof r=="string"&&(r=wo(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:v="default"}=r,b=E.useMemo(()=>{let w=ts(h,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:y,key:v},navigationType:a}},[u,h,p,g,y,v,a]);return ca(b!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:E.createElement(Sa.Provider,{value:f},E.createElement(Ql.Provider,{children:t,value:b}))}function _y({children:e,location:t}){return IS(zh(e),t)}function zh(e,t=[]){let r=[];return E.Children.forEach(e,(a,i)=>{if(!E.isValidElement(a))return;let c=[...t,i];if(a.type===E.Fragment){r.push.apply(r,zh(a.props.children,c));return}jr(a.type===ia,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jr(!a.props.index||!a.props.children,"An index route cannot have child routes.");let u={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(u.children=zh(a.props.children,c)),r.push(u)}),r}var Ru="get",Du="application/x-www-form-urlencoded";function Zu(e){return e!=null&&typeof e.tagName=="string"}function YS(e){return Zu(e)&&e.tagName.toLowerCase()==="button"}function KS(e){return Zu(e)&&e.tagName.toLowerCase()==="form"}function XS(e){return Zu(e)&&e.tagName.toLowerCase()==="input"}function QS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function JS(e,t){return e.button===0&&(!t||t==="_self")&&!QS(e)}function Uh(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map(i=>[r,i]):[[r,a]])},[]))}function ZS(e,t){let r=Uh(e);return t&&t.forEach((a,i)=>{r.has(i)||t.getAll(i).forEach(c=>{r.append(i,c)})}),r}var hu=null;function ew(){if(hu===null)try{new FormData(document.createElement("form"),0),hu=!1}catch{hu=!0}return hu}var tw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vh(e){return e!=null&&!tw.has(e)?(ca(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Du}"`),null):e}function rw(e,t){let r,a,i,c,u;if(KS(e)){let f=e.getAttribute("action");a=f?ts(f,t):null,r=e.getAttribute("method")||Ru,i=vh(e.getAttribute("enctype"))||Du,c=new FormData(e)}else if(YS(e)||XS(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||f.getAttribute("action");if(a=h?ts(h,t):null,r=e.getAttribute("formmethod")||f.getAttribute("method")||Ru,i=vh(e.getAttribute("formenctype"))||vh(f.getAttribute("enctype"))||Du,c=new FormData(f,e),!ew()){let{name:p,type:g,value:y}=e;if(g==="image"){let v=p?`${p}.`:"";c.append(`${v}x`,"0"),c.append(`${v}y`,"0")}else p&&c.append(p,y)}}else{if(Zu(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ru,a=null,i=Du,u=e}return c&&i==="text/plain"&&(u=c,c=void 0),{action:a,method:r.toLowerCase(),encType:i,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function x0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nw(e,t,r){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${r}`:t&&ts(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function aw(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function iw(e,t,r){let a=await Promise.all(e.map(async i=>{let c=t.routes[i.route.id];if(c){let u=await aw(c,r);return u.links?u.links():[]}return[]}));return uw(a.flat(1).filter(sw).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Lm(e,t,r,a,i,c){let u=(h,p)=>r[p]?h.route.id!==r[p].route.id:!0,f=(h,p)=>r[p].pathname!==h.pathname||r[p].route.path?.endsWith("*")&&r[p].params["*"]!==h.params["*"];return c==="assets"?t.filter((h,p)=>u(h,p)||f(h,p)):c==="data"?t.filter((h,p)=>{let g=a.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(u(h,p)||f(h,p))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function ow(e,t,{includeHydrateFallback:r}={}){return lw(e.map(a=>{let i=t.routes[a.route.id];if(!i)return[];let c=[i.module];return i.clientActionModule&&(c=c.concat(i.clientActionModule)),i.clientLoaderModule&&(c=c.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(c=c.concat(i.hydrateFallbackModule)),i.imports&&(c=c.concat(i.imports)),c}).flat(1))}function lw(e){return[...new Set(e)]}function cw(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function uw(e,t){let r=new Set;return new Set(t),e.reduce((a,i)=>{let c=JSON.stringify(cw(i));return r.has(c)||(r.add(c),a.push({key:c,link:i})),a},[])}function Sy(){let e=E.useContext(To);return x0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function dw(){let e=E.useContext(Ju);return x0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var m0=E.createContext(void 0);m0.displayName="FrameworkContext";function wy(){let e=E.useContext(m0);return x0(e,"You must render this element inside a <HydratedRouter> element"),e}function fw(e,t){let r=E.useContext(m0),[a,i]=E.useState(!1),[c,u]=E.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=t,v=E.useRef(null);E.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let _=A=>{A.forEach(D=>{u(D.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[e]),E.useEffect(()=>{if(a){let _=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(_)}}},[a]);let b=()=>{i(!0)},w=()=>{i(!1),u(!1)};return r?e!=="intent"?[c,v,{}]:[c,v,{onFocus:kl(f,b),onBlur:kl(h,w),onMouseEnter:kl(p,b),onMouseLeave:kl(g,w),onTouchStart:kl(y,b)}]:[!1,v,{}]}function kl(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function hw({page:e,...t}){let{router:r}=Sy(),a=E.useMemo(()=>fy(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?E.createElement(gw,{page:e,matches:a,...t}):null}function pw(e){let{manifest:t,routeModules:r}=wy(),[a,i]=E.useState([]);return E.useEffect(()=>{let c=!1;return iw(e,t,r).then(u=>{c||i(u)}),()=>{c=!0}},[e,t,r]),a}function gw({page:e,matches:t,...r}){let a=Ta(),{manifest:i,routeModules:c}=wy(),{basename:u}=Sy(),{loaderData:f,matches:h}=dw(),p=E.useMemo(()=>Lm(e,t,h,i,a,"data"),[e,t,h,i,a]),g=E.useMemo(()=>Lm(e,t,h,i,a,"assets"),[e,t,h,i,a]),y=E.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let w=new Set,_=!1;if(t.forEach(A=>{let D=i.routes[A.route.id];!D||!D.hasLoader||(!p.some(I=>I.route.id===A.route.id)&&A.route.id in f&&c[A.route.id]?.shouldRevalidate||D.hasClientLoader?_=!0:w.add(A.route.id))}),w.size===0)return[];let S=nw(e,u,"data");return _&&w.size>0&&S.searchParams.set("_routes",t.filter(A=>w.has(A.route.id)).map(A=>A.route.id).join(",")),[S.pathname+S.search]},[u,f,a,i,p,t,e,c]),v=E.useMemo(()=>ow(g,i),[g,i]),b=pw(g);return E.createElement(E.Fragment,null,y.map(w=>E.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),v.map(w=>E.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),b.map(({key:w,link:_})=>E.createElement("link",{key:w,nonce:r.nonce,..._})))}function xw(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Ty=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ty&&(window.__reactRouterVersion="7.9.1")}catch{}function mw({basename:e,children:t,window:r}){let a=E.useRef();a.current==null&&(a.current=aS({window:r,v5Compat:!0}));let i=a.current,[c,u]=E.useState({action:i.action,location:i.location}),f=E.useCallback(h=>{E.startTransition(()=>u(h))},[u]);return E.useLayoutEffect(()=>i.listen(f),[i,f]),E.createElement(VS,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:i})}var Ey=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,y0=E.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:i,reloadDocument:c,replace:u,state:f,target:h,to:p,preventScrollReset:g,viewTransition:y,...v},b){let{basename:w}=E.useContext(Sa),_=typeof p=="string"&&Ey.test(p),S,A=!1;if(typeof p=="string"&&_&&(S=p,Ty))try{let z=new URL(window.location.href),ie=p.startsWith("//")?new URL(z.protocol+p):new URL(p),K=ts(ie.pathname,w);ie.origin===z.origin&&K!=null?p=K+ie.search+ie.hash:A=!0}catch{ca(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=DS(p,{relative:i}),[I,G,Z]=fw(a,v),oe=_w(p,{replace:u,state:f,target:h,preventScrollReset:g,relative:i,viewTransition:y});function V(z){t&&t(z),z.defaultPrevented||oe(z)}let P=E.createElement("a",{...v,...Z,href:S||D,onClick:A||c?t:V,ref:xw(b,G),target:h,"data-discover":!_&&r==="render"?"true":void 0});return I&&!_?E.createElement(E.Fragment,null,P,E.createElement(hw,{page:D})):P});y0.displayName="Link";var yw=E.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:i=!1,style:c,to:u,viewTransition:f,children:h,...p},g){let y=Jl(u,{relative:p.relative}),v=Ta(),b=E.useContext(Ju),{navigator:w,basename:_}=E.useContext(Sa),S=b!=null&&kw(y)&&f===!0,A=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,D=v.pathname,I=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(D=D.toLowerCase(),I=I?I.toLowerCase():null,A=A.toLowerCase()),I&&_&&(I=ts(I,_)||I);const G=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let Z=D===A||!i&&D.startsWith(A)&&D.charAt(G)==="/",oe=I!=null&&(I===A||!i&&I.startsWith(A)&&I.charAt(A.length)==="/"),V={isActive:Z,isPending:oe,isTransitioning:S},P=Z?t:void 0,z;typeof a=="function"?z=a(V):z=[a,Z?"active":null,oe?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ie=typeof c=="function"?c(V):c;return E.createElement(y0,{...p,"aria-current":P,className:z,ref:g,style:ie,to:u,viewTransition:f},typeof h=="function"?h(V):h)});yw.displayName="NavLink";var vw=E.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:i,state:c,method:u=Ru,action:f,onSubmit:h,relative:p,preventScrollReset:g,viewTransition:y,...v},b)=>{let w=Tw(),_=Ew(f,{relative:p}),S=u.toLowerCase()==="get"?"get":"post",A=typeof f=="string"&&Ey.test(f),D=I=>{if(h&&h(I),I.defaultPrevented)return;I.preventDefault();let G=I.nativeEvent.submitter,Z=G?.getAttribute("formmethod")||u;w(G||I.currentTarget,{fetcherKey:t,method:Z,navigate:r,replace:i,state:c,relative:p,preventScrollReset:g,viewTransition:y})};return E.createElement("form",{ref:b,method:S,action:_,onSubmit:a?h:D,...v,"data-discover":!A&&e==="render"?"true":void 0})});vw.displayName="Form";function bw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ky(e){let t=E.useContext(To);return jr(t,bw(e)),t}function _w(e,{target:t,replace:r,state:a,preventScrollReset:i,relative:c,viewTransition:u}={}){let f=Fs(),h=Ta(),p=Jl(e,{relative:c});return E.useCallback(g=>{if(JS(g,t)){g.preventDefault();let y=r!==void 0?r:Ul(h)===Ul(p);f(e,{replace:y,state:a,preventScrollReset:i,relative:c,viewTransition:u})}},[h,f,p,r,a,t,e,i,c,u])}function jy(e){ca(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=E.useRef(Uh(e)),r=E.useRef(!1),a=Ta(),i=E.useMemo(()=>ZS(a.search,r.current?null:t.current),[a.search]),c=Fs(),u=E.useCallback((f,h)=>{const p=Uh(typeof f=="function"?f(new URLSearchParams(i)):f);r.current=!0,c("?"+p,h)},[c,i]);return[i,u]}var Sw=0,ww=()=>`__${String(++Sw)}__`;function Tw(){let{router:e}=ky("useSubmit"),{basename:t}=E.useContext(Sa),r=HS();return E.useCallback(async(a,i={})=>{let{action:c,method:u,encType:f,formData:h,body:p}=rw(a,t);if(i.navigate===!1){let g=i.fetcherKey||ww();await e.fetch(g,r,i.action||c,{preventScrollReset:i.preventScrollReset,formData:h,body:p,formMethod:i.method||u,formEncType:i.encType||f,flushSync:i.flushSync})}else await e.navigate(i.action||c,{preventScrollReset:i.preventScrollReset,formData:h,body:p,formMethod:i.method||u,formEncType:i.encType||f,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function Ew(e,{relative:t}={}){let{basename:r}=E.useContext(Sa),a=E.useContext(wa);jr(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),c={...Jl(e||".",{relative:t})},u=Ta();if(e==null){c.search=u.search;let f=new URLSearchParams(c.search),h=f.getAll("index");if(h.some(g=>g==="")){f.delete("index"),h.filter(y=>y).forEach(y=>f.append("index",y));let g=f.toString();c.search=g?`?${g}`:""}}return(!e||e===".")&&i.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:Qa([r,c.pathname])),Ul(c)}function kw(e,{relative:t}={}){let r=E.useContext(xy);jr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=ky("useViewTransitionState"),i=Jl(e,{relative:t});if(!r.isTransitioning)return!1;let c=ts(r.currentLocation.pathname,a)||r.currentLocation.pathname,u=ts(r.nextLocation.pathname,a)||r.nextLocation.pathname;return Nu(i.pathname,u)!=null||Nu(i.pathname,c)!=null}var ko=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},jw={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Cw=class{#e=jw;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},oi=new Cw;function Aw(e){setTimeout(e,0)}var ui=typeof window>"u"||"Deno"in globalThis;function En(){}function Rw(e,t){return typeof e=="function"?e(t):e}function Wh(e){return typeof e=="number"&&e>=0&&e!==1/0}function Cy(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Os(e,t){return typeof e=="function"?e(t):e}function la(e,t){return typeof e=="function"?e(t):e}function Pm(e,t){const{type:r="all",exact:a,fetchStatus:i,predicate:c,queryKey:u,stale:f}=e;if(u){if(a){if(t.queryHash!==v0(u,t.options))return!1}else if(!Wl(t.queryKey,u))return!1}if(r!=="all"){const h=t.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof f=="boolean"&&t.isStale()!==f||i&&i!==t.state.fetchStatus||c&&!c(t))}function zm(e,t){const{exact:r,status:a,predicate:i,mutationKey:c}=e;if(c){if(!t.options.mutationKey)return!1;if(r){if(di(t.options.mutationKey)!==di(c))return!1}else if(!Wl(t.options.mutationKey,c))return!1}return!(a&&t.state.status!==a||i&&!i(t))}function v0(e,t){return(t?.queryKeyHashFn||di)(e)}function di(e){return JSON.stringify(e,(t,r)=>Hh(r)?Object.keys(r).sort().reduce((a,i)=>(a[i]=r[i],a),{}):r)}function Wl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Wl(e[r],t[r])):!1}var Dw=Object.prototype.hasOwnProperty;function Ay(e,t){if(e===t)return e;const r=Um(e)&&Um(t);if(!r&&!(Hh(e)&&Hh(t)))return t;const i=(r?e:Object.keys(e)).length,c=r?t:Object.keys(t),u=c.length,f=r?new Array(u):{};let h=0;for(let p=0;p<u;p++){const g=r?p:c[p],y=e[g],v=t[g];if(y===v){f[g]=y,(r?p<i:Dw.call(e,g))&&h++;continue}if(y===null||v===null||typeof y!="object"||typeof v!="object"){f[g]=v;continue}const b=Ay(y,v);f[g]=b,b===y&&h++}return i===u&&h===i?e:f}function Ou(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Um(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Hh(e){if(!Wm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Wm(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Wm(e){return Object.prototype.toString.call(e)==="[object Object]"}function Nw(e){return new Promise(t=>{oi.setTimeout(t,e)})}function qh(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Ay(e,t):t}function Ow(e,t,r=0){const a=[...e,t];return r&&a.length>r?a.slice(1):a}function Iw(e,t,r=0){const a=[t,...e];return r&&a.length>r?a.slice(0,-1):a}var b0=Symbol();function Ry(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===b0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Dy(e,t){return typeof e=="function"?e(...t):!!e}var Bw=class extends ko{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!ui&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},_0=new Bw;function $h(){let e,t;const r=new Promise((i,c)=>{e=i,t=c});r.status="pending",r.catch(()=>{});function a(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{a({status:"fulfilled",value:i}),e(i)},r.reject=i=>{a({status:"rejected",reason:i}),t(i)},r}var Mw=Aw;function Fw(){let e=[],t=0,r=f=>{f()},a=f=>{f()},i=Mw;const c=f=>{t?e.push(f):i(()=>{r(f)})},u=()=>{const f=e;e=[],f.length&&i(()=>{a(()=>{f.forEach(h=>{r(h)})})})};return{batch:f=>{let h;t++;try{h=f()}finally{t--,t||u()}return h},batchCalls:f=>(...h)=>{c(()=>{f(...h)})},schedule:c,setNotifyFunction:f=>{r=f},setBatchNotifyFunction:f=>{a=f},setScheduler:f=>{i=f}}}var Xr=Fw(),Lw=class extends ko{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!ui&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Iu=new Lw;function Pw(e){return Math.min(1e3*2**e,3e4)}function Ny(e){return(e??"online")==="online"?Iu.isOnline():!0}var Gh=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Oy(e){let t=!1,r=0,a;const i=$h(),c=()=>i.status!=="pending",u=_=>{if(!c()){const S=new Gh(_);v(S),e.onCancel?.(S)}},f=()=>{t=!0},h=()=>{t=!1},p=()=>_0.isFocused()&&(e.networkMode==="always"||Iu.isOnline())&&e.canRun(),g=()=>Ny(e.networkMode)&&e.canRun(),y=_=>{c()||(a?.(),i.resolve(_))},v=_=>{c()||(a?.(),i.reject(_))},b=()=>new Promise(_=>{a=S=>{(c()||p())&&_(S)},e.onPause?.()}).then(()=>{a=void 0,c()||e.onContinue?.()}),w=()=>{if(c())return;let _;const S=r===0?e.initialPromise:void 0;try{_=S??e.fn()}catch(A){_=Promise.reject(A)}Promise.resolve(_).then(y).catch(A=>{if(c())return;const D=e.retry??(ui?0:3),I=e.retryDelay??Pw,G=typeof I=="function"?I(r,A):I,Z=D===!0||typeof D=="number"&&r<D||typeof D=="function"&&D(r,A);if(t||!Z){v(A);return}r++,e.onFail?.(r,A),Nw(G).then(()=>p()?void 0:b()).then(()=>{t?v(A):w()})})};return{promise:i,status:()=>i.status,cancel:u,continue:()=>(a?.(),i),cancelRetry:f,continueRetry:h,canStart:g,start:()=>(g()?w():b().then(w),i)}}var Iy=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Wh(this.gcTime)&&(this.#e=oi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ui?1/0:300*1e3))}clearGcTimeout(){this.#e&&(oi.clearTimeout(this.#e),this.#e=void 0)}},zw=class extends Iy{#e;#t;#r;#a;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#r=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Hm(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Hm(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=qh(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(En).catch(En):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>la(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===b0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Os(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Cy(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,a=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},i=()=>{const f=Ry(this.options,t),p=(()=>{const g={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(g),g})();return this.#o=!1,this.options.persister?this.options.persister(f,p,this):f(p)},u=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:i};return a(f),f})();this.options.behavior?.onFetch(u,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#s({type:"fetch",meta:u.fetchOptions?.meta}),this.#n=Oy({initialPromise:t?.initialPromise,fn:u.fetchFn,onCancel:f=>{f instanceof Gh&&f.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(f,h)=>{this.#s({type:"failed",failureCount:f,error:h})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0});try{const f=await this.#n.start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#r.config.onSuccess?.(f,this),this.#r.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof Gh){if(f.silent)return this.#n.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#s({type:"error",error:f}),this.#r.config.onError?.(f,this),this.#r.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...By(r.data,this.options),fetchMeta:e.meta??null};case"success":const a={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Xr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function By(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ny(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Hm(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,a=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Uw=class extends ko{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=$h(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#i;#o;#s;#g;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),qm(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Vh(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Vh(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#_(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof la(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),t._defaulted&&!Ou(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&$m(this.#t,r,this.options,t)&&this.#d(),this.updateResult(),a&&(this.#t!==r||la(this.options.enabled,this.#t)!==la(t.enabled,this.#t)||Os(this.options.staleTime,this.#t)!==Os(t.staleTime,this.#t))&&this.#x();const i=this.#m();a&&(this.#t!==r||la(this.options.enabled,this.#t)!==la(t.enabled,this.#t)||i!==this.#l)&&this.#y(i)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return Hw(this,r)&&(this.#a=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(r,a)=>(this.trackProp(a),t?.(a),a==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#d(e){this.#S();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(En)),t}#x(){this.#b();const e=Os(this.options.staleTime,this.#t);if(ui||this.#a.isStale||!Wh(e))return;const r=Cy(this.#a.dataUpdatedAt,e)+1;this.#c=oi.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#_(),this.#l=e,!(ui||la(this.options.enabled,this.#t)===!1||!Wh(this.#l)||this.#l===0)&&(this.#u=oi.setInterval(()=>{(this.options.refetchIntervalInBackground||_0.isFocused())&&this.#d()},this.#l))}#v(){this.#x(),this.#y(this.#m())}#b(){this.#c&&(oi.clearTimeout(this.#c),this.#c=void 0)}#_(){this.#u&&(oi.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,a=this.options,i=this.#a,c=this.#n,u=this.#i,h=e!==r?e.state:this.#r,{state:p}=e;let g={...p},y=!1,v;if(t._optimisticResults){const P=this.hasListeners(),z=!P&&qm(e,t),ie=P&&$m(e,r,t,a);(z||ie)&&(g={...g,...By(p.data,e.options)}),t._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:b,errorUpdatedAt:w,status:_}=g;v=g.data;let S=!1;if(t.placeholderData!==void 0&&v===void 0&&_==="pending"){let P;i?.isPlaceholderData&&t.placeholderData===u?.placeholderData?(P=i.data,S=!0):P=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,P!==void 0&&(_="success",v=qh(i?.data,P,t),y=!0)}if(t.select&&v!==void 0&&!S)if(i&&v===c?.data&&t.select===this.#g)v=this.#f;else try{this.#g=t.select,v=t.select(v),v=qh(i?.data,v,t),this.#f=v,this.#s=null}catch(P){this.#s=P}this.#s&&(b=this.#s,v=this.#f,w=Date.now(),_="error");const A=g.fetchStatus==="fetching",D=_==="pending",I=_==="error",G=D&&A,Z=v!==void 0,V={status:_,fetchStatus:g.fetchStatus,isPending:D,isSuccess:_==="success",isError:I,isInitialLoading:G,isLoading:G,data:v,dataUpdatedAt:g.dataUpdatedAt,error:b,errorUpdatedAt:w,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>h.dataUpdateCount||g.errorUpdateCount>h.errorUpdateCount,isFetching:A,isRefetching:A&&!D,isLoadingError:I&&!Z,isPaused:g.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:I&&Z,isStale:S0(e,t),refetch:this.refetch,promise:this.#o,isEnabled:la(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=K=>{V.status==="error"?K.reject(V.error):V.data!==void 0&&K.resolve(V.data)},z=()=>{const K=this.#o=V.promise=$h();P(K)},ie=this.#o;switch(ie.status){case"pending":e.queryHash===r.queryHash&&P(ie);break;case"fulfilled":(V.status==="error"||V.data!==ie.value)&&z();break;case"rejected":(V.status!=="error"||V.error!==ie.reason)&&z();break}}return V}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#t),Ou(t,e))return;this.#a=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!this.#p.size)return!0;const c=new Set(i??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#a).some(u=>{const f=u;return this.#a[f]!==e[f]&&c.has(f)})};this.#w({listeners:r()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){Xr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Ww(e,t){return la(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function qm(e,t){return Ww(e,t)||e.state.data!==void 0&&Vh(e,t,t.refetchOnMount)}function Vh(e,t,r){if(la(t.enabled,e)!==!1&&Os(t.staleTime,e)!=="static"){const a=typeof r=="function"?r(e):r;return a==="always"||a!==!1&&S0(e,t)}return!1}function $m(e,t,r,a){return(e!==t||la(a.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&S0(e,r)}function S0(e,t){return la(t.enabled,e)!==!1&&e.isStaleByTime(Os(t.staleTime,e))}function Hw(e,t){return!Ou(e.getCurrentResult(),t)}function Gm(e){return{onFetch:(t,r)=>{const a=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,c=t.state.data?.pages||[],u=t.state.data?.pageParams||[];let f={pages:[],pageParams:[]},h=0;const p=async()=>{let g=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=Ry(t.options,t.fetchOptions),b=async(w,_,S)=>{if(g)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const D=(()=>{const oe={client:t.client,queryKey:t.queryKey,pageParam:_,direction:S?"backward":"forward",meta:t.options.meta};return y(oe),oe})(),I=await v(D),{maxPages:G}=t.options,Z=S?Iw:Ow;return{pages:Z(w.pages,I,G),pageParams:Z(w.pageParams,_,G)}};if(i&&c.length){const w=i==="backward",_=w?qw:Vm,S={pages:c,pageParams:u},A=_(a,S);f=await b(S,A,w)}else{const w=e??c.length;do{const _=h===0?u[0]??a.initialPageParam:Vm(a,f);if(h>0&&_==null)break;f=await b(f,_),h++}while(h<w)}return f};t.options.persister?t.fetchFn=()=>t.options.persister?.(p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=p}}}function Vm(e,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,r[a],r):void 0}function qw(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var $w=class extends Iy{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||My(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=Oy({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(c,u)=>{this.#n({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",i=!this.#a.canStart();try{if(a)t();else{this.#n({type:"pending",variables:e,isPaused:i}),await this.#r.config.onMutate?.(e,this,r);const u=await this.options.onMutate?.(e,r);u!==this.state.context&&this.#n({type:"pending",context:u,variables:e,isPaused:i})}const c=await this.#a.start();return await this.#r.config.onSuccess?.(c,e,this.state.context,this,r),await this.options.onSuccess?.(c,e,this.state.context,r),await this.#r.config.onSettled?.(c,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(c,null,e,this.state.context,r),this.#n({type:"success",data:c}),c}catch(c){try{throw await this.#r.config.onError?.(c,e,this.state.context,this,r),await this.options.onError?.(c,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,c,e,this.state.context,r),c}finally{this.#n({type:"error",error:c})}}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Xr.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function My(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gw=class extends ko{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const a=new $w({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){this.#e.add(e);const t=pu(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=pu(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=pu(e);if(typeof t=="string"){const a=this.#t.get(t)?.find(i=>i.state.status==="pending");return!a||a===e}else return!0}runNext(e){const t=pu(e);return typeof t=="string"?this.#t.get(t)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Xr.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>zm(t,r))}findAll(e={}){return this.getAll().filter(t=>zm(e,t))}notify(e){Xr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Xr.batch(()=>Promise.all(e.map(t=>t.continue().catch(En))))}};function pu(e){return e.options.scope?.id}var Vw=class extends ko{#e;#t=void 0;#r;#a;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Ou(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&di(r.mutationKey)!==di(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#a=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??My();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Xr.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#a.onSuccess?.(t.data,r,a,i),this.#a.onSettled?.(t.data,null,r,a,i)):t?.type==="error"&&(this.#a.onError?.(t.error,r,a,i),this.#a.onSettled?.(void 0,t.error,r,a,i))}this.listeners.forEach(r=>{r(this.#t)})})}},Yw=class extends ko{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const a=t.queryKey,i=t.queryHash??v0(a,t);let c=this.get(i);return c||(c=new zw({client:e,queryKey:a,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(c)),c}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Xr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Pm(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Pm(e,r)):t}notify(e){Xr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Xr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Xr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Kw=class{#e;#t;#r;#a;#n;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new Yw,this.#t=e.mutationCache||new Gw,this.#r=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=_0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Iu.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Os(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(e,t,r){const a=this.defaultQueryOptions({queryKey:e}),c=this.#e.get(a.queryHash)?.state.data,u=Rw(t,c);if(u!==void 0)return this.#e.build(this,a).setData(u,{...r,manual:!0})}setQueriesData(e,t,r){return Xr.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Xr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Xr.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},a=Xr.batch(()=>this.#e.findAll(e).map(i=>i.cancel(r)));return Promise.all(a).then(En).catch(En)}invalidateQueries(e,t={}){return Xr.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=Xr.batch(()=>this.#e.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let c=i.fetch(void 0,r);return r.throwOnError||(c=c.catch(En)),i.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(a).then(En)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(Os(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(En).catch(En)}fetchInfiniteQuery(e){return e.behavior=Gm(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(En).catch(En)}ensureInfiniteQueryData(e){return e.behavior=Gm(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Iu.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#a.set(di(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(a=>{Wl(e,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(di(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(a=>{Wl(e,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=v0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===b0&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Fy=E.createContext(void 0),w0=e=>{const t=E.useContext(Fy);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Xw=({client:e,children:t})=>(E.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(Fy.Provider,{value:e,children:t})),Ly=E.createContext(!1),Qw=()=>E.useContext(Ly);Ly.Provider;function Jw(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Zw=E.createContext(Jw()),e4=()=>E.useContext(Zw),t4=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},r4=e=>{E.useEffect(()=>{e.clearReset()},[e])},n4=({result:e,errorResetBoundary:t,throwOnError:r,query:a,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(i&&e.data===void 0||Dy(r,[e.error,a])),a4=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...i)=>r(a(...i)):r(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},s4=(e,t)=>e.isLoading&&e.isFetching&&!t,i4=(e,t)=>e?.suspense&&t.isPending,Ym=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function o4(e,t,r){const a=Qw(),i=e4(),c=w0(),u=c.defaultQueryOptions(e);c.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=a?"isRestoring":"optimistic",a4(u),t4(u,i),r4(i);const f=!c.getQueryCache().get(u.queryHash),[h]=E.useState(()=>new t(c,u)),p=h.getOptimisticResult(u),g=!a&&e.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(y=>{const v=g?h.subscribe(Xr.batchCalls(y)):En;return h.updateResult(),v},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),E.useEffect(()=>{h.setOptions(u)},[u,h]),i4(u,p))throw Ym(u,h,i);if(n4({result:p,errorResetBoundary:i,throwOnError:u.throwOnError,query:c.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw p.error;return c.getDefaultOptions().queries?._experimental_afterQuery?.(u,p),u.experimental_prefetchInRender&&!ui&&s4(p,a)&&(f?Ym(u,h,i):c.getQueryCache().get(u.queryHash)?.promise)?.catch(En).finally(()=>{h.updateResult()}),u.notifyOnChangeProps?p:h.trackResult(p)}function T0(e,t){return o4(e,Uw)}function Km(e,t){const r=w0(),[a]=E.useState(()=>new Vw(r,e));E.useEffect(()=>{a.setOptions(e)},[a,e]);const i=E.useSyncExternalStore(E.useCallback(u=>a.subscribe(Xr.batchCalls(u)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),c=E.useCallback((u,f)=>{a.mutate(u,f).catch(En)},[a]);if(i.error&&Dy(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:c,mutateAsync:i.mutate}}const l4="modulepreload",c4=function(e){return"/retailpos/"+e},Xm={},Zl=function(t,r,a){let i=Promise.resolve();if(r&&r.length>0){let p=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var u=p;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=f?.nonce||f?.getAttribute("nonce");i=p(r.map(g=>{if(g=c4(g),g in Xm)return;Xm[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":l4,y||(b.as="script"),b.crossOrigin="",b.href=g,h&&b.setAttribute("nonce",h),document.head.appendChild(b),y)return new Promise((w,_)=>{b.addEventListener("load",w),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return i.then(f=>{for(const h of f||[])h.status==="rejected"&&c(h.reason);return t().catch(c)})},u4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Zl(async()=>{const{default:a}=await Promise.resolve().then(()=>jo);return{default:a}},[]).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class E0 extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class d4 extends E0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Qm extends E0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Jm extends E0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Yh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Yh||(Yh={}));var f4=function(e,t,r,a){function i(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function f(g){try{p(a.next(g))}catch(y){u(y)}}function h(g){try{p(a.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):i(g.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class h4{constructor(t,{headers:r={},customFetch:a,region:i=Yh.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=u4(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return f4(this,void 0,void 0,function*(){try{const{headers:i,method:c,body:u}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${t}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let g;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)));const y=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),i),body:g}).catch(_=>{throw new d4(_)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new Qm(y);if(!y.ok)throw new Jm(y);let b=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield y.json():b==="application/octet-stream"?w=yield y.blob():b==="text/event-stream"?w=y:b==="multipart/form-data"?w=yield y.formData():w=yield y.text(),{data:w,error:null,response:y}}catch(i){return{data:null,error:i,response:i instanceof Jm||i instanceof Qm?i.context:void 0}}})}}var en={},Ji={},Zi={},eo={},to={},ro={},p4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_o=p4();const g4=_o.fetch,Py=_o.fetch.bind(_o),zy=_o.Headers,x4=_o.Request,m4=_o.Response,jo=Object.freeze(Object.defineProperty({__proto__:null,Headers:zy,Request:x4,Response:m4,default:Py,fetch:g4},Symbol.toStringTag,{value:"Module"})),y4=G_(jo);var gu={},Zm;function Uy(){if(Zm)return gu;Zm=1,Object.defineProperty(gu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return gu.default=e,gu}var e1;function Wy(){if(e1)return ro;e1=1;var e=ro&&ro.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ro,"__esModule",{value:!0});const t=e(y4),r=e(Uy());class a{constructor(c){var u,f;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(f=c.isMaybeSingle)!==null&&f!==void 0?f:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let h=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,y,v,b;let w=null,_=null,S=null,A=p.status,D=p.statusText;if(p.ok){if(this.method!=="HEAD"){const oe=await p.text();oe===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?_=oe:_=JSON.parse(oe))}const G=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),Z=(v=p.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");G&&Z&&Z.length>1&&(S=parseInt(Z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(w={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,S=null,A=406,D="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const G=await p.text();try{w=JSON.parse(G),Array.isArray(w)&&p.status===404&&(_=[],w=null,A=200,D="OK")}catch{p.status===404&&G===""?(A=204,D="No Content"):w={message:G}}if(w&&this.isMaybeSingle&&(!((b=w?.details)===null||b===void 0)&&b.includes("0 rows"))&&(w=null,A=200,D="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:_,count:S,status:A,statusText:D}});return this.shouldThrowOnError||(h=h.catch(p=>{var g,y,v;return{error:{message:`${(g=p?.name)!==null&&g!==void 0?g:"FetchError"}: ${p?.message}`,details:`${(y=p?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=p?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(c,u)}returns(){return this}overrideTypes(){return this}}return ro.default=a,ro}var t1;function Hy(){if(t1)return to;t1=1;var e=to&&to.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(to,"__esModule",{value:!0});const t=e(Wy());class r extends t.default{select(i){let c=!1;const u=(i??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:c=!0,nullsFirst:u,foreignTable:f,referencedTable:h=f}={}){const p=h?`${h}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${i}.${c?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:c,referencedTable:u=c}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${i}`),this}range(i,c,{foreignTable:u,referencedTable:f=u}={}){const h=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${i}`),this.url.searchParams.set(p,`${c-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:c=!1,settings:u=!1,buffers:f=!1,wal:h=!1,format:p="text"}={}){var g;const y=[i?"analyze":null,c?"verbose":null,u?"settings":null,f?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${v}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return to.default=r,to}var r1;function k0(){if(r1)return eo;r1=1;var e=eo&&eo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(eo,"__esModule",{value:!0});const t=e(Hy());class r extends t.default{eq(i,c){return this.url.searchParams.append(i,`eq.${c}`),this}neq(i,c){return this.url.searchParams.append(i,`neq.${c}`),this}gt(i,c){return this.url.searchParams.append(i,`gt.${c}`),this}gte(i,c){return this.url.searchParams.append(i,`gte.${c}`),this}lt(i,c){return this.url.searchParams.append(i,`lt.${c}`),this}lte(i,c){return this.url.searchParams.append(i,`lte.${c}`),this}like(i,c){return this.url.searchParams.append(i,`like.${c}`),this}likeAllOf(i,c){return this.url.searchParams.append(i,`like(all).{${c.join(",")}}`),this}likeAnyOf(i,c){return this.url.searchParams.append(i,`like(any).{${c.join(",")}}`),this}ilike(i,c){return this.url.searchParams.append(i,`ilike.${c}`),this}ilikeAllOf(i,c){return this.url.searchParams.append(i,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(i,c){return this.url.searchParams.append(i,`ilike(any).{${c.join(",")}}`),this}is(i,c){return this.url.searchParams.append(i,`is.${c}`),this}in(i,c){const u=Array.from(new Set(c)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(i,`in.(${u})`),this}contains(i,c){return typeof c=="string"?this.url.searchParams.append(i,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(i,`cs.{${c.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(c)}`),this}containedBy(i,c){return typeof c=="string"?this.url.searchParams.append(i,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(i,`cd.{${c.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(c)}`),this}rangeGt(i,c){return this.url.searchParams.append(i,`sr.${c}`),this}rangeGte(i,c){return this.url.searchParams.append(i,`nxl.${c}`),this}rangeLt(i,c){return this.url.searchParams.append(i,`sl.${c}`),this}rangeLte(i,c){return this.url.searchParams.append(i,`nxr.${c}`),this}rangeAdjacent(i,c){return this.url.searchParams.append(i,`adj.${c}`),this}overlaps(i,c){return typeof c=="string"?this.url.searchParams.append(i,`ov.${c}`):this.url.searchParams.append(i,`ov.{${c.join(",")}}`),this}textSearch(i,c,{config:u,type:f}={}){let h="";f==="plain"?h="pl":f==="phrase"?h="ph":f==="websearch"&&(h="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(i,`${h}fts${p}.${c}`),this}match(i){return Object.entries(i).forEach(([c,u])=>{this.url.searchParams.append(c,`eq.${u}`)}),this}not(i,c,u){return this.url.searchParams.append(i,`not.${c}.${u}`),this}or(i,{foreignTable:c,referencedTable:u=c}={}){const f=u?`${u}.or`:"or";return this.url.searchParams.append(f,`(${i})`),this}filter(i,c,u){return this.url.searchParams.append(i,`${c}.${u}`),this}}return eo.default=r,eo}var n1;function qy(){if(n1)return Zi;n1=1;var e=Zi&&Zi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Zi,"__esModule",{value:!0});const t=e(k0());class r{constructor(i,{headers:c={},schema:u,fetch:f}){this.url=i,this.headers=new Headers(c),this.schema=u,this.fetch=f}select(i,{head:c=!1,count:u}={}){const f=c?"HEAD":"GET";let h=!1;const p=(i??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",p),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:c,defaultToNull:u=!0}={}){var f;const h="POST";if(c&&this.headers.append("Prefer",`count=${c}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(i,{onConflict:c,ignoreDuplicates:u=!1,count:f,defaultToNull:h=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),f&&this.headers.append("Prefer",`count=${f}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const y=i.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(i,{count:c}={}){var u;const f="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:i}={}){var c;const u="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Zi.default=r,Zi}var a1;function v4(){if(a1)return Ji;a1=1;var e=Ji&&Ji.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ji,"__esModule",{value:!0});const t=e(qy()),r=e(k0());class a{constructor(c,{headers:u={},schema:f,fetch:h}={}){this.url=c,this.headers=new Headers(u),this.schemaName=f,this.fetch=h}from(c){const u=new URL(`${this.url}/${c}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new a(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:f=!1,get:h=!1,count:p}={}){var g;let y;const v=new URL(`${this.url}/rpc/${c}`);let b;f||h?(y=f?"HEAD":"GET",Object.entries(u).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{v.searchParams.append(_,S)})):(y="POST",b=u);const w=new Headers(this.headers);return p&&w.set("Prefer",`count=${p}`),new r.default({method:y,url:v,headers:w,schema:this.schemaName,body:b,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Ji.default=a,Ji}var s1;function b4(){if(s1)return en;s1=1;var e=en&&en.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(en,"__esModule",{value:!0}),en.PostgrestError=en.PostgrestBuilder=en.PostgrestTransformBuilder=en.PostgrestFilterBuilder=en.PostgrestQueryBuilder=en.PostgrestClient=void 0;const t=e(v4());en.PostgrestClient=t.default;const r=e(qy());en.PostgrestQueryBuilder=r.default;const a=e(k0());en.PostgrestFilterBuilder=a.default;const i=e(Hy());en.PostgrestTransformBuilder=i.default;const c=e(Wy());en.PostgrestBuilder=c.default;const u=e(Uy());return en.PostgrestError=u.default,en.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:c.default,PostgrestError:u.default},en}var _4=b4();const S4=c0(_4),{PostgrestClient:w4,PostgrestQueryBuilder:jI,PostgrestFilterBuilder:CI,PostgrestTransformBuilder:AI,PostgrestBuilder:RI,PostgrestError:DI}=S4;class T4{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const a=r.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const a=this.getWebSocketConstructor();return new a(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const E4="2.15.5",k4=`realtime-js/${E4}`,j4="1.0.0",Kh=1e4,C4=1e3,A4=100;var Dl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Dl||(Dl={}));var Vr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Vr||(Vr={}));var ya;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ya||(ya={}));var Xh;(function(e){e.websocket="websocket"})(Xh||(Xh={}));var si;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(si||(si={}));class R4{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const i=r.getUint8(1),c=r.getUint8(2);let u=this.HEADER_LENGTH+2;const f=a.decode(t.slice(u,u+i));u=u+i;const h=a.decode(t.slice(u,u+c));u=u+c;const p=JSON.parse(a.decode(t.slice(u,t.byteLength)));return{ref:null,topic:f,event:h,payload:p}}}class $y{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Sr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Sr||(Sr={}));const i1=(e,t,r={})=>{var a;const i=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((c,u)=>(c[u]=D4(u,e,t,i),c),{})},D4=(e,t,r,a)=>{const i=t.find(f=>f.name===e),c=i?.type,u=r[e];return c&&!a.includes(c)?Gy(c,u):Qh(u)},Gy=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return B4(t,r)}switch(e){case Sr.bool:return N4(t);case Sr.float4:case Sr.float8:case Sr.int2:case Sr.int4:case Sr.int8:case Sr.numeric:case Sr.oid:return O4(t);case Sr.json:case Sr.jsonb:return I4(t);case Sr.timestamp:return M4(t);case Sr.abstime:case Sr.date:case Sr.daterange:case Sr.int4range:case Sr.int8range:case Sr.money:case Sr.reltime:case Sr.text:case Sr.time:case Sr.timestamptz:case Sr.timetz:case Sr.tsrange:case Sr.tstzrange:return Qh(t);default:return Qh(t)}},Qh=e=>e,N4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},O4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},I4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},B4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let c;const u=e.slice(1,r);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(f=>Gy(t,f))}return e},M4=e=>typeof e=="string"?e.replace(" ","T"):e,Vy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class bh{constructor(t,r,a={},i=Kh){this.channel=t,this.event=r,this.payload=a,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var o1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(o1||(o1={}));class Nl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},i=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nl.syncState(this.state,i,c,u),this.pendingDiffs.forEach(h=>{this.state=Nl.syncDiff(this.state,h,c,u)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},i=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Nl.syncDiff(this.state,i,c,u),f())}),this.onJoin((i,c,u)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:c,newPresences:u})}),this.onLeave((i,c,u)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,i){const c=this.cloneDeep(t),u=this.transformState(r),f={},h={};return this.map(c,(p,g)=>{u[p]||(h[p]=g)}),this.map(u,(p,g)=>{const y=c[p];if(y){const v=g.map(S=>S.presence_ref),b=y.map(S=>S.presence_ref),w=g.filter(S=>b.indexOf(S.presence_ref)<0),_=y.filter(S=>v.indexOf(S.presence_ref)<0);w.length>0&&(f[p]=w),_.length>0&&(h[p]=_)}else f[p]=g}),this.syncDiff(c,{joins:f,leaves:h},a,i)}static syncDiff(t,r,a,i){const{joins:c,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),i||(i=()=>{}),this.map(c,(f,h)=>{var p;const g=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(h),g.length>0){const y=t[f].map(b=>b.presence_ref),v=g.filter(b=>y.indexOf(b.presence_ref)<0);t[f].unshift(...v)}a(f,g,h)}),this.map(u,(f,h)=>{let p=t[f];if(!p)return;const g=h.map(y=>y.presence_ref);p=p.filter(y=>g.indexOf(y.presence_ref)<0),t[f]=p,i(f,p,h),p.length===0&&delete t[f]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const i=t[a];return"metas"in i?r[a]=i.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[a]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var l1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(l1||(l1={}));var Ol;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ol||(Ol={}));var Xa;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xa||(Xa={}));class j0{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=Vr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new bh(this,ya.join,this.params,this.timeout),this.rejoinTimer=new $y(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Vr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Vr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ya.reply,{},(i,c)=>{this._trigger(this._replyEventName(c),i)}),this.presence=new Nl(this),this.broadcastEndpointURL=Vy(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,i,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Vr.closed){const{config:{broadcast:u,presence:f,private:h}}=this.params,p=(i=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[Ol.PRESENCE]&&this.bindings[Ol.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,y={},v={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:g}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>t?.(Xa.CHANNEL_ERROR,b)),this._onClose(()=>t?.(Xa.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var w;if(this.socket.setAuth(),b===void 0){t?.(Xa.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(w=_?.length)!==null&&w!==void 0?w:0,A=[];for(let D=0;D<S;D++){const I=_[D],{filter:{event:G,schema:Z,table:oe,filter:V}}=I,P=b&&b[D];if(P&&P.event===G&&P.schema===Z&&P.table===oe&&P.filter===V)A.push(Object.assign(Object.assign({},I),{id:P.id}));else{this.unsubscribe(),this.state=Vr.errored,t?.(Xa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,t&&t(Xa.SUBSCRIBED);return}}).receive("error",b=>{this.state=Vr.errored,t?.(Xa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t?.(Xa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this.state===Vr.joined&&t===Ol.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,a)}async send(t,r={}){var a,i;if(!this._canPush()&&t.type==="broadcast"){const{event:c,payload:u}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,f,h;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Vr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ya.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(i=>{a=new bh(this,ya.leave,{},t),a.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vr.closed,this.bindings={}}async _fetchWithTimeout(t,r,a){const i=new AbortController,c=setTimeout(()=>i.abort(),a),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(c),u}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new bh(this,t,r,a);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>A4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var i,c;const u=t.toLocaleLowerCase(),{close:f,error:h,leave:p,join:g}=ya;if(a&&[f,h,p,g].indexOf(u)>=0&&a!==this._joinRef())return;let v=this._onMessage(u,r,a);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var w,_,S;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((S=(_=b.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===u}).map(b=>b.callback(v,a)):(c=this.bindings[u])===null||c===void 0||c.filter(b=>{var w,_,S,A,D,I;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const G=b.id,Z=(w=b.filter)===null||w===void 0?void 0:w.event;return G&&((_=r.ids)===null||_===void 0?void 0:_.includes(G))&&(Z==="*"||Z?.toLocaleLowerCase()===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const G=(D=(A=b?.filter)===null||A===void 0?void 0:A.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return G==="*"||G===((I=r?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:_,table:S,commit_timestamp:A,type:D,errors:I}=w;v=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:A,eventType:D,new:{},old:{},errors:I}),this._getPayloadRecords(w))}b.callback(v,a)})}_isClosed(){return this.state===Vr.closed}_isJoined(){return this.state===Vr.joined}_isJoining(){return this.state===Vr.joining}_isLeaving(){return this.state===Vr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const i=t.toLocaleLowerCase(),c={type:i,filter:r,callback:a};return this.bindings[i]?this.bindings[i].push(c):this.bindings[i]=[c],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(i=>{var c;return!(((c=i.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&j0.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ya.close,{},t)}_onError(t){this._on(ya.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=i1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=i1(t.columns,t.old_record)),r}}const _h=()=>{},xu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},F4=[1e3,2e3,5e3,1e4],L4=1e4,P4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class z4{constructor(t,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kh,this.transport=null,this.heartbeatIntervalMs=xu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_h,this.ref=0,this.reconnectTimer=null,this.logger=_h,this.conn=null,this.sendBuffer=[],this.serializer=new R4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let c;return i?c=i:typeof fetch>"u"?c=(...u)=>Zl(async()=>{const{default:f}=await Promise.resolve().then(()=>jo);return{default:f}},void 0).then(({default:f})=>f(...u)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...u)=>c(...u)},!(!((a=r?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Xh.websocket}`,this.httpEndpoint=Vy(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=T4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:j4}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Dl.connecting:return si.Connecting;case Dl.open:return si.Open;case Dl.closing:return si.Closing;default:return si.Closed}}isConnected(){return this.connectionState()===si.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const a=`realtime:${t}`,i=this.getChannels().find(c=>c.topic===a);if(i)return i;{const c=new j0(`realtime:${t}`,r,this);return this.channels.push(c),c}}push(t){const{topic:r,event:a,payload:i,ref:c}=t,u=()=>{this.encode(t,f=>{var h;(h=this.conn)===null||h===void 0||h.send(f)})};this.log("push",`${r} ${a} (${c})`,i),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(C4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},xu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:i,payload:c,ref:u}=r,f=u?`(${u})`:"",h=c.status||"";this.log("receive",`${h} ${a} ${i} ${f}`.trim(),c),this.channels.filter(p=>p._isMember(a)).forEach(p=>p._trigger(i,c,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ya.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${a}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([P4],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:k4};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(ya.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new $y(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,a,i,c,u,f,h,p,g;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(a=t?.timeout)!==null&&a!==void 0?a:Kh,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:xu.HEARTBEAT_INTERVAL,this.worker=(c=t?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:_h,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t?.reconnectAfterMs)!==null&&h!==void 0?h:(y=>F4[y-1]||L4),this.encode=(p=t?.encode)!==null&&p!==void 0?p:((y,v)=>v(JSON.stringify(y))),this.decode=(g=t?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class C0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Kr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class U4 extends C0{constructor(t,r,a){super(t),this.name="StorageApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Jh extends C0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var W4=function(e,t,r,a){function i(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function f(g){try{p(a.next(g))}catch(y){u(y)}}function h(g){try{p(a.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):i(g.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Yy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Zl(async()=>{const{default:a}=await Promise.resolve().then(()=>jo);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},H4=()=>W4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zl(()=>Promise.resolve().then(()=>jo),void 0)).Response:Response}),Zh=e=>{if(Array.isArray(e))return e.map(r=>Zh(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const i=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[i]=Zh(a)}),t},q4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var gi=function(e,t,r,a){function i(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function f(g){try{p(a.next(g))}catch(y){u(y)}}function h(g){try{p(a.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):i(g.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Sh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$4=(e,t,r)=>gi(void 0,void 0,void 0,function*(){const a=yield H4();e instanceof a&&!r?.noResolveJson?e.json().then(i=>{const c=e.status||500,u=i?.statusCode||c+"";t(new U4(Sh(i),c,u))}).catch(i=>{t(new Jh(Sh(i),i))}):t(new Jh(Sh(e),e))}),G4=(e,t,r,a)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!a?i:(q4(a)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(a)):i.body=a,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function ec(e,t,r,a,i,c){return gi(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(r,G4(t,a,i,c)).then(h=>{if(!h.ok)throw h;return a?.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>$4(h,f,a))})})}function Bu(e,t,r,a){return gi(this,void 0,void 0,function*(){return ec(e,"GET",t,r,a)})}function Na(e,t,r,a,i){return gi(this,void 0,void 0,function*(){return ec(e,"POST",t,a,i,r)})}function e0(e,t,r,a,i){return gi(this,void 0,void 0,function*(){return ec(e,"PUT",t,a,i,r)})}function V4(e,t,r,a){return gi(this,void 0,void 0,function*(){return ec(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Ky(e,t,r,a,i){return gi(this,void 0,void 0,function*(){return ec(e,"DELETE",t,a,i,r)})}var wn=function(e,t,r,a){function i(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function f(g){try{p(a.next(g))}catch(y){u(y)}}function h(g){try{p(a.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):i(g.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Y4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},c1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class K4{constructor(t,r={},a,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=a,this.fetch=Yy(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,a,i){return wn(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},c1),i);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),h&&c.append("metadata",this.encodeMetadata(h)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",u.cacheControl),h&&c.append("metadata",this.encodeMetadata(h))):(c=a,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,h&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),i?.headers&&(f=Object.assign(Object.assign({},f),i.headers));const p=this._removeEmptyFolders(r),g=this._getFinalPath(p),y=yield(t=="PUT"?e0:Na)(this.fetch,`${this.url}/object/${g}`,c,Object.assign({headers:f},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Kr(c))return{data:null,error:c};throw c}})}upload(t,r,a){return wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,i){return wn(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",r);try{let h;const p=Object.assign({upsert:c1.upsert},i),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&a instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",a)):typeof FormData<"u"&&a instanceof FormData?(h=a,h.append("cacheControl",p.cacheControl)):(h=a,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const y=yield e0(this.fetch,f.toString(),h,{headers:g});return{data:{path:c,fullPath:y.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Kr(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,r){return wn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const i=Object.assign({},this.headers);r?.upsert&&(i["x-upsert"]="true");const c=yield Na(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:i}),u=new URL(this.url+c.url),f=u.searchParams.get("token");if(!f)throw new C0("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:f},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Kr(a))return{data:null,error:a};throw a}})}update(t,r,a){return wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return wn(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}copy(t,r,a){return wn(this,void 0,void 0,function*(){try{return{data:{path:(yield Na(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,a){return wn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),c=yield Na(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,a){return wn(this,void 0,void 0,function*(){try{const i=yield Na(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),c=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:i.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}download(t,r){return wn(this,void 0,void 0,function*(){const i=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),u=c?`?${c}`:"";try{const f=this._getFinalPath(t);return{data:yield(yield Bu(this.fetch,`${this.url}/${i}/${f}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Kr(f))return{data:null,error:f};throw f}})}info(t){return wn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield Bu(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Zh(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Kr(a))return{data:null,error:a};throw a}})}exists(t){return wn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield V4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Kr(a)&&a instanceof Jh){const i=a.originalError;if([400,404].includes(i?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),i=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&i.push(c);const f=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&i.push(h);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${a}${p}`)}}}remove(t){return wn(this,void 0,void 0,function*(){try{return{data:yield Ky(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}list(t,r,a){return wn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Y4),r),{prefix:t||""});return{data:yield Na(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},a),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}listV2(t,r){return wn(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield Na(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Kr(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const X4="2.12.1",Q4={"X-Client-Info":`storage-js/${X4}`};var no=function(e,t,r,a){function i(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function f(g){try{p(a.next(g))}catch(y){u(y)}}function h(g){try{p(a.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):i(g.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class J4{constructor(t,r={},a,i){this.shouldThrowOnError=!1;const c=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},Q4),r),this.fetch=Yy(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return no(this,void 0,void 0,function*(){try{return{data:yield Bu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kr(t))return{data:null,error:t};throw t}})}getBucket(t){return no(this,void 0,void 0,function*(){try{return{data:yield Bu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return no(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Kr(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return no(this,void 0,void 0,function*(){try{return{data:yield e0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Kr(a))return{data:null,error:a};throw a}})}emptyBucket(t){return no(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return no(this,void 0,void 0,function*(){try{return{data:yield Ky(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}}class Z4 extends J4{constructor(t,r={},a,i){super(t,r,a,i)}from(t){return new K4(this.url,this.headers,t,this.fetch)}}const eT="2.57.4";let Al="";typeof Deno<"u"?Al="deno":typeof document<"u"?Al="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Al="react-native":Al="node";const tT={"X-Client-Info":`supabase-js-${Al}/${eT}`},rT={headers:tT},nT={schema:"public"},aT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sT={};var iT=function(e,t,r,a){function i(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function f(g){try{p(a.next(g))}catch(y){u(y)}}function h(g){try{p(a.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):i(g.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const oT=e=>{let t;return e?t=e:typeof fetch>"u"?t=Py:t=fetch,(...r)=>t(...r)},lT=()=>typeof Headers>"u"?zy:Headers,cT=(e,t,r)=>{const a=oT(r),i=lT();return(c,u)=>iT(void 0,void 0,void 0,function*(){var f;const h=(f=yield t())!==null&&f!==void 0?f:e;let p=new i(u?.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),a(c,Object.assign(Object.assign({},u),{headers:p}))})};var uT=function(e,t,r,a){function i(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function f(g){try{p(a.next(g))}catch(y){u(y)}}function h(g){try{p(a.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):i(g.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};function dT(e){return e.endsWith("/")?e:e+"/"}function fT(e,t){var r,a;const{db:i,auth:c,realtime:u,global:f}=e,{db:h,auth:p,realtime:g,global:y}=t,v={db:Object.assign(Object.assign({},h),i),auth:Object.assign(Object.assign({},p),c),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},y),f),{headers:Object.assign(Object.assign({},(r=y?.headers)!==null&&r!==void 0?r:{}),(a=f?.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>uT(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function hT(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Xy="2.71.1",ho=30*1e3,t0=3,wh=t0*ho,pT="http://localhost:9999",gT="supabase.auth.token",xT={"X-Client-Info":`gotrue-js/${Xy}`},r0="X-Supabase-Api-Version",Qy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yT=600*1e3;class A0 extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function Nt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class vT extends A0{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function bT(e){return Nt(e)&&e.name==="AuthApiError"}class Jy extends A0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ls extends A0{constructor(t,r,a,i){super(t,a,i),this.name=r,this.status=a}}class As extends Ls{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _T(e){return Nt(e)&&e.name==="AuthSessionMissingError"}class mu extends Ls{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yu extends Ls{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class vu extends Ls{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ST(e){return Nt(e)&&e.name==="AuthImplicitGrantRedirectError"}class u1 extends Ls{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class n0 extends Ls{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Th(e){return Nt(e)&&e.name==="AuthRetryableFetchError"}class d1 extends Ls{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class a0 extends Ls{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),f1=` 	
\r=`.split(""),wT=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<f1.length;t+=1)e[f1[t].charCodeAt(0)]=-2;for(let t=0;t<Mu.length;t+=1)e[Mu[t].charCodeAt(0)]=t;return e})();function h1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Mu[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Mu[a]),t.queuedBits-=6}}function Zy(e,t,r){const a=wT[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function p1(e){const t=[],r=u=>{t.push(String.fromCodePoint(u))},a={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},c=u=>{kT(u,a,r)};for(let u=0;u<e.length;u+=1)Zy(e.charCodeAt(u),i,c);return t.join("")}function TT(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ET(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const i=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}TT(a,t)}}function kT(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function jT(e){const t=[],r={queue:0,queuedBits:0},a=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Zy(e.charCodeAt(i),r,a);return new Uint8Array(t)}function CT(e){const t=[];return ET(e,r=>t.push(r)),new Uint8Array(t)}function AT(e){const t=[],r={queue:0,queuedBits:0},a=i=>{t.push(i)};return e.forEach(i=>h1(i,r,a)),h1(null,r,a),t.join("")}function RT(e){return Math.round(Date.now()/1e3)+e}function DT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ma=()=>typeof window<"u"&&typeof document<"u",ri={tested:!1,writable:!1},ev=()=>{if(!ma())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ri.tested)return ri.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ri.tested=!0,ri.writable=!0}catch{ri.tested=!0,ri.writable=!1}return ri.writable};function NT(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,c)=>{t[c]=i})}catch{}return r.searchParams.forEach((a,i)=>{t[i]=a}),t}const tv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Zl(async()=>{const{default:a}=await Promise.resolve().then(()=>jo);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},OT=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",po=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ni=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},js=async(e,t)=>{await e.removeItem(t)};class ed{constructor(){this.promise=new ed.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ed.promiseConstructor=Promise;function Eh(e){const t=e.split(".");if(t.length!==3)throw new a0("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!mT.test(t[a]))throw new a0("JWT not in base64url format");return{header:JSON.parse(p1(t[0])),payload:JSON.parse(p1(t[1])),signature:jT(t[2]),raw:{header:t[0],payload:t[1]}}}async function IT(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function BT(e,t){return new Promise((a,i)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await e(c);if(!t(c,null,u)){a(u);return}}catch(u){if(!t(c,u)){i(u);return}}})()})}function MT(e){return("0"+e.toString(16)).substr(-2)}function FT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let i="";for(let c=0;c<56;c++)i+=r.charAt(Math.floor(Math.random()*a));return i}return crypto.getRandomValues(t),Array.from(t,MT).join("")}async function LT(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(a);return Array.from(i).map(c=>String.fromCharCode(c)).join("")}async function PT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await LT(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ao(e,t,r=!1){const a=FT();let i=a;r&&(i+="/PASSWORD_RECOVERY"),await po(e,`${t}-code-verifier`,i);const c=await PT(a);return[c,a===c?"plain":"s256"]}const zT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UT(e){const t=e.headers.get(r0);if(!t||!t.match(zT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function WT(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function HT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const qT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function so(e){if(!qT.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kh(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function g1(e){return JSON.parse(JSON.stringify(e))}var $T=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};const ai=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),GT=[502,503,504];async function x1(e){var t;if(!OT(e))throw new n0(ai(e),0);if(GT.includes(e.status))throw new n0(ai(e),e.status);let r;try{r=await e.json()}catch(c){throw new Jy(ai(c),c)}let a;const i=UT(e);if(i&&i.getTime()>=Qy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new d1(ai(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new As}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new d1(ai(r),e.status,r.weak_password.reasons);throw new vT(ai(r),e.status||500,a)}const VT=(e,t,r,a)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(a),Object.assign(Object.assign({},i),r))};async function qt(e,t,r,a){var i;const c=Object.assign({},a?.headers);c[r0]||(c[r0]=Qy["2024-01-01"].name),a?.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const u=(i=a?.query)!==null&&i!==void 0?i:{};a?.redirectTo&&(u.redirect_to=a.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await YT(e,t,r+f,{headers:c,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(h):{data:Object.assign({},h),error:null}}async function YT(e,t,r,a,i,c){const u=VT(t,a,i,c);let f;try{f=await e(r,Object.assign({},u))}catch(h){throw console.error(h),new n0(ai(h),0)}if(f.ok||await x1(f),a?.noResolveJson)return f;try{return await f.json()}catch(h){await x1(h)}}function Ka(e){var t;let r=null;JT(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=RT(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function m1(e){const t=Ka(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function KT(e){return{data:e,error:null}}function XT(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:i,verification_type:c}=e,u=$T(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:r,hashed_token:a,redirect_to:i,verification_type:c},h=Object.assign({},u);return{data:{properties:f,user:h},error:null}}function QT(e){return e}function JT(e){return e.access_token&&e.refresh_token&&e.expires_in}const jh=["global","local","others"];var ZT=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(r[a[i]]=e[a[i]]);return r};class e3{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=tv(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=jh[0]){if(jh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jh.join(", ")}`);try{return await qt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Nt(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rs})}catch(a){if(Nt(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=ZT(t,["options"]),i=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(i.new_email=a?.newEmail,delete i.newEmail),await qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:XT,redirectTo:r?.redirectTo})}catch(r){if(Nt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rs})}catch(r){if(Nt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,i,c,u,f,h;try{const p={nextPage:null,lastPage:0,total:0},g=await qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&c!==void 0?c:""},xform:QT});if(g.error)throw g.error;const y=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(h=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);p[`${S}Page`]=_}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Nt(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){so(t);try{return await qt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rs})}catch(r){if(Nt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){so(t);try{return await qt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Rs})}catch(a){if(Nt(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){so(t);try{return await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rs})}catch(a){if(Nt(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){so(t.userId);try{const{data:r,error:a}=await qt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:a}}catch(r){if(Nt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){so(t.userId),so(t.id);try{return{data:await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Nt(r))return{data:null,error:r};throw r}}}function y1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function t3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const io={debug:!!(globalThis&&ev()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class r3 extends rv{}async function n3(e,t,r){io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),io.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async i=>{if(i){io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{io.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw io.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new r3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(io.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}t3();const a3={url:pT,storageKey:gT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function v1(e,t,r){return await r()}const oo={};class Hl{constructor(t){var r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hl.nextInstanceID,Hl.nextInstanceID+=1,this.instanceID>0&&ma()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},a3),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new e3({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=tv(i.fetch),this.lock=i.lock||v1,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ma()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=n3:this.lock=v1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ev()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=y1(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=y1(this.memoryStorage)),ma()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=oo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){oo[this.storageKey]=Object.assign(Object.assign({},oo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=oo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){oo[this.storageKey]=Object.assign(Object.assign({},oo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=NT(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),ma()&&this.detectSessionInUrl&&a!=="none"){const{data:i,error:c}=await this._getSessionFromURL(r,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),ST(c)){const h=(t=c.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:f}=i;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Nt(r)?{error:r}:{error:new Jy("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,i;try{const c=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ka}),{data:u,error:f}=c;if(f||!u)return{data:{user:null,session:null},error:f};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(Nt(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(t){var r,a,i;try{let c;if("email"in t){const{email:g,password:y,options:v}=t;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await ao(this.storage,this.storageKey)),c=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:y,data:(r=v?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:w},xform:Ka})}else if("phone"in t){const{phone:g,password:y,options:v}=t;c=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(a=v?.data)!==null&&a!==void 0?a:{},channel:(i=v?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Ka})}else throw new yu("You must provide either an email or phone number and a password");const{data:u,error:f}=c;if(f||!u)return{data:{user:null,session:null},error:f};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(Nt(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(t){try{let r;if("email"in t){const{email:c,password:u,options:f}=t;r=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:m1})}else if("phone"in t){const{phone:c,password:u,options:f}=t;r=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:m1})}else throw new yu("You must provide either an email or phone number and a password");const{data:a,error:i}=r;return i?{data:{user:null,session:null},error:i}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new mu}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:i})}catch(r){if(Nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,i,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,a,i,c,u,f,h,p,g,y,v,b;let w,_;if("message"in t)w=t.message,_=t.signature;else{const{chain:S,wallet:A,statement:D,options:I}=t;let G;if(ma())if(typeof A=="object")G=A;else{const oe=window;if("solana"in oe&&typeof oe.solana=="object"&&("signIn"in oe.solana&&typeof oe.solana.signIn=="function"||"signMessage"in oe.solana&&typeof oe.solana.signMessage=="function"))G=oe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=A}const Z=new URL((r=I?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in G&&G.signIn){const oe=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),D?{statement:D}:null));let V;if(Array.isArray(oe)&&oe[0]&&typeof oe[0]=="object")V=oe[0];else if(oe&&typeof oe=="object"&&"signedMessage"in oe&&"signature"in oe)V=oe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)w=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),_=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${Z.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(i=(a=I?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((c=I?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((u=I?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((f=I?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((h=I?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((p=I?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((y=(g=I?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...I.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const oe=await G.signMessage(new TextEncoder().encode(w),"utf8");if(!oe||!(oe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=oe}}try{const{data:S,error:A}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:AT(_)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ka});if(A)throw A;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new mu}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:A})}catch(S){if(Nt(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await ni(this.storage,`${this.storageKey}-code-verifier`),[a,i]=(r??"").split("/");try{const{data:c,error:u}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Ka});if(await js(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new mu}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:i??null}),error:u})}catch(c){if(Nt(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(t){try{const{options:r,provider:a,token:i,access_token:c,nonce:u}=t,f=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:i,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ka}),{data:h,error:p}=f;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new mu}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(r){if(Nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,i,c,u;try{if("email"in t){const{email:f,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await ao(this.storage,this.storageKey));const{error:y}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(a=h?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in t){const{phone:f,options:h}=t,{data:p,error:g}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(i=h?.data)!==null&&i!==void 0?i:{},create_user:(c=h?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(u=h?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:g}}throw new yu("You must provide either an email or phone number.")}catch(f){if(Nt(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(t){var r,a;try{let i,c;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,c=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:u,error:f}=await qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:i,xform:Ka});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,p=u.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(i){if(Nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,a,i;try{let c=null,u=null;return this.flowType==="pkce"&&([c,u]=await ao(this.storage,this.storageKey)),await qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:KT})}catch(c){if(Nt(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new As;const{error:i}=await qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Nt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:i,options:c}=t,{error:u}=await qt(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:i,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:a,type:i,options:c}=t,{data:u,error:f}=await qt(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:i,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:f}}throw new yu("You must provide either an email or phone number and a type")}catch(r){if(Nt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ni(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<wh:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const u=await ni(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=kh()}if(this.storage.isServer&&t.user){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(h,p,g)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,g))})}return{data:{session:t},error:null}}const{session:i,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{session:null},error:c}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rs}):await this._useSession(async r=>{var a,i,c;const{data:u,error:f}=r;if(f)throw f;return!(!((a=u.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new As}:await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0,xform:Rs})})}catch(r){if(Nt(r))return _T(r)&&(await this._removeSession(),await js(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:i,error:c}=a;if(c)throw c;if(!i.session)throw new As;const u=i.session;let f=null,h=null;this.flowType==="pkce"&&t.email!=null&&([f,h]=await ao(this.storage,this.storageKey));const{data:p,error:g}=await qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:h}),jwt:u.access_token,xform:Rs});if(g)throw g;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(a){if(Nt(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new As;const r=Date.now()/1e3;let a=r,i=!0,c=null;const{payload:u}=Eh(t.access_token);if(u.exp&&(a=u.exp,i=a<=r),i){const{session:f,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:h}=await this._getUser(t.access_token);if(h)throw h;c={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(Nt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:u,error:f}=r;if(f)throw f;t=(a=u.session)!==null&&a!==void 0?a:void 0}if(!t?.refresh_token)throw new As;const{session:i,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{user:null,session:null},error:c}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Nt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ma())throw new vu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new vu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new u1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new u1("No code detected.");const{data:D,error:I}=await this._exchangeCodeForSession(t.code);if(I)throw I;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:i,access_token:c,refresh_token:u,expires_in:f,expires_at:h,token_type:p}=t;if(!c||!f||!u||!p)throw new vu("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(f);let v=g+y;h&&(v=parseInt(h));const b=v-g;b*1e3<=ho&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const w=v-y;g-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,g):g-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,g);const{data:_,error:S}=await this._getUser(c);if(S)throw S;const A={provider_token:a,provider_refresh_token:i,access_token:c,expires_in:y,expires_at:v,refresh_token:u,token_type:p,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:t.type},error:null}}catch(a){if(Nt(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ni(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:i,error:c}=r;if(c)return{error:c};const u=(a=i.session)===null||a===void 0?void 0:a.access_token;if(u){const{error:f}=await this.admin.signOut(u,t);if(f&&!(bT(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return t!=="others"&&(await this._removeSession(),await js(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=DT(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,i;try{const{data:{session:c},error:u}=r;if(u)throw u;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,r={}){let a=null,i=null;this.flowType==="pkce"&&([a,i]=await ao(this.storage,this.storageKey,!0));try{return await qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(Nt(c))return{data:null,error:c};throw c}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Nt(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:i}=await this._useSession(async c=>{var u,f,h,p,g;const{data:y,error:v}=c;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await qt(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return ma()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:t.provider,url:a?.url},error:null}}catch(a){if(Nt(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,i;const{data:c,error:u}=r;if(u)throw u;return await qt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Nt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await BT(async i=>(i>0&&await IT(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ka})),(i,c)=>{const u=200*Math.pow(2,i);return c&&Th(c)&&Date.now()+u-a<ho})}catch(a){if(this._debug(r,"error",a),Nt(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),ma()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const i=await ni(this.storage,this.storageKey);if(i&&this.userStorage){let u=await ni(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:i.user},await po(this.userStorage,this.storageKey+"-user",u)),i.user=(t=u?.user)!==null&&t!==void 0?t:kh()}else if(i&&!i.user&&!i.user){const u=await ni(this.storage,this.storageKey+"-user");u&&u?.user?(i.user=u.user,await js(this.storage,this.storageKey+"-user"),await po(this.storage,this.storageKey,i)):i.user=kh()}if(this._debug(a,"session from storage",i),!this._isValidSession(i)){this._debug(a,"session is not valid"),i!==null&&await this._removeSession();return}const c=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<wh;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${wh}s`),c){if(this.autoRefreshToken&&i.refresh_token){const{error:u}=await this._callRefreshToken(i.refresh_token);u&&(console.error(u),Th(u)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(i.access_token);!f&&u?.user?(i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(a,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(a,"error",i),console.error(i);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new As;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ed;const{data:c,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!c.session)throw new As;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={session:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(i,"error",c),Nt(c)){const u={session:null,error:c};return Th(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,a=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,r)}catch(h){c.push(h)}});if(await Promise.all(u),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await po(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const c=g1(i);await po(this.storage,this.storageKey,c)}else{const i=g1(r);await po(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await js(this.storage,this.storageKey),await js(this.storage,this.storageKey+"-code-verifier"),await js(this.storage,this.storageKey+"-user"),this.userStorage&&await js(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ma()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ho);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((a.expires_at*1e3-t)/ho);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ho}ms, refresh threshold is ${t0} ticks`),i<=t0&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ma()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const i=[`provider=${encodeURIComponent(r)}`];if(a?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&i.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,u]=await ao(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});i.push(f.toString())}if(a?.queryParams){const c=new URLSearchParams(a.queryParams);i.push(c.toString())}return a?.skipBrowserRedirect&&i.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:i,error:c}=r;return c?{data:null,error:c}:await qt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Nt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,i;const{data:c,error:u}=r;if(u)return{data:null,error:u};const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:h,error:p}=await qt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((i=h?.totp)===null||i===void 0)&&i.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(Nt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:i,error:c}=r;if(c)return{data:null,error:c};const{data:u,error:f}=await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(r){if(Nt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:i,error:c}=r;return c?{data:null,error:c}:await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Nt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=t?.factors||[],i=a.filter(u=>u.factor_type==="totp"&&u.status==="verified"),c=a.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:a,totp:i,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:i},error:c}=t;if(c)return{data:null,error:c};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Eh(i.access_token);let f=null;u.aal&&(f=u.aal);let h=f;((a=(r=i.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(h="aal2");const g=u.amr||[];return{data:{currentLevel:f,nextLevel:h,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(f=>f.kid===t);if(a)return a;const i=Date.now();if(a=this.jwks.keys.find(f=>f.kid===t),a&&this.jwks_cached_at+yT>i)return a;const{data:c,error:u}=await qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=i,a=c.keys.find(f=>f.kid===t),!a)?null:a}async getClaims(t,r={}){try{let a=t;if(!a){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};a=b.session.access_token}const{header:i,payload:c,signature:u,raw:{header:f,payload:h}}=Eh(a);r?.allowExpired||WT(c.exp);const p=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:c,header:i,signature:u},error:null}}const g=HT(i.alg),y=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,u,CT(`${f}.${h}`)))throw new a0("Invalid JWT signature");return{data:{claims:c,header:i,signature:u},error:null}}catch(a){if(Nt(a))return{data:null,error:a};throw a}}}Hl.nextInstanceID=0;const s3=Hl;class i3 extends s3{constructor(t){super(t)}}var o3=function(e,t,r,a){function i(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function f(g){try{p(a.next(g))}catch(y){u(y)}}function h(g){try{p(a.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):i(g.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class l3{constructor(t,r,a){var i,c,u;this.supabaseUrl=t,this.supabaseKey=r;const f=hT(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:nT,realtime:sT,auth:Object.assign(Object.assign({},aT),{storageKey:h}),global:rT},g=fT(a??{},p);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(c=g.global.headers)!==null&&c!==void 0?c:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,g.global.fetch),this.fetch=cT(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new w4(new URL("rest/v1",f).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Z4(this.storageUrl.href,this.headers,this.fetch,a?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new h4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return o3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:i,userStorage:c,storageKey:u,flowType:f,lock:h,debug:p},g,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i3({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),g),storageKey:u,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:i,userStorage:c,flowType:f,lock:h,debug:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new z4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a?.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const c3=(e,t,r)=>new l3(e,t,r);function u3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}u3()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const d3="https://wuluriiajnaruvaldlhb.supabase.co",f3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bHVyaWlham5hcnV2YWxkbGhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4MDc4OTQsImV4cCI6MjA3MzM4Mzg5NH0.-Dx4fALDwoKHjsxOy1hKsME_DG4ZCQi2PdLCq5wV_hI",h3=async(e,t)=>{const r=e instanceof Request?e:void 0,a=r?.url??(typeof e=="string"?e:e instanceof URL?e.toString():""),i=(t?.method??r?.method??"GET").toUpperCase();if(a.includes("/rest/v1"))try{const{pathname:c}=new URL(a);console.info("[supabase]",i,c),c.includes("pg_timezone_names")&&console.trace("Timezone list requested from Supabase")}catch{console.info("[supabase]",i,a)}return fetch(e,t)},Oe=c3(d3,f3,{global:{fetch:h3}}),li=e=>{let t=0;for(let r=0;r<e.length;r++){const a=e.charCodeAt(r);t=(t<<5)-t+a,t=t&t}return t.toString()},nv=E.createContext(void 0),An=()=>{const e=E.useContext(nv);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},p3=({children:e})=>{const[t,r]=E.useState(null),[a,i]=E.useState(null),[c,u]=E.useState(!0);E.useEffect(()=>{const b=setTimeout(()=>{c&&u(!1)},3e4);(async()=>{try{const{data:{session:S},error:A}=await Oe.auth.getSession();if(S?.user)i(S.user),await f(S.user.id);else{const D=localStorage.getItem("pos_user");D&&r(JSON.parse(D))}}catch{}finally{u(!1)}})();const{data:{subscription:_}}=Oe.auth.onAuthStateChange(async(S,A)=>{if(S==="SIGNED_IN"&&A?.user){i(A.user);try{await f(A.user.id)}catch{}}else S==="SIGNED_OUT"?(i(null),r(null),localStorage.removeItem("pos_user")):S==="TOKEN_REFRESHED"&&A?.user&&i(A.user)});return()=>{clearTimeout(b),_.unsubscribe()}},[]);const f=async b=>{try{const{data:w,error:_}=await Oe.from("users").select("*").eq("user_id",parseInt(b)).single();if(_){console.error("Error loading user:",_),r(null);return}const S={user_id:w.user_id,username:w.username,role:w.role,active:w.active,icon:w.icon,business_id:w.business_id??null};r(S),localStorage.setItem("pos_user",JSON.stringify(S))}catch(w){console.error("Error in loadUserProfile:",w),r(null)}},h=async(b,w)=>{try{u(!0);const _=await p(b,w);return _&&localStorage.setItem("lastLogin",new Date().toLocaleString()),_}catch{return!1}finally{u(!1)}},p=async(b,w)=>{try{const _=li(w),{data:S,error:A}=await Oe.from("users").select("*").eq("username",b).eq("password_hash",_).eq("active",!0).single();if(A||!S)return!1;const D={user_id:S.user_id,username:S.username,role:S.role,active:S.active,icon:S.icon,business_id:S.business_id??null};return r(D),localStorage.setItem("pos_user",JSON.stringify(D)),localStorage.setItem("lastLogin",new Date().toLocaleString()),localStorage.setItem("lastPassword",w),window.location.href="/",!0}catch{return!1}},v={user:t,supabaseUser:a,login:h,register:async(b,w,_)=>{try{u(!0);const{data:S,error:A}=await Oe.from("users").select("user_id").eq("username",b).single();if(S)return console.error("Username already exists"),{success:!1};const{data:D,error:I}=await Oe.from("business_info").insert({name:_,business_name:_,business_type:"Retail Store",address:"Default Address",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("business_id").single();if(I||!D)return console.error("Error creating business:",I),{success:!1};const G=li(w),{data:Z,error:oe}=await Oe.from("users").insert({username:b,password_hash:G,role:"Owner",active:!0,business_id:D.business_id,created_at:new Date().toISOString()}).select("*").single();if(oe||!Z)return console.error("Error creating user:",oe),await Oe.from("business_info").delete().eq("business_id",D.business_id),{success:!1};try{const z=li("admin123"),ie=`admin_${D.business_id}`;await Oe.from("users").insert({username:ie,password_hash:z,role:"Admin",active:!0,business_id:D.business_id,created_at:new Date().toISOString()}),console.log("Admin account created successfully for business:",D.business_id,"with username:",ie)}catch(z){console.warn("Failed to create admin account:",z)}const V={user_id:Z.user_id,username:Z.username,role:Z.role,active:Z.active,icon:Z.icon,business_id:Z.business_id};return r(V),localStorage.setItem("pos_user",JSON.stringify(V)),localStorage.setItem("current_business_id",D.business_id.toString()),localStorage.setItem("lastLogin",new Date().toLocaleString()),{success:!0,adminCredentials:{username:`admin_${D.business_id}`,password:"admin123",businessId:D.business_id}}}catch(S){return console.error("Registration error:",S),{success:!1}}finally{u(!1)}},logout:async()=>{try{a&&await Oe.auth.signOut(),r(null),i(null),localStorage.removeItem("pos_user"),localStorage.removeItem("lastPassword"),window.location.href="/retailpos/login"}catch{window.location.href="/retailpos/login"}},loading:c,currentUserId:a?.id||t?.user_id?.toString()};return o.jsx(nv.Provider,{value:v,children:e})},g3=E.createContext(void 0),x3=({children:e})=>{const{user:t,loading:r}=An(),[a,i]=E.useState(null),[c,u]=E.useState(!0),[f,h]=E.useState(null),p=E.useCallback(async()=>{if(!t?.business_id){i(null),u(!1);return}try{u(!0),h(null);const{data:v,error:b}=await Oe.from("business_info").select("*").eq("business_id",t.business_id).single();if(b)throw b;i(v),localStorage.setItem("current_business_id",v.business_id.toString())}catch(v){console.error("Error loading business:",v),h(v instanceof Error?v.message:"Failed to load business"),i(null)}finally{u(!1)}},[t]),g=E.useCallback(async()=>{await p()},[p]);E.useEffect(()=>{r||p()},[p,r]);const y={currentBusiness:a,currentBusinessId:a?.business_id??null,loading:c||r,error:f,refreshBusiness:g};return o.jsx(g3.Provider,{value:y,children:e})},av=E.createContext(void 0),m3=({children:e})=>{const[t,r]=E.useState(!1);return o.jsx(av.Provider,{value:{isCollapsed:t,setIsCollapsed:r},children:e})},R0=()=>{const e=E.useContext(av);if(e===void 0)throw new Error("useNav must be used within a NavProvider");return e},b1={Admin:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Owner:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Manager:{canManageUsers:!1,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!1,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Cashier:{canManageUsers:!1,canManageProducts:!1,canProcessSales:!0,canViewReports:!1,canChangeSettings:!1,canUploadImages:!1,canLookupProducts:!0,canLookupCustomers:!0}},sv=E.createContext(void 0),y3=({children:e})=>{const{user:t}=An(),r=t?.role||"Cashier",a=b1[r]||b1.Cashier,i=f=>a[f]||!1,u={userRole:r,permissions:a,hasPermission:i,canAccessRoute:f=>{switch(f){case"/admin":return i("canManageUsers");case"/products":return i("canManageProducts")||i("canLookupProducts");case"/sales":return i("canProcessSales");case"/customers":return i("canLookupCustomers");case"/":return!0;default:return!0}}};return o.jsx(sv.Provider,{value:u,children:e})},D0=()=>{const e=E.useContext(sv);if(e===void 0)throw new Error("useRole must be used within a RoleProvider");return e},v3=E.createContext(void 0),b3=({children:e})=>{const[t,r]=E.useState(null),[a,i]=E.useState(!1);E.useEffect(()=>{const f=sessionStorage.getItem("pin_validated");r(f==="true")},[]);const c=async f=>{i(!0);const h="1967";return await new Promise(p=>setTimeout(p,500)),f===h?(r(!0),sessionStorage.setItem("pin_validated","true"),i(!1),!0):(r(!1),i(!1),!1)},u=f=>{r(f)};return o.jsx(v3.Provider,{value:{isPinValid:t,isCheckingPin:a,validatePin:c,setPinValid:u},children:e})},_3=()=>{const{isCollapsed:e,setIsCollapsed:t}=R0();E.useEffect(()=>{const r=i=>{if(e)return;const c=document.querySelector("nav");if(c&&c.contains(i.target))return;i.target.closest('button, a, input, select, textarea, [role="button"], [onclick]')||t(!0)},a=setTimeout(()=>{document.addEventListener("click",r)},100);return()=>{clearTimeout(a),document.removeEventListener("click",r)}},[e,t])},S3=({onSuccess:e,onError:t})=>{const[r,a]=E.useState(1),[i,c]=E.useState(!1),[u,f]=E.useState(null),[h,p]=E.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phoneNumber:""}),[g,y]=E.useState({name:"",businessType:"Retail Store",description:"",address:"",phoneNumber:"",email:"",website:"",vatNumber:"",businessHours:"9:00 AM - 6:00 PM",currency:"USD",timezone:"UTC"}),v=["Retail Store","Restaurant","Service Business","E-commerce","Healthcare","Education","Manufacturing","Other"],b=["USD","EUR","GBP","CAD","AUD","JPY","CHF","CNY","INR","BRL"],w=(z,ie)=>{p(K=>({...K,[z]:ie}))},_=(z,ie)=>{y(K=>({...K,[z]:ie}))},S=z=>{const ie=z.target.files?.[0];if(ie){if(ie.size>5*1024*1024){t("Logo file size must be less than 5MB");return}if(!ie.type.startsWith("image/")){t("Please upload an image file");return}y(xe=>({...xe,logoFile:ie}));const K=new FileReader;K.onload=xe=>{f(xe.target?.result)},K.readAsDataURL(ie)}},A=()=>h.firstName.trim()?h.lastName.trim()?h.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)?h.password?h.password.length<8?(t("Password must be at least 8 characters long"),!1):h.password!==h.confirmPassword?(t("Passwords do not match"),!1):!0:(t("Password is required"),!1):(t("Please enter a valid email address"),!1):(t("Email is required"),!1):(t("Last name is required"),!1):(t("First name is required"),!1),D=()=>g.name.trim()?g.address.trim()?g.phoneNumber.trim()?!0:(t("Business phone number is required"),!1):(t("Business address is required"),!1):(t("Business name is required"),!1),I=async z=>{if(!g.logoFile)return null;try{const ie=g.logoFile.name.split(".").pop(),xe=`business-logos/${`business-${z}-logo.${ie}`}`,{error:ee}=await Oe.storage.from("business-assets").upload(xe,g.logoFile);if(ee)return console.error("Error uploading logo:",ee),null;const{data:re}=Oe.storage.from("business-assets").getPublicUrl(xe);return re.publicUrl}catch(ie){return console.error("Error uploading logo:",ie),null}},G=()=>Math.random().toString(36).substring(2)+Date.now().toString(36),Z=async(z,ie,K)=>{const xe=`${window.location.origin}/verify-email?token=${ie}`;return console.log("Verification email would be sent to:",z),console.log("Verification link:",xe),!0},oe=async()=>{if(!(!A()||!D())){c(!0),t("");try{const{data:z,error:ie}=await Oe.from("users").select("user_id").eq("email",h.email).single();if(z){t("An account with this email already exists"),c(!1);return}const{data:K,error:xe}=await Oe.from("business_info").insert({name:g.name,business_type:g.businessType,description:g.description||null,address:g.address,phone_number:g.phoneNumber,vat_number:g.vatNumber||null,website:g.website||null,business_hours:g.businessHours,currency:g.currency,timezone:g.timezone,receipt_footer:"Thank you for your business!",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("business_id").single();if(xe||!K){console.error("Error creating business:",xe),t("Failed to create business. Please try again."),c(!1);return}let ee=null;g.logoFile&&(ee=await I(K.business_id),ee&&await Oe.from("business_info").update({logo_url:ee}).eq("business_id",K.business_id));const re=G(),_e=new Date(Date.now()+1440*60*1e3),ne=li(h.password),{data:ve,error:le}=await Oe.from("users").insert({username:h.email,email:h.email,password_hash:ne,role:"Owner",active:!1,business_id:K.business_id,email_verified:!1,email_verification_token:re,verification_token_expires:_e.toISOString(),created_at:new Date().toISOString()}).select("user_id").single();if(le||!ve){console.error("Error creating user:",le),t("Failed to create user account. Please try again."),c(!1);return}await Oe.from("email_verification_tokens").insert({user_id:ve.user_id,token:re,expires_at:_e.toISOString()}),await Z(h.email,re,g.name),e(`Registration successful! Please check your email (${h.email}) to verify your account and complete the setup.`)}catch(z){console.error("Registration error:",z),t("Registration failed. Please try again.")}finally{c(!1)}}},V=()=>{r===1&&A()&&a(2)},P=()=>{a(1)};return o.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"20px"},children:[o.jsxs("div",{style:{marginBottom:"30px",textAlign:"center"},children:[o.jsx("h2",{style:{color:"#1a1a1a",marginBottom:"10px"},children:"Create Your Business Account"}),o.jsxs("p",{style:{color:"#666",fontSize:"16px"},children:["Step ",r," of 2: ",r===1?"Personal Information":"Business Information"]})]}),r===1&&o.jsxs("div",{style:{background:"#fff",padding:"30px",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{marginBottom:"20px",color:"#1a1a1a"},children:"Personal Information"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"First Name *"}),o.jsx("input",{type:"text",value:h.firstName,onChange:z=>w("firstName",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"Enter your first name"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Last Name *"}),o.jsx("input",{type:"text",value:h.lastName,onChange:z=>w("lastName",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"Enter your last name"})]})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Email Address *"}),o.jsx("input",{type:"email",value:h.email,onChange:z=>w("email",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"Enter your email address"})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Phone Number"}),o.jsx("input",{type:"tel",value:h.phoneNumber,onChange:z=>w("phoneNumber",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"Enter your phone number"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Password *"}),o.jsx("input",{type:"password",value:h.password,onChange:z=>w("password",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"Create a password"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Confirm Password *"}),o.jsx("input",{type:"password",value:h.confirmPassword,onChange:z=>w("confirmPassword",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"Confirm your password"})]})]}),o.jsx("button",{onClick:V,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",padding:"15px",borderRadius:"8px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Continue to Business Information"})]}),r===2&&o.jsxs("div",{style:{background:"#fff",padding:"30px",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{marginBottom:"20px",color:"#1a1a1a"},children:"Business Information"}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Business Name *"}),o.jsx("input",{type:"text",value:g.name,onChange:z=>_("name",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"Enter your business name"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Business Type *"}),o.jsx("select",{value:g.businessType,onChange:z=>_("businessType",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},children:v.map(z=>o.jsx("option",{value:z,children:z},z))})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Currency"}),o.jsx("select",{value:g.currency,onChange:z=>_("currency",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},children:b.map(z=>o.jsx("option",{value:z,children:z},z))})]})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Business Description"}),o.jsx("textarea",{value:g.description,onChange:z=>_("description",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px",minHeight:"80px",resize:"vertical"},placeholder:"Describe your business"})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Business Address *"}),o.jsx("textarea",{value:g.address,onChange:z=>_("address",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px",minHeight:"80px",resize:"vertical"},placeholder:"Enter your business address"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Phone Number *"}),o.jsx("input",{type:"tel",value:g.phoneNumber,onChange:z=>_("phoneNumber",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"Business phone number"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Website"}),o.jsx("input",{type:"url",value:g.website,onChange:z=>_("website",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"https://yourwebsite.com"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"VAT/Tax Number"}),o.jsx("input",{type:"text",value:g.vatNumber,onChange:z=>_("vatNumber",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"VAT or tax identification number"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Business Hours"}),o.jsx("input",{type:"text",value:g.businessHours,onChange:z=>_("businessHours",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"16px"},placeholder:"e.g., 9:00 AM - 6:00 PM"})]})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500",color:"#1a1a1a"},children:"Business Logo"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[o.jsx("input",{type:"file",accept:"image/*",onChange:S,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px"}}),u&&o.jsx("img",{src:u,alt:"Logo preview",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px",border:"1px solid #ddd"}})]}),o.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},children:"Upload a logo for your business (optional, max 5MB)"})]}),o.jsxs("div",{style:{display:"flex",gap:"15px"},children:[o.jsx("button",{onClick:P,style:{flex:1,background:"#f3f4f6",color:"#1a1a1a",border:"none",padding:"15px",borderRadius:"8px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Back"}),o.jsx("button",{onClick:oe,disabled:i,style:{flex:2,background:i?"#9ca3af":"#10b981",color:"white",border:"none",padding:"15px",borderRadius:"8px",fontSize:"16px",fontWeight:"500",cursor:i?"not-allowed":"pointer"},children:i?"Creating Account...":"Create Business Account"})]})]})]})},iv=()=>{const[e,t]=E.useState(""),[r,a]=E.useState(""),[i,c]=E.useState(""),[u,f]=E.useState(""),[h,p]=E.useState(!1),[g,y]=E.useState(!1),{login:v,loading:b}=An(),w=async A=>{if(A.preventDefault(),c(""),f(""),!e||!r){c("Please enter both username and password");return}await v(e,r)||c("Invalid username or password")},_=A=>{f(A),y(!1)},S=A=>{c(A)};return o.jsxs("div",{style:{minHeight:"100vh",height:"100vh",width:"100%",display:"flex",fontFamily:"Quicksand, Comfortaa, sans-serif"},children:[o.jsxs("div",{style:{flex:"0 0 45%",background:"#f8fafc",display:"flex",flexDirection:"column",justifyContent:"center",padding:"60px 80px",position:"relative"},children:[o.jsxs("div",{style:{marginBottom:"40px",maxWidth:"320px",margin:"0 auto 40px auto"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"#1a1a1a",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"24px"},children:o.jsx("i",{className:"fa-solid fa-bolt",style:{color:"#ffffff",fontSize:"20px"}})}),o.jsx("h1",{style:{fontSize:"32px",fontWeight:"700",color:"#1a1a1a",marginBottom:"8px",lineHeight:"1.2"},children:g?"Create Your Business Account":"Welcome back!"}),o.jsx("p",{style:{fontSize:"16px",color:"#6b7280",margin:0,lineHeight:"1.5"},children:g?"Set up your professional POS system with complete business information.":"Your business, your team, your flow — all in one place."})]}),g?o.jsx("div",{style:{maxWidth:"600px",margin:"0 auto",width:"100%"},children:o.jsx(S3,{onSuccess:_,onError:S})}):o.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"20px",maxWidth:"320px",margin:"0 auto",width:"100%"},onSubmit:w,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Username"}),o.jsx("input",{id:"username",name:"username",type:"text",required:!0,style:{width:"100%",padding:"14px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",color:"#1a1a1a",background:"#ffffff",outline:"none",transition:"border-color 0.2s ease, box-shadow 0.2s ease",boxSizing:"border-box"},onFocus:A=>{A.target.style.borderColor="#3b82f6",A.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:A=>{A.target.style.borderColor="#d1d5db",A.target.style.boxShadow="none"},placeholder:"Enter your username",value:e,onChange:A=>t(A.target.value),disabled:b})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Password"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{id:"password",name:"password",type:h?"text":"password",required:!0,style:{width:"100%",padding:"14px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",color:"#1a1a1a",background:"#ffffff",outline:"none",transition:"border-color 0.2s ease, box-shadow 0.2s ease",boxSizing:"border-box"},onFocus:A=>{A.target.style.borderColor="#3b82f6",A.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:A=>{A.target.style.borderColor="#d1d5db",A.target.style.boxShadow="none"},placeholder:"Enter your password",value:r,onChange:A=>a(A.target.value),disabled:b}),o.jsx("div",{style:{position:"absolute",top:"50%",right:"12px",transform:"translateY(-50%)",cursor:"pointer"},onClick:()=>p(!h),children:o.jsx("i",{className:h?"fa-solid fa-eye-slash":"fa-solid fa-eye",style:{color:"#6b7280",fontSize:"16px"}})})]})]}),i&&o.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px 16px",borderRadius:"8px",fontSize:"14px"},children:i}),u&&o.jsx("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",color:"#166534",padding:"12px 16px",borderRadius:"8px",fontSize:"14px"},children:u}),o.jsx("button",{type:"submit",disabled:b,style:{width:"100%",padding:"16px 24px",background:"#1a1a1a",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:b?"not-allowed":"pointer",opacity:b?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginTop:"8px",boxSizing:"border-box"},children:b?o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx("i",{className:"fa-solid fa-spinner",style:{color:"#ffffff",fontSize:"16px",marginRight:"8px",animation:"spin 1s linear infinite"}}),g?"Creating Account...":"Signing in..."]}):g?"Create Account":"Log In"}),o.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:o.jsx("button",{type:"button",onClick:()=>{y(!g),c("")},style:{background:"none",border:"none",color:"#3b82f6",fontSize:"14px",cursor:"pointer",textDecoration:"underline"},children:g?"Already have an account? Log in":"Don't have an account? Create one"})}),localStorage.getItem("pos_user")&&o.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:o.jsxs("button",{type:"button",onClick:async()=>{const A=JSON.parse(localStorage.getItem("pos_user")||"{}"),D=localStorage.getItem("lastPassword");A.username&&D?await v(A.username,D)||c("Auto-login failed. Please enter credentials manually."):c("No stored credentials found.")},disabled:b,style:{background:"none",border:"none",color:"#3b82f6",fontSize:"12px",cursor:"pointer",textDecoration:"underline"},children:["Last login: ",localStorage.getItem("lastLogin")||"Never"," (Click to auto-login)"]})})]})]}),o.jsx("div",{style:{flex:"0 0 50%",background:"#f8fafc",backgroundImage:"url(/retailpos/images/backgrounds/login_bg.png)",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"}})]})},w3=({children:e})=>{const{user:t,supabaseUser:r,loading:a}=An();return a?o.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400 mb-4",children:"Loading..."})]})}):!t&&!r?o.jsx(iv,{}):o.jsx(o.Fragment,{children:e})},bu=({children:e,requiredPermission:t,fallbackRoute:r="/"})=>{const a=Ta(),{canAccessRoute:i,hasPermission:c}=D0();return i(a.pathname)?t&&!c(t)?o.jsx(Fm,{to:r,replace:!0}):o.jsx(o.Fragment,{children:e}):o.jsx(Fm,{to:r,replace:!0})},T3=()=>{const e=Ta(),{user:t,logout:r}=An(),{isCollapsed:a,setIsCollapsed:i}=R0(),{canAccessRoute:c,userRole:u}=D0(),h=[{path:"/",label:"Dashboard",icon:"fas fa-home"},{path:"/products",label:"Products",icon:"fas fa-box"},{path:"/sales",label:"Sales",icon:"fas fa-dollar-sign"},{path:"/transactions",label:"Transactions",icon:"fas fa-receipt"},{path:"/side-businesses",label:"Side Businesses",icon:"fas fa-briefcase"},{path:"/reminders",label:"Reminders",icon:"fas fa-sticky-note"},{path:"/admin",label:"Admin",icon:"fas fa-users-cog"}].filter(g=>c(g.path)),p=g=>{switch(g){case"Admin":return"#ef4444";case"Owner":return"#8b5cf6";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#6b7280"}};return o.jsxs("nav",{style:{width:a?"70px":"200px",height:"100vh",background:"#1a1a1a",borderRight:"1px solid #333333",display:"flex",flexDirection:"column",position:"fixed",left:0,top:0,zIndex:50,padding:a?"20px 10px 20px 10px":"20px 16px 20px 16px",boxShadow:"2px 0 8px rgba(0, 0, 0, 0.3)",transition:"width 0.3s ease, padding 0.3s ease"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:a?"center":"flex-start",gap:"12px",marginBottom:"32px",paddingBottom:"16px",borderBottom:"1px solid #333333"},children:[o.jsx("div",{onClick:()=>i(!a),style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:g=>g.target.style.setProperty("background-color","#333333"),onMouseLeave:g=>g.target.style.setProperty("background-color","transparent"),children:o.jsx("div",{style:{width:"16px",height:"2px",background:"#ffffff",position:"relative",transition:"transform 0.3s ease"},children:o.jsx("div",{style:{position:"absolute",top:"6px",left:0,width:"16px",height:"2px",background:"#ffffff",transition:"transform 0.3s ease"}})})}),!a&&o.jsx("h1",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"bold",margin:0,transition:"opacity 0.3s ease"},children:"Retail POS"})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1,overflowY:"auto"},children:h.map(g=>o.jsxs(y0,{to:g.path,style:{display:"flex",alignItems:"center",justifyContent:a?"center":"flex-start",gap:"12px",padding:a?"12px 8px":"12px 16px",borderRadius:"8px",textDecoration:"none",transition:"all 0.2s ease",background:e.pathname===g.path?"#333333":"transparent",color:e.pathname===g.path?"#ffffff":"#cccccc"},onMouseEnter:y=>{if(e.pathname!==g.path){const v=y.currentTarget;v.style.backgroundColor="#333333",v.style.color="#ffffff"}},onMouseLeave:y=>{if(e.pathname!==g.path){const v=y.currentTarget;v.style.backgroundColor="transparent",v.style.color="#cccccc"}},children:[o.jsx("i",{className:g.icon,style:{fontSize:"16px",width:"20px"}}),!a&&o.jsx("span",{style:{fontSize:"13px",fontWeight:"500",transition:"opacity 0.3s ease"},children:g.label})]},g.path))}),o.jsxs("div",{style:{padding:"8px 0",borderTop:"1px solid #333333",display:"flex",flexDirection:"column",gap:"8px",alignItems:a?"center":"stretch"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:a?"center":"flex-start",gap:"12px",padding:a?"8px":"8px 12px",borderRadius:"8px",background:"#333333",cursor:"pointer",transition:"background 0.2s ease",width:a?"50px":"auto"},onMouseEnter:g=>g.target.style.setProperty("background-color","#444444"),onMouseLeave:g=>g.target.style.setProperty("background-color","#333333"),children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",color:"#1a1a1a",fontSize:"14px",fontWeight:"bold"},children:t?.username?.charAt(0).toUpperCase()}),!a&&o.jsxs("div",{style:{flex:1},children:[o.jsx("p",{style:{color:"#ffffff",fontSize:"14px",fontWeight:"500",margin:0,lineHeight:"1.2",transition:"opacity 0.3s ease"},children:t?.username}),o.jsx("p",{style:{color:p(u),fontSize:"12px",margin:0,textTransform:"capitalize",transition:"opacity 0.3s ease",fontWeight:"500"},children:u})]})]}),o.jsxs("button",{onClick:async()=>{console.log("Logout button clicked"),await r()},style:{width:a?"50px":"100%",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"8px",background:"#dc3545",border:"none",cursor:"pointer",transition:"background 0.2s ease, width 0.3s ease",color:"#ffffff",fontSize:"14px",fontWeight:"500"},onMouseEnter:g=>{const y=g.target;y.style.background="#c82333"},onMouseLeave:g=>{const y=g.target;y.style.background="#dc3545"},children:[o.jsx("i",{className:"fa-solid fa-sign-out-alt",style:{fontSize:"16px"}}),!a&&o.jsx("span",{style:{transition:"opacity 0.3s ease"},children:"Logout"})]})]})]})},E3=()=>{const[e]=jy(),t=Fs(),[r,a]=E.useState("verifying"),[i,c]=E.useState(""),[u,f]=E.useState(!1),h=e.get("token");E.useEffect(()=>{h?p(h):(a("error"),c("Invalid verification link"))},[h]);const p=async v=>{try{a("verifying"),c("Verifying your email address...");const{data:b,error:w}=await Oe.from("email_verification_tokens").select("*").eq("token",v).eq("used",!1).single();if(w||!b){a("error"),c("Invalid or expired verification token");return}const _=new Date,S=new Date(b.expires_at);if(_>S){a("expired"),c("Verification token has expired. Please request a new one.");return}const{error:A}=await Oe.from("users").update({email_verified:!0,active:!0,email_verification_token:null,verification_token_expires:null,updated_at:new Date().toISOString()}).eq("user_id",b.user_id);if(A){console.error("Error updating user:",A),a("error"),c("Failed to verify email. Please try again.");return}await Oe.from("email_verification_tokens").update({used:!0}).eq("id",b.id),a("success"),c("Email verified successfully! You can now log in to your account."),setTimeout(()=>{t("/login")},3e3)}catch(b){console.error("Verification error:",b),a("error"),c("An error occurred during verification. Please try again.")}},g=async()=>{if(h){f(!0);try{const{data:v,error:b}=await Oe.from("email_verification_tokens").select("user_id, users(email, business_id, business_info(name))").eq("token",h).single();if(b||!v){c("Unable to resend verification email");return}const w=Math.random().toString(36).substring(2)+Date.now().toString(36),_=new Date(Date.now()+1440*60*1e3);await Oe.from("users").update({email_verification_token:w,verification_token_expires:_.toISOString()}).eq("user_id",v.user_id),await Oe.from("email_verification_tokens").insert({user_id:v.user_id,token:w,expires_at:_.toISOString()}),await Oe.from("email_verification_tokens").update({used:!0}).eq("token",h),c("A new verification email has been sent to your email address.")}catch(v){console.error("Error resending verification:",v),c("Failed to resend verification email. Please try again.")}finally{f(!1)}}},y=()=>{switch(r){case"verifying":return"⏳";case"success":return"✅";case"error":return"❌";case"expired":return"⏰";default:return"❓"}};return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"500px",width:"100%",textAlign:"center",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[o.jsx("div",{style:{fontSize:"64px",marginBottom:"20px"},children:y()}),o.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1a1a1a",marginBottom:"16px"},children:"Email Verification"}),o.jsx("p",{style:{fontSize:"16px",color:"#6b7280",marginBottom:"30px",lineHeight:"1.5"},children:i}),r==="verifying"&&o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"20px"},children:[o.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e5e7eb",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o.jsx("span",{style:{color:"#6b7280"},children:"Verifying..."})]}),r==="success"&&o.jsx("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:o.jsx("p",{style:{color:"#166534",fontSize:"14px",margin:"0"},children:"You will be redirected to the login page in a few seconds..."})}),(r==="error"||r==="expired")&&o.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[o.jsx("p",{style:{color:"#dc2626",fontSize:"14px",margin:"0 0 10px 0"},children:r==="expired"?"Your verification link has expired.":"There was an error verifying your email."}),o.jsx("button",{onClick:g,disabled:u,style:{background:u?"#9ca3af":"#3b82f6",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",cursor:u?"not-allowed":"pointer"},children:u?"Sending...":"Resend Verification Email"})]}),o.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>t("/login"),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Back to Login"}),r==="success"&&o.jsx("button",{onClick:()=>t("/login"),style:{background:"#10b981",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Continue to Login"})]})]}),o.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},Tn=(e,t={})=>{const r=typeof e=="number"&&isFinite(e)?e:0,{locale:a="en-IE",currency:i="EUR",minimumFractionDigits:c=2,maximumFractionDigits:u=2}=t;try{return new Intl.NumberFormat(a,{style:"currency",currency:i,minimumFractionDigits:c,maximumFractionDigits:u}).format(r)}catch{return`${i} ${r.toFixed(2)}`}},k3=(e,t={})=>{const r=typeof e=="number"&&isFinite(e)?e:0,{locale:a="en-IE",currency:i="EUR"}=t;try{return new Intl.NumberFormat(a,{style:"currency",currency:i,notation:"compact",maximumFractionDigits:1}).format(r)}catch{const c=Math.abs(r);return c>=1e6?`${Tn(r/1e6,{...t,maximumFractionDigits:1})}M`:c>=1e3?`${Tn(r/1e3,{...t,maximumFractionDigits:1})}K`:Tn(r,t)}},td=()=>{const{user:e}=An();return{businessId:e?.business_id,businessLoading:!1,businessError:null,hasBusinessSelected:e?.business_id!=null}},j3=async e=>{console.log("[fetchSalesData] fetching sales data for business:",e);const[t,r]=await Promise.all([Oe.from("sales").select(`
        *,
        customers (name),
        shop_staff!sales_cashier_id_fkey (username),
        sale_items (
          *,
          products (
            name,
            price,
            is_weighted,
            price_per_unit,
            weight_unit
          )
        )
      `).eq("business_id",e).order("datetime",{ascending:!1}),Oe.from("side_business_sales").select(`
        *,
        side_business_items (
          name,
          price
        )
      `).eq("parent_shop_id",e).order("date_time",{ascending:!1})]);if(t.error)throw t.error;if(r.error)throw r.error;return{sales:t.data?.map(i=>{const c=i.notes&&(i.notes.includes("PARTIAL PAYMENT")||i.notes.includes("Amount Paid Today")||i.notes.includes("Remaining Balance"));let u=0,f=0,h="";if(c&&i.notes){const p=i.notes.match(/Amount Paid Today: €(\d+\.?\d*)/),g=i.notes.match(/Remaining Balance: €(\d+\.?\d*)/);u=p?parseFloat(p[1]):0,f=g?parseFloat(g[1]):0,h=i.notes}return{...i,customer_name:i.customers?.name||"Walk-in Customer",cashier_name:i.shop_staff?.username||"Unknown",is_partial_payment:c,partial_amount:u,remaining_amount:f,partial_notes:h,items:i.sale_items||[]}})||[],sideBusinessSales:r.data||[]}},rd=()=>{const{user:e}=An();return T0({queryKey:["salesData",e?.business_id],queryFn:()=>j3(e?.business_id),enabled:!!e?.business_id,staleTime:120*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1})},C3=async e=>{console.log("[fetchProductsData] fetching products data for business:",e);const[t,r]=await Promise.all([Oe.from("products").select("*").eq("business_id",e).order("name"),Oe.from("side_business_items").select("*").eq("parent_shop_id",e).order("name")]);if(t.error)throw t.error;if(r.error)throw r.error;const a=[...new Set(t.data?.map(i=>i.category).filter(Boolean))];return{products:t.data||[],sideBusinessItems:r.data||[],categories:a}},ov=()=>{const{user:e}=An();return T0({queryKey:["productsData",e?.business_id],queryFn:()=>C3(e?.business_id),enabled:!!e?.business_id,staleTime:300*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1})},A3=()=>{const{data:e,isLoading:t,error:r}=ov(),a=E.useMemo(()=>e?.products?e.products.filter(u=>u.stock_quantity<=u.reorder_level).map(u=>({product_id:u.product_id,name:u.name,stock_quantity:u.stock_quantity,reorder_level:u.reorder_level,category:u.category,supplier_info:u.supplier_info,is_low_stock:!0})).sort((u,f)=>u.stock_quantity-f.stock_quantity):[],[e]),i=async(u,f)=>(console.log("Restock product:",u,"quantity:",f),!0),c=async u=>(console.log("Quick restock product:",u),!0);return{lowStockProducts:a,lowStockItems:a,loading:t,error:r?.message||null,restockProduct:i,quickRestock:c}},R3=({product:e,onRestock:t,onQuickRestock:r})=>{const[a,i]=E.useState(!1),[c,u]=E.useState(""),[f,h]=E.useState(!1),p=async()=>{h(!0);const b=await r(e.product_id);h(!1),b&&i(!1)},g=async()=>{const b=parseInt(c);if(isNaN(b)||b<=0)return;h(!0);const w=await t(e.product_id,b);h(!1),w&&(i(!1),u(""))},y=()=>e.stock_quantity<=2?"#ef4444":e.stock_quantity<=5?"#f59e0b":"#eab308",v=()=>e.stock_quantity<=2?"Critical":e.stock_quantity<=5?"Low":"Below Reorder";return o.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 4px 16px rgba(62, 63, 41, 0.15)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.1)"},children:[o.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",background:y(),color:"white",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:v()}),o.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[o.jsxs("div",{style:{width:"60px",height:"60px",borderRadius:"8px",background:"#f9fafb",border:"1px solid rgba(125, 141, 134, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:[e.image_url?o.jsx("img",{src:e.image_url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:b=>{b.currentTarget.style.setProperty("display","none")(b.currentTarget.nextElementSibling).style.setProperty("display","flex")}}):null,o.jsx("div",{style:{display:e.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:"#7d8d86",fontSize:"20px"},children:o.jsx("i",{className:"fa-solid fa-box"})})]}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0",lineHeight:"1.3"},children:e.name}),o.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"0 0 8px 0"},children:e.category}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[o.jsxs("span",{style:{fontSize:"12px",color:"#3e3f29",fontWeight:"500"},children:["Stock: ",e.stock_quantity]}),o.jsx("span",{style:{fontSize:"12px",color:"#7d8d86"},children:"•"}),o.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86"},children:["Reorder at: ",e.reorder_level]})]}),a?o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[o.jsx("input",{type:"number",value:c,onChange:b=>u(b.target.value),placeholder:"Qty",min:"1",style:{width:"60px",padding:"6px 8px",border:"1px solid #7d8d86",borderRadius:"6px",fontSize:"12px",outline:"none"}}),o.jsx("button",{onClick:g,disabled:f||!c,style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f||!c?"not-allowed":"pointer",opacity:f||!c?.7:1,transition:"all 0.2s ease"},onMouseEnter:b=>{!f&&c&&(b.currentTarget.style.background="#bca88d")},onMouseLeave:b=>{!f&&c&&(b.currentTarget.style.background="#7d8d86")},children:f?o.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):"Restock"}),o.jsx("button",{onClick:()=>{i(!1),u("")},disabled:f,style:{background:"transparent",color:"#7d8d86",border:"none",fontSize:"12px",cursor:f?"not-allowed":"pointer",opacity:f?.7:1},children:"Cancel"})]}):o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsxs("button",{onClick:p,disabled:f,style:{background:"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f?"not-allowed":"pointer",opacity:f?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:b=>{f||(b.currentTarget.style.background="#059669")},onMouseLeave:b=>{f||(b.currentTarget.style.background="#10b981")},children:[f?o.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):o.jsx("i",{className:"fa-solid fa-bolt"}),"Quick Restock"]}),o.jsx("button",{onClick:()=>i(!0),disabled:f,style:{background:"transparent",color:"#7d8d86",border:"1px solid #7d8d86",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f?"not-allowed":"pointer",opacity:f?.7:1,transition:"all 0.2s ease"},onMouseEnter:b=>{f||(b.currentTarget.style.background="#7d8d86",b.currentTarget.style.color="white")},onMouseLeave:b=>{f||(b.currentTarget.style.background="transparent",b.currentTarget.style.color="#7d8d86")},children:"Custom"})]})]})]})]})},D3=()=>{const{lowStockItems:e,loading:t,error:r,restockProduct:a,quickRestock:i}=A3(),[c,u]=E.useState(0),f=e[c]||null,h=c<e.length-1,p=c>0,g=()=>{h&&u(c+1)},y=()=>{p&&u(c-1)};return t?o.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[o.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading low stock items..."]})}):r?o.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),o.jsx("p",{style:{margin:0,fontSize:"14px"},children:r})]})}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:e.length>0?"#fbbf24":"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"18px",color:e.length>0?"#d97706":"#059669"}})}),o.jsxs("div",{children:[o.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Low Stock Items"}),o.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[e.length," item",e.length!==1?"s":""," need",e.length===1?"s":""," restocking"]})]})]}),e.length>1&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("button",{onClick:y,disabled:!p,style:{background:p?"#7d8d86":"#e5e7eb",color:p?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:p?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:v=>{p&&(v.currentTarget.style.background="#bca88d")},onMouseLeave:v=>{p&&(v.currentTarget.style.background="#7d8d86")},children:o.jsx("i",{className:"fa-solid fa-chevron-left"})}),o.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86",fontWeight:"500",minWidth:"40px",textAlign:"center"},children:[c+1," / ",e.length]}),o.jsx("button",{onClick:g,disabled:!h,style:{background:h?"#7d8d86":"#e5e7eb",color:h?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:h?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:v=>{h&&(v.currentTarget.style.background="#bca88d")},onMouseLeave:v=>{h&&(v.currentTarget.style.background="#7d8d86")},children:o.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]}),e.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#7d8d86"},children:[o.jsx("i",{className:"fa-solid fa-check-circle",style:{fontSize:"48px",marginBottom:"16px",color:"#10b981"}}),o.jsx("p",{style:{fontSize:"16px",margin:0,fontWeight:"500"},children:"All items are well stocked!"}),o.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0",opacity:.8},children:"No items need restocking at the moment."})]}):f?o.jsx(R3,{product:f,onRestock:a,onQuickRestock:i},f.product_id):null]})},N3=(e,t)=>{const r=t||new Date;switch(e){case"today":{const a=r.toISOString().split("T")[0];return{start:`${a}T00:00:00`,end:`${a}T23:59:59`}}case"week":{const a=new Date(r);a.setDate(r.getDate()-r.getDay()),a.setHours(0,0,0,0);const i=new Date(a);return i.setDate(a.getDate()+6),i.setHours(23,59,59,999),{start:a.toISOString(),end:i.toISOString()}}case"month":{const a=new Date(r.getFullYear(),r.getMonth(),1),i=new Date(r.getFullYear(),r.getMonth()+1,0,23,59,59,999);return{start:a.toISOString(),end:i.toISOString()}}default:return{start:"",end:""}}},Ch=(e,t,r)=>{const{start:a,end:i}=N3(t,r),c=e.filter(f=>{const h=new Date(f.datetime).toISOString();return h>=a&&h<=i}),u=new Map;return c.forEach(f=>{f.sale_items?.forEach(h=>{const p=h.product_id,g=u.get(p)||{quantity:0,total:0,name:h.products?.name||"Unknown",image_url:h.products?.image_url};u.set(p,{quantity:g.quantity+(h.quantity||0),total:g.total+(parseFloat(h.calculated_price)||0),name:g.name,image_url:g.image_url})})}),Array.from(u.entries()).map(([f,h])=>({product_id:f,product_name:h.name,quantity_sold:h.quantity,total_sales:h.total,image_url:h.image_url})).sort((f,h)=>h.total_sales-f.total_sales)},O3=e=>{const{data:t,isLoading:r,error:a}=rd(),i=E.useMemo(()=>t?.sales?Ch(t.sales,"today",e):[],[t,e]),c=E.useMemo(()=>t?.sales?Ch(t.sales,"week",e):[],[t,e]),u=E.useMemo(()=>t?.sales?Ch(t.sales,"month",e):[],[t,e]);return{todayProducts:i,weekProducts:c,monthProducts:u,loading:r,error:a?.message||null}},I3=({activePeriod:e,selectedDate:t})=>{const{todayProducts:r,weekProducts:a,monthProducts:i,loading:c,error:u}=O3(t),[f,h]=E.useState(e??"today");E.useEffect(()=>{e&&h(e)},[e]);const p=b=>{switch(b){case"today":return r;case"week":return a;case"month":return i}},g=b=>{switch(b){case"today":if(t){const w=new Date;return t.toDateString()===w.toDateString()?"Today":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}return"Today";case"week":return"This Week";case"month":return"This Month"}},y=["today","week","month"],v=p(f);return c?o.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db"},children:[o.jsx("style",{children:"@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}} .skeleton{background-image:linear-gradient(90deg,#e5e7eb 0px,#f3f4f6 40px,#e5e7eb 80px);background-size:600px 100%;animation:shimmer 1.2s infinite linear;border-radius:8px}"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[o.jsx("div",{className:"skeleton",style:{width:"40px",height:"40px"}}),o.jsx("div",{className:"skeleton",style:{width:"160px",height:"18px"}})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[o.jsx("div",{className:"skeleton",style:{width:"80px",height:"28px"}}),o.jsx("div",{className:"skeleton",style:{width:"100px",height:"28px"}}),o.jsx("div",{className:"skeleton",style:{width:"100px",height:"28px"}})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Array.from({length:5}).map((b,w)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",border:"1px solid rgba(125,141,134,0.1)",borderRadius:"8px"},children:[o.jsx("div",{className:"skeleton",style:{width:"32px",height:"32px"}}),o.jsx("div",{className:"skeleton",style:{width:"40px",height:"40px"}}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{className:"skeleton",style:{width:"160px",height:"12px",marginBottom:"6px"}}),o.jsx("div",{className:"skeleton",style:{width:"100px",height:"10px"}})]}),o.jsx("div",{className:"skeleton",style:{width:"70px",height:"14px"}})]},w))})]}):u?o.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),o.jsx("p",{style:{margin:0,fontSize:"14px"},children:u})]})}):o.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#bca88d",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"18px",color:"#3e3f29"}})}),o.jsx("h3",{style:{fontSize:"20px",fontWeight:600,color:"#3e3f29",margin:0},children:"Top Products"})]}),o.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:y.map(b=>o.jsxs("button",{onClick:()=>h(b),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:f===b?"#7d8d86":"#ffffff",color:f===b?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:[o.jsx("i",{className:`fa-solid ${b==="today"?"fa-calendar-day":b==="week"?"fa-calendar-week":"fa-calendar"}`,style:{fontSize:"12px",marginRight:6}}),g(b)]},b))}),v.length===0?o.jsxs("div",{style:{textAlign:"center",color:"#7d8d86",padding:"16px"},children:["No products for ",g(f)]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:v.slice(0,3).map((b,w)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"white",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.1)"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:w===0?"#fbbf24":w===1?"#e5e7eb":w===2?"#f59e0b":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:w===1?"#6b7280":"#3e3f29",fontSize:"12px",fontWeight:700},children:w===0?o.jsx("i",{className:"fa-solid fa-crown",style:{fontSize:14}}):w+1}),o.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"#f9fafb",border:"1px solid #e5e7eb",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:b.image_url?o.jsx("img",{src:b.image_url,alt:b.product_name,style:{width:"100%",height:"100%",objectFit:"cover"}}):o.jsx("i",{className:"fa-solid fa-box",style:{color:"#7d8d86"}})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("p",{style:{fontSize:14,fontWeight:600,color:"#3e3f29",margin:"0 0 2px 0"},children:b.product_name}),o.jsxs("p",{style:{fontSize:12,color:"#7d8d86",margin:0},children:[b.quantity_sold," sold"]})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsx("p",{style:{fontSize:14,fontWeight:600,color:"#10b981",margin:0},children:Tn(b.total_sales)}),w===0&&o.jsx("p",{style:{fontSize:10,color:"#d97706",margin:"2px 0 0 0",fontWeight:500},children:"TOP SELLER"})]})]},b.product_id))})]})},lv=e=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate());switch(e){case"today":return{start:r,end:new Date(r.getTime()+1440*60*1e3)};case"week":const a=new Date(r);return a.setDate(r.getDate()-r.getDay()),{start:a,end:new Date(a.getTime()+10080*60*1e3)};case"month":const i=new Date(r.getFullYear(),r.getMonth(),1),c=new Date(r.getFullYear(),r.getMonth()+1,1);return{start:i,end:c};default:return{start:r,end:r}}},B3=(e,t)=>{const{start:r,end:a}=lv("week"),i={};for(let c=0;c<7;c++){const f=new Date(r.getTime()+c*24*60*60*1e3).toISOString().split("T")[0];i[f]={totalSales:0,transactionCount:0}}return e.forEach(c=>{const u=new Date(c.datetime).toISOString().split("T")[0];i[u]&&(i[u].totalSales+=parseFloat(c.total_amount)||0,i[u].transactionCount+=1)}),t.forEach(c=>{const u=new Date(c.date_time).toISOString().split("T")[0];i[u]&&(i[u].totalSales+=parseFloat(c.total_amount)||0,i[u].transactionCount+=1)}),Object.entries(i).map(([c,u])=>({day:new Date(c).toLocaleDateString("en-US",{weekday:"short"}),date:c,totalSales:u.totalSales,transactionCount:u.transactionCount,averageTransaction:u.transactionCount>0?u.totalSales/u.transactionCount:0}))},M3=(e,t)=>{const r={};for(let a=0;a<24;a++)r[a]={totalSales:0,transactionCount:0};return e.forEach(a=>{const i=new Date(a.datetime).getHours();r[i].totalSales+=parseFloat(a.total_amount)||0,r[i].transactionCount+=1}),t.forEach(a=>{const i=new Date(a.date_time).getHours();r[i].totalSales+=parseFloat(a.total_amount)||0,r[i].transactionCount+=1}),Object.entries(r).map(([a,i])=>({hour:parseInt(a),hourLabel:`${a}:00`,totalSales:i.totalSales,transactionCount:i.transactionCount}))},F3=(e,t)=>{const{start:r,end:a}=lv("month"),i={},c=new Date(r);for(;c<a;){const u=c.toISOString().split("T")[0];i[u]={totalSales:0,transactionCount:0},c.setDate(c.getDate()+1)}return e.forEach(u=>{const f=new Date(u.datetime).toISOString().split("T")[0];i[f]&&(i[f].totalSales+=parseFloat(u.total_amount)||0,i[f].transactionCount+=1)}),t.forEach(u=>{const f=new Date(u.date_time).toISOString().split("T")[0];i[f]&&(i[f].totalSales+=parseFloat(u.total_amount)||0,i[f].transactionCount+=1)}),Object.entries(i).map(([u,f])=>({day:new Date(u).toLocaleDateString("en-US",{day:"numeric"}),date:u,totalSales:f.totalSales,transactionCount:f.transactionCount,averageTransaction:f.transactionCount>0?f.totalSales/f.transactionCount:0}))},L3=()=>{const{data:e,isLoading:t,error:r}=rd(),a=E.useMemo(()=>e?B3(e.sales,e.sideBusinessSales):[],[e]),i=E.useMemo(()=>e?M3(e.sales,e.sideBusinessSales):[],[e]),c=E.useMemo(()=>e?F3(e.sales,e.sideBusinessSales):[],[e]);return{weeklyData:a,hourlyData:i,monthlyData:c,loading:t,error:r?.message||null,refreshHourlyData:()=>{},refreshWeeklyData:()=>{},refreshMonthlyData:()=>{}}},P3=async e=>{console.log("[fetchBusinessData] fetching business_info for business:",e);const{data:t,error:r}=await Oe.from("business_info").select("*").eq("business_id",e).single();if(r)throw console.error("Error fetching business data:",r),r;return t},z3=()=>{const{user:e}=An();return T0({queryKey:["businessData",e?.business_id],queryFn:()=>P3(e?.business_id),enabled:!!e?.business_id,staleTime:300*1e3})},U3=()=>{const{data:e,isLoading:t,error:r}=z3();return{businessInfo:e,loading:t,error:r?.message||null,refetch:()=>{}}},W3=({selectedDate:e,activePeriod:t})=>{const{weeklyData:r,hourlyData:a,monthlyData:i,loading:c,error:u,refreshHourlyData:f,refreshWeeklyData:h,refreshMonthlyData:p}=L3(),{businessInfo:g}=U3(),[y,v]=E.useState("weekly"),[b,w]=E.useState(new Date().toISOString().split("T")[0]),[_,S]=E.useState(0),[A,D]=E.useState(0),[I,G]=E.useState({visible:!1,x:0,y:0,data:null}),Z=async le=>{w(le),await f(le)};E.useEffect(()=>{if(!e)return;const Ae=(Ce=>`${Ce.getFullYear()}-${String(Ce.getMonth()+1).padStart(2,"0")}-${String(Ce.getDate()).padStart(2,"0")}`)(e);w(Ae);const M=Ce=>{const te=new Date(Ce);return te.setHours(0,0,0,0),te.setDate(te.getDate()-te.getDay()),te},Q=M(e),k=new Date;k.setHours(0,0,0,0);const L=M(k),W=Q.getTime()-L.getTime(),X=Math.round(W/(1e3*60*60*24)),ge=Math.round(X/7);S(ge);const Me=new Date,qe=(e.getFullYear()-Me.getFullYear())*12+(e.getMonth()-Me.getMonth());D(qe)},[e]),E.useEffect(()=>{t&&v(t==="today"?"hourly":t==="week"?"weekly":"monthly")},[t]);const oe=async()=>{const le=_-1;S(le),await h(le)},V=async()=>{const le=_+1;S(le),await h(le)},P=async()=>{S(0),await h(0)},z=()=>{const le=new Date,Ae=le.getDay(),M=new Date(le);M.setDate(le.getDate()-Ae+_*7);const Q=new Date(M);Q.setDate(M.getDate()+6);const k=L=>L.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${k(M)} - ${k(Q)}`},ie=(le,Ae)=>{G({visible:!0,x:le.clientX,y:le.clientY,data:Ae})},K=()=>{G({visible:!1,x:0,y:0,data:null})},xe=le=>{const Ae=Math.max(...le.map(M=>M.totalSales));return Ae===0?1:Math.ceil(Ae*1.1)},ee=(le,Ae)=>le===0?0:Math.max(le/Ae*180,4),re=(le,Ae=!0)=>{if(Ae){const M=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316"];return M[le%M.length]}else{const M=Math.min(le/9,1),Q=Math.floor(59+180*M),k=Math.floor(130+-62*M),L=Math.floor(246+-178*M);return`rgb(${Q}, ${k}, ${L})`}};if(c)return o.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[o.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading sales data..."]})});if(u)return o.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:o.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),o.jsx("p",{style:{margin:0,fontSize:"14px"},children:u})]})});const _e=y==="weekly"?r:y==="monthly"?i:a,ne=_e.length>0?xe(_e):100,ve=y==="monthly"?Math.ceil(_e.length/12):1;return _e.length===0&&!c&&!u?o.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"5px solid #000000 !important",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",margin:"0",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",textAlign:"center",minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(g?.logo_url,o.jsx("img",{src:g?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:g?.name||"LandM Store Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:le=>{const Ae=le.target;Ae.style.display="none";const M=Ae.parentElement;M&&(M.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),o.jsxs("div",{children:[o.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(g?.name||"LandM Store")&&o.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:g?.name||"LandM Store"})]})]}),o.jsxs("div",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"16px"},children:[o.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),o.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"500"},children:"No sales data available"}),o.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.8},children:y==="weekly"?"No sales recorded for this week":"No sales recorded for this date"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-100%) scale(0.9); }
          to { opacity: 1; transform: translateY(-100%) scale(1); }
        }
      `}),o.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",maxWidth:"1000px",margin:"0 auto",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(g?.logo_url,o.jsx("img",{src:g?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:g?.name||"LandM Store Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:le=>{const Ae=le.target;Ae.style.display="none";const M=Ae.parentElement;M&&(M.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),o.jsxs("div",{children:[o.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(g?.name||"LandM Store")&&o.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:g?.name||"LandM Store"})]})]}),o.jsxs("div",{style:{display:"flex",background:"#f9fafb",borderRadius:"8px",padding:"4px",gap:"4px",marginBottom:"24px",maxWidth:"300px",border:"2px solid #d1d5db"},children:[o.jsxs("button",{onClick:()=>v("weekly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="weekly"?"#7d8d86":"transparent",color:y==="weekly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:le=>{y!=="weekly"&&(le.currentTarget.style.background="#e5e7eb",le.currentTarget.style.color="#3e3f29")},onMouseLeave:le=>{y!=="weekly"&&(le.currentTarget.style.background="transparent",le.currentTarget.style.color="#7d8d86")},children:[o.jsx("i",{className:"fa-solid fa-calendar-week",style:{fontSize:"12px"}}),"Weekly"]}),o.jsxs("button",{onClick:()=>v("hourly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="hourly"?"#7d8d86":"transparent",color:y==="hourly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:le=>{y!=="hourly"&&(le.currentTarget.style.background="#e5e7eb",le.currentTarget.style.color="#3e3f29")},onMouseLeave:le=>{y!=="hourly"&&(le.currentTarget.style.background="transparent",le.currentTarget.style.color="#7d8d86")},children:[o.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"12px"}}),"Hourly"]}),o.jsxs("button",{onClick:()=>v("monthly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="monthly"?"#7d8d86":"transparent",color:y==="monthly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:le=>{y!=="monthly"&&(le.currentTarget.style.background="#e5e7eb",le.currentTarget.style.color="#3e3f29")},onMouseLeave:le=>{y!=="monthly"&&(le.currentTarget.style.background="transparent",le.currentTarget.style.color="#7d8d86")},children:[o.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"12px"}}),"Monthly"]})]}),y==="weekly"&&o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[o.jsxs("button",{onClick:oe,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:le=>{le.currentTarget.style.background="#f3f4f6",le.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:le=>{le.currentTarget.style.background="#ffffff",le.currentTarget.style.borderColor="#d1d5db"},children:[o.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Week"]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",marginBottom:"2px"},children:z()}),o.jsx("button",{onClick:P,style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline",transition:"color 0.2s ease"},onMouseEnter:le=>{le.currentTarget.style.color="#3e3f29"},onMouseLeave:le=>{le.currentTarget.style.color="#7d8d86"},children:_===0?"Current Week":"Go to Current Week"})]}),o.jsxs("button",{onClick:V,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:le=>{le.currentTarget.style.background="#f3f4f6",le.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:le=>{le.currentTarget.style.background="#ffffff",le.currentTarget.style.borderColor="#d1d5db"},children:["Next Week",o.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),y==="monthly"&&o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[o.jsxs("button",{onClick:async()=>{const le=A-1;D(le),await p(le)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:[o.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Month"]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#3e3f29",marginBottom:"2px"},children:new Date(new Date().getFullYear(),new Date().getMonth()+A,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),o.jsx("button",{onClick:async()=>{D(0),await p(0)},style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline"},children:A===0?"Current Month":"Go to Current Month"})]}),o.jsxs("button",{onClick:async()=>{const le=A+1;D(le),await p(le)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:["Next Month",o.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),y==="hourly"&&o.jsxs("div",{style:{marginBottom:"24px",padding:"12px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"8px"},children:"Select Date:"}),o.jsx("input",{type:"date",value:b,onChange:le=>Z(le.target.value),style:{padding:"8px 12px",border:"2px solid #d1d5db",borderRadius:"6px",fontSize:"14px",color:"#3e3f29",background:"white",outline:"none"}})]}),o.jsxs("div",{style:{width:"100%",height:"400px",background:"white",borderRadius:"12px",padding:"40px",border:"2px solid #d1d5db",position:"relative",overflow:"visible",margin:"0",boxSizing:"border-box",fontFamily:"inherit",display:"flex",flexDirection:"column"},children:[o.jsx("div",{style:{position:"absolute",left:"15px",top:"40px",bottom:"30px",fontSize:"11px",color:"#9ca3af",fontWeight:"500",zIndex:1,padding:"10px 0",height:"260px"},children:[100,75,50,25,0].map((le,Ae)=>o.jsx("span",{style:{position:"absolute",textAlign:"right",minWidth:"20px",top:`${Ae*25}%`,transform:"translateY(-50%)"},children:k3(ne*le/100)},le))}),o.jsx("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",flex:1,gap:y==="weekly"?"20px":y==="monthly"?"6px":"12px",marginBottom:"30px",padding:"0 40px 0 70px",position:"relative",zIndex:2,overflow:"visible",width:"100%",boxSizing:"border-box",minHeight:"260px"},children:_e.map((le,Ae)=>{const M=ee(le.totalSales,ne),Q=re(Ae,y!=="hourly");return o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",flex:1,maxWidth:y==="weekly"?"100px":y==="monthly"?"24px":"80px",overflow:"visible",boxSizing:"border-box",height:"100%"},children:[o.jsx("div",{style:{width:"100%",maxWidth:y==="weekly"?"80px":y==="monthly"?"16px":"60px",height:`${M}px`,background:Q,borderRadius:"8px 8px 0 0",marginBottom:"12px",position:"relative",transition:"all 0.3s ease",cursor:"pointer",boxSizing:"border-box",display:"block"},onMouseEnter:k=>{k.currentTarget.style.transform="scaleY(1.05)",k.currentTarget.style.opacity="0.8",ie(k,le)},onMouseLeave:k=>{k.currentTarget.style.transform="scaleY(1)",k.currentTarget.style.opacity="1",K()}}),o.jsx("span",{style:{fontSize:y==="weekly"?"13px":"11px",fontWeight:"500",color:"#7d8d86",textAlign:"center",display:"block",margin:"0",padding:"0"},children:y==="weekly"?le.day:y==="monthly"?Ae%ve===0?le.day:"":le.hourLabel})]},Ae)})})]}),I.visible&&I.data&&o.jsxs("div",{style:{position:"fixed",left:I.x+10,top:I.y-10,background:"rgba(31, 41, 55, 0.95)",color:"#ffffff",padding:"12px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",pointerEvents:"none",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",zIndex:9999,backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",transform:"translateY(-100%)",animation:"fadeIn 0.2s ease-out"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[o.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:y==="weekly"?re(0,!0):re(0,!1)}}),o.jsx("span",{style:{fontWeight:"600",fontSize:"13px"},children:y==="weekly"?I.data.day:I.data.hourLabel})]}),o.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginBottom:"2px"},children:[I.data.transactionCount," transaction",I.data.transactionCount!==1?"s":""]}),o.jsx("div",{style:{fontWeight:"600",fontSize:"14px",color:"#60a5fa"},children:Tn(I.data.totalSales)})]})]}),o.jsx("div",{style:{width:"100%",maxWidth:"1000px",margin:"12px auto 0 auto"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",flexWrap:"wrap",background:"#3e3f29",borderRadius:"8px",padding:"8px 12px",border:"2px solid #d1d5db"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:"#7d8d86"}}),o.jsx("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:500},children:y==="weekly"?"Daily Sales":y==="monthly"?"Daily Sales (Month)":"Hourly Sales"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"12px",color:"#f1f0e4"}}),o.jsxs("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:500},children:["Max: ",Tn(ne)]})]})]})})]})},H3=()=>{const e=Fs(),{businessId:t,businessLoading:r}=td(),{data:a}=rd(),{data:i}=ov(),[c,u]=E.useState({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),[f,h]=E.useState(!0),[p,g]=E.useState(null),[y,v]=E.useState([]),[b,w]=E.useState(!1),[_,S]=E.useState(!1),[A,D]=E.useState(new Date),[I,G]=E.useState(new Date),[Z,oe]=E.useState([]),[V,P]=E.useState("today"),[z,ie]=E.useState([]),[K,xe]=E.useState(0),[ee,re]=E.useState(0);E.useEffect(()=>{if(a&&i&&!r&&t!=null){const te=new Date;te.setHours(0,0,0,0);const Pe=new Date(te);Pe.setDate(Pe.getDate()+1);const He=a.sales.filter(De=>{const ut=new Date(De.datetime);return ut>=te&&ut<Pe}),tt=a.sideBusinessSales.filter(De=>{const ut=new Date(De.date_time);return ut>=te&&ut<Pe}),Y=He.reduce((De,ut)=>De+(parseFloat(ut.total_amount.toString())||0),0),Re=tt.reduce((De,ut)=>De+(parseFloat(ut.total_amount.toString())||0),0),nt=i.products.filter(De=>De.stock_quantity<=De.reorder_level).length;u({totalProducts:i.products.length,totalSales:a.sales.length,totalCustomers:0,todayRevenue:Y,todaySideBusinessRevenue:Re,todayTransactions:He.length,lowStockItems:nt}),h(!1)}else t==null&&!r&&(u({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),h(!1))},[t,r,a?.sales?.length,i?.products?.length]),E.useEffect(()=>{},[V,A,t,r]);const _e=async te=>{try{w(!0);const Pe=new Date(te);g(Pe),v([]);const tt=(De=>`${De.getFullYear()}-${String(De.getMonth()+1).padStart(2,"0")}-${String(De.getDate()).padStart(2,"0")}`)(Pe),{data:Y,error:Re}=await Oe.from("sales").select(`
          sale_id,
          datetime,
          total_amount,
          payment_method,
          sale_items (quantity)
        `).gte("datetime",`${tt}T00:00:00`).lt("datetime",`${tt}T23:59:59`).order("datetime",{ascending:!1});if(Re){console.error("Error fetching transactions:",Re);return}const nt=(Y||[]).map(De=>({transaction_id:`TXN-${De.sale_id.toString().padStart(6,"0")}`,datetime:De.datetime,total_amount:De.total_amount,payment_method:De.payment_method,items_count:De.sale_items?.reduce((ut,ht)=>ut+ht.quantity,0)||0}));v(nt)}catch(Pe){console.error("Error fetching transactions:",Pe)}finally{w(!1)}},ne=()=>{g(null),v([])},ve=te=>{ne(),e(`/transaction/${te}`)},le=te=>{D(te),S(!1)},Ae=(te,Pe)=>{const He=new Date(te,Pe,1),tt=new Date(He);tt.setDate(tt.getDate()-He.getDay());const Y=[],Re=new Date(tt);for(let nt=0;nt<42;nt++)Y.push(new Date(Re)),Re.setDate(Re.getDate()+1);return Y},M=()=>{switch(V){case"today":const te=new Date;return A.toDateString()===te.toDateString()?"Today's Sales":`${A.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Sales`;case"week":return"This Week Sales";case"month":return"This Month Sales";default:return"Today's Sales"}},Q=()=>{switch(V){case"today":const te=new Date;return A.toDateString()===te.toDateString()?"Today's Transactions":`${A.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Transactions`;case"week":return"This Week Transactions";case"month":return"This Month Transactions";default:return"Today's Transactions"}},k=()=>{if(K===0)return c.todayTransactions>0?"+100%":"0%";const te=(c.todayTransactions-K)/K*100;return`${te>=0?"+":""}${te.toFixed(0)}%`},L=()=>c.todayTransactions-ee,W=()=>{const te=L(),Pe=k();return{text:`Products: ${te} | Side Business: ${ee} (${Pe} from yesterday)`,icon:"fa-solid fa-chart-pie"}},X=te=>{const Pe=new Date,He=te.toDateString()===Pe.toDateString(),tt=te.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return He?"Today's Transactions":`${tt} Transactions`},ge=te=>{const Pe=new Date,He=te.toDateString()===Pe.toDateString(),tt=te.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return He?"No transactions found for today":`No transactions found for ${tt}`},Me=(te,Pe,He=100)=>{const tt=te+Pe;if(tt===0)return null;const Re=te/tt*100/100*360,nt=(ht,At,mt)=>{const Ie=De(He/2,He/2,mt,At),rt=De(He/2,He/2,mt,ht),xt=At-ht<=180?"0":"1";return`M ${He/2} ${He/2} L ${Ie.x} ${Ie.y} A ${mt} ${mt} 0 ${xt} 0 ${rt.x} ${rt.y} Z`},De=(ht,At,mt,Ie)=>{const rt=(Ie-90)*Math.PI/180;return{x:ht+mt*Math.cos(rt),y:At+mt*Math.sin(rt)}},ut=He*.4;return o.jsxs("svg",{width:He,height:He,style:{marginRight:"12px"},children:[te>0&&o.jsx("path",{d:nt(0,Re,ut),fill:"#dc2626",stroke:"#ffffff",strokeWidth:"2"}),Pe>0&&o.jsx("path",{d:nt(Re,360,ut),fill:"#f59e0b",stroke:"#ffffff",strokeWidth:"2"})]})},Ce=[{title:M(),value:Tn(c.todayRevenue+c.todaySideBusinessRevenue),change:`Products: ${Tn(c.todayRevenue)} | Side Business: ${Tn(c.todaySideBusinessRevenue)}`,changeColor:"#1a1a1a",icon:"fa-solid fa-euro-sign",bgColor:"#1a1a1a",iconColor:"#f1f0e4"},{title:Q(),value:c.todayTransactions,change:W().text,changeIcon:W().icon,changeColor:"#bca88d",icon:"fa-solid fa-shopping-cart",bgColor:"#bca88d",iconColor:"#1a1a1a",pieChart:{productCount:L(),sideBusinessCount:ee}}];return f?o.jsxs("div",{style:{padding:"0"},children:[o.jsx("style",{children:`
          @keyframes shimmer { 0% { background-position: -400px 0; } 100% { background-position: 400px 0; } }
          .skeleton { background-image: linear-gradient(90deg, #e5e7eb 0px, #f3f4f6 40px, #e5e7eb 80px); background-size: 600px 100%; animation: shimmer 1.2s infinite linear; }
        `}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"24px",marginBottom:"32px"},children:[o.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),o.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),o.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),o.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px"},children:[o.jsx("div",{className:"skeleton",style:{height:"300px",borderRadius:"16px"}}),o.jsx("div",{className:"skeleton",style:{height:"300px",borderRadius:"16px"}})]}),o.jsx("div",{className:"skeleton",style:{height:"420px",borderRadius:"16px"}})]}):o.jsxs("div",{style:{padding:"0"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"16px",marginBottom:"32px"},children:[o.jsxs("div",{onClick:()=>S(!0),style:{background:"#1a1a1a",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",transition:"all 0.2s ease",minWidth:"200px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[o.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),o.jsx("span",{style:{color:"#bca88d"},children:A.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),o.jsx("i",{className:"fa-solid fa-chevron-down",style:{fontSize:"12px",color:"#bca88d",transition:"transform 0.2s ease"}})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"4px"},children:[o.jsx("button",{onClick:()=>P("today"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:V==="today"?"#7d8d86":"transparent",color:V==="today"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Today"}),o.jsx("button",{onClick:()=>P("week"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:V==="week"?"#7d8d86":"transparent",color:V==="week"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"This Week"}),o.jsx("button",{onClick:()=>P("month"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:V==="month"?"#7d8d86":"transparent",color:V==="month"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"This Month"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"24px",marginBottom:"32px",minHeight:"140px"},children:[Ce.map((te,Pe)=>o.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",transition:"all 0.3s ease",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[o.jsxs("div",{children:[o.jsx("p",{style:{color:"#1a1a1a",fontSize:"16px",fontWeight:"500",margin:"0 0 12px 0"},children:te.title}),o.jsx("p",{style:{fontSize:"36px",fontWeight:"bold",color:"#1a1a1a",margin:"0 0 8px 0",lineHeight:"1.1"},children:te.value}),o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",fontSize:"14px",fontWeight:"500",color:te.changeColor,margin:0},children:te.pieChart?o.jsxs(o.Fragment,{children:[Me(te.pieChart.productCount,te.pieChart.sideBusinessCount),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#dc2626"}}),o.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"#1a1a1a"},children:["Products: ",te.pieChart.productCount]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f59e0b"}}),o.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"#1a1a1a"},children:["Side Business: ",te.pieChart.sideBusinessCount]})]})]})]}):o.jsxs(o.Fragment,{children:[te.changeIcon&&o.jsx("i",{className:te.changeIcon,style:{fontSize:"12px"}}),o.jsx("span",{children:te.change})]})}),Pe===0&&z.length>0&&o.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:"12px",maxWidth:"100%"},children:z.map(He=>o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",padding:"8px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",overflow:"hidden",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:He.image_url?o.jsx("img",{src:He.image_url,alt:He.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:tt=>{const Y=tt.target;Y.style.display="none";const Re=Y.parentElement;Re&&(Re.innerHTML='<i class="fa-solid fa-store" style="font-size: 18px; color: #7d8d86;"></i>')}}):o.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"18px",color:"#7d8d86"}})}),o.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[o.jsx("p",{style:{fontSize:"11px",color:"#7d8d86",fontWeight:"500",margin:"0 0 2px 0",lineHeight:"1.2"},children:He.name}),o.jsx("p",{style:{fontSize:"12px",color:"#1a1a1a",fontWeight:"600",margin:0},children:Tn(He.total_amount)})]})]},He.business_id))})})]}),o.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"14px",background:te.bgColor,display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"flex-end",marginTop:"16px"},children:o.jsx("i",{className:te.icon,style:{fontSize:"24px",color:te.iconColor}})})]})},Pe)),o.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:o.jsx(D3,{})}),o.jsx(I3,{activePeriod:V,selectedDate:A})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"24px",marginBottom:"32px"},children:[o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:o.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"5px solid #000000 !important"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"18px",color:"#f1f0e4"}})}),o.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:(()=>{switch(V){case"today":const te=new Date;return A.toDateString()===te.toDateString()?"Recent Transactions":`${A.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Transactions`;case"week":return"This Week Transactions";case"month":return"This Month Transactions";default:return"Recent Transactions"}})()})]}),o.jsx("button",{onClick:()=>_e(A),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"View All"})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Z.length>0?Z.map(te=>o.jsxs("div",{onClick:()=>e(`/transaction/TXN-${te.sale_id.toString().padStart(6,"0")}`),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:te.partial_payment?"#fef2f2":"white",borderRadius:"8px",border:te.partial_payment?"1px solid #fecaca":"1px solid transparent",cursor:"pointer",transition:"all 0.2s ease"},children:[o.jsxs("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:te.partial_payment?"#f59e0b":te.status==="completed"?"#10b981":"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[o.jsx("i",{className:`fa-solid ${te.partial_payment?"fa-exclamation":te.status==="completed"?"fa-check":"fa-hourglass-half"}`,style:{fontSize:"12px",color:"white"}}),te.partial_payment&&o.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"8px",height:"8px",borderRadius:"50%",background:"#dc2626",border:"1px solid white"}})]}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 2px 0"},children:["#TXN-",te.sale_id.toString().padStart(6,"0")]}),o.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[te.items_count," item",te.items_count!==1?"s":""," | ",te.payment_method,te.partial_payment&&o.jsx("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"8px"},children:"• PARTIAL"})]})]}),o.jsx("div",{style:{textAlign:"right"},children:te.partial_payment?o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981",margin:"0 0 2px 0"},children:Tn(te.partial_amount||0)}),o.jsxs("p",{style:{fontSize:"11px",color:"#6b7280",margin:"0 0 2px 0",fontWeight:"500"},children:["of ",Tn((te.partial_amount||0)+(te.remaining_amount||0))]}),o.jsxs("p",{style:{fontSize:"10px",color:"#dc2626",margin:0,fontWeight:"600"},children:["OWES: ",Tn(te.remaining_amount||0)]})]}):o.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:0},children:Tn(te.total_amount)})})]},te.sale_id)):o.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#1a1a1a",fontSize:"14px"},children:(()=>{switch(V){case"today":const te=new Date;return A.toDateString()===te.toDateString()?"No recent transactions":`No transactions on ${A.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`;case"week":return"No transactions this week";case"month":return"No transactions this month";default:return"No recent transactions"}})()})})]})}),o.jsx("div",{children:o.jsx(W3,{selectedDate:A,activePeriod:V})})]}),p&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",margin:0},children:X(p)}),o.jsx("button",{onClick:ne,style:{background:"none",border:"none",fontSize:"24px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:"×"})]}),b?o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"40px"},children:o.jsxs("div",{style:{fontSize:"16px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading transactions..."]})}):y.length>0?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:y.map((te,Pe)=>o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>ve(te.transaction_id),children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"16px"},children:o.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"14px"}})}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 4px 0"},children:te.transaction_id}),o.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[new Date(te.datetime).toLocaleTimeString()," | ",te.items_count," items | ",te.payment_method]})]})]}),o.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1a1a1a"},children:Tn(te.total_amount)})]},Pe))}):o.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#1a1a1a"},children:[o.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),o.jsx("p",{style:{fontSize:"16px",margin:0},children:ge(p)})]})]})}),_&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[o.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:I.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:()=>G(new Date(I.getFullYear(),I.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:o.jsx("i",{className:"fa-solid fa-chevron-left"})}),o.jsx("button",{onClick:()=>G(new Date(I.getFullYear(),I.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:o.jsx("i",{className:"fa-solid fa-chevron-right"})}),o.jsx("button",{onClick:()=>S(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:"×"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(te=>o.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#1a1a1a",padding:"8px 4px"},children:te},te)),Ae(I.getFullYear(),I.getMonth()).map((te,Pe)=>{const He=te.getMonth()===I.getMonth(),tt=te.toDateString()===new Date().toDateString(),Y=te.toDateString()===A.toDateString();return o.jsx("button",{onClick:()=>le(te),style:{background:Y?"#1a1a1a":"transparent",color:Y?"#f1f0e4":He?"#1a1a1a":"#bca88d",border:tt?"2px solid #1a1a1a":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:He?1:.5},children:te.getDate()},Pe)})]}),o.jsx("div",{style:{textAlign:"center"},children:o.jsx("button",{onClick:()=>le(new Date),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Today"})})]})})]})};async function q3(e,t,r){if(console.log("?? Starting image upload for product:",t),console.log("?? File details:",{name:e.name,size:e.size,type:e.type}),r==null)return console.error("Cannot upload product image without an active business"),null;try{const a=`product-images/${t}.${e.name.split(".").pop()}`;console.log("?? Uploading to Supabase Storage:",a);const{error:i}=await Oe.storage.from("products").upload(a,e,{contentType:e.type,upsert:!0});if(i)return console.error("? Upload failed:",i),null;const{data:{publicUrl:c}}=Oe.storage.from("products").getPublicUrl(a);console.log("? Image uploaded successfully:",c),console.log("?? Updating database with public URL...");const{error:u}=await Oe.from("products").update({image_url:c}).eq("product_id",t).eq("business_id",r);return u?(console.error("? DB update failed:",u),null):(console.log("? Database updated with public URL"),c)}catch(a){return console.error("?? Unexpected error during upload:",a),null}}const $3=()=>{const{hasPermission:e}=D0(),{user:t}=An(),{businessId:r,businessLoading:a}=td(),[i,c]=E.useState([]),[u,f]=E.useState(!0),[h,p]=E.useState(null),[g,y]=E.useState({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),[v,b]=E.useState(null),[w,_]=E.useState(!1),[S,A]=E.useState(null),[D,I]=E.useState(null),[G,Z]=E.useState(!1),[oe,V]=E.useState("daily"),[P,z]=E.useState(""),[ie,K]=E.useState("all"),[xe,ee]=E.useState(!1),[re,_e]=E.useState([]),[ne,ve]=E.useState(!1),[le,Ae]=E.useState(!1),[M,Q]=E.useState(null),[k,L]=E.useState({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),[W,X]=E.useState(!1),[ge,Me]=E.useState(!1),[qe,Ce]=E.useState("Hi! I'm Lily, your inventory assistant! I can help you understand your stock levels and manage your products. Hover over the stats cards to see what they mean!"),[te,Pe]=E.useState(!1),[He,tt]=E.useState(null),[Y,Re]=E.useState(null),[nt,De]=E.useState(!1),[ut,ht]=E.useState(null),[At,mt]=E.useState(null),[Ie,rt]=E.useState(1),[xt,Qt]=E.useState(10),[mr,Mt]=E.useState(0),[ce,$e]=E.useState([]),[ft,Dt]=E.useState([]),[sr,Er]=E.useState(null),[br,er]=E.useState(null),Cr=300*1e3,Ut=async(j=!1)=>{if(r==null){Dt([]);return}if(!j&&sr&&sr.businessId===r&&Date.now()-sr.timestamp<Cr){const ue=sr.data.map(je=>({...je,price:0,stock_quantity:0,supplier_info:"",reorder_level:0,image_url:null,created_at:"",updated_at:""}));Dt(ue);return}try{const{data:ue,error:je}=await Oe.from("products").select("product_id, name, category").eq("business_id",r).order("name",{ascending:!0});if(je){console.error("Error fetching all products for suggestions:",je);return}const lt=ue||[],yt=lt.map(bt=>({...bt,price:0,stock_quantity:0,supplier_info:"",reorder_level:0,image_url:null,created_at:"",updated_at:""}));Dt(yt),Er({data:lt,timestamp:Date.now(),businessId:r})}catch(ue){console.error("Error fetching all products for suggestions:",ue)}},ar=async()=>{if(r==null){$e([]);return}try{const{data:j,error:ue}=await Oe.from("products").select("category").eq("business_id",r).not("category","is",null).not("category","eq","");if(ue){console.error("Error fetching categories:",ue);return}const je=Array.from(new Set(j.map(lt=>lt.category))).filter(lt=>lt&&lt.trim()!=="").sort();$e(je)}catch(j){console.error("Error fetching distinct categories:",j)}};E.useEffect(()=>{if(r==null){c([]),Dt([]),$e([]),y({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),Mt(0);return}at(1,xt,P,ie,v),ar(),Ut(!0),kt(!0)},[r,a]),E.useEffect(()=>{console.log("Modal state changed:",{showEditModal:le,editingProduct:M?.name})},[le,M]);const ae=()=>{rt(1),at(1,xt,P,ie)},ke=j=>{j.key==="Enter"&&(ae(),ee(!1))},pt=j=>{const ue=j.target.value;if(z(ue),ue.length>=2){const je=R(ue);_e(je),ee(je.length>0)}else ee(!1),_e([])},Ct=j=>{const ue=j.type==="product"?j.product.name:j.name;z(ue),ee(!1),_e([]),rt(1),at(1,xt,ue,ie)},tr=()=>{z(""),ee(!1),_e([]),rt(1),at(1,xt,"",ie)};E.useEffect(()=>{r!=null&&(rt(1),at(1,xt,P,ie,v))},[ie,r,a]);const at=async(j=Ie,ue=xt,je=P,lt=ie,yt=null)=>{if(r==null){c([]),Mt(0),f(!1);return}try{if(f(!0),p(null),yt&&yt!=="totalProducts"){let bt=Oe.from("products").select("*").eq("business_id",r).order("product_id",{ascending:!0});if(je&&je.trim()){const yr=`name.ilike.%${je.trim()}%,category.ilike.%${je.trim()}%`;bt=bt.or(yr)}lt&&lt!=="all"&&(bt=bt.eq("category",lt)),yt==="outOfStock"&&(bt=bt.eq("stock_quantity",0));const{data:it,error:St}=await bt;if(St)throw St;let wt=it||[];yt==="inStock"?wt=wt.filter(yr=>yr.stock_quantity>yr.reorder_level):yt==="lowStock"&&(wt=wt.filter(yr=>yr.stock_quantity<=yr.reorder_level&&yr.stock_quantity>0)),Mt(wt.length);const Ft=(j-1)*ue,Br=wt.slice(Ft,Ft+ue);c(Br)}else{let bt=Oe.from("products").select("product_id",{count:"exact",head:!0}).eq("business_id",r),it=Oe.from("products").select("*").eq("business_id",r).order("product_id",{ascending:!0});if(je&&je.trim()){const _n=`name.ilike.%${je.trim()}%,category.ilike.%${je.trim()}%`;bt=bt.or(_n),it=it.or(_n)}lt&&lt!=="all"&&(bt=bt.eq("category",lt),it=it.eq("category",lt));const{count:St,error:wt}=await bt;if(wt)throw wt;Mt(St||0);const Ft=(j-1)*ue,{data:Br,error:yr}=await it.range(Ft,Ft+ue-1);if(yr)throw yr;c(Br||[])}}catch(bt){const it=bt instanceof Error?bt.message:"Failed to fetch products";p(it),console.error("Error fetching products:",bt),alert(`Products loading error: ${it}. Please check your database permissions.`)}finally{f(!1)}},kt=async(j=!1)=>{if(r==null){y({totalProducts:0,inStock:0,lowStock:0,outOfStock:0});return}if(!j&&br&&br.businessId===r&&Date.now()-br.timestamp<Cr){y(br.data);return}try{const{data:ue,error:je}=await Oe.from("products").select("stock_quantity, reorder_level").eq("business_id",r);if(je)throw je;if(ue){const lt=ue.length,yt=ue.filter(wt=>wt.stock_quantity>wt.reorder_level).length,bt=ue.filter(wt=>wt.stock_quantity<=wt.reorder_level&&wt.stock_quantity>0).length,it=ue.filter(wt=>wt.stock_quantity===0).length,St={totalProducts:lt,inStock:yt,lowStock:bt,outOfStock:it};y(St),er({data:St,timestamp:Date.now(),businessId:r})}}catch(ue){console.error("Error fetching summary stats:",ue)}},Rt=j=>{v===j?(b(null),z(""),K("all"),rt(1),at(1,xt,"","all")):(b(j),z(""),K("all"),rt(1),at(1,xt,"","all",j))},yn=j=>{const ue=new Date,je=new Date(ue.getTime()-720*60*60*1e3);new Date(ue.getTime()-10080*60*1e3);const lt=j.filter(St=>St.sales&&new Date(St.sales.datetime)>=je),yt=[];for(let St=29;St>=0;St--){const wt=new Date(ue.getTime()-St*24*60*60*1e3),Ft=wt.toISOString().split("T")[0],Br=lt.filter(C=>C.sales&&C.sales.datetime.startsWith(Ft)),yr=Br.length,_n=Br.reduce((C,he)=>C+(he.calculated_price||he.price_each*he.quantity),0);yt.push({date:Ft,day:wt.getDate(),month:wt.getMonth()+1,sales:yr,revenue:_n})}const bt=[];for(let St=3;St>=0;St--){const wt=new Date(ue.getTime()-(St+1)*7*24*60*60*1e3),Ft=new Date(ue.getTime()-St*7*24*60*60*1e3),Br=lt.filter(C=>{if(!C.sales)return!1;const he=new Date(C.sales.datetime);return he>=wt&&he<Ft}),yr=Br.length,_n=Br.reduce((C,he)=>C+(he.calculated_price||he.price_each*he.quantity),0);bt.push({week:`Week ${4-St}`,startDate:wt.toISOString().split("T")[0],endDate:Ft.toISOString().split("T")[0],sales:yr,revenue:_n})}const it=[];for(let St=5;St>=0;St--){const wt=new Date(ue.getFullYear(),ue.getMonth()-St,1),Ft=new Date(ue.getFullYear(),ue.getMonth()-St+1,0),Br=j.filter(C=>{if(!C.sales)return!1;const he=new Date(C.sales.datetime);return he>=wt&&he<=Ft}),yr=Br.length,_n=Br.reduce((C,he)=>C+(he.calculated_price||he.price_each*he.quantity),0);it.push({month:wt.toLocaleDateString("en-US",{month:"short",year:"numeric"}),sales:yr,revenue:_n})}return{daily:yt,weekly:bt,monthly:it}},wr=async j=>{if(r==null){I(null);return}try{Z(!0),p(null),console.log("Fetching insights for product:",j.product_id,j.name);const ue=j.sales_count||0,je=j.total_revenue||0,lt=j.last_sold_date,yt=ue>0?(ue/30).toFixed(1):0,bt=je*.6,it=je-bt,St=je>0?it/je*100:0,{data:wt,error:Ft}=await Oe.from("sale_items").select(`
          *,
          sales (
            sale_id,
            datetime,
            total_amount,
            payment_method,
            customers (name),
            users (username),
            business_id
          )
        `).eq("product_id",j.product_id).eq("sales.business_id",r).order("sales.datetime",{ascending:!1});if(Ft)throw Ft;console.log("All sales query result:",{data:wt});const Br=wt?.slice(0,10)||[],yr=Br?.map(Xe=>({date:Xe.sales?new Date(Xe.sales.datetime).toLocaleDateString():"Unknown",time:Xe.sales?new Date(Xe.sales.datetime).toLocaleTimeString():"Unknown",quantity:Xe.weight||Xe.quantity,unit:Xe.weight?j.weight_unit||"kg":"units",price:Xe.calculated_price||Xe.price_each*Xe.quantity,customer:Xe.sales?.customers?.name||"Walk-in Customer",cashier:Xe.sales?.users?.username||"Unknown"}))||[],_n=Br?.reduce((Xe,ot)=>Xe+(ot.weight||ot.quantity),0)||0,C=new Date;C.setDate(C.getDate()-30);const Ke=(Br?.filter(Xe=>Xe.sales&&new Date(Xe.sales.datetime)>=C)||[]).reduce((Xe,ot)=>{if(ot.sales&&ot.sales.datetime){const ct=new Date(ot.sales.datetime).toDateString();Xe[ct]=(Xe[ct]||0)+1}return Xe},{}),Qe=Object.entries(Ke).sort(([,Xe],[,ot])=>ot-Xe).slice(0,5).map(([Xe,ot])=>({date:Xe,count:ot})),Ve=yn(wt||[]);console.log("Calculated insights:",{totalSales:ue,totalRevenue:je,totalQuantitySold:_n,averageSalesPerDay:yt,topSellingDays:Qe,estimatedProfit:it,profitMargin:St,recentSalesList:yr,lastSoldDate:lt,chartData:Ve}),I({product:j,totalSales:ue,totalRevenue:je,totalQuantitySold:_n,averageSalesPerDay:parseFloat(yt),topSellingDays:Qe,estimatedProfit:it,profitMargin:St,recentSalesList:yr,lastSoldDate:lt,chartData:Ve,salesData:wt||[]})}catch(ue){console.error("Error fetching product insights:",ue),p(ue instanceof Error?ue.message:"Failed to fetch product insights")}finally{Z(!1)}},vn=j=>{A(j),_(!0),wr(j)},$t=i,jt=Math.ceil(mr/xt),fr=mr>0?(Ie-1)*xt+1:0,Ln=Math.min(Ie*xt,mr),da=["all",...ce],Pn=j=>!j||j.length<2?[]:ce.filter(je=>je.toLowerCase().includes(j.toLowerCase())||j.toLowerCase().includes(je.toLowerCase())||je.toLowerCase().split(" ").some(lt=>lt.includes(j.toLowerCase())||j.toLowerCase().includes(lt))).slice(0,5),R=j=>{if(!j||j.length<2)return[];const ue=j.toLowerCase(),je=[],lt=[];ft.forEach(it=>{it.name.toLowerCase().includes(ue)&&je.push({type:"product",product:it}),it.category.toLowerCase().includes(ue)&&je.push({type:"product",product:it}),it.description&&it.description.toLowerCase().includes(ue)&&je.push({type:"product",product:it}),it.sku&&it.sku.toLowerCase().includes(ue)&&je.push({type:"product",product:it})}),ce.forEach(it=>{it.toLowerCase().includes(ue)&&lt.push({type:"category",name:it})});const yt=je.filter((it,St,wt)=>it.type==="product"&&wt.findIndex(Ft=>Ft.type==="product"&&Ft.product.product_id===it.product.product_id)===St).slice(0,6),bt=lt.filter((it,St,wt)=>it.type==="category"&&wt.findIndex(Ft=>Ft.type==="category"&&Ft.name===it.name)===St).slice(0,2);return[...yt,...bt]},U=j=>{j>=1&&j<=jt&&(rt(j),at(j,xt,P,ie))},B=j=>{Qt(j),rt(1),at(1,j,P,ie)},F=()=>{Ie>1&&U(Ie-1)},H=()=>{Ie<jt&&U(Ie+1)},q=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(j){const ue=Math.random()*16|0;return(j==="x"?ue:ue&3|8).toString(16)}),ye=(j,ue,je=!1)=>{const lt=(it,St,wt=!0)=>{if(!it||it.trim()===""){if(wt)throw new Error(`${St} is required`);return 0}const Ft=parseFloat(it);if(isNaN(Ft))throw new Error(`${St} must be a valid number`);return Ft},yt=(it,St,wt=!0)=>{if(!it||it.trim()===""){if(wt)throw new Error(`${St} is required`);return 0}const Ft=parseInt(it);if(isNaN(Ft)||!Number.isInteger(Ft))throw new Error(`${St} must be a valid whole number`);return Ft},bt={name:j.product_name?.trim()||(()=>{throw new Error("Product name is required")})(),category:j.category?.trim()||(()=>{throw new Error("Category is required")})(),price:j.is_weighted?0:lt(j.price,"Price",!je),stock_quantity:yt(j.stock_quantity,"Stock quantity",!je),supplier_info:j.supplier_info?.trim()||"",reorder_level:yt(j.reorder_level,"Reorder level",!je),tax_rate:j.tax_rate?lt(j.tax_rate,"Tax rate",!1):0,last_updated:new Date().toISOString(),is_weighted:j.is_weighted||!1,weight_unit:j.is_weighted?j.weight_unit:null,price_per_unit:j.is_weighted&&j.price_per_unit?lt(j.price_per_unit,"Price per unit",!1):null,description:j.description?.trim()||"",sku:j.sku?.trim()||"",barcode:(()=>{const it=j.barcode?.trim();return it&&it.length>0?it:null})()};return ue?{...bt,product_id:ue}:bt},Ne=j=>{if(j.key!=="Enter")return;const ue=j.target;!ue||ue instanceof HTMLTextAreaElement||ue instanceof HTMLButtonElement||ue instanceof HTMLInputElement&&ue.type==="submit"||!(ue instanceof HTMLInputElement||ue instanceof HTMLSelectElement)||(j.preventDefault(),j.stopPropagation())},fe=async j=>{if(j.preventDefault(),console.log("Form submitted, newProduct:",k),X(!0),r==null){p("Please select a business before adding products"),X(!1);return}try{const ue=q();console.log("Generated product ID:",ue);const je=ye(k,ue),lt={...je,business_id:r};console.log("Inserting product data:",lt);const{data:yt,error:bt}=await Oe.from("products").insert([lt]).select();if(bt)throw console.error("Supabase error:",bt),bt;const it=yt?.[0]?{...yt[0],barcode:je.barcode??null}:null;if(!it)throw new Error("Product insertion returned no data");if(console.log("Product added successfully!"),He){const St=await Ge(ue);if(St){const wt={...it,image_url:St};c(Ft=>[...Ft,wt])}else c(wt=>[...wt,it])}else c(St=>[...St,it]);Mt(St=>St+1),L({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),tt(null),Re(null),ve(!1),ar(),Ut(!0),kt(!0)}catch(ue){console.error("Error adding product:",ue);let je="Failed to add product";ue instanceof Error&&ue.message&&(ue.message.includes("is required")||ue.message.includes("must be a valid")?je=ue.message:ue.message.includes("duplicate key value violates unique constraint")?je="A product with this ID already exists. Please try again.":ue.message.includes("violates check constraint")?je="Invalid data provided. Please check your input values.":ue.message.includes("not-null constraint")?je="Required fields are missing. Please fill in all required fields.":je=`Failed to add product: ${ue.message}`),p(je)}finally{X(!1)}},Se=async j=>{if(j.preventDefault(),!!M){if(r==null){p("Please select a business before updating products");return}X(!0),p(null);try{console.log("Editing product data:",k);const ue=ye(k,void 0,!0);console.log("Transformed product data:",ue);const{data:je,error:lt}=await Oe.from("products").update(ue).eq("product_id",M.product_id).eq("business_id",r).select();if(lt)throw console.error("Supabase error:",lt),console.error("Error details:",JSON.stringify(lt,null,2)),lt;let yt=je?.[0]?{...je[0],barcode:ue.barcode??null}:null;if(!yt)throw new Error("Product update returned no data");if(He){const bt=await Ge(M.product_id);bt&&(yt={...yt,image_url:bt})}c(i.map(bt=>bt.product_id===M.product_id?yt:bt)),Ue(),Ae(!1),Q(null),ar(),Ut(!0),kt(!0)}catch(ue){console.error("Failed to update product:",ue);let je="Failed to update product";ue instanceof Error&&ue.message&&(ue.message.includes("is required")||ue.message.includes("must be a valid")?je=ue.message:ue.message.includes("violates check constraint")?je="Invalid data provided. Please check your input values.":ue.message.includes("not-null constraint")?je="Required fields are missing. Please fill in all required fields.":je=`Failed to update product: ${ue.message}`),p(je)}finally{X(!1)}}},we=async j=>{if(r==null){p("Please select a business before deleting products");return}try{console.log("??? Starting delete for product:",j);const{error:ue}=await Oe.from("products").delete().eq("product_id",j).eq("business_id",r);if(ue)throw console.error("?? Error deleting product:",ue),ue;console.log("? Product deleted successfully"),c(i.filter(je=>je.product_id!==j)),mt(null),Mt(je=>Math.max(0,je-1)),Ut(!0),kt(!0)}catch(ue){console.error("? Delete failed:",ue),p(ue instanceof Error?ue.message:"Failed to delete product")}},Ue=()=>{L({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),tt(null),Re(null),ve(!1),Ae(!1),Q(null)},Ye=j=>{console.log("Starting edit for product:",j),Q(j),L({product_name:j.name,category:j.category,price:j.is_weighted?j.price_per_unit?.toString()||"":j.price.toString(),stock_quantity:j.stock_quantity.toString(),reorder_level:j.reorder_level.toString(),supplier_info:j.supplier_info||"",tax_rate:j.tax_rate?.toString()||"",description:j.description||"",sku:j.sku||"",barcode:j.barcode||"",is_weighted:j.is_weighted||!1,weight_unit:j.weight_unit||"",price_per_unit:j.price_per_unit?.toString()||""}),Re(j.image_url||null),tt(null),Ae(!0),console.log("Edit modal should be open now")},st=j=>{const ue=j.target.files?.[0];if(ue){tt(ue);const je=new FileReader;je.onload=lt=>{Re(lt.target?.result)},je.readAsDataURL(ue)}},Ge=async j=>{if(!He)return null;if(r==null)return console.error("Cannot upload image without selecting a business"),null;try{return await q3(He,j,r)}catch(ue){return console.error("Image upload failed:",ue),null}},et=j=>{ht(j),De(!0)},vt=()=>{De(!1),ht(null)},Gt=(j,ue)=>j===0?{status:"out",color:"#ef4444",bgColor:"#fef2f2",textColor:"#dc2626"}:j<=ue?{status:"low",color:"#f59e0b",bgColor:"#fffbeb",textColor:"#d97706"}:{status:"good",color:"#10b981",bgColor:"#f0fdf4",textColor:"#059669"},Yt=j=>{const ue=j.toLowerCase();return ue.includes("small")?"#3b82f6":ue.includes("large")?"#ef4444":ue.includes("medium")?"#f59e0b":"#7d8d86"},Kt=j=>{const ue=j.split(" ");return ue.map((je,lt)=>{const yt=je.toLowerCase();let bt="#1a1a1a";return yt==="small"?bt="#3b82f6":yt==="large"?bt="#ef4444":yt==="medium"&&(bt="#f59e0b"),o.jsxs("span",{style:{color:bt},children:[je,lt<ue.length-1?" ":""]},lt)})},bn=()=>o.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,display:"flex",alignItems:"flex-end",gap:"12px"},children:[ge&&o.jsxs("div",{style:{background:"#f8fafc",border:"2px solid #7d8d86",borderRadius:"16px",padding:"12px 16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",maxWidth:"250px",fontSize:"14px",color:"#3e3f29",position:"relative",marginBottom:"8px"},children:[o.jsx("p",{style:{margin:0,fontWeight:"500"},children:qe}),o.jsx("div",{style:{position:"absolute",bottom:"-8px",right:"20px",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"8px solid #7d8d86"}})]}),o.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"#f8fafc",border:"3px solid #7d8d86",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease"},onClick:()=>Me(!ge),onMouseEnter:j=>{const ue=j.target;ue.style.transform="scale(1.05)"},onMouseLeave:j=>{const ue=j.target;ue.style.transform="scale(1)"},children:o.jsx("img",{src:t?.icon?`/retailpos/images/icons/${t.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:t?.icon||"Lily",style:{width:"50px",height:"50px",borderRadius:"50%"}})})]});return u?o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:o.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading inventory..."]})}):o.jsxs("div",{style:{padding:"24px",background:"#f8fafc",minHeight:"100vh",border:"1px solid rgba(125, 141, 134, 0.1)",borderRadius:"16px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px",padding:"20px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsxs("div",{children:[o.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:"Inventory Management"}),o.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:"Manage your product inventory, stock levels, and suppliers."})]}),e("canManageProducts")&&o.jsxs("button",{onClick:()=>{console.log("Add Product button clicked"),ve(!0),console.log("showAddModal set to true")},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},onMouseEnter:j=>{j.target.style.background="#bca88d",Ce("Click this button to add a new product to your inventory! You'll need to fill in details like name, price, stock quantity, and reorder level."),Me(!0)},onMouseLeave:j=>{j.target.style.background="#7d8d86",Me(!1)},children:[o.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"16px"}}),o.jsx("span",{children:"Add Product"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginBottom:"32px",padding:"20px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsx("div",{onClick:()=>Rt("totalProducts"),style:{background:v==="totalProducts"?"#f0f8f0":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="totalProducts"?"2px solid #7d8d86":"2px solid transparent"},onMouseEnter:j=>{v!=="totalProducts"&&(j.target.style.background="#f1f5f9")},onMouseLeave:j=>{v!=="totalProducts"&&(j.target.style.background="#f8fafc")},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"18px",color:"#f1f0e4"}})}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:g.totalProducts}),o.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Total Products"})]})]})}),o.jsx("div",{onClick:()=>Rt("inStock"),style:{background:v==="inStock"?"#f0fdf4":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="inStock"?"2px solid #10b981":"2px solid transparent"},onMouseEnter:j=>{v!=="inStock"&&(j.target.style.background="#f1f5f9")},onMouseLeave:j=>{v!=="inStock"&&(j.target.style.background="#f8fafc")},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"fa-solid fa-circle-check",style:{fontSize:"18px",color:"white"}})}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:g.inStock}),o.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"In Stock"})]})]})}),o.jsx("div",{onClick:()=>Rt("lowStock"),style:{background:v==="lowStock"?"#fffbeb":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="lowStock"?"2px solid #f59e0b":"2px solid transparent"},onMouseEnter:j=>{v!=="lowStock"&&(j.target.style.background="#f1f5f9")},onMouseLeave:j=>{v!=="lowStock"&&(j.target.style.background="#f8fafc")},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"fa-solid fa-triangle-exclamation",style:{fontSize:"18px",color:"white"}})}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:g.lowStock}),o.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Low Stock"})]})]})}),o.jsx("div",{onClick:()=>Rt("outOfStock"),style:{background:v==="outOfStock"?"#fef2f2":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="outOfStock"?"2px solid #ef4444":"2px solid transparent"},onMouseEnter:j=>{v!=="outOfStock"&&(j.target.style.background="#f1f5f9")},onMouseLeave:j=>{v!=="outOfStock"&&(j.target.style.background="#f8fafc")},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"fa-solid fa-circle-xmark",style:{fontSize:"18px",color:"white"}})}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:g.outOfStock}),o.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Out of Stock"})]})]})})]}),o.jsx("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"2px solid rgba(125, 141, 134, 0.3)"},children:o.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"center",flexWrap:"wrap"},children:[o.jsx("div",{style:{flex:"1",minWidth:"250px",maxWidth:"400px"},children:o.jsxs("div",{style:{position:"relative",display:"flex",gap:"8px"},children:[o.jsxs("div",{style:{position:"relative",flex:1},children:[o.jsx("i",{className:"fa-solid fa-search",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#7d8d86",fontSize:"14px",zIndex:1}}),o.jsx("input",{type:"text",placeholder:"Search products... (Press Enter to search)",value:P,onChange:pt,onKeyPress:ke,onBlur:()=>{setTimeout(()=>ee(!1),200)},onFocus:()=>{P.length>=2&&re.length>0&&ee(!0)},style:{width:"100%",padding:"10px 12px 10px 36px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",boxSizing:"border-box"}}),P&&o.jsx("button",{onClick:tr,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"12px",transition:"color 0.2s ease"},onMouseEnter:j=>j.target.style.color="#ef4444",onMouseLeave:j=>j.target.style.color="#7d8d86",children:o.jsx("i",{className:"fa-solid fa-times"})}),xe&&re.length>0&&o.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #d1d5db",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:50,maxHeight:"300px",overflow:"auto"},children:re.map((j,ue)=>o.jsx("div",{onClick:()=>Ct(j),style:{padding:"12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ue<re.length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:je=>je.target.style.background="#f9fafb",onMouseLeave:je=>je.target.style.background="#f8fafc",children:j.type==="product"?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"6px",overflow:"hidden",flexShrink:0,backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:j.product.image_url?o.jsx("img",{src:j.product.image_url,alt:j.product.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):o.jsx("i",{className:"fa-solid fa-box",style:{color:"#9ca3af",fontSize:"16px"}})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontWeight:"500",marginBottom:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:j.product.name}),o.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{children:j.product.category}),o.jsx("span",{children:"?"}),o.jsx("span",{style:{fontWeight:"500",color:"#059669"},children:j.product.is_weighted?`?${j.product.price_per_unit}/${j.product.weight_unit}`:`?${j.product.price}`}),j.product.sku&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"?"}),o.jsxs("span",{children:["SKU: ",j.product.sku]})]})]})]}),o.jsx("i",{className:"fa-solid fa-box",style:{color:"#7d8d86",fontSize:"14px",flexShrink:0}})]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-tags",style:{color:"#7d8d86",fontSize:"16px",width:"16px",flexShrink:0}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:j.name}),o.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Category"})]}),o.jsx("i",{className:"fa-solid fa-arrow-right",style:{color:"#7d8d86",fontSize:"12px",flexShrink:0}})]})},ue))})]}),o.jsxs("button",{onClick:ae,style:{padding:"10px 16px",background:"#7d8d86",color:"#f1f0e4",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},onMouseEnter:j=>j.target.style.background="#bca88d",onMouseLeave:j=>j.target.style.background="#7d8d86",children:[o.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"12px"}}),"Search"]})]})}),o.jsx("div",{style:{minWidth:"180px"},children:o.jsx("select",{value:ie,onChange:j=>K(j.target.value),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",cursor:"pointer"},children:da.map(j=>o.jsx("option",{value:j,children:j==="all"?"All Categories":j},j))})})]})}),o.jsx("div",{style:{background:"#f8fafc",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid rgba(125, 141, 134, 0.3)"},children:o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[o.jsx("thead",{style:{background:"#3e3f29",borderBottom:"4px solid #7d8d86"},children:o.jsxs("tr",{children:[o.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Product"}),o.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Category"}),o.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Price"}),o.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Stock"}),o.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Status"}),o.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86"},children:"Actions"})]})}),o.jsx("tbody",{style:{border:"1px solid rgba(125, 141, 134, 0.2)"},children:$t.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:6,style:{padding:"40px",textAlign:"center",color:"#7d8d86"},children:[o.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),o.jsx("p",{style:{fontSize:"16px",margin:0},children:"No products found"}),o.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0"},children:"Add your first product to get started!"})]})}):$t.map(j=>{const ue=Gt(j.stock_quantity,j.reorder_level);return o.jsxs("tr",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",borderLeft:"1px solid rgba(125, 141, 134, 0.2)",borderRight:"1px solid rgba(125, 141, 134, 0.2)",transition:"background 0.2s ease",cursor:"pointer"},onClick:()=>vn(j),onMouseEnter:je=>je.target.style.background="rgba(125, 141, 134, 0.05)",onMouseLeave:je=>je.target.style.background="transparent",children:[o.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[j.image_url&&o.jsx("img",{src:j.image_url,alt:j.name,onClick:je=>{je.stopPropagation(),j.image_url&&et(j.image_url)},style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:je=>{const lt=je.target;lt.style.transform="scale(1.05)",lt.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",Ce("Click on the image to see it in full size! This helps you get a better look at the product."),Me(!0)},onMouseLeave:je=>{const lt=je.target;lt.style.transform="scale(1)",lt.style.boxShadow="none",Me(!1)}}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 4px 0"},children:Kt(j.name)}),o.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["ID: ",j.product_id]})]})]})}),o.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:o.jsx("span",{style:{background:"#f3f4f6",color:Yt(j.category),padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",border:`1px solid ${Yt(j.category)}`},children:j.category})}),o.jsxs("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:j.is_weighted&&j.price_per_unit&&j.weight_unit?`?${j.price_per_unit.toFixed(2)}/${j.weight_unit}`:`?${j.price.toFixed(2)}`}),j.is_weighted&&o.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"4px 0 0 0"},children:"Sold by weight"})]}),o.jsxs("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:j.stock_quantity}),o.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["Reorder: ",j.reorder_level]})]}),o.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:o.jsx("span",{style:{background:ue.bgColor,color:ue.textColor,padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:ue.status==="good"?"In Stock":ue.status==="low"?"Low Stock":"Out of Stock"})}),o.jsx("td",{style:{padding:"16px"},children:o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e("canManageProducts")&&o.jsxs("button",{onClick:je=>{je.stopPropagation(),console.log("Edit button clicked for product:",j.name),Ye(j)},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:je=>{je.target.style.background="#bca88d",Ce(`Click to edit "${j.name}". You can update the price, stock quantity, reorder level, and other details!`),Me(!0)},onMouseLeave:je=>{je.target.style.background="#7d8d86",Me(!1)},children:[o.jsx("i",{className:"fa-solid fa-pen-to-square",style:{marginRight:"4px"}}),"Edit"]}),o.jsxs("button",{onClick:je=>{je.stopPropagation(),mt(j)},style:{background:"#ef4444",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:je=>je.target.style.background="#dc2626",onMouseLeave:je=>je.target.style.background="#ef4444",children:[o.jsx("i",{className:"fa-solid fa-trash-can",style:{marginRight:"4px"}}),"Delete"]})]})})]},j.product_id)})})]})})}),o.jsx("div",{style:{marginTop:"16px",fontSize:"14px",color:"#7d8d86",textAlign:"center",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)",marginBottom:"16px"},children:mr>0?o.jsxs(o.Fragment,{children:["Showing ",fr,"-",Ln," of ",mr," products",jt>1&&o.jsxs("span",{style:{marginLeft:"16px"},children:["(Page ",Ie," of ",jt,")"]})]}):"No products found"}),jt>1&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",marginBottom:"24px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("label",{style:{fontSize:"14px",color:"#3e3f29",fontWeight:"500"},children:"Show:"}),o.jsxs("select",{value:xt,onChange:j=>B(parseInt(j.target.value)),style:{padding:"6px 12px",border:"2px solid #bca88d",borderRadius:"6px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",cursor:"pointer"},children:[o.jsx("option",{value:5,children:"5"}),o.jsx("option",{value:10,children:"10"}),o.jsx("option",{value:25,children:"25"}),o.jsx("option",{value:50,children:"50"}),o.jsx("option",{value:100,children:"100"})]}),o.jsx("span",{style:{fontSize:"14px",color:"#7d8d86"},children:"per page"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsxs("button",{onClick:F,disabled:Ie===1,style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ie===1?"#f3f4f6":"white",color:Ie===1?"#9ca3af":"#3e3f29",cursor:Ie===1?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:j=>{Ie!==1&&(j.target.style.background="#f8f9fa")},onMouseLeave:j=>{Ie!==1&&(j.target.style.background="#f8fafc")},children:[o.jsx("i",{className:"fa-solid fa-chevron-left",style:{marginRight:"4px"}}),"Previous"]}),o.jsx("div",{style:{display:"flex",gap:"4px"},children:Array.from({length:Math.min(5,jt)},(j,ue)=>{let je;return jt<=5||Ie<=3?je=ue+1:Ie>=jt-2?je=jt-4+ue:je=Ie-2+ue,o.jsx("button",{onClick:()=>U(je),style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ie===je?"#7d8d86":"white",color:Ie===je?"#f1f0e4":"#3e3f29",cursor:"pointer",fontSize:"14px",fontWeight:Ie===je?"600":"400",transition:"all 0.2s ease",minWidth:"40px"},onMouseEnter:lt=>{Ie!==je&&(lt.target.style.background="#f8f9fa")},onMouseLeave:lt=>{Ie!==je&&(lt.target.style.background="#f8fafc")},children:je},je)})}),o.jsxs("button",{onClick:H,disabled:Ie===jt,style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ie===jt?"#f3f4f6":"white",color:Ie===jt?"#9ca3af":"#3e3f29",cursor:Ie===jt?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:j=>{Ie!==jt&&(j.target.style.background="#f8f9fa")},onMouseLeave:j=>{Ie!==jt&&(j.target.style.background="#f8fafc")},children:["Next",o.jsx("i",{className:"fa-solid fa-chevron-right",style:{marginLeft:"4px"}})]})]})]}),ne&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:o.jsxs("div",{style:{background:"#f8fafc",borderRadius:"16px",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[o.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Add New Product"}),o.jsx("button",{onClick:Ue,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:j=>{j.target.style.background="#f3f4f6",j.target.style.color="#3e3f29",Ce("Click this X button to close the form without saving. It's the same as clicking Cancel!"),Me(!0)},onMouseLeave:j=>{j.target.style.background="none",j.target.style.color="#7d8d86",Me(!1)},children:o.jsx("i",{className:"fa-solid fa-times"})})]}),o.jsxs("form",{onSubmit:fe,onKeyDown:Ne,children:[h&&o.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:h}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),o.jsx("input",{type:"text",required:!0,value:k.product_name,onChange:j=>L({...k,product_name:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{type:"text",required:!0,value:k.category,onChange:j=>{L({...k,category:j.target.value}),Pe(j.target.value.length>=2)},onFocus:()=>{Pe(k.category.length>=2),Ce("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),Me(!0)},onBlur:()=>setTimeout(()=>Pe(!1),200),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),te&&Pn(k.category).length>0&&o.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#f8fafc",border:"2px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:Pn(k.category).map((j,ue)=>o.jsxs("div",{onClick:()=>{L({...k,category:j}),Pe(!1),Ce(`Great choice! I've selected "${j}" for you. This helps keep your categories organized!`),Me(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ue<Pn(k.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:je=>je.target.style.background="#f8f9fa",onMouseLeave:je=>je.target.style.background="transparent",children:[o.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),j]},ue))})]})]})]}),o.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[o.jsx("input",{type:"checkbox",id:"is_weighted",checked:k.is_weighted,onChange:j=>L({...k,is_weighted:j.target.checked}),style:{width:"16px",height:"16px"}}),o.jsx("label",{htmlFor:"is_weighted",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),k.is_weighted&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),o.jsxs("select",{value:k.weight_unit,onChange:j=>L({...k,weight_unit:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},children:[o.jsx("option",{value:"",children:"Select unit"}),o.jsx("option",{value:"kg",children:"Kilogram (kg)"}),o.jsx("option",{value:"g",children:"Gram (g)"}),o.jsx("option",{value:"lb",children:"Pound (lb)"}),o.jsx("option",{value:"oz",children:"Ounce (oz)"}),o.jsx("option",{value:"l",children:"Liter (l)"}),o.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",k.weight_unit||"unit"," *"]}),o.jsx("input",{type:"number",step:"0.01",required:k.is_weighted,value:k.price_per_unit,onChange:j=>L({...k,price_per_unit:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",k.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),o.jsx("input",{type:"number",step:"0.01",required:!k.is_weighted,value:k.is_weighted?"0":k.price,onChange:j=>{k.is_weighted||L({...k,price:j.target.value})},style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:k.is_weighted?"#f9fafb":"white",color:k.is_weighted?"#6b7280":"#3e3f29",cursor:k.is_weighted?"not-allowed":"text"},placeholder:k.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:k.is_weighted})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),o.jsx("input",{type:"number",required:!0,value:k.stock_quantity,onChange:j=>L({...k,stock_quantity:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),o.jsx("input",{type:"number",required:!0,value:k.reorder_level,onChange:j=>L({...k,reorder_level:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"10"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),o.jsx("input",{type:"number",step:"0.01",value:k.tax_rate,onChange:j=>L({...k,tax_rate:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),o.jsx("input",{type:"text",value:k.supplier_info,onChange:j=>L({...k,supplier_info:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU (Auto-generated if empty)"}),o.jsx("input",{type:"text",value:k.sku,onChange:j=>L({...k,sku:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Leave empty for auto-generation"})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Barcode"}),o.jsx("input",{type:"text",value:k.barcode,onChange:j=>L({...k,barcode:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Scan or enter barcode"})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),o.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[o.jsx("input",{type:"file",accept:"image/*",onChange:st,style:{display:"none"},id:"image-upload"}),o.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:j=>{j.target.style.borderColor="#7d8d86",j.target.style.color="#3e3f29",Ce("Click here to upload a product image! This helps customers see what they're buying."),Me(!0)},onMouseLeave:j=>{j.target.style.borderColor="#bca88d",j.target.style.color="#7d8d86",Me(!1)},children:[o.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(Y||M?.image_url)&&o.jsxs("div",{style:{position:"relative"},children:[o.jsx("img",{src:Y||M?.image_url,alt:"Preview",onClick:()=>{const j=Y||M?.image_url;j&&et(j)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:j=>{const ue=j.target;ue.style.transform="scale(1.05)",ue.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:j=>{const ue=j.target;ue.style.transform="scale(1)",ue.style.boxShadow="none"}}),o.jsx("button",{type:"button",onClick:()=>{Re(null),tt(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),o.jsx("textarea",{value:k.description,onChange:j=>L({...k,description:j.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),o.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[o.jsx("button",{type:"button",onClick:Ue,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:j=>{j.target.style.background="#e5e7eb",Ce("This will close the form and clear all the information you've entered. Don't worry, you can always start over!"),Me(!0)},onMouseLeave:j=>{j.target.style.background="#f3f4f6",Me(!1)},children:"Cancel"}),o.jsx("button",{type:"submit",disabled:W,style:{background:W?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:W?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:j=>{W||(Ce("This will save your new product to the inventory! Make sure all required fields are filled out before clicking."),Me(!0))},onMouseLeave:j=>{W||Me(!1)},children:W?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Adding..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-plus"}),"Add Product"]})})]})]})]})}),le&&M&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:o.jsxs("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[o.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Edit Product"}),o.jsx("button",{onClick:Ue,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:j=>{j.target.style.background="#f3f4f6",j.target.style.color="#3e3f29",Ce("Click this X button to close the edit form without saving. It's the same as clicking Cancel!"),Me(!0)},onMouseLeave:j=>{j.target.style.background="none",j.target.style.color="#7d8d86",Me(!1)},children:o.jsx("i",{className:"fa-solid fa-times"})})]}),o.jsxs("form",{onSubmit:Se,onKeyDown:Ne,children:[h&&o.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:h}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),o.jsx("input",{type:"text",required:!0,value:k.product_name,onChange:j=>L({...k,product_name:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{type:"text",required:!0,value:k.category,onChange:j=>{L({...k,category:j.target.value}),Pe(j.target.value.length>=2)},onFocus:()=>{Pe(k.category.length>=2),Ce("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),Me(!0)},onBlur:()=>setTimeout(()=>Pe(!1),200),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),te&&Pn(k.category).length>0&&o.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#f8fafc",border:"2px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:Pn(k.category).map((j,ue)=>o.jsxs("div",{onClick:()=>{L({...k,category:j}),Pe(!1),Ce(`Great choice! I've selected "${j}" for you. This helps keep your categories organized!`),Me(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ue<Pn(k.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:je=>je.target.style.background="#f8f9fa",onMouseLeave:je=>je.target.style.background="transparent",children:[o.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),j]},ue))})]})]})]}),o.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[o.jsx("input",{type:"checkbox",id:"is_weighted_edit",checked:k.is_weighted,onChange:j=>L({...k,is_weighted:j.target.checked}),style:{width:"16px",height:"16px"}}),o.jsx("label",{htmlFor:"is_weighted_edit",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),k.is_weighted&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),o.jsxs("select",{value:k.weight_unit,onChange:j=>L({...k,weight_unit:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},children:[o.jsx("option",{value:"",children:"Select unit"}),o.jsx("option",{value:"kg",children:"Kilogram (kg)"}),o.jsx("option",{value:"g",children:"Gram (g)"}),o.jsx("option",{value:"lb",children:"Pound (lb)"}),o.jsx("option",{value:"oz",children:"Ounce (oz)"}),o.jsx("option",{value:"l",children:"Liter (l)"}),o.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",k.weight_unit||"unit"," *"]}),o.jsx("input",{type:"number",step:"0.01",required:k.is_weighted,value:k.price_per_unit,onChange:j=>L({...k,price_per_unit:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",k.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),o.jsx("input",{type:"number",step:"0.01",required:!k.is_weighted,value:k.is_weighted?"0":k.price,onChange:j=>{k.is_weighted||L({...k,price:j.target.value})},style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:k.is_weighted?"#f9fafb":"white",color:k.is_weighted?"#6b7280":"#3e3f29",cursor:k.is_weighted?"not-allowed":"text"},placeholder:k.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:k.is_weighted})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),o.jsx("input",{type:"number",required:!0,value:k.stock_quantity,onChange:j=>L({...k,stock_quantity:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),o.jsx("input",{type:"number",required:!0,value:k.reorder_level,onChange:j=>L({...k,reorder_level:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"10"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),o.jsx("input",{type:"number",step:"0.01",value:k.tax_rate,onChange:j=>L({...k,tax_rate:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),o.jsx("input",{type:"text",value:k.supplier_info,onChange:j=>L({...k,supplier_info:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU"}),o.jsx("input",{type:"text",value:k.sku,onChange:j=>L({...k,sku:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Update SKU"})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Barcode"}),o.jsx("input",{type:"text",value:k.barcode,onChange:j=>L({...k,barcode:j.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Scan or enter barcode"})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),o.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[o.jsx("input",{type:"file",accept:"image/*",onChange:st,style:{display:"none"},id:"image-upload"}),o.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:j=>{j.target.style.borderColor="#7d8d86",j.target.style.color="#3e3f29",Ce("Click here to upload a product image! This helps customers see what they're buying."),Me(!0)},onMouseLeave:j=>{j.target.style.borderColor="#bca88d",j.target.style.color="#7d8d86",Me(!1)},children:[o.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(Y||M?.image_url)&&o.jsxs("div",{style:{position:"relative"},children:[o.jsx("img",{src:Y||M?.image_url,alt:"Preview",onClick:()=>{const j=Y||M?.image_url;j&&et(j)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:j=>{const ue=j.target;ue.style.transform="scale(1.05)",ue.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:j=>{const ue=j.target;ue.style.transform="scale(1)",ue.style.boxShadow="none"}}),o.jsx("button",{type:"button",onClick:()=>{Re(null),tt(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),o.jsx("textarea",{value:k.description,onChange:j=>L({...k,description:j.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),o.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[o.jsx("button",{type:"button",onClick:Ue,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:j=>{j.target.style.background="#e5e7eb",Ce("This will close the edit form and discard any changes you've made. Don't worry, you can always edit again!"),Me(!0)},onMouseLeave:j=>{j.target.style.background="#f3f4f6",Me(!1)},children:"Cancel"}),o.jsx("button",{type:"submit",disabled:W,style:{background:W?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:W?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:j=>{W||(Ce("This will save your changes to the product! Make sure all required fields are filled out before clicking."),Me(!0))},onMouseLeave:j=>{W||Me(!1)},children:W?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Updating..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-save"}),"Update Product"]})})]})]})]})}),nt&&ut&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:vt,children:o.jsx("div",{style:{position:"relative",width:"400px",height:"400px",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:`url(${ut})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:"8px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",backgroundColor:"#ffffff"},onClick:j=>j.stopPropagation(),children:o.jsx("button",{onClick:vt,style:{position:"absolute",top:"-40px",right:"-40px",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.9)",border:"none",color:"#3e3f29",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s ease"},onMouseEnter:j=>j.target.style.background="rgba(255, 255, 255, 1)",onMouseLeave:j=>j.target.style.background="rgba(255, 255, 255, 0.9)",children:o.jsx("i",{className:"fa-solid fa-times"})})})}),At&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[o.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",marginBottom:"16px",textAlign:"center"},children:"Delete Product"}),o.jsxs("p",{style:{fontSize:"16px",color:"#1a1a1a",marginBottom:"8px",textAlign:"center"},children:["Are you sure you want to delete ",o.jsx("strong",{children:At.name}),"?"]}),o.jsx("p",{style:{fontSize:"14px",color:"#ef4444",marginBottom:"24px",textAlign:"center"},children:"This action cannot be undone."}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>mt(null),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:j=>j.target.style.background="#4b5563",onMouseLeave:j=>j.target.style.background="#6b7280",children:"Cancel"}),o.jsx("button",{onClick:()=>we(At.product_id),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:j=>j.target.style.background="#dc2626",onMouseLeave:j=>j.target.style.background="#ef4444",children:"Delete Product"})]})]})}),w&&S&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>_(!1),children:o.jsxs("div",{style:{background:"#f8fafc",borderRadius:"16px",padding:"32px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onClick:j=>j.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px",paddingBottom:"20px",borderBottom:"2px solid #f1f5f9"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[S.image_url&&o.jsxs("div",{style:{position:"relative"},children:[o.jsx("img",{src:S.image_url,alt:S.name,style:{width:"80px",height:"80px",borderRadius:"16px",objectFit:"cover",border:"3px solid #e5e7eb",background:"#f3f4f6",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}),o.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#10b981",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:o.jsx("i",{className:"fas fa-chart-line"})})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("i",{className:"fas fa-analytics",style:{color:"#7d8d86",fontSize:"20px"}}),o.jsx("h2",{style:{margin:0,fontSize:"28px",fontWeight:"700",color:"#1e293b",letterSpacing:"-0.025em"},children:"Product Insights"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"4px"},children:[o.jsx("i",{className:"fas fa-box",style:{color:"#7d8d86",fontSize:"16px"}}),o.jsx("p",{style:{margin:0,fontSize:"18px",color:"#374151",fontWeight:"600"},children:S.name})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("i",{className:"fas fa-tags",style:{color:"#9ca3af",fontSize:"14px"}}),o.jsx("p",{style:{margin:0,fontSize:"14px",color:"#6b7280"},children:S.category}),S.sku&&o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-barcode",style:{color:"#9ca3af",fontSize:"14px",marginLeft:"16px"}}),o.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:["SKU: ",S.sku]})]})]})]})]}),o.jsx("button",{onClick:()=>_(!1),style:{width:"40px",height:"40px",borderRadius:"50%",background:"#f8fafc",border:"2px solid #e2e8f0",color:"#6b7280",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:j=>{j.currentTarget.style.background="#ef4444",j.currentTarget.style.color="white",j.currentTarget.style.borderColor="#ef4444"},onMouseLeave:j=>{j.currentTarget.style.background="#f8fafc",j.currentTarget.style.color="#6b7280",j.currentTarget.style.borderColor="#e2e8f0"},children:o.jsx("i",{className:"fas fa-times"})})]}),G?o.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[o.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",fontSize:"18px",color:"#7d8d86",background:"#f8fafc",padding:"20px 32px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[o.jsx("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"20px",color:"#3b82f6"}}),"Loading insights..."]}),o.jsx("div",{style:{fontSize:"14px",color:"#9ca3af",marginTop:"12px"},children:"Analyzing sales data and trends"})]}):D?o.jsxs("div",{children:[o.jsxs("div",{style:{marginBottom:"40px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[o.jsx("i",{className:"fas fa-chart-bar",style:{color:"#7d8d86",fontSize:"20px"}}),o.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1e293b"},children:"Performance Overview"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px"},children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #93c5fd",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#3b82f6",fontSize:"16px"},children:o.jsx("i",{className:"fas fa-shopping-cart"})}),o.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e40af",marginBottom:"8px"},children:D.totalSales}),o.jsx("div",{style:{fontSize:"14px",color:"#1e40af",fontWeight:"500"},children:"Total Sales"})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #86efac",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#10b981",fontSize:"16px"},children:o.jsx("i",{className:"fas fa-euro-sign"})}),o.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#166534",marginBottom:"8px"},children:["?",D.totalRevenue.toFixed(2)]}),o.jsx("div",{style:{fontSize:"14px",color:"#166534",fontWeight:"500"},children:"Total Revenue"})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #fbbf24",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#f59e0b",fontSize:"16px"},children:o.jsx("i",{className:"fas fa-weight"})}),o.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#92400e",marginBottom:"8px"},children:D.totalQuantitySold.toFixed(1)}),o.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:"500"},children:[S.is_weighted?S.weight_unit||"kg":"Units"," Sold"]})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #f9a8d4",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#ec4899",fontSize:"16px"},children:o.jsx("i",{className:"fas fa-percentage"})}),o.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#be185d",marginBottom:"8px"},children:[D.profitMargin.toFixed(1),"%"]}),o.jsx("div",{style:{fontSize:"14px",color:"#be185d",fontWeight:"500"},children:"Est. Profit Margin"})]})]})]}),D.chartData&&o.jsxs("div",{style:{marginBottom:"40px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[o.jsx("i",{className:"fas fa-chart-line",style:{color:"#7d8d86",fontSize:"20px"}}),o.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1e293b"},children:"Sales Trends & Analytics"})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[o.jsxs("button",{onClick:()=>V("daily"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:oe==="daily"?"#3b82f6":"#f8fafc",color:oe==="daily"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:oe==="daily"?"0 4px 6px rgba(59, 130, 246, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[o.jsx("i",{className:"fas fa-calendar-day"}),"Daily (30 days)"]}),o.jsxs("button",{onClick:()=>V("weekly"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:oe==="weekly"?"#10b981":"#f8fafc",color:oe==="weekly"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:oe==="weekly"?"0 4px 6px rgba(16, 185, 129, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[o.jsx("i",{className:"fas fa-calendar-week"}),"Weekly (4 weeks)"]}),o.jsxs("button",{onClick:()=>V("monthly"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:oe==="monthly"?"#f59e0b":"#f8fafc",color:oe==="monthly"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:oe==="monthly"?"0 4px 6px rgba(245, 158, 11, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[o.jsx("i",{className:"fas fa-calendar-alt"}),"Monthly (6 months)"]})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",minHeight:"220px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[oe==="daily"&&o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[o.jsx("i",{className:"fas fa-chart-bar",style:{color:"#3b82f6",fontSize:"16px"}}),o.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Daily Sales (Last 30 Days)"})]}),o.jsx("div",{style:{display:"flex",alignItems:"end",gap:"4px",height:"150px"},children:D.chartData.daily.map((j,ue)=>{const je=Math.max(...D.chartData.daily.map(yt=>yt.sales)),lt=je>0?j.sales/je*120:0;return o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[o.jsx("div",{style:{width:"100%",height:`${lt}px`,background:j.sales>0?"#7d8d86":"#e5e7eb",borderRadius:"2px 2px 0 0",minHeight:"2px"},title:`${j.date}: ${j.sales} sales, ?${j.revenue.toFixed(2)}`}),o.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:j.day})]},ue)})})]}),oe==="weekly"&&o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[o.jsx("i",{className:"fas fa-chart-area",style:{color:"#10b981",fontSize:"16px"}}),o.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Weekly Sales (Last 4 Weeks)"})]}),o.jsx("div",{style:{display:"flex",alignItems:"end",gap:"8px",height:"150px"},children:D.chartData.weekly.map((j,ue)=>{const je=Math.max(...D.chartData.weekly.map(yt=>yt.sales)),lt=je>0?j.sales/je*120:0;return o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[o.jsx("div",{style:{width:"100%",height:`${lt}px`,background:j.sales>0?"#10b981":"#e5e7eb",borderRadius:"4px 4px 0 0",minHeight:"2px"},title:`${j.week}: ${j.sales} sales, ?${j.revenue.toFixed(2)}`}),o.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:j.week})]},ue)})})]}),oe==="monthly"&&o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[o.jsx("i",{className:"fas fa-chart-pie",style:{color:"#f59e0b",fontSize:"16px"}}),o.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Monthly Sales (Last 6 Months)"})]}),o.jsx("div",{style:{display:"flex",alignItems:"end",gap:"8px",height:"150px"},children:D.chartData.monthly.map((j,ue)=>{const je=Math.max(...D.chartData.monthly.map(yt=>yt.sales)),lt=je>0?j.sales/je*120:0;return o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[o.jsx("div",{style:{width:"100%",height:`${lt}px`,background:j.sales>0?"#f59e0b":"#e5e7eb",borderRadius:"4px 4px 0 0",minHeight:"2px"},title:`${j.month}: ${j.sales} sales, ?${j.revenue.toFixed(2)}`}),o.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:j.month.split(" ")[0]})]},ue)})})]})]})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",marginBottom:"32px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[o.jsx("i",{className:"fas fa-info-circle",style:{color:"#7d8d86",fontSize:"20px"}}),o.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Product Information"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsx("i",{className:"fas fa-barcode",style:{color:"#6b7280",fontSize:"16px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Product ID"}),o.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.product_id})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsx("i",{className:"fas fa-tags",style:{color:"#6b7280",fontSize:"16px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Category"}),o.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.category})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsx("i",{className:"fas fa-boxes",style:{color:"#6b7280",fontSize:"16px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Current Stock"}),o.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.stock_quantity})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsx("i",{className:"fas fa-exclamation-triangle",style:{color:"#6b7280",fontSize:"16px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Reorder Level"}),o.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.reorder_level})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsx("i",{className:"fas fa-euro-sign",style:{color:"#6b7280",fontSize:"16px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Price"}),o.jsxs("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:["?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsx("i",{className:"fas fa-weight",style:{color:"#6b7280",fontSize:"16px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Type"}),o.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.is_weighted?"Weighted Product":"Regular Product"})]})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px",marginBottom:"32px"},children:[o.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[o.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Sales Performance"}),o.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",lineHeight:"1.6"},children:[o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsx("strong",{children:"Average sales per day:"})," ",D.averageSalesPerDay.toFixed(1)]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsx("strong",{children:"Estimated profit:"})," ?",D.estimatedProfit.toFixed(2)]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsx("strong",{children:"Last sold:"})," ",D.lastSoldDate?new Date(D.lastSoldDate).toLocaleDateString():"Never"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Price per unit:"})," ?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]})]})]}),o.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[o.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Top Selling Days (Last 30 Days)"}),D.topSellingDays.length>0?o.jsx("div",{style:{fontSize:"14px",color:"#7d8d86"},children:D.topSellingDays.map((j,ue)=>o.jsxs("div",{style:{marginBottom:"4px"},children:[new Date(j.date).toLocaleDateString(),": ",j.count," sales"]},ue))}):o.jsx("div",{style:{fontSize:"14px",color:"#7d8d86"},children:"No sales in the last 30 days"})]})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[o.jsx("i",{className:"fas fa-receipt",style:{color:"#7d8d86",fontSize:"20px"}}),o.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Recent Sales"})]}),D.recentSalesList.length>0?o.jsx("div",{style:{maxHeight:"300px",overflow:"auto"},children:o.jsxs("table",{style:{width:"100%",fontSize:"14px"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"2px solid #e5e7eb",background:"#f9fafb"},children:[o.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("i",{className:"fas fa-calendar",style:{fontSize:"12px",color:"#6b7280"}}),"Date"]}),o.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("i",{className:"fas fa-hashtag",style:{fontSize:"12px",color:"#6b7280"}}),"Quantity"]}),o.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("i",{className:"fas fa-euro-sign",style:{fontSize:"12px",color:"#6b7280"}}),"Price"]}),o.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("i",{className:"fas fa-user",style:{fontSize:"12px",color:"#6b7280"}}),"Customer"]}),o.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("i",{className:"fas fa-user-tie",style:{fontSize:"12px",color:"#6b7280"}}),"Cashier"]})]})}),o.jsx("tbody",{children:D.recentSalesList.map((j,ue)=>o.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[o.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:[j.date," ",j.time]}),o.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:[j.quantity," ",j.unit]}),o.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:["?",j.price.toFixed(2)]}),o.jsx("td",{style:{padding:"8px 0",color:"#3e3f29"},children:j.customer}),o.jsx("td",{style:{padding:"8px 0",color:"#3e3f29"},children:j.cashier})]},ue))})]})}):o.jsx("div",{style:{fontSize:"14px",color:"#7d8d86",textAlign:"center",padding:"20px"},children:"No sales recorded for this product"})]})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{textAlign:"center",padding:"40px",marginBottom:"32px",background:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)",borderRadius:"16px",border:"1px solid #fecaca"},children:[o.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",fontSize:"20px",color:"#dc2626",marginBottom:"12px",fontWeight:"600"},children:[o.jsx("i",{className:"fas fa-chart-line",style:{fontSize:"24px"}}),"No Sales Data Available"]}),o.jsx("div",{style:{fontSize:"14px",color:"#991b1b"},children:"This product hasn't been sold yet"})]}),o.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[o.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Product Information"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",fontSize:"14px",color:"#7d8d86"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Product ID:"})," ",S.product_id]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Category:"})," ",S.category]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Current Stock:"})," ",S.stock_quantity]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Reorder Level:"})," ",S.reorder_level]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Price:"})," ?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Type:"})," ",S.is_weighted?"Weighted Product":"Regular Product"]})]})]})]})]})}),o.jsx(bn,{})]})};let lo=null,cv=!1;const G3=e=>{cv=e},V3=({onBarcodeScanned:e,debounceMs:t=100,minLength:r=8,maxLength:a=20,isActive:i=!0,context:c="default"})=>{const[u,f]=E.useState(!1),[h,p]=E.useState(""),[g,y]=E.useState(0),v=E.useCallback(_=>{if(!lo||lo.context!==c||cv&&c!=="product-modal")return;const S=Date.now();if(S-g>t*3&&p(""),y(S),_.key==="Enter"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation();const A=h.trim();if(console.log("🔍 Barcode scanner detected Enter, input:",A,"length:",A.length,"min:",r,"max:",a),A.length>=r&&A.length<=a){console.log("✅ Barcode valid, calling onBarcodeScanned"),e(A),p("");return}p("");return}_.key.length===1&&p(A=>{const D=A+_.key;return console.log("🔍 Barcode scanner input:",D),D}),_.key==="Tab"||_.key==="Shift"||_.key==="Control"||_.key},[h,g,t,r,a,e,c]),b=E.useCallback(()=>{f(!0),p(""),y(Date.now()),lo={context:c,onBarcodeScanned:e}},[c,e]),w=E.useCallback(()=>{f(!1),p(""),lo&&lo.context===c&&(lo=null)},[c]);return E.useEffect(()=>{if(u&&i){document.addEventListener("keydown",v,!0);const _=S=>{if(S.target&&S.target.tagName==="INPUT"){const A=S.target;A.value&&A.value.length>=r&&A.value.length<=a&&(console.log("🔍 Fallback barcode detected:",A.value),e(A.value),A.value="")}};return document.addEventListener("input",_,!0),()=>{document.removeEventListener("keydown",v,!0),document.removeEventListener("input",_,!0)}}},[u,i,v,r,a,e]),{isListening:u,startListening:b,stopListening:w,currentInput:h}},_1=[{id:"pNInz6obpgDQGcFmaJgB",name:"Adam (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"EXAVITQu4vr4xnSDxMaL",name:"Bella (Warm, Friendly)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Josh (Professional, Clear)",type:"standard",costPer1K:.18},{id:"AZnzlk1XvdvUeBnXmlld",name:"Domi (Confident, Energetic)",type:"standard",costPer1K:.18},{id:"ErXwobaYiN019PkySvjV",name:"Elli (Natural, Conversational)",type:"standard",costPer1K:.18},{id:"MF3mGyEYCl7XYWbV9V6O",name:"Rachel (Professional, Warm)",type:"standard",costPer1K:.18},{id:"TxGEqnHWrfWFTfGW9XjX",name:"Drew (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Clyde (Friendly, Approachable)",type:"standard",costPer1K:.18}],S1=[{id:"alloy",name:"Alloy (Neutral, Balanced)",type:"standard",costPer1K:.015},{id:"echo",name:"Echo (Clear, Professional)",type:"standard",costPer1K:.015},{id:"fable",name:"Fable (Warm, Storytelling)",type:"standard",costPer1K:.015},{id:"onyx",name:"Onyx (Deep, Authoritative)",type:"standard",costPer1K:.015},{id:"nova",name:"Nova (Friendly, Energetic)",type:"standard",costPer1K:.015},{id:"shimmer",name:"Shimmer (Soft, Gentle)",type:"standard",costPer1K:.015}];class Y3{settings;usage;isInitialized=!1;constructor(){this.settings=this.loadSettings(),this.usage=this.loadUsage(),this.initializeUsage()}loadSettings(){const t="sk_337a097ef281682961b7c3db26217470f085fd565c3d711d",r="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";console.log("Environment variables loaded:"),console.log("VITE_ELEVENLABS_KEY:","Present"),console.log("VITE_OPENAI_API_KEY:","Present");const a={enabled:!0,useElevenLabs:!0,selectedVoice:"HobRzuqtLputbKAXOdTj",apiKey:t,dailyLimit:5e3,useOpenAI:!0,openaiApiKey:r,openaiVoice:"alloy"};try{const i=localStorage.getItem("tts-settings");if(i){const c=JSON.parse(i),u={...a,...c};return console.log("Loaded TTS settings from localStorage:",u),u}return console.log("No saved TTS settings, using defaults:",a),a}catch(i){return console.error("Error loading TTS settings:",i),a}}loadUsage(){const t={totalCharacters:0,totalCost:0,dailyUsage:0,dailyCost:0,lastResetDate:new Date().toISOString().split("T")[0]};try{const r=localStorage.getItem("tts-usage");return r?{...t,...JSON.parse(r)}:t}catch{return t}}saveSettings(){try{localStorage.setItem("tts-settings",JSON.stringify(this.settings))}catch(t){console.error("Failed to save TTS settings:",t)}}saveUsage(){try{localStorage.setItem("tts-usage",JSON.stringify(this.usage))}catch(t){console.error("Failed to save TTS usage:",t)}}initializeUsage(){const t=new Date().toISOString().split("T")[0];this.usage.lastResetDate!==t&&(this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=t,this.saveUsage())}getSettings(){return{...this.settings}}getUsage(){return this.initializeUsage(),{...this.usage}}updateSettings(t){this.settings={...this.settings,...t},this.saveSettings()}async speak(t){if(console.log("TTS Service speak called with:",t),console.log("TTS Settings:",this.settings),console.log("useElevenLabs:",this.settings.useElevenLabs),console.log("useOpenAI:",this.settings.useOpenAI),console.log("openaiApiKey present:",!!this.settings.openaiApiKey),console.log("openaiApiKey length:",this.settings.openaiApiKey?.length||0),!this.settings.enabled)return console.log("TTS not enabled"),!1;const r=t.length,a=this.calculateCost(r);if(this.usage.dailyUsage+r>this.settings.dailyLimit&&console.log("Daily limit exceeded, trying OpenAI fallback"),this.settings.useElevenLabs&&this.settings.apiKey&&this.usage.dailyUsage+r<=this.settings.dailyLimit){if(console.log("Trying ElevenLabs TTS with voice:",this.settings.selectedVoice),await this.speakWithElevenLabs(t))return this.updateUsage(r,a),!0;console.log("ElevenLabs failed, trying OpenAI fallback...")}if(this.settings.useOpenAI&&this.settings.openaiApiKey){console.log("Trying OpenAI TTS with voice:",this.settings.openaiVoice);const i=this.calculateOpenAICost(r);if(await this.speakWithOpenAI(t))return this.updateUsage(r,i),!0;console.log("OpenAI TTS failed")}return console.log("No TTS method available"),!1}async speakWithDelay(t,r=2e3){return new Promise(a=>{setTimeout(async()=>{const i=await this.speak(t);a(i)},r)})}async speakWithElevenLabs(t){try{console.log("Making ElevenLabs API call..."),console.log("Voice ID:",this.settings.selectedVoice),console.log("API Key:",this.settings.apiKey.substring(0,10)+"...");const r=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${this.settings.selectedVoice}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":this.settings.apiKey},body:JSON.stringify({text:t,model_id:"eleven_monolingual_v1",voice_settings:{stability:.5,similarity_boost:.5}})});if(console.log("ElevenLabs response status:",r.status),!r.ok){const u=await r.text();throw console.error("ElevenLabs API error response:",u),new Error(`ElevenLabs API error: ${r.status} - ${u}`)}const a=await r.blob();console.log("Audio blob received, size:",a.size);const i=URL.createObjectURL(a),c=new Audio(i);return new Promise(u=>{c.onended=()=>{console.log("ElevenLabs audio playback ended"),URL.revokeObjectURL(i),u(!0)},c.onerror=f=>{console.error("ElevenLabs audio playback error:",f),URL.revokeObjectURL(i),u(!1)},c.onloadstart=()=>console.log("ElevenLabs audio started loading"),c.oncanplay=()=>console.log("ElevenLabs audio can play"),console.log("Starting ElevenLabs audio playback..."),c.play()})}catch(r){return console.error("ElevenLabs TTS error:",r),!1}}async speakWithOpenAI(t){try{console.log("Making OpenAI TTS API call..."),console.log("Voice:",this.settings.openaiVoice),console.log("API Key:",this.settings.openaiApiKey.substring(0,10)+"...");const r=await fetch("https://api.openai.com/v1/audio/speech",{method:"POST",headers:{Authorization:`Bearer ${this.settings.openaiApiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"tts-1",input:t,voice:this.settings.openaiVoice,response_format:"mp3"})});if(console.log("OpenAI response status:",r.status),!r.ok){const u=await r.text();throw console.error("OpenAI API error response:",u),new Error(`OpenAI API error: ${r.status} - ${u}`)}const a=await r.blob();console.log("OpenAI audio blob received, size:",a.size);const i=URL.createObjectURL(a),c=new Audio(i);return new Promise(u=>{c.onended=()=>{console.log("OpenAI audio playback ended"),URL.revokeObjectURL(i),u(!0)},c.onerror=f=>{console.error("OpenAI audio playback error:",f),URL.revokeObjectURL(i),u(!1)},c.onloadstart=()=>console.log("OpenAI audio started loading"),c.oncanplay=()=>console.log("OpenAI audio can play"),console.log("Starting OpenAI audio playback..."),c.play()})}catch(r){return console.error("OpenAI TTS error:",r),!1}}calculateCost(t){const r=_1.find(a=>a.id===this.settings.selectedVoice);return r?t/1e3*r.costPer1K:0}calculateOpenAICost(t){const r=S1.find(a=>a.id===this.settings.openaiVoice);return r?t/1e3*r.costPer1K:0}updateUsage(t,r){this.usage.totalCharacters+=t,this.usage.totalCost+=r,this.usage.dailyUsage+=t,this.usage.dailyCost+=r,this.saveUsage()}stop(){console.log("TTS service stop called")}getAvailableVoices(){return _1}getAvailableOpenAIVoices(){return S1}resetDailyUsage(){this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=new Date().toISOString().split("T")[0],this.saveUsage()}refreshSettings(){console.log("Refreshing TTS settings from environment..."),this.settings=this.loadSettings(),console.log("New settings loaded:",this.settings)}resetToDefaults(){console.log("Clearing all TTS settings and reloading from environment...");try{localStorage.removeItem("tts-settings"),console.log("Cleared localStorage settings")}catch(t){console.error("Error clearing settings:",t)}this.settings=this.loadSettings(),console.log("Reset to defaults:",this.settings)}async testOpenAI(){if(console.log("Testing OpenAI TTS connection..."),console.log("OpenAI API Key present:",!!this.settings.openaiApiKey),console.log("OpenAI Voice:",this.settings.openaiVoice),!this.settings.openaiApiKey)return console.error("No OpenAI API key found"),!1;try{const t=await this.speakWithOpenAI("Test message");return console.log("OpenAI test result:",t),t}catch(t){return console.error("OpenAI test failed:",t),!1}}}const Nr=new Y3,_u=({children:e,onClick:t,type:r="button",disabled:a=!1,className:i="",style:c={}})=>o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
        @property --rotation {
          syntax: "<angle>";
          inherits: false;
          initial-value: 0deg;
        }

        .retro-button {
          --inset: 15px;
          --rad: 18px;
          /* background: rgb(255 255 255 / 0.3); */
          /* padding: var(--inset); */
          /* border-radius: calc(var(--rad) + var(--inset)); */
          border: none;
          position: relative;
          /* box-shadow: 0 4px 10px rgb(0 0 0 / 0.1); */
          cursor: pointer;
          font-family: "Poppins", sans-serif;
          font-optical-sizing: auto;
          font-weight: 600;
          font-style: normal;
        }

        /* .retro-button:before {
          --inset: -15px;
          content: "";
          display: block;
          background: conic-gradient(from var(--rotation), purple, blue, green, yellow, orange, red);
          filter: blur(20px);
          opacity: 1;
          position: absolute;
          inset: 10px;
          border-radius: calc(var(--rad) + calc(var(--inset) * -1));
          z-index: -2;
          animation: rotate 5s linear infinite;
        } */

        /* .retro-button:after {
          --inset: -15px;
          content: "";
          display: block;
          background: linear-gradient(
            to bottom,
            rgb(255 255 255 / 0.5) 0%,
            rgb(255 255 255 / 0.5) 2px,
            rgb(100 100 100 / 0.1) 30%,
            rgb(100 100 100 / 0.1) 70%,
            rgb(255 255 255 / 0.5) 99%,
            rgb(255 255 255 / 0.5) 100%
          );
          position: absolute;
          inset: -1.5px;
          border-radius: calc(var(--rad) + calc(var(--inset) * -1));
          z-index: -1;
        } */

        /* .retro-button:active:before {
          animation-play-state: paused;
          opacity: 1;
          scale: 0.9;
          filter: blur(10px);
        } */

        .retro-button:active .retro-cap {
          scale: 0.93;
        }

        .retro-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .retro-button:disabled:before {
          animation-play-state: paused;
        }

        .retro-cap {
          display: inline-block;
          background: linear-gradient(to bottom, #6b7280, #4b5563);
          border-radius: var(--rad);
          font-size: 16px;
          color: #fff;
          padding: 12px 20px;
          border: none;
          border-top: #9ca3af solid 1px;
          border-bottom: #374151 solid 1px;
          box-shadow: 0 8px 10px rgb(0 0 0 / 0.3);
          position: relative;
          transition: scale 0.1s ease-in-out;
        }

        .retro-text {
          border-radius: 50px;
          background: linear-gradient(to bottom, #4b5563, #6b7280);
          padding: 8px 20px;
          display: block;
        }

        @keyframes rotate {
          to {
            --rotation: 360deg;
          }
        }
      `}),o.jsx("button",{className:`retro-button ${i}`,onClick:t,type:r,disabled:a,style:c,children:o.jsx("span",{className:"retro-cap",children:o.jsx("span",{className:"retro-text",children:e})})})]}),jl=()=>{const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0"),u=String(e.getSeconds()).padStart(2,"0");return`${t}-${r}-${a} ${i}:${c}:${u}`},w1=["Order confirmed! Your jollof rice dreams are one step closer.","Thanks for shopping! Even suya is jealous of your taste.","Your order is secured tighter than plantain at a party.","Order complete! Somewhere, egusi soup just smiled at you.","Confirmed! Your basket was blessed by the spirit of fufu.","You did it! May your order arrive faster than puff-puff disappears.","Order locked! Your kitchen is about to smell like victory.","Thanks for shopping! Even aunties will approve of this order.","Your order is in! We'll protect it like Nigerians protect their jollof recipe.","Success! Your food is coming with more flavor than a pepper soup challenge.","Confirmed — your taste is hotter than shito pepper.","Order complete! Don't worry, we didn't forget the Maggi cubes.","Transaction approved! Time to prepare for a feast fit for ancestors.","Done! May your meals be as sweet as ripe plantain.","Your order is confirmed — better hide it before the neighbors smell it!"],T1=async e=>{if(e.length===0){await Nr.speak("No items in order yet.");return}let t=`Order contains ${e.length} item${e.length===1?"":"s"}. `,r=0;e.forEach((a,i)=>{const c=a.product?.name||a.sideBusinessItem?.name||"Unknown Item",u=a.quantity;let f=0;a.customPrice?f=a.customPrice:a.calculatedPrice?f=a.calculatedPrice/u:a.product?.price?f=a.product.price:a.sideBusinessItem?.price&&(f=a.sideBusinessItem.price);let h=0;a.weight&&a.calculatedPrice?(h=a.calculatedPrice,t+=`Item ${i+1}: ${c}, ${a.weight} units at €${a.product?.price_per_unit?.toFixed(2)||"0.00"} per unit, `):(h=f*u,t+=`Item ${i+1}: ${c}, quantity ${u}, €${f.toFixed(2)} each, `),r+=h;const p=[`making this €${r.toFixed(2)}. `,`total so far €${r.toFixed(2)}. `,`€${r.toFixed(2)} total. `,`running total €${r.toFixed(2)}. `,`€${r.toFixed(2)}. `,`now at €${r.toFixed(2)}. `],g=p[Math.floor(Math.random()*p.length)];t+=g}),await Nr.speak(t),setTimeout(async()=>{const a=w1[Math.floor(Math.random()*w1.length)];await Nr.speak(a)},500)},K3=async e=>{const t=[`Your total is €${e.toFixed(2)}. Time to feast!`,`Total: €${e.toFixed(2)}. Your taste buds are about to dance!`,`€${e.toFixed(2)} total. May your meals be blessed!`,`Order total: €${e.toFixed(2)}. Even jollof rice approves!`],r=t[Math.floor(Math.random()*t.length)];await Nr.speak(r)},Ah=async(e,t)=>{await Nr.speak(`${e} added to order for €${t.toFixed(2)}.`)},X3=()=>{const{user:e}=An(),{businessId:t,businessLoading:r}=td(),[a]=jy(),i=Fs(),[c,u]=E.useState([]),[f,h]=E.useState([]),[p,g]=E.useState([]),[y,v]=E.useState([]),[b,w]=E.useState([]),[_,S]=E.useState("All"),[A,D]=E.useState(""),[I,G]=E.useState([]),[Z,oe]=E.useState([]),[V,P]=E.useState(!1),[z,ie]=E.useState(!1),[K,xe]=E.useState({items:[],subtotal:0,tax:0,discount:0,total:0}),[ee,re]=E.useState(""),[_e,ne]=E.useState(""),[ve,le]=E.useState(!0),[Ae,M]=E.useState(!1),[Q,k]=E.useState("cash"),[L,W]=E.useState(""),[X,ge]=E.useState(0),[Me,qe]=E.useState(""),[Ce,te]=E.useState(!1),[Pe,He]=E.useState(!1),[tt,Y]=E.useState(null),[Re,nt]=E.useState(""),[De,ut]=E.useState(!1),[ht,At]=E.useState(null),[mt,Ie]=E.useState(""),[rt,xt]=E.useState(null),[Qt,mr]=E.useState(!1),[Mt,ce]=E.useState(""),[$e,ft]=E.useState(""),[Dt,sr]=E.useState(""),[Er,br]=E.useState([]),[,er]=E.useState(Nr.getSettings()),[Cr,Ut]=E.useState(!1),[ar,ae]=E.useState(!1),[ke,pt]=E.useState("idle"),[Ct,tr]=E.useState(""),[at,kt]=E.useState(!1),[Rt,yn]=E.useState(""),[wr,vn]=E.useState(0),[$t,jt]=E.useState(""),[fr,Ln]=E.useState(null),[da,Pn]=E.useState(null),[R,U]=E.useState(!1);E.useEffect(()=>{if(t==null){u([]),h([]),oe([]),w(["All"]),br([]),Pn(null),Ln(null),U(!1);return}B(_,A),F();const C=a.get("transaction");C&&(Ln(C),U(!0),H(C))},[a,t,r,_,A]),E.useEffect(()=>{const C=he=>{he.key==="Enter"&&he.ctrlKey&&K.items.length>0&&(he.preventDefault(),M(!0)),he.key==="Escape"&&(D(""),P(!1))};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[K.items]),E.useEffect(()=>{ye()},[c,f,_,A,Z]),E.useEffect(()=>{Z.length>0&&p.length===0&&g(Z)},[Z,p.length]),E.useEffect(()=>{Se()},[K.items]),E.useEffect(()=>{const C=parseFloat(L)||0,he=at?parseFloat(Rt)||0:K.total,Ke=C-he;ge(Ke>0?Ke:0)},[L,K.total,at,Rt]),E.useEffect(()=>{if(at){const C=parseFloat(Rt)||0,he=Math.max(0,K.total-C);vn(he)}else vn(0)},[at,Rt,K.total]),E.useEffect(()=>{W(at&&Rt||K.total.toString())},[K.total,at,Rt]);const B=async(C,he)=>{if(t==null){u([]),h([]),oe([]),w(["All"]),le(!1),ie(!1);return}try{le(!0);let Ke=Oe.from("products").select("*").eq("business_id",t).order("sales_count",{ascending:!1}).limit(50);if(C&&C!=="All"&&(Ke=Ke.eq("category",C)),he&&he.trim()){const Rn=he.trim();Ke=Ke.or(`name.ilike.%${Rn}%,category.ilike.%${Rn}%,description.ilike.%${Rn}%,sku.ilike.%${Rn}%`)}const{data:Qe,error:Ve}=await Ke;if(Ve)throw Ve;const{data:Xe,error:ot}=await Oe.from("side_business_items").select(`
          *,
          side_businesses (name, business_type)
        `).eq("parent_shop_id",t).order("name");if(ot)throw ot;const ct=Qe||[],Xt=Xe||[];u(ct),h(Xt),oe(ct);const Ot=ct.map(Rn=>Rn.category).filter(Boolean),Pt=Xt.map(Rn=>Rn.side_businesses?.name).filter(Boolean),Mr=["All",...new Set([...Ot,...Pt])];w(Mr)}catch{}finally{le(!1),ie(!1)}},F=async()=>{if(t==null){br([]);return}try{const{data:C,error:he}=await Oe.from("side_businesses").select("business_id, name").eq("business_type","service").eq("parent_shop_id",t).order("name");if(he)throw he;br(C||[])}catch(C){console.error("Error fetching service businesses:",C),br([])}},H=async C=>{if(t!=null)try{const he=parseInt(C.replace("TXN-","")),{data:Ke,error:Qe}=await Oe.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",he).eq("business_id",t).single();if(Qe||!Ke)return;Pn(Ke);const{data:Ve,error:Xe}=await Oe.from("sale_items").select(`
          *,
          products (
            name,
            category,
            price,
            stock_quantity,
            image_url,
            is_weighted,
            weight_unit,
            price_per_unit
          )
        `).eq("sale_id",he);if(Xe)return;const ot=(Ve||[]).map(Pt=>{const Rn={product:{product_id:Pt.product_id.toString(),name:Pt.products?.name||"Unknown Product",price:Pt.price_each,category:Pt.products?.category||"Unknown",stock_quantity:Pt.products?.stock_quantity||0,image_url:Pt.products?.image_url,is_weighted:Pt.products?.is_weighted||!1,weight_unit:Pt.products?.weight_unit,price_per_unit:Pt.products?.price_per_unit},quantity:Pt.quantity};return Pt.products?.is_weighted&&Pt.weight&&Pt.calculated_price&&(Rn.weight=Pt.weight,Rn.calculatedPrice=Pt.calculated_price),Rn}),ct=ot.reduce((Pt,Mr)=>Mr.weight&&Mr.calculatedPrice?Pt+Mr.calculatedPrice:Pt+Mr.product.price*Mr.quantity,0),Xt=ct*.1,Ot=ct+Xt;xe({items:ot,subtotal:ct,tax:Xt,discount:0,total:Ot}),Ke.customers?.name&&re(Ke.customers.name)}catch{}},q=C=>{if(C.length<2){G([]),P(!1);return}const he=C.toLowerCase().trim(),Ke=c.filter(Xe=>{const ot=Xe.name.toLowerCase().includes(he),ct=Xe.category?.toLowerCase().includes(he),Xt=Xe.description?.toLowerCase().includes(he),Ot=Xe.sku?.toLowerCase().includes(he);return ot||ct||Xt||Ot}).slice(0,3),Qe=f.filter(Xe=>{const ot=Xe.name.toLowerCase().includes(he),ct=Xe.side_businesses?.name.toLowerCase().includes(he);return ot||ct}).slice(0,2),Ve=[...Ke,...Qe].slice(0,5);G(Ve),P(Ve.length>0)},ye=()=>{let C=Z;if(_!=="All"&&(C=C.filter(Ke=>Ke.category===_)),A){const Ke=A.toLowerCase().trim();C=C.filter(Qe=>Qe.name.toLowerCase().includes(Ke)||Qe.category?.toLowerCase().includes(Ke)||Qe.description?.toLowerCase().includes(Ke)||Qe.sku?.toLowerCase().includes(Ke))}g(C);let he=f;_!=="All"&&(he=he.filter(Ke=>Ke.side_businesses?.name===_)),A&&(he=he.filter(Ke=>Ke.name.toLowerCase().includes(A.toLowerCase()))),v(he)},Ne=C=>{D(C),q(C)},fe=C=>{D(C.name),P(!1),G([]),"product_id"in C?we(C):Ye(C)},Se=()=>{const C=K.items.reduce((Ve,Xe)=>{if(Xe.product)return Xe.weight&&Xe.calculatedPrice?Ve+Xe.calculatedPrice:Ve+Xe.product.price*Xe.quantity;if(Xe.sideBusinessItem){const ot=Xe.customPrice||Xe.sideBusinessItem.price||0;return Ve+ot*Xe.quantity}return Ve},0),he=0,Ke=0,Qe=C-Ke;xe(Ve=>({...Ve,subtotal:C,tax:he,discount:Ke,total:Qe}))},we=C=>{if(C.is_weighted&&C.price_per_unit&&C.weight_unit){At(C),Ie(""),ut(!0);return}xe(he=>he.items.find(Qe=>Qe.product?.product_id===C.product_id&&!Qe.weight)?{...he,items:he.items.map(Qe=>Qe.product?.product_id===C.product_id&&!Qe.weight?{...Qe,quantity:Qe.quantity+1}:Qe)}:{...he,items:[...he.items,{product:C,quantity:1}]}),Ah(C.name,C.price)},Ue=(C,he)=>{const Ke=he*(C.price_per_unit||0);xe(rt?Qe=>({...Qe,items:Qe.items.map(Ve=>Ve.product?.product_id===rt&&Ve.weight?{...Ve,weight:he,calculatedPrice:Ke}:Ve)}):Qe=>({...Qe,items:[...Qe.items,{product:C,quantity:1,weight:he,calculatedPrice:Ke}]})),ut(!1),At(null),xt(null),Ie("")},Ye=C=>{if(!C.price)Y(C),nt(""),He(!0);else{xe(Qe=>Qe.items.find(Xe=>Xe.sideBusinessItem?.item_id===C.item_id)?{...Qe,items:Qe.items.map(Xe=>Xe.sideBusinessItem?.item_id===C.item_id?{...Xe,quantity:Xe.quantity+1}:Xe)}:{...Qe,items:[...Qe.items,{sideBusinessItem:C,quantity:1}]});const he=C.name,Ke=C.price||0;Ah(he,Ke)}},st=()=>{if(!tt)return;const C=parseFloat(Re);if(isNaN(C)||C<0){alert("Please enter a valid price");return}xe(he=>he.items.find(Qe=>Qe.sideBusinessItem?.item_id===tt.item_id&&Qe.customPrice===C)?{...he,items:he.items.map(Qe=>Qe.sideBusinessItem?.item_id===tt.item_id&&Qe.customPrice===C?{...Qe,quantity:Qe.quantity+1}:Qe)}:{...he,items:[...he.items,{sideBusinessItem:tt,quantity:1,customPrice:C}]}),He(!1),Y(null),nt("")},Ge=async()=>{if(t==null){alert("Please select a business before creating a quick service item");return}if(!Mt.trim()||!$e||!Dt){alert("Please fill in all fields");return}const C=parseFloat($e);if(isNaN(C)||C<0){alert("Please enter a valid price");return}try{const he={item_id:Date.now(),business_id:parseInt(Dt),name:Mt.trim(),price:C,stock_qty:null,side_businesses:{name:Er.find(Ke=>Ke.business_id.toString()===Dt)?.name||"Service",business_type:"service"}};xe(Ke=>({...Ke,items:[...Ke.items,{sideBusinessItem:he,quantity:1,customPrice:C}]})),Ah(Mt.trim(),C),ce(""),ft(""),sr(""),mr(!1)}catch(he){console.error("Error creating quick service:",he),alert("Failed to create service. Please try again.")}},et=(C,he)=>{if(he<=0){it(C);return}xe(Ke=>({...Ke,items:Ke.items.map(Qe=>Qe.product?.product_id===C?{...Qe,quantity:he}:Qe.sideBusinessItem?.item_id.toString()===C?{...Qe,quantity:he}:Qe)}))},vt=(C,he)=>{if(he<=0){it(C);return}xe(Ke=>({...Ke,items:Ke.items.map(Qe=>{if(Qe.product?.product_id===C&&Qe.weight){const Ve=he*(Qe.product.price_per_unit||0);return{...Qe,weight:he,calculatedPrice:Ve}}return Qe})}))},Gt=C=>typeof C=="string"?C.trim().toLowerCase():"",Yt=C=>{const he=Gt(C);return c.find(Ke=>Gt(Ke.barcode)===he)||null},Kt=(C,he=0)=>{if(C==null||C=="")return he;if(typeof C=="number")return Number.isFinite(C)?C:he;const Ke=parseFloat(String(C));return Number.isFinite(Ke)?Ke:he},bn=(C,he=0)=>{if(C==null||C=="")return he;if(typeof C=="number")return Number.isFinite(C)?Math.trunc(C):he;const Ke=parseInt(String(C),10);return Number.isFinite(Ke)?Ke:he},j=C=>({...C,price:Kt(C.price),stock_quantity:bn(C.stock_quantity),reorder_level:bn(C.reorder_level),tax_rate:Kt(C.tax_rate),is_weighted:!!C.is_weighted,price_per_unit:C.price_per_unit==null?null:Kt(C.price_per_unit),total_revenue:C.total_revenue==null?void 0:Kt(C.total_revenue),sales_count:C.sales_count==null?void 0:bn(C.sales_count),last_updated:C.last_updated,weight_unit:C.weight_unit,description:C.description,sku:C.sku,barcode:typeof C.barcode=="string"?C.barcode.trim():C.barcode,supplier_info:C.supplier_info,image_url:C.image_url}),ue=async C=>{console.log("🔍 Barcode scanned:",C);let he=Yt(C);if(console.log("🔍 Local product found:",he),!he){if(t==null){pt("not_found"),tr(C),setTimeout(()=>{pt("idle")},3e3);return}const Ke=Gt(C);console.log("🔍 Searching database for barcode:",Ke,"business_id:",t);const{data:Qe,error:Ve}=await Oe.from("products").select("*").eq("business_id",t).ilike("barcode",Ke).limit(1);console.log("🔍 Database query result:",Qe,"error:",Ve),Ve&&console.error("Barcode lookup failed:",Ve);const Xe=Qe&&Qe.length>0?Qe[0]:null;if(Xe){const ot=j(Xe);he=ot,u(ct=>ct.some(Ot=>Ot.product_id===ot.product_id)?ct:[ot,...ct].slice(0,50)),oe(ct=>ct.some(Ot=>Ot.product_id===ot.product_id)?ct:[ot,...ct].slice(0,50))}}he?(console.log("✅ Adding product to order:",he.name),we(he),pt("scanned"),tr(C),setTimeout(()=>{pt("idle")},2e3)):(console.log("❌ Product not found for barcode:",C),pt("not_found"),tr(C),setTimeout(()=>{pt("idle")},3e3))},je=()=>{ar?(yt(),ae(!1),pt("idle")):(lt(),ae(!0),pt("listening"))},{startListening:lt,stopListening:yt}=V3({onBarcodeScanned:ue,debounceMs:30,minLength:8,maxLength:20,isActive:ar,context:"sales-page"});E.useEffect(()=>{G3(Pe||De||Qt||Ae)},[Pe,De,Qt,Ae]),E.useEffect(()=>{if(!ar)return;const C=he=>{if(he.target&&he.target.tagName==="INPUT"){const Ke=he.target,Qe=Ke.value.trim();Qe.length>=8&&Qe.length<=20&&/^[A-Za-z0-9]+$/.test(Qe)&&(console.log("🔍 Global barcode fallback detected:",Qe),ue(Qe),Ke.value="")}};return document.addEventListener("input",C,!0),()=>{document.removeEventListener("input",C,!0)}},[ar,ue]);const bt=C=>{C.product&&C.weight&&(At(C.product),Ie(C.weight.toString()),ut(!0),xt(C.product.product_id))},it=C=>{xe(he=>({...he,items:he.items.filter(Ke=>Ke.product?.product_id!==C&&Ke.sideBusinessItem?.item_id.toString()!==C)}))},St=()=>{if(window.confirm("Are you sure you want to reset the current transaction? This will clear all items from the order.")){xe({items:[],subtotal:0,tax:0,discount:0,total:0}),re(""),ne(""),k("cash"),W(""),ge(0),qe("");const C=document.createElement("div");C.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,C.textContent="Transaction reset successfully!",document.body.appendChild(C),setTimeout(()=>{document.body.removeChild(C)},3e3)}},wt=()=>{const C=`RCP-${Date.now()}`,he=new Date,Ke=he.toLocaleDateString("en-IE"),Qe=he.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"});return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Receipt - ${C}</title>
        <style>
          body { 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            line-height: 1.4; 
            margin: 0; 
            padding: 10px; 
            background: white;
            color: black;
          }
          .receipt { 
            width: 100%; 
            max-width: 400px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            padding: 20px; 
            background: white;
          }
          .header { 
            text-align: center; 
            margin-bottom: 15px; 
            border-bottom: 1px dashed #333; 
            padding-bottom: 10px; 
          }
          .logo-fallback {
            display: none;
            background: #333;
            color: white;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
          }
          .business-info { 
            font-size: 10px; 
            margin: 8px 0; 
          }
          .divider { 
            border-top: 1px dashed #333; 
            margin: 10px 0; 
          }
          .item-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 3px 0; 
          }
          .total-row { 
            font-weight: bold; 
            border-top: 1px solid #333; 
            padding-top: 5px; 
            margin-top: 8px; 
          }
          .payment-info { 
            margin: 10px 0; 
          }
          .notes-section {
            margin: 10px 0;
            padding: 8px;
            background: #f5f5f5;
            border-radius: 4px;
          }
          .footer { 
            text-align: center; 
            margin-top: 15px; 
            font-size: 10px; 
            border-top: 1px dashed #333; 
            padding-top: 10px; 
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            <img src="/retailpos/images/backgrounds/logo1.png" alt="LandM Store" style="max-width: 80px; height: auto; display: block; margin: 0 auto 10px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <div class="logo-fallback" style="display: none; font-size: 24px; font-weight: bold; margin-bottom: 8px; color: #1a1a1a;">LandM Store</div>
            <div class="business-info">
              <div>Unit 2 Glenmore Park</div>
              <div>Dundalk, Co. Louth</div>
              <div>087 797 0412</div>
            </div>
          </div>
          
          <div class="divider"></div>
          
          <div class="item-row">
            <span>Date: ${Ke}</span>
            <span>Time: ${Qe}</span>
          </div>
          <div class="item-row">
            <span>Receipt: ${C}</span>
            <span>Cashier: ${e?.username||"System"}</span>
          </div>
          
          <div class="divider"></div>
          
          ${K.items.map(Ve=>{const Xe=Ve.product?.name||Ve.sideBusinessItem?.name||"Unknown Item",ot=Ve.product?.price||Ve.customPrice||Ve.sideBusinessItem?.price||0;return`
            <div class="item-row">
              <span>${Xe} x${Ve.quantity}</span>
              <span>€${(ot*Ve.quantity).toFixed(2)}</span>
            </div>
          `}).join("")}
          
          <div class="divider"></div>
          
          <div class="item-row total-row">
            <span>SUBTOTAL:</span>
            <span>€${K.subtotal.toFixed(2)}</span>
          </div>
          <div class="item-row total-row">
            <span>${at?"ORDER TOTAL:":"GRAND TOTAL:"}</span>
            <span>€${K.total.toFixed(2)}</span>
          </div>
          
          ${at?`
          <div class="divider"></div>
          <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 4px; padding: 8px; margin: 10px 0;">
            <div style="font-weight: bold; margin-bottom: 5px; color: #92400e;">
              <i class="fa-solid fa-credit-card" style="margin-right: 5px;"></i>
              PARTIAL PAYMENT
            </div>
            <div class="item-row">
              <span>Amount Paid Today:</span>
              <span style="color: #059669; font-weight: bold;">€${(parseFloat(Rt)||0).toFixed(2)}</span>
            </div>
            <div class="item-row">
              <span>Remaining Balance:</span>
              <span style="color: #dc2626; font-weight: bold;">€${wr.toFixed(2)}</span>
            </div>
            ${$t?`
            <div style="margin-top: 5px; font-size: 10px; color: #92400e;">
              Note: ${$t}
            </div>
            `:""}
          </div>
          `:""}
          
          <div class="payment-info">
            <div class="item-row">
              <span>Payment Method:</span>
              <span>${Q.toUpperCase()}</span>
            </div>
            ${Q==="cash"?`
            <div class="item-row">
              <span>Amount Received:</span>
              <span>€${parseFloat(L).toFixed(2)}</span>
            </div>
            <div class="item-row">
              <span>Change Given:</span>
              <span>€${X.toFixed(2)}</span>
            </div>
            `:Q==="card"?`
            <div class="item-row">
              <span>Card: ****1234</span>
              <span>Approval: ${Math.floor(Math.random()*1e4)}</span>
            </div>
            `:""}
          </div>
          
          ${Me||at&&$t?`
          <div class="divider"></div>
          <div class="notes-section">
            <div style="font-weight: bold; margin-bottom: 5px;">Notes:</div>
            <div style="font-size: 9px; line-height: 1.3; margin-left: 10px;">
              ${at?`PARTIAL PAYMENT
Amount Paid Today: €${(parseFloat(Rt)||0).toFixed(2)}
Remaining Balance: €${wr.toFixed(2)}
${$t?`Partial Payment Notes: ${$t}`:""}`:""}
              ${Me?(at?`

`:"")+Me:""}
            </div>
          </div>
          `:""}
          
          <div class="divider"></div>
          
          <div class="footer">
            <div>Thank you for shopping with us!</div>
            <div style="margin-top: 5px;">LandM Store - Your Local African Food Store</div>
            ${at?`
            <div style="margin-top: 10px; font-size: 9px; color: #92400e;">
              <strong>Please keep this receipt for your records</strong><br>
              Remaining balance: €${wr.toFixed(2)}
            </div>
            `:""}
          </div>
        </div>
      </body>
      </html>
    `},Ft=()=>{const C=window.open("","_blank");C&&(C.document.write(wt()),C.document.close(),C.print(),C.close())},Br=async()=>{if(!(K.items.length===0||r)){if(t==null){alert("Please select a business before processing a sale.");return}try{let C;if(R&&fr){const Ve=parseInt(fr.replace("TXN-","")),{data:Xe,error:ot}=await Oe.from("sales").update({total_amount:K.total,payment_method:Q}).eq("sale_id",Ve).eq("business_id",t).select().single();if(ot)throw ot;C=Xe}else{let Ve=null;if(ee.trim()){const{data:Xt,error:Ot}=await Oe.from("customers").select("customer_id").eq("business_id",t).eq("name",ee.trim()).single();if(Xt&&!Ot)Ve=Xt.customer_id;else{const{data:Pt,error:Mr}=await Oe.from("customers").insert([{name:ee.trim(),phone_number:_e.trim()||"000-000-0000",email:null,business_id:t}]).select().single();Mr?(console.error("Error creating customer:",Mr),Ve=null):Ve=Pt.customer_id}}let Xe="";at&&(Xe=`PARTIAL PAYMENT
Amount Paid Today: €${(parseFloat(Rt)||0).toFixed(2)}
Remaining Balance: €${wr.toFixed(2)}`,$t&&(Xe+=`

Partial Payment Notes: ${$t}`)),Me&&(Xe+=(Xe?`

`:"")+Me);let ot,ct;try{const Xt={datetime:jl(),total_amount:at?parseFloat(Rt)||0:K.total,payment_method:Q,cashier_id:e?.user_id,customer_id:Ve,discount_applied:K.discount,partial_payment:at,partial_amount:at?parseFloat(Rt)||0:null,remaining_amount:at?wr:null,partial_notes:at?$t:null,notes:Xe||null,business_id:t},Ot=await Oe.from("sales").insert([Xt]).select("*").single();ot=Ot.data,ct=Ot.error}catch{const Ot={datetime:jl(),total_amount:at?parseFloat(Rt)||0:K.total,payment_method:Q,cashier_id:e?.user_id,customer_id:Ve,discount_applied:K.discount,partial_payment:at,partial_amount:at?parseFloat(Rt)||0:null,remaining_amount:at?wr:null,partial_notes:at?$t:null,business_id:t},Pt=await Oe.from("sales").insert([Ot]).select("*").single();ot=Pt.data,ct=Pt.error}if(ct)throw ct;C=ot}if(R&&fr){const Ve=da?(await Oe.from("sale_items").select("product_id").eq("sale_id",C.sale_id)).data?.map(ct=>ct.product_id)||[]:[],Xe=K.items.filter(ct=>ct.product&&!Ve.includes(ct.product.product_id));if(Xe.length>0){const ct=Xe.map(Ot=>({sale_id:C.sale_id,product_id:Ot.product.product_id,quantity:Ot.quantity,price_each:Ot.product.price,weight:Ot.weight||null,calculated_price:Ot.calculatedPrice||null})),{error:Xt}=await Oe.from("sale_items").insert(ct);if(Xt)throw Xt;for(const Ot of ct){const Pt=Ot.calculated_price||Ot.price_each*Ot.quantity,{error:Mr}=await Oe.rpc("increment_product_sales",{product_id_param:Ot.product_id,revenue_amount:Pt,business_id_param:t});Mr&&console.error("Error updating product sales counter:",Mr)}}const ot=K.items.filter(ct=>ct.sideBusinessItem);for(const ct of ot){let Xt=ct.sideBusinessItem.item_id;if(Xt>1e9){const{data:Pt,error:Mr}=await Oe.from("side_business_items").insert({business_id:ct.sideBusinessItem.business_id,parent_shop_id:t,name:ct.sideBusinessItem.name,price:ct.customPrice||ct.sideBusinessItem.price,stock_qty:null,notes:"Created via Quick Service"}).select().single();if(Mr)throw Mr;Xt=Pt.item_id}const{error:Ot}=await Oe.from("side_business_sales").insert({item_id:Xt,quantity:ct.quantity,total_amount:(ct.customPrice||ct.sideBusinessItem.price||0)*ct.quantity,payment_method:Q,date_time:jl(),business_id:ct.sideBusinessItem.business_id,parent_shop_id:t});if(Ot)throw Ot}}else{const Ve=K.items.filter(ot=>ot.product).map(ot=>({sale_id:C.sale_id,product_id:ot.product.product_id,quantity:ot.quantity,price_each:ot.product.price,weight:ot.weight||null,calculated_price:ot.calculatedPrice||null})),Xe=K.items.filter(ot=>ot.sideBusinessItem);for(const ot of Xe){let ct=ot.sideBusinessItem.item_id;if(ct>1e9){const{data:Ot,error:Pt}=await Oe.from("side_business_items").insert({business_id:ot.sideBusinessItem.business_id,parent_shop_id:t,name:ot.sideBusinessItem.name,price:ot.customPrice||ot.sideBusinessItem.price,stock_qty:null,notes:"Created via Quick Service"}).select().single();if(Pt)throw Pt;ct=Ot.item_id}const{error:Xt}=await Oe.from("side_business_sales").insert({item_id:ct,quantity:ot.quantity,total_amount:(ot.customPrice||ot.sideBusinessItem.price||0)*ot.quantity,payment_method:Q,date_time:jl(),business_id:ot.sideBusinessItem.business_id,parent_shop_id:t});if(Xt)throw Xt}if(Ve.length>0){const{error:ot}=await Oe.from("sale_items").insert(Ve);if(ot)throw ot;for(const ct of Ve){const Xt=ct.calculated_price||ct.price_each*ct.quantity,{error:Ot}=await Oe.rpc("increment_product_sales",{product_id_param:ct.product_id,revenue_amount:Xt,business_id_param:t});Ot&&console.error("Error updating product sales counter:",Ot)}}}const he=R&&fr?K.items.filter(Ve=>Ve.product?!(da?(da.sale_items||[]).map(ot=>ot.product_id):[]).includes(Ve.product.product_id):!1):K.items.filter(Ve=>Ve.product);for(const Ve of he){if(!Ve.product)continue;const{error:Xe}=await Oe.from("products").update({stock_quantity:Ve.product.stock_quantity-Ve.quantity,last_updated:jl()}).eq("product_id",Ve.product.product_id).eq("business_id",t);if(Xe)throw Xe;const{error:ot}=await Oe.from("inventory_movements").insert([{product_id:Ve.product.product_id,quantity_change:-Ve.quantity,movement_type:"Sale",reference_id:C.sale_id,business_id:t}]);if(ot)throw ot}const Ke=K.items.filter(Ve=>Ve.sideBusinessItem);for(const Ve of Ke){if(!Ve.sideBusinessItem||Ve.sideBusinessItem.stock_qty===null)continue;const{error:Xe}=await Oe.from("side_business_items").update({stock_qty:Ve.sideBusinessItem.stock_qty-Ve.quantity}).eq("item_id",Ve.sideBusinessItem.item_id).eq("parent_shop_id",t);if(Xe)throw Xe}xe({items:[],subtotal:0,tax:0,discount:0,total:0}),re(""),ne(""),k("cash"),W(""),ge(0),qe(""),at&&wr>0&&C?.sale_id&&await _n(ee,_e,wr,C.sale_id),kt(!1),yn(""),vn(0),jt("");const Qe=document.createElement("div");Qe.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,Qe.textContent=R?"Items added to transaction successfully!":at?`Partial payment processed! €${(parseFloat(Rt)||0).toFixed(2)} paid, €${wr.toFixed(2)} remaining. Reminder created.`:"Sale processed successfully!",document.body.appendChild(Qe),setTimeout(()=>{document.body.removeChild(Qe)},3e3),K3(K.total),M(!1),R&&fr&&setTimeout(()=>{i(`/transaction/${fr}`)},2e3)}catch(C){alert(`Failed to process sale: ${C instanceof Error?C.message:"Unknown error"}`)}}},yr=()=>{const C=new Date,he=C.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),Ke=C.toLocaleDateString("en-GB",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"});return`${he} - ${Ke}`},_n=async(C,he,Ke,Qe)=>{if(t!=null)try{const Ve=e?.user_id||1,Xe=`Payment Due: ${C||"Customer"}`,ot=he?`
Phone: ${he}`:"",ct=`Customer owes €${Ke.toFixed(2)} from Sale #${Qe}. Please follow up for payment.${ot}`,Xt=new Date;Xt.setDate(Xt.getDate()+1);const Ot=Xt.toISOString().split("T")[0],{error:Pt}=await Oe.from("reminders").insert([{title:Xe,body:ct,remind_date:Ot,owner_id:Ve,business_id:t}]).select().single();Pt&&(console.error("Error creating partial payment reminder:",Pt),console.error("Reminder data attempted:",{title:Xe,body:ct,remind_date:Ot,owner_id:Ve}))}catch(Ve){console.error("Error creating partial payment reminder:",Ve)}};return ve?o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#6b7280"},children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading products..."]}):o.jsxs("div",{style:{display:"flex",height:"100vh",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",fontFamily:"Poppins, sans-serif"},children:[o.jsxs("div",{style:{flex:1,background:"#ffffff",margin:"20px",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:R?"#fef3c7":"#f9fafb"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[o.jsx("i",{className:"fa-solid fa-cash-register",style:{marginRight:"12px",color:"#7d8d86"}}),"Point Of Sales"]}),R&&o.jsxs("div",{style:{background:"#f59e0b",color:"#92400e",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("i",{className:"fa-solid fa-plus-circle"}),"Adding to Transaction #",fr]})]}),R&&o.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:"8px 0 0 0",fontStyle:"italic"},children:"Adding new items to existing transaction. Existing items will be preserved."})]}),o.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f5f5f5"},children:o.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{style:{position:"relative",flex:1,background:"#ffffff",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"2px solid #e5e7eb",transition:"all 0.3s ease"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px"},children:[o.jsx("i",{className:"fa-solid fa-search",style:{color:"#6b7280",fontSize:"18px",marginRight:"12px"}}),o.jsx("input",{type:"text",placeholder:"Search products, categories, or SKU...",value:A,onChange:C=>Ne(C.target.value),onFocus:C=>{C.target.parentElement.parentElement.style.borderColor="#3b82f6",C.target.parentElement.parentElement.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.15)",P(I.length>0)},onBlur:C=>{C.target.parentElement.parentElement.style.borderColor="#e5e7eb",C.target.parentElement.parentElement.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",setTimeout(()=>P(!1),200)},onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),A.trim()&&P(!1))},style:{flex:1,padding:"4px 8px",border:"none",background:"transparent",fontSize:"16px",outline:"none",color:"#1f2937",fontWeight:"500"}}),A&&o.jsx("button",{onClick:()=>{D(""),P(!1),G([])},style:{background:"#f3f4f6",border:"none",borderRadius:"6px",padding:"6px",cursor:"pointer",color:"#6b7280",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:C=>{C.target.style.background="#e5e7eb"(C.target).style.color="#374151"},onMouseLeave:C=>{C.target.style.background="#f3f4f6"(C.target).style.color="#6b7280"},children:o.jsx("i",{className:"fa-solid fa-times"})})]}),V&&I.length>0&&o.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"none",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",zIndex:1e3,maxHeight:"300px",overflowY:"auto",marginTop:"8px",backdropFilter:"blur(10px)"},children:I.map((C,he)=>{const Ke="product_id"in C,Qe="item_id"in C;return o.jsxs("div",{onClick:()=>fe(C),style:{padding:"16px 20px",cursor:"pointer",borderBottom:he<I.length-1?"1px solid #f1f5f9":"none",display:"flex",alignItems:"center",gap:"16px",transition:"all 0.2s ease",borderRadius:he===0?"16px 16px 0 0":he===I.length-1?"0 0 16px 16px":"0"},onMouseEnter:Ve=>{Ve.target.style.background="linear-gradient(135deg, #f8fafc, #f1f5f9)"(Ve.target).style.transform="translateX(4px)"},onMouseLeave:Ve=>{Ve.target.style.background="transparent"(Ve.target).style.transform="translateX(0)"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:Ke&&C.image_url?`url(${C.image_url})`:"linear-gradient(135deg, #667eea, #764ba2)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",color:"#ffffff",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:Qe&&o.jsx("i",{className:"fa-solid fa-briefcase"})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"600",color:"#1e293b",lineHeight:"1.3"},children:C.name}),o.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:Ke?`${C.category} • €${C.price.toFixed(2)}`:`${C.side_businesses?.name||"Side Business"} • ${C.price?`€${C.price.toFixed(2)}`:"Custom Price"}`})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"#ffffff",borderRadius:"8px",padding:"8px 12px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},children:[o.jsx("i",{className:"fa-solid fa-plus"}),"Add"]})]},Ke?C.product_id:`sb-${C.item_id}`)})})]}),o.jsx("div",{style:{display:"flex",gap:"12px"},children:o.jsxs(_u,{onClick:()=>mr(!0),children:[o.jsx("i",{className:"fa-solid fa-plus-circle",style:{marginRight:"8px"}}),"Quick Service"]})})]})}),o.jsxs("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb",background:ar?"#f0f9ff":"#f9fafb",transition:"background-color 0.3s ease"},children:[ar&&o.jsx("input",{type:"text",style:{position:"absolute",left:"-9999px",opacity:0,pointerEvents:"none"},onInput:C=>{const he=C.target.value;he&&he.length>=8&&he.length<=20&&(console.log("🔍 Hidden input barcode detected:",he),ue(he),C.target.value="")},autoFocus:!0}),o.jsx("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:o.jsxs("div",{style:{position:"relative",flex:1,minWidth:"300px",maxWidth:"400px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Barcode Scanner"}),o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[o.jsx("input",{type:"text",placeholder:"Scan or enter barcode manually",style:{flex:1,padding:"12px 16px",border:`2px solid ${ar?"#3b82f6":"#d1d5db"}`,borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.3s ease",background:ar?"#f0f9ff":"#ffffff",color:ar?"#1e40af":"#1f2937"},onKeyDown:C=>{if(C.key==="Enter"){const he=C.target.value.trim();he&&he.length>=8&&he.length<=20&&(console.log("🔍 Manual barcode input:",he),ue(he),C.target.value="")}}}),o.jsx(_u,{onClick:je,children:ke==="listening"?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-stop",style:{marginRight:"8px"}}),"Stop Scanner"]}):ke==="scanned"?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-check",style:{marginRight:"8px"}}),"Item Added!"]}):ke==="not_found"?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Not Found"]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-barcode",style:{marginRight:"8px"}}),"Scan Barcode"]})})]})]})})]}),o.jsx("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",whiteSpace:"nowrap"},children:"Category:"}),o.jsx("select",{value:_,onChange:C=>S(C.target.value),style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer",minWidth:"200px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",children:b.map(C=>{let he=0;return C==="All"?he=c.length+f.length:he=f.filter(Ke=>Ke.side_businesses?.name===C).length,o.jsxs("option",{value:C,children:[C," ",C==="All"?`(${he})`:he>0?`(${he})`:""]},C)})})]})}),o.jsxs("div",{style:{flex:1,padding:"24px 32px",overflowY:"auto"},children:[o.jsx("div",{style:{marginBottom:"16px"},children:o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 4px 0"},children:"Products"})}),p.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[o.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),o.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",color:"#374151",margin:"0 0 8px 0"},children:"No products found"}),o.jsx("p",{style:{fontSize:"14px",margin:"0",color:"#6b7280"},children:A?`No products match "${A}"`:"Try selecting a different category"})]}):o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"12px"},children:[p.map(C=>o.jsxs("div",{style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:he=>{he.currentTarget.style.transform="translateY(-1px)",he.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",he.currentTarget.style.border="2px solid #6b7280"},onMouseLeave:he=>{he.currentTarget.style.transform="translateY(0)",he.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",he.currentTarget.style.border="2px solid #6b7280"},children:[o.jsx("div",{style:{width:"100%",height:"100px",background:C.image_url?`url(${C.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:!C.image_url&&o.jsx("i",{className:"fa-solid fa-image",style:{fontSize:"24px",color:"#9ca3af"}})}),o.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:C.name}),o.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:C.is_weighted&&C.price_per_unit&&C.weight_unit?C.weight_unit==="g"&&C.price_per_unit<1?`€${(C.price_per_unit*1e3).toFixed(2)}/kg`:C.weight_unit==="kg"&&C.price_per_unit>=1?`€${C.price_per_unit.toFixed(2)}/kg`:`€${C.price_per_unit.toFixed(2)}/${C.weight_unit}`:`€${C.price.toFixed(2)}`}),o.jsxs("button",{onClick:()=>we(C),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:he=>{he.currentTarget.style.background="#3e3f29"},onMouseLeave:he=>{he.currentTarget.style.background="#7d8d86"},children:[o.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},C.product_id)),y.map(C=>o.jsxs("div",{style:{background:"#ffffff",border:"3px solid #374151",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:he=>{he.currentTarget.style.transform="translateY(-1px)",he.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseLeave:he=>{he.currentTarget.style.transform="translateY(0)",he.currentTarget.style.boxShadow="none"},children:[o.jsx("div",{style:{width:"100%",height:"100px",background:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"24px",color:"#9ca3af"}})}),o.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:C.name}),o.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:C.price?`€${C.price.toFixed(2)}`:"Custom Price"}),o.jsxs("button",{onClick:()=>Ye(C),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:he=>{he.currentTarget.style.background="#3e3f29"},onMouseLeave:he=>{he.currentTarget.style.background="#7d8d86"},children:[o.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},`sb-${C.item_id}`))]})]})]}),o.jsxs("div",{style:{width:"400px",background:"#ffffff",margin:"20px 20px 20px 0",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px",fontWeight:"600"},children:e?.username?.charAt(0).toUpperCase()}),o.jsx("div",{children:o.jsxs("p",{style:{margin:"0",fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["Hello, ",e?.username]})})]}),o.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:yr()})]}),o.jsxs("div",{style:{flex:1,padding:"24px",overflowY:"auto"},children:[o.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:["Order Detail #",Math.floor(Math.random()*1e7)]}),K.items.length===0?o.jsxs("div",{style:{textAlign:"center",color:"#6b7280",padding:"40px 0"},children:[o.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),o.jsx("p",{children:"No items in order"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:K.items.map(C=>{const he=C.product?.product_id||`sb-${C.sideBusinessItem?.item_id}`,Ke=C.product?.name||C.sideBusinessItem?.name||"Unknown Item",Qe=C.product?.price||C.customPrice||C.sideBusinessItem?.price||0,Ve=!!C.sideBusinessItem;return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#ffffff",borderRadius:"8px",border:"3px solid #dc2626",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:Ve?"linear-gradient(135deg, #f3f4f6, #e5e7eb)":C.product?.image_url?`url(${C.product.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:Ve&&o.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"16px",color:"#9ca3af"}})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:Ke.length>20?Ke.substring(0,20)+"...":Ke}),o.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#7d8d86",fontWeight:"600"},children:C.weight&&C.calculatedPrice?o.jsxs(o.Fragment,{children:[C.weight," ",C.product?.weight_unit," • €",C.calculatedPrice.toFixed(2)]}):`€${Qe.toFixed(2)}`})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!C.weight&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>et(he,C.quantity-1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),o.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:C.quantity}),o.jsx("button",{onClick:()=>et(he,C.quantity+1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),C.weight&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>vt(he,C.weight-.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),o.jsxs("button",{onClick:()=>bt(C),style:{minWidth:"60px",height:"24px",borderRadius:"4px",border:"1px solid #7d8d86",background:"#f9fafb",color:"#7d8d86",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"500",padding:"0 4px"},title:"Click to edit weight",children:[C.weight," ",C.product?.weight_unit]}),o.jsx("button",{onClick:()=>vt(he,C.weight+.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),o.jsx("button",{onClick:()=>it(he),style:{width:"24px",height:"24px",borderRadius:"4px",border:"none",background:"#ef4444",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",marginLeft:"4px"},children:o.jsx("i",{className:"fa-solid fa-trash"})})]})]},he)})})]}),o.jsxs("div",{style:{padding:"24px",borderTop:"1px solid #e5e7eb",background:"#f9fafb"},children:[o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Detail"}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Customer Name"}),o.jsx("input",{type:"text",value:ee,onChange:C=>re(C.target.value),placeholder:"Enter customer name",style:{width:"100%",padding:"8px 12px",border:"1px solid #6b7280",borderRadius:"6px",fontSize:"14px",outline:"none"}})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Sub Total"}),o.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["€",K.subtotal.toFixed(2)]})]}),K.discount>0&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Discount"}),o.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["€",K.discount.toFixed(2)]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"8px",borderTop:"1px solid #d1d5db",marginBottom:"16px"},children:[o.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937"},children:"Total Payment"}),o.jsxs("span",{style:{fontSize:"16px",fontWeight:"600",color:"#7d8d86"},children:["€",K.total.toFixed(2)]})]})]}),o.jsx("button",{style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"14px",fontWeight:"500",cursor:"pointer",width:"100%",marginBottom:"12px"},children:"Add Voucher"}),o.jsx("div",{style:{background:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"10px 12px",display:"flex",alignItems:"center",gap:"8px",width:"fit-content",maxWidth:"280px",marginBottom:"12px",opacity:K.items.length===0?.5:1,cursor:K.items.length===0?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},onClick:async()=>{if(K.items.length!==0){if(Cr){console.log("Pausing TTS..."),Nr.pause(),Ut(!1);return}console.log("Announce Order clicked!"),console.log("Order items:",K.items),Ut(!0),Nr.updateSettings({enabled:!0}),er(Nr.getSettings()),console.log("TTS Settings after enabling:",Nr.getSettings());try{await T1(K.items),setTimeout(()=>{Nr.updateSettings({enabled:!1}),er(Nr.getSettings()),Ut(!1)},3e3)}catch(C){console.error("TTS Error:",C),Nr.updateSettings({enabled:!1}),er(Nr.getSettings()),Ut(!1)}}},onMouseEnter:C=>{K.items.length>0&&(C.currentTarget.style.background="#333333",C.currentTarget.style.borderColor="#555555")},onMouseLeave:C=>{K.items.length>0&&(C.currentTarget.style.background="#2a2a2a",C.currentTarget.style.borderColor="#404040")},children:o.jsxs("button",{onClick:async()=>{if(K.items.length!==0){if(Cr){console.log("Pausing TTS..."),Nr.stop(),Ut(!1);return}console.log("Announce Order clicked!"),console.log("Order items:",K.items),Ut(!0),Nr.updateSettings({enabled:!0}),er(Nr.getSettings()),console.log("TTS Settings after enabling:",Nr.getSettings());try{await T1(K.items),setTimeout(()=>{Nr.updateSettings({enabled:!1}),er(Nr.getSettings()),Ut(!1)},3e3)}catch(C){console.error("TTS Error:",C),Ut(!1),Nr.updateSettings({enabled:!1}),er(Nr.getSettings())}}},disabled:K.items.length===0,style:{background:K.items.length===0?"#666666":"#4a5568",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",cursor:K.items.length===0?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease",opacity:K.items.length===0?.5:1},onMouseEnter:C=>{K.items.length>0&&(C.target.style.background="#2d3748")},onMouseLeave:C=>{K.items.length>0&&(C.target.style.background="#4a5568")},children:[o.jsx("i",{className:Cr?"fa-solid fa-pause":"fa-solid fa-play",style:{fontSize:"12px"}}),Cr?"Stop":"Play"]})}),o.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[o.jsxs(_u,{onClick:St,disabled:K.items.length===0,style:{flex:1},children:[o.jsx("i",{className:"fa-solid fa-rotate-left",style:{marginRight:"8px"}}),"Reset"]}),o.jsxs(_u,{onClick:()=>M(!0),disabled:K.items.length===0,style:{flex:2},children:[o.jsx("i",{className:"fa-solid fa-credit-card",style:{marginRight:"8px"}}),"Purchase",K.items.length>0&&o.jsx("span",{style:{fontSize:"10px",opacity:.8,marginLeft:"2px"},children:"(Ctrl+Enter)"})]})]})]})]}),Ae&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"20px",width:"95%",maxWidth:"700px",maxHeight:"95vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"8px",borderBottom:"1px solid #e5e7eb"},children:[o.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1f2937"},children:[o.jsx("i",{className:"fa-solid fa-receipt",style:{marginRight:"12px",color:"#7d8d86"}}),"Sales Summary"]}),o.jsx("button",{onClick:()=>M(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#6b7280",cursor:"pointer",padding:"4px"},children:o.jsx("i",{className:"fa-solid fa-xmark"})})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Customer Information"}),o.jsx("input",{type:"text",value:ee,onChange:C=>re(C.target.value),placeholder:"Enter customer name (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"12px"}})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Phone Number (Optional)"}),o.jsx("input",{type:"tel",value:_e,onChange:C=>ne(C.target.value),placeholder:"Enter phone number (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"16px"}})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Payment Method"}),o.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:["cash","card","credit"].map(C=>o.jsxs("button",{onClick:()=>k(C),style:{background:Q===C?"#7d8d86":"#f3f4f6",color:Q===C?"white":"#374151",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",textTransform:"capitalize",transition:"all 0.2s ease"},children:[o.jsx("i",{className:`fa-solid fa-${C==="cash"?"money-bill":C==="card"?"credit-card":"hand-holding-dollar"}`,style:{marginRight:"6px"}}),C]},C))})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0"},children:"Payment Options"}),o.jsxs("button",{onClick:()=>{kt(!at),at?(yn(""),vn(0)):(yn(K.total.toString()),vn(0))},style:{background:at?"#ef4444":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("i",{className:`fa-solid fa-${at?"times":"credit-card"}`,style:{fontSize:"12px"}}),at?"Disable Partial":"Enable Partial Payment"]})]}),at&&o.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("i",{className:"fa-solid fa-info-circle",style:{color:"#f59e0b"}}),o.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#92400e"},children:"Partial Payment Enabled"})]}),o.jsxs("div",{style:{fontSize:"14px",color:"#92400e"},children:[o.jsxs("div",{children:["Amount to pay now: ",o.jsxs("strong",{children:["€",(parseFloat(Rt)||0).toFixed(2)]})]}),o.jsxs("div",{children:["Remaining amount: ",o.jsxs("strong",{children:["€",wr.toFixed(2)]})]}),wr>0&&o.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#fef2f2",border:"1px solid #fca5a5",borderRadius:"4px"},children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"6px",color:"#dc2626"}}),o.jsxs("strong",{style:{color:"#dc2626"},children:["Still need to pay: €",wr.toFixed(2)]})]})]})]}),at&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Amount to Pay Now (€)"}),o.jsx("input",{type:"number",step:"0.01",min:"0",max:K.total,value:Rt,onChange:C=>{const he=C.target.value;yn(he);const Ke=parseFloat(he)||0;vn(Math.max(0,K.total-Ke))},style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},placeholder:`Enter amount (max €${K.total.toFixed(2)})`})]}),at&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Notes (Optional)"}),o.jsx("textarea",{value:$t,onChange:C=>jt(C.target.value),placeholder:"Add any notes about this partial payment...",style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit",transition:"border-color 0.2s ease"}})]})]}),Q==="cash"&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Amount Received"}),o.jsx("div",{style:{marginBottom:"12px"},children:o.jsxs("button",{onClick:()=>W(at?Rt:K.total.toFixed(2)),style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:C=>C.target.style.background="#f9fafb",onMouseOut:C=>C.target.style.background="#ffffff",children:["Set Exact Amount (€",at?(parseFloat(Rt)||0).toFixed(2):K.total.toFixed(2),")"]})}),o.jsx("input",{type:"number",step:"0.01",value:L,onChange:C=>W(C.target.value),placeholder:`Enter amount: €${at?(parseFloat(Rt)||0).toFixed(2):K.total.toFixed(2)}`,style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"block",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"18px",fontWeight:"500",outline:"none",background:"#ffffff",textAlign:"center"}}),X>0&&o.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",color:"#0c4a6e",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[o.jsx("i",{className:"fa-solid fa-coins",style:{marginRight:"8px"}}),"Change: €",X.toFixed(2)]}),at&&wr>0&&o.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"2px solid #dc2626",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Still need to pay: €",wr.toFixed(2)]}),L&&parseFloat(L)<K.total&&!at&&o.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"1px solid #f87171",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Need €",((at?parseFloat(Rt)||0:K.total)-parseFloat(L)).toFixed(2)," more"]})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Receipt Notes (Optional)"}),o.jsx("textarea",{value:Me,onChange:C=>qe(C.target.value),placeholder:"Add notes for receipt (e.g., partial payment, special instructions, etc.)",style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit"}}),o.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:"8px 0 0 0"},children:"These notes will appear on the printed receipt"})]}),o.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"12px",marginBottom:"16px"},children:[o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Summary"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Subtotal"}),o.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["€",K.subtotal.toFixed(2)]})]}),K.discount>0&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Discount"}),o.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["€",K.discount.toFixed(2)]})]}),at&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Amount to Pay Now"}),o.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#7d8d86"},children:["€",(parseFloat(Rt)||0).toFixed(2)]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Remaining Amount"}),o.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#ef4444"},children:["€",wr.toFixed(2)]})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid #d1d5db",marginTop:"8px"},children:[o.jsx("span",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:at?"Total Order":"Total"}),o.jsxs("span",{style:{fontSize:"18px",fontWeight:"600",color:"#7d8d86"},children:["€",K.total.toFixed(2)]})]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsxs("button",{onClick:()=>te(!0),style:{background:"#ffffff",color:"#3e3f29",border:"1px solid #3e3f29",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("i",{className:"fa-solid fa-eye"}),"View Receipt"]}),o.jsxs("button",{onClick:Ft,style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsx("button",{onClick:()=>M(!1),style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),o.jsxs("button",{onClick:Br,disabled:Q==="cash"&&(!L||parseFloat(L)<(at?parseFloat(Rt)||0:K.total)),style:{background:Q==="cash"&&(!L||parseFloat(L)<(at?parseFloat(Rt)||0:K.total))?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:Q==="cash"&&(!L||parseFloat(L)<(at?parseFloat(Rt)||0:K.total))?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:Q==="cash"&&(!L||parseFloat(L)<(at?parseFloat(Rt)||0:K.total))?.6:1},children:[o.jsx("i",{className:"fa-solid fa-credit-card"}),at?"Process Partial Payment":"Process Sale"]})]})]})]})}),Ce&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",width:"95vw",height:"95vh",overflow:"auto",position:"relative"},children:[o.jsx("button",{onClick:()=>te(!1),style:{position:"absolute",top:"12px",right:"12px",background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#6b7280",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},onMouseOver:C=>C.target.style.background="#f3f4f6",onMouseOut:C=>C.target.style.background="none",children:o.jsx("i",{className:"fa-solid fa-times"})}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0",textAlign:"center"},children:"Receipt Preview"}),o.jsx("div",{dangerouslySetInnerHTML:{__html:wt()},style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"30px",background:"#ffffff",fontFamily:"Courier New, monospace",fontSize:"16px",lineHeight:"1.6",maxWidth:"600px",margin:"0 auto"}})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>te(!1),style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close"}),o.jsxs("button",{onClick:()=>{te(!1),Ft()},style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #3e3f29 0%, #7d8d86 100%)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]})]})}),Pe&&tt&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[o.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"Enter Custom Price"}),o.jsxs("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#6b7280"},children:["Set the price for: ",o.jsx("strong",{children:tt.name})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price (€)"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:Re,onChange:C=>nt(C.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onKeyDown:C=>{C.key==="Enter"&&st()},autoFocus:!0})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>{He(!1),Y(null),nt("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),o.jsx("button",{onClick:st,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Add to Order"})]})]})}),De&&ht&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:rt?"Edit Weight":"Enter Weight"}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:"0 0 8px 0"},children:ht.name}),o.jsxs("p",{style:{fontSize:"12px",color:"#9ca3af",margin:"0 0 12px 0"},children:["Price: €",ht.price_per_unit?.toFixed(2)," per ",ht.weight_unit]})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:["Weight (",ht.weight_unit,")"]}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:mt,onChange:C=>Ie(C.target.value),placeholder:`Enter weight in ${ht.weight_unit}`,style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),mt&&parseFloat(mt)>0&&o.jsxs("div",{style:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px",marginBottom:"20px"},children:[o.jsx("p",{style:{fontSize:"14px",color:"#374151",margin:"0 0 4px 0"},children:"Total Price:"}),o.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:["€",((parseFloat(mt)||0)*(ht.price_per_unit||0)).toFixed(2)]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>{ut(!1),At(null),xt(null),Ie("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),o.jsx("button",{onClick:()=>{const C=parseFloat(mt);C>0&&Ue(ht,C)},disabled:!mt||parseFloat(mt)<=0,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!mt||parseFloat(mt)<=0?"#d1d5db":"#7d8d86",color:!mt||parseFloat(mt)<=0?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:!mt||parseFloat(mt)<=0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:rt?"Update Weight":"Add to Order"})]})]})}),Qt&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[o.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"24px",fontWeight:"600",color:"#1f2937",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("i",{className:"fa-solid fa-plus-circle",style:{color:"#10b981"}}),"Create Quick Service"]}),o.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280"},children:"Create a service on-the-fly with custom name and price. No need to predefine items!"}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Business"}),o.jsxs("select",{value:Dt,onChange:C=>sr(C.target.value),style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",children:[o.jsx("option",{value:"",children:"Select a service business"}),Er.map(C=>o.jsx("option",{value:C.business_id,children:C.name},C.business_id))]})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Name"}),o.jsx("input",{type:"text",value:Mt,onChange:C=>ce(C.target.value),placeholder:"e.g., Haircut, Consultation, Repair...",style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price (€)"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:$e,onChange:C=>ft(C.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb"})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>{mr(!1),ce(""),ft(""),sr("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),o.jsxs("button",{onClick:Ge,disabled:!Mt.trim()||!$e||!Dt,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!Mt.trim()||!$e||!Dt?"#d1d5db":"linear-gradient(135deg, #10b981, #059669)",color:!Mt.trim()||!$e||!Dt?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"600",cursor:!Mt.trim()||!$e||!Dt?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("i",{className:"fa-solid fa-plus"}),"Add to Order"]})]})]})})]})},Q3="_searchContainer_tecz1_2",J3="_searchBarSection_tecz1_12",Z3="_searchBarWrapper_tecz1_16",eE="_searchInputWrapper_tecz1_22",tE="_searchIcon_tecz1_40",rE="_searchInput_tecz1_22",nE="_clearButton_tecz1_65",aE="_searchResults_tecz1_87",sE="_resultsCount_tecz1_91",iE="_filtersSection_tecz1_98",oE="_filtersContainer_tecz1_103",lE="_filterGroup_tecz1_110",cE="_filterLabel_tecz1_116",uE="_filterSelect_tecz1_123",dE="_sortToggleButton_tecz1_140",fE="_clearFiltersButton_tecz1_158",Gr={searchContainer:Q3,searchBarSection:J3,searchBarWrapper:Z3,searchInputWrapper:eE,searchIcon:tE,searchInput:rE,clearButton:nE,searchResults:aE,resultsCount:sE,filtersSection:iE,filtersContainer:oE,filterGroup:lE,filterLabel:cE,filterSelect:uE,sortToggleButton:dE,clearFiltersButton:fE},hE=({searchTerm:e="",onSearchChange:t,searchPlaceholder:r="Search...",showSearchResults:a=!1,searchResultsCount:i=0,onClearSearch:c,filters:u=[],sortOptions:f=[],onSortToggle:h,sortOrder:p="desc",onClearFilters:g,hasActiveFilters:y=!1})=>o.jsxs("div",{className:Gr.searchContainer,children:[t&&o.jsx("div",{className:Gr.searchBarSection,children:o.jsxs("div",{className:Gr.searchBarWrapper,children:[o.jsxs("div",{className:Gr.searchInputWrapper,children:[o.jsx("i",{className:`fa-solid fa-search ${Gr.searchIcon}`}),o.jsx("input",{type:"text",placeholder:r,value:e,onChange:v=>t(v.target.value),className:Gr.searchInput}),e&&c&&o.jsx("button",{onClick:c,className:Gr.clearButton,title:"Clear search",children:o.jsx("i",{className:"fa-solid fa-times"})})]}),a&&e&&o.jsx("div",{className:Gr.searchResults,children:o.jsxs("span",{className:Gr.resultsCount,children:[i," result",i!==1?"s":""," found"]})})]})}),(u.length>0||f.length>0||h||y)&&o.jsx("div",{className:Gr.filtersSection,children:o.jsxs("div",{className:Gr.filtersContainer,children:[u.map((v,b)=>o.jsxs("div",{className:Gr.filterGroup,children:[o.jsxs("label",{className:Gr.filterLabel,children:[v.label,":"]}),o.jsx("select",{value:v.value,onChange:w=>v.onChange(w.target.value),className:Gr.filterSelect,children:v.options.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))})]},b)),f.map((v,b)=>o.jsxs("div",{className:Gr.filterGroup,children:[o.jsxs("label",{className:Gr.filterLabel,children:[v.label,":"]}),o.jsx("select",{value:v.value,onChange:w=>v.onChange(w.target.value),className:Gr.filterSelect,children:v.options.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))})]},b)),h&&o.jsx("button",{onClick:h,className:Gr.sortToggleButton,title:`Sort ${p==="asc"?"Descending":"Ascending"}`,children:o.jsx("i",{className:`fa-solid fa-sort-${p==="asc"?"up":"down"}`})}),y&&g&&o.jsxs("button",{onClick:g,className:Gr.clearFiltersButton,title:"Clear all filters",children:[o.jsx("i",{className:"fa-solid fa-times"}),"Clear"]})]})})]}),pE="_sideBusinessesContainer_272f1_2",gE="_pageHeader_272f1_8",xE="_pageTitle_272f1_17",mE="_primaryButton_272f1_31",yE="_statisticsGrid_272f1_54",vE="_statisticsCard_272f1_61",bE="_statisticsCardContent_272f1_75",_E="_statisticsInfo_272f1_81",SE="_statisticsLabel_272f1_85",wE="_statisticsValue_272f1_92",TE="_statisticsIcon_272f1_99",EE="_statisticsIconPurple_272f1_104",kE="_statisticsIconBlue_272f1_108",jE="_statisticsIconGreen_272f1_112",CE="_statisticsIconOrange_272f1_116",AE="_mainContentGrid_272f1_121",RE="_contentPanel_272f1_128",DE="_contentPanelHeader_272f1_142",NE="_contentPanelTitle_272f1_151",OE="_contentPanelBody_272f1_158",IE="_emptyStateMessage_272f1_165",BE="_emptyStateMessageIcon_272f1_171",ME="_emptyStateMessageText_272f1_177",FE="_listContainer_272f1_184",LE="_listContainerDivided_272f1_189",PE="_listItemCard_272f1_193",zE="_listItemCardContent_272f1_210",UE="_listItemCardIcon_272f1_217",WE="_listItemCardMain_272f1_234",HE="_listItemCardTitle_272f1_238",qE="_listItemCardSubtitle_272f1_245",$E="_listItemCardMeta_272f1_251",GE="_listItemCardPrice_272f1_258",VE="_listItemCardStock_272f1_264",YE="_listItemCardCount_272f1_269",KE="_listItemCardTime_272f1_274",XE="_listItemCardActions_272f1_279",QE="_actionButton_272f1_284",JE="_actionButtonIcon_272f1_303",ZE="_statusBadge_272f1_308",ek="_statusBadgeRental_272f1_316",tk="_statusBadgeResale_272f1_321",rk="_statusBadgeService_272f1_326",nk="_statusBadgeGray_272f1_331",ak="_statusBadgeCash_272f1_336",sk="_statusBadgeCard_272f1_341",ik="_statusBadgeMobile_272f1_346",ok="_modalOverlay_272f1_352",lk="_modalDialog_272f1_363",ck="_modalDialogTitle_272f1_373",uk="_modalDialogForm_272f1_380",dk="_formFieldGroup_272f1_386",fk="_formFieldLabel_272f1_391",hk="_formFieldInput_272f1_399",pk="_formFieldTextarea_272f1_420",gk="_formFieldSelect_272f1_444",xk="_actionButtonDanger_272f1_496",mk="_standardButton_272f1_506",yk="_standardButtonSecondary_272f1_516",vk="_standardButtonDanger_272f1_525",bk="_standardButtonSuccess_272f1_534",_k="_businessDetailModalHeader_272f1_544",Sk="_businessAnalyticsSection_272f1_554",wk="_analyticsSectionTitle_272f1_558",Tk="_analyticsGrid_272f1_567",Ek="_analyticsCard_272f1_574",kk="_analyticsCardHeader_272f1_587",jk="_analyticsIcon_272f1_594",Ck="_analyticsIconBlue_272f1_600",Ak="_analyticsIconGreen_272f1_604",Rk="_analyticsIconPurple_272f1_608",Dk="_analyticsPeriod_272f1_612",Nk="_analyticsCardContent_272f1_618",Ok="_analyticsMetric_272f1_624",Ik="_analyticsLabel_272f1_630",Bk="_analyticsValue_272f1_636",Mk="_itemsSectionHeader_272f1_643",Fk="_restockButton_272f1_650",Lk="_restockActionButton_272f1_669",Pk="_editActionButton_272f1_679",zk="_formFieldHelp_272f1_690",Uk="_modalHeader_272f1_698",Wk="_modalCloseButton_272f1_707",Hk="_required_272f1_724",qk="_errorMessage_272f1_730",$k="_listItemCardNotes_272f1_748",Gk="_restockInfo_272f1_759",Vk="_restockItemName_272f1_767",Yk="_restockCurrentStock_272f1_774",Kk="_restockPreview_272f1_780",Xk="_restockPreviewText_272f1_788",Qk="_businessDetailModalIcon_272f1_803",Jk="_businessDetailModalInfo_272f1_819",Zk="_businessDetailModalName_272f1_823",ej="_businessDetailModalDescription_272f1_830",tj="_businessDetailModalMeta_272f1_836",rj="_businessDetailModalDate_272f1_842",nj="_businessDetailModalStats_272f1_847",aj="_businessDetailModalItems_272f1_854",sj="_noItemsMessage_272f1_865",ij="_deleteConfirmationWarning_272f1_872",oj="_deleteConfirmationWarningText_272f1_878",lj="_modalDialogActions_272f1_885",cj="_errorStateContainer_272f1_893",uj="_errorStateContent_272f1_901",dj="_errorStateIcon_272f1_910",fj="_errorStateTitle_272f1_916",hj="_errorStateText_272f1_922",pj="_errorStateRetryButton_272f1_927",gj="_loadingStateContainer_272f1_944",xj="_loadingStateText_272f1_951",mj="_loadingStateSpinner_272f1_959",N={sideBusinessesContainer:pE,pageHeader:gE,pageTitle:xE,primaryButton:mE,statisticsGrid:yE,statisticsCard:vE,statisticsCardContent:bE,statisticsInfo:_E,statisticsLabel:SE,statisticsValue:wE,statisticsIcon:TE,statisticsIconPurple:EE,statisticsIconBlue:kE,statisticsIconGreen:jE,statisticsIconOrange:CE,mainContentGrid:AE,contentPanel:RE,contentPanelHeader:DE,contentPanelTitle:NE,contentPanelBody:OE,emptyStateMessage:IE,emptyStateMessageIcon:BE,emptyStateMessageText:ME,listContainer:FE,listContainerDivided:LE,listItemCard:PE,listItemCardContent:zE,listItemCardIcon:UE,listItemCardMain:WE,listItemCardTitle:HE,listItemCardSubtitle:qE,listItemCardMeta:$E,listItemCardPrice:GE,listItemCardStock:VE,listItemCardCount:YE,listItemCardTime:KE,listItemCardActions:XE,actionButton:QE,actionButtonIcon:JE,statusBadge:ZE,statusBadgeRental:ek,statusBadgeResale:tk,statusBadgeService:rk,statusBadgeGray:nk,statusBadgeCash:ak,statusBadgeCard:sk,statusBadgeMobile:ik,modalOverlay:ok,modalDialog:lk,modalDialogTitle:ck,modalDialogForm:uk,formFieldGroup:dk,formFieldLabel:fk,formFieldInput:hk,formFieldTextarea:pk,formFieldSelect:gk,actionButtonDanger:xk,standardButton:mk,standardButtonSecondary:yk,standardButtonDanger:vk,standardButtonSuccess:bk,businessDetailModalHeader:_k,businessAnalyticsSection:Sk,analyticsSectionTitle:wk,analyticsGrid:Tk,analyticsCard:Ek,analyticsCardHeader:kk,analyticsIcon:jk,analyticsIconBlue:Ck,analyticsIconGreen:Ak,analyticsIconPurple:Rk,analyticsPeriod:Dk,analyticsCardContent:Nk,analyticsMetric:Ok,analyticsLabel:Ik,analyticsValue:Bk,itemsSectionHeader:Mk,restockButton:Fk,restockActionButton:Lk,editActionButton:Pk,formFieldHelp:zk,modalHeader:Uk,modalCloseButton:Wk,required:Hk,errorMessage:qk,listItemCardNotes:$k,restockInfo:Gk,restockItemName:Vk,restockCurrentStock:Yk,restockPreview:Kk,restockPreviewText:Xk,businessDetailModalIcon:Qk,businessDetailModalInfo:Jk,businessDetailModalName:Zk,businessDetailModalDescription:ej,businessDetailModalMeta:tj,businessDetailModalDate:rj,businessDetailModalStats:nj,businessDetailModalItems:aj,noItemsMessage:sj,deleteConfirmationWarning:ij,deleteConfirmationWarningText:oj,modalDialogActions:lj,errorStateContainer:cj,errorStateContent:uj,errorStateIcon:dj,errorStateTitle:fj,errorStateText:hj,errorStateRetryButton:pj,loadingStateContainer:gj,loadingStateText:xj,loadingStateSpinner:mj};async function yj(e,t,r){console.log("🔄 Starting image upload for side business:",t),console.log("📁 File details:",{name:e.name,size:e.size,type:e.type}),console.log("👤 User ID:",r);try{if(!r)return console.error("❌ No user ID provided"),null;console.log("✅ User ID provided:",r);const{data:a,error:i}=await Oe.storage.listBuckets();i?console.error("❌ Error listing buckets:",i):console.log("📦 Available buckets:",a?.map(p=>p.name));const c=`sidebusiness-images/${t}.${e.name.split(".").pop()}`;console.log("📤 Uploading to Supabase Storage:",c);const{error:u}=await Oe.storage.from("products").upload(c,e,{contentType:e.type,upsert:!0});if(u)return console.error("❌ Upload failed:",u),null;const{data:{publicUrl:f}}=Oe.storage.from("products").getPublicUrl(c);console.log("✅ Image uploaded successfully:",f),console.log("💾 Updating database with public URL...");const{error:h}=await Oe.from("side_businesses").update({image_url:f}).eq("business_id",t);return h?(console.error("❌ DB update failed:",h),null):(console.log("✅ Database updated with public URL"),f)}catch(a){return console.error("💥 Unexpected error during upload:",a),null}}const vj=()=>{const{user:e}=An(),[t,r]=E.useState([]),[a,i]=E.useState([]),[c,u]=E.useState([]),[f,h]=E.useState(!0),[p,g]=E.useState(null),[y,v]=E.useState("all"),[b,w]=E.useState("all"),[_,S]=E.useState(""),[A,D]=E.useState("created_at"),[I,G]=E.useState("desc"),[Z,oe]=E.useState(!1),[V,P]=E.useState(!1),[z,ie]=E.useState(new Set),[K,xe]=E.useState(!1),[ee,re]=E.useState(null),[_e,ne]=E.useState(!1),[ve,le]=E.useState(null),[Ae,M]=E.useState(null),[Q,k]=E.useState(null),[L,W]=E.useState(!1),[X,ge]=E.useState({item_id:null,current_stock:0,restock_quantity:""}),[Me,qe]=E.useState(!1),[Ce,te]=E.useState(null),[Pe,He]=E.useState({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),[tt,Y]=E.useState(null),[Re,nt]=E.useState(!1),[De,ut]=E.useState({business_id:"",name:"",price:"",stock_qty:"",notes:""}),[ht,At]=E.useState({item_id:"",quantity:1,total_amount:"",payment_method:"cash"});E.useEffect(()=>{mt()},[]);const mt=async()=>{try{if(h(!0),g(null),!e?.business_id){r([]),i([]),u([]),h(!1);return}const{data:ae,error:ke}=await Oe.from("side_businesses").select("*").eq("parent_shop_id",e.business_id).order("created_at",{ascending:!1});if(ke)throw ke;const{data:pt,error:Ct}=await Oe.from("side_business_items").select(`
          *,
          side_businesses (name)
        `).eq("parent_shop_id",e.business_id).order("created_at",{ascending:!1});if(Ct)throw Ct;const{data:tr,error:at}=await Oe.from("side_business_sales").select(`
          *,
          side_business_items (
            name,
            side_businesses (name)
          )
        `).eq("parent_shop_id",e.business_id).order("date_time",{ascending:!1}).limit(10);if(at)throw at;r(ae||[]),i(pt||[]),u(tr||[])}catch(ae){g(ae instanceof Error?ae.message:"Failed to fetch data")}finally{h(!1)}},Ie=async ae=>{if(ae.preventDefault(),!Pe.name.trim()){g("Business name is required");return}if(!Pe.business_type){g("Business type is required");return}if(!e?.user_id){g("User not authenticated");return}try{g(null);const{data:ke,error:pt}=await Oe.from("side_businesses").insert({owner_id:e.user_id,name:Pe.name.trim(),description:Pe.description.trim()||null,business_type:Pe.business_type,parent_shop_id:e.business_id}).select();if(pt)throw console.error("Database error:",pt),new Error(`Database error: ${pt.message}`);if(!ke||ke.length===0)throw new Error("No data returned from insert");const Ct=ke[0].business_id;if(tt){nt(!0);try{await yj(tt,Ct.toString(),e.user_id)}catch(tr){console.error("Error uploading image:",tr)}finally{nt(!1)}}He({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),Y(null),oe(!1),await mt()}catch(ke){console.error("Error adding business:",ke),g(ke instanceof Error?ke.message:"Failed to add business")}},rt=async ae=>{ae.preventDefault();try{const{error:ke}=await Oe.from("side_business_items").insert({business_id:parseInt(De.business_id),name:De.name,price:De.price?parseFloat(De.price):null,stock_qty:De.stock_qty?parseInt(De.stock_qty):null,notes:De.notes.trim()||null,parent_shop_id:e?.business_id});if(ke)throw ke;ut({business_id:"",name:"",price:"",stock_qty:"",notes:""}),P(!1),mt()}catch(ke){g(ke instanceof Error?ke.message:"Failed to add item")}},xt=async ae=>{ae.preventDefault();try{const{error:ke}=await Oe.from("side_business_sales").insert({item_id:parseInt(ht.item_id),quantity:ht.quantity,total_amount:parseFloat(ht.total_amount),payment_method:ht.payment_method,parent_shop_id:e?.business_id});if(ke)throw ke;At({item_id:"",quantity:1,total_amount:"",payment_method:"cash"}),xe(!1),mt()}catch(ke){g(ke instanceof Error?ke.message:"Failed to add sale")}},Qt=async ae=>{try{console.log("🗑️ Starting delete for sale:",ae);const{error:ke}=await Oe.from("side_business_sales").delete().eq("sale_id",ae);if(ke)throw console.error("❌ Error deleting sale:",ke),ke;console.log("✅ Sale deleted successfully"),M(null),mt()}catch(ke){console.error("💥 Delete sale failed:",ke),g(ke instanceof Error?ke.message:"Failed to delete sale")}},mr=async ae=>{try{console.log("🗑️ Starting delete for business:",ae);const{data:ke,error:pt}=await Oe.from("side_business_items").select("item_id").eq("business_id",ae);if(pt)throw console.error("❌ Error fetching items:",pt),pt;if(console.log("📦 Found items to delete:",ke?.length||0),ke&&ke.length>0){const at=ke.map(Rt=>Rt.item_id);console.log("🛒 Deleting sales for items:",at);const{error:kt}=await Oe.from("side_business_sales").delete().in("item_id",at);if(kt)throw console.error("❌ Error deleting sales:",kt),kt;console.log("✅ Sales deleted successfully")}console.log("📦 Deleting items for business:",ae);const{error:Ct}=await Oe.from("side_business_items").delete().eq("business_id",ae);if(Ct)throw console.error("❌ Error deleting items:",Ct),Ct;console.log("✅ Items deleted successfully"),console.log("🏢 Deleting business:",ae);const{error:tr}=await Oe.from("side_businesses").delete().eq("business_id",ae);if(tr)throw console.error("❌ Error deleting business:",tr),tr;console.log("✅ Business deleted successfully"),le(null),mt()}catch(ke){console.error("💥 Delete failed:",ke),g(ke instanceof Error?ke.message:"Failed to delete business")}},Mt=async ae=>{try{const ke=new Date,pt=new Date(ke.getFullYear(),ke.getMonth(),ke.getDate()),Ct=new Date(pt);Ct.setDate(pt.getDate()-pt.getDay());const tr=new Date(ke.getFullYear(),ke.getMonth(),1),{data:at}=await Oe.from("side_business_items").select("item_id, stock_qty").eq("business_id",ae),kt=at?.reduce(($t,jt)=>$t+(jt.stock_qty||0),0)||0,Rt=at?.map($t=>$t.item_id)||[];if(Rt.length===0){k({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}});return}const{data:yn}=await Oe.from("side_business_sales").select("total_amount").in("item_id",Rt).gte("date_time",pt.toISOString()),{data:wr}=await Oe.from("side_business_sales").select("total_amount").in("item_id",Rt).gte("date_time",Ct.toISOString()),{data:vn}=await Oe.from("side_business_sales").select("total_amount").in("item_id",Rt).gte("date_time",tr.toISOString());k({currentStock:kt,dailySales:{count:yn?.length||0,revenue:yn?.reduce(($t,jt)=>$t+jt.total_amount,0)||0},weeklySales:{count:wr?.length||0,revenue:wr?.reduce(($t,jt)=>$t+jt.total_amount,0)||0},monthlySales:{count:vn?.length||0,revenue:vn?.reduce(($t,jt)=>$t+jt.total_amount,0)||0}})}catch(ke){console.error("Error fetching business analytics:",ke),k({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}})}},ce=async ae=>{if(ae.preventDefault(),!(!X.item_id||!X.restock_quantity))try{const ke=X.current_stock+parseInt(X.restock_quantity),{error:pt}=await Oe.from("side_business_items").update({stock_qty:ke}).eq("item_id",X.item_id);if(pt)throw pt;ge({item_id:null,current_stock:0,restock_quantity:""}),W(!1),mt(),ee&&Mt(ee.business_id)}catch(ke){g(ke instanceof Error?ke.message:"Failed to restock item")}},$e=ae=>{ge({item_id:ae.item_id,current_stock:ae.stock_qty||0,restock_quantity:""}),W(!0)},ft=ae=>{te(ae),qe(!0)},Dt=async ae=>{if(ae.preventDefault(),!!Ce)try{const{error:ke}=await Oe.from("side_business_items").update({name:Ce.name,price:Ce.price,notes:Ce.notes}).eq("item_id",Ce.item_id);if(ke)throw ke;qe(!1),te(null),mt(),ee&&Mt(ee.business_id)}catch(ke){g(ke instanceof Error?ke.message:"Failed to update item")}},sr=ae=>{re(ae),ne(!0),Mt(ae.business_id)},Er=ae=>{switch(ae){case"rental":return N.statusBadgeRental;case"resale":return N.statusBadgeResale;case"service":return N.statusBadgeService;default:return N.statusBadgeGray}},br=ae=>{switch(ae){case"cash":return N.statusBadgeCash;case"card":return N.statusBadgeCard;case"mobile":return N.statusBadgeMobile;default:return N.statusBadgeGray}},er=a.filter(ae=>{const ke=y==="all"||ae.business_id.toString()===y,pt=_===""||ae.name.toLowerCase().includes(_.toLowerCase())||ae.side_businesses?.name.toLowerCase().includes(_.toLowerCase());return ke&&pt}).sort((ae,ke)=>{let pt,Ct;switch(A){case"name":pt=ae.name.toLowerCase(),Ct=ke.name.toLowerCase();break;case"price":pt=ae.price||0,Ct=ke.price||0;break;case"created_at":pt=new Date(ae.created_at),Ct=new Date(ke.created_at);break;default:return 0}return I==="asc"?pt-Ct:Ct-pt}),Cr=t.filter(ae=>{const ke=b==="all"||ae.business_type===b,pt=_===""||ae.name.toLowerCase().includes(_.toLowerCase())||ae.description?.toLowerCase().includes(_.toLowerCase());return ke&&pt}).sort((ae,ke)=>{let pt,Ct;switch(A){case"name":pt=ae.name.toLowerCase(),Ct=ke.name.toLowerCase();break;case"created_at":pt=new Date(ae.created_at),Ct=new Date(ke.created_at);break;default:return 0}return I==="asc"?pt-Ct:Ct-pt}),Ut=c.filter(ae=>{const ke=a.find(kt=>kt.item_id===ae.item_id)?.business_id,pt=y==="all"||ke?.toString()===y,Ct=t.find(kt=>kt.business_id===ke),tr=b==="all"||Ct?.business_type===b,at=_===""||ae.side_business_items?.name.toLowerCase().includes(_.toLowerCase())||ae.side_business_items?.side_businesses?.name.toLowerCase().includes(_.toLowerCase());return pt&&tr&&at}).sort((ae,ke)=>{const pt=new Date(ae.date_time),Ct=new Date(ke.date_time);return I==="asc"?pt.getTime()-Ct.getTime():Ct.getTime()-pt.getTime()}),ar=[...new Set(t.map(ae=>ae.business_type).filter(Boolean))];return f?o.jsx("div",{className:N.loadingStateContainer,children:o.jsxs("div",{className:N.loadingStateText,children:[o.jsx("i",{className:`fa-solid fa-spinner ${N.loadingStateSpinner}`}),"Loading side businesses..."]})}):p?o.jsx("div",{className:N.errorStateContainer,children:o.jsxs("div",{className:N.errorStateContent,children:[o.jsx("i",{className:`fa-solid fa-exclamation-triangle ${N.errorStateIcon}`}),o.jsx("h2",{className:N.errorStateTitle,children:"Error Loading Side Businesses"}),o.jsx("p",{className:N.errorStateText,children:p}),o.jsx("button",{className:N.errorStateRetryButton,onClick:mt,children:"Try Again"})]})}):o.jsxs("div",{className:N.sideBusinessesContainer,children:[o.jsxs("div",{className:N.pageHeader,children:[o.jsxs("h1",{className:N.pageTitle,children:[o.jsx("i",{className:"fa-solid fa-briefcase"}),"Side Businesses"]}),o.jsxs("button",{onClick:()=>oe(!0),className:N.primaryButton,children:[o.jsx("i",{className:"fa-solid fa-plus"}),"Add Business"]})]}),o.jsx(hE,{searchTerm:_,onSearchChange:S,searchPlaceholder:"Search businesses, items, or sales...",showSearchResults:!!_,searchResultsCount:er.length+Cr.length+Ut.length,onClearSearch:()=>S(""),filters:[{label:"Business",value:y,onChange:v,options:[{value:"all",label:"All Businesses"},...t.map(ae=>({value:ae.business_id.toString(),label:ae.name}))]},{label:"Type",value:b,onChange:w,options:[{value:"all",label:"All Types"},...ar.map(ae=>({value:ae,label:ae.charAt(0).toUpperCase()+ae.slice(1)}))]}],sortOptions:[{label:"Sort",value:A,onChange:ae=>D(ae),options:[{value:"created_at",label:"Date Created"},{value:"name",label:"Name"},{value:"price",label:"Price"}]}],onSortToggle:()=>G(I==="asc"?"desc":"asc"),sortOrder:I,hasActiveFilters:y!=="all"||b!=="all",onClearFilters:()=>{v("all"),w("all")}}),o.jsxs("div",{className:N.statisticsGrid,children:[o.jsx("div",{className:N.statisticsCard,children:o.jsxs("div",{className:N.statisticsCardContent,children:[o.jsxs("div",{className:N.statisticsInfo,children:[o.jsx("p",{className:N.statisticsLabel,children:"Total Businesses"}),o.jsx("p",{className:N.statisticsValue,children:Cr.length})]}),o.jsx("i",{className:`fas fa-briefcase ${N.statisticsIcon} ${N.statisticsIconPurple}`})]})}),o.jsx("div",{className:N.statisticsCard,children:o.jsxs("div",{className:N.statisticsCardContent,children:[o.jsxs("div",{className:N.statisticsInfo,children:[o.jsx("p",{className:N.statisticsLabel,children:"Total Items"}),o.jsx("p",{className:N.statisticsValue,children:er.length})]}),o.jsx("i",{className:`fas fa-box ${N.statisticsIcon} ${N.statisticsIconBlue}`})]})}),o.jsx("div",{className:N.statisticsCard,children:o.jsxs("div",{className:N.statisticsCardContent,children:[o.jsxs("div",{className:N.statisticsInfo,children:[o.jsx("p",{className:N.statisticsLabel,children:"Total Sales"}),o.jsx("p",{className:N.statisticsValue,children:Ut.length})]}),o.jsx("i",{className:`fas fa-chart-line ${N.statisticsIcon} ${N.statisticsIconGreen}`})]})}),o.jsx("div",{className:N.statisticsCard,children:o.jsxs("div",{className:N.statisticsCardContent,children:[o.jsxs("div",{className:N.statisticsInfo,children:[o.jsx("p",{className:N.statisticsLabel,children:"Revenue"}),o.jsxs("p",{className:N.statisticsValue,children:["€",Ut.reduce((ae,ke)=>ae+ke.total_amount,0).toFixed(2)]})]}),o.jsx("i",{className:`fas fa-euro-sign ${N.statisticsIcon} ${N.statisticsIconOrange}`})]})})]}),o.jsxs("div",{className:N.mainContentGrid,children:[o.jsxs("div",{className:N.contentPanel,children:[o.jsx("div",{className:N.contentPanelHeader,children:o.jsx("h2",{className:N.contentPanelTitle,children:"Businesses"})}),o.jsx("div",{className:N.contentPanelBody,children:Cr.length===0?o.jsxs("div",{className:N.emptyStateMessage,children:[o.jsx("i",{className:`fa-solid fa-briefcase ${N.emptyStateMessageIcon}`}),o.jsx("p",{className:N.emptyStateMessageText,children:"No businesses found. Add your first side business to get started!"})]}):o.jsx("div",{className:`${N.listContainer} ${N.listContainerDivided}`,children:Cr.map(ae=>o.jsx("div",{className:N.listItemCard,onClick:()=>sr(ae),children:o.jsxs("div",{className:N.listItemCardContent,children:[o.jsx("div",{className:N.listItemCardIcon,children:ae.image_url&&o.jsx("img",{src:ae.image_url,alt:ae.name,style:{width:"40px",height:"40px",borderRadius:"8px",objectFit:"cover"}})}),o.jsxs("div",{className:N.listItemCardMain,children:[o.jsx("h3",{className:N.listItemCardTitle,children:ae.name}),ae.description&&o.jsx("p",{className:N.listItemCardSubtitle,children:ae.description}),o.jsxs("div",{className:N.listItemCardMeta,children:[o.jsx("span",{className:`${N.statusBadge} ${Er(ae.business_type)}`,children:ae.business_type||"service"}),o.jsxs("span",{className:N.listItemCardCount,children:[a.filter(ke=>ke.business_id===ae.business_id).length," items"]})]})]}),o.jsx("div",{className:N.listItemCardActions,children:o.jsxs("button",{onClick:ke=>{ke.stopPropagation(),le(ae)},className:`${N.actionButton} ${N.actionButtonDanger}`,title:"Delete Business",children:[o.jsx("i",{className:`fas fa-trash ${N.actionButtonIcon}`}),"Delete"]})})]})},ae.business_id))})})]}),o.jsxs("div",{className:N.contentPanel,children:[o.jsxs("div",{className:N.contentPanelHeader,children:[o.jsx("h2",{className:N.contentPanelTitle,children:"Items"}),o.jsxs("button",{onClick:()=>P(!0),className:N.actionButton,style:{marginLeft:"auto"},children:[o.jsx("i",{className:`fas fa-plus ${N.actionButtonIcon}`}),"Add Item"]})]}),o.jsx("div",{className:N.contentPanelBody,children:er.length===0?o.jsxs("div",{className:N.emptyStateMessage,children:[o.jsx("i",{className:`fa-solid fa-box ${N.emptyStateMessageIcon}`}),o.jsx("p",{className:N.emptyStateMessageText,children:"No items found. Add items to your businesses!"})]}):o.jsx("div",{className:`${N.listContainer} ${N.listContainerDivided}`,children:er.map(ae=>o.jsx("div",{className:N.listItemCard,children:o.jsxs("div",{className:N.listItemCardContent,children:[o.jsxs("div",{className:N.listItemCardMain,children:[o.jsx("h3",{className:N.listItemCardTitle,children:ae.name}),o.jsx("p",{className:N.listItemCardSubtitle,children:ae.side_businesses?.name||"Unknown Business"}),o.jsxs("div",{className:N.listItemCardMeta,children:[ae.price?o.jsxs("span",{className:N.listItemCardPrice,children:["€",ae.price]}):o.jsx("span",{className:N.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),ae.stock_qty!==null&&o.jsxs("span",{className:N.listItemCardStock,children:["Stock: ",ae.stock_qty]}),t.find(ke=>ke.business_id===ae.business_id)?.business_type==="service"&&o.jsx("span",{className:`${N.statusBadge} ${N.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]})]}),o.jsx("div",{className:N.listItemCardActions,children:o.jsxs("button",{onClick:()=>{At(ke=>({...ke,item_id:ae.item_id.toString()})),xe(!0)},className:N.actionButton,children:[o.jsx("i",{className:`fas fa-plus ${N.actionButtonIcon}`}),"Sale"]})})]})},ae.item_id))})})]}),o.jsxs("div",{className:N.contentPanel,children:[o.jsx("div",{className:N.contentPanelHeader,children:o.jsx("h2",{className:N.contentPanelTitle,children:"Recent Sales"})}),o.jsx("div",{className:N.contentPanelBody,children:Ut.length===0?o.jsxs("div",{className:N.emptyStateMessage,children:[o.jsx("i",{className:`fa-solid fa-receipt ${N.emptyStateMessageIcon}`}),o.jsx("p",{className:N.emptyStateMessageText,children:"No sales recorded yet."})]}):o.jsx("div",{className:`${N.listContainer} ${N.listContainerDivided}`,children:Ut.map(ae=>o.jsx("div",{className:N.listItemCard,children:o.jsxs("div",{className:N.listItemCardContent,children:[o.jsxs("div",{className:N.listItemCardMain,children:[o.jsx("h3",{className:N.listItemCardTitle,children:ae.side_business_items?.name||"Unknown Item"}),o.jsx("p",{className:N.listItemCardSubtitle,children:ae.side_business_items?.side_businesses?.name||"Unknown Business"}),o.jsxs("p",{className:N.listItemCardTime,children:[new Date(ae.date_time).toLocaleDateString()," at ",new Date(ae.date_time).toLocaleTimeString()]}),o.jsxs("div",{className:N.listItemCardMeta,children:[o.jsxs("span",{className:N.listItemCardCount,children:["Qty: ",ae.quantity]}),o.jsxs("span",{className:N.listItemCardPrice,children:["€",ae.total_amount]}),o.jsx("span",{className:`${N.statusBadge} ${br(ae.payment_method)}`,children:ae.payment_method})]})]}),o.jsx("div",{className:N.listItemCardActions,children:o.jsxs("button",{onClick:ke=>{ke.stopPropagation(),M(ae)},className:`${N.actionButton} ${N.actionButtonDanger}`,title:"Delete Sale",children:[o.jsx("i",{className:`fas fa-trash ${N.actionButtonIcon}`}),"Delete"]})})]})},ae.sale_id))})})]})]}),Z&&o.jsx("div",{className:N.modalOverlay,children:o.jsxs("div",{className:N.modalDialog,children:[o.jsxs("div",{className:N.modalHeader,children:[o.jsx("h2",{className:N.modalDialogTitle,children:"Create New Business"}),o.jsx("button",{type:"button",onClick:()=>{He({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),oe(!1),g(null)},className:N.modalCloseButton,children:o.jsx("i",{className:"fas fa-times"})})]}),p&&o.jsxs("div",{className:N.errorMessage,children:[o.jsx("i",{className:"fas fa-exclamation-triangle"}),p]}),o.jsxs("form",{onSubmit:Ie,className:N.modalDialogForm,children:[o.jsxs("div",{className:N.formFieldGroup,children:[o.jsxs("label",{className:N.formFieldLabel,children:["Business Name ",o.jsx("span",{className:N.required,children:"*"})]}),o.jsx("input",{type:"text",required:!0,value:Pe.name,onChange:ae=>He(ke=>({...ke,name:ae.target.value})),className:N.formFieldInput,placeholder:"Enter business name",maxLength:100})]}),o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Description"}),o.jsx("textarea",{value:Pe.description,onChange:ae=>He(ke=>({...ke,description:ae.target.value})),className:N.formFieldTextarea,rows:3,placeholder:"Brief description of your business",maxLength:500}),o.jsx("small",{className:N.formFieldHelp,children:"Optional: Describe what your business does"})]}),o.jsxs("div",{className:N.formFieldGroup,children:[o.jsxs("label",{className:N.formFieldLabel,children:["Business Type ",o.jsx("span",{className:N.required,children:"*"})]}),o.jsxs("select",{value:Pe.business_type,onChange:ae=>He(ke=>({...ke,business_type:ae.target.value})),className:N.formFieldSelect,required:!0,children:[o.jsx("option",{value:"",children:"Select business type"}),o.jsx("option",{value:"service",children:"Service (Custom pricing per transaction)"}),o.jsx("option",{value:"rental",children:"Rental (Fixed pricing with stock)"}),o.jsx("option",{value:"resale",children:"Resale (Fixed pricing with stock)"})]}),o.jsxs("small",{className:N.formFieldHelp,children:[Pe.business_type==="service"&&"Services allow custom pricing for each transaction",Pe.business_type==="rental"&&"Rentals have fixed prices and track stock quantities",Pe.business_type==="resale"&&"Resale items have fixed prices and track stock quantities"]})]}),o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Business Image"}),o.jsx("input",{type:"file",accept:"image/*",onChange:ae=>{const ke=ae.target.files?.[0];Y(ke||null)},className:N.formFieldInput}),o.jsx("small",{className:N.formFieldHelp,children:"Optional: Upload an image for your business (max 5MB, will be compressed)"}),tt&&o.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#f0f0f0",borderRadius:"4px"},children:[o.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#7d8d86"}}),"Selected: ",tt.name]})]}),o.jsxs("div",{className:N.modalDialogActions,children:[o.jsx("button",{type:"button",onClick:()=>{He({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),Y(null),oe(!1),g(null)},className:`${N.standardButton} ${N.standardButtonSecondary}`,children:"Cancel"}),o.jsx("button",{type:"submit",disabled:!Pe.name.trim()||!Pe.business_type||Re,className:`${N.standardButton} ${N.standardButtonPrimary}`,children:Re?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-spinner fa-spin",style:{marginRight:"8px"}}),"Creating..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Create Business"]})})]})]})]})}),V&&o.jsx("div",{className:N.modalOverlay,children:o.jsxs("div",{className:N.modalDialog,children:[o.jsx("h2",{className:N.modalDialogTitle,children:"Add Item"}),o.jsxs("form",{onSubmit:rt,className:N.modalDialogForm,children:[o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Business"}),o.jsxs("select",{required:!0,value:De.business_id,onChange:ae=>ut(ke=>({...ke,business_id:ae.target.value})),className:N.formFieldSelect,children:[o.jsx("option",{value:"",children:"Select a business"}),t.map(ae=>o.jsxs("option",{value:ae.business_id,children:[ae.name," (",ae.business_type,")"]},ae.business_id))]})]}),o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Item Name"}),o.jsx("input",{type:"text",required:!0,value:De.name,onChange:ae=>ut(ke=>({...ke,name:ae.target.value})),className:N.formFieldInput,placeholder:"e.g., Haircut, Chair Rental, etc."})]}),De.business_id&&t.find(ae=>ae.business_id.toString()===De.business_id)?.business_type!=="service"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Price (€)"}),o.jsx("input",{type:"number",step:"0.01",value:De.price,onChange:ae=>ut(ke=>({...ke,price:ae.target.value})),className:N.formFieldInput,placeholder:"0.00"})]}),o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Stock Quantity"}),o.jsx("input",{type:"number",min:"0",value:De.stock_qty,onChange:ae=>ut(ke=>({...ke,stock_qty:ae.target.value})),className:N.formFieldInput,placeholder:"0"})]})]}),De.business_id&&t.find(ae=>ae.business_id.toString()===De.business_id)?.business_type==="service"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:N.formFieldGroup,children:o.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:0},children:[o.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"8px"}}),"Service items don't have fixed prices or stock. You'll enter the amount when recording a sale."]})}),o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Service Notes"}),o.jsx("textarea",{value:De.notes,onChange:ae=>ut(ke=>({...ke,notes:ae.target.value})),className:N.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details for this service...",maxLength:500}),o.jsx("small",{className:N.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details for this service"})]})]}),o.jsxs("div",{className:N.modalDialogActions,children:[o.jsx("button",{type:"button",onClick:()=>P(!1),className:`${N.standardButton} ${N.standardButtonSecondary}`,children:"Cancel"}),o.jsx("button",{type:"submit",className:`${N.standardButton} ${N.standardButtonSuccess}`,children:"Add Item"})]})]})]})}),K&&o.jsx("div",{className:N.modalOverlay,style:{zIndex:2e3},children:o.jsxs("div",{className:N.modalDialog,children:[o.jsx("h2",{className:N.modalDialogTitle,children:"Record Sale"}),o.jsxs("form",{onSubmit:xt,className:N.modalDialogForm,children:[o.jsxs("div",{className:N.formGroup,children:[o.jsx("label",{className:N.formLabel,children:"Item"}),o.jsxs("select",{required:!0,value:ht.item_id,onChange:ae=>At(ke=>({...ke,item_id:ae.target.value})),className:N.formFieldSelect,children:[o.jsx("option",{value:"",children:"Select an item"}),a.map(ae=>o.jsxs("option",{value:ae.item_id,children:[ae.name," - ",ae.side_businesses?.name,ae.side_businesses&&t.find(ke=>ke.name===ae.side_businesses?.name)?.business_type==="service"?" (Service - Custom Amount)":ae.price?` (€${ae.price})`:""]},ae.item_id))]})]}),o.jsxs("div",{className:N.formGroup,children:[o.jsx("label",{className:N.formLabel,children:"Quantity"}),o.jsx("input",{type:"number",min:"1",required:!0,value:ht.quantity,onChange:ae=>At(ke=>({...ke,quantity:parseInt(ae.target.value)})),className:N.formFieldInput})]}),o.jsxs("div",{className:N.formGroup,children:[o.jsx("label",{className:N.formLabel,children:"Total Amount (€)"}),o.jsx("input",{type:"number",step:"0.01",required:!0,value:ht.total_amount,onChange:ae=>At(ke=>({...ke,total_amount:ae.target.value})),className:N.formFieldInput,placeholder:"0.00"}),ht.item_id&&a.find(ae=>ae.item_id.toString()===ht.item_id)&&t.find(ae=>ae.name===a.find(ke=>ke.item_id.toString()===ht.item_id)?.side_businesses?.name)?.business_type==="service"&&o.jsxs("p",{style:{color:"#7d8d86",fontSize:"12px",margin:"4px 0 0 0"},children:[o.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"4px"}}),"Enter the custom amount for this service"]})]}),o.jsxs("div",{className:N.formGroup,children:[o.jsx("label",{className:N.formLabel,children:"Payment Method"}),o.jsxs("select",{value:ht.payment_method,onChange:ae=>At(ke=>({...ke,payment_method:ae.target.value})),className:N.formFieldSelect,children:[o.jsx("option",{value:"cash",children:"Cash"}),o.jsx("option",{value:"card",children:"Card"}),o.jsx("option",{value:"mobile",children:"Mobile"})]})]}),o.jsxs("div",{className:N.modalDialogActions,children:[o.jsx("button",{type:"button",onClick:()=>xe(!1),className:`${N.standardButton} ${N.standardButtonSecondary}`,children:"Cancel"}),o.jsx("button",{type:"submit",className:`${N.standardButton} ${N.standardButtonSuccess}`,children:"Record Sale"})]})]})]})}),_e&&ee&&o.jsx("div",{className:N.modalOverlay,children:o.jsxs("div",{className:N.modalDialog,style:{maxWidth:"600px"},children:[o.jsx("h2",{className:N.modalDialogTitle,children:"Business Details"}),o.jsxs("div",{className:N.businessDetailModalHeader,children:[o.jsx("div",{className:N.businessDetailModalIcon,children:ee.image_url?o.jsx("img",{src:ee.image_url,alt:ee.name,style:{width:"100%",height:"100%",borderRadius:"16px",objectFit:"cover"}}):o.jsx("i",{className:ee.icon||"fa-solid fa-briefcase"})}),o.jsxs("div",{className:N.businessDetailModalInfo,children:[o.jsx("h3",{className:N.businessDetailModalName,children:ee.name}),o.jsx("p",{className:N.businessDetailModalDescription,children:ee.description||"No description provided"}),o.jsxs("div",{className:N.businessDetailModalMeta,children:[o.jsx("span",{className:`${N.statusBadge} ${Er(ee.business_type)}`,children:ee.business_type||"service"}),o.jsxs("span",{className:N.businessDetailModalDate,children:["Created: ",new Date(ee.created_at).toLocaleDateString()]})]})]})]}),o.jsxs("div",{className:N.businessDetailModalStats,children:[o.jsx("div",{className:N.statisticsCard,children:o.jsxs("div",{className:N.statisticsCardContent,children:[o.jsxs("div",{className:N.statisticsInfo,children:[o.jsx("p",{className:N.statisticsLabel,children:"Total Items"}),o.jsx("p",{className:N.statisticsValue,children:a.filter(ae=>ae.business_id===ee.business_id).length})]}),o.jsx("i",{className:`fas fa-box ${N.statisticsIcon} ${N.statisticsIconBlue}`})]})}),o.jsx("div",{className:N.statisticsCard,children:o.jsxs("div",{className:N.statisticsCardContent,children:[o.jsxs("div",{className:N.statisticsInfo,children:[o.jsx("p",{className:N.statisticsLabel,children:"Current Stock"}),o.jsx("p",{className:N.statisticsValue,children:Q?.currentStock||0})]}),o.jsx("i",{className:`fas fa-warehouse ${N.statisticsIcon} ${N.statisticsIconOrange}`})]})})]}),o.jsxs("div",{className:N.businessAnalyticsSection,children:[o.jsx("h4",{className:N.analyticsSectionTitle,children:"Sales Analytics"}),o.jsxs("div",{className:N.analyticsGrid,children:[o.jsxs("div",{className:N.analyticsCard,children:[o.jsxs("div",{className:N.analyticsCardHeader,children:[o.jsx("i",{className:`fas fa-calendar-day ${N.analyticsIcon} ${N.analyticsIconBlue}`}),o.jsx("span",{className:N.analyticsPeriod,children:"Today"})]}),o.jsxs("div",{className:N.analyticsCardContent,children:[o.jsxs("div",{className:N.analyticsMetric,children:[o.jsx("span",{className:N.analyticsLabel,children:"Sales"}),o.jsx("span",{className:N.analyticsValue,children:Q?.dailySales.count||0})]}),o.jsxs("div",{className:N.analyticsMetric,children:[o.jsx("span",{className:N.analyticsLabel,children:"Revenue"}),o.jsxs("span",{className:N.analyticsValue,children:["€",(Q?.dailySales.revenue||0).toFixed(2)]})]})]})]}),o.jsxs("div",{className:N.analyticsCard,children:[o.jsxs("div",{className:N.analyticsCardHeader,children:[o.jsx("i",{className:`fas fa-calendar-week ${N.analyticsIcon} ${N.analyticsIconGreen}`}),o.jsx("span",{className:N.analyticsPeriod,children:"This Week"})]}),o.jsxs("div",{className:N.analyticsCardContent,children:[o.jsxs("div",{className:N.analyticsMetric,children:[o.jsx("span",{className:N.analyticsLabel,children:"Sales"}),o.jsx("span",{className:N.analyticsValue,children:Q?.weeklySales.count||0})]}),o.jsxs("div",{className:N.analyticsMetric,children:[o.jsx("span",{className:N.analyticsLabel,children:"Revenue"}),o.jsxs("span",{className:N.analyticsValue,children:["€",(Q?.weeklySales.revenue||0).toFixed(2)]})]})]})]}),o.jsxs("div",{className:N.analyticsCard,children:[o.jsxs("div",{className:N.analyticsCardHeader,children:[o.jsx("i",{className:`fas fa-calendar-alt ${N.analyticsIcon} ${N.analyticsIconPurple}`}),o.jsx("span",{className:N.analyticsPeriod,children:"This Month"})]}),o.jsxs("div",{className:N.analyticsCardContent,children:[o.jsxs("div",{className:N.analyticsMetric,children:[o.jsx("span",{className:N.analyticsLabel,children:"Sales"}),o.jsx("span",{className:N.analyticsValue,children:Q?.monthlySales.count||0})]}),o.jsxs("div",{className:N.analyticsMetric,children:[o.jsx("span",{className:N.analyticsLabel,children:"Revenue"}),o.jsxs("span",{className:N.analyticsValue,children:["€",(Q?.monthlySales.revenue||0).toFixed(2)]})]})]})]})]})]}),o.jsxs("div",{className:N.businessDetailModalItems,children:[o.jsxs("div",{className:N.itemsSectionHeader,children:[o.jsx("h4",{children:"Items in this business:"}),o.jsxs("button",{onClick:()=>P(!0),className:N.restockButton,title:"Add new item",children:[o.jsx("i",{className:"fas fa-plus"}),"Add Item"]})]}),a.filter(ae=>ae.business_id===ee.business_id).length===0?o.jsx("p",{className:N.noItemsMessage,children:"No items added yet."}):o.jsx("div",{className:N.listContainer,children:a.filter(ae=>ae.business_id===ee.business_id).map(ae=>o.jsx("div",{className:N.listItemCard,children:o.jsxs("div",{className:N.listItemCardContent,children:[o.jsxs("div",{className:N.listItemCardMain,children:[o.jsx("h4",{className:N.listItemCardTitle,children:ae.name}),o.jsxs("div",{className:N.listItemCardMeta,children:[ae.price?o.jsxs("span",{className:N.listItemCardPrice,children:["€",ae.price]}):o.jsx("span",{className:N.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),ae.stock_qty!==null&&o.jsxs("span",{className:N.listItemCardStock,children:["Stock: ",ae.stock_qty]}),ee?.business_type==="service"&&o.jsx("span",{className:`${N.statusBadge} ${N.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]}),ae.notes&&o.jsxs("div",{className:N.listItemCardNotes,children:[o.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"6px",color:"#6b7280"}}),o.jsx("span",{style:{fontSize:"12px",color:"#6b7280",fontStyle:"italic"},children:ae.notes.length>100?`${ae.notes.substring(0,100)}...`:ae.notes})]})]}),o.jsxs("div",{className:N.listItemCardActions,children:[o.jsxs("button",{onClick:()=>ft(ae),className:`${N.actionButton} ${N.editActionButton}`,title:"Edit item",children:[o.jsx("i",{className:`fas fa-edit ${N.actionButtonIcon}`}),"Edit"]}),ae.stock_qty!==null&&o.jsxs("button",{onClick:()=>$e(ae),className:`${N.actionButton} ${N.restockActionButton}`,title:"Restock item",children:[o.jsx("i",{className:`fas fa-boxes-stacked ${N.actionButtonIcon}`}),"Restock"]}),o.jsxs("button",{onClick:()=>{At(ke=>({...ke,item_id:ae.item_id.toString()})),xe(!0)},className:N.actionButton,title:"Record sale",children:[o.jsx("i",{className:`fas fa-plus ${N.actionButtonIcon}`}),"Sale"]})]})]})},ae.item_id))})]}),o.jsxs("div",{className:N.modalDialogActions,children:[o.jsx("button",{type:"button",onClick:()=>ne(!1),className:`${N.standardButton} ${N.standardButtonSecondary}`,children:"Close"}),o.jsx("button",{type:"button",onClick:()=>{ne(!1),le(ee)},className:`${N.standardButton} ${N.standardButtonDanger}`,children:"Delete Business"})]})]})}),ve&&o.jsx("div",{className:N.modalOverlay,children:o.jsxs("div",{className:N.modalDialog,children:[o.jsx("h2",{className:N.modalDialogTitle,children:"Delete Business"}),o.jsxs("p",{className:N.deleteConfirmationWarning,children:["Are you sure you want to delete ",o.jsx("strong",{children:ve.name}),"?"]}),o.jsx("p",{className:N.deleteConfirmationWarningText,children:"This will permanently delete the business, all its items, and all related sales records. This action cannot be undone."}),o.jsxs("div",{className:N.modalDialogActions,children:[o.jsx("button",{type:"button",onClick:()=>le(null),className:`${N.standardButton} ${N.standardButtonSecondary}`,children:"Cancel"}),o.jsx("button",{type:"button",onClick:()=>mr(ve.business_id),className:`${N.standardButton} ${N.standardButtonDanger}`,children:"Delete Business"})]})]})}),Ae&&o.jsx("div",{className:N.modalOverlay,children:o.jsxs("div",{className:N.modalDialog,children:[o.jsx("h2",{className:N.modalDialogTitle,children:"Delete Sale"}),o.jsx("p",{className:N.deleteConfirmationWarning,children:"Are you sure you want to delete this sale?"}),o.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"8px",margin:"16px 0",border:"1px solid #e9ecef"},children:[o.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:Ae.side_business_items?.name||"Unknown Item"}),o.jsx("p",{style:{margin:"0 0 4px 0",color:"#6c757d",fontSize:"14px"},children:Ae.side_business_items?.side_businesses?.name||"Unknown Business"}),o.jsxs("p",{style:{margin:"0 0 4px 0",color:"#6c757d",fontSize:"14px"},children:["Quantity: ",Ae.quantity," • Total: €",Ae.total_amount]}),o.jsxs("p",{style:{margin:"0",color:"#6c757d",fontSize:"14px"},children:[new Date(Ae.date_time).toLocaleDateString()," at ",new Date(Ae.date_time).toLocaleTimeString()]})]}),o.jsx("p",{className:N.deleteConfirmationWarningText,children:"This will permanently delete the sale record. This action cannot be undone."}),o.jsxs("div",{className:N.modalDialogActions,children:[o.jsx("button",{type:"button",onClick:()=>M(null),className:`${N.standardButton} ${N.standardButtonSecondary}`,children:"Cancel"}),o.jsx("button",{type:"button",onClick:()=>Qt(Ae.sale_id),className:`${N.standardButton} ${N.standardButtonDanger}`,children:"Delete Sale"})]})]})}),L&&X.item_id&&o.jsx("div",{className:N.modalOverlay,style:{zIndex:2e3},children:o.jsxs("div",{className:N.modalDialog,children:[o.jsx("h2",{className:N.modalDialogTitle,children:"Restock Item"}),o.jsxs("div",{className:N.restockInfo,children:[o.jsx("p",{className:N.restockItemName,children:a.find(ae=>ae.item_id===X.item_id)?.name}),o.jsxs("p",{className:N.restockCurrentStock,children:["Current Stock: ",o.jsx("strong",{children:X.current_stock})]})]}),o.jsxs("form",{onSubmit:ce,className:N.modalDialogForm,children:[o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Restock Quantity"}),o.jsx("input",{type:"number",min:"1",required:!0,value:X.restock_quantity,onChange:ae=>ge(ke=>({...ke,restock_quantity:ae.target.value})),className:N.formFieldInput,placeholder:"Enter quantity to add"})]}),o.jsx("div",{className:N.restockPreview,children:o.jsxs("p",{className:N.restockPreviewText,children:["New stock will be: ",o.jsx("strong",{children:X.current_stock+(parseInt(X.restock_quantity)||0)})]})}),o.jsxs("div",{className:N.modalDialogActions,children:[o.jsx("button",{type:"button",onClick:()=>W(!1),className:`${N.standardButton} ${N.standardButtonSecondary}`,children:"Cancel"}),o.jsxs("button",{type:"submit",className:`${N.standardButton} ${N.standardButtonSuccess}`,children:[o.jsx("i",{className:"fas fa-boxes-stacked",style:{marginRight:"8px"}}),"Restock Item"]})]})]})]})}),Me&&Ce&&o.jsx("div",{className:N.modalOverlay,style:{zIndex:2e3},children:o.jsxs("div",{className:N.modalDialog,children:[o.jsx("h2",{className:N.modalDialogTitle,children:"Edit Item"}),o.jsxs("form",{onSubmit:Dt,className:N.modalDialogForm,children:[o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Item Name"}),o.jsx("input",{type:"text",required:!0,value:Ce.name,onChange:ae=>te(ke=>ke?{...ke,name:ae.target.value}:null),className:N.formFieldInput,placeholder:"Enter item name"})]}),o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Price (€)"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:Ce.price||"",onChange:ae=>te(ke=>ke?{...ke,price:ae.target.value?parseFloat(ae.target.value):null}:null),className:N.formFieldInput,placeholder:"Enter price (leave empty for custom pricing)"}),o.jsx("small",{className:N.formFieldHelp,children:"Leave empty for service items with custom pricing"})]}),o.jsxs("div",{className:N.formFieldGroup,children:[o.jsx("label",{className:N.formFieldLabel,children:"Notes"}),o.jsx("textarea",{value:Ce.notes||"",onChange:ae=>te(ke=>ke?{...ke,notes:ae.target.value}:null),className:N.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details...",maxLength:500}),o.jsx("small",{className:N.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details"})]}),o.jsxs("div",{className:N.modalDialogActions,children:[o.jsx("button",{type:"button",onClick:()=>qe(!1),className:`${N.standardButton} ${N.standardButtonSecondary}`,children:"Cancel"}),o.jsxs("button",{type:"submit",className:`${N.standardButton} ${N.standardButtonPrimary}`,children:[o.jsx("i",{className:"fas fa-save",style:{marginRight:"8px"}}),"Update Item"]})]})]})]})})]})},bj=()=>{const{data:e,isLoading:t,error:r}=rd(),a=w0(),i=Km({mutationFn:async u=>{const{error:f}=await Oe.from("sales").update({partial_payment:!1,notes:null}).eq("sale_id",u);if(f)throw f},onSuccess:()=>{a.invalidateQueries({queryKey:["salesData"]})}}),c=Km({mutationFn:async u=>{const{error:f}=await Oe.from("sale_items").delete().eq("sale_id",u);if(f)throw f;const{error:h}=await Oe.from("sales").delete().eq("sale_id",u);if(h)throw h},onSuccess:()=>{a.invalidateQueries({queryKey:["salesData"]})}});return{transactions:e?.sales||[],loading:t,error:r?.message||null,fetchTransactions:()=>a.invalidateQueries({queryKey:["salesData"]}),deleteTransaction:c.mutateAsync,resolvePartialPayment:i.mutateAsync}},Rh=({children:e,maxWidth:t="1400px"})=>o.jsx("div",{style:{minHeight:"100vh",background:"#f8fafc",fontFamily:"Poppins, sans-serif",padding:"20px"},children:o.jsx("div",{style:{maxWidth:t,margin:"0 auto",background:"#ffffff",borderRadius:"12px",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:e})}),_j=({title:e,subtitle:t,icon:r,children:a})=>o.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:a?"16px":"0"},children:[o.jsxs("div",{children:[o.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[r&&o.jsx("i",{className:r,style:{marginRight:"12px",color:"#7d8d86"}}),e]}),t&&o.jsx("p",{style:{fontSize:"16px",color:"#6b7280",margin:"0"},children:t})]}),a]})}),uv=({children:e,className:t="",style:r={},padding:a="md",background:i="white",hover:c=!1})=>{const u={borderRadius:"12px",border:"1px solid #e5e7eb",transition:c?"all 0.2s ease":"none",...r},f={white:{background:"#ffffff"},gray:{background:"#f9fafb"}},h={sm:{padding:"12px"},md:{padding:"20px"},lg:{padding:"24px"}},p={...u,...f[i],...h[a]};return o.jsx("div",{className:t,style:p,onMouseEnter:g=>{c&&(g.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",g.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:g=>{c&&(g.currentTarget.style.boxShadow="none",g.currentTarget.style.transform="translateY(0)")},children:e})},Sj=({searchTerm:e,setSearchTerm:t,paymentFilter:r,setPaymentFilter:a,dateFilter:i,setDateFilter:c,selectedDate:u,showCalendar:f,setShowCalendar:h,itemsPerPage:p,setItemsPerPage:g,onCalendarDateSelect:y,generateCalendarDays:v,calendarDate:b,setCalendarDate:w,partialPaymentFilter:_,setPartialPaymentFilter:S})=>o.jsxs(uv,{background:"gray",padding:"md",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",alignItems:"end"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Search Transactions"}),o.jsx("input",{type:"text",placeholder:"Search by ID, customer, cashier...",value:e,onChange:A=>t(A.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Method"}),o.jsxs("select",{value:r,onChange:A=>a(A.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[o.jsx("option",{value:"all",children:"All Methods"}),o.jsx("option",{value:"cash",children:"Cash"}),o.jsx("option",{value:"card",children:"Card"}),o.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Type"}),o.jsxs("select",{value:_,onChange:A=>S(A.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[o.jsx("option",{value:"all",children:"All Payments"}),o.jsx("option",{value:"full",children:"Full Payments"}),o.jsx("option",{value:"partial",children:"Partial Payments"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Date Range"}),o.jsxs("select",{value:i,onChange:A=>c(A.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[o.jsx("option",{value:"all",children:"All Time"}),o.jsx("option",{value:"today",children:"Today"}),o.jsx("option",{value:"week",children:"Last 7 Days"}),o.jsx("option",{value:"month",children:"Last 30 Days"}),o.jsx("option",{value:"custom",children:"Custom Date"})]})]}),i==="custom"&&o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Select Date"}),o.jsx("button",{onClick:()=>h(!f),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff",cursor:"pointer",textAlign:"left"},children:u?new Date(u).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Select a date"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Items Per Page"}),o.jsxs("select",{value:p,onChange:A=>g(Number(A.target.value)),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[o.jsx("option",{value:10,children:"10"}),o.jsx("option",{value:25,children:"25"}),o.jsx("option",{value:50,children:"50"}),o.jsx("option",{value:100,children:"100"})]})]})]}),f&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[o.jsx("button",{onClick:()=>w(new Date(b.getFullYear(),b.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:o.jsx("i",{className:"fa-solid fa-chevron-left"})}),o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:b.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),o.jsx("button",{onClick:()=>w(new Date(b.getFullYear(),b.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:o.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(A=>o.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:A},A))}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:v().map((A,D)=>{const I=A.getMonth()===b.getMonth(),G=A.toDateString()===new Date().toDateString(),Z=u&&A.toDateString()===new Date(u).toDateString();return o.jsx("button",{onClick:()=>y(A),style:{background:Z?"#7d8d86":"transparent",color:Z?"#f1f0e4":I?"#3e3f29":"#bca88d",border:G?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:I?1:.5},children:A.getDate()},D)})}),o.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:o.jsx("button",{onClick:()=>y(new Date),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer"},children:"Today"})})]})})]}),Il=({children:e,onClick:t,type:r="button",variant:a="primary",size:i="md",disabled:c=!1,className:u="",style:f={}})=>{const h={border:"none",borderRadius:"6px",cursor:c?"not-allowed":"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500",...f},p={primary:{background:"#7d8d86",color:"#ffffff"},secondary:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db"},danger:{background:"#3e3f29",color:"#f1f0e4"},success:{background:"#10b981",color:"#ffffff"}},g={primary:{background:"#6a7a73"},secondary:{background:"#e5e7eb"},danger:{background:"#2a2b1f"},success:{background:"#059669"}},y={sm:{padding:"6px 12px",fontSize:"12px"},md:{padding:"8px 16px",fontSize:"14px"},lg:{padding:"12px 24px",fontSize:"16px"}},v={...h,...p[a],...y[i],opacity:c?.6:1};return o.jsx("button",{type:r,onClick:t,disabled:c,className:u,style:v,onMouseEnter:b=>{c||Object.assign(b.currentTarget.style,g[a])},onMouseLeave:b=>{c||Object.assign(b.currentTarget.style,p[a])},children:e})},wj=({transaction:e,onTransactionClick:t,onDeleteTransaction:r,onResolvePartialPayment:a})=>{const i=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),c=f=>new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),u=f=>{switch(f.toLowerCase()){case"cash":return"fa-solid fa-money-bill";case"card":return"fa-solid fa-credit-card";case"mobile_money":return"fa-solid fa-mobile";default:return"fa-solid fa-money-bill"}};return o.jsxs("div",{className:"transaction-card",onClick:()=>t(e.sale_id),style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",background:e.partial_payment?"#fef2f2":"#ffffff",borderRadius:"8px",border:e.partial_payment?"2px solid #dc2626":"2px solid #374151",cursor:"pointer",transition:"all 0.2s ease",position:"relative",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",marginBottom:"12px"},onMouseEnter:f=>{const h=f.currentTarget;h.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",h.style.transform="translateY(-2px)",h.style.border=e.partial_payment?"2px solid #dc2626":"2px solid #374151"},onMouseLeave:f=>{const h=f.currentTarget;h.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.15)",h.style.transform="translateY(0)",h.style.border=e.partial_payment?"2px solid #dc2626":"2px solid #374151"},children:[o.jsxs("div",{style:{width:"60px",textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#7d8d86",background:"#f3f4f6",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:["#",e.sale_id.toString().slice(-6)]}),e.partial_payment&&o.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"#ffffff",background:"#dc2626",padding:"2px 6px",borderRadius:"3px",marginTop:"4px",display:"inline-block"},children:"PARTIAL"})]}),o.jsx("div",{style:{minWidth:"140px",fontSize:"14px",color:"#6b7280"},children:c(e.datetime)}),o.jsx("div",{style:{flex:1,minWidth:"120px",fontSize:"14px",color:"#374151",fontWeight:"500"},children:e.customer_name}),o.jsx("div",{style:{minWidth:"100px",fontSize:"14px",color:"#6b7280"},children:e.cashier_name}),o.jsxs("div",{style:{minWidth:"120px",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"#374151"},children:[o.jsx("i",{className:u(e.payment_method),style:{color:"#7d8d86"}}),o.jsx("span",{style:{textTransform:"capitalize"},children:e.payment_method.replace("_"," ")})]}),o.jsx("div",{style:{minWidth:"120px",textAlign:"right",fontSize:"16px",fontWeight:"600",color:e.partial_payment?"#dc2626":"#059669"},children:e.partial_payment?o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"14px",color:"#dc2626"},children:["Paid: ",i(e.partial_amount||0)]}),o.jsxs("div",{style:{fontSize:"12px",color:"#dc2626"},children:["Owed: ",i(e.remaining_amount||0)]})]}):i(e.total_amount)}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.partial_payment&&a&&o.jsxs(Il,{variant:"primary",size:"sm",onClick:f=>{f.stopPropagation(),a(e.sale_id)},children:[o.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px"}}),"Resolve"]}),o.jsxs(Il,{variant:"danger",size:"sm",onClick:f=>{f.stopPropagation(),r(e.sale_id)},children:[o.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"10px"}}),"Delete"]}),o.jsx("div",{style:{color:"#7d8d86"},children:o.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]})},Tj=({currentPage:e,totalPages:t,onPageChange:r,startIndex:a,endIndex:i,totalItems:c})=>{if(t<=1)return null;const u=()=>{const f=[];if(t<=5)for(let p=1;p<=t;p++)f.push(p);else if(e<=3){for(let p=1;p<=4;p++)f.push(p);f.push("..."),f.push(t)}else if(e>=t-2){f.push(1),f.push("...");for(let p=t-3;p<=t;p++)f.push(p)}else{f.push(1),f.push("...");for(let p=e-1;p<=e+1;p++)f.push(p);f.push("..."),f.push(t)}return f};return o.jsxs("div",{style:{background:"#f9fafb",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[o.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("i",{className:"fa-solid fa-list"}),o.jsxs("span",{children:["Showing ",a+1,"-",Math.min(i,c)," of ",c," transactions"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsxs(Il,{variant:"secondary",size:"sm",onClick:()=>r(e-1),disabled:e===1,children:[o.jsx("i",{className:"fa-solid fa-chevron-left"}),"Previous"]}),o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:u().map((f,h)=>o.jsx(dy.Fragment,{children:f==="..."?o.jsx("span",{style:{padding:"8px 12px",color:"#6b7280",fontSize:"14px"},children:"..."}):o.jsx(Il,{variant:e===f?"primary":"secondary",size:"sm",onClick:()=>r(f),style:{minWidth:"40px"},children:f})},h))}),o.jsxs(Il,{variant:"secondary",size:"sm",onClick:()=>r(e+1),disabled:e===t,children:["Next",o.jsx("i",{className:"fa-solid fa-chevron-right"})]})]})]})},Ej=({isOpen:e,onClose:t,selectedDate:r,onDateSelect:a,onTodaySelect:i,calendarDate:c,onCalendarDateChange:u})=>{const f=(h,p)=>{const g=new Date(h,p,1),y=new Date(g);y.setDate(y.getDate()-g.getDay());const v=[],b=new Date(y);for(let w=0;w<42;w++)v.push(new Date(b)),b.setDate(b.getDate()+1);return v};return e?o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[o.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},children:c.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:()=>u(new Date(c.getFullYear(),c.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:o.jsx("i",{className:"fa-solid fa-chevron-left"})}),o.jsx("button",{onClick:()=>u(new Date(c.getFullYear(),c.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:o.jsx("i",{className:"fa-solid fa-chevron-right"})}),o.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"20px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:"×"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>o.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:h},h)),f(c.getFullYear(),c.getMonth()).map((h,p)=>{const g=h.getMonth()===c.getMonth(),y=new Date,v=new Date(y.getFullYear(),y.getMonth(),y.getDate()),b=new Date(h.getFullYear(),h.getMonth(),h.getDate()),w=new Date(r.getFullYear(),r.getMonth(),r.getDate()),_=b.getTime()===v.getTime(),S=b.getTime()===w.getTime();return o.jsx("button",{onClick:()=>a(h),style:{background:S?"#7d8d86":"transparent",color:S?"#ffffff":g?"#1f2937":"#9ca3af",border:_?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:g?1:.5},onMouseEnter:A=>{if(!S){const D=A.currentTarget;D.style.background="#f3f4f6",D.style.color="#1f2937"}},onMouseLeave:A=>{if(!S){const D=A.currentTarget;D.style.background="transparent",D.style.color=g?"#1f2937":"#9ca3af"}},children:h.getDate()},p)})]}),o.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:o.jsx("button",{onClick:i,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#6a7a73"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="#7d8d86"},children:"Today"})})]})}):null},kj=()=>{const e=Fs(),{user:t}=An(),{transactions:r,loading:a,error:i,deleteTransaction:c,resolvePartialPayment:u}=bj(),[f,h]=E.useState(""),[p,g]=E.useState("all"),[y,v]=E.useState("all"),[b,w]=E.useState(null),[_,S]=E.useState("all"),[A,D]=E.useState(!1),[I,G]=E.useState(new Date),[Z,oe]=E.useState(()=>{const Ce=new Date;return new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate())}),[V,P]=E.useState(1),[z,ie]=E.useState(25),[K]=E.useState("datetime"),[xe]=E.useState("desc"),ee=Ce=>Ce.filter(te=>{const Pe=!f||te.sale_id.toString().includes(f)||te.customer_name?.toLowerCase().includes(f.toLowerCase())||te.cashier_name?.toLowerCase().includes(f.toLowerCase()),He=p==="all"||te.payment_method===p,tt=()=>_==="all"?!0:_==="partial"?te.partial_payment===!0:_==="full"?!te.partial_payment:!0,Y=()=>{if(b){const ht=new Date(te.datetime),At=new Date(ht.getFullYear(),ht.getMonth(),ht.getDate()),[mt,Ie,rt]=b.split("-").map(Number),xt=new Date(mt,Ie-1,rt);return At.getTime()===xt.getTime()}if(y==="all")return!0;const Re=new Date,nt=new Date(te.datetime),De=new Date(Re.getFullYear(),Re.getMonth(),Re.getDate()),ut=new Date(nt.getFullYear(),nt.getMonth(),nt.getDate());switch(y){case"today":return ut.getTime()===De.getTime();case"week":const ht=new Date(Re.getTime()-10080*60*1e3);return nt>=ht;case"month":const At=new Date(Re.getTime()-720*60*60*1e3);return nt>=At;default:return!0}};return Pe&&He&&tt()&&Y()}),re=Ce=>[...Ce].sort((te,Pe)=>{let He=te[K],tt=Pe[K];return K==="datetime"&&(He=new Date(He).getTime(),tt=new Date(tt).getTime()),xe==="asc"?He>tt?1:-1:He<tt?1:-1}),_e=ee(r),ne=re(_e),ve=Math.ceil(ne.length/z),le=(V-1)*z,Ae=le+z,M=ne.slice(le,Ae),Q=()=>{const Ce=I.getFullYear(),te=I.getMonth(),Pe=new Date(Ce,te,1),He=new Date(Pe);He.setDate(He.getDate()-Pe.getDay());const tt=[];for(let Y=0;Y<42;Y++){const Re=new Date(He);Re.setDate(He.getDate()+Y),tt.push(Re)}return tt},k=Ce=>{const te=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate());oe(te);const Pe=te.getFullYear(),He=String(te.getMonth()+1).padStart(2,"0"),tt=String(te.getDate()).padStart(2,"0"),Y=`${Pe}-${He}-${tt}`;w(Y),v("custom"),D(!1)},L=()=>{const Ce=new Date,te=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate());oe(te);const Pe=te.getFullYear(),He=String(te.getMonth()+1).padStart(2,"0"),tt=String(te.getDate()).padStart(2,"0"),Y=`${Pe}-${He}-${tt}`;w(Y),v("custom"),D(!1)},W=Ce=>{e(`/transaction/${Ce}`)},X=async Ce=>{window.confirm("Are you sure you want to delete this transaction? This action cannot be undone and will restore the stock for all items in this transaction.")&&await c(Ce)&&alert("Transaction deleted successfully!")},ge=async Ce=>{window.confirm("Are you sure you want to mark this partial payment as resolved? This will update the transaction to show it as fully paid.")&&await u(Ce)&&alert("Partial payment resolved successfully!")},Me=Ce=>{P(Ce),window.scrollTo({top:0,behavior:"smooth"})},qe=Ce=>{ie(Ce),P(1)};return E.useEffect(()=>{P(1)},[f,p,y,b,K,xe]),a?o.jsx(Rh,{children:o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:o.jsxs("div",{style:{fontSize:"20px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transactions..."]})})}):i?o.jsx(Rh,{children:o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:o.jsxs("div",{style:{fontSize:"18px",color:"#ef4444",textAlign:"center"},children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"12px",display:"block"}}),i]})})}):o.jsxs(Rh,{children:[o.jsx(_j,{title:"Transactions",subtitle:"View and manage all sales transactions",icon:"fa-solid fa-receipt",children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[o.jsxs("div",{onClick:()=>D(!0),style:{background:"#3e3f29",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[o.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),o.jsx("span",{style:{color:"#bca88d"},children:Z.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#1a1a1a",fontSize:"14px",flexWrap:"wrap"},children:[o.jsx("i",{className:"fa-solid fa-receipt"}),o.jsxs("span",{children:["Showing ",le+1,"-",Math.min(Ae,ne.length)," of ",ne.length," transactions",b&&o.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","on ",new Date(b).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),y!=="all"&&!b&&o.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","(",y==="today"?"Today":y==="week"?"Last 7 days":y==="month"?"Last 30 days":y,")"]})]})]})]})}),o.jsxs("div",{style:{padding:"24px 32px",flex:1},children:[o.jsx(Sj,{searchTerm:f,setSearchTerm:h,paymentFilter:p,setPaymentFilter:g,dateFilter:y,setDateFilter:v,selectedDate:b,showCalendar:A,setShowCalendar:D,itemsPerPage:z,setItemsPerPage:qe,onCalendarDateSelect:k,generateCalendarDays:Q,calendarDate:I,setCalendarDate:G,partialPaymentFilter:_,setPartialPaymentFilter:S}),o.jsx(uv,{children:M.length>0?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:M.map(Ce=>o.jsx(wj,{transaction:Ce,onTransactionClick:W,onDeleteTransaction:X,onResolvePartialPayment:ge},Ce.sale_id))}):o.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[o.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",display:"block",color:"#d1d5db"}}),o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",margin:"0 0 8px 0"},children:"No transactions found"}),o.jsx("p",{style:{fontSize:"14px",margin:0},children:f||p!=="all"||_!=="all"||y!=="all"||Z?"Try adjusting your filters to see more results.":"No transactions have been recorded yet."})]})}),o.jsx(Tj,{currentPage:V,totalPages:ve,onPageChange:Me,startIndex:le,endIndex:Ae,totalItems:ne.length}),o.jsx(Ej,{isOpen:A,onClose:()=>D(!1),selectedDate:Z,onDateSelect:k,onTodaySelect:L,calendarDate:I,onCalendarDateChange:G})]})]})},jj=()=>{const{transactionId:e}=OS(),t=Fs(),[r,a]=E.useState(null),[i,c]=E.useState([]),[u,f]=E.useState(!0),[h,p]=E.useState(!1),[g,y]=E.useState(!1),[v,b]=E.useState({payment_method:"",customer_id:null,notes:""}),[w,_]=E.useState([]),[S,A]=E.useState({});E.useEffect(()=>{e&&(D(),I())},[e]);const D=async()=>{try{f(!0);const re=parseInt(e?.replace("TXN-","")||"0");if(!re){console.error("Invalid transaction ID"),t("/sales");return}const{data:_e,error:ne}=await Oe.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",re).single();if(ne){console.error("Error fetching transaction:",ne),t("/sales");return}const ve={..._e,customer_name:_e.customers?.name||null,cashier_name:_e.users?.username||null};a(ve);const{data:le,error:Ae}=await Oe.from("sale_items").select(`
          *,
          products (
            name,
            category,
            weight_unit,
            price_per_unit,
            is_weighted,
            image_url
          )
        `).eq("sale_id",re);if(Ae)console.error("Error fetching transaction items:",Ae);else{const M=(le||[]).map(Q=>(Q.products?.is_weighted&&console.log("Weighted item data:",{name:Q.products.name,weight:Q.weight,weight_unit:Q.products.weight_unit,price_per_unit:Q.products.price_per_unit,calculated_price:Q.calculated_price,price_each:Q.price_each}),{sale_item_id:Q.sale_item_id,product_id:Q.product_id,quantity:Q.quantity,unit_price:Q.price_each,total_price:Q.calculated_price||(Q.products?.is_weighted&&Q.weight&&Q.products?.price_per_unit?Q.weight*Q.products.price_per_unit:Q.quantity*Q.price_each),product_name:Q.products?.name||"Unknown Product",product_category:Q.products?.category||"Unknown Category",product_image:Q.products?.image_url||null,weight:Q.weight||void 0,weight_unit:Q.products?.weight_unit||void 0,price_per_unit:Q.products?.price_per_unit||void 0,is_weighted:Q.products?.is_weighted||!1}));c(M)}}catch(re){console.error("Error fetching transaction details:",re),t("/sales")}finally{f(!1)}},I=async()=>{try{const{data:re,error:_e}=await Oe.from("customers").select("id, name").order("name");_e?console.error("Error fetching customers:",_e):_(re||[])}catch(re){console.error("Error fetching customers:",re)}},G=()=>{t("/")},Z=()=>{t(`/sales?transaction=${e}`)},oe=async()=>{if(r)try{y(!0);const re=parseInt(e?.replace("TXN-","")||"0"),{error:_e}=await Oe.from("sales").update({payment_method:v.payment_method,customer_id:v.customer_id,notes:v.notes}).eq("sale_id",re);if(_e){console.error("Error updating transaction:",_e),alert("Failed to update transaction. Please try again.");return}await D(),p(!1),alert("Transaction updated successfully!")}catch(re){console.error("Error saving transaction:",re),alert("Failed to save changes. Please try again.")}finally{y(!1)}},V=()=>{p(!1),b({payment_method:"",customer_id:null,notes:""}),A({})},P=(re,_e)=>{_e<0||A(ne=>({...ne,[re]:_e}))},z=async re=>{if(confirm("Are you sure you want to remove this item from the transaction?"))try{const{error:_e}=await Oe.from("sale_items").delete().eq("sale_item_id",re);if(_e){console.error("Error removing item:",_e),alert("Failed to remove item. Please try again.");return}await D(),alert("Item removed successfully!")}catch(_e){console.error("Error removing item:",_e),alert("Failed to remove item. Please try again.")}},ie=async(re,_e)=>{if(_e<=0){z(re);return}try{const ne=i.find(Ae=>Ae.sale_item_id===re);if(!ne)return;const ve=_e*ne.unit_price,{error:le}=await Oe.from("sale_items").update({quantity:_e,total_price:ve}).eq("sale_item_id",re);if(le){console.error("Error updating item quantity:",le),alert("Failed to update item quantity. Please try again.");return}await D(),A(Ae=>{const M={...Ae};return delete M[re],M}),alert("Item quantity updated successfully!")}catch(ne){console.error("Error updating item quantity:",ne),alert("Failed to update item quantity. Please try again.")}},K=async()=>{if(!(!r||!r.partial_payment||!window.confirm(`Complete payment for Transaction #${e}?

This will mark the remaining balance of €${r.remaining_amount?.toFixed(2)||"0.00"} as paid.

The transaction will be marked as fully paid.`)))try{const _e=parseInt(e?.replace("TXN-","")||"0"),{error:ne}=await Oe.from("sales").update({partial_payment:!1,partial_amount:null,remaining_amount:null,partial_notes:null,notes:r.notes?`${r.notes}

Payment completed on ${new Date().toLocaleString()}`:`Payment completed on ${new Date().toLocaleString()}`}).eq("sale_id",_e);if(ne){console.error("Error completing payment:",ne),alert("Failed to complete payment. Please try again.");return}alert("Payment completed successfully!"),await D()}catch(_e){console.error("Error completing payment:",_e),alert("Failed to complete payment. Please try again.")}},xe=async()=>{if(!(!r||!window.confirm(`Are you sure you want to delete Transaction #${e}?

This will:
• Remove all items from this transaction
• Restore stock quantities for all items
• Delete the transaction record

This action cannot be undone!`)))try{const _e=parseInt(e?.replace("TXN-","")||"0");for(const le of i){const{data:Ae,error:M}=await Oe.from("products").select("stock_quantity").eq("product_id",le.product_id).single();if(M){console.error("Error fetching product stock:",M);continue}const{error:Q}=await Oe.from("products").update({stock_quantity:Ae.stock_quantity+le.quantity,last_updated:new Date().toISOString()}).eq("product_id",le.product_id);Q&&console.error("Error restoring stock:",Q);const{error:k}=await Oe.from("inventory_movements").insert([{product_id:le.product_id,quantity_change:le.quantity,movement_type:"Transaction Deletion",reference_id:_e,notes:`Stock restored from deleted transaction #${e}`}]);k&&console.error("Error creating inventory movement:",k)}const{error:ne}=await Oe.from("sale_items").delete().eq("sale_id",_e);if(ne){console.error("Error deleting sale items:",ne),alert("Failed to delete transaction items. Please try again.");return}const{error:ve}=await Oe.from("sales").delete().eq("sale_id",_e);if(ve){console.error("Error deleting sale:",ve),alert("Failed to delete transaction. Please try again.");return}alert("Transaction deleted successfully!"),t("/")}catch(_e){console.error("Error deleting transaction:",_e),alert("Failed to delete transaction. Please try again.")}},ee=re=>new Date(re).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return u?o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:o.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transaction details..."]})}):r?o.jsxs("div",{style:{padding:"0"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[o.jsx("button",{onClick:G,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease"},onMouseEnter:re=>{re.target.style.background="#7d8d86",re.target.style.color="#f1f0e4"},onMouseLeave:re=>{re.target.style.background="none",re.target.style.color="#7d8d86"},children:o.jsx("i",{className:"fa-solid fa-arrow-left"})}),o.jsxs("div",{children:[o.jsxs("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:["Transaction #",e]}),o.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:ee(r.datetime)})]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsxs("button",{onClick:xe,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:re=>{re.target.style.background="#dc2626"},onMouseLeave:re=>{re.target.style.background="#ef4444"},children:[o.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"14px"}}),"Delete Transaction"]}),h?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:oe,disabled:g,style:{background:g?"#9ca3af":"#10b981",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:g?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:re=>{g||(re.target.style.background="#059669")},onMouseLeave:re=>{g||(re.target.style.background="#10b981")},children:[o.jsx("i",{className:`fa-solid ${g?"fa-spinner":"fa-save"}`,style:{fontSize:"14px",animation:g?"spin 1s linear infinite":"none"}}),g?"Saving...":"Save"]}),o.jsxs("button",{onClick:V,disabled:g,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:g?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:re=>{g||(re.target.style.background="#dc2626")},onMouseLeave:re=>{g||(re.target.style.background="#ef4444")},children:[o.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"14px"}}),"Cancel"]})]}):o.jsxs("button",{onClick:Z,style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:re=>{re.target.style.background="#bca88d"},onMouseLeave:re=>{re.target.style.background="#7d8d86"},children:[o.jsx("i",{className:"fa-solid fa-edit",style:{fontSize:"14px"}}),"Edit"]})]})]}),o.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px"},children:[o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Total Amount"}),o.jsxs("p",{style:{fontSize:"28px",fontWeight:"bold",color:"#3e3f29",margin:0},children:["€",r.total_amount.toFixed(2)]})]}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Payment Method"}),h?o.jsxs("select",{value:v.payment_method,onChange:re=>b({...v,payment_method:re.target.value}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[o.jsx("option",{value:"cash",children:"Cash"}),o.jsx("option",{value:"card",children:"Card"}),o.jsx("option",{value:"credit",children:"Credit"})]}):o.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0,textTransform:"capitalize"},children:r.payment_method})]}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Customer"}),h?o.jsxs("select",{value:v.customer_id||"",onChange:re=>b({...v,customer_id:re.target.value?parseInt(re.target.value):null}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[o.jsx("option",{value:"",children:"Walk-in Customer"}),w.map(re=>o.jsx("option",{value:re.id,children:re.name},re.id))]}):o.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:r.customer_name||"Walk-in Customer"})]}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Cashier"}),o.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:r.cashier_name||"System"})]}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Items Count"}),o.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:[i.length," items"]})]}),r.discount_applied&&r.discount_applied>0&&o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Discount Applied"}),o.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#ef4444",margin:0},children:["-€",r.discount_applied.toFixed(2)]})]})]}),r.partial_payment&&o.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px",marginTop:"24px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("i",{className:"fa-solid fa-credit-card",style:{color:"#f59e0b",fontSize:"16px"}}),o.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#92400e",margin:0},children:"Partial Payment Transaction"})]}),o.jsxs("button",{onClick:K,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:re=>{re.target.style.background="#6b7280"},onMouseLeave:re=>{re.target.style.background="#7d8d86"},children:[o.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"12px"}}),"Complete Payment"]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Amount Paid"}),o.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#059669",margin:0},children:["€",r.partial_amount?.toFixed(2)||"0.00"]})]}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Remaining Balance"}),o.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#dc2626",margin:0},children:["€",r.remaining_amount?.toFixed(2)||"0.00"]})]}),r.partial_notes&&o.jsxs("div",{style:{gridColumn:"1 / -1"},children:[o.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Notes"}),o.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:0,fontStyle:"italic"},children:r.partial_notes})]})]})]}),o.jsxs("div",{style:{marginTop:"24px"},children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Notes"}),h?o.jsx("textarea",{value:v.notes,onChange:re=>b({...v,notes:re.target.value}),placeholder:"Add transaction notes...",style:{width:"100%",minHeight:"80px",fontSize:"14px",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"12px",resize:"vertical",fontFamily:"inherit"}}):o.jsx("p",{style:{fontSize:"16px",color:"#3e3f29",margin:0,fontStyle:r.notes?"normal":"italic",opacity:r.notes?1:.6},children:r.notes||"No notes added"})]})]}),o.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[o.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 24px 0",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"20px"}}),"Transaction Items"]}),i.length>0?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.map((re,_e)=>{const ne=S[re.sale_item_id]!==void 0,ve=ne?S[re.sale_item_id]:re.quantity,le=re.is_weighted&&re.weight?re.total_price||re.weight*(re.price_per_unit||0):ve*re.unit_price;return o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease"},onMouseEnter:Ae=>{Ae.target.style.boxShadow="0 4px 12px rgba(62, 63, 41, 0.1)",Ae.target.style.transform="translateY(-2px)"},onMouseLeave:Ae=>{Ae.target.style.boxShadow="none",Ae.target.style.transform="translateY(0)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:re.product_image?`url(${re.product_image})`:re.is_weighted?"#f59e0b":"#7d8d86",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"18px",fontWeight:"bold",position:"relative",border:"2px solid rgba(125, 141, 134, 0.2)"},children:!re.product_image&&o.jsxs(o.Fragment,{children:[re.is_weighted&&re.weight?`${re.weight}${re.weight_unit}`:re.quantity,re.is_weighted&&o.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",width:"16px",height:"16px",borderRadius:"50%",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"#ffffff"},children:"⚖️"})]})}),h&&!re.is_weighted&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("button",{onClick:()=>P(re.sale_item_id,ve-1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),o.jsx("div",{style:{minWidth:"48px",height:"48px",borderRadius:"12px",background:ne?"#fef3c7":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:ne?"#92400e":"#f1f0e4",fontSize:"18px",fontWeight:"bold",border:ne?"2px solid #f59e0b":"none"},children:ve}),o.jsx("button",{onClick:()=>P(re.sale_item_id,ve+1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#10b981",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),ne&&o.jsx("button",{onClick:()=>ie(re.sale_item_id,ve),style:{padding:"6px 12px",borderRadius:"6px",background:"#3b82f6",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer"},children:"Save"}),o.jsx("button",{onClick:()=>z(re.sale_item_id),style:{padding:"6px 12px",borderRadius:"6px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer",marginLeft:"8px"},children:"Remove"})]}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:re.product_name}),o.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[re.product_category," • ",re.is_weighted&&re.weight&&re.weight_unit&&re.price_per_unit?`${re.weight} ${re.weight_unit} • €${re.price_per_unit.toFixed(2)}/${re.weight_unit}`:`€${re.unit_price.toFixed(2)} each`]}),re.is_weighted&&h&&o.jsx("p",{style:{fontSize:"12px",color:"#f59e0b",margin:"4px 0 0 0",fontStyle:"italic"},children:"Weighted items cannot be edited after sale"})]})]}),o.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:ne?"#f59e0b":"#3e3f29"},children:["€",le.toFixed(2)]})]},_e)})}):o.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#7d8d86"},children:[o.jsx("i",{className:"fa-solid fa-box",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),o.jsx("p",{style:{fontSize:"16px",margin:0},children:"No items found for this transaction"})]})]})]}):o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:o.jsxs("div",{style:{textAlign:"center",color:"#7d8d86"},children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),o.jsx("p",{style:{fontSize:"16px",margin:0},children:"Transaction not found"})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Fu={};Fu.version="0.18.5";var dv=1252,Cj=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],fv=function(e){Cj.indexOf(e)!=-1&&(dv=e)};function Aj(){fv(1252)}var ql=function(e){fv(e)};function Rj(){ql(1200),Aj()}var Su=function(t){return String.fromCharCode(t)},E1=function(t){return String.fromCharCode(t)},Lu,Ds="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function $l(e){for(var t="",r=0,a=0,i=0,c=0,u=0,f=0,h=0,p=0;p<e.length;)r=e.charCodeAt(p++),c=r>>2,a=e.charCodeAt(p++),u=(r&3)<<4|a>>4,i=e.charCodeAt(p++),f=(a&15)<<2|i>>6,h=i&63,isNaN(a)?f=h=64:isNaN(i)&&(h=64),t+=Ds.charAt(c)+Ds.charAt(u)+Ds.charAt(f)+Ds.charAt(h);return t}function rs(e){var t="",r=0,a=0,i=0,c=0,u=0,f=0,h=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var p=0;p<e.length;)c=Ds.indexOf(e.charAt(p++)),u=Ds.indexOf(e.charAt(p++)),r=c<<2|u>>4,t+=String.fromCharCode(r),f=Ds.indexOf(e.charAt(p++)),a=(u&15)<<4|f>>2,f!==64&&(t+=String.fromCharCode(a)),h=Ds.indexOf(e.charAt(p++)),i=(f&3)<<6|h,h!==64&&(t+=String.fromCharCode(i));return t}var nr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),as=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function fi(e){return nr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function k1(e){return nr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var va=function(t){return nr?as(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function nd(e){if(typeof ArrayBuffer>"u")return va(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function tc(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Dj(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var un=nr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:as(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),i=0;for(t=0,r=0;t<e.length;r+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function Nj(e){for(var t=[],r=0,a=e.length+250,i=fi(e.length+255),c=0;c<e.length;++c){var u=e.charCodeAt(c);if(u<128)i[r++]=u;else if(u<2048)i[r++]=192|u>>6&31,i[r++]=128|u&63;else if(u>=55296&&u<57344){u=(u&1023)+64;var f=e.charCodeAt(++c)&1023;i[r++]=240|u>>8&7,i[r++]=128|u>>2&63,i[r++]=128|f>>6&15|(u&3)<<4,i[r++]=128|f&63}else i[r++]=224|u>>12&15,i[r++]=128|u>>6&63,i[r++]=128|u&63;r>a&&(t.push(i.slice(0,r)),r=0,i=fi(65535),a=65530)}return t.push(i.slice(0,r)),un(t)}var Bl=/\u0000/g,wu=/[\u0001-\u0006]/g;function mo(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function ba(e,t){var r=""+e;return r.length>=t?r:Or("0",t-r.length)+r}function N0(e,t){var r=""+e;return r.length>=t?r:Or(" ",t-r.length)+r}function Pu(e,t){var r=""+e;return r.length>=t?r:r+Or(" ",t-r.length)}function Oj(e,t){var r=""+Math.round(e);return r.length>=t?r:Or("0",t-r.length)+r}function Ij(e,t){var r=""+e;return r.length>=t?r:Or("0",t-r.length)+r}var j1=Math.pow(2,32);function co(e,t){if(e>j1||e<-j1)return Oj(e,t);var r=Math.round(e);return Ij(r,t)}function zu(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var C1=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Dh=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Bj(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Ir={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},A1={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Mj={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Uu(e,t,r){for(var a=e<0?-1:1,i=e*a,c=0,u=1,f=0,h=1,p=0,g=0,y=Math.floor(i);p<t&&(y=Math.floor(i),f=y*u+c,g=y*p+h,!(i-y<5e-8));)i=1/(i-y),c=u,u=f,h=p,p=g;if(g>t&&(p>t?(g=h,f=c):(g=p,f=u)),!r)return[0,a*f,g];var v=Math.floor(a*f/g);return[v,a*f-v*g,g]}function Tu(e,t,r){if(e>2958465||e<0)return null;var a=e|0,i=Math.floor(86400*(e-a)),c=0,u=[],f={D:a,T:i,u:86400*(e-a)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(f.u)<1e-6&&(f.u=0),t&&t.date1904&&(a+=1462),f.u>.9999&&(f.u=0,++i==86400&&(f.T=i=0,++a,++f.D)),a===60)u=r?[1317,10,29]:[1900,2,29],c=3;else if(a===0)u=r?[1317,8,29]:[1900,1,0],c=6;else{a>60&&--a;var h=new Date(1900,0,1);h.setDate(h.getDate()+a-1),u=[h.getFullYear(),h.getMonth()+1,h.getDate()],c=h.getDay(),a<60&&(c=(c+6)%7),r&&(c=Hj(h,u))}return f.y=u[0],f.m=u[1],f.d=u[2],f.S=i%60,i=Math.floor(i/60),f.M=i%60,i=Math.floor(i/60),f.H=i,f.q=c,f}var hv=new Date(1899,11,31,0,0,0),Fj=hv.getTime(),Lj=new Date(1900,2,1,0,0,0);function pv(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Lj&&(r+=1440*60*1e3),(r-(Fj+(e.getTimezoneOffset()-hv.getTimezoneOffset())*6e4))/(1440*60*1e3)}function O0(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Pj(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function zj(e){var t=e<0?12:11,r=O0(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Uj(e){var t=O0(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Wj(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=zj(e):t===10?r=e.toFixed(10).substr(0,12):r=Uj(e),O0(Pj(r.toUpperCase()))}function s0(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Wj(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Is(14,pv(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Hj(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function qj(e,t,r,a){var i="",c=0,u=0,f=r.y,h,p=0;switch(e){case 98:f=r.y+543;case 121:switch(t.length){case 1:case 2:h=f%100,p=2;break;default:h=f%1e4,p=4;break}break;case 109:switch(t.length){case 1:case 2:h=r.m,p=t.length;break;case 3:return Dh[r.m-1][1];case 5:return Dh[r.m-1][0];default:return Dh[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:h=r.d,p=t.length;break;case 3:return C1[r.q][0];default:return C1[r.q][1]}break;case 104:switch(t.length){case 1:case 2:h=1+(r.H+11)%12,p=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:h=r.H,p=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:h=r.M,p=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?ba(r.S,t.length):(a>=2?u=a===3?1e3:100:u=a===1?10:1,c=Math.round(u*(r.S+r.u)),c>=60*u&&(c=0),t==="s"?c===0?"0":""+c/u:(i=ba(c,2+a),t==="ss"?i.substr(0,2):"."+i.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":h=r.D*24+r.H;break;case"[m]":case"[mm]":h=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":h=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}p=t.length===3?1:2;break;case 101:h=f,p=1;break}var g=p>0?ba(h,p):"";return g}function Ns(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var gv=/%/g;function $j(e,t,r){var a=t.replace(gv,""),i=t.length-a.length;return Ja(e,a,r*Math.pow(10,2*i))+Or("%",i)}function Gj(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Ja(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function xv(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+xv(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var c=Math.floor(Math.log(t)*Math.LOG10E)%i;if(c<0&&(c+=i),r=(t/Math.pow(10,c)).toPrecision(a+1+(i+c)%i),r.indexOf("e")===-1){var u=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(u-r.length+c):r+="E+"+(u-c);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(f,h,p,g){return h+p+g.substr(0,(i+c)%i)+"."+g.substr(c)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var mv=/# (\?+)( ?)\/( ?)(\d+)/;function Vj(e,t,r){var a=parseInt(e[4],10),i=Math.round(t*a),c=Math.floor(i/a),u=i-c*a,f=a;return r+(c===0?"":""+c)+" "+(u===0?Or(" ",e[1].length+1+e[4].length):N0(u,e[1].length)+e[2]+"/"+e[3]+ba(f,e[4].length))}function Yj(e,t,r){return r+(t===0?"":""+t)+Or(" ",e[1].length+2+e[4].length)}var yv=/^#*0*\.([0#]+)/,vv=/\).*[0#]/,bv=/\(###\) ###\\?-####/;function kn(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function R1(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function D1(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function Kj(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Xj(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function sa(e,t,r){if(e.charCodeAt(0)===40&&!t.match(vv)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?sa("n",a,r):"("+sa("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Gj(e,t,r);if(t.indexOf("%")!==-1)return $j(e,t,r);if(t.indexOf("E")!==-1)return xv(t,r);if(t.charCodeAt(0)===36)return"$"+sa(e,t.substr(t.charAt(1)==" "?2:1),r);var i,c,u,f,h=Math.abs(r),p=r<0?"-":"";if(t.match(/^00+$/))return p+co(h,t.length);if(t.match(/^[#?]+$/))return i=co(r,0),i==="0"&&(i=""),i.length>t.length?i:kn(t.substr(0,t.length-i.length))+i;if(c=t.match(mv))return Vj(c,h,p);if(t.match(/^#+0+$/))return p+co(h,t.length-t.indexOf("0"));if(c=t.match(yv))return i=R1(r,c[1].length).replace(/^([^\.]+)$/,"$1."+kn(c[1])).replace(/\.$/,"."+kn(c[1])).replace(/\.(\d*)$/,function(w,_){return"."+_+Or("0",kn(c[1]).length-_.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),c=t.match(/^(0*)\.(#*)$/))return p+R1(h,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=t.match(/^#{1,3},##0(\.?)$/))return p+Ns(co(h,0));if(c=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+sa(e,t,-r):Ns(""+(Math.floor(r)+Kj(r,c[1].length)))+"."+ba(D1(r,c[1].length),c[1].length);if(c=t.match(/^#,#*,#0/))return sa(e,t.replace(/^#,#*,/,""),r);if(c=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=mo(sa(e,t.replace(/[\\-]/g,""),r)),u=0,mo(mo(t.replace(/\\/g,"")).replace(/[0#]/g,function(w){return u<i.length?i.charAt(u++):w==="0"?"0":""}));if(t.match(bv))return i=sa(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var g="";if(c=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(c[4].length,7),f=Uu(h,Math.pow(10,u)-1,!1),i=""+p,g=Ja("n",c[1],f[1]),g.charAt(g.length-1)==" "&&(g=g.substr(0,g.length-1)+"0"),i+=g+c[2]+"/"+c[3],g=Pu(f[2],u),g.length<c[4].length&&(g=kn(c[4].substr(c[4].length-g.length))+g),i+=g,i;if(c=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(c[1].length,c[4].length),7),f=Uu(h,Math.pow(10,u)-1,!0),p+(f[0]||(f[1]?"":"0"))+" "+(f[1]?N0(f[1],u)+c[2]+"/"+c[3]+Pu(f[2],u):Or(" ",2*u+1+c[2].length+c[3].length));if(c=t.match(/^[#0?]+$/))return i=co(r,0),t.length<=i.length?i:kn(t.substr(0,t.length-i.length))+i;if(c=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),u=i.indexOf(".");var y=t.indexOf(".")-u,v=t.length-i.length-y;return kn(t.substr(0,y)+i+t.substr(t.length-v))}if(c=t.match(/^00,000\.([#0]*0)$/))return u=D1(r,c[1].length),r<0?"-"+sa(e,t,-r):Ns(Xj(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ba(0,3-w.length):"")+w})+"."+ba(u,c[1].length);switch(t){case"###,##0.00":return sa(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var b=Ns(co(h,0));return b!=="0"?p+b:"";case"###,###.00":return sa(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return sa(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Qj(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Ja(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Jj(e,t,r){var a=t.replace(gv,""),i=t.length-a.length;return Ja(e,a,r*Math.pow(10,2*i))+Or("%",i)}function _v(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+_v(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var c=Math.floor(Math.log(t)*Math.LOG10E)%i;if(c<0&&(c+=i),r=(t/Math.pow(10,c)).toPrecision(a+1+(i+c)%i),!r.match(/[Ee]/)){var u=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(u-r.length+c):r+="E+"+(u-c),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(f,h,p,g){return h+p+g.substr(0,(i+c)%i)+"."+g.substr(c)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Ra(e,t,r){if(e.charCodeAt(0)===40&&!t.match(vv)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ra("n",a,r):"("+Ra("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Qj(e,t,r);if(t.indexOf("%")!==-1)return Jj(e,t,r);if(t.indexOf("E")!==-1)return _v(t,r);if(t.charCodeAt(0)===36)return"$"+Ra(e,t.substr(t.charAt(1)==" "?2:1),r);var i,c,u,f,h=Math.abs(r),p=r<0?"-":"";if(t.match(/^00+$/))return p+ba(h,t.length);if(t.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>t.length?i:kn(t.substr(0,t.length-i.length))+i;if(c=t.match(mv))return Yj(c,h,p);if(t.match(/^#+0+$/))return p+ba(h,t.length-t.indexOf("0"));if(c=t.match(yv))return i=(""+r).replace(/^([^\.]+)$/,"$1."+kn(c[1])).replace(/\.$/,"."+kn(c[1])),i=i.replace(/\.(\d*)$/,function(w,_){return"."+_+Or("0",kn(c[1]).length-_.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),c=t.match(/^(0*)\.(#*)$/))return p+(""+h).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=t.match(/^#{1,3},##0(\.?)$/))return p+Ns(""+h);if(c=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ra(e,t,-r):Ns(""+r)+"."+Or("0",c[1].length);if(c=t.match(/^#,#*,#0/))return Ra(e,t.replace(/^#,#*,/,""),r);if(c=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=mo(Ra(e,t.replace(/[\\-]/g,""),r)),u=0,mo(mo(t.replace(/\\/g,"")).replace(/[0#]/g,function(w){return u<i.length?i.charAt(u++):w==="0"?"0":""}));if(t.match(bv))return i=Ra(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var g="";if(c=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(c[4].length,7),f=Uu(h,Math.pow(10,u)-1,!1),i=""+p,g=Ja("n",c[1],f[1]),g.charAt(g.length-1)==" "&&(g=g.substr(0,g.length-1)+"0"),i+=g+c[2]+"/"+c[3],g=Pu(f[2],u),g.length<c[4].length&&(g=kn(c[4].substr(c[4].length-g.length))+g),i+=g,i;if(c=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(c[1].length,c[4].length),7),f=Uu(h,Math.pow(10,u)-1,!0),p+(f[0]||(f[1]?"":"0"))+" "+(f[1]?N0(f[1],u)+c[2]+"/"+c[3]+Pu(f[2],u):Or(" ",2*u+1+c[2].length+c[3].length));if(c=t.match(/^[#0?]+$/))return i=""+r,t.length<=i.length?i:kn(t.substr(0,t.length-i.length))+i;if(c=t.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),u=i.indexOf(".");var y=t.indexOf(".")-u,v=t.length-i.length-y;return kn(t.substr(0,y)+i+t.substr(t.length-v))}if(c=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Ra(e,t,-r):Ns(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ba(0,3-w.length):"")+w})+"."+ba(0,c[1].length);switch(t){case"###,###":case"##,###":case"#,###":var b=Ns(""+h);return b!=="0"?p+b:"";default:if(t.match(/\.[0#?]*$/))return Ra(e,t.slice(0,t.lastIndexOf(".")),r)+kn(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Ja(e,t,r){return(r|0)===r?Ra(e,t,r):sa(e,t,r)}function Zj(e){for(var t=[],r=!1,a=0,i=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(i,a-i),i=a+1}if(t[t.length]=e.substr(i),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Sv=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function wv(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":zu(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(Sv))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function e6(e,t,r,a){for(var i=[],c="",u=0,f="",h="t",p,g,y,v="H";u<e.length;)switch(f=e.charAt(u)){case"G":if(!zu(e,u))throw new Error("unrecognized character "+f+" in "+e);i[i.length]={t:"G",v:"General"},u+=7;break;case'"':for(c="";(y=e.charCodeAt(++u))!==34&&u<e.length;)c+=String.fromCharCode(y);i[i.length]={t:"t",v:c},++u;break;case"\\":var b=e.charAt(++u),w=b==="("||b===")"?b:"t";i[i.length]={t:w,v:b},++u;break;case"_":i[i.length]={t:"t",v:" "},u+=2;break;case"@":i[i.length]={t:"T",v:t},++u;break;case"B":case"b":if(e.charAt(u+1)==="1"||e.charAt(u+1)==="2"){if(p==null&&(p=Tu(t,r,e.charAt(u+1)==="2"),p==null))return"";i[i.length]={t:"X",v:e.substr(u,2)},h=f,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":f=f.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||p==null&&(p=Tu(t,r),p==null))return"";for(c=f;++u<e.length&&e.charAt(u).toLowerCase()===f;)c+=f;f==="m"&&h.toLowerCase()==="h"&&(f="M"),f==="h"&&(f=v),i[i.length]={t:f,v:c},h=f;break;case"A":case"a":case"上":var _={t:f,v:f};if(p==null&&(p=Tu(t,r)),e.substr(u,3).toUpperCase()==="A/P"?(p!=null&&(_.v=p.H>=12?"P":"A"),_.t="T",v="h",u+=3):e.substr(u,5).toUpperCase()==="AM/PM"?(p!=null&&(_.v=p.H>=12?"PM":"AM"),_.t="T",u+=5,v="h"):e.substr(u,5).toUpperCase()==="上午/下午"?(p!=null&&(_.v=p.H>=12?"下午":"上午"),_.t="T",u+=5,v="h"):(_.t="t",++u),p==null&&_.t==="T")return"";i[i.length]=_,h=f;break;case"[":for(c=f;e.charAt(u++)!=="]"&&u<e.length;)c+=e.charAt(u);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(Sv)){if(p==null&&(p=Tu(t,r),p==null))return"";i[i.length]={t:"Z",v:c.toLowerCase()},h=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",wv(e)||(i[i.length]={t:"t",v:c}));break;case".":if(p!=null){for(c=f;++u<e.length&&(f=e.charAt(u))==="0";)c+=f;i[i.length]={t:"s",v:c};break}case"0":case"#":for(c=f;++u<e.length&&"0#?.,E+-%".indexOf(f=e.charAt(u))>-1;)c+=f;i[i.length]={t:"n",v:c};break;case"?":for(c=f;e.charAt(++u)===f;)c+=f;i[i.length]={t:f,v:c},h=f;break;case"*":++u,(e.charAt(u)==" "||e.charAt(u)=="*")&&++u;break;case"(":case")":i[i.length]={t:a===1?"t":f,v:f},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=f;u<e.length&&"0123456789".indexOf(e.charAt(++u))>-1;)c+=e.charAt(u);i[i.length]={t:"D",v:c};break;case" ":i[i.length]={t:f,v:f},++u;break;case"$":i[i.length]={t:"t",v:"$"},++u;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(f)===-1)throw new Error("unrecognized character "+f+" in "+e);i[i.length]={t:"t",v:f},++u;break}var S=0,A=0,D;for(u=i.length-1,h="t";u>=0;--u)switch(i[u].t){case"h":case"H":i[u].t=v,h="h",S<1&&(S=1);break;case"s":(D=i[u].v.match(/\.0+$/))&&(A=Math.max(A,D[0].length-1)),S<3&&(S=3);case"d":case"y":case"M":case"e":h=i[u].t;break;case"m":h==="s"&&(i[u].t="M",S<2&&(S=2));break;case"X":break;case"Z":S<1&&i[u].v.match(/[Hh]/)&&(S=1),S<2&&i[u].v.match(/[Mm]/)&&(S=2),S<3&&i[u].v.match(/[Ss]/)&&(S=3)}switch(S){case 0:break;case 1:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M),p.M>=60&&(p.M=0,++p.H);break;case 2:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M);break}var I="",G;for(u=0;u<i.length;++u)switch(i[u].t){case"t":case"T":case" ":case"D":break;case"X":i[u].v="",i[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[u].v=qj(i[u].t.charCodeAt(0),i[u].v,p,A),i[u].t="t";break;case"n":case"?":for(G=u+1;i[G]!=null&&((f=i[G].t)==="?"||f==="D"||(f===" "||f==="t")&&i[G+1]!=null&&(i[G+1].t==="?"||i[G+1].t==="t"&&i[G+1].v==="/")||i[u].t==="("&&(f===" "||f==="n"||f===")")||f==="t"&&(i[G].v==="/"||i[G].v===" "&&i[G+1]!=null&&i[G+1].t=="?"));)i[u].v+=i[G].v,i[G]={v:"",t:";"},++G;I+=i[u].v,u=G-1;break;case"G":i[u].t="t",i[u].v=s0(t,r);break}var Z="",oe,V;if(I.length>0){I.charCodeAt(0)==40?(oe=t<0&&I.charCodeAt(0)===45?-t:t,V=Ja("n",I,oe)):(oe=t<0&&a>1?-t:t,V=Ja("n",I,oe),oe<0&&i[0]&&i[0].t=="t"&&(V=V.substr(1),i[0].v="-"+i[0].v)),G=V.length-1;var P=i.length;for(u=0;u<i.length;++u)if(i[u]!=null&&i[u].t!="t"&&i[u].v.indexOf(".")>-1){P=u;break}var z=i.length;if(P===i.length&&V.indexOf("E")===-1){for(u=i.length-1;u>=0;--u)i[u]==null||"n?".indexOf(i[u].t)===-1||(G>=i[u].v.length-1?(G-=i[u].v.length,i[u].v=V.substr(G+1,i[u].v.length)):G<0?i[u].v="":(i[u].v=V.substr(0,G+1),G=-1),i[u].t="t",z=u);G>=0&&z<i.length&&(i[z].v=V.substr(0,G+1)+i[z].v)}else if(P!==i.length&&V.indexOf("E")===-1){for(G=V.indexOf(".")-1,u=P;u>=0;--u)if(!(i[u]==null||"n?".indexOf(i[u].t)===-1)){for(g=i[u].v.indexOf(".")>-1&&u===P?i[u].v.indexOf(".")-1:i[u].v.length-1,Z=i[u].v.substr(g+1);g>=0;--g)G>=0&&(i[u].v.charAt(g)==="0"||i[u].v.charAt(g)==="#")&&(Z=V.charAt(G--)+Z);i[u].v=Z,i[u].t="t",z=u}for(G>=0&&z<i.length&&(i[z].v=V.substr(0,G+1)+i[z].v),G=V.indexOf(".")+1,u=P;u<i.length;++u)if(!(i[u]==null||"n?(".indexOf(i[u].t)===-1&&u!==P)){for(g=i[u].v.indexOf(".")>-1&&u===P?i[u].v.indexOf(".")+1:0,Z=i[u].v.substr(0,g);g<i[u].v.length;++g)G<V.length&&(Z+=V.charAt(G++));i[u].v=Z,i[u].t="t",z=u}}}for(u=0;u<i.length;++u)i[u]!=null&&"n?".indexOf(i[u].t)>-1&&(oe=a>1&&t<0&&u>0&&i[u-1].v==="-"?-t:t,i[u].v=Ja(i[u].t,i[u].v,oe),i[u].t="t");var ie="";for(u=0;u!==i.length;++u)i[u]!=null&&(ie+=i[u].v);return ie}var N1=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function O1(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function t6(e,t){var r=Zj(e),a=r.length,i=r[a-1].indexOf("@");if(a<4&&i>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var c=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,c];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var u=r[0].match(N1),f=r[1].match(N1);return O1(t,u)?[a,r[0]]:O1(t,f)?[a,r[1]]:[a,r[u!=null&&f!=null?2:1]]}return[a,c]}function Is(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:Ir)[e],a==null&&(a=r.table&&r.table[A1[e]]||Ir[A1[e]]),a==null&&(a=Mj[e]||"General");break}if(zu(a,0))return s0(t,r);t instanceof Date&&(t=pv(t,r.date1904));var i=t6(a,t);if(zu(i[1]))return s0(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return e6(i[1],t,r,i[0])}function Tv(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Ir[r]==null){t<0&&(t=r);continue}if(Ir[r]==e){t=r;break}}t<0&&(t=391)}return Ir[t]=e,t}function ad(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Tv(e[t],t)}function sd(){Ir=Bj()}var Ev=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function r6(e){var t=typeof e=="number"?Ir[e]:e;return t=t.replace(Ev,"(\\d+)"),new RegExp("^"+t+"$")}function n6(e,t,r){var a=-1,i=-1,c=-1,u=-1,f=-1,h=-1;(t.match(Ev)||[]).forEach(function(y,v){var b=parseInt(r[v+1],10);switch(y.toLowerCase().charAt(0)){case"y":a=b;break;case"d":c=b;break;case"h":u=b;break;case"s":h=b;break;case"m":u>=0?f=b:i=b;break}}),h>=0&&f==-1&&i>=0&&(f=i,i=-1);var p=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);p.length==7&&(p="0"+p),p.length==8&&(p="20"+p);var g=("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2);return u==-1&&f==-1&&h==-1?p:a==-1&&i==-1&&c==-1?g:p+"T"+g}var a6=(function(){var e={};e.version="1.2.0";function t(){for(var V=0,P=new Array(256),z=0;z!=256;++z)V=z,V=V&1?-306674912^V>>>1:V>>>1,V=V&1?-306674912^V>>>1:V>>>1,V=V&1?-306674912^V>>>1:V>>>1,V=V&1?-306674912^V>>>1:V>>>1,V=V&1?-306674912^V>>>1:V>>>1,V=V&1?-306674912^V>>>1:V>>>1,V=V&1?-306674912^V>>>1:V>>>1,V=V&1?-306674912^V>>>1:V>>>1,P[z]=V;return typeof Int32Array<"u"?new Int32Array(P):P}var r=t();function a(V){var P=0,z=0,ie=0,K=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ie=0;ie!=256;++ie)K[ie]=V[ie];for(ie=0;ie!=256;++ie)for(z=V[ie],P=256+ie;P<4096;P+=256)z=K[P]=z>>>8^V[z&255];var xe=[];for(ie=1;ie!=16;++ie)xe[ie-1]=typeof Int32Array<"u"?K.subarray(ie*256,ie*256+256):K.slice(ie*256,ie*256+256);return xe}var i=a(r),c=i[0],u=i[1],f=i[2],h=i[3],p=i[4],g=i[5],y=i[6],v=i[7],b=i[8],w=i[9],_=i[10],S=i[11],A=i[12],D=i[13],I=i[14];function G(V,P){for(var z=P^-1,ie=0,K=V.length;ie<K;)z=z>>>8^r[(z^V.charCodeAt(ie++))&255];return~z}function Z(V,P){for(var z=P^-1,ie=V.length-15,K=0;K<ie;)z=I[V[K++]^z&255]^D[V[K++]^z>>8&255]^A[V[K++]^z>>16&255]^S[V[K++]^z>>>24]^_[V[K++]]^w[V[K++]]^b[V[K++]]^v[V[K++]]^y[V[K++]]^g[V[K++]]^p[V[K++]]^h[V[K++]]^f[V[K++]]^u[V[K++]]^c[V[K++]]^r[V[K++]];for(ie+=15;K<ie;)z=z>>>8^r[(z^V[K++])&255];return~z}function oe(V,P){for(var z=P^-1,ie=0,K=V.length,xe=0,ee=0;ie<K;)xe=V.charCodeAt(ie++),xe<128?z=z>>>8^r[(z^xe)&255]:xe<2048?(z=z>>>8^r[(z^(192|xe>>6&31))&255],z=z>>>8^r[(z^(128|xe&63))&255]):xe>=55296&&xe<57344?(xe=(xe&1023)+64,ee=V.charCodeAt(ie++)&1023,z=z>>>8^r[(z^(240|xe>>8&7))&255],z=z>>>8^r[(z^(128|xe>>2&63))&255],z=z>>>8^r[(z^(128|ee>>6&15|(xe&3)<<4))&255],z=z>>>8^r[(z^(128|ee&63))&255]):(z=z>>>8^r[(z^(224|xe>>12&15))&255],z=z>>>8^r[(z^(128|xe>>6&63))&255],z=z>>>8^r[(z^(128|xe&63))&255]);return~z}return e.table=r,e.bstr=G,e.buf=Z,e.str=oe,e})(),xr=(function(){var t={};t.version="1.2.1";function r(R,U){for(var B=R.split("/"),F=U.split("/"),H=0,q=0,ye=Math.min(B.length,F.length);H<ye;++H){if(q=B[H].length-F[H].length)return q;if(B[H]!=F[H])return B[H]<F[H]?-1:1}return B.length-F.length}function a(R){if(R.charAt(R.length-1)=="/")return R.slice(0,-1).indexOf("/")===-1?R:a(R.slice(0,-1));var U=R.lastIndexOf("/");return U===-1?R:R.slice(0,U+1)}function i(R){if(R.charAt(R.length-1)=="/")return i(R.slice(0,-1));var U=R.lastIndexOf("/");return U===-1?R:R.slice(U+1)}function c(R,U){typeof U=="string"&&(U=new Date(U));var B=U.getHours();B=B<<6|U.getMinutes(),B=B<<5|U.getSeconds()>>>1,R.write_shift(2,B);var F=U.getFullYear()-1980;F=F<<4|U.getMonth()+1,F=F<<5|U.getDate(),R.write_shift(2,F)}function u(R){var U=R.read_shift(2)&65535,B=R.read_shift(2)&65535,F=new Date,H=B&31;B>>>=5;var q=B&15;B>>>=4,F.setMilliseconds(0),F.setFullYear(B+1980),F.setMonth(q-1),F.setDate(H);var ye=U&31;U>>>=5;var Ne=U&63;return U>>>=6,F.setHours(U),F.setMinutes(Ne),F.setSeconds(ye<<1),F}function f(R){Yn(R,0);for(var U={},B=0;R.l<=R.length-4;){var F=R.read_shift(2),H=R.read_shift(2),q=R.l+H,ye={};switch(F){case 21589:B=R.read_shift(1),B&1&&(ye.mtime=R.read_shift(4)),H>5&&(B&2&&(ye.atime=R.read_shift(4)),B&4&&(ye.ctime=R.read_shift(4))),ye.mtime&&(ye.mt=new Date(ye.mtime*1e3));break}R.l=q,U[F]=ye}return U}var h;function p(){return h||(h={})}function g(R,U){if(R[0]==80&&R[1]==75)return ke(R,U);if((R[0]|32)==109&&(R[1]|32)==105)return vn(R,U);if(R.length<512)throw new Error("CFB file size "+R.length+" < 512");var B=3,F=512,H=0,q=0,ye=0,Ne=0,fe=0,Se=[],we=R.slice(0,512);Yn(we,0);var Ue=y(we);switch(B=Ue[0],B){case 3:F=512;break;case 4:F=4096;break;case 0:if(Ue[1]==0)return ke(R,U);default:throw new Error("Major Version: Expected 3 or 4 saw "+B)}F!==512&&(we=R.slice(0,F),Yn(we,28));var Ye=R.slice(0,F);v(we,B);var st=we.read_shift(4,"i");if(B===3&&st!==0)throw new Error("# Directory Sectors: Expected 0 saw "+st);we.l+=4,ye=we.read_shift(4,"i"),we.l+=4,we.chk("00100000","Mini Stream Cutoff Size: "),Ne=we.read_shift(4,"i"),H=we.read_shift(4,"i"),fe=we.read_shift(4,"i"),q=we.read_shift(4,"i");for(var Ge=-1,et=0;et<109&&(Ge=we.read_shift(4,"i"),!(Ge<0));++et)Se[et]=Ge;var vt=b(R,F);S(fe,q,vt,F,Se);var Gt=D(vt,ye,Se,F);Gt[ye].name="!Directory",H>0&&Ne!==ee&&(Gt[Ne].name="!MiniFAT"),Gt[Se[0]].name="!FAT",Gt.fat_addrs=Se,Gt.ssz=F;var Yt={},Kt=[],bn=[],j=[];I(ye,Gt,vt,Kt,H,Yt,bn,Ne),w(bn,j,Kt),Kt.shift();var ue={FileIndex:bn,FullPaths:j};return U&&U.raw&&(ue.raw={header:Ye,sectors:vt}),ue}function y(R){if(R[R.l]==80&&R[R.l+1]==75)return[0,0];R.chk(re,"Header Signature: "),R.l+=16;var U=R.read_shift(2,"u");return[R.read_shift(2,"u"),U]}function v(R,U){var B=9;switch(R.l+=2,B=R.read_shift(2)){case 9:if(U!=3)throw new Error("Sector Shift: Expected 9 saw "+B);break;case 12:if(U!=4)throw new Error("Sector Shift: Expected 12 saw "+B);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+B)}R.chk("0600","Mini Sector Shift: "),R.chk("000000000000","Reserved: ")}function b(R,U){for(var B=Math.ceil(R.length/U)-1,F=[],H=1;H<B;++H)F[H-1]=R.slice(H*U,(H+1)*U);return F[B-1]=R.slice(B*U),F}function w(R,U,B){for(var F=0,H=0,q=0,ye=0,Ne=0,fe=B.length,Se=[],we=[];F<fe;++F)Se[F]=we[F]=F,U[F]=B[F];for(;Ne<we.length;++Ne)F=we[Ne],H=R[F].L,q=R[F].R,ye=R[F].C,Se[F]===F&&(H!==-1&&Se[H]!==H&&(Se[F]=Se[H]),q!==-1&&Se[q]!==q&&(Se[F]=Se[q])),ye!==-1&&(Se[ye]=F),H!==-1&&F!=Se[F]&&(Se[H]=Se[F],we.lastIndexOf(H)<Ne&&we.push(H)),q!==-1&&F!=Se[F]&&(Se[q]=Se[F],we.lastIndexOf(q)<Ne&&we.push(q));for(F=1;F<fe;++F)Se[F]===F&&(q!==-1&&Se[q]!==q?Se[F]=Se[q]:H!==-1&&Se[H]!==H&&(Se[F]=Se[H]));for(F=1;F<fe;++F)if(R[F].type!==0){if(Ne=F,Ne!=Se[Ne])do Ne=Se[Ne],U[F]=U[Ne]+"/"+U[F];while(Ne!==0&&Se[Ne]!==-1&&Ne!=Se[Ne]);Se[F]=-1}for(U[0]+="/",F=1;F<fe;++F)R[F].type!==2&&(U[F]+="/")}function _(R,U,B){for(var F=R.start,H=R.size,q=[],ye=F;B&&H>0&&ye>=0;)q.push(U.slice(ye*xe,ye*xe+xe)),H-=xe,ye=ii(B,ye*4);return q.length===0?Be(0):un(q).slice(0,R.size)}function S(R,U,B,F,H){var q=ee;if(R===ee){if(U!==0)throw new Error("DIFAT chain shorter than expected")}else if(R!==-1){var ye=B[R],Ne=(F>>>2)-1;if(!ye)return;for(var fe=0;fe<Ne&&(q=ii(ye,fe*4))!==ee;++fe)H.push(q);S(ii(ye,F-4),U-1,B,F,H)}}function A(R,U,B,F,H){var q=[],ye=[];H||(H=[]);var Ne=F-1,fe=0,Se=0;for(fe=U;fe>=0;){H[fe]=!0,q[q.length]=fe,ye.push(R[fe]);var we=B[Math.floor(fe*4/F)];if(Se=fe*4&Ne,F<4+Se)throw new Error("FAT boundary crossed: "+fe+" 4 "+F);if(!R[we])break;fe=ii(R[we],Se)}return{nodes:q,data:U1([ye])}}function D(R,U,B,F){var H=R.length,q=[],ye=[],Ne=[],fe=[],Se=F-1,we=0,Ue=0,Ye=0,st=0;for(we=0;we<H;++we)if(Ne=[],Ye=we+U,Ye>=H&&(Ye-=H),!ye[Ye]){fe=[];var Ge=[];for(Ue=Ye;Ue>=0;){Ge[Ue]=!0,ye[Ue]=!0,Ne[Ne.length]=Ue,fe.push(R[Ue]);var et=B[Math.floor(Ue*4/F)];if(st=Ue*4&Se,F<4+st)throw new Error("FAT boundary crossed: "+Ue+" 4 "+F);if(!R[et]||(Ue=ii(R[et],st),Ge[Ue]))break}q[Ye]={nodes:Ne,data:U1([fe])}}return q}function I(R,U,B,F,H,q,ye,Ne){for(var fe=0,Se=F.length?2:0,we=U[R].data,Ue=0,Ye=0,st;Ue<we.length;Ue+=128){var Ge=we.slice(Ue,Ue+128);Yn(Ge,64),Ye=Ge.read_shift(2),st=L0(Ge,0,Ye-Se),F.push(st);var et={name:st,type:Ge.read_shift(1),color:Ge.read_shift(1),L:Ge.read_shift(4,"i"),R:Ge.read_shift(4,"i"),C:Ge.read_shift(4,"i"),clsid:Ge.read_shift(16),state:Ge.read_shift(4,"i"),start:0,size:0},vt=Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2);vt!==0&&(et.ct=G(Ge,Ge.l-8));var Gt=Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2);Gt!==0&&(et.mt=G(Ge,Ge.l-8)),et.start=Ge.read_shift(4,"i"),et.size=Ge.read_shift(4,"i"),et.size<0&&et.start<0&&(et.size=et.type=0,et.start=ee,et.name=""),et.type===5?(fe=et.start,H>0&&fe!==ee&&(U[fe].name="!StreamData")):et.size>=4096?(et.storage="fat",U[et.start]===void 0&&(U[et.start]=A(B,et.start,U.fat_addrs,U.ssz)),U[et.start].name=et.name,et.content=U[et.start].data.slice(0,et.size)):(et.storage="minifat",et.size<0?et.size=0:fe!==ee&&et.start!==ee&&U[fe]&&(et.content=_(et,U[fe].data,(U[Ne]||{}).data))),et.content&&Yn(et.content,0),q[st]=et,ye.push(et)}}function G(R,U){return new Date((Xn(R,U+4)/1e7*Math.pow(2,32)+Xn(R,U)/1e7-11644473600)*1e3)}function Z(R,U){return p(),g(h.readFileSync(R),U)}function oe(R,U){var B=U&&U.type;switch(B||nr&&Buffer.isBuffer(R)&&(B="buffer"),B||"base64"){case"file":return Z(R,U);case"base64":return g(va(rs(R)),U);case"binary":return g(va(R),U)}return g(R,U)}function V(R,U){var B=U||{},F=B.root||"Root Entry";if(R.FullPaths||(R.FullPaths=[]),R.FileIndex||(R.FileIndex=[]),R.FullPaths.length!==R.FileIndex.length)throw new Error("inconsistent CFB structure");R.FullPaths.length===0&&(R.FullPaths[0]=F+"/",R.FileIndex[0]={name:F,type:5}),B.CLSID&&(R.FileIndex[0].clsid=B.CLSID),P(R)}function P(R){var U="Sh33tJ5";if(!xr.find(R,"/"+U)){var B=Be(4);B[0]=55,B[1]=B[3]=50,B[2]=54,R.FileIndex.push({name:U,type:2,content:B,size:4,L:69,R:69,C:69}),R.FullPaths.push(R.FullPaths[0]+U),z(R)}}function z(R,U){V(R);for(var B=!1,F=!1,H=R.FullPaths.length-1;H>=0;--H){var q=R.FileIndex[H];switch(q.type){case 0:F?B=!0:(R.FileIndex.pop(),R.FullPaths.pop());break;case 1:case 2:case 5:F=!0,isNaN(q.R*q.L*q.C)&&(B=!0),q.R>-1&&q.L>-1&&q.R==q.L&&(B=!0);break;default:B=!0;break}}if(!(!B&&!U)){var ye=new Date(1987,1,19),Ne=0,fe=Object.create?Object.create(null):{},Se=[];for(H=0;H<R.FullPaths.length;++H)fe[R.FullPaths[H]]=!0,R.FileIndex[H].type!==0&&Se.push([R.FullPaths[H],R.FileIndex[H]]);for(H=0;H<Se.length;++H){var we=a(Se[H][0]);F=fe[we],F||(Se.push([we,{name:i(we).replace("/",""),type:1,clsid:ne,ct:ye,mt:ye,content:null}]),fe[we]=!0)}for(Se.sort(function(st,Ge){return r(st[0],Ge[0])}),R.FullPaths=[],R.FileIndex=[],H=0;H<Se.length;++H)R.FullPaths[H]=Se[H][0],R.FileIndex[H]=Se[H][1];for(H=0;H<Se.length;++H){var Ue=R.FileIndex[H],Ye=R.FullPaths[H];if(Ue.name=i(Ye).replace("/",""),Ue.L=Ue.R=Ue.C=-(Ue.color=1),Ue.size=Ue.content?Ue.content.length:0,Ue.start=0,Ue.clsid=Ue.clsid||ne,H===0)Ue.C=Se.length>1?1:-1,Ue.size=0,Ue.type=5;else if(Ye.slice(-1)=="/"){for(Ne=H+1;Ne<Se.length&&a(R.FullPaths[Ne])!=Ye;++Ne);for(Ue.C=Ne>=Se.length?-1:Ne,Ne=H+1;Ne<Se.length&&a(R.FullPaths[Ne])!=a(Ye);++Ne);Ue.R=Ne>=Se.length?-1:Ne,Ue.type=1}else a(R.FullPaths[H+1]||"")==a(Ye)&&(Ue.R=H+1),Ue.type=2}}}function ie(R,U){var B=U||{};if(B.fileType=="mad")return $t(R,B);switch(z(R),B.fileType){case"zip":return Ct(R,B)}var F=(function(st){for(var Ge=0,et=0,vt=0;vt<st.FileIndex.length;++vt){var Gt=st.FileIndex[vt];if(Gt.content){var Yt=Gt.content.length;Yt>0&&(Yt<4096?Ge+=Yt+63>>6:et+=Yt+511>>9)}}for(var Kt=st.FullPaths.length+3>>2,bn=Ge+7>>3,j=Ge+127>>7,ue=bn+et+Kt+j,je=ue+127>>7,lt=je<=109?0:Math.ceil((je-109)/127);ue+je+lt+127>>7>je;)lt=++je<=109?0:Math.ceil((je-109)/127);var yt=[1,lt,je,j,Kt,et,Ge,0];return st.FileIndex[0].size=Ge<<6,yt[7]=(st.FileIndex[0].start=yt[0]+yt[1]+yt[2]+yt[3]+yt[4]+yt[5])+(yt[6]+7>>3),yt})(R),H=Be(F[7]<<9),q=0,ye=0;{for(q=0;q<8;++q)H.write_shift(1,_e[q]);for(q=0;q<8;++q)H.write_shift(2,0);for(H.write_shift(2,62),H.write_shift(2,3),H.write_shift(2,65534),H.write_shift(2,9),H.write_shift(2,6),q=0;q<3;++q)H.write_shift(2,0);for(H.write_shift(4,0),H.write_shift(4,F[2]),H.write_shift(4,F[0]+F[1]+F[2]+F[3]-1),H.write_shift(4,0),H.write_shift(4,4096),H.write_shift(4,F[3]?F[0]+F[1]+F[2]-1:ee),H.write_shift(4,F[3]),H.write_shift(-4,F[1]?F[0]-1:ee),H.write_shift(4,F[1]),q=0;q<109;++q)H.write_shift(-4,q<F[2]?F[1]+q:-1)}if(F[1])for(ye=0;ye<F[1];++ye){for(;q<236+ye*127;++q)H.write_shift(-4,q<F[2]?F[1]+q:-1);H.write_shift(-4,ye===F[1]-1?ee:ye+1)}var Ne=function(st){for(ye+=st;q<ye-1;++q)H.write_shift(-4,q+1);st&&(++q,H.write_shift(-4,ee))};for(ye=q=0,ye+=F[1];q<ye;++q)H.write_shift(-4,ve.DIFSECT);for(ye+=F[2];q<ye;++q)H.write_shift(-4,ve.FATSECT);Ne(F[3]),Ne(F[4]);for(var fe=0,Se=0,we=R.FileIndex[0];fe<R.FileIndex.length;++fe)we=R.FileIndex[fe],we.content&&(Se=we.content.length,!(Se<4096)&&(we.start=ye,Ne(Se+511>>9)));for(Ne(F[6]+7>>3);H.l&511;)H.write_shift(-4,ve.ENDOFCHAIN);for(ye=q=0,fe=0;fe<R.FileIndex.length;++fe)we=R.FileIndex[fe],we.content&&(Se=we.content.length,!(!Se||Se>=4096)&&(we.start=ye,Ne(Se+63>>6)));for(;H.l&511;)H.write_shift(-4,ve.ENDOFCHAIN);for(q=0;q<F[4]<<2;++q){var Ue=R.FullPaths[q];if(!Ue||Ue.length===0){for(fe=0;fe<17;++fe)H.write_shift(4,0);for(fe=0;fe<3;++fe)H.write_shift(4,-1);for(fe=0;fe<12;++fe)H.write_shift(4,0);continue}we=R.FileIndex[q],q===0&&(we.start=we.size?we.start-1:ee);var Ye=q===0&&B.root||we.name;if(Se=2*(Ye.length+1),H.write_shift(64,Ye,"utf16le"),H.write_shift(2,Se),H.write_shift(1,we.type),H.write_shift(1,we.color),H.write_shift(-4,we.L),H.write_shift(-4,we.R),H.write_shift(-4,we.C),we.clsid)H.write_shift(16,we.clsid,"hex");else for(fe=0;fe<4;++fe)H.write_shift(4,0);H.write_shift(4,we.state||0),H.write_shift(4,0),H.write_shift(4,0),H.write_shift(4,0),H.write_shift(4,0),H.write_shift(4,we.start),H.write_shift(4,we.size),H.write_shift(4,0)}for(q=1;q<R.FileIndex.length;++q)if(we=R.FileIndex[q],we.size>=4096)if(H.l=we.start+1<<9,nr&&Buffer.isBuffer(we.content))we.content.copy(H,H.l,0,we.size),H.l+=we.size+511&-512;else{for(fe=0;fe<we.size;++fe)H.write_shift(1,we.content[fe]);for(;fe&511;++fe)H.write_shift(1,0)}for(q=1;q<R.FileIndex.length;++q)if(we=R.FileIndex[q],we.size>0&&we.size<4096)if(nr&&Buffer.isBuffer(we.content))we.content.copy(H,H.l,0,we.size),H.l+=we.size+63&-64;else{for(fe=0;fe<we.size;++fe)H.write_shift(1,we.content[fe]);for(;fe&63;++fe)H.write_shift(1,0)}if(nr)H.l=H.length;else for(;H.l<H.length;)H.write_shift(1,0);return H}function K(R,U){var B=R.FullPaths.map(function(fe){return fe.toUpperCase()}),F=B.map(function(fe){var Se=fe.split("/");return Se[Se.length-(fe.slice(-1)=="/"?2:1)]}),H=!1;U.charCodeAt(0)===47?(H=!0,U=B[0].slice(0,-1)+U):H=U.indexOf("/")!==-1;var q=U.toUpperCase(),ye=H===!0?B.indexOf(q):F.indexOf(q);if(ye!==-1)return R.FileIndex[ye];var Ne=!q.match(wu);for(q=q.replace(Bl,""),Ne&&(q=q.replace(wu,"!")),ye=0;ye<B.length;++ye)if((Ne?B[ye].replace(wu,"!"):B[ye]).replace(Bl,"")==q||(Ne?F[ye].replace(wu,"!"):F[ye]).replace(Bl,"")==q)return R.FileIndex[ye];return null}var xe=64,ee=-2,re="d0cf11e0a1b11ae1",_e=[208,207,17,224,161,177,26,225],ne="00000000000000000000000000000000",ve={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ee,FREESECT:-1,HEADER_SIGNATURE:re,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ne,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function le(R,U,B){p();var F=ie(R,B);h.writeFileSync(U,F)}function Ae(R){for(var U=new Array(R.length),B=0;B<R.length;++B)U[B]=String.fromCharCode(R[B]);return U.join("")}function M(R,U){var B=ie(R,U);switch(U&&U.type||"buffer"){case"file":return p(),h.writeFileSync(U.filename,B),B;case"binary":return typeof B=="string"?B:Ae(B);case"base64":return $l(typeof B=="string"?B:Ae(B));case"buffer":if(nr)return Buffer.isBuffer(B)?B:as(B);case"array":return typeof B=="string"?va(B):B}return B}var Q;function k(R){try{var U=R.InflateRaw,B=new U;if(B._processChunk(new Uint8Array([3,0]),B._finishFlushFlag),B.bytesRead)Q=R;else throw new Error("zlib does not expose bytesRead")}catch(F){console.error("cannot use native zlib: "+(F.message||F))}}function L(R,U){if(!Q)return ar(R,U);var B=Q.InflateRaw,F=new B,H=F._processChunk(R.slice(R.l),F._finishFlushFlag);return R.l+=F.bytesRead,H}function W(R){return Q?Q.deflateRawSync(R):ft(R)}var X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Me=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function qe(R){var U=(R<<1|R<<11)&139536|(R<<5|R<<15)&558144;return(U>>16|U>>8|U)&255}for(var Ce=typeof Uint8Array<"u",te=Ce?new Uint8Array(256):[],Pe=0;Pe<256;++Pe)te[Pe]=qe(Pe);function He(R,U){var B=te[R&255];return U<=8?B>>>8-U:(B=B<<8|te[R>>8&255],U<=16?B>>>16-U:(B=B<<8|te[R>>16&255],B>>>24-U))}function tt(R,U){var B=U&7,F=U>>>3;return(R[F]|(B<=6?0:R[F+1]<<8))>>>B&3}function Y(R,U){var B=U&7,F=U>>>3;return(R[F]|(B<=5?0:R[F+1]<<8))>>>B&7}function Re(R,U){var B=U&7,F=U>>>3;return(R[F]|(B<=4?0:R[F+1]<<8))>>>B&15}function nt(R,U){var B=U&7,F=U>>>3;return(R[F]|(B<=3?0:R[F+1]<<8))>>>B&31}function De(R,U){var B=U&7,F=U>>>3;return(R[F]|(B<=1?0:R[F+1]<<8))>>>B&127}function ut(R,U,B){var F=U&7,H=U>>>3,q=(1<<B)-1,ye=R[H]>>>F;return B<8-F||(ye|=R[H+1]<<8-F,B<16-F)||(ye|=R[H+2]<<16-F,B<24-F)||(ye|=R[H+3]<<24-F),ye&q}function ht(R,U,B){var F=U&7,H=U>>>3;return F<=5?R[H]|=(B&7)<<F:(R[H]|=B<<F&255,R[H+1]=(B&7)>>8-F),U+3}function At(R,U,B){var F=U&7,H=U>>>3;return B=(B&1)<<F,R[H]|=B,U+1}function mt(R,U,B){var F=U&7,H=U>>>3;return B<<=F,R[H]|=B&255,B>>>=8,R[H+1]=B,U+8}function Ie(R,U,B){var F=U&7,H=U>>>3;return B<<=F,R[H]|=B&255,B>>>=8,R[H+1]=B&255,R[H+2]=B>>>8,U+16}function rt(R,U){var B=R.length,F=2*B>U?2*B:U+5,H=0;if(B>=U)return R;if(nr){var q=k1(F);if(R.copy)R.copy(q);else for(;H<R.length;++H)q[H]=R[H];return q}else if(Ce){var ye=new Uint8Array(F);if(ye.set)ye.set(R);else for(;H<B;++H)ye[H]=R[H];return ye}return R.length=F,R}function xt(R){for(var U=new Array(R),B=0;B<R;++B)U[B]=0;return U}function Qt(R,U,B){var F=1,H=0,q=0,ye=0,Ne=0,fe=R.length,Se=Ce?new Uint16Array(32):xt(32);for(q=0;q<32;++q)Se[q]=0;for(q=fe;q<B;++q)R[q]=0;fe=R.length;var we=Ce?new Uint16Array(fe):xt(fe);for(q=0;q<fe;++q)Se[H=R[q]]++,F<H&&(F=H),we[q]=0;for(Se[0]=0,q=1;q<=F;++q)Se[q+16]=Ne=Ne+Se[q-1]<<1;for(q=0;q<fe;++q)Ne=R[q],Ne!=0&&(we[q]=Se[Ne+16]++);var Ue=0;for(q=0;q<fe;++q)if(Ue=R[q],Ue!=0)for(Ne=He(we[q],F)>>F-Ue,ye=(1<<F+4-Ue)-1;ye>=0;--ye)U[Ne|ye<<Ue]=Ue&15|q<<4;return F}var mr=Ce?new Uint16Array(512):xt(512),Mt=Ce?new Uint16Array(32):xt(32);if(!Ce){for(var ce=0;ce<512;++ce)mr[ce]=0;for(ce=0;ce<32;++ce)Mt[ce]=0}(function(){for(var R=[],U=0;U<32;U++)R.push(5);Qt(R,Mt,32);var B=[];for(U=0;U<=143;U++)B.push(8);for(;U<=255;U++)B.push(9);for(;U<=279;U++)B.push(7);for(;U<=287;U++)B.push(8);Qt(B,mr,288)})();var $e=(function(){for(var U=Ce?new Uint8Array(32768):[],B=0,F=0;B<Me.length-1;++B)for(;F<Me[B+1];++F)U[F]=B;for(;F<32768;++F)U[F]=29;var H=Ce?new Uint8Array(259):[];for(B=0,F=0;B<ge.length-1;++B)for(;F<ge[B+1];++F)H[F]=B;function q(Ne,fe){for(var Se=0;Se<Ne.length;){var we=Math.min(65535,Ne.length-Se),Ue=Se+we==Ne.length;for(fe.write_shift(1,+Ue),fe.write_shift(2,we),fe.write_shift(2,~we&65535);we-- >0;)fe[fe.l++]=Ne[Se++]}return fe.l}function ye(Ne,fe){for(var Se=0,we=0,Ue=Ce?new Uint16Array(32768):[];we<Ne.length;){var Ye=Math.min(65535,Ne.length-we);if(Ye<10){for(Se=ht(fe,Se,+(we+Ye==Ne.length)),Se&7&&(Se+=8-(Se&7)),fe.l=Se/8|0,fe.write_shift(2,Ye),fe.write_shift(2,~Ye&65535);Ye-- >0;)fe[fe.l++]=Ne[we++];Se=fe.l*8;continue}Se=ht(fe,Se,+(we+Ye==Ne.length)+2);for(var st=0;Ye-- >0;){var Ge=Ne[we];st=(st<<5^Ge)&32767;var et=-1,vt=0;if((et=Ue[st])&&(et|=we&-32768,et>we&&(et-=32768),et<we))for(;Ne[et+vt]==Ne[we+vt]&&vt<250;)++vt;if(vt>2){Ge=H[vt],Ge<=22?Se=mt(fe,Se,te[Ge+1]>>1)-1:(mt(fe,Se,3),Se+=5,mt(fe,Se,te[Ge-23]>>5),Se+=3);var Gt=Ge<8?0:Ge-4>>2;Gt>0&&(Ie(fe,Se,vt-ge[Ge]),Se+=Gt),Ge=U[we-et],Se=mt(fe,Se,te[Ge]>>3),Se-=3;var Yt=Ge<4?0:Ge-2>>1;Yt>0&&(Ie(fe,Se,we-et-Me[Ge]),Se+=Yt);for(var Kt=0;Kt<vt;++Kt)Ue[st]=we&32767,st=(st<<5^Ne[we])&32767,++we;Ye-=vt-1}else Ge<=143?Ge=Ge+48:Se=At(fe,Se,1),Se=mt(fe,Se,te[Ge]),Ue[st]=we&32767,++we}Se=mt(fe,Se,0)-1}return fe.l=(Se+7)/8|0,fe.l}return function(fe,Se){return fe.length<8?q(fe,Se):ye(fe,Se)}})();function ft(R){var U=Be(50+Math.floor(R.length*1.1)),B=$e(R,U);return U.slice(0,B)}var Dt=Ce?new Uint16Array(32768):xt(32768),sr=Ce?new Uint16Array(32768):xt(32768),Er=Ce?new Uint16Array(128):xt(128),br=1,er=1;function Cr(R,U){var B=nt(R,U)+257;U+=5;var F=nt(R,U)+1;U+=5;var H=Re(R,U)+4;U+=4;for(var q=0,ye=Ce?new Uint8Array(19):xt(19),Ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],fe=1,Se=Ce?new Uint8Array(8):xt(8),we=Ce?new Uint8Array(8):xt(8),Ue=ye.length,Ye=0;Ye<H;++Ye)ye[X[Ye]]=q=Y(R,U),fe<q&&(fe=q),Se[q]++,U+=3;var st=0;for(Se[0]=0,Ye=1;Ye<=fe;++Ye)we[Ye]=st=st+Se[Ye-1]<<1;for(Ye=0;Ye<Ue;++Ye)(st=ye[Ye])!=0&&(Ne[Ye]=we[st]++);var Ge=0;for(Ye=0;Ye<Ue;++Ye)if(Ge=ye[Ye],Ge!=0){st=te[Ne[Ye]]>>8-Ge;for(var et=(1<<7-Ge)-1;et>=0;--et)Er[st|et<<Ge]=Ge&7|Ye<<3}var vt=[];for(fe=1;vt.length<B+F;)switch(st=Er[De(R,U)],U+=st&7,st>>>=3){case 16:for(q=3+tt(R,U),U+=2,st=vt[vt.length-1];q-- >0;)vt.push(st);break;case 17:for(q=3+Y(R,U),U+=3;q-- >0;)vt.push(0);break;case 18:for(q=11+De(R,U),U+=7;q-- >0;)vt.push(0);break;default:vt.push(st),fe<st&&(fe=st);break}var Gt=vt.slice(0,B),Yt=vt.slice(B);for(Ye=B;Ye<286;++Ye)Gt[Ye]=0;for(Ye=F;Ye<30;++Ye)Yt[Ye]=0;return br=Qt(Gt,Dt,286),er=Qt(Yt,sr,30),U}function Ut(R,U){if(R[0]==3&&!(R[1]&3))return[fi(U),2];for(var B=0,F=0,H=k1(U||1<<18),q=0,ye=H.length>>>0,Ne=0,fe=0;(F&1)==0;){if(F=Y(R,B),B+=3,F>>>1)F>>1==1?(Ne=9,fe=5):(B=Cr(R,B),Ne=br,fe=er);else{B&7&&(B+=8-(B&7));var Se=R[B>>>3]|R[(B>>>3)+1]<<8;if(B+=32,Se>0)for(!U&&ye<q+Se&&(H=rt(H,q+Se),ye=H.length);Se-- >0;)H[q++]=R[B>>>3],B+=8;continue}for(;;){!U&&ye<q+32767&&(H=rt(H,q+32767),ye=H.length);var we=ut(R,B,Ne),Ue=F>>>1==1?mr[we]:Dt[we];if(B+=Ue&15,Ue>>>=4,(Ue>>>8&255)===0)H[q++]=Ue;else{if(Ue==256)break;Ue-=257;var Ye=Ue<8?0:Ue-4>>2;Ye>5&&(Ye=0);var st=q+ge[Ue];Ye>0&&(st+=ut(R,B,Ye),B+=Ye),we=ut(R,B,fe),Ue=F>>>1==1?Mt[we]:sr[we],B+=Ue&15,Ue>>>=4;var Ge=Ue<4?0:Ue-2>>1,et=Me[Ue];for(Ge>0&&(et+=ut(R,B,Ge),B+=Ge),!U&&ye<st&&(H=rt(H,st+100),ye=H.length);q<st;)H[q]=H[q-et],++q}}}return U?[H,B+7>>>3]:[H.slice(0,q),B+7>>>3]}function ar(R,U){var B=R.slice(R.l||0),F=Ut(B,U);return R.l+=F[1],F[0]}function ae(R,U){if(R)typeof console<"u"&&console.error(U);else throw new Error(U)}function ke(R,U){var B=R;Yn(B,0);var F=[],H=[],q={FileIndex:F,FullPaths:H};V(q,{root:U.root});for(var ye=B.length-4;(B[ye]!=80||B[ye+1]!=75||B[ye+2]!=5||B[ye+3]!=6)&&ye>=0;)--ye;B.l=ye+4,B.l+=4;var Ne=B.read_shift(2);B.l+=6;var fe=B.read_shift(4);for(B.l=fe,ye=0;ye<Ne;++ye){B.l+=20;var Se=B.read_shift(4),we=B.read_shift(4),Ue=B.read_shift(2),Ye=B.read_shift(2),st=B.read_shift(2);B.l+=8;var Ge=B.read_shift(4),et=f(B.slice(B.l+Ue,B.l+Ue+Ye));B.l+=Ue+Ye+st;var vt=B.l;B.l=Ge+4,pt(B,Se,we,q,et),B.l=vt}return q}function pt(R,U,B,F,H){R.l+=2;var q=R.read_shift(2),ye=R.read_shift(2),Ne=u(R);if(q&8257)throw new Error("Unsupported ZIP encryption");for(var fe=R.read_shift(4),Se=R.read_shift(4),we=R.read_shift(4),Ue=R.read_shift(2),Ye=R.read_shift(2),st="",Ge=0;Ge<Ue;++Ge)st+=String.fromCharCode(R[R.l++]);if(Ye){var et=f(R.slice(R.l,R.l+Ye));(et[21589]||{}).mt&&(Ne=et[21589].mt),((H||{})[21589]||{}).mt&&(Ne=H[21589].mt)}R.l+=Ye;var vt=R.slice(R.l,R.l+Se);switch(ye){case 8:vt=L(R,we);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ye)}var Gt=!1;q&8&&(fe=R.read_shift(4),fe==134695760&&(fe=R.read_shift(4),Gt=!0),Se=R.read_shift(4),we=R.read_shift(4)),Se!=U&&ae(Gt,"Bad compressed size: "+U+" != "+Se),we!=B&&ae(Gt,"Bad uncompressed size: "+B+" != "+we),fr(F,st,vt,{unsafe:!0,mt:Ne})}function Ct(R,U){var B=U||{},F=[],H=[],q=Be(1),ye=B.compression?8:0,Ne=0,fe=0,Se=0,we=0,Ue=0,Ye=R.FullPaths[0],st=Ye,Ge=R.FileIndex[0],et=[],vt=0;for(fe=1;fe<R.FullPaths.length;++fe)if(st=R.FullPaths[fe].slice(Ye.length),Ge=R.FileIndex[fe],!(!Ge.size||!Ge.content||st=="Sh33tJ5")){var Gt=we,Yt=Be(st.length);for(Se=0;Se<st.length;++Se)Yt.write_shift(1,st.charCodeAt(Se)&127);Yt=Yt.slice(0,Yt.l),et[Ue]=a6.buf(Ge.content,0);var Kt=Ge.content;ye==8&&(Kt=W(Kt)),q=Be(30),q.write_shift(4,67324752),q.write_shift(2,20),q.write_shift(2,Ne),q.write_shift(2,ye),Ge.mt?c(q,Ge.mt):q.write_shift(4,0),q.write_shift(-4,et[Ue]),q.write_shift(4,Kt.length),q.write_shift(4,Ge.content.length),q.write_shift(2,Yt.length),q.write_shift(2,0),we+=q.length,F.push(q),we+=Yt.length,F.push(Yt),we+=Kt.length,F.push(Kt),q=Be(46),q.write_shift(4,33639248),q.write_shift(2,0),q.write_shift(2,20),q.write_shift(2,Ne),q.write_shift(2,ye),q.write_shift(4,0),q.write_shift(-4,et[Ue]),q.write_shift(4,Kt.length),q.write_shift(4,Ge.content.length),q.write_shift(2,Yt.length),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(4,0),q.write_shift(4,Gt),vt+=q.l,H.push(q),vt+=Yt.length,H.push(Yt),++Ue}return q=Be(22),q.write_shift(4,101010256),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(2,Ue),q.write_shift(2,Ue),q.write_shift(4,vt),q.write_shift(4,we),q.write_shift(2,0),un([un(F),un(H),q])}var tr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function at(R,U){if(R.ctype)return R.ctype;var B=R.name||"",F=B.match(/\.([^\.]+)$/);return F&&tr[F[1]]||U&&(F=(B=U).match(/[\.\\]([^\.\\])+$/),F&&tr[F[1]])?tr[F[1]]:"application/octet-stream"}function kt(R){for(var U=$l(R),B=[],F=0;F<U.length;F+=76)B.push(U.slice(F,F+76));return B.join(`\r
`)+`\r
`}function Rt(R){var U=R.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Se){var we=Se.charCodeAt(0).toString(16).toUpperCase();return"="+(we.length==1?"0"+we:we)});U=U.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),U.charAt(0)==`
`&&(U="=0D"+U.slice(1)),U=U.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var B=[],F=U.split(`\r
`),H=0;H<F.length;++H){var q=F[H];if(q.length==0){B.push("");continue}for(var ye=0;ye<q.length;){var Ne=76,fe=q.slice(ye,ye+Ne);fe.charAt(Ne-1)=="="?Ne--:fe.charAt(Ne-2)=="="?Ne-=2:fe.charAt(Ne-3)=="="&&(Ne-=3),fe=q.slice(ye,ye+Ne),ye+=Ne,ye<q.length&&(fe+="="),B.push(fe)}}return B.join(`\r
`)}function yn(R){for(var U=[],B=0;B<R.length;++B){for(var F=R[B];B<=R.length&&F.charAt(F.length-1)=="=";)F=F.slice(0,F.length-1)+R[++B];U.push(F)}for(var H=0;H<U.length;++H)U[H]=U[H].replace(/[=][0-9A-Fa-f]{2}/g,function(q){return String.fromCharCode(parseInt(q.slice(1),16))});return va(U.join(`\r
`))}function wr(R,U,B){for(var F="",H="",q="",ye,Ne=0;Ne<10;++Ne){var fe=U[Ne];if(!fe||fe.match(/^\s*$/))break;var Se=fe.match(/^(.*?):\s*([^\s].*)$/);if(Se)switch(Se[1].toLowerCase()){case"content-location":F=Se[2].trim();break;case"content-type":q=Se[2].trim();break;case"content-transfer-encoding":H=Se[2].trim();break}}switch(++Ne,H.toLowerCase()){case"base64":ye=va(rs(U.slice(Ne).join("")));break;case"quoted-printable":ye=yn(U.slice(Ne));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+H)}var we=fr(R,F.slice(B.length),ye,{unsafe:!0});q&&(we.ctype=q)}function vn(R,U){if(Ae(R.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var B=U&&U.root||"",F=(nr&&Buffer.isBuffer(R)?R.toString("binary"):Ae(R)).split(`\r
`),H=0,q="";for(H=0;H<F.length;++H)if(q=F[H],!!/^Content-Location:/i.test(q)&&(q=q.slice(q.indexOf("file")),B||(B=q.slice(0,q.lastIndexOf("/")+1)),q.slice(0,B.length)!=B))for(;B.length>0&&(B=B.slice(0,B.length-1),B=B.slice(0,B.lastIndexOf("/")+1),q.slice(0,B.length)!=B););var ye=(F[1]||"").match(/boundary="(.*?)"/);if(!ye)throw new Error("MAD cannot find boundary");var Ne="--"+(ye[1]||""),fe=[],Se=[],we={FileIndex:fe,FullPaths:Se};V(we);var Ue,Ye=0;for(H=0;H<F.length;++H){var st=F[H];st!==Ne&&st!==Ne+"--"||(Ye++&&wr(we,F.slice(Ue,H),B),Ue=H)}return we}function $t(R,U){var B=U||{},F=B.boundary||"SheetJS";F="------="+F;for(var H=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+F.slice(2)+'"',"","",""],q=R.FullPaths[0],ye=q,Ne=R.FileIndex[0],fe=1;fe<R.FullPaths.length;++fe)if(ye=R.FullPaths[fe].slice(q.length),Ne=R.FileIndex[fe],!(!Ne.size||!Ne.content||ye=="Sh33tJ5")){ye=ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(vt){return"_x"+vt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(vt){return"_u"+vt.charCodeAt(0).toString(16)+"_"});for(var Se=Ne.content,we=nr&&Buffer.isBuffer(Se)?Se.toString("binary"):Ae(Se),Ue=0,Ye=Math.min(1024,we.length),st=0,Ge=0;Ge<=Ye;++Ge)(st=we.charCodeAt(Ge))>=32&&st<128&&++Ue;var et=Ue>=Ye*4/5;H.push(F),H.push("Content-Location: "+(B.root||"file:///C:/SheetJS/")+ye),H.push("Content-Transfer-Encoding: "+(et?"quoted-printable":"base64")),H.push("Content-Type: "+at(Ne,ye)),H.push(""),H.push(et?Rt(we):kt(we))}return H.push(F+`--\r
`),H.join(`\r
`)}function jt(R){var U={};return V(U,R),U}function fr(R,U,B,F){var H=F&&F.unsafe;H||V(R);var q=!H&&xr.find(R,U);if(!q){var ye=R.FullPaths[0];U.slice(0,ye.length)==ye?ye=U:(ye.slice(-1)!="/"&&(ye+="/"),ye=(ye+U).replace("//","/")),q={name:i(U),type:2},R.FileIndex.push(q),R.FullPaths.push(ye),H||xr.utils.cfb_gc(R)}return q.content=B,q.size=B?B.length:0,F&&(F.CLSID&&(q.clsid=F.CLSID),F.mt&&(q.mt=F.mt),F.ct&&(q.ct=F.ct)),q}function Ln(R,U){V(R);var B=xr.find(R,U);if(B){for(var F=0;F<R.FileIndex.length;++F)if(R.FileIndex[F]==B)return R.FileIndex.splice(F,1),R.FullPaths.splice(F,1),!0}return!1}function da(R,U,B){V(R);var F=xr.find(R,U);if(F){for(var H=0;H<R.FileIndex.length;++H)if(R.FileIndex[H]==F)return R.FileIndex[H].name=i(B),R.FullPaths[H]=B,!0}return!1}function Pn(R){z(R,!0)}return t.find=K,t.read=oe,t.parse=g,t.write=M,t.writeFile=le,t.utils={cfb_new:jt,cfb_add:fr,cfb_del:Ln,cfb_mov:da,cfb_gc:Pn,ReadShift:Fl,CheckField:Hv,prep_blob:Yn,bconcat:un,use_zlib:k,_deflateRaw:ft,_inflateRaw:ar,consts:ve},t})();function s6(e){return typeof e=="string"?nd(e):Array.isArray(e)?Dj(e):e}function rc(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=nd(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Vl(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var i=new Blob([s6(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if(typeof saveAs<"u")return saveAs(i,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var c=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),chrome.downloads.download({url:c,filename:e,saveAs:!0});var u=document.createElement("a");if(u.download!=null)return u.download=e,u.href=c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),c}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var f=File(e);return f.open("w"),f.encoding="binary",Array.isArray(t)&&(t=tc(t)),f.write(t),f.close(),t}catch(h){if(!h.message||!h.message.match(/onstruct/))throw h}throw new Error("cannot save file "+e)}function hn(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function I1(e,t){for(var r=[],a=hn(e),i=0;i!==a.length;++i)r[e[a[i]][t]]==null&&(r[e[a[i]][t]]=a[i]);return r}function I0(e){for(var t=[],r=hn(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function id(e){for(var t=[],r=hn(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function i6(e){for(var t=[],r=hn(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var Wu=new Date(1899,11,30,0,0,0);function Mn(e,t){var r=e.getTime(),a=Wu.getTime()+(e.getTimezoneOffset()-Wu.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var kv=new Date,o6=Wu.getTime()+(kv.getTimezoneOffset()-Wu.getTimezoneOffset())*6e4,B1=kv.getTimezoneOffset();function jv(e){var t=new Date;return t.setTime(e*24*60*60*1e3+o6),t.getTimezoneOffset()!==B1&&t.setTime(t.getTime()+(t.getTimezoneOffset()-B1)*6e4),t}var M1=new Date("2017-02-19T19:06:09.000Z"),Cv=isNaN(M1.getFullYear())?new Date("2/19/17"):M1,l6=Cv.getFullYear()==2017;function Cn(e,t){var r=new Date(e);if(l6)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Cv.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function od(e,t){if(nr&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(c){return r[c]||c})}catch{}for(var a=[],i=0;i!=e.length;++i)a.push(String.fromCharCode(e[i]));return a.join("")}function Fn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Fn(e[r]));return t}function Or(e,t){for(var r="";r.length<t;)r+=e;return r}function Za(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(i,c){return r=-r,c}),!isNaN(t=Number(a)))?t/r:t}var c6=["january","february","march","april","may","june","july","august","september","october","november","december"];function Gl(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),i=t.getMonth(),c=t.getDate();if(isNaN(c))return r;var u=e.toLowerCase();if(u.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(u=u.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),u.length>3&&c6.indexOf(u)==-1)return r}else if(u.match(/[a-z]/))return r;return a<0||a>8099?r:(i>0||c>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function Bt(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return nr?a=as(r):a=Nj(r),xr.utils.cfb_add(e,t,a)}xr.utils.cfb_add(e,t,r)}else e.file(t,r)}function B0(){return xr.utils.cfb_new()}var Hr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,u6={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},M0=I0(u6),F0=/[&<>'"]/g,d6=/[\u0000-\u0008\u000b-\u001f]/g;function ur(e){var t=e+"";return t.replace(F0,function(r){return M0[r]}).replace(d6,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function F1(e){return ur(e).replace(/ /g,"_x0020_")}var Av=/[\u0000-\u001f]/g;function f6(e){var t=e+"";return t.replace(F0,function(r){return M0[r]}).replace(/\n/g,"<br/>").replace(Av,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function h6(e){var t=e+"";return t.replace(F0,function(r){return M0[r]}).replace(Av,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function p6(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function g6(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Nh(e){for(var t="",r=0,a=0,i=0,c=0,u=0,f=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(i=e.charCodeAt(r++),a>191&&a<224){u=(a&31)<<6,u|=i&63,t+=String.fromCharCode(u);continue}if(c=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(i&63)<<6|c&63);continue}u=e.charCodeAt(r++),f=((a&7)<<18|(i&63)<<12|(c&63)<<6|u&63)-65536,t+=String.fromCharCode(55296+(f>>>10&1023)),t+=String.fromCharCode(56320+(f&1023))}return t}function L1(e){var t=fi(2*e.length),r,a,i=1,c=0,u=0,f;for(a=0;a<e.length;a+=i)i=1,(f=e.charCodeAt(a))<128?r=f:f<224?(r=(f&31)*64+(e.charCodeAt(a+1)&63),i=2):f<240?(r=(f&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),i=3):(i=4,r=(f&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,u=55296+(r>>>10&1023),r=56320+(r&1023)),u!==0&&(t[c++]=u&255,t[c++]=u>>>8,u=0),t[c++]=r%256,t[c++]=r>>>8;return t.slice(0,c).toString("ucs2")}function P1(e){return as(e,"binary").toString("utf8")}var Eu="foo bar bazâð£",Ml=nr&&(P1(Eu)==Nh(Eu)&&P1||L1(Eu)==Nh(Eu)&&L1)||Nh,Vl=nr?function(e){return as(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,i=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,i=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},x6=(function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<e.length;++i)a=a.replace(e[i][0],e[i][1]);return a}})(),Rv=/(^\s|\s$|\n)/;function dn(e,t){return"<"+e+(t.match(Rv)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Yl(e){return hn(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Je(e,t,r){return"<"+e+(r!=null?Yl(r):"")+(t!=null?(t.match(Rv)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function i0(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function m6(e,t){switch(typeof e){case"string":var r=Je("vt:lpwstr",ur(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Je((e|0)==e?"vt:i4":"vt:r8",ur(String(e)));case"boolean":return Je("vt:bool",e?"true":"false")}if(e instanceof Date)return Je("vt:filetime",i0(e));throw new Error("Unable to serialize "+e)}var tn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Co=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Kn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function y6(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),i=e[t+6]&15,c=5;c>=0;--c)i=i*256+e[t+c];return a==2047?i==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,i+=Math.pow(2,52)),r*Math.pow(2,a-52)*i)}function v6(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,i=0,c=0,u=a?-t:t;isFinite(u)?u==0?i=c=0:(i=Math.floor(Math.log(u)/Math.LN2),c=u*Math.pow(2,52-i),i<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?i=-1022:(c-=Math.pow(2,52),i+=1023)):(i=2047,c=isNaN(t)?26985:0);for(var f=0;f<=5;++f,c/=256)e[r+f]=c&255;e[r+6]=(i&15)<<4|c&15,e[r+7]=i>>4|a}var z1=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var i=0,c=e[0][a].length;i<c;i+=r)t.push.apply(t,e[0][a].slice(i,i+r));return t},U1=nr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:as(t)})):z1(e)}:z1,W1=function(e,t,r){for(var a=[],i=t;i<r;i+=2)a.push(String.fromCharCode(Rl(e,i)));return a.join("").replace(Bl,"")},L0=nr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Bl,""):W1(e,t,r)}:W1,H1=function(e,t,r){for(var a=[],i=t;i<t+r;++i)a.push(("0"+e[i].toString(16)).slice(-2));return a.join("")},Dv=nr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):H1(e,t,r)}:H1,q1=function(e,t,r){for(var a=[],i=t;i<r;i++)a.push(String.fromCharCode(go(e,i)));return a.join("")},nc=nr?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):q1(t,r,a)}:q1,Nv=function(e,t){var r=Xn(e,t);return r>0?nc(e,t+4,t+4+r-1):""},Ov=Nv,Iv=function(e,t){var r=Xn(e,t);return r>0?nc(e,t+4,t+4+r-1):""},Bv=Iv,Mv=function(e,t){var r=2*Xn(e,t);return r>0?nc(e,t+4,t+4+r-1):""},Fv=Mv,Lv=function(t,r){var a=Xn(t,r);return a>0?L0(t,r+4,r+4+a):""},Pv=Lv,zv=function(e,t){var r=Xn(e,t);return r>0?nc(e,t+4,t+4+r):""},Uv=zv,Wv=function(e,t){return y6(e,t)},Hu=Wv,P0=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};nr&&(Ov=function(t,r){if(!Buffer.isBuffer(t))return Nv(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},Bv=function(t,r){if(!Buffer.isBuffer(t))return Iv(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},Fv=function(t,r){if(!Buffer.isBuffer(t))return Mv(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},Pv=function(t,r){if(!Buffer.isBuffer(t))return Lv(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},Uv=function(t,r){if(!Buffer.isBuffer(t))return zv(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},Hu=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Wv(t,r)},P0=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var go=function(e,t){return e[t]},Rl=function(e,t){return e[t+1]*256+e[t]},b6=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Xn=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},ii=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},_6=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Fl(e,t){var r="",a,i,c=[],u,f,h,p;switch(t){case"dbcs":if(p=this.l,nr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(h=0;h<e;++h)r+=String.fromCharCode(Rl(this,p)),p+=2;e*=2;break;case"utf8":r=nc(this,this.l,this.l+e);break;case"utf16le":e*=2,r=L0(this,this.l,this.l+e);break;case"wstr":return Fl.call(this,e,"dbcs");case"lpstr-ansi":r=Ov(this,this.l),e=4+Xn(this,this.l);break;case"lpstr-cp":r=Bv(this,this.l),e=4+Xn(this,this.l);break;case"lpwstr":r=Fv(this,this.l),e=4+2*Xn(this,this.l);break;case"lpp4":e=4+Xn(this,this.l),r=Pv(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Xn(this,this.l),r=Uv(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(u=go(this,this.l+e++))!==0;)c.push(Su(u));r=c.join("");break;case"_wstr":for(e=0,r="";(u=Rl(this,this.l+e))!==0;)c.push(Su(u)),e+=2;e+=2,r=c.join("");break;case"dbcs-cont":for(r="",p=this.l,h=0;h<e;++h){if(this.lens&&this.lens.indexOf(p)!==-1)return u=go(this,p),this.l=p+1,f=Fl.call(this,e-h,u?"dbcs-cont":"sbcs-cont"),c.join("")+f;c.push(Su(Rl(this,p))),p+=2}r=c.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",p=this.l,h=0;h!=e;++h){if(this.lens&&this.lens.indexOf(p)!==-1)return u=go(this,p),this.l=p+1,f=Fl.call(this,e-h,u?"dbcs-cont":"sbcs-cont"),c.join("")+f;c.push(Su(go(this,p))),p+=1}r=c.join("");break;default:switch(e){case 1:return a=go(this,this.l),this.l++,a;case 2:return a=(t==="i"?b6:Rl)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?ii:_6)(this,this.l),this.l+=4,a):(i=Xn(this,this.l),this.l+=4,i);case 8:case-8:if(t==="f")return e==8?i=Hu(this,this.l):i=Hu([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:r=Dv(this,this.l,e);break}}return this.l+=e,r}var S6=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},w6=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},T6=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function E6(e,t,r){var a=0,i=0;if(r==="dbcs"){for(i=0;i!=t.length;++i)T6(this,t.charCodeAt(i),this.l+2*i);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=t.charCodeAt(i)&255;a=t.length}else if(r==="hex"){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var c=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var u=t.charCodeAt(i);this[this.l++]=u&255,this[this.l++]=u>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,S6(this,t,this.l);break;case 8:if(a=8,r==="f"){v6(this,t,this.l);break}case 16:break;case-4:a=4,w6(this,t,this.l);break}return this.l+=a,this}function Hv(e,t){var r=Dv(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Yn(e,t){e.l=t,e.read_shift=Fl,e.chk=Hv,e.write_shift=E6}function Oa(e,t){e.l+=t}function Be(e){var t=fi(e);return Yn(t,0),t}function Bn(){var e=[],t=nr?256:2048,r=function(p){var g=Be(p);return Yn(g,0),g},a=r(t),i=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},c=function(p){return a&&p<a.length-a.l?a:(i(),a=r(Math.max(p+1,t)))},u=function(){return i(),un(e)},f=function(p){i(),a=p,a.l==null&&(a.l=a.length),c(t)};return{next:c,push:f,end:u,_bufs:e}}function We(e,t,r,a){var i=+t,c;if(!isNaN(i)){a||(a=yD[i].p||(r||[]).length||0),c=1+(i>=128?1:0)+1,a>=128&&++c,a>=16384&&++c,a>=2097152&&++c;var u=e.next(c);i<=127?u.write_shift(1,i):(u.write_shift(1,(i&127)+128),u.write_shift(1,i>>7));for(var f=0;f!=4;++f)if(a>=128)u.write_shift(1,(a&127)+128),a>>=7;else{u.write_shift(1,a);break}a>0&&P0(r)&&e.push(r)}}function Ll(e,t,r){var a=Fn(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function $1(e,t,r){var a=Fn(e);return a.s=Ll(a.s,t.s,r),a.e=Ll(a.e,t.s,r),a}function Pl(e,t){if(e.cRel&&e.c<0)for(e=Fn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Fn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=dr(e);return!e.cRel&&e.cRel!=null&&(r=C6(r)),!e.rRel&&e.rRel!=null&&(r=k6(r)),r}function Oh(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+xn(e.s.c)+":"+(e.e.cRel?"":"$")+xn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+fn(e.s.r)+":"+(e.e.rRel?"":"$")+fn(e.e.r):Pl(e.s,t.biff)+":"+Pl(e.e,t.biff)}function z0(e){return parseInt(j6(e),10)-1}function fn(e){return""+(e+1)}function k6(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function j6(e){return e.replace(/\$(\d+)$/,"$1")}function U0(e){for(var t=A6(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function xn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function C6(e){return e.replace(/^([A-Z])/,"$$$1")}function A6(e){return e.replace(/^\$([A-Z])/,"$1")}function R6(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function rn(e){for(var t=0,r=0,a=0;a<e.length;++a){var i=e.charCodeAt(a);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:t-1}}function dr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Qn(e){var t=e.indexOf(":");return t==-1?{s:rn(e),e:rn(e)}:{s:rn(e.slice(0,t)),e:rn(e.slice(t+1))}}function Wr(e,t){return typeof t>"u"||typeof t=="number"?Wr(e.s,e.e):(typeof e!="string"&&(e=dr(e)),typeof t!="string"&&(t=dr(t)),e==t?e:e+":"+t)}function Tr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,i=0,c=e.length;for(r=0;a<c&&!((i=e.charCodeAt(a)-64)<1||i>26);++a)r=26*r+i;for(t.s.c=--r,r=0;a<c&&!((i=e.charCodeAt(a)-48)<0||i>9);++a)r=10*r+i;if(t.s.r=--r,a===c||i!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=c&&!((i=e.charCodeAt(a)-64)<1||i>26);++a)r=26*r+i;for(t.e.c=--r,r=0;a!=c&&!((i=e.charCodeAt(a)-48)<0||i>9);++a)r=10*r+i;return t.e.r=--r,t}function G1(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Is(e.z,r?Mn(t):t)}catch{}try{return e.w=Is((e.XF||{}).numFmtId||(r?14:0),r?Mn(t):t)}catch{return""+t}}function ns(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?ac[e.v]||e.v:t==null?G1(e,e.v):G1(e,t))}function xi(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function qv(e,t,r){var a=r||{},i=e?Array.isArray(e):a.dense,c=e||(i?[]:{}),u=0,f=0;if(c&&a.origin!=null){if(typeof a.origin=="number")u=a.origin;else{var h=typeof a.origin=="string"?rn(a.origin):a.origin;u=h.r,f=h.c}c["!ref"]||(c["!ref"]="A1:A1")}var p={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var g=Tr(c["!ref"]);p.s.c=g.s.c,p.s.r=g.s.r,p.e.c=Math.max(p.e.c,g.e.c),p.e.r=Math.max(p.e.r,g.e.r),u==-1&&(p.e.r=u=g.e.r+1)}for(var y=0;y!=t.length;++y)if(t[y]){if(!Array.isArray(t[y]))throw new Error("aoa_to_sheet expects an array of arrays");for(var v=0;v!=t[y].length;++v)if(!(typeof t[y][v]>"u")){var b={v:t[y][v]},w=u+y,_=f+v;if(p.s.r>w&&(p.s.r=w),p.s.c>_&&(p.s.c=_),p.e.r<w&&(p.e.r=w),p.e.c<_&&(p.e.c=_),t[y][v]&&typeof t[y][v]=="object"&&!Array.isArray(t[y][v])&&!(t[y][v]instanceof Date))b=t[y][v];else if(Array.isArray(b.v)&&(b.f=t[y][v][1],b.v=b.v[0]),b.v===null)if(b.f)b.t="n";else if(a.nullError)b.t="e",b.v=0;else if(a.sheetStubs)b.t="z";else continue;else typeof b.v=="number"?b.t="n":typeof b.v=="boolean"?b.t="b":b.v instanceof Date?(b.z=a.dateNF||Ir[14],a.cellDates?(b.t="d",b.w=Is(b.z,Mn(b.v))):(b.t="n",b.v=Mn(b.v),b.w=Is(b.z,b.v))):b.t="s";if(i)c[w]||(c[w]=[]),c[w][_]&&c[w][_].z&&(b.z=c[w][_].z),c[w][_]=b;else{var S=dr({c:_,r:w});c[S]&&c[S].z&&(b.z=c[S].z),c[S]=b}}}return p.s.c<1e7&&(c["!ref"]=Wr(p)),c}function Ao(e,t){return qv(null,e,t)}function D6(e){return e.read_shift(4,"i")}function _a(e,t){return t||(t=Be(4)),t.write_shift(4,e),t}function mn(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function nn(e,t){var r=!1;return t==null&&(r=!0,t=Be(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function N6(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function O6(e,t){return t||(t=Be(4)),t.write_shift(2,0),t.write_shift(2,0),t}function W0(e,t){var r=e.l,a=e.read_shift(1),i=mn(e),c=[],u={t:i,h:i};if((a&1)!==0){for(var f=e.read_shift(4),h=0;h!=f;++h)c.push(N6(e));u.r=c}else u.r=[{ich:0,ifnt:0}];return e.l=r+t,u}function I6(e,t){var r=!1;return t==null&&(r=!0,t=Be(15+4*e.t.length)),t.write_shift(1,0),nn(e.t,t),r?t.slice(0,t.l):t}var B6=W0;function M6(e,t){var r=!1;return t==null&&(r=!0,t=Be(23+4*e.t.length)),t.write_shift(1,1),nn(e.t,t),t.write_shift(4,1),O6({},t),r?t.slice(0,t.l):t}function ua(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function mi(e,t){return t==null&&(t=Be(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function yi(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function vi(e,t){return t==null&&(t=Be(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var F6=mn,$v=nn;function H0(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function qu(e,t){var r=!1;return t==null&&(r=!0,t=Be(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var L6=mn,o0=H0,q0=qu;function Gv(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var i=a===0?Hu([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):ii(t,0)>>2;return r?i/100:i}function Vv(e,t){t==null&&(t=Be(4));var r=0,a=0,i=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?i:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Yv(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function P6(e,t){return t||(t=Be(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var bi=Yv,Ro=P6;function Do(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function hi(e,t){return(t||Be(8)).write_shift(8,e,"f")}function z6(e){var t={},r=e.read_shift(1),a=r>>>1,i=e.read_shift(1),c=e.read_shift(2,"i"),u=e.read_shift(1),f=e.read_shift(1),h=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=i;var p=K6[i];p&&(t.rgb=ny(p));break;case 2:t.rgb=ny([u,f,h]);break;case 3:t.theme=i;break}return c!=0&&(t.tint=c>0?c/32767:c/32768),t}function $u(e,t){if(t||(t=Be(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function U6(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function W6(e,t){t||(t=Be(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var Kv=2,Vn=3,ku=11,Gu=19,ju=64,H6=65,q6=71,$6=4108,G6=4126,cn=80,V1={1:{n:"CodePage",t:Kv},2:{n:"Category",t:cn},3:{n:"PresentationFormat",t:cn},4:{n:"ByteCount",t:Vn},5:{n:"LineCount",t:Vn},6:{n:"ParagraphCount",t:Vn},7:{n:"SlideCount",t:Vn},8:{n:"NoteCount",t:Vn},9:{n:"HiddenCount",t:Vn},10:{n:"MultimediaClipCount",t:Vn},11:{n:"ScaleCrop",t:ku},12:{n:"HeadingPairs",t:$6},13:{n:"TitlesOfParts",t:G6},14:{n:"Manager",t:cn},15:{n:"Company",t:cn},16:{n:"LinksUpToDate",t:ku},17:{n:"CharacterCount",t:Vn},19:{n:"SharedDoc",t:ku},22:{n:"HyperlinksChanged",t:ku},23:{n:"AppVersion",t:Vn,p:"version"},24:{n:"DigSig",t:H6},26:{n:"ContentType",t:cn},27:{n:"ContentStatus",t:cn},28:{n:"Language",t:cn},29:{n:"Version",t:cn},255:{},2147483648:{n:"Locale",t:Gu},2147483651:{n:"Behavior",t:Gu},1919054434:{}},Y1={1:{n:"CodePage",t:Kv},2:{n:"Title",t:cn},3:{n:"Subject",t:cn},4:{n:"Author",t:cn},5:{n:"Keywords",t:cn},6:{n:"Comments",t:cn},7:{n:"Template",t:cn},8:{n:"LastAuthor",t:cn},9:{n:"RevNumber",t:cn},10:{n:"EditTime",t:ju},11:{n:"LastPrinted",t:ju},12:{n:"CreatedDate",t:ju},13:{n:"ModifiedDate",t:ju},14:{n:"PageCount",t:Vn},15:{n:"WordCount",t:Vn},16:{n:"CharCount",t:Vn},17:{n:"Thumbnail",t:q6},18:{n:"Application",t:cn},19:{n:"DocSecurity",t:Vn},255:{},2147483648:{n:"Locale",t:Gu},2147483651:{n:"Behavior",t:Gu},1919054434:{}};function V6(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Y6=V6([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),K6=Fn(Y6),ac={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},X6={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Cu={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Xv(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Qv(e,t){var r=i6(X6),a=[],i;a[a.length]=Hr,a[a.length]=Je("Types",null,{xmlns:tn.CT,"xmlns:xsd":tn.xsd,"xmlns:xsi":tn.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(h){return Je("Default",null,{Extension:h[0],ContentType:h[1]})}));var c=function(h){e[h]&&e[h].length>0&&(i=e[h][0],a[a.length]=Je("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:Cu[h][t.bookType]||Cu[h].xlsx}))},u=function(h){(e[h]||[]).forEach(function(p){a[a.length]=Je("Override",null,{PartName:(p[0]=="/"?"":"/")+p,ContentType:Cu[h][t.bookType]||Cu[h].xlsx})})},f=function(h){(e[h]||[]).forEach(function(p){a[a.length]=Je("Override",null,{PartName:(p[0]=="/"?"":"/")+p,ContentType:r[h][0]})})};return c("workbooks"),u("sheets"),u("charts"),f("themes"),["strs","styles"].forEach(c),["coreprops","extprops","custprops"].forEach(f),f("vba"),f("comments"),f("threadedcomments"),f("drawings"),u("metadata"),f("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var Zt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Jv(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function yo(e){var t=[Hr,Je("Relationships",null,{xmlns:tn.RELS})];return hn(e["!id"]).forEach(function(r){t[t.length]=Je("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function cr(e,t,r,a,i,c){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=a,i.Target=r,[Zt.HLINK,Zt.XPATH,Zt.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function Q6(e){var t=[Hr];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function K1(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function J6(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Z6(e){var t=[Hr];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(K1(e[r][0],e[r][1])),t.push(J6("",e[r][0]));return t.push(K1("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Zv(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Fu.version+"</meta:generator></office:meta></office:document-meta>"}var ci=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Ih(e,t,r,a,i){i[e]!=null||t==null||t===""||(i[e]=t,t=ur(t),a[a.length]=r?Je(e,t,r):dn(e,t))}function eb(e,t){var r=t||{},a=[Hr,Je("cp:coreProperties",null,{"xmlns:cp":tn.CORE_PROPS,"xmlns:dc":tn.dc,"xmlns:dcterms":tn.dcterms,"xmlns:dcmitype":tn.dcmitype,"xmlns:xsi":tn.xsi})],i={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&Ih("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:i0(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,i),e.ModifiedDate!=null&&Ih("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:i0(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,i));for(var c=0;c!=ci.length;++c){var u=ci[c],f=r.Props&&r.Props[u[1]]!=null?r.Props[u[1]]:e?e[u[1]]:null;f===!0?f="1":f===!1?f="0":typeof f=="number"&&(f=String(f)),f!=null&&Ih(u[0],f,null,a,i)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var vo=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],tb=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function rb(e){var t=[],r=Je;return e||(e={}),e.Application="SheetJS",t[t.length]=Hr,t[t.length]=Je("Properties",null,{xmlns:tn.EXT_PROPS,"xmlns:vt":tn.vt}),vo.forEach(function(a){if(e[a[1]]!==void 0){var i;switch(a[2]){case"string":i=ur(String(e[a[1]]));break;case"bool":i=e[a[1]]?"true":"false";break}i!==void 0&&(t[t.length]=r(a[0],i))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+ur(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function nb(e){var t=[Hr,Je("Properties",null,{xmlns:tn.CUST_PROPS,"xmlns:vt":tn.vt})];if(!e)return t.join("");var r=1;return hn(e).forEach(function(i){++r,t[t.length]=Je("property",m6(e[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ur(i)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var X1={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function eC(e,t){var r=[];return hn(X1).map(function(a){for(var i=0;i<ci.length;++i)if(ci[i][1]==a)return ci[i];for(i=0;i<vo.length;++i)if(vo[i][1]==a)return vo[i];throw a}).forEach(function(a){if(e[a[1]]!=null){var i=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(dn(X1[a[1]]||a[1],i))}}),Je("DocumentProperties",r.join(""),{xmlns:Kn.o})}function tC(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",i=[];return e&&hn(e).forEach(function(c){if(Object.prototype.hasOwnProperty.call(e,c)){for(var u=0;u<ci.length;++u)if(c==ci[u][1])return;for(u=0;u<vo.length;++u)if(c==vo[u][1])return;for(u=0;u<r.length;++u)if(c==r[u])return;var f=e[c],h="string";typeof f=="number"?(h="float",f=String(f)):f===!0||f===!1?(h="boolean",f=f?"1":"0"):f=String(f),i.push(Je(F1(c),f,{"dt:dt":h}))}}),t&&hn(t).forEach(function(c){if(Object.prototype.hasOwnProperty.call(t,c)&&!(e&&Object.prototype.hasOwnProperty.call(e,c))){var u=t[c],f="string";typeof u=="number"?(f="float",u=String(u)):u===!0||u===!1?(f="boolean",u=u?"1":"0"):u instanceof Date?(f="dateTime.tz",u=u.toISOString()):u=String(u),i.push(Je(F1(c),u,{"dt:dt":f}))}}),"<"+a+' xmlns="'+Kn.o+'">'+i.join("")+"</"+a+">"}function rC(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),i=(r-a)/Math.pow(2,32);a*=1e7,i*=1e7;var c=a/Math.pow(2,32)|0;c>0&&(a=a%Math.pow(2,32),i+=c);var u=Be(8);return u.write_shift(4,a),u.write_shift(4,i),u}function Q1(e,t){var r=Be(4),a=Be(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=Be(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=rC(t);break;case 31:case 80:for(a=Be(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return un([r,a])}var ab=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function nC(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function J1(e,t,r){var a=Be(8),i=[],c=[],u=8,f=0,h=Be(8),p=Be(8);if(h.write_shift(4,2),h.write_shift(4,1200),p.write_shift(4,1),c.push(h),i.push(p),u+=8+h.length,!t){p=Be(8),p.write_shift(4,0),i.unshift(p);var g=[Be(4)];for(g[0].write_shift(4,e.length),f=0;f<e.length;++f){var y=e[f][0];for(h=Be(8+2*(y.length+1)+(y.length%2?0:2)),h.write_shift(4,f+2),h.write_shift(4,y.length+1),h.write_shift(0,y,"dbcs");h.l!=h.length;)h.write_shift(1,0);g.push(h)}h=un(g),c.unshift(h),u+=8+h.length}for(f=0;f<e.length;++f)if(!(t&&!t[e[f][0]])&&!(ab.indexOf(e[f][0])>-1||tb.indexOf(e[f][0])>-1)&&e[f][1]!=null){var v=e[f][1],b=0;if(t){b=+t[e[f][0]];var w=r[b];if(w.p=="version"&&typeof v=="string"){var _=v.split(".");v=(+_[0]<<16)+(+_[1]||0)}h=Q1(w.t,v)}else{var S=nC(v);S==-1&&(S=31,v=String(v)),h=Q1(S,v)}c.push(h),p=Be(8),p.write_shift(4,t?b:2+f),i.push(p),u+=8+h.length}var A=8*(c.length+1);for(f=0;f<c.length;++f)i[f].write_shift(4,A),A+=c[f].length;return a.write_shift(4,u),a.write_shift(4,c.length),un([a].concat(i).concat(c))}function Z1(e,t,r,a,i,c){var u=Be(i?68:48),f=[u];u.write_shift(2,65534),u.write_shift(2,0),u.write_shift(4,842412599),u.write_shift(16,xr.utils.consts.HEADER_CLSID,"hex"),u.write_shift(4,i?2:1),u.write_shift(16,t,"hex"),u.write_shift(4,i?68:48);var h=J1(e,r,a);if(f.push(h),i){var p=J1(i,null,null);u.write_shift(16,c,"hex"),u.write_shift(4,68+h.length),f.push(p)}return un(f)}function aC(e,t){t||(t=Be(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function sC(e,t){return e.read_shift(t)===1}function jn(e,t){return t||(t=Be(2)),t.write_shift(2,+!!e),t}function sb(e){return e.read_shift(2,"u")}function oa(e,t){return t||(t=Be(2)),t.write_shift(2,e),t}function ib(e,t,r){return r||(r=Be(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function ob(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var c=e.read_shift(1);c&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var u=a?e.read_shift(a,i):"";return u}function iC(e){var t=e.t||"",r=Be(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=Be(2*t.length);a.write_shift(2*t.length,t,"utf16le");var i=[r,a];return un(i)}function oC(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var i=e.read_shift(1);return i===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function lC(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):oC(e,a,r)}function cC(e,t,r){if(r.biff>5)return lC(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function lb(e,t,r){return r||(r=Be(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function ey(e,t){t||(t=Be(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function uC(e){var t=Be(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var i=a.indexOf("#"),c=i>-1?31:23;switch(a.charAt(0)){case"#":c=28;break;case".":c&=-3;break}t.write_shift(4,2),t.write_shift(4,c);var u=[8,6815827,6619237,4849780,83];for(r=0;r<u.length;++r)t.write_shift(4,u[r]);if(c==28)a=a.slice(1),ey(a,t);else if(c&2){for(u="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<u.length;++r)t.write_shift(1,parseInt(u[r],16));var f=i>-1?a.slice(0,i):a;for(t.write_shift(4,2*(f.length+1)),r=0;r<f.length;++r)t.write_shift(2,f.charCodeAt(r));t.write_shift(2,0),c&8&&ey(i>-1?a.slice(i+1):"",t)}else{for(u="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<u.length;++r)t.write_shift(1,parseInt(u[r],16));for(var h=0;a.slice(h*3,h*3+3)=="../"||a.slice(h*3,h*3+3)=="..\\";)++h;for(t.write_shift(2,h),t.write_shift(4,a.length-3*h+1),r=0;r<a.length-3*h;++r)t.write_shift(1,a.charCodeAt(r+3*h)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function pi(e,t,r,a){return a||(a=Be(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function dC(e,t,r){var a=r.biff>8?4:2,i=e.read_shift(a),c=e.read_shift(a,"i"),u=e.read_shift(a,"i");return[i,c,u]}function fC(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);return{s:{c:a,r:t},e:{c:i,r}}}function cb(e,t){return t||(t=Be(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function $0(e,t,r){var a=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,i=8;break;case"biff4":a=4,i=6;break;case"biff3":a=3,i=6;break;case"biff2":a=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var c=Be(i);return c.write_shift(2,a),c.write_shift(2,t),i>4&&c.write_shift(2,29282),i>6&&c.write_shift(2,1997),i>8&&(c.write_shift(2,49161),c.write_shift(2,1),c.write_shift(2,1798),c.write_shift(2,0)),c}function hC(e,t){var r=!t||t.biff==8,a=Be(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function pC(e,t){var r=!t||t.biff>=8?2:1,a=Be(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=a.slice(0,a.l);return i.l=a.l,i}function gC(e,t){var r=Be(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],i=0;i<e.length;++i)a[i]=iC(e[i]);var c=un([r].concat(a));return c.parts=[r.length].concat(a.map(function(u){return u.length})),c}function xC(){var e=Be(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function mC(e){var t=Be(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function yC(e,t){var r=e.name||"Arial",a=t&&t.biff==5,i=a?15+r.length:16+2*r.length,c=Be(i);return c.write_shift(2,e.sz*20),c.write_shift(4,0),c.write_shift(2,400),c.write_shift(4,0),c.write_shift(2,0),c.write_shift(1,r.length),a||c.write_shift(1,1),c.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),c}function vC(e,t,r,a){var i=Be(10);return pi(e,t,a,i),i.write_shift(4,r),i}function bC(e,t,r,a,i){var c=!i||i.biff==8,u=Be(8+ +c+(1+c)*r.length);return pi(e,t,a,u),u.write_shift(2,r.length),c&&u.write_shift(1,1),u.write_shift((1+c)*r.length,r,c?"utf16le":"sbcs"),u}function _C(e,t,r,a){var i=r&&r.biff==5;a||(a=Be(i?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(i?1:2,t.length),i||a.write_shift(1,1),a.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var c=a.length>a.l?a.slice(0,a.l):a;return c.l==null&&(c.l=c.length),c}function SC(e,t){var r=t.biff==8||!t.biff?4:2,a=Be(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function ty(e,t,r,a){var i=r&&r.biff==5;a||(a=Be(i?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var c=0;return e.numFmtId>0&&i&&(c|=1024),a.write_shift(4,c),a.write_shift(4,0),i||a.write_shift(4,0),a.write_shift(2,0),a}function wC(e){var t=Be(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function TC(e,t,r,a,i,c){var u=Be(8);return pi(e,t,a,u),ib(r,c,u),u}function EC(e,t,r,a){var i=Be(14);return pi(e,t,a,i),hi(r,i),i}function kC(e,t,r){if(r.biff<8)return jC(e,t,r);for(var a=[],i=e.l+t,c=e.read_shift(r.biff>8?4:2);c--!==0;)a.push(dC(e,r.biff>8?12:6,r));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return a}function jC(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=ob(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function CC(e){var t=Be(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)cb(e[r],t);return t}function AC(e){var t=Be(24),r=rn(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(a[i],16));return un([t,uC(e[1])])}function RC(e){var t=e[1].Tooltip,r=Be(10+2*(t.length+1));r.write_shift(2,2048);var a=rn(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var i=0;i<t.length;++i)r.write_shift(2,t.charCodeAt(i));return r.write_shift(2,0),r}function DC(e){return e||(e=Be(4)),e.write_shift(2,1),e.write_shift(2,1),e}function NC(e,t,r){if(!r.cellStyles)return Oa(e,t);var a=r&&r.biff>=12?4:2,i=e.read_shift(a),c=e.read_shift(a),u=e.read_shift(a),f=e.read_shift(a),h=e.read_shift(2);a==2&&(e.l+=2);var p={s:i,e:c,w:u,ixfe:f,flags:h};return(r.biff>=5||!r.biff)&&(p.level=h>>8&7),p}function OC(e,t){var r=Be(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function IC(e){for(var t=Be(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function BC(e,t,r){var a=Be(15);return ic(a,e,t),a.write_shift(8,r,"f"),a}function MC(e,t,r){var a=Be(9);return ic(a,e,t),a.write_shift(2,r),a}var FC=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=I0({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(f,h){var p=[],g=fi(1);switch(h.type){case"base64":g=va(rs(f));break;case"binary":g=va(f);break;case"buffer":case"array":g=f;break}Yn(g,0);var y=g.read_shift(1),v=!!(y&136),b=!1,w=!1;switch(y){case 2:break;case 3:break;case 48:b=!0,v=!0;break;case 49:b=!0,v=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+y.toString(16))}var _=0,S=521;y==2&&(_=g.read_shift(2)),g.l+=3,y!=2&&(_=g.read_shift(4)),_>1048576&&(_=1e6),y!=2&&(S=g.read_shift(2));var A=g.read_shift(2),D=h.codepage||1252;y!=2&&(g.l+=16,g.read_shift(1),g[g.l]!==0&&(D=e[g[g.l]]),g.l+=1,g.l+=2),w&&(g.l+=36);for(var I=[],G={},Z=Math.min(g.length,y==2?521:S-10-(b?264:0)),oe=w?32:11;g.l<Z&&g[g.l]!=13;)switch(G={},G.name=Lu.utils.decode(D,g.slice(g.l,g.l+oe)).replace(/[\u0000\r\n].*$/g,""),g.l+=oe,G.type=String.fromCharCode(g.read_shift(1)),y!=2&&!w&&(G.offset=g.read_shift(4)),G.len=g.read_shift(1),y==2&&(G.offset=g.read_shift(2)),G.dec=g.read_shift(1),G.name.length&&I.push(G),y!=2&&(g.l+=w?13:14),G.type){case"B":(!b||G.len!=8)&&h.WTF&&console.log("Skipping "+G.name+":"+G.type);break;case"G":case"P":h.WTF&&console.log("Skipping "+G.name+":"+G.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+G.type)}if(g[g.l]!==13&&(g.l=S-1),g.read_shift(1)!==13)throw new Error("DBF Terminator not found "+g.l+" "+g[g.l]);g.l=S;var V=0,P=0;for(p[0]=[],P=0;P!=I.length;++P)p[0][P]=I[P].name;for(;_-- >0;){if(g[g.l]===42){g.l+=A;continue}for(++g.l,p[++V]=[],P=0,P=0;P!=I.length;++P){var z=g.slice(g.l,g.l+I[P].len);g.l+=I[P].len,Yn(z,0);var ie=Lu.utils.decode(D,z);switch(I[P].type){case"C":ie.trim().length&&(p[V][P]=ie.replace(/\s+$/,""));break;case"D":ie.length===8?p[V][P]=new Date(+ie.slice(0,4),+ie.slice(4,6)-1,+ie.slice(6,8)):p[V][P]=ie;break;case"F":p[V][P]=parseFloat(ie.trim());break;case"+":case"I":p[V][P]=w?z.read_shift(-4,"i")^2147483648:z.read_shift(4,"i");break;case"L":switch(ie.trim().toUpperCase()){case"Y":case"T":p[V][P]=!0;break;case"N":case"F":p[V][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ie+"|")}break;case"M":if(!v)throw new Error("DBF Unexpected MEMO for type "+y.toString(16));p[V][P]="##MEMO##"+(w?parseInt(ie.trim(),10):z.read_shift(4));break;case"N":ie=ie.replace(/\u0000/g,"").trim(),ie&&ie!="."&&(p[V][P]=+ie||0);break;case"@":p[V][P]=new Date(z.read_shift(-8,"f")-621356832e5);break;case"T":p[V][P]=new Date((z.read_shift(4)-2440588)*864e5+z.read_shift(4));break;case"Y":p[V][P]=z.read_shift(4,"i")/1e4+z.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":p[V][P]=-z.read_shift(-8,"f");break;case"B":if(b&&I[P].len==8){p[V][P]=z.read_shift(8,"f");break}case"G":case"P":z.l+=I[P].len;break;case"0":if(I[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+I[P].type)}}}if(y!=2&&g.l<g.length&&g[g.l++]!=26)throw new Error("DBF EOF Marker missing "+(g.l-1)+" of "+g.length+" "+g[g.l-1].toString(16));return h&&h.sheetRows&&(p=p.slice(0,h.sheetRows)),h.DBF=I,p}function a(f,h){var p=h||{};p.dateNF||(p.dateNF="yyyymmdd");var g=Ao(r(f,p),p);return g["!cols"]=p.DBF.map(function(y){return{wch:y.len,DBF:y}}),delete p.DBF,g}function i(f,h){try{return xi(a(f,h),h)}catch(p){if(h&&h.WTF)throw p}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function u(f,h){var p=h||{};if(+p.codepage>=0&&ql(+p.codepage),p.type=="string")throw new Error("Cannot write DBF to JS string");var g=Bn(),y=Qu(f,{header:1,raw:!0,cellDates:!0}),v=y[0],b=y.slice(1),w=f["!cols"]||[],_=0,S=0,A=0,D=1;for(_=0;_<v.length;++_){if(((w[_]||{}).DBF||{}).name){v[_]=w[_].DBF.name,++A;continue}if(v[_]!=null){if(++A,typeof v[_]=="number"&&(v[_]=v[_].toString(10)),typeof v[_]!="string")throw new Error("DBF Invalid column name "+v[_]+" |"+typeof v[_]+"|");if(v.indexOf(v[_])!==_){for(S=0;S<1024;++S)if(v.indexOf(v[_]+"_"+S)==-1){v[_]+="_"+S;break}}}}var I=Tr(f["!ref"]),G=[],Z=[],oe=[];for(_=0;_<=I.e.c-I.s.c;++_){var V="",P="",z=0,ie=[];for(S=0;S<b.length;++S)b[S][_]!=null&&ie.push(b[S][_]);if(ie.length==0||v[_]==null){G[_]="?";continue}for(S=0;S<ie.length;++S){switch(typeof ie[S]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=ie[S]instanceof Date?"D":"C";break;default:P="C"}z=Math.max(z,String(ie[S]).length),V=V&&V!=P?"C":P}z>250&&(z=250),P=((w[_]||{}).DBF||{}).type,P=="C"&&w[_].DBF.len>z&&(z=w[_].DBF.len),V=="B"&&P=="N"&&(V="N",oe[_]=w[_].DBF.dec,z=w[_].DBF.len),Z[_]=V=="C"||P=="N"?z:c[V]||0,D+=Z[_],G[_]=V}var K=g.next(32);for(K.write_shift(4,318902576),K.write_shift(4,b.length),K.write_shift(2,296+32*A),K.write_shift(2,D),_=0;_<4;++_)K.write_shift(4,0);for(K.write_shift(4,0|(+t[dv]||3)<<8),_=0,S=0;_<v.length;++_)if(v[_]!=null){var xe=g.next(32),ee=(v[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);xe.write_shift(1,ee,"sbcs"),xe.write_shift(1,G[_]=="?"?"C":G[_],"sbcs"),xe.write_shift(4,S),xe.write_shift(1,Z[_]||c[G[_]]||0),xe.write_shift(1,oe[_]||0),xe.write_shift(1,2),xe.write_shift(4,0),xe.write_shift(1,0),xe.write_shift(4,0),xe.write_shift(4,0),S+=Z[_]||c[G[_]]||0}var re=g.next(264);for(re.write_shift(4,13),_=0;_<65;++_)re.write_shift(4,0);for(_=0;_<b.length;++_){var _e=g.next(D);for(_e.write_shift(1,0),S=0;S<v.length;++S)if(v[S]!=null)switch(G[S]){case"L":_e.write_shift(1,b[_][S]==null?63:b[_][S]?84:70);break;case"B":_e.write_shift(8,b[_][S]||0,"f");break;case"N":var ne="0";for(typeof b[_][S]=="number"&&(ne=b[_][S].toFixed(oe[S]||0)),A=0;A<Z[S]-ne.length;++A)_e.write_shift(1,32);_e.write_shift(1,ne,"sbcs");break;case"D":b[_][S]?(_e.write_shift(4,("0000"+b[_][S].getFullYear()).slice(-4),"sbcs"),_e.write_shift(2,("00"+(b[_][S].getMonth()+1)).slice(-2),"sbcs"),_e.write_shift(2,("00"+b[_][S].getDate()).slice(-2),"sbcs")):_e.write_shift(8,"00000000","sbcs");break;case"C":var ve=String(b[_][S]!=null?b[_][S]:"").slice(0,Z[S]);for(_e.write_shift(1,ve,"sbcs"),A=0;A<Z[S]-ve.length;++A)_e.write_shift(1,32);break}}return g.next(1).write_shift(1,26),g.end()}return{to_workbook:i,to_sheet:a,from_sheet:u}})(),LC=(function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+hn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(v,b){var w=e[b];return typeof w=="number"?E1(w):w},a=function(v,b,w){var _=b.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return _==59?v:E1(_)};e["|"]=254;function i(v,b){switch(b.type){case"base64":return c(rs(v),b);case"binary":return c(v,b);case"buffer":return c(nr&&Buffer.isBuffer(v)?v.toString("binary"):tc(v),b);case"array":return c(od(v),b)}throw new Error("Unrecognized type "+b.type)}function c(v,b){var w=v.split(/[\n\r]+/),_=-1,S=-1,A=0,D=0,I=[],G=[],Z=null,oe={},V=[],P=[],z=[],ie=0,K;for(+b.codepage>=0&&ql(+b.codepage);A!==w.length;++A){ie=0;var xe=w[A].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),ee=xe.replace(/;;/g,"\0").split(";").map(function(X){return X.replace(/\u0000/g,";")}),re=ee[0],_e;if(xe.length>0)switch(re){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ee[1].charAt(0)=="P"&&G.push(xe.slice(3).replace(/;;/g,";"));break;case"C":var ne=!1,ve=!1,le=!1,Ae=!1,M=-1,Q=-1;for(D=1;D<ee.length;++D)switch(ee[D].charAt(0)){case"A":break;case"X":S=parseInt(ee[D].slice(1))-1,ve=!0;break;case"Y":for(_=parseInt(ee[D].slice(1))-1,ve||(S=0),K=I.length;K<=_;++K)I[K]=[];break;case"K":_e=ee[D].slice(1),_e.charAt(0)==='"'?_e=_e.slice(1,_e.length-1):_e==="TRUE"?_e=!0:_e==="FALSE"?_e=!1:isNaN(Za(_e))?isNaN(Gl(_e).getDate())||(_e=Cn(_e)):(_e=Za(_e),Z!==null&&wv(Z)&&(_e=jv(_e))),ne=!0;break;case"E":Ae=!0;var k=M8(ee[D].slice(1),{r:_,c:S});I[_][S]=[I[_][S],k];break;case"S":le=!0,I[_][S]=[I[_][S],"S5S"];break;case"G":break;case"R":M=parseInt(ee[D].slice(1))-1;break;case"C":Q=parseInt(ee[D].slice(1))-1;break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+xe)}if(ne&&(I[_][S]&&I[_][S].length==2?I[_][S][0]=_e:I[_][S]=_e,Z=null),le){if(Ae)throw new Error("SYLK shared formula cannot have own formula");var L=M>-1&&I[M][Q];if(!L||!L[1])throw new Error("SYLK shared formula cannot find base");I[_][S][1]=F8(L[1],{r:_-M,c:S-Q})}break;case"F":var W=0;for(D=1;D<ee.length;++D)switch(ee[D].charAt(0)){case"X":S=parseInt(ee[D].slice(1))-1,++W;break;case"Y":for(_=parseInt(ee[D].slice(1))-1,K=I.length;K<=_;++K)I[K]=[];break;case"M":ie=parseInt(ee[D].slice(1))/20;break;case"F":break;case"G":break;case"P":Z=G[parseInt(ee[D].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(z=ee[D].slice(1).split(" "),K=parseInt(z[0],10);K<=parseInt(z[1],10);++K)ie=parseInt(z[2],10),P[K-1]=ie===0?{hidden:!0}:{wch:ie},G0(P[K-1]);break;case"C":S=parseInt(ee[D].slice(1))-1,P[S]||(P[S]={});break;case"R":_=parseInt(ee[D].slice(1))-1,V[_]||(V[_]={}),ie>0?(V[_].hpt=ie,V[_].hpx=pb(ie)):ie===0&&(V[_].hidden=!0);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+xe)}W<1&&(Z=null);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+xe)}}return V.length>0&&(oe["!rows"]=V),P.length>0&&(oe["!cols"]=P),b&&b.sheetRows&&(I=I.slice(0,b.sheetRows)),[I,oe]}function u(v,b){var w=i(v,b),_=w[0],S=w[1],A=Ao(_,b);return hn(S).forEach(function(D){A[D]=S[D]}),A}function f(v,b){return xi(u(v,b),b)}function h(v,b,w,_){var S="C;Y"+(w+1)+";X"+(_+1)+";K";switch(v.t){case"n":S+=v.v||0,v.f&&!v.F&&(S+=";E"+Y0(v.f,{r:w,c:_}));break;case"b":S+=v.v?"TRUE":"FALSE";break;case"e":S+=v.w||v.v;break;case"d":S+='"'+(v.w||v.v)+'"';break;case"s":S+='"'+v.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return S}function p(v,b){b.forEach(function(w,_){var S="F;W"+(_+1)+" "+(_+1)+" ";w.hidden?S+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=Vu(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=Yu(w.wpx)),typeof w.wch=="number"&&(S+=Math.round(w.wch))),S.charAt(S.length-1)!=" "&&v.push(S)})}function g(v,b){b.forEach(function(w,_){var S="F;";w.hidden?S+="M0;":w.hpt?S+="M"+20*w.hpt+";":w.hpx&&(S+="M"+20*Ku(w.hpx)+";"),S.length>2&&v.push(S+"R"+(_+1))})}function y(v,b){var w=["ID;PWXL;N;E"],_=[],S=Tr(v["!ref"]),A,D=Array.isArray(v),I=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),v["!cols"]&&p(w,v["!cols"]),v["!rows"]&&g(w,v["!rows"]),w.push("B;Y"+(S.e.r-S.s.r+1)+";X"+(S.e.c-S.s.c+1)+";D"+[S.s.c,S.s.r,S.e.c,S.e.r].join(" "));for(var G=S.s.r;G<=S.e.r;++G)for(var Z=S.s.c;Z<=S.e.c;++Z){var oe=dr({r:G,c:Z});A=D?(v[G]||[])[Z]:v[oe],!(!A||A.v==null&&(!A.f||A.F))&&_.push(h(A,v,G,Z))}return w.join(I)+I+_.join(I)+I+"E"+I}return{to_workbook:f,to_sheet:u,from_sheet:y}})(),PC=(function(){function e(c,u){switch(u.type){case"base64":return t(rs(c),u);case"binary":return t(c,u);case"buffer":return t(nr&&Buffer.isBuffer(c)?c.toString("binary"):tc(c),u);case"array":return t(od(c),u)}throw new Error("Unrecognized type "+u.type)}function t(c,u){for(var f=c.split(`
`),h=-1,p=-1,g=0,y=[];g!==f.length;++g){if(f[g].trim()==="BOT"){y[++h]=[],p=0;continue}if(!(h<0)){var v=f[g].trim().split(","),b=v[0],w=v[1];++g;for(var _=f[g]||"";(_.match(/["]/g)||[]).length&1&&g<f.length-1;)_+=`
`+f[++g];switch(_=_.trim(),+b){case-1:if(_==="BOT"){y[++h]=[],p=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?y[h][p]=!0:_==="FALSE"?y[h][p]=!1:isNaN(Za(w))?isNaN(Gl(w).getDate())?y[h][p]=w:y[h][p]=Cn(w):y[h][p]=Za(w),++p;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),y[h][p++]=_!==""?_:null;break}if(_==="EOD")break}}return u&&u.sheetRows&&(y=y.slice(0,u.sheetRows)),y}function r(c,u){return Ao(e(c,u),u)}function a(c,u){return xi(r(c,u),u)}var i=(function(){var c=function(h,p,g,y,v){h.push(p),h.push(g+","+y),h.push('"'+v.replace(/"/g,'""')+'"')},u=function(h,p,g,y){h.push(p+","+g),h.push(p==1?'"'+y.replace(/"/g,'""')+'"':y)};return function(h){var p=[],g=Tr(h["!ref"]),y,v=Array.isArray(h);c(p,"TABLE",0,1,"sheetjs"),c(p,"VECTORS",0,g.e.r-g.s.r+1,""),c(p,"TUPLES",0,g.e.c-g.s.c+1,""),c(p,"DATA",0,0,"");for(var b=g.s.r;b<=g.e.r;++b){u(p,-1,0,"BOT");for(var w=g.s.c;w<=g.e.c;++w){var _=dr({r:b,c:w});if(y=v?(h[b]||[])[w]:h[_],!y){u(p,1,0,"");continue}switch(y.t){case"n":var S=y.w;!S&&y.v!=null&&(S=y.v),S==null?y.f&&!y.F?u(p,1,0,"="+y.f):u(p,1,0,""):u(p,0,S,"V");break;case"b":u(p,0,y.v?1:0,y.v?"TRUE":"FALSE");break;case"s":u(p,1,0,isNaN(y.v)?y.v:'="'+y.v+'"');break;case"d":y.w||(y.w=Is(y.z||Ir[14],Mn(Cn(y.v)))),u(p,0,y.w,"V");break;default:u(p,1,0,"")}}}u(p,-1,0,"EOD");var A=`\r
`,D=p.join(A);return D}})();return{to_workbook:a,to_sheet:r,from_sheet:i}})(),ub=(function(){function e(y){return y.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(y){return y.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(y,v){for(var b=y.split(`
`),w=-1,_=-1,S=0,A=[];S!==b.length;++S){var D=b[S].trim().split(":");if(D[0]==="cell"){var I=rn(D[1]);if(A.length<=I.r)for(w=A.length;w<=I.r;++w)A[w]||(A[w]=[]);switch(w=I.r,_=I.c,D[2]){case"t":A[w][_]=e(D[3]);break;case"v":A[w][_]=+D[3];break;case"vtf":var G=D[D.length-1];case"vtc":switch(D[3]){case"nl":A[w][_]=!!+D[4];break;default:A[w][_]=+D[4];break}D[2]=="vtf"&&(A[w][_]=[A[w][_],G])}}}return v&&v.sheetRows&&(A=A.slice(0,v.sheetRows)),A}function a(y,v){return Ao(r(y,v),v)}function i(y,v){return xi(a(y,v),v)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),u=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,f=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),h="--SocialCalcSpreadsheetControlSave--";function p(y){if(!y||!y["!ref"])return"";for(var v=[],b=[],w,_="",S=Qn(y["!ref"]),A=Array.isArray(y),D=S.s.r;D<=S.e.r;++D)for(var I=S.s.c;I<=S.e.c;++I)if(_=dr({r:D,c:I}),w=A?(y[D]||[])[I]:y[_],!(!w||w.v==null||w.t==="z")){switch(b=["cell",_,"t"],w.t){case"s":case"str":b.push(t(w.v));break;case"n":w.f?(b[2]="vtf",b[3]="n",b[4]=w.v,b[5]=t(w.f)):(b[2]="v",b[3]=w.v);break;case"b":b[2]="vt"+(w.f?"f":"c"),b[3]="nl",b[4]=w.v?"1":"0",b[5]=t(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var G=Mn(Cn(w.v));b[2]="vtc",b[3]="nd",b[4]=""+G,b[5]=w.w||Is(w.z||Ir[14],G);break;case"e":continue}v.push(b.join(":"))}return v.push("sheet:c:"+(S.e.c-S.s.c+1)+":r:"+(S.e.r-S.s.r+1)+":tvf:1"),v.push("valueformat:1:text-wiki"),v.join(`
`)}function g(y){return[c,u,f,u,p(y),h].join(`
`)}return{to_workbook:i,to_sheet:a,from_sheet:g}})(),zC=(function(){function e(g,y,v,b,w){w.raw?y[v][b]=g:g===""||(g==="TRUE"?y[v][b]=!0:g==="FALSE"?y[v][b]=!1:isNaN(Za(g))?isNaN(Gl(g).getDate())?y[v][b]=g:y[v][b]=Cn(g):y[v][b]=Za(g))}function t(g,y){var v=y||{},b=[];if(!g||g.length===0)return b;for(var w=g.split(/[\r\n]/),_=w.length-1;_>=0&&w[_].length===0;)--_;for(var S=10,A=0,D=0;D<=_;++D)A=w[D].indexOf(" "),A==-1?A=w[D].length:A++,S=Math.max(S,A);for(D=0;D<=_;++D){b[D]=[];var I=0;for(e(w[D].slice(0,S).trim(),b,D,I,v),I=1;I<=(w[D].length-S)/10+1;++I)e(w[D].slice(S+(I-1)*10,S+I*10).trim(),b,D,I,v)}return v.sheetRows&&(b=b.slice(0,v.sheetRows)),b}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function i(g){for(var y={},v=!1,b=0,w=0;b<g.length;++b)(w=g.charCodeAt(b))==34?v=!v:!v&&w in r&&(y[w]=(y[w]||0)+1);w=[];for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&w.push([y[b],b]);if(!w.length){y=a;for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&w.push([y[b],b])}return w.sort(function(_,S){return _[0]-S[0]||a[_[1]]-a[S[1]]}),r[w.pop()[1]]||44}function c(g,y){var v=y||{},b="",w=v.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};g.slice(0,4)=="sep="?g.charCodeAt(5)==13&&g.charCodeAt(6)==10?(b=g.charAt(4),g=g.slice(7)):g.charCodeAt(5)==13||g.charCodeAt(5)==10?(b=g.charAt(4),g=g.slice(6)):b=i(g.slice(0,1024)):v&&v.FS?b=v.FS:b=i(g.slice(0,1024));var S=0,A=0,D=0,I=0,G=0,Z=b.charCodeAt(0),oe=!1,V=0,P=g.charCodeAt(0);g=g.replace(/\r\n/mg,`
`);var z=v.dateNF!=null?r6(v.dateNF):null;function ie(){var K=g.slice(I,G),xe={};if(K.charAt(0)=='"'&&K.charAt(K.length-1)=='"'&&(K=K.slice(1,-1).replace(/""/g,'"')),K.length===0)xe.t="z";else if(v.raw)xe.t="s",xe.v=K;else if(K.trim().length===0)xe.t="s",xe.v=K;else if(K.charCodeAt(0)==61)K.charCodeAt(1)==34&&K.charCodeAt(K.length-1)==34?(xe.t="s",xe.v=K.slice(2,-1).replace(/""/g,'"')):L8(K)?(xe.t="n",xe.f=K.slice(1)):(xe.t="s",xe.v=K);else if(K=="TRUE")xe.t="b",xe.v=!0;else if(K=="FALSE")xe.t="b",xe.v=!1;else if(!isNaN(D=Za(K)))xe.t="n",v.cellText!==!1&&(xe.w=K),xe.v=D;else if(!isNaN(Gl(K).getDate())||z&&K.match(z)){xe.z=v.dateNF||Ir[14];var ee=0;z&&K.match(z)&&(K=n6(K,v.dateNF,K.match(z)||[]),ee=1),v.cellDates?(xe.t="d",xe.v=Cn(K,ee)):(xe.t="n",xe.v=Mn(Cn(K,ee))),v.cellText!==!1&&(xe.w=Is(xe.z,xe.v instanceof Date?Mn(xe.v):xe.v)),v.cellNF||delete xe.z}else xe.t="s",xe.v=K;if(xe.t=="z"||(v.dense?(w[S]||(w[S]=[]),w[S][A]=xe):w[dr({c:A,r:S})]=xe),I=G+1,P=g.charCodeAt(I),_.e.c<A&&(_.e.c=A),_.e.r<S&&(_.e.r=S),V==Z)++A;else if(A=0,++S,v.sheetRows&&v.sheetRows<=S)return!0}e:for(;G<g.length;++G)switch(V=g.charCodeAt(G)){case 34:P===34&&(oe=!oe);break;case Z:case 10:case 13:if(!oe&&ie())break e;break}return G-I>0&&ie(),w["!ref"]=Wr(_),w}function u(g,y){return!(y&&y.PRN)||y.FS||g.slice(0,4)=="sep="||g.indexOf("	")>=0||g.indexOf(",")>=0||g.indexOf(";")>=0?c(g,y):Ao(t(g,y),y)}function f(g,y){var v="",b=y.type=="string"?[0,0,0,0]:JD(g,y);switch(y.type){case"base64":v=rs(g);break;case"binary":v=g;break;case"buffer":y.codepage==65001?v=g.toString("utf8"):y.codepage&&typeof Lu<"u"||(v=nr&&Buffer.isBuffer(g)?g.toString("binary"):tc(g));break;case"array":v=od(g);break;case"string":v=g;break;default:throw new Error("Unrecognized type "+y.type)}return b[0]==239&&b[1]==187&&b[2]==191?v=Ml(v.slice(3)):y.type!="string"&&y.type!="buffer"&&y.codepage==65001?v=Ml(v):y.type=="binary"&&typeof Lu<"u",v.slice(0,19)=="socialcalc:version:"?ub.to_sheet(y.type=="string"?v:Ml(v),y):u(v,y)}function h(g,y){return xi(f(g,y),y)}function p(g){for(var y=[],v=Tr(g["!ref"]),b,w=Array.isArray(g),_=v.s.r;_<=v.e.r;++_){for(var S=[],A=v.s.c;A<=v.e.c;++A){var D=dr({r:_,c:A});if(b=w?(g[_]||[])[A]:g[D],!b||b.v==null){S.push("          ");continue}for(var I=(b.w||(ns(b),b.w)||"").slice(0,10);I.length<10;)I+=" ";S.push(I+(A===0?" ":""))}y.push(S.join(""))}return y.join(`
`)}return{to_workbook:h,to_sheet:f,from_sheet:p}})(),ry=(function(){function e(k,L,W){if(k){Yn(k,k.l||0);for(var X=W.Enum||M;k.l<k.length;){var ge=k.read_shift(2),Me=X[ge]||X[65535],qe=k.read_shift(2),Ce=k.l+qe,te=Me.f&&Me.f(k,qe,W);if(k.l=Ce,L(te,Me,ge))return}}}function t(k,L){switch(L.type){case"base64":return r(va(rs(k)),L);case"binary":return r(va(k),L);case"buffer":case"array":return r(k,L)}throw"Unsupported type "+L.type}function r(k,L){if(!k)return k;var W=L||{},X=W.dense?[]:{},ge="Sheet1",Me="",qe=0,Ce={},te=[],Pe=[],He={s:{r:0,c:0},e:{r:0,c:0}},tt=W.sheetRows||0;if(k[2]==0&&(k[3]==8||k[3]==9)&&k.length>=16&&k[14]==5&&k[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(k[2]==2)W.Enum=M,e(k,function(De,ut,ht){switch(ht){case 0:W.vers=De,De>=4096&&(W.qpro=!0);break;case 6:He=De;break;case 204:De&&(Me=De);break;case 222:Me=De;break;case 15:case 51:W.qpro||(De[1].v=De[1].v.slice(1));case 13:case 14:case 16:ht==14&&(De[2]&112)==112&&(De[2]&15)>1&&(De[2]&15)<15&&(De[1].z=W.dateNF||Ir[14],W.cellDates&&(De[1].t="d",De[1].v=jv(De[1].v))),W.qpro&&De[3]>qe&&(X["!ref"]=Wr(He),Ce[ge]=X,te.push(ge),X=W.dense?[]:{},He={s:{r:0,c:0},e:{r:0,c:0}},qe=De[3],ge=Me||"Sheet"+(qe+1),Me="");var At=W.dense?(X[De[0].r]||[])[De[0].c]:X[dr(De[0])];if(At){At.t=De[1].t,At.v=De[1].v,De[1].z!=null&&(At.z=De[1].z),De[1].f!=null&&(At.f=De[1].f);break}W.dense?(X[De[0].r]||(X[De[0].r]=[]),X[De[0].r][De[0].c]=De[1]):X[dr(De[0])]=De[1];break}},W);else if(k[2]==26||k[2]==14)W.Enum=Q,k[2]==14&&(W.qpro=!0,k.l=0),e(k,function(De,ut,ht){switch(ht){case 204:ge=De;break;case 22:De[1].v=De[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(De[3]>qe&&(X["!ref"]=Wr(He),Ce[ge]=X,te.push(ge),X=W.dense?[]:{},He={s:{r:0,c:0},e:{r:0,c:0}},qe=De[3],ge="Sheet"+(qe+1)),tt>0&&De[0].r>=tt)break;W.dense?(X[De[0].r]||(X[De[0].r]=[]),X[De[0].r][De[0].c]=De[1]):X[dr(De[0])]=De[1],He.e.c<De[0].c&&(He.e.c=De[0].c),He.e.r<De[0].r&&(He.e.r=De[0].r);break;case 27:De[14e3]&&(Pe[De[14e3][0]]=De[14e3][1]);break;case 1537:Pe[De[0]]=De[1],De[0]==qe&&(ge=De[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+k[2]);if(X["!ref"]=Wr(He),Ce[Me||ge]=X,te.push(Me||ge),!Pe.length)return{SheetNames:te,Sheets:Ce};for(var Y={},Re=[],nt=0;nt<Pe.length;++nt)Ce[te[nt]]?(Re.push(Pe[nt]||te[nt]),Y[Pe[nt]]=Ce[Pe[nt]]||Ce[te[nt]]):(Re.push(Pe[nt]),Y[Pe[nt]]={"!ref":"A1"});return{SheetNames:Re,Sheets:Y}}function a(k,L){var W=L||{};if(+W.codepage>=0&&ql(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var X=Bn(),ge=Tr(k["!ref"]),Me=Array.isArray(k),qe=[];Ze(X,0,c(1030)),Ze(X,6,h(ge));for(var Ce=Math.min(ge.e.r,8191),te=ge.s.r;te<=Ce;++te)for(var Pe=fn(te),He=ge.s.c;He<=ge.e.c;++He){te===ge.s.r&&(qe[He]=xn(He));var tt=qe[He]+Pe,Y=Me?(k[te]||[])[He]:k[tt];if(!(!Y||Y.t=="z"))if(Y.t=="n")(Y.v|0)==Y.v&&Y.v>=-32768&&Y.v<=32767?Ze(X,13,b(te,He,Y.v)):Ze(X,14,_(te,He,Y.v));else{var Re=ns(Y);Ze(X,15,y(te,He,Re.slice(0,239)))}}return Ze(X,1),X.end()}function i(k,L){var W=L||{};if(+W.codepage>=0&&ql(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var X=Bn();Ze(X,0,u(k));for(var ge=0,Me=0;ge<k.SheetNames.length;++ge)(k.Sheets[k.SheetNames[ge]]||{})["!ref"]&&Ze(X,27,Ae(k.SheetNames[ge],Me++));var qe=0;for(ge=0;ge<k.SheetNames.length;++ge){var Ce=k.Sheets[k.SheetNames[ge]];if(!(!Ce||!Ce["!ref"])){for(var te=Tr(Ce["!ref"]),Pe=Array.isArray(Ce),He=[],tt=Math.min(te.e.r,8191),Y=te.s.r;Y<=tt;++Y)for(var Re=fn(Y),nt=te.s.c;nt<=te.e.c;++nt){Y===te.s.r&&(He[nt]=xn(nt));var De=He[nt]+Re,ut=Pe?(Ce[Y]||[])[nt]:Ce[De];if(!(!ut||ut.t=="z"))if(ut.t=="n")Ze(X,23,ie(Y,nt,qe,ut.v));else{var ht=ns(ut);Ze(X,22,V(Y,nt,qe,ht.slice(0,239)))}}++qe}}return Ze(X,1),X.end()}function c(k){var L=Be(2);return L.write_shift(2,k),L}function u(k){var L=Be(26);L.write_shift(2,4096),L.write_shift(2,4),L.write_shift(4,0);for(var W=0,X=0,ge=0,Me=0;Me<k.SheetNames.length;++Me){var qe=k.SheetNames[Me],Ce=k.Sheets[qe];if(!(!Ce||!Ce["!ref"])){++ge;var te=Qn(Ce["!ref"]);W<te.e.r&&(W=te.e.r),X<te.e.c&&(X=te.e.c)}}return W>8191&&(W=8191),L.write_shift(2,W),L.write_shift(1,ge),L.write_shift(1,X),L.write_shift(2,0),L.write_shift(2,0),L.write_shift(1,1),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(4,0),L}function f(k,L,W){var X={s:{c:0,r:0},e:{c:0,r:0}};return L==8&&W.qpro?(X.s.c=k.read_shift(1),k.l++,X.s.r=k.read_shift(2),X.e.c=k.read_shift(1),k.l++,X.e.r=k.read_shift(2),X):(X.s.c=k.read_shift(2),X.s.r=k.read_shift(2),L==12&&W.qpro&&(k.l+=2),X.e.c=k.read_shift(2),X.e.r=k.read_shift(2),L==12&&W.qpro&&(k.l+=2),X.s.c==65535&&(X.s.c=X.e.c=X.s.r=X.e.r=0),X)}function h(k){var L=Be(8);return L.write_shift(2,k.s.c),L.write_shift(2,k.s.r),L.write_shift(2,k.e.c),L.write_shift(2,k.e.r),L}function p(k,L,W){var X=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(X[0].c=k.read_shift(1),X[3]=k.read_shift(1),X[0].r=k.read_shift(2),k.l+=2):(X[2]=k.read_shift(1),X[0].c=k.read_shift(2),X[0].r=k.read_shift(2)),X}function g(k,L,W){var X=k.l+L,ge=p(k,L,W);if(ge[1].t="s",W.vers==20768){k.l++;var Me=k.read_shift(1);return ge[1].v=k.read_shift(Me,"utf8"),ge}return W.qpro&&k.l++,ge[1].v=k.read_shift(X-k.l,"cstr"),ge}function y(k,L,W){var X=Be(7+W.length);X.write_shift(1,255),X.write_shift(2,L),X.write_shift(2,k),X.write_shift(1,39);for(var ge=0;ge<X.length;++ge){var Me=W.charCodeAt(ge);X.write_shift(1,Me>=128?95:Me)}return X.write_shift(1,0),X}function v(k,L,W){var X=p(k,L,W);return X[1].v=k.read_shift(2,"i"),X}function b(k,L,W){var X=Be(7);return X.write_shift(1,255),X.write_shift(2,L),X.write_shift(2,k),X.write_shift(2,W,"i"),X}function w(k,L,W){var X=p(k,L,W);return X[1].v=k.read_shift(8,"f"),X}function _(k,L,W){var X=Be(13);return X.write_shift(1,255),X.write_shift(2,L),X.write_shift(2,k),X.write_shift(8,W,"f"),X}function S(k,L,W){var X=k.l+L,ge=p(k,L,W);if(ge[1].v=k.read_shift(8,"f"),W.qpro)k.l=X;else{var Me=k.read_shift(2);G(k.slice(k.l,k.l+Me),ge),k.l+=Me}return ge}function A(k,L,W){var X=L&32768;return L&=-32769,L=(X?k:0)+(L>=8192?L-16384:L),(X?"":"$")+(W?xn(L):fn(L))}var D={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function G(k,L){Yn(k,0);for(var W=[],X=0,ge="",Me="",qe="",Ce="";k.l<k.length;){var te=k[k.l++];switch(te){case 0:W.push(k.read_shift(8,"f"));break;case 1:Me=A(L[0].c,k.read_shift(2),!0),ge=A(L[0].r,k.read_shift(2),!1),W.push(Me+ge);break;case 2:{var Pe=A(L[0].c,k.read_shift(2),!0),He=A(L[0].r,k.read_shift(2),!1);Me=A(L[0].c,k.read_shift(2),!0),ge=A(L[0].r,k.read_shift(2),!1),W.push(Pe+He+":"+Me+ge)}break;case 3:if(k.l<k.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(k.read_shift(2));break;case 6:{for(var tt="";te=k[k.l++];)tt+=String.fromCharCode(te);W.push('"'+tt.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:Ce=W.pop(),qe=W.pop(),W.push(["AND","OR"][te-20]+"("+qe+","+Ce+")");break;default:if(te<32&&I[te])Ce=W.pop(),qe=W.pop(),W.push(qe+I[te]+Ce);else if(D[te]){if(X=D[te][1],X==69&&(X=k[k.l++]),X>W.length){console.error("WK1 bad formula parse 0x"+te.toString(16)+":|"+W.join("|")+"|");return}var Y=W.slice(-X);W.length-=X,W.push(D[te][0]+"("+Y.join(",")+")")}else return te<=7?console.error("WK1 invalid opcode "+te.toString(16)):te<=24?console.error("WK1 unsupported op "+te.toString(16)):te<=30?console.error("WK1 invalid opcode "+te.toString(16)):te<=115?console.error("WK1 unsupported function opcode "+te.toString(16)):console.error("WK1 unrecognized opcode "+te.toString(16))}}W.length==1?L[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function Z(k){var L=[{c:0,r:0},{t:"n",v:0},0];return L[0].r=k.read_shift(2),L[3]=k[k.l++],L[0].c=k[k.l++],L}function oe(k,L){var W=Z(k);return W[1].t="s",W[1].v=k.read_shift(L-4,"cstr"),W}function V(k,L,W,X){var ge=Be(6+X.length);ge.write_shift(2,k),ge.write_shift(1,W),ge.write_shift(1,L),ge.write_shift(1,39);for(var Me=0;Me<X.length;++Me){var qe=X.charCodeAt(Me);ge.write_shift(1,qe>=128?95:qe)}return ge.write_shift(1,0),ge}function P(k,L){var W=Z(k);W[1].v=k.read_shift(2);var X=W[1].v>>1;if(W[1].v&1)switch(X&7){case 0:X=(X>>3)*5e3;break;case 1:X=(X>>3)*500;break;case 2:X=(X>>3)/20;break;case 3:X=(X>>3)/200;break;case 4:X=(X>>3)/2e3;break;case 5:X=(X>>3)/2e4;break;case 6:X=(X>>3)/16;break;case 7:X=(X>>3)/64;break}return W[1].v=X,W}function z(k,L){var W=Z(k),X=k.read_shift(4),ge=k.read_shift(4),Me=k.read_shift(2);if(Me==65535)return X===0&&ge===3221225472?(W[1].t="e",W[1].v=15):X===0&&ge===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var qe=Me&32768;return Me=(Me&32767)-16446,W[1].v=(1-qe*2)*(ge*Math.pow(2,Me+32)+X*Math.pow(2,Me)),W}function ie(k,L,W,X){var ge=Be(14);if(ge.write_shift(2,k),ge.write_shift(1,W),ge.write_shift(1,L),X==0)return ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(2,65535),ge;var Me=0,qe=0,Ce=0,te=0;return X<0&&(Me=1,X=-X),qe=Math.log2(X)|0,X/=Math.pow(2,qe-31),te=X>>>0,(te&2147483648)==0&&(X/=2,++qe,te=X>>>0),X-=te,te|=2147483648,te>>>=0,X*=Math.pow(2,32),Ce=X>>>0,ge.write_shift(4,Ce),ge.write_shift(4,te),qe+=16383+(Me?32768:0),ge.write_shift(2,qe),ge}function K(k,L){var W=z(k);return k.l+=L-14,W}function xe(k,L){var W=Z(k),X=k.read_shift(4);return W[1].v=X>>6,W}function ee(k,L){var W=Z(k),X=k.read_shift(8,"f");return W[1].v=X,W}function re(k,L){var W=ee(k);return k.l+=L-10,W}function _e(k,L){return k[k.l+L-1]==0?k.read_shift(L,"cstr"):""}function ne(k,L){var W=k[k.l++];W>L-1&&(W=L-1);for(var X="";X.length<W;)X+=String.fromCharCode(k[k.l++]);return X}function ve(k,L,W){if(!(!W.qpro||L<21)){var X=k.read_shift(1);k.l+=17,k.l+=1,k.l+=2;var ge=k.read_shift(L-21,"cstr");return[X,ge]}}function le(k,L){for(var W={},X=k.l+L;k.l<X;){var ge=k.read_shift(2);if(ge==14e3){for(W[ge]=[0,""],W[ge][0]=k.read_shift(2);k[k.l];)W[ge][1]+=String.fromCharCode(k[k.l]),k.l++;k.l++}}return W}function Ae(k,L){var W=Be(5+k.length);W.write_shift(2,14e3),W.write_shift(2,L);for(var X=0;X<k.length;++X){var ge=k.charCodeAt(X);W[W.l++]=ge>127?95:ge}return W[W.l++]=0,W}var M={0:{n:"BOF",f:sb},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:v},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:g},16:{n:"FORMULA",f:S},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:g},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:_e},222:{n:"SHEETNAMELP",f:ne},65535:{n:""}},Q={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:oe},23:{n:"NUMBER17",f:z},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:K},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:le},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:xe},38:{n:"??"},39:{n:"NUMBER27",f:ee},40:{n:"FORMULA28",f:re},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:_e},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ve},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:i,to_workbook:t}})(),UC=/^\s|\s$|[\t\n\r]/;function db(e,t){if(!t.bookSST)return"";var r=[Hr];r[r.length]=Je("sst",null,{xmlns:Co[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var i=e[a],c="<si>";i.r?c+=i.r:(c+="<t",i.t||(i.t=""),i.t.match(UC)&&(c+=' xml:space="preserve"'),c+=">"+ur(i.t)+"</t>"),c+="</si>",r[r.length]=c}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function WC(e){return[e.read_shift(4),e.read_shift(4)]}function HC(e,t){return t||(t=Be(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var qC=I6;function $C(e){var t=Bn();We(t,159,HC(e));for(var r=0;r<e.length;++r)We(t,19,qC(e[r]));return We(t,160),t.end()}function GC(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function fb(e){var t=0,r,a=GC(e),i=a.length+1,c,u,f,h,p;for(r=fi(i),r[0]=a.length,c=1;c!=i;++c)r[c]=a[c-1];for(c=i-1;c>=0;--c)u=r[c],f=(t&16384)===0?0:1,h=t<<1&32767,p=f|h,t=p^u;return t^52811}var VC=(function(){function e(i,c){switch(c.type){case"base64":return t(rs(i),c);case"binary":return t(i,c);case"buffer":return t(nr&&Buffer.isBuffer(i)?i.toString("binary"):tc(i),c);case"array":return t(od(i),c)}throw new Error("Unrecognized type "+c.type)}function t(i,c){var u=c||{},f=u.dense?[]:{},h=i.match(/\\trowd.*?\\row\b/g);if(!h.length)throw new Error("RTF missing table");var p={s:{c:0,r:0},e:{c:0,r:h.length-1}};return h.forEach(function(g,y){Array.isArray(f)&&(f[y]=[]);for(var v=/\\\w+\b/g,b=0,w,_=-1;w=v.exec(g);){switch(w[0]){case"\\cell":var S=g.slice(b,v.lastIndex-w[0].length);if(S[0]==" "&&(S=S.slice(1)),++_,S.length){var A={v:S,t:"s"};Array.isArray(f)?f[y][_]=A:f[dr({r:y,c:_})]=A}break}b=v.lastIndex}_>p.e.c&&(p.e.c=_)}),f["!ref"]=Wr(p),f}function r(i,c){return xi(e(i,c),c)}function a(i){for(var c=["{\\rtf1\\ansi"],u=Tr(i["!ref"]),f,h=Array.isArray(i),p=u.s.r;p<=u.e.r;++p){c.push("\\trowd\\trautofit1");for(var g=u.s.c;g<=u.e.c;++g)c.push("\\cellx"+(g+1));for(c.push("\\pard\\intbl"),g=u.s.c;g<=u.e.c;++g){var y=dr({r:p,c:g});f=h?(i[p]||[])[g]:i[y],!(!f||f.v==null&&(!f.f||f.F))&&(c.push(" "+(f.w||(ns(f),f.w))),c.push("\\cell"))}c.push("\\pard\\intbl\\row")}return c.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}})();function ny(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var YC=6,es=YC;function Vu(e){return Math.floor((e+Math.round(128/es)/256)*es)}function Yu(e){return Math.floor((e-5)/es*100+.5)/100}function l0(e){return Math.round((e*es+5)/es*256)/256}function G0(e){e.width?(e.wpx=Vu(e.width),e.wch=Yu(e.wpx),e.MDW=es):e.wpx?(e.wch=Yu(e.wpx),e.width=l0(e.wch),e.MDW=es):typeof e.wch=="number"&&(e.width=l0(e.wch),e.wpx=Vu(e.width),e.MDW=es),e.customWidth&&delete e.customWidth}var KC=96,hb=KC;function Ku(e){return e*96/hb}function pb(e){return e*hb/96}function XC(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=Je("numFmt",null,{numFmtId:a,formatCode:ur(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Je("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function QC(e){var t=[];return t[t.length]=Je("cellXfs",null),e.forEach(function(r){t[t.length]=Je("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Je("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function gb(e,t){var r=[Hr,Je("styleSheet",null,{xmlns:Co[0],"xmlns:vt":tn.vt})],a;return e.SSF&&(a=XC(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=QC(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function JC(e,t){var r=e.read_shift(2),a=mn(e);return[r,a]}function ZC(e,t,r){r||(r=Be(6+4*t.length)),r.write_shift(2,e),nn(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function e8(e,t,r){var a={};a.sz=e.read_shift(2)/20;var i=U6(e);i.fItalic&&(a.italic=1),i.fCondense&&(a.condense=1),i.fExtend&&(a.extend=1),i.fShadow&&(a.shadow=1),i.fOutline&&(a.outline=1),i.fStrikeout&&(a.strike=1);var c=e.read_shift(2);switch(c===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var u=e.read_shift(1);u!=0&&(a.underline=u);var f=e.read_shift(1);f>0&&(a.family=f);var h=e.read_shift(1);switch(h>0&&(a.charset=h),e.l++,a.color=z6(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=mn(e),a}function t8(e,t){t||(t=Be(153)),t.write_shift(2,e.sz*20),W6(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),$u(e.color,t);var a=0;return a=2,t.write_shift(1,a),nn(e.name,t),t.length>t.l?t.slice(0,t.l):t}var r8=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Bh,n8=Oa;function ay(e,t){t||(t=Be(84)),Bh||(Bh=I0(r8));var r=Bh[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for($u({auto:1},t),$u({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function a8(e,t){var r=e.l+t,a=e.read_shift(2),i=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:i}}function xb(e,t,r){r||(r=Be(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Cl(e,t){return t||(t=Be(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var s8=Oa;function i8(e,t){return t||(t=Be(51)),t.write_shift(1,0),Cl(null,t),Cl(null,t),Cl(null,t),Cl(null,t),Cl(null,t),t.length>t.l?t.slice(0,t.l):t}function o8(e,t){return t||(t=Be(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),qu(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function l8(e,t,r){var a=Be(2052);return a.write_shift(4,e),qu(t,a),qu(r,a),a.length>a.l?a.slice(0,a.l):a}function c8(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var i=a[0];i<=a[1];++i)t[i]!=null&&++r}),r!=0&&(We(e,615,_a(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var i=a[0];i<=a[1];++i)t[i]!=null&&We(e,44,ZC(i,t[i]))}),We(e,616))}}function u8(e){var t=1;We(e,611,_a(t)),We(e,43,t8({sz:12,color:{theme:1},name:"Calibri",family:2})),We(e,612)}function d8(e){var t=2;We(e,603,_a(t)),We(e,45,ay({patternType:"none"})),We(e,45,ay({patternType:"gray125"})),We(e,604)}function f8(e){var t=1;We(e,613,_a(t)),We(e,46,i8()),We(e,614)}function h8(e){var t=1;We(e,626,_a(t)),We(e,47,xb({numFmtId:0},65535)),We(e,627)}function p8(e,t){We(e,617,_a(t.length)),t.forEach(function(r){We(e,47,xb(r,0))}),We(e,618)}function g8(e){var t=1;We(e,619,_a(t)),We(e,48,o8({xfId:0,name:"Normal"})),We(e,620)}function x8(e){var t=0;We(e,505,_a(t)),We(e,506)}function m8(e){var t=0;We(e,508,l8(t,"TableStyleMedium9","PivotStyleMedium4")),We(e,509)}function y8(e,t){var r=Bn();return We(r,278),c8(r,e.SSF),u8(r),d8(r),f8(r),h8(r),p8(r,t.cellXfs),g8(r),x8(r),m8(r),We(r,279),r.end()}function mb(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Hr];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function v8(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:mn(e)}}function b8(e){var t=Be(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),nn(e.name,t),t.slice(0,t.l)}function _8(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function S8(e){var t=Be(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function w8(e,t){var r=Be(8+2*t.length);return r.write_shift(4,e),nn(t,r),r.slice(0,r.l)}function T8(e){return e.l+=4,e.read_shift(4)!=0}function E8(e,t){var r=Be(8);return r.write_shift(4,e),r.write_shift(4,1),r}function k8(){var e=Bn();return We(e,332),We(e,334,_a(1)),We(e,335,b8({name:"XLDAPR",version:12e4,flags:3496657072})),We(e,336),We(e,339,w8(1,"XLDAPR")),We(e,52),We(e,35,_a(514)),We(e,4096,_a(0)),We(e,4097,oa(1)),We(e,36),We(e,53),We(e,340),We(e,337,E8(1)),We(e,51,S8([[1,0]])),We(e,338),We(e,333),e.end()}function yb(){var e=[Hr];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function j8(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=dr(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}var xo=1024;function vb(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Je("xml",null,{"xmlns:v":Kn.v,"xmlns:o":Kn.o,"xmlns:x":Kn.x,"xmlns:mv":Kn.mv}).replace(/\/>/,">"),Je("o:shapelayout",Je("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Je("v:shapetype",[Je("v:stroke",null,{joinstyle:"miter"}),Je("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];xo<e*1e3;)xo+=1e3;return t.forEach(function(c){var u=rn(c[0]),f={color2:"#BEFF82",type:"gradient"};f.type=="gradient"&&(f.angle="-180");var h=f.type=="gradient"?Je("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,p=Je("v:fill",h,f),g={on:"t",obscured:"t"};++xo,i=i.concat(["<v:shape"+Yl({id:"_x0000_s"+xo,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(c[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",p,Je("v:shadow",null,g),Je("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",dn("x:Anchor",[u.c+1,0,u.r+1,0,u.c+3,20,u.r+5,20].join(",")),dn("x:AutoFill","False"),dn("x:Row",String(u.r)),dn("x:Column",String(u.c)),c[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function bb(e){var t=[Hr,Je("comments",null,{xmlns:Co[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(i){var c=ur(i.a);r.indexOf(c)==-1&&(r.push(c),t.push("<author>"+c+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),t.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var i=0,c=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?i=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(h){h.a&&(i=r.indexOf(ur(h.a))),c.push(h.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+i+'"><text>'),c.length<=1)t.push(dn("t",ur(c[0]||"")));else{for(var u=`Comment:
    `+c[0]+`
`,f=1;f<c.length;++f)u+=`Reply:
    `+c[f]+`
`;t.push(dn("t",ur(u)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function C8(e,t,r){var a=[Hr,Je("ThreadedComments",null,{xmlns:tn.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(i){var c="";(i[1]||[]).forEach(function(u,f){if(!u.T){delete u.ID;return}u.a&&t.indexOf(u.a)==-1&&t.push(u.a);var h={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};f==0?c=h.id:h.parentId=c,u.ID=h.id,u.a&&(h.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(u.a)).slice(-12)+"}"),a.push(Je("threadedComment",dn("text",u.t||""),h))})}),a.push("</ThreadedComments>"),a.join("")}function A8(e){var t=[Hr,Je("personList",null,{xmlns:tn.TCMNT,"xmlns:x":Co[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(Je("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function R8(e){var t={};t.iauthor=e.read_shift(4);var r=bi(e);return t.rfx=r.s,t.ref=dr(r.s),e.l+=16,t}function D8(e,t){return t==null&&(t=Be(36)),t.write_shift(4,e[1].iauthor),Ro(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var N8=mn;function O8(e){return nn(e.slice(0,54))}function I8(e){var t=Bn(),r=[];return We(t,628),We(t,630),e.forEach(function(a){a[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),We(t,632,O8(i.a)))})}),We(t,631),We(t,633),e.forEach(function(a){a[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var c={s:rn(a[0]),e:rn(a[0])};We(t,635,D8([c,i])),i.t&&i.t.length>0&&We(t,637,M6(i)),We(t,636),delete i.iauthor})}),We(t,634),We(t,629),t.end()}function B8(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&xr.utils.cfb_add(e,i,t.FileIndex[a].content)}})}var _b=["xlsb","xlsm","xlam","biff8","xla"],M8=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,i,c,u){var f=!1,h=!1;c.length==0?h=!0:c.charAt(0)=="["&&(h=!0,c=c.slice(1,-1)),u.length==0?f=!0:u.charAt(0)=="["&&(f=!0,u=u.slice(1,-1));var p=c.length>0?parseInt(c,10)|0:0,g=u.length>0?parseInt(u,10)|0:0;return f?g+=t.c:--g,h?p+=t.r:--p,i+(f?"":"$")+xn(g)+(h?"":"$")+fn(p)}return function(i,c){return t=c,i.replace(e,r)}})(),V0=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Y0=(function(){return function(t,r){return t.replace(V0,function(a,i,c,u,f,h){var p=U0(u)-(c?0:r.c),g=z0(h)-(f?0:r.r),y=g==0?"":f?g+1:"["+g+"]",v=p==0?"":c?p+1:"["+p+"]";return i+"R"+y+"C"+v})}})();function F8(e,t){return e.replace(V0,function(r,a,i,c,u,f){return a+(i=="$"?i+c:xn(U0(c)+t.c))+(u=="$"?u+f:fn(z0(f)+t.r))})}function L8(e){return e.length!=1}function Ur(e){e.l+=1}function Bs(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Sb(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return wb(e);r.biff==12&&(a=4)}var i=e.read_shift(a),c=e.read_shift(a),u=Bs(e),f=Bs(e);return{s:{r:i,c:u[0],cRel:u[1],rRel:u[2]},e:{r:c,c:f[0],cRel:f[1],rRel:f[2]}}}function wb(e){var t=Bs(e),r=Bs(e),a=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function P8(e,t,r){if(r.biff<8)return wb(e);var a=e.read_shift(r.biff==12?4:2),i=e.read_shift(r.biff==12?4:2),c=Bs(e),u=Bs(e);return{s:{r:a,c:c[0],cRel:c[1],rRel:c[2]},e:{r:i,c:u[0],cRel:u[1],rRel:u[2]}}}function Tb(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return z8(e);var a=e.read_shift(r&&r.biff==12?4:2),i=Bs(e);return{r:a,c:i[0],cRel:i[1],rRel:i[2]}}function z8(e){var t=Bs(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function U8(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function W8(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return H8(e);var i=e.read_shift(a>=12?4:2),c=e.read_shift(2),u=(c&16384)>>14,f=(c&32768)>>15;if(c&=16383,f==1)for(;i>524287;)i-=1048576;if(u==1)for(;c>8191;)c=c-16384;return{r:i,c,cRel:u,rRel:f}}function H8(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,i=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),i==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:i,rRel:a}}function q8(e,t,r){var a=(e[e.l++]&96)>>5,i=Sb(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,i]}function $8(e,t,r){var a=(e[e.l++]&96)>>5,i=e.read_shift(2,"i"),c=8;if(r)switch(r.biff){case 5:e.l+=12,c=6;break;case 12:c=12;break}var u=Sb(e,c,r);return[a,i,u]}function G8(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function V8(e,t,r){var a=(e[e.l++]&96)>>5,i=e.read_shift(2),c=8;if(r)switch(r.biff){case 5:e.l+=12,c=6;break;case 12:c=12;break}return e.l+=c,[a,i]}function Y8(e,t,r){var a=(e[e.l++]&96)>>5,i=P8(e,t-1,r);return[a,i]}function K8(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function sy(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function X8(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),i=[],c=0;c<=a;++c)i.push(e.read_shift(r&&r.biff==2?1:2));return i}function Q8(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function J8(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Z8(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function eA(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function Eb(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function tA(e){return e.read_shift(2),Eb(e)}function rA(e){return e.read_shift(2),Eb(e)}function nA(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var i=Tb(e,0,r);return[a,i]}function aA(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var i=W8(e,0,r);return[a,i]}function sA(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var c=Tb(e,0,r);return[a,i,c]}function iA(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(r&&r.biff<=3?1:2);return[iR[i],Cb[i],a]}function oA(e,t,r){var a=e[e.l++],i=e.read_shift(1),c=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:lA(e);return[i,(c[0]===0?Cb:sR)[c[1]]]}function lA(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function cA(e,t,r){e.l+=r&&r.biff==2?3:4}function uA(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),i=e.read_shift(r&&r.biff==2?1:2);return[a,i]}function dA(e){return e.l++,ac[e.read_shift(1)]}function fA(e){return e.l++,e.read_shift(2)}function hA(e){return e.l++,e.read_shift(1)!==0}function pA(e){return e.l++,Do(e)}function gA(e,t,r){return e.l++,ob(e,t-1,r)}function xA(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=sC(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=ac[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Do(e);break;case 2:r[1]=cC(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function mA(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),i=[],c=0;c!=a;++c)i.push((r.biff==12?bi:fC)(e));return i}function yA(e,t,r){var a=0,i=0;r.biff==12?(a=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--i==0&&(i=256));for(var c=0,u=[];c!=a&&(u[c]=[]);++c)for(var f=0;f!=i;++f)u[c][f]=xA(e,r.biff);return u}function vA(e,t,r){var a=e.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,c=e.read_shift(i);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,c]}function bA(e,t,r){if(r.biff==5)return _A(e);var a=e.read_shift(1)>>>5&3,i=e.read_shift(2),c=e.read_shift(4);return[a,i,c]}function _A(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function SA(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var i=e.read_shift(r&&r.biff==2?1:2);return[a,i]}function wA(e,t,r){var a=e.read_shift(1)>>>5&3,i=e.read_shift(r&&r.biff==2?1:2);return[a,i]}function TA(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function EA(e,t,r){var a=(e[e.l++]&96)>>5,i=e.read_shift(2),c=4;if(r)switch(r.biff){case 5:c=15;break;case 12:c=6;break}return e.l+=c,[a,i]}var kA=Oa,jA=Oa,CA=Oa;function sc(e,t,r){return e.l+=2,[U8(e)]}function K0(e){return e.l+=6,[]}var AA=sc,RA=K0,DA=K0,NA=sc;function kb(e){return e.l+=2,[sb(e),e.read_shift(2)&1]}var OA=sc,IA=kb,BA=K0,MA=sc,FA=sc,LA=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function PA(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),i=e.read_shift(2),c=e.read_shift(2),u=LA[r>>2&31];return{ixti:t,coltype:r&3,rt:u,idx:a,c:i,C:c}}function zA(e){return e.l+=2,[e.read_shift(4)]}function UA(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function WA(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function HA(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function qA(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function $A(e){return e.l+=4,[0,0]}var iy={1:{n:"PtgExp",f:uA},2:{n:"PtgTbl",f:CA},3:{n:"PtgAdd",f:Ur},4:{n:"PtgSub",f:Ur},5:{n:"PtgMul",f:Ur},6:{n:"PtgDiv",f:Ur},7:{n:"PtgPower",f:Ur},8:{n:"PtgConcat",f:Ur},9:{n:"PtgLt",f:Ur},10:{n:"PtgLe",f:Ur},11:{n:"PtgEq",f:Ur},12:{n:"PtgGe",f:Ur},13:{n:"PtgGt",f:Ur},14:{n:"PtgNe",f:Ur},15:{n:"PtgIsect",f:Ur},16:{n:"PtgUnion",f:Ur},17:{n:"PtgRange",f:Ur},18:{n:"PtgUplus",f:Ur},19:{n:"PtgUminus",f:Ur},20:{n:"PtgPercent",f:Ur},21:{n:"PtgParen",f:Ur},22:{n:"PtgMissArg",f:Ur},23:{n:"PtgStr",f:gA},26:{n:"PtgSheet",f:UA},27:{n:"PtgEndSheet",f:WA},28:{n:"PtgErr",f:dA},29:{n:"PtgBool",f:hA},30:{n:"PtgInt",f:fA},31:{n:"PtgNum",f:pA},32:{n:"PtgArray",f:K8},33:{n:"PtgFunc",f:iA},34:{n:"PtgFuncVar",f:oA},35:{n:"PtgName",f:vA},36:{n:"PtgRef",f:nA},37:{n:"PtgArea",f:q8},38:{n:"PtgMemArea",f:SA},39:{n:"PtgMemErr",f:kA},40:{n:"PtgMemNoMem",f:jA},41:{n:"PtgMemFunc",f:wA},42:{n:"PtgRefErr",f:TA},43:{n:"PtgAreaErr",f:G8},44:{n:"PtgRefN",f:aA},45:{n:"PtgAreaN",f:Y8},46:{n:"PtgMemAreaN",f:HA},47:{n:"PtgMemNoMemN",f:qA},57:{n:"PtgNameX",f:bA},58:{n:"PtgRef3d",f:sA},59:{n:"PtgArea3d",f:$8},60:{n:"PtgRefErr3d",f:EA},61:{n:"PtgAreaErr3d",f:V8},255:{}},GA={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},VA={1:{n:"PtgElfLel",f:kb},2:{n:"PtgElfRw",f:MA},3:{n:"PtgElfCol",f:AA},6:{n:"PtgElfRwV",f:FA},7:{n:"PtgElfColV",f:NA},10:{n:"PtgElfRadical",f:OA},11:{n:"PtgElfRadicalS",f:BA},13:{n:"PtgElfColS",f:RA},15:{n:"PtgElfColSV",f:DA},16:{n:"PtgElfRadicalLel",f:IA},25:{n:"PtgList",f:PA},29:{n:"PtgSxName",f:zA},255:{}},YA={0:{n:"PtgAttrNoop",f:$A},1:{n:"PtgAttrSemi",f:eA},2:{n:"PtgAttrIf",f:J8},4:{n:"PtgAttrChoose",f:X8},8:{n:"PtgAttrGoto",f:Q8},16:{n:"PtgAttrSum",f:cA},32:{n:"PtgAttrBaxcel",f:sy},33:{n:"PtgAttrBaxcel",f:sy},64:{n:"PtgAttrSpace",f:tA},65:{n:"PtgAttrSpaceSemi",f:rA},128:{n:"PtgAttrIfError",f:Z8},255:{}};function KA(e,t,r,a){if(a.biff<8)return Oa(e,t);for(var i=e.l+t,c=[],u=0;u!==r.length;++u)switch(r[u][0]){case"PtgArray":r[u][1]=yA(e,0,a),c.push(r[u][1]);break;case"PtgMemArea":r[u][2]=mA(e,r[u][1],a),c.push(r[u][2]);break;case"PtgExp":a&&a.biff==12&&(r[u][1][1]=e.read_shift(4),c.push(r[u][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[u][0]}return t=i-e.l,t!==0&&c.push(Oa(e,t)),c}function XA(e,t,r){for(var a=e.l+t,i,c,u=[];a!=e.l;)t=a-e.l,c=e[e.l],i=iy[c]||iy[GA[c]],(c===24||c===25)&&(i=(c===24?VA:YA)[e[e.l+1]]),!i||!i.f?Oa(e,t):u.push([i.n,i.f(e,t,r)]);return u}function QA(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],i=[],c=0;c<a.length;++c){var u=a[c];if(u)switch(u[0]){case 2:i.push('"'+u[1].replace(/"/g,'""')+'"');break;default:i.push(u[1])}else i.push("")}t.push(i.join(","))}return t.join(";")}var JA={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ZA(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function jb(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var i="";if(r.biff>8)switch(e[a[0]][0]){case 357:return i=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?i:i+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return i=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?i:i+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return e[a[0]][0][3]?(i=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?i:i+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function oy(e,t,r){var a=jb(e,t,r);return a=="#REF"?a:ZA(a,r)}function So(e,t,r,a,i){var c=i&&i.biff||8,u={s:{c:0,r:0}},f=[],h,p,g,y=0,v=0,b,w="";if(!e[0]||!e[0][0])return"";for(var _=-1,S="",A=0,D=e[0].length;A<D;++A){var I=e[0][A];switch(I[0]){case"PtgUminus":f.push("-"+f.pop());break;case"PtgUplus":f.push("+"+f.pop());break;case"PtgPercent":f.push(f.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(h=f.pop(),p=f.pop(),_>=0){switch(e[0][_][1][0]){case 0:S=Or(" ",e[0][_][1][1]);break;case 1:S=Or("\r",e[0][_][1][1]);break;default:if(S="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][_][1][0])}p=p+S,_=-1}f.push(p+JA[I[0]]+h);break;case"PtgIsect":h=f.pop(),p=f.pop(),f.push(p+" "+h);break;case"PtgUnion":h=f.pop(),p=f.pop(),f.push(p+","+h);break;case"PtgRange":h=f.pop(),p=f.pop(),f.push(p+":"+h);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":g=Ll(I[1][1],u,i),f.push(Pl(g,c));break;case"PtgRefN":g=r?Ll(I[1][1],r,i):I[1][1],f.push(Pl(g,c));break;case"PtgRef3d":y=I[1][1],g=Ll(I[1][2],u,i),w=oy(a,y,i),f.push(w+"!"+Pl(g,c));break;case"PtgFunc":case"PtgFuncVar":var G=I[1][0],Z=I[1][1];G||(G=0),G&=127;var oe=G==0?[]:f.slice(-G);f.length-=G,Z==="User"&&(Z=oe.shift()),f.push(Z+"("+oe.join(",")+")");break;case"PtgBool":f.push(I[1]?"TRUE":"FALSE");break;case"PtgInt":f.push(I[1]);break;case"PtgNum":f.push(String(I[1]));break;case"PtgStr":f.push('"'+I[1].replace(/"/g,'""')+'"');break;case"PtgErr":f.push(I[1]);break;case"PtgAreaN":b=$1(I[1][1],r?{s:r}:u,i),f.push(Oh(b,i));break;case"PtgArea":b=$1(I[1][1],u,i),f.push(Oh(b,i));break;case"PtgArea3d":y=I[1][1],b=I[1][2],w=oy(a,y,i),f.push(w+"!"+Oh(b,i));break;case"PtgAttrSum":f.push("SUM("+f.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":v=I[1][2];var V=(a.names||[])[v-1]||(a[0]||[])[v],P=V?V.Name:"SH33TJSNAME"+String(v);P&&P.slice(0,6)=="_xlfn."&&!i.xlfn&&(P=P.slice(6)),f.push(P);break;case"PtgNameX":var z=I[1][1];v=I[1][2];var ie;if(i.biff<=5)z<0&&(z=-z),a[z]&&(ie=a[z][v]);else{var K="";if(((a[z]||[])[0]||[])[0]==14849||(((a[z]||[])[0]||[])[0]==1025?a[z][v]&&a[z][v].itab>0&&(K=a.SheetNames[a[z][v].itab-1]+"!"):K=a.SheetNames[v-1]+"!"),a[z]&&a[z][v])K+=a[z][v].Name;else if(a[0]&&a[0][v])K+=a[0][v].Name;else{var xe=(jb(a,z,i)||"").split(";;");xe[v-1]?K=xe[v-1]:K+="SH33TJSERRX"}f.push(K);break}ie||(ie={Name:"SH33TJSERRY"}),f.push(ie.Name);break;case"PtgParen":var ee="(",re=")";if(_>=0){switch(S="",e[0][_][1][0]){case 2:ee=Or(" ",e[0][_][1][1])+ee;break;case 3:ee=Or("\r",e[0][_][1][1])+ee;break;case 4:re=Or(" ",e[0][_][1][1])+re;break;case 5:re=Or("\r",e[0][_][1][1])+re;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][_][1][0])}_=-1}f.push(ee+f.pop()+re);break;case"PtgRefErr":f.push("#REF!");break;case"PtgRefErr3d":f.push("#REF!");break;case"PtgExp":g={c:I[1][1],r:I[1][0]};var _e={c:r.c,r:r.r};if(a.sharedf[dr(g)]){var ne=a.sharedf[dr(g)];f.push(So(ne,u,_e,a,i))}else{var ve=!1;for(h=0;h!=a.arrayf.length;++h)if(p=a.arrayf[h],!(g.c<p[0].s.c||g.c>p[0].e.c)&&!(g.r<p[0].s.r||g.r>p[0].e.r)){f.push(So(p[1],u,_e,a,i)),ve=!0;break}ve||f.push(I[1])}break;case"PtgArray":f.push("{"+QA(I[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=A;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":f.push("");break;case"PtgAreaErr":f.push("#REF!");break;case"PtgAreaErr3d":f.push("#REF!");break;case"PtgList":f.push("Table"+I[1].idx+"[#"+I[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(I));default:throw new Error("Unrecognized Formula Token: "+String(I))}var le=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&_>=0&&le.indexOf(e[0][A][0])==-1){I=e[0][_];var Ae=!0;switch(I[1][0]){case 4:Ae=!1;case 0:S=Or(" ",I[1][1]);break;case 5:Ae=!1;case 1:S=Or("\r",I[1][1]);break;default:if(S="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+I[1][0])}f.push((Ae?S:"")+f.pop()+(Ae?"":S)),_=-1}}if(f.length>1&&i.WTF)throw new Error("bad formula stack");return f[0]}function eR(e){if(e==null){var t=Be(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return hi(e);return hi(0)}function tR(e,t,r,a,i){var c=pi(t,r,i),u=eR(e.v),f=Be(6),h=33;f.write_shift(2,h),f.write_shift(4,0);for(var p=Be(e.bf.length),g=0;g<e.bf.length;++g)p[g]=e.bf[g];var y=un([c,u,f,p]);return y}function ld(e,t,r){var a=e.read_shift(4),i=XA(e,a,r),c=e.read_shift(4),u=c>0?KA(e,c,i,r):null;return[i,u]}var rR=ld,cd=ld,nR=ld,aR=ld,sR={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Cb={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},iR={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function oR(e){var t="of:="+e.replace(V0,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function lR(e){return e.replace(/\./,"!")}var zl=typeof Map<"u";function X0(e,t,r){var a=0,i=e.length;if(r){if(zl?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var c=zl?r.get(t):r[t];a<c.length;++a)if(e[c[a]].t===t)return e.Count++,c[a]}}else for(;a<i;++a)if(e[a].t===t)return e.Count++,a;return e[i]={t},e.Count++,e.Unique++,r&&(zl?(r.has(t)||r.set(t,[]),r.get(t).push(i)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(i))),i}function ud(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(es=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=Yu(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=l0(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Ab(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Ps(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],i=60,c=e.length;if(a==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){Tv(t.z,i),r.ssf[i]=t.z,r.revssf[t.z]=a=i;break}}for(i=0;i!=c;++i)if(e[i].numFmtId===a)return i;return e[c]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},c}function cR(e,t,r){if(e&&e["!ref"]){var a=Tr(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function uR(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Wr(e[r])+'"/>';return t+"</mergeCells>"}function dR(e,t,r,a,i){var c=!1,u={},f=null;if(a.bookType!=="xlsx"&&t.vbaraw){var h=t.SheetNames[r];try{t.Workbook&&(h=t.Workbook.Sheets[r].CodeName||h)}catch{}c=!0,u.codeName=Vl(ur(h))}if(e&&e["!outline"]){var p={summaryBelow:1,summaryRight:1};e["!outline"].above&&(p.summaryBelow=0),e["!outline"].left&&(p.summaryRight=0),f=(f||"")+Je("outlinePr",null,p)}!c&&!f||(i[i.length]=Je("sheetPr",f,u))}var fR=["objects","scenarios","selectLockedCells","selectUnlockedCells"],hR=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function pR(e){var t={sheet:1};return fR.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),hR.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=fb(e.password).toString(16).toUpperCase()),Je("sheetProtection",null,t)}function gR(e){return Ab(e),Je("pageMargins",null,e)}function xR(e,t){for(var r=["<cols>"],a,i=0;i!=t.length;++i)(a=t[i])&&(r[r.length]=Je("col",null,ud(i,a)));return r[r.length]="</cols>",r.join("")}function mR(e,t,r,a){var i=typeof e.ref=="string"?e.ref:Wr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var c=r.Workbook.Names,u=Qn(i);u.s.r==u.e.r&&(u.e.r=Qn(t["!ref"]).e.r,i=Wr(u));for(var f=0;f<c.length;++f){var h=c[f];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==a){h.Ref="'"+r.SheetNames[a]+"'!"+i;break}}return f==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),Je("autoFilter",null,{ref:i})}function yR(e,t,r,a){var i={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),Je("sheetViews",Je("sheetView",null,i),{})}function vR(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var i="",c=e.t,u=e.v;if(e.t!=="z")switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=ac[e.v];break;case"d":a&&a.cellDates?i=Cn(e.v,-1).toISOString():(e=Fn(e),e.t="n",i=""+(e.v=Mn(Cn(e.v)))),typeof e.z>"u"&&(e.z=Ir[14]);break;default:i=e.v;break}var f=dn("v",ur(i)),h={r:t},p=Ps(a.cellXfs,e,a);switch(p!==0&&(h.s=p),e.t){case"n":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){f=dn("v",""+X0(a.Strings,e.v,a.revStrings)),h.t="s";break}h.t="str";break}if(e.t!=c&&(e.t=c,e.v=u),typeof e.f=="string"&&e.f){var g=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;f=Je("f",ur(e.f),g)+(e.v!=null?f:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(h.cm=1),Je("c",f,h)}function bR(e,t,r,a){var i=[],c=[],u=Tr(e["!ref"]),f="",h,p="",g=[],y=0,v=0,b=e["!rows"],w=Array.isArray(e),_={r:p},S,A=-1;for(v=u.s.c;v<=u.e.c;++v)g[v]=xn(v);for(y=u.s.r;y<=u.e.r;++y){for(c=[],p=fn(y),v=u.s.c;v<=u.e.c;++v){h=g[v]+p;var D=w?(e[y]||[])[v]:e[h];D!==void 0&&(f=vR(D,h,e,t))!=null&&c.push(f)}(c.length>0||b&&b[y])&&(_={r:p},b&&b[y]&&(S=b[y],S.hidden&&(_.hidden=1),A=-1,S.hpx?A=Ku(S.hpx):S.hpt&&(A=S.hpt),A>-1&&(_.ht=A,_.customHeight=1),S.level&&(_.outlineLevel=S.level)),i[i.length]=Je("row",c.join(""),_))}if(b)for(;y<b.length;++y)b&&b[y]&&(_={r:y+1},S=b[y],S.hidden&&(_.hidden=1),A=-1,S.hpx?A=Ku(S.hpx):S.hpt&&(A=S.hpt),A>-1&&(_.ht=A,_.customHeight=1),S.level&&(_.outlineLevel=S.level),i[i.length]=Je("row","",_));return i.join("")}function Rb(e,t,r,a){var i=[Hr,Je("worksheet",null,{xmlns:Co[0],"xmlns:r":tn.r})],c=r.SheetNames[e],u=0,f="",h=r.Sheets[c];h==null&&(h={});var p=h["!ref"]||"A1",g=Tr(p);if(g.e.c>16383||g.e.r>1048575){if(t.WTF)throw new Error("Range "+p+" exceeds format limit A1:XFD1048576");g.e.c=Math.min(g.e.c,16383),g.e.r=Math.min(g.e.c,1048575),p=Wr(g)}a||(a={}),h["!comments"]=[];var y=[];dR(h,r,e,t,i),i[i.length]=Je("dimension",null,{ref:p}),i[i.length]=yR(h,t,e,r),t.sheetFormat&&(i[i.length]=Je("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),h["!cols"]!=null&&h["!cols"].length>0&&(i[i.length]=xR(h,h["!cols"])),i[u=i.length]="<sheetData/>",h["!links"]=[],h["!ref"]!=null&&(f=bR(h,t),f.length>0&&(i[i.length]=f)),i.length>u+1&&(i[i.length]="</sheetData>",i[u]=i[u].replace("/>",">")),h["!protect"]&&(i[i.length]=pR(h["!protect"])),h["!autofilter"]!=null&&(i[i.length]=mR(h["!autofilter"],h,r,e)),h["!merges"]!=null&&h["!merges"].length>0&&(i[i.length]=uR(h["!merges"]));var v=-1,b,w=-1;return h["!links"].length>0&&(i[i.length]="<hyperlinks>",h["!links"].forEach(function(_){_[1].Target&&(b={ref:_[0]},_[1].Target.charAt(0)!="#"&&(w=cr(a,-1,ur(_[1].Target).replace(/#.*$/,""),Zt.HLINK),b["r:id"]="rId"+w),(v=_[1].Target.indexOf("#"))>-1&&(b.location=ur(_[1].Target.slice(v+1))),_[1].Tooltip&&(b.tooltip=ur(_[1].Tooltip)),i[i.length]=Je("hyperlink",null,b))}),i[i.length]="</hyperlinks>"),delete h["!links"],h["!margins"]!=null&&(i[i.length]=gR(h["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(i[i.length]=dn("ignoredErrors",Je("ignoredError",null,{numberStoredAsText:1,sqref:p}))),y.length>0&&(w=cr(a,-1,"../drawings/drawing"+(e+1)+".xml",Zt.DRAW),i[i.length]=Je("drawing",null,{"r:id":"rId"+w}),h["!drawing"]=y),h["!comments"].length>0&&(w=cr(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Zt.VML),i[i.length]=Je("legacyDrawing",null,{"r:id":"rId"+w}),h["!legacy"]=w),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function _R(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var c=e.read_shift(1);return e.l=a,c&7&&(r.level=c&7),c&16&&(r.hidden=!0),c&32&&(r.hpt=i/20),r}function SR(e,t,r){var a=Be(145),i=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var c=320;i.hpx?c=Ku(i.hpx)*20:i.hpt&&(c=i.hpt*20),a.write_shift(2,c),a.write_shift(1,0);var u=0;i.level&&(u|=i.level),i.hidden&&(u|=16),(i.hpx||i.hpt)&&(u|=32),a.write_shift(1,u),a.write_shift(1,0);var f=0,h=a.l;a.l+=4;for(var p={r:e,c:0},g=0;g<16;++g)if(!(t.s.c>g+1<<10||t.e.c<g<<10)){for(var y=-1,v=-1,b=g<<10;b<g+1<<10;++b){p.c=b;var w=Array.isArray(r)?(r[p.r]||[])[p.c]:r[dr(p)];w&&(y<0&&(y=b),v=b)}y<0||(++f,a.write_shift(4,y),a.write_shift(4,v))}var _=a.l;return a.l=h,a.write_shift(4,f),a.l=_,a.length>a.l?a.slice(0,a.l):a}function wR(e,t,r,a){var i=SR(a,r,t);(i.length>17||(t["!rows"]||[])[a])&&We(e,0,i)}var TR=bi,ER=Ro;function kR(){}function jR(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=F6(e),r}function CR(e,t,r){r==null&&(r=Be(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var i=1;i<3;++i)r.write_shift(1,0);return $u({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),$v(e,r),r.slice(0,r.l)}function AR(e){var t=ua(e);return[t]}function RR(e,t,r){return r==null&&(r=Be(8)),mi(t,r)}function DR(e){var t=yi(e);return[t]}function NR(e,t,r){return r==null&&(r=Be(4)),vi(t,r)}function OR(e){var t=ua(e),r=e.read_shift(1);return[t,r,"b"]}function IR(e,t,r){return r==null&&(r=Be(9)),mi(t,r),r.write_shift(1,e.v?1:0),r}function BR(e){var t=yi(e),r=e.read_shift(1);return[t,r,"b"]}function MR(e,t,r){return r==null&&(r=Be(5)),vi(t,r),r.write_shift(1,e.v?1:0),r}function FR(e){var t=ua(e),r=e.read_shift(1);return[t,r,"e"]}function LR(e,t,r){return r==null&&(r=Be(9)),mi(t,r),r.write_shift(1,e.v),r}function PR(e){var t=yi(e),r=e.read_shift(1);return[t,r,"e"]}function zR(e,t,r){return r==null&&(r=Be(8)),vi(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function UR(e){var t=ua(e),r=e.read_shift(4);return[t,r,"s"]}function WR(e,t,r){return r==null&&(r=Be(12)),mi(t,r),r.write_shift(4,t.v),r}function HR(e){var t=yi(e),r=e.read_shift(4);return[t,r,"s"]}function qR(e,t,r){return r==null&&(r=Be(8)),vi(t,r),r.write_shift(4,t.v),r}function $R(e){var t=ua(e),r=Do(e);return[t,r,"n"]}function GR(e,t,r){return r==null&&(r=Be(16)),mi(t,r),hi(e.v,r),r}function VR(e){var t=yi(e),r=Do(e);return[t,r,"n"]}function YR(e,t,r){return r==null&&(r=Be(12)),vi(t,r),hi(e.v,r),r}function KR(e){var t=ua(e),r=Gv(e);return[t,r,"n"]}function XR(e,t,r){return r==null&&(r=Be(12)),mi(t,r),Vv(e.v,r),r}function QR(e){var t=yi(e),r=Gv(e);return[t,r,"n"]}function JR(e,t,r){return r==null&&(r=Be(8)),vi(t,r),Vv(e.v,r),r}function ZR(e){var t=ua(e),r=W0(e);return[t,r,"is"]}function e5(e){var t=ua(e),r=mn(e);return[t,r,"str"]}function t5(e,t,r){return r==null&&(r=Be(12+4*e.v.length)),mi(t,r),nn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function r5(e){var t=yi(e),r=mn(e);return[t,r,"str"]}function n5(e,t,r){return r==null&&(r=Be(8+4*e.v.length)),vi(t,r),nn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function a5(e,t,r){var a=e.l+t,i=ua(e);i.r=r["!row"];var c=e.read_shift(1),u=[i,c,"b"];if(r.cellFormula){e.l+=2;var f=cd(e,a-e.l,r);u[3]=So(f,null,i,r.supbooks,r)}else e.l=a;return u}function s5(e,t,r){var a=e.l+t,i=ua(e);i.r=r["!row"];var c=e.read_shift(1),u=[i,c,"e"];if(r.cellFormula){e.l+=2;var f=cd(e,a-e.l,r);u[3]=So(f,null,i,r.supbooks,r)}else e.l=a;return u}function i5(e,t,r){var a=e.l+t,i=ua(e);i.r=r["!row"];var c=Do(e),u=[i,c,"n"];if(r.cellFormula){e.l+=2;var f=cd(e,a-e.l,r);u[3]=So(f,null,i,r.supbooks,r)}else e.l=a;return u}function o5(e,t,r){var a=e.l+t,i=ua(e);i.r=r["!row"];var c=mn(e),u=[i,c,"str"];if(r.cellFormula){e.l+=2;var f=cd(e,a-e.l,r);u[3]=So(f,null,i,r.supbooks,r)}else e.l=a;return u}var l5=bi,c5=Ro;function u5(e,t){return t==null&&(t=Be(4)),t.write_shift(4,e),t}function d5(e,t){var r=e.l+t,a=bi(e),i=H0(e),c=mn(e),u=mn(e),f=mn(e);e.l=r;var h={rfx:a,relId:i,loc:c,display:f};return u&&(h.Tooltip=u),h}function f5(e,t){var r=Be(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Ro({s:rn(e[0]),e:rn(e[0])},r),q0("rId"+t,r);var a=e[1].Target.indexOf("#"),i=a==-1?"":e[1].Target.slice(a+1);return nn(i||"",r),nn(e[1].Tooltip||"",r),nn("",r),r.slice(0,r.l)}function h5(){}function p5(e,t,r){var a=e.l+t,i=Yv(e),c=e.read_shift(1),u=[i];if(u[2]=c,r.cellFormula){var f=rR(e,a-e.l,r);u[1]=f}else e.l=a;return u}function g5(e,t,r){var a=e.l+t,i=bi(e),c=[i];if(r.cellFormula){var u=aR(e,a-e.l,r);c[1]=u,e.l=a}else e.l=a;return c}function x5(e,t,r){r==null&&(r=Be(18));var a=ud(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var i=0;return t.hidden&&(i|=1),typeof a.width=="number"&&(i|=2),t.level&&(i|=t.level<<8),r.write_shift(2,i),r}var Db=["left","right","top","bottom","header","footer"];function m5(e){var t={};return Db.forEach(function(r){t[r]=Do(e)}),t}function y5(e,t){return t==null&&(t=Be(48)),Ab(e),Db.forEach(function(r){hi(e[r],t)}),t}function v5(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function b5(e,t,r){r==null&&(r=Be(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function _5(e){var t=Be(24);return t.write_shift(4,4),t.write_shift(4,1),Ro(e,t),t}function S5(e,t){return t==null&&(t=Be(66)),t.write_shift(2,e.password?fb(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function w5(){}function T5(){}function E5(e,t,r,a,i,c,u){if(t.v===void 0)return!1;var f="";switch(t.t){case"b":f=t.v?"1":"0";break;case"d":t=Fn(t),t.z=t.z||Ir[14],t.v=Mn(Cn(t.v)),t.t="n";break;case"n":case"e":f=""+t.v;break;default:f=t.v;break}var h={r,c:a};switch(h.s=Ps(i.cellXfs,t,i),t.l&&c["!links"].push([dr(h),t.l]),t.c&&c["!comments"].push([dr(h),t.c]),t.t){case"s":case"str":return i.bookSST?(f=X0(i.Strings,t.v,i.revStrings),h.t="s",h.v=f,u?We(e,18,qR(t,h)):We(e,7,WR(t,h))):(h.t="str",u?We(e,17,n5(t,h)):We(e,6,t5(t,h))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?u?We(e,13,JR(t,h)):We(e,2,XR(t,h)):u?We(e,16,YR(t,h)):We(e,5,GR(t,h)),!0;case"b":return h.t="b",u?We(e,15,MR(t,h)):We(e,4,IR(t,h)),!0;case"e":return h.t="e",u?We(e,14,zR(t,h)):We(e,3,LR(t,h)),!0}return u?We(e,12,NR(t,h)):We(e,1,RR(t,h)),!0}function k5(e,t,r,a){var i=Tr(t["!ref"]||"A1"),c,u="",f=[];We(e,145);var h=Array.isArray(t),p=i.e.r;t["!rows"]&&(p=Math.max(i.e.r,t["!rows"].length-1));for(var g=i.s.r;g<=p;++g){u=fn(g),wR(e,t,i,g);var y=!1;if(g<=i.e.r)for(var v=i.s.c;v<=i.e.c;++v){g===i.s.r&&(f[v]=xn(v)),c=f[v]+u;var b=h?(t[g]||[])[v]:t[c];if(!b){y=!1;continue}y=E5(e,b,g,v,a,t,y)}}We(e,146)}function j5(e,t){!t||!t["!merges"]||(We(e,177,u5(t["!merges"].length)),t["!merges"].forEach(function(r){We(e,176,c5(r))}),We(e,178))}function C5(e,t){!t||!t["!cols"]||(We(e,390),t["!cols"].forEach(function(r,a){r&&We(e,60,x5(a,r))}),We(e,391))}function A5(e,t){!t||!t["!ref"]||(We(e,648),We(e,649,_5(Tr(t["!ref"]))),We(e,650))}function R5(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var i=cr(r,-1,a[1].Target.replace(/#.*$/,""),Zt.HLINK);We(e,494,f5(a,i))}}),delete t["!links"]}function D5(e,t,r,a){if(t["!comments"].length>0){var i=cr(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Zt.VML);We(e,551,q0("rId"+i)),t["!legacy"]=i}}function N5(e,t,r,a){if(t["!autofilter"]){var i=t["!autofilter"],c=typeof i.ref=="string"?i.ref:Wr(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var u=r.Workbook.Names,f=Qn(c);f.s.r==f.e.r&&(f.e.r=Qn(t["!ref"]).e.r,c=Wr(f));for(var h=0;h<u.length;++h){var p=u[h];if(p.Name=="_xlnm._FilterDatabase"&&p.Sheet==a){p.Ref="'"+r.SheetNames[a]+"'!"+c;break}}h==u.length&&u.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+c}),We(e,161,Ro(Tr(c))),We(e,162)}}function O5(e,t,r){We(e,133),We(e,137,b5(t,r)),We(e,138),We(e,134)}function I5(e,t){t["!protect"]&&We(e,535,S5(t["!protect"]))}function B5(e,t,r,a){var i=Bn(),c=r.SheetNames[e],u=r.Sheets[c]||{},f=c;try{r&&r.Workbook&&(f=r.Workbook.Sheets[e].CodeName||f)}catch{}var h=Tr(u["!ref"]||"A1");if(h.e.c>16383||h.e.r>1048575){if(t.WTF)throw new Error("Range "+(u["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575)}return u["!links"]=[],u["!comments"]=[],We(i,129),(r.vbaraw||u["!outline"])&&We(i,147,CR(f,u["!outline"])),We(i,148,ER(h)),O5(i,u,r.Workbook),C5(i,u),k5(i,u,e,t),I5(i,u),N5(i,u,r,e),j5(i,u),R5(i,u,a),u["!margins"]&&We(i,476,y5(u["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&A5(i,u),D5(i,u,e,a),We(i,130),i.end()}function M5(e,t){e.l+=10;var r=mn(e);return{name:r}}var F5=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function L5(e){return!e.Workbook||!e.Workbook.WBProps?"false":g6(e.Workbook.WBProps.date1904)?"true":"false"}var P5="][*?/\\".split("");function Nb(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return P5.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function z5(e,t,r){e.forEach(function(a,i){Nb(a);for(var c=0;c<i;++c)if(a==e[c])throw new Error("Duplicate Sheet Name: "+a);if(r){var u=t&&t[i]&&t[i].CodeName||a;if(u.charCodeAt(0)==95&&u.length>22)throw new Error("Bad Code Name: Worksheet"+u)}})}function U5(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];z5(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)cR(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function Ob(e){var t=[Hr];t[t.length]=Je("workbook",null,{xmlns:Co[0],"xmlns:r":tn.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(F5.forEach(function(f){e.Workbook.WBProps[f[0]]!=null&&e.Workbook.WBProps[f[0]]!=f[1]&&(a[f[0]]=e.Workbook.WBProps[f[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=Je("workbookPr",null,a);var i=e.Workbook&&e.Workbook.Sheets||[],c=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",c=0;c!=e.SheetNames.length&&!(!i[c]||!i[c].Hidden);++c);c==e.SheetNames.length&&(c=0),t[t.length]='<workbookView firstSheet="'+c+'" activeTab="'+c+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",c=0;c!=e.SheetNames.length;++c){var u={name:ur(e.SheetNames[c].slice(0,31))};if(u.sheetId=""+(c+1),u["r:id"]="rId"+(c+1),i[c])switch(i[c].Hidden){case 1:u.state="hidden";break;case 2:u.state="veryHidden";break}t[t.length]=Je("sheet",null,u)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(f){var h={name:f.Name};f.Comment&&(h.comment=f.Comment),f.Sheet!=null&&(h.localSheetId=""+f.Sheet),f.Hidden&&(h.hidden="1"),f.Ref&&(t[t.length]=Je("definedName",ur(f.Ref),h))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function W5(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=o0(e),r.name=mn(e),r}function H5(e,t){return t||(t=Be(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),q0(e.strRelID,t),nn(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function q5(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var i=t>8?mn(e):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function $5(e,t){t||(t=Be(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),$v(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function G5(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),c=L6(e),u=nR(e,0,r),f=H0(e);e.l=a;var h={Name:c,Ptg:u};return i<268435455&&(h.Sheet=i),f&&(h.Comment=f),h}function V5(e,t){We(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,i={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};We(e,156,H5(i))}We(e,144)}function Y5(e,t){t||(t=Be(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return nn("SheetJS",t),nn(Fu.version,t),nn(Fu.version,t),nn("7262",t),t.length>t.l?t.slice(0,t.l):t}function K5(e,t){t||(t=Be(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function X5(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,i=-1,c=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&i==-1?i=a:r[a].Hidden==1&&c==-1&&(c=a);c>i||(We(e,135),We(e,158,K5(i)),We(e,136))}}function Q5(e,t){var r=Bn();return We(r,131),We(r,128,Y5()),We(r,153,$5(e.Workbook&&e.Workbook.WBProps||null)),X5(r,e),V5(r,e),We(r,132),r.end()}function J5(e,t,r){return(t.slice(-4)===".bin"?Q5:Ob)(e)}function Z5(e,t,r,a,i){return(t.slice(-4)===".bin"?B5:Rb)(e,r,a,i)}function eD(e,t,r){return(t.slice(-4)===".bin"?y8:gb)(e,r)}function tD(e,t,r){return(t.slice(-4)===".bin"?$C:db)(e,r)}function rD(e,t,r){return(t.slice(-4)===".bin"?I8:bb)(e)}function nD(e){return(e.slice(-4)===".bin"?k8:yb)()}function aD(e,t){var r=[];return e.Props&&r.push(eC(e.Props,t)),e.Custprops&&r.push(tC(e.Props,e.Custprops)),r.join("")}function sD(){return""}function iD(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,i){var c=[];c.push(Je("NumberFormat",null,{"ss:Format":ur(Ir[a.numFmtId])}));var u={"ss:ID":"s"+(21+i)};r.push(Je("Style",c.join(""),u))}),Je("Styles",r.join(""))}function Ib(e){return Je("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+Y0(e.Ref,{r:0,c:0})})}function oD(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var i=t[a];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(Ib(i)))}return Je("Names",r.join(""))}function lD(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var i=a.Workbook.Names,c=[],u=0;u<i.length;++u){var f=i[u];f.Sheet==r&&(f.Name.match(/^_xlfn\./)||c.push(Ib(f)))}return c.join("")}function cD(e,t,r,a){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(Je("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(Je("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(Je("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)i.push(Je("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var c=0;c<r&&!(a.Workbook.Sheets[c]&&!a.Workbook.Sheets[c].Hidden);++c);c==r&&i.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(dn("ProtectContents","True")),e["!protect"].objects&&i.push(dn("ProtectObjects","True")),e["!protect"].scenarios&&i.push(dn("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?i.push(dn("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&i.push(dn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(u){e["!protect"][u[0]]&&i.push("<"+u[1]+"/>")})),i.length==0?"":Je("WorksheetOptions",i.join(""),{xmlns:Kn.x})}function uD(e){return e.map(function(t){var r=p6(t.t||""),a=Je("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Je("Comment",a,{"ss:Author":t.a})}).join("")}function dD(e,t,r,a,i,c,u){if(!e||e.v==null&&e.f==null)return"";var f={};if(e.f&&(f["ss:Formula"]="="+ur(Y0(e.f,u))),e.F&&e.F.slice(0,t.length)==t){var h=rn(e.F.slice(t.length+1));f["ss:ArrayRange"]="RC:R"+(h.r==u.r?"":"["+(h.r-u.r)+"]")+"C"+(h.c==u.c?"":"["+(h.c-u.c)+"]")}if(e.l&&e.l.Target&&(f["ss:HRef"]=ur(e.l.Target),e.l.Tooltip&&(f["x:HRefScreenTip"]=ur(e.l.Tooltip))),r["!merges"])for(var p=r["!merges"],g=0;g!=p.length;++g)p[g].s.c!=u.c||p[g].s.r!=u.r||(p[g].e.c>p[g].s.c&&(f["ss:MergeAcross"]=p[g].e.c-p[g].s.c),p[g].e.r>p[g].s.r&&(f["ss:MergeDown"]=p[g].e.r-p[g].s.r));var y="",v="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":y="Number",v=String(e.v);break;case"b":y="Boolean",v=e.v?"1":"0";break;case"e":y="Error",v=ac[e.v];break;case"d":y="DateTime",v=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Ir[14]);break;case"s":y="String",v=h6(e.v||"");break}var b=Ps(a.cellXfs,e,a);f["ss:StyleID"]="s"+(21+b),f["ss:Index"]=u.c+1;var w=e.v!=null?v:"",_=e.t=="z"?"":'<Data ss:Type="'+y+'">'+w+"</Data>";return(e.c||[]).length>0&&(_+=uD(e.c)),Je("Cell",_,f)}function fD(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=pb(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function hD(e,t,r,a){if(!e["!ref"])return"";var i=Tr(e["!ref"]),c=e["!merges"]||[],u=0,f=[];e["!cols"]&&e["!cols"].forEach(function(S,A){G0(S);var D=!!S.width,I=ud(A,S),G={"ss:Index":A+1};D&&(G["ss:Width"]=Vu(I.width)),S.hidden&&(G["ss:Hidden"]="1"),f.push(Je("Column",null,G))});for(var h=Array.isArray(e),p=i.s.r;p<=i.e.r;++p){for(var g=[fD(p,(e["!rows"]||[])[p])],y=i.s.c;y<=i.e.c;++y){var v=!1;for(u=0;u!=c.length;++u)if(!(c[u].s.c>y)&&!(c[u].s.r>p)&&!(c[u].e.c<y)&&!(c[u].e.r<p)){(c[u].s.c!=y||c[u].s.r!=p)&&(v=!0);break}if(!v){var b={r:p,c:y},w=dr(b),_=h?(e[p]||[])[y]:e[w];g.push(dD(_,w,e,t,r,a,b))}}g.push("</Row>"),g.length>2&&f.push(g.join(""))}return f.join("")}function pD(e,t,r){var a=[],i=r.SheetNames[e],c=r.Sheets[i],u=c?lD(c,t,e,r):"";return u.length>0&&a.push("<Names>"+u+"</Names>"),u=c?hD(c,t,e,r):"",u.length>0&&a.push("<Table>"+u+"</Table>"),a.push(cD(c,t,e,r)),a.join("")}function gD(e,t){t||(t={}),e.SSF||(e.SSF=Fn(Ir)),e.SSF&&(sd(),ad(e.SSF),t.revssf=id(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Ps(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(aD(e,t)),r.push(sD()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(Je("Worksheet",pD(a,t,e),{"ss:Name":ur(e.SheetNames[a])}));return r[2]=iD(e,t),r[3]=oD(e),Hr+Je("Workbook",r.join(""),{xmlns:Kn.ss,"xmlns:o":Kn.o,"xmlns:x":Kn.x,"xmlns:ss":Kn.ss,"xmlns:dt":Kn.dt,"xmlns:html":Kn.html})}var Mh={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function xD(e,t){var r=[],a=[],i=[],c=0,u,f=I1(V1,"n"),h=I1(Y1,"n");if(e.Props)for(u=hn(e.Props),c=0;c<u.length;++c)(Object.prototype.hasOwnProperty.call(f,u[c])?r:Object.prototype.hasOwnProperty.call(h,u[c])?a:i).push([u[c],e.Props[u[c]]]);if(e.Custprops)for(u=hn(e.Custprops),c=0;c<u.length;++c)Object.prototype.hasOwnProperty.call(e.Props||{},u[c])||(Object.prototype.hasOwnProperty.call(f,u[c])?r:Object.prototype.hasOwnProperty.call(h,u[c])?a:i).push([u[c],e.Custprops[u[c]]]);var p=[];for(c=0;c<i.length;++c)ab.indexOf(i[c][0])>-1||tb.indexOf(i[c][0])>-1||i[c][1]!=null&&p.push(i[c]);a.length&&xr.utils.cfb_add(t,"/SummaryInformation",Z1(a,Mh.SI,h,Y1)),(r.length||p.length)&&xr.utils.cfb_add(t,"/DocumentSummaryInformation",Z1(r,Mh.DSI,f,V1,p.length?p:null,Mh.UDI))}function mD(e,t){var r=t||{},a=xr.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return xr.utils.cfb_add(a,i,Bb(e,r)),r.biff==8&&(e.Props||e.Custprops)&&xD(e,a),r.biff==8&&e.vbaraw&&B8(a,xr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var yD={0:{f:_R},1:{f:AR},2:{f:KR},3:{f:FR},4:{f:OR},5:{f:$R},6:{f:e5},7:{f:UR},8:{f:o5},9:{f:i5},10:{f:a5},11:{f:s5},12:{f:DR},13:{f:QR},14:{f:PR},15:{f:BR},16:{f:VR},17:{f:r5},18:{f:HR},19:{f:W0},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:G5},40:{},42:{},43:{f:e8},44:{f:JC},45:{f:n8},46:{f:s8},47:{f:a8},48:{},49:{f:D6},50:{},51:{f:_8},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:NC},62:{f:ZR},63:{f:j8},64:{f:w5},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Oa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:v5},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:jR},148:{f:TR,p:16},151:{f:h5},152:{},153:{f:q5},154:{},155:{},156:{f:W5},157:{},158:{},159:{T:1,f:WC},160:{T:-1},161:{T:1,f:bi},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:l5},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:v8},336:{T:-1},337:{f:T8,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:o0},357:{},358:{},359:{},360:{T:1},361:{},362:{f:kC},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:p5},427:{f:g5},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:m5},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:kR},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:d5},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:o0},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:N8},633:{T:1},634:{T:-1},635:{T:1,f:R8},636:{T:-1},637:{f:B6},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:M5},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:T5},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ze(e,t,r,a){var i=t;if(!isNaN(i)){var c=a||(r||[]).length||0,u=e.next(4);u.write_shift(2,i),u.write_shift(2,c),c>0&&P0(r)&&e.push(r)}}function vD(e,t,r,a){var i=(r||[]).length||0;if(i<=8224)return Ze(e,t,r,i);var c=t;if(!isNaN(c)){for(var u=r.parts||[],f=0,h=0,p=0;p+(u[f]||8224)<=8224;)p+=u[f]||8224,f++;var g=e.next(4);for(g.write_shift(2,c),g.write_shift(2,p),e.push(r.slice(h,h+p)),h+=p;h<i;){for(g=e.next(4),g.write_shift(2,60),p=0;p+(u[f]||8224)<=8224;)p+=u[f]||8224,f++;g.write_shift(2,p),e.push(r.slice(h,h+p)),h+=p}}}function ic(e,t,r){return e||(e=Be(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function bD(e,t,r,a){var i=Be(9);return ic(i,e,t),ib(r,a||"b",i),i}function _D(e,t,r){var a=Be(8+2*r.length);return ic(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function SD(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var i=t.t=="d"?Mn(Cn(t.v)):t.v;i==(i|0)&&i>=0&&i<65536?Ze(e,2,MC(r,a,i)):Ze(e,3,BC(r,a,i));return;case"b":case"e":Ze(e,5,bD(r,a,t.v,t.t));return;case"s":case"str":Ze(e,4,_D(r,a,(t.v||"").slice(0,255)));return}Ze(e,1,ic(null,r,a))}function wD(e,t,r,a){var i=Array.isArray(t),c=Tr(t["!ref"]||"A1"),u,f="",h=[];if(c.e.c>255||c.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");c.e.c=Math.min(c.e.c,255),c.e.r=Math.min(c.e.c,16383),u=Wr(c)}for(var p=c.s.r;p<=c.e.r;++p){f=fn(p);for(var g=c.s.c;g<=c.e.c;++g){p===c.s.r&&(h[g]=xn(g)),u=h[g]+f;var y=i?(t[p]||[])[g]:t[u];y&&SD(e,y,p,g)}}}function TD(e,t){for(var r=t||{},a=Bn(),i=0,c=0;c<e.SheetNames.length;++c)e.SheetNames[c]==r.sheet&&(i=c);if(i==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ze(a,r.biff==4?1033:r.biff==3?521:9,$0(e,16,r)),wD(a,e.Sheets[e.SheetNames[i]],i,r),Ze(a,10),a.end()}function ED(e,t,r){Ze(e,49,yC({sz:12,name:"Arial"},r))}function kD(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var i=a[0];i<=a[1];++i)t[i]!=null&&Ze(e,1054,_C(i,t[i],r))})}function jD(e,t){var r=Be(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ze(e,2151,r),r=Be(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),cb(Tr(t["!ref"]||"A1"),r),r.write_shift(4,4),Ze(e,2152,r)}function CD(e,t){for(var r=0;r<16;++r)Ze(e,224,ty({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){Ze(e,224,ty(a,0,t))})}function AD(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];Ze(e,440,AC(a)),a[1].Tooltip&&Ze(e,2048,RC(a))}delete t["!links"]}function RD(e,t){if(t){var r=0;t.forEach(function(a,i){++r<=256&&a&&Ze(e,125,OC(ud(i,a),i))})}}function DD(e,t,r,a,i){var c=16+Ps(i.cellXfs,t,i);if(t.v==null&&!t.bf){Ze(e,513,pi(r,a,c));return}if(t.bf)Ze(e,6,tR(t,r,a,i,c));else switch(t.t){case"d":case"n":var u=t.t=="d"?Mn(Cn(t.v)):t.v;Ze(e,515,EC(r,a,u,c));break;case"b":case"e":Ze(e,517,TC(r,a,t.v,c,i,t.t));break;case"s":case"str":if(i.bookSST){var f=X0(i.Strings,t.v,i.revStrings);Ze(e,253,vC(r,a,f,c))}else Ze(e,516,bC(r,a,(t.v||"").slice(0,255),c,i));break;default:Ze(e,513,pi(r,a,c))}}function ND(e,t,r){var a=Bn(),i=r.SheetNames[e],c=r.Sheets[i]||{},u=(r||{}).Workbook||{},f=(u.Sheets||[])[e]||{},h=Array.isArray(c),p=t.biff==8,g,y="",v=[],b=Tr(c["!ref"]||"A1"),w=p?65536:16384;if(b.e.c>255||b.e.r>=w){if(t.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:IV16384");b.e.c=Math.min(b.e.c,255),b.e.r=Math.min(b.e.c,w-1)}Ze(a,2057,$0(r,16,t)),Ze(a,13,oa(1)),Ze(a,12,oa(100)),Ze(a,15,jn(!0)),Ze(a,17,jn(!1)),Ze(a,16,hi(.001)),Ze(a,95,jn(!0)),Ze(a,42,jn(!1)),Ze(a,43,jn(!1)),Ze(a,130,oa(1)),Ze(a,128,wC()),Ze(a,131,jn(!1)),Ze(a,132,jn(!1)),p&&RD(a,c["!cols"]),Ze(a,512,SC(b,t)),p&&(c["!links"]=[]);for(var _=b.s.r;_<=b.e.r;++_){y=fn(_);for(var S=b.s.c;S<=b.e.c;++S){_===b.s.r&&(v[S]=xn(S)),g=v[S]+y;var A=h?(c[_]||[])[S]:c[g];A&&(DD(a,A,_,S,t),p&&A.l&&c["!links"].push([g,A.l]))}}var D=f.CodeName||f.name||i;return p&&Ze(a,574,mC((u.Views||[])[0])),p&&(c["!merges"]||[]).length&&Ze(a,229,CC(c["!merges"])),p&&AD(a,c),Ze(a,442,lb(D)),p&&jD(a,c),Ze(a,10),a.end()}function OD(e,t,r){var a=Bn(),i=(e||{}).Workbook||{},c=i.Sheets||[],u=i.WBProps||{},f=r.biff==8,h=r.biff==5;if(Ze(a,2057,$0(e,5,r)),r.bookType=="xla"&&Ze(a,135),Ze(a,225,f?oa(1200):null),Ze(a,193,aC(2)),h&&Ze(a,191),h&&Ze(a,192),Ze(a,226),Ze(a,92,hC("SheetJS",r)),Ze(a,66,oa(f?1200:1252)),f&&Ze(a,353,oa(0)),f&&Ze(a,448),Ze(a,317,IC(e.SheetNames.length)),f&&e.vbaraw&&Ze(a,211),f&&e.vbaraw){var p=u.CodeName||"ThisWorkbook";Ze(a,442,lb(p))}Ze(a,156,oa(17)),Ze(a,25,jn(!1)),Ze(a,18,jn(!1)),Ze(a,19,oa(0)),f&&Ze(a,431,jn(!1)),f&&Ze(a,444,oa(0)),Ze(a,61,xC()),Ze(a,64,jn(!1)),Ze(a,141,oa(0)),Ze(a,34,jn(L5(e)=="true")),Ze(a,14,jn(!0)),f&&Ze(a,439,jn(!1)),Ze(a,218,oa(0)),ED(a,e,r),kD(a,e.SSF,r),CD(a,r),f&&Ze(a,352,jn(!1));var g=a.end(),y=Bn();f&&Ze(y,140,DC()),f&&r.Strings&&vD(y,252,gC(r.Strings)),Ze(y,10);var v=y.end(),b=Bn(),w=0,_=0;for(_=0;_<e.SheetNames.length;++_)w+=(f?12:11)+(f?2:1)*e.SheetNames[_].length;var S=g.length+w+v.length;for(_=0;_<e.SheetNames.length;++_){var A=c[_]||{};Ze(b,133,pC({pos:S,hs:A.Hidden||0,dt:0,name:e.SheetNames[_]},r)),S+=t[_].length}var D=b.end();if(w!=D.length)throw new Error("BS8 "+w+" != "+D.length);var I=[];return g.length&&I.push(g),D.length&&I.push(D),v.length&&I.push(v),un(I)}function ID(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=Fn(Ir)),e&&e.SSF&&(sd(),ad(e.SSF),r.revssf=id(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Q0(r),r.cellXfs=[],Ps(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)a[a.length]=ND(i,r,e);return a.unshift(OD(e,a,r)),un(a)}function Bb(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var i=Qn(a["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var c=t||{};switch(c.biff||2){case 8:case 5:return ID(e,t);case 4:case 3:case 2:return TD(e,t)}throw new Error("invalid type "+c.bookType+" for BIFF")}function BD(e,t,r,a){for(var i=e["!merges"]||[],c=[],u=t.s.c;u<=t.e.c;++u){for(var f=0,h=0,p=0;p<i.length;++p)if(!(i[p].s.r>r||i[p].s.c>u)&&!(i[p].e.r<r||i[p].e.c<u)){if(i[p].s.r<r||i[p].s.c<u){f=-1;break}f=i[p].e.r-i[p].s.r+1,h=i[p].e.c-i[p].s.c+1;break}if(!(f<0)){var g=dr({r,c:u}),y=a.dense?(e[r]||[])[u]:e[g],v=y&&y.v!=null&&(y.h||f6(y.w||(ns(y),y.w)||""))||"",b={};f>1&&(b.rowspan=f),h>1&&(b.colspan=h),a.editable?v='<span contenteditable="true">'+v+"</span>":y&&(b["data-t"]=y&&y.t||"z",y.v!=null&&(b["data-v"]=y.v),y.z!=null&&(b["data-z"]=y.z),y.l&&(y.l.Target||"#").charAt(0)!="#"&&(v='<a href="'+y.l.Target+'">'+v+"</a>")),b.id=(a.id||"sjs")+"-"+g,c.push(Je("td",v,b))}}var w="<tr>";return w+c.join("")+"</tr>"}var MD='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',FD="</body></html>";function LD(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Mb(e,t){var r=t||{},a=r.header!=null?r.header:MD,i=r.footer!=null?r.footer:FD,c=[a],u=Qn(e["!ref"]);r.dense=Array.isArray(e),c.push(LD(e,u,r));for(var f=u.s.r;f<=u.e.r;++f)c.push(BD(e,u,f,r));return c.push("</table>"+i),c.join("")}function Fb(e,t,r){var a=r||{},i=0,c=0;if(a.origin!=null)if(typeof a.origin=="number")i=a.origin;else{var u=typeof a.origin=="string"?rn(a.origin):a.origin;i=u.r,c=u.c}var f=t.getElementsByTagName("tr"),h=Math.min(a.sheetRows||1e7,f.length),p={s:{r:0,c:0},e:{r:i,c}};if(e["!ref"]){var g=Qn(e["!ref"]);p.s.r=Math.min(p.s.r,g.s.r),p.s.c=Math.min(p.s.c,g.s.c),p.e.r=Math.max(p.e.r,g.e.r),p.e.c=Math.max(p.e.c,g.e.c),i==-1&&(p.e.r=i=g.e.r+1)}var y=[],v=0,b=e["!rows"]||(e["!rows"]=[]),w=0,_=0,S=0,A=0,D=0,I=0;for(e["!cols"]||(e["!cols"]=[]);w<f.length&&_<h;++w){var G=f[w];if(ly(G)){if(a.display)continue;b[_]={hidden:!0}}var Z=G.children;for(S=A=0;S<Z.length;++S){var oe=Z[S];if(!(a.display&&ly(oe))){var V=oe.hasAttribute("data-v")?oe.getAttribute("data-v"):oe.hasAttribute("v")?oe.getAttribute("v"):x6(oe.innerHTML),P=oe.getAttribute("data-z")||oe.getAttribute("z");for(v=0;v<y.length;++v){var z=y[v];z.s.c==A+c&&z.s.r<_+i&&_+i<=z.e.r&&(A=z.e.c+1-c,v=-1)}I=+oe.getAttribute("colspan")||1,((D=+oe.getAttribute("rowspan")||1)>1||I>1)&&y.push({s:{r:_+i,c:A+c},e:{r:_+i+(D||1)-1,c:A+c+(I||1)-1}});var ie={t:"s",v:V},K=oe.getAttribute("data-t")||oe.getAttribute("t")||"";V!=null&&(V.length==0?ie.t=K||"z":a.raw||V.trim().length==0||K=="s"||(V==="TRUE"?ie={t:"b",v:!0}:V==="FALSE"?ie={t:"b",v:!1}:isNaN(Za(V))?isNaN(Gl(V).getDate())||(ie={t:"d",v:Cn(V)},a.cellDates||(ie={t:"n",v:Mn(ie.v)}),ie.z=a.dateNF||Ir[14]):ie={t:"n",v:Za(V)})),ie.z===void 0&&P!=null&&(ie.z=P);var xe="",ee=oe.getElementsByTagName("A");if(ee&&ee.length)for(var re=0;re<ee.length&&!(ee[re].hasAttribute("href")&&(xe=ee[re].getAttribute("href"),xe.charAt(0)!="#"));++re);xe&&xe.charAt(0)!="#"&&(ie.l={Target:xe}),a.dense?(e[_+i]||(e[_+i]=[]),e[_+i][A+c]=ie):e[dr({c:A+c,r:_+i})]=ie,p.e.c<A+c&&(p.e.c=A+c),A+=I}}++_}return y.length&&(e["!merges"]=(e["!merges"]||[]).concat(y)),p.e.r=Math.max(p.e.r,_-1+i),e["!ref"]=Wr(p),_>=h&&(e["!fullref"]=Wr((p.e.r=f.length-w+_-1+i,p))),e}function Lb(e,t){var r=t||{},a=r.dense?[]:{};return Fb(a,e,t)}function PD(e,t){return xi(Lb(e,t),t)}function ly(e){var t="",r=zD(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function zD(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var UD=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Yl({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Hr+t}})(),cy=(function(){var e=function(c){return ur(c).replace(/  +/g,function(u){return'<text:s text:c="'+u.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(c,u,f){var h=[];h.push('      <table:table table:name="'+ur(u.SheetNames[f])+`" table:style-name="ta1">
`);var p=0,g=0,y=Qn(c["!ref"]||"A1"),v=c["!merges"]||[],b=0,w=Array.isArray(c);if(c["!cols"])for(g=0;g<=y.e.c;++g)h.push("        <table:table-column"+(c["!cols"][g]?' table:style-name="co'+c["!cols"][g].ods+'"':"")+`></table:table-column>
`);var _="",S=c["!rows"]||[];for(p=0;p<y.s.r;++p)_=S[p]?' table:style-name="ro'+S[p].ods+'"':"",h.push("        <table:table-row"+_+`></table:table-row>
`);for(;p<=y.e.r;++p){for(_=S[p]?' table:style-name="ro'+S[p].ods+'"':"",h.push("        <table:table-row"+_+`>
`),g=0;g<y.s.c;++g)h.push(t);for(;g<=y.e.c;++g){var A=!1,D={},I="";for(b=0;b!=v.length;++b)if(!(v[b].s.c>g)&&!(v[b].s.r>p)&&!(v[b].e.c<g)&&!(v[b].e.r<p)){(v[b].s.c!=g||v[b].s.r!=p)&&(A=!0),D["table:number-columns-spanned"]=v[b].e.c-v[b].s.c+1,D["table:number-rows-spanned"]=v[b].e.r-v[b].s.r+1;break}if(A){h.push(r);continue}var G=dr({r:p,c:g}),Z=w?(c[p]||[])[g]:c[G];if(Z&&Z.f&&(D["table:formula"]=ur(oR(Z.f)),Z.F&&Z.F.slice(0,G.length)==G)){var oe=Qn(Z.F);D["table:number-matrix-columns-spanned"]=oe.e.c-oe.s.c+1,D["table:number-matrix-rows-spanned"]=oe.e.r-oe.s.r+1}if(!Z){h.push(t);continue}switch(Z.t){case"b":I=Z.v?"TRUE":"FALSE",D["office:value-type"]="boolean",D["office:boolean-value"]=Z.v?"true":"false";break;case"n":I=Z.w||String(Z.v||0),D["office:value-type"]="float",D["office:value"]=Z.v||0;break;case"s":case"str":I=Z.v==null?"":Z.v,D["office:value-type"]="string";break;case"d":I=Z.w||Cn(Z.v).toISOString(),D["office:value-type"]="date",D["office:date-value"]=Cn(Z.v).toISOString(),D["table:style-name"]="ce1";break;default:h.push(t);continue}var V=e(I);if(Z.l&&Z.l.Target){var P=Z.l.Target;P=P.charAt(0)=="#"?"#"+lR(P.slice(1)):P,P.charAt(0)!="#"&&!P.match(/^\w+:/)&&(P="../"+P),V=Je("text:a",V,{"xlink:href":P.replace(/&/g,"&amp;")})}h.push("          "+Je("table:table-cell",Je("text:p",V,{}),D)+`
`)}h.push(`        </table:table-row>
`)}return h.push(`      </table:table>
`),h.join("")},i=function(c,u){c.push(` <office:automatic-styles>
`),c.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),c.push(`   <number:month number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:day number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:year/>
`),c.push(`  </number:date-style>
`);var f=0;u.SheetNames.map(function(p){return u.Sheets[p]}).forEach(function(p){if(p&&p["!cols"]){for(var g=0;g<p["!cols"].length;++g)if(p["!cols"][g]){var y=p["!cols"][g];if(y.width==null&&y.wpx==null&&y.wch==null)continue;G0(y),y.ods=f;var v=p["!cols"][g].wpx+"px";c.push('  <style:style style:name="co'+f+`" style:family="table-column">
`),c.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+v+`"/>
`),c.push(`  </style:style>
`),++f}}});var h=0;u.SheetNames.map(function(p){return u.Sheets[p]}).forEach(function(p){if(p&&p["!rows"]){for(var g=0;g<p["!rows"].length;++g)if(p["!rows"][g]){p["!rows"][g].ods=h;var y=p["!rows"][g].hpx+"px";c.push('  <style:style style:name="ro'+h+`" style:family="table-row">
`),c.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+y+`"/>
`),c.push(`  </style:style>
`),++h}}}),c.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),c.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),c.push(`  </style:style>
`),c.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),c.push(` </office:automatic-styles>
`)};return function(u,f){var h=[Hr],p=Yl({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),g=Yl({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});f.bookType=="fods"?(h.push("<office:document"+p+g+`>
`),h.push(Zv().replace(/office:document-meta/g,"office:meta"))):h.push("<office:document-content"+p+`>
`),i(h,u),h.push(`  <office:body>
`),h.push(`    <office:spreadsheet>
`);for(var y=0;y!=u.SheetNames.length;++y)h.push(a(u.Sheets[u.SheetNames[y]],u,y));return h.push(`    </office:spreadsheet>
`),h.push(`  </office:body>
`),f.bookType=="fods"?h.push("</office:document>"):h.push("</office:document-content>"),h.join("")}})();function Pb(e,t){if(t.bookType=="fods")return cy(e,t);var r=B0(),a="",i=[],c=[];return a="mimetype",Bt(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",Bt(r,a,cy(e,t)),i.push([a,"text/xml"]),c.push([a,"ContentFile"]),a="styles.xml",Bt(r,a,UD(e,t)),i.push([a,"text/xml"]),c.push([a,"StylesFile"]),a="meta.xml",Bt(r,a,Hr+Zv()),i.push([a,"text/xml"]),c.push([a,"MetadataFile"]),a="manifest.rdf",Bt(r,a,Z6(c)),i.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",Bt(r,a,Q6(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Xu(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function WD(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):va(Vl(e))}function HD(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Ms(e){var t=e.reduce(function(i,c){return i+c.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(i){r.set(i,a),a+=i.length}),r}function qD(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var c=0;i>=1;++c,i/=256)e[t+c]=i&255;e[t+15]|=r>=0?0:128}function Kl(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function lr(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function bo(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Yr(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],i=Kl(e,r),c=i&7;i=Math.floor(i/8);var u=0,f;if(i==0)break;switch(c){case 0:{for(var h=r[0];e[r[0]++]>=128;);f=e.slice(h,r[0])}break;case 5:u=4,f=e.slice(r[0],r[0]+u),r[0]+=u;break;case 1:u=8,f=e.slice(r[0],r[0]+u),r[0]+=u;break;case 2:u=Kl(e,r),f=e.slice(r[0],r[0]+u),r[0]+=u;break;case 3:case 4:default:throw new Error("PB Type ".concat(c," for Field ").concat(i," at offset ").concat(a))}var p={data:f,type:c};t[i]==null?t[i]=[p]:t[i].push(p)}return t}function ln(e){var t=[];return e.forEach(function(r,a){r.forEach(function(i){i.data&&(t.push(lr(a*8+i.type)),i.type==2&&t.push(lr(i.data.length)),t.push(i.data))})}),Ms(t)}function ga(e){for(var t,r=[],a=[0];a[0]<e.length;){var i=Kl(e,a),c=Yr(e.slice(a[0],a[0]+i));a[0]+=i;var u={id:bo(c[1][0].data),messages:[]};c[2].forEach(function(f){var h=Yr(f.data),p=bo(h[3][0].data);u.messages.push({meta:h,data:e.slice(a[0],a[0]+p)}),a[0]+=p}),(t=c[3])!=null&&t[0]&&(u.merge=bo(c[3][0].data)>>>0>0),r.push(u)}return r}function uo(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:lr(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:lr(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(u){i.push(u.data),u.meta[3]=[{type:0,data:lr(u.data.length)}],a[2].push({data:ln(u.meta),type:2})});var c=ln(a);t.push(lr(c.length)),t.push(c),i.forEach(function(u){return t.push(u)})}),Ms(t)}function $D(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=Kl(t,r),i=[];r[0]<t.length;){var c=t[r[0]]&3;if(c==0){var u=t[r[0]++]>>2;if(u<60)++u;else{var f=u-59;u=t[r[0]],f>1&&(u|=t[r[0]+1]<<8),f>2&&(u|=t[r[0]+2]<<16),f>3&&(u|=t[r[0]+3]<<24),u>>>=0,u++,r[0]+=f}i.push(t.slice(r[0],r[0]+u)),r[0]+=u;continue}else{var h=0,p=0;if(c==1?(p=(t[r[0]]>>2&7)+4,h=(t[r[0]++]&224)<<3,h|=t[r[0]++]):(p=(t[r[0]++]>>2)+1,c==2?(h=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(h=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),i=[Ms(i)],h==0)throw new Error("Invalid offset 0");if(h>i[0].length)throw new Error("Invalid offset beyond length");if(p>=h)for(i.push(i[0].slice(-h)),p-=h;p>=i[i.length-1].length;)i.push(i[i.length-1]),p-=i[i.length-1].length;i.push(i[0].slice(-h,-h+p))}}var g=Ms(i);if(g.length!=a)throw new Error("Unexpected length: ".concat(g.length," != ").concat(a));return g}function xa(e){for(var t=[],r=0;r<e.length;){var a=e[r++],i=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push($D(a,e.slice(r,r+i))),r+=i}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Ms(t)}function fo(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),i=new Uint8Array(4);t.push(i);var c=lr(a),u=c.length;t.push(c),a<=60?(u++,t.push(new Uint8Array([a-1<<2]))):a<=256?(u+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(u+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(u+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(u+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),u+=a,i[0]=0,i[1]=u&255,i[2]=u>>8&255,i[3]=u>>16&255,r+=a}return Ms(t)}function Fh(e,t){var r=new Uint8Array(32),a=Xu(r),i=12,c=0;switch(r[0]=5,e.t){case"n":r[1]=2,qD(r,i,e.v),c|=1,i+=16;break;case"b":r[1]=6,a.setFloat64(i,e.v?1:0,!0),c|=2,i+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(i,t.indexOf(e.v),!0),c|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,c,!0),r.slice(0,i)}function Lh(e,t){var r=new Uint8Array(32),a=Xu(r),i=12,c=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(i,e.v,!0),c|=32,i+=8;break;case"b":r[2]=6,a.setFloat64(i,e.v?1:0,!0),c|=32,i+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(i,t.indexOf(e.v),!0),c|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,c,!0),r.slice(0,i)}function Cs(e){var t=Yr(e);return Kl(t[1][0].data)}function GD(e,t,r){var a,i,c,u;if(!((a=e[6])!=null&&a[0])||!((i=e[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var f=((u=(c=e[8])==null?void 0:c[0])==null?void 0:u.data)&&bo(e[8][0].data)>0||!1;if(f)throw"Math only works with normal offsets";for(var h=0,p=Xu(e[7][0].data),g=0,y=[],v=Xu(e[4][0].data),b=0,w=[],_=0;_<t.length;++_){if(t[_]==null){p.setUint16(_*2,65535,!0),v.setUint16(_*2,65535);continue}p.setUint16(_*2,g,!0),v.setUint16(_*2,b,!0);var S,A;switch(typeof t[_]){case"string":S=Fh({t:"s",v:t[_]},r),A=Lh({t:"s",v:t[_]},r);break;case"number":S=Fh({t:"n",v:t[_]},r),A=Lh({t:"n",v:t[_]},r);break;case"boolean":S=Fh({t:"b",v:t[_]},r),A=Lh({t:"b",v:t[_]},r);break;default:throw new Error("Unsupported value "+t[_])}y.push(S),g+=S.length,w.push(A),b+=A.length,++h}for(e[2][0].data=lr(h);_<e[7][0].data.length/2;++_)p.setUint16(_*2,65535,!0),v.setUint16(_*2,65535,!0);return e[6][0].data=Ms(y),e[3][0].data=Ms(w),h}function VD(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=Qn(r["!ref"]);a.s.r=a.s.c=0;var i=!1;a.e.c>9&&(i=!0,a.e.c=9),a.e.r>49&&(i=!0,a.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Wr(a)));var c=Qu(r,{range:a,header:1}),u=["~Sh33tJ5~"];c.forEach(function(L){return L.forEach(function(W){typeof W=="string"&&u.push(W)})});var f={},h=[],p=xr.read(t.numbers,{type:"base64"});p.FileIndex.map(function(L,W){return[L,p.FullPaths[W]]}).forEach(function(L){var W=L[0],X=L[1];if(W.type==2&&W.name.match(/\.iwa/)){var ge=W.content,Me=xa(ge),qe=ga(Me);qe.forEach(function(Ce){h.push(Ce.id),f[Ce.id]={deps:[],location:X,type:bo(Ce.messages[0].meta[1][0].data)}})}}),h.sort(function(L,W){return L-W});var g=h.filter(function(L){return L>1}).map(function(L){return[L,lr(L)]});p.FileIndex.map(function(L,W){return[L,p.FullPaths[W]]}).forEach(function(L){var W=L[0];if(L[1],!!W.name.match(/\.iwa/)){var X=ga(xa(W.content));X.forEach(function(ge){ge.messages.forEach(function(Me){g.forEach(function(qe){ge.messages.some(function(Ce){return bo(Ce.meta[1][0].data)!=11006&&HD(Ce.data,qe[1])})&&f[qe[0]].deps.push(ge.id)})})})}});for(var y=xr.find(p,f[1].location),v=ga(xa(y.content)),b,w=0;w<v.length;++w){var _=v[w];_.id==1&&(b=_)}var S=Cs(Yr(b.messages[0].data)[1][0].data);for(y=xr.find(p,f[S].location),v=ga(xa(y.content)),w=0;w<v.length;++w)_=v[w],_.id==S&&(b=_);for(S=Cs(Yr(b.messages[0].data)[2][0].data),y=xr.find(p,f[S].location),v=ga(xa(y.content)),w=0;w<v.length;++w)_=v[w],_.id==S&&(b=_);for(S=Cs(Yr(b.messages[0].data)[2][0].data),y=xr.find(p,f[S].location),v=ga(xa(y.content)),w=0;w<v.length;++w)_=v[w],_.id==S&&(b=_);var A=Yr(b.messages[0].data);{A[6][0].data=lr(a.e.r+1),A[7][0].data=lr(a.e.c+1);var D=Cs(A[46][0].data),I=xr.find(p,f[D].location),G=ga(xa(I.content));{for(var Z=0;Z<G.length&&G[Z].id!=D;++Z);if(G[Z].id!=D)throw"Bad ColumnRowUIDMapArchive";var oe=Yr(G[Z].messages[0].data);oe[1]=[],oe[2]=[],oe[3]=[];for(var V=0;V<=a.e.c;++V){var P=[];P[1]=P[2]=[{type:0,data:lr(V+420690)}],oe[1].push({type:2,data:ln(P)}),oe[2].push({type:0,data:lr(V)}),oe[3].push({type:0,data:lr(V)})}oe[4]=[],oe[5]=[],oe[6]=[];for(var z=0;z<=a.e.r;++z)P=[],P[1]=P[2]=[{type:0,data:lr(z+726270)}],oe[4].push({type:2,data:ln(P)}),oe[5].push({type:0,data:lr(z)}),oe[6].push({type:0,data:lr(z)});G[Z].messages[0].data=ln(oe)}I.content=fo(uo(G)),I.size=I.content.length,delete A[46];var ie=Yr(A[4][0].data);{ie[7][0].data=lr(a.e.r+1);var K=Yr(ie[1][0].data),xe=Cs(K[2][0].data);I=xr.find(p,f[xe].location),G=ga(xa(I.content));{if(G[0].id!=xe)throw"Bad HeaderStorageBucket";var ee=Yr(G[0].messages[0].data);for(z=0;z<c.length;++z){var re=Yr(ee[2][0].data);re[1][0].data=lr(z),re[4][0].data=lr(c[z].length),ee[2][z]={type:ee[2][0].type,data:ln(re)}}G[0].messages[0].data=ln(ee)}I.content=fo(uo(G)),I.size=I.content.length;var _e=Cs(ie[2][0].data);I=xr.find(p,f[_e].location),G=ga(xa(I.content));{if(G[0].id!=_e)throw"Bad HeaderStorageBucket";for(ee=Yr(G[0].messages[0].data),V=0;V<=a.e.c;++V)re=Yr(ee[2][0].data),re[1][0].data=lr(V),re[4][0].data=lr(a.e.r+1),ee[2][V]={type:ee[2][0].type,data:ln(re)};G[0].messages[0].data=ln(ee)}I.content=fo(uo(G)),I.size=I.content.length;var ne=Cs(ie[4][0].data);(function(){for(var L=xr.find(p,f[ne].location),W=ga(xa(L.content)),X,ge=0;ge<W.length;++ge){var Me=W[ge];Me.id==ne&&(X=Me)}var qe=Yr(X.messages[0].data);{qe[3]=[];var Ce=[];u.forEach(function(He,tt){Ce[1]=[{type:0,data:lr(tt)}],Ce[2]=[{type:0,data:lr(1)}],Ce[3]=[{type:2,data:WD(He)}],qe[3].push({type:2,data:ln(Ce)})})}X.messages[0].data=ln(qe);var te=uo(W),Pe=fo(te);L.content=Pe,L.size=L.content.length})();var ve=Yr(ie[3][0].data);{var le=ve[1][0];delete ve[2];var Ae=Yr(le.data);{var M=Cs(Ae[2][0].data);(function(){for(var L=xr.find(p,f[M].location),W=ga(xa(L.content)),X,ge=0;ge<W.length;++ge){var Me=W[ge];Me.id==M&&(X=Me)}var qe=Yr(X.messages[0].data);{delete qe[6],delete ve[7];var Ce=new Uint8Array(qe[5][0].data);qe[5]=[];for(var te=0,Pe=0;Pe<=a.e.r;++Pe){var He=Yr(Ce);te+=GD(He,c[Pe],u),He[1][0].data=lr(Pe),qe[5].push({data:ln(He),type:2})}qe[1]=[{type:0,data:lr(a.e.c+1)}],qe[2]=[{type:0,data:lr(a.e.r+1)}],qe[3]=[{type:0,data:lr(te)}],qe[4]=[{type:0,data:lr(a.e.r+1)}]}X.messages[0].data=ln(qe);var tt=uo(W),Y=fo(tt);L.content=Y,L.size=L.content.length})()}le.data=ln(Ae)}ie[3][0].data=ln(ve)}A[4][0].data=ln(ie)}b.messages[0].data=ln(A);var Q=uo(v),k=fo(Q);return y.content=k,y.size=y.content.length,p}function YD(e){return function(r){for(var a=0;a!=e.length;++a){var i=e[a];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function Q0(e){YD([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function KD(e,t){return t.bookType=="ods"?Pb(e,t):t.bookType=="numbers"?VD(e,t):t.bookType=="xlsb"?XD(e,t):QD(e,t)}function XD(e,t){xo=1024,e&&!e.SSF&&(e.SSF=Fn(Ir)),e&&e.SSF&&(sd(),ad(e.SSF),t.revssf=id(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zl?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=_b.indexOf(t.bookType)>-1,i=Xv();Q0(t=t||{});var c=B0(),u="",f=0;if(t.cellXfs=[],Ps(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),u="docProps/core.xml",Bt(c,u,eb(e.Props,t)),i.coreprops.push(u),cr(t.rels,2,u,Zt.CORE_PROPS),u="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var h=[],p=0;p<e.SheetNames.length;++p)(e.Workbook.Sheets[p]||{}).Hidden!=2&&h.push(e.SheetNames[p]);e.Props.SheetNames=h}for(e.Props.Worksheets=e.Props.SheetNames.length,Bt(c,u,rb(e.Props)),i.extprops.push(u),cr(t.rels,3,u,Zt.EXT_PROPS),e.Custprops!==e.Props&&hn(e.Custprops||{}).length>0&&(u="docProps/custom.xml",Bt(c,u,nb(e.Custprops)),i.custprops.push(u),cr(t.rels,4,u,Zt.CUST_PROPS)),f=1;f<=e.SheetNames.length;++f){var g={"!id":{}},y=e.Sheets[e.SheetNames[f-1]],v=(y||{})["!type"]||"sheet";switch(v){case"chart":default:u="xl/worksheets/sheet"+f+"."+r,Bt(c,u,Z5(f-1,u,t,e,g)),i.sheets.push(u),cr(t.wbrels,-1,"worksheets/sheet"+f+"."+r,Zt.WS[0])}if(y){var b=y["!comments"],w=!1,_="";b&&b.length>0&&(_="xl/comments"+f+"."+r,Bt(c,_,rD(b,_)),i.comments.push(_),cr(g,-1,"../comments"+f+"."+r,Zt.CMNT),w=!0),y["!legacy"]&&w&&Bt(c,"xl/drawings/vmlDrawing"+f+".vml",vb(f,y["!comments"])),delete y["!comments"],delete y["!legacy"]}g["!id"].rId1&&Bt(c,Jv(u),yo(g))}return t.Strings!=null&&t.Strings.length>0&&(u="xl/sharedStrings."+r,Bt(c,u,tD(t.Strings,u,t)),i.strs.push(u),cr(t.wbrels,-1,"sharedStrings."+r,Zt.SST)),u="xl/workbook."+r,Bt(c,u,J5(e,u)),i.workbooks.push(u),cr(t.rels,1,u,Zt.WB),u="xl/theme/theme1.xml",Bt(c,u,mb(e.Themes,t)),i.themes.push(u),cr(t.wbrels,-1,"theme/theme1.xml",Zt.THEME),u="xl/styles."+r,Bt(c,u,eD(e,u,t)),i.styles.push(u),cr(t.wbrels,-1,"styles."+r,Zt.STY),e.vbaraw&&a&&(u="xl/vbaProject.bin",Bt(c,u,e.vbaraw),i.vba.push(u),cr(t.wbrels,-1,"vbaProject.bin",Zt.VBA)),u="xl/metadata."+r,Bt(c,u,nD(u)),i.metadata.push(u),cr(t.wbrels,-1,"metadata."+r,Zt.XLMETA),Bt(c,"[Content_Types].xml",Qv(i,t)),Bt(c,"_rels/.rels",yo(t.rels)),Bt(c,"xl/_rels/workbook."+r+".rels",yo(t.wbrels)),delete t.revssf,delete t.ssf,c}function QD(e,t){xo=1024,e&&!e.SSF&&(e.SSF=Fn(Ir)),e&&e.SSF&&(sd(),ad(e.SSF),t.revssf=id(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zl?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=_b.indexOf(t.bookType)>-1,i=Xv();Q0(t=t||{});var c=B0(),u="",f=0;if(t.cellXfs=[],Ps(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),u="docProps/core.xml",Bt(c,u,eb(e.Props,t)),i.coreprops.push(u),cr(t.rels,2,u,Zt.CORE_PROPS),u="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var h=[],p=0;p<e.SheetNames.length;++p)(e.Workbook.Sheets[p]||{}).Hidden!=2&&h.push(e.SheetNames[p]);e.Props.SheetNames=h}e.Props.Worksheets=e.Props.SheetNames.length,Bt(c,u,rb(e.Props)),i.extprops.push(u),cr(t.rels,3,u,Zt.EXT_PROPS),e.Custprops!==e.Props&&hn(e.Custprops||{}).length>0&&(u="docProps/custom.xml",Bt(c,u,nb(e.Custprops)),i.custprops.push(u),cr(t.rels,4,u,Zt.CUST_PROPS));var g=["SheetJ5"];for(t.tcid=0,f=1;f<=e.SheetNames.length;++f){var y={"!id":{}},v=e.Sheets[e.SheetNames[f-1]],b=(v||{})["!type"]||"sheet";switch(b){case"chart":default:u="xl/worksheets/sheet"+f+"."+r,Bt(c,u,Rb(f-1,t,e,y)),i.sheets.push(u),cr(t.wbrels,-1,"worksheets/sheet"+f+"."+r,Zt.WS[0])}if(v){var w=v["!comments"],_=!1,S="";if(w&&w.length>0){var A=!1;w.forEach(function(D){D[1].forEach(function(I){I.T==!0&&(A=!0)})}),A&&(S="xl/threadedComments/threadedComment"+f+"."+r,Bt(c,S,C8(w,g,t)),i.threadedcomments.push(S),cr(y,-1,"../threadedComments/threadedComment"+f+"."+r,Zt.TCMNT)),S="xl/comments"+f+"."+r,Bt(c,S,bb(w)),i.comments.push(S),cr(y,-1,"../comments"+f+"."+r,Zt.CMNT),_=!0}v["!legacy"]&&_&&Bt(c,"xl/drawings/vmlDrawing"+f+".vml",vb(f,v["!comments"])),delete v["!comments"],delete v["!legacy"]}y["!id"].rId1&&Bt(c,Jv(u),yo(y))}return t.Strings!=null&&t.Strings.length>0&&(u="xl/sharedStrings."+r,Bt(c,u,db(t.Strings,t)),i.strs.push(u),cr(t.wbrels,-1,"sharedStrings."+r,Zt.SST)),u="xl/workbook."+r,Bt(c,u,Ob(e)),i.workbooks.push(u),cr(t.rels,1,u,Zt.WB),u="xl/theme/theme1.xml",Bt(c,u,mb(e.Themes,t)),i.themes.push(u),cr(t.wbrels,-1,"theme/theme1.xml",Zt.THEME),u="xl/styles."+r,Bt(c,u,gb(e,t)),i.styles.push(u),cr(t.wbrels,-1,"styles."+r,Zt.STY),e.vbaraw&&a&&(u="xl/vbaProject.bin",Bt(c,u,e.vbaraw),i.vba.push(u),cr(t.wbrels,-1,"vbaProject.bin",Zt.VBA)),u="xl/metadata."+r,Bt(c,u,yb()),i.metadata.push(u),cr(t.wbrels,-1,"metadata."+r,Zt.XLMETA),g.length>1&&(u="xl/persons/person.xml",Bt(c,u,A8(g)),i.people.push(u),cr(t.wbrels,-1,"persons/person.xml",Zt.PEOPLE)),Bt(c,"[Content_Types].xml",Qv(i,t)),Bt(c,"_rels/.rels",yo(t.rels)),Bt(c,"xl/_rels/workbook."+r+".rels",yo(t.wbrels)),delete t.revssf,delete t.ssf,c}function JD(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=rs(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function zb(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return rc(t.file,xr.write(e,{type:nr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return xr.write(e,t)}function ZD(e,t){var r=Fn(t||{}),a=KD(e,r);return eN(a,r)}function eN(e,t){var r={},a=nr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?xr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(t.type=="binary"||t.type=="base64")return i;i=new Uint8Array(nd(i))}return t.password&&typeof encrypt_agile<"u"?zb(encrypt_agile(i,t.password),t):t.type==="file"?rc(t.file,i):t.type=="string"?Ml(i):i}function tN(e,t){var r=t||{},a=mD(e,r);return zb(a,r)}function Da(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return $l(Vl(a));case"binary":return Vl(a);case"string":return e;case"file":return rc(t.file,a,"utf8");case"buffer":return nr?as(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):Da(a,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function rN(e,t){switch(t.type){case"base64":return $l(e);case"binary":return e;case"string":return e;case"file":return rc(t.file,e,"binary");case"buffer":return nr?as(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Au(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?$l(r):t.type=="string"?Ml(r):r;case"file":return rc(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Ub(e,t){Rj(),U5(e);var r=Fn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=Ub(e,r);return r.type="array",nd(a)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=e.SheetNames.indexOf(r.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Da(gD(e,r),r);case"slk":case"sylk":return Da(LC.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"htm":case"html":return Da(Mb(e.Sheets[e.SheetNames[i]],r),r);case"txt":return rN(Wb(e.Sheets[e.SheetNames[i]],r),r);case"csv":return Da(J0(e.Sheets[e.SheetNames[i]],r),r,"\uFEFF");case"dif":return Da(PC.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"dbf":return Au(FC.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"prn":return Da(zC.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"rtf":return Da(VC.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"eth":return Da(ub.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"fods":return Da(Pb(e,r),r);case"wk1":return Au(ry.sheet_to_wk1(e.Sheets[e.SheetNames[i]],r),r);case"wk3":return Au(ry.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Au(Bb(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),tN(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return ZD(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function nN(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function aN(e,t,r){var a={};return a.type="file",a.file=t,nN(a),Ub(e,a)}function sN(e,t,r,a,i,c,u,f){var h=fn(r),p=f.defval,g=f.raw||!Object.prototype.hasOwnProperty.call(f,"raw"),y=!0,v=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(v,"__rowNum__",{value:r,enumerable:!1})}catch{v.__rowNum__=r}else v.__rowNum__=r;if(!u||e[r])for(var b=t.s.c;b<=t.e.c;++b){var w=u?e[r][b]:e[a[b]+h];if(w===void 0||w.t===void 0){if(p===void 0)continue;c[b]!=null&&(v[c[b]]=p);continue}var _=w.v;switch(w.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(c[b]!=null){if(_==null)if(w.t=="e"&&_===null)v[c[b]]=null;else if(p!==void 0)v[c[b]]=p;else if(g&&_===null)v[c[b]]=null;else continue;else v[c[b]]=g&&(w.t!=="n"||w.t==="n"&&f.rawNumbers!==!1)?_:ns(w,_,f);_!=null&&(y=!1)}}return{row:v,isempty:y}}function Qu(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,i=1,c=[],u=0,f="",h={s:{r:0,c:0},e:{r:0,c:0}},p=t||{},g=p.range!=null?p.range:e["!ref"];switch(p.header===1?a=1:p.header==="A"?a=2:Array.isArray(p.header)?a=3:p.header==null&&(a=0),typeof g){case"string":h=Tr(g);break;case"number":h=Tr(e["!ref"]),h.s.r=g;break;default:h=g}a>0&&(i=0);var y=fn(h.s.r),v=[],b=[],w=0,_=0,S=Array.isArray(e),A=h.s.r,D=0,I={};S&&!e[A]&&(e[A]=[]);var G=p.skipHidden&&e["!cols"]||[],Z=p.skipHidden&&e["!rows"]||[];for(D=h.s.c;D<=h.e.c;++D)if(!(G[D]||{}).hidden)switch(v[D]=xn(D),r=S?e[A][D]:e[v[D]+y],a){case 1:c[D]=D-h.s.c;break;case 2:c[D]=v[D];break;case 3:c[D]=p.header[D-h.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),f=u=ns(r,null,p),_=I[u]||0,!_)I[u]=1;else{do f=u+"_"+_++;while(I[f]);I[u]=_,I[f]=1}c[D]=f}for(A=h.s.r+i;A<=h.e.r;++A)if(!(Z[A]||{}).hidden){var oe=sN(e,h,A,v,a,c,S,p);(oe.isempty===!1||(a===1?p.blankrows!==!1:p.blankrows))&&(b[w++]=oe.row)}return b.length=w,b}var uy=/"/g;function iN(e,t,r,a,i,c,u,f){for(var h=!0,p=[],g="",y=fn(r),v=t.s.c;v<=t.e.c;++v)if(a[v]){var b=f.dense?(e[r]||[])[v]:e[a[v]+y];if(b==null)g="";else if(b.v!=null){h=!1,g=""+(f.rawNumbers&&b.t=="n"?b.v:ns(b,null,f));for(var w=0,_=0;w!==g.length;++w)if((_=g.charCodeAt(w))===i||_===c||_===34||f.forceQuotes){g='"'+g.replace(uy,'""')+'"';break}g=="ID"&&(g='"ID"')}else b.f!=null&&!b.F?(h=!1,g="="+b.f,g.indexOf(",")>=0&&(g='"'+g.replace(uy,'""')+'"')):g="";p.push(g)}return f.blankrows===!1&&h?null:p.join(u)}function J0(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var i=Tr(e["!ref"]),c=a.FS!==void 0?a.FS:",",u=c.charCodeAt(0),f=a.RS!==void 0?a.RS:`
`,h=f.charCodeAt(0),p=new RegExp((c=="|"?"\\|":c)+"+$"),g="",y=[];a.dense=Array.isArray(e);for(var v=a.skipHidden&&e["!cols"]||[],b=a.skipHidden&&e["!rows"]||[],w=i.s.c;w<=i.e.c;++w)(v[w]||{}).hidden||(y[w]=xn(w));for(var _=0,S=i.s.r;S<=i.e.r;++S)(b[S]||{}).hidden||(g=iN(e,i,S,y,u,h,c,a),g!=null&&(a.strip&&(g=g.replace(p,"")),(g||a.blankrows!==!1)&&r.push((_++?f:"")+g)));return delete a.dense,r.join("")}function Wb(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=J0(e,t);return r}function oN(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var i=Tr(e["!ref"]),c="",u=[],f,h=[],p=Array.isArray(e);for(f=i.s.c;f<=i.e.c;++f)u[f]=xn(f);for(var g=i.s.r;g<=i.e.r;++g)for(c=fn(g),f=i.s.c;f<=i.e.c;++f)if(t=u[f]+c,r=p?(e[g]||[])[f]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}h[h.length]=t+"="+a}return h}function Hb(e,t,r){var a=r||{},i=+!a.skipHeader,c=e||{},u=0,f=0;if(c&&a.origin!=null)if(typeof a.origin=="number")u=a.origin;else{var h=typeof a.origin=="string"?rn(a.origin):a.origin;u=h.r,f=h.c}var p,g={s:{c:0,r:0},e:{c:f,r:u+t.length-1+i}};if(c["!ref"]){var y=Tr(c["!ref"]);g.e.c=Math.max(g.e.c,y.e.c),g.e.r=Math.max(g.e.r,y.e.r),u==-1&&(u=y.e.r+1,g.e.r=u+t.length-1+i)}else u==-1&&(u=0,g.e.r=t.length-1+i);var v=a.header||[],b=0;t.forEach(function(_,S){hn(_).forEach(function(A){(b=v.indexOf(A))==-1&&(v[b=v.length]=A);var D=_[A],I="z",G="",Z=dr({c:f+b,r:u+S+i});p=Xl(c,Z),D&&typeof D=="object"&&!(D instanceof Date)?c[Z]=D:(typeof D=="number"?I="n":typeof D=="boolean"?I="b":typeof D=="string"?I="s":D instanceof Date?(I="d",a.cellDates||(I="n",D=Mn(D)),G=a.dateNF||Ir[14]):D===null&&a.nullError&&(I="e",D=0),p?(p.t=I,p.v=D,delete p.w,delete p.R,G&&(p.z=G)):c[Z]=p={t:I,v:D},G&&(p.z=G))})}),g.e.c=Math.max(g.e.c,f+v.length-1);var w=fn(u);if(i)for(b=0;b<v.length;++b)c[xn(b+f)+w]={t:"s",v:v[b]};return c["!ref"]=Wr(g),c}function lN(e,t){return Hb(null,e,t)}function Xl(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=rn(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Xl(e,dr(t)):Xl(e,dr({r:t,c:r||0}))}function cN(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function uN(){return{SheetNames:[],Sheets:{}}}function dN(e,t,r,a){var i=1;if(!r)for(;i<=65535&&e.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var c=r.match(/(^.*?)(\d+)$/);i=c&&+c[2]||0;var u=c&&c[1]||r;for(++i;i<=65535&&e.SheetNames.indexOf(r=u+i)!=-1;++i);}if(Nb(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function fN(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=cN(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function hN(e,t){return e.z=t,e}function qb(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function pN(e,t,r){return qb(e,"#"+t,r)}function gN(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function xN(e,t,r,a){for(var i=typeof t!="string"?t:Tr(t),c=typeof t=="string"?t:Wr(t),u=i.s.r;u<=i.e.r;++u)for(var f=i.s.c;f<=i.e.c;++f){var h=Xl(e,u,f);h.t="n",h.F=c,delete h.v,u==i.s.r&&f==i.s.c&&(h.f=r,a&&(h.D=!0))}return e}var Ya={encode_col:xn,encode_row:fn,encode_cell:dr,encode_range:Wr,decode_col:U0,decode_row:z0,split_cell:R6,decode_cell:rn,decode_range:Qn,format_cell:ns,sheet_add_aoa:qv,sheet_add_json:Hb,sheet_add_dom:Fb,aoa_to_sheet:Ao,json_to_sheet:lN,table_to_sheet:Lb,table_to_book:PD,sheet_to_csv:J0,sheet_to_txt:Wb,sheet_to_json:Qu,sheet_to_html:Mb,sheet_to_formulae:oN,sheet_to_row_object_array:Qu,sheet_get_cell:Xl,book_new:uN,book_append_sheet:dN,book_set_sheet_visibility:fN,cell_set_number_format:hN,cell_set_hyperlink:qb,cell_set_internal_link:pN,cell_add_comment:gN,sheet_set_array_formula:xN,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function mN({isOpen:e,onClose:t,vaultEntries:r,businessId:a}){const[i,c]=E.useState("weekly"),[u,f]=E.useState("2025-W37"),[h,p]=E.useState(null),[g,y]=E.useState(!1),[v,b]=E.useState(!1),[w,_]=E.useState(""),[S,A]=E.useState(""),[D,I]=E.useState(!1),G=P=>`€${P.toFixed(2)}`,Z=async(P,z)=>{try{y(!0);let ie,K;if(v&&P&&z)ie=new Date(P),ie.setHours(0,0,0,0),K=new Date(z),K.setHours(23,59,59,999);else if(i==="weekly"){const Ie=new Date,rt=Ie.getDay(),xt=Ie.getDate()-rt+(rt===0?-6:1);ie=new Date(Ie.setDate(xt)),ie.setHours(0,0,0,0),K=new Date(ie),K.setDate(K.getDate()+6),K.setHours(23,59,59,999)}else{const Ie=new Date;ie=new Date(Ie.getFullYear(),Ie.getMonth(),1),K=new Date(Ie.getFullYear(),Ie.getMonth()+1,0,23,59,59,999)}const{data:xe,error:ee}=await Oe.from("sales").select("total_amount, discount_applied, cashier_id").gte("datetime",ie.toISOString()).lte("datetime",K.toISOString());if(ee)throw ee;const re=xe?.reduce((Ie,rt)=>Ie+(rt.total_amount||0),0)||0,_e=xe?.reduce((Ie,rt)=>Ie+(rt.discount_applied||0),0)||0,ne=xe?.length||0,ve=ne>0?re/ne:0,{data:le,error:Ae}=await Oe.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(category),
          sales!inner(datetime)
        `).gte("sales.datetime",ie.toISOString()).lte("sales.datetime",K.toISOString());if(Ae)throw Ae;const M=new Map;le?.forEach(Ie=>{const rt=Ie.products?.category||"Other",xt=Ie.quantity*Ie.price_each,Qt=M.get(rt)||{revenue:0,units:0};M.set(rt,{revenue:Qt.revenue+xt,units:Qt.units+Ie.quantity})});const Q=Array.from(M.entries()).map(([Ie,rt])=>({name:Ie,revenue:rt.revenue,percentage:re>0?Number((rt.revenue/re*100).toFixed(1)):0,units:rt.units})).sort((Ie,rt)=>rt.revenue-Ie.revenue),{data:k,error:L}=await Oe.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(name),
          sales!inner(datetime)
        `).gte("sales.datetime",ie.toISOString()).lte("sales.datetime",K.toISOString());if(L)throw L;const W=new Map;k?.forEach(Ie=>{const rt=Ie.products?.name||"Unknown Product",xt=Ie.quantity*Ie.price_each,Qt=W.get(rt)||{units:0,revenue:0};W.set(rt,{units:Qt.units+Ie.quantity,revenue:Qt.revenue+xt})});const X=Array.from(W.entries()).map(([Ie,rt])=>({name:Ie,...rt})).sort((Ie,rt)=>rt.revenue-Ie.revenue).slice(0,10).map((Ie,rt)=>({rank:rt+1,...Ie})),{data:ge,error:Me}=await Oe.from("products").select("name");if(Me)throw Me;const Ce=(ge?.map(Ie=>{const rt=W.get(Ie.name);return{name:Ie.name,units:rt?.units||0,revenue:rt?.revenue||0}})||[]).sort((Ie,rt)=>Ie.revenue-rt.revenue).slice(0,10).map((Ie,rt)=>({rank:rt+1,...Ie})),{data:te,error:Pe}=await Oe.from("products").select("name, stock_quantity, reorder_level");if(Pe)throw Pe;const He=te?.filter(Ie=>Ie.stock_quantity<=Ie.reorder_level).map(Ie=>({product:Ie.name,current:Ie.stock_quantity,reorder:Ie.reorder_level,urgent:Ie.stock_quantity<=Ie.reorder_level*.5}))||[],tt=te?.filter(Ie=>Ie.stock_quantity===0).map(Ie=>({product:Ie.name,lastStock:"N/A",expectedDelivery:"TBD"}))||[],{data:Y,error:Re}=await Oe.from("sales").select(`
          total_amount,
          cashier_id,
          users!inner(username)
        `).gte("datetime",ie.toISOString()).lte("datetime",K.toISOString());if(Re)throw Re;const nt=new Map;Y?.forEach(Ie=>{const rt=Ie.cashier_id,xt=Ie.users?.username||"Unknown",Qt=nt.get(rt)||{name:xt,revenue:0,transactions:0};nt.set(rt,{name:xt,revenue:Qt.revenue+(Ie.total_amount||0),transactions:Qt.transactions+1})});const De=Array.from(nt.values()).map(Ie=>({name:Ie.name,revenue:Ie.revenue,transactions:Ie.transactions,avgTransaction:Ie.transactions>0?Ie.revenue/Ie.transactions:0,hours:40,accuracy:99})),{data:ut,error:ht}=await Oe.from("side_business_sales").select(`
          total_amount,
          quantity,
          side_business_items!inner(
            name,
            side_businesses!inner(name)
          )
        `).eq("parent_shop_id",a||1).gte("date_time",ie.toISOString()).lte("date_time",K.toISOString());ht&&console.error("Error fetching side business data:",ht);const At=new Map;ut&&ut.forEach(Ie=>{const rt=Ie.side_business_items.side_businesses.name,xt=Ie.side_business_items.name;At.has(rt)||At.set(rt,{name:rt,revenue:0,transactions:0,items:new Map});const Qt=At.get(rt);Qt.revenue+=Ie.total_amount,Qt.transactions+=1,Qt.items.has(xt)||Qt.items.set(xt,{name:xt,units:0,revenue:0});const mr=Qt.items.get(xt);mr.units+=Ie.quantity,mr.revenue+=Ie.total_amount});const mt=Array.from(At.values()).map(Ie=>({name:Ie.name,revenue:Ie.revenue,transactions:Ie.transactions,avgTransaction:Ie.transactions>0?Ie.revenue/Ie.transactions:0,topItems:Array.from(Ie.items.values()).sort((rt,xt)=>xt.revenue-rt.revenue).slice(0,3)}));p({kpis:{totalSales:re,transactions:ne,avgTransaction:ve,discounts:_e},categories:Q,topProducts:X,leastSoldProducts:Ce,lowStock:He,outOfStock:tt,staff:De,sideBusinesses:mt})}catch(ie){console.error("Error fetching report data:",ie)}finally{y(!1)}};E.useEffect(()=>{e&&Z()},[e,i,u]);const oe=()=>{const P=window.open("","_blank"),z=document.getElementById("sales-report-content").innerHTML;P.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>LandM Store Sales Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
            th { background-color: #f5f5f5; }
            .urgent { color: red; font-weight: bold; }
            .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0; }
            .kpi-card { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
            h1, h2, h3 { color: #333; }
            .print-only { display: block; }
          </style>
        </head>
        <body>
          ${z}
          <script>window.print();<\/script>
        </body>
      </html>
    `)},V=async()=>{try{I(!0);const P=v?w:null,z=v?S:null;let ie="";if(v&&P&&z){const Q=new Date(P).toLocaleDateString("en-IE"),k=new Date(z).toLocaleDateString("en-IE");ie=`${Q}_to_${k}`}else if(i==="weekly")ie=`Week_${u}`;else{const Q=new Date;ie=`${Q.getFullYear()}_${String(Q.getMonth()+1).padStart(2,"0")}`}const K=Ya.book_new(),xe=[["LANDM STORE - FINANCIAL REPORT FOR ACCOUNTANT"],[""],["BUSINESS INFORMATION"],["Company Name:","LandM Store"],["Address:","Unit 2 Glenmore Park, Dundalk, Co. Louth"],["Phone:","087 797 0412"],["VAT Number:","IE1234567A"],["Business Type:","Retail Store"],[""],["REPORTING PERIOD"],["Period:",v?`${w} to ${S}`:i==="weekly"?`Week ${u}`:new Date().toLocaleDateString("en-IE",{year:"numeric",month:"long"})],["Report Generated:",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})],[""],["REVENUE SUMMARY (EXCLUDING VAT)"],["Gross Sales Revenue",h?.kpis.totalSales?h.kpis.totalSales:0],["Less: Customer Discounts",h?.kpis.discounts?h.kpis.discounts:0],["Net Sales Revenue (Before VAT)",h?.kpis.totalSales&&h?.kpis.discounts?h.kpis.totalSales-h.kpis.discounts:h?.kpis.totalSales?h.kpis.totalSales:0],[""],["TRANSACTION ANALYSIS"],["Total Number of Transactions",h?.kpis.transactions||0],["Average Transaction Value",h?.kpis.avgTransaction?h.kpis.avgTransaction:0],["Total Items Sold",h?.categories.reduce((Q,k)=>Q+k.units,0)||0],[""],["CATEGORY PERFORMANCE"],["Category","Revenue","Percentage of Sales","Units Sold","Average Price per Unit"],...h?.categories.map(Q=>[Q.name,Q.revenue,`${Q.percentage}%`,Q.units,Q.units>0?Q.revenue/Q.units:0])||[],[""],["TOP PERFORMING PRODUCTS"],["Product Name","Units Sold","Revenue Generated","Average Price per Unit"],...h?.topProducts.slice(0,15).map(Q=>[Q.name,Q.units,Q.revenue,Q.units>0?Q.revenue/Q.units:0])||[],[""],["ACCOUNTING NOTES"],["1. All amounts are in Euro (€)"],["2. Revenue figures are exclusive of VAT unless otherwise stated"],["3. Customer discounts are deducted from gross revenue"],["4. This report is generated automatically from POS system data"],["5. For VAT calculations, standard rate should be applied to net sales"],["6. Inventory movements and cost of goods sold are not included in this report"],["7. Report covers retail sales only - side business operations excluded"],[""],["VERIFICATION REQUIRED"],["- Cross-reference with bank deposits"],["- Verify VAT calculations and rates"],["- Confirm discount policies and approvals"],["- Reconcile with physical inventory counts"]],ee=Ya.aoa_to_sheet(xe);Ya.book_append_sheet(K,ee,"Financial Summary");const re=[["DETAILED SALES BREAKDOWN"],[""],["Product Name","Category","Units Sold","Revenue Generated","Average Price per Unit"],...h?.topProducts.map(Q=>[Q.name,h.categories.find(k=>h.topProducts.filter(L=>h.categories.some(W=>W.name==="Category"&&L.name===Q.name)).length>0)?.name||"Other",Q.units,Q.revenue,Q.units>0?Q.revenue/Q.units:0])||[],[""],["CATEGORY TOTALS"],["Category","Total Revenue","Total Units","Average Price per Unit","Percentage of Total Sales"],...h?.categories.map(Q=>[Q.name,Q.revenue,Q.units,Q.units>0?Q.revenue/Q.units:0,`${Q.percentage}%`])||[]],_e=Ya.aoa_to_sheet(re);Ya.book_append_sheet(K,_e,"Sales Details");const ne=[["TRANSACTION ANALYSIS"],[""],["Metric","Value","Notes"],["Total Transactions",h?.kpis.transactions||0,"Number of completed sales"],["Average Transaction Value",h?.kpis.avgTransaction?h.kpis.avgTransaction:0,"Revenue per transaction"],["Total Items Sold",h?.categories.reduce((Q,k)=>Q+k.units,0)||0,"Sum of all units sold"],["Average Items per Transaction",h?.kpis.transactions>0?h.categories.reduce((Q,k)=>Q+k.units,0)/h.kpis.transactions:0,"Items sold divided by transactions"],["Discount Rate",h?.kpis.totalSales>0?(h.kpis.discounts/h.kpis.totalSales*100).toFixed(2)+"%":"0%","Percentage of revenue given as discounts"],[""],["DAILY BREAKDOWN (ESTIMATED)"],["Note: Daily breakdown requires individual transaction data"],["Average Daily Revenue",h?.kpis.totalSales&&h?.kpis.transactions>0?h.kpis.totalSales/Math.max(1,h.kpis.transactions/10):0,"Estimated based on transaction volume"],["Average Daily Transactions",h?.kpis.transactions>0?h.kpis.transactions/Math.max(1,h.kpis.transactions/10):0,"Estimated daily transaction count"]],ve=Ya.aoa_to_sheet(ne);Ya.book_append_sheet(K,ve,"Transaction Analysis");const le=[["VAT CALCULATION WORKSHEET"],[""],["IMPORTANT: This is a template - verify VAT rates and calculations"],[""],["Net Sales Revenue (Before VAT)",h?.kpis.totalSales&&h?.kpis.discounts?h.kpis.totalSales-h.kpis.discounts:h?.kpis.totalSales?h.kpis.totalSales:0],[""],["VAT CALCULATIONS (Standard Rate 23%)"],["VAT on Net Sales",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],["Total Revenue Including VAT",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*1.23:h?.kpis.totalSales?h.kpis.totalSales*1.23:0],[""],["VAT CALCULATIONS (Reduced Rate 13.5% - if applicable)"],["Note: Verify which products qualify for reduced rate"],["VAT on Reduced Rate Items",0,"To be calculated based on product categorization"],[""],["VAT SUMMARY"],["Standard Rate VAT (23%)",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],["Reduced Rate VAT (13.5%)",0,"Calculate based on qualifying products"],["Total VAT Collected",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],[""],["VERIFICATION CHECKLIST"],["☐ Verify current VAT rates"],["☐ Confirm product VAT categorization"],["☐ Cross-check with VAT returns"],["☐ Validate calculation methods"],["☐ Check for any exempt or zero-rated items"]],Ae=Ya.aoa_to_sheet(le);Ya.book_append_sheet(K,Ae,"VAT Calculation");const M=`LandM_Store_Accountant_Report_${ie}_${new Date().toISOString().split("T")[0]}.xlsx`;aN(K,M)}catch(P){console.error("Error exporting to Excel:",P),alert("Failed to export to Excel. Please try again.")}finally{I(!1)}};return e?o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"900px",width:"95%",maxHeight:"80vh",overflowY:"auto",color:"#3e3f29"},children:[g&&o.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{fontSize:"24px",marginBottom:"20px"}}),o.jsx("p",{children:"Loading report data..."})]}),!g&&!h&&o.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"20px",color:"#dc3545"}}),o.jsx("p",{children:"Unable to load report data. Please try again."}),o.jsx("button",{onClick:t,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"8px",marginTop:"20px",cursor:"pointer"},children:"Close"})]}),!g&&h&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[o.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[o.jsx("i",{className:"fa-solid fa-chart-line",style:{marginRight:"10px",color:"#7d8d86"}}),"Sales Reports"]}),o.jsx("button",{onClick:t,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:P=>{P.currentTarget.style.background="#7d8d86",P.currentTarget.style.color="#ffffff",P.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:P=>{P.currentTarget.style.background="none",P.currentTarget.style.color="#3e3f29",P.currentTarget.style.transform="rotate(0deg)"},children:"×"})]}),o.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"30px",flexWrap:"wrap",alignItems:"center"},children:[o.jsxs("select",{style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:i,onChange:P=>c(P.target.value),children:[o.jsx("option",{value:"weekly",children:"Weekly Report"}),o.jsx("option",{value:"monthly",children:"Monthly Report"}),o.jsx("option",{value:"custom",children:"Custom Date Range"})]}),i==="weekly"&&o.jsx("input",{type:"week",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:u,onChange:P=>f(P.target.value)}),i==="custom"&&o.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[o.jsx("input",{type:"date",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:w,onChange:P=>_(P.target.value),placeholder:"Start Date"}),o.jsx("span",{style:{color:"#7d8d86",fontSize:"14px"},children:"to"}),o.jsx("input",{type:"date",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:S,onChange:P=>A(P.target.value),placeholder:"End Date"})]}),o.jsxs("button",{onClick:()=>Z(w,S),disabled:g||i==="custom"&&(!w||!S),style:{background:g?"#cccccc":"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:g?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:P=>{g||(P.currentTarget.style.background="#3e3f29",P.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:P=>{g||(P.currentTarget.style.background="#7d8d86",P.currentTarget.style.transform="translateY(0)")},children:[o.jsx("i",{className:`fa-solid ${g?"fa-spinner fa-spin":"fa-refresh"}`}),g?"Loading...":"Refresh Data"]}),o.jsxs("button",{onClick:oe,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:P=>{P.currentTarget.style.background="#3e3f29",P.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:P=>{P.currentTarget.style.background="#7d8d86",P.currentTarget.style.transform="translateY(0)"},children:[o.jsx("i",{className:"fa-solid fa-print"}),"Print Report"]}),o.jsxs("button",{onClick:V,disabled:D||!h||i==="custom"&&(!w||!S),style:{background:D?"#cccccc":"#10b981",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:D?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:P=>{D||(P.currentTarget.style.background="#059669",P.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:P=>{D||(P.currentTarget.style.background="#10b981",P.currentTarget.style.transform="translateY(0)")},children:[o.jsx("i",{className:`fa-solid ${D?"fa-spinner fa-spin":"fa-file-excel"}`}),D?"Exporting...":"Export to Excel"]})]}),o.jsxs("div",{id:"sales-report-content",style:{color:"#3e3f29"},children:[o.jsxs("div",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",paddingBottom:"20px",marginBottom:"30px"},children:[o.jsxs("h1",{style:{color:"#3e3f29",fontSize:"28px",fontWeight:"700",marginBottom:"10px"},children:[o.jsx("i",{className:"fa-solid fa-file-invoice",style:{marginRight:"10px"}}),"LandM Store Sales Report"]}),o.jsx("p",{style:{color:"#7d8d86",fontSize:"16px"},children:"Reporting Period: Week 37: 9-15 September 2025"})]}),o.jsxs("section",{style:{marginBottom:"40px"},children:[o.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("i",{className:"fa-solid fa-chart-bar",style:{marginRight:"10px"}}),"1. Overview (KPIs)"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[o.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Sales"}),o.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:G(h.kpis.totalSales)})]}),o.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Transactions"}),o.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:h.kpis.transactions.toLocaleString()})]}),o.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Avg Transaction"}),o.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:G(h.kpis.avgTransaction)})]}),o.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Discounts"}),o.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:G(h.kpis.discounts)})]})]})]}),o.jsxs("section",{style:{marginBottom:"40px"},children:[o.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("i",{className:"fa-solid fa-shopping-cart",style:{marginRight:"10px"}}),"2. Sales Breakdown"]}),o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Sales by Category"}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Category"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"% of Total"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"})]})}),o.jsx("tbody",{children:h.categories.map((P,z)=>o.jsxs("tr",{style:{background:z%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.name}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:G(P.revenue)}),o.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[P.percentage,"%"]}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.units})]},z))})]})})]}),o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Top 10 Products Sold"}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Rank"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),o.jsx("tbody",{children:h.topProducts.map(P=>o.jsxs("tr",{style:{background:P.rank%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[o.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:["#",P.rank]}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.name}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.units}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:G(P.revenue)})]},P.rank))})]})})]}),o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Least Sold Products"}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),o.jsx("tbody",{children:h.leastSoldProducts.map((P,z)=>o.jsxs("tr",{style:{background:z%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.name}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.units}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:G(P.revenue)})]},P.rank))})]})})]})]}),o.jsxs("section",{style:{marginBottom:"40px"},children:[o.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("i",{className:"fa-solid fa-warehouse",style:{marginRight:"10px"}}),"3. Inventory Alerts"]}),o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc3545"}}),"Low Stock Products"]}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Current Stock"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Reorder Level"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Status"})]})}),o.jsx("tbody",{children:h.lowStock.map((P,z)=>o.jsxs("tr",{style:{background:z%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.product}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.current}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.reorder}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29"},children:P.urgent&&o.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:"URGENT"})})]},z))})]})})]}),h.outOfStock.length>0&&o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("i",{className:"fa-solid fa-box",style:{color:"#dc3545"}}),"Out of Stock Products"]}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Last Stock Date"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Expected Delivery"})]})}),o.jsx("tbody",{children:h.outOfStock.map((P,z)=>o.jsxs("tr",{style:{background:z%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.product}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:P.lastStock}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:P.expectedDelivery})]},z))})]})})]})]}),o.jsxs("section",{style:{marginBottom:"40px"},children:[o.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("i",{className:"fa-solid fa-users",style:{marginRight:"10px"}}),"4. Staff Performance"]}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Cashier"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue Handled"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Hours"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Accuracy"})]})}),o.jsx("tbody",{children:h.staff.map((P,z)=>o.jsxs("tr",{style:{background:z%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:P.name}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:G(P.revenue)}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.transactions}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:G(P.avgTransaction)}),o.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[P.hours,"h"]}),o.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[P.accuracy,"%"]})]},z))})]})})]}),o.jsxs("section",{style:{marginBottom:"40px"},children:[o.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("i",{className:"fa-solid fa-store",style:{marginRight:"10px"}}),"5. Side Business Performance"]}),h.sideBusinesses.length>0?o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Business Name"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),o.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Top Items"})]})}),o.jsx("tbody",{children:h.sideBusinesses.map((P,z)=>o.jsxs("tr",{style:{background:z%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:P.name}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:G(P.revenue)}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P.transactions}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:G(P.avgTransaction)}),o.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:P.topItems.map((ie,K)=>o.jsxs("div",{style:{fontSize:"12px",marginBottom:"2px",color:"#7d8d86"},children:[ie.name,": ",ie.units," units (",G(ie.revenue),")"]},K))})]},z))})]})}):o.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#7d8d86",background:"rgba(125, 141, 134, 0.05)",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"24px",marginBottom:"10px",display:"block"}}),"No side business sales data found for this period."]})]}),o.jsxs("section",{style:{borderTop:"2px solid rgba(125, 141, 134, 0.3)",paddingTop:"20px",marginTop:"40px"},children:[o.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:[o.jsx("i",{className:"fa-solid fa-file-text",style:{marginRight:"10px"}}),"6. Report Footer"]}),o.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[o.jsxs("div",{children:[o.jsx("h3",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"10px"},children:"LandM Store"}),o.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Unit 2 Glenmore Park, Dundalk, Co. Louth"}),o.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Phone: 087 797 0412"}),o.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"VAT Number: IE1234567A"})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[o.jsx("strong",{children:"Reporting Period:"})," Week 37: 9-15 September 2025"]}),o.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[o.jsx("strong",{children:"Generated on:"})," ",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),o.jsx("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:o.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",fontStyle:"italic",margin:0},children:"This report was automatically generated by the LandM Store POS System. For questions or clarifications, contact the store manager."})})]})]})]})]})]})}):null}const yN=({isOpen:e,onClose:t})=>{const{user:r}=An(),[a,i]=E.useState(""),[c,u]=E.useState(""),[f,h]=E.useState(""),[p,g]=E.useState(!1),[y,v]=E.useState(null),[b,w]=E.useState([]),[_,S]=E.useState(!1),[A,D]=E.useState(!1),[I,G]=E.useState(!1),[Z,oe]=E.useState({title:"",username:"",password:"",website:""}),[V,P]=E.useState(new Set),[z,ie]=E.useState(null),[K,xe]=E.useState(!1),[ee,re]=E.useState(!1),[_e,ne]=E.useState(""),[ve,le]=E.useState(""),[Ae,M]=E.useState(!1);E.useEffect(()=>{e&&(i(""),u(""),h(""),g(!1),v(null),w([]),S(!1),D(!1),G(!1),P(new Set),ie(null),xe(!1),re(!1),ne(""),le(""),M(!1),oe({title:"",username:"",password:"",website:""}))},[e]);const Q=Y=>{a.length<4&&(i(Re=>Re+Y),u(""),h(""))},k=()=>{i(""),u(""),h("")},L=async Y=>{if(r)try{const Re=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(Y)),nt=Array.from(new Uint8Array(Re)).map(ht=>ht.toString(16).padStart(2,"0")).join(""),{data:De,error:ut}=await Oe.from("vault").insert([{owner_id:r.user_id,pin_hash:nt}]).select();if(ut)throw ut;v(De[0].vault_id),u("✓ Vault created successfully!"),h("success"),g(!0)}catch(Re){console.error("Error creating vault:",Re),u("✗ Failed to create vault. Try again."),h("error")}},W=async Y=>{if(r)try{const{data:Re,error:nt}=await Oe.from("vault").select("vault_id, pin_hash").eq("owner_id",r.user_id).single();if(nt){if(nt.code==="PGRST116"){D(!0),u("Creating your vault..."),h("success"),await L(Y);return}throw nt}const De=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(Y)),ut=Array.from(new Uint8Array(De)).map(ht=>ht.toString(16).padStart(2,"0")).join("");Re.pin_hash===ut?(v(Re.vault_id),u("✓ Access Granted! Vault Unlocked"),h("success"),g(!0),await X(Re.vault_id)):(u("✗ Incorrect PIN. Try again."),h("error"),setTimeout(()=>k(),1e3))}catch(Re){console.error("Error verifying PIN:",Re),u("✗ Failed to access vault. Try again."),h("error")}},X=async Y=>{try{const{data:Re,error:nt}=await Oe.from("vault_entries").select("entry_id, label, email, password_enc, link, created_at").eq("vault_id",Y).order("created_at",{ascending:!1});if(nt)throw nt;console.log("Raw data from database:",Re),Re.length>0&&(console.log("First entry password_enc:",Re[0].password_enc),console.log("Type of password_enc:",typeof Re[0].password_enc));const De=Re.map(ut=>({...ut,password:ut.password_enc||"No password"}));w(De),S(!0)}catch(Re){console.error("Error fetching vault entries:",Re)}},ge=async()=>{if(!y||!Z.title||!Z.password){u("✗ Title and password are required"),h("error");return}try{const{data:Y,error:Re}=await Oe.from("vault_entries").insert([{vault_id:y,label:Z.title,email:Z.username,password_enc:Z.password,link:Z.website}]).select();if(Re)throw Re;await X(y),oe({title:"",username:"",password:"",website:""}),G(!1),u("✓ Password saved successfully!"),h("success")}catch(Y){console.error("Error saving entry:",Y),u("✗ Failed to save password. Try again."),h("error")}},Me=Y=>{P(Re=>{const nt=new Set(Re);return nt.has(Y)?nt.delete(Y):nt.add(Y),nt})},qe=async(Y,Re)=>{try{await navigator.clipboard.writeText(Y),u(`✓ ${Re} copied to clipboard!`),h("success"),setTimeout(()=>{u(""),h("")},2e3)}catch{u(`✗ Failed to copy ${Re}`),h("error"),setTimeout(()=>{u(""),h("")},2e3)}},Ce=Y=>{ie(Y)},te=async Y=>{if(y)try{const{error:Re}=await Oe.from("vault_entries").delete().eq("entry_id",Y).eq("vault_id",y);if(Re)throw Re;await X(y),ie(null),u("✓ Password deleted successfully!"),h("success"),setTimeout(()=>{u(""),h("")},2e3)}catch(Re){console.error("Error deleting entry:",Re),u("✗ Failed to delete password. Try again."),h("error"),setTimeout(()=>{u(""),h("")},2e3)}},Pe=()=>{a.length===4&&W(a)},He=async()=>{if(_e.length<4){u("✗ PIN must be at least 4 digits"),h("error");return}if(_e!==ve){u("✗ PINs do not match"),h("error");return}if(!y){u("✗ No vault found"),h("error");return}M(!0),u("Updating vault PIN..."),h("success");try{const Y=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(_e)),Re=Array.from(new Uint8Array(Y)).map(De=>De.toString(16).padStart(2,"0")).join(""),{error:nt}=await Oe.from("vault").update({pin_hash:Re}).eq("vault_id",y);if(nt)throw nt;u("✓ Vault PIN updated successfully!"),h("success"),ne(""),le(""),re(!1)}catch(Y){console.error("Error updating vault PIN:",Y),u("✗ Failed to update vault PIN"),h("error")}finally{M(!1)}},tt=Y=>{const Re=Y.key;Re>="0"&&Re<="9"?Q(Re):Re==="Backspace"||Re==="Delete"?a.length>0&&i(nt=>nt.slice(0,-1)):Re==="Enter"?Pe():Re==="Escape"&&t()};return e?o.jsxs(o.Fragment,{children:[!p&&o.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"400px",width:"90%",textAlign:"center"},onKeyDown:tt,tabIndex:-1,children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",border:"1px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29"},children:[o.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px"},children:A?"Creating your vault...":"Enter your 4-digit PIN"}),o.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"30px"},children:[0,1,2,3].map(Y=>o.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"2px solid rgba(125, 141, 134, 0.3)",background:Y<a.length?"linear-gradient(135deg, #7d8d86, #3e3f29)":"transparent",borderColor:Y<a.length?"#3e3f29":"rgba(125, 141, 134, 0.3)",transform:Y<a.length?"scale(1.1)":"scale(1)",transition:"all 0.3s ease"}},Y))}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"15px",marginBottom:"20px"},children:[[1,2,3,4,5,6,7,8,9].map(Y=>o.jsx("button",{onClick:()=>Q(Y.toString()),style:{width:"70px",height:"70px",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)"},onMouseEnter:Re=>{Re.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",Re.currentTarget.style.color="#f1f0e4",Re.currentTarget.style.transform="translateY(-2px)",Re.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:Re=>{Re.currentTarget.style.background="#ffffff",Re.currentTarget.style.color="#3e3f29",Re.currentTarget.style.transform="translateY(0)",Re.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:Y},Y)),o.jsx("button",{onClick:()=>Q("0"),style:{width:"70px",height:"70px",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)",gridColumn:"2"},onMouseEnter:Y=>{Y.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",Y.currentTarget.style.color="#f1f0e4",Y.currentTarget.style.transform="translateY(-2px)",Y.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:Y=>{Y.currentTarget.style.background="#ffffff",Y.currentTarget.style.color="#3e3f29",Y.currentTarget.style.transform="translateY(0)",Y.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:"0"})]}),o.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[o.jsx("button",{onClick:k,style:{padding:"12px 24px",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",background:"transparent",color:"#7d8d86",border:"2px solid rgba(125, 141, 134, 0.3)"},onMouseEnter:Y=>{Y.currentTarget.style.background="rgba(125, 141, 134, 0.1)",Y.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:Y=>{Y.currentTarget.style.background="transparent",Y.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Clear"}),o.jsx("button",{onClick:Pe,disabled:a.length!==4,style:{padding:"12px 24px",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:a.length===4?"pointer":"not-allowed",transition:"all 0.3s ease",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#f1f0e4",border:"2px solid transparent",opacity:a.length===4?1:.5},onMouseEnter:Y=>{a.length===4&&(Y.currentTarget.style.transform="translateY(-2px)",Y.currentTarget.style.boxShadow="0 8px 16px rgba(62, 63, 41, 0.2)")},onMouseLeave:Y=>{Y.currentTarget.style.transform="translateY(0)",Y.currentTarget.style.boxShadow="none"},children:A?"Creating...":"Unlock"})]}),c&&o.jsx("div",{style:{marginTop:"20px",padding:"12px",borderRadius:"10px",fontSize:"14px",fontWeight:"500",background:f==="success"?"rgba(125, 141, 134, 0.1)":"rgba(220, 53, 69, 0.1)",color:f==="success"?"#3e3f29":"#dc3545",border:f==="success"?"1px solid rgba(125, 141, 134, 0.3)":"1px solid rgba(220, 53, 69, 0.3)"},children:c})]})}),p&&o.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"900px",width:"95%",maxHeight:"70vh",minHeight:"500px",overflowY:"auto",textAlign:"center"},onKeyDown:tt,tabIndex:-1,children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",color:"#3e3f29"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[o.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[o.jsx("i",{className:"fa-solid fa-vault",style:{marginRight:"10px",color:"#7d8d86"}}),"Password Vault"]}),o.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[o.jsxs("button",{onClick:()=>re(!0),style:{background:"#dc3545",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:Y=>{Y.currentTarget.style.background="#c82333",Y.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Y=>{Y.currentTarget.style.background="#dc3545",Y.currentTarget.style.transform="translateY(0)"},children:[o.jsx("i",{className:"fa-solid fa-key"}),"Manage PIN"]}),o.jsxs("button",{onClick:()=>xe(!0),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:Y=>{Y.currentTarget.style.background="#3e3f29",Y.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Y=>{Y.currentTarget.style.background="#7d8d86",Y.currentTarget.style.transform="translateY(0)"},children:[o.jsx("i",{className:"fa-solid fa-chart-line"}),"Reports"]}),o.jsx("button",{onClick:t,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:Y=>{Y.currentTarget.style.background="#7d8d86",Y.currentTarget.style.color="#ffffff",Y.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:Y=>{Y.currentTarget.style.background="none",Y.currentTarget.style.color="#3e3f29",Y.currentTarget.style.transform="rotate(0deg)"},children:"×"})]})]}),o.jsx("div",{style:{marginBottom:"20px"},children:o.jsxs("button",{onClick:()=>G(!I),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"25px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},onMouseEnter:Y=>{Y.currentTarget.style.background="#3e3f29",Y.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Y=>{Y.currentTarget.style.background="#7d8d86",Y.currentTarget.style.transform="translateY(0)"},children:[o.jsx("i",{className:"fa-solid fa-plus"}),I?"Cancel":"Add Password"]})}),I&&o.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",marginBottom:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",textAlign:"center"},children:"Add New Password"}),o.jsxs("div",{style:{display:"grid",gap:"15px"},children:[o.jsx("input",{type:"text",placeholder:"Title (e.g., Facebook, Twitter)",value:Z.title,onChange:Y=>oe({...Z,title:Y.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:Y=>{Y.target.style.borderColor="#7d8d86",Y.target.style.background="#ffffff"},onBlur:Y=>{Y.target.style.borderColor="rgba(125, 141, 134, 0.3)",Y.target.style.background="#ffffff"}}),o.jsx("input",{type:"text",placeholder:"Username/Email",value:Z.username,onChange:Y=>oe({...Z,username:Y.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:Y=>{Y.target.style.borderColor="#7d8d86",Y.target.style.background="#ffffff"},onBlur:Y=>{Y.target.style.borderColor="rgba(125, 141, 134, 0.3)",Y.target.style.background="#ffffff"}}),o.jsx("input",{type:"password",placeholder:"Password",value:Z.password,onChange:Y=>oe({...Z,password:Y.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:Y=>{Y.target.style.borderColor="#7d8d86",Y.target.style.background="#ffffff"},onBlur:Y=>{Y.target.style.borderColor="rgba(125, 141, 134, 0.3)",Y.target.style.background="#ffffff"}}),o.jsx("input",{type:"url",placeholder:"Website (optional)",value:Z.website,onChange:Y=>oe({...Z,website:Y.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:Y=>{Y.target.style.borderColor="#7d8d86",Y.target.style.background="#ffffff"},onBlur:Y=>{Y.target.style.borderColor="rgba(125, 141, 134, 0.3)",Y.target.style.background="#ffffff"}}),o.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>G(!1),style:{padding:"10px 20px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"20px",background:"transparent",color:"#7d8d86",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Y=>{Y.currentTarget.style.background="rgba(125, 141, 134, 0.1)",Y.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:Y=>{Y.currentTarget.style.background="transparent",Y.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),o.jsx("button",{onClick:ge,disabled:!Z.title||!Z.password,style:{padding:"10px 20px",border:"none",borderRadius:"20px",background:Z.title&&Z.password?"#7d8d86":"rgba(125, 141, 134, 0.3)",color:"#f1f0e4",fontSize:"14px",fontWeight:"600",cursor:Z.title&&Z.password?"pointer":"not-allowed",transition:"all 0.3s ease"},onMouseEnter:Y=>{Z.title&&Z.password&&(Y.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:Y=>{Y.currentTarget.style.transform="translateY(0)"},children:"Save Password"})]})]})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:o.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[o.jsxs("div",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("i",{className:"fa-solid fa-shield-halved"}),"Saved Passwords"]}),b.length>0?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:b.map(Y=>o.jsxs("div",{style:{background:"#ffffff",borderRadius:"10px",padding:"15px",border:"1px solid rgba(125, 141, 134, 0.2)",transition:"all 0.3s ease",cursor:"pointer",position:"relative"},onMouseEnter:Re=>{Re.currentTarget.style.background="rgba(125, 141, 134, 0.1)",Re.currentTarget.style.borderColor="#7d8d86",Re.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Re=>{Re.currentTarget.style.background="#ffffff",Re.currentTarget.style.borderColor="rgba(125, 141, 134, 0.2)",Re.currentTarget.style.transform="translateY(0)"},children:[o.jsx("button",{onClick:Re=>{Re.stopPropagation(),Ce(Y.entry_id)},style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",color:"#dc3545",fontSize:"16px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.3s ease",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Re=>{Re.currentTarget.style.background="rgba(220, 53, 69, 0.1)",Re.currentTarget.style.transform="scale(1.1)"},onMouseLeave:Re=>{Re.currentTarget.style.background="none",Re.currentTarget.style.transform="scale(1)"},children:"×"}),o.jsx("div",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"5px",paddingRight:"30px"},children:Y.label}),o.jsx("div",{style:{color:"#7d8d86",fontSize:"14px",marginBottom:"8px"},children:Y.email}),o.jsx("div",{style:{color:"#3e3f29",fontSize:"14px",fontFamily:"monospace",marginBottom:"8px",padding:"4px 8px",background:"rgba(125, 141, 134, 0.1)",borderRadius:"4px",wordBreak:"break-all"},children:V.has(Y.entry_id)?Y.password:"••••••••"}),o.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>qe(Y.password,"Password"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Re=>{Re.currentTarget.style.background="#3e3f29",Re.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Re=>{Re.currentTarget.style.background="#7d8d86",Re.currentTarget.style.transform="translateY(0)"},children:[o.jsx("i",{className:"fa-solid fa-copy",style:{marginRight:"4px"}}),"Copy"]}),o.jsxs("button",{onClick:()=>qe(Y.email,"Email"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Re=>{Re.currentTarget.style.background="#3e3f29",Re.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Re=>{Re.currentTarget.style.background="#7d8d86",Re.currentTarget.style.transform="translateY(0)"},children:[o.jsx("i",{className:"fa-solid fa-envelope",style:{marginRight:"4px"}}),"Copy Email"]}),o.jsxs("button",{onClick:()=>Me(Y.entry_id),style:{background:V.has(Y.entry_id)?"#3e3f29":"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Re=>{Re.currentTarget.style.background=V.has(Y.entry_id)?"#7d8d86":"#3e3f29",Re.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Re=>{Re.currentTarget.style.background=V.has(Y.entry_id)?"#3e3f29":"#7d8d86",Re.currentTarget.style.transform="translateY(0)"},children:[o.jsx("i",{className:`fa-solid ${V.has(Y.entry_id)?"fa-eye-slash":"fa-eye"}`,style:{marginRight:"4px"}}),V.has(Y.entry_id)?"Hide":"Show"]})]})]},Y.entry_id))}):o.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#bca88d",fontSize:"14px"},children:[o.jsx("i",{className:"fa-solid fa-folder-open",style:{fontSize:"24px",marginBottom:"8px",display:"block"}}),"No passwords saved yet"]})]})})]})}),z&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"400px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[o.jsx("h3",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"15px"},children:"Delete Password?"}),o.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"25px",lineHeight:"1.5"},children:"Are you sure you want to delete this password? This action cannot be undone."}),o.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>ie(null),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Y=>{Y.currentTarget.style.background="rgba(125, 141, 134, 0.1)",Y.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:Y=>{Y.currentTarget.style.background="transparent",Y.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),o.jsx("button",{onClick:()=>te(z),style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Y=>{Y.currentTarget.style.background="#c82333",Y.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Y=>{Y.currentTarget.style.background="#dc3545",Y.currentTarget.style.transform="translateY(0)"},children:"Delete"})]})]})}),ee&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"500px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[o.jsxs("h3",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[o.jsx("i",{className:"fa-solid fa-key",style:{color:"#dc3545"}}),"Manage System PIN"]}),o.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px",lineHeight:"1.5"},children:"Change the system access PIN. This PIN is required to access the POS system."}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",marginBottom:"30px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"New PIN (minimum 4 digits)"}),o.jsx("input",{type:"password",value:_e,onChange:Y=>ne(Y.target.value),placeholder:"Enter new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:Y=>{Y.target.style.borderColor="#dc3545"},onBlur:Y=>{Y.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"Confirm PIN"}),o.jsx("input",{type:"password",value:ve,onChange:Y=>le(Y.target.value),placeholder:"Confirm new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:Y=>{Y.target.style.borderColor="#dc3545"},onBlur:Y=>{Y.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]})]}),o.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>re(!1),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Y=>{Y.currentTarget.style.background="rgba(125, 141, 134, 0.1)",Y.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:Y=>{Y.currentTarget.style.background="transparent",Y.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),o.jsx("button",{onClick:He,disabled:Ae||_e.length<4||_e!==ve,style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:Ae||_e.length<4||_e!==ve?"rgba(220, 53, 69, 0.3)":"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:Ae||_e.length<4||_e!==ve?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:Y=>{!Ae&&_e.length>=4&&_e===ve&&(Y.currentTarget.style.background="#c82333",Y.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:Y=>{Y.currentTarget.style.background=Ae||_e.length<4||_e!==ve?"rgba(220, 53, 69, 0.3)":"#dc3545",Y.currentTarget.style.transform="translateY(0)"},children:Ae?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-save"}),"Update PIN"]})})]})]})}),o.jsx(mN,{isOpen:K,onClose:()=>xe(!1),vaultEntries:b,businessId:r?.business_id})]}):null},vN=()=>{const{businessId:e,businessLoading:t}=td(),[r,a]=E.useState([]),[i,c]=E.useState(!1),[u,f]=E.useState(!1),[h,p]=E.useState(null),[g,y]=E.useState({username:"",password:"",role:"Cashier",icon:"ryu"}),v=[{name:"lily",label:"Lily"},{name:"chunli",label:"Chun-Li"},{name:"ken",label:"Ken"},{name:"kimberly",label:"Kimberly"},{name:"mai",label:"Mai"},{name:"manon",label:"Manon"},{name:"rashid",label:"Rashid"},{name:"ryu",label:"Ryu"},{name:"zangief",label:"Zangief"}],[b,w]=E.useState(!1),[_,S]=E.useState(""),[A,D]=E.useState(!0),[I,G]=E.useState(!1);E.useEffect(()=>{e&&Z()},[e,t]);const Z=async()=>{if(!e){a([]),D(!1);return}try{D(!0);const{data:ee,error:re}=await Oe.from("users").select("*").eq("business_id",e).order("user_id",{ascending:!1});if(re){console.error("Error fetching users:",re),S("Failed to fetch users");return}a(ee||[])}catch(ee){console.error("Error fetching users:",ee),S("Failed to fetch users")}finally{D(!1)}},oe=async ee=>{if(ee.preventDefault(),w(!0),S(""),!g.username.trim()){S("Username is required"),w(!1);return}if(!g.password.trim()){S("Password is required"),w(!1);return}if(!e){S("Business ID is not available. Please refresh the page and try again."),w(!1);return}try{console.log("Adding user with data:",{username:g.username,role:g.role,icon:g.icon,business_id:e});const{data:re,error:_e}=await Oe.from("users").select("user_id").eq("username",g.username.trim()).single();if(_e&&_e.code!=="PGRST116")throw console.error("Error checking username:",_e),new Error("Failed to check if username exists");if(re)throw new Error("Username already exists. Please choose a different username.");const ne=li(g.password),ve={username:g.username.trim(),password_hash:ne,role:g.role,active:!0,business_id:e};ve.icon=g.icon;const{data:le,error:Ae}=await Oe.from("users").insert([ve]).select();if(Ae)throw console.error("Supabase error adding user:",Ae),Ae.code==="23505"?new Error("Username already exists. Please choose a different username."):Ae.code==="23503"?new Error("Invalid business ID. Please refresh the page and try again."):Ae.code==="23502"?new Error("Required field is missing. Please fill in all required fields."):Ae.message.includes("duplicate key value violates unique constraint")?new Error("Username already exists. Please choose a different username."):Ae.message.includes("violates foreign key constraint")?new Error("Invalid business ID. Please refresh the page and try again."):Ae.message.includes("Could not find the 'icon' column")?new Error("Database schema is outdated. Please run the database migration to add the icon column."):new Error(`Database error: ${Ae.message}`);if(!le||le.length===0)throw new Error("No data returned from insert operation");console.log("User added successfully:",le[0]),y({username:"",password:"",role:"Cashier",icon:"ryu"}),c(!1),Z()}catch(re){console.error("Error adding user:",re),re instanceof Error?S(`Failed to add user: ${re.message}`):S("Failed to add user: Unknown error occurred")}finally{w(!1)}},V=async ee=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:re}=await Oe.from("users").delete().eq("user_id",ee);if(re)throw console.error("Error deleting user:",re),re;Z()}catch(re){console.error("Error deleting user:",re),S(`Failed to delete user: ${re instanceof Error?re.message:"Unknown error"}`)}},P=async(ee,re)=>{try{const{error:_e}=await Oe.from("users").update({active:!re}).eq("user_id",ee);if(_e)throw console.error("Error updating user status:",_e),_e;Z()}catch(_e){console.error("Error updating user status:",_e),S(`Failed to update user: ${_e instanceof Error?_e.message:"Unknown error"}`)}},z=ee=>{p(ee),y({username:ee.username,password:"",role:ee.role,icon:ee.icon||"ryu"}),f(!0)},ie=async ee=>{if(ee.preventDefault(),!!h){w(!0),S("");try{const re={username:g.username,role:g.role,icon:g.icon};g.password.trim()&&(re.password_hash=li(g.password));const{error:_e}=await Oe.from("users").update(re).eq("user_id",h.user_id);if(_e)throw console.error("Error updating user:",_e),_e;y({username:"",password:"",role:"Cashier",icon:"ryu"}),p(null),f(!1),Z()}catch(re){console.error("Error updating user:",re),S(`Failed to update user: ${re instanceof Error?re.message:"Unknown error"}`)}finally{w(!1)}}},K=async()=>{if(!e){S("No business selected");return}try{D(!0);const ee=`admin_${e}`,{data:re,error:_e}=await Oe.from("users").select("user_id").eq("business_id",e).eq("username",ee).eq("role","Admin").single();if(_e&&_e.code!=="PGRST116"){console.error(`Error checking admin for business ${e}:`,_e),S("Failed to check for existing admin account");return}if(re)S("Admin account already exists for this business");else{const ne=li("admin123"),{error:ve}=await Oe.from("users").insert({username:ee,password_hash:ne,role:"Admin",active:!0,business_id:e,icon:"ryu",created_at:new Date().toISOString()});ve?(console.error(`Error creating admin for business ${e}:`,ve),S("Failed to create admin account")):(console.log(`Admin account created for business ID: ${e}`),S("Admin account created successfully"),Z())}}catch(ee){console.error("Error creating admin account:",ee),S(`Failed to create admin account: ${ee instanceof Error?ee.message:"Unknown error"}`)}finally{D(!1)}},xe=ee=>{switch(ee){case"Admin":return"#ef4444";case"Owner":return"#8b5cf6";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#1a1a1a"}};return A?o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#1a1a1a"},children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading users..."]}):o.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[o.jsxs("div",{children:[o.jsxs("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 8px 0"},children:[o.jsx("i",{className:"fa-solid fa-users-cog",style:{marginRight:"12px",color:"#7d8d86"}}),"User Management"]}),o.jsx("p",{style:{color:"#1a1a1a",margin:"0",fontSize:"18px"},children:"Manage system users and their permissions"})]}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsxs("button",{onClick:()=>c(!0),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"18px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[o.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]}),o.jsxs("button",{onClick:K,style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},disabled:A,children:[o.jsx("i",{className:"fa-solid fa-user-shield"}),"Create Admin Account"]})]})]}),_&&o.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px 16px",borderRadius:"8px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),_]}),o.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[o.jsx("div",{style:{padding:"20px 24px",borderBottom:"2px solid #d1d5db",background:"#f9fafb"},children:o.jsxs("h3",{style:{margin:"0",fontSize:"20px",fontWeight:"600",color:"#1a1a1a"},children:[o.jsx("i",{className:"fa-solid fa-list",style:{marginRight:"8px",color:"#7d8d86"}}),"All Users (",r.length,")"]})}),r.length===0?o.jsxs("div",{style:{padding:"48px 24px",textAlign:"center",color:"#1a1a1a"},children:[o.jsx("i",{className:"fa-solid fa-users",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),o.jsx("p",{style:{fontSize:"20px",margin:"0 0 8px 0"},children:"No users found"}),o.jsx("p",{style:{fontSize:"16px",margin:"0"},children:"Add your first user to get started"})]}):o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{background:"#f9fafb"},children:[o.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User"}),o.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Icon"}),o.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Role"}),o.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Status"}),o.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User ID"}),o.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Actions"})]})}),o.jsx("tbody",{children:r.map((ee,re)=>o.jsxs("tr",{style:{borderBottom:re<r.length-1?"1px solid #f3f4f6":"none"},children:[o.jsx("td",{style:{padding:"16px 24px"},children:o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a",marginBottom:"4px",fontSize:"16px"},children:ee.username}),o.jsxs("div",{style:{fontSize:"15px",color:"#1a1a1a"},children:["ID: ",ee.user_id]})]})}),o.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden",border:"2px solid #e5e7eb"},children:ee.icon?o.jsx("img",{src:`/retailpos/images/icons/${ee.icon}.png`,alt:ee.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):o.jsx("i",{className:"fa-solid fa-user",style:{fontSize:"20px",color:"#9ca3af"}})})}),o.jsx("td",{style:{padding:"16px 24px"},children:o.jsx("span",{style:{background:`${xe(ee.role)}20`,color:xe(ee.role),padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize"},children:ee.role})}),o.jsx("td",{style:{padding:"16px 24px"},children:o.jsx("span",{style:{background:ee.active?"#dcfce720":"#fef2f220",color:ee.active?"#16a34a":"#dc2626",padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:ee.active?"Active":"Inactive"})}),o.jsxs("td",{style:{padding:"16px 24px",color:"#1a1a1a",fontSize:"15px"},children:["User #",ee.user_id]}),o.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:o.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[o.jsxs("button",{onClick:()=>z(ee),style:{background:"#e0f2fe",color:"#0c4a6e",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Edit User",children:[o.jsx("i",{className:"fa-solid fa-pen-to-square"}),"Edit"]}),o.jsxs("button",{onClick:()=>P(ee.user_id,ee.active),style:{background:ee.active?"#fef2f2":"#dcfce7",color:ee.active?"#dc2626":"#16a34a",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:ee.active?"Deactivate":"Activate",children:[o.jsx("i",{className:`fa-solid fa-${ee.active?"ban":"check"}`}),ee.active?"Deactivate":"Activate"]}),o.jsxs("button",{onClick:()=>V(ee.user_id),style:{background:"#fef2f2",color:"#dc2626",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Delete User",children:[o.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]})]})})]},ee.user_id))})]})})]}),i&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[o.jsxs("h2",{style:{margin:"0",fontSize:"26px",fontWeight:"600",color:"#1a1a1a"},children:[o.jsx("i",{className:"fa-solid fa-user-plus",style:{marginRight:"8px",color:"#7d8d86"}}),"Add New User"]}),o.jsx("button",{onClick:()=>c(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:o.jsx("i",{className:"fa-solid fa-xmark"})})]}),o.jsxs("form",{onSubmit:oe,children:[o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),o.jsx("input",{type:"text",value:g.username,onChange:ee=>y({...g,username:ee.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Password *"}),o.jsx("input",{type:"password",value:g.password,onChange:ee=>y({...g,password:ee.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter password"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),o.jsxs("select",{value:g.role,onChange:ee=>y({...g,role:ee.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[o.jsx("option",{value:"cashier",children:"Cashier"}),o.jsx("option",{value:"manager",children:"Manager"}),o.jsx("option",{value:"admin",children:"Admin"})]})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:v.map(ee=>o.jsxs("button",{type:"button",onClick:()=>y({...g,icon:ee.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:g.icon===ee.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:g.icon===ee.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:g.icon===ee.name?"scale(1.05)":"scale(1)",boxShadow:g.icon===ee.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:o.jsx("img",{src:`/retailpos/images/icons/${ee.name}.png`,alt:ee.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:g.icon===ee.name?"brightness(1.1) contrast(1.1)":"none"}})}),g.icon===ee.name&&o.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:o.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},ee.name))})]}),o.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[o.jsx("button",{type:"button",onClick:()=>c(!1),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),o.jsx("button",{type:"submit",disabled:b,style:{background:b?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:b?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Adding..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]})})]})]})]})}),u&&h&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[o.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1a1a1a"},children:[o.jsx("i",{className:"fa-solid fa-user-pen",style:{marginRight:"8px",color:"#7d8d86"}}),"Edit User"]}),o.jsx("button",{onClick:()=>{f(!1),p(null)},style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:o.jsx("i",{className:"fa-solid fa-xmark"})})]}),o.jsxs("form",{onSubmit:ie,children:[o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),o.jsx("input",{type:"text",value:g.username,onChange:ee=>y({...g,username:ee.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"New Password (leave blank to keep current)"}),o.jsx("input",{type:"password",value:g.password,onChange:ee=>y({...g,password:ee.target.value}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter new password (optional)"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),o.jsxs("select",{value:g.role,onChange:ee=>y({...g,role:ee.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[o.jsx("option",{value:"Cashier",children:"Cashier"}),o.jsx("option",{value:"Manager",children:"Manager"}),o.jsx("option",{value:"Admin",children:"Admin"})]})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:v.map(ee=>o.jsxs("button",{type:"button",onClick:()=>y({...g,icon:ee.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:g.icon===ee.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:g.icon===ee.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:g.icon===ee.name?"scale(1.05)":"scale(1)",boxShadow:g.icon===ee.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:o.jsx("img",{src:`/retailpos/images/icons/${ee.name}.png`,alt:ee.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:g.icon===ee.name?"brightness(1.1) contrast(1.1)":"none"}})}),g.icon===ee.name&&o.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:o.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},ee.name))})]}),o.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[o.jsx("button",{type:"button",onClick:()=>{f(!1),p(null)},style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),o.jsx("button",{type:"submit",disabled:b,style:{background:b?"#9ca3af":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:b?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-floppy-disk"}),"Update User"]})})]})]})]})}),o.jsx("div",{onClick:()=>G(!0),title:"Access Secure Vault - Manage sensitive operations and settings",style:{position:"fixed",bottom:"24px",right:"24px",zIndex:50,width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(125, 141, 134, 0.4)",cursor:"pointer",transition:"all 0.2s ease"},children:o.jsx("i",{className:"fa-solid fa-vault",style:{fontSize:"48px",color:"#f1f0e4"}})}),o.jsx(yN,{isOpen:I,onClose:()=>G(!1)})]})},bN="_container_k4aew_2",_N="_header_k4aew_10",SN="_title_k4aew_16",wN="_mainContent_k4aew_32",TN="_offlineNotice_k4aew_39",EN="_offlineNoticeContent_k4aew_51",kN="_dateNavigation_k4aew_62",jN="_navButton_k4aew_76",CN="_currentDate_k4aew_102",AN="_controls_k4aew_144",RN="_button_k4aew_151",DN="_buttonPrimary_k4aew_170",NN="_buttonSecondary_k4aew_179",ON="_buttonDanger_k4aew_192",IN="_notesContainer_k4aew_202",BN="_gridBackground_k4aew_218",MN="_gridPattern_k4aew_224",FN="_emptyState_k4aew_234",LN="_emptyStateContent_k4aew_242",PN="_emptyStateIcon_k4aew_247",zN="_emptyStateTitle_k4aew_252",UN="_dragIndicator_k4aew_258",WN="_footer_k4aew_271",HN="_stickyNote_k4aew_279",qN="_stickyNoteDragging_k4aew_286",$N="_note_k4aew_202",GN="_noteOverdue_k4aew_306",VN="_noteDueToday_k4aew_310",YN="_noteYellow_k4aew_315",KN="_notePink_k4aew_321",XN="_noteBlue_k4aew_327",QN="_noteGreen_k4aew_333",JN="_notePurple_k4aew_339",ZN="_noteOrange_k4aew_345",eO="_noteTopStrip_k4aew_351",tO="_noteContent_k4aew_433",rO="_noteContentEditing_k4aew_439",nO="_noteInput_k4aew_445",aO="_noteDateInput_k4aew_456",sO="_noteTextarea_k4aew_466",iO="_noteDisplay_k4aew_480",oO="_noteTitle_k4aew_486",lO="_noteTitleResolved_k4aew_494",cO="_noteDate_k4aew_456",uO="_noteDateOverdue_k4aew_505",dO="_noteDateToday_k4aew_510",fO="_noteBody_k4aew_515",hO="_noteBodyResolved_k4aew_524",pO="_noteCorner_k4aew_529",gO="_noteCornerEffect_k4aew_537",xO="_modalOverlay_k4aew_548",mO="_modal_k4aew_548",yO="_modalHeader_k4aew_569",vO="_modalTitle_k4aew_573",bO="_modalClose_k4aew_593",_O="_modalForm_k4aew_605",SO="_errorMessage_k4aew_611",wO="_errorContent_k4aew_619",TO="_formGroup_k4aew_628",EO="_formLabel_k4aew_633",kO="_formInput_k4aew_641",jO="_formTextarea_k4aew_655",CO="_colorSelection_k4aew_670",AO="_colorOption_k4aew_676",RO="_colorOptionSelected_k4aew_689",DO="_checkboxContainer_k4aew_694",NO="_formCheckbox_k4aew_700",OO="_checkboxLabel_k4aew_707",IO="_preview_k4aew_716",BO="_previewLabel_k4aew_720",MO="_previewNote_k4aew_728",FO="_previewTitle_k4aew_734",LO="_previewDate_k4aew_741",PO="_previewBody_k4aew_751",zO="_modalActions_k4aew_757",UO="_modalButton_k4aew_763",WO="_modalButtonCancel_k4aew_777",HO="_modalButtonSubmit_k4aew_786",qO="_modalButtonDanger_k4aew_795",$O="_loading_k4aew_805",GO="_loadingContent_k4aew_813",VO="_loadingIcon_k4aew_817",YO="_loadingText_k4aew_823",KO="_confirmationDialog_k4aew_869",XO="_confirmationContent_k4aew_880",QO="_confirmationHeader_k4aew_889",JO="_confirmationIcon_k4aew_895",ZO="_confirmationButton_k4aew_926",eI="_confirmationButtonCancel_k4aew_936",tI="_confirmationButtonConfirm_k4aew_945",rI="_calendarModal_k4aew_955",nI="_calendar_k4aew_955",aI="_calendarHeader_k4aew_981",sI="_calendarCloseButton_k4aew_989",iI="_calendarTitle_k4aew_1011",oI="_calendarNavButton_k4aew_1017",lI="_calendarGrid_k4aew_1035",cI="_calendarDayHeader_k4aew_1041",uI="_calendarDay_k4aew_1041",dI="_calendarDayOtherMonth_k4aew_1068",fI="_calendarDayToday_k4aew_1072",hI="_calendarDaySelected_k4aew_1082",pI="_calendarDayWithReminders_k4aew_1092",gI="_calendarDayWithRemindersToday_k4aew_1102",xI="_calendarDayWithRemindersSelected_k4aew_1111",mI="_calendarReminderCount_k4aew_1136",yI="_lilyMascot_k4aew_1178",vI="_lilySpeechBubble_k4aew_1188",bI="_lilySpeechTail_k4aew_1206",_I="_lilyImage_k4aew_1217",pe={container:bN,header:_N,title:SN,mainContent:wN,offlineNotice:TN,offlineNoticeContent:EN,dateNavigation:kN,navButton:jN,currentDate:CN,controls:AN,button:RN,buttonPrimary:DN,buttonSecondary:NN,buttonDanger:ON,notesContainer:IN,gridBackground:BN,gridPattern:MN,emptyState:FN,emptyStateContent:LN,emptyStateIcon:PN,emptyStateTitle:zN,dragIndicator:UN,footer:WN,stickyNote:HN,stickyNoteDragging:qN,note:$N,noteOverdue:GN,noteDueToday:VN,noteYellow:YN,notePink:KN,noteBlue:XN,noteGreen:QN,notePurple:JN,noteOrange:ZN,noteTopStrip:eO,noteContent:tO,noteContentEditing:rO,noteInput:nO,noteDateInput:aO,noteTextarea:sO,noteDisplay:iO,noteTitle:oO,noteTitleResolved:lO,noteDate:cO,noteDateOverdue:uO,noteDateToday:dO,noteBody:fO,noteBodyResolved:hO,noteCorner:pO,noteCornerEffect:gO,modalOverlay:xO,modal:mO,modalHeader:yO,modalTitle:vO,modalClose:bO,modalForm:_O,errorMessage:SO,errorContent:wO,formGroup:TO,formLabel:EO,formInput:kO,formTextarea:jO,colorSelection:CO,colorOption:AO,colorOptionSelected:RO,checkboxContainer:DO,formCheckbox:NO,checkboxLabel:OO,preview:IO,previewLabel:BO,previewNote:MO,previewTitle:FO,previewDate:LO,previewBody:PO,modalActions:zO,modalButton:UO,modalButtonCancel:WO,modalButtonSubmit:HO,modalButtonDanger:qO,loading:$O,loadingContent:GO,loadingIcon:VO,loadingText:YO,confirmationDialog:KO,confirmationContent:XO,confirmationHeader:QO,confirmationIcon:JO,confirmationButton:ZO,confirmationButtonCancel:eI,confirmationButtonConfirm:tI,calendarModal:rI,calendar:nI,calendarHeader:aI,calendarCloseButton:sI,calendarTitle:iI,calendarNavButton:oI,calendarGrid:lI,calendarDayHeader:cI,calendarDay:uI,calendarDayOtherMonth:dI,calendarDayToday:fI,calendarDaySelected:hI,calendarDayWithReminders:pI,calendarDayWithRemindersToday:gI,calendarDayWithRemindersSelected:xI,calendarReminderCount:mI,lilyMascot:yI,lilySpeechBubble:vI,lilySpeechTail:bI,lilyImage:_I};function SI(){const{user:e,currentUserId:t}=An(),[r,a]=E.useState([]),[i,c]=E.useState(!0),[u,f]=E.useState(null),[h,p]=E.useState({x:0,y:0}),[g,y]=E.useState(null),[v,b]=E.useState(!1),[w,_]=E.useState(!1),[S,A]=E.useState(!1),[D,I]=E.useState(null),[G,Z]=E.useState({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),[oe,V]=E.useState({title:"",body:"",remind_date:"",color:"yellow",resolved:!1}),[P,z]=E.useState(new Date),[ie,K]=E.useState(!1),[xe,ee]=E.useState(!1),[re,_e]=E.useState(new Date),[ne,ve]=E.useState(!1),[le,Ae]=E.useState("Hi! I'm Lily, your reminder assistant! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),[M,Q]=E.useState(()=>{const ce=localStorage.getItem("lilyEnabled");return ce!==null?JSON.parse(ce):!0}),[k,L]=E.useState(!0),W={yellow:{bg:pe.noteYellow,border:pe.noteYellow,shadow:pe.noteYellow},pink:{bg:pe.notePink,border:pe.notePink,shadow:pe.notePink},blue:{bg:pe.noteBlue,border:pe.noteBlue,shadow:pe.noteBlue},green:{bg:pe.noteGreen,border:pe.noteGreen,shadow:pe.noteGreen},purple:{bg:pe.notePurple,border:pe.notePurple,shadow:pe.notePurple},orange:{bg:pe.noteOrange,border:pe.noteOrange,shadow:pe.noteOrange}},X=()=>{const ce=new Date(P);ce.setDate(ce.getDate()-1),z(ce)},ge=()=>{const ce=new Date(P);ce.setDate(ce.getDate()+1),z(ce)},Me=ce=>{const $e=new Date(re);ce==="prev"?$e.setMonth($e.getMonth()-1):$e.setMonth($e.getMonth()+1),_e($e)},qe=ce=>{z(ce),ee(!1)},Ce=()=>{const ce=new Set;return r.forEach($e=>{const ft=new Date($e.remind_date);ce.add(ft.toDateString())}),ce},te=()=>{const ce={};return r.forEach($e=>{const Dt=new Date($e.remind_date).toDateString();ce[Dt]=(ce[Dt]||0)+1}),ce},Pe=()=>{const ce=re.getFullYear(),$e=re.getMonth(),ft=new Date(ce,$e,1),Dt=new Date(ft);Dt.setDate(Dt.getDate()-ft.getDay());const sr=[],Er=Ce(),br=te(),er=new Date,Cr=new Date(P);for(let Ut=0;Ut<42;Ut++){const ar=new Date(Dt);ar.setDate(Dt.getDate()+Ut);const ae=ar.getMonth()===$e,ke=ar.toDateString()===er.toDateString(),pt=ar.toDateString()===Cr.toDateString(),Ct=Er.has(ar.toDateString()),tr=br[ar.toDateString()]||0;sr.push({date:ar,isCurrentMonth:ae,isToday:ke,isSelected:pt,hasReminders:Ct,reminderCount:tr})}return sr},He=()=>{const ce=!M;Q(ce),localStorage.setItem("lilyEnabled",JSON.stringify(ce)),ce&&(Ae("Hi! I'm back! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),ve(!0))},tt=()=>M?o.jsxs("div",{className:pe.lilyMascot,children:[ne&&o.jsxs("div",{className:pe.lilySpeechBubble,children:[o.jsx("p",{children:le}),o.jsx("div",{className:pe.lilySpeechTail})]}),o.jsx("div",{className:pe.lilyImage,onClick:()=>{ve(!ne)},onDoubleClick:()=>{He()},children:o.jsx("img",{src:e?.icon?`/retailpos/images/icons/${e.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:e?.icon||"Lily"})})]}):null,Y=()=>{const ce=new Date(P);return ce.setHours(0,0,0,0),r.filter($e=>{const ft=new Date($e.remind_date);ft.setHours(0,0,0,0);const Dt=ft.getTime()===ce.getTime(),sr=k||!$e.resolved;return Dt&&sr})},Re=async()=>{if(a([]),K(!1),!v)try{const{error:ce}=await Oe.from("reminders").delete().neq("reminder_id",0);ce&&console.error("Error deleting all reminders from database:",ce)}catch(ce){console.error("Error deleting all reminders:",ce)}},nt=async()=>{try{if(c(!0),!e?.business_id){a([]),c(!1);return}const{data:ce,error:$e}=await Oe.from("reminders").select("*").eq("business_id",e.business_id).order("remind_date",{ascending:!0});if($e)throw console.error("Database fetch error:",$e),$e;console.log("Fetched reminders from database:",ce);const ft=ce?.map((Dt,sr)=>({...Dt,x:Math.random()*400+50,y:Math.random()*300+50,rotation:(Math.random()-.5)*6,isEditing:!1,color:Object.keys(W)[sr%Object.keys(W).length]}))||[];console.log("Reminders with UI properties:",ft),a(ft)}catch(ce){console.error("Error fetching reminders:",ce),y("Failed to load reminders. Please try again.")}finally{c(!1)}};E.useEffect(()=>{(async()=>{try{const{data:$e,error:ft}=await Oe.from("reminders").select("count",{count:"exact",head:!0});ft?(console.error("Table test error:",ft),y("Database table 'reminders' does not exist. Please run the SQL commands from database-schema.sql in your Supabase SQL editor."),b(!0),c(!1)):(console.log("Table exists, fetching reminders..."),nt())}catch($e){console.error("Table test failed:",$e),y("Failed to connect to database. Please check your connection.")}})()},[]);const De=()=>{Z({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),y(null),_(!0)},ut=()=>{_(!1),Z({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"})},ht=()=>{A(!1),I(null),V({title:"",body:"",remind_date:"",color:"yellow",resolved:!1})},At=async()=>{if(!D||!oe.title.trim()||!oe.body.trim()){y("Please fill in both title and body for the reminder.");return}await rt(D.reminder_id,{title:oe.title.trim(),body:oe.body.trim(),remind_date:oe.remind_date,color:oe.color,resolved:oe.resolved}),ht()},mt=async()=>{if(!G.title.trim()||!G.body.trim()){y("Please fill in both title and body for the reminder.");return}const ce={title:G.title.trim(),body:G.body.trim(),remind_date:G.remind_date,owner_id:t?parseInt(t):1,business_id:e?.business_id||1};if(v){const $e=Date.now();a([...r,{...ce,reminder_id:$e,created_at:new Date().toISOString()}]),ut();return}try{if(t)ce.owner_id=parseInt(t);else{const Dt=Date.now();a([...r,{...ce,reminder_id:Dt,created_at:new Date().toISOString()}]),ut();return}const{data:$e,error:ft}=await Oe.from("reminders").insert([{title:ce.title,body:ce.body,remind_date:ce.remind_date,owner_id:ce.owner_id}]).select().single();if(ft){const Dt=Date.now();a([...r,{...ce,reminder_id:Dt,created_at:new Date().toISOString()}]),ut();return}a([...r,{...ce,reminder_id:$e.reminder_id,created_at:new Date().toISOString()}]),ut()}catch($e){console.error("Error adding reminder:",$e);const ft=Date.now();a([...r,{...ce,reminder_id:ft,created_at:new Date().toISOString()}]),ut()}},Ie=async ce=>{if(a(r.filter($e=>$e.reminder_id!==ce)),!v)try{const{error:$e}=await Oe.from("reminders").delete().eq("reminder_id",ce);$e&&console.error("Error deleting reminder from database:",$e)}catch($e){console.error("Error deleting reminder:",$e)}},rt=async(ce,$e)=>{if(console.log("updateReminder called with:",{id:ce,updates:$e,offlineMode:v}),a(r.map(ft=>ft.reminder_id===ce?{...ft,...$e}:ft)),v){console.log("Offline mode - skipping database update");return}try{if($e.title||$e.body||$e.remind_date||$e.resolved!==void 0){console.log("Updating database with:",{title:$e.title,body:$e.body,remind_date:$e.remind_date,resolved:$e.resolved});const{error:ft}=await Oe.from("reminders").update({title:$e.title,body:$e.body,remind_date:$e.remind_date,resolved:$e.resolved}).eq("reminder_id",ce);ft?console.error("Error updating reminder in database:",ft):console.log("Successfully updated reminder in database")}}catch(ft){console.error("Error updating reminder:",ft)}},xt=(ce,$e)=>{ce.preventDefault();const ft=ce.currentTarget.getBoundingClientRect();f($e),p({x:ce.clientX-ft.left,y:ce.clientY-ft.top})},Qt=ce=>{if(u){const $e=document.getElementById("sticky-container");if($e){const ft=$e.getBoundingClientRect(),Dt=Math.max(0,Math.min(ce.clientX-ft.left-h.x,ft.width-224)),sr=Math.max(0,Math.min(ce.clientY-ft.top-h.y,ft.height-224));a(r.map(Er=>Er.reminder_id===u.reminder_id?{...Er,x:Dt,y:sr}:Er))}}},mr=()=>{f(null),p({x:0,y:0})};E.useEffect(()=>{if(u)return document.addEventListener("mousemove",Qt),document.addEventListener("mouseup",mr),()=>{document.removeEventListener("mousemove",Qt),document.removeEventListener("mouseup",mr)}},[u,h]);const Mt=({reminder:ce})=>{const[$e,ft]=E.useState(ce.title),[Dt,sr]=E.useState(ce.body),[Er,br]=E.useState(ce.remind_date),er=E.useRef(null);E.useEffect(()=>{ce.isEditing&&er.current&&(er.current.focus(),er.current.select())},[ce.isEditing]);const Cr=kt=>{sr(kt.target.value),kt.target.style.height="auto",kt.target.style.height=kt.target.scrollHeight+"px"},Ut=()=>{$e.trim()&&Dt.trim()?rt(ce.reminder_id,{title:$e.trim(),body:Dt.trim(),remind_date:Er,isEditing:!1}):(ft(ce.title),sr(ce.body),br(ce.remind_date),rt(ce.reminder_id,{isEditing:!1}))},ar=kt=>{kt.key==="Enter"&&kt.shiftKey||(kt.key==="Enter"?(kt.preventDefault(),Ut()):kt.key==="Escape"&&(ft(ce.title),sr(ce.body),br(ce.remind_date),rt(ce.reminder_id,{isEditing:!1})))},ae=kt=>{kt.key==="Enter"?(kt.preventDefault(),Ut()):kt.key==="Escape"&&(ft(ce.title),sr(ce.body),br(ce.remind_date),rt(ce.reminder_id,{isEditing:!1}))},ke=W[ce.color]||W.yellow,pt=new Date,Ct=new Date(ce.remind_date),tr=Ct<pt&&Ct.toDateString()!==pt.toDateString(),at=Ct.toDateString()===pt.toDateString();return o.jsx("div",{className:`${pe.stickyNote} ${u?.reminder_id===ce.reminder_id?pe.stickyNoteDragging:""}`,style:{left:`${ce.x}px`,top:`${ce.y}px`,transform:`rotate(${ce.rotation}deg)`},children:o.jsxs("div",{className:`${pe.note} ${ke.bg} ${tr?pe.noteOverdue:at?pe.noteDueToday:""}`,onMouseDown:kt=>!ce.isEditing&&xt(kt,ce),children:[o.jsx("div",{className:`${pe.noteTopStrip} ${ke.border}`}),o.jsx("div",{className:pe.noteContent,children:ce.isEditing?o.jsxs("div",{className:pe.noteContentEditing,children:[o.jsx("input",{type:"text",value:$e,onChange:kt=>ft(kt.target.value),onKeyDown:ae,onBlur:Ut,className:pe.noteInput,placeholder:"Reminder title..."}),o.jsx("input",{type:"date",value:Er,onChange:kt=>br(kt.target.value),onKeyDown:ae,onBlur:Ut,className:pe.noteDateInput}),o.jsx("textarea",{ref:er,value:Dt,onChange:Cr,onBlur:Ut,onKeyDown:ar,className:pe.noteTextarea,style:{fontFamily:"Comic Sans MS, cursive, sans-serif",minHeight:"80px"},placeholder:"Reminder details..."})]}):o.jsxs("div",{onContextMenu:kt=>{kt.preventDefault(),kt.stopPropagation(),console.log("Note right-clicked for reminder:",ce.reminder_id),I(ce),V({title:ce.title,body:ce.body,remind_date:ce.remind_date,color:ce.color||"yellow",resolved:ce.resolved||!1}),A(!0)},className:pe.noteDisplay,children:[o.jsx("div",{className:pe.noteTitle,children:o.jsx("span",{className:ce.resolved?pe.noteTitleResolved:"",children:ce.title})}),o.jsxs("div",{className:`${pe.noteDate} ${tr?pe.noteDateOverdue:at?pe.noteDateToday:""}`,children:[o.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(ce.remind_date).toLocaleDateString(),tr&&o.jsx("span",{style:{color:"#dc2626",marginLeft:"0.5rem",fontWeight:"700"},children:"OVERDUE"}),at&&!tr&&o.jsx("span",{style:{color:"#d97706",marginLeft:"0.5rem",fontWeight:"700"},children:"TODAY"})]}),o.jsx("div",{className:`${pe.noteBody} ${ce.resolved?pe.noteBodyResolved:""}`,style:{fontFamily:"Comic Sans MS, cursive, sans-serif"},children:ce.body})]})}),o.jsx("div",{className:pe.noteCorner,children:o.jsx("div",{className:`${pe.noteCornerEffect} ${ke.bg}`})})]})})};return i?o.jsx("div",{className:pe.loading,children:o.jsxs("div",{className:pe.loadingContent,children:[o.jsx("i",{className:`fa-solid fa-spinner fa-spin ${pe.loadingIcon}`}),o.jsx("p",{className:pe.loadingText,children:"Loading reminders..."})]})}):o.jsxs("div",{className:pe.container,children:[o.jsx("div",{className:pe.header,children:o.jsxs("div",{className:pe.title,children:[o.jsxs("h1",{children:[o.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.75rem"}}),"Reminders"]}),o.jsx("p",{children:"Click and drag to move reminders around • Right-click to edit"})]})}),o.jsxs("div",{className:pe.mainContent,children:[o.jsxs("div",{className:pe.dateNavigation,children:[o.jsx("button",{onClick:X,className:pe.navButton,onMouseEnter:()=>{M&&(Ae("Click this arrow to go to the previous day! This helps you navigate through your reminders day by day."),ve(!0))},onMouseLeave:()=>{M&&ve(!1)},children:o.jsx("i",{className:"fa-solid fa-chevron-left"})}),o.jsx("div",{className:pe.currentDate,onClick:()=>ee(!xe),style:{cursor:"pointer"},onMouseEnter:()=>{M&&(Ae("Click on this date to open the calendar modal! You can see all your reminders and navigate to any date quickly."),ve(!0))},onMouseLeave:()=>{M&&ve(!1)},children:P.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),o.jsx("button",{onClick:ge,className:pe.navButton,onMouseEnter:()=>{M&&(Ae("Click this arrow to go to the next day! This helps you navigate through your reminders day by day."),ve(!0))},onMouseLeave:()=>{M&&ve(!1)},children:o.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),xe&&o.jsx("div",{className:pe.calendarModal,onClick:()=>ee(!1),children:o.jsxs("div",{className:pe.calendar,onClick:ce=>ce.stopPropagation(),children:[o.jsxs("div",{className:pe.calendarHeader,children:[o.jsx("button",{onClick:()=>ee(!1),className:pe.calendarCloseButton,children:o.jsx("i",{className:"fa-solid fa-times"})}),o.jsx("button",{onClick:()=>Me("prev"),className:pe.calendarNavButton,children:o.jsx("i",{className:"fa-solid fa-chevron-left"})}),o.jsx("div",{className:pe.calendarTitle,children:re.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),o.jsx("button",{onClick:()=>Me("next"),className:pe.calendarNavButton,children:o.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),o.jsxs("div",{className:pe.calendarGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ce=>o.jsx("div",{className:pe.calendarDayHeader,children:ce},ce)),Pe().map((ce,$e)=>{let ft=pe.calendarDay;return ce.isCurrentMonth?ce.hasReminders&&ce.isToday?ft+=` ${pe.calendarDayWithRemindersToday}`:ce.hasReminders&&ce.isSelected?ft+=` ${pe.calendarDayWithRemindersSelected}`:ce.hasReminders?ft+=` ${pe.calendarDayWithReminders}`:ce.isToday?ft+=` ${pe.calendarDayToday}`:ce.isSelected&&(ft+=` ${pe.calendarDaySelected}`):ft+=` ${pe.calendarDayOtherMonth}`,o.jsxs("div",{className:ft,onClick:()=>qe(ce.date),children:[ce.date.getDate(),ce.hasReminders&&o.jsx("div",{className:pe.calendarReminderCount,children:ce.reminderCount})]},$e)})]})]})}),v&&o.jsx("div",{className:pe.offlineNotice,children:o.jsxs("div",{className:pe.offlineNoticeContent,children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),o.jsxs("div",{children:[o.jsx("strong",{children:"Offline Mode:"})," The reminders table doesn't exist in your database yet. Reminders will work locally but won't be saved permanently.",o.jsx("a",{href:"#",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),style:{textDecoration:"underline",marginLeft:"0.25rem"},children:"Create the table in Supabase"})]})]})}),o.jsxs("div",{className:pe.controls,children:[o.jsxs("button",{onClick:De,className:`${pe.button} ${pe.buttonPrimary}`,onMouseEnter:()=>{M&&(Ae("Click this button to add a new reminder! You can set the title, content, date, and color for your reminder."),ve(!0))},onMouseLeave:()=>{M&&ve(!1)},children:[o.jsx("i",{className:"fa-solid fa-plus-circle"}),o.jsx("span",{style:{marginLeft:"0.5rem"},children:"Add Reminder"})]}),o.jsxs("button",{onClick:()=>{const ce=document.getElementById("sticky-container");if(ce){const $e=ce.getBoundingClientRect();a(r.map(ft=>({...ft,x:Math.random()*($e.width-224)+20,y:Math.random()*($e.height-224)+20,rotation:(Math.random()-.5)*6})))}},className:`${pe.button} ${pe.buttonSecondary}`,onMouseEnter:()=>{M&&(Ae("Click this button to shuffle all your reminders around! This gives them new random positions on the board."),ve(!0))},onMouseLeave:()=>{M&&ve(!1)},children:[o.jsx("i",{className:"fa-solid fa-random"}),o.jsx("span",{style:{marginLeft:"0.5rem"},children:"Shuffle"})]}),o.jsxs("button",{onClick:()=>L(!k),className:`${pe.button} ${k?pe.buttonPrimary:pe.buttonSecondary}`,onMouseEnter:()=>{M&&(Ae(k?"Click to hide completed reminders and focus on what's still pending!":"Click to show all reminders including completed ones!"),ve(!0))},onMouseLeave:()=>{M&&ve(!1)},children:[o.jsx("i",{className:`fa-solid ${k?"fa-eye":"fa-eye-slash"}`}),o.jsx("span",{style:{marginLeft:"0.5rem"},children:k?"Show All":"Hide Completed"})]}),r.length>0&&o.jsxs("button",{onClick:()=>K(!0),className:`${pe.button} ${pe.buttonDanger}`,onMouseEnter:()=>{M&&(Ae("Click this button to remove all reminders at once! Be careful - this action cannot be undone."),ve(!0))},onMouseLeave:()=>{M&&ve(!1)},children:[o.jsx("i",{className:"fa-solid fa-trash-can"}),o.jsx("span",{style:{marginLeft:"0.5rem"},children:"Clear All"})]})]}),o.jsxs("div",{id:"sticky-container",className:pe.notesContainer,style:{minHeight:"600px"},children:[o.jsx("div",{className:pe.gridBackground,children:o.jsx("div",{className:pe.gridPattern})}),Y().map(ce=>o.jsx(Mt,{reminder:ce},ce.reminder_id)),Y().length===0&&o.jsx("div",{className:pe.emptyState,children:o.jsxs("div",{className:pe.emptyStateContent,children:[o.jsx("div",{className:pe.emptyStateIcon,children:o.jsx("i",{className:"fa-solid fa-sticky-note"})}),o.jsx("h3",{className:pe.emptyStateTitle,children:"No reminders for this date"}),o.jsxs("p",{children:['Click "Add Reminder" to create your first reminder for ',P.toLocaleDateString()]})]})}),u&&o.jsxs("div",{className:pe.dragIndicator,children:[o.jsx("i",{className:"fa-solid fa-arrows-up-down-left-right",style:{marginRight:"0.25rem"}}),"Dragging reminder..."]})]}),o.jsx("div",{className:pe.footer,children:o.jsxs("p",{children:[o.jsx("i",{className:"fa-solid fa-lightbulb",style:{marginRight:"0.25rem"}}),"Tips: Shift+Enter for new lines • Escape to cancel editing • Right-click to edit • Drag reminders around freely"]})}),w&&o.jsx("div",{className:pe.modalOverlay,children:o.jsx("div",{className:pe.modal,children:o.jsxs("div",{className:pe.modalHeader,children:[o.jsxs("div",{className:pe.modalTitle,children:[o.jsxs("h2",{children:[o.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Create New Reminder"]}),o.jsx("button",{onClick:ut,className:pe.modalClose,children:o.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),o.jsxs("form",{onSubmit:ce=>{ce.preventDefault(),mt()},className:pe.modalForm,children:[g&&o.jsx("div",{className:pe.errorMessage,children:o.jsxs("div",{className:pe.errorContent,children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),o.jsx("span",{style:{fontSize:"0.875rem"},children:g})]})}),o.jsxs("div",{className:pe.formGroup,children:[o.jsx("label",{htmlFor:"title",className:pe.formLabel,children:"Title *"}),o.jsx("input",{type:"text",id:"title",value:G.title,onChange:ce=>Z({...G,title:ce.target.value}),className:pe.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),o.jsxs("div",{className:pe.formGroup,children:[o.jsx("label",{htmlFor:"remind_date",className:pe.formLabel,children:"Remind Date *"}),o.jsx("input",{type:"date",id:"remind_date",value:G.remind_date,onChange:ce=>Z({...G,remind_date:ce.target.value}),className:pe.formInput,required:!0})]}),o.jsxs("div",{className:pe.formGroup,children:[o.jsx("label",{className:pe.formLabel,children:"Color"}),o.jsx("div",{className:pe.colorSelection,children:Object.entries(W).map(([ce,$e])=>o.jsx("button",{type:"button",onClick:()=>Z({...G,color:ce}),className:`${pe.colorOption} ${$e.bg} ${G.color===ce?pe.colorOptionSelected:""}`,title:ce},ce))})]}),o.jsxs("div",{className:pe.formGroup,children:[o.jsx("label",{htmlFor:"body",className:pe.formLabel,children:"Details *"}),o.jsx("textarea",{id:"body",value:G.body,onChange:ce=>Z({...G,body:ce.target.value}),className:pe.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),G.title&&G.body&&o.jsxs("div",{className:pe.preview,children:[o.jsx("label",{className:pe.previewLabel,children:"Preview"}),o.jsxs("div",{className:`${pe.previewNote} ${W[G.color]?.bg} ${W[G.color]?.border}`,children:[o.jsx("div",{className:pe.previewTitle,children:G.title}),o.jsxs("div",{className:pe.previewDate,children:[o.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(G.remind_date).toLocaleDateString()]}),o.jsx("div",{className:pe.previewBody,children:G.body})]})]}),o.jsxs("div",{className:pe.modalActions,children:[o.jsx("button",{type:"button",onClick:ut,className:`${pe.modalButton} ${pe.modalButtonCancel}`,children:"Cancel"}),o.jsxs("button",{type:"submit",className:`${pe.modalButton} ${pe.modalButtonSubmit}`,children:[o.jsx("i",{className:"fa-solid fa-plus"}),"Create Reminder"]})]})]})]})})}),S&&D&&o.jsx("div",{className:pe.modalOverlay,children:o.jsx("div",{className:pe.modal,children:o.jsxs("div",{className:pe.modalHeader,children:[o.jsxs("div",{className:pe.modalTitle,children:[o.jsxs("h2",{children:[o.jsx("i",{className:"fa-solid fa-edit",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Edit Reminder"]}),o.jsx("button",{onClick:ht,className:pe.modalClose,children:o.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),o.jsxs("form",{onSubmit:ce=>{ce.preventDefault(),At()},className:pe.modalForm,children:[g&&o.jsx("div",{className:pe.errorMessage,children:o.jsxs("div",{className:pe.errorContent,children:[o.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),o.jsx("span",{style:{fontSize:"0.875rem"},children:g})]})}),o.jsxs("div",{className:pe.formGroup,children:[o.jsx("label",{htmlFor:"edit-title",className:pe.formLabel,children:"Title *"}),o.jsx("input",{type:"text",id:"edit-title",value:oe.title,onChange:ce=>V({...oe,title:ce.target.value}),className:pe.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),o.jsxs("div",{className:pe.formGroup,children:[o.jsx("label",{htmlFor:"edit-remind_date",className:pe.formLabel,children:"Remind Date *"}),o.jsx("input",{type:"date",id:"edit-remind_date",value:oe.remind_date,onChange:ce=>V({...oe,remind_date:ce.target.value}),className:pe.formInput,required:!0})]}),o.jsxs("div",{className:pe.formGroup,children:[o.jsx("label",{className:pe.formLabel,children:"Color"}),o.jsx("div",{className:pe.colorSelection,children:Object.entries(W).map(([ce,$e])=>o.jsx("button",{type:"button",onClick:()=>V({...oe,color:ce}),className:`${pe.colorOption} ${$e.bg} ${oe.color===ce?pe.colorOptionSelected:""}`,title:ce},ce))})]}),o.jsxs("div",{className:pe.formGroup,children:[o.jsx("label",{className:pe.formLabel,children:"Status"}),o.jsxs("div",{className:pe.checkboxContainer,children:[o.jsx("input",{type:"checkbox",id:"edit-resolved",checked:oe.resolved,onChange:ce=>V({...oe,resolved:ce.target.checked}),className:pe.formCheckbox}),o.jsxs("label",{htmlFor:"edit-resolved",className:pe.checkboxLabel,children:[o.jsx("i",{className:`fa-solid ${oe.resolved?"fa-check-square":"fa-square"}`,style:{marginRight:"0.5rem"}}),"Mark as completed/resolved"]})]})]}),o.jsxs("div",{className:pe.formGroup,children:[o.jsx("label",{htmlFor:"edit-body",className:pe.formLabel,children:"Details *"}),o.jsx("textarea",{id:"edit-body",value:oe.body,onChange:ce=>V({...oe,body:ce.target.value}),className:pe.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),oe.title&&oe.body&&o.jsxs("div",{className:pe.preview,children:[o.jsx("label",{className:pe.previewLabel,children:"Preview"}),o.jsxs("div",{className:`${pe.previewNote} ${W[oe.color]?.bg} ${W[oe.color]?.border}`,children:[o.jsx("div",{className:pe.previewTitle,children:oe.title}),o.jsxs("div",{className:pe.previewDate,children:[o.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(oe.remind_date).toLocaleDateString()]}),o.jsx("div",{className:pe.previewBody,children:oe.body})]})]}),o.jsxs("div",{className:pe.modalActions,children:[o.jsxs("button",{type:"button",onClick:()=>{Ie(D.reminder_id),ht()},className:`${pe.modalButton} ${pe.modalButtonDanger}`,children:[o.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),o.jsx("button",{type:"button",onClick:ht,className:`${pe.modalButton} ${pe.modalButtonCancel}`,children:"Cancel"}),o.jsxs("button",{type:"submit",className:`${pe.modalButton} ${pe.modalButtonSubmit}`,children:[o.jsx("i",{className:"fa-solid fa-save"}),"Update Reminder"]})]})]})]})})}),ie&&o.jsx("div",{className:pe.confirmationDialog,children:o.jsxs("div",{className:pe.confirmationContent,children:[o.jsxs("div",{className:pe.confirmationHeader,children:[o.jsx("div",{className:pe.confirmationIcon,children:o.jsx("i",{className:"fa-solid fa-exclamation-triangle"})}),o.jsx("h3",{children:"Remove All Reminders"})]}),o.jsx("p",{children:"Are you sure you want to remove all reminders? This action cannot be undone."}),o.jsxs("div",{className:pe.confirmationButtons,children:[o.jsxs("button",{onClick:()=>K(!1),className:`${pe.confirmationButton} ${pe.confirmationButtonCancel}`,children:[o.jsx("i",{className:"fa-solid fa-times",style:{marginRight:"0.5rem"}}),"Cancel"]}),o.jsxs("button",{onClick:Re,className:`${pe.confirmationButton} ${pe.confirmationButtonConfirm}`,children:[o.jsx("i",{className:"fa-solid fa-trash",style:{marginRight:"0.5rem"}}),"Remove All"]})]})]})})]}),o.jsx(tt,{})]})}const wI=()=>{const{isCollapsed:e}=R0();return _3(),o.jsxs("div",{style:{height:"100vh",background:"#f8f9fa",color:"#1a1a1a",display:"flex",overflow:"hidden",backgroundImage:"url(/retailpos/images/backgrounds/u2541828551_An_elegant_illustration_of_a_small_African_corner_5e875dd7-e5d8-4655-af92-bb5c9c2865fd_1.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.05)",zIndex:0}}),o.jsx(T3,{}),o.jsx("main",{style:{flex:1,marginLeft:e?"70px":"200px",padding:"24px",height:"100vh",overflow:"auto",transition:"margin-left 0.3s ease",position:"relative",zIndex:1},children:o.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative",zIndex:1},children:o.jsxs(_y,{children:[o.jsx(ia,{path:"/",element:o.jsx(H3,{})}),o.jsx(ia,{path:"/products",element:o.jsx(bu,{children:o.jsx($3,{})})}),o.jsx(ia,{path:"/sales",element:o.jsx(bu,{requiredPermission:"canProcessSales",children:o.jsx(X3,{})})}),o.jsx(ia,{path:"/side-businesses",element:o.jsx(bu,{children:o.jsx(vj,{})})}),o.jsx(ia,{path:"/transactions",element:o.jsx(bu,{children:o.jsx(kj,{})})}),o.jsx(ia,{path:"/admin",element:o.jsx(vN,{})}),o.jsx(ia,{path:"/reminders",element:o.jsx(SI,{})}),o.jsx(ia,{path:"/transaction/:transactionId",element:o.jsx(jj,{})})]})})})]})},TI=new Kw({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:1}}});function EI(){return o.jsx(Xw,{client:TI,children:o.jsx(p3,{children:o.jsx(x3,{children:o.jsx(y3,{children:o.jsx(m3,{children:o.jsx(b3,{children:o.jsx(mw,{basename:"/retailpos",children:o.jsxs(_y,{children:[o.jsx(ia,{path:"/login",element:o.jsx(iv,{})}),o.jsx(ia,{path:"/verify-email",element:o.jsx(E3,{})}),o.jsx(ia,{path:"/*",element:o.jsx(w3,{children:o.jsx(wI,{})})})]})})})})})})})})}nS.createRoot(document.getElementById("root")).render(o.jsx(dy.StrictMode,{children:o.jsx(EI,{})}));
