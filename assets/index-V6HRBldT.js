(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const u of d)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function i(d){const u={};return d.integrity&&(u.integrity=d.integrity),d.referrerPolicy&&(u.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?u.credentials="include":d.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(d){if(d.ep)return;d.ep=!0;const u=i(d);fetch(d.href,u)}})();function Wd(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function iy(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var r=l.default;if(typeof r=="function"){var i=function o(){var d=!1;try{d=this instanceof o}catch{}return d?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};i.prototype=r.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(l).forEach(function(o){var d=Object.getOwnPropertyDescriptor(l,o);Object.defineProperty(i,o,d.get?d:{enumerable:!0,get:function(){return l[o]}})}),i}var dd={exports:{}},mi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function oy(){if(Dp)return mi;Dp=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(o,d,u){var h=null;if(u!==void 0&&(h=""+u),d.key!==void 0&&(h=""+d.key),"key"in d){u={};for(var p in d)p!=="key"&&(u[p]=d[p])}else u=d;return d=u.ref,{$$typeof:l,type:o,key:h,ref:d!==void 0?d:null,props:u}}return mi.Fragment=r,mi.jsx=i,mi.jsxs=i,mi}var Ap;function ly(){return Ap||(Ap=1,dd.exports=oy()),dd.exports}var n=ly(),ud={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp;function cy(){if(Bp)return Ve;Bp=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.iterator;function E(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,N={};function D(j,K,J){this.props=j,this.context=K,this.refs=N,this.updater=J||k}D.prototype.isReactComponent={},D.prototype.setState=function(j,K){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,K,"setState")},D.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function P(){}P.prototype=D.prototype;function R(j,K,J){this.props=j,this.context=K,this.refs=N,this.updater=J||k}var I=R.prototype=new P;I.constructor=R,T(I,D.prototype),I.isPureReactComponent=!0;var Z=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},le=Object.prototype.hasOwnProperty;function fe(j,K,J,ue,be,Me){return J=Me.ref,{$$typeof:l,type:j,key:K,ref:J!==void 0?J:null,props:Me}}function Se(j,K){return fe(j.type,K,void 0,void 0,void 0,j.props)}function ye(j){return typeof j=="object"&&j!==null&&j.$$typeof===l}function ne(j){var K={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(J){return K[J]})}var X=/\/+/g;function W(j,K){return typeof j=="object"&&j!==null&&j.key!=null?ne(""+j.key):K.toString(36)}function L(){}function oe(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(L,L):(j.status="pending",j.then(function(K){j.status==="pending"&&(j.status="fulfilled",j.value=K)},function(K){j.status==="pending"&&(j.status="rejected",j.reason=K)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function pe(j,K,J,ue,be){var Me=typeof j;(Me==="undefined"||Me==="boolean")&&(j=null);var Ee=!1;if(j===null)Ee=!0;else switch(Me){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(j.$$typeof){case l:case r:Ee=!0;break;case x:return Ee=j._init,pe(Ee(j._payload),K,J,ue,be)}}if(Ee)return be=be(j),Ee=ue===""?"."+W(j,0):ue,Z(be)?(J="",Ee!=null&&(J=Ee.replace(X,"$&/")+"/"),pe(be,K,J,"",function(Ce){return Ce})):be!=null&&(ye(be)&&(be=Se(be,J+(be.key==null||j&&j.key===be.key?"":(""+be.key).replace(X,"$&/")+"/")+Ee)),K.push(be)),1;Ee=0;var Je=ue===""?".":ue+":";if(Z(j))for(var We=0;We<j.length;We++)ue=j[We],Me=Je+W(ue,We),Ee+=pe(ue,K,J,Me,be);else if(We=E(j),typeof We=="function")for(j=We.call(j),We=0;!(ue=j.next()).done;)ue=ue.value,Me=Je+W(ue,We++),Ee+=pe(ue,K,J,Me,be);else if(Me==="object"){if(typeof j.then=="function")return pe(oe(j),K,J,ue,be);throw K=String(j),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function O(j,K,J){if(j==null)return j;var ue=[],be=0;return pe(j,ue,"","",function(Me){return K.call(J,Me,be++)}),ue}function Q(j){if(j._status===-1){var K=j._result;K=K(),K.then(function(J){(j._status===0||j._status===-1)&&(j._status=1,j._result=J)},function(J){(j._status===0||j._status===-1)&&(j._status=2,j._result=J)}),j._status===-1&&(j._status=0,j._result=K)}if(j._status===1)return j._result.default;throw j._result}var he=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function xe(){}return Ve.Children={map:O,forEach:function(j,K,J){O(j,function(){K.apply(this,arguments)},J)},count:function(j){var K=0;return O(j,function(){K++}),K},toArray:function(j){return O(j,function(K){return K})||[]},only:function(j){if(!ye(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ve.Component=D,Ve.Fragment=i,Ve.Profiler=d,Ve.PureComponent=R,Ve.StrictMode=o,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(j){return Y.H.useMemoCache(j)}},Ve.cache=function(j){return function(){return j.apply(null,arguments)}},Ve.cloneElement=function(j,K,J){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ue=T({},j.props),be=j.key,Me=void 0;if(K!=null)for(Ee in K.ref!==void 0&&(Me=void 0),K.key!==void 0&&(be=""+K.key),K)!le.call(K,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&K.ref===void 0||(ue[Ee]=K[Ee]);var Ee=arguments.length-2;if(Ee===1)ue.children=J;else if(1<Ee){for(var Je=Array(Ee),We=0;We<Ee;We++)Je[We]=arguments[We+2];ue.children=Je}return fe(j.type,be,void 0,void 0,Me,ue)},Ve.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:u,_context:j},j},Ve.createElement=function(j,K,J){var ue,be={},Me=null;if(K!=null)for(ue in K.key!==void 0&&(Me=""+K.key),K)le.call(K,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(be[ue]=K[ue]);var Ee=arguments.length-2;if(Ee===1)be.children=J;else if(1<Ee){for(var Je=Array(Ee),We=0;We<Ee;We++)Je[We]=arguments[We+2];be.children=Je}if(j&&j.defaultProps)for(ue in Ee=j.defaultProps,Ee)be[ue]===void 0&&(be[ue]=Ee[ue]);return fe(j,Me,void 0,void 0,null,be)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(j){return{$$typeof:p,render:j}},Ve.isValidElement=ye,Ve.lazy=function(j){return{$$typeof:x,_payload:{_status:-1,_result:j},_init:Q}},Ve.memo=function(j,K){return{$$typeof:m,type:j,compare:K===void 0?null:K}},Ve.startTransition=function(j){var K=Y.T,J={};Y.T=J;try{var ue=j(),be=Y.S;be!==null&&be(J,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(xe,he)}catch(Me){he(Me)}finally{Y.T=K}},Ve.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},Ve.use=function(j){return Y.H.use(j)},Ve.useActionState=function(j,K,J){return Y.H.useActionState(j,K,J)},Ve.useCallback=function(j,K){return Y.H.useCallback(j,K)},Ve.useContext=function(j){return Y.H.useContext(j)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(j,K){return Y.H.useDeferredValue(j,K)},Ve.useEffect=function(j,K,J){var ue=Y.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(j,K)},Ve.useId=function(){return Y.H.useId()},Ve.useImperativeHandle=function(j,K,J){return Y.H.useImperativeHandle(j,K,J)},Ve.useInsertionEffect=function(j,K){return Y.H.useInsertionEffect(j,K)},Ve.useLayoutEffect=function(j,K){return Y.H.useLayoutEffect(j,K)},Ve.useMemo=function(j,K){return Y.H.useMemo(j,K)},Ve.useOptimistic=function(j,K){return Y.H.useOptimistic(j,K)},Ve.useReducer=function(j,K,J){return Y.H.useReducer(j,K,J)},Ve.useRef=function(j){return Y.H.useRef(j)},Ve.useState=function(j){return Y.H.useState(j)},Ve.useSyncExternalStore=function(j,K,J){return Y.H.useSyncExternalStore(j,K,J)},Ve.useTransition=function(){return Y.H.useTransition()},Ve.version="19.1.1",Ve}var Mp;function Hd(){return Mp||(Mp=1,ud.exports=cy()),ud.exports}var v=Hd();const _g=Wd(v);var fd={exports:{}},xi={},hd={exports:{}},pd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op;function dy(){return Op||(Op=1,(function(l){function r(O,Q){var he=O.length;O.push(Q);e:for(;0<he;){var xe=he-1>>>1,j=O[xe];if(0<d(j,Q))O[xe]=Q,O[he]=j,he=xe;else break e}}function i(O){return O.length===0?null:O[0]}function o(O){if(O.length===0)return null;var Q=O[0],he=O.pop();if(he!==Q){O[0]=he;e:for(var xe=0,j=O.length,K=j>>>1;xe<K;){var J=2*(xe+1)-1,ue=O[J],be=J+1,Me=O[be];if(0>d(ue,he))be<j&&0>d(Me,ue)?(O[xe]=Me,O[be]=he,xe=be):(O[xe]=ue,O[J]=he,xe=J);else if(be<j&&0>d(Me,he))O[xe]=Me,O[be]=he,xe=be;else break e}}return Q}function d(O,Q){var he=O.sortIndex-Q.sortIndex;return he!==0?he:O.id-Q.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;l.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();l.unstable_now=function(){return h.now()-p}}var g=[],m=[],x=1,S=null,E=3,k=!1,T=!1,N=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function Z(O){for(var Q=i(m);Q!==null;){if(Q.callback===null)o(m);else if(Q.startTime<=O)o(m),Q.sortIndex=Q.expirationTime,r(g,Q);else break;Q=i(m)}}function Y(O){if(N=!1,Z(O),!T)if(i(g)!==null)T=!0,le||(le=!0,W());else{var Q=i(m);Q!==null&&pe(Y,Q.startTime-O)}}var le=!1,fe=-1,Se=5,ye=-1;function ne(){return D?!0:!(l.unstable_now()-ye<Se)}function X(){if(D=!1,le){var O=l.unstable_now();ye=O;var Q=!0;try{e:{T=!1,N&&(N=!1,R(fe),fe=-1),k=!0;var he=E;try{t:{for(Z(O),S=i(g);S!==null&&!(S.expirationTime>O&&ne());){var xe=S.callback;if(typeof xe=="function"){S.callback=null,E=S.priorityLevel;var j=xe(S.expirationTime<=O);if(O=l.unstable_now(),typeof j=="function"){S.callback=j,Z(O),Q=!0;break t}S===i(g)&&o(g),Z(O)}else o(g);S=i(g)}if(S!==null)Q=!0;else{var K=i(m);K!==null&&pe(Y,K.startTime-O),Q=!1}}break e}finally{S=null,E=he,k=!1}Q=void 0}}finally{Q?W():le=!1}}}var W;if(typeof I=="function")W=function(){I(X)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,oe=L.port2;L.port1.onmessage=X,W=function(){oe.postMessage(null)}}else W=function(){P(X,0)};function pe(O,Q){fe=P(function(){O(l.unstable_now())},Q)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(O){O.callback=null},l.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<O?Math.floor(1e3/O):5},l.unstable_getCurrentPriorityLevel=function(){return E},l.unstable_next=function(O){switch(E){case 1:case 2:case 3:var Q=3;break;default:Q=E}var he=E;E=Q;try{return O()}finally{E=he}},l.unstable_requestPaint=function(){D=!0},l.unstable_runWithPriority=function(O,Q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var he=E;E=O;try{return Q()}finally{E=he}},l.unstable_scheduleCallback=function(O,Q,he){var xe=l.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?xe+he:xe):he=xe,O){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=he+j,O={id:x++,callback:Q,priorityLevel:O,startTime:he,expirationTime:j,sortIndex:-1},he>xe?(O.sortIndex=he,r(m,O),i(g)===null&&O===i(m)&&(N?(R(fe),fe=-1):N=!0,pe(Y,he-xe))):(O.sortIndex=j,r(g,O),T||k||(T=!0,le||(le=!0,W()))),O},l.unstable_shouldYield=ne,l.unstable_wrapCallback=function(O){var Q=E;return function(){var he=E;E=Q;try{return O.apply(this,arguments)}finally{E=he}}}})(pd)),pd}var Ip;function uy(){return Ip||(Ip=1,hd.exports=dy()),hd.exports}var gd={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp;function fy(){if(Lp)return en;Lp=1;var l=Hd();function r(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},d=Symbol.for("react.portal");function u(g,m,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:S==null?null:""+S,children:g,containerInfo:m,implementation:x}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,en.createPortal=function(g,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(r(299));return u(g,m,null,x)},en.flushSync=function(g){var m=h.T,x=o.p;try{if(h.T=null,o.p=2,g)return g()}finally{h.T=m,o.p=x,o.d.f()}},en.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},en.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},en.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var x=m.as,S=p(x,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,k=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:S,integrity:E,fetchPriority:k}):x==="script"&&o.d.X(g,{crossOrigin:S,integrity:E,fetchPriority:k,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},en.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=p(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},en.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,S=p(x,m.crossOrigin);o.d.L(g,x,{crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},en.preloadModule=function(g,m){if(typeof g=="string")if(m){var x=p(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},en.requestFormReset=function(g){o.d.r(g)},en.unstable_batchedUpdates=function(g,m){return g(m)},en.useFormState=function(g,m,x){return h.H.useFormState(g,m,x)},en.useFormStatus=function(){return h.H.useHostTransitionStatus()},en.version="19.1.1",en}var Up;function hy(){if(Up)return gd.exports;Up=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),gd.exports=fy(),gd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function py(){if(Pp)return xi;Pp=1;var l=uy(),r=Hd(),i=hy();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,s=t;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(s=c.return,s!==null){a=s;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return p(c),e;if(f===s)return p(c),t;f=f.sibling}throw Error(o(188))}if(a.return!==s.return)a=c,s=f;else{for(var b=!1,_=c.child;_;){if(_===a){b=!0,a=c,s=f;break}if(_===s){b=!0,s=c,a=f;break}_=_.sibling}if(!b){for(_=f.child;_;){if(_===a){b=!0,a=f,s=c;break}if(_===s){b=!0,s=f,a=c;break}_=_.sibling}if(!b)throw Error(o(189))}}if(a.alternate!==s)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function m(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=m(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),I=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),ye=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=X&&e[X]||e["@@iterator"],typeof e=="function"?e:null)}var L=Symbol.for("react.client.reference");function oe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===L?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case D:return"Profiler";case N:return"StrictMode";case Y:return"Suspense";case le:return"SuspenseList";case ye:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case I:return(e.displayName||"Context")+".Provider";case R:return(e._context.displayName||"Context")+".Consumer";case Z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fe:return t=e.displayName||null,t!==null?t:oe(e.type)||"Memo";case Se:t=e._payload,e=e._init;try{return oe(e(t))}catch{}}return null}var pe=Array.isArray,O=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},xe=[],j=-1;function K(e){return{current:e}}function J(e){0>j||(e.current=xe[j],xe[j]=null,j--)}function ue(e,t){j++,xe[j]=e.current,e.current=t}var be=K(null),Me=K(null),Ee=K(null),Je=K(null);function We(e,t){switch(ue(Ee,t),ue(Me,e),ue(be,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ip(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ip(t),e=op(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(be),ue(be,e)}function Ce(){J(be),J(Me),J(Ee)}function ze(e){e.memoizedState!==null&&ue(Je,e);var t=be.current,a=op(t,e.type);t!==a&&(ue(Me,e),ue(be,a))}function de(e){Me.current===e&&(J(be),J(Me)),Je.current===e&&(J(Je),ui._currentValue=he)}var ge=Object.prototype.hasOwnProperty,Ne=l.unstable_scheduleCallback,A=l.unstable_cancelCallback,ee=l.unstable_shouldYield,Le=l.unstable_requestPaint,qe=l.unstable_now,mt=l.unstable_getCurrentPriorityLevel,ct=l.unstable_ImmediatePriority,on=l.unstable_UserBlockingPriority,zt=l.unstable_NormalPriority,Gt=l.unstable_LowPriority,tn=l.unstable_IdlePriority,nn=l.log,jn=l.unstable_setDisableYieldValue,q=null,me=null;function je(e){if(typeof nn=="function"&&jn(e),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(q,e)}catch{}}var Fe=Math.clz32?Math.clz32:Dt,st=Math.log,Et=Math.LN2;function Dt(e){return e>>>=0,e===0?32:31-(st(e)/Et|0)|0}var jt=256,$t=4194304;function _t(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function y(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var c=0,f=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var _=s&134217727;return _!==0?(s=_&~f,s!==0?c=_t(s):(b&=_,b!==0?c=_t(b):a||(a=_&~e,a!==0&&(c=_t(a))))):(_=s&~f,_!==0?c=_t(_):b!==0?c=_t(b):a||(a=s&~e,a!==0&&(c=_t(a)))),c===0?0:t!==0&&t!==c&&(t&f)===0&&(f=c&-c,a=t&-t,f>=a||f===32&&(a&4194048)!==0)?t:c}function M(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function te(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ke(){var e=jt;return jt<<=1,(jt&4194048)===0&&(jt=256),e}function Oe(){var e=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),e}function Be(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Xe(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function He(e,t,a,s,c,f){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,z=e.expirationTimes,F=e.hiddenUpdates;for(a=b&~a;0<a;){var ae=31-Fe(a),ce=1<<ae;_[ae]=0,z[ae]=-1;var G=F[ae];if(G!==null)for(F[ae]=null,ae=0;ae<G.length;ae++){var V=G[ae];V!==null&&(V.lane&=-536870913)}a&=~ce}s!==0&&Zt(e,s,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(b&~t))}function Zt(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Fe(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&4194090}function Ie(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-Fe(a),c=1<<s;c&t|e[s]&t&&(e[s]|=t),a&=~c}}function kn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ye(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function an(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:Cp(e.type))}function pn(e,t){var a=Q.p;try{return Q.p=e,t()}finally{Q.p=a}}var gn=Math.random().toString(36).slice(2),xt="__reactFiber$"+gn,Vt="__reactProps$"+gn,ln="__reactContainer$"+gn,br="__reactEvents$"+gn,vr="__reactListeners$"+gn,ol="__reactHandles$"+gn,On="__reactResources$"+gn,Qa="__reactMarker$"+gn;function ba(e){delete e[xt],delete e[Vt],delete e[br],delete e[vr],delete e[ol]}function va(e){var t=e[xt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[ln]||a[xt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=up(e);e!==null;){if(a=e[xt])return a;e=up(e)}return t}e=a,a=e.parentNode}return null}function _a(e){if(e=e[xt]||e[ln]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Xa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Sa(e){var t=e[On];return t||(t=e[On]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function At(e){e[Qa]=!0}var zi=new Set,Di={};function Zn(e,t){wa(e,t),wa(e+"Capture",t)}function wa(e,t){for(Di[e]=t,e=0;e<t.length;e++)zi.add(t[e])}var Ai=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bi={},_r={};function Mi(e){return ge.call(_r,e)?!0:ge.call(Bi,e)?!1:Ai.test(e)?_r[e]=!0:(Bi[e]=!0,!1)}function _s(e,t,a){if(Mi(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Za(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Cn(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}var Sr,Ss;function Jn(e){if(Sr===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Sr=t&&t[1]||"",Ss=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sr+e+Ss}var wr=!1;function ws(e,t){if(!e||wr)return"";wr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(V){var G=V}Reflect.construct(e,[],ce)}else{try{ce.call()}catch(V){G=V}e.call(ce.prototype)}}else{try{throw Error()}catch(V){G=V}(ce=e())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(V){if(V&&G&&typeof V.stack=="string")return[V.stack,G.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=s.DetermineComponentFrameRoot(),b=f[0],_=f[1];if(b&&_){var z=b.split(`
`),F=_.split(`
`);for(c=s=0;s<z.length&&!z[s].includes("DetermineComponentFrameRoot");)s++;for(;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;if(s===z.length||c===F.length)for(s=z.length-1,c=F.length-1;1<=s&&0<=c&&z[s]!==F[c];)c--;for(;1<=s&&0<=c;s--,c--)if(z[s]!==F[c]){if(s!==1||c!==1)do if(s--,c--,0>c||z[s]!==F[c]){var ae=`
`+z[s].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=s&&0<=c);break}}}finally{wr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Jn(a):""}function Oi(e){switch(e.tag){case 26:case 27:case 5:return Jn(e.type);case 16:return Jn("Lazy");case 13:return Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 15:return ws(e.type,!1);case 11:return ws(e.type.render,!1);case 1:return ws(e.type,!0);case 31:return Jn("Activity");default:return""}}function Ii(e){try{var t="";do t+=Oi(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function cn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Li(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function C(e){var t=Li(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(b){s=""+b,f.call(this,b)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(b){s=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function re(e){e._valueTracker||(e._valueTracker=C(e))}function Te(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Li(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function _e(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ve=/[\n"\\]/g;function we(e){return e.replace(ve,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ae(e,t,a,s,c,f,b,_){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+cn(t)):e.value!==""+cn(t)&&(e.value=""+cn(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?ft(e,b,cn(t)):a!=null?ft(e,b,cn(a)):s!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+cn(_):e.removeAttribute("name")}function Ke(e,t,a,s,c,f,b,_){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;a=a!=null?""+cn(a):"",t=t!=null?""+cn(t):a,_||t===e.value||(e.value=t),e.defaultValue=t}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=_?e.checked:!!s,e.defaultChecked=!!s,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function ft(e,t,a){t==="number"&&_e(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function it(e,t,a,s){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&s&&(e[a].defaultSelected=!0)}else{for(a=""+cn(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function et(e,t,a){if(t!=null&&(t=""+cn(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+cn(a):""}function Ot(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(o(92));if(pe(s)){if(1<s.length)throw Error(o(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=cn(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s)}function Tn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var ll=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function js(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||ll.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function iu(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in t)s=t[c],t.hasOwnProperty(c)&&a[c]!==s&&js(e,c,s)}else for(var f in t)t.hasOwnProperty(f)&&js(e,f,t[f])}function cl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ui(e){return rm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var dl=null;function ul(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ks=null,Cs=null;function ou(e){var t=_a(e);if(t&&(e=t.stateNode)){var a=e[Vt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ae(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+we(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var c=s[Vt]||null;if(!c)throw Error(o(90));Ae(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Te(s)}break e;case"textarea":et(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&it(e,!!a.multiple,t,!1)}}}var fl=!1;function lu(e,t,a){if(fl)return e(t,a);fl=!0;try{var s=e(t);return s}finally{if(fl=!1,(ks!==null||Cs!==null)&&(ko(),ks&&(t=ks,e=Cs,Cs=ks=null,ou(t),e)))for(t=0;t<e.length;t++)ou(e[t])}}function jr(e,t){var a=e.stateNode;if(a===null)return null;var s=a[Vt]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hl=!1;if(ea)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){hl=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{hl=!1}var ja=null,pl=null,Pi=null;function cu(){if(Pi)return Pi;var e,t=pl,a=t.length,s,c="value"in ja?ja.value:ja.textContent,f=c.length;for(e=0;e<a&&t[e]===c[e];e++);var b=a-e;for(s=1;s<=b&&t[a-s]===c[f-s];s++);return Pi=c.slice(e,1<s?1-s:void 0)}function qi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $i(){return!0}function du(){return!1}function dn(e){function t(a,s,c,f,b){this._reactName=a,this._targetInst=c,this.type=s,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?$i:du,this.isPropagationStopped=du,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),t}var Ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wi=dn(Ja),Cr=x({},Ja,{view:0,detail:0}),im=dn(Cr),gl,ml,Tr,Hi=x({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tr&&(Tr&&e.type==="mousemove"?(gl=e.screenX-Tr.screenX,ml=e.screenY-Tr.screenY):ml=gl=0,Tr=e),gl)},movementY:function(e){return"movementY"in e?e.movementY:ml}}),uu=dn(Hi),om=x({},Hi,{dataTransfer:0}),lm=dn(om),cm=x({},Cr,{relatedTarget:0}),xl=dn(cm),dm=x({},Ja,{animationName:0,elapsedTime:0,pseudoElement:0}),um=dn(dm),fm=x({},Ja,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hm=dn(fm),pm=x({},Ja,{data:0}),fu=dn(pm),gm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ym(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xm[e])?!!t[e]:!1}function yl(){return ym}var bm=x({},Cr,{key:function(e){if(e.key){var t=gm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yl,charCode:function(e){return e.type==="keypress"?qi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vm=dn(bm),_m=x({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hu=dn(_m),Sm=x({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yl}),wm=dn(Sm),jm=x({},Ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),km=dn(jm),Cm=x({},Hi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tm=dn(Cm),Em=x({},Ja,{newState:0,oldState:0}),Rm=dn(Em),Nm=[9,13,27,32],bl=ea&&"CompositionEvent"in window,Er=null;ea&&"documentMode"in document&&(Er=document.documentMode);var zm=ea&&"TextEvent"in window&&!Er,pu=ea&&(!bl||Er&&8<Er&&11>=Er),gu=" ",mu=!1;function xu(e,t){switch(e){case"keyup":return Nm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ts=!1;function Dm(e,t){switch(e){case"compositionend":return yu(t);case"keypress":return t.which!==32?null:(mu=!0,gu);case"textInput":return e=t.data,e===gu&&mu?null:e;default:return null}}function Am(e,t){if(Ts)return e==="compositionend"||!bl&&xu(e,t)?(e=cu(),Pi=pl=ja=null,Ts=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pu&&t.locale!=="ko"?null:t.data;default:return null}}var Bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bm[e.type]:t==="textarea"}function vu(e,t,a,s){ks?Cs?Cs.push(s):Cs=[s]:ks=s,t=zo(t,"onChange"),0<t.length&&(a=new Wi("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Rr=null,Nr=null;function Mm(e){tp(e,0)}function Fi(e){var t=Xa(e);if(Te(t))return e}function _u(e,t){if(e==="change")return t}var Su=!1;if(ea){var vl;if(ea){var _l="oninput"in document;if(!_l){var wu=document.createElement("div");wu.setAttribute("oninput","return;"),_l=typeof wu.oninput=="function"}vl=_l}else vl=!1;Su=vl&&(!document.documentMode||9<document.documentMode)}function ju(){Rr&&(Rr.detachEvent("onpropertychange",ku),Nr=Rr=null)}function ku(e){if(e.propertyName==="value"&&Fi(Nr)){var t=[];vu(t,Nr,e,ul(e)),lu(Mm,t)}}function Om(e,t,a){e==="focusin"?(ju(),Rr=t,Nr=a,Rr.attachEvent("onpropertychange",ku)):e==="focusout"&&ju()}function Im(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fi(Nr)}function Lm(e,t){if(e==="click")return Fi(t)}function Um(e,t){if(e==="input"||e==="change")return Fi(t)}function Pm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mn=typeof Object.is=="function"?Object.is:Pm;function zr(e,t){if(mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var c=a[s];if(!ge.call(t,c)||!mn(e[c],t[c]))return!1}return!0}function Cu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tu(e,t){var a=Cu(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Cu(a)}}function Eu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Eu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ru(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_e(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=_e(e.document)}return t}function Sl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var qm=ea&&"documentMode"in document&&11>=document.documentMode,Es=null,wl=null,Dr=null,jl=!1;function Nu(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jl||Es==null||Es!==_e(s)||(s=Es,"selectionStart"in s&&Sl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Dr&&zr(Dr,s)||(Dr=s,s=zo(wl,"onSelect"),0<s.length&&(t=new Wi("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Es)))}function es(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Rs={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},kl={},zu={};ea&&(zu=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function ts(e){if(kl[e])return kl[e];if(!Rs[e])return e;var t=Rs[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in zu)return kl[e]=t[a];return e}var Du=ts("animationend"),Au=ts("animationiteration"),Bu=ts("animationstart"),$m=ts("transitionrun"),Wm=ts("transitionstart"),Hm=ts("transitioncancel"),Mu=ts("transitionend"),Ou=new Map,Cl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cl.push("scrollEnd");function In(e,t){Ou.set(e,t),Zn(t,[e])}var Iu=new WeakMap;function En(e,t){if(typeof e=="object"&&e!==null){var a=Iu.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ii(t)},Iu.set(e,t),t)}return{value:e,source:t,stack:Ii(t)}}var Rn=[],Ns=0,Tl=0;function Yi(){for(var e=Ns,t=Tl=Ns=0;t<e;){var a=Rn[t];Rn[t++]=null;var s=Rn[t];Rn[t++]=null;var c=Rn[t];Rn[t++]=null;var f=Rn[t];if(Rn[t++]=null,s!==null&&c!==null){var b=s.pending;b===null?c.next=c:(c.next=b.next,b.next=c),s.pending=c}f!==0&&Lu(a,c,f)}}function Gi(e,t,a,s){Rn[Ns++]=e,Rn[Ns++]=t,Rn[Ns++]=a,Rn[Ns++]=s,Tl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function El(e,t,a,s){return Gi(e,t,a,s),Vi(e)}function zs(e,t){return Gi(e,null,null,t),Vi(e)}function Lu(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var c=!1,f=e.return;f!==null;)f.childLanes|=a,s=f.alternate,s!==null&&(s.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&t!==null&&(c=31-Fe(a),e=f.hiddenUpdates,s=e[c],s===null?e[c]=[t]:s.push(t),t.lane=a|536870912),f):null}function Vi(e){if(50<ai)throw ai=0,Bc=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ds={};function Fm(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,t,a,s){return new Fm(e,t,a,s)}function Rl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ta(e,t){var a=e.alternate;return a===null?(a=xn(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Uu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ki(e,t,a,s,c,f){var b=0;if(s=e,typeof e=="function")Rl(e)&&(b=1);else if(typeof e=="string")b=Gx(e,a,be.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ye:return e=xn(31,a,t,c),e.elementType=ye,e.lanes=f,e;case T:return ns(a.children,c,f,t);case N:b=8,c|=24;break;case D:return e=xn(12,a,t,c|2),e.elementType=D,e.lanes=f,e;case Y:return e=xn(13,a,t,c),e.elementType=Y,e.lanes=f,e;case le:return e=xn(19,a,t,c),e.elementType=le,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:case I:b=10;break e;case R:b=9;break e;case Z:b=11;break e;case fe:b=14;break e;case Se:b=16,s=null;break e}b=29,a=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=xn(b,a,t,c),t.elementType=e,t.type=s,t.lanes=f,t}function ns(e,t,a,s){return e=xn(7,e,s,t),e.lanes=a,e}function Nl(e,t,a){return e=xn(6,e,null,t),e.lanes=a,e}function zl(e,t,a){return t=xn(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var As=[],Bs=0,Qi=null,Xi=0,Nn=[],zn=0,as=null,na=1,aa="";function ss(e,t){As[Bs++]=Xi,As[Bs++]=Qi,Qi=e,Xi=t}function Pu(e,t,a){Nn[zn++]=na,Nn[zn++]=aa,Nn[zn++]=as,as=e;var s=na;e=aa;var c=32-Fe(s)-1;s&=~(1<<c),a+=1;var f=32-Fe(t)+c;if(30<f){var b=c-c%5;f=(s&(1<<b)-1).toString(32),s>>=b,c-=b,na=1<<32-Fe(t)+c|a<<c|s,aa=f+e}else na=1<<f|a<<c|s,aa=e}function Dl(e){e.return!==null&&(ss(e,1),Pu(e,1,0))}function Al(e){for(;e===Qi;)Qi=As[--Bs],As[Bs]=null,Xi=As[--Bs],As[Bs]=null;for(;e===as;)as=Nn[--zn],Nn[zn]=null,aa=Nn[--zn],Nn[zn]=null,na=Nn[--zn],Nn[zn]=null}var sn=null,Ct=null,lt=!1,rs=null,Fn=!1,Bl=Error(o(519));function is(e){var t=Error(o(418,""));throw Mr(En(t,e)),Bl}function qu(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[xt]=e,t[Vt]=s,a){case"dialog":nt("cancel",t),nt("close",t);break;case"iframe":case"object":case"embed":nt("load",t);break;case"video":case"audio":for(a=0;a<ri.length;a++)nt(ri[a],t);break;case"source":nt("error",t);break;case"img":case"image":case"link":nt("error",t),nt("load",t);break;case"details":nt("toggle",t);break;case"input":nt("invalid",t),Ke(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),re(t);break;case"select":nt("invalid",t);break;case"textarea":nt("invalid",t),Ot(t,s.value,s.defaultValue,s.children),re(t)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||rp(t.textContent,a)?(s.popover!=null&&(nt("beforetoggle",t),nt("toggle",t)),s.onScroll!=null&&nt("scroll",t),s.onScrollEnd!=null&&nt("scrollend",t),s.onClick!=null&&(t.onclick=Do),t=!0):t=!1,t||is(e)}function $u(e){for(sn=e.return;sn;)switch(sn.tag){case 5:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:sn=sn.return}}function Ar(e){if(e!==sn)return!1;if(!lt)return $u(e),lt=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Qc(e.type,e.memoizedProps)),a=!a),a&&Ct&&is(e),$u(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Ct=Un(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Ct=null}}else t===27?(t=Ct,Pa(e.type)?(e=ed,ed=null,Ct=e):Ct=t):Ct=sn?Un(e.stateNode.nextSibling):null;return!0}function Br(){Ct=sn=null,lt=!1}function Wu(){var e=rs;return e!==null&&(hn===null?hn=e:hn.push.apply(hn,e),rs=null),e}function Mr(e){rs===null?rs=[e]:rs.push(e)}var Ml=K(null),os=null,sa=null;function ka(e,t,a){ue(Ml,t._currentValue),t._currentValue=a}function ra(e){e._currentValue=Ml.current,J(Ml)}function Ol(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Il(e,t,a,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var b=c.child;f=f.firstContext;e:for(;f!==null;){var _=f;f=c;for(var z=0;z<t.length;z++)if(_.context===t[z]){f.lanes|=a,_=f.alternate,_!==null&&(_.lanes|=a),Ol(f.return,a,e),s||(b=null);break e}f=_.next}}else if(c.tag===18){if(b=c.return,b===null)throw Error(o(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),Ol(b,a,e),b=null}else b=c.child;if(b!==null)b.return=c;else for(b=c;b!==null;){if(b===e){b=null;break}if(c=b.sibling,c!==null){c.return=b.return,b=c;break}b=b.return}c=b}}function Or(e,t,a,s){e=null;for(var c=t,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var b=c.alternate;if(b===null)throw Error(o(387));if(b=b.memoizedProps,b!==null){var _=c.type;mn(c.pendingProps.value,b.value)||(e!==null?e.push(_):e=[_])}}else if(c===Je.current){if(b=c.alternate,b===null)throw Error(o(387));b.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(ui):e=[ui])}c=c.return}e!==null&&Il(t,e,a,s),t.flags|=262144}function Zi(e){for(e=e.firstContext;e!==null;){if(!mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ls(e){os=e,sa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Jt(e){return Hu(os,e)}function Ji(e,t){return os===null&&ls(e),Hu(e,t)}function Hu(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},sa===null){if(e===null)throw Error(o(308));sa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else sa=sa.next=t;return a}var Ym=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Gm=l.unstable_scheduleCallback,Vm=l.unstable_NormalPriority,It={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ll(){return{controller:new Ym,data:new Map,refCount:0}}function Ir(e){e.refCount--,e.refCount===0&&Gm(Vm,function(){e.controller.abort()})}var Lr=null,Ul=0,Ms=0,Os=null;function Km(e,t){if(Lr===null){var a=Lr=[];Ul=0,Ms=qc(),Os={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Ul++,t.then(Fu,Fu),t}function Fu(){if(--Ul===0&&Lr!==null){Os!==null&&(Os.status="fulfilled");var e=Lr;Lr=null,Ms=0,Os=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Qm(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(s.status="rejected",s.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),s}var Yu=O.S;O.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Km(e,t),Yu!==null&&Yu(e,t)};var cs=K(null);function Pl(){var e=cs.current;return e!==null?e:bt.pooledCache}function eo(e,t){t===null?ue(cs,cs.current):ue(cs,t.pool)}function Gu(){var e=Pl();return e===null?null:{parent:It._currentValue,pool:e}}var Ur=Error(o(460)),Vu=Error(o(474)),to=Error(o(542)),ql={then:function(){}};function Ku(e){return e=e.status,e==="fulfilled"||e==="rejected"}function no(){}function Qu(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(no,no),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zu(e),e;default:if(typeof t.status=="string")t.then(no,no);else{if(e=bt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=s}},function(s){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zu(e),e}throw Pr=t,Ur}}var Pr=null;function Xu(){if(Pr===null)throw Error(o(459));var e=Pr;return Pr=null,e}function Zu(e){if(e===Ur||e===to)throw Error(o(483))}var Ca=!1;function $l(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ta(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ea(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(dt&2)!==0){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,t=Vi(e),Lu(e,null,a),t}return Gi(e,s,t,a),Vi(e)}function qr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Ie(e,a)}}function Hl(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?c=f=t:f=f.next=t}else c=f=t;a={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Fl=!1;function $r(){if(Fl){var e=Os;if(e!==null)throw e}}function Wr(e,t,a,s){Fl=!1;var c=e.updateQueue;Ca=!1;var f=c.firstBaseUpdate,b=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var z=_,F=z.next;z.next=null,b===null?f=F:b.next=F,b=z;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,_=ae.lastBaseUpdate,_!==b&&(_===null?ae.firstBaseUpdate=F:_.next=F,ae.lastBaseUpdate=z))}if(f!==null){var ce=c.baseState;b=0,ae=F=z=null,_=f;do{var G=_.lane&-536870913,V=G!==_.lane;if(V?(rt&G)===G:(s&G)===G){G!==0&&G===Ms&&(Fl=!0),ae!==null&&(ae=ae.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var $e=e,Ue=_;G=t;var gt=a;switch(Ue.tag){case 1:if($e=Ue.payload,typeof $e=="function"){ce=$e.call(gt,ce,G);break e}ce=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Ue.payload,G=typeof $e=="function"?$e.call(gt,ce,G):$e,G==null)break e;ce=x({},ce,G);break e;case 2:Ca=!0}}G=_.callback,G!==null&&(e.flags|=64,V&&(e.flags|=8192),V=c.callbacks,V===null?c.callbacks=[G]:V.push(G))}else V={lane:G,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ae===null?(F=ae=V,z=ce):ae=ae.next=V,b|=G;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;V=_,_=V.next,V.next=null,c.lastBaseUpdate=V,c.shared.pending=null}}while(!0);ae===null&&(z=ce),c.baseState=z,c.firstBaseUpdate=F,c.lastBaseUpdate=ae,f===null&&(c.shared.lanes=0),Oa|=b,e.lanes=b,e.memoizedState=ce}}function Ju(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function ef(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ju(a[e],t)}var Is=K(null),ao=K(0);function tf(e,t){e=fa,ue(ao,e),ue(Is,t),fa=e|t.baseLanes}function Yl(){ue(ao,fa),ue(Is,Is.current)}function Gl(){fa=ao.current,J(Is),J(ao)}var Ra=0,Qe=null,ht=null,Bt=null,so=!1,Ls=!1,ds=!1,ro=0,Hr=0,Us=null,Xm=0;function Rt(){throw Error(o(321))}function Vl(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!mn(e[a],t[a]))return!1;return!0}function Kl(e,t,a,s,c,f){return Ra=f,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=e===null||e.memoizedState===null?Uf:Pf,ds=!1,f=a(s,c),ds=!1,Ls&&(f=af(t,a,s,c)),nf(e),f}function nf(e){O.H=fo;var t=ht!==null&&ht.next!==null;if(Ra=0,Bt=ht=Qe=null,so=!1,Hr=0,Us=null,t)throw Error(o(300));e===null||Wt||(e=e.dependencies,e!==null&&Zi(e)&&(Wt=!0))}function af(e,t,a,s){Qe=e;var c=0;do{if(Ls&&(Us=null),Hr=0,Ls=!1,25<=c)throw Error(o(301));if(c+=1,Bt=ht=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}O.H=sx,f=t(a,s)}while(Ls);return f}function Zm(){var e=O.H,t=e.useState()[0];return t=typeof t.then=="function"?Fr(t):t,e=e.useState()[0],(ht!==null?ht.memoizedState:null)!==e&&(Qe.flags|=1024),t}function Ql(){var e=ro!==0;return ro=0,e}function Xl(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Zl(e){if(so){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}so=!1}Ra=0,Bt=ht=Qe=null,Ls=!1,Hr=ro=0,Us=null}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Qe.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function Mt(){if(ht===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var t=Bt===null?Qe.memoizedState:Bt.next;if(t!==null)Bt=t,ht=e;else{if(e===null)throw Qe.alternate===null?Error(o(467)):Error(o(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Bt===null?Qe.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function Jl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fr(e){var t=Hr;return Hr+=1,Us===null&&(Us=[]),e=Qu(Us,e,t),t=Qe,(Bt===null?t.memoizedState:Bt.next)===null&&(t=t.alternate,O.H=t===null||t.memoizedState===null?Uf:Pf),e}function io(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fr(e);if(e.$$typeof===I)return Jt(e)}throw Error(o(438,String(e)))}function ec(e){var t=null,a=Qe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=Qe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Jl(),Qe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=ne;return t.index++,a}function ia(e,t){return typeof t=="function"?t(e):t}function oo(e){var t=Mt();return tc(t,ht,e)}function tc(e,t,a){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=a;var c=e.baseQueue,f=s.pending;if(f!==null){if(c!==null){var b=c.next;c.next=f.next,f.next=b}t.baseQueue=c=f,s.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{t=c.next;var _=b=null,z=null,F=t,ae=!1;do{var ce=F.lane&-536870913;if(ce!==F.lane?(rt&ce)===ce:(Ra&ce)===ce){var G=F.revertLane;if(G===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ce===Ms&&(ae=!0);else if((Ra&G)===G){F=F.next,G===Ms&&(ae=!0);continue}else ce={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},z===null?(_=z=ce,b=f):z=z.next=ce,Qe.lanes|=G,Oa|=G;ce=F.action,ds&&a(f,ce),f=F.hasEagerState?F.eagerState:a(f,ce)}else G={lane:ce,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},z===null?(_=z=G,b=f):z=z.next=G,Qe.lanes|=ce,Oa|=ce;F=F.next}while(F!==null&&F!==t);if(z===null?b=f:z.next=_,!mn(f,e.memoizedState)&&(Wt=!0,ae&&(a=Os,a!==null)))throw a;e.memoizedState=f,e.baseState=b,e.baseQueue=z,s.lastRenderedState=f}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function nc(e){var t=Mt(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var s=a.dispatch,c=a.pending,f=t.memoizedState;if(c!==null){a.pending=null;var b=c=c.next;do f=e(f,b.action),b=b.next;while(b!==c);mn(f,t.memoizedState)||(Wt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),a.lastRenderedState=f}return[f,s]}function sf(e,t,a){var s=Qe,c=Mt(),f=lt;if(f){if(a===void 0)throw Error(o(407));a=a()}else a=t();var b=!mn((ht||c).memoizedState,a);b&&(c.memoizedState=a,Wt=!0),c=c.queue;var _=lf.bind(null,s,c,e);if(Yr(2048,8,_,[e]),c.getSnapshot!==t||b||Bt!==null&&Bt.memoizedState.tag&1){if(s.flags|=2048,Ps(9,lo(),of.bind(null,s,c,a,t),null),bt===null)throw Error(o(349));f||(Ra&124)!==0||rf(s,t,a)}return a}function rf(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Qe.updateQueue,t===null?(t=Jl(),Qe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function of(e,t,a,s){t.value=a,t.getSnapshot=s,cf(t)&&df(e)}function lf(e,t,a){return a(function(){cf(t)&&df(e)})}function cf(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!mn(e,a)}catch{return!0}}function df(e){var t=zs(e,2);t!==null&&Sn(t,e,2)}function ac(e){var t=un();if(typeof e=="function"){var a=e;if(e=a(),ds){je(!0);try{a()}finally{je(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:e},t}function uf(e,t,a,s){return e.baseState=a,tc(e,ht,typeof s=="function"?s:ia)}function Jm(e,t,a,s,c){if(uo(e))throw Error(o(485));if(e=t.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};O.T!==null?a(!0):f.isTransition=!1,s(f),a=t.pending,a===null?(f.next=t.pending=f,ff(t,f)):(f.next=a.next,t.pending=a.next=f)}}function ff(e,t){var a=t.action,s=t.payload,c=e.state;if(t.isTransition){var f=O.T,b={};O.T=b;try{var _=a(c,s),z=O.S;z!==null&&z(b,_),hf(e,t,_)}catch(F){sc(e,t,F)}finally{O.T=f}}else try{f=a(c,s),hf(e,t,f)}catch(F){sc(e,t,F)}}function hf(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){pf(e,t,s)},function(s){return sc(e,t,s)}):pf(e,t,a)}function pf(e,t,a){t.status="fulfilled",t.value=a,gf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,ff(e,a)))}function sc(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,gf(t),t=t.next;while(t!==s)}e.action=null}function gf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function mf(e,t){return t}function xf(e,t){if(lt){var a=bt.formState;if(a!==null){e:{var s=Qe;if(lt){if(Ct){t:{for(var c=Ct,f=Fn;c.nodeType!==8;){if(!f){c=null;break t}if(c=Un(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){Ct=Un(c.nextSibling),s=c.data==="F!";break e}}is(s)}s=!1}s&&(t=a[0])}}return a=un(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:t},a.queue=s,a=Of.bind(null,Qe,s),s.dispatch=a,s=ac(!1),f=cc.bind(null,Qe,!1,s.queue),s=un(),c={state:t,dispatch:null,action:e,pending:null},s.queue=c,a=Jm.bind(null,Qe,c,f,a),c.dispatch=a,s.memoizedState=e,[t,a,!1]}function yf(e){var t=Mt();return bf(t,ht,e)}function bf(e,t,a){if(t=tc(e,t,mf)[0],e=oo(ia)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Fr(t)}catch(b){throw b===Ur?to:b}else s=t;t=Mt();var c=t.queue,f=c.dispatch;return a!==t.memoizedState&&(Qe.flags|=2048,Ps(9,lo(),ex.bind(null,c,a),null)),[s,f,e]}function ex(e,t){e.action=t}function vf(e){var t=Mt(),a=ht;if(a!==null)return bf(t,a,e);Mt(),t=t.memoizedState,a=Mt();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Ps(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=Qe.updateQueue,t===null&&(t=Jl(),Qe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function lo(){return{destroy:void 0,resource:void 0}}function _f(){return Mt().memoizedState}function co(e,t,a,s){var c=un();s=s===void 0?null:s,Qe.flags|=e,c.memoizedState=Ps(1|t,lo(),a,s)}function Yr(e,t,a,s){var c=Mt();s=s===void 0?null:s;var f=c.memoizedState.inst;ht!==null&&s!==null&&Vl(s,ht.memoizedState.deps)?c.memoizedState=Ps(t,f,a,s):(Qe.flags|=e,c.memoizedState=Ps(1|t,f,a,s))}function Sf(e,t){co(8390656,8,e,t)}function wf(e,t){Yr(2048,8,e,t)}function jf(e,t){return Yr(4,2,e,t)}function kf(e,t){return Yr(4,4,e,t)}function Cf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Tf(e,t,a){a=a!=null?a.concat([e]):null,Yr(4,4,Cf.bind(null,t,e),a)}function rc(){}function Ef(e,t){var a=Mt();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&Vl(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Rf(e,t){var a=Mt();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&Vl(t,s[1]))return s[0];if(s=e(),ds){je(!0);try{e()}finally{je(!1)}}return a.memoizedState=[s,t],s}function ic(e,t,a){return a===void 0||(Ra&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=Dh(),Qe.lanes|=e,Oa|=e,a)}function Nf(e,t,a,s){return mn(a,t)?a:Is.current!==null?(e=ic(e,a,s),mn(e,t)||(Wt=!0),e):(Ra&42)===0?(Wt=!0,e.memoizedState=a):(e=Dh(),Qe.lanes|=e,Oa|=e,t)}function zf(e,t,a,s,c){var f=Q.p;Q.p=f!==0&&8>f?f:8;var b=O.T,_={};O.T=_,cc(e,!1,t,a);try{var z=c(),F=O.S;if(F!==null&&F(_,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ae=Qm(z,s);Gr(e,t,ae,_n(e))}else Gr(e,t,s,_n(e))}catch(ce){Gr(e,t,{then:function(){},status:"rejected",reason:ce},_n())}finally{Q.p=f,O.T=b}}function tx(){}function oc(e,t,a,s){if(e.tag!==5)throw Error(o(476));var c=Df(e).queue;zf(e,c,t,he,a===null?tx:function(){return Af(e),a(s)})}function Df(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:he},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Af(e){var t=Df(e).next.queue;Gr(e,t,{},_n())}function lc(){return Jt(ui)}function Bf(){return Mt().memoizedState}function Mf(){return Mt().memoizedState}function nx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=_n();e=Ta(a);var s=Ea(t,e,a);s!==null&&(Sn(s,t,a),qr(s,t,a)),t={cache:Ll()},e.payload=t;return}t=t.return}}function ax(e,t,a){var s=_n();a={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},uo(e)?If(t,a):(a=El(e,t,a,s),a!==null&&(Sn(a,e,s),Lf(a,t,s)))}function Of(e,t,a){var s=_n();Gr(e,t,a,s)}function Gr(e,t,a,s){var c={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(uo(e))If(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var b=t.lastRenderedState,_=f(b,a);if(c.hasEagerState=!0,c.eagerState=_,mn(_,b))return Gi(e,t,c,0),bt===null&&Yi(),!1}catch{}finally{}if(a=El(e,t,c,s),a!==null)return Sn(a,e,s),Lf(a,t,s),!0}return!1}function cc(e,t,a,s){if(s={lane:2,revertLane:qc(),action:s,hasEagerState:!1,eagerState:null,next:null},uo(e)){if(t)throw Error(o(479))}else t=El(e,a,s,2),t!==null&&Sn(t,e,2)}function uo(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function If(e,t){Ls=so=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Lf(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Ie(e,a)}}var fo={readContext:Jt,use:io,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},Uf={readContext:Jt,use:io,useCallback:function(e,t){return un().memoizedState=[e,t===void 0?null:t],e},useContext:Jt,useEffect:Sf,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,co(4194308,4,Cf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return co(4194308,4,e,t)},useInsertionEffect:function(e,t){co(4,2,e,t)},useMemo:function(e,t){var a=un();t=t===void 0?null:t;var s=e();if(ds){je(!0);try{e()}finally{je(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=un();if(a!==void 0){var c=a(t);if(ds){je(!0);try{a(t)}finally{je(!1)}}}else c=t;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=ax.bind(null,Qe,e),[s.memoizedState,e]},useRef:function(e){var t=un();return e={current:e},t.memoizedState=e},useState:function(e){e=ac(e);var t=e.queue,a=Of.bind(null,Qe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:rc,useDeferredValue:function(e,t){var a=un();return ic(a,e,t)},useTransition:function(){var e=ac(!1);return e=zf.bind(null,Qe,e.queue,!0,!1),un().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=Qe,c=un();if(lt){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),bt===null)throw Error(o(349));(rt&124)!==0||rf(s,t,a)}c.memoizedState=a;var f={value:a,getSnapshot:t};return c.queue=f,Sf(lf.bind(null,s,f,e),[e]),s.flags|=2048,Ps(9,lo(),of.bind(null,s,f,a,t),null),a},useId:function(){var e=un(),t=bt.identifierPrefix;if(lt){var a=aa,s=na;a=(s&~(1<<32-Fe(s)-1)).toString(32)+a,t="«"+t+"R"+a,a=ro++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=Xm++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:lc,useFormState:xf,useActionState:xf,useOptimistic:function(e){var t=un();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=cc.bind(null,Qe,!0,a),a.dispatch=t,[e,t]},useMemoCache:ec,useCacheRefresh:function(){return un().memoizedState=nx.bind(null,Qe)}},Pf={readContext:Jt,use:io,useCallback:Ef,useContext:Jt,useEffect:wf,useImperativeHandle:Tf,useInsertionEffect:jf,useLayoutEffect:kf,useMemo:Rf,useReducer:oo,useRef:_f,useState:function(){return oo(ia)},useDebugValue:rc,useDeferredValue:function(e,t){var a=Mt();return Nf(a,ht.memoizedState,e,t)},useTransition:function(){var e=oo(ia)[0],t=Mt().memoizedState;return[typeof e=="boolean"?e:Fr(e),t]},useSyncExternalStore:sf,useId:Bf,useHostTransitionStatus:lc,useFormState:yf,useActionState:yf,useOptimistic:function(e,t){var a=Mt();return uf(a,ht,e,t)},useMemoCache:ec,useCacheRefresh:Mf},sx={readContext:Jt,use:io,useCallback:Ef,useContext:Jt,useEffect:wf,useImperativeHandle:Tf,useInsertionEffect:jf,useLayoutEffect:kf,useMemo:Rf,useReducer:nc,useRef:_f,useState:function(){return nc(ia)},useDebugValue:rc,useDeferredValue:function(e,t){var a=Mt();return ht===null?ic(a,e,t):Nf(a,ht.memoizedState,e,t)},useTransition:function(){var e=nc(ia)[0],t=Mt().memoizedState;return[typeof e=="boolean"?e:Fr(e),t]},useSyncExternalStore:sf,useId:Bf,useHostTransitionStatus:lc,useFormState:vf,useActionState:vf,useOptimistic:function(e,t){var a=Mt();return ht!==null?uf(a,ht,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ec,useCacheRefresh:Mf},qs=null,Vr=0;function ho(e){var t=Vr;return Vr+=1,qs===null&&(qs=[]),Qu(qs,e,t)}function Kr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function po(e,t){throw t.$$typeof===S?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function qf(e){var t=e._init;return t(e._payload)}function $f(e){function t(U,B){if(e){var H=U.deletions;H===null?(U.deletions=[B],U.flags|=16):H.push(B)}}function a(U,B){if(!e)return null;for(;B!==null;)t(U,B),B=B.sibling;return null}function s(U){for(var B=new Map;U!==null;)U.key!==null?B.set(U.key,U):B.set(U.index,U),U=U.sibling;return B}function c(U,B){return U=ta(U,B),U.index=0,U.sibling=null,U}function f(U,B,H){return U.index=H,e?(H=U.alternate,H!==null?(H=H.index,H<B?(U.flags|=67108866,B):H):(U.flags|=67108866,B)):(U.flags|=1048576,B)}function b(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function _(U,B,H,ie){return B===null||B.tag!==6?(B=Nl(H,U.mode,ie),B.return=U,B):(B=c(B,H),B.return=U,B)}function z(U,B,H,ie){var Re=H.type;return Re===T?ae(U,B,H.props.children,ie,H.key):B!==null&&(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Se&&qf(Re)===B.type)?(B=c(B,H.props),Kr(B,H),B.return=U,B):(B=Ki(H.type,H.key,H.props,null,U.mode,ie),Kr(B,H),B.return=U,B)}function F(U,B,H,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=zl(H,U.mode,ie),B.return=U,B):(B=c(B,H.children||[]),B.return=U,B)}function ae(U,B,H,ie,Re){return B===null||B.tag!==7?(B=ns(H,U.mode,ie,Re),B.return=U,B):(B=c(B,H),B.return=U,B)}function ce(U,B,H){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Nl(""+B,U.mode,H),B.return=U,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case E:return H=Ki(B.type,B.key,B.props,null,U.mode,H),Kr(H,B),H.return=U,H;case k:return B=zl(B,U.mode,H),B.return=U,B;case Se:var ie=B._init;return B=ie(B._payload),ce(U,B,H)}if(pe(B)||W(B))return B=ns(B,U.mode,H,null),B.return=U,B;if(typeof B.then=="function")return ce(U,ho(B),H);if(B.$$typeof===I)return ce(U,Ji(U,B),H);po(U,B)}return null}function G(U,B,H,ie){var Re=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Re!==null?null:_(U,B,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return H.key===Re?z(U,B,H,ie):null;case k:return H.key===Re?F(U,B,H,ie):null;case Se:return Re=H._init,H=Re(H._payload),G(U,B,H,ie)}if(pe(H)||W(H))return Re!==null?null:ae(U,B,H,ie,null);if(typeof H.then=="function")return G(U,B,ho(H),ie);if(H.$$typeof===I)return G(U,B,Ji(U,H),ie);po(U,H)}return null}function V(U,B,H,ie,Re){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return U=U.get(H)||null,_(B,U,""+ie,Re);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case E:return U=U.get(ie.key===null?H:ie.key)||null,z(B,U,ie,Re);case k:return U=U.get(ie.key===null?H:ie.key)||null,F(B,U,ie,Re);case Se:var Ze=ie._init;return ie=Ze(ie._payload),V(U,B,H,ie,Re)}if(pe(ie)||W(ie))return U=U.get(H)||null,ae(B,U,ie,Re,null);if(typeof ie.then=="function")return V(U,B,H,ho(ie),Re);if(ie.$$typeof===I)return V(U,B,H,Ji(B,ie),Re);po(B,ie)}return null}function $e(U,B,H,ie){for(var Re=null,Ze=null,De=B,Pe=B=0,Ft=null;De!==null&&Pe<H.length;Pe++){De.index>Pe?(Ft=De,De=null):Ft=De.sibling;var ot=G(U,De,H[Pe],ie);if(ot===null){De===null&&(De=Ft);break}e&&De&&ot.alternate===null&&t(U,De),B=f(ot,B,Pe),Ze===null?Re=ot:Ze.sibling=ot,Ze=ot,De=Ft}if(Pe===H.length)return a(U,De),lt&&ss(U,Pe),Re;if(De===null){for(;Pe<H.length;Pe++)De=ce(U,H[Pe],ie),De!==null&&(B=f(De,B,Pe),Ze===null?Re=De:Ze.sibling=De,Ze=De);return lt&&ss(U,Pe),Re}for(De=s(De);Pe<H.length;Pe++)Ft=V(De,U,Pe,H[Pe],ie),Ft!==null&&(e&&Ft.alternate!==null&&De.delete(Ft.key===null?Pe:Ft.key),B=f(Ft,B,Pe),Ze===null?Re=Ft:Ze.sibling=Ft,Ze=Ft);return e&&De.forEach(function(Fa){return t(U,Fa)}),lt&&ss(U,Pe),Re}function Ue(U,B,H,ie){if(H==null)throw Error(o(151));for(var Re=null,Ze=null,De=B,Pe=B=0,Ft=null,ot=H.next();De!==null&&!ot.done;Pe++,ot=H.next()){De.index>Pe?(Ft=De,De=null):Ft=De.sibling;var Fa=G(U,De,ot.value,ie);if(Fa===null){De===null&&(De=Ft);break}e&&De&&Fa.alternate===null&&t(U,De),B=f(Fa,B,Pe),Ze===null?Re=Fa:Ze.sibling=Fa,Ze=Fa,De=Ft}if(ot.done)return a(U,De),lt&&ss(U,Pe),Re;if(De===null){for(;!ot.done;Pe++,ot=H.next())ot=ce(U,ot.value,ie),ot!==null&&(B=f(ot,B,Pe),Ze===null?Re=ot:Ze.sibling=ot,Ze=ot);return lt&&ss(U,Pe),Re}for(De=s(De);!ot.done;Pe++,ot=H.next())ot=V(De,U,Pe,ot.value,ie),ot!==null&&(e&&ot.alternate!==null&&De.delete(ot.key===null?Pe:ot.key),B=f(ot,B,Pe),Ze===null?Re=ot:Ze.sibling=ot,Ze=ot);return e&&De.forEach(function(ry){return t(U,ry)}),lt&&ss(U,Pe),Re}function gt(U,B,H,ie){if(typeof H=="object"&&H!==null&&H.type===T&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case E:e:{for(var Re=H.key;B!==null;){if(B.key===Re){if(Re=H.type,Re===T){if(B.tag===7){a(U,B.sibling),ie=c(B,H.props.children),ie.return=U,U=ie;break e}}else if(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Se&&qf(Re)===B.type){a(U,B.sibling),ie=c(B,H.props),Kr(ie,H),ie.return=U,U=ie;break e}a(U,B);break}else t(U,B);B=B.sibling}H.type===T?(ie=ns(H.props.children,U.mode,ie,H.key),ie.return=U,U=ie):(ie=Ki(H.type,H.key,H.props,null,U.mode,ie),Kr(ie,H),ie.return=U,U=ie)}return b(U);case k:e:{for(Re=H.key;B!==null;){if(B.key===Re)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){a(U,B.sibling),ie=c(B,H.children||[]),ie.return=U,U=ie;break e}else{a(U,B);break}else t(U,B);B=B.sibling}ie=zl(H,U.mode,ie),ie.return=U,U=ie}return b(U);case Se:return Re=H._init,H=Re(H._payload),gt(U,B,H,ie)}if(pe(H))return $e(U,B,H,ie);if(W(H)){if(Re=W(H),typeof Re!="function")throw Error(o(150));return H=Re.call(H),Ue(U,B,H,ie)}if(typeof H.then=="function")return gt(U,B,ho(H),ie);if(H.$$typeof===I)return gt(U,B,Ji(U,H),ie);po(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,B!==null&&B.tag===6?(a(U,B.sibling),ie=c(B,H),ie.return=U,U=ie):(a(U,B),ie=Nl(H,U.mode,ie),ie.return=U,U=ie),b(U)):a(U,B)}return function(U,B,H,ie){try{Vr=0;var Re=gt(U,B,H,ie);return qs=null,Re}catch(De){if(De===Ur||De===to)throw De;var Ze=xn(29,De,null,U.mode);return Ze.lanes=ie,Ze.return=U,Ze}finally{}}}var $s=$f(!0),Wf=$f(!1),Dn=K(null),Yn=null;function Na(e){var t=e.alternate;ue(Lt,Lt.current&1),ue(Dn,e),Yn===null&&(t===null||Is.current!==null||t.memoizedState!==null)&&(Yn=e)}function Hf(e){if(e.tag===22){if(ue(Lt,Lt.current),ue(Dn,e),Yn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Yn=e)}}else za()}function za(){ue(Lt,Lt.current),ue(Dn,Dn.current)}function oa(e){J(Dn),Yn===e&&(Yn=null),J(Lt)}var Lt=K(0);function go(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jc(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function dc(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:x({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var uc={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=_n(),c=Ta(s);c.payload=t,a!=null&&(c.callback=a),t=Ea(e,c,s),t!==null&&(Sn(t,e,s),qr(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=_n(),c=Ta(s);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=Ea(e,c,s),t!==null&&(Sn(t,e,s),qr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=_n(),s=Ta(a);s.tag=2,t!=null&&(s.callback=t),t=Ea(e,s,a),t!==null&&(Sn(t,e,a),qr(t,e,a))}};function Ff(e,t,a,s,c,f,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,f,b):t.prototype&&t.prototype.isPureReactComponent?!zr(a,s)||!zr(c,f):!0}function Yf(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&uc.enqueueReplaceState(t,t.state,null)}function us(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=x({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var mo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Gf(e){mo(e)}function Vf(e){console.error(e)}function Kf(e){mo(e)}function xo(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Qf(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function fc(e,t,a){return a=Ta(a),a.tag=3,a.payload={element:null},a.callback=function(){xo(e,t)},a}function Xf(e){return e=Ta(e),e.tag=3,e}function Zf(e,t,a,s){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;e.payload=function(){return c(f)},e.callback=function(){Qf(t,a,s)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Qf(t,a,s),typeof c!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})})}function rx(e,t,a,s,c){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Or(t,a,c,!0),a=Dn.current,a!==null){switch(a.tag){case 13:return Yn===null?Oc():a.alternate===null&&Tt===0&&(Tt=3),a.flags&=-257,a.flags|=65536,a.lanes=c,s===ql?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Lc(e,s,c)),!1;case 22:return a.flags|=65536,s===ql?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Lc(e,s,c)),!1}throw Error(o(435,a.tag))}return Lc(e,s,c),Oc(),!1}if(lt)return t=Dn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,s!==Bl&&(e=Error(o(422),{cause:s}),Mr(En(e,a)))):(s!==Bl&&(t=Error(o(423),{cause:s}),Mr(En(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=En(s,a),c=fc(e.stateNode,s,c),Hl(e,c),Tt!==4&&(Tt=2)),!1;var f=Error(o(520),{cause:s});if(f=En(f,a),ni===null?ni=[f]:ni.push(f),Tt!==4&&(Tt=2),t===null)return!0;s=En(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=fc(a.stateNode,s,e),Hl(a,e),!1;case 1:if(t=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ia===null||!Ia.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Xf(c),Zf(c,e,a,s),Hl(a,c),!1}a=a.return}while(a!==null);return!1}var Jf=Error(o(461)),Wt=!1;function Kt(e,t,a,s){t.child=e===null?Wf(t,null,a,s):$s(t,e.child,a,s)}function eh(e,t,a,s,c){a=a.render;var f=t.ref;if("ref"in s){var b={};for(var _ in s)_!=="ref"&&(b[_]=s[_])}else b=s;return ls(t),s=Kl(e,t,a,b,f,c),_=Ql(),e!==null&&!Wt?(Xl(e,t,c),la(e,t,c)):(lt&&_&&Dl(t),t.flags|=1,Kt(e,t,s,c),t.child)}function th(e,t,a,s,c){if(e===null){var f=a.type;return typeof f=="function"&&!Rl(f)&&f.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=f,nh(e,t,f,s,c)):(e=Ki(a.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!vc(e,c)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:zr,a(b,s)&&e.ref===t.ref)return la(e,t,c)}return t.flags|=1,e=ta(f,s),e.ref=t.ref,e.return=t,t.child=e}function nh(e,t,a,s,c){if(e!==null){var f=e.memoizedProps;if(zr(f,s)&&e.ref===t.ref)if(Wt=!1,t.pendingProps=s=f,vc(e,c))(e.flags&131072)!==0&&(Wt=!0);else return t.lanes=e.lanes,la(e,t,c)}return hc(e,t,a,s,c)}function ah(e,t,a){var s=t.pendingProps,c=s.children,f=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((t.flags&128)!==0){if(s=f!==null?f.baseLanes|a:a,e!==null){for(c=t.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;t.childLanes=f&~s}else t.childLanes=0,t.child=null;return sh(e,t,s,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&eo(t,f!==null?f.cachePool:null),f!==null?tf(t,f):Yl(),Hf(t);else return t.lanes=t.childLanes=536870912,sh(e,t,f!==null?f.baseLanes|a:a,a)}else f!==null?(eo(t,f.cachePool),tf(t,f),za(),t.memoizedState=null):(e!==null&&eo(t,null),Yl(),za());return Kt(e,t,c,a),t.child}function sh(e,t,a,s){var c=Pl();return c=c===null?null:{parent:It._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&eo(t,null),Yl(),Hf(t),e!==null&&Or(e,t,s,!0),null}function yo(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function hc(e,t,a,s,c){return ls(t),a=Kl(e,t,a,s,void 0,c),s=Ql(),e!==null&&!Wt?(Xl(e,t,c),la(e,t,c)):(lt&&s&&Dl(t),t.flags|=1,Kt(e,t,a,c),t.child)}function rh(e,t,a,s,c,f){return ls(t),t.updateQueue=null,a=af(t,s,a,c),nf(e),s=Ql(),e!==null&&!Wt?(Xl(e,t,f),la(e,t,f)):(lt&&s&&Dl(t),t.flags|=1,Kt(e,t,a,f),t.child)}function ih(e,t,a,s,c){if(ls(t),t.stateNode===null){var f=Ds,b=a.contextType;typeof b=="object"&&b!==null&&(f=Jt(b)),f=new a(s,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=uc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=s,f.state=t.memoizedState,f.refs={},$l(t),b=a.contextType,f.context=typeof b=="object"&&b!==null?Jt(b):Ds,f.state=t.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(dc(t,a,b,s),f.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&uc.enqueueReplaceState(f,f.state,null),Wr(t,s,f,c),$r(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){f=t.stateNode;var _=t.memoizedProps,z=us(a,_);f.props=z;var F=f.context,ae=a.contextType;b=Ds,typeof ae=="object"&&ae!==null&&(b=Jt(ae));var ce=a.getDerivedStateFromProps;ae=typeof ce=="function"||typeof f.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,ae||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_||F!==b)&&Yf(t,f,s,b),Ca=!1;var G=t.memoizedState;f.state=G,Wr(t,s,f,c),$r(),F=t.memoizedState,_||G!==F||Ca?(typeof ce=="function"&&(dc(t,a,ce,s),F=t.memoizedState),(z=Ca||Ff(t,a,z,s,G,F,b))?(ae||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=F),f.props=s,f.state=F,f.context=b,s=z):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{f=t.stateNode,Wl(e,t),b=t.memoizedProps,ae=us(a,b),f.props=ae,ce=t.pendingProps,G=f.context,F=a.contextType,z=Ds,typeof F=="object"&&F!==null&&(z=Jt(F)),_=a.getDerivedStateFromProps,(F=typeof _=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==ce||G!==z)&&Yf(t,f,s,z),Ca=!1,G=t.memoizedState,f.state=G,Wr(t,s,f,c),$r();var V=t.memoizedState;b!==ce||G!==V||Ca||e!==null&&e.dependencies!==null&&Zi(e.dependencies)?(typeof _=="function"&&(dc(t,a,_,s),V=t.memoizedState),(ae=Ca||Ff(t,a,ae,s,G,V,z)||e!==null&&e.dependencies!==null&&Zi(e.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,V,z),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,V,z)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=V),f.props=s,f.state=V,f.context=z,s=ae):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),s=!1)}return f=s,yo(e,t),s=(t.flags&128)!==0,f||s?(f=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&s?(t.child=$s(t,e.child,null,c),t.child=$s(t,null,a,c)):Kt(e,t,a,c),t.memoizedState=f.state,e=t.child):e=la(e,t,c),e}function oh(e,t,a,s){return Br(),t.flags|=256,Kt(e,t,a,s),t.child}var pc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gc(e){return{baseLanes:e,cachePool:Gu()}}function mc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=An),e}function lh(e,t,a){var s=t.pendingProps,c=!1,f=(t.flags&128)!==0,b;if((b=f)||(b=e!==null&&e.memoizedState===null?!1:(Lt.current&2)!==0),b&&(c=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(lt){if(c?Na(t):za(),lt){var _=Ct,z;if(z=_){e:{for(z=_,_=Fn;z.nodeType!==8;){if(!_){_=null;break e}if(z=Un(z.nextSibling),z===null){_=null;break e}}_=z}_!==null?(t.memoizedState={dehydrated:_,treeContext:as!==null?{id:na,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},z=xn(18,null,null,0),z.stateNode=_,z.return=t,t.child=z,sn=t,Ct=null,z=!0):z=!1}z||is(t)}if(_=t.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Jc(_)?t.lanes=32:t.lanes=536870912,null;oa(t)}return _=s.children,s=s.fallback,c?(za(),c=t.mode,_=bo({mode:"hidden",children:_},c),s=ns(s,c,a,null),_.return=t,s.return=t,_.sibling=s,t.child=_,c=t.child,c.memoizedState=gc(a),c.childLanes=mc(e,b,a),t.memoizedState=pc,s):(Na(t),xc(t,_))}if(z=e.memoizedState,z!==null&&(_=z.dehydrated,_!==null)){if(f)t.flags&256?(Na(t),t.flags&=-257,t=yc(e,t,a)):t.memoizedState!==null?(za(),t.child=e.child,t.flags|=128,t=null):(za(),c=s.fallback,_=t.mode,s=bo({mode:"visible",children:s.children},_),c=ns(c,_,a,null),c.flags|=2,s.return=t,c.return=t,s.sibling=c,t.child=s,$s(t,e.child,null,a),s=t.child,s.memoizedState=gc(a),s.childLanes=mc(e,b,a),t.memoizedState=pc,t=c);else if(Na(t),Jc(_)){if(b=_.nextSibling&&_.nextSibling.dataset,b)var F=b.dgst;b=F,s=Error(o(419)),s.stack="",s.digest=b,Mr({value:s,source:null,stack:null}),t=yc(e,t,a)}else if(Wt||Or(e,t,a,!1),b=(a&e.childLanes)!==0,Wt||b){if(b=bt,b!==null&&(s=a&-a,s=(s&42)!==0?1:kn(s),s=(s&(b.suspendedLanes|a))!==0?0:s,s!==0&&s!==z.retryLane))throw z.retryLane=s,zs(e,s),Sn(b,e,s),Jf;_.data==="$?"||Oc(),t=yc(e,t,a)}else _.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=z.treeContext,Ct=Un(_.nextSibling),sn=t,lt=!0,rs=null,Fn=!1,e!==null&&(Nn[zn++]=na,Nn[zn++]=aa,Nn[zn++]=as,na=e.id,aa=e.overflow,as=t),t=xc(t,s.children),t.flags|=4096);return t}return c?(za(),c=s.fallback,_=t.mode,z=e.child,F=z.sibling,s=ta(z,{mode:"hidden",children:s.children}),s.subtreeFlags=z.subtreeFlags&65011712,F!==null?c=ta(F,c):(c=ns(c,_,a,null),c.flags|=2),c.return=t,s.return=t,s.sibling=c,t.child=s,s=c,c=t.child,_=e.child.memoizedState,_===null?_=gc(a):(z=_.cachePool,z!==null?(F=It._currentValue,z=z.parent!==F?{parent:F,pool:F}:z):z=Gu(),_={baseLanes:_.baseLanes|a,cachePool:z}),c.memoizedState=_,c.childLanes=mc(e,b,a),t.memoizedState=pc,s):(Na(t),a=e.child,e=a.sibling,a=ta(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=a,t.memoizedState=null,a)}function xc(e,t){return t=bo({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function bo(e,t){return e=xn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function yc(e,t,a){return $s(t,e.child,null,a),e=xc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ch(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Ol(e.return,t,a)}function bc(e,t,a,s,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=s,f.tail=a,f.tailMode=c)}function dh(e,t,a){var s=t.pendingProps,c=s.revealOrder,f=s.tail;if(Kt(e,t,s.children,a),s=Lt.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ch(e,a,t);else if(e.tag===19)ch(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(ue(Lt,s),c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&go(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),bc(t,!1,c,a,f);break;case"backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&go(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}bc(t,!0,a,null,f);break;case"together":bc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function la(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Oa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Or(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=ta(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ta(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function vc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Zi(e)))}function ix(e,t,a){switch(t.tag){case 3:We(t,t.stateNode.containerInfo),ka(t,It,e.memoizedState.cache),Br();break;case 27:case 5:ze(t);break;case 4:We(t,t.stateNode.containerInfo);break;case 10:ka(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Na(t),t.flags|=128,null):(a&t.child.childLanes)!==0?lh(e,t,a):(Na(t),e=la(e,t,a),e!==null?e.sibling:null);Na(t);break;case 19:var c=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Or(e,t,a,!1),s=(a&t.childLanes)!==0),c){if(s)return dh(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ue(Lt,Lt.current),s)break;return null;case 22:case 23:return t.lanes=0,ah(e,t,a);case 24:ka(t,It,e.memoizedState.cache)}return la(e,t,a)}function uh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Wt=!0;else{if(!vc(e,a)&&(t.flags&128)===0)return Wt=!1,ix(e,t,a);Wt=(e.flags&131072)!==0}else Wt=!1,lt&&(t.flags&1048576)!==0&&Pu(t,Xi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,c=s._init;if(s=c(s._payload),t.type=s,typeof s=="function")Rl(s)?(e=us(s,e),t.tag=1,t=ih(null,t,s,e,a)):(t.tag=0,t=hc(null,t,s,e,a));else{if(s!=null){if(c=s.$$typeof,c===Z){t.tag=11,t=eh(null,t,s,e,a);break e}else if(c===fe){t.tag=14,t=th(null,t,s,e,a);break e}}throw t=oe(s)||s,Error(o(306,t,""))}}return t;case 0:return hc(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,c=us(s,t.pendingProps),ih(e,t,s,c,a);case 3:e:{if(We(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var f=t.memoizedState;c=f.element,Wl(e,t),Wr(t,s,null,a);var b=t.memoizedState;if(s=b.cache,ka(t,It,s),s!==f.cache&&Il(t,[It],a,!0),$r(),s=b.element,f.isDehydrated)if(f={element:s,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=oh(e,t,s,a);break e}else if(s!==c){c=En(Error(o(424)),t),Mr(c),t=oh(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ct=Un(e.firstChild),sn=t,lt=!0,rs=null,Fn=!0,a=Wf(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Br(),s===c){t=la(e,t,a);break e}Kt(e,t,s,a)}t=t.child}return t;case 26:return yo(e,t),e===null?(a=gp(t.type,null,t.pendingProps,null))?t.memoizedState=a:lt||(a=t.type,e=t.pendingProps,s=Ao(Ee.current).createElement(a),s[xt]=t,s[Vt]=e,Xt(s,a,e),At(s),t.stateNode=s):t.memoizedState=gp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ze(t),e===null&&lt&&(s=t.stateNode=fp(t.type,t.pendingProps,Ee.current),sn=t,Fn=!0,c=Ct,Pa(t.type)?(ed=c,Ct=Un(s.firstChild)):Ct=c),Kt(e,t,t.pendingProps.children,a),yo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&lt&&((c=s=Ct)&&(s=Bx(s,t.type,t.pendingProps,Fn),s!==null?(t.stateNode=s,sn=t,Ct=Un(s.firstChild),Fn=!1,c=!0):c=!1),c||is(t)),ze(t),c=t.type,f=t.pendingProps,b=e!==null?e.memoizedProps:null,s=f.children,Qc(c,f)?s=null:b!==null&&Qc(c,b)&&(t.flags|=32),t.memoizedState!==null&&(c=Kl(e,t,Zm,null,null,a),ui._currentValue=c),yo(e,t),Kt(e,t,s,a),t.child;case 6:return e===null&&lt&&((e=a=Ct)&&(a=Mx(a,t.pendingProps,Fn),a!==null?(t.stateNode=a,sn=t,Ct=null,e=!0):e=!1),e||is(t)),null;case 13:return lh(e,t,a);case 4:return We(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=$s(t,null,s,a):Kt(e,t,s,a),t.child;case 11:return eh(e,t,t.type,t.pendingProps,a);case 7:return Kt(e,t,t.pendingProps,a),t.child;case 8:return Kt(e,t,t.pendingProps.children,a),t.child;case 12:return Kt(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,ka(t,t.type,s.value),Kt(e,t,s.children,a),t.child;case 9:return c=t.type._context,s=t.pendingProps.children,ls(t),c=Jt(c),s=s(c),t.flags|=1,Kt(e,t,s,a),t.child;case 14:return th(e,t,t.type,t.pendingProps,a);case 15:return nh(e,t,t.type,t.pendingProps,a);case 19:return dh(e,t,a);case 31:return s=t.pendingProps,a=t.mode,s={mode:s.mode,children:s.children},e===null?(a=bo(s,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=ta(e.child,s),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return ah(e,t,a);case 24:return ls(t),s=Jt(It),e===null?(c=Pl(),c===null&&(c=bt,f=Ll(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),t.memoizedState={parent:s,cache:c},$l(t),ka(t,It,c)):((e.lanes&a)!==0&&(Wl(e,t),Wr(t,null,null,a),$r()),c=e.memoizedState,f=t.memoizedState,c.parent!==s?(c={parent:s,cache:s},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),ka(t,It,s)):(s=f.cache,ka(t,It,s),s!==c.cache&&Il(t,[It],a,!0))),Kt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ca(e){e.flags|=4}function fh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!vp(t)){if(t=Dn.current,t!==null&&((rt&4194048)===rt?Yn!==null:(rt&62914560)!==rt&&(rt&536870912)===0||t!==Yn))throw Pr=ql,Vu;e.flags|=8192}}function vo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Oe():536870912,e.lanes|=t,Ys|=t)}function Qr(e,t){if(!lt)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function ox(e,t,a){var s=t.pendingProps;switch(Al(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return kt(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ra(It),Ce(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ar(t)?ca(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wu())),kt(t),null;case 26:return a=t.memoizedState,e===null?(ca(t),a!==null?(kt(t),fh(t,a)):(kt(t),t.flags&=-16777217)):a?a!==e.memoizedState?(ca(t),kt(t),fh(t,a)):(kt(t),t.flags&=-16777217):(e.memoizedProps!==s&&ca(t),kt(t),t.flags&=-16777217),null;case 27:de(t),a=Ee.current;var c=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ca(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return kt(t),null}e=be.current,Ar(t)?qu(t):(e=fp(c,s,a),t.stateNode=e,ca(t))}return kt(t),null;case 5:if(de(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ca(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return kt(t),null}if(e=be.current,Ar(t))qu(t);else{switch(c=Ao(Ee.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?c.createElement("select",{is:s.is}):c.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?c.createElement(a,{is:s.is}):c.createElement(a)}}e[xt]=t,e[Vt]=s;e:for(c=t.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}t.stateNode=e;e:switch(Xt(e,a,s),a){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ca(t)}}return kt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ca(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=Ee.current,Ar(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,c=sn,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[xt]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||rp(e.nodeValue,a)),e||is(t)}else e=Ao(e).createTextNode(s),e[xt]=t,t.stateNode=e}return kt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Ar(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[xt]=t}else Br(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;kt(t),c=!1}else c=Wu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(oa(t),t):(oa(t),null)}if(oa(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=s!==null,e=e!==null&&e.memoizedState!==null,a){s=t.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool);var f=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),vo(t,t.updateQueue),kt(t),null;case 4:return Ce(),e===null&&Fc(t.stateNode.containerInfo),kt(t),null;case 10:return ra(t.type),kt(t),null;case 19:if(J(Lt),c=t.memoizedState,c===null)return kt(t),null;if(s=(t.flags&128)!==0,f=c.rendering,f===null)if(s)Qr(c,!1);else{if(Tt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=go(e),f!==null){for(t.flags|=128,Qr(c,!1),e=f.updateQueue,t.updateQueue=e,vo(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Uu(a,e),a=a.sibling;return ue(Lt,Lt.current&1|2),t.child}e=e.sibling}c.tail!==null&&qe()>wo&&(t.flags|=128,s=!0,Qr(c,!1),t.lanes=4194304)}else{if(!s)if(e=go(f),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,vo(t,e),Qr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!lt)return kt(t),null}else 2*qe()-c.renderingStartTime>wo&&a!==536870912&&(t.flags|=128,s=!0,Qr(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(e=c.last,e!==null?e.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=qe(),t.sibling=null,e=Lt.current,ue(Lt,s?e&1|2:e&1),t):(kt(t),null);case 22:case 23:return oa(t),Gl(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),a=t.updateQueue,a!==null&&vo(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&J(cs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ra(It),kt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function lx(e,t){switch(Al(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ra(It),Ce(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return de(t),null;case 13:if(oa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(Lt),null;case 4:return Ce(),null;case 10:return ra(t.type),null;case 22:case 23:return oa(t),Gl(),e!==null&&J(cs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ra(It),null;case 25:return null;default:return null}}function hh(e,t){switch(Al(t),t.tag){case 3:ra(It),Ce();break;case 26:case 27:case 5:de(t);break;case 4:Ce();break;case 13:oa(t);break;case 19:J(Lt);break;case 10:ra(t.type);break;case 22:case 23:oa(t),Gl(),e!==null&&J(cs);break;case 24:ra(It)}}function Xr(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var c=s.next;a=c;do{if((a.tag&e)===e){s=void 0;var f=a.create,b=a.inst;s=f(),b.destroy=s}a=a.next}while(a!==c)}}catch(_){yt(t,t.return,_)}}function Da(e,t,a){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var f=c.next;s=f;do{if((s.tag&e)===e){var b=s.inst,_=b.destroy;if(_!==void 0){b.destroy=void 0,c=t;var z=a,F=_;try{F()}catch(ae){yt(c,z,ae)}}}s=s.next}while(s!==f)}}catch(ae){yt(t,t.return,ae)}}function ph(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{ef(t,a)}catch(s){yt(e,e.return,s)}}}function gh(e,t,a){a.props=us(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){yt(e,t,s)}}function Zr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(c){yt(e,t,c)}}function Gn(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(c){yt(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){yt(e,t,c)}else a.current=null}function mh(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(c){yt(e,e.return,c)}}function _c(e,t,a){try{var s=e.stateNode;Rx(s,e.type,a,t),s[Vt]=t}catch(c){yt(e,e.return,c)}}function xh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Pa(e.type)||e.tag===4}function Sc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Pa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wc(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Do));else if(s!==4&&(s===27&&Pa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(wc(e,t,a),e=e.sibling;e!==null;)wc(e,t,a),e=e.sibling}function _o(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Pa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(_o(e,t,a),e=e.sibling;e!==null;)_o(e,t,a),e=e.sibling}function yh(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Xt(t,s,a),t[xt]=e,t[Vt]=a}catch(f){yt(e,e.return,f)}}var da=!1,Nt=!1,jc=!1,bh=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function cx(e,t){if(e=e.containerInfo,Vc=Uo,e=Ru(e),Sl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var c=s.anchorOffset,f=s.focusNode;s=s.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,_=-1,z=-1,F=0,ae=0,ce=e,G=null;t:for(;;){for(var V;ce!==a||c!==0&&ce.nodeType!==3||(_=b+c),ce!==f||s!==0&&ce.nodeType!==3||(z=b+s),ce.nodeType===3&&(b+=ce.nodeValue.length),(V=ce.firstChild)!==null;)G=ce,ce=V;for(;;){if(ce===e)break t;if(G===a&&++F===c&&(_=b),G===f&&++ae===s&&(z=b),(V=ce.nextSibling)!==null)break;ce=G,G=ce.parentNode}ce=V}a=_===-1||z===-1?null:{start:_,end:z}}else a=null}a=a||{start:0,end:0}}else a=null;for(Kc={focusedElem:e,selectionRange:a},Uo=!1,Ht=t;Ht!==null;)if(t=Ht,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Ht=e;else for(;Ht!==null;){switch(t=Ht,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=t,c=f.memoizedProps,f=f.memoizedState,s=a.stateNode;try{var $e=us(a.type,c,a.elementType===a.type);e=s.getSnapshotBeforeUpdate($e,f),s.__reactInternalSnapshotBeforeUpdate=e}catch(Ue){yt(a,a.return,Ue)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Zc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Zc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Ht=e;break}Ht=t.return}}function vh(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:Aa(e,a),s&4&&Xr(5,a);break;case 1:if(Aa(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(b){yt(a,a.return,b)}else{var c=us(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){yt(a,a.return,b)}}s&64&&ph(a),s&512&&Zr(a,a.return);break;case 3:if(Aa(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{ef(e,t)}catch(b){yt(a,a.return,b)}}break;case 27:t===null&&s&4&&yh(a);case 26:case 5:Aa(e,a),t===null&&s&4&&mh(a),s&512&&Zr(a,a.return);break;case 12:Aa(e,a);break;case 13:Aa(e,a),s&4&&wh(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=yx.bind(null,a),Ox(e,a))));break;case 22:if(s=a.memoizedState!==null||da,!s){t=t!==null&&t.memoizedState!==null||Nt,c=da;var f=Nt;da=s,(Nt=t)&&!f?Ba(e,a,(a.subtreeFlags&8772)!==0):Aa(e,a),da=c,Nt=f}break;case 30:break;default:Aa(e,a)}}function _h(e){var t=e.alternate;t!==null&&(e.alternate=null,_h(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ba(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var St=null,fn=!1;function ua(e,t,a){for(a=a.child;a!==null;)Sh(e,t,a),a=a.sibling}function Sh(e,t,a){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(q,a)}catch{}switch(a.tag){case 26:Nt||Gn(a,t),ua(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Nt||Gn(a,t);var s=St,c=fn;Pa(a.type)&&(St=a.stateNode,fn=!1),ua(e,t,a),oi(a.stateNode),St=s,fn=c;break;case 5:Nt||Gn(a,t);case 6:if(s=St,c=fn,St=null,ua(e,t,a),St=s,fn=c,St!==null)if(fn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(a.stateNode)}catch(f){yt(a,t,f)}else try{St.removeChild(a.stateNode)}catch(f){yt(a,t,f)}break;case 18:St!==null&&(fn?(e=St,dp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),gi(e)):dp(St,a.stateNode));break;case 4:s=St,c=fn,St=a.stateNode.containerInfo,fn=!0,ua(e,t,a),St=s,fn=c;break;case 0:case 11:case 14:case 15:Nt||Da(2,a,t),Nt||Da(4,a,t),ua(e,t,a);break;case 1:Nt||(Gn(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&gh(a,t,s)),ua(e,t,a);break;case 21:ua(e,t,a);break;case 22:Nt=(s=Nt)||a.memoizedState!==null,ua(e,t,a),Nt=s;break;default:ua(e,t,a)}}function wh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gi(e)}catch(a){yt(t,t.return,a)}}function dx(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new bh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new bh),t;default:throw Error(o(435,e.tag))}}function kc(e,t){var a=dx(e);t.forEach(function(s){var c=bx.bind(null,e,s);a.has(s)||(a.add(s),s.then(c,c))})}function yn(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var c=a[s],f=e,b=t,_=b;e:for(;_!==null;){switch(_.tag){case 27:if(Pa(_.type)){St=_.stateNode,fn=!1;break e}break;case 5:St=_.stateNode,fn=!1;break e;case 3:case 4:St=_.stateNode.containerInfo,fn=!0;break e}_=_.return}if(St===null)throw Error(o(160));Sh(f,b,c),St=null,fn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)jh(t,e),t=t.sibling}var Ln=null;function jh(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yn(t,e),bn(e),s&4&&(Da(3,e,e.return),Xr(3,e),Da(5,e,e.return));break;case 1:yn(t,e),bn(e),s&512&&(Nt||a===null||Gn(a,a.return)),s&64&&da&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var c=Ln;if(yn(t,e),bn(e),s&512&&(Nt||a===null||Gn(a,a.return)),s&4){var f=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Qa]||f[xt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(s),c.head.insertBefore(f,c.querySelector("head > title"))),Xt(f,s,a),f[xt]=e,At(f),s=f;break e;case"link":var b=yp("link","href",c).get(s+(a.href||""));if(b){for(var _=0;_<b.length;_++)if(f=b[_],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(_,1);break t}}f=c.createElement(s),Xt(f,s,a),c.head.appendChild(f);break;case"meta":if(b=yp("meta","content",c).get(s+(a.content||""))){for(_=0;_<b.length;_++)if(f=b[_],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(_,1);break t}}f=c.createElement(s),Xt(f,s,a),c.head.appendChild(f);break;default:throw Error(o(468,s))}f[xt]=e,At(f),s=f}e.stateNode=s}else bp(c,e.type,e.stateNode);else e.stateNode=xp(c,s,e.memoizedProps);else f!==s?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,s===null?bp(c,e.type,e.stateNode):xp(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&_c(e,e.memoizedProps,a.memoizedProps)}break;case 27:yn(t,e),bn(e),s&512&&(Nt||a===null||Gn(a,a.return)),a!==null&&s&4&&_c(e,e.memoizedProps,a.memoizedProps);break;case 5:if(yn(t,e),bn(e),s&512&&(Nt||a===null||Gn(a,a.return)),e.flags&32){c=e.stateNode;try{Tn(c,"")}catch(V){yt(e,e.return,V)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,_c(e,c,a!==null?a.memoizedProps:c)),s&1024&&(jc=!0);break;case 6:if(yn(t,e),bn(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(V){yt(e,e.return,V)}}break;case 3:if(Oo=null,c=Ln,Ln=Bo(t.containerInfo),yn(t,e),Ln=c,bn(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{gi(t.containerInfo)}catch(V){yt(e,e.return,V)}jc&&(jc=!1,kh(e));break;case 4:s=Ln,Ln=Bo(e.stateNode.containerInfo),yn(t,e),bn(e),Ln=s;break;case 12:yn(t,e),bn(e);break;case 13:yn(t,e),bn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zc=qe()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,kc(e,s)));break;case 22:c=e.memoizedState!==null;var z=a!==null&&a.memoizedState!==null,F=da,ae=Nt;if(da=F||c,Nt=ae||z,yn(t,e),Nt=ae,da=F,bn(e),s&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||z||da||Nt||fs(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){z=a=t;try{if(f=z.stateNode,c)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{_=z.stateNode;var ce=z.memoizedProps.style,G=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;_.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(V){yt(z,z.return,V)}}}else if(t.tag===6){if(a===null){z=t;try{z.stateNode.nodeValue=c?"":z.memoizedProps}catch(V){yt(z,z.return,V)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,kc(e,a))));break;case 19:yn(t,e),bn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,kc(e,s)));break;case 30:break;case 21:break;default:yn(t,e),bn(e)}}function bn(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(xh(s)){a=s;break}s=s.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var c=a.stateNode,f=Sc(e);_o(e,f,c);break;case 5:var b=a.stateNode;a.flags&32&&(Tn(b,""),a.flags&=-33);var _=Sc(e);_o(e,_,b);break;case 3:case 4:var z=a.stateNode.containerInfo,F=Sc(e);wc(e,F,z);break;default:throw Error(o(161))}}catch(ae){yt(e,e.return,ae)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;kh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Aa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)vh(e,t.alternate,t),t=t.sibling}function fs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Da(4,t,t.return),fs(t);break;case 1:Gn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&gh(t,t.return,a),fs(t);break;case 27:oi(t.stateNode);case 26:case 5:Gn(t,t.return),fs(t);break;case 22:t.memoizedState===null&&fs(t);break;case 30:fs(t);break;default:fs(t)}e=e.sibling}}function Ba(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,c=e,f=t,b=f.flags;switch(f.tag){case 0:case 11:case 15:Ba(c,f,a),Xr(4,f);break;case 1:if(Ba(c,f,a),s=f,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(F){yt(s,s.return,F)}if(s=f,c=s.updateQueue,c!==null){var _=s.stateNode;try{var z=c.shared.hiddenCallbacks;if(z!==null)for(c.shared.hiddenCallbacks=null,c=0;c<z.length;c++)Ju(z[c],_)}catch(F){yt(s,s.return,F)}}a&&b&64&&ph(f),Zr(f,f.return);break;case 27:yh(f);case 26:case 5:Ba(c,f,a),a&&s===null&&b&4&&mh(f),Zr(f,f.return);break;case 12:Ba(c,f,a);break;case 13:Ba(c,f,a),a&&b&4&&wh(c,f);break;case 22:f.memoizedState===null&&Ba(c,f,a),Zr(f,f.return);break;case 30:break;default:Ba(c,f,a)}t=t.sibling}}function Cc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ir(a))}function Tc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ir(e))}function Vn(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ch(e,t,a,s),t=t.sibling}function Ch(e,t,a,s){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Vn(e,t,a,s),c&2048&&Xr(9,t);break;case 1:Vn(e,t,a,s);break;case 3:Vn(e,t,a,s),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ir(e)));break;case 12:if(c&2048){Vn(e,t,a,s),e=t.stateNode;try{var f=t.memoizedProps,b=f.id,_=f.onPostCommit;typeof _=="function"&&_(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){yt(t,t.return,z)}}else Vn(e,t,a,s);break;case 13:Vn(e,t,a,s);break;case 23:break;case 22:f=t.stateNode,b=t.alternate,t.memoizedState!==null?f._visibility&2?Vn(e,t,a,s):Jr(e,t):f._visibility&2?Vn(e,t,a,s):(f._visibility|=2,Ws(e,t,a,s,(t.subtreeFlags&10256)!==0)),c&2048&&Cc(b,t);break;case 24:Vn(e,t,a,s),c&2048&&Tc(t.alternate,t);break;default:Vn(e,t,a,s)}}function Ws(e,t,a,s,c){for(c=c&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,b=t,_=a,z=s,F=b.flags;switch(b.tag){case 0:case 11:case 15:Ws(f,b,_,z,c),Xr(8,b);break;case 23:break;case 22:var ae=b.stateNode;b.memoizedState!==null?ae._visibility&2?Ws(f,b,_,z,c):Jr(f,b):(ae._visibility|=2,Ws(f,b,_,z,c)),c&&F&2048&&Cc(b.alternate,b);break;case 24:Ws(f,b,_,z,c),c&&F&2048&&Tc(b.alternate,b);break;default:Ws(f,b,_,z,c)}t=t.sibling}}function Jr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,c=s.flags;switch(s.tag){case 22:Jr(a,s),c&2048&&Cc(s.alternate,s);break;case 24:Jr(a,s),c&2048&&Tc(s.alternate,s);break;default:Jr(a,s)}t=t.sibling}}var ei=8192;function Hs(e){if(e.subtreeFlags&ei)for(e=e.child;e!==null;)Th(e),e=e.sibling}function Th(e){switch(e.tag){case 26:Hs(e),e.flags&ei&&e.memoizedState!==null&&Kx(Ln,e.memoizedState,e.memoizedProps);break;case 5:Hs(e);break;case 3:case 4:var t=Ln;Ln=Bo(e.stateNode.containerInfo),Hs(e),Ln=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ei,ei=16777216,Hs(e),ei=t):Hs(e));break;default:Hs(e)}}function Eh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ti(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ht=s,Nh(s,e)}Eh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Rh(e),e=e.sibling}function Rh(e){switch(e.tag){case 0:case 11:case 15:ti(e),e.flags&2048&&Da(9,e,e.return);break;case 3:ti(e);break;case 12:ti(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,So(e)):ti(e);break;default:ti(e)}}function So(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ht=s,Nh(s,e)}Eh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Da(8,t,t.return),So(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,So(t));break;default:So(t)}e=e.sibling}}function Nh(e,t){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Da(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ir(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Ht=s;else e:for(a=e;Ht!==null;){s=Ht;var c=s.sibling,f=s.return;if(_h(s),s===a){Ht=null;break e}if(c!==null){c.return=f,Ht=c;break e}Ht=f}}}var ux={getCacheForType:function(e){var t=Jt(It),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},fx=typeof WeakMap=="function"?WeakMap:Map,dt=0,bt=null,tt=null,rt=0,ut=0,vn=null,Ma=!1,Fs=!1,Ec=!1,fa=0,Tt=0,Oa=0,hs=0,Rc=0,An=0,Ys=0,ni=null,hn=null,Nc=!1,zc=0,wo=1/0,jo=null,Ia=null,Qt=0,La=null,Gs=null,Vs=0,Dc=0,Ac=null,zh=null,ai=0,Bc=null;function _n(){if((dt&2)!==0&&rt!==0)return rt&-rt;if(O.T!==null){var e=Ms;return e!==0?e:qc()}return an()}function Dh(){An===0&&(An=(rt&536870912)===0||lt?ke():536870912);var e=Dn.current;return e!==null&&(e.flags|=32),An}function Sn(e,t,a){(e===bt&&(ut===2||ut===9)||e.cancelPendingCommit!==null)&&(Ks(e,0),Ua(e,rt,An,!1)),Xe(e,a),((dt&2)===0||e!==bt)&&(e===bt&&((dt&2)===0&&(hs|=a),Tt===4&&Ua(e,rt,An,!1)),Kn(e))}function Ah(e,t,a){if((dt&6)!==0)throw Error(o(327));var s=!a&&(t&124)===0&&(t&e.expiredLanes)===0||M(e,t),c=s?gx(e,t):Ic(e,t,!0),f=s;do{if(c===0){Fs&&!s&&Ua(e,t,0,!1);break}else{if(a=e.current.alternate,f&&!hx(a)){c=Ic(e,t,!1),f=!1;continue}if(c===2){if(f=t,e.errorRecoveryDisabledLanes&f)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var _=e;c=ni;var z=_.current.memoizedState.isDehydrated;if(z&&(Ks(_,b).flags|=256),b=Ic(_,b,!1),b!==2){if(Ec&&!z){_.errorRecoveryDisabledLanes|=f,hs|=f,c=4;break e}f=hn,hn=c,f!==null&&(hn===null?hn=f:hn.push.apply(hn,f))}c=b}if(f=!1,c!==2)continue}}if(c===1){Ks(e,0),Ua(e,t,0,!0);break}e:{switch(s=e,f=c,f){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Ua(s,t,An,!Ma);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=zc+300-qe(),10<c)){if(Ua(s,t,An,!Ma),y(s,0,!0)!==0)break e;s.timeoutHandle=lp(Bh.bind(null,s,a,hn,jo,Nc,t,An,hs,Ys,Ma,f,2,-0,0),c);break e}Bh(s,a,hn,jo,Nc,t,An,hs,Ys,Ma,f,0,-0,0)}}break}while(!0);Kn(e)}function Bh(e,t,a,s,c,f,b,_,z,F,ae,ce,G,V){if(e.timeoutHandle=-1,ce=t.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(di={stylesheets:null,count:0,unsuspend:Vx},Th(t),ce=Qx(),ce!==null)){e.cancelPendingCommit=ce(qh.bind(null,e,t,f,a,s,c,b,_,z,ae,1,G,V)),Ua(e,f,b,!F);return}qh(e,t,f,a,s,c,b,_,z)}function hx(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var c=a[s],f=c.getSnapshot;c=c.value;try{if(!mn(f(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ua(e,t,a,s){t&=~Rc,t&=~hs,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var c=t;0<c;){var f=31-Fe(c),b=1<<f;s[f]=-1,c&=~b}a!==0&&Zt(e,a,t)}function ko(){return(dt&6)===0?(si(0),!1):!0}function Mc(){if(tt!==null){if(ut===0)var e=tt.return;else e=tt,sa=os=null,Zl(e),qs=null,Vr=0,e=tt;for(;e!==null;)hh(e.alternate,e),e=e.return;tt=null}}function Ks(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,zx(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Mc(),bt=e,tt=a=ta(e.current,null),rt=t,ut=0,vn=null,Ma=!1,Fs=M(e,t),Ec=!1,Ys=An=Rc=hs=Oa=Tt=0,hn=ni=null,Nc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var c=31-Fe(s),f=1<<c;t|=e[c],s&=~f}return fa=t,Yi(),a}function Mh(e,t){Qe=null,O.H=fo,t===Ur||t===to?(t=Xu(),ut=3):t===Vu?(t=Xu(),ut=4):ut=t===Jf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,vn=t,tt===null&&(Tt=1,xo(e,En(t,e.current)))}function Oh(){var e=O.H;return O.H=fo,e===null?fo:e}function Ih(){var e=O.A;return O.A=ux,e}function Oc(){Tt=4,Ma||(rt&4194048)!==rt&&Dn.current!==null||(Fs=!0),(Oa&134217727)===0&&(hs&134217727)===0||bt===null||Ua(bt,rt,An,!1)}function Ic(e,t,a){var s=dt;dt|=2;var c=Oh(),f=Ih();(bt!==e||rt!==t)&&(jo=null,Ks(e,t)),t=!1;var b=Tt;e:do try{if(ut!==0&&tt!==null){var _=tt,z=vn;switch(ut){case 8:Mc(),b=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(t=!0);var F=ut;if(ut=0,vn=null,Qs(e,_,z,F),a&&Fs){b=0;break e}break;default:F=ut,ut=0,vn=null,Qs(e,_,z,F)}}px(),b=Tt;break}catch(ae){Mh(e,ae)}while(!0);return t&&e.shellSuspendCounter++,sa=os=null,dt=s,O.H=c,O.A=f,tt===null&&(bt=null,rt=0,Yi()),b}function px(){for(;tt!==null;)Lh(tt)}function gx(e,t){var a=dt;dt|=2;var s=Oh(),c=Ih();bt!==e||rt!==t?(jo=null,wo=qe()+500,Ks(e,t)):Fs=M(e,t);e:do try{if(ut!==0&&tt!==null){t=tt;var f=vn;t:switch(ut){case 1:ut=0,vn=null,Qs(e,t,f,1);break;case 2:case 9:if(Ku(f)){ut=0,vn=null,Uh(t);break}t=function(){ut!==2&&ut!==9||bt!==e||(ut=7),Kn(e)},f.then(t,t);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Ku(f)?(ut=0,vn=null,Uh(t)):(ut=0,vn=null,Qs(e,t,f,7));break;case 5:var b=null;switch(tt.tag){case 26:b=tt.memoizedState;case 5:case 27:var _=tt;if(!b||vp(b)){ut=0,vn=null;var z=_.sibling;if(z!==null)tt=z;else{var F=_.return;F!==null?(tt=F,Co(F)):tt=null}break t}}ut=0,vn=null,Qs(e,t,f,5);break;case 6:ut=0,vn=null,Qs(e,t,f,6);break;case 8:Mc(),Tt=6;break e;default:throw Error(o(462))}}mx();break}catch(ae){Mh(e,ae)}while(!0);return sa=os=null,O.H=s,O.A=c,dt=a,tt!==null?0:(bt=null,rt=0,Yi(),Tt)}function mx(){for(;tt!==null&&!ee();)Lh(tt)}function Lh(e){var t=uh(e.alternate,e,fa);e.memoizedProps=e.pendingProps,t===null?Co(e):tt=t}function Uh(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=rh(a,t,t.pendingProps,t.type,void 0,rt);break;case 11:t=rh(a,t,t.pendingProps,t.type.render,t.ref,rt);break;case 5:Zl(t);default:hh(a,t),t=tt=Uu(t,fa),t=uh(a,t,fa)}e.memoizedProps=e.pendingProps,t===null?Co(e):tt=t}function Qs(e,t,a,s){sa=os=null,Zl(t),qs=null,Vr=0;var c=t.return;try{if(rx(e,c,t,a,rt)){Tt=1,xo(e,En(a,e.current)),tt=null;return}}catch(f){if(c!==null)throw tt=c,f;Tt=1,xo(e,En(a,e.current)),tt=null;return}t.flags&32768?(lt||s===1?e=!0:Fs||(rt&536870912)!==0?e=!1:(Ma=e=!0,(s===2||s===9||s===3||s===6)&&(s=Dn.current,s!==null&&s.tag===13&&(s.flags|=16384))),Ph(t,e)):Co(t)}function Co(e){var t=e;do{if((t.flags&32768)!==0){Ph(t,Ma);return}e=t.return;var a=ox(t.alternate,t,fa);if(a!==null){tt=a;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);Tt===0&&(Tt=5)}function Ph(e,t){do{var a=lx(e.alternate,e);if(a!==null){a.flags&=32767,tt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){tt=e;return}tt=e=a}while(e!==null);Tt=6,tt=null}function qh(e,t,a,s,c,f,b,_,z){e.cancelPendingCommit=null;do To();while(Qt!==0);if((dt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(f=t.lanes|t.childLanes,f|=Tl,He(e,a,f,b,_,z),e===bt&&(tt=bt=null,rt=0),Gs=t,La=e,Vs=a,Dc=f,Ac=c,zh=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,vx(zt,function(){return Yh(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=O.T,O.T=null,c=Q.p,Q.p=2,b=dt,dt|=4;try{cx(e,t,a)}finally{dt=b,Q.p=c,O.T=s}}Qt=1,$h(),Wh(),Hh()}}function $h(){if(Qt===1){Qt=0;var e=La,t=Gs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var s=Q.p;Q.p=2;var c=dt;dt|=4;try{jh(t,e);var f=Kc,b=Ru(e.containerInfo),_=f.focusedElem,z=f.selectionRange;if(b!==_&&_&&_.ownerDocument&&Eu(_.ownerDocument.documentElement,_)){if(z!==null&&Sl(_)){var F=z.start,ae=z.end;if(ae===void 0&&(ae=F),"selectionStart"in _)_.selectionStart=F,_.selectionEnd=Math.min(ae,_.value.length);else{var ce=_.ownerDocument||document,G=ce&&ce.defaultView||window;if(G.getSelection){var V=G.getSelection(),$e=_.textContent.length,Ue=Math.min(z.start,$e),gt=z.end===void 0?Ue:Math.min(z.end,$e);!V.extend&&Ue>gt&&(b=gt,gt=Ue,Ue=b);var U=Tu(_,Ue),B=Tu(_,gt);if(U&&B&&(V.rangeCount!==1||V.anchorNode!==U.node||V.anchorOffset!==U.offset||V.focusNode!==B.node||V.focusOffset!==B.offset)){var H=ce.createRange();H.setStart(U.node,U.offset),V.removeAllRanges(),Ue>gt?(V.addRange(H),V.extend(B.node,B.offset)):(H.setEnd(B.node,B.offset),V.addRange(H))}}}}for(ce=[],V=_;V=V.parentNode;)V.nodeType===1&&ce.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ce.length;_++){var ie=ce[_];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Uo=!!Vc,Kc=Vc=null}finally{dt=c,Q.p=s,O.T=a}}e.current=t,Qt=2}}function Wh(){if(Qt===2){Qt=0;var e=La,t=Gs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var s=Q.p;Q.p=2;var c=dt;dt|=4;try{vh(e,t.alternate,t)}finally{dt=c,Q.p=s,O.T=a}}Qt=3}}function Hh(){if(Qt===4||Qt===3){Qt=0,Le();var e=La,t=Gs,a=Vs,s=zh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Qt=5:(Qt=0,Gs=La=null,Fh(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ia=null),Ye(a),t=t.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(q,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=O.T,c=Q.p,Q.p=2,O.T=null;try{for(var f=e.onRecoverableError,b=0;b<s.length;b++){var _=s[b];f(_.value,{componentStack:_.stack})}}finally{O.T=t,Q.p=c}}(Vs&3)!==0&&To(),Kn(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===Bc?ai++:(ai=0,Bc=e):ai=0,si(0)}}function Fh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ir(t)))}function To(e){return $h(),Wh(),Hh(),Yh()}function Yh(){if(Qt!==5)return!1;var e=La,t=Dc;Dc=0;var a=Ye(Vs),s=O.T,c=Q.p;try{Q.p=32>a?32:a,O.T=null,a=Ac,Ac=null;var f=La,b=Vs;if(Qt=0,Gs=La=null,Vs=0,(dt&6)!==0)throw Error(o(331));var _=dt;if(dt|=4,Rh(f.current),Ch(f,f.current,b,a),dt=_,si(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(q,f)}catch{}return!0}finally{Q.p=c,O.T=s,Fh(e,t)}}function Gh(e,t,a){t=En(a,t),t=fc(e.stateNode,t,2),e=Ea(e,t,2),e!==null&&(Xe(e,2),Kn(e))}function yt(e,t,a){if(e.tag===3)Gh(e,e,a);else for(;t!==null;){if(t.tag===3){Gh(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ia===null||!Ia.has(s))){e=En(a,e),a=Xf(2),s=Ea(t,a,2),s!==null&&(Zf(a,s,t,e),Xe(s,2),Kn(s));break}}t=t.return}}function Lc(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new fx;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(a)||(Ec=!0,c.add(a),e=xx.bind(null,e,t,a),t.then(e,e))}function xx(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,bt===e&&(rt&a)===a&&(Tt===4||Tt===3&&(rt&62914560)===rt&&300>qe()-zc?(dt&2)===0&&Ks(e,0):Rc|=a,Ys===rt&&(Ys=0)),Kn(e)}function Vh(e,t){t===0&&(t=Oe()),e=zs(e,t),e!==null&&(Xe(e,t),Kn(e))}function yx(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Vh(e,a)}function bx(e,t){var a=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),Vh(e,a)}function vx(e,t){return Ne(e,t)}var Eo=null,Xs=null,Uc=!1,Ro=!1,Pc=!1,ps=0;function Kn(e){e!==Xs&&e.next===null&&(Xs===null?Eo=Xs=e:Xs=Xs.next=e),Ro=!0,Uc||(Uc=!0,Sx())}function si(e,t){if(!Pc&&Ro){Pc=!0;do for(var a=!1,s=Eo;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var f=0;else{var b=s.suspendedLanes,_=s.pingedLanes;f=(1<<31-Fe(42|e)+1)-1,f&=c&~(b&~_),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Zh(s,f))}else f=rt,f=y(s,s===bt?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(f&3)===0||M(s,f)||(a=!0,Zh(s,f));s=s.next}while(a);Pc=!1}}function _x(){Kh()}function Kh(){Ro=Uc=!1;var e=0;ps!==0&&(Nx()&&(e=ps),ps=0);for(var t=qe(),a=null,s=Eo;s!==null;){var c=s.next,f=Qh(s,t);f===0?(s.next=null,a===null?Eo=c:a.next=c,c===null&&(Xs=a)):(a=s,(e!==0||(f&3)!==0)&&(Ro=!0)),s=c}si(e)}function Qh(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var b=31-Fe(f),_=1<<b,z=c[b];z===-1?((_&a)===0||(_&s)!==0)&&(c[b]=te(_,t)):z<=t&&(e.expiredLanes|=_),f&=~_}if(t=bt,a=rt,a=y(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(ut===2||ut===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&A(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||M(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&A(s),Ye(a)){case 2:case 8:a=on;break;case 32:a=zt;break;case 268435456:a=tn;break;default:a=zt}return s=Xh.bind(null,e),a=Ne(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&A(s),e.callbackPriority=2,e.callbackNode=null,2}function Xh(e,t){if(Qt!==0&&Qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(To()&&e.callbackNode!==a)return null;var s=rt;return s=y(e,e===bt?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Ah(e,s,t),Qh(e,qe()),e.callbackNode!=null&&e.callbackNode===a?Xh.bind(null,e):null)}function Zh(e,t){if(To())return null;Ah(e,t,!0)}function Sx(){Dx(function(){(dt&6)!==0?Ne(ct,_x):Kh()})}function qc(){return ps===0&&(ps=ke()),ps}function Jh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ui(""+e)}function ep(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function wx(e,t,a,s,c){if(t==="submit"&&a&&a.stateNode===c){var f=Jh((c[Vt]||null).action),b=s.submitter;b&&(t=(t=b[Vt]||null)?Jh(t.formAction):b.getAttribute("formAction"),t!==null&&(f=t,b=null));var _=new Wi("action","action",null,s,c);e.push({event:_,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ps!==0){var z=b?ep(c,b):new FormData(c);oc(a,{pending:!0,data:z,method:c.method,action:f},null,z)}}else typeof f=="function"&&(_.preventDefault(),z=b?ep(c,b):new FormData(c),oc(a,{pending:!0,data:z,method:c.method,action:f},f,z))},currentTarget:c}]})}}for(var $c=0;$c<Cl.length;$c++){var Wc=Cl[$c],jx=Wc.toLowerCase(),kx=Wc[0].toUpperCase()+Wc.slice(1);In(jx,"on"+kx)}In(Du,"onAnimationEnd"),In(Au,"onAnimationIteration"),In(Bu,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In($m,"onTransitionRun"),In(Wm,"onTransitionStart"),In(Hm,"onTransitionCancel"),In(Mu,"onTransitionEnd"),wa("onMouseEnter",["mouseout","mouseover"]),wa("onMouseLeave",["mouseout","mouseover"]),wa("onPointerEnter",["pointerout","pointerover"]),wa("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ri));function tp(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],c=s.event;s=s.listeners;e:{var f=void 0;if(t)for(var b=s.length-1;0<=b;b--){var _=s[b],z=_.instance,F=_.currentTarget;if(_=_.listener,z!==f&&c.isPropagationStopped())break e;f=_,c.currentTarget=F;try{f(c)}catch(ae){mo(ae)}c.currentTarget=null,f=z}else for(b=0;b<s.length;b++){if(_=s[b],z=_.instance,F=_.currentTarget,_=_.listener,z!==f&&c.isPropagationStopped())break e;f=_,c.currentTarget=F;try{f(c)}catch(ae){mo(ae)}c.currentTarget=null,f=z}}}}function nt(e,t){var a=t[br];a===void 0&&(a=t[br]=new Set);var s=e+"__bubble";a.has(s)||(np(t,e,2,!1),a.add(s))}function Hc(e,t,a){var s=0;t&&(s|=4),np(a,e,s,t)}var No="_reactListening"+Math.random().toString(36).slice(2);function Fc(e){if(!e[No]){e[No]=!0,zi.forEach(function(a){a!=="selectionchange"&&(Cx.has(a)||Hc(a,!1,e),Hc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[No]||(t[No]=!0,Hc("selectionchange",!1,t))}}function np(e,t,a,s){switch(Cp(t)){case 2:var c=Jx;break;case 8:c=ey;break;default:c=rd}a=c.bind(null,t,a,e),c=void 0,!hl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function Yc(e,t,a,s,c){var f=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var b=s.tag;if(b===3||b===4){var _=s.stateNode.containerInfo;if(_===c)break;if(b===4)for(b=s.return;b!==null;){var z=b.tag;if((z===3||z===4)&&b.stateNode.containerInfo===c)return;b=b.return}for(;_!==null;){if(b=va(_),b===null)return;if(z=b.tag,z===5||z===6||z===26||z===27){s=f=b;continue e}_=_.parentNode}}s=s.return}lu(function(){var F=f,ae=ul(a),ce=[];e:{var G=Ou.get(e);if(G!==void 0){var V=Wi,$e=e;switch(e){case"keypress":if(qi(a)===0)break e;case"keydown":case"keyup":V=vm;break;case"focusin":$e="focus",V=xl;break;case"focusout":$e="blur",V=xl;break;case"beforeblur":case"afterblur":V=xl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=wm;break;case Du:case Au:case Bu:V=um;break;case Mu:V=km;break;case"scroll":case"scrollend":V=im;break;case"wheel":V=Tm;break;case"copy":case"cut":case"paste":V=hm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=hu;break;case"toggle":case"beforetoggle":V=Rm}var Ue=(t&4)!==0,gt=!Ue&&(e==="scroll"||e==="scrollend"),U=Ue?G!==null?G+"Capture":null:G;Ue=[];for(var B=F,H;B!==null;){var ie=B;if(H=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||H===null||U===null||(ie=jr(B,U),ie!=null&&Ue.push(ii(B,ie,H))),gt)break;B=B.return}0<Ue.length&&(G=new V(G,$e,null,a,ae),ce.push({event:G,listeners:Ue}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",G&&a!==dl&&($e=a.relatedTarget||a.fromElement)&&(va($e)||$e[ln]))break e;if((V||G)&&(G=ae.window===ae?ae:(G=ae.ownerDocument)?G.defaultView||G.parentWindow:window,V?($e=a.relatedTarget||a.toElement,V=F,$e=$e?va($e):null,$e!==null&&(gt=u($e),Ue=$e.tag,$e!==gt||Ue!==5&&Ue!==27&&Ue!==6)&&($e=null)):(V=null,$e=F),V!==$e)){if(Ue=uu,ie="onMouseLeave",U="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(Ue=hu,ie="onPointerLeave",U="onPointerEnter",B="pointer"),gt=V==null?G:Xa(V),H=$e==null?G:Xa($e),G=new Ue(ie,B+"leave",V,a,ae),G.target=gt,G.relatedTarget=H,ie=null,va(ae)===F&&(Ue=new Ue(U,B+"enter",$e,a,ae),Ue.target=H,Ue.relatedTarget=gt,ie=Ue),gt=ie,V&&$e)t:{for(Ue=V,U=$e,B=0,H=Ue;H;H=Zs(H))B++;for(H=0,ie=U;ie;ie=Zs(ie))H++;for(;0<B-H;)Ue=Zs(Ue),B--;for(;0<H-B;)U=Zs(U),H--;for(;B--;){if(Ue===U||U!==null&&Ue===U.alternate)break t;Ue=Zs(Ue),U=Zs(U)}Ue=null}else Ue=null;V!==null&&ap(ce,G,V,Ue,!1),$e!==null&&gt!==null&&ap(ce,gt,$e,Ue,!0)}}e:{if(G=F?Xa(F):window,V=G.nodeName&&G.nodeName.toLowerCase(),V==="select"||V==="input"&&G.type==="file")var Re=_u;else if(bu(G))if(Su)Re=Um;else{Re=Im;var Ze=Om}else V=G.nodeName,!V||V.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&cl(F.elementType)&&(Re=_u):Re=Lm;if(Re&&(Re=Re(e,F))){vu(ce,Re,a,ae);break e}Ze&&Ze(e,G,F),e==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&ft(G,"number",G.value)}switch(Ze=F?Xa(F):window,e){case"focusin":(bu(Ze)||Ze.contentEditable==="true")&&(Es=Ze,wl=F,Dr=null);break;case"focusout":Dr=wl=Es=null;break;case"mousedown":jl=!0;break;case"contextmenu":case"mouseup":case"dragend":jl=!1,Nu(ce,a,ae);break;case"selectionchange":if(qm)break;case"keydown":case"keyup":Nu(ce,a,ae)}var De;if(bl)e:{switch(e){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Ts?xu(e,a)&&(Pe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(pu&&a.locale!=="ko"&&(Ts||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Ts&&(De=cu()):(ja=ae,pl="value"in ja?ja.value:ja.textContent,Ts=!0)),Ze=zo(F,Pe),0<Ze.length&&(Pe=new fu(Pe,e,null,a,ae),ce.push({event:Pe,listeners:Ze}),De?Pe.data=De:(De=yu(a),De!==null&&(Pe.data=De)))),(De=zm?Dm(e,a):Am(e,a))&&(Pe=zo(F,"onBeforeInput"),0<Pe.length&&(Ze=new fu("onBeforeInput","beforeinput",null,a,ae),ce.push({event:Ze,listeners:Pe}),Ze.data=De)),wx(ce,e,F,a,ae)}tp(ce,t)})}function ii(e,t,a){return{instance:e,listener:t,currentTarget:a}}function zo(e,t){for(var a=t+"Capture",s=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=jr(e,a),c!=null&&s.unshift(ii(e,c,f)),c=jr(e,t),c!=null&&s.push(ii(e,c,f))),e.tag===3)return s;e=e.return}return[]}function Zs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ap(e,t,a,s,c){for(var f=t._reactName,b=[];a!==null&&a!==s;){var _=a,z=_.alternate,F=_.stateNode;if(_=_.tag,z!==null&&z===s)break;_!==5&&_!==26&&_!==27||F===null||(z=F,c?(F=jr(a,f),F!=null&&b.unshift(ii(a,F,z))):c||(F=jr(a,f),F!=null&&b.push(ii(a,F,z)))),a=a.return}b.length!==0&&e.push({event:t,listeners:b})}var Tx=/\r\n?/g,Ex=/\u0000|\uFFFD/g;function sp(e){return(typeof e=="string"?e:""+e).replace(Tx,`
`).replace(Ex,"")}function rp(e,t){return t=sp(t),sp(e)===t}function Do(){}function pt(e,t,a,s,c,f){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Tn(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Tn(e,""+s);break;case"className":Za(e,"class",s);break;case"tabIndex":Za(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Za(e,a,s);break;case"style":iu(e,s,f);break;case"data":if(t!=="object"){Za(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Ui(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(t!=="input"&&pt(e,t,"name",c.name,c,null),pt(e,t,"formEncType",c.formEncType,c,null),pt(e,t,"formMethod",c.formMethod,c,null),pt(e,t,"formTarget",c.formTarget,c,null)):(pt(e,t,"encType",c.encType,c,null),pt(e,t,"method",c.method,c,null),pt(e,t,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Ui(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Do);break;case"onScroll":s!=null&&nt("scroll",e);break;case"onScrollEnd":s!=null&&nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(a=s.__html,a!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Ui(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":nt("beforetoggle",e),nt("toggle",e),_s(e,"popover",s);break;case"xlinkActuate":Cn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Cn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Cn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Cn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Cn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Cn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":_s(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=sm.get(a)||a,_s(e,a,s))}}function Gc(e,t,a,s,c,f){switch(a){case"style":iu(e,s,f);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(a=s.__html,a!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof s=="string"?Tn(e,s):(typeof s=="number"||typeof s=="bigint")&&Tn(e,""+s);break;case"onScroll":s!=null&&nt("scroll",e);break;case"onScrollEnd":s!=null&&nt("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Do);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Di.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),f=e[Vt]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(t,f,c),typeof s=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,c);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):_s(e,a,s)}}}function Xt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",e),nt("load",e);var s=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:pt(e,t,f,b,a,null)}}c&&pt(e,t,"srcSet",a.srcSet,a,null),s&&pt(e,t,"src",a.src,a,null);return;case"input":nt("invalid",e);var _=f=b=c=null,z=null,F=null;for(s in a)if(a.hasOwnProperty(s)){var ae=a[s];if(ae!=null)switch(s){case"name":c=ae;break;case"type":b=ae;break;case"checked":z=ae;break;case"defaultChecked":F=ae;break;case"value":f=ae;break;case"defaultValue":_=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(o(137,t));break;default:pt(e,t,s,ae,a,null)}}Ke(e,f,_,z,F,b,c,!1),re(e);return;case"select":nt("invalid",e),s=b=f=null;for(c in a)if(a.hasOwnProperty(c)&&(_=a[c],_!=null))switch(c){case"value":f=_;break;case"defaultValue":b=_;break;case"multiple":s=_;default:pt(e,t,c,_,a,null)}t=f,a=b,e.multiple=!!s,t!=null?it(e,!!s,t,!1):a!=null&&it(e,!!s,a,!0);return;case"textarea":nt("invalid",e),f=c=s=null;for(b in a)if(a.hasOwnProperty(b)&&(_=a[b],_!=null))switch(b){case"value":s=_;break;case"defaultValue":c=_;break;case"children":f=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(o(91));break;default:pt(e,t,b,_,a,null)}Ot(e,s,c,f),re(e);return;case"option":for(z in a)if(a.hasOwnProperty(z)&&(s=a[z],s!=null))switch(z){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:pt(e,t,z,s,a,null)}return;case"dialog":nt("beforetoggle",e),nt("toggle",e),nt("cancel",e),nt("close",e);break;case"iframe":case"object":nt("load",e);break;case"video":case"audio":for(s=0;s<ri.length;s++)nt(ri[s],e);break;case"image":nt("error",e),nt("load",e);break;case"details":nt("toggle",e);break;case"embed":case"source":case"link":nt("error",e),nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(s=a[F],s!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:pt(e,t,F,s,a,null)}return;default:if(cl(t)){for(ae in a)a.hasOwnProperty(ae)&&(s=a[ae],s!==void 0&&Gc(e,t,ae,s,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(s=a[_],s!=null&&pt(e,t,_,s,a,null))}function Rx(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,b=null,_=null,z=null,F=null,ae=null;for(V in a){var ce=a[V];if(a.hasOwnProperty(V)&&ce!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":z=ce;default:s.hasOwnProperty(V)||pt(e,t,V,null,s,ce)}}for(var G in s){var V=s[G];if(ce=a[G],s.hasOwnProperty(G)&&(V!=null||ce!=null))switch(G){case"type":f=V;break;case"name":c=V;break;case"checked":F=V;break;case"defaultChecked":ae=V;break;case"value":b=V;break;case"defaultValue":_=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,t));break;default:V!==ce&&pt(e,t,G,V,s,ce)}}Ae(e,b,_,z,F,ae,f,c);return;case"select":V=b=_=G=null;for(f in a)if(z=a[f],a.hasOwnProperty(f)&&z!=null)switch(f){case"value":break;case"multiple":V=z;default:s.hasOwnProperty(f)||pt(e,t,f,null,s,z)}for(c in s)if(f=s[c],z=a[c],s.hasOwnProperty(c)&&(f!=null||z!=null))switch(c){case"value":G=f;break;case"defaultValue":_=f;break;case"multiple":b=f;default:f!==z&&pt(e,t,c,f,s,z)}t=_,a=b,s=V,G!=null?it(e,!!a,G,!1):!!s!=!!a&&(t!=null?it(e,!!a,t,!0):it(e,!!a,a?[]:"",!1));return;case"textarea":V=G=null;for(_ in a)if(c=a[_],a.hasOwnProperty(_)&&c!=null&&!s.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:pt(e,t,_,null,s,c)}for(b in s)if(c=s[b],f=a[b],s.hasOwnProperty(b)&&(c!=null||f!=null))switch(b){case"value":G=c;break;case"defaultValue":V=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==f&&pt(e,t,b,c,s,f)}et(e,G,V);return;case"option":for(var $e in a)if(G=a[$e],a.hasOwnProperty($e)&&G!=null&&!s.hasOwnProperty($e))switch($e){case"selected":e.selected=!1;break;default:pt(e,t,$e,null,s,G)}for(z in s)if(G=s[z],V=a[z],s.hasOwnProperty(z)&&G!==V&&(G!=null||V!=null))switch(z){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:pt(e,t,z,G,s,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in a)G=a[Ue],a.hasOwnProperty(Ue)&&G!=null&&!s.hasOwnProperty(Ue)&&pt(e,t,Ue,null,s,G);for(F in s)if(G=s[F],V=a[F],s.hasOwnProperty(F)&&G!==V&&(G!=null||V!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(137,t));break;default:pt(e,t,F,G,s,V)}return;default:if(cl(t)){for(var gt in a)G=a[gt],a.hasOwnProperty(gt)&&G!==void 0&&!s.hasOwnProperty(gt)&&Gc(e,t,gt,void 0,s,G);for(ae in s)G=s[ae],V=a[ae],!s.hasOwnProperty(ae)||G===V||G===void 0&&V===void 0||Gc(e,t,ae,G,s,V);return}}for(var U in a)G=a[U],a.hasOwnProperty(U)&&G!=null&&!s.hasOwnProperty(U)&&pt(e,t,U,null,s,G);for(ce in s)G=s[ce],V=a[ce],!s.hasOwnProperty(ce)||G===V||G==null&&V==null||pt(e,t,ce,G,s,V)}var Vc=null,Kc=null;function Ao(e){return e.nodeType===9?e:e.ownerDocument}function ip(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function op(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Qc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xc=null;function Nx(){var e=window.event;return e&&e.type==="popstate"?e===Xc?!1:(Xc=e,!0):(Xc=null,!1)}var lp=typeof setTimeout=="function"?setTimeout:void 0,zx=typeof clearTimeout=="function"?clearTimeout:void 0,cp=typeof Promise=="function"?Promise:void 0,Dx=typeof queueMicrotask=="function"?queueMicrotask:typeof cp<"u"?function(e){return cp.resolve(null).then(e).catch(Ax)}:lp;function Ax(e){setTimeout(function(){throw e})}function Pa(e){return e==="head"}function dp(e,t){var a=t,s=0,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<s&&8>s){a=s;var b=e.ownerDocument;if(a&1&&oi(b.documentElement),a&2&&oi(b.body),a&4)for(a=b.head,oi(a),b=a.firstChild;b;){var _=b.nextSibling,z=b.nodeName;b[Qa]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=_}}if(c===0){e.removeChild(f),gi(t);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:s=a.charCodeAt(0)-48;else s=0;a=f}while(a);gi(t)}function Zc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zc(a),ba(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Bx(e,t,a,s){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Qa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Un(e.nextSibling),e===null)break}return null}function Mx(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Un(e.nextSibling),e===null))return null;return e}function Jc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ox(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ed=null;function up(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function fp(e,t,a){switch(t=Ao(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function oi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ba(e)}var Bn=new Map,hp=new Set;function Bo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ha=Q.d;Q.d={f:Ix,r:Lx,D:Ux,C:Px,L:qx,m:$x,X:Hx,S:Wx,M:Fx};function Ix(){var e=ha.f(),t=ko();return e||t}function Lx(e){var t=_a(e);t!==null&&t.tag===5&&t.type==="form"?Af(t):ha.r(e)}var Js=typeof document>"u"?null:document;function pp(e,t,a){var s=Js;if(s&&typeof t=="string"&&t){var c=we(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),hp.has(c)||(hp.add(c),e={rel:e,crossOrigin:a,href:t},s.querySelector(c)===null&&(t=s.createElement("link"),Xt(t,"link",e),At(t),s.head.appendChild(t)))}}function Ux(e){ha.D(e),pp("dns-prefetch",e,null)}function Px(e,t){ha.C(e,t),pp("preconnect",e,t)}function qx(e,t,a){ha.L(e,t,a);var s=Js;if(s&&e&&t){var c='link[rel="preload"][as="'+we(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+we(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+we(a.imageSizes)+'"]')):c+='[href="'+we(e)+'"]';var f=c;switch(t){case"style":f=er(e);break;case"script":f=tr(e)}Bn.has(f)||(e=x({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Bn.set(f,e),s.querySelector(c)!==null||t==="style"&&s.querySelector(li(f))||t==="script"&&s.querySelector(ci(f))||(t=s.createElement("link"),Xt(t,"link",e),At(t),s.head.appendChild(t)))}}function $x(e,t){ha.m(e,t);var a=Js;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+we(s)+'"][href="'+we(e)+'"]',f=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=tr(e)}if(!Bn.has(f)&&(e=x({rel:"modulepreload",href:e},t),Bn.set(f,e),a.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ci(f)))return}s=a.createElement("link"),Xt(s,"link",e),At(s),a.head.appendChild(s)}}}function Wx(e,t,a){ha.S(e,t,a);var s=Js;if(s&&e){var c=Sa(s).hoistableStyles,f=er(e);t=t||"default";var b=c.get(f);if(!b){var _={loading:0,preload:null};if(b=s.querySelector(li(f)))_.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Bn.get(f))&&td(e,a);var z=b=s.createElement("link");At(z),Xt(z,"link",e),z._p=new Promise(function(F,ae){z.onload=F,z.onerror=ae}),z.addEventListener("load",function(){_.loading|=1}),z.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Mo(b,t,s)}b={type:"stylesheet",instance:b,count:1,state:_},c.set(f,b)}}}function Hx(e,t){ha.X(e,t);var a=Js;if(a&&e){var s=Sa(a).hoistableScripts,c=tr(e),f=s.get(c);f||(f=a.querySelector(ci(c)),f||(e=x({src:e,async:!0},t),(t=Bn.get(c))&&nd(e,t),f=a.createElement("script"),At(f),Xt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},s.set(c,f))}}function Fx(e,t){ha.M(e,t);var a=Js;if(a&&e){var s=Sa(a).hoistableScripts,c=tr(e),f=s.get(c);f||(f=a.querySelector(ci(c)),f||(e=x({src:e,async:!0,type:"module"},t),(t=Bn.get(c))&&nd(e,t),f=a.createElement("script"),At(f),Xt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},s.set(c,f))}}function gp(e,t,a,s){var c=(c=Ee.current)?Bo(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=er(a.href),a=Sa(c).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=er(a.href);var f=Sa(c).hoistableStyles,b=f.get(e);if(b||(c=c.ownerDocument||c,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,b),(f=c.querySelector(li(e)))&&!f._p&&(b.instance=f,b.state.loading=5),Bn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bn.set(e,a),f||Yx(c,e,a,b.state))),t&&s===null)throw Error(o(528,""));return b}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=tr(a),a=Sa(c).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function er(e){return'href="'+we(e)+'"'}function li(e){return'link[rel="stylesheet"]['+e+"]"}function mp(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Yx(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Xt(t,"link",a),At(t),e.head.appendChild(t))}function tr(e){return'[src="'+we(e)+'"]'}function ci(e){return"script[async]"+e}function xp(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+we(a.href)+'"]');if(s)return t.instance=s,At(s),s;var c=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),At(s),Xt(s,"style",c),Mo(s,a.precedence,e),t.instance=s;case"stylesheet":c=er(a.href);var f=e.querySelector(li(c));if(f)return t.state.loading|=4,t.instance=f,At(f),f;s=mp(a),(c=Bn.get(c))&&td(s,c),f=(e.ownerDocument||e).createElement("link"),At(f);var b=f;return b._p=new Promise(function(_,z){b.onload=_,b.onerror=z}),Xt(f,"link",s),t.state.loading|=4,Mo(f,a.precedence,e),t.instance=f;case"script":return f=tr(a.src),(c=e.querySelector(ci(f)))?(t.instance=c,At(c),c):(s=a,(c=Bn.get(f))&&(s=x({},a),nd(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),At(c),Xt(c,"link",s),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Mo(s,a.precedence,e));return t.instance}function Mo(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,f=c,b=0;b<s.length;b++){var _=s[b];if(_.dataset.precedence===t)f=_;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function td(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function nd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Oo=null;function yp(e,t,a){if(Oo===null){var s=new Map,c=Oo=new Map;c.set(a,s)}else c=Oo,s=c.get(a),s||(s=new Map,c.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var f=a[c];if(!(f[Qa]||f[xt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(t)||"";b=e+b;var _=s.get(b);_?_.push(f):s.set(b,[f])}}return s}function bp(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Gx(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function vp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var di=null;function Vx(){}function Kx(e,t,a){if(di===null)throw Error(o(475));var s=di;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var c=er(a.href),f=e.querySelector(li(c));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Io.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=f,At(f);return}f=e.ownerDocument||e,a=mp(a),(c=Bn.get(c))&&td(a,c),f=f.createElement("link"),At(f);var b=f;b._p=new Promise(function(_,z){b.onload=_,b.onerror=z}),Xt(f,"link",a),t.instance=f}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(s.count++,t=Io.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function Qx(){if(di===null)throw Error(o(475));var e=di;return e.stylesheets&&e.count===0&&ad(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&ad(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Io(){if(this.count--,this.count===0){if(this.stylesheets)ad(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Lo=null;function ad(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Lo=new Map,t.forEach(Xx,e),Lo=null,Io.call(e))}function Xx(e,t){if(!(t.state.loading&4)){var a=Lo.get(e);if(a)var s=a.get(null);else{a=new Map,Lo.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var b=c[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),s=b)}s&&a.set(null,s)}c=t.instance,b=c.getAttribute("data-precedence"),f=a.get(b)||s,f===s&&a.set(null,c),a.set(b,c),this.count++,s=Io.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var ui={$$typeof:I,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function Zx(e,t,a,s,c,f,b,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function _p(e,t,a,s,c,f,b,_,z,F,ae,ce){return e=new Zx(e,t,a,b,_,z,F,ce),t=1,f===!0&&(t|=24),f=xn(3,null,null,t),e.current=f,f.stateNode=e,t=Ll(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:s,isDehydrated:a,cache:t},$l(f),e}function Sp(e){return e?(e=Ds,e):Ds}function wp(e,t,a,s,c,f){c=Sp(c),s.context===null?s.context=c:s.pendingContext=c,s=Ta(t),s.payload={element:a},f=f===void 0?null:f,f!==null&&(s.callback=f),a=Ea(e,s,t),a!==null&&(Sn(a,e,t),qr(a,e,t))}function jp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function sd(e,t){jp(e,t),(e=e.alternate)&&jp(e,t)}function kp(e){if(e.tag===13){var t=zs(e,67108864);t!==null&&Sn(t,e,67108864),sd(e,67108864)}}var Uo=!0;function Jx(e,t,a,s){var c=O.T;O.T=null;var f=Q.p;try{Q.p=2,rd(e,t,a,s)}finally{Q.p=f,O.T=c}}function ey(e,t,a,s){var c=O.T;O.T=null;var f=Q.p;try{Q.p=8,rd(e,t,a,s)}finally{Q.p=f,O.T=c}}function rd(e,t,a,s){if(Uo){var c=id(s);if(c===null)Yc(e,t,s,Po,a),Tp(e,s);else if(ny(c,e,t,a,s))s.stopPropagation();else if(Tp(e,s),t&4&&-1<ty.indexOf(e)){for(;c!==null;){var f=_a(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=_t(f.pendingLanes);if(b!==0){var _=f;for(_.pendingLanes|=2,_.entangledLanes|=2;b;){var z=1<<31-Fe(b);_.entanglements[1]|=z,b&=~z}Kn(f),(dt&6)===0&&(wo=qe()+500,si(0))}}break;case 13:_=zs(f,2),_!==null&&Sn(_,f,2),ko(),sd(f,2)}if(f=id(s),f===null&&Yc(e,t,s,Po,a),f===c)break;c=f}c!==null&&s.stopPropagation()}else Yc(e,t,s,null,a)}}function id(e){return e=ul(e),od(e)}var Po=null;function od(e){if(Po=null,e=va(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Po=e,null}function Cp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case ct:return 2;case on:return 8;case zt:case Gt:return 32;case tn:return 268435456;default:return 32}default:return 32}}var ld=!1,qa=null,$a=null,Wa=null,fi=new Map,hi=new Map,Ha=[],ty="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tp(e,t){switch(e){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":fi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hi.delete(t.pointerId)}}function pi(e,t,a,s,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:f,targetContainers:[c]},t!==null&&(t=_a(t),t!==null&&kp(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function ny(e,t,a,s,c){switch(t){case"focusin":return qa=pi(qa,e,t,a,s,c),!0;case"dragenter":return $a=pi($a,e,t,a,s,c),!0;case"mouseover":return Wa=pi(Wa,e,t,a,s,c),!0;case"pointerover":var f=c.pointerId;return fi.set(f,pi(fi.get(f)||null,e,t,a,s,c)),!0;case"gotpointercapture":return f=c.pointerId,hi.set(f,pi(hi.get(f)||null,e,t,a,s,c)),!0}return!1}function Ep(e){var t=va(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,pn(e.priority,function(){if(a.tag===13){var s=_n();s=kn(s);var c=zs(a,s);c!==null&&Sn(c,a,s),sd(a,s)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=id(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);dl=s,a.target.dispatchEvent(s),dl=null}else return t=_a(a),t!==null&&kp(t),e.blockedOn=a,!1;t.shift()}return!0}function Rp(e,t,a){qo(e)&&a.delete(t)}function ay(){ld=!1,qa!==null&&qo(qa)&&(qa=null),$a!==null&&qo($a)&&($a=null),Wa!==null&&qo(Wa)&&(Wa=null),fi.forEach(Rp),hi.forEach(Rp)}function $o(e,t){e.blockedOn===t&&(e.blockedOn=null,ld||(ld=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,ay)))}var Wo=null;function Np(e){Wo!==e&&(Wo=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Wo===e&&(Wo=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],c=e[t+2];if(typeof s!="function"){if(od(s||a)===null)continue;break}var f=_a(a);f!==null&&(e.splice(t,3),t-=3,oc(f,{pending:!0,data:c,method:a.method,action:s},s,c))}}))}function gi(e){function t(z){return $o(z,e)}qa!==null&&$o(qa,e),$a!==null&&$o($a,e),Wa!==null&&$o(Wa,e),fi.forEach(t),hi.forEach(t);for(var a=0;a<Ha.length;a++){var s=Ha[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ha.length&&(a=Ha[0],a.blockedOn===null);)Ep(a),a.blockedOn===null&&Ha.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var c=a[s],f=a[s+1],b=c[Vt]||null;if(typeof f=="function")b||Np(a);else if(b){var _=null;if(f&&f.hasAttribute("formAction")){if(c=f,b=f[Vt]||null)_=b.formAction;else if(od(c)!==null)continue}else _=b.action;typeof _=="function"?a[s+1]=_:(a.splice(s,3),s-=3),Np(a)}}}function cd(e){this._internalRoot=e}Ho.prototype.render=cd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,s=_n();wp(a,s,e,t,null,null)},Ho.prototype.unmount=cd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wp(e.current,2,null,e,null,null),ko(),t[ln]=null}};function Ho(e){this._internalRoot=e}Ho.prototype.unstable_scheduleHydration=function(e){if(e){var t=an();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ha.length&&t!==0&&t<Ha[a].priority;a++);Ha.splice(a,0,e),a===0&&Ep(e)}};var zp=r.version;if(zp!=="19.1.1")throw Error(o(527,zp,"19.1.1"));Q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var sy={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fo.isDisabled&&Fo.supportsFiber)try{q=Fo.inject(sy),me=Fo}catch{}}return xi.createRoot=function(e,t){if(!d(e))throw Error(o(299));var a=!1,s="",c=Gf,f=Vf,b=Kf,_=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(_=t.unstable_transitionCallbacks)),t=_p(e,1,!1,null,null,a,s,c,f,b,_,null),e[ln]=t.current,Fc(e),new cd(t)},xi.hydrateRoot=function(e,t,a){if(!d(e))throw Error(o(299));var s=!1,c="",f=Gf,b=Vf,_=Kf,z=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(z=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),t=_p(e,1,!0,t,a??null,s,c,f,b,_,z,F),t.context=Sp(null),a=t.current,s=_n(),s=kn(s),c=Ta(s),c.callback=null,Ea(a,c,s),a=s,t.current.lanes=a,Xe(t,a),Kn(t),e[ln]=t.current,Fc(e),new Ho(t)},xi.version="19.1.1",xi}var qp;function gy(){if(qp)return fd.exports;qp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),fd.exports=py(),fd.exports}var my=gy();const xy=Wd(my);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $p="popstate";function yy(l={}){function r(o,d){let{pathname:u,search:h,hash:p}=o.location;return Ed("",{pathname:u,search:h,hash:p},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function i(o,d){return typeof d=="string"?d:ki(d)}return vy(r,i,null,l)}function wt(l,r){if(l===!1||l===null||typeof l>"u")throw new Error(r)}function Mn(l,r){if(!l){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function by(){return Math.random().toString(36).substring(2,10)}function Wp(l,r){return{usr:l.state,key:l.key,idx:r}}function Ed(l,r,i=null,o){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof r=="string"?gr(r):r,state:i,key:r&&r.key||o||by()}}function ki({pathname:l="/",search:r="",hash:i=""}){return r&&r!=="?"&&(l+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(l+=i.charAt(0)==="#"?i:"#"+i),l}function gr(l){let r={};if(l){let i=l.indexOf("#");i>=0&&(r.hash=l.substring(i),l=l.substring(0,i));let o=l.indexOf("?");o>=0&&(r.search=l.substring(o),l=l.substring(0,o)),l&&(r.pathname=l)}return r}function vy(l,r,i,o={}){let{window:d=document.defaultView,v5Compat:u=!1}=o,h=d.history,p="POP",g=null,m=x();m==null&&(m=0,h.replaceState({...h.state,idx:m},""));function x(){return(h.state||{idx:null}).idx}function S(){p="POP";let D=x(),P=D==null?null:D-m;m=D,g&&g({action:p,location:N.location,delta:P})}function E(D,P){p="PUSH";let R=Ed(N.location,D,P);m=x()+1;let I=Wp(R,m),Z=N.createHref(R);try{h.pushState(I,"",Z)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;d.location.assign(Z)}u&&g&&g({action:p,location:N.location,delta:1})}function k(D,P){p="REPLACE";let R=Ed(N.location,D,P);m=x();let I=Wp(R,m),Z=N.createHref(R);h.replaceState(I,"",Z),u&&g&&g({action:p,location:N.location,delta:0})}function T(D){return _y(D)}let N={get action(){return p},get location(){return l(d,h)},listen(D){if(g)throw new Error("A history only accepts one active listener");return d.addEventListener($p,S),g=D,()=>{d.removeEventListener($p,S),g=null}},createHref(D){return r(d,D)},createURL:T,encodeLocation(D){let P=T(D);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:E,replace:k,go(D){return h.go(D)}};return N}function _y(l,r=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),wt(i,"No window.location.(origin|href) available to create URL");let o=typeof l=="string"?l:ki(l);return o=o.replace(/ $/,"%20"),!r&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function Sg(l,r,i="/"){return Sy(l,r,i,!1)}function Sy(l,r,i,o){let d=typeof r=="string"?gr(r):r,u=ya(d.pathname||"/",i);if(u==null)return null;let h=wg(l);wy(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let m=By(u);p=Dy(h[g],m,o)}return p}function wg(l,r=[],i=[],o="",d=!1){let u=(h,p,g=d,m)=>{let x={relativePath:m===void 0?h.path||"":m,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(o)&&g)return;wt(x.relativePath.startsWith(o),`Absolute route path "${x.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(o.length)}let S=xa([o,x.relativePath]),E=i.concat(x);h.children&&h.children.length>0&&(wt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),wg(h.children,r,E,S,g)),!(h.path==null&&!h.index)&&r.push({path:S,score:Ny(S,h.index),routesMeta:E})};return l.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of jg(h.path))u(h,p,!0,g)}),r}function jg(l){let r=l.split("/");if(r.length===0)return[];let[i,...o]=r,d=i.endsWith("?"),u=i.replace(/\?$/,"");if(o.length===0)return d?[u,""]:[u];let h=jg(o.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),d&&p.push(...h),p.map(g=>l.startsWith("/")&&g===""?"/":g)}function wy(l){l.sort((r,i)=>r.score!==i.score?i.score-r.score:zy(r.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var jy=/^:[\w-]+$/,ky=3,Cy=2,Ty=1,Ey=10,Ry=-2,Hp=l=>l==="*";function Ny(l,r){let i=l.split("/"),o=i.length;return i.some(Hp)&&(o+=Ry),r&&(o+=Cy),i.filter(d=>!Hp(d)).reduce((d,u)=>d+(jy.test(u)?ky:u===""?Ty:Ey),o)}function zy(l,r){return l.length===r.length&&l.slice(0,-1).every((o,d)=>o===r[d])?l[l.length-1]-r[r.length-1]:0}function Dy(l,r,i=!1){let{routesMeta:o}=l,d={},u="/",h=[];for(let p=0;p<o.length;++p){let g=o[p],m=p===o.length-1,x=u==="/"?r:r.slice(u.length)||"/",S=tl({path:g.relativePath,caseSensitive:g.caseSensitive,end:m},x),E=g.route;if(!S&&m&&i&&!o[o.length-1].route.index&&(S=tl({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!S)return null;Object.assign(d,S.params),h.push({params:d,pathname:xa([u,S.pathname]),pathnameBase:Ly(xa([u,S.pathnameBase])),route:E}),S.pathnameBase!=="/"&&(u=xa([u,S.pathnameBase]))}return h}function tl(l,r){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[i,o]=Ay(l.path,l.caseSensitive,l.end),d=r.match(i);if(!d)return null;let u=d[0],h=u.replace(/(.)\/+$/,"$1"),p=d.slice(1);return{params:o.reduce((m,{paramName:x,isOptional:S},E)=>{if(x==="*"){let T=p[E]||"";h=u.slice(0,u.length-T.length).replace(/(.)\/+$/,"$1")}const k=p[E];return S&&!k?m[x]=void 0:m[x]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:u,pathnameBase:h,pattern:l}}function Ay(l,r=!1,i=!0){Mn(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let o=[],d="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(o.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(o.push({paramName:"*"}),d+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?d+="\\/*$":l!==""&&l!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,r?void 0:"i"),o]}function By(l){try{return l.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Mn(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),l}}function ya(l,r){if(r==="/")return l;if(!l.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,o=l.charAt(i);return o&&o!=="/"?null:l.slice(i)||"/"}function My(l,r="/"){let{pathname:i,search:o="",hash:d=""}=typeof l=="string"?gr(l):l;return{pathname:i?i.startsWith("/")?i:Oy(i,r):r,search:Uy(o),hash:Py(d)}}function Oy(l,r){let i=r.replace(/\/+$/,"").split("/");return l.split("/").forEach(d=>{d===".."?i.length>1&&i.pop():d!=="."&&i.push(d)}),i.length>1?i.join("/"):"/"}function md(l,r,i,o){return`Cannot include a '${l}' character in a manually specified \`to.${r}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Iy(l){return l.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function Fd(l){let r=Iy(l);return r.map((i,o)=>o===r.length-1?i.pathname:i.pathnameBase)}function Yd(l,r,i,o=!1){let d;typeof l=="string"?d=gr(l):(d={...l},wt(!d.pathname||!d.pathname.includes("?"),md("?","pathname","search",d)),wt(!d.pathname||!d.pathname.includes("#"),md("#","pathname","hash",d)),wt(!d.search||!d.search.includes("#"),md("#","search","hash",d)));let u=l===""||d.pathname==="",h=u?"/":d.pathname,p;if(h==null)p=i;else{let S=r.length-1;if(!o&&h.startsWith("..")){let E=h.split("/");for(;E[0]==="..";)E.shift(),S-=1;d.pathname=E.join("/")}p=S>=0?r[S]:"/"}let g=My(d,p),m=h&&h!=="/"&&h.endsWith("/"),x=(u||h===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(m||x)&&(g.pathname+="/"),g}var xa=l=>l.join("/").replace(/\/\/+/g,"/"),Ly=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),Uy=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Py=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function qy(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var kg=["POST","PUT","PATCH","DELETE"];new Set(kg);var $y=["GET",...kg];new Set($y);var mr=v.createContext(null);mr.displayName="DataRouter";var sl=v.createContext(null);sl.displayName="DataRouterState";v.createContext(!1);var Cg=v.createContext({isTransitioning:!1});Cg.displayName="ViewTransition";var Wy=v.createContext(new Map);Wy.displayName="Fetchers";var Hy=v.createContext(null);Hy.displayName="Await";var $n=v.createContext(null);$n.displayName="Navigation";var Ti=v.createContext(null);Ti.displayName="Location";var Wn=v.createContext({outlet:null,matches:[],isDataRoute:!1});Wn.displayName="Route";var Gd=v.createContext(null);Gd.displayName="RouteError";function Fy(l,{relative:r}={}){wt(xr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=v.useContext($n),{hash:d,pathname:u,search:h}=Ei(l,{relative:r}),p=u;return i!=="/"&&(p=u==="/"?i:xa([i,u])),o.createHref({pathname:p,search:h,hash:d})}function xr(){return v.useContext(Ti)!=null}function Hn(){return wt(xr(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Ti).location}var Tg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Eg(l){v.useContext($n).static||v.useLayoutEffect(l)}function bs(){let{isDataRoute:l}=v.useContext(Wn);return l?r0():Yy()}function Yy(){wt(xr(),"useNavigate() may be used only in the context of a <Router> component.");let l=v.useContext(mr),{basename:r,navigator:i}=v.useContext($n),{matches:o}=v.useContext(Wn),{pathname:d}=Hn(),u=JSON.stringify(Fd(o)),h=v.useRef(!1);return Eg(()=>{h.current=!0}),v.useCallback((g,m={})=>{if(Mn(h.current,Tg),!h.current)return;if(typeof g=="number"){i.go(g);return}let x=Yd(g,JSON.parse(u),d,m.relative==="path");l==null&&r!=="/"&&(x.pathname=x.pathname==="/"?r:xa([r,x.pathname])),(m.replace?i.replace:i.push)(x,m.state,m)},[r,i,u,d,l])}v.createContext(null);function Gy(){let{matches:l}=v.useContext(Wn),r=l[l.length-1];return r?r.params:{}}function Ei(l,{relative:r}={}){let{matches:i}=v.useContext(Wn),{pathname:o}=Hn(),d=JSON.stringify(Fd(i));return v.useMemo(()=>Yd(l,JSON.parse(d),o,r==="path"),[l,d,o,r])}function Vy(l,r){return Rg(l,r)}function Rg(l,r,i,o,d){wt(xr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=v.useContext($n),{matches:h}=v.useContext(Wn),p=h[h.length-1],g=p?p.params:{},m=p?p.pathname:"/",x=p?p.pathnameBase:"/",S=p&&p.route;{let R=S&&S.path||"";Ng(m,!S||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let E=Hn(),k;if(r){let R=typeof r=="string"?gr(r):r;wt(x==="/"||R.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${R.pathname}" was given in the \`location\` prop.`),k=R}else k=E;let T=k.pathname||"/",N=T;if(x!=="/"){let R=x.replace(/^\//,"").split("/");N="/"+T.replace(/^\//,"").split("/").slice(R.length).join("/")}let D=Sg(l,{pathname:N});Mn(S||D!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Mn(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=Jy(D&&D.map(R=>Object.assign({},R,{params:Object.assign({},g,R.params),pathname:xa([x,u.encodeLocation?u.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?x:xa([x,u.encodeLocation?u.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),h,i,o,d);return r&&P?v.createElement(Ti.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},P):P}function Ky(){let l=s0(),r=qy(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),i=l instanceof Error?l.stack:null,o="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},h=null;return console.error("Error handled by React Router default ErrorBoundary:",l),h=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:u},"ErrorBoundary")," or"," ",v.createElement("code",{style:u},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},r),i?v.createElement("pre",{style:d},i):null,h)}var Qy=v.createElement(Ky,null),Xy=class extends v.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,r){return r.location!==l.location||r.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:r.error,location:r.location,revalidation:l.revalidation||r.revalidation}}componentDidCatch(l,r){this.props.unstable_onError?this.props.unstable_onError(l,r):console.error("React Router caught the following error during render",l)}render(){return this.state.error!==void 0?v.createElement(Wn.Provider,{value:this.props.routeContext},v.createElement(Gd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Zy({routeContext:l,match:r,children:i}){let o=v.useContext(mr);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(Wn.Provider,{value:l},i)}function Jy(l,r=[],i=null,o=null,d=null){if(l==null){if(!i)return null;if(i.errors)l=i.matches;else if(r.length===0&&!i.initialized&&i.matches.length>0)l=i.matches;else return null}let u=l,h=i?.errors;if(h!=null){let m=u.findIndex(x=>x.route.id&&h?.[x.route.id]!==void 0);wt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,m+1))}let p=!1,g=-1;if(i)for(let m=0;m<u.length;m++){let x=u[m];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=m),x.route.id){let{loaderData:S,errors:E}=i,k=x.route.loader&&!S.hasOwnProperty(x.route.id)&&(!E||E[x.route.id]===void 0);if(x.route.lazy||k){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((m,x,S)=>{let E,k=!1,T=null,N=null;i&&(E=h&&x.route.id?h[x.route.id]:void 0,T=x.route.errorElement||Qy,p&&(g<0&&S===0?(Ng("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,N=null):g===S&&(k=!0,N=x.route.hydrateFallbackElement||null)));let D=r.concat(u.slice(0,S+1)),P=()=>{let R;return E?R=T:k?R=N:x.route.Component?R=v.createElement(x.route.Component,null):x.route.element?R=x.route.element:R=m,v.createElement(Zy,{match:x,routeContext:{outlet:m,matches:D,isDataRoute:i!=null},children:R})};return i&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?v.createElement(Xy,{location:i.location,revalidation:i.revalidation,component:T,error:E,children:P(),routeContext:{outlet:null,matches:D,isDataRoute:!0},unstable_onError:o}):P()},null)}function Vd(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e0(l){let r=v.useContext(mr);return wt(r,Vd(l)),r}function t0(l){let r=v.useContext(sl);return wt(r,Vd(l)),r}function n0(l){let r=v.useContext(Wn);return wt(r,Vd(l)),r}function Kd(l){let r=n0(l),i=r.matches[r.matches.length-1];return wt(i.route.id,`${l} can only be used on routes that contain a unique "id"`),i.route.id}function a0(){return Kd("useRouteId")}function s0(){let l=v.useContext(Gd),r=t0("useRouteError"),i=Kd("useRouteError");return l!==void 0?l:r.errors?.[i]}function r0(){let{router:l}=e0("useNavigate"),r=Kd("useNavigate"),i=v.useRef(!1);return Eg(()=>{i.current=!0}),v.useCallback(async(d,u={})=>{Mn(i.current,Tg),i.current&&(typeof d=="number"?l.navigate(d):await l.navigate(d,{fromRouteId:r,...u}))},[l,r])}var Fp={};function Ng(l,r,i){!r&&!Fp[l]&&(Fp[l]=!0,Mn(!1,i))}v.memo(i0);function i0({routes:l,future:r,state:i,unstable_onError:o}){return Rg(l,void 0,i,o,r)}function Yp({to:l,replace:r,state:i,relative:o}){wt(xr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=v.useContext($n);Mn(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=v.useContext(Wn),{pathname:h}=Hn(),p=bs(),g=Yd(l,Fd(u),h,o==="path"),m=JSON.stringify(g);return v.useEffect(()=>{p(JSON.parse(m),{replace:r,state:i,relative:o})},[p,m,o,r,i]),null}function pa(l){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function o0({basename:l="/",children:r=null,location:i,navigationType:o="POP",navigator:d,static:u=!1}){wt(!xr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=l.replace(/^\/*/,"/"),p=v.useMemo(()=>({basename:h,navigator:d,static:u,future:{}}),[h,d,u]);typeof i=="string"&&(i=gr(i));let{pathname:g="/",search:m="",hash:x="",state:S=null,key:E="default"}=i,k=v.useMemo(()=>{let T=ya(g,h);return T==null?null:{location:{pathname:T,search:m,hash:x,state:S,key:E},navigationType:o}},[h,g,m,x,S,E,o]);return Mn(k!=null,`<Router basename="${h}"> is not able to match the URL "${g}${m}${x}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:v.createElement($n.Provider,{value:p},v.createElement(Ti.Provider,{children:r,value:k}))}function l0({children:l,location:r}){return Vy(Rd(l),r)}function Rd(l,r=[]){let i=[];return v.Children.forEach(l,(o,d)=>{if(!v.isValidElement(o))return;let u=[...r,d];if(o.type===v.Fragment){i.push.apply(i,Rd(o.props.children,u));return}wt(o.type===pa,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!o.props.index||!o.props.children,"An index route cannot have child routes.");let h={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=Rd(o.props.children,u)),i.push(h)}),i}var Jo="get",el="application/x-www-form-urlencoded";function rl(l){return l!=null&&typeof l.tagName=="string"}function c0(l){return rl(l)&&l.tagName.toLowerCase()==="button"}function d0(l){return rl(l)&&l.tagName.toLowerCase()==="form"}function u0(l){return rl(l)&&l.tagName.toLowerCase()==="input"}function f0(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function h0(l,r){return l.button===0&&(!r||r==="_self")&&!f0(l)}function Nd(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((r,i)=>{let o=l[i];return r.concat(Array.isArray(o)?o.map(d=>[i,d]):[[i,o]])},[]))}function p0(l,r){let i=Nd(l);return r&&r.forEach((o,d)=>{i.has(d)||r.getAll(d).forEach(u=>{i.append(d,u)})}),i}var Yo=null;function g0(){if(Yo===null)try{new FormData(document.createElement("form"),0),Yo=!1}catch{Yo=!0}return Yo}var m0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xd(l){return l!=null&&!m0.has(l)?(Mn(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${el}"`),null):l}function x0(l,r){let i,o,d,u,h;if(d0(l)){let p=l.getAttribute("action");o=p?ya(p,r):null,i=l.getAttribute("method")||Jo,d=xd(l.getAttribute("enctype"))||el,u=new FormData(l)}else if(c0(l)||u0(l)&&(l.type==="submit"||l.type==="image")){let p=l.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=l.getAttribute("formaction")||p.getAttribute("action");if(o=g?ya(g,r):null,i=l.getAttribute("formmethod")||p.getAttribute("method")||Jo,d=xd(l.getAttribute("formenctype"))||xd(p.getAttribute("enctype"))||el,u=new FormData(p,l),!g0()){let{name:m,type:x,value:S}=l;if(x==="image"){let E=m?`${m}.`:"";u.append(`${E}x`,"0"),u.append(`${E}y`,"0")}else m&&u.append(m,S)}}else{if(rl(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Jo,o=null,d=el,h=l}return u&&d==="text/plain"&&(h=u,u=void 0),{action:o,method:i.toLowerCase(),encType:d,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qd(l,r){if(l===!1||l===null||typeof l>"u")throw new Error(r)}function y0(l,r,i){let o=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return o.pathname==="/"?o.pathname=`_root.${i}`:r&&ya(o.pathname,r)==="/"?o.pathname=`${r.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function b0(l,r){if(l.id in r)return r[l.id];try{let i=await import(l.module);return r[l.id]=i,i}catch(i){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function v0(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function _0(l,r,i){let o=await Promise.all(l.map(async d=>{let u=r.routes[d.route.id];if(u){let h=await b0(u,i);return h.links?h.links():[]}return[]}));return k0(o.flat(1).filter(v0).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Gp(l,r,i,o,d,u){let h=(g,m)=>i[m]?g.route.id!==i[m].route.id:!0,p=(g,m)=>i[m].pathname!==g.pathname||i[m].route.path?.endsWith("*")&&i[m].params["*"]!==g.params["*"];return u==="assets"?r.filter((g,m)=>h(g,m)||p(g,m)):u==="data"?r.filter((g,m)=>{let x=o.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(h(g,m)||p(g,m))return!0;if(g.route.shouldRevalidate){let S=g.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function S0(l,r,{includeHydrateFallback:i}={}){return w0(l.map(o=>{let d=r.routes[o.route.id];if(!d)return[];let u=[d.module];return d.clientActionModule&&(u=u.concat(d.clientActionModule)),d.clientLoaderModule&&(u=u.concat(d.clientLoaderModule)),i&&d.hydrateFallbackModule&&(u=u.concat(d.hydrateFallbackModule)),d.imports&&(u=u.concat(d.imports)),u}).flat(1))}function w0(l){return[...new Set(l)]}function j0(l){let r={},i=Object.keys(l).sort();for(let o of i)r[o]=l[o];return r}function k0(l,r){let i=new Set;return new Set(r),l.reduce((o,d)=>{let u=JSON.stringify(j0(d));return i.has(u)||(i.add(u),o.push({key:u,link:d})),o},[])}function zg(){let l=v.useContext(mr);return Qd(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function C0(){let l=v.useContext(sl);return Qd(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var Xd=v.createContext(void 0);Xd.displayName="FrameworkContext";function Dg(){let l=v.useContext(Xd);return Qd(l,"You must render this element inside a <HydratedRouter> element"),l}function T0(l,r){let i=v.useContext(Xd),[o,d]=v.useState(!1),[u,h]=v.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:m,onMouseLeave:x,onTouchStart:S}=r,E=v.useRef(null);v.useEffect(()=>{if(l==="render"&&h(!0),l==="viewport"){let N=P=>{P.forEach(R=>{h(R.isIntersecting)})},D=new IntersectionObserver(N,{threshold:.5});return E.current&&D.observe(E.current),()=>{D.disconnect()}}},[l]),v.useEffect(()=>{if(o){let N=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(N)}}},[o]);let k=()=>{d(!0)},T=()=>{d(!1),h(!1)};return i?l!=="intent"?[u,E,{}]:[u,E,{onFocus:yi(p,k),onBlur:yi(g,T),onMouseEnter:yi(m,k),onMouseLeave:yi(x,T),onTouchStart:yi(S,k)}]:[!1,E,{}]}function yi(l,r){return i=>{l&&l(i),i.defaultPrevented||r(i)}}function E0({page:l,...r}){let{router:i}=zg(),o=v.useMemo(()=>Sg(i.routes,l,i.basename),[i.routes,l,i.basename]);return o?v.createElement(N0,{page:l,matches:o,...r}):null}function R0(l){let{manifest:r,routeModules:i}=Dg(),[o,d]=v.useState([]);return v.useEffect(()=>{let u=!1;return _0(l,r,i).then(h=>{u||d(h)}),()=>{u=!0}},[l,r,i]),o}function N0({page:l,matches:r,...i}){let o=Hn(),{manifest:d,routeModules:u}=Dg(),{basename:h}=zg(),{loaderData:p,matches:g}=C0(),m=v.useMemo(()=>Gp(l,r,g,d,o,"data"),[l,r,g,d,o]),x=v.useMemo(()=>Gp(l,r,g,d,o,"assets"),[l,r,g,d,o]),S=v.useMemo(()=>{if(l===o.pathname+o.search+o.hash)return[];let T=new Set,N=!1;if(r.forEach(P=>{let R=d.routes[P.route.id];!R||!R.hasLoader||(!m.some(I=>I.route.id===P.route.id)&&P.route.id in p&&u[P.route.id]?.shouldRevalidate||R.hasClientLoader?N=!0:T.add(P.route.id))}),T.size===0)return[];let D=y0(l,h,"data");return N&&T.size>0&&D.searchParams.set("_routes",r.filter(P=>T.has(P.route.id)).map(P=>P.route.id).join(",")),[D.pathname+D.search]},[h,p,o,d,m,r,l,u]),E=v.useMemo(()=>S0(x,d),[x,d]),k=R0(x);return v.createElement(v.Fragment,null,S.map(T=>v.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...i})),E.map(T=>v.createElement("link",{key:T,rel:"modulepreload",href:T,...i})),k.map(({key:T,link:N})=>v.createElement("link",{key:T,nonce:i.nonce,...N})))}function z0(...l){return r=>{l.forEach(i=>{typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var Ag=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ag&&(window.__reactRouterVersion="7.9.1")}catch{}function D0({basename:l,children:r,window:i}){let o=v.useRef();o.current==null&&(o.current=yy({window:i,v5Compat:!0}));let d=o.current,[u,h]=v.useState({action:d.action,location:d.location}),p=v.useCallback(g=>{v.startTransition(()=>h(g))},[h]);return v.useLayoutEffect(()=>d.listen(p),[d,p]),v.createElement(o0,{basename:l,children:r,location:u.location,navigationType:u.action,navigator:d})}var Bg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zd=v.forwardRef(function({onClick:r,discover:i="render",prefetch:o="none",relative:d,reloadDocument:u,replace:h,state:p,target:g,to:m,preventScrollReset:x,viewTransition:S,...E},k){let{basename:T}=v.useContext($n),N=typeof m=="string"&&Bg.test(m),D,P=!1;if(typeof m=="string"&&N&&(D=m,Ag))try{let ye=new URL(window.location.href),ne=m.startsWith("//")?new URL(ye.protocol+m):new URL(m),X=ya(ne.pathname,T);ne.origin===ye.origin&&X!=null?m=X+ne.search+ne.hash:P=!0}catch{Mn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=Fy(m,{relative:d}),[I,Z,Y]=T0(o,E),le=O0(m,{replace:h,state:p,target:g,preventScrollReset:x,relative:d,viewTransition:S});function fe(ye){r&&r(ye),ye.defaultPrevented||le(ye)}let Se=v.createElement("a",{...E,...Y,href:D||R,onClick:P||u?r:fe,ref:z0(k,Z),target:g,"data-discover":!N&&i==="render"?"true":void 0});return I&&!N?v.createElement(v.Fragment,null,Se,v.createElement(E0,{page:R})):Se});Zd.displayName="Link";var A0=v.forwardRef(function({"aria-current":r="page",caseSensitive:i=!1,className:o="",end:d=!1,style:u,to:h,viewTransition:p,children:g,...m},x){let S=Ei(h,{relative:m.relative}),E=Hn(),k=v.useContext(sl),{navigator:T,basename:N}=v.useContext($n),D=k!=null&&$0(S)&&p===!0,P=T.encodeLocation?T.encodeLocation(S).pathname:S.pathname,R=E.pathname,I=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;i||(R=R.toLowerCase(),I=I?I.toLowerCase():null,P=P.toLowerCase()),I&&N&&(I=ya(I,N)||I);const Z=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let Y=R===P||!d&&R.startsWith(P)&&R.charAt(Z)==="/",le=I!=null&&(I===P||!d&&I.startsWith(P)&&I.charAt(P.length)==="/"),fe={isActive:Y,isPending:le,isTransitioning:D},Se=Y?r:void 0,ye;typeof o=="function"?ye=o(fe):ye=[o,Y?"active":null,le?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let ne=typeof u=="function"?u(fe):u;return v.createElement(Zd,{...m,"aria-current":Se,className:ye,ref:x,style:ne,to:h,viewTransition:p},typeof g=="function"?g(fe):g)});A0.displayName="NavLink";var B0=v.forwardRef(({discover:l="render",fetcherKey:r,navigate:i,reloadDocument:o,replace:d,state:u,method:h=Jo,action:p,onSubmit:g,relative:m,preventScrollReset:x,viewTransition:S,...E},k)=>{let T=P0(),N=q0(p,{relative:m}),D=h.toLowerCase()==="get"?"get":"post",P=typeof p=="string"&&Bg.test(p),R=I=>{if(g&&g(I),I.defaultPrevented)return;I.preventDefault();let Z=I.nativeEvent.submitter,Y=Z?.getAttribute("formmethod")||h;T(Z||I.currentTarget,{fetcherKey:r,method:Y,navigate:i,replace:d,state:u,relative:m,preventScrollReset:x,viewTransition:S})};return v.createElement("form",{ref:k,method:D,action:N,onSubmit:o?g:R,...E,"data-discover":!P&&l==="render"?"true":void 0})});B0.displayName="Form";function M0(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mg(l){let r=v.useContext(mr);return wt(r,M0(l)),r}function O0(l,{target:r,replace:i,state:o,preventScrollReset:d,relative:u,viewTransition:h}={}){let p=bs(),g=Hn(),m=Ei(l,{relative:u});return v.useCallback(x=>{if(h0(x,r)){x.preventDefault();let S=i!==void 0?i:ki(g)===ki(m);p(l,{replace:S,state:o,preventScrollReset:d,relative:u,viewTransition:h})}},[g,p,m,i,o,r,l,d,u,h])}function I0(l){Mn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=v.useRef(Nd(l)),i=v.useRef(!1),o=Hn(),d=v.useMemo(()=>p0(o.search,i.current?null:r.current),[o.search]),u=bs(),h=v.useCallback((p,g)=>{const m=Nd(typeof p=="function"?p(new URLSearchParams(d)):p);i.current=!0,u("?"+m,g)},[u,d]);return[d,h]}var L0=0,U0=()=>`__${String(++L0)}__`;function P0(){let{router:l}=Mg("useSubmit"),{basename:r}=v.useContext($n),i=a0();return v.useCallback(async(o,d={})=>{let{action:u,method:h,encType:p,formData:g,body:m}=x0(o,r);if(d.navigate===!1){let x=d.fetcherKey||U0();await l.fetch(x,i,d.action||u,{preventScrollReset:d.preventScrollReset,formData:g,body:m,formMethod:d.method||h,formEncType:d.encType||p,flushSync:d.flushSync})}else await l.navigate(d.action||u,{preventScrollReset:d.preventScrollReset,formData:g,body:m,formMethod:d.method||h,formEncType:d.encType||p,replace:d.replace,state:d.state,fromRouteId:i,flushSync:d.flushSync,viewTransition:d.viewTransition})},[l,r,i])}function q0(l,{relative:r}={}){let{basename:i}=v.useContext($n),o=v.useContext(Wn);wt(o,"useFormAction must be used inside a RouteContext");let[d]=o.matches.slice(-1),u={...Ei(l||".",{relative:r})},h=Hn();if(l==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(S=>S).forEach(S=>p.append("index",S));let x=p.toString();u.search=x?`?${x}`:""}}return(!l||l===".")&&d.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:xa([i,u.pathname])),ki(u)}function $0(l,{relative:r}={}){let i=v.useContext(Cg);wt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Mg("useViewTransitionState"),d=Ei(l,{relative:r});if(!i.isTransitioning)return!1;let u=ya(i.currentLocation.pathname,o)||i.currentLocation.pathname,h=ya(i.nextLocation.pathname,o)||i.nextLocation.pathname;return tl(d.pathname,h)!=null||tl(d.pathname,u)!=null}const W0="modulepreload",H0=function(l){return"/"+l},Vp={},Ri=function(r,i,o){let d=Promise.resolve();if(i&&i.length>0){let m=function(x){return Promise.all(x.map(S=>Promise.resolve(S).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};var h=m;document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");d=m(i.map(x=>{if(x=H0(x),x in Vp)return;Vp[x]=!0;const S=x.endsWith(".css"),E=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${E}`))return;const k=document.createElement("link");if(k.rel=S?"stylesheet":W0,S||(k.as="script"),k.crossOrigin="",k.href=x,g&&k.setAttribute("nonce",g),document.head.appendChild(k),S)return new Promise((T,N)=>{k.addEventListener("load",T),k.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return d.then(p=>{for(const g of p||[])g.status==="rejected"&&u(g.reason);return r().catch(u)})},F0=l=>{let r;return l?r=l:typeof fetch>"u"?r=(...i)=>Ri(async()=>{const{default:o}=await Promise.resolve().then(()=>yr);return{default:o}},[]).then(({default:o})=>o(...i)):r=fetch,(...i)=>r(...i)};class Jd extends Error{constructor(r,i="FunctionsError",o){super(r),this.name=i,this.context=o}}class Y0 extends Jd{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Kp extends Jd{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Qp extends Jd{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var zd;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(zd||(zd={}));var G0=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{m(o.next(x))}catch(S){h(S)}}function g(x){try{m(o.throw(x))}catch(S){h(S)}}function m(x){x.done?u(x.value):d(x.value).then(p,g)}m((o=o.apply(l,r||[])).next())})};class V0{constructor(r,{headers:i={},customFetch:o,region:d=zd.Any}={}){this.url=r,this.headers=i,this.region=d,this.fetch=F0(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r,i={}){var o;return G0(this,void 0,void 0,function*(){try{const{headers:d,method:u,body:h}=i;let p={},{region:g}=i;g||(g=this.region);const m=new URL(`${this.url}/${r}`);g&&g!=="any"&&(p["x-region"]=g,m.searchParams.set("forceFunctionRegion",g));let x;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(p["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(p["Content-Type"]="application/json",x=JSON.stringify(h)));const S=yield this.fetch(m.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),d),body:x}).catch(N=>{throw new Y0(N)}),E=S.headers.get("x-relay-error");if(E&&E==="true")throw new Kp(S);if(!S.ok)throw new Qp(S);let k=((o=S.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),T;return k==="application/json"?T=yield S.json():k==="application/octet-stream"?T=yield S.blob():k==="text/event-stream"?T=S:k==="multipart/form-data"?T=yield S.formData():T=yield S.text(),{data:T,error:null,response:S}}catch(d){return{data:null,error:d,response:d instanceof Qp||d instanceof Kp?d.context:void 0}}})}}var Yt={},nr={},ar={},sr={},rr={},ir={},K0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pr=K0();const Q0=pr.fetch,Og=pr.fetch.bind(pr),Ig=pr.Headers,X0=pr.Request,Z0=pr.Response,yr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ig,Request:X0,Response:Z0,default:Og,fetch:Q0},Symbol.toStringTag,{value:"Module"})),J0=iy(yr);var Go={},Xp;function Lg(){if(Xp)return Go;Xp=1,Object.defineProperty(Go,"__esModule",{value:!0});class l extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Go.default=l,Go}var Zp;function Ug(){if(Zp)return ir;Zp=1;var l=ir&&ir.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(ir,"__esModule",{value:!0});const r=l(J0),i=l(Lg());class o{constructor(u){var h,p;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(h=u.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=u.signal,this.isMaybeSingle=(p=u.isMaybeSingle)!==null&&p!==void 0?p:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=new Headers(this.headers),this.headers.set(u,h),this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var x,S,E,k;let T=null,N=null,D=null,P=m.status,R=m.statusText;if(m.ok){if(this.method!=="HEAD"){const le=await m.text();le===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?N=le:N=JSON.parse(le))}const Z=(S=this.headers.get("Prefer"))===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),Y=(E=m.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");Z&&Y&&Y.length>1&&(D=parseInt(Y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(T={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,D=null,P=406,R="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const Z=await m.text();try{T=JSON.parse(Z),Array.isArray(T)&&m.status===404&&(N=[],T=null,P=200,R="OK")}catch{m.status===404&&Z===""?(P=204,R="No Content"):T={message:Z}}if(T&&this.isMaybeSingle&&(!((k=T?.details)===null||k===void 0)&&k.includes("0 rows"))&&(T=null,P=200,R="OK"),T&&this.shouldThrowOnError)throw new i.default(T)}return{error:T,data:N,count:D,status:P,statusText:R}});return this.shouldThrowOnError||(g=g.catch(m=>{var x,S,E;return{error:{message:`${(x=m?.name)!==null&&x!==void 0?x:"FetchError"}: ${m?.message}`,details:`${(S=m?.stack)!==null&&S!==void 0?S:""}`,hint:"",code:`${(E=m?.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),g.then(u,h)}returns(){return this}overrideTypes(){return this}}return ir.default=o,ir}var Jp;function Pg(){if(Jp)return rr;Jp=1;var l=rr&&rr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(rr,"__esModule",{value:!0});const r=l(Ug());class i extends r.default{select(d){let u=!1;const h=(d??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(d,{ascending:u=!0,nullsFirst:h,foreignTable:p,referencedTable:g=p}={}){const m=g?`${g}.order`:"order",x=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${x?`${x},`:""}${d}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(d,{foreignTable:u,referencedTable:h=u}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${d}`),this}range(d,u,{foreignTable:h,referencedTable:p=h}={}){const g=typeof p>"u"?"offset":`${p}.offset`,m=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${d}`),this.url.searchParams.set(m,`${u-d+1}`),this}abortSignal(d){return this.signal=d,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:d=!1,verbose:u=!1,settings:h=!1,buffers:p=!1,wal:g=!1,format:m="text"}={}){var x;const S=[d?"analyze":null,u?"verbose":null,h?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),E=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${E}"; options=${S};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(d){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${d}`),this}}return rr.default=i,rr}var eg;function eu(){if(eg)return sr;eg=1;var l=sr&&sr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(sr,"__esModule",{value:!0});const r=l(Pg());class i extends r.default{eq(d,u){return this.url.searchParams.append(d,`eq.${u}`),this}neq(d,u){return this.url.searchParams.append(d,`neq.${u}`),this}gt(d,u){return this.url.searchParams.append(d,`gt.${u}`),this}gte(d,u){return this.url.searchParams.append(d,`gte.${u}`),this}lt(d,u){return this.url.searchParams.append(d,`lt.${u}`),this}lte(d,u){return this.url.searchParams.append(d,`lte.${u}`),this}like(d,u){return this.url.searchParams.append(d,`like.${u}`),this}likeAllOf(d,u){return this.url.searchParams.append(d,`like(all).{${u.join(",")}}`),this}likeAnyOf(d,u){return this.url.searchParams.append(d,`like(any).{${u.join(",")}}`),this}ilike(d,u){return this.url.searchParams.append(d,`ilike.${u}`),this}ilikeAllOf(d,u){return this.url.searchParams.append(d,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(d,u){return this.url.searchParams.append(d,`ilike(any).{${u.join(",")}}`),this}is(d,u){return this.url.searchParams.append(d,`is.${u}`),this}in(d,u){const h=Array.from(new Set(u)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(d,`in.(${h})`),this}contains(d,u){return typeof u=="string"?this.url.searchParams.append(d,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(d,`cs.{${u.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(u)}`),this}containedBy(d,u){return typeof u=="string"?this.url.searchParams.append(d,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(d,`cd.{${u.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(u)}`),this}rangeGt(d,u){return this.url.searchParams.append(d,`sr.${u}`),this}rangeGte(d,u){return this.url.searchParams.append(d,`nxl.${u}`),this}rangeLt(d,u){return this.url.searchParams.append(d,`sl.${u}`),this}rangeLte(d,u){return this.url.searchParams.append(d,`nxr.${u}`),this}rangeAdjacent(d,u){return this.url.searchParams.append(d,`adj.${u}`),this}overlaps(d,u){return typeof u=="string"?this.url.searchParams.append(d,`ov.${u}`):this.url.searchParams.append(d,`ov.{${u.join(",")}}`),this}textSearch(d,u,{config:h,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const m=h===void 0?"":`(${h})`;return this.url.searchParams.append(d,`${g}fts${m}.${u}`),this}match(d){return Object.entries(d).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(d,u,h){return this.url.searchParams.append(d,`not.${u}.${h}`),this}or(d,{foreignTable:u,referencedTable:h=u}={}){const p=h?`${h}.or`:"or";return this.url.searchParams.append(p,`(${d})`),this}filter(d,u,h){return this.url.searchParams.append(d,`${u}.${h}`),this}}return sr.default=i,sr}var tg;function qg(){if(tg)return ar;tg=1;var l=ar&&ar.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ar,"__esModule",{value:!0});const r=l(eu());class i{constructor(d,{headers:u={},schema:h,fetch:p}){this.url=d,this.headers=new Headers(u),this.schema=h,this.fetch=p}select(d,{head:u=!1,count:h}={}){const p=u?"HEAD":"GET";let g=!1;const m=(d??"*").split("").map(x=>/\s/.test(x)&&!g?"":(x==='"'&&(g=!g),x)).join("");return this.url.searchParams.set("select",m),h&&this.headers.append("Prefer",`count=${h}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(d,{count:u,defaultToNull:h=!0}={}){var p;const g="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const m=d.reduce((x,S)=>x.concat(Object.keys(S)),[]);if(m.length>0){const x=[...new Set(m)].map(S=>`"${S}"`);this.url.searchParams.set("columns",x.join(","))}}return new r.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(d,{onConflict:u,ignoreDuplicates:h=!1,count:p,defaultToNull:g=!0}={}){var m;const x="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const S=d.reduce((E,k)=>E.concat(Object.keys(k)),[]);if(S.length>0){const E=[...new Set(S)].map(k=>`"${k}"`);this.url.searchParams.set("columns",E.join(","))}}return new r.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(d,{count:u}={}){var h;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:d}={}){var u;const h="DELETE";return d&&this.headers.append("Prefer",`count=${d}`),new r.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return ar.default=i,ar}var ng;function eb(){if(ng)return nr;ng=1;var l=nr&&nr.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(nr,"__esModule",{value:!0});const r=l(qg()),i=l(eu());class o{constructor(u,{headers:h={},schema:p,fetch:g}={}){this.url=u,this.headers=new Headers(h),this.schemaName=p,this.fetch=g}from(u){const h=new URL(`${this.url}/${u}`);return new r.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:p=!1,get:g=!1,count:m}={}){var x;let S;const E=new URL(`${this.url}/rpc/${u}`);let k;p||g?(S=p?"HEAD":"GET",Object.entries(h).filter(([N,D])=>D!==void 0).map(([N,D])=>[N,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([N,D])=>{E.searchParams.append(N,D)})):(S="POST",k=h);const T=new Headers(this.headers);return m&&T.set("Prefer",`count=${m}`),new i.default({method:S,url:E,headers:T,schema:this.schemaName,body:k,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return nr.default=o,nr}var ag;function tb(){if(ag)return Yt;ag=1;var l=Yt&&Yt.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.PostgrestError=Yt.PostgrestBuilder=Yt.PostgrestTransformBuilder=Yt.PostgrestFilterBuilder=Yt.PostgrestQueryBuilder=Yt.PostgrestClient=void 0;const r=l(eb());Yt.PostgrestClient=r.default;const i=l(qg());Yt.PostgrestQueryBuilder=i.default;const o=l(eu());Yt.PostgrestFilterBuilder=o.default;const d=l(Pg());Yt.PostgrestTransformBuilder=d.default;const u=l(Ug());Yt.PostgrestBuilder=u.default;const h=l(Lg());return Yt.PostgrestError=h.default,Yt.default={PostgrestClient:r.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:d.default,PostgrestBuilder:u.default,PostgrestError:h.default},Yt}var nb=tb();const ab=Wd(nb),{PostgrestClient:sb,PostgrestQueryBuilder:Zw,PostgrestFilterBuilder:Jw,PostgrestTransformBuilder:ej,PostgrestBuilder:tj,PostgrestError:nj}=ab;class rb{static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const o=i.node,d=parseInt(o.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let i=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(i+=`

Suggested solution: ${r.workaround}`),new Error(i)}static createWebSocket(r,i){const o=this.getWebSocketConstructor();return new o(r,i)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const ib="2.15.5",ob=`realtime-js/${ib}`,lb="1.0.0",Dd=1e4,cb=1e3,db=100;var _i;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(_i||(_i={}));var Pt;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(Pt||(Pt={}));var qn;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(qn||(qn={}));var Ad;(function(l){l.websocket="websocket"})(Ad||(Ad={}));var ys;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(ys||(ys={}));class ub{constructor(){this.HEADER_LENGTH=1}decode(r,i){return r.constructor===ArrayBuffer?i(this._binaryDecode(r)):i(typeof r=="string"?JSON.parse(r):{})}_binaryDecode(r){const i=new DataView(r),o=new TextDecoder;return this._decodeBroadcast(r,i,o)}_decodeBroadcast(r,i,o){const d=i.getUint8(1),u=i.getUint8(2);let h=this.HEADER_LENGTH+2;const p=o.decode(r.slice(h,h+d));h=h+d;const g=o.decode(r.slice(h,h+u));h=h+u;const m=JSON.parse(o.decode(r.slice(h,r.byteLength)));return{ref:null,topic:p,event:g,payload:m}}}class $g{constructor(r,i){this.callback=r,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var vt;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(vt||(vt={}));const sg=(l,r,i={})=>{var o;const d=(o=i.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(r).reduce((u,h)=>(u[h]=fb(h,l,r,d),u),{})},fb=(l,r,i,o)=>{const d=r.find(p=>p.name===l),u=d?.type,h=i[l];return u&&!o.includes(u)?Wg(u,h):Bd(h)},Wg=(l,r)=>{if(l.charAt(0)==="_"){const i=l.slice(1,l.length);return mb(r,i)}switch(l){case vt.bool:return hb(r);case vt.float4:case vt.float8:case vt.int2:case vt.int4:case vt.int8:case vt.numeric:case vt.oid:return pb(r);case vt.json:case vt.jsonb:return gb(r);case vt.timestamp:return xb(r);case vt.abstime:case vt.date:case vt.daterange:case vt.int4range:case vt.int8range:case vt.money:case vt.reltime:case vt.text:case vt.time:case vt.timestamptz:case vt.timetz:case vt.tsrange:case vt.tstzrange:return Bd(r);default:return Bd(r)}},Bd=l=>l,hb=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},pb=l=>{if(typeof l=="string"){const r=parseFloat(l);if(!Number.isNaN(r))return r}return l},gb=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(r){return console.log(`JSON parse error: ${r}`),l}return l},mb=(l,r)=>{if(typeof l!="string")return l;const i=l.length-1,o=l[i];if(l[0]==="{"&&o==="}"){let u;const h=l.slice(1,i);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(p=>Wg(r,p))}return l},xb=l=>typeof l=="string"?l.replace(" ","T"):l,Hg=l=>{let r=l;return r=r.replace(/^ws/i,"http"),r=r.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),r.replace(/\/+$/,"")+"/api/broadcast"};class yd{constructor(r,i,o={},d=Dd){this.channel=r,this.event=i,this.payload=o,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,i){var o;return this._hasReceived(r)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:i}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(i))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var rg;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(rg||(rg={}));class Si{constructor(r,i){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},d=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Si.syncState(this.state,d,u,h),this.pendingDiffs.forEach(g=>{this.state=Si.syncDiff(this.state,g,u,h)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},d=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=Si.syncDiff(this.state,d,u,h),p())}),this.onJoin((d,u,h)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:u,newPresences:h})}),this.onLeave((d,u,h)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,i,o,d){const u=this.cloneDeep(r),h=this.transformState(i),p={},g={};return this.map(u,(m,x)=>{h[m]||(g[m]=x)}),this.map(h,(m,x)=>{const S=u[m];if(S){const E=x.map(D=>D.presence_ref),k=S.map(D=>D.presence_ref),T=x.filter(D=>k.indexOf(D.presence_ref)<0),N=S.filter(D=>E.indexOf(D.presence_ref)<0);T.length>0&&(p[m]=T),N.length>0&&(g[m]=N)}else p[m]=x}),this.syncDiff(u,{joins:p,leaves:g},o,d)}static syncDiff(r,i,o,d){const{joins:u,leaves:h}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),d||(d=()=>{}),this.map(u,(p,g)=>{var m;const x=(m=r[p])!==null&&m!==void 0?m:[];if(r[p]=this.cloneDeep(g),x.length>0){const S=r[p].map(k=>k.presence_ref),E=x.filter(k=>S.indexOf(k.presence_ref)<0);r[p].unshift(...E)}o(p,x,g)}),this.map(h,(p,g)=>{let m=r[p];if(!m)return;const x=g.map(S=>S.presence_ref);m=m.filter(S=>x.indexOf(S.presence_ref)<0),r[p]=m,d(p,m,g),m.length===0&&delete r[p]}),r}static map(r,i){return Object.getOwnPropertyNames(r).map(o=>i(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((i,o)=>{const d=r[o];return"metas"in d?i[o]=d.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):i[o]=d,i},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ig;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(ig||(ig={}));var wi;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(wi||(wi={}));var ma;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(ma||(ma={}));class tu{constructor(r,i={config:{}},o){this.topic=r,this.params=i,this.socket=o,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new yd(this,qn.join,this.params,this.timeout),this.rejoinTimer=new $g(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qn.reply,{},(d,u)=>{this._trigger(this._replyEventName(u),d)}),this.presence=new Si(this),this.broadcastEndpointURL=Hg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(r,i=this.timeout){var o,d,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:h,presence:p,private:g}}=this.params,m=(d=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(k=>k.filter))!==null&&d!==void 0?d:[],x=!!this.bindings[wi.PRESENCE]&&this.bindings[wi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,S={},E={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:m,private:g};this.socket.accessTokenValue&&(S.access_token=this.socket.accessTokenValue),this._onError(k=>r?.(ma.CHANNEL_ERROR,k)),this._onClose(()=>r?.(ma.CLOSED)),this.updateJoinPayload(Object.assign({config:E},S)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:k})=>{var T;if(this.socket.setAuth(),k===void 0){r?.(ma.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,D=(T=N?.length)!==null&&T!==void 0?T:0,P=[];for(let R=0;R<D;R++){const I=N[R],{filter:{event:Z,schema:Y,table:le,filter:fe}}=I,Se=k&&k[R];if(Se&&Se.event===Z&&Se.schema===Y&&Se.table===le&&Se.filter===fe)P.push(Object.assign(Object.assign({},I),{id:Se.id}));else{this.unsubscribe(),this.state=Pt.errored,r?.(ma.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,r&&r(ma.SUBSCRIBED);return}}).receive("error",k=>{this.state=Pt.errored,r?.(ma.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{r?.(ma.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,i={}){return await this.send({type:"presence",event:"track",payload:r},i.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,i,o){return this.state===Pt.joined&&r===wi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,i,o)}async send(r,i={}){var o,d;if(!this._canPush()&&r.type==="broadcast"){const{event:u,payload:h}=r,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((d=m.body)===null||d===void 0?void 0:d.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,p,g;const m=this._push(r.type,r,i.timeout||this.timeout);r.type==="broadcast"&&!(!((g=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&u("ok"),m.receive("ok",()=>u("ok")),m.receive("error",()=>u("error")),m.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Pt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(d=>{o=new yd(this,qn.leave,{},r),o.receive("ok",()=>{i(),d("ok")}).receive("timeout",()=>{i(),d("timed out")}).receive("error",()=>{d("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pt.closed,this.bindings={}}async _fetchWithTimeout(r,i,o){const d=new AbortController,u=setTimeout(()=>d.abort(),o),h=await this.socket.fetch(r,Object.assign(Object.assign({},i),{signal:d.signal}));return clearTimeout(u),h}_push(r,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new yd(this,r,i,o);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>db){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(r,i,o){return i}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,i,o){var d,u;const h=r.toLocaleLowerCase(),{close:p,error:g,leave:m,join:x}=qn;if(o&&[p,g,m,x].indexOf(h)>=0&&o!==this._joinRef())return;let E=this._onMessage(h,i,o);if(i&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(k=>{var T,N,D;return((T=k.filter)===null||T===void 0?void 0:T.event)==="*"||((D=(N=k.filter)===null||N===void 0?void 0:N.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===h}).map(k=>k.callback(E,o)):(u=this.bindings[h])===null||u===void 0||u.filter(k=>{var T,N,D,P,R,I;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in k){const Z=k.id,Y=(T=k.filter)===null||T===void 0?void 0:T.event;return Z&&((N=i.ids)===null||N===void 0?void 0:N.includes(Z))&&(Y==="*"||Y?.toLocaleLowerCase()===((D=i.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const Z=(R=(P=k?.filter)===null||P===void 0?void 0:P.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return Z==="*"||Z===((I=i?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===h}).map(k=>{if(typeof E=="object"&&"ids"in E){const T=E.data,{schema:N,table:D,commit_timestamp:P,type:R,errors:I}=T;E=Object.assign(Object.assign({},{schema:N,table:D,commit_timestamp:P,eventType:R,new:{},old:{},errors:I}),this._getPayloadRecords(T))}k.callback(E,o)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,i,o){const d=r.toLocaleLowerCase(),u={type:d,filter:i,callback:o};return this.bindings[d]?this.bindings[d].push(u):this.bindings[d]=[u],this}_off(r,i){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(d=>{var u;return!(((u=d.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&tu.isEqual(d.filter,i))})),this}static isEqual(r,i){if(Object.keys(r).length!==Object.keys(i).length)return!1;for(const o in r)if(r[o]!==i[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(qn.close,{},r)}_onError(r){this._on(qn.error,{},i=>r(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const i={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(i.new=sg(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(i.old=sg(r.columns,r.old_record)),i}}const bd=()=>{},Vo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},yb=[1e3,2e3,5e3,1e4],bb=1e4,vb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _b{constructor(r,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Dd,this.transport=null,this.heartbeatIntervalMs=Vo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bd,this.ref=0,this.reconnectTimer=null,this.logger=bd,this.conn=null,this.sendBuffer=[],this.serializer=new ub,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>{let u;return d?u=d:typeof fetch>"u"?u=(...h)=>Ri(async()=>{const{default:p}=await Promise.resolve().then(()=>yr);return{default:p}},void 0).then(({default:p})=>p(...h)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...h)=>u(...h)},!(!((o=i?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${r}/${Ad.websocket}`,this.httpEndpoint=Hg(r),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rb.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const i=r.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lb}))}disconnect(r,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},r?this.conn.close(r,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const i=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const r=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,i,o){this.logger(r,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case _i.connecting:return ys.Connecting;case _i.open:return ys.Open;case _i.closing:return ys.Closing;default:return ys.Closed}}isConnected(){return this.connectionState()===ys.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,i={config:{}}){const o=`realtime:${r}`,d=this.getChannels().find(u=>u.topic===o);if(d)return d;{const u=new tu(`realtime:${r}`,i,this);return this.channels.push(u),u}}push(r){const{topic:i,event:o,payload:d,ref:u}=r,h=()=>{this.encode(r,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${i} ${o} (${u})`,d),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(cb,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Vo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let i=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${r}"`),i.unsubscribe())}_remove(r){this.channels=this.channels.filter(i=>i.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:d,payload:u,ref:h}=i,p=h?`(${h})`:"",g=u.status||"";this.log("receive",`${g} ${o} ${d} ${p}`.trim(),u),this.channels.filter(m=>m._isMember(o)).forEach(m=>m._trigger(d,u,h)),this._triggerStateCallbacks("message",i)})}_clearTimer(r){var i;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var i;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(qn.error))}_appendParams(r,i){if(Object.keys(i).length===0)return r;const o=r.match(/\?/)?"&":"?",d=new URLSearchParams(i);return`${r}${o}${d}`}_workerObjectUrl(r){let i;if(r)i=r;else{const o=new Blob([vb],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(r,i=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(r=null){let i;r?i=r:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const d={access_token:i,version:ob};i&&o.updateJoinPayload(d),o.joinedOnce&&o._isJoined()&&o._push(qn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${r}`,i)})}_triggerStateCallbacks(r,i){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(i)}catch(d){this.log("error",`error in ${r} callback`,d)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new $g(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Vo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var i,o,d,u,h,p,g,m,x;if(this.transport=(i=r?.transport)!==null&&i!==void 0?i:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:Dd,this.heartbeatIntervalMs=(d=r?.heartbeatIntervalMs)!==null&&d!==void 0?d:Vo.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=r?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=r?.heartbeatCallback)!==null&&p!==void 0?p:bd,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=r?.reconnectAfterMs)!==null&&g!==void 0?g:(S=>yb[S-1]||bb),this.encode=(m=r?.encode)!==null&&m!==void 0?m:((S,E)=>E(JSON.stringify(S))),this.decode=(x=r?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class nu extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function qt(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class Sb extends nu{constructor(r,i,o){super(r),this.name="StorageApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Md extends nu{constructor(r,i){super(r),this.name="StorageUnknownError",this.originalError=i}}var wb=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{m(o.next(x))}catch(S){h(S)}}function g(x){try{m(o.throw(x))}catch(S){h(S)}}function m(x){x.done?u(x.value):d(x.value).then(p,g)}m((o=o.apply(l,r||[])).next())})};const Fg=l=>{let r;return l?r=l:typeof fetch>"u"?r=(...i)=>Ri(async()=>{const{default:o}=await Promise.resolve().then(()=>yr);return{default:o}},void 0).then(({default:o})=>o(...i)):r=fetch,(...i)=>r(...i)},jb=()=>wb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ri(()=>Promise.resolve().then(()=>yr),void 0)).Response:Response}),Od=l=>{if(Array.isArray(l))return l.map(i=>Od(i));if(typeof l=="function"||l!==Object(l))return l;const r={};return Object.entries(l).forEach(([i,o])=>{const d=i.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[d]=Od(o)}),r},kb=l=>{if(typeof l!="object"||l===null)return!1;const r=Object.getPrototypeOf(l);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)};var vs=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{m(o.next(x))}catch(S){h(S)}}function g(x){try{m(o.throw(x))}catch(S){h(S)}}function m(x){x.done?u(x.value):d(x.value).then(p,g)}m((o=o.apply(l,r||[])).next())})};const vd=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Cb=(l,r,i)=>vs(void 0,void 0,void 0,function*(){const o=yield jb();l instanceof o&&!i?.noResolveJson?l.json().then(d=>{const u=l.status||500,h=d?.statusCode||u+"";r(new Sb(vd(d),u,h))}).catch(d=>{r(new Md(vd(d),d))}):r(new Md(vd(l),l))}),Tb=(l,r,i,o)=>{const d={method:l,headers:r?.headers||{}};return l==="GET"||!o?d:(kb(o)?(d.headers=Object.assign({"Content-Type":"application/json"},r?.headers),d.body=JSON.stringify(o)):d.body=o,r?.duplex&&(d.duplex=r.duplex),Object.assign(Object.assign({},d),i))};function Ni(l,r,i,o,d,u){return vs(this,void 0,void 0,function*(){return new Promise((h,p)=>{l(i,Tb(r,o,d,u)).then(g=>{if(!g.ok)throw g;return o?.noResolveJson?g:g.json()}).then(g=>h(g)).catch(g=>Cb(g,p,o))})})}function nl(l,r,i,o){return vs(this,void 0,void 0,function*(){return Ni(l,"GET",r,i,o)})}function Qn(l,r,i,o,d){return vs(this,void 0,void 0,function*(){return Ni(l,"POST",r,o,d,i)})}function Id(l,r,i,o,d){return vs(this,void 0,void 0,function*(){return Ni(l,"PUT",r,o,d,i)})}function Eb(l,r,i,o){return vs(this,void 0,void 0,function*(){return Ni(l,"HEAD",r,Object.assign(Object.assign({},i),{noResolveJson:!0}),o)})}function Yg(l,r,i,o,d){return vs(this,void 0,void 0,function*(){return Ni(l,"DELETE",r,o,d,i)})}var rn=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{m(o.next(x))}catch(S){h(S)}}function g(x){try{m(o.throw(x))}catch(S){h(S)}}function m(x){x.done?u(x.value):d(x.value).then(p,g)}m((o=o.apply(l,r||[])).next())})};const Rb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},og={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nb{constructor(r,i={},o,d){this.shouldThrowOnError=!1,this.url=r,this.headers=i,this.bucketId=o,this.fetch=Fg(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,i,o,d){return rn(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},og),d);let p=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const g=h.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),g&&u.append("metadata",this.encodeMetadata(g)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.append("cacheControl",h.cacheControl),g&&u.append("metadata",this.encodeMetadata(g))):(u=o,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),d?.headers&&(p=Object.assign(Object.assign({},p),d.headers));const m=this._removeEmptyFolders(i),x=this._getFinalPath(m),S=yield(r=="PUT"?Id:Qn)(this.fetch,`${this.url}/object/${x}`,u,Object.assign({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:m,id:S.Id,fullPath:S.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(qt(u))return{data:null,error:u};throw u}})}upload(r,i,o){return rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,i,o)})}uploadToSignedUrl(r,i,o,d){return rn(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",i);try{let g;const m=Object.assign({upsert:og.upsert},d),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&o instanceof Blob?(g=new FormData,g.append("cacheControl",m.cacheControl),g.append("",o)):typeof FormData<"u"&&o instanceof FormData?(g=o,g.append("cacheControl",m.cacheControl)):(g=o,x["cache-control"]=`max-age=${m.cacheControl}`,x["content-type"]=m.contentType);const S=yield Id(this.fetch,p.toString(),g,{headers:x});return{data:{path:u,fullPath:S.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(qt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(r,i){return rn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r);const d=Object.assign({},this.headers);i?.upsert&&(d["x-upsert"]="true");const u=yield Qn(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:d}),h=new URL(this.url+u.url),p=h.searchParams.get("token");if(!p)throw new nu("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:p},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}update(r,i,o){return rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,i,o)})}move(r,i,o){return rn(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:i,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}})}copy(r,i,o){return rn(this,void 0,void 0,function*(){try{return{data:{path:(yield Qn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:i,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}})}createSignedUrl(r,i,o){return rn(this,void 0,void 0,function*(){try{let d=this._getFinalPath(r),u=yield Qn(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:i},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const h=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}})}createSignedUrls(r,i,o){return rn(this,void 0,void 0,function*(){try{const d=yield Qn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:r},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:d.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}})}download(r,i){return rn(this,void 0,void 0,function*(){const d=typeof i?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(i?.transform||{}),h=u?`?${u}`:"";try{const p=this._getFinalPath(r);return{data:yield(yield nl(this.fetch,`${this.url}/${d}/${p}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(qt(p))return{data:null,error:p};throw p}})}info(r){return rn(this,void 0,void 0,function*(){const i=this._getFinalPath(r);try{const o=yield nl(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:Od(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}exists(r){return rn(this,void 0,void 0,function*(){const i=this._getFinalPath(r);try{return yield Eb(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o)&&o instanceof Md){const d=o.originalError;if([400,404].includes(d?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(r,i){const o=this._getFinalPath(r),d=[],u=i?.download?`download=${i.download===!0?"":i.download}`:"";u!==""&&d.push(u);const p=typeof i?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(i?.transform||{});g!==""&&d.push(g);let m=d.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${m}`)}}}remove(r){return rn(this,void 0,void 0,function*(){try{return{data:yield Yg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}list(r,i,o){return rn(this,void 0,void 0,function*(){try{const d=Object.assign(Object.assign(Object.assign({},Rb),i),{prefix:r||""});return{data:yield Qn(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},o),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}})}listV2(r,i){return rn(this,void 0,void 0,function*(){try{const o=Object.assign({},r);return{data:yield Qn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const i=[];return r.width&&i.push(`width=${r.width}`),r.height&&i.push(`height=${r.height}`),r.resize&&i.push(`resize=${r.resize}`),r.format&&i.push(`format=${r.format}`),r.quality&&i.push(`quality=${r.quality}`),i.join("&")}}const zb="2.12.1",Db={"X-Client-Info":`storage-js/${zb}`};var or=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{m(o.next(x))}catch(S){h(S)}}function g(x){try{m(o.throw(x))}catch(S){h(S)}}function m(x){x.done?u(x.value):d(x.value).then(p,g)}m((o=o.apply(l,r||[])).next())})};class Ab{constructor(r,i={},o,d){this.shouldThrowOnError=!1;const u=new URL(r);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},Db),i),this.fetch=Fg(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return or(this,void 0,void 0,function*(){try{return{data:yield nl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}})}getBucket(r){return or(this,void 0,void 0,function*(){try{return{data:yield nl(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}createBucket(r,i={public:!1}){return or(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}updateBucket(r,i){return or(this,void 0,void 0,function*(){try{return{data:yield Id(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}emptyBucket(r){return or(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}deleteBucket(r){return or(this,void 0,void 0,function*(){try{return{data:yield Yg(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}}class Bb extends Ab{constructor(r,i={},o,d){super(r,i,o,d)}from(r){return new Nb(this.url,this.headers,r,this.fetch)}}const Mb="2.57.4";let vi="";typeof Deno<"u"?vi="deno":typeof document<"u"?vi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vi="react-native":vi="node";const Ob={"X-Client-Info":`supabase-js-${vi}/${Mb}`},Ib={headers:Ob},Lb={schema:"public"},Ub={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Pb={};var qb=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{m(o.next(x))}catch(S){h(S)}}function g(x){try{m(o.throw(x))}catch(S){h(S)}}function m(x){x.done?u(x.value):d(x.value).then(p,g)}m((o=o.apply(l,r||[])).next())})};const $b=l=>{let r;return l?r=l:typeof fetch>"u"?r=Og:r=fetch,(...i)=>r(...i)},Wb=()=>typeof Headers>"u"?Ig:Headers,Hb=(l,r,i)=>{const o=$b(i),d=Wb();return(u,h)=>qb(void 0,void 0,void 0,function*(){var p;const g=(p=yield r())!==null&&p!==void 0?p:l;let m=new d(h?.headers);return m.has("apikey")||m.set("apikey",l),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),o(u,Object.assign(Object.assign({},h),{headers:m}))})};var Fb=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{m(o.next(x))}catch(S){h(S)}}function g(x){try{m(o.throw(x))}catch(S){h(S)}}function m(x){x.done?u(x.value):d(x.value).then(p,g)}m((o=o.apply(l,r||[])).next())})};function Yb(l){return l.endsWith("/")?l:l+"/"}function Gb(l,r){var i,o;const{db:d,auth:u,realtime:h,global:p}=l,{db:g,auth:m,realtime:x,global:S}=r,E={db:Object.assign(Object.assign({},g),d),auth:Object.assign(Object.assign({},m),u),realtime:Object.assign(Object.assign({},x),h),storage:{},global:Object.assign(Object.assign(Object.assign({},S),p),{headers:Object.assign(Object.assign({},(i=S?.headers)!==null&&i!==void 0?i:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>Fb(this,void 0,void 0,function*(){return""})};return l.accessToken?E.accessToken=l.accessToken:delete E.accessToken,E}function Vb(l){const r=l?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Yb(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Gg="2.71.1",fr=30*1e3,Ld=3,_d=Ld*fr,Kb="http://localhost:9999",Qb="supabase.auth.token",Xb={"X-Client-Info":`gotrue-js/${Gg}`},Ud="X-Supabase-Api-Version",Vg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Zb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jb=600*1e3;class au extends Error{constructor(r,i,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function Ge(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class e1 extends au{constructor(r,i,o){super(r,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function t1(l){return Ge(l)&&l.name==="AuthApiError"}class Kg extends au{constructor(r,i){super(r),this.name="AuthUnknownError",this.originalError=i}}class Ka extends au{constructor(r,i,o,d){super(r,o,d),this.name=i,this.status=o}}class Ga extends Ka{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function n1(l){return Ge(l)&&l.name==="AuthSessionMissingError"}class Ko extends Ka{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qo extends Ka{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Xo extends Ka{constructor(r,i=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function a1(l){return Ge(l)&&l.name==="AuthImplicitGrantRedirectError"}class lg extends Ka{constructor(r,i=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pd extends Ka{constructor(r,i){super(r,"AuthRetryableFetchError",i,void 0)}}function Sd(l){return Ge(l)&&l.name==="AuthRetryableFetchError"}class cg extends Ka{constructor(r,i,o){super(r,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class qd extends Ka{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const al="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dg=` 	
\r=`.split(""),s1=(()=>{const l=new Array(128);for(let r=0;r<l.length;r+=1)l[r]=-1;for(let r=0;r<dg.length;r+=1)l[dg[r].charCodeAt(0)]=-2;for(let r=0;r<al.length;r+=1)l[al[r].charCodeAt(0)]=r;return l})();function ug(l,r,i){if(l!==null)for(r.queue=r.queue<<8|l,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;i(al[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;i(al[o]),r.queuedBits-=6}}function Qg(l,r,i){const o=s1[l];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)i(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function fg(l){const r=[],i=h=>{r.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},u=h=>{o1(h,o,i)};for(let h=0;h<l.length;h+=1)Qg(l.charCodeAt(h),d,u);return r.join("")}function r1(l,r){if(l<=127){r(l);return}else if(l<=2047){r(192|l>>6),r(128|l&63);return}else if(l<=65535){r(224|l>>12),r(128|l>>6&63),r(128|l&63);return}else if(l<=1114111){r(240|l>>18),r(128|l>>12&63),r(128|l>>6&63),r(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function i1(l,r){for(let i=0;i<l.length;i+=1){let o=l.charCodeAt(i);if(o>55295&&o<=56319){const d=(o-55296)*1024&65535;o=(l.charCodeAt(i+1)-56320&65535|d)+65536,i+=1}r1(o,r)}}function o1(l,r,i){if(r.utf8seq===0){if(l<=127){i(l);return}for(let o=1;o<6;o+=1)if((l>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=l&31;else if(r.utf8seq===3)r.codepoint=l&15;else if(r.utf8seq===4)r.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|l&63,r.utf8seq-=1,r.utf8seq===0&&i(r.codepoint)}}function l1(l){const r=[],i={queue:0,queuedBits:0},o=d=>{r.push(d)};for(let d=0;d<l.length;d+=1)Qg(l.charCodeAt(d),i,o);return new Uint8Array(r)}function c1(l){const r=[];return i1(l,i=>r.push(i)),new Uint8Array(r)}function d1(l){const r=[],i={queue:0,queuedBits:0},o=d=>{r.push(d)};return l.forEach(d=>ug(d,i,o)),ug(null,i,o),r.join("")}function u1(l){return Math.round(Date.now()/1e3)+l}function f1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const r=Math.random()*16|0;return(l=="x"?r:r&3|8).toString(16)})}const Pn=()=>typeof window<"u"&&typeof document<"u",gs={tested:!1,writable:!1},Xg=()=>{if(!Pn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gs.tested)return gs.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),gs.tested=!0,gs.writable=!0}catch{gs.tested=!0,gs.writable=!1}return gs.writable};function h1(l){const r={},i=new URL(l);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((d,u)=>{r[u]=d})}catch{}return i.searchParams.forEach((o,d)=>{r[d]=o}),r}const Zg=l=>{let r;return l?r=l:typeof fetch>"u"?r=(...i)=>Ri(async()=>{const{default:o}=await Promise.resolve().then(()=>yr);return{default:o}},void 0).then(({default:o})=>o(...i)):r=fetch,(...i)=>r(...i)},p1=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",hr=async(l,r,i)=>{await l.setItem(r,JSON.stringify(i))},ms=async(l,r)=>{const i=await l.getItem(r);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Ya=async(l,r)=>{await l.removeItem(r)};class il{constructor(){this.promise=new il.promiseConstructor((r,i)=>{this.resolve=r,this.reject=i})}}il.promiseConstructor=Promise;function wd(l){const r=l.split(".");if(r.length!==3)throw new qd("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!Zb.test(r[o]))throw new qd("JWT not in base64url format");return{header:JSON.parse(fg(r[0])),payload:JSON.parse(fg(r[1])),signature:l1(r[2]),raw:{header:r[0],payload:r[1]}}}async function g1(l){return await new Promise(r=>{setTimeout(()=>r(null),l)})}function m1(l,r){return new Promise((o,d)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await l(u);if(!r(u,null,h)){o(h);return}}catch(h){if(!r(u,h)){d(h);return}}})()})}function x1(l){return("0"+l.toString(16)).substr(-2)}function y1(){const r=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let d="";for(let u=0;u<56;u++)d+=i.charAt(Math.floor(Math.random()*o));return d}return crypto.getRandomValues(r),Array.from(r,x1).join("")}async function b1(l){const i=new TextEncoder().encode(l),o=await crypto.subtle.digest("SHA-256",i),d=new Uint8Array(o);return Array.from(d).map(u=>String.fromCharCode(u)).join("")}async function v1(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const i=await b1(l);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lr(l,r,i=!1){const o=y1();let d=o;i&&(d+="/PASSWORD_RECOVERY"),await hr(l,`${r}-code-verifier`,d);const u=await v1(o);return[u,o===u?"plain":"s256"]}const _1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function S1(l){const r=l.headers.get(Ud);if(!r||!r.match(_1))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function w1(l){if(!l)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(l<=r)throw new Error("JWT has expired")}function j1(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const k1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cr(l){if(!k1.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jd(){const l={};return new Proxy(l,{get:(r,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hg(l){return JSON.parse(JSON.stringify(l))}var C1=function(l,r){var i={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&r.indexOf(o)<0&&(i[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(l);d<o.length;d++)r.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(l,o[d])&&(i[o[d]]=l[o[d]]);return i};const xs=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),T1=[502,503,504];async function pg(l){var r;if(!p1(l))throw new Pd(xs(l),0);if(T1.includes(l.status))throw new Pd(xs(l),l.status);let i;try{i=await l.json()}catch(u){throw new Kg(xs(u),u)}let o;const d=S1(l);if(d&&d.getTime()>=Vg["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new cg(xs(i),l.status,((r=i.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new Ga}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new cg(xs(i),l.status,i.weak_password.reasons);throw new e1(xs(i),l.status||500,o)}const E1=(l,r,i,o)=>{const d={method:l,headers:r?.headers||{}};return l==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),d.body=JSON.stringify(o),Object.assign(Object.assign({},d),i))};async function at(l,r,i,o){var d;const u=Object.assign({},o?.headers);u[Ud]||(u[Ud]=Vg["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const h=(d=o?.query)!==null&&d!==void 0?d:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",g=await R1(l,r,i+p,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(g):{data:Object.assign({},g),error:null}}async function R1(l,r,i,o,d,u){const h=E1(r,o,d,u);let p;try{p=await l(i,Object.assign({},h))}catch(g){throw console.error(g),new Pd(xs(g),0)}if(p.ok||await pg(p),o?.noResolveJson)return p;try{return await p.json()}catch(g){await pg(g)}}function ga(l){var r;let i=null;A1(l)&&(i=Object.assign({},l),l.expires_at||(i.expires_at=u1(l.expires_in)));const o=(r=l.user)!==null&&r!==void 0?r:l;return{data:{session:i,user:o},error:null}}function gg(l){const r=ga(l);return!r.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(r.data.weak_password=l.weak_password),r}function Va(l){var r;return{data:{user:(r=l.user)!==null&&r!==void 0?r:l},error:null}}function N1(l){return{data:l,error:null}}function z1(l){const{action_link:r,email_otp:i,hashed_token:o,redirect_to:d,verification_type:u}=l,h=C1(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:r,email_otp:i,hashed_token:o,redirect_to:d,verification_type:u},g=Object.assign({},h);return{data:{properties:p,user:g},error:null}}function D1(l){return l}function A1(l){return l.access_token&&l.refresh_token&&l.expires_in}const kd=["global","local","others"];var B1=function(l,r){var i={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&r.indexOf(o)<0&&(i[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(l);d<o.length;d++)r.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(l,o[d])&&(i[o[d]]=l[o[d]]);return i};class M1{constructor({url:r="",headers:i={},fetch:o}){this.url=r,this.headers=i,this.fetch=Zg(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(r,i=kd[0]){if(kd.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kd.join(", ")}`);try{return await at(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Ge(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,i={}){try{return await at(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Va})}catch(o){if(Ge(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:i}=r,o=B1(r,["options"]),d=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(d.new_email=o?.newEmail,delete d.newEmail),await at(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:z1,redirectTo:i?.redirectTo})}catch(i){if(Ge(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(r){try{return await at(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Va})}catch(i){if(Ge(i))return{data:{user:null},error:i};throw i}}async listUsers(r){var i,o,d,u,h,p,g;try{const m={nextPage:null,lastPage:0,total:0},x=await at(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=r?.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(u=(d=r?.perPage)===null||d===void 0?void 0:d.toString())!==null&&u!==void 0?u:""},xform:D1});if(x.error)throw x.error;const S=await x.json(),E=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,k=(g=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return k.length>0&&(k.forEach(T=>{const N=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(T.split(";")[1].split("=")[1]);m[`${D}Page`]=N}),m.total=parseInt(E)),{data:Object.assign(Object.assign({},S),m),error:null}}catch(m){if(Ge(m))return{data:{users:[]},error:m};throw m}}async getUserById(r){cr(r);try{return await at(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Va})}catch(i){if(Ge(i))return{data:{user:null},error:i};throw i}}async updateUserById(r,i){cr(r);try{return await at(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:i,headers:this.headers,xform:Va})}catch(o){if(Ge(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,i=!1){cr(r);try{return await at(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:i},xform:Va})}catch(o){if(Ge(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){cr(r.userId);try{const{data:i,error:o}=await at(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:i,error:o}}catch(i){if(Ge(i))return{data:null,error:i};throw i}}async _deleteFactor(r){cr(r.userId),cr(r.id);try{return{data:await at(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}}}function mg(l={}){return{getItem:r=>l[r]||null,setItem:(r,i)=>{l[r]=i},removeItem:r=>{delete l[r]}}}function O1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const dr={debug:!!(globalThis&&Xg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jg extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class I1 extends Jg{}async function L1(l,r,i){dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),dr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async d=>{if(d){dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,d.name);try{return await i()}finally{dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,d.name)}}else{if(r===0)throw dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new I1(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(dr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}O1();const U1={url:Kb,storageKey:Qb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xg(l,r,i){return await i()}const ur={};class Ci{constructor(r){var i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ci.nextInstanceID,Ci.nextInstanceID+=1,this.instanceID>0&&Pn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const d=Object.assign(Object.assign({},U1),r);if(this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.persistSession=d.persistSession,this.storageKey=d.storageKey,this.autoRefreshToken=d.autoRefreshToken,this.admin=new M1({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=Zg(d.fetch),this.lock=d.lock||xg,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,d.lock?this.lock=d.lock:Pn()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=L1:this.lock=xg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:Xg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mg(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=mg(this.memoryStorage)),Pn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var r,i;return(i=(r=ur[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(r){ur[this.storageKey]=Object.assign(Object.assign({},ur[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,i;return(i=(r=ur[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){ur[this.storageKey]=Object.assign(Object.assign({},ur[this.storageKey]),{cachedAt:r})}_debug(...r){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gg}) ${new Date().toISOString()}`,...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{const i=h1(window.location.href);let o="none";if(this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce"),Pn()&&this.detectSessionInUrl&&o!=="none"){const{data:d,error:u}=await this._getSessionFromURL(i,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),a1(u)){const g=(r=u.details)===null||r===void 0?void 0:r.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:p}=d;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return Ge(i)?{error:i}:{error:new Kg("Unexpected error during initialization",i)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var i,o,d;try{const u=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=r?.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(d=r?.options)===null||d===void 0?void 0:d.captchaToken}},xform:ga}),{data:h,error:p}=u;if(p||!h)return{data:{user:null,session:null},error:p};const g=h.session,m=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(u){if(Ge(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(r){var i,o,d;try{let u;if("email"in r){const{email:x,password:S,options:E}=r;let k=null,T=null;this.flowType==="pkce"&&([k,T]=await lr(this.storage,this.storageKey)),u=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E?.emailRedirectTo,body:{email:x,password:S,data:(i=E?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:k,code_challenge_method:T},xform:ga})}else if("phone"in r){const{phone:x,password:S,options:E}=r;u=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:S,data:(o=E?.data)!==null&&o!==void 0?o:{},channel:(d=E?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:ga})}else throw new Qo("You must provide either an email or phone number and a password");const{data:h,error:p}=u;if(p||!h)return{data:{user:null,session:null},error:p};const g=h.session,m=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(u){if(Ge(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(r){try{let i;if("email"in r){const{email:u,password:h,options:p}=r;i=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:gg})}else if("phone"in r){const{phone:u,password:h,options:p}=r;i=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:gg})}else throw new Qo("You must provide either an email or phone number and a password");const{data:o,error:d}=i;return d?{data:{user:null,session:null},error:d}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Ko}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:d})}catch(i){if(Ge(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOAuth(r){var i,o,d,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(i=r.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=r.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:i}=r;if(i==="solana")return await this.signInWithSolana(r);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}async signInWithSolana(r){var i,o,d,u,h,p,g,m,x,S,E,k;let T,N;if("message"in r)T=r.message,N=r.signature;else{const{chain:D,wallet:P,statement:R,options:I}=r;let Z;if(Pn())if(typeof P=="object")Z=P;else{const le=window;if("solana"in le&&typeof le.solana=="object"&&("signIn"in le.solana&&typeof le.solana.signIn=="function"||"signMessage"in le.solana&&typeof le.solana.signMessage=="function"))Z=le.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Z=P}const Y=new URL((i=I?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in Z&&Z.signIn){const le=await Z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),R?{statement:R}:null));let fe;if(Array.isArray(le)&&le[0]&&typeof le[0]=="object")fe=le[0];else if(le&&typeof le=="object"&&"signedMessage"in le&&"signature"in le)fe=le;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in fe&&"signature"in fe&&(typeof fe.signedMessage=="string"||fe.signedMessage instanceof Uint8Array)&&fe.signature instanceof Uint8Array)T=typeof fe.signedMessage=="string"?fe.signedMessage:new TextDecoder().decode(fe.signedMessage),N=fe.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Z)||typeof Z.signMessage!="function"||!("publicKey"in Z)||typeof Z!="object"||!Z.publicKey||!("toBase58"in Z.publicKey)||typeof Z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${Y.host} wants you to sign in with your Solana account:`,Z.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(d=(o=I?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((u=I?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((h=I?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((p=I?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((g=I?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((m=I?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((S=(x=I?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||S===void 0)&&S.length?["Resources",...I.signInWithSolana.resources.map(fe=>`- ${fe}`)]:[]].join(`
`);const le=await Z.signMessage(new TextEncoder().encode(T),"utf8");if(!le||!(le instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=le}}try{const{data:D,error:P}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:d1(N)},!((E=r.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(k=r.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:ga});if(P)throw P;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new Ko}:(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:P})}catch(D){if(Ge(D))return{data:{user:null,session:null},error:D};throw D}}async _exchangeCodeForSession(r){const i=await ms(this.storage,`${this.storageKey}-code-verifier`),[o,d]=(i??"").split("/");try{const{data:u,error:h}=await at(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:ga});if(await Ya(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Ko}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:d??null}),error:h})}catch(u){if(Ge(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(r){try{const{options:i,provider:o,token:d,access_token:u,nonce:h}=r,p=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:d,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:ga}),{data:g,error:m}=p;return m?{data:{user:null,session:null},error:m}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Ko}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:m})}catch(i){if(Ge(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOtp(r){var i,o,d,u,h;try{if("email"in r){const{email:p,options:g}=r;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await lr(this.storage,this.storageKey));const{error:S}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(i=g?.data)!==null&&i!==void 0?i:{},create_user:(o=g?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:m,code_challenge_method:x},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:S}}if("phone"in r){const{phone:p,options:g}=r,{data:m,error:x}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(d=g?.data)!==null&&d!==void 0?d:{},create_user:(u=g?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(h=g?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:x}}throw new Qo("You must provide either an email or phone number.")}catch(p){if(Ge(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(r){var i,o;try{let d,u;"options"in r&&(d=(i=r.options)===null||i===void 0?void 0:i.redirectTo,u=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:p}=await at(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:d,xform:ga});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const g=h.session,m=h.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(d){if(Ge(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithSSO(r){var i,o,d;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await lr(this.storage,this.storageKey)),await at(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(i=r.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((d=r?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:N1})}catch(u){if(Ge(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)throw o;if(!i)throw new Ga;const{error:d}=await at(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:d}})}catch(r){if(Ge(r))return{data:{user:null,session:null},error:r};throw r}}async resend(r){try{const i=`${this.url}/resend`;if("email"in r){const{email:o,type:d,options:u}=r,{error:h}=await at(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:d,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in r){const{phone:o,type:d,options:u}=r,{data:h,error:p}=await at(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:d,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:p}}throw new Qo("You must provide either an email or phone number and a type")}catch(i){if(Ge(i))return{data:{user:null,session:null},error:i};throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(r,i){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await r(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const i=await ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?r=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<_d:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const h=await ms(this.userStorage,this.storageKey+"-user");h?.user?r.user=h.user:r.user=jd()}if(this.storage.isServer&&r.user){let h=this.suppressGetSessionWarning;r=new Proxy(r,{get:(g,m,x)=>(!h&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,m,x))})}return{data:{session:r},error:null}}const{session:d,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{session:null},error:u}:{data:{session:d},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Va}):await this._useSession(async i=>{var o,d,u;const{data:h,error:p}=i;if(p)throw p;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ga}:await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0,xform:Va})})}catch(i){if(Ge(i))return n1(i)&&(await this._removeSession(),await Ya(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}}async updateUser(r,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,i))}async _updateUser(r,i={}){try{return await this._useSession(async o=>{const{data:d,error:u}=o;if(u)throw u;if(!d.session)throw new Ga;const h=d.session;let p=null,g=null;this.flowType==="pkce"&&r.email!=null&&([p,g]=await lr(this.storage,this.storageKey));const{data:m,error:x}=await at(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:p,code_challenge_method:g}),jwt:h.access_token,xform:Va});if(x)throw x;return h.user=m.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(o){if(Ge(o))return{data:{user:null},error:o};throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new Ga;const i=Date.now()/1e3;let o=i,d=!0,u=null;const{payload:h}=wd(r.access_token);if(h.exp&&(o=h.exp,d=o<=i),d){const{session:p,error:g}=await this._callRefreshToken(r.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:g}=await this._getUser(r.access_token);if(g)throw g;u={access_token:r.access_token,refresh_token:r.refresh_token,user:p.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(i){if(Ge(i))return{data:{session:null,user:null},error:i};throw i}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async i=>{var o;if(!r){const{data:h,error:p}=i;if(p)throw p;r=(o=h.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new Ga;const{session:d,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{user:null,session:null},error:u}:d?{data:{user:d.user,session:d},error:null}:{data:{user:null,session:null},error:null}})}catch(i){if(Ge(i))return{data:{user:null,session:null},error:i};throw i}}async _getSessionFromURL(r,i){try{if(!Pn())throw new Xo("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Xo(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new lg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xo("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new lg("No code detected.");const{data:R,error:I}=await this._exchangeCodeForSession(r.code);if(I)throw I;const Z=new URL(window.location.href);return Z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Z.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:d,access_token:u,refresh_token:h,expires_in:p,expires_at:g,token_type:m}=r;if(!u||!p||!h||!m)throw new Xo("No session defined in URL");const x=Math.round(Date.now()/1e3),S=parseInt(p);let E=x+S;g&&(E=parseInt(g));const k=E-x;k*1e3<=fr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${S}s`);const T=E-S;x-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,E,x):x-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,E,x);const{data:N,error:D}=await this._getUser(u);if(D)throw D;const P={provider_token:o,provider_refresh_token:d,access_token:u,expires_in:S,expires_at:E,refresh_token:h,token_type:m,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:r.type},error:null}}catch(o){if(Ge(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const i=await ms(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&i)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:d,error:u}=i;if(u)return{error:u};const h=(o=d.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:p}=await this.admin.signOut(h,r);if(p&&!(t1(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return r!=="others"&&(await this._removeSession(),await Ya(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(r){const i=f1(),o={id:i,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async i=>{var o,d;try{const{data:{session:u},error:h}=i;if(h)throw h;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((d=this.stateChangeEmitters.get(r))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,i={}){let o=null,d=null;this.flowType==="pkce"&&([o,d]=await lr(this.storage,this.storageKey,!0));try{return await at(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:d,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(u){if(Ge(u))return{data:null,error:u};throw u}}async getUserIdentities(){var r;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(r=i.user.identities)!==null&&r!==void 0?r:[]},error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}}async linkIdentity(r){var i;try{const{data:o,error:d}=await this._useSession(async u=>{var h,p,g,m,x;const{data:S,error:E}=u;if(E)throw E;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=r.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=r.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await at(this.fetch,"GET",k,{headers:this.headers,jwt:(x=(m=S.session)===null||m===void 0?void 0:m.access_token)!==null&&x!==void 0?x:void 0})});if(d)throw d;return Pn()&&!(!((i=r.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:r.provider,url:o?.url},error:null}}catch(o){if(Ge(o))return{data:{provider:r.provider,url:null},error:o};throw o}}async unlinkIdentity(r){try{return await this._useSession(async i=>{var o,d;const{data:u,error:h}=i;if(h)throw h;return await at(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(d=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&d!==void 0?d:void 0})})}catch(i){if(Ge(i))return{data:null,error:i};throw i}}async _refreshAccessToken(r){const i=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await m1(async d=>(d>0&&await g1(200*Math.pow(2,d-1)),this._debug(i,"refreshing attempt",d),await at(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:ga})),(d,u)=>{const h=200*Math.pow(2,d);return u&&Sd(u)&&Date.now()+h-o<fr})}catch(o){if(this._debug(i,"error",o),Ge(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(i,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",i,"url",o),Pn()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const d=await ms(this.storage,this.storageKey);if(d&&this.userStorage){let h=await ms(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:d.user},await hr(this.userStorage,this.storageKey+"-user",h)),d.user=(r=h?.user)!==null&&r!==void 0?r:jd()}else if(d&&!d.user&&!d.user){const h=await ms(this.storage,this.storageKey+"-user");h&&h?.user?(d.user=h.user,await Ya(this.storage,this.storageKey+"-user"),await hr(this.storage,this.storageKey,d)):d.user=jd()}if(this._debug(o,"session from storage",d),!this._isValidSession(d)){this._debug(o,"session is not valid"),d!==null&&await this._removeSession();return}const u=((i=d.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<_d;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${_d}s`),u){if(this.autoRefreshToken&&d.refresh_token){const{error:h}=await this._callRefreshToken(d.refresh_token);h&&(console.error(h),Sd(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(d.access_token);!p&&h?.user?(d.user=h.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(o,"error",d),console.error(d);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var i,o;if(!r)throw new Ga;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new il;const{data:u,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!u.session)throw new Ga;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={session:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(d,"error",u),Ge(u)){const h={session:null,error:u};return Sd(u)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(r,i,o=!0){const d=`#_notifyAllSubscribers(${r})`;this._debug(d,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:i});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(r,i)}catch(g){u.push(g)}});if(await Promise.all(h),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(d,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const i=Object.assign({},r),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await hr(this.userStorage,this.storageKey+"-user",{user:i.user});const d=Object.assign({},i);delete d.user;const u=hg(d);await hr(this.storage,this.storageKey,u)}else{const d=hg(i);await hr(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),await Ya(this.storage,this.storageKey),await Ya(this.storage,this.storageKey+"-code-verifier"),await Ya(this.storage,this.storageKey+"-user"),this.userStorage&&await Ya(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Pn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),fr);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((o.expires_at*1e3-r)/fr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${fr}ms, refresh threshold is ${Ld} ticks`),d<=Ld&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Jg)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const i=`#_onVisibilityChanged(${r})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,i,o){const d=[`provider=${encodeURIComponent(i)}`];if(o?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&d.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,h]=await lr(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});d.push(p.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);d.push(u.toString())}return o?.skipBrowserRedirect&&d.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${d.join("&")}`}async _unenroll(r){try{return await this._useSession(async i=>{var o;const{data:d,error:u}=i;return u?{data:null,error:u}:await at(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(Ge(i))return{data:null,error:i};throw i}}async _enroll(r){try{return await this._useSession(async i=>{var o,d;const{data:u,error:h}=i;if(h)return{data:null,error:h};const p=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:{issuer:r.issuer}),{data:g,error:m}=await at(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return m?{data:null,error:m}:(r.factorType==="totp"&&(!((d=g?.totp)===null||d===void 0)&&d.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(i){if(Ge(i))return{data:null,error:i};throw i}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:d,error:u}=i;if(u)return{data:null,error:u};const{data:h,error:p}=await at(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:{code:r.code,challenge_id:r.challengeId},headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:p})})}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:d,error:u}=i;return u?{data:null,error:u}:await at(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:{channel:r.channel},headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}async _challengeAndVerify(r){const{data:i,error:o}=await this._challenge({factorId:r.factorId});return o?{data:null,error:o}:await this._verify({factorId:r.factorId,challengeId:i.id,code:r.code})}async _listFactors(){const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const o=r?.factors||[],d=o.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=o.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:o,totp:d,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async r=>{var i,o;const{data:{session:d},error:u}=r;if(u)return{data:null,error:u};if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=wd(d.access_token);let p=null;h.aal&&(p=h.aal);let g=p;((o=(i=d.user.factors)===null||i===void 0?void 0:i.filter(S=>S.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(g="aal2");const x=h.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(r,i={keys:[]}){let o=i.keys.find(p=>p.kid===r);if(o)return o;const d=Date.now();if(o=this.jwks.keys.find(p=>p.kid===r),o&&this.jwks_cached_at+Jb>d)return o;const{data:u,error:h}=await at(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=d,o=u.keys.find(p=>p.kid===r),!o)?null:o}async getClaims(r,i={}){try{let o=r;if(!o){const{data:k,error:T}=await this.getSession();if(T||!k.session)return{data:null,error:T};o=k.session.access_token}const{header:d,payload:u,signature:h,raw:{header:p,payload:g}}=wd(o);i?.allowExpired||w1(u.exp);const m=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!m){const{error:k}=await this.getUser(o);if(k)throw k;return{data:{claims:u,header:d,signature:h},error:null}}const x=j1(d.alg),S=await crypto.subtle.importKey("jwk",m,x,!0,["verify"]);if(!await crypto.subtle.verify(x,S,h,c1(`${p}.${g}`)))throw new qd("Invalid JWT signature");return{data:{claims:u,header:d,signature:h},error:null}}catch(o){if(Ge(o))return{data:null,error:o};throw o}}}Ci.nextInstanceID=0;const P1=Ci;class q1 extends P1{constructor(r){super(r)}}var $1=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{m(o.next(x))}catch(S){h(S)}}function g(x){try{m(o.throw(x))}catch(S){h(S)}}function m(x){x.done?u(x.value):d(x.value).then(p,g)}m((o=o.apply(l,r||[])).next())})};class W1{constructor(r,i,o){var d,u,h;this.supabaseUrl=r,this.supabaseKey=i;const p=Vb(r);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const g=`sb-${p.hostname.split(".")[0]}-auth-token`,m={db:Lb,realtime:Pb,auth:Object.assign(Object.assign({},Ub),{storageKey:g}),global:Ib},x=Gb(o??{},m);this.storageKey=(d=x.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(S,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=x.auth)!==null&&h!==void 0?h:{},this.headers,x.global.fetch),this.fetch=Hb(i,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new sb(new URL("rest/v1",p).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new Bb(this.storageUrl.href,this.headers,this.fetch,o?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new V0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,i={},o={}){return this.rest.rpc(r,i,o)}channel(r,i={config:{}}){return this.realtime.channel(r,i)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var r,i;return $1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:d,userStorage:u,storageKey:h,flowType:p,lock:g,debug:m},x,S){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new q1({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),x),storageKey:h,autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:d,userStorage:u,flowType:p,lock:g,debug:m,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new _b(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,o)=>{this._handleTokenChanged(i,"CLIENT",o?.access_token)})}_handleTokenChanged(r,i,o){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:r==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const H1=(l,r,i)=>new W1(l,r,i);function F1(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const r=l.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}F1()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Y1="https://wuluriiajnaruvaldlhb.supabase.co",G1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bHVyaWlham5hcnV2YWxkbGhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4MDc4OTQsImV4cCI6MjA3MzM4Mzg5NH0.-Dx4fALDwoKHjsxOy1hKsME_DG4ZCQi2PdLCq5wV_hI",se=H1(Y1,G1),$d=l=>{let r=0;for(let i=0;i<l.length;i++){const o=l.charCodeAt(i);r=(r<<5)-r+o,r=r&r}return r.toString()},em=v.createContext(void 0),Xn=()=>{const l=v.useContext(em);if(l===void 0)throw new Error("useAuth must be used within an AuthProvider");return l},V1=({children:l})=>{const[r,i]=v.useState(null),[o,d]=v.useState(null),[u,h]=v.useState(!0);v.useEffect(()=>{const E=setTimeout(()=>{u&&h(!1)},3e4);(async()=>{try{const{data:{session:N},error:D}=await se.auth.getSession();if(N?.user)d(N.user),await p(N.user.id);else{const P=localStorage.getItem("pos_user");P&&i(JSON.parse(P))}}catch{}finally{h(!1)}})();const{data:{subscription:T}}=se.auth.onAuthStateChange(async(N,D)=>{if(N==="SIGNED_IN"&&D?.user){d(D.user);try{await p(D.user.id)}catch{}}else N==="SIGNED_OUT"?(d(null),i(null),localStorage.removeItem("pos_user")):N==="TOKEN_REFRESHED"&&D?.user&&d(D.user)});return()=>{clearTimeout(E),T.unsubscribe()}},[]);const p=async E=>{try{const{data:k,error:T}=await se.from("users").select("*").eq("user_id",parseInt(E)).single();if(T){console.error("Error loading user:",T),i(null);return}i(k),localStorage.setItem("pos_user",JSON.stringify(k))}catch(k){console.error("Error in loadUserProfile:",k),i(null)}},g=async(E,k)=>{try{h(!0);const T=await m(E,k);return T&&localStorage.setItem("lastLogin",new Date().toLocaleString()),T}catch{return!1}finally{h(!1)}},m=async(E,k)=>{try{const T=$d(k),{data:N,error:D}=await se.from("users").select("*").eq("username",E).eq("password_hash",T).eq("active",!0).single();if(D||!N)return!1;const P={user_id:N.user_id,username:N.username,role:N.role,active:N.active,icon:N.icon};return i(P),localStorage.setItem("pos_user",JSON.stringify(P)),localStorage.setItem("lastLogin",new Date().toLocaleString()),localStorage.setItem("lastPassword",k),window.location.href="/",!0}catch{return!1}},S={user:r,supabaseUser:o,login:g,logout:async()=>{try{o&&await se.auth.signOut(),i(null),d(null),localStorage.removeItem("pos_user"),localStorage.removeItem("lastPassword")}catch{}},loading:u,currentUserId:o?.id||r?.user_id?.toString()};return n.jsx(em.Provider,{value:S,children:l})},tm=v.createContext(void 0),K1=({children:l})=>{const[r,i]=v.useState(!1);return n.jsx(tm.Provider,{value:{isCollapsed:r,setIsCollapsed:i},children:l})},su=()=>{const l=v.useContext(tm);if(l===void 0)throw new Error("useNav must be used within a NavProvider");return l},yg={Admin:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Manager:{canManageUsers:!1,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!1,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Cashier:{canManageUsers:!1,canManageProducts:!1,canProcessSales:!0,canViewReports:!1,canChangeSettings:!1,canUploadImages:!1,canLookupProducts:!0,canLookupCustomers:!0}},nm=v.createContext(void 0),Q1=({children:l})=>{const{user:r}=Xn(),i=r?.role||"Cashier",o=yg[i]||yg.Cashier,d=p=>o[p]||!1,h={userRole:i,permissions:o,hasPermission:d,canAccessRoute:p=>{switch(p){case"/admin":return d("canManageUsers");case"/products":return d("canManageProducts")||d("canLookupProducts");case"/sales":return d("canProcessSales");case"/customers":return d("canLookupCustomers");case"/":return!0;default:return!0}}};return n.jsx(nm.Provider,{value:h,children:l})},ru=()=>{const l=v.useContext(nm);if(l===void 0)throw new Error("useRole must be used within a RoleProvider");return l},X1=v.createContext(void 0),Z1=({children:l})=>{const[r,i]=v.useState(null),[o,d]=v.useState(!1);v.useEffect(()=>{const p=sessionStorage.getItem("pin_validated");i(p==="true")},[]);const u=async p=>{d(!0);const g="1967";return await new Promise(m=>setTimeout(m,500)),p===g?(i(!0),sessionStorage.setItem("pin_validated","true"),d(!1),!0):(i(!1),d(!1),!1)},h=p=>{i(p)};return n.jsx(X1.Provider,{value:{isPinValid:r,isCheckingPin:o,validatePin:u,setPinValid:h},children:l})},J1=()=>{const{isCollapsed:l,setIsCollapsed:r}=su();v.useEffect(()=>{const i=d=>{if(l)return;const u=document.querySelector("nav");if(u&&u.contains(d.target))return;d.target.closest('button, a, input, select, textarea, [role="button"], [onclick]')||r(!0)},o=setTimeout(()=>{document.addEventListener("click",i)},100);return()=>{clearTimeout(o),document.removeEventListener("click",i)}},[l,r])},ev=()=>{const[l,r]=v.useState(""),[i,o]=v.useState(""),[d,u]=v.useState(""),{login:h,loading:p}=Xn(),g=async m=>{if(m.preventDefault(),u(""),!l||!i){u("Please enter both username and password");return}await h(l,i)||u("Invalid username or password")};return n.jsxs("div",{style:{minHeight:"100vh",height:"100vh",width:"100%",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url(/images/backgrounds/appbg3.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.05)",zIndex:0}})}),n.jsx("div",{style:{position:"relative",zIndex:10,height:"100vh",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px 16px"},children:n.jsx("div",{style:{width:"100%",maxWidth:"600px"},children:n.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 255, 255, 0.08)",padding:"40px",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 100%)",pointerEvents:"none"}}),n.jsxs("div",{style:{textAlign:"center",marginBottom:"32px",position:"relative",zIndex:1},children:[n.jsx("div",{style:{marginBottom:"20px"},children:n.jsx("img",{src:"/images/backgrounds/logo1.png",alt:"Company Logo",style:{width:"200px",height:"auto"}})}),n.jsx("h2",{style:{fontSize:"36px",fontWeight:"bold",color:"white",marginBottom:"8px",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:"Login"})]}),n.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"24px",position:"relative",zIndex:1},onSubmit:g,children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"username",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"white",marginBottom:"8px",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Username"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("div",{style:{position:"absolute",top:"50%",right:"12px",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2},children:n.jsx("i",{className:"fa-solid fa-user",style:{color:"white",fontSize:"20px"}})}),n.jsx("input",{id:"username",name:"username",type:"text",required:!0,style:{background:"transparent",border:"none",borderBottom:"2px solid rgba(255, 255, 255, 0.4)",color:"white",fontSize:"16px",padding:"12px 40px 12px 0",width:"100%",outline:"none",transition:"border-color 0.3s ease"},onFocus:m=>m.target.style.borderBottomColor="rgba(255, 255, 255, 0.8)",onBlur:m=>m.target.style.borderBottomColor="rgba(255, 255, 255, 0.4)",placeholder:"Enter your username",value:l,onChange:m=>r(m.target.value),disabled:p})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"white",marginBottom:"8px",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Password"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("div",{style:{position:"absolute",top:"50%",right:"12px",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2},children:n.jsx("i",{className:"fa-solid fa-lock",style:{color:"white",fontSize:"20px"}})}),n.jsx("input",{id:"password",name:"password",type:"password",required:!0,style:{background:"transparent",border:"none",borderBottom:"2px solid rgba(255, 255, 255, 0.4)",color:"white",fontSize:"16px",padding:"12px 40px 12px 0",width:"100%",outline:"none",transition:"border-color 0.3s ease"},onFocus:m=>m.target.style.borderBottomColor="rgba(255, 255, 255, 0.8)",onBlur:m=>m.target.style.borderBottomColor="rgba(255, 255, 255, 0.4)",placeholder:"Enter your password",value:i,onChange:m=>o(m.target.value),disabled:p})]})]}),n.jsx("div",{className:"text-center",children:localStorage.getItem("pos_user")?n.jsxs("button",{type:"button",onClick:async()=>{const m=JSON.parse(localStorage.getItem("pos_user")||"{}"),x=localStorage.getItem("lastPassword");m.username&&x?await h(m.username,x)||u("Auto-login failed. Please enter credentials manually."):u("No stored credentials found.")},disabled:p,className:"text-sm text-blue-300 hover:text-blue-200 underline transition-colors duration-200 disabled:opacity-50",children:["Last login: ",localStorage.getItem("lastLogin")||"Never"," (Click to auto-login)"]}):n.jsx("p",{className:"text-sm text-white/70",children:"Last login: Never"})}),d&&n.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-100 px-4 py-3 rounded-lg backdrop-blur-sm",children:d}),n.jsx("div",{children:n.jsx("button",{type:"submit",disabled:p,style:{width:"100%",padding:"16px 24px",background:"white",color:"#1a1a1a",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:p?"not-allowed":"pointer",opacity:p?.7:1,transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:p?n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{color:"#1a1a1a",fontSize:"18px",marginRight:"8px",animation:"spin 1s linear infinite"}}),"Signing in..."]}):"Log in"})})]})]})})})]})},tv=({children:l})=>{const{user:r,supabaseUser:i,loading:o}=Xn();return o?n.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"Loading..."})]})}):!r&&!i?n.jsx(ev,{}):n.jsx(n.Fragment,{children:l})},Zo=({children:l,requiredPermission:r,fallbackRoute:i="/"})=>{const o=Hn(),{canAccessRoute:d,hasPermission:u}=ru();return d(o.pathname)?r&&!u(r)?n.jsx(Yp,{to:i,replace:!0}):n.jsx(n.Fragment,{children:l}):n.jsx(Yp,{to:i,replace:!0})},nv=()=>{const l=Hn(),{user:r,logout:i}=Xn(),{isCollapsed:o,setIsCollapsed:d}=su(),{canAccessRoute:u,userRole:h}=ru(),g=[{path:"/",label:"Dashboard",icon:"fas fa-home"},{path:"/products",label:"Products",icon:"fas fa-box"},{path:"/sales",label:"Sales",icon:"fas fa-dollar-sign"},{path:"/transactions",label:"Transactions",icon:"fas fa-receipt"},{path:"/side-businesses",label:"Side Businesses",icon:"fas fa-briefcase"},{path:"/reminders",label:"Reminders",icon:"fas fa-sticky-note"},{path:"/admin",label:"Admin",icon:"fas fa-users-cog"}].filter(x=>u(x.path)),m=x=>{switch(x){case"Admin":return"#ef4444";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#6b7280"}};return n.jsxs("nav",{style:{width:o?"60px":"160px",height:"100vh",background:"#1a1a1a",borderRight:"1px solid #333333",display:"flex",flexDirection:"column",position:"fixed",left:0,top:0,zIndex:50,padding:o?"20px 8px 20px 8px":"20px 12px 20px 12px",boxShadow:"2px 0 8px rgba(0, 0, 0, 0.3)",transition:"width 0.3s ease, padding 0.3s ease"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:o?"center":"flex-start",gap:"12px",marginBottom:"32px",paddingBottom:"16px",borderBottom:"1px solid #333333"},children:[n.jsx("div",{onClick:()=>d(!o),style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:x=>x.target.style.setProperty("background-color","#333333"),onMouseLeave:x=>x.target.style.setProperty("background-color","transparent"),children:n.jsx("div",{style:{width:"16px",height:"2px",background:"#ffffff",position:"relative",transition:"transform 0.3s ease"},children:n.jsx("div",{style:{position:"absolute",top:"6px",left:0,width:"16px",height:"2px",background:"#ffffff",transition:"transform 0.3s ease"}})})}),!o&&n.jsx("h1",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"bold",margin:0,transition:"opacity 0.3s ease"},children:"Retail POS"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1,overflowY:"auto"},children:g.map(x=>n.jsxs(Zd,{to:x.path,style:{display:"flex",alignItems:"center",justifyContent:o?"center":"flex-start",gap:"12px",padding:o?"12px 8px":"12px 16px",borderRadius:"8px",textDecoration:"none",transition:"all 0.2s ease",background:l.pathname===x.path?"#333333":"transparent",color:l.pathname===x.path?"#ffffff":"#cccccc"},onMouseEnter:S=>{l.pathname!==x.path&&S.target.style.setProperty("background-color","#333333")(S.target).style.setProperty("color","#ffffff")},onMouseLeave:S=>{l.pathname!==x.path&&S.target.style.setProperty("background-color","transparent")(S.target).style.setProperty("color","#cccccc")},children:[n.jsx("i",{className:x.icon,style:{fontSize:"16px",width:"20px"}}),!o&&n.jsx("span",{style:{fontSize:"13px",fontWeight:"500",transition:"opacity 0.3s ease"},children:x.label})]},x.path))}),n.jsxs("div",{style:{padding:"8px 0",borderTop:"1px solid #333333",display:"flex",flexDirection:"column",gap:"8px",alignItems:o?"center":"stretch"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:o?"center":"flex-start",gap:"12px",padding:o?"8px":"8px 12px",borderRadius:"8px",background:"#333333",cursor:"pointer",transition:"background 0.2s ease",width:o?"44px":"auto"},onMouseEnter:x=>x.target.style.setProperty("background-color","#444444"),onMouseLeave:x=>x.target.style.setProperty("background-color","#333333"),children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",color:"#1a1a1a",fontSize:"14px",fontWeight:"bold"},children:r?.username?.charAt(0).toUpperCase()}),!o&&n.jsxs("div",{style:{flex:1},children:[n.jsx("p",{style:{color:"#ffffff",fontSize:"14px",fontWeight:"500",margin:0,lineHeight:"1.2",transition:"opacity 0.3s ease"},children:r?.username}),n.jsx("p",{style:{color:m(h),fontSize:"12px",margin:0,textTransform:"capitalize",transition:"opacity 0.3s ease",fontWeight:"500"},children:h})]})]}),n.jsxs("button",{onClick:async()=>{console.log("Logout button clicked"),await i()},style:{width:o?"44px":"100%",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"8px",background:"#dc3545",border:"none",cursor:"pointer",transition:"background 0.2s ease, width 0.3s ease",color:"#ffffff",fontSize:"14px",fontWeight:"500"},onMouseEnter:x=>{const S=x.target;S.style.background="#c82333"},onMouseLeave:x=>{const S=x.target;S.style.background="#dc3545"},children:[n.jsx("i",{className:"fa-solid fa-sign-out-alt",style:{fontSize:"16px"}}),!o&&n.jsx("span",{style:{transition:"opacity 0.3s ease"},children:"Logout"})]})]})]})},av=()=>{const[l,r]=v.useState([]),[i,o]=v.useState(!0),[d,u]=v.useState(null),h=async()=>{try{o(!0),u(null);const{data:m,error:x}=await se.from("products").select("*").lt("stock_quantity",10).order("stock_quantity",{ascending:!0});if(x)throw x;r(m||[])}catch(m){console.error("Error fetching low stock items:",m),u(m instanceof Error?m.message:"Failed to fetch low stock items")}finally{o(!1)}},p=async(m,x)=>{try{u(null);const{error:S}=await se.from("products").update({stock_quantity:x,last_updated:new Date().toISOString()}).eq("product_id",m);if(S)throw S;const{error:E}=await se.from("inventory_movements").insert({product_id:m,quantity_change:x,movement_type:"Restock",datetime:new Date().toISOString()});return E&&console.warn("Failed to log inventory movement:",E),await h(),!0}catch(S){return console.error("Error restocking product:",S),u(S instanceof Error?S.message:"Failed to restock product"),!1}},g=async m=>{const x=l.find(E=>E.product_id===m);if(!x)return u("Product not found"),!1;const S=Math.max(x.reorder_level*2,20);return await p(m,S)};return v.useEffect(()=>{h()},[]),{lowStockItems:l,loading:i,error:d,fetchLowStockItems:h,restockProduct:p,quickRestock:g}},sv=({product:l,onRestock:r,onQuickRestock:i})=>{const[o,d]=v.useState(!1),[u,h]=v.useState(""),[p,g]=v.useState(!1),m=async()=>{g(!0);const k=await i(l.product_id);g(!1),k&&d(!1)},x=async()=>{const k=parseInt(u);if(isNaN(k)||k<=0)return;g(!0);const T=await r(l.product_id,k);g(!1),T&&(d(!1),h(""))},S=()=>l.stock_quantity<=2?"#ef4444":l.stock_quantity<=5?"#f59e0b":"#eab308",E=()=>l.stock_quantity<=2?"Critical":l.stock_quantity<=5?"Low":"Below Reorder";return n.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:k=>{k.currentTarget.style.transform="translateY(-2px)",k.currentTarget.style.boxShadow="0 4px 16px rgba(62, 63, 41, 0.15)"},onMouseLeave:k=>{k.currentTarget.style.transform="translateY(0)",k.currentTarget.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.1)"},children:[n.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",background:S(),color:"white",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:E()}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[n.jsxs("div",{style:{width:"60px",height:"60px",borderRadius:"8px",background:"#f9fafb",border:"1px solid rgba(125, 141, 134, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:[l.image_url?n.jsx("img",{src:l.image_url,alt:l.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:k=>{k.currentTarget.style.setProperty("display","none")(k.currentTarget.nextElementSibling).style.setProperty("display","flex")}}):null,n.jsx("div",{style:{display:l.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:"#7d8d86",fontSize:"20px"},children:n.jsx("i",{className:"fa-solid fa-box"})})]}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0",lineHeight:"1.3"},children:l.name}),n.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"0 0 8px 0"},children:l.category}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[n.jsxs("span",{style:{fontSize:"12px",color:"#3e3f29",fontWeight:"500"},children:["Stock: ",l.stock_quantity]}),n.jsx("span",{style:{fontSize:"12px",color:"#7d8d86"},children:"•"}),n.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86"},children:["Reorder at: ",l.reorder_level]})]}),o?n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"number",value:u,onChange:k=>h(k.target.value),placeholder:"Qty",min:"1",style:{width:"60px",padding:"6px 8px",border:"1px solid #7d8d86",borderRadius:"6px",fontSize:"12px",outline:"none"}}),n.jsx("button",{onClick:x,disabled:p||!u,style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:p||!u?"not-allowed":"pointer",opacity:p||!u?.7:1,transition:"all 0.2s ease"},onMouseEnter:k=>{!p&&u&&(k.currentTarget.style.background="#bca88d")},onMouseLeave:k=>{!p&&u&&(k.currentTarget.style.background="#7d8d86")},children:p?n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):"Restock"}),n.jsx("button",{onClick:()=>{d(!1),h("")},disabled:p,style:{background:"transparent",color:"#7d8d86",border:"none",fontSize:"12px",cursor:p?"not-allowed":"pointer",opacity:p?.7:1},children:"Cancel"})]}):n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsxs("button",{onClick:m,disabled:p,style:{background:"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:p?"not-allowed":"pointer",opacity:p?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:k=>{p||(k.currentTarget.style.background="#059669")},onMouseLeave:k=>{p||(k.currentTarget.style.background="#10b981")},children:[p?n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):n.jsx("i",{className:"fa-solid fa-bolt"}),"Quick Restock"]}),n.jsx("button",{onClick:()=>d(!0),disabled:p,style:{background:"transparent",color:"#7d8d86",border:"1px solid #7d8d86",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:p?"not-allowed":"pointer",opacity:p?.7:1,transition:"all 0.2s ease"},onMouseEnter:k=>{p||(k.currentTarget.style.background="#7d8d86",k.currentTarget.style.color="white")},onMouseLeave:k=>{p||(k.currentTarget.style.background="transparent",k.currentTarget.style.color="#7d8d86")},children:"Custom"})]})]})]})]})},rv=()=>{const{lowStockItems:l,loading:r,error:i,restockProduct:o,quickRestock:d}=av(),[u,h]=v.useState(0),p=l[u]||null,g=u<l.length-1,m=u>0,x=()=>{g&&h(u+1)},S=()=>{m&&h(u-1)};return r?n.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading low stock items..."]})}):i?n.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),n.jsx("p",{style:{margin:0,fontSize:"14px"},children:i})]})}):n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:l.length>0?"#fbbf24":"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"18px",color:l.length>0?"#d97706":"#059669"}})}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Low Stock Items"}),n.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[l.length," item",l.length!==1?"s":""," need",l.length===1?"s":""," restocking"]})]})]}),l.length>1&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("button",{onClick:S,disabled:!m,style:{background:m?"#7d8d86":"#e5e7eb",color:m?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:m?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:E=>{m&&(E.currentTarget.style.background="#bca88d")},onMouseLeave:E=>{m&&(E.currentTarget.style.background="#7d8d86")},children:n.jsx("i",{className:"fa-solid fa-chevron-left"})}),n.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86",fontWeight:"500",minWidth:"40px",textAlign:"center"},children:[u+1," / ",l.length]}),n.jsx("button",{onClick:x,disabled:!g,style:{background:g?"#7d8d86":"#e5e7eb",color:g?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:g?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:E=>{g&&(E.currentTarget.style.background="#bca88d")},onMouseLeave:E=>{g&&(E.currentTarget.style.background="#7d8d86")},children:n.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]}),l.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#7d8d86"},children:[n.jsx("i",{className:"fa-solid fa-check-circle",style:{fontSize:"48px",marginBottom:"16px",color:"#10b981"}}),n.jsx("p",{style:{fontSize:"16px",margin:0,fontWeight:"500"},children:"All items are well stocked!"}),n.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0",opacity:.8},children:"No items need restocking at the moment."})]}):p?n.jsx(sv,{product:p,onRestock:o,onQuickRestock:d},p.product_id):null]})},iv=()=>{const[l,r]=v.useState([]),[i,o]=v.useState([]),[d,u]=v.useState([]),[h,p]=v.useState(!0),[g,m]=v.useState(null),x=k=>{const T=new Date;switch(k){case"today":const N=T.toISOString().split("T")[0];return{start:`${N}T00:00:00`,end:`${N}T23:59:59`};case"week":const D=new Date(T);D.setDate(T.getDate()-T.getDay()),D.setHours(0,0,0,0);const P=new Date(D);return P.setDate(D.getDate()+6),P.setHours(23,59,59,999),{start:D.toISOString(),end:P.toISOString()};case"month":const R=new Date(T.getFullYear(),T.getMonth(),1);R.setHours(0,0,0,0);const I=new Date(T.getFullYear(),T.getMonth()+1,0);return I.setHours(23,59,59,999),{start:R.toISOString(),end:I.toISOString()};default:return{start:"",end:""}}},S=async k=>{try{const{start:T,end:N}=x(k);console.log(`Fetching ${k} analytics from ${T} to ${N}`);const{data:D,error:P}=await se.from("sale_items").select(`
          quantity,
          price_each,
          products (product_id, name, image_url),
          sales!inner (datetime)
        `).gte("sales.datetime",T).lt("sales.datetime",N);if(P)throw console.error(`Error fetching ${k} analytics:`,P),P;console.log(`${k} analytics data:`,D);const R=new Map;(D||[]).forEach(Z=>{const Y=Z.products?.product_id,le=Z.products?.name,fe=Z.products?.image_url;if(Y&&le)if(R.has(Y)){const Se=R.get(Y);Se.quantity_sold+=Z.quantity,Se.total_sales+=Z.quantity*Z.price_each}else R.set(Y,{product_id:Y,product_name:le,quantity_sold:Z.quantity,total_sales:Z.quantity*Z.price_each,image_url:fe})});const I=Array.from(R.values()).sort((Z,Y)=>Y.total_sales-Z.total_sales).slice(0,5);return console.log(`${k} sorted products:`,I),I}catch(T){throw console.error(`Error fetching ${k} product analytics:`,T),T}},E=async()=>{try{p(!0),m(null);const[k,T,N]=await Promise.all([S("today").catch(()=>[]),S("week").catch(()=>[]),S("month").catch(()=>[])]);r(k),o(T),u(N)}catch(k){console.error("Error fetching product analytics:",k),m(k instanceof Error?k.message:"Failed to fetch product analytics")}finally{p(!1)}};return v.useEffect(()=>{E()},[]),{todayProducts:l,weekProducts:i,monthProducts:d,loading:h,error:g,refetch:E}},ov=()=>{const{todayProducts:l,weekProducts:r,monthProducts:i,loading:o,error:d}=iv(),[u,h]=v.useState("today"),p=E=>{switch(E){case"today":return l;case"week":return r;case"month":return i;default:return[]}},g=E=>{switch(E){case"today":return"Today";case"week":return"This Week";case"month":return"This Month";default:return""}},m=E=>{switch(E){case"today":return"fa-solid fa-calendar-day";case"week":return"fa-solid fa-calendar-week";case"month":return"fa-solid fa-calendar";default:return"fa-solid fa-chart-line"}},x=["today","week","month"],S=p(u);return o?n.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading product analytics..."]})}):d?n.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),n.jsx("p",{style:{margin:0,fontSize:"14px"},children:d})]})}):n.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#bca88d",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"18px",color:"#3e3f29"}})}),n.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Top Products"})]}),n.jsx("div",{style:{display:"flex",background:"#f9fafb",borderRadius:"8px",padding:"4px",gap:"4px"},children:x.map(E=>n.jsxs("button",{onClick:()=>h(E),style:{flex:1,padding:"8px 12px",borderRadius:"6px",border:"none",background:u===E?"#7d8d86":"transparent",color:u===E?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:k=>{u!==E&&(k.currentTarget.style.background="#e5e7eb",k.currentTarget.style.color="#3e3f29")},onMouseLeave:k=>{u!==E&&(k.currentTarget.style.background="transparent",k.currentTarget.style.color="#7d8d86")},children:[n.jsx("i",{className:m(E),style:{fontSize:"12px"}}),g(E)]},E))})]}),S.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#7d8d86"},children:[n.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),n.jsxs("p",{style:{fontSize:"16px",margin:0,fontWeight:"500"},children:["No sales data for ",g(u).toLowerCase()]}),n.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0",opacity:.8},children:"Check back later for product performance insights."})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:S.map((E,k)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"white",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.1)",transition:"all 0.2s ease"},onMouseEnter:T=>{T.currentTarget.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.1)",T.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:T=>{T.currentTarget.style.boxShadow="none",T.currentTarget.style.transform="translateY(0)"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:k===0?"#fbbf24":k===1?"#e5e7eb":k===2?"#f59e0b":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:k===0?"#d97706":k===1?"#6b7280":k===2?"#d97706":"#f1f0e4",fontSize:"12px",fontWeight:"bold",flexShrink:0},children:k===0?n.jsx("i",{className:"fa-solid fa-crown",style:{fontSize:"14px"}}):k+1}),n.jsxs("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#f9fafb",border:"1px solid rgba(125, 141, 134, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:[E.image_url?n.jsx("img",{src:E.image_url,alt:E.product_name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:T=>{T.currentTarget.style.setProperty("display","none")(T.currentTarget.nextElementSibling).style.setProperty("display","flex")}}):null,n.jsx("div",{style:{display:E.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:"#7d8d86",fontSize:"16px"},children:n.jsx("i",{className:"fa-solid fa-box"})})]}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 2px 0",lineHeight:"1.3"},children:E.product_name}),n.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:[E.quantity_sold," sold"]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981",margin:0},children:["€",E.total_sales.toFixed(2)]}),k===0&&n.jsx("p",{style:{fontSize:"10px",color:"#d97706",margin:"2px 0 0 0",fontWeight:"500"},children:"TOP SELLER"})]})]},E.product_id))})]})},lv=()=>{const[l,r]=v.useState([]),[i,o]=v.useState([]),[d,u]=v.useState(!0),[h,p]=v.useState(null),g=(N=0)=>{const D=new Date,P=D.getDay(),R=new Date(D);R.setDate(D.getDate()-P+N*7),R.setHours(0,0,0,0);const I=[],Z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let Y=0;Y<7;Y++){const le=new Date(R);le.setDate(R.getDate()+Y),I.push({day:Z[Y],date:le.toISOString().split("T")[0],fullDate:le})}return I},m=()=>{const N=[];for(let D=10;D<=20;D++){const P=D===12?"12 PM":D>12?`${D-12} PM`:`${D} AM`;N.push({hour:D,hourLabel:P,startTime:`${D.toString().padStart(2,"0")}:00:00`,endTime:`${(D+1).toString().padStart(2,"0")}:00:00`})}return N},x=async(N=0)=>{try{const D=g(N),P=[];for(const{day:R,date:I,fullDate:Z}of D){const Y=`${I}T00:00:00`,le=`${I}T23:59:59`,{data:fe,error:Se}=await se.from("sales").select("total_amount, datetime").gte("datetime",Y).lt("datetime",le);Se&&console.error(`Error fetching sales for ${R}:`,Se);const{data:ye,error:ne}=await se.from("side_business_sales").select("total_amount, date_time").gte("date_time",Y).lt("date_time",le);ne&&console.error(`Error fetching side business sales for ${R}:`,ne);const X=fe?.reduce((he,xe)=>he+(xe.total_amount||0),0)||0,W=ye?.reduce((he,xe)=>he+(xe.total_amount||0),0)||0,L=X+W,oe=fe?.length||0,pe=ye?.length||0,O=oe+pe,Q=O>0?L/O:0;P.push({day:R,date:I,totalSales:L,transactionCount:O,averageTransaction:Q})}r(P)}catch(D){throw console.error("Error fetching weekly sales:",D),D}},S=async N=>{try{const D=m(),P=[];for(const{hour:R,hourLabel:I,startTime:Z,endTime:Y}of D){const le=`${N}T${Z}`,fe=`${N}T${Y}`,{data:Se,error:ye}=await se.from("sales").select("total_amount, datetime").gte("datetime",le).lt("datetime",fe);ye&&console.error(`Error fetching hourly sales for ${R}:00:`,ye);const{data:ne,error:X}=await se.from("side_business_sales").select("total_amount, date_time").gte("date_time",le).lt("date_time",fe);X&&console.error(`Error fetching hourly side business sales for ${R}:00:`,X);const W=Se?.reduce((he,xe)=>he+(xe.total_amount||0),0)||0,L=ne?.reduce((he,xe)=>he+(xe.total_amount||0),0)||0,oe=W+L,pe=Se?.length||0,O=ne?.length||0,Q=pe+O;(oe>0||Q>0)&&console.log(`Hour ${R}:00 - Sales: €${oe.toFixed(2)}, Transactions: ${Q}`),P.push({hour:R,hourLabel:I,totalSales:oe,transactionCount:Q})}o(P)}catch(D){throw console.error("Error fetching hourly sales:",D),D}},E=async()=>{try{u(!0),p(null),await Promise.all([x(),S(new Date().toISOString().split("T")[0])])}catch(N){console.error("Error fetching sales analytics:",N),p(N instanceof Error?N.message:"Failed to fetch sales analytics")}finally{u(!1)}},k=async N=>{try{await S(N)}catch(D){console.error("Error refreshing hourly data:",D),p(D instanceof Error?D.message:"Failed to refresh hourly data")}},T=async(N=0)=>{try{await x(N)}catch(D){console.error("Error refreshing weekly data:",D),p(D instanceof Error?D.message:"Failed to refresh weekly data")}};return v.useEffect(()=>{E()},[]),{weeklyData:l,hourlyData:i,loading:d,error:h,refreshHourlyData:k,refreshWeeklyData:T,refetch:E}},cv=()=>{const[l,r]=v.useState(null),[i,o]=v.useState(!0),[d,u]=v.useState(null),h=async()=>{try{o(!0),u(null);const{data:p,error:g}=await se.from("business_info").select("*").order("business_id",{ascending:!0}).limit(1).single();if(g){console.error("Error fetching business info:",g),u(g.message);return}r(p)}catch(p){console.error("Error in fetchBusinessInfo:",p),u(p instanceof Error?p.message:"Failed to fetch business info")}finally{o(!1)}};return v.useEffect(()=>{h()},[]),{businessInfo:l,loading:i,error:d,refetch:h}},dv=()=>{const{weeklyData:l,hourlyData:r,loading:i,error:o,refreshHourlyData:d,refreshWeeklyData:u}=lv(),{businessInfo:h}=cv(),[p,g]=v.useState("weekly"),[m,x]=v.useState(new Date().toISOString().split("T")[0]),[S,E]=v.useState(0),[k,T]=v.useState({visible:!1,x:0,y:0,data:null}),N=async W=>{x(W),await d(W)},D=async()=>{const W=S-1;E(W),await u(W)},P=async()=>{const W=S+1;E(W),await u(W)},R=async()=>{E(0),await u(0)},I=()=>{const W=new Date,L=W.getDay(),oe=new Date(W);oe.setDate(W.getDate()-L+S*7);const pe=new Date(oe);pe.setDate(oe.getDate()+6);const O=Q=>Q.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${O(oe)} - ${O(pe)}`},Z=(W,L)=>{T({visible:!0,x:W.clientX,y:W.clientY,data:L})},Y=()=>{T({visible:!1,x:0,y:0,data:null})},le=W=>{const L=Math.max(...W.map(oe=>oe.totalSales));return L===0?1:Math.ceil(L*1.1)},fe=(W,L)=>W===0?0:Math.max(W/L*180,4),Se=(W,L=!0)=>{if(L){const oe=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316"];return oe[W%oe.length]}else{const oe=Math.min(W/9,1),pe=Math.floor(59+180*oe),O=Math.floor(130+-62*oe),Q=Math.floor(246+-178*oe);return`rgb(${pe}, ${O}, ${Q})`}},ye=W=>`€${W.toFixed(2)}`;if(i)return n.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading sales data..."]})});if(o)return n.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:n.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),n.jsx("p",{style:{margin:0,fontSize:"14px"},children:o})]})});const ne=p==="weekly"?l:r,X=ne.length>0?le(ne):100;return ne.length===0&&!i&&!o?n.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",margin:"0",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",textAlign:"center",minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(h?.logo_url,n.jsx("img",{src:h?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:h?.name||"LandM Store Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:W=>{const L=W.target;L.style.display="none";const oe=L.parentElement;oe&&(oe.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(h?.name||"LandM Store")&&n.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:h?.name||"LandM Store"})]})]}),n.jsxs("div",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"16px"},children:[n.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),n.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"500"},children:"No sales data available"}),n.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.8},children:p==="weekly"?"No sales recorded for this week":"No sales recorded for this date"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-100%) scale(0.9); }
          to { opacity: 1; transform: translateY(-100%) scale(1); }
        }
      `}),n.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",maxWidth:"1000px",margin:"0 auto",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(h?.logo_url,n.jsx("img",{src:h?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:h?.name||"LandM Store Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:W=>{const L=W.target;L.style.display="none";const oe=L.parentElement;oe&&(oe.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(h?.name||"LandM Store")&&n.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:h?.name||"LandM Store"})]})]}),n.jsxs("div",{style:{display:"flex",background:"#f9fafb",borderRadius:"8px",padding:"4px",gap:"4px",marginBottom:"24px",maxWidth:"300px"},children:[n.jsxs("button",{onClick:()=>g("weekly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:p==="weekly"?"#7d8d86":"transparent",color:p==="weekly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:W=>{p!=="weekly"&&(W.currentTarget.style.background="#e5e7eb",W.currentTarget.style.color="#3e3f29")},onMouseLeave:W=>{p!=="weekly"&&(W.currentTarget.style.background="transparent",W.currentTarget.style.color="#7d8d86")},children:[n.jsx("i",{className:"fa-solid fa-calendar-week",style:{fontSize:"12px"}}),"Weekly"]}),n.jsxs("button",{onClick:()=>g("hourly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:p==="hourly"?"#7d8d86":"transparent",color:p==="hourly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:W=>{p!=="hourly"&&(W.currentTarget.style.background="#e5e7eb",W.currentTarget.style.color="#3e3f29")},onMouseLeave:W=>{p!=="hourly"&&(W.currentTarget.style.background="transparent",W.currentTarget.style.color="#7d8d86")},children:[n.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"12px"}}),"Hourly"]})]}),p==="weekly"&&n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[n.jsxs("button",{onClick:D,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:W=>{W.currentTarget.style.background="#f3f4f6",W.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:W=>{W.currentTarget.style.background="#ffffff",W.currentTarget.style.borderColor="#d1d5db"},children:[n.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Week"]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",marginBottom:"2px"},children:I()}),n.jsx("button",{onClick:R,style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline",transition:"color 0.2s ease"},onMouseEnter:W=>{W.currentTarget.style.color="#3e3f29"},onMouseLeave:W=>{W.currentTarget.style.color="#7d8d86"},children:S===0?"Current Week":"Go to Current Week"})]}),n.jsxs("button",{onClick:P,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:W=>{W.currentTarget.style.background="#f3f4f6",W.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:W=>{W.currentTarget.style.background="#ffffff",W.currentTarget.style.borderColor="#d1d5db"},children:["Next Week",n.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),p==="hourly"&&n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"8px"},children:"Select Date:"}),n.jsx("input",{type:"date",value:m,onChange:W=>N(W.target.value),style:{padding:"8px 12px",border:"1px solid #7d8d86",borderRadius:"6px",fontSize:"14px",color:"#3e3f29",background:"white",outline:"none"}})]}),n.jsxs("div",{style:{width:"100%",height:"400px",background:"white",borderRadius:"12px",padding:"40px",border:"1px solid rgba(125, 141, 134, 0.1)",position:"relative",overflow:"visible",margin:"0",boxSizing:"border-box",fontFamily:"inherit",display:"flex",flexDirection:"column"},children:[n.jsx("svg",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none",zIndex:0},viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[0,25,50,75,100].map((W,L)=>n.jsx("line",{x1:"0",y1:W,x2:"100",y2:W,stroke:"#e5e7eb",strokeWidth:"0.5",opacity:"0.6"},L))}),n.jsx("div",{style:{position:"absolute",left:"15px",top:"0",bottom:"0",display:"flex",flexDirection:"column",justifyContent:"space-between",fontSize:"11px",color:"#9ca3af",fontWeight:"500",zIndex:1,padding:"10px 0"},children:[100,75,50,25,0].map(W=>n.jsx("span",{style:{textAlign:"right",minWidth:"20px"},children:ye(X*W/100)},W))}),n.jsx("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",flex:1,gap:p==="weekly"?"20px":"12px",marginBottom:"30px",padding:"0 40px 0 70px",position:"relative",zIndex:2,overflow:"visible",width:"100%",boxSizing:"border-box",minHeight:"260px"},children:ne.map((W,L)=>{const oe=fe(W.totalSales,X),pe=Se(L,p==="weekly");return n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",flex:1,maxWidth:p==="weekly"?"100px":"80px",overflow:"visible",boxSizing:"border-box",height:"100%"},children:[n.jsx("div",{style:{width:"100%",maxWidth:p==="weekly"?"80px":"60px",height:`${oe}px`,background:pe,borderRadius:"8px 8px 0 0",marginBottom:"12px",position:"relative",transition:"all 0.3s ease",cursor:"pointer",boxSizing:"border-box",display:"block"},onMouseEnter:O=>{O.currentTarget.style.transform="scaleY(1.05)",O.currentTarget.style.opacity="0.8",Z(O,W)},onMouseLeave:O=>{O.currentTarget.style.transform="scaleY(1)",O.currentTarget.style.opacity="1",Y()}}),n.jsx("span",{style:{fontSize:p==="weekly"?"13px":"11px",fontWeight:"500",color:"#7d8d86",textAlign:"center",display:"block",margin:"0",padding:"0"},children:p==="weekly"?W.day:W.hourLabel})]},L)})})]}),k.visible&&k.data&&n.jsxs("div",{style:{position:"fixed",left:k.x+10,top:k.y-10,background:"rgba(31, 41, 55, 0.95)",color:"#ffffff",padding:"12px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",pointerEvents:"none",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",zIndex:9999,backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",transform:"translateY(-100%)",animation:"fadeIn 0.2s ease-out"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[n.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:p==="weekly"?Se(0,!0):Se(0,!1)}}),n.jsx("span",{style:{fontWeight:"600",fontSize:"13px"},children:p==="weekly"?k.data.day:k.data.hourLabel})]}),n.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginBottom:"2px"},children:[k.data.transactionCount," transaction",k.data.transactionCount!==1?"s":""]}),n.jsx("div",{style:{fontWeight:"600",fontSize:"14px",color:"#60a5fa"},children:ye(k.data.totalSales)})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",marginTop:"16px",flexWrap:"wrap",background:"#3e3f29",borderRadius:"8px",padding:"12px 16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:"#7d8d86"}}),n.jsx("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:"500"},children:p==="weekly"?"Daily Sales":"Hourly Sales"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"12px",color:"#f1f0e4"}}),n.jsxs("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:"500"},children:["Max: ",ye(X)]})]})]})]})]})},uv=()=>{const l=bs(),[r,i]=v.useState({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),[o,d]=v.useState(!0),[u,h]=v.useState(null),[p,g]=v.useState([]),[m,x]=v.useState(!1),[S,E]=v.useState(!1),[k,T]=v.useState(new Date),[N,D]=v.useState(new Date),[P,R]=v.useState([]);v.useEffect(()=>{I(),Z()},[]);const I=async()=>{try{d(!0);const[X,W,L]=await Promise.all([se.from("products").select("product_id",{count:"exact",head:!0}).limit(1e3),se.from("sales").select("sale_id",{count:"exact",head:!0}).limit(1e3),se.from("customers").select("customer_id",{count:"exact",head:!0}).limit(1e3)]),oe=new Date().toISOString().split("T")[0],{data:pe,count:O}=await se.from("sales").select("total_amount",{count:"exact"}).gte("datetime",`${oe}T00:00:00`).lt("datetime",`${oe}T23:59:59`),Q=pe?.reduce((K,J)=>K+(J.total_amount||0),0)||0,{data:he}=await se.from("side_business_sales").select("total_amount").gte("date_time",`${oe}T00:00:00`).lt("date_time",`${oe}T23:59:59`),xe=he?.reduce((K,J)=>K+(J.total_amount||0),0)||0,{count:j}=await se.from("products").select("product_id",{count:"exact",head:!0}).lt("stock_quantity",10);i({totalProducts:X.count||0,totalSales:W.count||0,totalCustomers:L.count||0,todayRevenue:Q,todaySideBusinessRevenue:xe,todayTransactions:O||0,lowStockItems:j||0})}catch(X){console.error("Error fetching dashboard stats:",X),alert(`Dashboard loading error: ${X.message||"Unknown error"}. Please check your database permissions.`)}finally{d(!1)}},Z=async()=>{try{const{data:X,error:W}=await se.from("sales").select(`
          sale_id,
          datetime,
          total_amount,
          payment_method,
          sale_items (quantity)
        `).order("datetime",{ascending:!1}).limit(5);if(W){console.error("Error fetching recent transactions:",W);return}const L=(X||[]).map(oe=>({sale_id:oe.sale_id,datetime:oe.datetime,total_amount:oe.total_amount,payment_method:oe.payment_method,items_count:oe.sale_items?.reduce((pe,O)=>pe+O.quantity,0)||0,status:"completed"}));R(L)}catch(X){console.error("Error in fetchRecentTransactions:",X)}},Y=()=>{h(null),g([])},le=X=>{Y(),l(`/transaction/${X}`)},fe=X=>{T(X),E(!1),Se(X)},Se=async X=>{try{d(!0);const W=X.toISOString().split("T")[0],[L,oe,pe]=await Promise.all([se.from("products").select("product_id",{count:"exact",head:!0}),se.from("sales").select("sale_id",{count:"exact",head:!0}).gte("datetime",`${W}T00:00:00`).lt("datetime",`${W}T23:59:59`),se.from("customers").select("customer_id",{count:"exact",head:!0})]),{data:O,count:Q}=await se.from("sales").select("total_amount",{count:"exact"}).gte("datetime",`${W}T00:00:00`).lt("datetime",`${W}T23:59:59`),he=O?.reduce((J,ue)=>J+(ue.total_amount||0),0)||0,{data:xe}=await se.from("side_business_sales").select("total_amount").gte("date_time",`${W}T00:00:00`).lt("date_time",`${W}T23:59:59`),j=xe?.reduce((J,ue)=>J+(ue.total_amount||0),0)||0,{count:K}=await se.from("products").select("product_id",{count:"exact",head:!0}).lt("stock_quantity",10);i({totalProducts:L.count||0,totalSales:oe.count||0,totalCustomers:pe.count||0,todayRevenue:he,todaySideBusinessRevenue:j,todayTransactions:Q||0,lowStockItems:K||0})}catch(W){console.error("Error fetching dashboard stats for date:",W)}finally{d(!1)}},ye=(X,W)=>{const L=new Date(X,W,1),oe=new Date(L);oe.setDate(oe.getDate()-L.getDay());const pe=[],O=new Date(oe);for(let Q=0;Q<42;Q++)pe.push(new Date(O)),O.setDate(O.getDate()+1);return pe},ne=[{title:"Today's Sales",value:`€${(r.todayRevenue+r.todaySideBusinessRevenue).toFixed(2)}`,change:`Products: €${r.todayRevenue.toFixed(2)} | Side Business: €${r.todaySideBusinessRevenue.toFixed(2)}`,changeColor:"#1a1a1a",icon:"fa-solid fa-euro-sign",bgColor:"#1a1a1a",iconColor:"#f1f0e4"},{title:"Transactions",value:r.todayTransactions,change:"+8% from yesterday",changeColor:"#bca88d",icon:"fa-solid fa-shopping-cart",bgColor:"#bca88d",iconColor:"#1a1a1a"}];return o?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:n.jsxs("div",{style:{fontSize:"20px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading dashboard..."]})}):n.jsxs("div",{style:{padding:"0"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px"},children:[n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#1a1a1a",margin:"0 0 8px 0"},children:"Dashboard"}),n.jsx("p",{style:{fontSize:"16px",color:"#1a1a1a",margin:0},children:"Welcome back! Here's an overview of your business."})]}),n.jsxs("div",{onClick:()=>E(!0),style:{background:"#1a1a1a",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",transition:"all 0.2s ease",minWidth:"200px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[n.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),n.jsx("span",{style:{color:"#bca88d"},children:k.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),n.jsx("i",{className:"fa-solid fa-chevron-down",style:{fontSize:"12px",color:"#bca88d",transition:"transform 0.2s ease"}})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",marginBottom:"32px",minHeight:"140px"},children:[ne.map((X,W)=>n.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",transition:"all 0.3s ease",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:n.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{color:"#1a1a1a",fontSize:"16px",fontWeight:"500",margin:"0 0 12px 0"},children:X.title}),n.jsx("p",{style:{fontSize:"36px",fontWeight:"bold",color:"#1a1a1a",margin:"0 0 8px 0",lineHeight:"1.1"},children:X.value}),n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:X.changeColor,margin:0},children:X.change})]}),n.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"14px",background:X.bgColor,display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"flex-end",marginTop:"16px"},children:n.jsx("i",{className:X.icon,style:{fontSize:"24px",color:X.iconColor}})})]})},W)),n.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:n.jsx(rv,{})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px"},children:[n.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"18px",color:"#f1f0e4"}})}),n.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:"Recent Transactions"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:P.length>0?P.map((X,W)=>n.jsxs("div",{onClick:()=>l(`/transaction/TXN-${X.sale_id.toString().padStart(6,"0")}`),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"white",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:X.status==="completed"?"#10b981":"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:`fa-solid ${X.status==="completed"?"fa-check":"fa-hourglass-half"}`,style:{fontSize:"12px",color:"white"}})}),n.jsxs("div",{style:{flex:1},children:[n.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 2px 0"},children:["#TXN-",X.sale_id.toString().padStart(6,"0")]}),n.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[X.items_count," item",X.items_count!==1?"s":""," • ",X.payment_method]})]}),n.jsx("div",{style:{textAlign:"right"},children:n.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:0},children:["€",X.total_amount.toFixed(2)]})})]},X.sale_id)):n.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#1a1a1a",fontSize:"14px"},children:"No recent transactions"})})]}),n.jsx(ov,{})]}),n.jsx(dv,{}),u&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",margin:0},children:[u," Transactions"]}),n.jsx("button",{onClick:Y,style:{background:"none",border:"none",fontSize:"24px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:"×"})]}),m?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"40px"},children:n.jsxs("div",{style:{fontSize:"16px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading transactions..."]})}):p.length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:p.map((X,W)=>n.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>le(X.transaction_id),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"16px"},children:n.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"14px"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 4px 0"},children:X.transaction_id}),n.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[new Date(X.datetime).toLocaleTimeString()," • ",X.items_count," items • ",X.payment_method]})]})]}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1a1a1a"},children:["€",X.total_amount.toFixed(2)]})]},W))}):n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#1a1a1a"},children:[n.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),n.jsxs("p",{style:{fontSize:"16px",margin:0},children:["No transactions found for ",u]})]})]})}),S&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[n.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:N.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>D(new Date(N.getFullYear(),N.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:n.jsx("i",{className:"fa-solid fa-chevron-left"})}),n.jsx("button",{onClick:()=>D(new Date(N.getFullYear(),N.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:n.jsx("i",{className:"fa-solid fa-chevron-right"})}),n.jsx("button",{onClick:()=>E(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:"×"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(X=>n.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#1a1a1a",padding:"8px 4px"},children:X},X)),ye(N.getFullYear(),N.getMonth()).map((X,W)=>{const L=X.getMonth()===N.getMonth(),oe=X.toDateString()===new Date().toDateString(),pe=X.toDateString()===k.toDateString();return n.jsx("button",{onClick:()=>fe(X),style:{background:pe?"#1a1a1a":"transparent",color:pe?"#f1f0e4":L?"#1a1a1a":"#bca88d",border:oe?"2px solid #1a1a1a":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:L?1:.5},children:X.getDate()},W)})]}),n.jsx("div",{style:{textAlign:"center"},children:n.jsx("button",{onClick:()=>fe(new Date),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Today"})})]})})]})};async function fv(l,r){console.log("🔄 Starting image upload for product:",r),console.log("📁 File details:",{name:l.name,size:l.size,type:l.type});try{const i=`product-images/${r}.${l.name.split(".").pop()}`;console.log("📤 Uploading to Supabase Storage:",i);const{error:o}=await se.storage.from("products").upload(i,l,{contentType:l.type,upsert:!0});if(o)return console.error("❌ Upload failed:",o),null;const{data:{publicUrl:d}}=se.storage.from("products").getPublicUrl(i);console.log("✅ Image uploaded successfully:",d),console.log("💾 Updating database with public URL...");const{error:u}=await se.from("products").update({image_url:d}).eq("product_id",r);return u?(console.error("❌ DB update failed:",u),null):(console.log("✅ Database updated with public URL"),d)}catch(i){return console.error("💥 Unexpected error during upload:",i),null}}const hv=()=>{const{hasPermission:l}=ru(),{user:r}=Xn(),[i,o]=v.useState([]),[d,u]=v.useState(!0),[h,p]=v.useState(null),[g,m]=v.useState(""),[x,S]=v.useState("all"),[E,k]=v.useState(!1),[T,N]=v.useState(!1),[D,P]=v.useState(null),[R,I]=v.useState({product_name:"",category:"",price:"",stock_quantity:"",reorder_level:"",supplier_info:"",tax_rate:"",description:"",sku:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),[Z,Y]=v.useState(!1),[le,fe]=v.useState(!1),[Se,ye]=v.useState("Hi! I'm Lily, your inventory assistant! I can help you understand your stock levels and manage your products. Hover over the stats cards to see what they mean!"),[ne,X]=v.useState(!1),[W,L]=v.useState(null),[oe,pe]=v.useState(null),[O,Q]=v.useState(!1),[he,xe]=v.useState(null),[j,K]=v.useState(null),[J,ue]=v.useState(1),[be,Me]=v.useState(10),[Ee,Je]=v.useState(0);v.useEffect(()=>{de()},[]);const We=()=>{ue(1),de(1,be,g,x)},Ce=y=>{y.key==="Enter"&&We()},ze=()=>{m(""),ue(1),de(1,be,"",x)};v.useEffect(()=>{ue(1),de(1,be,g,x)},[x]);const de=async(y=J,M=be,te=g,ke=x)=>{try{u(!0),p(null);let Oe=se.from("products").select("*",{count:"exact",head:!0}),Be=se.from("products").select("*").order("product_id",{ascending:!0});if(te&&te.trim()){const Ye=`name.ilike.%${te.trim()}%,category.ilike.%${te.trim()}%`;Oe=Oe.or(Ye),Be=Be.or(Ye)}ke&&ke!=="all"&&(Oe=Oe.eq("category",ke),Be=Be.eq("category",ke));const{count:Xe,error:He}=await Oe;if(He)throw He;Je(Xe||0);const Zt=(y-1)*M,{data:Ie,error:kn}=await Be.range(Zt,Zt+M-1);if(kn)throw kn;o(Ie||[])}catch(Oe){const Be=Oe instanceof Error?Oe.message:"Failed to fetch products";p(Be),console.error("Error fetching products:",Oe),alert(`Products loading error: ${Be}. Please check your database permissions.`)}finally{u(!1)}},ge=i,Ne=Math.ceil(Ee/be),A=Ee>0?(J-1)*be+1:0,ee=Math.min(J*be,Ee),Le=["all",...Array.from(new Set(i.map(y=>y.category)))],qe=y=>!y||y.length<2?[]:Array.from(new Set(i.map(ke=>ke.category))).filter(ke=>ke.toLowerCase().includes(y.toLowerCase())||y.toLowerCase().includes(ke.toLowerCase())||ke.toLowerCase().split(" ").some(Oe=>Oe.includes(y.toLowerCase())||y.toLowerCase().includes(Oe))).slice(0,5),mt=y=>{y>=1&&y<=Ne&&(ue(y),de(y,be,g,x))},ct=y=>{Me(y),ue(1),de(1,y,g,x)},on=()=>{J>1&&mt(J-1)},zt=()=>{J<Ne&&mt(J+1)},Gt=async()=>{try{let y=0;const M=5;for(;y<M;){const{data:te,error:ke}=await se.from("products").select("product_id").order("product_id",{ascending:!1}).limit(1);if(ke)throw ke;const Be=((te&&te.length>0?parseInt(te[0].product_id):0)+1).toString(),{data:Xe,error:He}=await se.from("products").select("product_id").eq("product_id",Be).limit(1);if(He)throw He;if(!Xe||Xe.length===0)return Be;y++,await new Promise(Zt=>setTimeout(Zt,100))}return Date.now().toString()}catch(y){return console.error("Error generating unique ID:",y),Date.now().toString()}},tn=async y=>{y.preventDefault(),console.log("Form submitted, newProduct:",R),Y(!0);try{const M=await Gt();console.log("Generated product ID:",M);const te={product_id:M,name:R.product_name,category:R.category,price:R.is_weighted?0:parseFloat(R.price),stock_quantity:parseInt(R.stock_quantity),supplier_info:R.supplier_info,reorder_level:parseInt(R.reorder_level),tax_rate:parseFloat(R.tax_rate)||0,last_updated:new Date().toISOString(),is_weighted:R.is_weighted,weight_unit:R.is_weighted?R.weight_unit:null,price_per_unit:R.is_weighted?parseFloat(R.price_per_unit):null};console.log("Inserting product data:",te);let ke=0;const Oe=3;let Be=null;for(;ke<Oe;){const{error:Xe}=await se.from("products").insert([te]);if(!Xe){Be=null;break}if(Xe.message&&Xe.message.includes("duplicate key value violates unique constraint"))console.log(`Duplicate key error on attempt ${ke+1}, regenerating ID...`),te.product_id=await Gt(),Be=Xe,ke++,await new Promise(He=>setTimeout(He,200));else{Be=Xe;break}}if(Be)throw console.error("Supabase error after retries:",Be),Be;if(console.log("Product added successfully!"),W){const Xe=await Fe(M);if(Xe){const He={...te,image_url:Xe};o(Zt=>[...Zt,He])}}else o(Xe=>[...Xe,te]);I({product_name:"",category:"",price:"",stock_quantity:"",reorder_level:"",supplier_info:"",tax_rate:"",description:"",sku:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),L(null),pe(null),k(!1)}catch(M){console.error("Error adding product:",M);let te="Failed to add product";M instanceof Error&&M.message&&(M.message.includes("duplicate key value violates unique constraint")?te="A product with this ID already exists. Please try again.":M.message.includes("violates check constraint")?te="Invalid data provided. Please check your input values.":M.message.includes("not-null constraint")?te="Required fields are missing. Please fill in all required fields.":te=`Failed to add product: ${M.message}`),p(te)}finally{Y(!1)}},nn=async y=>{if(y.preventDefault(),!!D){Y(!0),p(null);try{const M={name:R.product_name,category:R.category,price:R.is_weighted?0:parseFloat(R.price),stock_quantity:parseInt(R.stock_quantity),reorder_level:parseInt(R.reorder_level),supplier_info:R.supplier_info,tax_rate:parseFloat(R.tax_rate)||0,last_updated:new Date().toISOString(),is_weighted:R.is_weighted,weight_unit:R.is_weighted?R.weight_unit:null,price_per_unit:R.is_weighted?parseFloat(R.price_per_unit):null},{data:te,error:ke}=await se.from("products").update(M).eq("product_id",D.product_id).select();if(ke)throw console.error("Supabase error:",ke),ke;let Oe=te[0];if(W){const Be=await Fe(D.product_id);Be&&(Oe={...te[0],image_url:Be})}o(i.map(Be=>Be.product_id===D.product_id?Oe:Be)),q(),N(!1),P(null)}catch(M){console.error("Failed to update product:",M),p(M instanceof Error?M.message:"Failed to update product")}finally{Y(!1)}}},jn=async y=>{try{console.log("🗑️ Starting delete for product:",y);const{error:M}=await se.from("products").delete().eq("product_id",y);if(M)throw console.error("❌ Error deleting product:",M),M;console.log("✅ Product deleted successfully"),o(i.filter(te=>te.product_id!==y)),K(null)}catch(M){console.error("💥 Delete failed:",M),p(M instanceof Error?M.message:"Failed to delete product")}},q=()=>{I({product_name:"",category:"",price:"",stock_quantity:"",reorder_level:"",supplier_info:"",tax_rate:"",description:"",sku:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),L(null),pe(null),k(!1),N(!1),P(null)},me=y=>{P(y),I({product_name:y.name,category:y.category,price:y.is_weighted?y.price_per_unit?.toString()||"":y.price.toString(),stock_quantity:y.stock_quantity.toString(),reorder_level:y.reorder_level.toString(),supplier_info:y.supplier_info||"",tax_rate:y.tax_rate?.toString()||"",description:y.description||"",sku:y.sku||"",is_weighted:y.is_weighted||!1,weight_unit:y.weight_unit||"",price_per_unit:y.price_per_unit?.toString()||""}),pe(y.image_url||null),L(null),N(!0)},je=y=>{const M=y.target.files?.[0];if(M){L(M);const te=new FileReader;te.onload=ke=>{pe(ke.target?.result)},te.readAsDataURL(M)}},Fe=async y=>{if(!W)return null;try{return await fv(W,y)}catch(M){return console.error("Image upload failed:",M),null}},st=y=>{xe(y),Q(!0)},Et=()=>{Q(!1),xe(null)},Dt=(y,M)=>y===0?{status:"out",color:"#ef4444",bgColor:"#fef2f2",textColor:"#dc2626"}:y<=M?{status:"low",color:"#f59e0b",bgColor:"#fffbeb",textColor:"#d97706"}:{status:"good",color:"#10b981",bgColor:"#f0fdf4",textColor:"#059669"},jt=y=>{const M=y.toLowerCase();return M.includes("small")?"#3b82f6":M.includes("large")?"#ef4444":M.includes("medium")?"#f59e0b":"#7d8d86"},$t=y=>{const M=y.split(" ");return M.map((te,ke)=>{const Oe=te.toLowerCase();let Be="#1a1a1a";return Oe==="small"?Be="#3b82f6":Oe==="large"?Be="#ef4444":Oe==="medium"&&(Be="#f59e0b"),n.jsxs("span",{style:{color:Be},children:[te,ke<M.length-1?" ":""]},ke)})},_t=()=>n.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,display:"flex",alignItems:"flex-end",gap:"12px"},children:[le&&n.jsxs("div",{style:{background:"#ffffff",border:"2px solid #7d8d86",borderRadius:"16px",padding:"12px 16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",maxWidth:"250px",fontSize:"14px",color:"#3e3f29",position:"relative",marginBottom:"8px"},children:[n.jsx("p",{style:{margin:0,fontWeight:"500"},children:Se}),n.jsx("div",{style:{position:"absolute",bottom:"-8px",right:"20px",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"8px solid #7d8d86"}})]}),n.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"#ffffff",border:"3px solid #7d8d86",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease"},onClick:()=>fe(!le),onMouseEnter:y=>y.target.style.transform="scale(1.05)",onMouseLeave:y=>y.target.style.transform="scale(1)",children:n.jsx("img",{src:r?.icon?`/images/icons/${r.icon}.png`:"/images/backgrounds/lily.png",alt:r?.icon||"Lily",style:{width:"50px",height:"50px",borderRadius:"50%"}})})]});return d?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:n.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading inventory..."]})}):n.jsxs("div",{style:{padding:"0"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px"},children:[n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:"Inventory Management"}),n.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:"Manage your product inventory, stock levels, and suppliers."})]}),l("canManageProducts")&&n.jsxs("button",{onClick:()=>{console.log("Add Product button clicked"),k(!0),console.log("showAddModal set to true")},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},onMouseEnter:y=>{y.target.style.background="#bca88d",ye("Click this button to add a new product to your inventory! You'll need to fill in details like name, price, stock quantity, and reorder level."),fe(!0)},onMouseLeave:y=>{y.target.style.background="#7d8d86",fe(!1)},children:[n.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"16px"}}),n.jsx("span",{children:"Add Product"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginBottom:"32px"},children:[n.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"18px",color:"#f1f0e4"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:i.length}),n.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Total Products"})]})]})}),n.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:"fa-solid fa-circle-check",style:{fontSize:"18px",color:"white"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:i.filter(y=>y.stock_quantity>y.reorder_level).length}),n.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"In Stock"})]})]})}),n.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:"fa-solid fa-triangle-exclamation",style:{fontSize:"18px",color:"white"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:i.filter(y=>y.stock_quantity<=y.reorder_level&&y.stock_quantity>0).length}),n.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Low Stock"})]})]})}),n.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:"fa-solid fa-circle-xmark",style:{fontSize:"18px",color:"white"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:i.filter(y=>y.stock_quantity===0).length}),n.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Out of Stock"})]})]})})]}),n.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:n.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"center",flexWrap:"wrap"},children:[n.jsx("div",{style:{flex:"1",minWidth:"250px",maxWidth:"400px"},children:n.jsxs("div",{style:{position:"relative",display:"flex",gap:"8px"},children:[n.jsxs("div",{style:{position:"relative",flex:1},children:[n.jsx("i",{className:"fa-solid fa-search",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#7d8d86",fontSize:"14px",zIndex:1}}),n.jsx("input",{type:"text",placeholder:"Search products... (Press Enter to search)",value:g,onChange:y=>m(y.target.value),onKeyPress:Ce,onBlur:We,style:{width:"100%",padding:"10px 12px 10px 36px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29",boxSizing:"border-box"}}),g&&n.jsx("button",{onClick:ze,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"12px",transition:"color 0.2s ease"},onMouseEnter:y=>y.target.style.color="#ef4444",onMouseLeave:y=>y.target.style.color="#7d8d86",children:n.jsx("i",{className:"fa-solid fa-times"})})]}),n.jsxs("button",{onClick:We,style:{padding:"10px 16px",background:"#7d8d86",color:"#f1f0e4",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},onMouseEnter:y=>y.target.style.background="#bca88d",onMouseLeave:y=>y.target.style.background="#7d8d86",children:[n.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"12px"}}),"Search"]})]})}),n.jsx("div",{style:{minWidth:"180px"},children:n.jsx("select",{value:x,onChange:y=>S(y.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29",cursor:"pointer"},children:Le.map(y=>n.jsx("option",{value:y,children:y==="all"?"All Categories":y},y))})})]})}),n.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{style:{background:"#3e3f29"},children:n.jsxs("tr",{children:[n.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Product"}),n.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Category"}),n.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Price"}),n.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Stock"}),n.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Status"}),n.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Actions"})]})}),n.jsx("tbody",{children:ge.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:6,style:{padding:"40px",textAlign:"center",color:"#7d8d86"},children:[n.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),n.jsx("p",{style:{fontSize:"16px",margin:0},children:"No products found"}),n.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0"},children:"Add your first product to get started!"})]})}):ge.map(y=>{const M=Dt(y.stock_quantity,y.reorder_level);return n.jsxs("tr",{style:{borderBottom:"1px solid rgba(125, 141, 134, 0.1)",transition:"background 0.2s ease"},onMouseEnter:te=>te.target.style.background="rgba(125, 141, 134, 0.05)",onMouseLeave:te=>te.target.style.background="transparent",children:[n.jsx("td",{style:{padding:"16px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[y.image_url&&n.jsx("img",{src:y.image_url,alt:y.name,onClick:()=>y.image_url&&st(y.image_url),style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:te=>{te.target.style.transform="scale(1.05)"(te.target).style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",ye("Click on the image to see it in full size! This helps you get a better look at the product."),fe(!0)},onMouseLeave:te=>{te.target.style.transform="scale(1)"(te.target).style.boxShadow="none",fe(!1)}}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 4px 0"},children:$t(y.name)}),n.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["ID: ",y.product_id]})]})]})}),n.jsx("td",{style:{padding:"16px"},children:n.jsx("span",{style:{background:"#f3f4f6",color:jt(y.category),padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",border:`1px solid ${jt(y.category)}`},children:y.category})}),n.jsxs("td",{style:{padding:"16px"},children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:y.is_weighted&&y.price_per_unit&&y.weight_unit?`€${y.price_per_unit.toFixed(2)}/${y.weight_unit}`:`€${y.price.toFixed(2)}`}),y.is_weighted&&n.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"4px 0 0 0"},children:"Sold by weight"})]}),n.jsxs("td",{style:{padding:"16px"},children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:y.stock_quantity}),n.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["Reorder: ",y.reorder_level]})]}),n.jsx("td",{style:{padding:"16px"},children:n.jsx("span",{style:{background:M.bgColor,color:M.textColor,padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:M.status==="good"?"In Stock":M.status==="low"?"Low Stock":"Out of Stock"})}),n.jsx("td",{style:{padding:"16px"},children:n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l("canManageProducts")&&n.jsxs("button",{onClick:()=>me(y),style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:te=>{te.target.style.background="#bca88d",ye(`Click to edit "${y.name}". You can update the price, stock quantity, reorder level, and other details!`),fe(!0)},onMouseLeave:te=>{te.target.style.background="#7d8d86",fe(!1)},children:[n.jsx("i",{className:"fa-solid fa-pen-to-square",style:{marginRight:"4px"}}),"Edit"]}),n.jsxs("button",{onClick:()=>K(y),style:{background:"#ef4444",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:te=>te.target.style.background="#dc2626",onMouseLeave:te=>te.target.style.background="#ef4444",children:[n.jsx("i",{className:"fa-solid fa-trash-can",style:{marginRight:"4px"}}),"Delete"]})]})})]},y.product_id)})})]})})}),n.jsx("div",{style:{marginTop:"16px",fontSize:"14px",color:"#7d8d86",textAlign:"center",marginBottom:"16px"},children:Ee>0?n.jsxs(n.Fragment,{children:["Showing ",A,"-",ee," of ",Ee," products",Ne>1&&n.jsxs("span",{style:{marginLeft:"16px"},children:["(Page ",J," of ",Ne,")"]})]}):"No products found"}),Ne>1&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",padding:"16px",background:"#ffffff",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("label",{style:{fontSize:"14px",color:"#3e3f29",fontWeight:"500"},children:"Show:"}),n.jsxs("select",{value:be,onChange:y=>ct(parseInt(y.target.value)),style:{padding:"6px 12px",border:"1px solid #bca88d",borderRadius:"6px",fontSize:"14px",background:"white",color:"#3e3f29",cursor:"pointer"},children:[n.jsx("option",{value:5,children:"5"}),n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:25,children:"25"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]}),n.jsx("span",{style:{fontSize:"14px",color:"#7d8d86"},children:"per page"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsxs("button",{onClick:on,disabled:J===1,style:{padding:"8px 12px",border:"1px solid #bca88d",borderRadius:"6px",background:J===1?"#f3f4f6":"white",color:J===1?"#9ca3af":"#3e3f29",cursor:J===1?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:y=>{J!==1&&(y.target.style.background="#f8f9fa")},onMouseLeave:y=>{J!==1&&(y.target.style.background="white")},children:[n.jsx("i",{className:"fa-solid fa-chevron-left",style:{marginRight:"4px"}}),"Previous"]}),n.jsx("div",{style:{display:"flex",gap:"4px"},children:Array.from({length:Math.min(5,Ne)},(y,M)=>{let te;return Ne<=5||J<=3?te=M+1:J>=Ne-2?te=Ne-4+M:te=J-2+M,n.jsx("button",{onClick:()=>mt(te),style:{padding:"8px 12px",border:"1px solid #bca88d",borderRadius:"6px",background:J===te?"#7d8d86":"white",color:J===te?"#f1f0e4":"#3e3f29",cursor:"pointer",fontSize:"14px",fontWeight:J===te?"600":"400",transition:"all 0.2s ease",minWidth:"40px"},onMouseEnter:ke=>{J!==te&&(ke.target.style.background="#f8f9fa")},onMouseLeave:ke=>{J!==te&&(ke.target.style.background="white")},children:te},te)})}),n.jsxs("button",{onClick:zt,disabled:J===Ne,style:{padding:"8px 12px",border:"1px solid #bca88d",borderRadius:"6px",background:J===Ne?"#f3f4f6":"white",color:J===Ne?"#9ca3af":"#3e3f29",cursor:J===Ne?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:y=>{J!==Ne&&(y.target.style.background="#f8f9fa")},onMouseLeave:y=>{J!==Ne&&(y.target.style.background="white")},children:["Next",n.jsx("i",{className:"fa-solid fa-chevron-right",style:{marginLeft:"4px"}})]})]})]}),E&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Add New Product"}),n.jsx("button",{onClick:q,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:y=>{y.target.style.background="#f3f4f6",y.target.style.color="#3e3f29",ye("Click this X button to close the form without saving. It's the same as clicking Cancel!"),fe(!0)},onMouseLeave:y=>{y.target.style.background="none",y.target.style.color="#7d8d86",fe(!1)},children:n.jsx("i",{className:"fa-solid fa-times"})})]}),n.jsxs("form",{onSubmit:tn,children:[h&&n.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:h}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),n.jsx("input",{type:"text",required:!0,value:R.product_name,onChange:y=>I({...R,product_name:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("input",{type:"text",required:!0,value:R.category,onChange:y=>{I({...R,category:y.target.value}),X(y.target.value.length>=2)},onFocus:()=>{X(R.category.length>=2),ye("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),fe(!0)},onBlur:()=>setTimeout(()=>X(!1),200),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),ne&&qe(R.category).length>0&&n.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"1px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:qe(R.category).map((y,M)=>n.jsxs("div",{onClick:()=>{I({...R,category:y}),X(!1),ye(`Great choice! I've selected "${y}" for you. This helps keep your categories organized!`),fe(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:M<qe(R.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:te=>te.target.style.background="#f8f9fa",onMouseLeave:te=>te.target.style.background="transparent",children:[n.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),y]},M))})]})]})]}),n.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[n.jsx("input",{type:"checkbox",id:"is_weighted",checked:R.is_weighted,onChange:y=>I({...R,is_weighted:y.target.checked}),style:{width:"16px",height:"16px"}}),n.jsx("label",{htmlFor:"is_weighted",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),R.is_weighted&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),n.jsxs("select",{value:R.weight_unit,onChange:y=>I({...R,weight_unit:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},children:[n.jsx("option",{value:"",children:"Select unit"}),n.jsx("option",{value:"kg",children:"Kilogram (kg)"}),n.jsx("option",{value:"g",children:"Gram (g)"}),n.jsx("option",{value:"lb",children:"Pound (lb)"}),n.jsx("option",{value:"oz",children:"Ounce (oz)"}),n.jsx("option",{value:"l",children:"Liter (l)"}),n.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",R.weight_unit||"unit"," *"]}),n.jsx("input",{type:"number",step:"0.01",required:R.is_weighted,value:R.price_per_unit,onChange:y=>I({...R,price_per_unit:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",R.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),n.jsx("input",{type:"number",step:"0.01",required:!R.is_weighted,value:R.is_weighted?"0":R.price,onChange:y=>{R.is_weighted||I({...R,price:y.target.value})},style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:R.is_weighted?"#f9fafb":"white",color:R.is_weighted?"#6b7280":"#3e3f29",cursor:R.is_weighted?"not-allowed":"text"},placeholder:R.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:R.is_weighted})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),n.jsx("input",{type:"number",required:!0,value:R.stock_quantity,onChange:y=>I({...R,stock_quantity:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),n.jsx("input",{type:"number",required:!0,value:R.reorder_level,onChange:y=>I({...R,reorder_level:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"10"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),n.jsx("input",{type:"number",step:"0.01",value:R.tax_rate,onChange:y=>I({...R,tax_rate:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0.00"})]})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),n.jsx("input",{type:"text",value:R.supplier_info,onChange:y=>I({...R,supplier_info:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU (Auto-generated if empty)"}),n.jsx("input",{type:"text",value:R.sku,onChange:y=>I({...R,sku:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"Leave empty for auto-generation"})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),n.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[n.jsx("input",{type:"file",accept:"image/*",onChange:je,style:{display:"none"},id:"image-upload"}),n.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:y=>{y.target.style.borderColor="#7d8d86",y.target.style.color="#3e3f29",ye("Click here to upload a product image! This helps customers see what they're buying."),fe(!0)},onMouseLeave:y=>{y.target.style.borderColor="#bca88d",y.target.style.color="#7d8d86",fe(!1)},children:[n.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(oe||D?.image_url)&&n.jsxs("div",{style:{position:"relative"},children:[n.jsx("img",{src:oe||D?.image_url,alt:"Preview",onClick:()=>{const y=oe||D?.image_url;y&&st(y)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:y=>{y.target.style.transform="scale(1.05)",y.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:y=>{y.target.style.transform="scale(1)",y.target.style.boxShadow="none"}}),n.jsx("button",{type:"button",onClick:()=>{pe(null),L(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),n.jsx("textarea",{value:R.description,onChange:y=>I({...R,description:y.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[n.jsx("button",{type:"button",onClick:q,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:y=>{y.target.style.background="#e5e7eb",ye("This will close the form and clear all the information you've entered. Don't worry, you can always start over!"),fe(!0)},onMouseLeave:y=>{y.target.style.background="#f3f4f6",fe(!1)},children:"Cancel"}),n.jsx("button",{type:"submit",disabled:Z,style:{background:Z?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:Z?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:y=>{Z||(ye("This will save your new product to the inventory! Make sure all required fields are filled out before clicking."),fe(!0))},onMouseLeave:y=>{Z||fe(!1)},children:Z?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-plus"}),"Add Product"]})})]})]})]})}),T&&D&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Edit Product"}),n.jsx("button",{onClick:q,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:y=>{y.target.style.background="#f3f4f6",y.target.style.color="#3e3f29",ye("Click this X button to close the edit form without saving. It's the same as clicking Cancel!"),fe(!0)},onMouseLeave:y=>{y.target.style.background="none",y.target.style.color="#7d8d86",fe(!1)},children:n.jsx("i",{className:"fa-solid fa-times"})})]}),n.jsxs("form",{onSubmit:nn,children:[h&&n.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:h}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),n.jsx("input",{type:"text",required:!0,value:R.product_name,onChange:y=>I({...R,product_name:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("input",{type:"text",required:!0,value:R.category,onChange:y=>{I({...R,category:y.target.value}),X(y.target.value.length>=2)},onFocus:()=>{X(R.category.length>=2),ye("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),fe(!0)},onBlur:()=>setTimeout(()=>X(!1),200),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),ne&&qe(R.category).length>0&&n.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"1px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:qe(R.category).map((y,M)=>n.jsxs("div",{onClick:()=>{I({...R,category:y}),X(!1),ye(`Great choice! I've selected "${y}" for you. This helps keep your categories organized!`),fe(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:M<qe(R.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:te=>te.target.style.background="#f8f9fa",onMouseLeave:te=>te.target.style.background="transparent",children:[n.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),y]},M))})]})]})]}),n.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[n.jsx("input",{type:"checkbox",id:"is_weighted_edit",checked:R.is_weighted,onChange:y=>I({...R,is_weighted:y.target.checked}),style:{width:"16px",height:"16px"}}),n.jsx("label",{htmlFor:"is_weighted_edit",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),R.is_weighted&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),n.jsxs("select",{value:R.weight_unit,onChange:y=>I({...R,weight_unit:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},children:[n.jsx("option",{value:"",children:"Select unit"}),n.jsx("option",{value:"kg",children:"Kilogram (kg)"}),n.jsx("option",{value:"g",children:"Gram (g)"}),n.jsx("option",{value:"lb",children:"Pound (lb)"}),n.jsx("option",{value:"oz",children:"Ounce (oz)"}),n.jsx("option",{value:"l",children:"Liter (l)"}),n.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",R.weight_unit||"unit"," *"]}),n.jsx("input",{type:"number",step:"0.01",required:R.is_weighted,value:R.price_per_unit,onChange:y=>I({...R,price_per_unit:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",R.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),n.jsx("input",{type:"number",step:"0.01",required:!R.is_weighted,value:R.is_weighted?"0":R.price,onChange:y=>{R.is_weighted||I({...R,price:y.target.value})},style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:R.is_weighted?"#f9fafb":"white",color:R.is_weighted?"#6b7280":"#3e3f29",cursor:R.is_weighted?"not-allowed":"text"},placeholder:R.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:R.is_weighted})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),n.jsx("input",{type:"number",required:!0,value:R.stock_quantity,onChange:y=>I({...R,stock_quantity:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),n.jsx("input",{type:"number",required:!0,value:R.reorder_level,onChange:y=>I({...R,reorder_level:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"10"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),n.jsx("input",{type:"number",step:"0.01",value:R.tax_rate,onChange:y=>I({...R,tax_rate:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0.00"})]})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),n.jsx("input",{type:"text",value:R.supplier_info,onChange:y=>I({...R,supplier_info:y.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),n.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[n.jsx("input",{type:"file",accept:"image/*",onChange:je,style:{display:"none"},id:"image-upload"}),n.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:y=>{y.target.style.borderColor="#7d8d86",y.target.style.color="#3e3f29",ye("Click here to upload a product image! This helps customers see what they're buying."),fe(!0)},onMouseLeave:y=>{y.target.style.borderColor="#bca88d",y.target.style.color="#7d8d86",fe(!1)},children:[n.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(oe||D?.image_url)&&n.jsxs("div",{style:{position:"relative"},children:[n.jsx("img",{src:oe||D?.image_url,alt:"Preview",onClick:()=>{const y=oe||D?.image_url;y&&st(y)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:y=>{y.target.style.transform="scale(1.05)",y.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:y=>{y.target.style.transform="scale(1)",y.target.style.boxShadow="none"}}),n.jsx("button",{type:"button",onClick:()=>{pe(null),L(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),n.jsx("textarea",{value:R.description,onChange:y=>I({...R,description:y.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[n.jsx("button",{type:"button",onClick:q,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:y=>{y.target.style.background="#e5e7eb",ye("This will close the edit form and discard any changes you've made. Don't worry, you can always edit again!"),fe(!0)},onMouseLeave:y=>{y.target.style.background="#f3f4f6",fe(!1)},children:"Cancel"}),n.jsx("button",{type:"submit",disabled:Z,style:{background:Z?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:Z?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:y=>{Z||(ye("This will save your changes to the product! Make sure all required fields are filled out before clicking."),fe(!0))},onMouseLeave:y=>{Z||fe(!1)},children:Z?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Updating..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-save"}),"Update Product"]})})]})]})]})}),O&&he&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:Et,children:n.jsx("div",{style:{position:"relative",width:"400px",height:"400px",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:`url(${he})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:"8px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",backgroundColor:"#ffffff"},onClick:y=>y.stopPropagation(),children:n.jsx("button",{onClick:Et,style:{position:"absolute",top:"-40px",right:"-40px",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.9)",border:"none",color:"#3e3f29",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s ease"},onMouseEnter:y=>y.target.style.background="rgba(255, 255, 255, 1)",onMouseLeave:y=>y.target.style.background="rgba(255, 255, 255, 0.9)",children:n.jsx("i",{className:"fa-solid fa-times"})})})}),j&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",marginBottom:"16px",textAlign:"center"},children:"Delete Product"}),n.jsxs("p",{style:{fontSize:"16px",color:"#1a1a1a",marginBottom:"8px",textAlign:"center"},children:["Are you sure you want to delete ",n.jsx("strong",{children:j.name}),"?"]}),n.jsx("p",{style:{fontSize:"14px",color:"#ef4444",marginBottom:"24px",textAlign:"center"},children:"This action cannot be undone."}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[n.jsx("button",{onClick:()=>K(null),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:y=>y.target.style.background="#4b5563",onMouseLeave:y=>y.target.style.background="#6b7280",children:"Cancel"}),n.jsx("button",{onClick:()=>jn(j.product_id),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:y=>y.target.style.background="#dc2626",onMouseLeave:y=>y.target.style.background="#ef4444",children:"Delete Product"})]})]})}),n.jsx(_t,{})]})},bg=[{id:"pNInz6obpgDQGcFmaJgB",name:"Adam (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"EXAVITQu4vr4xnSDxMaL",name:"Bella (Warm, Friendly)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Josh (Professional, Clear)",type:"standard",costPer1K:.18},{id:"AZnzlk1XvdvUeBnXmlld",name:"Domi (Confident, Energetic)",type:"standard",costPer1K:.18},{id:"ErXwobaYiN019PkySvjV",name:"Elli (Natural, Conversational)",type:"standard",costPer1K:.18},{id:"MF3mGyEYCl7XYWbV9V6O",name:"Rachel (Professional, Warm)",type:"standard",costPer1K:.18},{id:"TxGEqnHWrfWFTfGW9XjX",name:"Drew (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Clyde (Friendly, Approachable)",type:"standard",costPer1K:.18}];class pv{settings;usage;isInitialized=!1;constructor(){this.settings=this.loadSettings(),this.usage=this.loadUsage(),this.initializeUsage()}loadSettings(){const i={enabled:!1,useElevenLabs:!0,selectedVoice:"HobRzuqtLputbKAXOdTj",apiKey:"sk_337a097ef281682961b7c3db26217470f085fd565c3d711d",dailyLimit:5e3,fallbackToBrowser:!0};try{return localStorage.removeItem("tts-settings"),console.log("Cleared old TTS settings, using ElevenLabs defaults"),i}catch{return i}}loadUsage(){const r={totalCharacters:0,totalCost:0,dailyUsage:0,dailyCost:0,lastResetDate:new Date().toISOString().split("T")[0]};try{const i=localStorage.getItem("tts-usage");return i?{...r,...JSON.parse(i)}:r}catch{return r}}saveSettings(){try{localStorage.setItem("tts-settings",JSON.stringify(this.settings))}catch(r){console.error("Failed to save TTS settings:",r)}}saveUsage(){try{localStorage.setItem("tts-usage",JSON.stringify(this.usage))}catch(r){console.error("Failed to save TTS usage:",r)}}initializeUsage(){const r=new Date().toISOString().split("T")[0];this.usage.lastResetDate!==r&&(this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=r,this.saveUsage())}getSettings(){return{...this.settings}}getUsage(){return this.initializeUsage(),{...this.usage}}updateSettings(r){this.settings={...this.settings,...r},this.saveSettings()}async speak(r){if(console.log("TTS Service speak called with:",r),console.log("TTS Settings:",this.settings),!this.settings.enabled)return console.log("TTS not enabled"),!1;const i=r.length,o=this.calculateCost(i);return this.usage.dailyUsage+i>this.settings.dailyLimit?(console.log("Daily limit exceeded, using fallback"),this.settings.fallbackToBrowser?this.speakWithBrowser(r):!1):this.settings.useElevenLabs&&this.settings.apiKey&&(console.log("Trying ElevenLabs TTS with voice:",this.settings.selectedVoice),await this.speakWithElevenLabs(r))?(this.updateUsage(i,o),!0):this.settings.fallbackToBrowser?(console.log("Falling back to browser TTS"),this.speakWithBrowser(r)):(console.log("No TTS method available"),!1)}async speakWithDelay(r,i=2e3){return new Promise(o=>{setTimeout(async()=>{const d=await this.speak(r);o(d)},i)})}async speakWithElevenLabs(r){try{console.log("Making ElevenLabs API call..."),console.log("Voice ID:",this.settings.selectedVoice),console.log("API Key:",this.settings.apiKey.substring(0,10)+"...");const i=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${this.settings.selectedVoice}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":this.settings.apiKey},body:JSON.stringify({text:r,model_id:"eleven_monolingual_v1",voice_settings:{stability:.5,similarity_boost:.5}})});if(console.log("ElevenLabs response status:",i.status),!i.ok){const h=await i.text();throw console.error("ElevenLabs API error response:",h),new Error(`ElevenLabs API error: ${i.status} - ${h}`)}const o=await i.blob();console.log("Audio blob received, size:",o.size);const d=URL.createObjectURL(o),u=new Audio(d);return new Promise(h=>{u.onended=()=>{console.log("ElevenLabs audio playback ended"),URL.revokeObjectURL(d),h(!0)},u.onerror=p=>{console.error("ElevenLabs audio playback error:",p),URL.revokeObjectURL(d),h(!1)},u.onloadstart=()=>console.log("ElevenLabs audio started loading"),u.oncanplay=()=>console.log("ElevenLabs audio can play"),console.log("Starting ElevenLabs audio playback..."),u.play()})}catch(i){return console.error("ElevenLabs TTS error:",i),!1}}speakWithBrowser(r){if(!("speechSynthesis"in window))return!1;try{speechSynthesis.cancel();const i=new SpeechSynthesisUtterance(r);return i.rate=1,i.pitch=1,i.volume=.8,speechSynthesis.speak(i),!0}catch{return!1}}calculateCost(r){const i=bg.find(o=>o.id===this.settings.selectedVoice);return i?r/1e3*i.costPer1K:0}updateUsage(r,i){this.usage.totalCharacters+=r,this.usage.totalCost+=i,this.usage.dailyUsage+=r,this.usage.dailyCost+=i,this.saveUsage()}stop(){"speechSynthesis"in window&&speechSynthesis.cancel()}getAvailableVoices(){return bg}resetDailyUsage(){this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=new Date().toISOString().split("T")[0],this.saveUsage()}}const wn=new pv,bi=()=>{const l=new Date,r=l.getFullYear(),i=String(l.getMonth()+1).padStart(2,"0"),o=String(l.getDate()).padStart(2,"0"),d=String(l.getHours()).padStart(2,"0"),u=String(l.getMinutes()).padStart(2,"0"),h=String(l.getSeconds()).padStart(2,"0");return`${r}-${i}-${o} ${d}:${u}:${h}`},vg=["Order confirmed! Your jollof rice dreams are one step closer.","Thanks for shopping! Even suya is jealous of your taste.","Your order is secured tighter than plantain at a party.","Order complete! Somewhere, egusi soup just smiled at you.","Confirmed! Your basket was blessed by the spirit of fufu.","You did it! May your order arrive faster than puff-puff disappears.","Order locked! Your kitchen is about to smell like victory.","Thanks for shopping! Even aunties will approve of this order.","Your order is in! We'll protect it like Nigerians protect their jollof recipe.","Success! Your food is coming with more flavor than a pepper soup challenge.","Confirmed — your taste is hotter than shito pepper.","Order complete! Don't worry, we didn't forget the Maggi cubes.","Transaction approved! Time to prepare for a feast fit for ancestors.","Done! May your meals be as sweet as ripe plantain.","Your order is confirmed — better hide it before the neighbors smell it!"],gv=async l=>{if(l.length===0){await wn.speak("No items in order yet.");return}let r=`Order contains ${l.length} item${l.length===1?"":"s"}. `,i=0;l.forEach((o,d)=>{const u=o.product?.name||o.sideBusinessItem?.name||"Unknown Item",h=o.quantity;let p=0;o.customPrice?p=o.customPrice:o.calculatedPrice?p=o.calculatedPrice/h:o.product?.price?p=o.product.price:o.sideBusinessItem?.price&&(p=o.sideBusinessItem.price);let g=0;o.weight&&o.calculatedPrice?(g=o.calculatedPrice,r+=`Item ${d+1}: ${u}, ${o.weight} units at €${o.product?.price_per_unit?.toFixed(2)||"0.00"} per unit, `):(g=p*h,r+=`Item ${d+1}: ${u}, quantity ${h}, €${p.toFixed(2)} each, `),i+=g;const m=[`making this €${i.toFixed(2)}. `,`total so far €${i.toFixed(2)}. `,`€${i.toFixed(2)} total. `,`running total €${i.toFixed(2)}. `,`€${i.toFixed(2)}. `,`now at €${i.toFixed(2)}. `],x=m[Math.floor(Math.random()*m.length)];r+=x}),await wn.speak(r),setTimeout(async()=>{const o=vg[Math.floor(Math.random()*vg.length)];await wn.speak(o)},500)},mv=async l=>{const r=[`Your total is €${l.toFixed(2)}. Time to feast!`,`Total: €${l.toFixed(2)}. Your taste buds are about to dance!`,`€${l.toFixed(2)} total. May your meals be blessed!`,`Order total: €${l.toFixed(2)}. Even jollof rice approves!`],i=r[Math.floor(Math.random()*r.length)];await wn.speak(i)},Cd=async(l,r)=>{await wn.speak(`${l} added to order for €${r.toFixed(2)}.`)},xv=()=>{const{user:l}=Xn(),[r]=I0(),i=bs(),[o,d]=v.useState([]),[u,h]=v.useState([]),[p,g]=v.useState([]),[m,x]=v.useState([]),[S,E]=v.useState([]),[k,T]=v.useState("All"),[N,D]=v.useState(""),[P,R]=v.useState([]),[I,Z]=v.useState([]),[Y,le]=v.useState(!1),[fe,Se]=v.useState(!1),[ye,ne]=v.useState(1),[X]=v.useState(20),[W,L]=v.useState(0),[oe,pe]=v.useState(!1),[O,Q]=v.useState(!1),[he,xe]=v.useState(!1),[j,K]=v.useState({items:[],subtotal:0,tax:0,discount:0,total:0}),[J,ue]=v.useState(""),[be,Me]=v.useState(""),[Ee,Je]=v.useState(!0),[We,Ce]=v.useState(!1),[ze,de]=v.useState("cash"),[ge,Ne]=v.useState(""),[A,ee]=v.useState(0),[Le,qe]=v.useState(""),[mt,ct]=v.useState(!1),[on,zt]=v.useState(!1),[Gt,tn]=v.useState(null),[nn,jn]=v.useState(""),[q,me]=v.useState(!1),[je,Fe]=v.useState(null),[st,Et]=v.useState(""),[Dt,jt]=v.useState(null),[$t,_t]=v.useState(!1),[y,M]=v.useState(""),[te,ke]=v.useState(""),[Oe,Be]=v.useState(""),[Xe,He]=v.useState([]),[,Zt]=v.useState(wn.getSettings()),[Ie,kn]=v.useState(!1),[Ye,an]=v.useState(""),[pn,gn]=v.useState(0),[xt,Vt]=v.useState(""),[ln,br]=v.useState(null),[vr,ol]=v.useState(null),[On,Qa]=v.useState(!1);v.useEffect(()=>{ba(1,X),_a();const C=r.get("transaction");C&&(br(C),Qa(!0),Xa(C))},[r]),v.useEffect(()=>{const C=re=>{re.key==="Enter"&&re.ctrlKey&&j.items.length>0&&(re.preventDefault(),Ce(!0)),re.key==="Escape"&&(D(""),Se(!1))};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[j.items]),v.useEffect(()=>{const C=()=>{if(Y&&!oe&&ye*X<W){const re=document.documentElement.scrollTop,Te=document.documentElement.scrollHeight,_e=document.documentElement.clientHeight;re+_e>=Te-200&&Jn()}};if(Y)return window.addEventListener("scroll",C),()=>window.removeEventListener("scroll",C)},[Y,oe,ye,W,X]),v.useEffect(()=>{At()},[o,u,k,N,Y,I]),v.useEffect(()=>{I.length>0&&p.length===0&&g(I)},[I,p.length]),v.useEffect(()=>{if(Y&&!O){ne(1);const C=setTimeout(()=>{ba(1,X,k,N)},300);return()=>clearTimeout(C)}},[k,N,Y,O]),v.useEffect(()=>{wa()},[j.items]),v.useEffect(()=>{const C=parseFloat(ge)||0,re=Ie?parseFloat(Ye)||0:j.total,Te=C-re;ee(Te>0?Te:0)},[ge,j.total,Ie,Ye]),v.useEffect(()=>{if(Ie){const C=parseFloat(Ye)||0;gn(Math.max(0,j.total-C))}else gn(0)},[Ie,Ye,j.total]),v.useEffect(()=>{Ne(Ie&&Ye||j.total.toString())},[j.total,Ie,Ye]);const ba=async(C=1,re=20,Te,_e,ve=!1)=>{try{ve?pe(!0):C===1&&Y?xe(!0):Je(!0);let we=se.from("products").select("*",{count:"exact"}).order("name").range((C-1)*re,C*re-1);Te&&Te!=="All"&&(we=we.eq("category",Te)),_e&&_e.trim()&&(we=we.or(`name.ilike.%${_e}%,category.ilike.%${_e}%`));const{data:Ae,error:Ke,count:ft}=await we;if(Ke)throw Ke;const{data:it,error:et}=await se.from("side_business_items").select(`
          *,
          side_businesses (name, business_type)
        `).order("name");if(et)throw et;if(d(C===1||!ve?Ae||[]:Ot=>[...Ot,...Ae||[]]),h(it||[]),L(ft||0),C===1&&await va(Ae||[]),C===1){const Ot=Ae?.map(js=>js.category).filter(Boolean)||[],Tn=it?.map(js=>js.side_businesses?.name).filter(Boolean)||[],ll=["All",...new Set([...Ot,...Tn])];E(ll)}}catch{}finally{Je(!1),pe(!1),xe(!1)}},va=async C=>{try{const{data:re,error:Te}=await se.from("sale_items").select("product_id, quantity").not("product_id","is",null);if(Te){Z(C.slice(0,5));return}const _e={};re?.forEach(we=>{we.product_id&&(_e[we.product_id]=(_e[we.product_id]||0)+we.quantity)});const ve=C.map(we=>({...we,salesCount:_e[we.product_id]||0})).sort((we,Ae)=>Ae.salesCount-we.salesCount).slice(0,5);Z(ve)}catch{Z(C.slice(0,5))}},_a=async()=>{try{const{data:C,error:re}=await se.from("side_businesses").select("business_id, name").eq("business_type","service").order("name");if(re)throw re;He(C||[])}catch(C){console.error("Error fetching service businesses:",C),He([])}},Xa=async C=>{try{const re=parseInt(C.replace("TXN-","")),{data:Te,error:_e}=await se.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",re).single();if(_e)return;ol(Te);const{data:ve,error:we}=await se.from("sale_items").select(`
          *,
          products (
            name,
            category,
            price,
            stock_quantity,
            image_url,
            is_weighted,
            weight_unit,
            price_per_unit
          )
        `).eq("sale_id",re);if(we)return;const Ae=(ve||[]).map(et=>{const Tn={product:{product_id:et.product_id.toString(),name:et.products?.name||"Unknown Product",price:et.price_each,category:et.products?.category||"Unknown",stock_quantity:et.products?.stock_quantity||0,image_url:et.products?.image_url,is_weighted:et.products?.is_weighted||!1,weight_unit:et.products?.weight_unit,price_per_unit:et.products?.price_per_unit},quantity:et.quantity};return et.products?.is_weighted&&et.weight&&et.calculated_price&&(Tn.weight=et.weight,Tn.calculatedPrice=et.calculated_price),Tn}),Ke=Ae.reduce((et,Ot)=>Ot.weight&&Ot.calculatedPrice?et+Ot.calculatedPrice:et+Ot.product.price*Ot.quantity,0),ft=Ke*.1,it=Ke+ft;K({items:Ae,subtotal:Ke,tax:ft,discount:0,total:it}),Te.customers?.name&&ue(Te.customers.name)}catch{}},Sa=C=>{if(C.length<2){R([]),Se(!1);return}const re=o.filter(ve=>ve.name.toLowerCase().includes(C.toLowerCase())||ve.category?.toLowerCase().includes(C.toLowerCase())).slice(0,3),Te=u.filter(ve=>ve.name.toLowerCase().includes(C.toLowerCase())||ve.side_businesses?.name.toLowerCase().includes(C.toLowerCase())).slice(0,2),_e=[...re,...Te].slice(0,5);R(_e),Se(_e.length>0)},At=()=>{if(Y)g(o);else{let re=I;k!=="All"&&(re=re.filter(Te=>Te.category===k)),N&&(re=re.filter(Te=>Te.name.toLowerCase().includes(N.toLowerCase()))),g(re)}let C=u;k!=="All"&&(C=C.filter(re=>re.side_businesses?.name===k)),N&&(C=C.filter(re=>re.name.toLowerCase().includes(N.toLowerCase()))),x(C)},zi=C=>{D(C),Sa(C)},Di=()=>{const C=!Y;Q(!0),le(C),C?(ne(1),ba(1,X,k,N).finally(()=>{Q(!1)})):(g(I),Q(!1))},Zn=C=>{D(C.name),Se(!1),R([]),"product_id"in C?Ai(C):_r(C)},wa=()=>{const C=j.items.reduce((ve,we)=>{if(we.product)return we.weight&&we.calculatedPrice?ve+we.calculatedPrice:ve+we.product.price*we.quantity;if(we.sideBusinessItem){const Ae=we.customPrice||we.sideBusinessItem.price||0;return ve+Ae*we.quantity}return ve},0),re=0,Te=0,_e=C-Te;K(ve=>({...ve,subtotal:C,tax:re,discount:Te,total:_e}))},Ai=C=>{if(C.is_weighted&&C.price_per_unit&&C.weight_unit){Fe(C),Et(""),me(!0);return}K(re=>re.items.find(_e=>_e.product?.product_id===C.product_id&&!_e.weight)?{...re,items:re.items.map(_e=>_e.product?.product_id===C.product_id&&!_e.weight?{..._e,quantity:_e.quantity+1}:_e)}:{...re,items:[...re.items,{product:C,quantity:1}]}),Cd(C.name,C.price)},Bi=(C,re)=>{const Te=re*(C.price_per_unit||0);K(Dt?_e=>({..._e,items:_e.items.map(ve=>ve.product?.product_id===Dt&&ve.weight?{...ve,weight:re,calculatedPrice:Te}:ve)}):_e=>({..._e,items:[..._e.items,{product:C,quantity:1,weight:re,calculatedPrice:Te}]})),me(!1),Fe(null),jt(null),Et("")},_r=C=>{if(!C.price)tn(C),jn(""),zt(!0);else{K(_e=>_e.items.find(we=>we.sideBusinessItem?.item_id===C.item_id)?{..._e,items:_e.items.map(we=>we.sideBusinessItem?.item_id===C.item_id?{...we,quantity:we.quantity+1}:we)}:{..._e,items:[..._e.items,{sideBusinessItem:C,quantity:1}]});const re=C.name,Te=C.price||0;Cd(re,Te)}},Mi=()=>{if(!Gt)return;const C=parseFloat(nn);if(isNaN(C)||C<0){alert("Please enter a valid price");return}K(re=>re.items.find(_e=>_e.sideBusinessItem?.item_id===Gt.item_id&&_e.customPrice===C)?{...re,items:re.items.map(_e=>_e.sideBusinessItem?.item_id===Gt.item_id&&_e.customPrice===C?{..._e,quantity:_e.quantity+1}:_e)}:{...re,items:[...re.items,{sideBusinessItem:Gt,quantity:1,customPrice:C}]}),zt(!1),tn(null),jn("")},_s=async()=>{if(!y.trim()||!te||!Oe){alert("Please fill in all fields");return}const C=parseFloat(te);if(isNaN(C)||C<0){alert("Please enter a valid price");return}try{const re={item_id:Date.now(),business_id:parseInt(Oe),name:y.trim(),price:C,stock_qty:null,side_businesses:{name:Xe.find(Te=>Te.business_id.toString()===Oe)?.name||"Service",business_type:"service"}};K(Te=>({...Te,items:[...Te.items,{sideBusinessItem:re,quantity:1,customPrice:C}]})),Cd(y.trim(),C),M(""),ke(""),Be(""),_t(!1)}catch(re){console.error("Error creating quick service:",re),alert("Failed to create service. Please try again.")}},Za=(C,re)=>{if(re<=0){Ss(C);return}K(Te=>({...Te,items:Te.items.map(_e=>_e.product?.product_id===C?{..._e,quantity:re}:_e.sideBusinessItem?.item_id.toString()===C?{..._e,quantity:re}:_e)}))},Cn=(C,re)=>{if(re<=0){Ss(C);return}K(Te=>({...Te,items:Te.items.map(_e=>{if(_e.product?.product_id===C&&_e.weight){const ve=re*(_e.product.price_per_unit||0);return{..._e,weight:re,calculatedPrice:ve}}return _e})}))},Sr=C=>{C.product&&C.weight&&(Fe(C.product),Et(C.weight.toString()),me(!0),jt(C.product.product_id))},Ss=C=>{K(re=>({...re,items:re.items.filter(Te=>Te.product?.product_id!==C&&Te.sideBusinessItem?.item_id.toString()!==C)}))},Jn=()=>{if(!oe&&Y&&ye*X<W){const C=ye+1;ne(C),ba(C,X,k,N,!0)}},wr=()=>{if(window.confirm("Are you sure you want to reset the current transaction? This will clear all items from the order.")){K({items:[],subtotal:0,tax:0,discount:0,total:0}),ue(""),Me(""),de("cash"),Ne(""),ee(0),qe("");const C=document.createElement("div");C.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,C.textContent="Transaction reset successfully!",document.body.appendChild(C),setTimeout(()=>{document.body.removeChild(C)},3e3)}},ws=()=>{const C=`RCP-${Date.now()}`,re=new Date,Te=re.toLocaleDateString("en-IE"),_e=re.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"});return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Receipt - ${C}</title>
        <style>
          body { 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            line-height: 1.4; 
            margin: 0; 
            padding: 10px; 
            background: white;
            color: black;
          }
          .receipt { 
            width: 100%; 
            max-width: 400px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            padding: 20px; 
            background: white;
          }
          .header { 
            text-align: center; 
            margin-bottom: 15px; 
            border-bottom: 1px dashed #333; 
            padding-bottom: 10px; 
          }
          .logo-fallback {
            display: none;
            background: #333;
            color: white;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
          }
          .business-info { 
            font-size: 10px; 
            margin: 8px 0; 
          }
          .divider { 
            border-top: 1px dashed #333; 
            margin: 10px 0; 
          }
          .item-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 3px 0; 
          }
          .total-row { 
            font-weight: bold; 
            border-top: 1px solid #333; 
            padding-top: 5px; 
            margin-top: 8px; 
          }
          .payment-info { 
            margin: 10px 0; 
          }
          .notes-section {
            margin: 10px 0;
            padding: 8px;
            background: #f5f5f5;
            border-radius: 4px;
          }
          .footer { 
            text-align: center; 
            margin-top: 15px; 
            font-size: 10px; 
            border-top: 1px dashed #333; 
            padding-top: 10px; 
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            <img src="/retailpos/images/backgrounds/logo1.png" alt="LandM Store" style="max-width: 80px; height: auto; display: block; margin: 0 auto 10px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <div class="logo-fallback" style="display: none; font-size: 24px; font-weight: bold; margin-bottom: 8px; color: #1a1a1a;">LandM Store</div>
            <div class="business-info">
              <div>Unit 2 Glenmore Park</div>
              <div>Dundalk, Co. Louth</div>
              <div>087 797 0412</div>
            </div>
          </div>
          
          <div class="divider"></div>
          
          <div class="item-row">
            <span>Date: ${Te}</span>
            <span>Time: ${_e}</span>
          </div>
          <div class="item-row">
            <span>Receipt: ${C}</span>
            <span>Cashier: ${l?.username||"System"}</span>
          </div>
          
          <div class="divider"></div>
          
          ${j.items.map(ve=>{const we=ve.product?.name||ve.sideBusinessItem?.name||"Unknown Item",Ae=ve.product?.price||ve.customPrice||ve.sideBusinessItem?.price||0;return`
            <div class="item-row">
              <span>${we} x${ve.quantity}</span>
              <span>€${(Ae*ve.quantity).toFixed(2)}</span>
            </div>
          `}).join("")}
          
          <div class="divider"></div>
          
          <div class="item-row total-row">
            <span>SUBTOTAL:</span>
            <span>€${j.subtotal.toFixed(2)}</span>
          </div>
          <div class="item-row total-row">
            <span>${Ie?"ORDER TOTAL:":"GRAND TOTAL:"}</span>
            <span>€${j.total.toFixed(2)}</span>
          </div>
          
          ${Ie?`
          <div class="divider"></div>
          <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 4px; padding: 8px; margin: 10px 0;">
            <div style="font-weight: bold; margin-bottom: 5px; color: #92400e;">
              <i class="fa-solid fa-credit-card" style="margin-right: 5px;"></i>
              PARTIAL PAYMENT
            </div>
            <div class="item-row">
              <span>Amount Paid Today:</span>
              <span style="color: #059669; font-weight: bold;">€${(parseFloat(Ye)||0).toFixed(2)}</span>
            </div>
            <div class="item-row">
              <span>Remaining Balance:</span>
              <span style="color: #dc2626; font-weight: bold;">€${pn.toFixed(2)}</span>
            </div>
            ${xt?`
            <div style="margin-top: 5px; font-size: 10px; color: #92400e;">
              Note: ${xt}
            </div>
            `:""}
          </div>
          `:""}
          
          <div class="payment-info">
            <div class="item-row">
              <span>Payment Method:</span>
              <span>${ze.toUpperCase()}</span>
            </div>
            ${ze==="cash"?`
            <div class="item-row">
              <span>Amount Received:</span>
              <span>€${parseFloat(ge).toFixed(2)}</span>
            </div>
            <div class="item-row">
              <span>Change Given:</span>
              <span>€${A.toFixed(2)}</span>
            </div>
            `:ze==="card"?`
            <div class="item-row">
              <span>Card: ****1234</span>
              <span>Approval: ${Math.floor(Math.random()*1e4)}</span>
            </div>
            `:""}
          </div>
          
          ${Le||Ie&&xt?`
          <div class="divider"></div>
          <div class="notes-section">
            <div style="font-weight: bold; margin-bottom: 5px;">Notes:</div>
            <div style="font-size: 9px; line-height: 1.3; margin-left: 10px;">
              ${Ie?`PARTIAL PAYMENT
Amount Paid Today: €${(parseFloat(Ye)||0).toFixed(2)}
Remaining Balance: €${pn.toFixed(2)}
${xt?`Partial Payment Notes: ${xt}`:""}`:""}
              ${Le?(Ie?`

`:"")+Le:""}
            </div>
          </div>
          `:""}
          
          <div class="divider"></div>
          
          <div class="footer">
            <div>Thank you for shopping with us!</div>
            <div style="margin-top: 5px;">LandM Store - Your Local African Food Store</div>
            ${Ie?`
            <div style="margin-top: 10px; font-size: 9px; color: #92400e;">
              <strong>Please keep this receipt for your records</strong><br>
              Remaining balance: €${pn.toFixed(2)}
            </div>
            `:""}
          </div>
        </div>
      </body>
      </html>
    `},Oi=()=>{const C=window.open("","_blank");C&&(C.document.write(ws()),C.document.close(),C.print(),C.close())},Ii=async()=>{if(j.items.length!==0)try{let C;if(On&&ln){const ve=parseInt(ln.replace("TXN-","")),{data:we,error:Ae}=await se.from("sales").update({total_amount:j.total,payment_method:ze}).eq("sale_id",ve).select().single();if(Ae)throw Ae;C=we}else{let ve=null;if(J.trim()){const{data:ft,error:it}=await se.from("customers").select("customer_id").eq("name",J.trim()).single();if(ft&&!it)ve=ft.customer_id;else{const{data:et,error:Ot}=await se.from("customers").insert([{name:J.trim(),phone_number:be.trim()||"000-000-0000",email:null}]).select().single();Ot?(console.error("Error creating customer:",Ot),ve=null):ve=et.customer_id}}let we="";Ie&&(we=`PARTIAL PAYMENT
Amount Paid Today: €${(parseFloat(Ye)||0).toFixed(2)}
Remaining Balance: €${pn.toFixed(2)}`,xt&&(we+=`

Partial Payment Notes: ${xt}`)),Le&&(we+=(we?`

`:"")+Le);let Ae,Ke;try{const ft={datetime:bi(),total_amount:Ie?parseFloat(Ye)||0:j.total,payment_method:ze,cashier_id:l?.user_id,customer_id:ve,discount_applied:j.discount,partial_payment:Ie,partial_amount:Ie?parseFloat(Ye)||0:null,remaining_amount:Ie?pn:null,partial_notes:Ie?xt:null,notes:we||null},it=await se.from("sales").insert([ft]).select("*").single();Ae=it.data,Ke=it.error}catch{const it={datetime:bi(),total_amount:Ie?parseFloat(Ye)||0:j.total,payment_method:ze,cashier_id:l?.user_id,customer_id:ve,discount_applied:j.discount,partial_payment:Ie,partial_amount:Ie?parseFloat(Ye)||0:null,remaining_amount:Ie?pn:null,partial_notes:Ie?xt:null},et=await se.from("sales").insert([it]).select("*").single();Ae=et.data,Ke=et.error}if(Ke)throw Ke;C=Ae}if(On&&ln){const ve=vr?(await se.from("sale_items").select("product_id").eq("sale_id",C.sale_id)).data?.map(Ke=>Ke.product_id)||[]:[],we=j.items.filter(Ke=>Ke.product&&!ve.includes(Ke.product.product_id));if(we.length>0){const Ke=we.map(it=>({sale_id:C.sale_id,product_id:it.product.product_id,quantity:it.quantity,price_each:it.product.price,weight:it.weight||null,calculated_price:it.calculatedPrice||null})),{error:ft}=await se.from("sale_items").insert(Ke);if(ft)throw ft}const Ae=j.items.filter(Ke=>Ke.sideBusinessItem);for(const Ke of Ae){let ft=Ke.sideBusinessItem.item_id;if(ft>1e9){const{data:et,error:Ot}=await se.from("side_business_items").insert({business_id:Ke.sideBusinessItem.business_id,name:Ke.sideBusinessItem.name,price:Ke.customPrice||Ke.sideBusinessItem.price,stock_qty:null,notes:"Created via Quick Service"}).select().single();if(Ot)throw Ot;ft=et.item_id}const{error:it}=await se.from("side_business_sales").insert({item_id:ft,quantity:Ke.quantity,total_amount:(Ke.customPrice||Ke.sideBusinessItem.price||0)*Ke.quantity,payment_method:ze,date_time:bi()});if(it)throw it}}else{const ve=j.items.filter(Ae=>Ae.product).map(Ae=>({sale_id:C.sale_id,product_id:Ae.product.product_id,quantity:Ae.quantity,price_each:Ae.product.price,weight:Ae.weight||null,calculated_price:Ae.calculatedPrice||null})),we=j.items.filter(Ae=>Ae.sideBusinessItem);for(const Ae of we){let Ke=Ae.sideBusinessItem.item_id;if(Ke>1e9){const{data:it,error:et}=await se.from("side_business_items").insert({business_id:Ae.sideBusinessItem.business_id,name:Ae.sideBusinessItem.name,price:Ae.customPrice||Ae.sideBusinessItem.price,stock_qty:null,notes:"Created via Quick Service"}).select().single();if(et)throw et;Ke=it.item_id}const{error:ft}=await se.from("side_business_sales").insert({item_id:Ke,quantity:Ae.quantity,total_amount:(Ae.customPrice||Ae.sideBusinessItem.price||0)*Ae.quantity,payment_method:ze,date_time:bi()});if(ft)throw ft}if(ve.length>0){const{error:Ae}=await se.from("sale_items").insert(ve);if(Ae)throw Ae}}const re=On&&ln?j.items.filter(ve=>ve.product?!(vr?(vr.sale_items||[]).map(Ae=>Ae.product_id):[]).includes(ve.product.product_id):!1):j.items.filter(ve=>ve.product);for(const ve of re){if(!ve.product)continue;const{error:we}=await se.from("products").update({stock_quantity:ve.product.stock_quantity-ve.quantity,last_updated:bi()}).eq("product_id",ve.product.product_id);if(we)throw we;const{error:Ae}=await se.from("inventory_movements").insert([{product_id:ve.product.product_id,quantity_change:-ve.quantity,movement_type:"Sale",reference_id:C.sale_id}]);if(Ae)throw Ae}const Te=j.items.filter(ve=>ve.sideBusinessItem);for(const ve of Te){if(!ve.sideBusinessItem||ve.sideBusinessItem.stock_qty===null)continue;const{error:we}=await se.from("side_business_items").update({stock_qty:ve.sideBusinessItem.stock_qty-ve.quantity}).eq("item_id",ve.sideBusinessItem.item_id);if(we)throw we}K({items:[],subtotal:0,tax:0,discount:0,total:0}),ue(""),Me(""),de("cash"),Ne(""),ee(0),qe(""),Ie&&pn>0&&C?.sale_id&&await Li(J,be,pn,C.sale_id),kn(!1),an(""),gn(0),Vt("");const _e=document.createElement("div");_e.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,_e.textContent=On?"Items added to transaction successfully!":Ie?`Partial payment processed! €${(parseFloat(Ye)||0).toFixed(2)} paid, €${pn.toFixed(2)} remaining. Reminder created.`:"Sale processed successfully!",document.body.appendChild(_e),setTimeout(()=>{document.body.removeChild(_e)},3e3),mv(j.total),Ce(!1),On&&ln&&setTimeout(()=>{i(`/transaction/${ln}`)},2e3)}catch(C){alert(`Failed to process sale: ${C instanceof Error?C.message:"Unknown error"}`)}},cn=()=>{const C=new Date,re=C.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),Te=C.toLocaleDateString("en-GB",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"});return`${re} - ${Te}`},Li=async(C,re,Te,_e)=>{try{const ve=l?.user_id||1,we=`Payment Due: ${C||"Customer"}`,Ae=re?`
Phone: ${re}`:"",Ke=`Customer owes €${Te.toFixed(2)} from Sale #${_e}. Please follow up for payment.${Ae}`,ft=new Date;ft.setDate(ft.getDate()+1);const it=ft.toISOString().split("T")[0],{error:et}=await se.from("reminders").insert([{title:we,body:Ke,remind_date:it,owner_id:ve}]).select().single();et&&(console.error("Error creating partial payment reminder:",et),console.error("Reminder data attempted:",{title:we,body:Ke,remind_date:it,owner_id:ve}))}catch(ve){console.error("Error creating partial payment reminder:",ve)}};return Ee?n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#6b7280"},children:[n.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading products..."]}):n.jsxs("div",{style:{display:"flex",height:"100vh",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",fontFamily:"Poppins, sans-serif"},children:[n.jsxs("div",{style:{flex:1,background:"#ffffff",margin:"20px",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[n.jsxs("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:On?"#fef3c7":"#f9fafb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[n.jsx("i",{className:"fa-solid fa-cash-register",style:{marginRight:"12px",color:"#7d8d86"}}),"Point Of Sales"]}),On&&n.jsxs("div",{style:{background:"#f59e0b",color:"#92400e",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-plus-circle"}),"Adding to Transaction #",ln]})]}),On&&n.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:"8px 0 0 0",fontStyle:"italic"},children:"Adding new items to existing transaction. Existing items will be preserved."})]}),n.jsx("div",{style:{padding:"20px 32px 16px",borderBottom:"1px solid #e5e7eb"},children:n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",maxWidth:"600px"},children:[n.jsxs("div",{style:{position:"relative",flex:1},children:[n.jsx("input",{type:"text",placeholder:"Search Product",value:N,onChange:C=>zi(C.target.value),onFocus:C=>{C.target.style.borderColor="#7d8d86",Se(P.length>0)},onBlur:C=>{C.target.style.borderColor="#e5e7eb",setTimeout(()=>Se(!1),200)},style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"}}),fe&&P.length>0&&n.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"1px solid #6b7280",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:P.map((C,re)=>{const Te="product_id"in C,_e="item_id"in C;return n.jsxs("div",{onClick:()=>Zn(C),style:{padding:"12px 16px",cursor:"pointer",borderBottom:re<P.length-1?"1px solid #f3f4f6":"none",display:"flex",alignItems:"center",gap:"12px",transition:"background-color 0.2s ease"},children:[n.jsx("div",{style:{width:"32px",height:"32px",background:Te&&C.image_url?`url(${C.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#6b7280"},children:_e&&n.jsx("i",{className:"fa-solid fa-briefcase"})}),n.jsxs("div",{style:{flex:1},children:[n.jsx("p",{style:{margin:"0 0 2px 0",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:C.name}),n.jsx("p",{style:{margin:"0",fontSize:"12px",color:"#6b7280"},children:Te?`${C.category} • €${C.price.toFixed(2)}`:`${C.side_businesses?.name||"Side Business"} • ${C.price?`€${C.price.toFixed(2)}`:"Custom Price"}`})]}),n.jsx("i",{className:"fa-solid fa-plus",style:{color:"#7d8d86",fontSize:"12px"}})]},Te?C.product_id:`sb-${C.item_id}`)})})]}),n.jsxs("button",{style:{background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-search"}),"Search"]}),n.jsxs("button",{onClick:()=>_t(!0),style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-plus-circle"}),"Quick Service"]})]})}),n.jsx("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",whiteSpace:"nowrap"},children:"Category:"}),n.jsx("select",{value:k,onChange:C=>T(C.target.value),style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer",minWidth:"200px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",children:S.map(C=>{let re=0;return C==="All"?re=W+u.length:re=u.filter(Te=>Te.side_businesses?.name===C).length,n.jsxs("option",{value:C,children:[C," ",C==="All"?`(${re})`:re>0?`(${re})`:""]},C)})})]})}),n.jsxs("div",{style:{flex:1,padding:"24px 32px",overflowY:"auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 4px 0"},children:Y?"All Products":"Top Products"}),Y&&n.jsxs("p",{style:{fontSize:"14px",color:"#6b7280",margin:"0",display:"flex",alignItems:"center",gap:"8px"},children:["Showing ",Math.min(ye*X,W)," of ",W," products",he&&n.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{fontSize:"12px"}})]})]}),n.jsx("button",{onClick:Di,disabled:O,style:{background:Y?"#7d8d86":"#f3f4f6",color:Y?"#ffffff":"#374151",border:"1px solid #d1d5db",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:O?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:O?.6:1},onMouseEnter:C=>{O||(C.currentTarget.style.background=Y?"#6b7c75":"#e5e7eb")},onMouseLeave:C=>{O||(C.currentTarget.style.background=Y?"#7d8d86":"#f3f4f6")},children:O?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"4px"}}),"Switching..."]}):Y?"Show Top 5":"Show All"})]}),p.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[n.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",color:"#374151",margin:"0 0 8px 0"},children:"No products found"}),n.jsx("p",{style:{fontSize:"14px",margin:"0",color:"#6b7280"},children:N?`No products match "${N}"`:"Try selecting a different category"})]}):n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"12px"},children:[p.map(C=>n.jsxs("div",{style:{background:"#ffffff",border:"1px solid #6b7280",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative"},onMouseEnter:re=>{re.currentTarget.style.transform="translateY(-1px)",re.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseLeave:re=>{re.currentTarget.style.transform="translateY(0)",re.currentTarget.style.boxShadow="none"},children:[n.jsx("div",{style:{width:"100%",height:"100px",background:C.image_url?`url(${C.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:!C.image_url&&n.jsx("i",{className:"fa-solid fa-image",style:{fontSize:"24px",color:"#9ca3af"}})}),n.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:C.name}),n.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:C.is_weighted&&C.price_per_unit&&C.weight_unit?C.weight_unit==="g"&&C.price_per_unit<1?`€${(C.price_per_unit*1e3).toFixed(2)}/kg`:C.weight_unit==="kg"&&C.price_per_unit>=1?`€${C.price_per_unit.toFixed(2)}/kg`:`€${C.price_per_unit.toFixed(2)}/${C.weight_unit}`:`€${C.price.toFixed(2)}`}),n.jsxs("button",{onClick:()=>Ai(C),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:re=>{re.currentTarget.style.background="#3e3f29"},onMouseLeave:re=>{re.currentTarget.style.background="#7d8d86"},children:[n.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},C.product_id)),m.map(C=>n.jsxs("div",{style:{background:"#ffffff",border:"1px solid #6b7280",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative"},onMouseEnter:re=>{re.currentTarget.style.transform="translateY(-1px)",re.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseLeave:re=>{re.currentTarget.style.transform="translateY(0)",re.currentTarget.style.boxShadow="none"},children:[n.jsx("div",{style:{width:"100%",height:"100px",background:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"24px",color:"#9ca3af"}})}),n.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:C.name}),n.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:C.price?`€${C.price.toFixed(2)}`:"Custom Price"}),n.jsxs("button",{onClick:()=>_r(C),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:re=>{re.currentTarget.style.background="#3e3f29"},onMouseLeave:re=>{re.currentTarget.style.background="#7d8d86"},children:[n.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},`sb-${C.item_id}`))]}),Y&&oe&&n.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280"},children:[n.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"8px"}}),"Loading more products..."]}),Y&&!oe&&ye*X<W&&n.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:n.jsxs("button",{onClick:Jn,style:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",padding:"12px 24px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},onMouseEnter:C=>{C.currentTarget.style.background="#e5e7eb"},onMouseLeave:C=>{C.currentTarget.style.background="#f3f4f6"},children:[n.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"12px"}}),"Load More Products (",W-ye*X," remaining)"]})})]})]}),n.jsxs("div",{style:{width:"400px",background:"#ffffff",margin:"20px 20px 20px 0",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[n.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px",fontWeight:"600"},children:l?.username?.charAt(0).toUpperCase()}),n.jsx("div",{children:n.jsxs("p",{style:{margin:"0",fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["Hello, ",l?.username]})})]}),n.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:cn()})]}),n.jsxs("div",{style:{flex:1,padding:"24px",overflowY:"auto"},children:[n.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:["Order Detail #",Math.floor(Math.random()*1e7)]}),j.items.length===0?n.jsxs("div",{style:{textAlign:"center",color:"#6b7280",padding:"40px 0"},children:[n.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),n.jsx("p",{children:"No items in order"})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:j.items.map(C=>{const re=C.product?.product_id||`sb-${C.sideBusinessItem?.item_id}`,Te=C.product?.name||C.sideBusinessItem?.name||"Unknown Item",_e=C.product?.price||C.customPrice||C.sideBusinessItem?.price||0,ve=!!C.sideBusinessItem;return n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f9fafb",borderRadius:"8px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",background:ve?"linear-gradient(135deg, #f3f4f6, #e5e7eb)":C.product?.image_url?`url(${C.product.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:ve&&n.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"16px",color:"#9ca3af"}})}),n.jsxs("div",{style:{flex:1},children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:Te.length>20?Te.substring(0,20)+"...":Te}),n.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#7d8d86",fontWeight:"600"},children:C.weight&&C.calculatedPrice?n.jsxs(n.Fragment,{children:[C.weight," ",C.product?.weight_unit," • €",C.calculatedPrice.toFixed(2)]}):`€${_e.toFixed(2)}`})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!C.weight&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>Za(re,C.quantity-1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),n.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:C.quantity}),n.jsx("button",{onClick:()=>Za(re,C.quantity+1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),C.weight&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>Cn(re,C.weight-.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),n.jsxs("button",{onClick:()=>Sr(C),style:{minWidth:"60px",height:"24px",borderRadius:"4px",border:"1px solid #7d8d86",background:"#f9fafb",color:"#7d8d86",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"500",padding:"0 4px"},title:"Click to edit weight",children:[C.weight," ",C.product?.weight_unit]}),n.jsx("button",{onClick:()=>Cn(re,C.weight+.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),n.jsx("button",{onClick:()=>Ss(re),style:{width:"24px",height:"24px",borderRadius:"4px",border:"none",background:"#ef4444",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",marginLeft:"4px"},children:n.jsx("i",{className:"fa-solid fa-trash"})})]})]},re)})})]}),n.jsxs("div",{style:{padding:"24px",borderTop:"1px solid #e5e7eb",background:"#f9fafb"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Detail"}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Customer Name"}),n.jsx("input",{type:"text",value:J,onChange:C=>ue(C.target.value),placeholder:"Enter customer name",style:{width:"100%",padding:"8px 12px",border:"1px solid #6b7280",borderRadius:"6px",fontSize:"14px",outline:"none"}})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Sub Total"}),n.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["€",j.subtotal.toFixed(2)]})]}),j.discount>0&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Discount"}),n.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["€",j.discount.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"8px",borderTop:"1px solid #d1d5db",marginBottom:"16px"},children:[n.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937"},children:"Total Payment"}),n.jsxs("span",{style:{fontSize:"16px",fontWeight:"600",color:"#7d8d86"},children:["€",j.total.toFixed(2)]})]})]}),n.jsx("button",{style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"14px",fontWeight:"500",cursor:"pointer",width:"100%",marginBottom:"12px"},children:"Add Voucher"}),n.jsxs("button",{onClick:async()=>{console.log("Announce Order clicked!"),console.log("Order items:",j.items),wn.updateSettings({enabled:!0}),Zt(wn.getSettings()),console.log("TTS Settings after enabling:",wn.getSettings());try{await gv(j.items),setTimeout(()=>{wn.updateSettings({enabled:!1}),Zt(wn.getSettings())},3e3)}catch(C){console.error("TTS Error:",C),wn.updateSettings({enabled:!1}),Zt(wn.getSettings())}},title:"Announce all items in current order",style:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"14px",fontWeight:"500",cursor:j.items.length===0?"not-allowed":"pointer",width:"100%",marginBottom:"12px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-volume-high",style:{fontSize:"14px"}}),"Announce Order"]}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[n.jsxs("button",{onClick:wr,disabled:j.items.length===0,title:j.items.length>0?"Clear all items from current transaction":"No items to reset",style:{background:j.items.length===0?"#f3f4f6":"#ef4444",color:j.items.length===0?"#9ca3af":"white",border:"none",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",fontWeight:"500",cursor:j.items.length===0?"not-allowed":"pointer",flex:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[n.jsx("i",{className:"fa-solid fa-rotate-left",style:{fontSize:"12px"}}),"Reset"]}),n.jsxs("button",{onClick:()=>Ce(!0),disabled:j.items.length===0,title:j.items.length>0?"Press Ctrl+Enter to view sales summary":"Add items to process sale",style:{background:j.items.length===0?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",fontWeight:"600",cursor:j.items.length===0?"not-allowed":"pointer",flex:2,transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[n.jsx("i",{className:"fa-solid fa-credit-card",style:{fontSize:"12px"}}),"Purchase",j.items.length>0&&n.jsx("span",{style:{fontSize:"10px",opacity:.8,marginLeft:"2px"},children:"(Ctrl+Enter)"})]})]})]})]}),We&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"20px",width:"95%",maxWidth:"700px",maxHeight:"95vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"8px",borderBottom:"1px solid #e5e7eb"},children:[n.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1f2937"},children:[n.jsx("i",{className:"fa-solid fa-receipt",style:{marginRight:"12px",color:"#7d8d86"}}),"Sales Summary"]}),n.jsx("button",{onClick:()=>Ce(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#6b7280",cursor:"pointer",padding:"4px"},children:n.jsx("i",{className:"fa-solid fa-xmark"})})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Customer Information"}),n.jsx("input",{type:"text",value:J,onChange:C=>ue(C.target.value),placeholder:"Enter customer name (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"12px"}})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Phone Number (Optional)"}),n.jsx("input",{type:"tel",value:be,onChange:C=>Me(C.target.value),placeholder:"Enter phone number (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"16px"}})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Payment Method"}),n.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:["cash","card","credit"].map(C=>n.jsxs("button",{onClick:()=>de(C),style:{background:ze===C?"#7d8d86":"#f3f4f6",color:ze===C?"white":"#374151",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",textTransform:"capitalize",transition:"all 0.2s ease"},children:[n.jsx("i",{className:`fa-solid fa-${C==="cash"?"money-bill":C==="card"?"credit-card":"hand-holding-dollar"}`,style:{marginRight:"6px"}}),C]},C))})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0"},children:"Payment Options"}),n.jsxs("button",{onClick:()=>{kn(!Ie),Ie?(an(""),gn(0)):an(j.total.toString())},style:{background:Ie?"#ef4444":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("i",{className:`fa-solid fa-${Ie?"times":"credit-card"}`,style:{fontSize:"12px"}}),Ie?"Disable Partial":"Enable Partial Payment"]})]}),Ie&&n.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[n.jsx("i",{className:"fa-solid fa-info-circle",style:{color:"#f59e0b"}}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#92400e"},children:"Partial Payment Enabled"})]}),n.jsxs("div",{style:{fontSize:"14px",color:"#92400e"},children:[n.jsxs("div",{children:["Amount to pay now: ",n.jsxs("strong",{children:["€",(parseFloat(Ye)||0).toFixed(2)]})]}),n.jsxs("div",{children:["Remaining amount: ",n.jsxs("strong",{children:["€",pn.toFixed(2)]})]})]})]}),Ie&&n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Amount to Pay Now (€)"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:j.total,value:Ye,onChange:C=>an(C.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},placeholder:`Enter amount (max €${j.total.toFixed(2)})`})]}),Ie&&n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Notes (Optional)"}),n.jsx("textarea",{value:xt,onChange:C=>Vt(C.target.value),placeholder:"Add any notes about this partial payment...",style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit",transition:"border-color 0.2s ease"}})]})]}),ze==="cash"&&n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Amount Received"}),n.jsx("div",{style:{marginBottom:"12px"},children:n.jsxs("button",{onClick:()=>Ne(Ie?Ye:j.total.toFixed(2)),style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:C=>C.target.style.background="#f9fafb",onMouseOut:C=>C.target.style.background="#ffffff",children:["Set Exact Amount (€",Ie?(parseFloat(Ye)||0).toFixed(2):j.total.toFixed(2),")"]})}),n.jsx("input",{type:"number",step:"0.01",value:ge,onChange:C=>Ne(C.target.value),placeholder:`Enter amount: €${Ie?(parseFloat(Ye)||0).toFixed(2):j.total.toFixed(2)}`,style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"block",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"18px",fontWeight:"500",outline:"none",background:"#ffffff",textAlign:"center"}}),A>0&&n.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",color:"#0c4a6e",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[n.jsx("i",{className:"fa-solid fa-coins",style:{marginRight:"8px"}}),"Change: €",A.toFixed(2)]}),ge&&parseFloat(ge)<j.total&&n.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"1px solid #f87171",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Need €",((Ie?parseFloat(Ye)||0:j.total)-parseFloat(ge)).toFixed(2)," more"]})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Receipt Notes (Optional)"}),n.jsx("textarea",{value:Le,onChange:C=>qe(C.target.value),placeholder:"Add notes for receipt (e.g., partial payment, special instructions, etc.)",style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit"}}),n.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:"8px 0 0 0"},children:"These notes will appear on the printed receipt"})]}),n.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"12px",marginBottom:"16px"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Summary"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Subtotal"}),n.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["€",j.subtotal.toFixed(2)]})]}),j.discount>0&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Discount"}),n.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["€",j.discount.toFixed(2)]})]}),Ie&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Amount to Pay Now"}),n.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#7d8d86"},children:["€",(parseFloat(Ye)||0).toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Remaining Amount"}),n.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#ef4444"},children:["€",pn.toFixed(2)]})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid #d1d5db",marginTop:"8px"},children:[n.jsx("span",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:Ie?"Total Order":"Total"}),n.jsxs("span",{style:{fontSize:"18px",fontWeight:"600",color:"#7d8d86"},children:["€",j.total.toFixed(2)]})]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsxs("button",{onClick:()=>ct(!0),style:{background:"#ffffff",color:"#3e3f29",border:"1px solid #3e3f29",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-eye"}),"View Receipt"]}),n.jsxs("button",{onClick:Oi,style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{onClick:()=>Ce(!1),style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),n.jsxs("button",{onClick:Ii,disabled:ze==="cash"&&(!ge||parseFloat(ge)<(Ie?parseFloat(Ye)||0:j.total)),style:{background:ze==="cash"&&(!ge||parseFloat(ge)<(Ie?parseFloat(Ye)||0:j.total))?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:ze==="cash"&&(!ge||parseFloat(ge)<(Ie?parseFloat(Ye)||0:j.total))?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:ze==="cash"&&(!ge||parseFloat(ge)<(Ie?parseFloat(Ye)||0:j.total))?.6:1},children:[n.jsx("i",{className:"fa-solid fa-credit-card"}),Ie?"Process Partial Payment":"Process Sale"]})]})]})]})}),mt&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",width:"95vw",height:"95vh",overflow:"auto",position:"relative"},children:[n.jsx("button",{onClick:()=>ct(!1),style:{position:"absolute",top:"12px",right:"12px",background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#6b7280",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},onMouseOver:C=>C.target.style.background="#f3f4f6",onMouseOut:C=>C.target.style.background="none",children:n.jsx("i",{className:"fa-solid fa-times"})}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0",textAlign:"center"},children:"Receipt Preview"}),n.jsx("div",{dangerouslySetInnerHTML:{__html:ws()},style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"30px",background:"#ffffff",fontFamily:"Courier New, monospace",fontSize:"16px",lineHeight:"1.6",maxWidth:"600px",margin:"0 auto"}})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[n.jsx("button",{onClick:()=>ct(!1),style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close"}),n.jsxs("button",{onClick:()=>{ct(!1),Oi()},style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #3e3f29 0%, #7d8d86 100%)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]})]})}),on&&Gt&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[n.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"Enter Custom Price"}),n.jsxs("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#6b7280"},children:["Set the price for: ",n.jsx("strong",{children:Gt.name})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price (€)"}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:nn,onChange:C=>jn(C.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onKeyDown:C=>{C.key==="Enter"&&Mi()},autoFocus:!0})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[n.jsx("button",{onClick:()=>{zt(!1),tn(null),jn("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),n.jsx("button",{onClick:Mi,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Add to Order"})]})]})}),q&&je&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:Dt?"Edit Weight":"Enter Weight"}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:"0 0 8px 0"},children:je.name}),n.jsxs("p",{style:{fontSize:"12px",color:"#9ca3af",margin:"0 0 12px 0"},children:["Price: €",je.price_per_unit?.toFixed(2)," per ",je.weight_unit]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:["Weight (",je.weight_unit,")"]}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:st,onChange:C=>Et(C.target.value),placeholder:`Enter weight in ${je.weight_unit}`,style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),st&&parseFloat(st)>0&&n.jsxs("div",{style:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px",marginBottom:"20px"},children:[n.jsx("p",{style:{fontSize:"14px",color:"#374151",margin:"0 0 4px 0"},children:"Total Price:"}),n.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:["€",((parseFloat(st)||0)*(je.price_per_unit||0)).toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[n.jsx("button",{onClick:()=>{me(!1),Fe(null),jt(null),Et("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),n.jsx("button",{onClick:()=>{const C=parseFloat(st);C>0&&Bi(je,C)},disabled:!st||parseFloat(st)<=0,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!st||parseFloat(st)<=0?"#d1d5db":"#7d8d86",color:!st||parseFloat(st)<=0?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:!st||parseFloat(st)<=0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:Dt?"Update Weight":"Add to Order"})]})]})}),$t&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[n.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"24px",fontWeight:"600",color:"#1f2937",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("i",{className:"fa-solid fa-plus-circle",style:{color:"#10b981"}}),"Create Quick Service"]}),n.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280"},children:"Create a service on-the-fly with custom name and price. No need to predefine items!"}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Business"}),n.jsxs("select",{value:Oe,onChange:C=>Be(C.target.value),style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",children:[n.jsx("option",{value:"",children:"Select a service business"}),Xe.map(C=>n.jsx("option",{value:C.business_id,children:C.name},C.business_id))]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Name"}),n.jsx("input",{type:"text",value:y,onChange:C=>M(C.target.value),placeholder:"e.g., Haircut, Consultation, Repair...",style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price (€)"}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:te,onChange:C=>ke(C.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:C=>C.target.style.borderColor="#7d8d86",onBlur:C=>C.target.style.borderColor="#e5e7eb"})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[n.jsx("button",{onClick:()=>{_t(!1),M(""),ke(""),Be("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),n.jsxs("button",{onClick:_s,disabled:!y.trim()||!te||!Oe,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!y.trim()||!te||!Oe?"#d1d5db":"linear-gradient(135deg, #10b981, #059669)",color:!y.trim()||!te||!Oe?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"600",cursor:!y.trim()||!te||!Oe?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-plus"}),"Add to Order"]})]})]})})]})},yv="_searchContainer_tecz1_2",bv="_searchBarSection_tecz1_12",vv="_searchBarWrapper_tecz1_16",_v="_searchInputWrapper_tecz1_22",Sv="_searchIcon_tecz1_40",wv="_searchInput_tecz1_22",jv="_clearButton_tecz1_65",kv="_searchResults_tecz1_87",Cv="_resultsCount_tecz1_91",Tv="_filtersSection_tecz1_98",Ev="_filtersContainer_tecz1_103",Rv="_filterGroup_tecz1_110",Nv="_filterLabel_tecz1_116",zv="_filterSelect_tecz1_123",Dv="_sortToggleButton_tecz1_140",Av="_clearFiltersButton_tecz1_158",Ut={searchContainer:yv,searchBarSection:bv,searchBarWrapper:vv,searchInputWrapper:_v,searchIcon:Sv,searchInput:wv,clearButton:jv,searchResults:kv,resultsCount:Cv,filtersSection:Tv,filtersContainer:Ev,filterGroup:Rv,filterLabel:Nv,filterSelect:zv,sortToggleButton:Dv,clearFiltersButton:Av},Bv=({searchTerm:l="",onSearchChange:r,searchPlaceholder:i="Search...",showSearchResults:o=!1,searchResultsCount:d=0,onClearSearch:u,filters:h=[],sortOptions:p=[],onSortToggle:g,sortOrder:m="desc",onClearFilters:x,hasActiveFilters:S=!1})=>n.jsxs("div",{className:Ut.searchContainer,children:[r&&n.jsx("div",{className:Ut.searchBarSection,children:n.jsxs("div",{className:Ut.searchBarWrapper,children:[n.jsxs("div",{className:Ut.searchInputWrapper,children:[n.jsx("i",{className:`fa-solid fa-search ${Ut.searchIcon}`}),n.jsx("input",{type:"text",placeholder:i,value:l,onChange:E=>r(E.target.value),className:Ut.searchInput}),l&&u&&n.jsx("button",{onClick:u,className:Ut.clearButton,title:"Clear search",children:n.jsx("i",{className:"fa-solid fa-times"})})]}),o&&l&&n.jsx("div",{className:Ut.searchResults,children:n.jsxs("span",{className:Ut.resultsCount,children:[d," result",d!==1?"s":""," found"]})})]})}),(h.length>0||p.length>0||g||S)&&n.jsx("div",{className:Ut.filtersSection,children:n.jsxs("div",{className:Ut.filtersContainer,children:[h.map((E,k)=>n.jsxs("div",{className:Ut.filterGroup,children:[n.jsxs("label",{className:Ut.filterLabel,children:[E.label,":"]}),n.jsx("select",{value:E.value,onChange:T=>E.onChange(T.target.value),className:Ut.filterSelect,children:E.options.map(T=>n.jsx("option",{value:T.value,children:T.label},T.value))})]},k)),p.map((E,k)=>n.jsxs("div",{className:Ut.filterGroup,children:[n.jsxs("label",{className:Ut.filterLabel,children:[E.label,":"]}),n.jsx("select",{value:E.value,onChange:T=>E.onChange(T.target.value),className:Ut.filterSelect,children:E.options.map(T=>n.jsx("option",{value:T.value,children:T.label},T.value))})]},k)),g&&n.jsx("button",{onClick:g,className:Ut.sortToggleButton,title:`Sort ${m==="asc"?"Descending":"Ascending"}`,children:n.jsx("i",{className:`fa-solid fa-sort-${m==="asc"?"up":"down"}`})}),S&&x&&n.jsxs("button",{onClick:x,className:Ut.clearFiltersButton,title:"Clear all filters",children:[n.jsx("i",{className:"fa-solid fa-times"}),"Clear"]})]})})]}),Mv="_sideBusinessesContainer_272f1_2",Ov="_pageHeader_272f1_8",Iv="_pageTitle_272f1_17",Lv="_primaryButton_272f1_31",Uv="_statisticsGrid_272f1_54",Pv="_statisticsCard_272f1_61",qv="_statisticsCardContent_272f1_75",$v="_statisticsInfo_272f1_81",Wv="_statisticsLabel_272f1_85",Hv="_statisticsValue_272f1_92",Fv="_statisticsIcon_272f1_99",Yv="_statisticsIconPurple_272f1_104",Gv="_statisticsIconBlue_272f1_108",Vv="_statisticsIconGreen_272f1_112",Kv="_statisticsIconOrange_272f1_116",Qv="_mainContentGrid_272f1_121",Xv="_contentPanel_272f1_128",Zv="_contentPanelHeader_272f1_142",Jv="_contentPanelTitle_272f1_151",e_="_contentPanelBody_272f1_158",t_="_emptyStateMessage_272f1_165",n_="_emptyStateMessageIcon_272f1_171",a_="_emptyStateMessageText_272f1_177",s_="_listContainer_272f1_184",r_="_listContainerDivided_272f1_189",i_="_listItemCard_272f1_193",o_="_listItemCardContent_272f1_210",l_="_listItemCardIcon_272f1_217",c_="_listItemCardMain_272f1_234",d_="_listItemCardTitle_272f1_238",u_="_listItemCardSubtitle_272f1_245",f_="_listItemCardMeta_272f1_251",h_="_listItemCardPrice_272f1_258",p_="_listItemCardStock_272f1_264",g_="_listItemCardCount_272f1_269",m_="_listItemCardTime_272f1_274",x_="_listItemCardActions_272f1_279",y_="_actionButton_272f1_284",b_="_actionButtonIcon_272f1_303",v_="_statusBadge_272f1_308",__="_statusBadgeRental_272f1_316",S_="_statusBadgeResale_272f1_321",w_="_statusBadgeService_272f1_326",j_="_statusBadgeGray_272f1_331",k_="_statusBadgeCash_272f1_336",C_="_statusBadgeCard_272f1_341",T_="_statusBadgeMobile_272f1_346",E_="_modalOverlay_272f1_352",R_="_modalDialog_272f1_363",N_="_modalDialogTitle_272f1_373",z_="_modalDialogForm_272f1_380",D_="_formFieldGroup_272f1_386",A_="_formFieldLabel_272f1_391",B_="_formFieldInput_272f1_399",M_="_formFieldTextarea_272f1_420",O_="_formFieldSelect_272f1_444",I_="_actionButtonDanger_272f1_496",L_="_standardButton_272f1_506",U_="_standardButtonSecondary_272f1_516",P_="_standardButtonDanger_272f1_525",q_="_standardButtonSuccess_272f1_534",$_="_businessDetailModalHeader_272f1_544",W_="_businessAnalyticsSection_272f1_554",H_="_analyticsSectionTitle_272f1_558",F_="_analyticsGrid_272f1_567",Y_="_analyticsCard_272f1_574",G_="_analyticsCardHeader_272f1_587",V_="_analyticsIcon_272f1_594",K_="_analyticsIconBlue_272f1_600",Q_="_analyticsIconGreen_272f1_604",X_="_analyticsIconPurple_272f1_608",Z_="_analyticsPeriod_272f1_612",J_="_analyticsCardContent_272f1_618",e2="_analyticsMetric_272f1_624",t2="_analyticsLabel_272f1_630",n2="_analyticsValue_272f1_636",a2="_itemsSectionHeader_272f1_643",s2="_restockButton_272f1_650",r2="_restockActionButton_272f1_669",i2="_editActionButton_272f1_679",o2="_formFieldHelp_272f1_690",l2="_modalHeader_272f1_698",c2="_modalCloseButton_272f1_707",d2="_required_272f1_724",u2="_errorMessage_272f1_730",f2="_listItemCardNotes_272f1_748",h2="_restockInfo_272f1_759",p2="_restockItemName_272f1_767",g2="_restockCurrentStock_272f1_774",m2="_restockPreview_272f1_780",x2="_restockPreviewText_272f1_788",y2="_businessDetailModalIcon_272f1_803",b2="_businessDetailModalInfo_272f1_819",v2="_businessDetailModalName_272f1_823",_2="_businessDetailModalDescription_272f1_830",S2="_businessDetailModalMeta_272f1_836",w2="_businessDetailModalDate_272f1_842",j2="_businessDetailModalStats_272f1_847",k2="_businessDetailModalItems_272f1_854",C2="_noItemsMessage_272f1_865",T2="_deleteConfirmationWarning_272f1_872",E2="_deleteConfirmationWarningText_272f1_878",R2="_modalDialogActions_272f1_885",N2="_errorStateContainer_272f1_893",z2="_errorStateContent_272f1_901",D2="_errorStateIcon_272f1_910",A2="_errorStateTitle_272f1_916",B2="_errorStateText_272f1_922",M2="_errorStateRetryButton_272f1_927",O2="_loadingStateContainer_272f1_944",I2="_loadingStateText_272f1_951",L2="_loadingStateSpinner_272f1_959",w={sideBusinessesContainer:Mv,pageHeader:Ov,pageTitle:Iv,primaryButton:Lv,statisticsGrid:Uv,statisticsCard:Pv,statisticsCardContent:qv,statisticsInfo:$v,statisticsLabel:Wv,statisticsValue:Hv,statisticsIcon:Fv,statisticsIconPurple:Yv,statisticsIconBlue:Gv,statisticsIconGreen:Vv,statisticsIconOrange:Kv,mainContentGrid:Qv,contentPanel:Xv,contentPanelHeader:Zv,contentPanelTitle:Jv,contentPanelBody:e_,emptyStateMessage:t_,emptyStateMessageIcon:n_,emptyStateMessageText:a_,listContainer:s_,listContainerDivided:r_,listItemCard:i_,listItemCardContent:o_,listItemCardIcon:l_,listItemCardMain:c_,listItemCardTitle:d_,listItemCardSubtitle:u_,listItemCardMeta:f_,listItemCardPrice:h_,listItemCardStock:p_,listItemCardCount:g_,listItemCardTime:m_,listItemCardActions:x_,actionButton:y_,actionButtonIcon:b_,statusBadge:v_,statusBadgeRental:__,statusBadgeResale:S_,statusBadgeService:w_,statusBadgeGray:j_,statusBadgeCash:k_,statusBadgeCard:C_,statusBadgeMobile:T_,modalOverlay:E_,modalDialog:R_,modalDialogTitle:N_,modalDialogForm:z_,formFieldGroup:D_,formFieldLabel:A_,formFieldInput:B_,formFieldTextarea:M_,formFieldSelect:O_,actionButtonDanger:I_,standardButton:L_,standardButtonSecondary:U_,standardButtonDanger:P_,standardButtonSuccess:q_,businessDetailModalHeader:$_,businessAnalyticsSection:W_,analyticsSectionTitle:H_,analyticsGrid:F_,analyticsCard:Y_,analyticsCardHeader:G_,analyticsIcon:V_,analyticsIconBlue:K_,analyticsIconGreen:Q_,analyticsIconPurple:X_,analyticsPeriod:Z_,analyticsCardContent:J_,analyticsMetric:e2,analyticsLabel:t2,analyticsValue:n2,itemsSectionHeader:a2,restockButton:s2,restockActionButton:r2,editActionButton:i2,formFieldHelp:o2,modalHeader:l2,modalCloseButton:c2,required:d2,errorMessage:u2,listItemCardNotes:f2,restockInfo:h2,restockItemName:p2,restockCurrentStock:g2,restockPreview:m2,restockPreviewText:x2,businessDetailModalIcon:y2,businessDetailModalInfo:b2,businessDetailModalName:v2,businessDetailModalDescription:_2,businessDetailModalMeta:S2,businessDetailModalDate:w2,businessDetailModalStats:j2,businessDetailModalItems:k2,noItemsMessage:C2,deleteConfirmationWarning:T2,deleteConfirmationWarningText:E2,modalDialogActions:R2,errorStateContainer:N2,errorStateContent:z2,errorStateIcon:D2,errorStateTitle:A2,errorStateText:B2,errorStateRetryButton:M2,loadingStateContainer:O2,loadingStateText:I2,loadingStateSpinner:L2};async function U2(l,r,i){console.log("🔄 Starting image upload for side business:",r),console.log("📁 File details:",{name:l.name,size:l.size,type:l.type}),console.log("👤 User ID:",i);try{if(!i)return console.error("❌ No user ID provided"),null;console.log("✅ User ID provided:",i);const{data:o,error:d}=await se.storage.listBuckets();d?console.error("❌ Error listing buckets:",d):console.log("📦 Available buckets:",o?.map(m=>m.name));const u=`sidebusiness-images/${r}.${l.name.split(".").pop()}`;console.log("📤 Uploading to Supabase Storage:",u);const{error:h}=await se.storage.from("products").upload(u,l,{contentType:l.type,upsert:!0});if(h)return console.error("❌ Upload failed:",h),null;const{data:{publicUrl:p}}=se.storage.from("products").getPublicUrl(u);console.log("✅ Image uploaded successfully:",p),console.log("💾 Updating database with public URL...");const{error:g}=await se.from("side_businesses").update({image_url:p}).eq("business_id",r);return g?(console.error("❌ DB update failed:",g),null):(console.log("✅ Database updated with public URL"),p)}catch(o){return console.error("💥 Unexpected error during upload:",o),null}}const P2=()=>{const{user:l}=Xn(),[r,i]=v.useState([]),[o,d]=v.useState([]),[u,h]=v.useState([]),[p,g]=v.useState(!0),[m,x]=v.useState(null),[S,E]=v.useState("all"),[k,T]=v.useState("all"),[N,D]=v.useState(""),[P,R]=v.useState("created_at"),[I,Z]=v.useState("desc"),[Y,le]=v.useState(!1),[fe,Se]=v.useState(!1),[ye,ne]=v.useState(new Set),[X,W]=v.useState(!1),[L,oe]=v.useState(null),[pe,O]=v.useState(!1),[Q,he]=v.useState(null),[xe,j]=v.useState(null),[K,J]=v.useState(!1),[ue,be]=v.useState({item_id:null,current_stock:0,restock_quantity:""}),[Me,Ee]=v.useState(!1),[Je,We]=v.useState(null),[Ce,ze]=v.useState({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),[de,ge]=v.useState(null),[Ne,A]=v.useState(!1),[ee,Le]=v.useState({business_id:"",name:"",price:"",stock_qty:"",notes:""}),[qe,mt]=v.useState({item_id:"",quantity:1,total_amount:"",payment_method:"cash"});v.useEffect(()=>{ct()},[]);const ct=async()=>{try{g(!0),x(null);const{data:y,error:M}=await se.from("side_businesses").select("*").order("created_at",{ascending:!1});if(M)throw M;const{data:te,error:ke}=await se.from("side_business_items").select(`
          *,
          side_businesses (name)
        `).order("created_at",{ascending:!1});if(ke)throw ke;const{data:Oe,error:Be}=await se.from("side_business_sales").select(`
          *,
          side_business_items (
            name,
            side_businesses (name)
          )
        `).order("date_time",{ascending:!1}).limit(10);if(Be)throw Be;i(y||[]),d(te||[]),h(Oe||[])}catch(y){x(y instanceof Error?y.message:"Failed to fetch data")}finally{g(!1)}},on=async y=>{if(y.preventDefault(),!Ce.name.trim()){x("Business name is required");return}if(!Ce.business_type){x("Business type is required");return}if(!l?.user_id){x("User not authenticated");return}try{x(null);const{data:M,error:te}=await se.from("side_businesses").insert({owner_id:l.user_id,name:Ce.name.trim(),description:Ce.description.trim()||null,business_type:Ce.business_type}).select();if(te)throw console.error("Database error:",te),new Error(`Database error: ${te.message}`);if(!M||M.length===0)throw new Error("No data returned from insert");const ke=M[0].business_id;if(de){A(!0);try{await U2(de,ke.toString(),l.user_id)}catch(Oe){console.error("Error uploading image:",Oe)}finally{A(!1)}}ze({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),ge(null),le(!1),await ct()}catch(M){console.error("Error adding business:",M),x(M instanceof Error?M.message:"Failed to add business")}},zt=async y=>{y.preventDefault();try{const{error:M}=await se.from("side_business_items").insert({business_id:parseInt(ee.business_id),name:ee.name,price:ee.price?parseFloat(ee.price):null,stock_qty:ee.stock_qty?parseInt(ee.stock_qty):null,notes:ee.notes.trim()||null});if(M)throw M;Le({business_id:"",name:"",price:"",stock_qty:"",notes:""}),Se(!1),ct()}catch(M){x(M instanceof Error?M.message:"Failed to add item")}},Gt=async y=>{y.preventDefault();try{const{error:M}=await se.from("side_business_sales").insert({item_id:parseInt(qe.item_id),quantity:qe.quantity,total_amount:parseFloat(qe.total_amount),payment_method:qe.payment_method});if(M)throw M;mt({item_id:"",quantity:1,total_amount:"",payment_method:"cash"}),W(!1),ct()}catch(M){x(M instanceof Error?M.message:"Failed to add sale")}},tn=async y=>{try{console.log("🗑️ Starting delete for business:",y);const{data:M,error:te}=await se.from("side_business_items").select("item_id").eq("business_id",y);if(te)throw console.error("❌ Error fetching items:",te),te;if(console.log("📦 Found items to delete:",M?.length||0),M&&M.length>0){const Be=M.map(He=>He.item_id);console.log("🛒 Deleting sales for items:",Be);const{error:Xe}=await se.from("side_business_sales").delete().in("item_id",Be);if(Xe)throw console.error("❌ Error deleting sales:",Xe),Xe;console.log("✅ Sales deleted successfully")}console.log("📦 Deleting items for business:",y);const{error:ke}=await se.from("side_business_items").delete().eq("business_id",y);if(ke)throw console.error("❌ Error deleting items:",ke),ke;console.log("✅ Items deleted successfully"),console.log("🏢 Deleting business:",y);const{error:Oe}=await se.from("side_businesses").delete().eq("business_id",y);if(Oe)throw console.error("❌ Error deleting business:",Oe),Oe;console.log("✅ Business deleted successfully"),he(null),ct()}catch(M){console.error("💥 Delete failed:",M),x(M instanceof Error?M.message:"Failed to delete business")}},nn=async y=>{try{const M=new Date,te=new Date(M.getFullYear(),M.getMonth(),M.getDate()),ke=new Date(te);ke.setDate(te.getDate()-te.getDay());const Oe=new Date(M.getFullYear(),M.getMonth(),1),{data:Be}=await se.from("side_business_items").select("item_id, stock_qty").eq("business_id",y),Xe=Be?.reduce((Ye,an)=>Ye+(an.stock_qty||0),0)||0,He=Be?.map(Ye=>Ye.item_id)||[];if(He.length===0){j({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}});return}const{data:Zt}=await se.from("side_business_sales").select("total_amount").in("item_id",He).gte("date_time",te.toISOString()),{data:Ie}=await se.from("side_business_sales").select("total_amount").in("item_id",He).gte("date_time",ke.toISOString()),{data:kn}=await se.from("side_business_sales").select("total_amount").in("item_id",He).gte("date_time",Oe.toISOString());j({currentStock:Xe,dailySales:{count:Zt?.length||0,revenue:Zt?.reduce((Ye,an)=>Ye+an.total_amount,0)||0},weeklySales:{count:Ie?.length||0,revenue:Ie?.reduce((Ye,an)=>Ye+an.total_amount,0)||0},monthlySales:{count:kn?.length||0,revenue:kn?.reduce((Ye,an)=>Ye+an.total_amount,0)||0}})}catch(M){console.error("Error fetching business analytics:",M),j({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}})}},jn=async y=>{if(y.preventDefault(),!(!ue.item_id||!ue.restock_quantity))try{const M=ue.current_stock+parseInt(ue.restock_quantity),{error:te}=await se.from("side_business_items").update({stock_qty:M}).eq("item_id",ue.item_id);if(te)throw te;be({item_id:null,current_stock:0,restock_quantity:""}),J(!1),ct(),L&&nn(L.business_id)}catch(M){x(M instanceof Error?M.message:"Failed to restock item")}},q=y=>{be({item_id:y.item_id,current_stock:y.stock_qty||0,restock_quantity:""}),J(!0)},me=y=>{We(y),Ee(!0)},je=async y=>{if(y.preventDefault(),!!Je)try{const{error:M}=await se.from("side_business_items").update({name:Je.name,price:Je.price,notes:Je.notes}).eq("item_id",Je.item_id);if(M)throw M;Ee(!1),We(null),ct(),L&&nn(L.business_id)}catch(M){x(M instanceof Error?M.message:"Failed to update item")}},Fe=y=>{oe(y),O(!0),nn(y.business_id)},st=y=>{switch(y){case"rental":return w.statusBadgeRental;case"resale":return w.statusBadgeResale;case"service":return w.statusBadgeService;default:return w.statusBadgeGray}},Et=y=>{switch(y){case"cash":return w.statusBadgeCash;case"card":return w.statusBadgeCard;case"mobile":return w.statusBadgeMobile;default:return w.statusBadgeGray}},Dt=o.filter(y=>{const M=S==="all"||y.business_id.toString()===S,te=N===""||y.name.toLowerCase().includes(N.toLowerCase())||y.side_businesses?.name.toLowerCase().includes(N.toLowerCase());return M&&te}).sort((y,M)=>{let te,ke;switch(P){case"name":te=y.name.toLowerCase(),ke=M.name.toLowerCase();break;case"price":te=y.price||0,ke=M.price||0;break;case"created_at":te=new Date(y.created_at),ke=new Date(M.created_at);break;default:return 0}return I==="asc"?te-ke:ke-te}),jt=r.filter(y=>{const M=k==="all"||y.business_type===k,te=N===""||y.name.toLowerCase().includes(N.toLowerCase())||y.description?.toLowerCase().includes(N.toLowerCase());return M&&te}).sort((y,M)=>{let te,ke;switch(P){case"name":te=y.name.toLowerCase(),ke=M.name.toLowerCase();break;case"created_at":te=new Date(y.created_at),ke=new Date(M.created_at);break;default:return 0}return I==="asc"?te-ke:ke-te}),$t=u.filter(y=>{const M=o.find(Xe=>Xe.item_id===y.item_id)?.business_id,te=S==="all"||M?.toString()===S,ke=r.find(Xe=>Xe.business_id===M),Oe=k==="all"||ke?.business_type===k,Be=N===""||y.side_business_items?.name.toLowerCase().includes(N.toLowerCase())||y.side_business_items?.side_businesses?.name.toLowerCase().includes(N.toLowerCase());return te&&Oe&&Be}).sort((y,M)=>{const te=new Date(y.date_time),ke=new Date(M.date_time);return I==="asc"?te.getTime()-ke.getTime():ke.getTime()-te.getTime()}),_t=[...new Set(r.map(y=>y.business_type).filter(Boolean))];return p?n.jsx("div",{className:w.loadingStateContainer,children:n.jsxs("div",{className:w.loadingStateText,children:[n.jsx("i",{className:`fa-solid fa-spinner ${w.loadingStateSpinner}`}),"Loading side businesses..."]})}):m?n.jsx("div",{className:w.errorStateContainer,children:n.jsxs("div",{className:w.errorStateContent,children:[n.jsx("i",{className:`fa-solid fa-exclamation-triangle ${w.errorStateIcon}`}),n.jsx("h2",{className:w.errorStateTitle,children:"Error Loading Side Businesses"}),n.jsx("p",{className:w.errorStateText,children:m}),n.jsx("button",{className:w.errorStateRetryButton,onClick:ct,children:"Try Again"})]})}):n.jsxs("div",{className:w.sideBusinessesContainer,children:[n.jsxs("div",{className:w.pageHeader,children:[n.jsxs("h1",{className:w.pageTitle,children:[n.jsx("i",{className:"fa-solid fa-briefcase"}),"Side Businesses"]}),n.jsxs("button",{onClick:()=>le(!0),className:w.primaryButton,children:[n.jsx("i",{className:"fa-solid fa-plus"}),"Add Business"]})]}),n.jsx(Bv,{searchTerm:N,onSearchChange:D,searchPlaceholder:"Search businesses, items, or sales...",showSearchResults:!!N,searchResultsCount:Dt.length+jt.length+$t.length,onClearSearch:()=>D(""),filters:[{label:"Business",value:S,onChange:E,options:[{value:"all",label:"All Businesses"},...r.map(y=>({value:y.business_id.toString(),label:y.name}))]},{label:"Type",value:k,onChange:T,options:[{value:"all",label:"All Types"},..._t.map(y=>({value:y,label:y.charAt(0).toUpperCase()+y.slice(1)}))]}],sortOptions:[{label:"Sort",value:P,onChange:y=>R(y),options:[{value:"created_at",label:"Date Created"},{value:"name",label:"Name"},{value:"price",label:"Price"}]}],onSortToggle:()=>Z(I==="asc"?"desc":"asc"),sortOrder:I,hasActiveFilters:S!=="all"||k!=="all",onClearFilters:()=>{E("all"),T("all")}}),n.jsxs("div",{className:w.statisticsGrid,children:[n.jsx("div",{className:w.statisticsCard,children:n.jsxs("div",{className:w.statisticsCardContent,children:[n.jsxs("div",{className:w.statisticsInfo,children:[n.jsx("p",{className:w.statisticsLabel,children:"Total Businesses"}),n.jsx("p",{className:w.statisticsValue,children:jt.length})]}),n.jsx("i",{className:`fas fa-briefcase ${w.statisticsIcon} ${w.statisticsIconPurple}`})]})}),n.jsx("div",{className:w.statisticsCard,children:n.jsxs("div",{className:w.statisticsCardContent,children:[n.jsxs("div",{className:w.statisticsInfo,children:[n.jsx("p",{className:w.statisticsLabel,children:"Total Items"}),n.jsx("p",{className:w.statisticsValue,children:Dt.length})]}),n.jsx("i",{className:`fas fa-box ${w.statisticsIcon} ${w.statisticsIconBlue}`})]})}),n.jsx("div",{className:w.statisticsCard,children:n.jsxs("div",{className:w.statisticsCardContent,children:[n.jsxs("div",{className:w.statisticsInfo,children:[n.jsx("p",{className:w.statisticsLabel,children:"Total Sales"}),n.jsx("p",{className:w.statisticsValue,children:$t.length})]}),n.jsx("i",{className:`fas fa-chart-line ${w.statisticsIcon} ${w.statisticsIconGreen}`})]})}),n.jsx("div",{className:w.statisticsCard,children:n.jsxs("div",{className:w.statisticsCardContent,children:[n.jsxs("div",{className:w.statisticsInfo,children:[n.jsx("p",{className:w.statisticsLabel,children:"Revenue"}),n.jsxs("p",{className:w.statisticsValue,children:["€",$t.reduce((y,M)=>y+M.total_amount,0).toFixed(2)]})]}),n.jsx("i",{className:`fas fa-euro-sign ${w.statisticsIcon} ${w.statisticsIconOrange}`})]})})]}),n.jsxs("div",{className:w.mainContentGrid,children:[n.jsxs("div",{className:w.contentPanel,children:[n.jsx("div",{className:w.contentPanelHeader,children:n.jsx("h2",{className:w.contentPanelTitle,children:"Businesses"})}),n.jsx("div",{className:w.contentPanelBody,children:jt.length===0?n.jsxs("div",{className:w.emptyStateMessage,children:[n.jsx("i",{className:`fa-solid fa-briefcase ${w.emptyStateMessageIcon}`}),n.jsx("p",{className:w.emptyStateMessageText,children:"No businesses found. Add your first side business to get started!"})]}):n.jsx("div",{className:`${w.listContainer} ${w.listContainerDivided}`,children:jt.map(y=>n.jsx("div",{className:w.listItemCard,onClick:()=>Fe(y),children:n.jsxs("div",{className:w.listItemCardContent,children:[n.jsx("div",{className:w.listItemCardIcon,children:y.image_url&&n.jsx("img",{src:y.image_url,alt:y.name,style:{width:"40px",height:"40px",borderRadius:"8px",objectFit:"cover"}})}),n.jsxs("div",{className:w.listItemCardMain,children:[n.jsx("h3",{className:w.listItemCardTitle,children:y.name}),y.description&&n.jsx("p",{className:w.listItemCardSubtitle,children:y.description}),n.jsxs("div",{className:w.listItemCardMeta,children:[n.jsx("span",{className:`${w.statusBadge} ${st(y.business_type)}`,children:y.business_type||"service"}),n.jsxs("span",{className:w.listItemCardCount,children:[o.filter(M=>M.business_id===y.business_id).length," items"]})]})]}),n.jsx("div",{className:w.listItemCardActions,children:n.jsxs("button",{onClick:M=>{M.stopPropagation(),he(y)},className:`${w.actionButton} ${w.actionButtonDanger}`,title:"Delete Business",children:[n.jsx("i",{className:`fas fa-trash ${w.actionButtonIcon}`}),"Delete"]})})]})},y.business_id))})})]}),n.jsxs("div",{className:w.contentPanel,children:[n.jsxs("div",{className:w.contentPanelHeader,children:[n.jsx("h2",{className:w.contentPanelTitle,children:"Items"}),n.jsxs("button",{onClick:()=>Se(!0),className:w.actionButton,style:{marginLeft:"auto"},children:[n.jsx("i",{className:`fas fa-plus ${w.actionButtonIcon}`}),"Add Item"]})]}),n.jsx("div",{className:w.contentPanelBody,children:Dt.length===0?n.jsxs("div",{className:w.emptyStateMessage,children:[n.jsx("i",{className:`fa-solid fa-box ${w.emptyStateMessageIcon}`}),n.jsx("p",{className:w.emptyStateMessageText,children:"No items found. Add items to your businesses!"})]}):n.jsx("div",{className:`${w.listContainer} ${w.listContainerDivided}`,children:Dt.map(y=>n.jsx("div",{className:w.listItemCard,children:n.jsxs("div",{className:w.listItemCardContent,children:[n.jsxs("div",{className:w.listItemCardMain,children:[n.jsx("h3",{className:w.listItemCardTitle,children:y.name}),n.jsx("p",{className:w.listItemCardSubtitle,children:y.side_businesses?.name||"Unknown Business"}),n.jsxs("div",{className:w.listItemCardMeta,children:[y.price?n.jsxs("span",{className:w.listItemCardPrice,children:["€",y.price]}):n.jsx("span",{className:w.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),y.stock_qty!==null&&n.jsxs("span",{className:w.listItemCardStock,children:["Stock: ",y.stock_qty]}),r.find(M=>M.business_id===y.business_id)?.business_type==="service"&&n.jsx("span",{className:`${w.statusBadge} ${w.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]})]}),n.jsx("div",{className:w.listItemCardActions,children:n.jsxs("button",{onClick:()=>{mt(M=>({...M,item_id:y.item_id.toString()})),W(!0)},className:w.actionButton,children:[n.jsx("i",{className:`fas fa-plus ${w.actionButtonIcon}`}),"Sale"]})})]})},y.item_id))})})]}),n.jsxs("div",{className:w.contentPanel,children:[n.jsx("div",{className:w.contentPanelHeader,children:n.jsx("h2",{className:w.contentPanelTitle,children:"Recent Sales"})}),n.jsx("div",{className:w.contentPanelBody,children:$t.length===0?n.jsxs("div",{className:w.emptyStateMessage,children:[n.jsx("i",{className:`fa-solid fa-receipt ${w.emptyStateMessageIcon}`}),n.jsx("p",{className:w.emptyStateMessageText,children:"No sales recorded yet."})]}):n.jsx("div",{className:`${w.listContainer} ${w.listContainerDivided}`,children:$t.map(y=>n.jsx("div",{className:w.listItemCard,children:n.jsx("div",{className:w.listItemCardContent,children:n.jsxs("div",{className:w.listItemCardMain,children:[n.jsx("h3",{className:w.listItemCardTitle,children:y.side_business_items?.name||"Unknown Item"}),n.jsx("p",{className:w.listItemCardSubtitle,children:y.side_business_items?.side_businesses?.name||"Unknown Business"}),n.jsxs("p",{className:w.listItemCardTime,children:[new Date(y.date_time).toLocaleDateString()," at ",new Date(y.date_time).toLocaleTimeString()]}),n.jsxs("div",{className:w.listItemCardMeta,children:[n.jsxs("span",{className:w.listItemCardCount,children:["Qty: ",y.quantity]}),n.jsxs("span",{className:w.listItemCardPrice,children:["€",y.total_amount]}),n.jsx("span",{className:`${w.statusBadge} ${Et(y.payment_method)}`,children:y.payment_method})]})]})})},y.sale_id))})})]})]}),Y&&n.jsx("div",{className:w.modalOverlay,children:n.jsxs("div",{className:w.modalDialog,children:[n.jsxs("div",{className:w.modalHeader,children:[n.jsx("h2",{className:w.modalDialogTitle,children:"Create New Business"}),n.jsx("button",{type:"button",onClick:()=>{ze({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),le(!1),x(null)},className:w.modalCloseButton,children:n.jsx("i",{className:"fas fa-times"})})]}),m&&n.jsxs("div",{className:w.errorMessage,children:[n.jsx("i",{className:"fas fa-exclamation-triangle"}),m]}),n.jsxs("form",{onSubmit:on,className:w.modalDialogForm,children:[n.jsxs("div",{className:w.formFieldGroup,children:[n.jsxs("label",{className:w.formFieldLabel,children:["Business Name ",n.jsx("span",{className:w.required,children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:Ce.name,onChange:y=>ze(M=>({...M,name:y.target.value})),className:w.formFieldInput,placeholder:"Enter business name",maxLength:100})]}),n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Description"}),n.jsx("textarea",{value:Ce.description,onChange:y=>ze(M=>({...M,description:y.target.value})),className:w.formFieldTextarea,rows:3,placeholder:"Brief description of your business",maxLength:500}),n.jsx("small",{className:w.formFieldHelp,children:"Optional: Describe what your business does"})]}),n.jsxs("div",{className:w.formFieldGroup,children:[n.jsxs("label",{className:w.formFieldLabel,children:["Business Type ",n.jsx("span",{className:w.required,children:"*"})]}),n.jsxs("select",{value:Ce.business_type,onChange:y=>ze(M=>({...M,business_type:y.target.value})),className:w.formFieldSelect,required:!0,children:[n.jsx("option",{value:"",children:"Select business type"}),n.jsx("option",{value:"service",children:"Service (Custom pricing per transaction)"}),n.jsx("option",{value:"rental",children:"Rental (Fixed pricing with stock)"}),n.jsx("option",{value:"resale",children:"Resale (Fixed pricing with stock)"})]}),n.jsxs("small",{className:w.formFieldHelp,children:[Ce.business_type==="service"&&"Services allow custom pricing for each transaction",Ce.business_type==="rental"&&"Rentals have fixed prices and track stock quantities",Ce.business_type==="resale"&&"Resale items have fixed prices and track stock quantities"]})]}),n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Business Image"}),n.jsx("input",{type:"file",accept:"image/*",onChange:y=>{const M=y.target.files?.[0];ge(M||null)},className:w.formFieldInput}),n.jsx("small",{className:w.formFieldHelp,children:"Optional: Upload an image for your business (max 5MB, will be compressed)"}),de&&n.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#f0f0f0",borderRadius:"4px"},children:[n.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#7d8d86"}}),"Selected: ",de.name]})]}),n.jsxs("div",{className:w.modalDialogActions,children:[n.jsx("button",{type:"button",onClick:()=>{ze({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),ge(null),le(!1),x(null)},className:`${w.standardButton} ${w.standardButtonSecondary}`,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:!Ce.name.trim()||!Ce.business_type||Ne,className:`${w.standardButton} ${w.standardButtonPrimary}`,children:Ne?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fas fa-spinner fa-spin",style:{marginRight:"8px"}}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Create Business"]})})]})]})]})}),fe&&n.jsx("div",{className:w.modalOverlay,children:n.jsxs("div",{className:w.modalDialog,children:[n.jsx("h2",{className:w.modalDialogTitle,children:"Add Item"}),n.jsxs("form",{onSubmit:zt,className:w.modalDialogForm,children:[n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Business"}),n.jsxs("select",{required:!0,value:ee.business_id,onChange:y=>Le(M=>({...M,business_id:y.target.value})),className:w.formFieldSelect,children:[n.jsx("option",{value:"",children:"Select a business"}),r.map(y=>n.jsxs("option",{value:y.business_id,children:[y.name," (",y.business_type,")"]},y.business_id))]})]}),n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Item Name"}),n.jsx("input",{type:"text",required:!0,value:ee.name,onChange:y=>Le(M=>({...M,name:y.target.value})),className:w.formFieldInput,placeholder:"e.g., Haircut, Chair Rental, etc."})]}),ee.business_id&&r.find(y=>y.business_id.toString()===ee.business_id)?.business_type!=="service"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Price (€)"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price,onChange:y=>Le(M=>({...M,price:y.target.value})),className:w.formFieldInput,placeholder:"0.00"})]}),n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Stock Quantity"}),n.jsx("input",{type:"number",min:"0",value:ee.stock_qty,onChange:y=>Le(M=>({...M,stock_qty:y.target.value})),className:w.formFieldInput,placeholder:"0"})]})]}),ee.business_id&&r.find(y=>y.business_id.toString()===ee.business_id)?.business_type==="service"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:w.formFieldGroup,children:n.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:0},children:[n.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"8px"}}),"Service items don't have fixed prices or stock. You'll enter the amount when recording a sale."]})}),n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Service Notes"}),n.jsx("textarea",{value:ee.notes,onChange:y=>Le(M=>({...M,notes:y.target.value})),className:w.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details for this service...",maxLength:500}),n.jsx("small",{className:w.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details for this service"})]})]}),n.jsxs("div",{className:w.modalDialogActions,children:[n.jsx("button",{type:"button",onClick:()=>Se(!1),className:`${w.standardButton} ${w.standardButtonSecondary}`,children:"Cancel"}),n.jsx("button",{type:"submit",className:`${w.standardButton} ${w.standardButtonSuccess}`,children:"Add Item"})]})]})]})}),X&&n.jsx("div",{className:w.modalOverlay,style:{zIndex:2e3},children:n.jsxs("div",{className:w.modalDialog,children:[n.jsx("h2",{className:w.modalDialogTitle,children:"Record Sale"}),n.jsxs("form",{onSubmit:Gt,className:w.modalDialogForm,children:[n.jsxs("div",{className:w.formGroup,children:[n.jsx("label",{className:w.formLabel,children:"Item"}),n.jsxs("select",{required:!0,value:qe.item_id,onChange:y=>mt(M=>({...M,item_id:y.target.value})),className:w.formFieldSelect,children:[n.jsx("option",{value:"",children:"Select an item"}),o.map(y=>n.jsxs("option",{value:y.item_id,children:[y.name," - ",y.side_businesses?.name,y.side_businesses&&r.find(M=>M.name===y.side_businesses?.name)?.business_type==="service"?" (Service - Custom Amount)":y.price?` (€${y.price})`:""]},y.item_id))]})]}),n.jsxs("div",{className:w.formGroup,children:[n.jsx("label",{className:w.formLabel,children:"Quantity"}),n.jsx("input",{type:"number",min:"1",required:!0,value:qe.quantity,onChange:y=>mt(M=>({...M,quantity:parseInt(y.target.value)})),className:w.formFieldInput})]}),n.jsxs("div",{className:w.formGroup,children:[n.jsx("label",{className:w.formLabel,children:"Total Amount (€)"}),n.jsx("input",{type:"number",step:"0.01",required:!0,value:qe.total_amount,onChange:y=>mt(M=>({...M,total_amount:y.target.value})),className:w.formFieldInput,placeholder:"0.00"}),qe.item_id&&o.find(y=>y.item_id.toString()===qe.item_id)&&r.find(y=>y.name===o.find(M=>M.item_id.toString()===qe.item_id)?.side_businesses?.name)?.business_type==="service"&&n.jsxs("p",{style:{color:"#7d8d86",fontSize:"12px",margin:"4px 0 0 0"},children:[n.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"4px"}}),"Enter the custom amount for this service"]})]}),n.jsxs("div",{className:w.formGroup,children:[n.jsx("label",{className:w.formLabel,children:"Payment Method"}),n.jsxs("select",{value:qe.payment_method,onChange:y=>mt(M=>({...M,payment_method:y.target.value})),className:w.formFieldSelect,children:[n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"mobile",children:"Mobile"})]})]}),n.jsxs("div",{className:w.modalDialogActions,children:[n.jsx("button",{type:"button",onClick:()=>W(!1),className:`${w.standardButton} ${w.standardButtonSecondary}`,children:"Cancel"}),n.jsx("button",{type:"submit",className:`${w.standardButton} ${w.standardButtonSuccess}`,children:"Record Sale"})]})]})]})}),pe&&L&&n.jsx("div",{className:w.modalOverlay,children:n.jsxs("div",{className:w.modalDialog,style:{maxWidth:"600px"},children:[n.jsx("h2",{className:w.modalDialogTitle,children:"Business Details"}),n.jsxs("div",{className:w.businessDetailModalHeader,children:[n.jsx("div",{className:w.businessDetailModalIcon,children:L.image_url?n.jsx("img",{src:L.image_url,alt:L.name,style:{width:"100%",height:"100%",borderRadius:"16px",objectFit:"cover"}}):n.jsx("i",{className:L.icon||"fa-solid fa-briefcase"})}),n.jsxs("div",{className:w.businessDetailModalInfo,children:[n.jsx("h3",{className:w.businessDetailModalName,children:L.name}),n.jsx("p",{className:w.businessDetailModalDescription,children:L.description||"No description provided"}),n.jsxs("div",{className:w.businessDetailModalMeta,children:[n.jsx("span",{className:`${w.statusBadge} ${st(L.business_type)}`,children:L.business_type||"service"}),n.jsxs("span",{className:w.businessDetailModalDate,children:["Created: ",new Date(L.created_at).toLocaleDateString()]})]})]})]}),n.jsxs("div",{className:w.businessDetailModalStats,children:[n.jsx("div",{className:w.statisticsCard,children:n.jsxs("div",{className:w.statisticsCardContent,children:[n.jsxs("div",{className:w.statisticsInfo,children:[n.jsx("p",{className:w.statisticsLabel,children:"Total Items"}),n.jsx("p",{className:w.statisticsValue,children:o.filter(y=>y.business_id===L.business_id).length})]}),n.jsx("i",{className:`fas fa-box ${w.statisticsIcon} ${w.statisticsIconBlue}`})]})}),n.jsx("div",{className:w.statisticsCard,children:n.jsxs("div",{className:w.statisticsCardContent,children:[n.jsxs("div",{className:w.statisticsInfo,children:[n.jsx("p",{className:w.statisticsLabel,children:"Current Stock"}),n.jsx("p",{className:w.statisticsValue,children:xe?.currentStock||0})]}),n.jsx("i",{className:`fas fa-warehouse ${w.statisticsIcon} ${w.statisticsIconOrange}`})]})})]}),n.jsxs("div",{className:w.businessAnalyticsSection,children:[n.jsx("h4",{className:w.analyticsSectionTitle,children:"Sales Analytics"}),n.jsxs("div",{className:w.analyticsGrid,children:[n.jsxs("div",{className:w.analyticsCard,children:[n.jsxs("div",{className:w.analyticsCardHeader,children:[n.jsx("i",{className:`fas fa-calendar-day ${w.analyticsIcon} ${w.analyticsIconBlue}`}),n.jsx("span",{className:w.analyticsPeriod,children:"Today"})]}),n.jsxs("div",{className:w.analyticsCardContent,children:[n.jsxs("div",{className:w.analyticsMetric,children:[n.jsx("span",{className:w.analyticsLabel,children:"Sales"}),n.jsx("span",{className:w.analyticsValue,children:xe?.dailySales.count||0})]}),n.jsxs("div",{className:w.analyticsMetric,children:[n.jsx("span",{className:w.analyticsLabel,children:"Revenue"}),n.jsxs("span",{className:w.analyticsValue,children:["€",(xe?.dailySales.revenue||0).toFixed(2)]})]})]})]}),n.jsxs("div",{className:w.analyticsCard,children:[n.jsxs("div",{className:w.analyticsCardHeader,children:[n.jsx("i",{className:`fas fa-calendar-week ${w.analyticsIcon} ${w.analyticsIconGreen}`}),n.jsx("span",{className:w.analyticsPeriod,children:"This Week"})]}),n.jsxs("div",{className:w.analyticsCardContent,children:[n.jsxs("div",{className:w.analyticsMetric,children:[n.jsx("span",{className:w.analyticsLabel,children:"Sales"}),n.jsx("span",{className:w.analyticsValue,children:xe?.weeklySales.count||0})]}),n.jsxs("div",{className:w.analyticsMetric,children:[n.jsx("span",{className:w.analyticsLabel,children:"Revenue"}),n.jsxs("span",{className:w.analyticsValue,children:["€",(xe?.weeklySales.revenue||0).toFixed(2)]})]})]})]}),n.jsxs("div",{className:w.analyticsCard,children:[n.jsxs("div",{className:w.analyticsCardHeader,children:[n.jsx("i",{className:`fas fa-calendar-alt ${w.analyticsIcon} ${w.analyticsIconPurple}`}),n.jsx("span",{className:w.analyticsPeriod,children:"This Month"})]}),n.jsxs("div",{className:w.analyticsCardContent,children:[n.jsxs("div",{className:w.analyticsMetric,children:[n.jsx("span",{className:w.analyticsLabel,children:"Sales"}),n.jsx("span",{className:w.analyticsValue,children:xe?.monthlySales.count||0})]}),n.jsxs("div",{className:w.analyticsMetric,children:[n.jsx("span",{className:w.analyticsLabel,children:"Revenue"}),n.jsxs("span",{className:w.analyticsValue,children:["€",(xe?.monthlySales.revenue||0).toFixed(2)]})]})]})]})]})]}),n.jsxs("div",{className:w.businessDetailModalItems,children:[n.jsxs("div",{className:w.itemsSectionHeader,children:[n.jsx("h4",{children:"Items in this business:"}),n.jsxs("button",{onClick:()=>Se(!0),className:w.restockButton,title:"Add new item",children:[n.jsx("i",{className:"fas fa-plus"}),"Add Item"]})]}),o.filter(y=>y.business_id===L.business_id).length===0?n.jsx("p",{className:w.noItemsMessage,children:"No items added yet."}):n.jsx("div",{className:w.listContainer,children:o.filter(y=>y.business_id===L.business_id).map(y=>n.jsx("div",{className:w.listItemCard,children:n.jsxs("div",{className:w.listItemCardContent,children:[n.jsxs("div",{className:w.listItemCardMain,children:[n.jsx("h4",{className:w.listItemCardTitle,children:y.name}),n.jsxs("div",{className:w.listItemCardMeta,children:[y.price?n.jsxs("span",{className:w.listItemCardPrice,children:["€",y.price]}):n.jsx("span",{className:w.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),y.stock_qty!==null&&n.jsxs("span",{className:w.listItemCardStock,children:["Stock: ",y.stock_qty]}),L?.business_type==="service"&&n.jsx("span",{className:`${w.statusBadge} ${w.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]}),y.notes&&n.jsxs("div",{className:w.listItemCardNotes,children:[n.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"6px",color:"#6b7280"}}),n.jsx("span",{style:{fontSize:"12px",color:"#6b7280",fontStyle:"italic"},children:y.notes.length>100?`${y.notes.substring(0,100)}...`:y.notes})]})]}),n.jsxs("div",{className:w.listItemCardActions,children:[n.jsxs("button",{onClick:()=>me(y),className:`${w.actionButton} ${w.editActionButton}`,title:"Edit item",children:[n.jsx("i",{className:`fas fa-edit ${w.actionButtonIcon}`}),"Edit"]}),y.stock_qty!==null&&n.jsxs("button",{onClick:()=>q(y),className:`${w.actionButton} ${w.restockActionButton}`,title:"Restock item",children:[n.jsx("i",{className:`fas fa-boxes-stacked ${w.actionButtonIcon}`}),"Restock"]}),n.jsxs("button",{onClick:()=>{mt(M=>({...M,item_id:y.item_id.toString()})),W(!0)},className:w.actionButton,title:"Record sale",children:[n.jsx("i",{className:`fas fa-plus ${w.actionButtonIcon}`}),"Sale"]})]})]})},y.item_id))})]}),n.jsxs("div",{className:w.modalDialogActions,children:[n.jsx("button",{type:"button",onClick:()=>O(!1),className:`${w.standardButton} ${w.standardButtonSecondary}`,children:"Close"}),n.jsx("button",{type:"button",onClick:()=>{O(!1),he(L)},className:`${w.standardButton} ${w.standardButtonDanger}`,children:"Delete Business"})]})]})}),Q&&n.jsx("div",{className:w.modalOverlay,children:n.jsxs("div",{className:w.modalDialog,children:[n.jsx("h2",{className:w.modalDialogTitle,children:"Delete Business"}),n.jsxs("p",{className:w.deleteConfirmationWarning,children:["Are you sure you want to delete ",n.jsx("strong",{children:Q.name}),"?"]}),n.jsx("p",{className:w.deleteConfirmationWarningText,children:"This will permanently delete the business, all its items, and all related sales records. This action cannot be undone."}),n.jsxs("div",{className:w.modalDialogActions,children:[n.jsx("button",{type:"button",onClick:()=>he(null),className:`${w.standardButton} ${w.standardButtonSecondary}`,children:"Cancel"}),n.jsx("button",{type:"button",onClick:()=>tn(Q.business_id),className:`${w.standardButton} ${w.standardButtonDanger}`,children:"Delete Business"})]})]})}),K&&ue.item_id&&n.jsx("div",{className:w.modalOverlay,style:{zIndex:2e3},children:n.jsxs("div",{className:w.modalDialog,children:[n.jsx("h2",{className:w.modalDialogTitle,children:"Restock Item"}),n.jsxs("div",{className:w.restockInfo,children:[n.jsx("p",{className:w.restockItemName,children:o.find(y=>y.item_id===ue.item_id)?.name}),n.jsxs("p",{className:w.restockCurrentStock,children:["Current Stock: ",n.jsx("strong",{children:ue.current_stock})]})]}),n.jsxs("form",{onSubmit:jn,className:w.modalDialogForm,children:[n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Restock Quantity"}),n.jsx("input",{type:"number",min:"1",required:!0,value:ue.restock_quantity,onChange:y=>be(M=>({...M,restock_quantity:y.target.value})),className:w.formFieldInput,placeholder:"Enter quantity to add"})]}),n.jsx("div",{className:w.restockPreview,children:n.jsxs("p",{className:w.restockPreviewText,children:["New stock will be: ",n.jsx("strong",{children:ue.current_stock+(parseInt(ue.restock_quantity)||0)})]})}),n.jsxs("div",{className:w.modalDialogActions,children:[n.jsx("button",{type:"button",onClick:()=>J(!1),className:`${w.standardButton} ${w.standardButtonSecondary}`,children:"Cancel"}),n.jsxs("button",{type:"submit",className:`${w.standardButton} ${w.standardButtonSuccess}`,children:[n.jsx("i",{className:"fas fa-boxes-stacked",style:{marginRight:"8px"}}),"Restock Item"]})]})]})]})}),Me&&Je&&n.jsx("div",{className:w.modalOverlay,style:{zIndex:2e3},children:n.jsxs("div",{className:w.modalDialog,children:[n.jsx("h2",{className:w.modalDialogTitle,children:"Edit Item"}),n.jsxs("form",{onSubmit:je,className:w.modalDialogForm,children:[n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Item Name"}),n.jsx("input",{type:"text",required:!0,value:Je.name,onChange:y=>We(M=>M?{...M,name:y.target.value}:null),className:w.formFieldInput,placeholder:"Enter item name"})]}),n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Price (€)"}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:Je.price||"",onChange:y=>We(M=>M?{...M,price:y.target.value?parseFloat(y.target.value):null}:null),className:w.formFieldInput,placeholder:"Enter price (leave empty for custom pricing)"}),n.jsx("small",{className:w.formFieldHelp,children:"Leave empty for service items with custom pricing"})]}),n.jsxs("div",{className:w.formFieldGroup,children:[n.jsx("label",{className:w.formFieldLabel,children:"Notes"}),n.jsx("textarea",{value:Je.notes||"",onChange:y=>We(M=>M?{...M,notes:y.target.value}:null),className:w.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details...",maxLength:500}),n.jsx("small",{className:w.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details"})]}),n.jsxs("div",{className:w.modalDialogActions,children:[n.jsx("button",{type:"button",onClick:()=>Ee(!1),className:`${w.standardButton} ${w.standardButtonSecondary}`,children:"Cancel"}),n.jsxs("button",{type:"submit",className:`${w.standardButton} ${w.standardButtonPrimary}`,children:[n.jsx("i",{className:"fas fa-save",style:{marginRight:"8px"}}),"Update Item"]})]})]})]})})]})},q2=()=>{const[l,r]=v.useState([]),[i,o]=v.useState(!0),[d,u]=v.useState(null),h=async()=>{try{o(!0),u(null);const{data:m,error:x}=await se.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).order("datetime",{ascending:!1});if(x)throw x;const S=m?.map(E=>{const k=E.notes&&(E.notes.includes("PARTIAL PAYMENT")||E.notes.includes("Amount Paid Today")||E.notes.includes("Remaining Balance"));let T=0,N=0,D="";if(k&&E.notes){const R=E.notes,I=R.match(/Amount Paid Today:\s*€(\d+\.?\d*)/i);I&&(T=parseFloat(I[1]));const Z=R.match(/Remaining Balance:\s*€(\d+\.?\d*)/i);Z&&(N=parseFloat(Z[1]));const Y=R.match(/Partial Payment Notes:\s*(.+?)(?:\n\n|\n---|$)/is);Y&&(D=Y[1].trim())}const P=k?T+N:E.total_amount;return{...E,total_amount:P,customer_name:E.customers?.name||"Walk-in Customer",cashier_name:E.users?.username||"Unknown",partial_payment:k,partial_amount:T,remaining_amount:N,partial_notes:D}})||[];r(S)}catch(m){u(m instanceof Error?m.message:"Failed to fetch transactions")}finally{o(!1)}},p=async m=>{try{const{data:x,error:S}=await se.from("sales").select("*").eq("sale_id",m).single();if(S)throw S;if(!x)throw new Error("Transaction not found");if(!(x.notes&&(x.notes.includes("PARTIAL PAYMENT")||x.notes.includes("Amount Paid Today")||x.notes.includes("Remaining Balance"))))throw new Error("This transaction is not a partial payment");let k=x.total_amount;if(x.notes){const D=x.notes.match(/Amount Paid Today:\s*€(\d+\.?\d*)/i),P=x.notes.match(/Remaining Balance:\s*€(\d+\.?\d*)/i);if(D&&P){const R=parseFloat(D[1]),I=parseFloat(P[1]);k=R+I}}const T=x.notes?x.notes.replace(/PARTIAL PAYMENT.*$/s,"PAYMENT COMPLETED - Full amount paid"):"PAYMENT COMPLETED - Full amount paid",{error:N}=await se.from("sales").update({total_amount:k,notes:T}).eq("sale_id",m);if(N)throw N;return await h(),!0}catch(x){return u(x instanceof Error?x.message:"Failed to resolve partial payment"),!1}},g=async m=>{try{const{data:x,error:S}=await se.from("sale_items").select(`
          *,
          products (stock_quantity)
        `).eq("sale_id",m);if(S)throw S;for(const T of x||[]){const N=(T.products?.stock_quantity||0)+T.quantity,{error:D}=await se.from("products").update({stock_quantity:N}).eq("product_id",T.product_id);if(D)throw D;await se.from("inventory_movements").insert({product_id:T.product_id,quantity_change:T.quantity,movement_type:"Restock",reference_id:m})}const{error:E}=await se.from("sale_items").delete().eq("sale_id",m);if(E)throw E;const{error:k}=await se.from("sales").delete().eq("sale_id",m);if(k)throw k;return await h(),!0}catch(x){return u(x instanceof Error?x.message:"Failed to delete transaction"),!1}};return v.useEffect(()=>{h()},[]),{transactions:l,loading:i,error:d,fetchTransactions:h,deleteTransaction:g,resolvePartialPayment:p}},Td=({children:l,maxWidth:r="1400px"})=>n.jsx("div",{style:{minHeight:"100vh",background:"#f8fafc",fontFamily:"Poppins, sans-serif",padding:"20px"},children:n.jsx("div",{style:{maxWidth:r,margin:"0 auto",background:"#ffffff",borderRadius:"12px",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:l})}),$2=({title:l,subtitle:r,icon:i,children:o})=>n.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:o?"16px":"0"},children:[n.jsxs("div",{children:[n.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[i&&n.jsx("i",{className:i,style:{marginRight:"12px",color:"#7d8d86"}}),l]}),r&&n.jsx("p",{style:{fontSize:"16px",color:"#6b7280",margin:"0"},children:r})]}),o]})}),am=({children:l,className:r="",style:i={},padding:o="md",background:d="white",hover:u=!1})=>{const h={borderRadius:"12px",border:"1px solid #e5e7eb",transition:u?"all 0.2s ease":"none",...i},p={white:{background:"#ffffff"},gray:{background:"#f9fafb"}},g={sm:{padding:"12px"},md:{padding:"20px"},lg:{padding:"24px"}},m={...h,...p[d],...g[o]};return n.jsx("div",{className:r,style:m,onMouseEnter:x=>{u&&(x.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",x.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:x=>{u&&(x.currentTarget.style.boxShadow="none",x.currentTarget.style.transform="translateY(0)")},children:l})},W2=({searchTerm:l,setSearchTerm:r,paymentFilter:i,setPaymentFilter:o,dateFilter:d,setDateFilter:u,selectedDate:h,showCalendar:p,setShowCalendar:g,itemsPerPage:m,setItemsPerPage:x,onCalendarDateSelect:S,generateCalendarDays:E,calendarDate:k,setCalendarDate:T,partialPaymentFilter:N,setPartialPaymentFilter:D})=>n.jsxs(am,{background:"gray",padding:"md",children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",alignItems:"end"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Search Transactions"}),n.jsx("input",{type:"text",placeholder:"Search by ID, customer, cashier...",value:l,onChange:P=>r(P.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Method"}),n.jsxs("select",{value:i,onChange:P=>o(P.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[n.jsx("option",{value:"all",children:"All Methods"}),n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Type"}),n.jsxs("select",{value:N,onChange:P=>D(P.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[n.jsx("option",{value:"all",children:"All Payments"}),n.jsx("option",{value:"full",children:"Full Payments"}),n.jsx("option",{value:"partial",children:"Partial Payments"})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Date Range"}),n.jsxs("select",{value:d,onChange:P=>u(P.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[n.jsx("option",{value:"all",children:"All Time"}),n.jsx("option",{value:"today",children:"Today"}),n.jsx("option",{value:"week",children:"Last 7 Days"}),n.jsx("option",{value:"month",children:"Last 30 Days"}),n.jsx("option",{value:"custom",children:"Custom Date"})]})]}),d==="custom"&&n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Select Date"}),n.jsx("button",{onClick:()=>g(!p),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff",cursor:"pointer",textAlign:"left"},children:h?new Date(h).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Select a date"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Items Per Page"}),n.jsxs("select",{value:m,onChange:P=>x(Number(P.target.value)),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:25,children:"25"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),p&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[n.jsx("button",{onClick:()=>T(new Date(k.getFullYear(),k.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:n.jsx("i",{className:"fa-solid fa-chevron-left"})}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:k.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsx("button",{onClick:()=>T(new Date(k.getFullYear(),k.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:n.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(P=>n.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:P},P))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:E().map((P,R)=>{const I=P.getMonth()===k.getMonth(),Z=P.toDateString()===new Date().toDateString(),Y=h&&P.toDateString()===new Date(h).toDateString();return n.jsx("button",{onClick:()=>S(P),style:{background:Y?"#7d8d86":"transparent",color:Y?"#f1f0e4":I?"#3e3f29":"#bca88d",border:Z?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:I?1:.5},children:P.getDate()},R)})}),n.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:n.jsx("button",{onClick:()=>S(new Date),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer"},children:"Today"})})]})})]}),ji=({children:l,onClick:r,type:i="button",variant:o="primary",size:d="md",disabled:u=!1,className:h="",style:p={}})=>{const g={border:"none",borderRadius:"6px",cursor:u?"not-allowed":"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500",...p},m={primary:{background:"#7d8d86",color:"#ffffff"},secondary:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db"},danger:{background:"#3e3f29",color:"#f1f0e4"},success:{background:"#10b981",color:"#ffffff"}},x={primary:{background:"#6a7a73"},secondary:{background:"#e5e7eb"},danger:{background:"#2a2b1f"},success:{background:"#059669"}},S={sm:{padding:"6px 12px",fontSize:"12px"},md:{padding:"8px 16px",fontSize:"14px"},lg:{padding:"12px 24px",fontSize:"16px"}},E={...g,...m[o],...S[d],opacity:u?.6:1};return n.jsx("button",{type:i,onClick:r,disabled:u,className:h,style:E,onMouseEnter:k=>{u||Object.assign(k.currentTarget.style,x[o])},onMouseLeave:k=>{u||Object.assign(k.currentTarget.style,m[o])},children:l})},H2=({transaction:l,onTransactionClick:r,onDeleteTransaction:i,onResolvePartialPayment:o})=>{const d=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p),u=p=>new Date(p).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=p=>{switch(p.toLowerCase()){case"cash":return"fa-solid fa-money-bill";case"card":return"fa-solid fa-credit-card";case"mobile_money":return"fa-solid fa-mobile";default:return"fa-solid fa-money-bill"}};return n.jsxs("div",{className:"transaction-card",onClick:()=>r(l.sale_id),style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",background:l.partial_payment?"#f1f0e4":"#ffffff",borderRadius:"8px",border:"3px solid #7d8d86",cursor:"pointer",transition:"all 0.2s ease",position:"relative",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",marginBottom:"12px"},onMouseEnter:p=>{const g=p.currentTarget;g.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",g.style.transform="translateY(-2px)",g.style.borderColor="#7d8d86"},onMouseLeave:p=>{const g=p.currentTarget;g.style.boxShadow="none",g.style.transform="translateY(0)",g.style.borderColor="#7d8d86"},children:[n.jsxs("div",{style:{width:"60px",textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#7d8d86",background:"#f3f4f6",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:["#",l.sale_id.toString().slice(-6)]}),l.partial_payment&&n.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"#f1f0e4",background:"#7d8d86",padding:"2px 6px",borderRadius:"3px",marginTop:"4px",display:"inline-block"},children:"PARTIAL"})]}),n.jsx("div",{style:{minWidth:"140px",fontSize:"14px",color:"#6b7280"},children:u(l.datetime)}),n.jsx("div",{style:{flex:1,minWidth:"120px",fontSize:"14px",color:"#374151",fontWeight:"500"},children:l.customer_name}),n.jsx("div",{style:{minWidth:"100px",fontSize:"14px",color:"#6b7280"},children:l.cashier_name}),n.jsxs("div",{style:{minWidth:"120px",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"#374151"},children:[n.jsx("i",{className:h(l.payment_method),style:{color:"#7d8d86"}}),n.jsx("span",{style:{textTransform:"capitalize"},children:l.payment_method.replace("_"," ")})]}),n.jsx("div",{style:{minWidth:"120px",textAlign:"right",fontSize:"16px",fontWeight:"600",color:l.partial_payment?"#7d8d86":"#059669"},children:l.partial_payment?n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86"},children:["Paid: ",d(l.partial_amount||0)]}),n.jsxs("div",{style:{fontSize:"12px",color:"#3e3f29"},children:["Owed: ",d(l.remaining_amount||0)]})]}):d(l.total_amount)}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.partial_payment&&o&&n.jsxs(ji,{variant:"primary",size:"sm",onClick:p=>{p.stopPropagation(),o(l.sale_id)},children:[n.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px"}}),"Resolve"]}),n.jsxs(ji,{variant:"danger",size:"sm",onClick:p=>{p.stopPropagation(),i(l.sale_id)},children:[n.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"10px"}}),"Delete"]}),n.jsx("div",{style:{color:"#7d8d86"},children:n.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]})},F2=({currentPage:l,totalPages:r,onPageChange:i,startIndex:o,endIndex:d,totalItems:u})=>{if(r<=1)return null;const h=()=>{const p=[];if(r<=5)for(let m=1;m<=r;m++)p.push(m);else if(l<=3){for(let m=1;m<=4;m++)p.push(m);p.push("..."),p.push(r)}else if(l>=r-2){p.push(1),p.push("...");for(let m=r-3;m<=r;m++)p.push(m)}else{p.push(1),p.push("...");for(let m=l-1;m<=l+1;m++)p.push(m);p.push("..."),p.push(r)}return p};return n.jsxs("div",{style:{background:"#f9fafb",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[n.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-list"}),n.jsxs("span",{children:["Showing ",o+1,"-",Math.min(d,u)," of ",u," transactions"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsxs(ji,{variant:"secondary",size:"sm",onClick:()=>i(l-1),disabled:l===1,children:[n.jsx("i",{className:"fa-solid fa-chevron-left"}),"Previous"]}),n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:h().map((p,g)=>n.jsx(_g.Fragment,{children:p==="..."?n.jsx("span",{style:{padding:"8px 12px",color:"#6b7280",fontSize:"14px"},children:"..."}):n.jsx(ji,{variant:l===p?"primary":"secondary",size:"sm",onClick:()=>i(p),style:{minWidth:"40px"},children:p})},g))}),n.jsxs(ji,{variant:"secondary",size:"sm",onClick:()=>i(l+1),disabled:l===r,children:["Next",n.jsx("i",{className:"fa-solid fa-chevron-right"})]})]})]})},Y2=({isOpen:l,onClose:r,selectedDate:i,onDateSelect:o,onTodaySelect:d,calendarDate:u,onCalendarDateChange:h})=>{const p=(g,m)=>{const x=new Date(g,m,1),S=new Date(x);S.setDate(S.getDate()-x.getDay());const E=[],k=new Date(S);for(let T=0;T<42;T++)E.push(new Date(k)),k.setDate(k.getDate()+1);return E};return l?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[n.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},children:u.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>h(new Date(u.getFullYear(),u.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:g=>{const m=g.currentTarget;m.style.background="#f3f4f6",m.style.color="#3e3f29"},onMouseLeave:g=>{const m=g.currentTarget;m.style.background="none",m.style.color="#7d8d86"},children:n.jsx("i",{className:"fa-solid fa-chevron-left"})}),n.jsx("button",{onClick:()=>h(new Date(u.getFullYear(),u.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:g=>{const m=g.currentTarget;m.style.background="#f3f4f6",m.style.color="#3e3f29"},onMouseLeave:g=>{const m=g.currentTarget;m.style.background="none",m.style.color="#7d8d86"},children:n.jsx("i",{className:"fa-solid fa-chevron-right"})}),n.jsx("button",{onClick:r,style:{background:"none",border:"none",fontSize:"20px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:g=>{const m=g.currentTarget;m.style.background="#f3f4f6",m.style.color="#3e3f29"},onMouseLeave:g=>{const m=g.currentTarget;m.style.background="none",m.style.color="#7d8d86"},children:"×"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>n.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:g},g)),p(u.getFullYear(),u.getMonth()).map((g,m)=>{const x=g.getMonth()===u.getMonth(),S=new Date,E=new Date(S.getFullYear(),S.getMonth(),S.getDate()),k=new Date(g.getFullYear(),g.getMonth(),g.getDate()),T=new Date(i.getFullYear(),i.getMonth(),i.getDate()),N=k.getTime()===E.getTime(),D=k.getTime()===T.getTime();return n.jsx("button",{onClick:()=>o(g),style:{background:D?"#7d8d86":"transparent",color:D?"#ffffff":x?"#1f2937":"#9ca3af",border:N?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:x?1:.5},onMouseEnter:P=>{if(!D){const R=P.currentTarget;R.style.background="#f3f4f6",R.style.color="#1f2937"}},onMouseLeave:P=>{if(!D){const R=P.currentTarget;R.style.background="transparent",R.style.color=x?"#1f2937":"#9ca3af"}},children:g.getDate()},m)})]}),n.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:n.jsx("button",{onClick:d,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:g=>{const m=g.currentTarget;m.style.background="#6a7a73"},onMouseLeave:g=>{const m=g.currentTarget;m.style.background="#7d8d86"},children:"Today"})})]})}):null},G2=()=>{const l=bs(),{user:r}=Xn(),{transactions:i,loading:o,error:d,deleteTransaction:u,resolvePartialPayment:h}=q2(),[p,g]=v.useState(""),[m,x]=v.useState("all"),[S,E]=v.useState("all"),[k,T]=v.useState(null),[N,D]=v.useState("all"),[P,R]=v.useState(!1),[I,Z]=v.useState(new Date),[Y,le]=v.useState(()=>{const Ce=new Date;return new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate())}),[fe,Se]=v.useState(1),[ye,ne]=v.useState(25),[X]=v.useState("datetime"),[W]=v.useState("desc"),L=Ce=>Ce.filter(ze=>{const de=!p||ze.sale_id.toString().includes(p)||ze.customer_name?.toLowerCase().includes(p.toLowerCase())||ze.cashier_name?.toLowerCase().includes(p.toLowerCase()),ge=m==="all"||ze.payment_method===m,Ne=()=>N==="all"?!0:N==="partial"?ze.partial_payment===!0:N==="full"?!ze.partial_payment:!0,A=()=>{if(k){const ct=new Date(ze.datetime),on=new Date(ct.getFullYear(),ct.getMonth(),ct.getDate()),[zt,Gt,tn]=k.split("-").map(Number),nn=new Date(zt,Gt-1,tn);return on.getTime()===nn.getTime()}if(S==="all")return!0;const ee=new Date,Le=new Date(ze.datetime),qe=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),mt=new Date(Le.getFullYear(),Le.getMonth(),Le.getDate());switch(S){case"today":return mt.getTime()===qe.getTime();case"week":const ct=new Date(ee.getTime()-10080*60*1e3);return Le>=ct;case"month":const on=new Date(ee.getTime()-720*60*60*1e3);return Le>=on;default:return!0}};return de&&ge&&Ne()&&A()}),oe=Ce=>[...Ce].sort((ze,de)=>{let ge=ze[X],Ne=de[X];return X==="datetime"&&(ge=new Date(ge).getTime(),Ne=new Date(Ne).getTime()),W==="asc"?ge>Ne?1:-1:ge<Ne?1:-1}),pe=L(i),O=oe(pe),Q=Math.ceil(O.length/ye),he=(fe-1)*ye,xe=he+ye,j=O.slice(he,xe),K=()=>{const Ce=I.getFullYear(),ze=I.getMonth(),de=new Date(Ce,ze,1),ge=new Date(de);ge.setDate(ge.getDate()-de.getDay());const Ne=[];for(let A=0;A<42;A++){const ee=new Date(ge);ee.setDate(ge.getDate()+A),Ne.push(ee)}return Ne},J=Ce=>{const ze=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate());le(ze);const de=ze.getFullYear(),ge=String(ze.getMonth()+1).padStart(2,"0"),Ne=String(ze.getDate()).padStart(2,"0"),A=`${de}-${ge}-${Ne}`;T(A),E("custom"),R(!1)},ue=()=>{const Ce=new Date,ze=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate());le(ze);const de=ze.getFullYear(),ge=String(ze.getMonth()+1).padStart(2,"0"),Ne=String(ze.getDate()).padStart(2,"0"),A=`${de}-${ge}-${Ne}`;T(A),E("custom"),R(!1)},be=Ce=>{l(`/transaction/${Ce}`)},Me=async Ce=>{window.confirm("Are you sure you want to delete this transaction? This action cannot be undone and will restore the stock for all items in this transaction.")&&await u(Ce)&&alert("Transaction deleted successfully!")},Ee=async Ce=>{window.confirm("Are you sure you want to mark this partial payment as resolved? This will update the transaction to show it as fully paid.")&&await h(Ce)&&alert("Partial payment resolved successfully!")},Je=Ce=>{Se(Ce),window.scrollTo({top:0,behavior:"smooth"})},We=Ce=>{ne(Ce),Se(1)};return v.useEffect(()=>{Se(1)},[p,m,S,k,X,W]),o?n.jsx(Td,{children:n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:n.jsxs("div",{style:{fontSize:"20px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transactions..."]})})}):d?n.jsx(Td,{children:n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:n.jsxs("div",{style:{fontSize:"18px",color:"#ef4444",textAlign:"center"},children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"12px",display:"block"}}),d]})})}):n.jsxs(Td,{children:[n.jsx($2,{title:"Transactions",subtitle:"View and manage all sales transactions",icon:"fa-solid fa-receipt",children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[n.jsxs("div",{onClick:()=>R(!0),style:{background:"#3e3f29",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[n.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),n.jsx("span",{style:{color:"#bca88d"},children:Y.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#1a1a1a",fontSize:"14px",flexWrap:"wrap"},children:[n.jsx("i",{className:"fa-solid fa-receipt"}),n.jsxs("span",{children:["Showing ",he+1,"-",Math.min(xe,O.length)," of ",O.length," transactions",k&&n.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","on ",new Date(k).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),S!=="all"&&!k&&n.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","(",S==="today"?"Today":S==="week"?"Last 7 days":S==="month"?"Last 30 days":S,")"]})]})]})]})}),n.jsxs("div",{style:{padding:"24px 32px",flex:1},children:[n.jsx(W2,{searchTerm:p,setSearchTerm:g,paymentFilter:m,setPaymentFilter:x,dateFilter:S,setDateFilter:E,selectedDate:k,showCalendar:P,setShowCalendar:R,itemsPerPage:ye,setItemsPerPage:We,onCalendarDateSelect:J,generateCalendarDays:K,calendarDate:I,setCalendarDate:Z,partialPaymentFilter:N,setPartialPaymentFilter:D}),n.jsx(am,{children:j.length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:j.map(Ce=>n.jsx(H2,{transaction:Ce,onTransactionClick:be,onDeleteTransaction:Me,onResolvePartialPayment:Ee},Ce.sale_id))}):n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[n.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",display:"block",color:"#d1d5db"}}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",margin:"0 0 8px 0"},children:"No transactions found"}),n.jsx("p",{style:{fontSize:"14px",margin:0},children:p||m!=="all"||N!=="all"||S!=="all"||Y?"Try adjusting your filters to see more results.":"No transactions have been recorded yet."})]})}),n.jsx(F2,{currentPage:fe,totalPages:Q,onPageChange:Je,startIndex:he,endIndex:xe,totalItems:O.length}),n.jsx(Y2,{isOpen:P,onClose:()=>R(!1),selectedDate:Y,onDateSelect:J,onTodaySelect:ue,calendarDate:I,onCalendarDateChange:Z})]})]})},V2=()=>{const{transactionId:l}=Gy(),r=bs(),[i,o]=v.useState(null),[d,u]=v.useState([]),[h,p]=v.useState(!0),[g,m]=v.useState(!1),[x,S]=v.useState(!1),[E,k]=v.useState({payment_method:"",customer_id:null,notes:""}),[T,N]=v.useState([]),[D,P]=v.useState({});v.useEffect(()=>{l&&(R(),I())},[l]);const R=async()=>{try{p(!0);const L=parseInt(l?.replace("TXN-","")||"0");if(!L){console.error("Invalid transaction ID"),r("/sales");return}const{data:oe,error:pe}=await se.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",L).single();if(pe){console.error("Error fetching transaction:",pe),r("/sales");return}const O={...oe,customer_name:oe.customers?.name||null,cashier_name:oe.users?.username||null};o(O);const{data:Q,error:he}=await se.from("sale_items").select(`
          *,
          products (
            name,
            category,
            weight_unit,
            price_per_unit,
            is_weighted,
            image_url
          )
        `).eq("sale_id",L);if(he)console.error("Error fetching transaction items:",he);else{const xe=(Q||[]).map(j=>(j.products?.is_weighted&&console.log("Weighted item data:",{name:j.products.name,weight:j.weight,weight_unit:j.products.weight_unit,price_per_unit:j.products.price_per_unit,calculated_price:j.calculated_price,price_each:j.price_each}),{sale_item_id:j.sale_item_id,product_id:j.product_id,quantity:j.quantity,unit_price:j.price_each,total_price:j.calculated_price||(j.products?.is_weighted&&j.weight&&j.products?.price_per_unit?j.weight*j.products.price_per_unit:j.quantity*j.price_each),product_name:j.products?.name||"Unknown Product",product_category:j.products?.category||"Unknown Category",product_image:j.products?.image_url||null,weight:j.weight||void 0,weight_unit:j.products?.weight_unit||void 0,price_per_unit:j.products?.price_per_unit||void 0,is_weighted:j.products?.is_weighted||!1}));u(xe)}}catch(L){console.error("Error fetching transaction details:",L),r("/sales")}finally{p(!1)}},I=async()=>{try{const{data:L,error:oe}=await se.from("customers").select("id, name").order("name");oe?console.error("Error fetching customers:",oe):N(L||[])}catch(L){console.error("Error fetching customers:",L)}},Z=()=>{r("/")},Y=()=>{r(`/sales?transaction=${l}`)},le=async()=>{if(i)try{S(!0);const L=parseInt(l?.replace("TXN-","")||"0"),{error:oe}=await se.from("sales").update({payment_method:E.payment_method,customer_id:E.customer_id,notes:E.notes}).eq("sale_id",L);if(oe){console.error("Error updating transaction:",oe),alert("Failed to update transaction. Please try again.");return}await R(),m(!1),alert("Transaction updated successfully!")}catch(L){console.error("Error saving transaction:",L),alert("Failed to save changes. Please try again.")}finally{S(!1)}},fe=()=>{m(!1),k({payment_method:"",customer_id:null,notes:""}),P({})},Se=(L,oe)=>{oe<0||P(pe=>({...pe,[L]:oe}))},ye=async L=>{if(confirm("Are you sure you want to remove this item from the transaction?"))try{const{error:oe}=await se.from("sale_items").delete().eq("sale_item_id",L);if(oe){console.error("Error removing item:",oe),alert("Failed to remove item. Please try again.");return}await R(),alert("Item removed successfully!")}catch(oe){console.error("Error removing item:",oe),alert("Failed to remove item. Please try again.")}},ne=async(L,oe)=>{if(oe<=0){ye(L);return}try{const pe=d.find(he=>he.sale_item_id===L);if(!pe)return;const O=oe*pe.unit_price,{error:Q}=await se.from("sale_items").update({quantity:oe,total_price:O}).eq("sale_item_id",L);if(Q){console.error("Error updating item quantity:",Q),alert("Failed to update item quantity. Please try again.");return}await R(),P(he=>{const xe={...he};return delete xe[L],xe}),alert("Item quantity updated successfully!")}catch(pe){console.error("Error updating item quantity:",pe),alert("Failed to update item quantity. Please try again.")}},X=async()=>{if(!(!i||!window.confirm(`Are you sure you want to delete Transaction #${l}?

This will:
• Remove all items from this transaction
• Restore stock quantities for all items
• Delete the transaction record

This action cannot be undone!`)))try{const oe=parseInt(l?.replace("TXN-","")||"0");for(const Q of d){const{data:he,error:xe}=await se.from("products").select("stock_quantity").eq("product_id",Q.product_id).single();if(xe){console.error("Error fetching product stock:",xe);continue}const{error:j}=await se.from("products").update({stock_quantity:he.stock_quantity+Q.quantity,last_updated:new Date().toISOString()}).eq("product_id",Q.product_id);j&&console.error("Error restoring stock:",j);const{error:K}=await se.from("inventory_movements").insert([{product_id:Q.product_id,quantity_change:Q.quantity,movement_type:"Transaction Deletion",reference_id:oe,notes:`Stock restored from deleted transaction #${l}`}]);K&&console.error("Error creating inventory movement:",K)}const{error:pe}=await se.from("sale_items").delete().eq("sale_id",oe);if(pe){console.error("Error deleting sale items:",pe),alert("Failed to delete transaction items. Please try again.");return}const{error:O}=await se.from("sales").delete().eq("sale_id",oe);if(O){console.error("Error deleting sale:",O),alert("Failed to delete transaction. Please try again.");return}alert("Transaction deleted successfully!"),r("/")}catch(oe){console.error("Error deleting transaction:",oe),alert("Failed to delete transaction. Please try again.")}},W=L=>new Date(L).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return h?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:n.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transaction details..."]})}):i?n.jsxs("div",{style:{padding:"0"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[n.jsx("button",{onClick:Z,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease"},onMouseEnter:L=>{L.target.style.background="#7d8d86",L.target.style.color="#f1f0e4"},onMouseLeave:L=>{L.target.style.background="none",L.target.style.color="#7d8d86"},children:n.jsx("i",{className:"fa-solid fa-arrow-left"})}),n.jsxs("div",{children:[n.jsxs("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:["Transaction #",l]}),n.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:W(i.datetime)})]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsxs("button",{onClick:X,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:L=>{L.target.style.background="#dc2626"},onMouseLeave:L=>{L.target.style.background="#ef4444"},children:[n.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"14px"}}),"Delete Transaction"]}),g?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:le,disabled:x,style:{background:x?"#9ca3af":"#10b981",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:L=>{x||(L.target.style.background="#059669")},onMouseLeave:L=>{x||(L.target.style.background="#10b981")},children:[n.jsx("i",{className:`fa-solid ${x?"fa-spinner":"fa-save"}`,style:{fontSize:"14px",animation:x?"spin 1s linear infinite":"none"}}),x?"Saving...":"Save"]}),n.jsxs("button",{onClick:fe,disabled:x,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:L=>{x||(L.target.style.background="#dc2626")},onMouseLeave:L=>{x||(L.target.style.background="#ef4444")},children:[n.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"14px"}}),"Cancel"]})]}):n.jsxs("button",{onClick:Y,style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:L=>{L.target.style.background="#bca88d"},onMouseLeave:L=>{L.target.style.background="#7d8d86"},children:[n.jsx("i",{className:"fa-solid fa-edit",style:{fontSize:"14px"}}),"Edit"]})]})]}),n.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Total Amount"}),n.jsxs("p",{style:{fontSize:"28px",fontWeight:"bold",color:"#3e3f29",margin:0},children:["€",i.total_amount.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Payment Method"}),g?n.jsxs("select",{value:E.payment_method,onChange:L=>k({...E,payment_method:L.target.value}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"credit",children:"Credit"})]}):n.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0,textTransform:"capitalize"},children:i.payment_method})]}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Customer"}),g?n.jsxs("select",{value:E.customer_id||"",onChange:L=>k({...E,customer_id:L.target.value?parseInt(L.target.value):null}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[n.jsx("option",{value:"",children:"Walk-in Customer"}),T.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}):n.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:i.customer_name||"Walk-in Customer"})]}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Cashier"}),n.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:i.cashier_name||"System"})]}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Items Count"}),n.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:[d.length," items"]})]}),i.discount_applied&&i.discount_applied>0&&n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Discount Applied"}),n.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#ef4444",margin:0},children:["-€",i.discount_applied.toFixed(2)]})]})]}),i.partial_payment&&n.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px",marginTop:"24px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[n.jsx("i",{className:"fa-solid fa-credit-card",style:{color:"#f59e0b",fontSize:"16px"}}),n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#92400e",margin:0},children:"Partial Payment Transaction"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Amount Paid"}),n.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#059669",margin:0},children:["€",i.partial_amount?.toFixed(2)||"0.00"]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Remaining Balance"}),n.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#dc2626",margin:0},children:["€",i.remaining_amount?.toFixed(2)||"0.00"]})]}),i.partial_notes&&n.jsxs("div",{style:{gridColumn:"1 / -1"},children:[n.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Notes"}),n.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:0,fontStyle:"italic"},children:i.partial_notes})]})]})]}),n.jsxs("div",{style:{marginTop:"24px"},children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Notes"}),g?n.jsx("textarea",{value:E.notes,onChange:L=>k({...E,notes:L.target.value}),placeholder:"Add transaction notes...",style:{width:"100%",minHeight:"80px",fontSize:"14px",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"12px",resize:"vertical",fontFamily:"inherit"}}):n.jsx("p",{style:{fontSize:"16px",color:"#3e3f29",margin:0,fontStyle:i.notes?"normal":"italic",opacity:i.notes?1:.6},children:i.notes||"No notes added"})]})]}),n.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[n.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 24px 0",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"20px"}}),"Transaction Items"]}),d.length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:d.map((L,oe)=>{const pe=D[L.sale_item_id]!==void 0,O=pe?D[L.sale_item_id]:L.quantity,Q=L.is_weighted&&L.weight?L.total_price||L.weight*(L.price_per_unit||0):O*L.unit_price;return n.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease"},onMouseEnter:he=>{he.target.style.boxShadow="0 4px 12px rgba(62, 63, 41, 0.1)",he.target.style.transform="translateY(-2px)"},onMouseLeave:he=>{he.target.style.boxShadow="none",he.target.style.transform="translateY(0)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:L.product_image?`url(${L.product_image})`:L.is_weighted?"#f59e0b":"#7d8d86",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"18px",fontWeight:"bold",position:"relative",border:"2px solid rgba(125, 141, 134, 0.2)"},children:!L.product_image&&n.jsxs(n.Fragment,{children:[L.is_weighted&&L.weight?`${L.weight}${L.weight_unit}`:L.quantity,L.is_weighted&&n.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",width:"16px",height:"16px",borderRadius:"50%",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"#ffffff"},children:"⚖️"})]})}),g&&!L.is_weighted&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("button",{onClick:()=>Se(L.sale_item_id,O-1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),n.jsx("div",{style:{minWidth:"48px",height:"48px",borderRadius:"12px",background:pe?"#fef3c7":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:pe?"#92400e":"#f1f0e4",fontSize:"18px",fontWeight:"bold",border:pe?"2px solid #f59e0b":"none"},children:O}),n.jsx("button",{onClick:()=>Se(L.sale_item_id,O+1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#10b981",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),pe&&n.jsx("button",{onClick:()=>ne(L.sale_item_id,O),style:{padding:"6px 12px",borderRadius:"6px",background:"#3b82f6",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer"},children:"Save"}),n.jsx("button",{onClick:()=>ye(L.sale_item_id),style:{padding:"6px 12px",borderRadius:"6px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer",marginLeft:"8px"},children:"Remove"})]}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:L.product_name}),n.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[L.product_category," • ",L.is_weighted&&L.weight&&L.weight_unit&&L.price_per_unit?`${L.weight} ${L.weight_unit} • €${L.price_per_unit.toFixed(2)}/${L.weight_unit}`:`€${L.unit_price.toFixed(2)} each`]}),L.is_weighted&&g&&n.jsx("p",{style:{fontSize:"12px",color:"#f59e0b",margin:"4px 0 0 0",fontStyle:"italic"},children:"Weighted items cannot be edited after sale"})]})]}),n.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:pe?"#f59e0b":"#3e3f29"},children:["€",Q.toFixed(2)]})]},oe)})}):n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#7d8d86"},children:[n.jsx("i",{className:"fa-solid fa-box",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),n.jsx("p",{style:{fontSize:"16px",margin:0},children:"No items found for this transaction"})]})]})]}):n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:n.jsxs("div",{style:{textAlign:"center",color:"#7d8d86"},children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),n.jsx("p",{style:{fontSize:"16px",margin:0},children:"Transaction not found"})]})})};function K2({isOpen:l,onClose:r,vaultEntries:i}){const[o,d]=v.useState("weekly"),[u,h]=v.useState("2025-W37"),[p,g]=v.useState(null),[m,x]=v.useState(!1),S=T=>`€${T.toFixed(2)}`,E=async()=>{try{x(!0);const T=new Date;let N,D;if(o==="weekly"){const de=T.getDay(),ge=T.getDate()-de+(de===0?-6:1);N=new Date(T.setDate(ge)),N.setHours(0,0,0,0),D=new Date(N),D.setDate(D.getDate()+6),D.setHours(23,59,59,999)}else N=new Date(T.getFullYear(),T.getMonth(),1),D=new Date(T.getFullYear(),T.getMonth()+1,0,23,59,59,999);const{data:P,error:R}=await se.from("sales").select("total_amount, discount_applied, cashier_id").gte("datetime",N.toISOString()).lte("datetime",D.toISOString());if(R)throw R;const I=P?.reduce((de,ge)=>de+(ge.total_amount||0),0)||0,Z=P?.reduce((de,ge)=>de+(ge.discount_applied||0),0)||0,Y=P?.length||0,le=Y>0?I/Y:0,{data:fe,error:Se}=await se.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(category),
          sales!inner(datetime)
        `).gte("sales.datetime",N.toISOString()).lte("sales.datetime",D.toISOString());if(Se)throw Se;const ye=new Map;fe?.forEach(de=>{const ge=de.products?.category||"Other",Ne=de.quantity*de.price_each,A=ye.get(ge)||{revenue:0,units:0};ye.set(ge,{revenue:A.revenue+Ne,units:A.units+de.quantity})});const ne=Array.from(ye.entries()).map(([de,ge])=>({name:de,revenue:ge.revenue,percentage:I>0?Number((ge.revenue/I*100).toFixed(1)):0,units:ge.units})).sort((de,ge)=>ge.revenue-de.revenue),{data:X,error:W}=await se.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(name),
          sales!inner(datetime)
        `).gte("sales.datetime",N.toISOString()).lte("sales.datetime",D.toISOString());if(W)throw W;const L=new Map;X?.forEach(de=>{const ge=de.products?.name||"Unknown Product",Ne=de.quantity*de.price_each,A=L.get(ge)||{units:0,revenue:0};L.set(ge,{units:A.units+de.quantity,revenue:A.revenue+Ne})});const oe=Array.from(L.entries()).map(([de,ge])=>({name:de,...ge})).sort((de,ge)=>ge.revenue-de.revenue).slice(0,10).map((de,ge)=>({rank:ge+1,...de})),{data:pe,error:O}=await se.from("products").select("name");if(O)throw O;const he=(pe?.map(de=>{const ge=L.get(de.name);return{name:de.name,units:ge?.units||0,revenue:ge?.revenue||0}})||[]).sort((de,ge)=>de.revenue-ge.revenue).slice(0,10).map((de,ge)=>({rank:ge+1,...de})),{data:xe,error:j}=await se.from("products").select("name, stock_quantity, reorder_level");if(j)throw j;const K=xe?.filter(de=>de.stock_quantity<=de.reorder_level).map(de=>({product:de.name,current:de.stock_quantity,reorder:de.reorder_level,urgent:de.stock_quantity<=de.reorder_level*.5}))||[],J=xe?.filter(de=>de.stock_quantity===0).map(de=>({product:de.name,lastStock:"N/A",expectedDelivery:"TBD"}))||[],{data:ue,error:be}=await se.from("sales").select(`
          total_amount,
          cashier_id,
          users!inner(username)
        `).gte("datetime",N.toISOString()).lte("datetime",D.toISOString());if(be)throw be;const Me=new Map;ue?.forEach(de=>{const ge=de.cashier_id,Ne=de.users?.username||"Unknown",A=Me.get(ge)||{name:Ne,revenue:0,transactions:0};Me.set(ge,{name:Ne,revenue:A.revenue+(de.total_amount||0),transactions:A.transactions+1})});const Ee=Array.from(Me.values()).map(de=>({name:de.name,revenue:de.revenue,transactions:de.transactions,avgTransaction:de.transactions>0?de.revenue/de.transactions:0,hours:40,accuracy:99})),{data:Je,error:We}=await se.from("side_business_sales").select(`
          total_amount,
          quantity,
          side_business_items!inner(
            name,
            side_businesses!inner(name)
          )
        `).gte("date_time",N.toISOString()).lte("date_time",D.toISOString());We&&console.error("Error fetching side business data:",We);const Ce=new Map;Je&&Je.forEach(de=>{const ge=de.side_business_items.side_businesses.name,Ne=de.side_business_items.name;Ce.has(ge)||Ce.set(ge,{name:ge,revenue:0,transactions:0,items:new Map});const A=Ce.get(ge);A.revenue+=de.total_amount,A.transactions+=1,A.items.has(Ne)||A.items.set(Ne,{name:Ne,units:0,revenue:0});const ee=A.items.get(Ne);ee.units+=de.quantity,ee.revenue+=de.total_amount});const ze=Array.from(Ce.values()).map(de=>({name:de.name,revenue:de.revenue,transactions:de.transactions,avgTransaction:de.transactions>0?de.revenue/de.transactions:0,topItems:Array.from(de.items.values()).sort((ge,Ne)=>Ne.revenue-ge.revenue).slice(0,3)}));g({kpis:{totalSales:I,transactions:Y,avgTransaction:le,discounts:Z},categories:ne,topProducts:oe,leastSoldProducts:he,lowStock:K,outOfStock:J,staff:Ee,sideBusinesses:ze})}catch(T){console.error("Error fetching report data:",T)}finally{x(!1)}};v.useEffect(()=>{l&&E()},[l,o,u]);const k=()=>{const T=window.open("","_blank"),N=document.getElementById("sales-report-content").innerHTML;T.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>LandM Store Sales Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
            th { background-color: #f5f5f5; }
            .urgent { color: red; font-weight: bold; }
            .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0; }
            .kpi-card { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
            h1, h2, h3 { color: #333; }
            .print-only { display: block; }
          </style>
        </head>
        <body>
          ${N}
          <script>window.print();<\/script>
        </body>
      </html>
    `)};return l?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"900px",width:"95%",maxHeight:"80vh",overflowY:"auto",color:"#3e3f29"},children:[m&&n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[n.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{fontSize:"24px",marginBottom:"20px"}}),n.jsx("p",{children:"Loading report data..."})]}),!m&&!p&&n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"20px",color:"#dc3545"}}),n.jsx("p",{children:"Unable to load report data. Please try again."}),n.jsx("button",{onClick:r,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"8px",marginTop:"20px",cursor:"pointer"},children:"Close"})]}),!m&&p&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[n.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[n.jsx("i",{className:"fa-solid fa-chart-line",style:{marginRight:"10px",color:"#7d8d86"}}),"Sales Reports"]}),n.jsx("button",{onClick:r,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:T=>{T.currentTarget.style.background="#7d8d86",T.currentTarget.style.color="#ffffff",T.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:T=>{T.currentTarget.style.background="none",T.currentTarget.style.color="#3e3f29",T.currentTarget.style.transform="rotate(0deg)"},children:"×"})]}),n.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"30px",flexWrap:"wrap",alignItems:"center"},children:[n.jsxs("select",{style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:o,onChange:T=>d(T.target.value),children:[n.jsx("option",{value:"weekly",children:"Weekly Report"}),n.jsx("option",{value:"monthly",children:"Monthly Report"})]}),n.jsx("input",{type:"week",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:u,onChange:T=>h(T.target.value)}),n.jsxs("button",{onClick:E,disabled:m,style:{background:m?"#cccccc":"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:m?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:T=>{m||(T.currentTarget.style.background="#3e3f29",T.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:T=>{m||(T.currentTarget.style.background="#7d8d86",T.currentTarget.style.transform="translateY(0)")},children:[n.jsx("i",{className:`fa-solid ${m?"fa-spinner fa-spin":"fa-refresh"}`}),m?"Loading...":"Refresh Data"]}),n.jsxs("button",{onClick:k,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:T=>{T.currentTarget.style.background="#3e3f29",T.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:T=>{T.currentTarget.style.background="#7d8d86",T.currentTarget.style.transform="translateY(0)"},children:[n.jsx("i",{className:"fa-solid fa-print"}),"Print Report"]})]}),n.jsxs("div",{id:"sales-report-content",style:{color:"#3e3f29"},children:[n.jsxs("div",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",paddingBottom:"20px",marginBottom:"30px"},children:[n.jsxs("h1",{style:{color:"#3e3f29",fontSize:"28px",fontWeight:"700",marginBottom:"10px"},children:[n.jsx("i",{className:"fa-solid fa-file-invoice",style:{marginRight:"10px"}}),"LandM Store Sales Report"]}),n.jsx("p",{style:{color:"#7d8d86",fontSize:"16px"},children:"Reporting Period: Week 37: 9-15 September 2025"})]}),n.jsxs("section",{style:{marginBottom:"40px"},children:[n.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("i",{className:"fa-solid fa-chart-bar",style:{marginRight:"10px"}}),"1. Overview (KPIs)"]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[n.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Sales"}),n.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:S(p.kpis.totalSales)})]}),n.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Transactions"}),n.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:p.kpis.transactions.toLocaleString()})]}),n.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Avg Transaction"}),n.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:S(p.kpis.avgTransaction)})]}),n.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Discounts"}),n.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:S(p.kpis.discounts)})]})]})]}),n.jsxs("section",{style:{marginBottom:"40px"},children:[n.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("i",{className:"fa-solid fa-shopping-cart",style:{marginRight:"10px"}}),"2. Sales Breakdown"]}),n.jsxs("div",{style:{marginBottom:"30px"},children:[n.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Sales by Category"}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Category"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"% of Total"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"})]})}),n.jsx("tbody",{children:p.categories.map((T,N)=>n.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.name}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:S(T.revenue)}),n.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[T.percentage,"%"]}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.units})]},N))})]})})]}),n.jsxs("div",{style:{marginBottom:"30px"},children:[n.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Top 10 Products Sold"}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Rank"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),n.jsx("tbody",{children:p.topProducts.map(T=>n.jsxs("tr",{style:{background:T.rank%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[n.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:["#",T.rank]}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.name}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.units}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:S(T.revenue)})]},T.rank))})]})})]}),n.jsxs("div",{style:{marginBottom:"30px"},children:[n.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Least Sold Products"}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),n.jsx("tbody",{children:p.leastSoldProducts.map((T,N)=>n.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.name}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.units}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:S(T.revenue)})]},T.rank))})]})})]})]}),n.jsxs("section",{style:{marginBottom:"40px"},children:[n.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("i",{className:"fa-solid fa-warehouse",style:{marginRight:"10px"}}),"3. Inventory Alerts"]}),n.jsxs("div",{style:{marginBottom:"30px"},children:[n.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc3545"}}),"Low Stock Products"]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Current Stock"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Reorder Level"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Status"})]})}),n.jsx("tbody",{children:p.lowStock.map((T,N)=>n.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.product}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.current}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.reorder}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29"},children:T.urgent&&n.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:"URGENT"})})]},N))})]})})]}),p.outOfStock.length>0&&n.jsxs("div",{style:{marginBottom:"30px"},children:[n.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-box",style:{color:"#dc3545"}}),"Out of Stock Products"]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Last Stock Date"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Expected Delivery"})]})}),n.jsx("tbody",{children:p.outOfStock.map((T,N)=>n.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.product}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:T.lastStock}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:T.expectedDelivery})]},N))})]})})]})]}),n.jsxs("section",{style:{marginBottom:"40px"},children:[n.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("i",{className:"fa-solid fa-users",style:{marginRight:"10px"}}),"4. Staff Performance"]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Cashier"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue Handled"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Hours"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Accuracy"})]})}),n.jsx("tbody",{children:p.staff.map((T,N)=>n.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:T.name}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:S(T.revenue)}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.transactions}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:S(T.avgTransaction)}),n.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[T.hours,"h"]}),n.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[T.accuracy,"%"]})]},N))})]})})]}),n.jsxs("section",{style:{marginBottom:"40px"},children:[n.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("i",{className:"fa-solid fa-store",style:{marginRight:"10px"}}),"5. Side Business Performance"]}),p.sideBusinesses.length>0?n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Business Name"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),n.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Top Items"})]})}),n.jsx("tbody",{children:p.sideBusinesses.map((T,N)=>n.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:T.name}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:S(T.revenue)}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:T.transactions}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:S(T.avgTransaction)}),n.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:T.topItems.map((D,P)=>n.jsxs("div",{style:{fontSize:"12px",marginBottom:"2px",color:"#7d8d86"},children:[D.name,": ",D.units," units (",S(D.revenue),")"]},P))})]},N))})]})}):n.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#7d8d86",background:"rgba(125, 141, 134, 0.05)",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"24px",marginBottom:"10px",display:"block"}}),"No side business sales data found for this period."]})]}),n.jsxs("section",{style:{borderTop:"2px solid rgba(125, 141, 134, 0.3)",paddingTop:"20px",marginTop:"40px"},children:[n.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:[n.jsx("i",{className:"fa-solid fa-file-text",style:{marginRight:"10px"}}),"6. Report Footer"]}),n.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[n.jsxs("div",{children:[n.jsx("h3",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"10px"},children:"LandM Store"}),n.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Unit 2 Glenmore Park, Dundalk, Co. Louth"}),n.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Phone: 087 797 0412"}),n.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"VAT Number: IE1234567A"})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[n.jsx("strong",{children:"Reporting Period:"})," Week 37: 9-15 September 2025"]}),n.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[n.jsx("strong",{children:"Generated on:"})," ",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),n.jsx("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:n.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",fontStyle:"italic",margin:0},children:"This report was automatically generated by the LandM Store POS System. For questions or clarifications, contact the store manager."})})]})]})]})]})]})}):null}const Q2=({isOpen:l,onClose:r})=>{const{user:i}=Xn(),[o,d]=v.useState(""),[u,h]=v.useState(""),[p,g]=v.useState(""),[m,x]=v.useState(!1),[S,E]=v.useState(null),[k,T]=v.useState([]),[N,D]=v.useState(!1),[P,R]=v.useState(!1),[I,Z]=v.useState(!1),[Y,le]=v.useState({title:"",username:"",password:"",website:""}),[fe,Se]=v.useState(new Set),[ye,ne]=v.useState(null),[X,W]=v.useState(!1),[L,oe]=v.useState(!1),[pe,O]=v.useState(""),[Q,he]=v.useState(""),[xe,j]=v.useState(!1);v.useEffect(()=>{l&&(d(""),h(""),g(""),x(!1),E(null),T([]),D(!1),R(!1),Z(!1),Se(new Set),ne(null),W(!1),oe(!1),O(""),he(""),j(!1),le({title:"",username:"",password:"",website:""}))},[l]);const K=A=>{o.length<4&&(d(ee=>ee+A),h(""),g(""))},J=()=>{d(""),h(""),g("")},ue=async A=>{if(i)try{const ee=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(A)),Le=Array.from(new Uint8Array(ee)).map(ct=>ct.toString(16).padStart(2,"0")).join(""),{data:qe,error:mt}=await se.from("vault").insert([{owner_id:i.user_id,pin_hash:Le}]).select();if(mt)throw mt;E(qe[0].vault_id),h("✓ Vault created successfully!"),g("success"),x(!0)}catch(ee){console.error("Error creating vault:",ee),h("✗ Failed to create vault. Try again."),g("error")}},be=async A=>{if(i)try{const{data:ee,error:Le}=await se.from("vault").select("vault_id, pin_hash").eq("owner_id",i.user_id).single();if(Le){if(Le.code==="PGRST116"){R(!0),h("Creating your vault..."),g("success"),await ue(A);return}throw Le}const qe=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(A)),mt=Array.from(new Uint8Array(qe)).map(ct=>ct.toString(16).padStart(2,"0")).join("");ee.pin_hash===mt?(E(ee.vault_id),h("✓ Access Granted! Vault Unlocked"),g("success"),x(!0),await Me(ee.vault_id)):(h("✗ Incorrect PIN. Try again."),g("error"),setTimeout(()=>J(),1e3))}catch(ee){console.error("Error verifying PIN:",ee),h("✗ Failed to access vault. Try again."),g("error")}},Me=async A=>{try{const{data:ee,error:Le}=await se.from("vault_entries").select("entry_id, label, email, password_enc, link, created_at").eq("vault_id",A).order("created_at",{ascending:!1});if(Le)throw Le;console.log("Raw data from database:",ee),ee.length>0&&(console.log("First entry password_enc:",ee[0].password_enc),console.log("Type of password_enc:",typeof ee[0].password_enc));const qe=ee.map(mt=>({...mt,password:mt.password_enc||"No password"}));T(qe),D(!0)}catch(ee){console.error("Error fetching vault entries:",ee)}},Ee=async()=>{if(!S||!Y.title||!Y.password){h("✗ Title and password are required"),g("error");return}try{const{data:A,error:ee}=await se.from("vault_entries").insert([{vault_id:S,label:Y.title,email:Y.username,password_enc:Y.password,link:Y.website}]).select();if(ee)throw ee;await Me(S),le({title:"",username:"",password:"",website:""}),Z(!1),h("✓ Password saved successfully!"),g("success")}catch(A){console.error("Error saving entry:",A),h("✗ Failed to save password. Try again."),g("error")}},Je=A=>{Se(ee=>{const Le=new Set(ee);return Le.has(A)?Le.delete(A):Le.add(A),Le})},We=async(A,ee)=>{try{await navigator.clipboard.writeText(A),h(`✓ ${ee} copied to clipboard!`),g("success"),setTimeout(()=>{h(""),g("")},2e3)}catch{h(`✗ Failed to copy ${ee}`),g("error"),setTimeout(()=>{h(""),g("")},2e3)}},Ce=A=>{ne(A)},ze=async A=>{if(S)try{const{error:ee}=await se.from("vault_entries").delete().eq("entry_id",A).eq("vault_id",S);if(ee)throw ee;await Me(S),ne(null),h("✓ Password deleted successfully!"),g("success"),setTimeout(()=>{h(""),g("")},2e3)}catch(ee){console.error("Error deleting entry:",ee),h("✗ Failed to delete password. Try again."),g("error"),setTimeout(()=>{h(""),g("")},2e3)}},de=()=>{o.length===4&&be(o)},ge=async()=>{if(pe.length<4){h("✗ PIN must be at least 4 digits"),g("error");return}if(pe!==Q){h("✗ PINs do not match"),g("error");return}if(!S){h("✗ No vault found"),g("error");return}j(!0),h("Updating vault PIN..."),g("success");try{const A=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(pe)),ee=Array.from(new Uint8Array(A)).map(qe=>qe.toString(16).padStart(2,"0")).join(""),{error:Le}=await se.from("vault").update({pin_hash:ee}).eq("vault_id",S);if(Le)throw Le;h("✓ Vault PIN updated successfully!"),g("success"),O(""),he(""),oe(!1)}catch(A){console.error("Error updating vault PIN:",A),h("✗ Failed to update vault PIN"),g("error")}finally{j(!1)}},Ne=A=>{const ee=A.key;ee>="0"&&ee<="9"?K(ee):ee==="Backspace"||ee==="Delete"?o.length>0&&d(Le=>Le.slice(0,-1)):ee==="Enter"?de():ee==="Escape"&&r()};return l?n.jsxs(n.Fragment,{children:[!m&&n.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"400px",width:"90%",textAlign:"center"},onKeyDown:Ne,tabIndex:-1,children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",border:"1px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29"},children:[n.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px"},children:P?"Creating your vault...":"Enter your 4-digit PIN"}),n.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"30px"},children:[0,1,2,3].map(A=>n.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"2px solid rgba(125, 141, 134, 0.3)",background:A<o.length?"linear-gradient(135deg, #7d8d86, #3e3f29)":"transparent",borderColor:A<o.length?"#3e3f29":"rgba(125, 141, 134, 0.3)",transform:A<o.length?"scale(1.1)":"scale(1)",transition:"all 0.3s ease"}},A))}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"15px",marginBottom:"20px"},children:[[1,2,3,4,5,6,7,8,9].map(A=>n.jsx("button",{onClick:()=>K(A.toString()),style:{width:"70px",height:"70px",border:"none",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)"},onMouseEnter:ee=>{ee.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",ee.currentTarget.style.color="#f1f0e4",ee.currentTarget.style.transform="translateY(-2px)",ee.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:ee=>{ee.currentTarget.style.background="#ffffff",ee.currentTarget.style.color="#3e3f29",ee.currentTarget.style.transform="translateY(0)",ee.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:A},A)),n.jsx("button",{onClick:()=>K("0"),style:{width:"70px",height:"70px",border:"none",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)",gridColumn:"2"},onMouseEnter:A=>{A.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",A.currentTarget.style.color="#f1f0e4",A.currentTarget.style.transform="translateY(-2px)",A.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:A=>{A.currentTarget.style.background="#ffffff",A.currentTarget.style.color="#3e3f29",A.currentTarget.style.transform="translateY(0)",A.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:"0"})]}),n.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[n.jsx("button",{onClick:J,style:{padding:"12px 24px",border:"none",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",background:"transparent",color:"#7d8d86",border:"2px solid rgba(125, 141, 134, 0.3)"},onMouseEnter:A=>{A.currentTarget.style.background="rgba(125, 141, 134, 0.1)",A.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:A=>{A.currentTarget.style.background="transparent",A.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Clear"}),n.jsx("button",{onClick:de,disabled:o.length!==4,style:{padding:"12px 24px",border:"none",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:o.length===4?"pointer":"not-allowed",transition:"all 0.3s ease",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#f1f0e4",border:"2px solid transparent",opacity:o.length===4?1:.5},onMouseEnter:A=>{o.length===4&&(A.currentTarget.style.transform="translateY(-2px)",A.currentTarget.style.boxShadow="0 8px 16px rgba(62, 63, 41, 0.2)")},onMouseLeave:A=>{A.currentTarget.style.transform="translateY(0)",A.currentTarget.style.boxShadow="none"},children:P?"Creating...":"Unlock"})]}),u&&n.jsx("div",{style:{marginTop:"20px",padding:"12px",borderRadius:"10px",fontSize:"14px",fontWeight:"500",background:p==="success"?"rgba(125, 141, 134, 0.1)":"rgba(220, 53, 69, 0.1)",color:p==="success"?"#3e3f29":"#dc3545",border:p==="success"?"1px solid rgba(125, 141, 134, 0.3)":"1px solid rgba(220, 53, 69, 0.3)"},children:u})]})}),m&&n.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"900px",width:"95%",maxHeight:"70vh",minHeight:"500px",overflowY:"auto",textAlign:"center"},onKeyDown:Ne,tabIndex:-1,children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",color:"#3e3f29"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[n.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[n.jsx("i",{className:"fa-solid fa-vault",style:{marginRight:"10px",color:"#7d8d86"}}),"Password Vault"]}),n.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[n.jsxs("button",{onClick:()=>oe(!0),style:{background:"#dc3545",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:A=>{A.currentTarget.style.background="#c82333",A.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:A=>{A.currentTarget.style.background="#dc3545",A.currentTarget.style.transform="translateY(0)"},children:[n.jsx("i",{className:"fa-solid fa-key"}),"Manage PIN"]}),n.jsxs("button",{onClick:()=>W(!0),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:A=>{A.currentTarget.style.background="#3e3f29",A.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:A=>{A.currentTarget.style.background="#7d8d86",A.currentTarget.style.transform="translateY(0)"},children:[n.jsx("i",{className:"fa-solid fa-chart-line"}),"Reports"]}),n.jsx("button",{onClick:r,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:A=>{A.currentTarget.style.background="#7d8d86",A.currentTarget.style.color="#ffffff",A.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:A=>{A.currentTarget.style.background="none",A.currentTarget.style.color="#3e3f29",A.currentTarget.style.transform="rotate(0deg)"},children:"×"})]})]}),n.jsx("div",{style:{marginBottom:"20px"},children:n.jsxs("button",{onClick:()=>Z(!I),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"25px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},onMouseEnter:A=>{A.currentTarget.style.background="#3e3f29",A.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:A=>{A.currentTarget.style.background="#7d8d86",A.currentTarget.style.transform="translateY(0)"},children:[n.jsx("i",{className:"fa-solid fa-plus"}),I?"Cancel":"Add Password"]})}),I&&n.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",marginBottom:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",textAlign:"center"},children:"Add New Password"}),n.jsxs("div",{style:{display:"grid",gap:"15px"},children:[n.jsx("input",{type:"text",placeholder:"Title (e.g., Facebook, Twitter)",value:Y.title,onChange:A=>le({...Y,title:A.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:A=>{A.target.style.borderColor="#7d8d86",A.target.style.background="#ffffff"},onBlur:A=>{A.target.style.borderColor="rgba(125, 141, 134, 0.3)",A.target.style.background="#ffffff"}}),n.jsx("input",{type:"text",placeholder:"Username/Email",value:Y.username,onChange:A=>le({...Y,username:A.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:A=>{A.target.style.borderColor="#7d8d86",A.target.style.background="#ffffff"},onBlur:A=>{A.target.style.borderColor="rgba(125, 141, 134, 0.3)",A.target.style.background="#ffffff"}}),n.jsx("input",{type:"password",placeholder:"Password",value:Y.password,onChange:A=>le({...Y,password:A.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:A=>{A.target.style.borderColor="#7d8d86",A.target.style.background="#ffffff"},onBlur:A=>{A.target.style.borderColor="rgba(125, 141, 134, 0.3)",A.target.style.background="#ffffff"}}),n.jsx("input",{type:"url",placeholder:"Website (optional)",value:Y.website,onChange:A=>le({...Y,website:A.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:A=>{A.target.style.borderColor="#7d8d86",A.target.style.background="#ffffff"},onBlur:A=>{A.target.style.borderColor="rgba(125, 141, 134, 0.3)",A.target.style.background="#ffffff"}}),n.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[n.jsx("button",{onClick:()=>Z(!1),style:{padding:"10px 20px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"20px",background:"transparent",color:"#7d8d86",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:A=>{A.currentTarget.style.background="rgba(125, 141, 134, 0.1)",A.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:A=>{A.currentTarget.style.background="transparent",A.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),n.jsx("button",{onClick:Ee,disabled:!Y.title||!Y.password,style:{padding:"10px 20px",border:"none",borderRadius:"20px",background:Y.title&&Y.password?"#7d8d86":"rgba(125, 141, 134, 0.3)",color:"#f1f0e4",fontSize:"14px",fontWeight:"600",cursor:Y.title&&Y.password?"pointer":"not-allowed",transition:"all 0.3s ease"},onMouseEnter:A=>{Y.title&&Y.password&&(A.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:A=>{A.currentTarget.style.transform="translateY(0)"},children:"Save Password"})]})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:n.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[n.jsxs("div",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("i",{className:"fa-solid fa-shield-halved"}),"Saved Passwords"]}),k.length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:k.map(A=>n.jsxs("div",{style:{background:"#ffffff",borderRadius:"10px",padding:"15px",border:"1px solid rgba(125, 141, 134, 0.2)",transition:"all 0.3s ease",cursor:"pointer",position:"relative"},onMouseEnter:ee=>{ee.currentTarget.style.background="rgba(125, 141, 134, 0.1)",ee.currentTarget.style.borderColor="#7d8d86",ee.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:ee=>{ee.currentTarget.style.background="#ffffff",ee.currentTarget.style.borderColor="rgba(125, 141, 134, 0.2)",ee.currentTarget.style.transform="translateY(0)"},children:[n.jsx("button",{onClick:ee=>{ee.stopPropagation(),Ce(A.entry_id)},style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",color:"#dc3545",fontSize:"16px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.3s ease",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:ee=>{ee.currentTarget.style.background="rgba(220, 53, 69, 0.1)",ee.currentTarget.style.transform="scale(1.1)"},onMouseLeave:ee=>{ee.currentTarget.style.background="none",ee.currentTarget.style.transform="scale(1)"},children:"×"}),n.jsx("div",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"5px",paddingRight:"30px"},children:A.label}),n.jsx("div",{style:{color:"#7d8d86",fontSize:"14px",marginBottom:"8px"},children:A.email}),n.jsx("div",{style:{color:"#3e3f29",fontSize:"14px",fontFamily:"monospace",marginBottom:"8px",padding:"4px 8px",background:"rgba(125, 141, 134, 0.1)",borderRadius:"4px",wordBreak:"break-all"},children:fe.has(A.entry_id)?A.password:"••••••••"}),n.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[n.jsxs("button",{onClick:()=>We(A.password,"Password"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:ee=>{ee.currentTarget.style.background="#3e3f29",ee.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:ee=>{ee.currentTarget.style.background="#7d8d86",ee.currentTarget.style.transform="translateY(0)"},children:[n.jsx("i",{className:"fa-solid fa-copy",style:{marginRight:"4px"}}),"Copy"]}),n.jsxs("button",{onClick:()=>We(A.email,"Email"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:ee=>{ee.currentTarget.style.background="#3e3f29",ee.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:ee=>{ee.currentTarget.style.background="#7d8d86",ee.currentTarget.style.transform="translateY(0)"},children:[n.jsx("i",{className:"fa-solid fa-envelope",style:{marginRight:"4px"}}),"Copy Email"]}),n.jsxs("button",{onClick:()=>Je(A.entry_id),style:{background:fe.has(A.entry_id)?"#3e3f29":"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:ee=>{ee.currentTarget.style.background=fe.has(A.entry_id)?"#7d8d86":"#3e3f29",ee.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:ee=>{ee.currentTarget.style.background=fe.has(A.entry_id)?"#3e3f29":"#7d8d86",ee.currentTarget.style.transform="translateY(0)"},children:[n.jsx("i",{className:`fa-solid ${fe.has(A.entry_id)?"fa-eye-slash":"fa-eye"}`,style:{marginRight:"4px"}}),fe.has(A.entry_id)?"Hide":"Show"]})]})]},A.entry_id))}):n.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#bca88d",fontSize:"14px"},children:[n.jsx("i",{className:"fa-solid fa-folder-open",style:{fontSize:"24px",marginBottom:"8px",display:"block"}}),"No passwords saved yet"]})]})})]})}),ye&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"400px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[n.jsx("h3",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"15px"},children:"Delete Password?"}),n.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"25px",lineHeight:"1.5"},children:"Are you sure you want to delete this password? This action cannot be undone."}),n.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[n.jsx("button",{onClick:()=>ne(null),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:A=>{A.currentTarget.style.background="rgba(125, 141, 134, 0.1)",A.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:A=>{A.currentTarget.style.background="transparent",A.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),n.jsx("button",{onClick:()=>ze(ye),style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:A=>{A.currentTarget.style.background="#c82333",A.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:A=>{A.currentTarget.style.background="#dc3545",A.currentTarget.style.transform="translateY(0)"},children:"Delete"})]})]})}),L&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"500px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[n.jsxs("h3",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[n.jsx("i",{className:"fa-solid fa-key",style:{color:"#dc3545"}}),"Manage System PIN"]}),n.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px",lineHeight:"1.5"},children:"Change the system access PIN. This PIN is required to access the POS system."}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",marginBottom:"30px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"New PIN (minimum 4 digits)"}),n.jsx("input",{type:"password",value:pe,onChange:A=>O(A.target.value),placeholder:"Enter new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:A=>{A.target.style.borderColor="#dc3545"},onBlur:A=>{A.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"Confirm PIN"}),n.jsx("input",{type:"password",value:Q,onChange:A=>he(A.target.value),placeholder:"Confirm new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:A=>{A.target.style.borderColor="#dc3545"},onBlur:A=>{A.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]})]}),n.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[n.jsx("button",{onClick:()=>oe(!1),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:A=>{A.currentTarget.style.background="rgba(125, 141, 134, 0.1)",A.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:A=>{A.currentTarget.style.background="transparent",A.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),n.jsx("button",{onClick:ge,disabled:xe||pe.length<4||pe!==Q,style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:xe||pe.length<4||pe!==Q?"rgba(220, 53, 69, 0.3)":"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:xe||pe.length<4||pe!==Q?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:A=>{!xe&&pe.length>=4&&pe===Q&&(A.currentTarget.style.background="#c82333",A.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:A=>{A.currentTarget.style.background=xe||pe.length<4||pe!==Q?"rgba(220, 53, 69, 0.3)":"#dc3545",A.currentTarget.style.transform="translateY(0)"},children:xe?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-save"}),"Update PIN"]})})]})]})}),n.jsx(K2,{isOpen:X,onClose:()=>W(!1),vaultEntries:k})]}):null},X2=()=>{const[l,r]=v.useState([]),[i,o]=v.useState(!1),[d,u]=v.useState(!1),[h,p]=v.useState(null),[g,m]=v.useState({username:"",password:"",role:"Cashier",icon:"ryu"}),x=[{name:"lily",label:"Lily"},{name:"chunli",label:"Chun-Li"},{name:"ken",label:"Ken"},{name:"kimberly",label:"Kimberly"},{name:"mai",label:"Mai"},{name:"manon",label:"Manon"},{name:"rashid",label:"Rashid"},{name:"ryu",label:"Ryu"},{name:"zangief",label:"Zangief"}],[S,E]=v.useState(!1),[k,T]=v.useState(""),[N,D]=v.useState(!0),[P,R]=v.useState(!1);v.useEffect(()=>{I()},[]);const I=async()=>{try{D(!0);const{data:ne,error:X}=await se.from("users").select("*").order("user_id",{ascending:!1});if(X){console.error("Error fetching users:",X),T("Failed to fetch users");return}r(ne||[])}catch(ne){console.error("Error fetching users:",ne),T("Failed to fetch users")}finally{D(!1)}},Z=async ne=>{ne.preventDefault(),E(!0),T("");try{const X=$d(g.password),{error:W}=await se.from("users").insert([{username:g.username,password_hash:X,role:g.role,active:!0,icon:g.icon}]).select();if(W)throw console.error("Error adding user:",W),W;m({username:"",password:"",role:"Cashier",icon:"ryu"}),o(!1),I()}catch(X){console.error("Error adding user:",X),T(`Failed to add user: ${X instanceof Error?X.message:"Unknown error"}`)}finally{E(!1)}},Y=async ne=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:X}=await se.from("users").delete().eq("user_id",ne);if(X)throw console.error("Error deleting user:",X),X;I()}catch(X){console.error("Error deleting user:",X),T(`Failed to delete user: ${X instanceof Error?X.message:"Unknown error"}`)}},le=async(ne,X)=>{try{const{error:W}=await se.from("users").update({active:!X}).eq("user_id",ne);if(W)throw console.error("Error updating user status:",W),W;I()}catch(W){console.error("Error updating user status:",W),T(`Failed to update user: ${W instanceof Error?W.message:"Unknown error"}`)}},fe=ne=>{p(ne),m({username:ne.username,password:"",role:ne.role,icon:ne.icon||"ryu"}),u(!0)},Se=async ne=>{if(ne.preventDefault(),!!h){E(!0),T("");try{const X={username:g.username,role:g.role,icon:g.icon};g.password.trim()&&(X.password_hash=$d(g.password));const{error:W}=await se.from("users").update(X).eq("user_id",h.user_id);if(W)throw console.error("Error updating user:",W),W;m({username:"",password:"",role:"Cashier",icon:"ryu"}),p(null),u(!1),I()}catch(X){console.error("Error updating user:",X),T(`Failed to update user: ${X instanceof Error?X.message:"Unknown error"}`)}finally{E(!1)}}},ye=ne=>{switch(ne){case"Admin":return"#ef4444";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#1a1a1a"}};return N?n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#1a1a1a"},children:[n.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading users..."]}):n.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[n.jsxs("div",{children:[n.jsxs("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 8px 0"},children:[n.jsx("i",{className:"fa-solid fa-users-cog",style:{marginRight:"12px",color:"#7d8d86"}}),"User Management"]}),n.jsx("p",{style:{color:"#1a1a1a",margin:"0",fontSize:"18px"},children:"Manage system users and their permissions"})]}),n.jsxs("button",{onClick:()=>o(!0),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"18px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[n.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]})]}),k&&n.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px 16px",borderRadius:"8px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),k]}),n.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[n.jsx("div",{style:{padding:"20px 24px",borderBottom:"2px solid #d1d5db",background:"#f9fafb"},children:n.jsxs("h3",{style:{margin:"0",fontSize:"20px",fontWeight:"600",color:"#1a1a1a"},children:[n.jsx("i",{className:"fa-solid fa-list",style:{marginRight:"8px",color:"#7d8d86"}}),"All Users (",l.length,")"]})}),l.length===0?n.jsxs("div",{style:{padding:"48px 24px",textAlign:"center",color:"#1a1a1a"},children:[n.jsx("i",{className:"fa-solid fa-users",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),n.jsx("p",{style:{fontSize:"20px",margin:"0 0 8px 0"},children:"No users found"}),n.jsx("p",{style:{fontSize:"16px",margin:"0"},children:"Add your first user to get started"})]}):n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"#f9fafb"},children:[n.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User"}),n.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Icon"}),n.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Role"}),n.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Status"}),n.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User ID"}),n.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Actions"})]})}),n.jsx("tbody",{children:l.map((ne,X)=>n.jsxs("tr",{style:{borderBottom:X<l.length-1?"1px solid #f3f4f6":"none"},children:[n.jsx("td",{style:{padding:"16px 24px"},children:n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a",marginBottom:"4px",fontSize:"16px"},children:ne.username}),n.jsxs("div",{style:{fontSize:"15px",color:"#1a1a1a"},children:["ID: ",ne.user_id]})]})}),n.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:n.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden",border:"2px solid #e5e7eb"},children:ne.icon?n.jsx("img",{src:`/images/icons/${ne.icon}.png`,alt:ne.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):n.jsx("i",{className:"fa-solid fa-user",style:{fontSize:"20px",color:"#9ca3af"}})})}),n.jsx("td",{style:{padding:"16px 24px"},children:n.jsx("span",{style:{background:`${ye(ne.role)}20`,color:ye(ne.role),padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize"},children:ne.role})}),n.jsx("td",{style:{padding:"16px 24px"},children:n.jsx("span",{style:{background:ne.active?"#dcfce720":"#fef2f220",color:ne.active?"#16a34a":"#dc2626",padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:ne.active?"Active":"Inactive"})}),n.jsxs("td",{style:{padding:"16px 24px",color:"#1a1a1a",fontSize:"15px"},children:["User #",ne.user_id]}),n.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:n.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[n.jsxs("button",{onClick:()=>fe(ne),style:{background:"#e0f2fe",color:"#0c4a6e",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Edit User",children:[n.jsx("i",{className:"fa-solid fa-pen-to-square"}),"Edit"]}),n.jsxs("button",{onClick:()=>le(ne.user_id,ne.active),style:{background:ne.active?"#fef2f2":"#dcfce7",color:ne.active?"#dc2626":"#16a34a",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:ne.active?"Deactivate":"Activate",children:[n.jsx("i",{className:`fa-solid fa-${ne.active?"ban":"check"}`}),ne.active?"Deactivate":"Activate"]}),n.jsxs("button",{onClick:()=>Y(ne.user_id),style:{background:"#fef2f2",color:"#dc2626",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Delete User",children:[n.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]})]})})]},ne.user_id))})]})})]}),i&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsxs("h2",{style:{margin:"0",fontSize:"26px",fontWeight:"600",color:"#1a1a1a"},children:[n.jsx("i",{className:"fa-solid fa-user-plus",style:{marginRight:"8px",color:"#7d8d86"}}),"Add New User"]}),n.jsx("button",{onClick:()=>o(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:n.jsx("i",{className:"fa-solid fa-xmark"})})]}),n.jsxs("form",{onSubmit:Z,children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),n.jsx("input",{type:"text",value:g.username,onChange:ne=>m({...g,username:ne.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Password *"}),n.jsx("input",{type:"password",value:g.password,onChange:ne=>m({...g,password:ne.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter password"})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),n.jsxs("select",{value:g.role,onChange:ne=>m({...g,role:ne.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[n.jsx("option",{value:"cashier",children:"Cashier"}),n.jsx("option",{value:"manager",children:"Manager"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:x.map(ne=>n.jsxs("button",{type:"button",onClick:()=>m({...g,icon:ne.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:g.icon===ne.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:g.icon===ne.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:g.icon===ne.name?"scale(1.05)":"scale(1)",boxShadow:g.icon===ne.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:n.jsx("img",{src:`/images/icons/${ne.name}.png`,alt:ne.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:g.icon===ne.name?"brightness(1.1) contrast(1.1)":"none"}})}),g.icon===ne.name&&n.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:n.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},ne.name))})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[n.jsx("button",{type:"button",onClick:()=>o(!1),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),n.jsx("button",{type:"submit",disabled:S,style:{background:S?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:S?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:S?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]})})]})]})]})}),d&&h&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1a1a1a"},children:[n.jsx("i",{className:"fa-solid fa-user-pen",style:{marginRight:"8px",color:"#7d8d86"}}),"Edit User"]}),n.jsx("button",{onClick:()=>{u(!1),p(null)},style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:n.jsx("i",{className:"fa-solid fa-xmark"})})]}),n.jsxs("form",{onSubmit:Se,children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),n.jsx("input",{type:"text",value:g.username,onChange:ne=>m({...g,username:ne.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"New Password (leave blank to keep current)"}),n.jsx("input",{type:"password",value:g.password,onChange:ne=>m({...g,password:ne.target.value}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter new password (optional)"})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),n.jsxs("select",{value:g.role,onChange:ne=>m({...g,role:ne.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[n.jsx("option",{value:"Cashier",children:"Cashier"}),n.jsx("option",{value:"Manager",children:"Manager"}),n.jsx("option",{value:"Admin",children:"Admin"})]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:x.map(ne=>n.jsxs("button",{type:"button",onClick:()=>m({...g,icon:ne.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:g.icon===ne.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:g.icon===ne.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:g.icon===ne.name?"scale(1.05)":"scale(1)",boxShadow:g.icon===ne.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:n.jsx("img",{src:`/images/icons/${ne.name}.png`,alt:ne.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:g.icon===ne.name?"brightness(1.1) contrast(1.1)":"none"}})}),g.icon===ne.name&&n.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:n.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},ne.name))})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[n.jsx("button",{type:"button",onClick:()=>{u(!1),p(null)},style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),n.jsx("button",{type:"submit",disabled:S,style:{background:S?"#9ca3af":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:S?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:S?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"fa-solid fa-floppy-disk"}),"Update User"]})})]})]})]})}),n.jsx("div",{onClick:()=>R(!0),title:"Access Secure Vault - Manage sensitive operations and settings",style:{position:"fixed",bottom:"24px",right:"24px",zIndex:50,width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(125, 141, 134, 0.4)",cursor:"pointer",transition:"all 0.2s ease"},children:n.jsx("i",{className:"fa-solid fa-vault",style:{fontSize:"48px",color:"#f1f0e4"}})}),n.jsx(Q2,{isOpen:P,onClose:()=>R(!1)})]})},Z2="_container_1z7wl_2",J2="_header_1z7wl_10",eS="_title_1z7wl_16",tS="_mainContent_1z7wl_32",nS="_offlineNotice_1z7wl_39",aS="_offlineNoticeContent_1z7wl_51",sS="_dateNavigation_1z7wl_62",rS="_navButton_1z7wl_76",iS="_currentDate_1z7wl_102",oS="_controls_1z7wl_144",lS="_button_1z7wl_151",cS="_buttonPrimary_1z7wl_170",dS="_buttonSecondary_1z7wl_179",uS="_buttonDanger_1z7wl_192",fS="_notesContainer_1z7wl_202",hS="_gridBackground_1z7wl_218",pS="_gridPattern_1z7wl_224",gS="_emptyState_1z7wl_234",mS="_emptyStateContent_1z7wl_242",xS="_emptyStateIcon_1z7wl_247",yS="_emptyStateTitle_1z7wl_252",bS="_dragIndicator_1z7wl_258",vS="_footer_1z7wl_271",_S="_stickyNote_1z7wl_279",SS="_stickyNoteDragging_1z7wl_286",wS="_note_1z7wl_202",jS="_noteOverdue_1z7wl_306",kS="_noteDueToday_1z7wl_310",CS="_noteYellow_1z7wl_315",TS="_notePink_1z7wl_321",ES="_noteBlue_1z7wl_327",RS="_noteGreen_1z7wl_333",NS="_notePurple_1z7wl_339",zS="_noteOrange_1z7wl_345",DS="_noteTopStrip_1z7wl_351",AS="_noteContent_1z7wl_433",BS="_noteContentEditing_1z7wl_439",MS="_noteInput_1z7wl_445",OS="_noteDateInput_1z7wl_456",IS="_noteTextarea_1z7wl_466",LS="_noteDisplay_1z7wl_480",US="_noteTitle_1z7wl_486",PS="_noteDate_1z7wl_456",qS="_noteDateOverdue_1z7wl_499",$S="_noteDateToday_1z7wl_504",WS="_noteBody_1z7wl_509",HS="_noteCorner_1z7wl_518",FS="_noteCornerEffect_1z7wl_526",YS="_modalOverlay_1z7wl_537",GS="_modal_1z7wl_537",VS="_modalHeader_1z7wl_558",KS="_modalTitle_1z7wl_562",QS="_modalClose_1z7wl_582",XS="_modalForm_1z7wl_594",ZS="_errorMessage_1z7wl_600",JS="_errorContent_1z7wl_608",ew="_formGroup_1z7wl_617",tw="_formLabel_1z7wl_622",nw="_formInput_1z7wl_630",aw="_formTextarea_1z7wl_644",sw="_colorSelection_1z7wl_659",rw="_colorOption_1z7wl_665",iw="_colorOptionSelected_1z7wl_678",ow="_preview_1z7wl_683",lw="_previewLabel_1z7wl_687",cw="_previewNote_1z7wl_695",dw="_previewTitle_1z7wl_701",uw="_previewDate_1z7wl_708",fw="_previewBody_1z7wl_718",hw="_modalActions_1z7wl_724",pw="_modalButton_1z7wl_730",gw="_modalButtonCancel_1z7wl_744",mw="_modalButtonSubmit_1z7wl_753",xw="_modalButtonDanger_1z7wl_762",yw="_loading_1z7wl_772",bw="_loadingContent_1z7wl_780",vw="_loadingIcon_1z7wl_784",_w="_loadingText_1z7wl_790",Sw="_confirmationDialog_1z7wl_836",ww="_confirmationContent_1z7wl_847",jw="_confirmationHeader_1z7wl_856",kw="_confirmationIcon_1z7wl_862",Cw="_confirmationButton_1z7wl_893",Tw="_confirmationButtonCancel_1z7wl_903",Ew="_confirmationButtonConfirm_1z7wl_912",Rw="_calendarModal_1z7wl_922",Nw="_calendar_1z7wl_922",zw="_calendarHeader_1z7wl_948",Dw="_calendarCloseButton_1z7wl_956",Aw="_calendarTitle_1z7wl_978",Bw="_calendarNavButton_1z7wl_984",Mw="_calendarGrid_1z7wl_1002",Ow="_calendarDayHeader_1z7wl_1008",Iw="_calendarDay_1z7wl_1008",Lw="_calendarDayOtherMonth_1z7wl_1035",Uw="_calendarDayToday_1z7wl_1039",Pw="_calendarDaySelected_1z7wl_1049",qw="_calendarDayWithReminders_1z7wl_1059",$w="_calendarDayWithRemindersToday_1z7wl_1069",Ww="_calendarDayWithRemindersSelected_1z7wl_1078",Hw="_calendarReminderCount_1z7wl_1103",Fw="_lilyMascot_1z7wl_1145",Yw="_lilySpeechBubble_1z7wl_1155",Gw="_lilySpeechTail_1z7wl_1173",Vw="_lilyImage_1z7wl_1184",$={container:Z2,header:J2,title:eS,mainContent:tS,offlineNotice:nS,offlineNoticeContent:aS,dateNavigation:sS,navButton:rS,currentDate:iS,controls:oS,button:lS,buttonPrimary:cS,buttonSecondary:dS,buttonDanger:uS,notesContainer:fS,gridBackground:hS,gridPattern:pS,emptyState:gS,emptyStateContent:mS,emptyStateIcon:xS,emptyStateTitle:yS,dragIndicator:bS,footer:vS,stickyNote:_S,stickyNoteDragging:SS,note:wS,noteOverdue:jS,noteDueToday:kS,noteYellow:CS,notePink:TS,noteBlue:ES,noteGreen:RS,notePurple:NS,noteOrange:zS,noteTopStrip:DS,noteContent:AS,noteContentEditing:BS,noteInput:MS,noteDateInput:OS,noteTextarea:IS,noteDisplay:LS,noteTitle:US,noteDate:PS,noteDateOverdue:qS,noteDateToday:$S,noteBody:WS,noteCorner:HS,noteCornerEffect:FS,modalOverlay:YS,modal:GS,modalHeader:VS,modalTitle:KS,modalClose:QS,modalForm:XS,errorMessage:ZS,errorContent:JS,formGroup:ew,formLabel:tw,formInput:nw,formTextarea:aw,colorSelection:sw,colorOption:rw,colorOptionSelected:iw,preview:ow,previewLabel:lw,previewNote:cw,previewTitle:dw,previewDate:uw,previewBody:fw,modalActions:hw,modalButton:pw,modalButtonCancel:gw,modalButtonSubmit:mw,modalButtonDanger:xw,loading:yw,loadingContent:bw,loadingIcon:vw,loadingText:_w,confirmationDialog:Sw,confirmationContent:ww,confirmationHeader:jw,confirmationIcon:kw,confirmationButton:Cw,confirmationButtonCancel:Tw,confirmationButtonConfirm:Ew,calendarModal:Rw,calendar:Nw,calendarHeader:zw,calendarCloseButton:Dw,calendarTitle:Aw,calendarNavButton:Bw,calendarGrid:Mw,calendarDayHeader:Ow,calendarDay:Iw,calendarDayOtherMonth:Lw,calendarDayToday:Uw,calendarDaySelected:Pw,calendarDayWithReminders:qw,calendarDayWithRemindersToday:$w,calendarDayWithRemindersSelected:Ww,calendarReminderCount:Hw,lilyMascot:Fw,lilySpeechBubble:Yw,lilySpeechTail:Gw,lilyImage:Vw};function Kw(){const{user:l,currentUserId:r}=Xn(),[i,o]=v.useState([]),[d,u]=v.useState(!0),[h,p]=v.useState(null),[g,m]=v.useState({x:0,y:0}),[x,S]=v.useState(null),[E,k]=v.useState(!1),[T,N]=v.useState(!1),[D,P]=v.useState(!1),[R,I]=v.useState(null),[Z,Y]=v.useState({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),[le,fe]=v.useState({title:"",body:"",remind_date:"",color:"yellow"}),[Se,ye]=v.useState(new Date),[ne,X]=v.useState(!1),[W,L]=v.useState(!1),[oe,pe]=v.useState(new Date),[O,Q]=v.useState(!1),[he,xe]=v.useState("Hi! I'm Lily, your reminder assistant! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),[j,K]=v.useState(()=>{const q=localStorage.getItem("lilyEnabled");return q!==null?JSON.parse(q):!0}),J={yellow:{bg:$.noteYellow,border:$.noteYellow,shadow:$.noteYellow},pink:{bg:$.notePink,border:$.notePink,shadow:$.notePink},blue:{bg:$.noteBlue,border:$.noteBlue,shadow:$.noteBlue},green:{bg:$.noteGreen,border:$.noteGreen,shadow:$.noteGreen},purple:{bg:$.notePurple,border:$.notePurple,shadow:$.notePurple},orange:{bg:$.noteOrange,border:$.noteOrange,shadow:$.noteOrange}},ue=()=>{const q=new Date(Se);q.setDate(q.getDate()-1),ye(q)},be=()=>{const q=new Date(Se);q.setDate(q.getDate()+1),ye(q)},Me=q=>{const me=new Date(oe);q==="prev"?me.setMonth(me.getMonth()-1):me.setMonth(me.getMonth()+1),pe(me)},Ee=q=>{ye(q),L(!1)},Je=()=>{const q=new Set;return i.forEach(me=>{const je=new Date(me.remind_date);q.add(je.toDateString())}),q},We=()=>{const q={};return i.forEach(me=>{const Fe=new Date(me.remind_date).toDateString();q[Fe]=(q[Fe]||0)+1}),q},Ce=()=>{const q=oe.getFullYear(),me=oe.getMonth(),je=new Date(q,me,1),Fe=new Date(je);Fe.setDate(Fe.getDate()-je.getDay());const st=[],Et=Je(),Dt=We(),jt=new Date,$t=new Date(Se);for(let _t=0;_t<42;_t++){const y=new Date(Fe);y.setDate(Fe.getDate()+_t);const M=y.getMonth()===me,te=y.toDateString()===jt.toDateString(),ke=y.toDateString()===$t.toDateString(),Oe=Et.has(y.toDateString()),Be=Dt[y.toDateString()]||0;st.push({date:y,isCurrentMonth:M,isToday:te,isSelected:ke,hasReminders:Oe,reminderCount:Be})}return st},ze=()=>{const q=!j;K(q),localStorage.setItem("lilyEnabled",JSON.stringify(q)),q&&(xe("Hi! I'm back! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),Q(!0))},de=()=>j?n.jsxs("div",{className:$.lilyMascot,children:[O&&n.jsxs("div",{className:$.lilySpeechBubble,children:[n.jsx("p",{children:he}),n.jsx("div",{className:$.lilySpeechTail})]}),n.jsx("div",{className:$.lilyImage,onClick:()=>{Q(!O)},onDoubleClick:()=>{ze()},children:n.jsx("img",{src:l?.icon?`/retailpos/images/icons/${l.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:l?.icon||"Lily"})})]}):null,ge=()=>{const q=new Date(Se);return q.setHours(0,0,0,0),i.filter(me=>{const je=new Date(me.remind_date);return je.setHours(0,0,0,0),je.getTime()===q.getTime()})},Ne=async()=>{if(o([]),X(!1),!E)try{const{error:q}=await se.from("reminders").delete().neq("reminder_id",0);q&&console.error("Error deleting all reminders from database:",q)}catch(q){console.error("Error deleting all reminders:",q)}},A=async()=>{try{u(!0);const{data:q,error:me}=await se.from("reminders").select("*").order("remind_date",{ascending:!0});if(me)throw console.error("Database fetch error:",me),me;const je=q?.map((Fe,st)=>({...Fe,x:Math.random()*400+50,y:Math.random()*300+50,rotation:(Math.random()-.5)*6,isEditing:!1,color:Object.keys(J)[st%Object.keys(J).length]}))||[];o(je)}catch(q){console.error("Error fetching reminders:",q),S("Failed to load reminders. Please try again.")}finally{u(!1)}};v.useEffect(()=>{(async()=>{try{const{data:me,error:je}=await se.from("reminders").select("count",{count:"exact",head:!0});je?(console.error("Table test error:",je),S("Database table 'reminders' does not exist. Please run the SQL commands from database-schema.sql in your Supabase SQL editor."),k(!0),u(!1)):(console.log("Table exists, fetching reminders..."),A())}catch(me){console.error("Table test failed:",me),S("Failed to connect to database. Please check your connection.")}})()},[]);const ee=()=>{Y({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),S(null),N(!0)},Le=()=>{N(!1),Y({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"})},qe=()=>{P(!1),I(null),fe({title:"",body:"",remind_date:"",color:"yellow"})},mt=async()=>{if(!R||!le.title.trim()||!le.body.trim()){S("Please fill in both title and body for the reminder.");return}await zt(R.reminder_id,{title:le.title.trim(),body:le.body.trim(),remind_date:le.remind_date,color:le.color}),qe()},ct=async()=>{if(!Z.title.trim()||!Z.body.trim()){S("Please fill in both title and body for the reminder.");return}const q={title:Z.title.trim(),body:Z.body.trim(),remind_date:Z.remind_date,owner_id:r?parseInt(r):1};if(E){const me=Date.now();o([...i,{...q,reminder_id:me,created_at:new Date().toISOString()}]),Le();return}try{if(r)q.owner_id=parseInt(r);else{const Fe=Date.now();o([...i,{...q,reminder_id:Fe,created_at:new Date().toISOString()}]),Le();return}const{data:me,error:je}=await se.from("reminders").insert([{title:q.title,body:q.body,remind_date:q.remind_date,owner_id:q.owner_id}]).select().single();if(je){const Fe=Date.now();o([...i,{...q,reminder_id:Fe,created_at:new Date().toISOString()}]),Le();return}o([...i,{...q,reminder_id:me.reminder_id,created_at:new Date().toISOString()}]),Le()}catch(me){console.error("Error adding reminder:",me);const je=Date.now();o([...i,{...q,reminder_id:je,created_at:new Date().toISOString()}]),Le()}},on=async q=>{if(o(i.filter(me=>me.reminder_id!==q)),!E)try{const{error:me}=await se.from("reminders").delete().eq("reminder_id",q);me&&console.error("Error deleting reminder from database:",me)}catch(me){console.error("Error deleting reminder:",me)}},zt=async(q,me)=>{if(console.log("updateReminder called with:",{id:q,updates:me}),o(i.map(je=>je.reminder_id===q?{...je,...me}:je)),!E)try{if(me.title||me.body||me.remind_date){const{error:je}=await se.from("reminders").update({title:me.title,body:me.body,remind_date:me.remind_date}).eq("reminder_id",q);je&&console.error("Error updating reminder in database:",je)}}catch(je){console.error("Error updating reminder:",je)}},Gt=(q,me)=>{q.preventDefault();const je=q.currentTarget.getBoundingClientRect();p(me),m({x:q.clientX-je.left,y:q.clientY-je.top})},tn=q=>{if(h){const me=document.getElementById("sticky-container");if(me){const je=me.getBoundingClientRect(),Fe=Math.max(0,Math.min(q.clientX-je.left-g.x,je.width-224)),st=Math.max(0,Math.min(q.clientY-je.top-g.y,je.height-224));o(i.map(Et=>Et.reminder_id===h.reminder_id?{...Et,x:Fe,y:st}:Et))}}},nn=()=>{p(null),m({x:0,y:0})};v.useEffect(()=>{if(h)return document.addEventListener("mousemove",tn),document.addEventListener("mouseup",nn),()=>{document.removeEventListener("mousemove",tn),document.removeEventListener("mouseup",nn)}},[h,g]);const jn=({reminder:q})=>{const[me,je]=v.useState(q.title),[Fe,st]=v.useState(q.body),[Et,Dt]=v.useState(q.remind_date),jt=v.useRef(null);v.useEffect(()=>{q.isEditing&&jt.current&&(jt.current.focus(),jt.current.select())},[q.isEditing]);const $t=He=>{st(He.target.value),He.target.style.height="auto",He.target.style.height=He.target.scrollHeight+"px"},_t=()=>{me.trim()&&Fe.trim()?zt(q.reminder_id,{title:me.trim(),body:Fe.trim(),remind_date:Et,isEditing:!1}):(je(q.title),st(q.body),Dt(q.remind_date),zt(q.reminder_id,{isEditing:!1}))},y=He=>{He.key==="Enter"&&He.shiftKey||(He.key==="Enter"?(He.preventDefault(),_t()):He.key==="Escape"&&(je(q.title),st(q.body),Dt(q.remind_date),zt(q.reminder_id,{isEditing:!1})))},M=He=>{He.key==="Enter"?(He.preventDefault(),_t()):He.key==="Escape"&&(je(q.title),st(q.body),Dt(q.remind_date),zt(q.reminder_id,{isEditing:!1}))},te=J[q.color]||J.yellow,ke=new Date,Oe=new Date(q.remind_date),Be=Oe<ke&&Oe.toDateString()!==ke.toDateString(),Xe=Oe.toDateString()===ke.toDateString();return n.jsx("div",{className:`${$.stickyNote} ${h?.reminder_id===q.reminder_id?$.stickyNoteDragging:""}`,style:{left:`${q.x}px`,top:`${q.y}px`,transform:`rotate(${q.rotation}deg)`},children:n.jsxs("div",{className:`${$.note} ${te.bg} ${Be?$.noteOverdue:Xe?$.noteDueToday:""}`,onMouseDown:He=>!q.isEditing&&Gt(He,q),children:[n.jsx("div",{className:`${$.noteTopStrip} ${te.border}`}),n.jsx("div",{className:$.noteContent,children:q.isEditing?n.jsxs("div",{className:$.noteContentEditing,children:[n.jsx("input",{type:"text",value:me,onChange:He=>je(He.target.value),onKeyDown:M,onBlur:_t,className:$.noteInput,placeholder:"Reminder title..."}),n.jsx("input",{type:"date",value:Et,onChange:He=>Dt(He.target.value),onKeyDown:M,onBlur:_t,className:$.noteDateInput}),n.jsx("textarea",{ref:jt,value:Fe,onChange:$t,onBlur:_t,onKeyDown:y,className:$.noteTextarea,style:{fontFamily:"Comic Sans MS, cursive, sans-serif",minHeight:"80px"},placeholder:"Reminder details..."})]}):n.jsxs("div",{onContextMenu:He=>{He.preventDefault(),He.stopPropagation(),console.log("Note right-clicked for reminder:",q.reminder_id),I(q),fe({title:q.title,body:q.body,remind_date:q.remind_date,color:q.color||"yellow"}),P(!0)},className:$.noteDisplay,children:[n.jsx("div",{className:$.noteTitle,children:q.title}),n.jsxs("div",{className:`${$.noteDate} ${Be?$.noteDateOverdue:Xe?$.noteDateToday:""}`,children:[n.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(q.remind_date).toLocaleDateString(),Be&&n.jsx("span",{style:{color:"#dc2626",marginLeft:"0.5rem",fontWeight:"700"},children:"OVERDUE"}),Xe&&!Be&&n.jsx("span",{style:{color:"#d97706",marginLeft:"0.5rem",fontWeight:"700"},children:"TODAY"})]}),n.jsx("div",{className:$.noteBody,style:{fontFamily:"Comic Sans MS, cursive, sans-serif"},children:q.body})]})}),n.jsx("div",{className:$.noteCorner,children:n.jsx("div",{className:`${$.noteCornerEffect} ${te.bg}`})})]})})};return d?n.jsx("div",{className:$.loading,children:n.jsxs("div",{className:$.loadingContent,children:[n.jsx("i",{className:`fa-solid fa-spinner fa-spin ${$.loadingIcon}`}),n.jsx("p",{className:$.loadingText,children:"Loading reminders..."})]})}):n.jsxs("div",{className:$.container,children:[n.jsx("div",{className:$.header,children:n.jsxs("div",{className:$.title,children:[n.jsxs("h1",{children:[n.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.75rem"}}),"Reminders"]}),n.jsx("p",{children:"Click and drag to move reminders around • Right-click to edit"})]})}),n.jsxs("div",{className:$.mainContent,children:[n.jsxs("div",{className:$.dateNavigation,children:[n.jsx("button",{onClick:ue,className:$.navButton,onMouseEnter:()=>{j&&(xe("Click this arrow to go to the previous day! This helps you navigate through your reminders day by day."),Q(!0))},onMouseLeave:()=>{j&&Q(!1)},children:n.jsx("i",{className:"fa-solid fa-chevron-left"})}),n.jsx("div",{className:$.currentDate,onClick:()=>L(!W),style:{cursor:"pointer"},onMouseEnter:()=>{j&&(xe("Click on this date to open the calendar modal! You can see all your reminders and navigate to any date quickly."),Q(!0))},onMouseLeave:()=>{j&&Q(!1)},children:Se.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),n.jsx("button",{onClick:be,className:$.navButton,onMouseEnter:()=>{j&&(xe("Click this arrow to go to the next day! This helps you navigate through your reminders day by day."),Q(!0))},onMouseLeave:()=>{j&&Q(!1)},children:n.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),W&&n.jsx("div",{className:$.calendarModal,onClick:()=>L(!1),children:n.jsxs("div",{className:$.calendar,onClick:q=>q.stopPropagation(),children:[n.jsxs("div",{className:$.calendarHeader,children:[n.jsx("button",{onClick:()=>L(!1),className:$.calendarCloseButton,children:n.jsx("i",{className:"fa-solid fa-times"})}),n.jsx("button",{onClick:()=>Me("prev"),className:$.calendarNavButton,children:n.jsx("i",{className:"fa-solid fa-chevron-left"})}),n.jsx("div",{className:$.calendarTitle,children:oe.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsx("button",{onClick:()=>Me("next"),className:$.calendarNavButton,children:n.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),n.jsxs("div",{className:$.calendarGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(q=>n.jsx("div",{className:$.calendarDayHeader,children:q},q)),Ce().map((q,me)=>{let je=$.calendarDay;return q.isCurrentMonth?q.hasReminders&&q.isToday?je+=` ${$.calendarDayWithRemindersToday}`:q.hasReminders&&q.isSelected?je+=` ${$.calendarDayWithRemindersSelected}`:q.hasReminders?je+=` ${$.calendarDayWithReminders}`:q.isToday?je+=` ${$.calendarDayToday}`:q.isSelected&&(je+=` ${$.calendarDaySelected}`):je+=` ${$.calendarDayOtherMonth}`,n.jsxs("div",{className:je,onClick:()=>Ee(q.date),children:[q.date.getDate(),q.hasReminders&&n.jsx("div",{className:$.calendarReminderCount,children:q.reminderCount})]},me)})]})]})}),E&&n.jsx("div",{className:$.offlineNotice,children:n.jsxs("div",{className:$.offlineNoticeContent,children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),n.jsxs("div",{children:[n.jsx("strong",{children:"Offline Mode:"})," The reminders table doesn't exist in your database yet. Reminders will work locally but won't be saved permanently.",n.jsx("a",{href:"#",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),style:{textDecoration:"underline",marginLeft:"0.25rem"},children:"Create the table in Supabase"})]})]})}),n.jsxs("div",{className:$.controls,children:[n.jsxs("button",{onClick:ee,className:`${$.button} ${$.buttonPrimary}`,onMouseEnter:()=>{j&&(xe("Click this button to add a new reminder! You can set the title, content, date, and color for your reminder."),Q(!0))},onMouseLeave:()=>{j&&Q(!1)},children:[n.jsx("i",{className:"fa-solid fa-plus-circle"}),n.jsx("span",{style:{marginLeft:"0.5rem"},children:"Add Reminder"})]}),n.jsxs("button",{onClick:()=>{const q=document.getElementById("sticky-container");if(q){const me=q.getBoundingClientRect();o(i.map(je=>({...je,x:Math.random()*(me.width-224)+20,y:Math.random()*(me.height-224)+20,rotation:(Math.random()-.5)*6})))}},className:`${$.button} ${$.buttonSecondary}`,onMouseEnter:()=>{j&&(xe("Click this button to shuffle all your reminders around! This gives them new random positions on the board."),Q(!0))},onMouseLeave:()=>{j&&Q(!1)},children:[n.jsx("i",{className:"fa-solid fa-random"}),n.jsx("span",{style:{marginLeft:"0.5rem"},children:"Shuffle"})]}),i.length>0&&n.jsxs("button",{onClick:()=>X(!0),className:`${$.button} ${$.buttonDanger}`,onMouseEnter:()=>{j&&(xe("Click this button to remove all reminders at once! Be careful - this action cannot be undone."),Q(!0))},onMouseLeave:()=>{j&&Q(!1)},children:[n.jsx("i",{className:"fa-solid fa-trash-can"}),n.jsx("span",{style:{marginLeft:"0.5rem"},children:"Clear All"})]})]}),n.jsxs("div",{id:"sticky-container",className:$.notesContainer,style:{minHeight:"600px"},children:[n.jsx("div",{className:$.gridBackground,children:n.jsx("div",{className:$.gridPattern})}),ge().map(q=>n.jsx(jn,{reminder:q},q.reminder_id)),ge().length===0&&n.jsx("div",{className:$.emptyState,children:n.jsxs("div",{className:$.emptyStateContent,children:[n.jsx("div",{className:$.emptyStateIcon,children:n.jsx("i",{className:"fa-solid fa-sticky-note"})}),n.jsx("h3",{className:$.emptyStateTitle,children:"No reminders for this date"}),n.jsxs("p",{children:['Click "Add Reminder" to create your first reminder for ',Se.toLocaleDateString()]})]})}),h&&n.jsxs("div",{className:$.dragIndicator,children:[n.jsx("i",{className:"fa-solid fa-arrows-up-down-left-right",style:{marginRight:"0.25rem"}}),"Dragging reminder..."]})]}),n.jsx("div",{className:$.footer,children:n.jsxs("p",{children:[n.jsx("i",{className:"fa-solid fa-lightbulb",style:{marginRight:"0.25rem"}}),"Tips: Shift+Enter for new lines • Escape to cancel editing • Right-click to edit • Drag reminders around freely"]})}),T&&n.jsx("div",{className:$.modalOverlay,children:n.jsx("div",{className:$.modal,children:n.jsxs("div",{className:$.modalHeader,children:[n.jsxs("div",{className:$.modalTitle,children:[n.jsxs("h2",{children:[n.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Create New Reminder"]}),n.jsx("button",{onClick:Le,className:$.modalClose,children:n.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),n.jsxs("form",{onSubmit:q=>{q.preventDefault(),ct()},className:$.modalForm,children:[x&&n.jsx("div",{className:$.errorMessage,children:n.jsxs("div",{className:$.errorContent,children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),n.jsx("span",{style:{fontSize:"0.875rem"},children:x})]})}),n.jsxs("div",{className:$.formGroup,children:[n.jsx("label",{htmlFor:"title",className:$.formLabel,children:"Title *"}),n.jsx("input",{type:"text",id:"title",value:Z.title,onChange:q=>Y({...Z,title:q.target.value}),className:$.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),n.jsxs("div",{className:$.formGroup,children:[n.jsx("label",{htmlFor:"remind_date",className:$.formLabel,children:"Remind Date *"}),n.jsx("input",{type:"date",id:"remind_date",value:Z.remind_date,onChange:q=>Y({...Z,remind_date:q.target.value}),className:$.formInput,required:!0})]}),n.jsxs("div",{className:$.formGroup,children:[n.jsx("label",{className:$.formLabel,children:"Color"}),n.jsx("div",{className:$.colorSelection,children:Object.entries(J).map(([q,me])=>n.jsx("button",{type:"button",onClick:()=>Y({...Z,color:q}),className:`${$.colorOption} ${me.bg} ${Z.color===q?$.colorOptionSelected:""}`,title:q},q))})]}),n.jsxs("div",{className:$.formGroup,children:[n.jsx("label",{htmlFor:"body",className:$.formLabel,children:"Details *"}),n.jsx("textarea",{id:"body",value:Z.body,onChange:q=>Y({...Z,body:q.target.value}),className:$.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),Z.title&&Z.body&&n.jsxs("div",{className:$.preview,children:[n.jsx("label",{className:$.previewLabel,children:"Preview"}),n.jsxs("div",{className:`${$.previewNote} ${J[Z.color]?.bg} ${J[Z.color]?.border}`,children:[n.jsx("div",{className:$.previewTitle,children:Z.title}),n.jsxs("div",{className:$.previewDate,children:[n.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(Z.remind_date).toLocaleDateString()]}),n.jsx("div",{className:$.previewBody,children:Z.body})]})]}),n.jsxs("div",{className:$.modalActions,children:[n.jsx("button",{type:"button",onClick:Le,className:`${$.modalButton} ${$.modalButtonCancel}`,children:"Cancel"}),n.jsxs("button",{type:"submit",className:`${$.modalButton} ${$.modalButtonSubmit}`,children:[n.jsx("i",{className:"fa-solid fa-plus"}),"Create Reminder"]})]})]})]})})}),D&&R&&n.jsx("div",{className:$.modalOverlay,children:n.jsx("div",{className:$.modal,children:n.jsxs("div",{className:$.modalHeader,children:[n.jsxs("div",{className:$.modalTitle,children:[n.jsxs("h2",{children:[n.jsx("i",{className:"fa-solid fa-edit",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Edit Reminder"]}),n.jsx("button",{onClick:qe,className:$.modalClose,children:n.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),n.jsxs("form",{onSubmit:q=>{q.preventDefault(),mt()},className:$.modalForm,children:[x&&n.jsx("div",{className:$.errorMessage,children:n.jsxs("div",{className:$.errorContent,children:[n.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),n.jsx("span",{style:{fontSize:"0.875rem"},children:x})]})}),n.jsxs("div",{className:$.formGroup,children:[n.jsx("label",{htmlFor:"edit-title",className:$.formLabel,children:"Title *"}),n.jsx("input",{type:"text",id:"edit-title",value:le.title,onChange:q=>fe({...le,title:q.target.value}),className:$.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),n.jsxs("div",{className:$.formGroup,children:[n.jsx("label",{htmlFor:"edit-remind_date",className:$.formLabel,children:"Remind Date *"}),n.jsx("input",{type:"date",id:"edit-remind_date",value:le.remind_date,onChange:q=>fe({...le,remind_date:q.target.value}),className:$.formInput,required:!0})]}),n.jsxs("div",{className:$.formGroup,children:[n.jsx("label",{className:$.formLabel,children:"Color"}),n.jsx("div",{className:$.colorSelection,children:Object.entries(J).map(([q,me])=>n.jsx("button",{type:"button",onClick:()=>fe({...le,color:q}),className:`${$.colorOption} ${me.bg} ${le.color===q?$.colorOptionSelected:""}`,title:q},q))})]}),n.jsxs("div",{className:$.formGroup,children:[n.jsx("label",{htmlFor:"edit-body",className:$.formLabel,children:"Details *"}),n.jsx("textarea",{id:"edit-body",value:le.body,onChange:q=>fe({...le,body:q.target.value}),className:$.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),le.title&&le.body&&n.jsxs("div",{className:$.preview,children:[n.jsx("label",{className:$.previewLabel,children:"Preview"}),n.jsxs("div",{className:`${$.previewNote} ${J[le.color]?.bg} ${J[le.color]?.border}`,children:[n.jsx("div",{className:$.previewTitle,children:le.title}),n.jsxs("div",{className:$.previewDate,children:[n.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(le.remind_date).toLocaleDateString()]}),n.jsx("div",{className:$.previewBody,children:le.body})]})]}),n.jsxs("div",{className:$.modalActions,children:[n.jsxs("button",{type:"button",onClick:()=>{on(R.reminder_id),qe()},className:`${$.modalButton} ${$.modalButtonDanger}`,children:[n.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),n.jsx("button",{type:"button",onClick:qe,className:`${$.modalButton} ${$.modalButtonCancel}`,children:"Cancel"}),n.jsxs("button",{type:"submit",className:`${$.modalButton} ${$.modalButtonSubmit}`,children:[n.jsx("i",{className:"fa-solid fa-save"}),"Update Reminder"]})]})]})]})})}),ne&&n.jsx("div",{className:$.confirmationDialog,children:n.jsxs("div",{className:$.confirmationContent,children:[n.jsxs("div",{className:$.confirmationHeader,children:[n.jsx("div",{className:$.confirmationIcon,children:n.jsx("i",{className:"fa-solid fa-exclamation-triangle"})}),n.jsx("h3",{children:"Remove All Reminders"})]}),n.jsx("p",{children:"Are you sure you want to remove all reminders? This action cannot be undone."}),n.jsxs("div",{className:$.confirmationButtons,children:[n.jsxs("button",{onClick:()=>X(!1),className:`${$.confirmationButton} ${$.confirmationButtonCancel}`,children:[n.jsx("i",{className:"fa-solid fa-times",style:{marginRight:"0.5rem"}}),"Cancel"]}),n.jsxs("button",{onClick:Ne,className:`${$.confirmationButton} ${$.confirmationButtonConfirm}`,children:[n.jsx("i",{className:"fa-solid fa-trash",style:{marginRight:"0.5rem"}}),"Remove All"]})]})]})})]}),n.jsx(de,{})]})}const Qw=()=>{const{isCollapsed:l}=su();return J1(),n.jsxs("div",{style:{height:"100vh",background:"#f8f9fa",color:"#1a1a1a",display:"flex",overflow:"hidden",backgroundImage:"url(/images/backgrounds/appbg3.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:[n.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.05)",zIndex:0}}),n.jsx(nv,{}),n.jsxs("main",{style:{flex:1,marginLeft:l?"60px":"160px",padding:"24px",height:"100vh",overflow:"auto",transition:"margin-left 0.3s ease",position:"relative",zIndex:1},children:[n.jsx("div",{style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3},children:n.jsx("img",{src:"/images/backgrounds/logo1.png",alt:"Company Logo",style:{height:"120px",width:"auto",objectFit:"contain"}})}),n.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative",zIndex:1},children:n.jsxs(l0,{children:[n.jsx(pa,{path:"/",element:n.jsx(uv,{})}),n.jsx(pa,{path:"/products",element:n.jsx(Zo,{children:n.jsx(hv,{})})}),n.jsx(pa,{path:"/sales",element:n.jsx(Zo,{requiredPermission:"canProcessSales",children:n.jsx(xv,{})})}),n.jsx(pa,{path:"/side-businesses",element:n.jsx(Zo,{children:n.jsx(P2,{})})}),n.jsx(pa,{path:"/transactions",element:n.jsx(Zo,{children:n.jsx(G2,{})})}),n.jsx(pa,{path:"/admin",element:n.jsx(X2,{})}),n.jsx(pa,{path:"/reminders",element:n.jsx(Kw,{})}),n.jsx(pa,{path:"/transaction/:transactionId",element:n.jsx(V2,{})})]})})]})]})};function Xw(){return n.jsx(V1,{children:n.jsx(Q1,{children:n.jsx(K1,{children:n.jsx(Z1,{children:n.jsx(D0,{children:n.jsx(tv,{children:n.jsx(Qw,{})})})})})})})}xy.createRoot(document.getElementById("root")).render(n.jsx(_g.StrictMode,{children:n.jsx(Xw,{})}));
