(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();function w0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function aS(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),r}var wh={exports:{}},Dl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function iS(){if(Im)return Dl;Im=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:e,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Dl.Fragment=t,Dl.jsx=r,Dl.jsxs=r,Dl}var Bm;function oS(){return Bm||(Bm=1,wh.exports=iS()),wh.exports}var a=oS(),Th={exports:{}},Mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function lS(){if(Mm)return Mt;Mm=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=v&&D[v]||D["@@iterator"],typeof D=="function"?D:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function S(D,U,E){this.props=D,this.context=U,this.refs=_,this.updater=E||b}S.prototype.isReactComponent={},S.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},S.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function A(){}A.prototype=S.prototype;function k(D,U,E){this.props=D,this.context=U,this.refs=_,this.updater=E||b}var O=k.prototype=new A;O.constructor=k,w(O,S.prototype),O.isPureReactComponent=!0;var L=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},ne=Object.prototype.hasOwnProperty;function M(D,U,E,P,W,V){return E=V.ref,{$$typeof:e,type:D,key:U,ref:E!==void 0?E:null,props:V}}function re(D,U){return M(D.type,U,void 0,void 0,void 0,D.props)}function ee(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function de(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(E){return U[E]})}var oe=/\/+/g;function Q(D,U){return typeof D=="object"&&D!==null&&D.key!=null?de(""+D.key):U.toString(36)}function te(){}function ae(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(te,te):(D.status="pending",D.then(function(U){D.status==="pending"&&(D.status="fulfilled",D.value=U)},function(U){D.status==="pending"&&(D.status="rejected",D.reason=U)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function X(D,U,E,P,W){var V=typeof D;(V==="undefined"||V==="boolean")&&(D=null);var ue=!1;if(D===null)ue=!0;else switch(V){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(D.$$typeof){case e:case t:ue=!0;break;case x:return ue=D._init,X(ue(D._payload),U,E,P,W)}}if(ue)return W=W(D),ue=P===""?"."+Q(D,0):P,L(W)?(E="",ue!=null&&(E=ue.replace(oe,"$&/")+"/"),X(W,U,E,"",function(Te){return Te})):W!=null&&(ee(W)&&(W=re(W,E+(W.key==null||D&&D.key===W.key?"":(""+W.key).replace(oe,"$&/")+"/")+ue)),U.push(W)),1;ue=0;var Le=P===""?".":P+":";if(L(D))for(var Ce=0;Ce<D.length;Ce++)P=D[Ce],V=Le+Q(P,Ce),ue+=X(P,U,E,V,W);else if(Ce=y(D),typeof Ce=="function")for(D=Ce.call(D),Ce=0;!(P=D.next()).done;)P=P.value,V=Le+Q(P,Ce++),ue+=X(P,U,E,V,W);else if(V==="object"){if(typeof D.then=="function")return X(ae(D),U,E,P,W);throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ue}function J(D,U,E){if(D==null)return D;var P=[],W=0;return X(D,P,"","",function(V){return U.call(E,V,W++)}),P}function fe(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(E){(D._status===0||D._status===-1)&&(D._status=1,D._result=E)},function(E){(D._status===0||D._status===-1)&&(D._status=2,D._result=E)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var se=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Ne(){}return Mt.Children={map:J,forEach:function(D,U,E){J(D,function(){U.apply(this,arguments)},E)},count:function(D){var U=0;return J(D,function(){U++}),U},toArray:function(D){return J(D,function(U){return U})||[]},only:function(D){if(!ee(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Mt.Component=S,Mt.Fragment=r,Mt.Profiler=o,Mt.PureComponent=k,Mt.StrictMode=s,Mt.Suspense=p,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return K.H.useMemoCache(D)}},Mt.cache=function(D){return function(){return D.apply(null,arguments)}},Mt.cloneElement=function(D,U,E){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var P=w({},D.props),W=D.key,V=void 0;if(U!=null)for(ue in U.ref!==void 0&&(V=void 0),U.key!==void 0&&(W=""+U.key),U)!ne.call(U,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&U.ref===void 0||(P[ue]=U[ue]);var ue=arguments.length-2;if(ue===1)P.children=E;else if(1<ue){for(var Le=Array(ue),Ce=0;Ce<ue;Ce++)Le[Ce]=arguments[Ce+2];P.children=Le}return M(D.type,W,void 0,void 0,V,P)},Mt.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Mt.createElement=function(D,U,E){var P,W={},V=null;if(U!=null)for(P in U.key!==void 0&&(V=""+U.key),U)ne.call(U,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(W[P]=U[P]);var ue=arguments.length-2;if(ue===1)W.children=E;else if(1<ue){for(var Le=Array(ue),Ce=0;Ce<ue;Ce++)Le[Ce]=arguments[Ce+2];W.children=Le}if(D&&D.defaultProps)for(P in ue=D.defaultProps,ue)W[P]===void 0&&(W[P]=ue[P]);return M(D,V,void 0,void 0,null,W)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(D){return{$$typeof:f,render:D}},Mt.isValidElement=ee,Mt.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:fe}},Mt.memo=function(D,U){return{$$typeof:h,type:D,compare:U===void 0?null:U}},Mt.startTransition=function(D){var U=K.T,E={};K.T=E;try{var P=D(),W=K.S;W!==null&&W(E,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(Ne,se)}catch(V){se(V)}finally{K.T=U}},Mt.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Mt.use=function(D){return K.H.use(D)},Mt.useActionState=function(D,U,E){return K.H.useActionState(D,U,E)},Mt.useCallback=function(D,U){return K.H.useCallback(D,U)},Mt.useContext=function(D){return K.H.useContext(D)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(D,U){return K.H.useDeferredValue(D,U)},Mt.useEffect=function(D,U,E){var P=K.H;if(typeof E=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return P.useEffect(D,U)},Mt.useId=function(){return K.H.useId()},Mt.useImperativeHandle=function(D,U,E){return K.H.useImperativeHandle(D,U,E)},Mt.useInsertionEffect=function(D,U){return K.H.useInsertionEffect(D,U)},Mt.useLayoutEffect=function(D,U){return K.H.useLayoutEffect(D,U)},Mt.useMemo=function(D,U){return K.H.useMemo(D,U)},Mt.useOptimistic=function(D,U){return K.H.useOptimistic(D,U)},Mt.useReducer=function(D,U,E){return K.H.useReducer(D,U,E)},Mt.useRef=function(D){return K.H.useRef(D)},Mt.useState=function(D){return K.H.useState(D)},Mt.useSyncExternalStore=function(D,U,E){return K.H.useSyncExternalStore(D,U,E)},Mt.useTransition=function(){return K.H.useTransition()},Mt.version="19.1.1",Mt}var Fm;function T0(){return Fm||(Fm=1,Th.exports=lS()),Th.exports}var T=T0();const ou=w0(T);var jh={exports:{}},Ol={},Eh={exports:{}},kh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm;function cS(){return Lm||(Lm=1,(function(e){function t(J,fe){var se=J.length;J.push(fe);e:for(;0<se;){var Ne=se-1>>>1,D=J[Ne];if(0<o(D,fe))J[Ne]=fe,J[se]=D,se=Ne;else break e}}function r(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var fe=J[0],se=J.pop();if(se!==fe){J[0]=se;e:for(var Ne=0,D=J.length,U=D>>>1;Ne<U;){var E=2*(Ne+1)-1,P=J[E],W=E+1,V=J[W];if(0>o(P,se))W<D&&0>o(V,P)?(J[Ne]=V,J[W]=se,Ne=W):(J[Ne]=P,J[E]=se,Ne=E);else if(W<D&&0>o(V,se))J[Ne]=V,J[W]=se,Ne=W;else break e}}return fe}function o(J,fe){var se=J.sortIndex-fe.sortIndex;return se!==0?se:J.id-fe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var p=[],h=[],x=1,v=null,y=3,b=!1,w=!1,_=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function L(J){for(var fe=r(h);fe!==null;){if(fe.callback===null)s(h);else if(fe.startTime<=J)s(h),fe.sortIndex=fe.expirationTime,t(p,fe);else break;fe=r(h)}}function K(J){if(_=!1,L(J),!w)if(r(p)!==null)w=!0,ne||(ne=!0,Q());else{var fe=r(h);fe!==null&&X(K,fe.startTime-J)}}var ne=!1,M=-1,re=5,ee=-1;function de(){return S?!0:!(e.unstable_now()-ee<re)}function oe(){if(S=!1,ne){var J=e.unstable_now();ee=J;var fe=!0;try{e:{w=!1,_&&(_=!1,k(M),M=-1),b=!0;var se=y;try{t:{for(L(J),v=r(p);v!==null&&!(v.expirationTime>J&&de());){var Ne=v.callback;if(typeof Ne=="function"){v.callback=null,y=v.priorityLevel;var D=Ne(v.expirationTime<=J);if(J=e.unstable_now(),typeof D=="function"){v.callback=D,L(J),fe=!0;break t}v===r(p)&&s(p),L(J)}else s(p);v=r(p)}if(v!==null)fe=!0;else{var U=r(h);U!==null&&X(K,U.startTime-J),fe=!1}}break e}finally{v=null,y=se,b=!1}fe=void 0}}finally{fe?Q():ne=!1}}}var Q;if(typeof O=="function")Q=function(){O(oe)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ae=te.port2;te.port1.onmessage=oe,Q=function(){ae.postMessage(null)}}else Q=function(){A(oe,0)};function X(J,fe){M=A(function(){J(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(J){switch(y){case 1:case 2:case 3:var fe=3;break;default:fe=y}var se=y;y=fe;try{return J()}finally{y=se}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(J,fe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var se=y;y=J;try{return fe()}finally{y=se}},e.unstable_scheduleCallback=function(J,fe,se){var Ne=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ne+se:Ne):se=Ne,J){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=se+D,J={id:x++,callback:fe,priorityLevel:J,startTime:se,expirationTime:D,sortIndex:-1},se>Ne?(J.sortIndex=se,t(h,J),r(p)===null&&J===r(h)&&(_?(k(M),M=-1):_=!0,X(K,se-Ne))):(J.sortIndex=D,t(p,J),w||b||(w=!0,ne||(ne=!0,Q()))),J},e.unstable_shouldYield=de,e.unstable_wrapCallback=function(J){var fe=y;return function(){var se=y;y=fe;try{return J.apply(this,arguments)}finally{y=se}}}})(kh)),kh}var Pm;function dS(){return Pm||(Pm=1,Eh.exports=cS()),Eh.exports}var Ch={exports:{}},wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function uS(){if(zm)return wn;zm=1;var e=T0();function t(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,h,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:p,containerInfo:h,implementation:x}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,wn.createPortal=function(p,h){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return c(p,h,null,x)},wn.flushSync=function(p){var h=d.T,x=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=h,s.p=x,s.d.f()}},wn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(p,h))},wn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},wn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var x=h.as,v=f(x,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;x==="style"?s.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:b}):x==="script"&&s.d.X(p,{crossOrigin:v,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},wn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var x=f(h.as,h.crossOrigin);s.d.M(p,{crossOrigin:x,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(p)},wn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var x=h.as,v=f(x,h.crossOrigin);s.d.L(p,x,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},wn.preloadModule=function(p,h){if(typeof p=="string")if(h){var x=f(h.as,h.crossOrigin);s.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:x,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(p)},wn.requestFormReset=function(p){s.d.r(p)},wn.unstable_batchedUpdates=function(p,h){return p(h)},wn.useFormState=function(p,h,x){return d.H.useFormState(p,h,x)},wn.useFormStatus=function(){return d.H.useHostTransitionStatus()},wn.version="19.1.1",wn}var Um;function fS(){if(Um)return Ch.exports;Um=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ch.exports=uS(),Ch.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function hS(){if(Wm)return Ol;Wm=1;var e=dS(),t=T0(),r=fS();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(c(n)!==n)throw Error(s(188))}function p(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(s(188));return i!==n?null:n}for(var l=n,u=i;;){var g=l.return;if(g===null)break;var m=g.alternate;if(m===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===l)return f(g),n;if(m===u)return f(g),i;m=m.sibling}throw Error(s(188))}if(l.return!==u.return)l=g,u=m;else{for(var j=!1,B=g.child;B;){if(B===l){j=!0,l=g,u=m;break}if(B===u){j=!0,u=g,l=m;break}B=B.sibling}if(!j){for(B=m.child;B;){if(B===l){j=!0,l=m,u=g;break}if(B===u){j=!0,u=m,l=g;break}B=B.sibling}if(!j)throw Error(s(189))}}if(l.alternate!==u)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?n:i}function h(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=h(n),i!==null)return i;n=n.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function Q(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var te=Symbol.for("react.client.reference");function ae(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===te?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case S:return"Profiler";case _:return"StrictMode";case K:return"Suspense";case ne:return"SuspenseList";case ee:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case O:return(n.displayName||"Context")+".Provider";case k:return(n._context.displayName||"Context")+".Consumer";case L:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case M:return i=n.displayName||null,i!==null?i:ae(n.type)||"Memo";case re:i=n._payload,n=n._init;try{return ae(n(i))}catch{}}return null}var X=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Ne=[],D=-1;function U(n){return{current:n}}function E(n){0>D||(n.current=Ne[D],Ne[D]=null,D--)}function P(n,i){D++,Ne[D]=n.current,n.current=i}var W=U(null),V=U(null),ue=U(null),Le=U(null);function Ce(n,i){switch(P(ue,i),P(V,n),P(W,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?lm(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=lm(i),n=cm(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}E(W),P(W,n)}function Te(){E(W),E(V),E(ue)}function Be(n){n.memoizedState!==null&&P(Le,n);var i=W.current,l=cm(i,n.type);i!==l&&(P(V,n),P(W,l))}function Ve(n){V.current===n&&(E(W),E(V)),Le.current===n&&(E(Le),kl._currentValue=se)}var Je=Object.prototype.hasOwnProperty,je=e.unstable_scheduleCallback,q=e.unstable_cancelCallback,be=e.unstable_shouldYield,tt=e.unstable_requestPaint,Me=e.unstable_now,ct=e.unstable_getCurrentPriorityLevel,pt=e.unstable_ImmediatePriority,ut=e.unstable_UserBlockingPriority,St=e.unstable_NormalPriority,ft=e.unstable_LowPriority,Ft=e.unstable_IdlePriority,Dt=e.log,jr=e.unstable_setDisableYieldValue,Xt=null,It=null;function ce(n){if(typeof Dt=="function"&&jr(n),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(Xt,n)}catch{}}var me=Math.clz32?Math.clz32:Ct,qe=Math.log,yt=Math.LN2;function Ct(n){return n>>>=0,n===0?32:31-(qe(n)/yt|0)|0}var gr=256,Cr=4194304;function or(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Er(n,i,l){var u=n.pendingLanes;if(u===0)return 0;var g=0,m=n.suspendedLanes,j=n.pingedLanes;n=n.warmLanes;var B=u&134217727;return B!==0?(u=B&~m,u!==0?g=or(u):(j&=B,j!==0?g=or(j):l||(l=B&~n,l!==0&&(g=or(l))))):(B=u&~m,B!==0?g=or(B):j!==0?g=or(j):l||(l=u&~n,l!==0&&(g=or(l)))),g===0?0:i!==0&&i!==g&&(i&m)===0&&(m=g&-g,l=i&-i,m>=l||m===32&&(l&4194048)!==0)?i:g}function Qt(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function lr(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ie(){var n=gr;return gr<<=1,(gr&4194048)===0&&(gr=256),n}function De(){var n=Cr;return Cr<<=1,(Cr&62914560)===0&&(Cr=4194304),n}function mt(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function vt(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function xr(n,i,l,u,g,m){var j=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var B=n.entanglements,Z=n.expirationTimes,_e=n.hiddenUpdates;for(l=j&~l;0<l;){var Pe=31-me(l),Ue=1<<Pe;B[Pe]=0,Z[Pe]=-1;var ke=_e[Pe];if(ke!==null)for(_e[Pe]=null,Pe=0;Pe<ke.length;Pe++){var Re=ke[Pe];Re!==null&&(Re.lane&=-536870913)}l&=~Ue}u!==0&&Jt(n,u,0),m!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=m&~(j&~i))}function Jt(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-me(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|l&4194090}function Xe(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var u=31-me(l),g=1<<u;g&i|n[u]&i&&(n[u]|=i),l&=~g}}function Wr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Gt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Bn(){var n=fe.p;return n!==0?n:(n=window.event,n===void 0?32:Cm(n.type))}function Nr(n,i){var l=fe.p;try{return fe.p=n,i()}finally{fe.p=l}}var ar=Math.random().toString(36).slice(2),Et="__reactFiber$"+ar,Dr="__reactProps$"+ar,rn="__reactContainer$"+ar,Cs="__reactEvents$"+ar,Mn="__reactListeners$"+ar,N="__reactHandles$"+ar,H="__reactResources$"+ar,F="__reactMarker$"+ar;function z(n){delete n[Et],delete n[Dr],delete n[Cs],delete n[Mn],delete n[N]}function G(n){var i=n[Et];if(i)return i;for(var l=n.parentNode;l;){if(i=l[rn]||l[Et]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=hm(n);n!==null;){if(l=n[Et])return l;n=hm(n)}return i}n=l,l=n.parentNode}return null}function Y(n){if(n=n[Et]||n[rn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function ve(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Ie(n){var i=n[H];return i||(i=n[H]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ge(n){n[F]=!0}var we=new Set,Ee={};function We(n,i){Ke(n,i),Ke(n+"Capture",i)}function Ke(n,i){for(Ee[n]=i,n=0;n<i.length;n++)we.add(i[n])}var nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ge={},rt={};function wt(n){return Je.call(rt,n)?!0:Je.call(Ge,n)?!1:nt.test(n)?rt[n]=!0:(Ge[n]=!0,!1)}function Zt(n,i,l){if(wt(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function Vt(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function ir(n,i,l,u){if(u===null)n.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+u)}}var _n,C;function he(n){if(_n===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);_n=i&&i[1]||"",C=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_n+n+C}var Ae=!1;function st(n,i){if(!n||Ae)return"";Ae=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Ue=function(){throw Error()};if(Object.defineProperty(Ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ue,[])}catch(Re){var ke=Re}Reflect.construct(n,[],Ue)}else{try{Ue.call()}catch(Re){ke=Re}n.call(Ue.prototype)}}else{try{throw Error()}catch(Re){ke=Re}(Ue=n())&&typeof Ue.catch=="function"&&Ue.catch(function(){})}}catch(Re){if(Re&&ke&&typeof Re.stack=="string")return[Re.stack,ke.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),j=m[0],B=m[1];if(j&&B){var Z=j.split(`
`),_e=B.split(`
`);for(g=u=0;u<Z.length&&!Z[u].includes("DetermineComponentFrameRoot");)u++;for(;g<_e.length&&!_e[g].includes("DetermineComponentFrameRoot");)g++;if(u===Z.length||g===_e.length)for(u=Z.length-1,g=_e.length-1;1<=u&&0<=g&&Z[u]!==_e[g];)g--;for(;1<=u&&0<=g;u--,g--)if(Z[u]!==_e[g]){if(u!==1||g!==1)do if(u--,g--,0>g||Z[u]!==_e[g]){var Pe=`
`+Z[u].replace(" at new "," at ");return n.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",n.displayName)),Pe}while(1<=u&&0<=g);break}}}finally{Ae=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?he(l):""}function bt(n){switch(n.tag){case 26:case 27:case 5:return he(n.type);case 16:return he("Lazy");case 13:return he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return st(n.type,!1);case 11:return st(n.type.render,!1);case 1:return st(n.type,!0);case 31:return he("Activity");default:return""}}function Tt(n){try{var i="";do i+=bt(n),n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function it(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _t(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function At(n){var i=_t(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,m=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(j){u=""+j,m.call(this,j)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(j){u=""+j},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ut(n){n._valueTracker||(n._valueTracker=At(n))}function Ir(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return n&&(u=_t(n)?n.checked?"true":"false":n.value),n=u,n!==l?(i.setValue(n),!0):!1}function _r(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var En=/[\n"\\]/g;function er(n){return n.replace(En,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function R(n,i,l,u,g,m,j,B){n.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.type=j:n.removeAttribute("type"),i!=null?j==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+it(i)):n.value!==""+it(i)&&(n.value=""+it(i)):j!=="submit"&&j!=="reset"||n.removeAttribute("value"),i!=null?Ye(n,j,it(i)):l!=null?Ye(n,j,it(l)):u!=null&&n.removeAttribute("value"),g==null&&m!=null&&(n.defaultChecked=!!m),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?n.name=""+it(B):n.removeAttribute("name")}function Se(n,i,l,u,g,m,j,B){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;l=l!=null?""+it(l):"",i=i!=null?""+it(i):l,B||i===n.value||(n.value=i),n.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=B?n.checked:!!u,n.defaultChecked=!!u,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(n.name=j)}function Ye(n,i,l){i==="number"&&_r(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Qe(n,i,l,u){if(n=n.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=i.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&u&&(n[l].defaultSelected=!0)}else{for(l=""+it(l),i=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function He(n,i,l){if(i!=null&&(i=""+it(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+it(l):""}function ot(n,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(s(92));if(X(u)){if(1<u.length)throw Error(s(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=it(i),n.defaultValue=l,u=n.textContent,u===l&&u!==""&&u!==null&&(n.value=u)}function lt(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var gt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yt(n,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,l):typeof l!="number"||l===0||gt.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function Bt(n,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&l[g]!==u&&Yt(n,g,u)}else for(var m in i)i.hasOwnProperty(m)&&Yt(n,m,i[m])}function Pt(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mc(n){return Fn.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Su=null;function wu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ci=null,Ai=null;function dp(n){var i=Y(n);if(i&&(n=i.stateNode)){var l=n[Dr]||null;e:switch(n=i.stateNode,i.type){case"input":if(R(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+er(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==n&&u.form===n.form){var g=u[Dr]||null;if(!g)throw Error(s(90));R(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===n.form&&Ir(u)}break e;case"textarea":He(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Qe(n,!!l.multiple,i,!1)}}}var Tu=!1;function up(n,i,l){if(Tu)return n(i,l);Tu=!0;try{var u=n(i);return u}finally{if(Tu=!1,(Ci!==null||Ai!==null)&&(rd(),Ci&&(i=Ci,n=Ai,Ai=Ci=null,dp(i),n)))for(i=0;i<n.length;i++)dp(n[i])}}function zo(n,i){var l=n.stateNode;if(l===null)return null;var u=l[Dr]||null;if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ju=!1;if(Ps)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){ju=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{ju=!1}var ua=null,Eu=null,yc=null;function fp(){if(yc)return yc;var n,i=Eu,l=i.length,u,g="value"in ua?ua.value:ua.textContent,m=g.length;for(n=0;n<l&&i[n]===g[n];n++);var j=l-n;for(u=1;u<=j&&i[l-u]===g[m-u];u++);return yc=g.slice(n,1<u?1-u:void 0)}function vc(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function bc(){return!0}function hp(){return!1}function Ln(n){function i(l,u,g,m,j){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=m,this.target=j,this.currentTarget=null;for(var B in n)n.hasOwnProperty(B)&&(l=n[B],this[B]=l?l(m):m[B]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?bc:hp,this.isPropagationStopped=hp,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bc)},persist:function(){},isPersistent:bc}),i}var Va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_c=Ln(Va),Wo=x({},Va,{view:0,detail:0}),a2=Ln(Wo),ku,Cu,qo,Sc=x({},Wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ru,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qo&&(qo&&n.type==="mousemove"?(ku=n.screenX-qo.screenX,Cu=n.screenY-qo.screenY):Cu=ku=0,qo=n),ku)},movementY:function(n){return"movementY"in n?n.movementY:Cu}}),pp=Ln(Sc),i2=x({},Sc,{dataTransfer:0}),o2=Ln(i2),l2=x({},Wo,{relatedTarget:0}),Au=Ln(l2),c2=x({},Va,{animationName:0,elapsedTime:0,pseudoElement:0}),d2=Ln(c2),u2=x({},Va,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),f2=Ln(u2),h2=x({},Va,{data:0}),gp=Ln(h2),p2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m2(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=x2[n])?!!i[n]:!1}function Ru(){return m2}var y2=x({},Wo,{key:function(n){if(n.key){var i=p2[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=vc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?g2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ru,charCode:function(n){return n.type==="keypress"?vc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),v2=Ln(y2),b2=x({},Sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xp=Ln(b2),_2=x({},Wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ru}),S2=Ln(_2),w2=x({},Va,{propertyName:0,elapsedTime:0,pseudoElement:0}),T2=Ln(w2),j2=x({},Sc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),E2=Ln(j2),k2=x({},Va,{newState:0,oldState:0}),C2=Ln(k2),A2=[9,13,27,32],Nu=Ps&&"CompositionEvent"in window,$o=null;Ps&&"documentMode"in document&&($o=document.documentMode);var R2=Ps&&"TextEvent"in window&&!$o,mp=Ps&&(!Nu||$o&&8<$o&&11>=$o),yp=" ",vp=!1;function bp(n,i){switch(n){case"keyup":return A2.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _p(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ri=!1;function N2(n,i){switch(n){case"compositionend":return _p(i);case"keypress":return i.which!==32?null:(vp=!0,yp);case"textInput":return n=i.data,n===yp&&vp?null:n;default:return null}}function D2(n,i){if(Ri)return n==="compositionend"||!Nu&&bp(n,i)?(n=fp(),yc=Eu=ua=null,Ri=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return mp&&i.locale!=="ko"?null:i.data;default:return null}}var O2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!O2[n.type]:i==="textarea"}function wp(n,i,l,u){Ci?Ai?Ai.push(u):Ai=[u]:Ci=u,i=ld(i,"onChange"),0<i.length&&(l=new _c("onChange","change",null,l,u),n.push({event:l,listeners:i}))}var Ho=null,Go=null;function I2(n){nm(n,0)}function wc(n){var i=ve(n);if(Ir(i))return n}function Tp(n,i){if(n==="change")return i}var jp=!1;if(Ps){var Du;if(Ps){var Ou="oninput"in document;if(!Ou){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),Ou=typeof Ep.oninput=="function"}Du=Ou}else Du=!1;jp=Du&&(!document.documentMode||9<document.documentMode)}function kp(){Ho&&(Ho.detachEvent("onpropertychange",Cp),Go=Ho=null)}function Cp(n){if(n.propertyName==="value"&&wc(Go)){var i=[];wp(i,Go,n,wu(n)),up(I2,i)}}function B2(n,i,l){n==="focusin"?(kp(),Ho=i,Go=l,Ho.attachEvent("onpropertychange",Cp)):n==="focusout"&&kp()}function M2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wc(Go)}function F2(n,i){if(n==="click")return wc(i)}function L2(n,i){if(n==="input"||n==="change")return wc(i)}function P2(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Hn=typeof Object.is=="function"?Object.is:P2;function Vo(n,i){if(Hn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!Je.call(i,g)||!Hn(n[g],i[g]))return!1}return!0}function Ap(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rp(n,i){var l=Ap(n);n=0;for(var u;l;){if(l.nodeType===3){if(u=n+l.textContent.length,n<=i&&u>=i)return{node:l,offset:i-n};n=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ap(l)}}function Np(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Np(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Dp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=_r(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=_r(n.document)}return i}function Iu(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var z2=Ps&&"documentMode"in document&&11>=document.documentMode,Ni=null,Bu=null,Yo=null,Mu=!1;function Op(n,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Mu||Ni==null||Ni!==_r(u)||(u=Ni,"selectionStart"in u&&Iu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Yo&&Vo(Yo,u)||(Yo=u,u=ld(Bu,"onSelect"),0<u.length&&(i=new _c("onSelect","select",null,i,l),n.push({event:i,listeners:u}),i.target=Ni)))}function Ya(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var Di={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionrun:Ya("Transition","TransitionRun"),transitionstart:Ya("Transition","TransitionStart"),transitioncancel:Ya("Transition","TransitionCancel"),transitionend:Ya("Transition","TransitionEnd")},Fu={},Ip={};Ps&&(Ip=document.createElement("div").style,"AnimationEvent"in window||(delete Di.animationend.animation,delete Di.animationiteration.animation,delete Di.animationstart.animation),"TransitionEvent"in window||delete Di.transitionend.transition);function Ka(n){if(Fu[n])return Fu[n];if(!Di[n])return n;var i=Di[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in Ip)return Fu[n]=i[l];return n}var Bp=Ka("animationend"),Mp=Ka("animationiteration"),Fp=Ka("animationstart"),U2=Ka("transitionrun"),W2=Ka("transitionstart"),q2=Ka("transitioncancel"),Lp=Ka("transitionend"),Pp=new Map,Lu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lu.push("scrollEnd");function gs(n,i){Pp.set(n,i),We(i,[n])}var zp=new WeakMap;function ns(n,i){if(typeof n=="object"&&n!==null){var l=zp.get(n);return l!==void 0?l:(i={value:n,source:i,stack:Tt(i)},zp.set(n,i),i)}return{value:n,source:i,stack:Tt(i)}}var ss=[],Oi=0,Pu=0;function Tc(){for(var n=Oi,i=Pu=Oi=0;i<n;){var l=ss[i];ss[i++]=null;var u=ss[i];ss[i++]=null;var g=ss[i];ss[i++]=null;var m=ss[i];if(ss[i++]=null,u!==null&&g!==null){var j=u.pending;j===null?g.next=g:(g.next=j.next,j.next=g),u.pending=g}m!==0&&Up(l,g,m)}}function jc(n,i,l,u){ss[Oi++]=n,ss[Oi++]=i,ss[Oi++]=l,ss[Oi++]=u,Pu|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function zu(n,i,l,u){return jc(n,i,l,u),Ec(n)}function Ii(n,i){return jc(n,null,null,i),Ec(n)}function Up(n,i,l){n.lanes|=l;var u=n.alternate;u!==null&&(u.lanes|=l);for(var g=!1,m=n.return;m!==null;)m.childLanes|=l,u=m.alternate,u!==null&&(u.childLanes|=l),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(g=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,g&&i!==null&&(g=31-me(l),n=m.hiddenUpdates,u=n[g],u===null?n[g]=[i]:u.push(i),i.lane=l|536870912),m):null}function Ec(n){if(50<vl)throw vl=0,Vf=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Bi={};function $2(n,i,l,u){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(n,i,l,u){return new $2(n,i,l,u)}function Uu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function zs(n,i){var l=n.alternate;return l===null?(l=Gn(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Wp(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function kc(n,i,l,u,g,m){var j=0;if(u=n,typeof n=="function")Uu(n)&&(j=1);else if(typeof n=="string")j=G_(n,l,W.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case ee:return n=Gn(31,l,i,g),n.elementType=ee,n.lanes=m,n;case w:return Xa(l.children,g,m,i);case _:j=8,g|=24;break;case S:return n=Gn(12,l,i,g|2),n.elementType=S,n.lanes=m,n;case K:return n=Gn(13,l,i,g),n.elementType=K,n.lanes=m,n;case ne:return n=Gn(19,l,i,g),n.elementType=ne,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:case O:j=10;break e;case k:j=9;break e;case L:j=11;break e;case M:j=14;break e;case re:j=16,u=null;break e}j=29,l=Error(s(130,n===null?"null":typeof n,"")),u=null}return i=Gn(j,l,i,g),i.elementType=n,i.type=u,i.lanes=m,i}function Xa(n,i,l,u){return n=Gn(7,n,u,i),n.lanes=l,n}function Wu(n,i,l){return n=Gn(6,n,null,i),n.lanes=l,n}function qu(n,i,l){return i=Gn(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Mi=[],Fi=0,Cc=null,Ac=0,as=[],is=0,Qa=null,Us=1,Ws="";function Ja(n,i){Mi[Fi++]=Ac,Mi[Fi++]=Cc,Cc=n,Ac=i}function qp(n,i,l){as[is++]=Us,as[is++]=Ws,as[is++]=Qa,Qa=n;var u=Us;n=Ws;var g=32-me(u)-1;u&=~(1<<g),l+=1;var m=32-me(i)+g;if(30<m){var j=g-g%5;m=(u&(1<<j)-1).toString(32),u>>=j,g-=j,Us=1<<32-me(i)+g|l<<g|u,Ws=m+n}else Us=1<<m|l<<g|u,Ws=n}function $u(n){n.return!==null&&(Ja(n,1),qp(n,1,0))}function Hu(n){for(;n===Cc;)Cc=Mi[--Fi],Mi[Fi]=null,Ac=Mi[--Fi],Mi[Fi]=null;for(;n===Qa;)Qa=as[--is],as[is]=null,Ws=as[--is],as[is]=null,Us=as[--is],as[is]=null}var kn=null,Br=null,nr=!1,Za=null,As=!1,Gu=Error(s(519));function ei(n){var i=Error(s(418,""));throw Qo(ns(i,n)),Gu}function $p(n){var i=n.stateNode,l=n.type,u=n.memoizedProps;switch(i[Et]=n,i[Dr]=u,l){case"dialog":$t("cancel",i),$t("close",i);break;case"iframe":case"object":case"embed":$t("load",i);break;case"video":case"audio":for(l=0;l<_l.length;l++)$t(_l[l],i);break;case"source":$t("error",i);break;case"img":case"image":case"link":$t("error",i),$t("load",i);break;case"details":$t("toggle",i);break;case"input":$t("invalid",i),Se(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ut(i);break;case"select":$t("invalid",i);break;case"textarea":$t("invalid",i),ot(i,u.value,u.defaultValue,u.children),Ut(i)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||om(i.textContent,l)?(u.popover!=null&&($t("beforetoggle",i),$t("toggle",i)),u.onScroll!=null&&$t("scroll",i),u.onScrollEnd!=null&&$t("scrollend",i),u.onClick!=null&&(i.onclick=cd),i=!0):i=!1,i||ei(n)}function Hp(n){for(kn=n.return;kn;)switch(kn.tag){case 5:case 13:As=!1;return;case 27:case 3:As=!0;return;default:kn=kn.return}}function Ko(n){if(n!==kn)return!1;if(!nr)return Hp(n),nr=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||ch(n.type,n.memoizedProps)),l=!l),l&&Br&&ei(n),Hp(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(l=n.data,l==="/$"){if(i===0){Br=ms(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++;n=n.nextSibling}Br=null}}else i===27?(i=Br,ka(n.type)?(n=hh,hh=null,Br=n):Br=i):Br=kn?ms(n.stateNode.nextSibling):null;return!0}function Xo(){Br=kn=null,nr=!1}function Gp(){var n=Za;return n!==null&&(Un===null?Un=n:Un.push.apply(Un,n),Za=null),n}function Qo(n){Za===null?Za=[n]:Za.push(n)}var Vu=U(null),ti=null,qs=null;function fa(n,i,l){P(Vu,i._currentValue),i._currentValue=l}function $s(n){n._currentValue=Vu.current,E(Vu)}function Yu(n,i,l){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===l)break;n=n.return}}function Ku(n,i,l,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var m=g.dependencies;if(m!==null){var j=g.child;m=m.firstContext;e:for(;m!==null;){var B=m;m=g;for(var Z=0;Z<i.length;Z++)if(B.context===i[Z]){m.lanes|=l,B=m.alternate,B!==null&&(B.lanes|=l),Yu(m.return,l,n),u||(j=null);break e}m=B.next}}else if(g.tag===18){if(j=g.return,j===null)throw Error(s(341));j.lanes|=l,m=j.alternate,m!==null&&(m.lanes|=l),Yu(j,l,n),j=null}else j=g.child;if(j!==null)j.return=g;else for(j=g;j!==null;){if(j===n){j=null;break}if(g=j.sibling,g!==null){g.return=j.return,j=g;break}j=j.return}g=j}}function Jo(n,i,l,u){n=null;for(var g=i,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var j=g.alternate;if(j===null)throw Error(s(387));if(j=j.memoizedProps,j!==null){var B=g.type;Hn(g.pendingProps.value,j.value)||(n!==null?n.push(B):n=[B])}}else if(g===Le.current){if(j=g.alternate,j===null)throw Error(s(387));j.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(kl):n=[kl])}g=g.return}n!==null&&Ku(i,n,l,u),i.flags|=262144}function Rc(n){for(n=n.firstContext;n!==null;){if(!Hn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ri(n){ti=n,qs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Sn(n){return Vp(ti,n)}function Nc(n,i){return ti===null&&ri(n),Vp(n,i)}function Vp(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},qs===null){if(n===null)throw Error(s(308));qs=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else qs=qs.next=i;return l}var H2=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},G2=e.unstable_scheduleCallback,V2=e.unstable_NormalPriority,Kr={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xu(){return{controller:new H2,data:new Map,refCount:0}}function Zo(n){n.refCount--,n.refCount===0&&G2(V2,function(){n.controller.abort()})}var el=null,Qu=0,Li=0,Pi=null;function Y2(n,i){if(el===null){var l=el=[];Qu=0,Li=eh(),Pi={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Qu++,i.then(Yp,Yp),i}function Yp(){if(--Qu===0&&el!==null){Pi!==null&&(Pi.status="fulfilled");var n=el;el=null,Li=0,Pi=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function K2(n,i){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<l.length;g++)(0,l[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var Kp=J.S;J.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Y2(n,i),Kp!==null&&Kp(n,i)};var ni=U(null);function Ju(){var n=ni.current;return n!==null?n:wr.pooledCache}function Dc(n,i){i===null?P(ni,ni.current):P(ni,i.pool)}function Xp(){var n=Ju();return n===null?null:{parent:Kr._currentValue,pool:n}}var tl=Error(s(460)),Qp=Error(s(474)),Oc=Error(s(542)),Zu={then:function(){}};function Jp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ic(){}function Zp(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(Ic,Ic),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,tg(n),n;default:if(typeof i.status=="string")i.then(Ic,Ic);else{if(n=wr,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,tg(n),n}throw rl=i,tl}}var rl=null;function eg(){if(rl===null)throw Error(s(459));var n=rl;return rl=null,n}function tg(n){if(n===tl||n===Oc)throw Error(s(483))}var ha=!1;function ef(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function pa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ga(n,i,l){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(cr&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=Ec(n),Up(n,null,l),i}return jc(n,u,i,l),Ec(n)}function nl(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,l|=u,i.lanes=l,Xe(n,l)}}function rf(n,i){var l=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var j={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?g=m=j:m=m.next=j,l=l.next}while(l!==null);m===null?g=m=i:m=m.next=i}else g=m=i;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var nf=!1;function sl(){if(nf){var n=Pi;if(n!==null)throw n}}function al(n,i,l,u){nf=!1;var g=n.updateQueue;ha=!1;var m=g.firstBaseUpdate,j=g.lastBaseUpdate,B=g.shared.pending;if(B!==null){g.shared.pending=null;var Z=B,_e=Z.next;Z.next=null,j===null?m=_e:j.next=_e,j=Z;var Pe=n.alternate;Pe!==null&&(Pe=Pe.updateQueue,B=Pe.lastBaseUpdate,B!==j&&(B===null?Pe.firstBaseUpdate=_e:B.next=_e,Pe.lastBaseUpdate=Z))}if(m!==null){var Ue=g.baseState;j=0,Pe=_e=Z=null,B=m;do{var ke=B.lane&-536870913,Re=ke!==B.lane;if(Re?(Kt&ke)===ke:(u&ke)===ke){ke!==0&&ke===Li&&(nf=!0),Pe!==null&&(Pe=Pe.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Rt=n,jt=B;ke=i;var vr=l;switch(jt.tag){case 1:if(Rt=jt.payload,typeof Rt=="function"){Ue=Rt.call(vr,Ue,ke);break e}Ue=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=jt.payload,ke=typeof Rt=="function"?Rt.call(vr,Ue,ke):Rt,ke==null)break e;Ue=x({},Ue,ke);break e;case 2:ha=!0}}ke=B.callback,ke!==null&&(n.flags|=64,Re&&(n.flags|=8192),Re=g.callbacks,Re===null?g.callbacks=[ke]:Re.push(ke))}else Re={lane:ke,tag:B.tag,payload:B.payload,callback:B.callback,next:null},Pe===null?(_e=Pe=Re,Z=Ue):Pe=Pe.next=Re,j|=ke;if(B=B.next,B===null){if(B=g.shared.pending,B===null)break;Re=B,B=Re.next,Re.next=null,g.lastBaseUpdate=Re,g.shared.pending=null}}while(!0);Pe===null&&(Z=Ue),g.baseState=Z,g.firstBaseUpdate=_e,g.lastBaseUpdate=Pe,m===null&&(g.shared.lanes=0),wa|=j,n.lanes=j,n.memoizedState=Ue}}function rg(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function ng(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)rg(l[n],i)}var zi=U(null),Bc=U(0);function sg(n,i){n=Qs,P(Bc,n),P(zi,i),Qs=n|i.baseLanes}function sf(){P(Bc,Qs),P(zi,zi.current)}function af(){Qs=Bc.current,E(zi),E(Bc)}var xa=0,zt=null,mr=null,qr=null,Mc=!1,Ui=!1,si=!1,Fc=0,il=0,Wi=null,X2=0;function zr(){throw Error(s(321))}function of(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!Hn(n[l],i[l]))return!1;return!0}function lf(n,i,l,u,g,m){return xa=m,zt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,J.H=n===null||n.memoizedState===null?Ug:Wg,si=!1,m=l(u,g),si=!1,Ui&&(m=ig(i,l,u,g)),ag(n),m}function ag(n){J.H=qc;var i=mr!==null&&mr.next!==null;if(xa=0,qr=mr=zt=null,Mc=!1,il=0,Wi=null,i)throw Error(s(300));n===null||nn||(n=n.dependencies,n!==null&&Rc(n)&&(nn=!0))}function ig(n,i,l,u){zt=n;var g=0;do{if(Ui&&(Wi=null),il=0,Ui=!1,25<=g)throw Error(s(301));if(g+=1,qr=mr=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}J.H=n_,m=i(l,u)}while(Ui);return m}function Q2(){var n=J.H,i=n.useState()[0];return i=typeof i.then=="function"?ol(i):i,n=n.useState()[0],(mr!==null?mr.memoizedState:null)!==n&&(zt.flags|=1024),i}function cf(){var n=Fc!==0;return Fc=0,n}function df(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function uf(n){if(Mc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Mc=!1}xa=0,qr=mr=zt=null,Ui=!1,il=Fc=0,Wi=null}function Pn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?zt.memoizedState=qr=n:qr=qr.next=n,qr}function $r(){if(mr===null){var n=zt.alternate;n=n!==null?n.memoizedState:null}else n=mr.next;var i=qr===null?zt.memoizedState:qr.next;if(i!==null)qr=i,mr=n;else{if(n===null)throw zt.alternate===null?Error(s(467)):Error(s(310));mr=n,n={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},qr===null?zt.memoizedState=qr=n:qr=qr.next=n}return qr}function ff(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(n){var i=il;return il+=1,Wi===null&&(Wi=[]),n=Zp(Wi,n,i),i=zt,(qr===null?i.memoizedState:qr.next)===null&&(i=i.alternate,J.H=i===null||i.memoizedState===null?Ug:Wg),n}function Lc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ol(n);if(n.$$typeof===O)return Sn(n)}throw Error(s(438,String(n)))}function hf(n){var i=null,l=zt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=ff(),zt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),u=0;u<n;u++)l[u]=de;return i.index++,l}function Hs(n,i){return typeof i=="function"?i(n):i}function Pc(n){var i=$r();return pf(i,mr,n)}function pf(n,i,l){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=l;var g=n.baseQueue,m=u.pending;if(m!==null){if(g!==null){var j=g.next;g.next=m.next,m.next=j}i.baseQueue=g=m,u.pending=null}if(m=n.baseState,g===null)n.memoizedState=m;else{i=g.next;var B=j=null,Z=null,_e=i,Pe=!1;do{var Ue=_e.lane&-536870913;if(Ue!==_e.lane?(Kt&Ue)===Ue:(xa&Ue)===Ue){var ke=_e.revertLane;if(ke===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),Ue===Li&&(Pe=!0);else if((xa&ke)===ke){_e=_e.next,ke===Li&&(Pe=!0);continue}else Ue={lane:0,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},Z===null?(B=Z=Ue,j=m):Z=Z.next=Ue,zt.lanes|=ke,wa|=ke;Ue=_e.action,si&&l(m,Ue),m=_e.hasEagerState?_e.eagerState:l(m,Ue)}else ke={lane:Ue,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},Z===null?(B=Z=ke,j=m):Z=Z.next=ke,zt.lanes|=Ue,wa|=Ue;_e=_e.next}while(_e!==null&&_e!==i);if(Z===null?j=m:Z.next=B,!Hn(m,n.memoizedState)&&(nn=!0,Pe&&(l=Pi,l!==null)))throw l;n.memoizedState=m,n.baseState=j,n.baseQueue=Z,u.lastRenderedState=m}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function gf(n){var i=$r(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=n;var u=l.dispatch,g=l.pending,m=i.memoizedState;if(g!==null){l.pending=null;var j=g=g.next;do m=n(m,j.action),j=j.next;while(j!==g);Hn(m,i.memoizedState)||(nn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),l.lastRenderedState=m}return[m,u]}function og(n,i,l){var u=zt,g=$r(),m=nr;if(m){if(l===void 0)throw Error(s(407));l=l()}else l=i();var j=!Hn((mr||g).memoizedState,l);j&&(g.memoizedState=l,nn=!0),g=g.queue;var B=dg.bind(null,u,g,n);if(ll(2048,8,B,[n]),g.getSnapshot!==i||j||qr!==null&&qr.memoizedState.tag&1){if(u.flags|=2048,qi(9,zc(),cg.bind(null,u,g,l,i),null),wr===null)throw Error(s(349));m||(xa&124)!==0||lg(u,i,l)}return l}function lg(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=zt.updateQueue,i===null?(i=ff(),zt.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function cg(n,i,l,u){i.value=l,i.getSnapshot=u,ug(i)&&fg(n)}function dg(n,i,l){return l(function(){ug(i)&&fg(n)})}function ug(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!Hn(n,l)}catch{return!0}}function fg(n){var i=Ii(n,2);i!==null&&Qn(i,n,2)}function xf(n){var i=Pn();if(typeof n=="function"){var l=n;if(n=l(),si){ce(!0);try{l()}finally{ce(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:n},i}function hg(n,i,l,u){return n.baseState=l,pf(n,mr,typeof u=="function"?u:Hs)}function J2(n,i,l,u,g){if(Wc(n))throw Error(s(485));if(n=i.action,n!==null){var m={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){m.listeners.push(j)}};J.T!==null?l(!0):m.isTransition=!1,u(m),l=i.pending,l===null?(m.next=i.pending=m,pg(i,m)):(m.next=l.next,i.pending=l.next=m)}}function pg(n,i){var l=i.action,u=i.payload,g=n.state;if(i.isTransition){var m=J.T,j={};J.T=j;try{var B=l(g,u),Z=J.S;Z!==null&&Z(j,B),gg(n,i,B)}catch(_e){mf(n,i,_e)}finally{J.T=m}}else try{m=l(g,u),gg(n,i,m)}catch(_e){mf(n,i,_e)}}function gg(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){xg(n,i,u)},function(u){return mf(n,i,u)}):xg(n,i,l)}function xg(n,i,l){i.status="fulfilled",i.value=l,mg(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,pg(n,l)))}function mf(n,i,l){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,mg(i),i=i.next;while(i!==u)}n.action=null}function mg(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function yg(n,i){return i}function vg(n,i){if(nr){var l=wr.formState;if(l!==null){e:{var u=zt;if(nr){if(Br){t:{for(var g=Br,m=As;g.nodeType!==8;){if(!m){g=null;break t}if(g=ms(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Br=ms(g.nextSibling),u=g.data==="F!";break e}}ei(u)}u=!1}u&&(i=l[0])}}return l=Pn(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yg,lastRenderedState:i},l.queue=u,l=Lg.bind(null,zt,u),u.dispatch=l,u=xf(!1),m=Sf.bind(null,zt,!1,u.queue),u=Pn(),g={state:i,dispatch:null,action:n,pending:null},u.queue=g,l=J2.bind(null,zt,g,m,l),g.dispatch=l,u.memoizedState=n,[i,l,!1]}function bg(n){var i=$r();return _g(i,mr,n)}function _g(n,i,l){if(i=pf(n,i,yg)[0],n=Pc(Hs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=ol(i)}catch(j){throw j===tl?Oc:j}else u=i;i=$r();var g=i.queue,m=g.dispatch;return l!==i.memoizedState&&(zt.flags|=2048,qi(9,zc(),Z2.bind(null,g,l),null)),[u,m,n]}function Z2(n,i){n.action=i}function Sg(n){var i=$r(),l=mr;if(l!==null)return _g(i,l,n);$r(),i=i.memoizedState,l=$r();var u=l.queue.dispatch;return l.memoizedState=n,[i,u,!1]}function qi(n,i,l,u){return n={tag:n,create:l,deps:u,inst:i,next:null},i=zt.updateQueue,i===null&&(i=ff(),zt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(u=l.next,l.next=n,n.next=u,i.lastEffect=n),n}function zc(){return{destroy:void 0,resource:void 0}}function wg(){return $r().memoizedState}function Uc(n,i,l,u){var g=Pn();u=u===void 0?null:u,zt.flags|=n,g.memoizedState=qi(1|i,zc(),l,u)}function ll(n,i,l,u){var g=$r();u=u===void 0?null:u;var m=g.memoizedState.inst;mr!==null&&u!==null&&of(u,mr.memoizedState.deps)?g.memoizedState=qi(i,m,l,u):(zt.flags|=n,g.memoizedState=qi(1|i,m,l,u))}function Tg(n,i){Uc(8390656,8,n,i)}function jg(n,i){ll(2048,8,n,i)}function Eg(n,i){return ll(4,2,n,i)}function kg(n,i){return ll(4,4,n,i)}function Cg(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Ag(n,i,l){l=l!=null?l.concat([n]):null,ll(4,4,Cg.bind(null,i,n),l)}function yf(){}function Rg(n,i){var l=$r();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&of(i,u[1])?u[0]:(l.memoizedState=[n,i],n)}function Ng(n,i){var l=$r();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&of(i,u[1]))return u[0];if(u=n(),si){ce(!0);try{n()}finally{ce(!1)}}return l.memoizedState=[u,i],u}function vf(n,i,l){return l===void 0||(xa&1073741824)!==0?n.memoizedState=i:(n.memoizedState=l,n=Ix(),zt.lanes|=n,wa|=n,l)}function Dg(n,i,l,u){return Hn(l,i)?l:zi.current!==null?(n=vf(n,l,u),Hn(n,i)||(nn=!0),n):(xa&42)===0?(nn=!0,n.memoizedState=l):(n=Ix(),zt.lanes|=n,wa|=n,i)}function Og(n,i,l,u,g){var m=fe.p;fe.p=m!==0&&8>m?m:8;var j=J.T,B={};J.T=B,Sf(n,!1,i,l);try{var Z=g(),_e=J.S;if(_e!==null&&_e(B,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Pe=K2(Z,u);cl(n,i,Pe,Xn(n))}else cl(n,i,u,Xn(n))}catch(Ue){cl(n,i,{then:function(){},status:"rejected",reason:Ue},Xn())}finally{fe.p=m,J.T=j}}function e_(){}function bf(n,i,l,u){if(n.tag!==5)throw Error(s(476));var g=Ig(n).queue;Og(n,g,i,se,l===null?e_:function(){return Bg(n),l(u)})}function Ig(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:se},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Bg(n){var i=Ig(n).next.queue;cl(n,i,{},Xn())}function _f(){return Sn(kl)}function Mg(){return $r().memoizedState}function Fg(){return $r().memoizedState}function t_(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=Xn();n=pa(l);var u=ga(i,n,l);u!==null&&(Qn(u,i,l),nl(u,i,l)),i={cache:Xu()},n.payload=i;return}i=i.return}}function r_(n,i,l){var u=Xn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Wc(n)?Pg(i,l):(l=zu(n,i,l,u),l!==null&&(Qn(l,n,u),zg(l,i,u)))}function Lg(n,i,l){var u=Xn();cl(n,i,l,u)}function cl(n,i,l,u){var g={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Wc(n))Pg(i,g);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var j=i.lastRenderedState,B=m(j,l);if(g.hasEagerState=!0,g.eagerState=B,Hn(B,j))return jc(n,i,g,0),wr===null&&Tc(),!1}catch{}finally{}if(l=zu(n,i,g,u),l!==null)return Qn(l,n,u),zg(l,i,u),!0}return!1}function Sf(n,i,l,u){if(u={lane:2,revertLane:eh(),action:u,hasEagerState:!1,eagerState:null,next:null},Wc(n)){if(i)throw Error(s(479))}else i=zu(n,l,u,2),i!==null&&Qn(i,n,2)}function Wc(n){var i=n.alternate;return n===zt||i!==null&&i===zt}function Pg(n,i){Ui=Mc=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function zg(n,i,l){if((l&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,l|=u,i.lanes=l,Xe(n,l)}}var qc={readContext:Sn,use:Lc,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useLayoutEffect:zr,useInsertionEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useSyncExternalStore:zr,useId:zr,useHostTransitionStatus:zr,useFormState:zr,useActionState:zr,useOptimistic:zr,useMemoCache:zr,useCacheRefresh:zr},Ug={readContext:Sn,use:Lc,useCallback:function(n,i){return Pn().memoizedState=[n,i===void 0?null:i],n},useContext:Sn,useEffect:Tg,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,Uc(4194308,4,Cg.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Uc(4194308,4,n,i)},useInsertionEffect:function(n,i){Uc(4,2,n,i)},useMemo:function(n,i){var l=Pn();i=i===void 0?null:i;var u=n();if(si){ce(!0);try{n()}finally{ce(!1)}}return l.memoizedState=[u,i],u},useReducer:function(n,i,l){var u=Pn();if(l!==void 0){var g=l(i);if(si){ce(!0);try{l(i)}finally{ce(!1)}}}else g=i;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=r_.bind(null,zt,n),[u.memoizedState,n]},useRef:function(n){var i=Pn();return n={current:n},i.memoizedState=n},useState:function(n){n=xf(n);var i=n.queue,l=Lg.bind(null,zt,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:yf,useDeferredValue:function(n,i){var l=Pn();return vf(l,n,i)},useTransition:function(){var n=xf(!1);return n=Og.bind(null,zt,n.queue,!0,!1),Pn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var u=zt,g=Pn();if(nr){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),wr===null)throw Error(s(349));(Kt&124)!==0||lg(u,i,l)}g.memoizedState=l;var m={value:l,getSnapshot:i};return g.queue=m,Tg(dg.bind(null,u,m,n),[n]),u.flags|=2048,qi(9,zc(),cg.bind(null,u,m,l,i),null),l},useId:function(){var n=Pn(),i=wr.identifierPrefix;if(nr){var l=Ws,u=Us;l=(u&~(1<<32-me(u)-1)).toString(32)+l,i=""+i+"R"+l,l=Fc++,0<l&&(i+="H"+l.toString(32)),i+=""}else l=X2++,i=""+i+"r"+l.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:_f,useFormState:vg,useActionState:vg,useOptimistic:function(n){var i=Pn();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Sf.bind(null,zt,!0,l),l.dispatch=i,[n,i]},useMemoCache:hf,useCacheRefresh:function(){return Pn().memoizedState=t_.bind(null,zt)}},Wg={readContext:Sn,use:Lc,useCallback:Rg,useContext:Sn,useEffect:jg,useImperativeHandle:Ag,useInsertionEffect:Eg,useLayoutEffect:kg,useMemo:Ng,useReducer:Pc,useRef:wg,useState:function(){return Pc(Hs)},useDebugValue:yf,useDeferredValue:function(n,i){var l=$r();return Dg(l,mr.memoizedState,n,i)},useTransition:function(){var n=Pc(Hs)[0],i=$r().memoizedState;return[typeof n=="boolean"?n:ol(n),i]},useSyncExternalStore:og,useId:Mg,useHostTransitionStatus:_f,useFormState:bg,useActionState:bg,useOptimistic:function(n,i){var l=$r();return hg(l,mr,n,i)},useMemoCache:hf,useCacheRefresh:Fg},n_={readContext:Sn,use:Lc,useCallback:Rg,useContext:Sn,useEffect:jg,useImperativeHandle:Ag,useInsertionEffect:Eg,useLayoutEffect:kg,useMemo:Ng,useReducer:gf,useRef:wg,useState:function(){return gf(Hs)},useDebugValue:yf,useDeferredValue:function(n,i){var l=$r();return mr===null?vf(l,n,i):Dg(l,mr.memoizedState,n,i)},useTransition:function(){var n=gf(Hs)[0],i=$r().memoizedState;return[typeof n=="boolean"?n:ol(n),i]},useSyncExternalStore:og,useId:Mg,useHostTransitionStatus:_f,useFormState:Sg,useActionState:Sg,useOptimistic:function(n,i){var l=$r();return mr!==null?hg(l,mr,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:hf,useCacheRefresh:Fg},$i=null,dl=0;function $c(n){var i=dl;return dl+=1,$i===null&&($i=[]),Zp($i,n,i)}function ul(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Hc(n,i){throw i.$$typeof===v?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function qg(n){var i=n._init;return i(n._payload)}function $g(n){function i(pe,le){if(n){var ye=pe.deletions;ye===null?(pe.deletions=[le],pe.flags|=16):ye.push(le)}}function l(pe,le){if(!n)return null;for(;le!==null;)i(pe,le),le=le.sibling;return null}function u(pe){for(var le=new Map;pe!==null;)pe.key!==null?le.set(pe.key,pe):le.set(pe.index,pe),pe=pe.sibling;return le}function g(pe,le){return pe=zs(pe,le),pe.index=0,pe.sibling=null,pe}function m(pe,le,ye){return pe.index=ye,n?(ye=pe.alternate,ye!==null?(ye=ye.index,ye<le?(pe.flags|=67108866,le):ye):(pe.flags|=67108866,le)):(pe.flags|=1048576,le)}function j(pe){return n&&pe.alternate===null&&(pe.flags|=67108866),pe}function B(pe,le,ye,ze){return le===null||le.tag!==6?(le=Wu(ye,pe.mode,ze),le.return=pe,le):(le=g(le,ye),le.return=pe,le)}function Z(pe,le,ye,ze){var dt=ye.type;return dt===w?Pe(pe,le,ye.props.children,ze,ye.key):le!==null&&(le.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===re&&qg(dt)===le.type)?(le=g(le,ye.props),ul(le,ye),le.return=pe,le):(le=kc(ye.type,ye.key,ye.props,null,pe.mode,ze),ul(le,ye),le.return=pe,le)}function _e(pe,le,ye,ze){return le===null||le.tag!==4||le.stateNode.containerInfo!==ye.containerInfo||le.stateNode.implementation!==ye.implementation?(le=qu(ye,pe.mode,ze),le.return=pe,le):(le=g(le,ye.children||[]),le.return=pe,le)}function Pe(pe,le,ye,ze,dt){return le===null||le.tag!==7?(le=Xa(ye,pe.mode,ze,dt),le.return=pe,le):(le=g(le,ye),le.return=pe,le)}function Ue(pe,le,ye){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=Wu(""+le,pe.mode,ye),le.return=pe,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case y:return ye=kc(le.type,le.key,le.props,null,pe.mode,ye),ul(ye,le),ye.return=pe,ye;case b:return le=qu(le,pe.mode,ye),le.return=pe,le;case re:var ze=le._init;return le=ze(le._payload),Ue(pe,le,ye)}if(X(le)||Q(le))return le=Xa(le,pe.mode,ye,null),le.return=pe,le;if(typeof le.then=="function")return Ue(pe,$c(le),ye);if(le.$$typeof===O)return Ue(pe,Nc(pe,le),ye);Hc(pe,le)}return null}function ke(pe,le,ye,ze){var dt=le!==null?le.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return dt!==null?null:B(pe,le,""+ye,ze);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case y:return ye.key===dt?Z(pe,le,ye,ze):null;case b:return ye.key===dt?_e(pe,le,ye,ze):null;case re:return dt=ye._init,ye=dt(ye._payload),ke(pe,le,ye,ze)}if(X(ye)||Q(ye))return dt!==null?null:Pe(pe,le,ye,ze,null);if(typeof ye.then=="function")return ke(pe,le,$c(ye),ze);if(ye.$$typeof===O)return ke(pe,le,Nc(pe,ye),ze);Hc(pe,ye)}return null}function Re(pe,le,ye,ze,dt){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return pe=pe.get(ye)||null,B(le,pe,""+ze,dt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case y:return pe=pe.get(ze.key===null?ye:ze.key)||null,Z(le,pe,ze,dt);case b:return pe=pe.get(ze.key===null?ye:ze.key)||null,_e(le,pe,ze,dt);case re:var Wt=ze._init;return ze=Wt(ze._payload),Re(pe,le,ye,ze,dt)}if(X(ze)||Q(ze))return pe=pe.get(ye)||null,Pe(le,pe,ze,dt,null);if(typeof ze.then=="function")return Re(pe,le,ye,$c(ze),dt);if(ze.$$typeof===O)return Re(pe,le,ye,Nc(le,ze),dt);Hc(le,ze)}return null}function Rt(pe,le,ye,ze){for(var dt=null,Wt=null,xt=le,kt=le=0,an=null;xt!==null&&kt<ye.length;kt++){xt.index>kt?(an=xt,xt=null):an=xt.sibling;var tr=ke(pe,xt,ye[kt],ze);if(tr===null){xt===null&&(xt=an);break}n&&xt&&tr.alternate===null&&i(pe,xt),le=m(tr,le,kt),Wt===null?dt=tr:Wt.sibling=tr,Wt=tr,xt=an}if(kt===ye.length)return l(pe,xt),nr&&Ja(pe,kt),dt;if(xt===null){for(;kt<ye.length;kt++)xt=Ue(pe,ye[kt],ze),xt!==null&&(le=m(xt,le,kt),Wt===null?dt=xt:Wt.sibling=xt,Wt=xt);return nr&&Ja(pe,kt),dt}for(xt=u(xt);kt<ye.length;kt++)an=Re(xt,pe,kt,ye[kt],ze),an!==null&&(n&&an.alternate!==null&&xt.delete(an.key===null?kt:an.key),le=m(an,le,kt),Wt===null?dt=an:Wt.sibling=an,Wt=an);return n&&xt.forEach(function(Da){return i(pe,Da)}),nr&&Ja(pe,kt),dt}function jt(pe,le,ye,ze){if(ye==null)throw Error(s(151));for(var dt=null,Wt=null,xt=le,kt=le=0,an=null,tr=ye.next();xt!==null&&!tr.done;kt++,tr=ye.next()){xt.index>kt?(an=xt,xt=null):an=xt.sibling;var Da=ke(pe,xt,tr.value,ze);if(Da===null){xt===null&&(xt=an);break}n&&xt&&Da.alternate===null&&i(pe,xt),le=m(Da,le,kt),Wt===null?dt=Da:Wt.sibling=Da,Wt=Da,xt=an}if(tr.done)return l(pe,xt),nr&&Ja(pe,kt),dt;if(xt===null){for(;!tr.done;kt++,tr=ye.next())tr=Ue(pe,tr.value,ze),tr!==null&&(le=m(tr,le,kt),Wt===null?dt=tr:Wt.sibling=tr,Wt=tr);return nr&&Ja(pe,kt),dt}for(xt=u(xt);!tr.done;kt++,tr=ye.next())tr=Re(xt,pe,kt,tr.value,ze),tr!==null&&(n&&tr.alternate!==null&&xt.delete(tr.key===null?kt:tr.key),le=m(tr,le,kt),Wt===null?dt=tr:Wt.sibling=tr,Wt=tr);return n&&xt.forEach(function(sS){return i(pe,sS)}),nr&&Ja(pe,kt),dt}function vr(pe,le,ye,ze){if(typeof ye=="object"&&ye!==null&&ye.type===w&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case y:e:{for(var dt=ye.key;le!==null;){if(le.key===dt){if(dt=ye.type,dt===w){if(le.tag===7){l(pe,le.sibling),ze=g(le,ye.props.children),ze.return=pe,pe=ze;break e}}else if(le.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===re&&qg(dt)===le.type){l(pe,le.sibling),ze=g(le,ye.props),ul(ze,ye),ze.return=pe,pe=ze;break e}l(pe,le);break}else i(pe,le);le=le.sibling}ye.type===w?(ze=Xa(ye.props.children,pe.mode,ze,ye.key),ze.return=pe,pe=ze):(ze=kc(ye.type,ye.key,ye.props,null,pe.mode,ze),ul(ze,ye),ze.return=pe,pe=ze)}return j(pe);case b:e:{for(dt=ye.key;le!==null;){if(le.key===dt)if(le.tag===4&&le.stateNode.containerInfo===ye.containerInfo&&le.stateNode.implementation===ye.implementation){l(pe,le.sibling),ze=g(le,ye.children||[]),ze.return=pe,pe=ze;break e}else{l(pe,le);break}else i(pe,le);le=le.sibling}ze=qu(ye,pe.mode,ze),ze.return=pe,pe=ze}return j(pe);case re:return dt=ye._init,ye=dt(ye._payload),vr(pe,le,ye,ze)}if(X(ye))return Rt(pe,le,ye,ze);if(Q(ye)){if(dt=Q(ye),typeof dt!="function")throw Error(s(150));return ye=dt.call(ye),jt(pe,le,ye,ze)}if(typeof ye.then=="function")return vr(pe,le,$c(ye),ze);if(ye.$$typeof===O)return vr(pe,le,Nc(pe,ye),ze);Hc(pe,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint"?(ye=""+ye,le!==null&&le.tag===6?(l(pe,le.sibling),ze=g(le,ye),ze.return=pe,pe=ze):(l(pe,le),ze=Wu(ye,pe.mode,ze),ze.return=pe,pe=ze),j(pe)):l(pe,le)}return function(pe,le,ye,ze){try{dl=0;var dt=vr(pe,le,ye,ze);return $i=null,dt}catch(xt){if(xt===tl||xt===Oc)throw xt;var Wt=Gn(29,xt,null,pe.mode);return Wt.lanes=ze,Wt.return=pe,Wt}finally{}}}var Hi=$g(!0),Hg=$g(!1),os=U(null),Rs=null;function ma(n){var i=n.alternate;P(Xr,Xr.current&1),P(os,n),Rs===null&&(i===null||zi.current!==null||i.memoizedState!==null)&&(Rs=n)}function Gg(n){if(n.tag===22){if(P(Xr,Xr.current),P(os,n),Rs===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Rs=n)}}else ya()}function ya(){P(Xr,Xr.current),P(os,os.current)}function Gs(n){E(os),Rs===n&&(Rs=null),E(Xr)}var Xr=U(0);function Gc(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||fh(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function wf(n,i,l,u){i=n.memoizedState,l=l(u,i),l=l==null?i:x({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Tf={enqueueSetState:function(n,i,l){n=n._reactInternals;var u=Xn(),g=pa(u);g.payload=i,l!=null&&(g.callback=l),i=ga(n,g,u),i!==null&&(Qn(i,n,u),nl(i,n,u))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var u=Xn(),g=pa(u);g.tag=1,g.payload=i,l!=null&&(g.callback=l),i=ga(n,g,u),i!==null&&(Qn(i,n,u),nl(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=Xn(),u=pa(l);u.tag=2,i!=null&&(u.callback=i),i=ga(n,u,l),i!==null&&(Qn(i,n,l),nl(i,n,l))}};function Vg(n,i,l,u,g,m,j){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,j):i.prototype&&i.prototype.isPureReactComponent?!Vo(l,u)||!Vo(g,m):!0}function Yg(n,i,l,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==n&&Tf.enqueueReplaceState(i,i.state,null)}function ai(n,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(n=n.defaultProps){l===i&&(l=x({},l));for(var g in n)l[g]===void 0&&(l[g]=n[g])}return l}var Vc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Kg(n){Vc(n)}function Xg(n){console.error(n)}function Qg(n){Vc(n)}function Yc(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Jg(n,i,l){try{var u=n.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function jf(n,i,l){return l=pa(l),l.tag=3,l.payload={element:null},l.callback=function(){Yc(n,i)},l}function Zg(n){return n=pa(n),n.tag=3,n}function ex(n,i,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var m=u.value;n.payload=function(){return g(m)},n.callback=function(){Jg(i,l,u)}}var j=l.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(n.callback=function(){Jg(i,l,u),typeof g!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var B=u.stack;this.componentDidCatch(u.value,{componentStack:B!==null?B:""})})}function s_(n,i,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&Jo(i,l,g,!0),l=os.current,l!==null){switch(l.tag){case 13:return Rs===null?Kf():l.alternate===null&&Mr===0&&(Mr=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===Zu?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),Qf(n,u,g)),!1;case 22:return l.flags|=65536,u===Zu?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),Qf(n,u,g)),!1}throw Error(s(435,l.tag))}return Qf(n,u,g),Kf(),!1}if(nr)return i=os.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==Gu&&(n=Error(s(422),{cause:u}),Qo(ns(n,l)))):(u!==Gu&&(i=Error(s(423),{cause:u}),Qo(ns(i,l))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=ns(u,l),g=jf(n.stateNode,u,g),rf(n,g),Mr!==4&&(Mr=2)),!1;var m=Error(s(520),{cause:u});if(m=ns(m,l),yl===null?yl=[m]:yl.push(m),Mr!==4&&(Mr=2),i===null)return!0;u=ns(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=g&-g,l.lanes|=n,n=jf(l.stateNode,u,n),rf(l,n),!1;case 1:if(i=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ta===null||!Ta.has(m))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Zg(g),ex(g,n,l,u),rf(l,g),!1}l=l.return}while(l!==null);return!1}var tx=Error(s(461)),nn=!1;function un(n,i,l,u){i.child=n===null?Hg(i,null,l,u):Hi(i,n.child,l,u)}function rx(n,i,l,u,g){l=l.render;var m=i.ref;if("ref"in u){var j={};for(var B in u)B!=="ref"&&(j[B]=u[B])}else j=u;return ri(i),u=lf(n,i,l,j,m,g),B=cf(),n!==null&&!nn?(df(n,i,g),Vs(n,i,g)):(nr&&B&&$u(i),i.flags|=1,un(n,i,u,g),i.child)}function nx(n,i,l,u,g){if(n===null){var m=l.type;return typeof m=="function"&&!Uu(m)&&m.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=m,sx(n,i,m,u,g)):(n=kc(l.type,null,u,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Of(n,g)){var j=m.memoizedProps;if(l=l.compare,l=l!==null?l:Vo,l(j,u)&&n.ref===i.ref)return Vs(n,i,g)}return i.flags|=1,n=zs(m,u),n.ref=i.ref,n.return=i,i.child=n}function sx(n,i,l,u,g){if(n!==null){var m=n.memoizedProps;if(Vo(m,u)&&n.ref===i.ref)if(nn=!1,i.pendingProps=u=m,Of(n,g))(n.flags&131072)!==0&&(nn=!0);else return i.lanes=n.lanes,Vs(n,i,g)}return Ef(n,i,l,u,g)}function ax(n,i,l){var u=i.pendingProps,g=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|l:l,n!==null){for(g=i.child=n.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return ix(n,i,u,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Dc(i,m!==null?m.cachePool:null),m!==null?sg(i,m):sf(),Gg(i);else return i.lanes=i.childLanes=536870912,ix(n,i,m!==null?m.baseLanes|l:l,l)}else m!==null?(Dc(i,m.cachePool),sg(i,m),ya(),i.memoizedState=null):(n!==null&&Dc(i,null),sf(),ya());return un(n,i,g,l),i.child}function ix(n,i,l,u){var g=Ju();return g=g===null?null:{parent:Kr._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},n!==null&&Dc(i,null),sf(),Gg(i),n!==null&&Jo(n,i,u,!0),null}function Kc(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function Ef(n,i,l,u,g){return ri(i),l=lf(n,i,l,u,void 0,g),u=cf(),n!==null&&!nn?(df(n,i,g),Vs(n,i,g)):(nr&&u&&$u(i),i.flags|=1,un(n,i,l,g),i.child)}function ox(n,i,l,u,g,m){return ri(i),i.updateQueue=null,l=ig(i,u,l,g),ag(n),u=cf(),n!==null&&!nn?(df(n,i,m),Vs(n,i,m)):(nr&&u&&$u(i),i.flags|=1,un(n,i,l,m),i.child)}function lx(n,i,l,u,g){if(ri(i),i.stateNode===null){var m=Bi,j=l.contextType;typeof j=="object"&&j!==null&&(m=Sn(j)),m=new l(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Tf,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},ef(i),j=l.contextType,m.context=typeof j=="object"&&j!==null?Sn(j):Bi,m.state=i.memoizedState,j=l.getDerivedStateFromProps,typeof j=="function"&&(wf(i,l,j,u),m.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(j=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),j!==m.state&&Tf.enqueueReplaceState(m,m.state,null),al(i,u,m,g),sl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){m=i.stateNode;var B=i.memoizedProps,Z=ai(l,B);m.props=Z;var _e=m.context,Pe=l.contextType;j=Bi,typeof Pe=="object"&&Pe!==null&&(j=Sn(Pe));var Ue=l.getDerivedStateFromProps;Pe=typeof Ue=="function"||typeof m.getSnapshotBeforeUpdate=="function",B=i.pendingProps!==B,Pe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(B||_e!==j)&&Yg(i,m,u,j),ha=!1;var ke=i.memoizedState;m.state=ke,al(i,u,m,g),sl(),_e=i.memoizedState,B||ke!==_e||ha?(typeof Ue=="function"&&(wf(i,l,Ue,u),_e=i.memoizedState),(Z=ha||Vg(i,l,Z,u,ke,_e,j))?(Pe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=_e),m.props=u,m.state=_e,m.context=j,u=Z):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,tf(n,i),j=i.memoizedProps,Pe=ai(l,j),m.props=Pe,Ue=i.pendingProps,ke=m.context,_e=l.contextType,Z=Bi,typeof _e=="object"&&_e!==null&&(Z=Sn(_e)),B=l.getDerivedStateFromProps,(_e=typeof B=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(j!==Ue||ke!==Z)&&Yg(i,m,u,Z),ha=!1,ke=i.memoizedState,m.state=ke,al(i,u,m,g),sl();var Re=i.memoizedState;j!==Ue||ke!==Re||ha||n!==null&&n.dependencies!==null&&Rc(n.dependencies)?(typeof B=="function"&&(wf(i,l,B,u),Re=i.memoizedState),(Pe=ha||Vg(i,l,Pe,u,ke,Re,Z)||n!==null&&n.dependencies!==null&&Rc(n.dependencies))?(_e||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Re,Z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Re,Z)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||j===n.memoizedProps&&ke===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&ke===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Re),m.props=u,m.state=Re,m.context=Z,u=Pe):(typeof m.componentDidUpdate!="function"||j===n.memoizedProps&&ke===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&ke===n.memoizedState||(i.flags|=1024),u=!1)}return m=u,Kc(n,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&u?(i.child=Hi(i,n.child,null,g),i.child=Hi(i,null,l,g)):un(n,i,l,g),i.memoizedState=m.state,n=i.child):n=Vs(n,i,g),n}function cx(n,i,l,u){return Xo(),i.flags|=256,un(n,i,l,u),i.child}var kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(n){return{baseLanes:n,cachePool:Xp()}}function Af(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=ls),n}function dx(n,i,l){var u=i.pendingProps,g=!1,m=(i.flags&128)!==0,j;if((j=m)||(j=n!==null&&n.memoizedState===null?!1:(Xr.current&2)!==0),j&&(g=!0,i.flags&=-129),j=(i.flags&32)!==0,i.flags&=-33,n===null){if(nr){if(g?ma(i):ya(),nr){var B=Br,Z;if(Z=B){e:{for(Z=B,B=As;Z.nodeType!==8;){if(!B){B=null;break e}if(Z=ms(Z.nextSibling),Z===null){B=null;break e}}B=Z}B!==null?(i.memoizedState={dehydrated:B,treeContext:Qa!==null?{id:Us,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},Z=Gn(18,null,null,0),Z.stateNode=B,Z.return=i,i.child=Z,kn=i,Br=null,Z=!0):Z=!1}Z||ei(i)}if(B=i.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return fh(B)?i.lanes=32:i.lanes=536870912,null;Gs(i)}return B=u.children,u=u.fallback,g?(ya(),g=i.mode,B=Xc({mode:"hidden",children:B},g),u=Xa(u,g,l,null),B.return=i,u.return=i,B.sibling=u,i.child=B,g=i.child,g.memoizedState=Cf(l),g.childLanes=Af(n,j,l),i.memoizedState=kf,u):(ma(i),Rf(i,B))}if(Z=n.memoizedState,Z!==null&&(B=Z.dehydrated,B!==null)){if(m)i.flags&256?(ma(i),i.flags&=-257,i=Nf(n,i,l)):i.memoizedState!==null?(ya(),i.child=n.child,i.flags|=128,i=null):(ya(),g=u.fallback,B=i.mode,u=Xc({mode:"visible",children:u.children},B),g=Xa(g,B,l,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,Hi(i,n.child,null,l),u=i.child,u.memoizedState=Cf(l),u.childLanes=Af(n,j,l),i.memoizedState=kf,i=g);else if(ma(i),fh(B)){if(j=B.nextSibling&&B.nextSibling.dataset,j)var _e=j.dgst;j=_e,u=Error(s(419)),u.stack="",u.digest=j,Qo({value:u,source:null,stack:null}),i=Nf(n,i,l)}else if(nn||Jo(n,i,l,!1),j=(l&n.childLanes)!==0,nn||j){if(j=wr,j!==null&&(u=l&-l,u=(u&42)!==0?1:Wr(u),u=(u&(j.suspendedLanes|l))!==0?0:u,u!==0&&u!==Z.retryLane))throw Z.retryLane=u,Ii(n,u),Qn(j,n,u),tx;B.data==="$?"||Kf(),i=Nf(n,i,l)}else B.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=Z.treeContext,Br=ms(B.nextSibling),kn=i,nr=!0,Za=null,As=!1,n!==null&&(as[is++]=Us,as[is++]=Ws,as[is++]=Qa,Us=n.id,Ws=n.overflow,Qa=i),i=Rf(i,u.children),i.flags|=4096);return i}return g?(ya(),g=u.fallback,B=i.mode,Z=n.child,_e=Z.sibling,u=zs(Z,{mode:"hidden",children:u.children}),u.subtreeFlags=Z.subtreeFlags&65011712,_e!==null?g=zs(_e,g):(g=Xa(g,B,l,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,B=n.child.memoizedState,B===null?B=Cf(l):(Z=B.cachePool,Z!==null?(_e=Kr._currentValue,Z=Z.parent!==_e?{parent:_e,pool:_e}:Z):Z=Xp(),B={baseLanes:B.baseLanes|l,cachePool:Z}),g.memoizedState=B,g.childLanes=Af(n,j,l),i.memoizedState=kf,u):(ma(i),l=n.child,n=l.sibling,l=zs(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,n!==null&&(j=i.deletions,j===null?(i.deletions=[n],i.flags|=16):j.push(n)),i.child=l,i.memoizedState=null,l)}function Rf(n,i){return i=Xc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Xc(n,i){return n=Gn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Nf(n,i,l){return Hi(i,n.child,null,l),n=Rf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function ux(n,i,l){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Yu(n.return,i,l)}function Df(n,i,l,u,g){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=l,m.tailMode=g)}function fx(n,i,l){var u=i.pendingProps,g=u.revealOrder,m=u.tail;if(un(n,i,u.children,l),u=Xr.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ux(n,l,i);else if(n.tag===19)ux(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(P(Xr,u),g){case"forwards":for(l=i.child,g=null;l!==null;)n=l.alternate,n!==null&&Gc(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),Df(i,!1,g,l,m);break;case"backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&Gc(n)===null){i.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}Df(i,!0,l,null,m);break;case"together":Df(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Vs(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),wa|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(Jo(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,l=zs(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=zs(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function Of(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Rc(n)))}function a_(n,i,l){switch(i.tag){case 3:Ce(i,i.stateNode.containerInfo),fa(i,Kr,n.memoizedState.cache),Xo();break;case 27:case 5:Be(i);break;case 4:Ce(i,i.stateNode.containerInfo);break;case 10:fa(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ma(i),i.flags|=128,null):(l&i.child.childLanes)!==0?dx(n,i,l):(ma(i),n=Vs(n,i,l),n!==null?n.sibling:null);ma(i);break;case 19:var g=(n.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(Jo(n,i,l,!1),u=(l&i.childLanes)!==0),g){if(u)return fx(n,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),P(Xr,Xr.current),u)break;return null;case 22:case 23:return i.lanes=0,ax(n,i,l);case 24:fa(i,Kr,n.memoizedState.cache)}return Vs(n,i,l)}function hx(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)nn=!0;else{if(!Of(n,l)&&(i.flags&128)===0)return nn=!1,a_(n,i,l);nn=(n.flags&131072)!==0}else nn=!1,nr&&(i.flags&1048576)!==0&&qp(i,Ac,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,g=u._init;if(u=g(u._payload),i.type=u,typeof u=="function")Uu(u)?(n=ai(u,n),i.tag=1,i=lx(null,i,u,n,l)):(i.tag=0,i=Ef(null,i,u,n,l));else{if(u!=null){if(g=u.$$typeof,g===L){i.tag=11,i=rx(null,i,u,n,l);break e}else if(g===M){i.tag=14,i=nx(null,i,u,n,l);break e}}throw i=ae(u)||u,Error(s(306,i,""))}}return i;case 0:return Ef(n,i,i.type,i.pendingProps,l);case 1:return u=i.type,g=ai(u,i.pendingProps),lx(n,i,u,g,l);case 3:e:{if(Ce(i,i.stateNode.containerInfo),n===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;g=m.element,tf(n,i),al(i,u,null,l);var j=i.memoizedState;if(u=j.cache,fa(i,Kr,u),u!==m.cache&&Ku(i,[Kr],l,!0),sl(),u=j.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:j.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=cx(n,i,u,l);break e}else if(u!==g){g=ns(Error(s(424)),i),Qo(g),i=cx(n,i,u,l);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Br=ms(n.firstChild),kn=i,nr=!0,Za=null,As=!0,l=Hg(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Xo(),u===g){i=Vs(n,i,l);break e}un(n,i,u,l)}i=i.child}return i;case 26:return Kc(n,i),n===null?(l=mm(i.type,null,i.pendingProps,null))?i.memoizedState=l:nr||(l=i.type,n=i.pendingProps,u=dd(ue.current).createElement(l),u[Et]=i,u[Dr]=n,hn(u,l,n),ge(u),i.stateNode=u):i.memoizedState=mm(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Be(i),n===null&&nr&&(u=i.stateNode=pm(i.type,i.pendingProps,ue.current),kn=i,As=!0,g=Br,ka(i.type)?(hh=g,Br=ms(u.firstChild)):Br=g),un(n,i,i.pendingProps.children,l),Kc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&nr&&((g=u=Br)&&(u=O_(u,i.type,i.pendingProps,As),u!==null?(i.stateNode=u,kn=i,Br=ms(u.firstChild),As=!1,g=!0):g=!1),g||ei(i)),Be(i),g=i.type,m=i.pendingProps,j=n!==null?n.memoizedProps:null,u=m.children,ch(g,m)?u=null:j!==null&&ch(g,j)&&(i.flags|=32),i.memoizedState!==null&&(g=lf(n,i,Q2,null,null,l),kl._currentValue=g),Kc(n,i),un(n,i,u,l),i.child;case 6:return n===null&&nr&&((n=l=Br)&&(l=I_(l,i.pendingProps,As),l!==null?(i.stateNode=l,kn=i,Br=null,n=!0):n=!1),n||ei(i)),null;case 13:return dx(n,i,l);case 4:return Ce(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Hi(i,null,u,l):un(n,i,u,l),i.child;case 11:return rx(n,i,i.type,i.pendingProps,l);case 7:return un(n,i,i.pendingProps,l),i.child;case 8:return un(n,i,i.pendingProps.children,l),i.child;case 12:return un(n,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,fa(i,i.type,u.value),un(n,i,u.children,l),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,ri(i),g=Sn(g),u=u(g),i.flags|=1,un(n,i,u,l),i.child;case 14:return nx(n,i,i.type,i.pendingProps,l);case 15:return sx(n,i,i.type,i.pendingProps,l);case 19:return fx(n,i,l);case 31:return u=i.pendingProps,l=i.mode,u={mode:u.mode,children:u.children},n===null?(l=Xc(u,l),l.ref=i.ref,i.child=l,l.return=i,i=l):(l=zs(n.child,u),l.ref=i.ref,i.child=l,l.return=i,i=l),i;case 22:return ax(n,i,l);case 24:return ri(i),u=Sn(Kr),n===null?(g=Ju(),g===null&&(g=wr,m=Xu(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=l),g=m),i.memoizedState={parent:u,cache:g},ef(i),fa(i,Kr,g)):((n.lanes&l)!==0&&(tf(n,i),al(i,null,null,l),sl()),g=n.memoizedState,m=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),fa(i,Kr,u)):(u=m.cache,fa(i,Kr,u),u!==g.cache&&Ku(i,[Kr],l,!0))),un(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ys(n){n.flags|=4}function px(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Sm(i)){if(i=os.current,i!==null&&((Kt&4194048)===Kt?Rs!==null:(Kt&62914560)!==Kt&&(Kt&536870912)===0||i!==Rs))throw rl=Zu,Qp;n.flags|=8192}}function Qc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?De():536870912,n.lanes|=i,Ki|=i)}function fl(n,i){if(!nr)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Or(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,u=0;if(i)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=l,i}function i_(n,i,l){var u=i.pendingProps;switch(Hu(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Or(i),null;case 1:return Or(i),null;case 3:return l=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),$s(Kr),Te(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Ko(i)?Ys(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Gp())),Or(i),null;case 26:return l=i.memoizedState,n===null?(Ys(i),l!==null?(Or(i),px(i,l)):(Or(i),i.flags&=-16777217)):l?l!==n.memoizedState?(Ys(i),Or(i),px(i,l)):(Or(i),i.flags&=-16777217):(n.memoizedProps!==u&&Ys(i),Or(i),i.flags&=-16777217),null;case 27:Ve(i),l=ue.current;var g=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ys(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Or(i),null}n=W.current,Ko(i)?$p(i):(n=pm(g,u,l),i.stateNode=n,Ys(i))}return Or(i),null;case 5:if(Ve(i),l=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ys(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Or(i),null}if(n=W.current,Ko(i))$p(i);else{switch(g=dd(ue.current),n){case 1:n=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:n=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":n=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":n=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":n=g.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?g.createElement(l,{is:u.is}):g.createElement(l)}}n[Et]=i,n[Dr]=u;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)n.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=n;e:switch(hn(n,l,u),l){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ys(i)}}return Or(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Ys(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(n=ue.current,Ko(i)){if(n=i.stateNode,l=i.memoizedProps,u=null,g=kn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[Et]=i,n=!!(n.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||om(n.nodeValue,l)),n||ei(i)}else n=dd(n).createTextNode(u),n[Et]=i,i.stateNode=n}return Or(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Ko(i),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Et]=i}else Xo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Or(i),g=!1}else g=Gp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(Gs(i),i):(Gs(i),null)}if(Gs(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=u!==null,n=n!==null&&n.memoizedState!==null,l){u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==g&&(u.flags|=2048)}return l!==n&&l&&(i.child.flags|=8192),Qc(i,i.updateQueue),Or(i),null;case 4:return Te(),n===null&&sh(i.stateNode.containerInfo),Or(i),null;case 10:return $s(i.type),Or(i),null;case 19:if(E(Xr),g=i.memoizedState,g===null)return Or(i),null;if(u=(i.flags&128)!==0,m=g.rendering,m===null)if(u)fl(g,!1);else{if(Mr!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=Gc(n),m!==null){for(i.flags|=128,fl(g,!1),n=m.updateQueue,i.updateQueue=n,Qc(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)Wp(l,n),l=l.sibling;return P(Xr,Xr.current&1|2),i.child}n=n.sibling}g.tail!==null&&Me()>ed&&(i.flags|=128,u=!0,fl(g,!1),i.lanes=4194304)}else{if(!u)if(n=Gc(m),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Qc(i,n),fl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!nr)return Or(i),null}else 2*Me()-g.renderingStartTime>ed&&l!==536870912&&(i.flags|=128,u=!0,fl(g,!1),i.lanes=4194304);g.isBackwards?(m.sibling=i.child,i.child=m):(n=g.last,n!==null?n.sibling=m:i.child=m,g.last=m)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Me(),i.sibling=null,n=Xr.current,P(Xr,u?n&1|2:n&1),i):(Or(i),null);case 22:case 23:return Gs(i),af(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(Or(i),i.subtreeFlags&6&&(i.flags|=8192)):Or(i),l=i.updateQueue,l!==null&&Qc(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),n!==null&&E(ni),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),$s(Kr),Or(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function o_(n,i){switch(Hu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return $s(Kr),Te(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ve(i),null;case 13:if(Gs(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Xo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return E(Xr),null;case 4:return Te(),null;case 10:return $s(i.type),null;case 22:case 23:return Gs(i),af(),n!==null&&E(ni),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return $s(Kr),null;case 25:return null;default:return null}}function gx(n,i){switch(Hu(i),i.tag){case 3:$s(Kr),Te();break;case 26:case 27:case 5:Ve(i);break;case 4:Te();break;case 13:Gs(i);break;case 19:E(Xr);break;case 10:$s(i.type);break;case 22:case 23:Gs(i),af(),n!==null&&E(ni);break;case 24:$s(Kr)}}function hl(n,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&n)===n){u=void 0;var m=l.create,j=l.inst;u=m(),j.destroy=u}l=l.next}while(l!==g)}}catch(B){Sr(i,i.return,B)}}function va(n,i,l){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var m=g.next;u=m;do{if((u.tag&n)===n){var j=u.inst,B=j.destroy;if(B!==void 0){j.destroy=void 0,g=i;var Z=l,_e=B;try{_e()}catch(Pe){Sr(g,Z,Pe)}}}u=u.next}while(u!==m)}}catch(Pe){Sr(i,i.return,Pe)}}function xx(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{ng(i,l)}catch(u){Sr(n,n.return,u)}}}function mx(n,i,l){l.props=ai(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(u){Sr(n,i,u)}}function pl(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof l=="function"?n.refCleanup=l(u):l.current=u}}catch(g){Sr(n,i,g)}}function Ns(n,i){var l=n.ref,u=n.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){Sr(n,i,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Sr(n,i,g)}else l.current=null}function yx(n){var i=n.type,l=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){Sr(n,n.return,g)}}function If(n,i,l){try{var u=n.stateNode;C_(u,n.type,l,i),u[Dr]=i}catch(g){Sr(n,n.return,g)}}function vx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ka(n.type)||n.tag===4}function Bf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||vx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ka(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mf(n,i,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=cd));else if(u!==4&&(u===27&&ka(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(Mf(n,i,l),n=n.sibling;n!==null;)Mf(n,i,l),n=n.sibling}function Jc(n,i,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(u!==4&&(u===27&&ka(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Jc(n,i,l),n=n.sibling;n!==null;)Jc(n,i,l),n=n.sibling}function bx(n){var i=n.stateNode,l=n.memoizedProps;try{for(var u=n.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);hn(i,u,l),i[Et]=n,i[Dr]=l}catch(m){Sr(n,n.return,m)}}var Ks=!1,Ur=!1,Ff=!1,_x=typeof WeakSet=="function"?WeakSet:Set,sn=null;function l_(n,i){if(n=n.containerInfo,oh=xd,n=Dp(n),Iu(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var j=0,B=-1,Z=-1,_e=0,Pe=0,Ue=n,ke=null;t:for(;;){for(var Re;Ue!==l||g!==0&&Ue.nodeType!==3||(B=j+g),Ue!==m||u!==0&&Ue.nodeType!==3||(Z=j+u),Ue.nodeType===3&&(j+=Ue.nodeValue.length),(Re=Ue.firstChild)!==null;)ke=Ue,Ue=Re;for(;;){if(Ue===n)break t;if(ke===l&&++_e===g&&(B=j),ke===m&&++Pe===u&&(Z=j),(Re=Ue.nextSibling)!==null)break;Ue=ke,ke=Ue.parentNode}Ue=Re}l=B===-1||Z===-1?null:{start:B,end:Z}}else l=null}l=l||{start:0,end:0}}else l=null;for(lh={focusedElem:n,selectionRange:l},xd=!1,sn=i;sn!==null;)if(i=sn,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,sn=n;else for(;sn!==null;){switch(i=sn,m=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,l=i,g=m.memoizedProps,m=m.memoizedState,u=l.stateNode;try{var Rt=ai(l.type,g,l.elementType===l.type);n=u.getSnapshotBeforeUpdate(Rt,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(jt){Sr(l,l.return,jt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)uh(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":uh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,sn=n;break}sn=i.return}}function Sx(n,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:ba(n,l),u&4&&hl(5,l);break;case 1:if(ba(n,l),u&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(j){Sr(l,l.return,j)}else{var g=ai(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(g,i,n.__reactInternalSnapshotBeforeUpdate)}catch(j){Sr(l,l.return,j)}}u&64&&xx(l),u&512&&pl(l,l.return);break;case 3:if(ba(n,l),u&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{ng(n,i)}catch(j){Sr(l,l.return,j)}}break;case 27:i===null&&u&4&&bx(l);case 26:case 5:ba(n,l),i===null&&u&4&&yx(l),u&512&&pl(l,l.return);break;case 12:ba(n,l);break;case 13:ba(n,l),u&4&&jx(n,l),u&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=m_.bind(null,l),B_(n,l))));break;case 22:if(u=l.memoizedState!==null||Ks,!u){i=i!==null&&i.memoizedState!==null||Ur,g=Ks;var m=Ur;Ks=u,(Ur=i)&&!m?_a(n,l,(l.subtreeFlags&8772)!==0):ba(n,l),Ks=g,Ur=m}break;case 30:break;default:ba(n,l)}}function wx(n){var i=n.alternate;i!==null&&(n.alternate=null,wx(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&z(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ar=null,zn=!1;function Xs(n,i,l){for(l=l.child;l!==null;)Tx(n,i,l),l=l.sibling}function Tx(n,i,l){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Xt,l)}catch{}switch(l.tag){case 26:Ur||Ns(l,i),Xs(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ur||Ns(l,i);var u=Ar,g=zn;ka(l.type)&&(Ar=l.stateNode,zn=!1),Xs(n,i,l),wl(l.stateNode),Ar=u,zn=g;break;case 5:Ur||Ns(l,i);case 6:if(u=Ar,g=zn,Ar=null,Xs(n,i,l),Ar=u,zn=g,Ar!==null)if(zn)try{(Ar.nodeType===9?Ar.body:Ar.nodeName==="HTML"?Ar.ownerDocument.body:Ar).removeChild(l.stateNode)}catch(m){Sr(l,i,m)}else try{Ar.removeChild(l.stateNode)}catch(m){Sr(l,i,m)}break;case 18:Ar!==null&&(zn?(n=Ar,fm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),Nl(n)):fm(Ar,l.stateNode));break;case 4:u=Ar,g=zn,Ar=l.stateNode.containerInfo,zn=!0,Xs(n,i,l),Ar=u,zn=g;break;case 0:case 11:case 14:case 15:Ur||va(2,l,i),Ur||va(4,l,i),Xs(n,i,l);break;case 1:Ur||(Ns(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&mx(l,i,u)),Xs(n,i,l);break;case 21:Xs(n,i,l);break;case 22:Ur=(u=Ur)||l.memoizedState!==null,Xs(n,i,l),Ur=u;break;default:Xs(n,i,l)}}function jx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Nl(n)}catch(l){Sr(i,i.return,l)}}function c_(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new _x),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new _x),i;default:throw Error(s(435,n.tag))}}function Lf(n,i){var l=c_(n);i.forEach(function(u){var g=y_.bind(null,n,u);l.has(u)||(l.add(u),u.then(g,g))})}function Vn(n,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],m=n,j=i,B=j;e:for(;B!==null;){switch(B.tag){case 27:if(ka(B.type)){Ar=B.stateNode,zn=!1;break e}break;case 5:Ar=B.stateNode,zn=!1;break e;case 3:case 4:Ar=B.stateNode.containerInfo,zn=!0;break e}B=B.return}if(Ar===null)throw Error(s(160));Tx(m,j,g),Ar=null,zn=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ex(i,n),i=i.sibling}var xs=null;function Ex(n,i){var l=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Vn(i,n),Yn(n),u&4&&(va(3,n,n.return),hl(3,n),va(5,n,n.return));break;case 1:Vn(i,n),Yn(n),u&512&&(Ur||l===null||Ns(l,l.return)),u&64&&Ks&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=xs;if(Vn(i,n),Yn(n),u&512&&(Ur||l===null||Ns(l,l.return)),u&4){var m=l!==null?l.memoizedState:null;if(u=n.memoizedState,l===null)if(u===null)if(n.stateNode===null){e:{u=n.type,l=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":m=g.getElementsByTagName("title")[0],(!m||m[F]||m[Et]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(u),g.head.insertBefore(m,g.querySelector("head > title"))),hn(m,u,l),m[Et]=n,ge(m),u=m;break e;case"link":var j=bm("link","href",g).get(u+(l.href||""));if(j){for(var B=0;B<j.length;B++)if(m=j[B],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){j.splice(B,1);break t}}m=g.createElement(u),hn(m,u,l),g.head.appendChild(m);break;case"meta":if(j=bm("meta","content",g).get(u+(l.content||""))){for(B=0;B<j.length;B++)if(m=j[B],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){j.splice(B,1);break t}}m=g.createElement(u),hn(m,u,l),g.head.appendChild(m);break;default:throw Error(s(468,u))}m[Et]=n,ge(m),u=m}n.stateNode=u}else _m(g,n.type,n.stateNode);else n.stateNode=vm(g,u,n.memoizedProps);else m!==u?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,u===null?_m(g,n.type,n.stateNode):vm(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&If(n,n.memoizedProps,l.memoizedProps)}break;case 27:Vn(i,n),Yn(n),u&512&&(Ur||l===null||Ns(l,l.return)),l!==null&&u&4&&If(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Vn(i,n),Yn(n),u&512&&(Ur||l===null||Ns(l,l.return)),n.flags&32){g=n.stateNode;try{lt(g,"")}catch(Re){Sr(n,n.return,Re)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,If(n,g,l!==null?l.memoizedProps:g)),u&1024&&(Ff=!0);break;case 6:if(Vn(i,n),Yn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,l=n.stateNode;try{l.nodeValue=u}catch(Re){Sr(n,n.return,Re)}}break;case 3:if(hd=null,g=xs,xs=ud(i.containerInfo),Vn(i,n),xs=g,Yn(n),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Nl(i.containerInfo)}catch(Re){Sr(n,n.return,Re)}Ff&&(Ff=!1,kx(n));break;case 4:u=xs,xs=ud(n.stateNode.containerInfo),Vn(i,n),Yn(n),xs=u;break;case 12:Vn(i,n),Yn(n);break;case 13:Vn(i,n),Yn(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&($f=Me()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Lf(n,u)));break;case 22:g=n.memoizedState!==null;var Z=l!==null&&l.memoizedState!==null,_e=Ks,Pe=Ur;if(Ks=_e||g,Ur=Pe||Z,Vn(i,n),Ur=Pe,Ks=_e,Yn(n),u&8192)e:for(i=n.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(l===null||Z||Ks||Ur||ii(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){Z=l=i;try{if(m=Z.stateNode,g)j=m.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{B=Z.stateNode;var Ue=Z.memoizedProps.style,ke=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null;B.style.display=ke==null||typeof ke=="boolean"?"":(""+ke).trim()}}catch(Re){Sr(Z,Z.return,Re)}}}else if(i.tag===6){if(l===null){Z=i;try{Z.stateNode.nodeValue=g?"":Z.memoizedProps}catch(Re){Sr(Z,Z.return,Re)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Lf(n,l))));break;case 19:Vn(i,n),Yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Lf(n,u)));break;case 30:break;case 21:break;default:Vn(i,n),Yn(n)}}function Yn(n){var i=n.flags;if(i&2){try{for(var l,u=n.return;u!==null;){if(vx(u)){l=u;break}u=u.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,m=Bf(n);Jc(n,m,g);break;case 5:var j=l.stateNode;l.flags&32&&(lt(j,""),l.flags&=-33);var B=Bf(n);Jc(n,B,j);break;case 3:case 4:var Z=l.stateNode.containerInfo,_e=Bf(n);Mf(n,_e,Z);break;default:throw Error(s(161))}}catch(Pe){Sr(n,n.return,Pe)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function kx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;kx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ba(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Sx(n,i.alternate,i),i=i.sibling}function ii(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:va(4,i,i.return),ii(i);break;case 1:Ns(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&mx(i,i.return,l),ii(i);break;case 27:wl(i.stateNode);case 26:case 5:Ns(i,i.return),ii(i);break;case 22:i.memoizedState===null&&ii(i);break;case 30:ii(i);break;default:ii(i)}n=n.sibling}}function _a(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=n,m=i,j=m.flags;switch(m.tag){case 0:case 11:case 15:_a(g,m,l),hl(4,m);break;case 1:if(_a(g,m,l),u=m,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(_e){Sr(u,u.return,_e)}if(u=m,g=u.updateQueue,g!==null){var B=u.stateNode;try{var Z=g.shared.hiddenCallbacks;if(Z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Z.length;g++)rg(Z[g],B)}catch(_e){Sr(u,u.return,_e)}}l&&j&64&&xx(m),pl(m,m.return);break;case 27:bx(m);case 26:case 5:_a(g,m,l),l&&u===null&&j&4&&yx(m),pl(m,m.return);break;case 12:_a(g,m,l);break;case 13:_a(g,m,l),l&&j&4&&jx(g,m);break;case 22:m.memoizedState===null&&_a(g,m,l),pl(m,m.return);break;case 30:break;default:_a(g,m,l)}i=i.sibling}}function Pf(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Zo(l))}function zf(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Zo(n))}function Ds(n,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Cx(n,i,l,u),i=i.sibling}function Cx(n,i,l,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Ds(n,i,l,u),g&2048&&hl(9,i);break;case 1:Ds(n,i,l,u);break;case 3:Ds(n,i,l,u),g&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Zo(n)));break;case 12:if(g&2048){Ds(n,i,l,u),n=i.stateNode;try{var m=i.memoizedProps,j=m.id,B=m.onPostCommit;typeof B=="function"&&B(j,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Z){Sr(i,i.return,Z)}}else Ds(n,i,l,u);break;case 13:Ds(n,i,l,u);break;case 23:break;case 22:m=i.stateNode,j=i.alternate,i.memoizedState!==null?m._visibility&2?Ds(n,i,l,u):gl(n,i):m._visibility&2?Ds(n,i,l,u):(m._visibility|=2,Gi(n,i,l,u,(i.subtreeFlags&10256)!==0)),g&2048&&Pf(j,i);break;case 24:Ds(n,i,l,u),g&2048&&zf(i.alternate,i);break;default:Ds(n,i,l,u)}}function Gi(n,i,l,u,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=n,j=i,B=l,Z=u,_e=j.flags;switch(j.tag){case 0:case 11:case 15:Gi(m,j,B,Z,g),hl(8,j);break;case 23:break;case 22:var Pe=j.stateNode;j.memoizedState!==null?Pe._visibility&2?Gi(m,j,B,Z,g):gl(m,j):(Pe._visibility|=2,Gi(m,j,B,Z,g)),g&&_e&2048&&Pf(j.alternate,j);break;case 24:Gi(m,j,B,Z,g),g&&_e&2048&&zf(j.alternate,j);break;default:Gi(m,j,B,Z,g)}i=i.sibling}}function gl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,u=i,g=u.flags;switch(u.tag){case 22:gl(l,u),g&2048&&Pf(u.alternate,u);break;case 24:gl(l,u),g&2048&&zf(u.alternate,u);break;default:gl(l,u)}i=i.sibling}}var xl=8192;function Vi(n){if(n.subtreeFlags&xl)for(n=n.child;n!==null;)Ax(n),n=n.sibling}function Ax(n){switch(n.tag){case 26:Vi(n),n.flags&xl&&n.memoizedState!==null&&Y_(xs,n.memoizedState,n.memoizedProps);break;case 5:Vi(n);break;case 3:case 4:var i=xs;xs=ud(n.stateNode.containerInfo),Vi(n),xs=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=xl,xl=16777216,Vi(n),xl=i):Vi(n));break;default:Vi(n)}}function Rx(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ml(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];sn=u,Dx(u,n)}Rx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Nx(n),n=n.sibling}function Nx(n){switch(n.tag){case 0:case 11:case 15:ml(n),n.flags&2048&&va(9,n,n.return);break;case 3:ml(n);break;case 12:ml(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Zc(n)):ml(n);break;default:ml(n)}}function Zc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];sn=u,Dx(u,n)}Rx(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:va(8,i,i.return),Zc(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Zc(i));break;default:Zc(i)}n=n.sibling}}function Dx(n,i){for(;sn!==null;){var l=sn;switch(l.tag){case 0:case 11:case 15:va(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Zo(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,sn=u;else e:for(l=n;sn!==null;){u=sn;var g=u.sibling,m=u.return;if(wx(u),u===l){sn=null;break e}if(g!==null){g.return=m,sn=g;break e}sn=m}}}var d_={getCacheForType:function(n){var i=Sn(Kr),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l}},u_=typeof WeakMap=="function"?WeakMap:Map,cr=0,wr=null,qt=null,Kt=0,dr=0,Kn=null,Sa=!1,Yi=!1,Uf=!1,Qs=0,Mr=0,wa=0,oi=0,Wf=0,ls=0,Ki=0,yl=null,Un=null,qf=!1,$f=0,ed=1/0,td=null,Ta=null,fn=0,ja=null,Xi=null,Qi=0,Hf=0,Gf=null,Ox=null,vl=0,Vf=null;function Xn(){if((cr&2)!==0&&Kt!==0)return Kt&-Kt;if(J.T!==null){var n=Li;return n!==0?n:eh()}return Bn()}function Ix(){ls===0&&(ls=(Kt&536870912)===0||nr?ie():536870912);var n=os.current;return n!==null&&(n.flags|=32),ls}function Qn(n,i,l){(n===wr&&(dr===2||dr===9)||n.cancelPendingCommit!==null)&&(Ji(n,0),Ea(n,Kt,ls,!1)),vt(n,l),((cr&2)===0||n!==wr)&&(n===wr&&((cr&2)===0&&(oi|=l),Mr===4&&Ea(n,Kt,ls,!1)),Os(n))}function Bx(n,i,l){if((cr&6)!==0)throw Error(s(327));var u=!l&&(i&124)===0&&(i&n.expiredLanes)===0||Qt(n,i),g=u?p_(n,i):Xf(n,i,!0),m=u;do{if(g===0){Yi&&!u&&Ea(n,i,0,!1);break}else{if(l=n.current.alternate,m&&!f_(l)){g=Xf(n,i,!1),m=!1;continue}if(g===2){if(m=i,n.errorRecoveryDisabledLanes&m)var j=0;else j=n.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){i=j;e:{var B=n;g=yl;var Z=B.current.memoizedState.isDehydrated;if(Z&&(Ji(B,j).flags|=256),j=Xf(B,j,!1),j!==2){if(Uf&&!Z){B.errorRecoveryDisabledLanes|=m,oi|=m,g=4;break e}m=Un,Un=g,m!==null&&(Un===null?Un=m:Un.push.apply(Un,m))}g=j}if(m=!1,g!==2)continue}}if(g===1){Ji(n,0),Ea(n,i,0,!0);break}e:{switch(u=n,m=g,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ea(u,i,ls,!Sa);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(g=$f+300-Me(),10<g)){if(Ea(u,i,ls,!Sa),Er(u,0,!0)!==0)break e;u.timeoutHandle=dm(Mx.bind(null,u,l,Un,td,qf,i,ls,oi,Ki,Sa,m,2,-0,0),g);break e}Mx(u,l,Un,td,qf,i,ls,oi,Ki,Sa,m,0,-0,0)}}break}while(!0);Os(n)}function Mx(n,i,l,u,g,m,j,B,Z,_e,Pe,Ue,ke,Re){if(n.timeoutHandle=-1,Ue=i.subtreeFlags,(Ue&8192||(Ue&16785408)===16785408)&&(El={stylesheets:null,count:0,unsuspend:V_},Ax(i),Ue=K_(),Ue!==null)){n.cancelPendingCommit=Ue(qx.bind(null,n,i,m,l,u,g,j,B,Z,Pe,1,ke,Re)),Ea(n,m,j,!_e);return}qx(n,i,m,l,u,g,j,B,Z)}function f_(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],m=g.getSnapshot;g=g.value;try{if(!Hn(m(),g))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ea(n,i,l,u){i&=~Wf,i&=~oi,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var g=i;0<g;){var m=31-me(g),j=1<<m;u[m]=-1,g&=~j}l!==0&&Jt(n,l,i)}function rd(){return(cr&6)===0?(bl(0),!1):!0}function Yf(){if(qt!==null){if(dr===0)var n=qt.return;else n=qt,qs=ti=null,uf(n),$i=null,dl=0,n=qt;for(;n!==null;)gx(n.alternate,n),n=n.return;qt=null}}function Ji(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,R_(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Yf(),wr=n,qt=l=zs(n.current,null),Kt=i,dr=0,Kn=null,Sa=!1,Yi=Qt(n,i),Uf=!1,Ki=ls=Wf=oi=wa=Mr=0,Un=yl=null,qf=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var g=31-me(u),m=1<<g;i|=n[g],u&=~m}return Qs=i,Tc(),l}function Fx(n,i){zt=null,J.H=qc,i===tl||i===Oc?(i=eg(),dr=3):i===Qp?(i=eg(),dr=4):dr=i===tx?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Kn=i,qt===null&&(Mr=1,Yc(n,ns(i,n.current)))}function Lx(){var n=J.H;return J.H=qc,n===null?qc:n}function Px(){var n=J.A;return J.A=d_,n}function Kf(){Mr=4,Sa||(Kt&4194048)!==Kt&&os.current!==null||(Yi=!0),(wa&134217727)===0&&(oi&134217727)===0||wr===null||Ea(wr,Kt,ls,!1)}function Xf(n,i,l){var u=cr;cr|=2;var g=Lx(),m=Px();(wr!==n||Kt!==i)&&(td=null,Ji(n,i)),i=!1;var j=Mr;e:do try{if(dr!==0&&qt!==null){var B=qt,Z=Kn;switch(dr){case 8:Yf(),j=6;break e;case 3:case 2:case 9:case 6:os.current===null&&(i=!0);var _e=dr;if(dr=0,Kn=null,Zi(n,B,Z,_e),l&&Yi){j=0;break e}break;default:_e=dr,dr=0,Kn=null,Zi(n,B,Z,_e)}}h_(),j=Mr;break}catch(Pe){Fx(n,Pe)}while(!0);return i&&n.shellSuspendCounter++,qs=ti=null,cr=u,J.H=g,J.A=m,qt===null&&(wr=null,Kt=0,Tc()),j}function h_(){for(;qt!==null;)zx(qt)}function p_(n,i){var l=cr;cr|=2;var u=Lx(),g=Px();wr!==n||Kt!==i?(td=null,ed=Me()+500,Ji(n,i)):Yi=Qt(n,i);e:do try{if(dr!==0&&qt!==null){i=qt;var m=Kn;t:switch(dr){case 1:dr=0,Kn=null,Zi(n,i,m,1);break;case 2:case 9:if(Jp(m)){dr=0,Kn=null,Ux(i);break}i=function(){dr!==2&&dr!==9||wr!==n||(dr=7),Os(n)},m.then(i,i);break e;case 3:dr=7;break e;case 4:dr=5;break e;case 7:Jp(m)?(dr=0,Kn=null,Ux(i)):(dr=0,Kn=null,Zi(n,i,m,7));break;case 5:var j=null;switch(qt.tag){case 26:j=qt.memoizedState;case 5:case 27:var B=qt;if(!j||Sm(j)){dr=0,Kn=null;var Z=B.sibling;if(Z!==null)qt=Z;else{var _e=B.return;_e!==null?(qt=_e,nd(_e)):qt=null}break t}}dr=0,Kn=null,Zi(n,i,m,5);break;case 6:dr=0,Kn=null,Zi(n,i,m,6);break;case 8:Yf(),Mr=6;break e;default:throw Error(s(462))}}g_();break}catch(Pe){Fx(n,Pe)}while(!0);return qs=ti=null,J.H=u,J.A=g,cr=l,qt!==null?0:(wr=null,Kt=0,Tc(),Mr)}function g_(){for(;qt!==null&&!be();)zx(qt)}function zx(n){var i=hx(n.alternate,n,Qs);n.memoizedProps=n.pendingProps,i===null?nd(n):qt=i}function Ux(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=ox(l,i,i.pendingProps,i.type,void 0,Kt);break;case 11:i=ox(l,i,i.pendingProps,i.type.render,i.ref,Kt);break;case 5:uf(i);default:gx(l,i),i=qt=Wp(i,Qs),i=hx(l,i,Qs)}n.memoizedProps=n.pendingProps,i===null?nd(n):qt=i}function Zi(n,i,l,u){qs=ti=null,uf(i),$i=null,dl=0;var g=i.return;try{if(s_(n,g,i,l,Kt)){Mr=1,Yc(n,ns(l,n.current)),qt=null;return}}catch(m){if(g!==null)throw qt=g,m;Mr=1,Yc(n,ns(l,n.current)),qt=null;return}i.flags&32768?(nr||u===1?n=!0:Yi||(Kt&536870912)!==0?n=!1:(Sa=n=!0,(u===2||u===9||u===3||u===6)&&(u=os.current,u!==null&&u.tag===13&&(u.flags|=16384))),Wx(i,n)):nd(i)}function nd(n){var i=n;do{if((i.flags&32768)!==0){Wx(i,Sa);return}n=i.return;var l=i_(i.alternate,i,Qs);if(l!==null){qt=l;return}if(i=i.sibling,i!==null){qt=i;return}qt=i=n}while(i!==null);Mr===0&&(Mr=5)}function Wx(n,i){do{var l=o_(n.alternate,n);if(l!==null){l.flags&=32767,qt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){qt=n;return}qt=n=l}while(n!==null);Mr=6,qt=null}function qx(n,i,l,u,g,m,j,B,Z){n.cancelPendingCommit=null;do sd();while(fn!==0);if((cr&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Pu,xr(n,l,m,j,B,Z),n===wr&&(qt=wr=null,Kt=0),Xi=i,ja=n,Qi=l,Hf=m,Gf=g,Ox=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,v_(St,function(){return Yx(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,g=fe.p,fe.p=2,j=cr,cr|=4;try{l_(n,i,l)}finally{cr=j,fe.p=g,J.T=u}}fn=1,$x(),Hx(),Gx()}}function $x(){if(fn===1){fn=0;var n=ja,i=Xi,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var u=fe.p;fe.p=2;var g=cr;cr|=4;try{Ex(i,n);var m=lh,j=Dp(n.containerInfo),B=m.focusedElem,Z=m.selectionRange;if(j!==B&&B&&B.ownerDocument&&Np(B.ownerDocument.documentElement,B)){if(Z!==null&&Iu(B)){var _e=Z.start,Pe=Z.end;if(Pe===void 0&&(Pe=_e),"selectionStart"in B)B.selectionStart=_e,B.selectionEnd=Math.min(Pe,B.value.length);else{var Ue=B.ownerDocument||document,ke=Ue&&Ue.defaultView||window;if(ke.getSelection){var Re=ke.getSelection(),Rt=B.textContent.length,jt=Math.min(Z.start,Rt),vr=Z.end===void 0?jt:Math.min(Z.end,Rt);!Re.extend&&jt>vr&&(j=vr,vr=jt,jt=j);var pe=Rp(B,jt),le=Rp(B,vr);if(pe&&le&&(Re.rangeCount!==1||Re.anchorNode!==pe.node||Re.anchorOffset!==pe.offset||Re.focusNode!==le.node||Re.focusOffset!==le.offset)){var ye=Ue.createRange();ye.setStart(pe.node,pe.offset),Re.removeAllRanges(),jt>vr?(Re.addRange(ye),Re.extend(le.node,le.offset)):(ye.setEnd(le.node,le.offset),Re.addRange(ye))}}}}for(Ue=[],Re=B;Re=Re.parentNode;)Re.nodeType===1&&Ue.push({element:Re,left:Re.scrollLeft,top:Re.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<Ue.length;B++){var ze=Ue[B];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}xd=!!oh,lh=oh=null}finally{cr=g,fe.p=u,J.T=l}}n.current=i,fn=2}}function Hx(){if(fn===2){fn=0;var n=ja,i=Xi,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var u=fe.p;fe.p=2;var g=cr;cr|=4;try{Sx(n,i.alternate,i)}finally{cr=g,fe.p=u,J.T=l}}fn=3}}function Gx(){if(fn===4||fn===3){fn=0,tt();var n=ja,i=Xi,l=Qi,u=Ox;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?fn=5:(fn=0,Xi=ja=null,Vx(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(Ta=null),Gt(l),i=i.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Xt,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=J.T,g=fe.p,fe.p=2,J.T=null;try{for(var m=n.onRecoverableError,j=0;j<u.length;j++){var B=u[j];m(B.value,{componentStack:B.stack})}}finally{J.T=i,fe.p=g}}(Qi&3)!==0&&sd(),Os(n),g=n.pendingLanes,(l&4194090)!==0&&(g&42)!==0?n===Vf?vl++:(vl=0,Vf=n):vl=0,bl(0)}}function Vx(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Zo(i)))}function sd(n){return $x(),Hx(),Gx(),Yx()}function Yx(){if(fn!==5)return!1;var n=ja,i=Hf;Hf=0;var l=Gt(Qi),u=J.T,g=fe.p;try{fe.p=32>l?32:l,J.T=null,l=Gf,Gf=null;var m=ja,j=Qi;if(fn=0,Xi=ja=null,Qi=0,(cr&6)!==0)throw Error(s(331));var B=cr;if(cr|=4,Nx(m.current),Cx(m,m.current,j,l),cr=B,bl(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Xt,m)}catch{}return!0}finally{fe.p=g,J.T=u,Vx(n,i)}}function Kx(n,i,l){i=ns(l,i),i=jf(n.stateNode,i,2),n=ga(n,i,2),n!==null&&(vt(n,2),Os(n))}function Sr(n,i,l){if(n.tag===3)Kx(n,n,l);else for(;i!==null;){if(i.tag===3){Kx(i,n,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ta===null||!Ta.has(u))){n=ns(l,n),l=Zg(2),u=ga(i,l,2),u!==null&&(ex(l,u,i,n),vt(u,2),Os(u));break}}i=i.return}}function Qf(n,i,l){var u=n.pingCache;if(u===null){u=n.pingCache=new u_;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(l)||(Uf=!0,g.add(l),n=x_.bind(null,n,i,l),i.then(n,n))}function x_(n,i,l){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,wr===n&&(Kt&l)===l&&(Mr===4||Mr===3&&(Kt&62914560)===Kt&&300>Me()-$f?(cr&2)===0&&Ji(n,0):Wf|=l,Ki===Kt&&(Ki=0)),Os(n)}function Xx(n,i){i===0&&(i=De()),n=Ii(n,i),n!==null&&(vt(n,i),Os(n))}function m_(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Xx(n,l)}function y_(n,i){var l=0;switch(n.tag){case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),Xx(n,l)}function v_(n,i){return je(n,i)}var ad=null,eo=null,Jf=!1,id=!1,Zf=!1,li=0;function Os(n){n!==eo&&n.next===null&&(eo===null?ad=eo=n:eo=eo.next=n),id=!0,Jf||(Jf=!0,__())}function bl(n,i){if(!Zf&&id){Zf=!0;do for(var l=!1,u=ad;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var m=0;else{var j=u.suspendedLanes,B=u.pingedLanes;m=(1<<31-me(42|n)+1)-1,m&=g&~(j&~B),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,em(u,m))}else m=Kt,m=Er(u,u===wr?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Qt(u,m)||(l=!0,em(u,m));u=u.next}while(l);Zf=!1}}function b_(){Qx()}function Qx(){id=Jf=!1;var n=0;li!==0&&(A_()&&(n=li),li=0);for(var i=Me(),l=null,u=ad;u!==null;){var g=u.next,m=Jx(u,i);m===0?(u.next=null,l===null?ad=g:l.next=g,g===null&&(eo=l)):(l=u,(n!==0||(m&3)!==0)&&(id=!0)),u=g}bl(n)}function Jx(n,i){for(var l=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var j=31-me(m),B=1<<j,Z=g[j];Z===-1?((B&l)===0||(B&u)!==0)&&(g[j]=lr(B,i)):Z<=i&&(n.expiredLanes|=B),m&=~B}if(i=wr,l=Kt,l=Er(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,l===0||n===i&&(dr===2||dr===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&q(u),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Qt(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(u!==null&&q(u),Gt(l)){case 2:case 8:l=ut;break;case 32:l=St;break;case 268435456:l=Ft;break;default:l=St}return u=Zx.bind(null,n),l=je(l,u),n.callbackPriority=i,n.callbackNode=l,i}return u!==null&&u!==null&&q(u),n.callbackPriority=2,n.callbackNode=null,2}function Zx(n,i){if(fn!==0&&fn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(sd()&&n.callbackNode!==l)return null;var u=Kt;return u=Er(n,n===wr?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Bx(n,u,i),Jx(n,Me()),n.callbackNode!=null&&n.callbackNode===l?Zx.bind(null,n):null)}function em(n,i){if(sd())return null;Bx(n,i,!0)}function __(){N_(function(){(cr&6)!==0?je(pt,b_):Qx()})}function eh(){return li===0&&(li=ie()),li}function tm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:mc(""+n)}function rm(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function S_(n,i,l,u,g){if(i==="submit"&&l&&l.stateNode===g){var m=tm((g[Dr]||null).action),j=u.submitter;j&&(i=(i=j[Dr]||null)?tm(i.formAction):j.getAttribute("formAction"),i!==null&&(m=i,j=null));var B=new _c("action","action",null,u,g);n.push({event:B,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(li!==0){var Z=j?rm(g,j):new FormData(g);bf(l,{pending:!0,data:Z,method:g.method,action:m},null,Z)}}else typeof m=="function"&&(B.preventDefault(),Z=j?rm(g,j):new FormData(g),bf(l,{pending:!0,data:Z,method:g.method,action:m},m,Z))},currentTarget:g}]})}}for(var th=0;th<Lu.length;th++){var rh=Lu[th],w_=rh.toLowerCase(),T_=rh[0].toUpperCase()+rh.slice(1);gs(w_,"on"+T_)}gs(Bp,"onAnimationEnd"),gs(Mp,"onAnimationIteration"),gs(Fp,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(U2,"onTransitionRun"),gs(W2,"onTransitionStart"),gs(q2,"onTransitionCancel"),gs(Lp,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),We("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),We("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),We("onBeforeInput",["compositionend","keypress","textInput","paste"]),We("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),We("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),We("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function nm(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var u=n[l],g=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var j=u.length-1;0<=j;j--){var B=u[j],Z=B.instance,_e=B.currentTarget;if(B=B.listener,Z!==m&&g.isPropagationStopped())break e;m=B,g.currentTarget=_e;try{m(g)}catch(Pe){Vc(Pe)}g.currentTarget=null,m=Z}else for(j=0;j<u.length;j++){if(B=u[j],Z=B.instance,_e=B.currentTarget,B=B.listener,Z!==m&&g.isPropagationStopped())break e;m=B,g.currentTarget=_e;try{m(g)}catch(Pe){Vc(Pe)}g.currentTarget=null,m=Z}}}}function $t(n,i){var l=i[Cs];l===void 0&&(l=i[Cs]=new Set);var u=n+"__bubble";l.has(u)||(sm(i,n,2,!1),l.add(u))}function nh(n,i,l){var u=0;i&&(u|=4),sm(l,n,u,i)}var od="_reactListening"+Math.random().toString(36).slice(2);function sh(n){if(!n[od]){n[od]=!0,we.forEach(function(l){l!=="selectionchange"&&(j_.has(l)||nh(l,!1,n),nh(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[od]||(i[od]=!0,nh("selectionchange",!1,i))}}function sm(n,i,l,u){switch(Cm(i)){case 2:var g=J_;break;case 8:g=Z_;break;default:g=yh}l=g.bind(null,i,l,n),g=void 0,!ju||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(i,l,{capture:!0,passive:g}):n.addEventListener(i,l,!0):g!==void 0?n.addEventListener(i,l,{passive:g}):n.addEventListener(i,l,!1)}function ah(n,i,l,u,g){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var j=u.tag;if(j===3||j===4){var B=u.stateNode.containerInfo;if(B===g)break;if(j===4)for(j=u.return;j!==null;){var Z=j.tag;if((Z===3||Z===4)&&j.stateNode.containerInfo===g)return;j=j.return}for(;B!==null;){if(j=G(B),j===null)return;if(Z=j.tag,Z===5||Z===6||Z===26||Z===27){u=m=j;continue e}B=B.parentNode}}u=u.return}up(function(){var _e=m,Pe=wu(l),Ue=[];e:{var ke=Pp.get(n);if(ke!==void 0){var Re=_c,Rt=n;switch(n){case"keypress":if(vc(l)===0)break e;case"keydown":case"keyup":Re=v2;break;case"focusin":Rt="focus",Re=Au;break;case"focusout":Rt="blur",Re=Au;break;case"beforeblur":case"afterblur":Re=Au;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=o2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=S2;break;case Bp:case Mp:case Fp:Re=d2;break;case Lp:Re=T2;break;case"scroll":case"scrollend":Re=a2;break;case"wheel":Re=E2;break;case"copy":case"cut":case"paste":Re=f2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=xp;break;case"toggle":case"beforetoggle":Re=C2}var jt=(i&4)!==0,vr=!jt&&(n==="scroll"||n==="scrollend"),pe=jt?ke!==null?ke+"Capture":null:ke;jt=[];for(var le=_e,ye;le!==null;){var ze=le;if(ye=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||ye===null||pe===null||(ze=zo(le,pe),ze!=null&&jt.push(Sl(le,ze,ye))),vr)break;le=le.return}0<jt.length&&(ke=new Re(ke,Rt,null,l,Pe),Ue.push({event:ke,listeners:jt}))}}if((i&7)===0){e:{if(ke=n==="mouseover"||n==="pointerover",Re=n==="mouseout"||n==="pointerout",ke&&l!==Su&&(Rt=l.relatedTarget||l.fromElement)&&(G(Rt)||Rt[rn]))break e;if((Re||ke)&&(ke=Pe.window===Pe?Pe:(ke=Pe.ownerDocument)?ke.defaultView||ke.parentWindow:window,Re?(Rt=l.relatedTarget||l.toElement,Re=_e,Rt=Rt?G(Rt):null,Rt!==null&&(vr=c(Rt),jt=Rt.tag,Rt!==vr||jt!==5&&jt!==27&&jt!==6)&&(Rt=null)):(Re=null,Rt=_e),Re!==Rt)){if(jt=pp,ze="onMouseLeave",pe="onMouseEnter",le="mouse",(n==="pointerout"||n==="pointerover")&&(jt=xp,ze="onPointerLeave",pe="onPointerEnter",le="pointer"),vr=Re==null?ke:ve(Re),ye=Rt==null?ke:ve(Rt),ke=new jt(ze,le+"leave",Re,l,Pe),ke.target=vr,ke.relatedTarget=ye,ze=null,G(Pe)===_e&&(jt=new jt(pe,le+"enter",Rt,l,Pe),jt.target=ye,jt.relatedTarget=vr,ze=jt),vr=ze,Re&&Rt)t:{for(jt=Re,pe=Rt,le=0,ye=jt;ye;ye=to(ye))le++;for(ye=0,ze=pe;ze;ze=to(ze))ye++;for(;0<le-ye;)jt=to(jt),le--;for(;0<ye-le;)pe=to(pe),ye--;for(;le--;){if(jt===pe||pe!==null&&jt===pe.alternate)break t;jt=to(jt),pe=to(pe)}jt=null}else jt=null;Re!==null&&am(Ue,ke,Re,jt,!1),Rt!==null&&vr!==null&&am(Ue,vr,Rt,jt,!0)}}e:{if(ke=_e?ve(_e):window,Re=ke.nodeName&&ke.nodeName.toLowerCase(),Re==="select"||Re==="input"&&ke.type==="file")var dt=Tp;else if(Sp(ke))if(jp)dt=L2;else{dt=M2;var Wt=B2}else Re=ke.nodeName,!Re||Re.toLowerCase()!=="input"||ke.type!=="checkbox"&&ke.type!=="radio"?_e&&Pt(_e.elementType)&&(dt=Tp):dt=F2;if(dt&&(dt=dt(n,_e))){wp(Ue,dt,l,Pe);break e}Wt&&Wt(n,ke,_e),n==="focusout"&&_e&&ke.type==="number"&&_e.memoizedProps.value!=null&&Ye(ke,"number",ke.value)}switch(Wt=_e?ve(_e):window,n){case"focusin":(Sp(Wt)||Wt.contentEditable==="true")&&(Ni=Wt,Bu=_e,Yo=null);break;case"focusout":Yo=Bu=Ni=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,Op(Ue,l,Pe);break;case"selectionchange":if(z2)break;case"keydown":case"keyup":Op(Ue,l,Pe)}var xt;if(Nu)e:{switch(n){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else Ri?bp(n,l)&&(kt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(kt="onCompositionStart");kt&&(mp&&l.locale!=="ko"&&(Ri||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&Ri&&(xt=fp()):(ua=Pe,Eu="value"in ua?ua.value:ua.textContent,Ri=!0)),Wt=ld(_e,kt),0<Wt.length&&(kt=new gp(kt,n,null,l,Pe),Ue.push({event:kt,listeners:Wt}),xt?kt.data=xt:(xt=_p(l),xt!==null&&(kt.data=xt)))),(xt=R2?N2(n,l):D2(n,l))&&(kt=ld(_e,"onBeforeInput"),0<kt.length&&(Wt=new gp("onBeforeInput","beforeinput",null,l,Pe),Ue.push({event:Wt,listeners:kt}),Wt.data=xt)),S_(Ue,n,_e,l,Pe)}nm(Ue,i)})}function Sl(n,i,l){return{instance:n,listener:i,currentTarget:l}}function ld(n,i){for(var l=i+"Capture",u=[];n!==null;){var g=n,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=zo(n,l),g!=null&&u.unshift(Sl(n,g,m)),g=zo(n,i),g!=null&&u.push(Sl(n,g,m))),n.tag===3)return u;n=n.return}return[]}function to(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function am(n,i,l,u,g){for(var m=i._reactName,j=[];l!==null&&l!==u;){var B=l,Z=B.alternate,_e=B.stateNode;if(B=B.tag,Z!==null&&Z===u)break;B!==5&&B!==26&&B!==27||_e===null||(Z=_e,g?(_e=zo(l,m),_e!=null&&j.unshift(Sl(l,_e,Z))):g||(_e=zo(l,m),_e!=null&&j.push(Sl(l,_e,Z)))),l=l.return}j.length!==0&&n.push({event:i,listeners:j})}var E_=/\r\n?/g,k_=/\u0000|\uFFFD/g;function im(n){return(typeof n=="string"?n:""+n).replace(E_,`
`).replace(k_,"")}function om(n,i){return i=im(i),im(n)===i}function cd(){}function yr(n,i,l,u,g,m){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||lt(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&lt(n,""+u);break;case"className":Vt(n,"class",u);break;case"tabIndex":Vt(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Vt(n,l,u);break;case"style":Bt(n,u,m);break;case"data":if(i!=="object"){Vt(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=mc(""+u),n.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(i!=="input"&&yr(n,i,"name",g.name,g,null),yr(n,i,"formEncType",g.formEncType,g,null),yr(n,i,"formMethod",g.formMethod,g,null),yr(n,i,"formTarget",g.formTarget,g,null)):(yr(n,i,"encType",g.encType,g,null),yr(n,i,"method",g.method,g,null),yr(n,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=mc(""+u),n.setAttribute(l,u);break;case"onClick":u!=null&&(n.onclick=cd);break;case"onScroll":u!=null&&$t("scroll",n);break;case"onScrollEnd":u!=null&&$t("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}l=mc(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""+u):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":u===!0?n.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,u):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(l,u):n.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(l):n.setAttribute(l,u);break;case"popover":$t("beforetoggle",n),$t("toggle",n),Zt(n,"popover",u);break;case"xlinkActuate":ir(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ir(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ir(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ir(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ir(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ir(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ir(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ir(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ir(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Zt(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Yr.get(l)||l,Zt(n,l,u))}}function ih(n,i,l,u,g,m){switch(l){case"style":Bt(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"children":typeof u=="string"?lt(n,u):(typeof u=="number"||typeof u=="bigint")&&lt(n,""+u);break;case"onScroll":u!=null&&$t("scroll",n);break;case"onScrollEnd":u!=null&&$t("scrollend",n);break;case"onClick":u!=null&&(n.onclick=cd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ee.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),i=l.slice(2,g?l.length-7:void 0),m=n[Dr]||null,m=m!=null?m[l]:null,typeof m=="function"&&n.removeEventListener(i,m,g),typeof u=="function")){typeof m!="function"&&m!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,u,g);break e}l in n?n[l]=u:u===!0?n.setAttribute(l,""):Zt(n,l,u)}}}function hn(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",n),$t("load",n);var u=!1,g=!1,m;for(m in l)if(l.hasOwnProperty(m)){var j=l[m];if(j!=null)switch(m){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:yr(n,i,m,j,l,null)}}g&&yr(n,i,"srcSet",l.srcSet,l,null),u&&yr(n,i,"src",l.src,l,null);return;case"input":$t("invalid",n);var B=m=j=g=null,Z=null,_e=null;for(u in l)if(l.hasOwnProperty(u)){var Pe=l[u];if(Pe!=null)switch(u){case"name":g=Pe;break;case"type":j=Pe;break;case"checked":Z=Pe;break;case"defaultChecked":_e=Pe;break;case"value":m=Pe;break;case"defaultValue":B=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(s(137,i));break;default:yr(n,i,u,Pe,l,null)}}Se(n,m,B,Z,_e,j,g,!1),Ut(n);return;case"select":$t("invalid",n),u=j=m=null;for(g in l)if(l.hasOwnProperty(g)&&(B=l[g],B!=null))switch(g){case"value":m=B;break;case"defaultValue":j=B;break;case"multiple":u=B;default:yr(n,i,g,B,l,null)}i=m,l=j,n.multiple=!!u,i!=null?Qe(n,!!u,i,!1):l!=null&&Qe(n,!!u,l,!0);return;case"textarea":$t("invalid",n),m=g=u=null;for(j in l)if(l.hasOwnProperty(j)&&(B=l[j],B!=null))switch(j){case"value":u=B;break;case"defaultValue":g=B;break;case"children":m=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(91));break;default:yr(n,i,j,B,l,null)}ot(n,u,g,m),Ut(n);return;case"option":for(Z in l)if(l.hasOwnProperty(Z)&&(u=l[Z],u!=null))switch(Z){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:yr(n,i,Z,u,l,null)}return;case"dialog":$t("beforetoggle",n),$t("toggle",n),$t("cancel",n),$t("close",n);break;case"iframe":case"object":$t("load",n);break;case"video":case"audio":for(u=0;u<_l.length;u++)$t(_l[u],n);break;case"image":$t("error",n),$t("load",n);break;case"details":$t("toggle",n);break;case"embed":case"source":case"link":$t("error",n),$t("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in l)if(l.hasOwnProperty(_e)&&(u=l[_e],u!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:yr(n,i,_e,u,l,null)}return;default:if(Pt(i)){for(Pe in l)l.hasOwnProperty(Pe)&&(u=l[Pe],u!==void 0&&ih(n,i,Pe,u,l,void 0));return}}for(B in l)l.hasOwnProperty(B)&&(u=l[B],u!=null&&yr(n,i,B,u,l,null))}function C_(n,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,j=null,B=null,Z=null,_e=null,Pe=null;for(Re in l){var Ue=l[Re];if(l.hasOwnProperty(Re)&&Ue!=null)switch(Re){case"checked":break;case"value":break;case"defaultValue":Z=Ue;default:u.hasOwnProperty(Re)||yr(n,i,Re,null,u,Ue)}}for(var ke in u){var Re=u[ke];if(Ue=l[ke],u.hasOwnProperty(ke)&&(Re!=null||Ue!=null))switch(ke){case"type":m=Re;break;case"name":g=Re;break;case"checked":_e=Re;break;case"defaultChecked":Pe=Re;break;case"value":j=Re;break;case"defaultValue":B=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(s(137,i));break;default:Re!==Ue&&yr(n,i,ke,Re,u,Ue)}}R(n,j,B,Z,_e,Pe,m,g);return;case"select":Re=j=B=ke=null;for(m in l)if(Z=l[m],l.hasOwnProperty(m)&&Z!=null)switch(m){case"value":break;case"multiple":Re=Z;default:u.hasOwnProperty(m)||yr(n,i,m,null,u,Z)}for(g in u)if(m=u[g],Z=l[g],u.hasOwnProperty(g)&&(m!=null||Z!=null))switch(g){case"value":ke=m;break;case"defaultValue":B=m;break;case"multiple":j=m;default:m!==Z&&yr(n,i,g,m,u,Z)}i=B,l=j,u=Re,ke!=null?Qe(n,!!l,ke,!1):!!u!=!!l&&(i!=null?Qe(n,!!l,i,!0):Qe(n,!!l,l?[]:"",!1));return;case"textarea":Re=ke=null;for(B in l)if(g=l[B],l.hasOwnProperty(B)&&g!=null&&!u.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:yr(n,i,B,null,u,g)}for(j in u)if(g=u[j],m=l[j],u.hasOwnProperty(j)&&(g!=null||m!=null))switch(j){case"value":ke=g;break;case"defaultValue":Re=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==m&&yr(n,i,j,g,u,m)}He(n,ke,Re);return;case"option":for(var Rt in l)if(ke=l[Rt],l.hasOwnProperty(Rt)&&ke!=null&&!u.hasOwnProperty(Rt))switch(Rt){case"selected":n.selected=!1;break;default:yr(n,i,Rt,null,u,ke)}for(Z in u)if(ke=u[Z],Re=l[Z],u.hasOwnProperty(Z)&&ke!==Re&&(ke!=null||Re!=null))switch(Z){case"selected":n.selected=ke&&typeof ke!="function"&&typeof ke!="symbol";break;default:yr(n,i,Z,ke,u,Re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in l)ke=l[jt],l.hasOwnProperty(jt)&&ke!=null&&!u.hasOwnProperty(jt)&&yr(n,i,jt,null,u,ke);for(_e in u)if(ke=u[_e],Re=l[_e],u.hasOwnProperty(_e)&&ke!==Re&&(ke!=null||Re!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(s(137,i));break;default:yr(n,i,_e,ke,u,Re)}return;default:if(Pt(i)){for(var vr in l)ke=l[vr],l.hasOwnProperty(vr)&&ke!==void 0&&!u.hasOwnProperty(vr)&&ih(n,i,vr,void 0,u,ke);for(Pe in u)ke=u[Pe],Re=l[Pe],!u.hasOwnProperty(Pe)||ke===Re||ke===void 0&&Re===void 0||ih(n,i,Pe,ke,u,Re);return}}for(var pe in l)ke=l[pe],l.hasOwnProperty(pe)&&ke!=null&&!u.hasOwnProperty(pe)&&yr(n,i,pe,null,u,ke);for(Ue in u)ke=u[Ue],Re=l[Ue],!u.hasOwnProperty(Ue)||ke===Re||ke==null&&Re==null||yr(n,i,Ue,ke,u,Re)}var oh=null,lh=null;function dd(n){return n.nodeType===9?n:n.ownerDocument}function lm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cm(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function ch(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var dh=null;function A_(){var n=window.event;return n&&n.type==="popstate"?n===dh?!1:(dh=n,!0):(dh=null,!1)}var dm=typeof setTimeout=="function"?setTimeout:void 0,R_=typeof clearTimeout=="function"?clearTimeout:void 0,um=typeof Promise=="function"?Promise:void 0,N_=typeof queueMicrotask=="function"?queueMicrotask:typeof um<"u"?function(n){return um.resolve(null).then(n).catch(D_)}:dm;function D_(n){setTimeout(function(){throw n})}function ka(n){return n==="head"}function fm(n,i){var l=i,u=0,g=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(0<u&&8>u){l=u;var j=n.ownerDocument;if(l&1&&wl(j.documentElement),l&2&&wl(j.body),l&4)for(l=j.head,wl(l),j=l.firstChild;j;){var B=j.nextSibling,Z=j.nodeName;j[F]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&j.rel.toLowerCase()==="stylesheet"||l.removeChild(j),j=B}}if(g===0){n.removeChild(m),Nl(i);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:u=l.charCodeAt(0)-48;else u=0;l=m}while(l);Nl(i)}function uh(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":uh(l),z(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function O_(n,i,l,u){for(;n.nodeType===1;){var g=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[F])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ms(n.nextSibling),n===null)break}return null}function I_(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=ms(n.nextSibling),n===null))return null;return n}function fh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function B_(n,i){var l=n.ownerDocument;if(n.data!=="$?"||l.readyState==="complete")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ms(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var hh=null;function hm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}function pm(n,i,l){switch(i=dd(l),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function wl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);z(n)}var cs=new Map,gm=new Set;function ud(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Js=fe.d;fe.d={f:M_,r:F_,D:L_,C:P_,L:z_,m:U_,X:q_,S:W_,M:$_};function M_(){var n=Js.f(),i=rd();return n||i}function F_(n){var i=Y(n);i!==null&&i.tag===5&&i.type==="form"?Bg(i):Js.r(n)}var ro=typeof document>"u"?null:document;function xm(n,i,l){var u=ro;if(u&&typeof i=="string"&&i){var g=er(i);g='link[rel="'+n+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),gm.has(g)||(gm.add(g),n={rel:n,crossOrigin:l,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),hn(i,"link",n),ge(i),u.head.appendChild(i)))}}function L_(n){Js.D(n),xm("dns-prefetch",n,null)}function P_(n,i){Js.C(n,i),xm("preconnect",n,i)}function z_(n,i,l){Js.L(n,i,l);var u=ro;if(u&&n&&i){var g='link[rel="preload"][as="'+er(i)+'"]';i==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+er(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+er(l.imageSizes)+'"]')):g+='[href="'+er(n)+'"]';var m=g;switch(i){case"style":m=no(n);break;case"script":m=so(n)}cs.has(m)||(n=x({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),cs.set(m,n),u.querySelector(g)!==null||i==="style"&&u.querySelector(Tl(m))||i==="script"&&u.querySelector(jl(m))||(i=u.createElement("link"),hn(i,"link",n),ge(i),u.head.appendChild(i)))}}function U_(n,i){Js.m(n,i);var l=ro;if(l&&n){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+er(u)+'"][href="'+er(n)+'"]',m=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=so(n)}if(!cs.has(m)&&(n=x({rel:"modulepreload",href:n},i),cs.set(m,n),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(jl(m)))return}u=l.createElement("link"),hn(u,"link",n),ge(u),l.head.appendChild(u)}}}function W_(n,i,l){Js.S(n,i,l);var u=ro;if(u&&n){var g=Ie(u).hoistableStyles,m=no(n);i=i||"default";var j=g.get(m);if(!j){var B={loading:0,preload:null};if(j=u.querySelector(Tl(m)))B.loading=5;else{n=x({rel:"stylesheet",href:n,"data-precedence":i},l),(l=cs.get(m))&&ph(n,l);var Z=j=u.createElement("link");ge(Z),hn(Z,"link",n),Z._p=new Promise(function(_e,Pe){Z.onload=_e,Z.onerror=Pe}),Z.addEventListener("load",function(){B.loading|=1}),Z.addEventListener("error",function(){B.loading|=2}),B.loading|=4,fd(j,i,u)}j={type:"stylesheet",instance:j,count:1,state:B},g.set(m,j)}}}function q_(n,i){Js.X(n,i);var l=ro;if(l&&n){var u=Ie(l).hoistableScripts,g=so(n),m=u.get(g);m||(m=l.querySelector(jl(g)),m||(n=x({src:n,async:!0},i),(i=cs.get(g))&&gh(n,i),m=l.createElement("script"),ge(m),hn(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function $_(n,i){Js.M(n,i);var l=ro;if(l&&n){var u=Ie(l).hoistableScripts,g=so(n),m=u.get(g);m||(m=l.querySelector(jl(g)),m||(n=x({src:n,async:!0,type:"module"},i),(i=cs.get(g))&&gh(n,i),m=l.createElement("script"),ge(m),hn(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function mm(n,i,l,u){var g=(g=ue.current)?ud(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=no(l.href),l=Ie(g).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=no(l.href);var m=Ie(g).hoistableStyles,j=m.get(n);if(j||(g=g.ownerDocument||g,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,j),(m=g.querySelector(Tl(n)))&&!m._p&&(j.instance=m,j.state.loading=5),cs.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},cs.set(n,l),m||H_(g,n,l,j.state))),i&&u===null)throw Error(s(528,""));return j}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=so(l),l=Ie(g).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function no(n){return'href="'+er(n)+'"'}function Tl(n){return'link[rel="stylesheet"]['+n+"]"}function ym(n){return x({},n,{"data-precedence":n.precedence,precedence:null})}function H_(n,i,l,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),hn(i,"link",l),ge(i),n.head.appendChild(i))}function so(n){return'[src="'+er(n)+'"]'}function jl(n){return"script[async]"+n}function vm(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+er(l.href)+'"]');if(u)return i.instance=u,ge(u),u;var g=x({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ge(u),hn(u,"style",g),fd(u,l.precedence,n),i.instance=u;case"stylesheet":g=no(l.href);var m=n.querySelector(Tl(g));if(m)return i.state.loading|=4,i.instance=m,ge(m),m;u=ym(l),(g=cs.get(g))&&ph(u,g),m=(n.ownerDocument||n).createElement("link"),ge(m);var j=m;return j._p=new Promise(function(B,Z){j.onload=B,j.onerror=Z}),hn(m,"link",u),i.state.loading|=4,fd(m,l.precedence,n),i.instance=m;case"script":return m=so(l.src),(g=n.querySelector(jl(m)))?(i.instance=g,ge(g),g):(u=l,(g=cs.get(m))&&(u=x({},l),gh(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),ge(g),hn(g,"link",u),n.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,fd(u,l.precedence,n));return i.instance}function fd(n,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,m=g,j=0;j<u.length;j++){var B=u[j];if(B.dataset.precedence===i)m=B;else if(m!==g)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function ph(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function gh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var hd=null;function bm(n,i,l){if(hd===null){var u=new Map,g=hd=new Map;g.set(l,u)}else g=hd,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(n))return u;for(u.set(n,null),l=l.getElementsByTagName(n),g=0;g<l.length;g++){var m=l[g];if(!(m[F]||m[Et]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var j=m.getAttribute(i)||"";j=n+j;var B=u.get(j);B?B.push(m):u.set(j,[m])}}return u}function _m(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function G_(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Sm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var El=null;function V_(){}function Y_(n,i,l){if(El===null)throw Error(s(475));var u=El;if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=no(l.href),m=n.querySelector(Tl(g));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=pd.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=m,ge(m);return}m=n.ownerDocument||n,l=ym(l),(g=cs.get(g))&&ph(l,g),m=m.createElement("link"),ge(m);var j=m;j._p=new Promise(function(B,Z){j.onload=B,j.onerror=Z}),hn(m,"link",l),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=pd.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function K_(){if(El===null)throw Error(s(475));var n=El;return n.stylesheets&&n.count===0&&xh(n,n.stylesheets),0<n.count?function(i){var l=setTimeout(function(){if(n.stylesheets&&xh(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(l)}}:null}function pd(){if(this.count--,this.count===0){if(this.stylesheets)xh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var gd=null;function xh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,gd=new Map,i.forEach(X_,n),gd=null,pd.call(n))}function X_(n,i){if(!(i.state.loading&4)){var l=gd.get(n);if(l)var u=l.get(null);else{l=new Map,gd.set(n,l);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var j=g[m];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(l.set(j.dataset.precedence,j),u=j)}u&&l.set(null,u)}g=i.instance,j=g.getAttribute("data-precedence"),m=l.get(j)||u,m===u&&l.set(null,g),l.set(j,g),this.count++,u=pd.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),m?m.parentNode.insertBefore(g,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),i.state.loading|=4}}var kl={$$typeof:O,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function Q_(n,i,l,u,g,m,j,B){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.hiddenUpdates=mt(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function wm(n,i,l,u,g,m,j,B,Z,_e,Pe,Ue){return n=new Q_(n,i,l,j,B,Z,_e,Ue),i=1,m===!0&&(i|=24),m=Gn(3,null,null,i),n.current=m,m.stateNode=n,i=Xu(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:l,cache:i},ef(m),n}function Tm(n){return n?(n=Bi,n):Bi}function jm(n,i,l,u,g,m){g=Tm(g),u.context===null?u.context=g:u.pendingContext=g,u=pa(i),u.payload={element:l},m=m===void 0?null:m,m!==null&&(u.callback=m),l=ga(n,u,i),l!==null&&(Qn(l,n,i),nl(l,n,i))}function Em(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function mh(n,i){Em(n,i),(n=n.alternate)&&Em(n,i)}function km(n){if(n.tag===13){var i=Ii(n,67108864);i!==null&&Qn(i,n,67108864),mh(n,67108864)}}var xd=!0;function J_(n,i,l,u){var g=J.T;J.T=null;var m=fe.p;try{fe.p=2,yh(n,i,l,u)}finally{fe.p=m,J.T=g}}function Z_(n,i,l,u){var g=J.T;J.T=null;var m=fe.p;try{fe.p=8,yh(n,i,l,u)}finally{fe.p=m,J.T=g}}function yh(n,i,l,u){if(xd){var g=vh(u);if(g===null)ah(n,i,u,md,l),Am(n,u);else if(tS(g,n,i,l,u))u.stopPropagation();else if(Am(n,u),i&4&&-1<eS.indexOf(n)){for(;g!==null;){var m=Y(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var j=or(m.pendingLanes);if(j!==0){var B=m;for(B.pendingLanes|=2,B.entangledLanes|=2;j;){var Z=1<<31-me(j);B.entanglements[1]|=Z,j&=~Z}Os(m),(cr&6)===0&&(ed=Me()+500,bl(0))}}break;case 13:B=Ii(m,2),B!==null&&Qn(B,m,2),rd(),mh(m,2)}if(m=vh(u),m===null&&ah(n,i,u,md,l),m===g)break;g=m}g!==null&&u.stopPropagation()}else ah(n,i,u,null,l)}}function vh(n){return n=wu(n),bh(n)}var md=null;function bh(n){if(md=null,n=G(n),n!==null){var i=c(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=d(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return md=n,null}function Cm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ct()){case pt:return 2;case ut:return 8;case St:case ft:return 32;case Ft:return 268435456;default:return 32}default:return 32}}var _h=!1,Ca=null,Aa=null,Ra=null,Cl=new Map,Al=new Map,Na=[],eS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Am(n,i){switch(n){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Cl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(i.pointerId)}}function Rl(n,i,l,u,g,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:m,targetContainers:[g]},i!==null&&(i=Y(i),i!==null&&km(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function tS(n,i,l,u,g){switch(i){case"focusin":return Ca=Rl(Ca,n,i,l,u,g),!0;case"dragenter":return Aa=Rl(Aa,n,i,l,u,g),!0;case"mouseover":return Ra=Rl(Ra,n,i,l,u,g),!0;case"pointerover":var m=g.pointerId;return Cl.set(m,Rl(Cl.get(m)||null,n,i,l,u,g)),!0;case"gotpointercapture":return m=g.pointerId,Al.set(m,Rl(Al.get(m)||null,n,i,l,u,g)),!0}return!1}function Rm(n){var i=G(n.target);if(i!==null){var l=c(i);if(l!==null){if(i=l.tag,i===13){if(i=d(l),i!==null){n.blockedOn=i,Nr(n.priority,function(){if(l.tag===13){var u=Xn();u=Wr(u);var g=Ii(l,u);g!==null&&Qn(g,l,u),mh(l,u)}});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yd(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=vh(n.nativeEvent);if(l===null){l=n.nativeEvent;var u=new l.constructor(l.type,l);Su=u,l.target.dispatchEvent(u),Su=null}else return i=Y(l),i!==null&&km(i),n.blockedOn=l,!1;i.shift()}return!0}function Nm(n,i,l){yd(n)&&l.delete(i)}function rS(){_h=!1,Ca!==null&&yd(Ca)&&(Ca=null),Aa!==null&&yd(Aa)&&(Aa=null),Ra!==null&&yd(Ra)&&(Ra=null),Cl.forEach(Nm),Al.forEach(Nm)}function vd(n,i){n.blockedOn===i&&(n.blockedOn=null,_h||(_h=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rS)))}var bd=null;function Dm(n){bd!==n&&(bd=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){bd===n&&(bd=null);for(var i=0;i<n.length;i+=3){var l=n[i],u=n[i+1],g=n[i+2];if(typeof u!="function"){if(bh(u||l)===null)continue;break}var m=Y(l);m!==null&&(n.splice(i,3),i-=3,bf(m,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function Nl(n){function i(Z){return vd(Z,n)}Ca!==null&&vd(Ca,n),Aa!==null&&vd(Aa,n),Ra!==null&&vd(Ra,n),Cl.forEach(i),Al.forEach(i);for(var l=0;l<Na.length;l++){var u=Na[l];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Na.length&&(l=Na[0],l.blockedOn===null);)Rm(l),l.blockedOn===null&&Na.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],m=l[u+1],j=g[Dr]||null;if(typeof m=="function")j||Dm(l);else if(j){var B=null;if(m&&m.hasAttribute("formAction")){if(g=m,j=m[Dr]||null)B=j.formAction;else if(bh(g)!==null)continue}else B=j.action;typeof B=="function"?l[u+1]=B:(l.splice(u,3),u-=3),Dm(l)}}}function Sh(n){this._internalRoot=n}_d.prototype.render=Sh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,u=Xn();jm(l,u,n,i,null,null)},_d.prototype.unmount=Sh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;jm(n.current,2,null,n,null,null),rd(),i[rn]=null}};function _d(n){this._internalRoot=n}_d.prototype.unstable_scheduleHydration=function(n){if(n){var i=Bn();n={blockedOn:null,target:n,priority:i};for(var l=0;l<Na.length&&i!==0&&i<Na[l].priority;l++);Na.splice(l,0,n),l===0&&Rm(n)}};var Om=t.version;if(Om!=="19.1.1")throw Error(s(527,Om,"19.1.1"));fe.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(i),n=n!==null?h(n):null,n=n===null?null:n.stateNode,n};var nS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{Xt=Sd.inject(nS),It=Sd}catch{}}return Ol.createRoot=function(n,i){if(!o(n))throw Error(s(299));var l=!1,u="",g=Kg,m=Xg,j=Qg,B=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(j=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(B=i.unstable_transitionCallbacks)),i=wm(n,1,!1,null,null,l,u,g,m,j,B,null),n[rn]=i.current,sh(n),new Sh(i)},Ol.hydrateRoot=function(n,i,l){if(!o(n))throw Error(s(299));var u=!1,g="",m=Kg,j=Xg,B=Qg,Z=null,_e=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(j=l.onCaughtError),l.onRecoverableError!==void 0&&(B=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Z=l.unstable_transitionCallbacks),l.formState!==void 0&&(_e=l.formState)),i=wm(n,1,!0,i,l??null,u,g,m,j,B,Z,_e),i.context=Tm(null),l=i.current,u=Xn(),u=Wr(u),g=pa(u),g.callback=null,ga(l,g,u),l=u,i.current.lanes=l,vt(i,l),Os(i),n[rn]=i.current,sh(n),new _d(i)},Ol.version="19.1.1",Ol}var qm;function pS(){if(qm)return jh.exports;qm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),jh.exports=hS(),jh.exports}var gS=pS();const xS=w0(gS);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $m="popstate";function mS(e={}){function t(s,o){let{pathname:c,search:d,hash:f}=s.location;return Zh("",{pathname:c,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){return typeof o=="string"?o:Ql(o)}return vS(t,r,null,e)}function Rr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yS(){return Math.random().toString(36).substring(2,10)}function Hm(e,t){return{usr:e.state,key:e.key,idx:t}}function Zh(e,t,r=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ro(t):t,state:r,key:t&&t.key||s||yS()}}function Ql({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ro(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function vS(e,t,r,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,f="POP",p=null,h=x();h==null&&(h=0,d.replaceState({...d.state,idx:h},""));function x(){return(d.state||{idx:null}).idx}function v(){f="POP";let S=x(),A=S==null?null:S-h;h=S,p&&p({action:f,location:_.location,delta:A})}function y(S,A){f="PUSH";let k=Zh(_.location,S,A);h=x()+1;let O=Hm(k,h),L=_.createHref(k);try{d.pushState(O,"",L)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(L)}c&&p&&p({action:f,location:_.location,delta:1})}function b(S,A){f="REPLACE";let k=Zh(_.location,S,A);h=x();let O=Hm(k,h),L=_.createHref(k);d.replaceState(O,"",L),c&&p&&p({action:f,location:_.location,delta:0})}function w(S){return bS(S)}let _={get action(){return f},get location(){return e(o,d)},listen(S){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener($m,v),p=S,()=>{o.removeEventListener($m,v),p=null}},createHref(S){return t(o,S)},createURL:w,encodeLocation(S){let A=w(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:b,go(S){return d.go(S)}};return _}function bS(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Rr(r,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:Ql(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function wy(e,t,r="/"){return _S(e,t,r,!1)}function _S(e,t,r,s){let o=typeof t=="string"?Ro(t):t,c=oa(o.pathname||"/",r);if(c==null)return null;let d=Ty(e);SS(d);let f=null;for(let p=0;f==null&&p<d.length;++p){let h=OS(c);f=NS(d[p],h,s)}return f}function Ty(e,t=[],r=[],s="",o=!1){let c=(d,f,p=o,h)=>{let x={relativePath:h===void 0?d.path||"":h,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(s)&&p)return;Rr(x.relativePath.startsWith(s),`Absolute route path "${x.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(s.length)}let v=na([s,x.relativePath]),y=r.concat(x);d.children&&d.children.length>0&&(Rr(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Ty(d.children,t,y,v,p)),!(d.path==null&&!d.index)&&t.push({path:v,score:AS(v,d.index),routesMeta:y})};return e.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))c(d,f);else for(let p of jy(d.path))c(d,f,!0,p)}),t}function jy(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,o=r.endsWith("?"),c=r.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=jy(s.join("/")),f=[];return f.push(...d.map(p=>p===""?c:[c,p].join("/"))),o&&f.push(...d),f.map(p=>e.startsWith("/")&&p===""?"/":p)}function SS(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:RS(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var wS=/^:[\w-]+$/,TS=3,jS=2,ES=1,kS=10,CS=-2,Gm=e=>e==="*";function AS(e,t){let r=e.split("/"),s=r.length;return r.some(Gm)&&(s+=CS),t&&(s+=jS),r.filter(o=>!Gm(o)).reduce((o,c)=>o+(wS.test(c)?TS:c===""?ES:kS),s)}function RS(e,t){return e.length===t.length&&e.slice(0,-1).every((s,o)=>s===t[o])?e[e.length-1]-t[t.length-1]:0}function NS(e,t,r=!1){let{routesMeta:s}=e,o={},c="/",d=[];for(let f=0;f<s.length;++f){let p=s[f],h=f===s.length-1,x=c==="/"?t:t.slice(c.length)||"/",v=Ud({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},x),y=p.route;if(!v&&h&&r&&!s[s.length-1].route.index&&(v=Ud({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},x)),!v)return null;Object.assign(o,v.params),d.push({params:o,pathname:na([c,v.pathname]),pathnameBase:FS(na([c,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(c=na([c,v.pathnameBase]))}return d}function Ud(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=DS(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((h,{paramName:x,isOptional:v},y)=>{if(x==="*"){let w=f[y]||"";d=c.slice(0,c.length-w.length).replace(/(.)\/+$/,"$1")}const b=f[y];return v&&!b?h[x]=void 0:h[x]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:c,pathnameBase:d,pattern:e}}function DS(e,t=!1,r=!0){hs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),s]}function OS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function oa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function IS(e,t="/"){let{pathname:r,search:s="",hash:o=""}=typeof e=="string"?Ro(e):e;return{pathname:r?r.startsWith("/")?r:BS(r,t):t,search:LS(s),hash:PS(o)}}function BS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Ah(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MS(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function j0(e){let t=MS(e);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function E0(e,t,r,s=!1){let o;typeof e=="string"?o=Ro(e):(o={...e},Rr(!o.pathname||!o.pathname.includes("?"),Ah("?","pathname","search",o)),Rr(!o.pathname||!o.pathname.includes("#"),Ah("#","pathname","hash",o)),Rr(!o.search||!o.search.includes("#"),Ah("#","search","hash",o)));let c=e===""||o.pathname==="",d=c?"/":o.pathname,f;if(d==null)f=r;else{let v=t.length-1;if(!s&&d.startsWith("..")){let y=d.split("/");for(;y[0]==="..";)y.shift(),v-=1;o.pathname=y.join("/")}f=v>=0?t[v]:"/"}let p=IS(o,f),h=d&&d!=="/"&&d.endsWith("/"),x=(c||d===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(h||x)&&(p.pathname+="/"),p}var na=e=>e.join("/").replace(/\/\/+/g,"/"),FS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,PS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Ey=["POST","PUT","PATCH","DELETE"];new Set(Ey);var US=["GET",...Ey];new Set(US);var No=T.createContext(null);No.displayName="DataRouter";var lu=T.createContext(null);lu.displayName="DataRouterState";T.createContext(!1);var ky=T.createContext({isTransitioning:!1});ky.displayName="ViewTransition";var WS=T.createContext(new Map);WS.displayName="Fetchers";var qS=T.createContext(null);qS.displayName="Await";var js=T.createContext(null);js.displayName="Navigation";var oc=T.createContext(null);oc.displayName="Location";var Es=T.createContext({outlet:null,matches:[],isDataRoute:!1});Es.displayName="Route";var k0=T.createContext(null);k0.displayName="RouteError";function $S(e,{relative:t}={}){Rr(Do(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=T.useContext(js),{hash:o,pathname:c,search:d}=lc(e,{relative:t}),f=c;return r!=="/"&&(f=c==="/"?r:na([r,c])),s.createHref({pathname:f,search:d,hash:o})}function Do(){return T.useContext(oc)!=null}function ks(){return Rr(Do(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(oc).location}var Cy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ay(e){T.useContext(js).static||T.useLayoutEffect(e)}function Ls(){let{isDataRoute:e}=T.useContext(Es);return e?sw():HS()}function HS(){Rr(Do(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(No),{basename:t,navigator:r}=T.useContext(js),{matches:s}=T.useContext(Es),{pathname:o}=ks(),c=JSON.stringify(j0(s)),d=T.useRef(!1);return Ay(()=>{d.current=!0}),T.useCallback((p,h={})=>{if(hs(d.current,Cy),!d.current)return;if(typeof p=="number"){r.go(p);return}let x=E0(p,JSON.parse(c),o,h.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:na([t,x.pathname])),(h.replace?r.replace:r.push)(x,h.state,h)},[t,r,c,o,e])}T.createContext(null);function GS(){let{matches:e}=T.useContext(Es),t=e[e.length-1];return t?t.params:{}}function lc(e,{relative:t}={}){let{matches:r}=T.useContext(Es),{pathname:s}=ks(),o=JSON.stringify(j0(r));return T.useMemo(()=>E0(e,JSON.parse(o),s,t==="path"),[e,o,s,t])}function VS(e,t){return Ry(e,t)}function Ry(e,t,r,s,o){Rr(Do(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=T.useContext(js),{matches:d}=T.useContext(Es),f=d[d.length-1],p=f?f.params:{},h=f?f.pathname:"/",x=f?f.pathnameBase:"/",v=f&&f.route;{let k=v&&v.path||"";Ny(h,!v||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let y=ks(),b;if(t){let k=typeof t=="string"?Ro(t):t;Rr(x==="/"||k.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${k.pathname}" was given in the \`location\` prop.`),b=k}else b=y;let w=b.pathname||"/",_=w;if(x!=="/"){let k=x.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=wy(e,{pathname:_});hs(v||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),hs(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=JS(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},p,k.params),pathname:na([x,c.encodeLocation?c.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?x:na([x,c.encodeLocation?c.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),d,r,s,o);return t&&A?T.createElement(oc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},A):A}function YS(){let e=nw(),t=zS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:c},"ErrorBoundary")," or"," ",T.createElement("code",{style:c},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:o},r):null,d)}var KS=T.createElement(YS,null),XS=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?T.createElement(Es.Provider,{value:this.props.routeContext},T.createElement(k0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QS({routeContext:e,match:t,children:r}){let s=T.useContext(No);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(Es.Provider,{value:e},r)}function JS(e,t=[],r=null,s=null,o=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let c=e,d=r?.errors;if(d!=null){let h=c.findIndex(x=>x.route.id&&d?.[x.route.id]!==void 0);Rr(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,h+1))}let f=!1,p=-1;if(r)for(let h=0;h<c.length;h++){let x=c[h];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=h),x.route.id){let{loaderData:v,errors:y}=r,b=x.route.loader&&!v.hasOwnProperty(x.route.id)&&(!y||y[x.route.id]===void 0);if(x.route.lazy||b){f=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((h,x,v)=>{let y,b=!1,w=null,_=null;r&&(y=d&&x.route.id?d[x.route.id]:void 0,w=x.route.errorElement||KS,f&&(p<0&&v===0?(Ny("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,_=null):p===v&&(b=!0,_=x.route.hydrateFallbackElement||null)));let S=t.concat(c.slice(0,v+1)),A=()=>{let k;return y?k=w:b?k=_:x.route.Component?k=T.createElement(x.route.Component,null):x.route.element?k=x.route.element:k=h,T.createElement(QS,{match:x,routeContext:{outlet:h,matches:S,isDataRoute:r!=null},children:k})};return r&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?T.createElement(XS,{location:r.location,revalidation:r.revalidation,component:w,error:y,children:A(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:s}):A()},null)}function C0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZS(e){let t=T.useContext(No);return Rr(t,C0(e)),t}function ew(e){let t=T.useContext(lu);return Rr(t,C0(e)),t}function tw(e){let t=T.useContext(Es);return Rr(t,C0(e)),t}function A0(e){let t=tw(e),r=t.matches[t.matches.length-1];return Rr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function rw(){return A0("useRouteId")}function nw(){let e=T.useContext(k0),t=ew("useRouteError"),r=A0("useRouteError");return e!==void 0?e:t.errors?.[r]}function sw(){let{router:e}=ZS("useNavigate"),t=A0("useNavigate"),r=T.useRef(!1);return Ay(()=>{r.current=!0}),T.useCallback(async(o,c={})=>{hs(r.current,Cy),r.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...c}))},[e,t])}var Vm={};function Ny(e,t,r){!t&&!Vm[e]&&(Vm[e]=!0,hs(!1,r))}T.memo(aw);function aw({routes:e,future:t,state:r,unstable_onError:s}){return Ry(e,void 0,r,s,t)}function Ym({to:e,replace:t,state:r,relative:s}){Rr(Do(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=T.useContext(js);hs(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=T.useContext(Es),{pathname:d}=ks(),f=Ls(),p=E0(e,j0(c),d,s==="path"),h=JSON.stringify(p);return T.useEffect(()=>{f(JSON.parse(h),{replace:t,state:r,relative:s})},[f,h,s,t,r]),null}function Rn(e){Rr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iw({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:o,static:c=!1}){Rr(!Do(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),f=T.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof r=="string"&&(r=Ro(r));let{pathname:p="/",search:h="",hash:x="",state:v=null,key:y="default"}=r,b=T.useMemo(()=>{let w=oa(p,d);return w==null?null:{location:{pathname:w,search:h,hash:x,state:v,key:y},navigationType:s}},[d,p,h,x,v,y,s]);return hs(b!=null,`<Router basename="${d}"> is not able to match the URL "${p}${h}${x}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:T.createElement(js.Provider,{value:f},T.createElement(oc.Provider,{children:t,value:b}))}function Dy({children:e,location:t}){return VS(e0(e),t)}function e0(e,t=[]){let r=[];return T.Children.forEach(e,(s,o)=>{if(!T.isValidElement(s))return;let c=[...t,o];if(s.type===T.Fragment){r.push.apply(r,e0(s.props.children,c));return}Rr(s.type===Rn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rr(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=e0(s.props.children,c)),r.push(d)}),r}var Pd="get",zd="application/x-www-form-urlencoded";function cu(e){return e!=null&&typeof e.tagName=="string"}function ow(e){return cu(e)&&e.tagName.toLowerCase()==="button"}function lw(e){return cu(e)&&e.tagName.toLowerCase()==="form"}function cw(e){return cu(e)&&e.tagName.toLowerCase()==="input"}function dw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function uw(e,t){return e.button===0&&(!t||t==="_self")&&!dw(e)}function t0(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(o=>[r,o]):[[r,s]])},[]))}function fw(e,t){let r=t0(e);return t&&t.forEach((s,o)=>{r.has(o)||t.getAll(o).forEach(c=>{r.append(o,c)})}),r}var wd=null;function hw(){if(wd===null)try{new FormData(document.createElement("form"),0),wd=!1}catch{wd=!0}return wd}var pw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rh(e){return e!=null&&!pw.has(e)?(hs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zd}"`),null):e}function gw(e,t){let r,s,o,c,d;if(lw(e)){let f=e.getAttribute("action");s=f?oa(f,t):null,r=e.getAttribute("method")||Pd,o=Rh(e.getAttribute("enctype"))||zd,c=new FormData(e)}else if(ow(e)||cw(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||f.getAttribute("action");if(s=p?oa(p,t):null,r=e.getAttribute("formmethod")||f.getAttribute("method")||Pd,o=Rh(e.getAttribute("formenctype"))||Rh(f.getAttribute("enctype"))||zd,c=new FormData(f,e),!hw()){let{name:h,type:x,value:v}=e;if(x==="image"){let y=h?`${h}.`:"";c.append(`${y}x`,"0"),c.append(`${y}y`,"0")}else h&&c.append(h,v)}}else{if(cu(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Pd,s=null,o=zd,d=e}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:r.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function R0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xw(e,t,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&oa(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function mw(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function vw(e,t,r){let s=await Promise.all(e.map(async o=>{let c=t.routes[o.route.id];if(c){let d=await mw(c,r);return d.links?d.links():[]}return[]}));return ww(s.flat(1).filter(yw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Km(e,t,r,s,o,c){let d=(p,h)=>r[h]?p.route.id!==r[h].route.id:!0,f=(p,h)=>r[h].pathname!==p.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==p.params["*"];return c==="assets"?t.filter((p,h)=>d(p,h)||f(p,h)):c==="data"?t.filter((p,h)=>{let x=s.routes[p.route.id];if(!x||!x.hasLoader)return!1;if(d(p,h)||f(p,h))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function bw(e,t,{includeHydrateFallback:r}={}){return _w(e.map(s=>{let o=t.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function _w(e){return[...new Set(e)]}function Sw(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}function ww(e,t){let r=new Set;return new Set(t),e.reduce((s,o)=>{let c=JSON.stringify(Sw(o));return r.has(c)||(r.add(c),s.push({key:c,link:o})),s},[])}function Oy(){let e=T.useContext(No);return R0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Tw(){let e=T.useContext(lu);return R0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var N0=T.createContext(void 0);N0.displayName="FrameworkContext";function Iy(){let e=T.useContext(N0);return R0(e,"You must render this element inside a <HydratedRouter> element"),e}function jw(e,t){let r=T.useContext(N0),[s,o]=T.useState(!1),[c,d]=T.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:h,onMouseLeave:x,onTouchStart:v}=t,y=T.useRef(null);T.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let _=A=>{A.forEach(k=>{d(k.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),T.useEffect(()=>{if(s){let _=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(_)}}},[s]);let b=()=>{o(!0)},w=()=>{o(!1),d(!1)};return r?e!=="intent"?[c,y,{}]:[c,y,{onFocus:Il(f,b),onBlur:Il(p,w),onMouseEnter:Il(h,b),onMouseLeave:Il(x,w),onTouchStart:Il(v,b)}]:[!1,y,{}]}function Il(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Ew({page:e,...t}){let{router:r}=Oy(),s=T.useMemo(()=>wy(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?T.createElement(Cw,{page:e,matches:s,...t}):null}function kw(e){let{manifest:t,routeModules:r}=Iy(),[s,o]=T.useState([]);return T.useEffect(()=>{let c=!1;return vw(e,t,r).then(d=>{c||o(d)}),()=>{c=!0}},[e,t,r]),s}function Cw({page:e,matches:t,...r}){let s=ks(),{manifest:o,routeModules:c}=Iy(),{basename:d}=Oy(),{loaderData:f,matches:p}=Tw(),h=T.useMemo(()=>Km(e,t,p,o,s,"data"),[e,t,p,o,s]),x=T.useMemo(()=>Km(e,t,p,o,s,"assets"),[e,t,p,o,s]),v=T.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let w=new Set,_=!1;if(t.forEach(A=>{let k=o.routes[A.route.id];!k||!k.hasLoader||(!h.some(O=>O.route.id===A.route.id)&&A.route.id in f&&c[A.route.id]?.shouldRevalidate||k.hasClientLoader?_=!0:w.add(A.route.id))}),w.size===0)return[];let S=xw(e,d,"data");return _&&w.size>0&&S.searchParams.set("_routes",t.filter(A=>w.has(A.route.id)).map(A=>A.route.id).join(",")),[S.pathname+S.search]},[d,f,s,o,h,t,e,c]),y=T.useMemo(()=>bw(x,o),[x,o]),b=kw(x);return T.createElement(T.Fragment,null,v.map(w=>T.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),y.map(w=>T.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),b.map(({key:w,link:_})=>T.createElement("link",{key:w,nonce:r.nonce,..._})))}function Aw(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var By=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{By&&(window.__reactRouterVersion="7.9.1")}catch{}function Rw({basename:e,children:t,window:r}){let s=T.useRef();s.current==null&&(s.current=mS({window:r,v5Compat:!0}));let o=s.current,[c,d]=T.useState({action:o.action,location:o.location}),f=T.useCallback(p=>{T.startTransition(()=>d(p))},[d]);return T.useLayoutEffect(()=>o.listen(f),[o,f]),T.createElement(iw,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:o})}var My=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ma=T.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:f,target:p,to:h,preventScrollReset:x,viewTransition:v,...y},b){let{basename:w}=T.useContext(js),_=typeof h=="string"&&My.test(h),S,A=!1;if(typeof h=="string"&&_&&(S=h,By))try{let ee=new URL(window.location.href),de=h.startsWith("//")?new URL(ee.protocol+h):new URL(h),oe=oa(de.pathname,w);de.origin===ee.origin&&oe!=null?h=oe+de.search+de.hash:A=!0}catch{hs(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=$S(h,{relative:o}),[O,L,K]=jw(s,y),ne=Iw(h,{replace:d,state:f,target:p,preventScrollReset:x,relative:o,viewTransition:v});function M(ee){t&&t(ee),ee.defaultPrevented||ne(ee)}let re=T.createElement("a",{...y,...K,href:S||k,onClick:A||c?t:M,ref:Aw(b,L),target:p,"data-discover":!_&&r==="render"?"true":void 0});return O&&!_?T.createElement(T.Fragment,null,re,T.createElement(Ew,{page:k})):re});Ma.displayName="Link";var Nw=T.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:f,children:p,...h},x){let v=lc(d,{relative:h.relative}),y=ks(),b=T.useContext(lu),{navigator:w,basename:_}=T.useContext(js),S=b!=null&&Pw(v)&&f===!0,A=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,k=y.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(k=k.toLowerCase(),O=O?O.toLowerCase():null,A=A.toLowerCase()),O&&_&&(O=oa(O,_)||O);const L=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let K=k===A||!o&&k.startsWith(A)&&k.charAt(L)==="/",ne=O!=null&&(O===A||!o&&O.startsWith(A)&&O.charAt(A.length)==="/"),M={isActive:K,isPending:ne,isTransitioning:S},re=K?t:void 0,ee;typeof s=="function"?ee=s(M):ee=[s,K?"active":null,ne?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let de=typeof c=="function"?c(M):c;return T.createElement(Ma,{...h,"aria-current":re,className:ee,ref:x,style:de,to:d,viewTransition:f},typeof p=="function"?p(M):p)});Nw.displayName="NavLink";var Dw=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:o,state:c,method:d=Pd,action:f,onSubmit:p,relative:h,preventScrollReset:x,viewTransition:v,...y},b)=>{let w=Fw(),_=Lw(f,{relative:h}),S=d.toLowerCase()==="get"?"get":"post",A=typeof f=="string"&&My.test(f),k=O=>{if(p&&p(O),O.defaultPrevented)return;O.preventDefault();let L=O.nativeEvent.submitter,K=L?.getAttribute("formmethod")||d;w(L||O.currentTarget,{fetcherKey:t,method:K,navigate:r,replace:o,state:c,relative:h,preventScrollReset:x,viewTransition:v})};return T.createElement("form",{ref:b,method:S,action:_,onSubmit:s?p:k,...y,"data-discover":!A&&e==="render"?"true":void 0})});Dw.displayName="Form";function Ow(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fy(e){let t=T.useContext(No);return Rr(t,Ow(e)),t}function Iw(e,{target:t,replace:r,state:s,preventScrollReset:o,relative:c,viewTransition:d}={}){let f=Ls(),p=ks(),h=lc(e,{relative:c});return T.useCallback(x=>{if(uw(x,t)){x.preventDefault();let v=r!==void 0?r:Ql(p)===Ql(h);f(e,{replace:v,state:s,preventScrollReset:o,relative:c,viewTransition:d})}},[p,f,h,r,s,t,e,o,c,d])}function Ly(e){hs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=T.useRef(t0(e)),r=T.useRef(!1),s=ks(),o=T.useMemo(()=>fw(s.search,r.current?null:t.current),[s.search]),c=Ls(),d=T.useCallback((f,p)=>{const h=t0(typeof f=="function"?f(new URLSearchParams(o)):f);r.current=!0,c("?"+h,p)},[c,o]);return[o,d]}var Bw=0,Mw=()=>`__${String(++Bw)}__`;function Fw(){let{router:e}=Fy("useSubmit"),{basename:t}=T.useContext(js),r=rw();return T.useCallback(async(s,o={})=>{let{action:c,method:d,encType:f,formData:p,body:h}=gw(s,t);if(o.navigate===!1){let x=o.fetcherKey||Mw();await e.fetch(x,r,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:h,formMethod:o.method||d,formEncType:o.encType||f,flushSync:o.flushSync})}else await e.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:h,formMethod:o.method||d,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,r])}function Lw(e,{relative:t}={}){let{basename:r}=T.useContext(js),s=T.useContext(Es);Rr(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...lc(e||".",{relative:t})},d=ks();if(e==null){c.search=d.search;let f=new URLSearchParams(c.search),p=f.getAll("index");if(p.some(x=>x==="")){f.delete("index"),p.filter(v=>v).forEach(v=>f.append("index",v));let x=f.toString();c.search=x?`?${x}`:""}}return(!e||e===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:na([r,c.pathname])),Ql(c)}function Pw(e,{relative:t}={}){let r=T.useContext(ky);Rr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Fy("useViewTransitionState"),o=lc(e,{relative:t});if(!r.isTransitioning)return!1;let c=oa(r.currentLocation.pathname,s)||r.currentLocation.pathname,d=oa(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Ud(o.pathname,d)!=null||Ud(o.pathname,c)!=null}var Oo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zw={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Uw=class{#e=zw;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},pi=new Uw;function Ww(e){setTimeout(e,0)}var xi=typeof window>"u"||"Deno"in globalThis;function Nn(){}function qw(e,t){return typeof e=="function"?e(t):e}function r0(e){return typeof e=="number"&&e>=0&&e!==1/0}function Py(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ua(e,t){return typeof e=="function"?e(t):e}function fs(e,t){return typeof e=="function"?e(t):e}function Xm(e,t){const{type:r="all",exact:s,fetchStatus:o,predicate:c,queryKey:d,stale:f}=e;if(d){if(s){if(t.queryHash!==D0(d,t.options))return!1}else if(!Jl(t.queryKey,d))return!1}if(r!=="all"){const p=t.isActive();if(r==="active"&&!p||r==="inactive"&&p)return!1}return!(typeof f=="boolean"&&t.isStale()!==f||o&&o!==t.state.fetchStatus||c&&!c(t))}function Qm(e,t){const{exact:r,status:s,predicate:o,mutationKey:c}=e;if(c){if(!t.options.mutationKey)return!1;if(r){if(mi(t.options.mutationKey)!==mi(c))return!1}else if(!Jl(t.options.mutationKey,c))return!1}return!(s&&t.state.status!==s||o&&!o(t))}function D0(e,t){return(t?.queryKeyHashFn||mi)(e)}function mi(e){return JSON.stringify(e,(t,r)=>n0(r)?Object.keys(r).sort().reduce((s,o)=>(s[o]=r[o],s),{}):r)}function Jl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Jl(e[r],t[r])):!1}var $w=Object.prototype.hasOwnProperty;function zy(e,t){if(e===t)return e;const r=Jm(e)&&Jm(t);if(!r&&!(n0(e)&&n0(t)))return t;const o=(r?e:Object.keys(e)).length,c=r?t:Object.keys(t),d=c.length,f=r?new Array(d):{};let p=0;for(let h=0;h<d;h++){const x=r?h:c[h],v=e[x],y=t[x];if(v===y){f[x]=v,(r?h<o:$w.call(e,x))&&p++;continue}if(v===null||y===null||typeof v!="object"||typeof y!="object"){f[x]=y;continue}const b=zy(v,y);f[x]=b,b===v&&p++}return o===d&&p===o?e:f}function Wd(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Jm(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function n0(e){if(!Zm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Zm(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Zm(e){return Object.prototype.toString.call(e)==="[object Object]"}function Hw(e){return new Promise(t=>{pi.setTimeout(t,e)})}function s0(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?zy(e,t):t}function Gw(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function Vw(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var O0=Symbol();function Uy(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===O0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Wy(e,t){return typeof e=="function"?e(...t):!!e}var Yw=class extends Oo{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!xi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},I0=new Yw;function a0(){let e,t;const r=new Promise((o,c)=>{e=o,t=c});r.status="pending",r.catch(()=>{});function s(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{s({status:"fulfilled",value:o}),e(o)},r.reject=o=>{s({status:"rejected",reason:o}),t(o)},r}var Kw=Ww;function Xw(){let e=[],t=0,r=f=>{f()},s=f=>{f()},o=Kw;const c=f=>{t?e.push(f):o(()=>{r(f)})},d=()=>{const f=e;e=[],f.length&&o(()=>{s(()=>{f.forEach(p=>{r(p)})})})};return{batch:f=>{let p;t++;try{p=f()}finally{t--,t||d()}return p},batchCalls:f=>(...p)=>{c(()=>{f(...p)})},schedule:c,setNotifyFunction:f=>{r=f},setBatchNotifyFunction:f=>{s=f},setScheduler:f=>{o=f}}}var tn=Xw(),Qw=class extends Oo{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!xi&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},qd=new Qw;function Jw(e){return Math.min(1e3*2**e,3e4)}function qy(e){return(e??"online")==="online"?qd.isOnline():!0}var i0=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function $y(e){let t=!1,r=0,s;const o=a0(),c=()=>o.status!=="pending",d=_=>{if(!c()){const S=new i0(_);y(S),e.onCancel?.(S)}},f=()=>{t=!0},p=()=>{t=!1},h=()=>I0.isFocused()&&(e.networkMode==="always"||qd.isOnline())&&e.canRun(),x=()=>qy(e.networkMode)&&e.canRun(),v=_=>{c()||(s?.(),o.resolve(_))},y=_=>{c()||(s?.(),o.reject(_))},b=()=>new Promise(_=>{s=S=>{(c()||h())&&_(S)},e.onPause?.()}).then(()=>{s=void 0,c()||e.onContinue?.()}),w=()=>{if(c())return;let _;const S=r===0?e.initialPromise:void 0;try{_=S??e.fn()}catch(A){_=Promise.reject(A)}Promise.resolve(_).then(v).catch(A=>{if(c())return;const k=e.retry??(xi?0:3),O=e.retryDelay??Jw,L=typeof O=="function"?O(r,A):O,K=k===!0||typeof k=="number"&&r<k||typeof k=="function"&&k(r,A);if(t||!K){y(A);return}r++,e.onFail?.(r,A),Hw(L).then(()=>h()?void 0:b()).then(()=>{t?y(A):w()})})};return{promise:o,status:()=>o.status,cancel:d,continue:()=>(s?.(),o),cancelRetry:f,continueRetry:p,canStart:x,start:()=>(x()?w():b().then(w),o)}}var Hy=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),r0(this.gcTime)&&(this.#e=pi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(xi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(pi.clearTimeout(this.#e),this.#e=void 0)}},Zw=class extends Hy{#e;#t;#r;#s;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#r=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=e1(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=e1(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=s0(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(Nn).catch(Nn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>fs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===O0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ua(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Py(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},o=()=>{const f=Uy(this.options,t),h=(()=>{const x={client:this.#s,queryKey:this.queryKey,meta:this.meta};return s(x),x})();return this.#o=!1,this.options.persister?this.options.persister(f,h,this):f(h)},d=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:o};return s(f),f})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta}),this.#n=$y({initialPromise:t?.initialPromise,fn:d.fetchFn,onCancel:f=>{f instanceof i0&&f.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(f,p)=>{this.#a({type:"failed",failureCount:f,error:p})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const f=await this.#n.start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#r.config.onSuccess?.(f,this),this.#r.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof i0){if(f.silent)return this.#n.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#a({type:"error",error:f}),this.#r.config.onError?.(f,this),this.#r.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Gy(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?s:void 0,s;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Gy(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qy(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function e1(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var e4=class extends Oo{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=a0(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#s=void 0;#n;#i;#o;#a;#g;#f;#h;#c;#d;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),t1(this.#t,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return o0(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return o0(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#_(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fs(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),t._defaulted&&!Wd(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&r1(this.#t,r,this.options,t)&&this.#u(),this.updateResult(),s&&(this.#t!==r||fs(this.options.enabled,this.#t)!==fs(t.enabled,this.#t)||Ua(this.options.staleTime,this.#t)!==Ua(t.staleTime,this.#t))&&this.#x();const o=this.#m();s&&(this.#t!==r||fs(this.options.enabled,this.#t)!==fs(t.enabled,this.#t)||o!==this.#l)&&this.#y(o)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return r4(this,r)&&(this.#s=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t?.(s),s==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#u(e){this.#S();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Nn)),t}#x(){this.#b();const e=Ua(this.options.staleTime,this.#t);if(xi||this.#s.isStale||!r0(e))return;const r=Py(this.#s.dataUpdatedAt,e)+1;this.#c=pi.setTimeout(()=>{this.#s.isStale||this.updateResult()},r)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#_(),this.#l=e,!(xi||fs(this.options.enabled,this.#t)===!1||!r0(this.#l)||this.#l===0)&&(this.#d=pi.setInterval(()=>{(this.options.refetchIntervalInBackground||I0.isFocused())&&this.#u()},this.#l))}#v(){this.#x(),this.#y(this.#m())}#b(){this.#c&&(pi.clearTimeout(this.#c),this.#c=void 0)}#_(){this.#d&&(pi.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const r=this.#t,s=this.options,o=this.#s,c=this.#n,d=this.#i,p=e!==r?e.state:this.#r,{state:h}=e;let x={...h},v=!1,y;if(t._optimisticResults){const re=this.hasListeners(),ee=!re&&t1(e,t),de=re&&r1(e,r,t,s);(ee||de)&&(x={...x,...Gy(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:b,errorUpdatedAt:w,status:_}=x;y=x.data;let S=!1;if(t.placeholderData!==void 0&&y===void 0&&_==="pending"){let re;o?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(re=o.data,S=!0):re=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,re!==void 0&&(_="success",y=s0(o?.data,re,t),v=!0)}if(t.select&&y!==void 0&&!S)if(o&&y===c?.data&&t.select===this.#g)y=this.#f;else try{this.#g=t.select,y=t.select(y),y=s0(o?.data,y,t),this.#f=y,this.#a=null}catch(re){this.#a=re}this.#a&&(b=this.#a,y=this.#f,w=Date.now(),_="error");const A=x.fetchStatus==="fetching",k=_==="pending",O=_==="error",L=k&&A,K=y!==void 0,M={status:_,fetchStatus:x.fetchStatus,isPending:k,isSuccess:_==="success",isError:O,isInitialLoading:L,isLoading:L,data:y,dataUpdatedAt:x.dataUpdatedAt,error:b,errorUpdatedAt:w,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>p.dataUpdateCount||x.errorUpdateCount>p.errorUpdateCount,isFetching:A,isRefetching:A&&!k,isLoadingError:O&&!K,isPaused:x.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:O&&K,isStale:B0(e,t),refetch:this.refetch,promise:this.#o,isEnabled:fs(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const re=oe=>{M.status==="error"?oe.reject(M.error):M.data!==void 0&&oe.resolve(M.data)},ee=()=>{const oe=this.#o=M.promise=a0();re(oe)},de=this.#o;switch(de.status){case"pending":e.queryHash===r.queryHash&&re(de);break;case"fulfilled":(M.status==="error"||M.data!==de.value)&&ee();break;case"rejected":(M.status!=="error"||M.error!==de.reason)&&ee();break}}return M}updateResult(){const e=this.#s,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#t),Wd(t,e))return;this.#s=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#p.size)return!0;const c=new Set(o??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#s).some(d=>{const f=d;return this.#s[f]!==e[f]&&c.has(f)})};this.#w({listeners:r()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){tn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function t4(e,t){return fs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function t1(e,t){return t4(e,t)||e.state.data!==void 0&&o0(e,t,t.refetchOnMount)}function o0(e,t,r){if(fs(t.enabled,e)!==!1&&Ua(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&B0(e,t)}return!1}function r1(e,t,r,s){return(e!==t||fs(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&B0(e,r)}function B0(e,t){return fs(t.enabled,e)!==!1&&e.isStaleByTime(Ua(t.staleTime,e))}function r4(e,t){return!Wd(e.getCurrentResult(),t)}function n1(e){return{onFetch:(t,r)=>{const s=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,c=t.state.data?.pages||[],d=t.state.data?.pageParams||[];let f={pages:[],pageParams:[]},p=0;const h=async()=>{let x=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},y=Uy(t.options,t.fetchOptions),b=async(w,_,S)=>{if(x)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const k=(()=>{const ne={client:t.client,queryKey:t.queryKey,pageParam:_,direction:S?"backward":"forward",meta:t.options.meta};return v(ne),ne})(),O=await y(k),{maxPages:L}=t.options,K=S?Vw:Gw;return{pages:K(w.pages,O,L),pageParams:K(w.pageParams,_,L)}};if(o&&c.length){const w=o==="backward",_=w?n4:s1,S={pages:c,pageParams:d},A=_(s,S);f=await b(S,A,w)}else{const w=e??c.length;do{const _=p===0?d[0]??s.initialPageParam:s1(s,f);if(p>0&&_==null)break;f=await b(f,_),p++}while(p<w)}return f};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=h}}}function s1(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function n4(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var s4=class extends Hy{#e;#t;#r;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||Vy(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=$y({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(c,d)=>{this.#n({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const s=this.state.status==="pending",o=!this.#s.canStart();try{if(s)t();else{this.#n({type:"pending",variables:e,isPaused:o}),await this.#r.config.onMutate?.(e,this,r);const d=await this.options.onMutate?.(e,r);d!==this.state.context&&this.#n({type:"pending",context:d,variables:e,isPaused:o})}const c=await this.#s.start();return await this.#r.config.onSuccess?.(c,e,this.state.context,this,r),await this.options.onSuccess?.(c,e,this.state.context,r),await this.#r.config.onSettled?.(c,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(c,null,e,this.state.context,r),this.#n({type:"success",data:c}),c}catch(c){try{throw await this.#r.config.onError?.(c,e,this.state.context,this,r),await this.options.onError?.(c,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,c,e,this.state.context,r),c}finally{this.#n({type:"error",error:c})}}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),tn.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function Vy(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var a4=class extends Oo{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const s=new s4({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){this.#e.add(e);const t=Td(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Td(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Td(e);if(typeof t=="string"){const s=this.#t.get(t)?.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){const t=Td(e);return typeof t=="string"?this.#t.get(t)?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){tn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Qm(t,r))}findAll(e={}){return this.getAll().filter(t=>Qm(e,t))}notify(e){tn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return tn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Nn))))}};function Td(e){return e.options.scope?.id}var i4=class extends Oo{#e;#t=void 0;#r;#s;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Wd(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&mi(r.mutationKey)!==mi(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#s=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??Vy();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){tn.batch(()=>{if(this.#s&&this.hasListeners()){const r=this.#t.variables,s=this.#t.context,o={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#s.onSuccess?.(t.data,r,s,o),this.#s.onSettled?.(t.data,null,r,s,o)):t?.type==="error"&&(this.#s.onError?.(t.error,r,s,o),this.#s.onSettled?.(void 0,t.error,r,s,o))}this.listeners.forEach(r=>{r(this.#t)})})}},o4=class extends Oo{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const s=t.queryKey,o=t.queryHash??D0(s,t);let c=this.get(o);return c||(c=new Zw({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){tn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Xm(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Xm(e,r)):t}notify(e){tn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){tn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){tn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},l4=class{#e;#t;#r;#s;#n;#i;#o;#a;constructor(e={}){this.#e=e.queryCache||new o4,this.#t=e.mutationCache||new a4,this.#r=e.defaultOptions||{},this.#s=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=I0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=qd.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ua(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),c=this.#e.get(s.queryHash)?.state.data,d=qw(t,c);if(d!==void 0)return this.#e.build(this,s).setData(d,{...r,manual:!0})}setQueriesData(e,t,r){return tn.batch(()=>this.#e.findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;tn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return tn.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=tn.batch(()=>this.#e.findAll(e).map(o=>o.cancel(r)));return Promise.all(s).then(Nn).catch(Nn)}invalidateQueries(e,t={}){return tn.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=tn.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let c=o.fetch(void 0,r);return r.throwOnError||(c=c.catch(Nn)),o.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(s).then(Nn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(Ua(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Nn).catch(Nn)}fetchInfiniteQuery(e){return e.behavior=n1(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Nn).catch(Nn)}ensureInfiniteQueryData(e){return e.behavior=n1(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qd.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#s.set(mi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(s=>{Jl(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(mi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(s=>{Jl(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=D0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===O0&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Yy=T.createContext(void 0),M0=e=>{const t=T.useContext(Yy);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},c4=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Yy.Provider,{value:e,children:t})),Ky=T.createContext(!1),d4=()=>T.useContext(Ky);Ky.Provider;function u4(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var f4=T.createContext(u4()),h4=()=>T.useContext(f4),p4=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},g4=e=>{T.useEffect(()=>{e.clearReset()},[e])},x4=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(o&&e.data===void 0||Wy(r,[e.error,s])),m4=e=>{if(e.suspense){const r=o=>o==="static"?o:Math.max(o??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...o)=>r(s(...o)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},y4=(e,t)=>e.isLoading&&e.isFetching&&!t,v4=(e,t)=>e?.suspense&&t.isPending,a1=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function b4(e,t,r){const s=d4(),o=h4(),c=M0(),d=c.defaultQueryOptions(e);c.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=s?"isRestoring":"optimistic",m4(d),p4(d,o),g4(o);const f=!c.getQueryCache().get(d.queryHash),[p]=T.useState(()=>new t(c,d)),h=p.getOptimisticResult(d),x=!s&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(v=>{const y=x?p.subscribe(tn.batchCalls(v)):Nn;return p.updateResult(),y},[p,x]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),T.useEffect(()=>{p.setOptions(d)},[d,p]),v4(d,h))throw a1(d,p,o);if(x4({result:h,errorResetBoundary:o,throwOnError:d.throwOnError,query:c.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw h.error;return c.getDefaultOptions().queries?._experimental_afterQuery?.(d,h),d.experimental_prefetchInRender&&!xi&&y4(h,s)&&(f?a1(d,p,o):c.getQueryCache().get(d.queryHash)?.promise)?.catch(Nn).finally(()=>{p.updateResult()}),d.notifyOnChangeProps?h:p.trackResult(h)}function Xy(e,t){return b4(e,e4)}function i1(e,t){const r=M0(),[s]=T.useState(()=>new i4(r,e));T.useEffect(()=>{s.setOptions(e)},[s,e]);const o=T.useSyncExternalStore(T.useCallback(d=>s.subscribe(tn.batchCalls(d)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),c=T.useCallback((d,f)=>{s.mutate(d,f).catch(Nn)},[s]);if(o.error&&Wy(s.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:c,mutateAsync:o.mutate}}const _4="modulepreload",S4=function(e){return"/retailpos/"+e},o1={},cc=function(t,r,s){let o=Promise.resolve();if(r&&r.length>0){let h=function(x){return Promise.all(x.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var d=h;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");o=h(r.map(x=>{if(x=S4(x),x in o1)return;o1[x]=!0;const v=x.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${y}`))return;const b=document.createElement("link");if(b.rel=v?"stylesheet":_4,v||(b.as="script"),b.crossOrigin="",b.href=x,p&&b.setAttribute("nonce",p),document.head.appendChild(b),v)return new Promise((w,_)=>{b.addEventListener("load",w),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${x}`)))})}))}function c(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return o.then(f=>{for(const p of f||[])p.status==="rejected"&&c(p.reason);return t().catch(c)})},w4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>cc(async()=>{const{default:s}=await Promise.resolve().then(()=>Io);return{default:s}},[]).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class F0 extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class T4 extends F0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class l1 extends F0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class c1 extends F0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var l0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(l0||(l0={}));var j4=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{h(s.next(x))}catch(v){d(v)}}function p(x){try{h(s.throw(x))}catch(v){d(v)}}function h(x){x.done?c(x.value):o(x.value).then(f,p)}h((s=s.apply(e,t||[])).next())})};class E4{constructor(t,{headers:r={},customFetch:s,region:o=l0.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=w4(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return j4(this,void 0,void 0,function*(){try{const{headers:o,method:c,body:d}=r;let f={},{region:p}=r;p||(p=this.region);const h=new URL(`${this.url}/${t}`);p&&p!=="any"&&(f["x-region"]=p,h.searchParams.set("forceFunctionRegion",p));let x;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=d):typeof d=="string"?(f["Content-Type"]="text/plain",x=d):typeof FormData<"u"&&d instanceof FormData?x=d:(f["Content-Type"]="application/json",x=JSON.stringify(d)));const v=yield this.fetch(h.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:x}).catch(_=>{throw new T4(_)}),y=v.headers.get("x-relay-error");if(y&&y==="true")throw new l1(v);if(!v.ok)throw new c1(v);let b=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield v.json():b==="application/octet-stream"?w=yield v.blob():b==="text/event-stream"?w=v:b==="multipart/form-data"?w=yield v.formData():w=yield v.text(),{data:w,error:null,response:v}}catch(o){return{data:null,error:o,response:o instanceof c1||o instanceof l1?o.context:void 0}}})}}var on={},ao={},io={},oo={},lo={},co={},k4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Co=k4();const C4=Co.fetch,Qy=Co.fetch.bind(Co),Jy=Co.Headers,A4=Co.Request,R4=Co.Response,Io=Object.freeze(Object.defineProperty({__proto__:null,Headers:Jy,Request:A4,Response:R4,default:Qy,fetch:C4},Symbol.toStringTag,{value:"Module"})),N4=aS(Io);var jd={},d1;function Zy(){if(d1)return jd;d1=1,Object.defineProperty(jd,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return jd.default=e,jd}var u1;function ev(){if(u1)return co;u1=1;var e=co&&co.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(co,"__esModule",{value:!0});const t=e(N4),r=e(Zy());class s{constructor(c){var d,f;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(d=c.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=c.signal,this.isMaybeSingle=(f=c.isMaybeSingle)!==null&&f!==void 0?f:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,d){return this.headers=new Headers(this.headers),this.headers.set(c,d),this}then(c,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let p=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var x,v,y,b;let w=null,_=null,S=null,A=h.status,k=h.statusText;if(h.ok){if(this.method!=="HEAD"){const ne=await h.text();ne===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?_=ne:_=JSON.parse(ne))}const L=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),K=(y=h.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");L&&K&&K.length>1&&(S=parseInt(K[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(w={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,S=null,A=406,k="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const L=await h.text();try{w=JSON.parse(L),Array.isArray(w)&&h.status===404&&(_=[],w=null,A=200,k="OK")}catch{h.status===404&&L===""?(A=204,k="No Content"):w={message:L}}if(w&&this.isMaybeSingle&&(!((b=w?.details)===null||b===void 0)&&b.includes("0 rows"))&&(w=null,A=200,k="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:_,count:S,status:A,statusText:k}});return this.shouldThrowOnError||(p=p.catch(h=>{var x,v,y;return{error:{message:`${(x=h?.name)!==null&&x!==void 0?x:"FetchError"}: ${h?.message}`,details:`${(v=h?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(y=h?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),p.then(c,d)}returns(){return this}overrideTypes(){return this}}return co.default=s,co}var f1;function tv(){if(f1)return lo;f1=1;var e=lo&&lo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(lo,"__esModule",{value:!0});const t=e(ev());class r extends t.default{select(o){let c=!1;const d=(o??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:c=!0,nullsFirst:d,foreignTable:f,referencedTable:p=f}={}){const h=p?`${p}.order`:"order",x=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${x?`${x},`:""}${o}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,c,{foreignTable:d,referencedTable:f=d}={}){const p=typeof f>"u"?"offset":`${f}.offset`,h=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(h,`${c-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:c=!1,settings:d=!1,buffers:f=!1,wal:p=!1,format:h="text"}={}){var x;const v=[o?"analyze":null,c?"verbose":null,d?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),y=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${y}"; options=${v};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return lo.default=r,lo}var h1;function L0(){if(h1)return oo;h1=1;var e=oo&&oo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(oo,"__esModule",{value:!0});const t=e(tv());class r extends t.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}in(o,c){const d=Array.from(new Set(c)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:d,type:f}={}){let p="";f==="plain"?p="pl":f==="phrase"?p="ph":f==="websearch"&&(p="w");const h=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${p}fts${h}.${c}`),this}match(o){return Object.entries(o).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(o,c,d){return this.url.searchParams.append(o,`not.${c}.${d}`),this}or(o,{foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,c,d){return this.url.searchParams.append(o,`${c}.${d}`),this}}return oo.default=r,oo}var p1;function rv(){if(p1)return io;p1=1;var e=io&&io.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(io,"__esModule",{value:!0});const t=e(L0());class r{constructor(o,{headers:c={},schema:d,fetch:f}){this.url=o,this.headers=new Headers(c),this.schema=d,this.fetch=f}select(o,{head:c=!1,count:d}={}){const f=c?"HEAD":"GET";let p=!1;const h=(o??"*").split("").map(x=>/\s/.test(x)&&!p?"":(x==='"'&&(p=!p),x)).join("");return this.url.searchParams.set("select",h),d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:c,defaultToNull:d=!0}={}){var f;const p="POST";if(c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const h=o.reduce((x,v)=>x.concat(Object.keys(v)),[]);if(h.length>0){const x=[...new Set(h)].map(v=>`"${v}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:c,ignoreDuplicates:d=!1,count:f,defaultToNull:p=!0}={}){var h;const x="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),f&&this.headers.append("Prefer",`count=${f}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const v=o.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(v.length>0){const y=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(o,{count:c}={}){var d;const f="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var c;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return io.default=r,io}var g1;function D4(){if(g1)return ao;g1=1;var e=ao&&ao.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ao,"__esModule",{value:!0});const t=e(rv()),r=e(L0());class s{constructor(c,{headers:d={},schema:f,fetch:p}={}){this.url=c,this.headers=new Headers(d),this.schemaName=f,this.fetch=p}from(c){const d=new URL(`${this.url}/${c}`);return new t.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new s(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,d={},{head:f=!1,get:p=!1,count:h}={}){var x;let v;const y=new URL(`${this.url}/rpc/${c}`);let b;f||p?(v=f?"HEAD":"GET",Object.entries(d).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{y.searchParams.append(_,S)})):(v="POST",b=d);const w=new Headers(this.headers);return h&&w.set("Prefer",`count=${h}`),new r.default({method:v,url:y,headers:w,schema:this.schemaName,body:b,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return ao.default=s,ao}var x1;function O4(){if(x1)return on;x1=1;var e=on&&on.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(on,"__esModule",{value:!0}),on.PostgrestError=on.PostgrestBuilder=on.PostgrestTransformBuilder=on.PostgrestFilterBuilder=on.PostgrestQueryBuilder=on.PostgrestClient=void 0;const t=e(D4());on.PostgrestClient=t.default;const r=e(rv());on.PostgrestQueryBuilder=r.default;const s=e(L0());on.PostgrestFilterBuilder=s.default;const o=e(tv());on.PostgrestTransformBuilder=o.default;const c=e(ev());on.PostgrestBuilder=c.default;const d=e(Zy());return on.PostgrestError=d.default,on.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:c.default,PostgrestError:d.default},on}var I4=O4();const B4=w0(I4),{PostgrestClient:M4,PostgrestQueryBuilder:w7,PostgrestFilterBuilder:T7,PostgrestTransformBuilder:j7,PostgrestBuilder:E7,PostgrestError:k7}=B4;class F4{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const L4="2.15.5",P4=`realtime-js/${L4}`,z4="1.0.0",c0=1e4,U4=1e3,W4=100;var Ul;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ul||(Ul={}));var Jr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Jr||(Jr={}));var _s;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(_s||(_s={}));var d0;(function(e){e.websocket="websocket"})(d0||(d0={}));var fi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fi||(fi={}));class q4{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const o=r.getUint8(1),c=r.getUint8(2);let d=this.HEADER_LENGTH+2;const f=s.decode(t.slice(d,d+o));d=d+o;const p=s.decode(t.slice(d,d+c));d=d+c;const h=JSON.parse(s.decode(t.slice(d,t.byteLength)));return{ref:null,topic:f,event:p,payload:h}}}class nv{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Tr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Tr||(Tr={}));const m1=(e,t,r={})=>{var s;const o=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((c,d)=>(c[d]=$4(d,e,t,o),c),{})},$4=(e,t,r,s)=>{const o=t.find(f=>f.name===e),c=o?.type,d=r[e];return c&&!s.includes(c)?sv(c,d):u0(d)},sv=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Y4(t,r)}switch(e){case Tr.bool:return H4(t);case Tr.float4:case Tr.float8:case Tr.int2:case Tr.int4:case Tr.int8:case Tr.numeric:case Tr.oid:return G4(t);case Tr.json:case Tr.jsonb:return V4(t);case Tr.timestamp:return K4(t);case Tr.abstime:case Tr.date:case Tr.daterange:case Tr.int4range:case Tr.int8range:case Tr.money:case Tr.reltime:case Tr.text:case Tr.time:case Tr.timestamptz:case Tr.timetz:case Tr.tsrange:case Tr.tstzrange:return u0(t);default:return u0(t)}},u0=e=>e,H4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},G4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},V4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Y4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let c;const d=e.slice(1,r);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(f=>sv(t,f))}return e},K4=e=>typeof e=="string"?e.replace(" ","T"):e,av=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Nh{constructor(t,r,s={},o=c0){this.channel=t,this.event=r,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var y1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(y1||(y1={}));class Wl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wl.syncState(this.state,o,c,d),this.pendingDiffs.forEach(p=>{this.state=Wl.syncDiff(this.state,p,c,d)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},o=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Wl.syncDiff(this.state,o,c,d),f())}),this.onJoin((o,c,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:d})}),this.onLeave((o,c,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,o){const c=this.cloneDeep(t),d=this.transformState(r),f={},p={};return this.map(c,(h,x)=>{d[h]||(p[h]=x)}),this.map(d,(h,x)=>{const v=c[h];if(v){const y=x.map(S=>S.presence_ref),b=v.map(S=>S.presence_ref),w=x.filter(S=>b.indexOf(S.presence_ref)<0),_=v.filter(S=>y.indexOf(S.presence_ref)<0);w.length>0&&(f[h]=w),_.length>0&&(p[h]=_)}else f[h]=x}),this.syncDiff(c,{joins:f,leaves:p},s,o)}static syncDiff(t,r,s,o){const{joins:c,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(c,(f,p)=>{var h;const x=(h=t[f])!==null&&h!==void 0?h:[];if(t[f]=this.cloneDeep(p),x.length>0){const v=t[f].map(b=>b.presence_ref),y=x.filter(b=>v.indexOf(b.presence_ref)<0);t[f].unshift(...y)}s(f,x,p)}),this.map(d,(f,p)=>{let h=t[f];if(!h)return;const x=p.map(v=>v.presence_ref);h=h.filter(v=>x.indexOf(v.presence_ref)<0),t[f]=h,o(f,h,p),h.length===0&&delete t[f]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const o=t[s];return"metas"in o?r[s]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[s]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var v1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(v1||(v1={}));var ql;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ql||(ql={}));var ra;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ra||(ra={}));class P0{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Jr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Nh(this,_s.join,this.params,this.timeout),this.rejoinTimer=new nv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Jr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Jr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Jr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Jr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Jr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_s.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new Wl(this),this.broadcastEndpointURL=av(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Jr.closed){const{config:{broadcast:d,presence:f,private:p}}=this.params,h=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(b=>b.filter))!==null&&o!==void 0?o:[],x=!!this.bindings[ql.PRESENCE]&&this.bindings[ql.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,v={},y={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:x}),postgres_changes:h,private:p};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(b=>t?.(ra.CHANNEL_ERROR,b)),this._onClose(()=>t?.(ra.CLOSED)),this.updateJoinPayload(Object.assign({config:y},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var w;if(this.socket.setAuth(),b===void 0){t?.(ra.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(w=_?.length)!==null&&w!==void 0?w:0,A=[];for(let k=0;k<S;k++){const O=_[k],{filter:{event:L,schema:K,table:ne,filter:M}}=O,re=b&&b[k];if(re&&re.event===L&&re.schema===K&&re.table===ne&&re.filter===M)A.push(Object.assign(Object.assign({},O),{id:re.id}));else{this.unsubscribe(),this.state=Jr.errored,t?.(ra.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,t&&t(ra.SUBSCRIBED);return}}).receive("error",b=>{this.state=Jr.errored,t?.(ra.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t?.(ra.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Jr.joined&&t===ql.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,s)}async send(t,r={}){var s,o;if(!this._canPush()&&t.type==="broadcast"){const{event:c,payload:d}=t,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=h.body)===null||o===void 0?void 0:o.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,f,p;const h=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&c("ok"),h.receive("ok",()=>c("ok")),h.receive("error",()=>c("error")),h.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Jr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_s.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Nh(this,_s.leave,{},t),s.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Jr.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const o=new AbortController,c=setTimeout(()=>o.abort(),s),d=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(c),d}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Nh(this,t,r,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>W4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var o,c;const d=t.toLocaleLowerCase(),{close:f,error:p,leave:h,join:x}=_s;if(s&&[f,p,h,x].indexOf(d)>=0&&s!==this._joinRef())return;let y=this._onMessage(d,r,s);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var w,_,S;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((S=(_=b.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===d}).map(b=>b.callback(y,s)):(c=this.bindings[d])===null||c===void 0||c.filter(b=>{var w,_,S,A,k,O;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in b){const L=b.id,K=(w=b.filter)===null||w===void 0?void 0:w.event;return L&&((_=r.ids)===null||_===void 0?void 0:_.includes(L))&&(K==="*"||K?.toLocaleLowerCase()===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const L=(k=(A=b?.filter)===null||A===void 0?void 0:A.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return L==="*"||L===((O=r?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===d}).map(b=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:_,table:S,commit_timestamp:A,type:k,errors:O}=w;y=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:A,eventType:k,new:{},old:{},errors:O}),this._getPayloadRecords(w))}b.callback(y,s)})}_isClosed(){return this.state===Jr.closed}_isJoined(){return this.state===Jr.joined}_isJoining(){return this.state===Jr.joining}_isLeaving(){return this.state===Jr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const o=t.toLocaleLowerCase(),c={type:o,filter:r,callback:s};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&P0.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_s.close,{},t)}_onError(t){this._on(_s.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Jr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=m1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=m1(t.columns,t.old_record)),r}}const Dh=()=>{},Ed={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},X4=[1e3,2e3,5e3,1e4],Q4=1e4,J4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Z4{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=c0,this.transport=null,this.heartbeatIntervalMs=Ed.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dh,this.ref=0,this.reconnectTimer=null,this.logger=Dh,this.conn=null,this.sendBuffer=[],this.serializer=new q4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let c;return o?c=o:typeof fetch>"u"?c=(...d)=>cc(async()=>{const{default:f}=await Promise.resolve().then(()=>Io);return{default:f}},void 0).then(({default:f})=>f(...d)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...d)=>c(...d)},!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${d0.websocket}`,this.httpEndpoint=av(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=F4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:z4}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ul.connecting:return fi.Connecting;case Ul.open:return fi.Open;case Ul.closing:return fi.Closing;default:return fi.Closed}}isConnected(){return this.connectionState()===fi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,o=this.getChannels().find(c=>c.topic===s);if(o)return o;{const c=new P0(`realtime:${t}`,r,this);return this.channels.push(c),c}}push(t){const{topic:r,event:s,payload:o,ref:c}=t,d=()=>{this.encode(t,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${r} ${s} (${c})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(U4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ed.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:c,ref:d}=r,f=d?`(${d})`:"",p=c.status||"";this.log("receive",`${p} ${s} ${o} ${f}`.trim(),c),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(o,c,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(_s.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${s}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([J4],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const o={access_token:r,version:P4};r&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(_s.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new nv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ed.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,o,c,d,f,p,h,x;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t?.timeout)!==null&&s!==void 0?s:c0,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Ed.HEARTBEAT_INTERVAL,this.worker=(c=t?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=t?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:Dh,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t?.reconnectAfterMs)!==null&&p!==void 0?p:(v=>X4[v-1]||Q4),this.encode=(h=t?.encode)!==null&&h!==void 0?h:((v,y)=>y(JSON.stringify(v))),this.decode=(x=t?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class z0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function en(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class eT extends z0{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class f0 extends z0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var tT=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{h(s.next(x))}catch(v){d(v)}}function p(x){try{h(s.throw(x))}catch(v){d(v)}}function h(x){x.done?c(x.value):o(x.value).then(f,p)}h((s=s.apply(e,t||[])).next())})};const iv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>cc(async()=>{const{default:s}=await Promise.resolve().then(()=>Io);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},rT=()=>tT(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cc(()=>Promise.resolve().then(()=>Io),void 0)).Response:Response}),h0=e=>{if(Array.isArray(e))return e.map(r=>h0(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const o=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[o]=h0(s)}),t},nT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Si=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{h(s.next(x))}catch(v){d(v)}}function p(x){try{h(s.throw(x))}catch(v){d(v)}}function h(x){x.done?c(x.value):o(x.value).then(f,p)}h((s=s.apply(e,t||[])).next())})};const Oh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sT=(e,t,r)=>Si(void 0,void 0,void 0,function*(){const s=yield rT();e instanceof s&&!r?.noResolveJson?e.json().then(o=>{const c=e.status||500,d=o?.statusCode||c+"";t(new eT(Oh(o),c,d))}).catch(o=>{t(new f0(Oh(o),o))}):t(new f0(Oh(e),e))}),aT=(e,t,r,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!s?o:(nT(s)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(s)):o.body=s,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function dc(e,t,r,s,o,c){return Si(this,void 0,void 0,function*(){return new Promise((d,f)=>{e(r,aT(t,s,o,c)).then(p=>{if(!p.ok)throw p;return s?.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>sT(p,f,s))})})}function $d(e,t,r,s){return Si(this,void 0,void 0,function*(){return dc(e,"GET",t,r,s)})}function Ms(e,t,r,s,o){return Si(this,void 0,void 0,function*(){return dc(e,"POST",t,s,o,r)})}function p0(e,t,r,s,o){return Si(this,void 0,void 0,function*(){return dc(e,"PUT",t,s,o,r)})}function iT(e,t,r,s){return Si(this,void 0,void 0,function*(){return dc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function ov(e,t,r,s,o){return Si(this,void 0,void 0,function*(){return dc(e,"DELETE",t,s,o,r)})}var Cn=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{h(s.next(x))}catch(v){d(v)}}function p(x){try{h(s.throw(x))}catch(v){d(v)}}function h(x){x.done?c(x.value):o(x.value).then(f,p)}h((s=s.apply(e,t||[])).next())})};const oT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},b1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lT{constructor(t,r={},s,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=iv(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,o){return Cn(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},b1),o);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),p&&c.append("metadata",this.encodeMetadata(p)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl),p&&c.append("metadata",this.encodeMetadata(p))):(c=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const h=this._removeEmptyFolders(r),x=this._getFinalPath(h),v=yield(t=="PUT"?p0:Ms)(this.fetch,`${this.url}/object/${x}`,c,Object.assign({headers:f},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:h,id:v.Id,fullPath:v.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(en(c))return{data:null,error:c};throw c}})}upload(t,r,s){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,o){return Cn(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),f=new URL(this.url+`/object/upload/sign/${d}`);f.searchParams.set("token",r);try{let p;const h=Object.assign({upsert:b1.upsert},o),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",h.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",h.cacheControl)):(p=s,x["cache-control"]=`max-age=${h.cacheControl}`,x["content-type"]=h.contentType);const v=yield p0(this.fetch,f.toString(),p,{headers:x});return{data:{path:c,fullPath:v.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(en(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(t,r){return Cn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const c=yield Ms(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),d=new URL(this.url+c.url),f=d.searchParams.get("token");if(!f)throw new z0("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}update(t,r,s){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Cn(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(en(o))return{data:null,error:o};throw o}})}copy(t,r,s){return Cn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ms(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(en(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,s){return Cn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),c=yield Ms(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(en(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,s){return Cn(this,void 0,void 0,function*(){try{const o=yield Ms(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(en(o))return{data:null,error:o};throw o}})}download(t,r){return Cn(this,void 0,void 0,function*(){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),d=c?`?${c}`:"";try{const f=this._getFinalPath(t);return{data:yield(yield $d(this.fetch,`${this.url}/${o}/${f}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(en(f))return{data:null,error:f};throw f}})}info(t){return Cn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield $d(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:h0(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}exists(t){return Cn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield iT(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s)&&s instanceof f0){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),o=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&o.push(c);const f=typeof r?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(r?.transform||{});p!==""&&o.push(p);let h=o.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${h}`)}}}remove(t){return Cn(this,void 0,void 0,function*(){try{return{data:yield ov(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(en(r))return{data:null,error:r};throw r}})}list(t,r,s){return Cn(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},oT),r),{prefix:t||""});return{data:yield Ms(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(en(o))return{data:null,error:o};throw o}})}listV2(t,r){return Cn(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield Ms(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const cT="2.12.1",dT={"X-Client-Info":`storage-js/${cT}`};var uo=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{h(s.next(x))}catch(v){d(v)}}function p(x){try{h(s.throw(x))}catch(v){d(v)}}function h(x){x.done?c(x.value):o(x.value).then(f,p)}h((s=s.apply(e,t||[])).next())})};class uT{constructor(t,r={},s,o){this.shouldThrowOnError=!1;const c=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},dT),r),this.fetch=iv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return uo(this,void 0,void 0,function*(){try{return{data:yield $d(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(en(t))return{data:null,error:t};throw t}})}getBucket(t){return uo(this,void 0,void 0,function*(){try{return{data:yield $d(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(en(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return uo(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return uo(this,void 0,void 0,function*(){try{return{data:yield p0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}emptyBucket(t){return uo(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(en(r))return{data:null,error:r};throw r}})}deleteBucket(t){return uo(this,void 0,void 0,function*(){try{return{data:yield ov(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(en(r))return{data:null,error:r};throw r}})}}class fT extends uT{constructor(t,r={},s,o){super(t,r,s,o)}from(t){return new lT(this.url,this.headers,t,this.fetch)}}const hT="2.57.4";let Pl="";typeof Deno<"u"?Pl="deno":typeof document<"u"?Pl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pl="react-native":Pl="node";const pT={"X-Client-Info":`supabase-js-${Pl}/${hT}`},gT={headers:pT},xT={schema:"public"},mT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yT={};var vT=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{h(s.next(x))}catch(v){d(v)}}function p(x){try{h(s.throw(x))}catch(v){d(v)}}function h(x){x.done?c(x.value):o(x.value).then(f,p)}h((s=s.apply(e,t||[])).next())})};const bT=e=>{let t;return e?t=e:typeof fetch>"u"?t=Qy:t=fetch,(...r)=>t(...r)},_T=()=>typeof Headers>"u"?Jy:Headers,ST=(e,t,r)=>{const s=bT(r),o=_T();return(c,d)=>vT(void 0,void 0,void 0,function*(){var f;const p=(f=yield t())!==null&&f!==void 0?f:e;let h=new o(d?.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${p}`),s(c,Object.assign(Object.assign({},d),{headers:h}))})};var wT=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{h(s.next(x))}catch(v){d(v)}}function p(x){try{h(s.throw(x))}catch(v){d(v)}}function h(x){x.done?c(x.value):o(x.value).then(f,p)}h((s=s.apply(e,t||[])).next())})};function TT(e){return e.endsWith("/")?e:e+"/"}function jT(e,t){var r,s;const{db:o,auth:c,realtime:d,global:f}=e,{db:p,auth:h,realtime:x,global:v}=t,y={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},h),c),realtime:Object.assign(Object.assign({},x),d),storage:{},global:Object.assign(Object.assign(Object.assign({},v),f),{headers:Object.assign(Object.assign({},(r=v?.headers)!==null&&r!==void 0?r:{}),(s=f?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>wT(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function ET(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(TT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const lv="2.71.1",bo=30*1e3,g0=3,Ih=g0*bo,kT="http://localhost:9999",CT="supabase.auth.token",AT={"X-Client-Info":`gotrue-js/${lv}`},x0="X-Supabase-Api-Version",cv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},RT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,NT=600*1e3;class U0 extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Ot(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class DT extends U0{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function OT(e){return Ot(e)&&e.name==="AuthApiError"}class dv extends U0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ha extends U0{constructor(t,r,s,o){super(t,s,o),this.name=r,this.status=s}}class Ba extends Ha{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IT(e){return Ot(e)&&e.name==="AuthSessionMissingError"}class kd extends Ha{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cd extends Ha{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ad extends Ha{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function BT(e){return Ot(e)&&e.name==="AuthImplicitGrantRedirectError"}class _1 extends Ha{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class m0 extends Ha{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Bh(e){return Ot(e)&&e.name==="AuthRetryableFetchError"}class S1 extends Ha{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class y0 extends Ha{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),w1=` 	
\r=`.split(""),MT=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<w1.length;t+=1)e[w1[t].charCodeAt(0)]=-2;for(let t=0;t<Hd.length;t+=1)e[Hd[t].charCodeAt(0)]=t;return e})();function T1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Hd[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Hd[s]),t.queuedBits-=6}}function uv(e,t,r){const s=MT[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function j1(e){const t=[],r=d=>{t.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=d=>{PT(d,s,r)};for(let d=0;d<e.length;d+=1)uv(e.charCodeAt(d),o,c);return t.join("")}function FT(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function LT(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}FT(s,t)}}function PT(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function zT(e){const t=[],r={queue:0,queuedBits:0},s=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)uv(e.charCodeAt(o),r,s);return new Uint8Array(t)}function UT(e){const t=[];return LT(e,r=>t.push(r)),new Uint8Array(t)}function WT(e){const t=[],r={queue:0,queuedBits:0},s=o=>{t.push(o)};return e.forEach(o=>T1(o,r,s)),T1(null,r,s),t.join("")}function qT(e){return Math.round(Date.now()/1e3)+e}function $T(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const bs=()=>typeof window<"u"&&typeof document<"u",ci={tested:!1,writable:!1},fv=()=>{if(!bs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ci.tested)return ci.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ci.tested=!0,ci.writable=!0}catch{ci.tested=!0,ci.writable=!1}return ci.writable};function HT(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,c)=>{t[c]=o})}catch{}return r.searchParams.forEach((s,o)=>{t[o]=s}),t}const hv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>cc(async()=>{const{default:s}=await Promise.resolve().then(()=>Io);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},GT=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",_o=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},di=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Oa=async(e,t)=>{await e.removeItem(t)};class du{constructor(){this.promise=new du.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}du.promiseConstructor=Promise;function Mh(e){const t=e.split(".");if(t.length!==3)throw new y0("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!RT.test(t[s]))throw new y0("JWT not in base64url format");return{header:JSON.parse(j1(t[0])),payload:JSON.parse(j1(t[1])),signature:zT(t[2]),raw:{header:t[0],payload:t[1]}}}async function VT(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function YT(e,t){return new Promise((s,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await e(c);if(!t(c,null,d)){s(d);return}}catch(d){if(!t(c,d)){o(d);return}}})()})}function KT(e){return("0"+e.toString(16)).substr(-2)}function XT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let o="";for(let c=0;c<56;c++)o+=r.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(t),Array.from(t,KT).join("")}async function QT(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(s);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function JT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await QT(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fo(e,t,r=!1){const s=XT();let o=s;r&&(o+="/PASSWORD_RECOVERY"),await _o(e,`${t}-code-verifier`,o);const c=await JT(s);return[c,s===c?"plain":"s256"]}const ZT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function e3(e){const t=e.headers.get(x0);if(!t||!t.match(ZT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function t3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function r3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const n3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ho(e){if(!n3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Fh(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function E1(e){return JSON.parse(JSON.stringify(e))}var s3=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r};const ui=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),a3=[502,503,504];async function k1(e){var t;if(!GT(e))throw new m0(ui(e),0);if(a3.includes(e.status))throw new m0(ui(e),e.status);let r;try{r=await e.json()}catch(c){throw new dv(ui(c),c)}let s;const o=e3(e);if(o&&o.getTime()>=cv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new S1(ui(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Ba}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new S1(ui(r),e.status,r.weak_password.reasons);throw new DT(ui(r),e.status||500,s)}const i3=(e,t,r,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),r))};async function Ht(e,t,r,s){var o;const c=Object.assign({},s?.headers);c[x0]||(c[x0]=cv["2024-01-01"].name),s?.jwt&&(c.Authorization=`Bearer ${s.jwt}`);const d=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(d.redirect_to=s.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await o3(e,t,r+f,{headers:c,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(p):{data:Object.assign({},p),error:null}}async function o3(e,t,r,s,o,c){const d=i3(t,s,o,c);let f;try{f=await e(r,Object.assign({},d))}catch(p){throw console.error(p),new m0(ui(p),0)}if(f.ok||await k1(f),s?.noResolveJson)return f;try{return await f.json()}catch(p){await k1(p)}}function ta(e){var t;let r=null;u3(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=qT(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function C1(e){const t=ta(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Fa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function l3(e){return{data:e,error:null}}function c3(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:o,verification_type:c}=e,d=s3(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:r,hashed_token:s,redirect_to:o,verification_type:c},p=Object.assign({},d);return{data:{properties:f,user:p},error:null}}function d3(e){return e}function u3(e){return e.access_token&&e.refresh_token&&e.expires_in}const Lh=["global","local","others"];var f3=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r};class h3{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=hv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Lh[0]){if(Lh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lh.join(", ")}`);try{return await Ht(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await Ht(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Fa})}catch(s){if(Ot(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=f3(t,["options"]),o=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await Ht(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:c3,redirectTo:r?.redirectTo})}catch(r){if(Ot(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ht(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Fa})}catch(r){if(Ot(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,o,c,d,f,p;try{const h={nextPage:null,lastPage:0,total:0},x=await Ht(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:d3});if(x.error)throw x.error;const v=await x.json(),y=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,b=(p=(f=x.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return b.length>0&&(b.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);h[`${S}Page`]=_}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(Ot(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){ho(t);try{return await Ht(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Fa})}catch(r){if(Ot(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ho(t);try{return await Ht(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Fa})}catch(s){if(Ot(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){ho(t);try{return await Ht(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Fa})}catch(s){if(Ot(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){ho(t.userId);try{const{data:r,error:s}=await Ht(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:s}}catch(r){if(Ot(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ho(t.userId),ho(t.id);try{return{data:await Ht(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}}}function A1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function p3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const po={debug:!!(globalThis&&fv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class g3 extends pv{}async function x3(e,t,r){po.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),po.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){po.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{po.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw po.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new g3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(po.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}p3();const m3={url:kT,storageKey:CT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:AT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function R1(e,t,r){return await r()}const go={};class Zl{constructor(t){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Zl.nextInstanceID,Zl.nextInstanceID+=1,this.instanceID>0&&bs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},m3),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new h3({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=hv(o.fetch),this.lock=o.lock||R1,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:bs()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=x3:this.lock=R1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:fv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=A1(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=A1(this.memoryStorage)),bs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=go[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){go[this.storageKey]=Object.assign(Object.assign({},go[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=go[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){go[this.storageKey]=Object.assign(Object.assign({},go[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lv}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=HT(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),bs()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:c}=await this._getSessionFromURL(r,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),BT(c)){const p=(t=c.details)===null||t===void 0?void 0:t.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ot(r)?{error:r}:{error:new dv("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,o;try{const c=await Ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:ta}),{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const p=d.session,h=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:h,session:p},error:null}}catch(c){if(Ot(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(t){var r,s,o;try{let c;if("email"in t){const{email:x,password:v,options:y}=t;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await fo(this.storage,this.storageKey)),c=await Ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:x,password:v,data:(r=y?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:w},xform:ta})}else if("phone"in t){const{phone:x,password:v,options:y}=t;c=await Ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:v,data:(s=y?.data)!==null&&s!==void 0?s:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:ta})}else throw new Cd("You must provide either an email or phone number and a password");const{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const p=d.session,h=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:h,session:p},error:null}}catch(c){if(Ot(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(t){try{let r;if("email"in t){const{email:c,password:d,options:f}=t;r=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:C1})}else if("phone"in t){const{phone:c,password:d,options:f}=t;r=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:C1})}else throw new Cd("You must provide either an email or phone number and a password");const{data:s,error:o}=r;return o?{data:{user:null,session:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new kd}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(r){if(Ot(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,o,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,o,c,d,f,p,h,x,v,y,b;let w,_;if("message"in t)w=t.message,_=t.signature;else{const{chain:S,wallet:A,statement:k,options:O}=t;let L;if(bs())if(typeof A=="object")L=A;else{const ne=window;if("solana"in ne&&typeof ne.solana=="object"&&("signIn"in ne.solana&&typeof ne.solana.signIn=="function"||"signMessage"in ne.solana&&typeof ne.solana.signMessage=="function"))L=ne.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=A}const K=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in L&&L.signIn){const ne=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:K.host,uri:K.href}),k?{statement:k}:null));let M;if(Array.isArray(ne)&&ne[0]&&typeof ne[0]=="object")M=ne[0];else if(ne&&typeof ne=="object"&&"signedMessage"in ne&&"signature"in ne)M=ne;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)w=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),_=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${K.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${K.href}`,`Issued At: ${(o=(s=O?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=O?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((d=O?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((p=O?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((h=O?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((v=(x=O?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||v===void 0)&&v.length?["Resources",...O.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const ne=await L.signMessage(new TextEncoder().encode(w),"utf8");if(!ne||!(ne instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=ne}}try{const{data:S,error:A}=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:WT(_)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:ta});if(A)throw A;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new kd}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:A})}catch(S){if(Ot(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await di(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(r??"").split("/");try{const{data:c,error:d}=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:ta});if(await Oa(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new kd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:d})}catch(c){if(Ot(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(t){try{const{options:r,provider:s,token:o,access_token:c,nonce:d}=t,f=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ta}),{data:p,error:h}=f;return h?{data:{user:null,session:null},error:h}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new kd}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:h})}catch(r){if(Ot(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,o,c,d;try{if("email"in t){const{email:f,options:p}=t;let h=null,x=null;this.flowType==="pkce"&&([h,x]=await fo(this.storage,this.storageKey));const{error:v}=await Ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(s=p?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:h,code_challenge_method:x},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in t){const{phone:f,options:p}=t,{data:h,error:x}=await Ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=p?.data)!==null&&o!==void 0?o:{},create_user:(c=p?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(d=p?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:x}}throw new Cd("You must provide either an email or phone number.")}catch(f){if(Ot(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(t){var r,s;try{let o,c;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,c=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:f}=await Ht(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:ta});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,h=d.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:h,session:p},error:null}}catch(o){if(Ot(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var r,s,o;try{let c=null,d=null;return this.flowType==="pkce"&&([c,d]=await fo(this.storage,this.storageKey)),await Ht(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:l3})}catch(c){if(Ot(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Ba;const{error:o}=await Ht(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(Ot(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:o,options:c}=t,{error:d}=await Ht(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in t){const{phone:s,type:o,options:c}=t,{data:d,error:f}=await Ht(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:f}}throw new Cd("You must provide either an email or phone number and a type")}catch(r){if(Ot(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await di(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Ih:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const d=await di(this.userStorage,this.storageKey+"-user");d?.user?t.user=d.user:t.user=Fh()}if(this.storage.isServer&&t.user){let d=this.suppressGetSessionWarning;t=new Proxy(t,{get:(p,h,x)=>(!d&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,h,x))})}return{data:{session:t},error:null}}const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{session:null},error:c}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Fa}):await this._useSession(async r=>{var s,o,c;const{data:d,error:f}=r;if(f)throw f;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ba}:await Ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Fa})})}catch(r){if(Ot(r))return IT(r)&&(await this._removeSession(),await Oa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:o,error:c}=s;if(c)throw c;if(!o.session)throw new Ba;const d=o.session;let f=null,p=null;this.flowType==="pkce"&&t.email!=null&&([f,p]=await fo(this.storage,this.storageKey));const{data:h,error:x}=await Ht(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:p}),jwt:d.access_token,xform:Fa});if(x)throw x;return d.user=h.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(s){if(Ot(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ba;const r=Date.now()/1e3;let s=r,o=!0,c=null;const{payload:d}=Mh(t.access_token);if(d.exp&&(s=d.exp,o=s<=r),o){const{session:f,error:p}=await this._callRefreshToken(t.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:p}=await this._getUser(t.access_token);if(p)throw p;c={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(Ot(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:d,error:f}=r;if(f)throw f;t=(s=d.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new Ba;const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{user:null,session:null},error:c}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ot(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!bs())throw new Ad("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ad(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ad("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new _1("No code detected.");const{data:k,error:O}=await this._exchangeCodeForSession(t.code);if(O)throw O;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:c,refresh_token:d,expires_in:f,expires_at:p,token_type:h}=t;if(!c||!f||!d||!h)throw new Ad("No session defined in URL");const x=Math.round(Date.now()/1e3),v=parseInt(f);let y=x+v;p&&(y=parseInt(p));const b=y-x;b*1e3<=bo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const w=y-v;x-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,x):x-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,x);const{data:_,error:S}=await this._getUser(c);if(S)throw S;const A={provider_token:s,provider_refresh_token:o,access_token:c,expires_in:v,expires_at:y,refresh_token:d,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:t.type},error:null}}catch(s){if(Ot(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await di(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:o,error:c}=r;if(c)return{error:c};const d=(s=o.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:f}=await this.admin.signOut(d,t);if(f&&!(OT(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return t!=="others"&&(await this._removeSession(),await Oa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=$T(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,o;try{const{data:{session:c},error:d}=r;if(d)throw d;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,r={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await fo(this.storage,this.storageKey,!0));try{return await Ht(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(Ot(c))return{data:null,error:c};throw c}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:o}=await this._useSession(async c=>{var d,f,p,h,x;const{data:v,error:y}=c;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=t.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Ht(this.fetch,"GET",b,{headers:this.headers,jwt:(x=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&x!==void 0?x:void 0})});if(o)throw o;return bs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:t.provider,url:s?.url},error:null}}catch(s){if(Ot(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,o;const{data:c,error:d}=r;if(d)throw d;return await Ht(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(Ot(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await YT(async o=>(o>0&&await VT(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await Ht(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ta})),(o,c)=>{const d=200*Math.pow(2,o);return c&&Bh(c)&&Date.now()+d-s<bo})}catch(s){if(this._debug(r,"error",s),Ot(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),bs()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await di(this.storage,this.storageKey);if(o&&this.userStorage){let d=await di(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await _o(this.userStorage,this.storageKey+"-user",d)),o.user=(t=d?.user)!==null&&t!==void 0?t:Fh()}else if(o&&!o.user&&!o.user){const d=await di(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await Oa(this.storage,this.storageKey+"-user"),await _o(this.storage,this.storageKey,o)):o.user=Fh()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const c=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ih;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${Ih}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),Bh(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(o.access_token);!f&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(s,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Ba;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new du;const{data:c,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!c.session)throw new Ba;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={session:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(o,"error",c),Ot(c)){const d={session:null,error:c};return Bh(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,s=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,r)}catch(p){c.push(p)}});if(await Promise.all(d),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await _o(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const c=E1(o);await _o(this.storage,this.storageKey,c)}else{const o=E1(r);await _o(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Oa(this.storage,this.storageKey),await Oa(this.storage,this.storageKey+"-code-verifier"),await Oa(this.storage,this.storageKey+"-user"),this.userStorage&&await Oa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&bs()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),bo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-t)/bo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${bo}ms, refresh threshold is ${g0} ticks`),o<=g0&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof pv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bs()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const o=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[c,d]=await fo(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(f.toString())}if(s?.queryParams){const c=new URLSearchParams(s.queryParams);o.push(c.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:o,error:c}=r;return c?{data:null,error:c}:await Ht(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ot(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,o;const{data:c,error:d}=r;if(d)return{data:null,error:d};const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:p,error:h}=await Ht(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&(!((o=p?.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(r){if(Ot(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:c}=r;if(c)return{data:null,error:c};const{data:d,error:f}=await Ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(r){if(Ot(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:c}=r;return c?{data:null,error:c}:await Ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ot(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=t?.factors||[],o=s.filter(d=>d.factor_type==="totp"&&d.status==="verified"),c=s.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:s,totp:o,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:o},error:c}=t;if(c)return{data:null,error:c};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Mh(o.access_token);let f=null;d.aal&&(f=d.aal);let p=f;((s=(r=o.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const x=d.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(f=>f.kid===t);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(f=>f.kid===t),s&&this.jwks_cached_at+NT>o)return s;const{data:c,error:d}=await Ht(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,s=c.keys.find(f=>f.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};s=b.session.access_token}const{header:o,payload:c,signature:d,raw:{header:f,payload:p}}=Mh(s);r?.allowExpired||t3(c.exp);const h=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!h){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:c,header:o,signature:d},error:null}}const x=r3(o.alg),v=await crypto.subtle.importKey("jwk",h,x,!0,["verify"]);if(!await crypto.subtle.verify(x,v,d,UT(`${f}.${p}`)))throw new y0("Invalid JWT signature");return{data:{claims:c,header:o,signature:d},error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}}}Zl.nextInstanceID=0;const y3=Zl;class v3 extends y3{constructor(t){super(t)}}var b3=function(e,t,r,s){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{h(s.next(x))}catch(v){d(v)}}function p(x){try{h(s.throw(x))}catch(v){d(v)}}function h(x){x.done?c(x.value):o(x.value).then(f,p)}h((s=s.apply(e,t||[])).next())})};class _3{constructor(t,r,s){var o,c,d;this.supabaseUrl=t,this.supabaseKey=r;const f=ET(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const p=`sb-${f.hostname.split(".")[0]}-auth-token`,h={db:xT,realtime:yT,auth:Object.assign(Object.assign({},mT),{storageKey:p}),global:gT},x=jT(s??{},h);this.storageKey=(o=x.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=x.global.headers)!==null&&c!==void 0?c:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(v,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,x.global.fetch),this.fetch=ST(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new M4(new URL("rest/v1",f).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new fT(this.storageUrl.href,this.headers,this.fetch,s?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new E4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return b3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:c,storageKey:d,flowType:f,lock:p,debug:h},x,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new v3({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),x),storageKey:d,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:c,flowType:f,lock:p,debug:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Z4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s?.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const S3=(e,t,r)=>new _3(e,t,r);function w3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}w3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const T3="https://wuluriiajnaruvaldlhb.supabase.co",j3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bHVyaWlham5hcnV2YWxkbGhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4MDc4OTQsImV4cCI6MjA3MzM4Mzg5NH0.-Dx4fALDwoKHjsxOy1hKsME_DG4ZCQi2PdLCq5wV_hI",E3=async(e,t)=>{const r=e instanceof Request?e:void 0,s=r?.url??(typeof e=="string"?e:e instanceof URL?e.toString():""),o=(t?.method??r?.method??"GET").toUpperCase();if(s.includes("/rest/v1"))try{const{pathname:c}=new URL(s);console.info("[supabase]",o,c),c.includes("pg_timezone_names")&&console.trace("Timezone list requested from Supabase")}catch{console.info("[supabase]",o,s)}return fetch(e,t)},Oe=S3(T3,j3,{global:{fetch:E3}}),La=e=>{let t=0;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);t=(t<<5)-t+s,t=t&t}return t.toString()},k3=e=>{let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);t=(t<<5)-t+s,t=t&t}return t.toString()},gv=T.createContext(void 0),bn=()=>{const e=T.useContext(gv);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},C3=({children:e})=>{const[t,r]=T.useState(null),[s,o]=T.useState(null),[c,d]=T.useState(!0);T.useEffect(()=>{const _=setTimeout(()=>{c&&d(!1)},3e4);(async()=>{try{const{data:{session:k}}=await Oe.auth.getSession();if(k?.user)o(k.user),await f(k.user.id);else{const O=localStorage.getItem("pos_user");O&&r(JSON.parse(O))}}catch{}finally{d(!1)}})();const{data:{subscription:A}}=Oe.auth.onAuthStateChange(async(k,O)=>{if(k==="SIGNED_IN"&&O?.user){o(O.user);try{await f(O.user.id)}catch{}}else k==="SIGNED_OUT"?(o(null),r(null),localStorage.removeItem("pos_user")):k==="TOKEN_REFRESHED"&&O?.user&&o(O.user)});return()=>{clearTimeout(_),A.unsubscribe()}},[]);const f=async _=>{try{const{data:S,error:A}=await Oe.from("users").select("*").eq("user_id",parseInt(_)).single();if(A){console.error("Error loading user:",A),r(null);return}const k={user_id:S.user_id,username:S.username,role:S.role,active:S.active,icon:S.icon,business_id:S.business_id??null};r(k),localStorage.setItem("pos_user",JSON.stringify(k))}catch(S){console.error("Error in loadUserProfile:",S),r(null)}},p=async(_,S)=>{try{d(!0);const A=La(S),{data:k,error:O}=await Oe.from("users").select("business_id").eq("username",_).eq("password_hash",A).eq("active",!0).single();return O||!k?{success:!1}:{success:!0,businessId:k.business_id}}catch{return{success:!1}}finally{d(!1)}},h=async(_,S)=>{try{d(!0);const A=await x(_,S);return A&&localStorage.setItem("lastLogin",new Date().toLocaleString()),A}catch{return!1}finally{d(!1)}},x=async(_,S)=>{try{const A=La(S),{data:k,error:O}=await Oe.from("users").select("*").eq("username",_).eq("password_hash",A).eq("active",!0).single();if(O||!k)return!1;const L={user_id:k.user_id,username:k.username,role:k.role,active:k.active,icon:k.icon,business_id:k.business_id??null,last_used:k.last_used};return r(L),localStorage.setItem("pos_user",JSON.stringify(L)),localStorage.setItem("lastLogin",new Date().toLocaleString()),localStorage.setItem("lastPassword",S),await Oe.from("users").update({last_used:new Date().toISOString()}).eq("user_id",k.user_id),!0}catch{return!1}},w={user:t,supabaseUser:s,login:h,authenticate:p,register:async(_,S,A)=>{try{d(!0);const{data:k}=await Oe.from("users").select("user_id").eq("username",_).single();if(k)return console.error("Username already exists"),{success:!1};const{data:O}=await Oe.from("business_info").select("business_id").eq("name",A).single();if(O)return console.error("Business name already exists"),{success:!1};const{data:L,error:K}=await Oe.from("business_info").insert({name:A,business_name:A,business_type:"Retail Store",address:"Default Address",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("business_id").single();if(K||!L)return console.error("Error creating business:",K),{success:!1};const ne=La(S),{data:M,error:re}=await Oe.from("users").insert({username:_,password_hash:ne,role:"Owner",active:!0,business_id:L.business_id,created_at:new Date().toISOString()}).select("*").single();if(re||!M)return console.error("Error creating user:",re),await Oe.from("business_info").delete().eq("business_id",L.business_id),{success:!1};try{const oe=La("admin123"),Q=`admin_${L.business_id}`;await Oe.from("users").insert({username:Q,password_hash:oe,role:"Admin",active:!0,business_id:L.business_id,created_at:new Date().toISOString()}),console.log("Admin account created successfully for business:",L.business_id,"with username:",Q)}catch(oe){console.warn("Failed to create admin account:",oe)}const ee={user_id:M.user_id,username:M.username,role:M.role,active:M.active,icon:M.icon,business_id:M.business_id};return r(ee),localStorage.setItem("pos_user",JSON.stringify(ee)),localStorage.setItem("current_business_id",L.business_id.toString()),localStorage.setItem("lastLogin",new Date().toLocaleString()),{success:!0,adminCredentials:{username:`admin_${L.business_id}`,password:"admin123",businessId:L.business_id}}}catch(k){return console.error("Registration error:",k),{success:!1}}finally{d(!1)}},switchUser:async(_,S,A=!1)=>{try{d(!0),console.log("Switching to user ID:",_,"with",A?"PIN":"password","length:",S.length);let k,O;if(A){const K=await Oe.from("users").select("*").eq("user_id",_).eq("pin",S).eq("active",!0).single();k=K.data,O=K.error}else{const K=La(S);console.log("Hashed password:",K),console.log("Target user ID:",_);const{data:ne}=await Oe.from("users").select("password_hash, username").eq("user_id",_).single();console.log("User data from DB:",ne),console.log("Expected hash:",K),console.log("Actual hash in DB:",ne?.password_hash);let M=await Oe.from("users").select("*").eq("user_id",_).eq("password_hash",K).eq("active",!0).single();if(M.error||!M.data){console.log("First attempt failed, trying with integer hash");const re=parseInt(K);M=await Oe.from("users").select("*").eq("user_id",_).eq("password_hash",re).eq("active",!0).single()}if(M.error||!M.data){console.log("Integer hash failed, trying with alternative hash function");const re=k3(S);console.log("Alternative hash:",re),M=await Oe.from("users").select("*").eq("user_id",_).eq("password_hash",re).eq("active",!0).single()}(M.error||!M.data)&&(console.log("Alternative hash failed, trying with stored hash for debugging"),M=await Oe.from("users").select("*").eq("user_id",_).eq("password_hash",ne?.password_hash).eq("active",!0).single(),M.data&&console.log("SUCCESS with stored hash! This means the password is correct but hash function is inconsistent")),k=M.data,O=M.error}if(O||!k)return console.error("User switch failed:",O),console.error("Query result - data:",k,"error:",O),!1;console.log("Found target user data:",k),await Oe.from("users").update({last_used:new Date().toISOString()}).eq("user_id",_);const L={user_id:k.user_id,username:k.username,role:k.role,active:k.active,icon:k.icon,business_id:k.business_id??null,last_used:new Date().toISOString(),pin:k.pin};return console.log("Before switch - Current user:",t?.username,"Role:",t?.role),r(L),localStorage.setItem("pos_user",JSON.stringify(L)),localStorage.setItem("lastLogin",new Date().toLocaleString()),A||localStorage.setItem("lastPassword",S),await new Promise(K=>setTimeout(K,50)),console.log("After switch - New user:",L.username,"Role:",L.role),console.log("User switched successfully to:",L.username,"Role:",L.role),console.log("Updated localStorage user:",JSON.parse(localStorage.getItem("pos_user")||"{}")),console.log("User state should now be updated - no redirect should occur"),!0}catch(k){return console.error("User switch error:",k),!1}finally{d(!1)}},logout:async()=>{try{s&&await Oe.auth.signOut(),r(null),o(null),localStorage.removeItem("pos_user"),localStorage.removeItem("lastPassword"),window.location.href="/retailpos/login"}catch{window.location.href="/retailpos/login"}},loading:c,currentUserId:s?.id||t?.user_id?.toString()};return a.jsx(gv.Provider,{value:w,children:e})},xv=T.createContext(void 0),A3=({children:e})=>{const{user:t,loading:r}=bn(),[s,o]=T.useState(null),[c,d]=T.useState(!0),[f,p]=T.useState(null),h=T.useCallback(async()=>{if(!t?.business_id){o(null),d(!1);return}try{d(!0),p(null);const{data:y,error:b}=await Oe.from("business_info").select("*").eq("business_id",t.business_id).single();if(b)throw b;o(y),localStorage.setItem("current_business_id",y.business_id.toString())}catch(y){console.error("Error loading business:",y),p(y instanceof Error?y.message:"Failed to load business"),o(null)}finally{d(!1)}},[t]),x=T.useCallback(async()=>{await h()},[h]);T.useEffect(()=>{r||h()},[h,r]);const v={currentBusiness:s,currentBusinessId:s?.business_id??null,loading:c||r,error:f,refreshBusiness:x};return a.jsx(xv.Provider,{value:v,children:e})},Bo=()=>{const e=T.useContext(xv);if(e===void 0)throw new Error("useBusiness must be used within a BusinessProvider");return e},mv=T.createContext(void 0),R3=({children:e})=>{const[t,r]=T.useState(!1);return a.jsx(mv.Provider,{value:{isCollapsed:t,setIsCollapsed:r},children:e})},W0=()=>{const e=T.useContext(mv);if(e===void 0)throw new Error("useNav must be used within a NavProvider");return e},N1={Admin:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Owner:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Manager:{canManageUsers:!1,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!1,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Cashier:{canManageUsers:!1,canManageProducts:!1,canProcessSales:!0,canViewReports:!1,canChangeSettings:!1,canUploadImages:!1,canLookupProducts:!0,canLookupCustomers:!0}},yv=T.createContext(void 0),N3=({children:e})=>{const{user:t}=bn(),r=t?.role||"Cashier",s=r.charAt(0).toUpperCase()+r.slice(1).toLowerCase(),o=N1[s]||N1.Cashier,c=p=>o[p]||!1,f={userRole:s,permissions:o,hasPermission:c,canAccessRoute:p=>{switch(p){case"/admin":return c("canManageUsers");case"/products":return c("canManageProducts")||c("canLookupProducts");case"/sales":return c("canProcessSales");case"/transactions":return c("canProcessSales");case"/side-businesses":return c("canProcessSales");case"/reminders":return c("canProcessSales");case"/customers":return c("canLookupCustomers");case"/":return!0;default:return!0}}};return a.jsx(yv.Provider,{value:f,children:e})},uu=()=>{const e=T.useContext(yv);if(e===void 0)throw new Error("useRole must be used within a RoleProvider");return e},D3=T.createContext(void 0),O3=({children:e})=>{const[t,r]=T.useState(null),[s,o]=T.useState(!1);T.useEffect(()=>{const f=sessionStorage.getItem("pin_validated");r(f==="true")},[]);const c=async f=>{o(!0);const p="1967";return await new Promise(h=>setTimeout(h,500)),f===p?(r(!0),sessionStorage.setItem("pin_validated","true"),o(!1),!0):(r(!1),o(!1),!1)},d=f=>{r(f)};return a.jsx(D3.Provider,{value:{isPinValid:t,isCheckingPin:s,validatePin:c,setPinValid:d},children:e})},I3=()=>{const{isCollapsed:e,setIsCollapsed:t}=W0();T.useEffect(()=>{const r=o=>{if(e)return;const c=document.querySelector("nav");if(c&&c.contains(o.target))return;o.target.closest('button, a, input, select, textarea, [role="button"], [onclick]')||t(!0)},s=setTimeout(()=>{document.addEventListener("click",r)},100);return()=>{clearTimeout(s),document.removeEventListener("click",r)}},[e,t])},B3="_container_1374x_18",M3="_header_1374x_24",F3="_headerContent_1374x_30",L3="_headerLeft_1374x_55",P3="_logo_1374x_60",z3="_headerRight_1374x_66",U3="_backLink_1374x_71",W3="_mainContent_1374x_83",q3="_formContainer_1374x_89",$3="_formWrapper_1374x_109",H3="_formHeader_1374x_118",G3="_formTitle_1374x_122",V3="_formSubtitle_1374x_129",Y3="_form_1374x_89",K3="_label_1374x_142",X3="_input_1374x_150",Q3="_inputError_1374x_166",J3="_passwordContainer_1374x_170",Z3="_passwordToggle_1374x_174",ej="_error_1374x_187",tj="_errorMessage_1374x_193",rj="_formOptions_1374x_204",nj="_rememberMe_1374x_210",sj="_checkbox_1374x_215",aj="_checkboxLabel_1374x_223",ij="_forgotPassword_1374x_229",oj="_forgotPasswordLink_1374x_233",lj="_submitButton_1374x_248",cj="_backButton_1374x_274",dj="_buttonGroup_1374x_291",uj="_socialLogin_1374x_320",fj="_divider_1374x_324",hj="_dividerLine_1374x_328",pj="_dividerText_1374x_337",gj="_socialButtons_1374x_350",xj="_socialButton_1374x_350",mj="_successMessage_1374x_390",yj="_successIcon_1374x_397",vj="_successTitle_1374x_418",bj="_successText_1374x_424",_j="_imageContainer_1374x_429",ht={container:B3,header:M3,headerContent:F3,headerLeft:L3,logo:P3,headerRight:z3,backLink:U3,mainContent:W3,formContainer:q3,formWrapper:$3,formHeader:H3,formTitle:G3,formSubtitle:V3,form:Y3,label:K3,input:X3,inputError:Q3,passwordContainer:J3,passwordToggle:Z3,error:ej,errorMessage:tj,formOptions:rj,rememberMe:nj,checkbox:sj,checkboxLabel:aj,forgotPassword:ij,forgotPasswordLink:oj,submitButton:lj,backButton:cj,buttonGroup:dj,socialLogin:uj,divider:fj,dividerLine:hj,dividerText:pj,socialButtons:gj,socialButton:xj,successMessage:mj,successIcon:yj,successTitle:vj,successText:bj,imageContainer:_j},vv=()=>{const e=Ls(),{login:t,loading:r}=bn(),[s,o]=T.useState({email:"",password:"",rememberMe:!1}),[c,d]=T.useState({}),[f,p]=T.useState(!1),[h,x]=T.useState(!1),[v,y]=T.useState(!1),[b,w]=T.useState(!1),[_,S]=T.useState(!1),A=oe=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(oe),k=oe=>{d(Q=>{const te={...Q};return delete te[oe],te})},O=()=>{let oe=!0;const Q={};return s.email.trim()?A(s.email)||(Q.email="Please enter a valid email address",oe=!1):(Q.email="Email is required",oe=!1),s.password||(Q.password="Password is required",oe=!1),d(Q),oe},L=()=>{let oe=!0;const Q={};return s.email.trim()?A(s.email)||(Q.resetEmail="Please enter a valid email address",oe=!1):(Q.resetEmail="Email is required",oe=!1),d(Q),oe},K=oe=>{const{name:Q,value:te,type:ae,checked:X}=oe.target;o(J=>({...J,[Q]:ae==="checkbox"?X:te})),c[Q]&&k(Q)},ne=async oe=>{oe.preventDefault(),O()&&(S(!0),await t(s.email,s.password)?e("/select-user"):d({general:"Invalid email or password"}),S(!1))},M=async oe=>{oe.preventDefault(),L()&&(S(!0),setTimeout(()=>{S(!1),w(!0)},2e3))},re=()=>{p(!f)},ee=oe=>{oe.preventDefault(),x(!0),d({})},de=()=>{x(!1),w(!1),y(!1),d({}),o(oe=>({...oe,password:""}))};return a.jsxs("div",{className:ht.container,children:[a.jsx("header",{className:ht.header,children:a.jsxs("div",{className:ht.headerContent,children:[a.jsx("div",{className:ht.headerLeft,children:a.jsx("h1",{className:ht.logo,children:"TillPoint"})}),a.jsx("div",{className:ht.headerRight,children:a.jsx("a",{href:"/",className:ht.backLink,children:" Back to Home"})})]})}),a.jsxs("div",{className:ht.mainContent,children:[a.jsx("div",{className:ht.formContainer,children:a.jsxs("div",{className:ht.formWrapper,children:[!h&&!v&&!b&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:ht.formHeader,children:[a.jsx("h2",{className:ht.formTitle,children:"Welcome Back"}),a.jsx("p",{className:ht.formSubtitle,children:"Sign in to your TillPoint account"})]}),a.jsxs("form",{onSubmit:ne,className:ht.form,children:[c.general&&a.jsx("div",{className:ht.errorMessage,children:c.general}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:ht.label,children:"Email Address"}),a.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:K,required:!0,className:`${ht.input} ${c.email?ht.inputError:""}`,placeholder:"Enter your email"}),c.email&&a.jsx("span",{className:ht.error,children:c.email})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:ht.label,children:"Password"}),a.jsxs("div",{className:ht.passwordContainer,children:[a.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:s.password,onChange:K,required:!0,className:`${ht.input} ${c.password?ht.inputError:""}`,placeholder:"Enter your password"}),a.jsx("button",{type:"button",onClick:re,className:ht.passwordToggle,children:a.jsx("i",{className:`fas ${f?"fa-eye-slash":"fa-eye"}`})})]}),c.password&&a.jsx("span",{className:ht.error,children:c.password})]}),a.jsxs("div",{className:ht.formOptions,children:[a.jsxs("div",{className:ht.rememberMe,children:[a.jsx("input",{id:"remember-me",name:"rememberMe",type:"checkbox",checked:s.rememberMe,onChange:K,className:ht.checkbox}),a.jsx("label",{htmlFor:"remember-me",className:ht.checkboxLabel,children:"Remember me"})]}),a.jsx("div",{className:ht.forgotPassword,children:a.jsx("button",{type:"button",onClick:ee,className:ht.forgotPasswordLink,children:"Forgot your password?"})})]}),a.jsx("button",{type:"submit",className:ht.submitButton,disabled:_,children:_?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin"}),"Signing In..."]}):"Sign In"})]}),a.jsxs("div",{className:ht.socialLogin,children:[a.jsxs("div",{className:ht.divider,children:[a.jsx("div",{className:ht.dividerLine}),a.jsx("div",{className:ht.dividerText,children:a.jsx("span",{children:"Or continue with"})})]}),a.jsxs("div",{className:ht.socialButtons,children:[a.jsxs("button",{type:"button",className:ht.socialButton,children:[a.jsx("i",{className:"fab fa-google"}),"Google"]}),a.jsxs("button",{type:"button",className:ht.socialButton,children:[a.jsx("i",{className:"fab fa-microsoft"}),"Microsoft"]})]})]})]}),h&&!b&&a.jsxs("form",{onSubmit:M,className:ht.form,children:[a.jsxs("div",{className:ht.formHeader,children:[a.jsx("h3",{className:ht.formTitle,children:"Reset Password"}),a.jsx("p",{className:ht.formSubtitle,children:"Enter your email address and we'll send you a link to reset your password"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"reset-email",className:ht.label,children:"Email Address"}),a.jsx("input",{type:"email",id:"reset-email",name:"email",value:s.email,onChange:K,required:!0,className:`${ht.input} ${c.resetEmail?ht.inputError:""}`,placeholder:"Enter your email"}),c.resetEmail&&a.jsx("span",{className:ht.error,children:c.resetEmail})]}),a.jsxs("div",{className:ht.buttonGroup,children:[a.jsx("button",{type:"button",onClick:de,className:ht.backButton,children:"Back to Sign In"}),a.jsx("button",{type:"submit",className:ht.submitButton,disabled:_,children:_?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin"}),"Sending..."]}):"Send Reset Link"})]})]}),v&&a.jsxs("div",{className:ht.successMessage,children:[a.jsx("div",{className:ht.successIcon,children:a.jsx("i",{className:"fas fa-check"})}),a.jsx("h3",{className:ht.successTitle,children:"Welcome Back!"}),a.jsx("p",{className:ht.successText,children:"You have successfully signed in to your account."}),a.jsx("button",{onClick:handleGoToStaffLogin,className:ht.submitButton,children:"Go to Staff Login"})]}),b&&a.jsxs("div",{className:ht.successMessage,children:[a.jsx("div",{className:ht.successIcon,children:a.jsx("i",{className:"fas fa-envelope"})}),a.jsx("h3",{className:ht.successTitle,children:"Reset Link Sent!"}),a.jsx("p",{className:ht.successText,children:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions."}),a.jsx("button",{onClick:de,className:ht.submitButton,children:"Back to Sign In"})]})]})}),a.jsx("div",{className:ht.imageContainer})]})]})},Sj=({children:e})=>{const{user:t,supabaseUser:r,loading:s}=bn();return s?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"Loading..."})]})}):!t&&!r?a.jsx(vv,{}):a.jsx(a.Fragment,{children:e})},Bl=({children:e,requiredPermission:t,fallbackRoute:r="/"})=>{const s=ks(),{canAccessRoute:o,hasPermission:c}=uu();return o(s.pathname)?t&&!c(t)?a.jsx(Ym,{to:r,replace:!0}):a.jsx(a.Fragment,{children:e}):a.jsx(Ym,{to:r,replace:!0})},wj=()=>{const e=ks(),{isCollapsed:t,setIsCollapsed:r}=W0(),{canAccessRoute:s}=uu(),c=[{path:"/dashboard",label:"Dashboard",icon:"fas fa-home"},{path:"/products",label:"Products",icon:"fas fa-box"},{path:"/sales",label:"Sales",icon:"fas fa-dollar-sign"},{path:"/transactions",label:"Transactions",icon:"fas fa-receipt"},{path:"/side-businesses",label:"Side Businesses",icon:"fas fa-briefcase"},{path:"/reminders",label:"Reminders",icon:"fas fa-sticky-note"},{path:"/admin",label:"Admin",icon:"fas fa-users-cog"}].filter(d=>s(d.path));return a.jsxs("nav",{style:{width:t?"70px":"200px",height:"100vh",background:"#1a1a1a",borderRight:"1px solid #333333",display:"flex",flexDirection:"column",position:"fixed",left:0,top:0,zIndex:50,padding:t?"20px 10px 20px 10px":"20px 16px 20px 16px",boxShadow:"2px 0 8px rgba(0, 0, 0, 0.3)",transition:"width 0.3s ease, padding 0.3s ease"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:t?"center":"flex-start",gap:"12px",marginBottom:"32px",paddingBottom:"16px",borderBottom:"1px solid #333333"},children:[a.jsx("div",{onClick:()=>r(!t),style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:d=>d.target.style.setProperty("background-color","#333333"),onMouseLeave:d=>d.target.style.setProperty("background-color","transparent"),children:a.jsx("div",{style:{width:"16px",height:"2px",background:"#ffffff",position:"relative",transition:"transform 0.3s ease"},children:a.jsx("div",{style:{position:"absolute",top:"6px",left:0,width:"16px",height:"2px",background:"#ffffff",transition:"transform 0.3s ease"}})})}),!t&&a.jsx("h1",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"bold",margin:0,transition:"opacity 0.3s ease"},children:"Retail POS"})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1,overflowY:"auto"},children:c.map(d=>a.jsxs(Ma,{to:d.path,style:{display:"flex",alignItems:"center",justifyContent:t?"center":"flex-start",gap:"12px",padding:t?"12px 8px":"12px 16px",borderRadius:"8px",textDecoration:"none",transition:"all 0.2s ease",background:e.pathname===d.path?"#333333":"transparent",color:e.pathname===d.path?"#ffffff":"#cccccc"},onMouseEnter:f=>{if(e.pathname!==d.path){const p=f.currentTarget;p.style.backgroundColor="#333333",p.style.color="#ffffff"}},onMouseLeave:f=>{if(e.pathname!==d.path){const p=f.currentTarget;p.style.backgroundColor="transparent",p.style.color="#cccccc"}},children:[a.jsx("i",{className:d.icon,style:{fontSize:"16px",width:"20px"}}),!t&&a.jsx("span",{style:{fontSize:"13px",fontWeight:"500",transition:"opacity 0.3s ease"},children:d.label})]},d.path))})]})},Tj=({isOpen:e,onClose:t,onUserSwitch:r})=>{const{user:s,switchUser:o}=bn(),[c,d]=T.useState([]),[f,p]=T.useState(!0),[h,x]=T.useState(null),[v,y]=T.useState(!1),[b,w]=T.useState(""),[_,S]=T.useState(""),[A,k]=T.useState(!1),[O,L]=T.useState(!1),[K,ne]=T.useState(""),[M,re]=T.useState(""),[ee,de]=T.useState(!1),[oe,Q]=T.useState(!1);T.useEffect(()=>{e&&s?.business_id&&te()},[e,s?.business_id]),T.useEffect(()=>{e&&s?.pin&&!ee&&L(!0)},[e,s?.pin,ee]);const te=async()=>{if(s?.business_id)try{p(!0);const{data:D,error:U}=await Oe.from("users").select("*").eq("business_id",s.business_id).eq("active",!0).order("user_id",{ascending:!1});if(U){console.error("Error fetching users:",U);return}d(D||[])}catch(D){console.error("Error fetching users:",D)}finally{p(!1)}},ae=D=>{x(D),y(!0),w(""),S(""),Q(!1)},X=async D=>{if(D.preventDefault(),!(!h||!b)){k(!0),S("");try{await r(h,b,oe)}catch(U){console.log("Password error:",U),S(oe?"Invalid PIN. Please try again.":"Invalid password. Please try again.")}finally{k(!1)}}},J=()=>{y(!1),x(null),w(""),S(""),k(!1),Q(!1)},fe=async D=>{if(D.preventDefault(),!K){re("Please enter your PIN");return}s?.pin&&s.pin===K?(L(!1),de(!0),ne(""),re("")):re("Invalid PIN. Please try again.")},se=D=>{switch(D.toLowerCase()){case"admin":return"#dc2626";case"owner":return"#7c3aed";case"manager":return"#ea580c";case"cashier":return"#2563eb";default:return"#6b7280"}},Ne=D=>{if(!D)return"Never";const U=new Date(D);return Number.isNaN(U.getTime())?"Never":U.toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})};return e?a.jsx("div",{style:{position:"fixed",inset:"0",backgroundColor:"#0b0d10",backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02) 2px, transparent 2px, transparent 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",zIndex:9999},children:a.jsxs("div",{style:{background:"transparent",width:"100%",maxWidth:"1200px",padding:"20px"},children:[a.jsx("div",{style:{background:"#000000",borderRadius:"12px",border:"4px solid #4a5568",boxShadow:"inset 0 0 20px rgba(0,0,0,0.5)",padding:"16px"},children:a.jsxs("div",{style:{background:"#000000",borderRadius:"8px",padding:"24px",position:"relative",overflow:"hidden",height:"700px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid #4a5568",position:"relative"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#ef4444"}}),a.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#eab308"}}),a.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#7d8d86"}})]}),a.jsx("h2",{style:{fontSize:"32px",fontWeight:"bold",color:"#ffffff",margin:0},children:"Switch User"}),a.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"color 0.2s ease",fontSize:"32px"},onMouseEnter:D=>{D.currentTarget.style.color="#ffffff"},onMouseLeave:D=>{D.currentTarget.style.color="#9ca3af"},"aria-label":"Close",children:""})]}),a.jsx("div",{children:O?a.jsx("div",{children:a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:8,padding:24,marginBottom:24,textAlign:"center"},children:[a.jsxs("div",{style:{marginBottom:16},children:[a.jsx("i",{className:"fa-solid fa-lock",style:{fontSize:"48px",color:"#7d8d86",marginBottom:"16px"}}),a.jsx("h3",{style:{color:"#ffffff",fontSize:"24px",margin:"0 0 8px 0"},children:"PIN Required"}),a.jsx("p",{style:{color:"#9ca3af",fontSize:"16px",margin:0},children:"Enter your PIN to access the user system"})]}),a.jsxs("form",{onSubmit:fe,style:{display:"flex",flexDirection:"column",gap:16,maxWidth:"300px",margin:"0 auto"},children:[a.jsxs("div",{children:[a.jsx("input",{type:"password",value:K,onChange:D=>{ne(D.target.value),M&&re("")},style:{width:"200px",padding:12,background:"#1a202c",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,boxSizing:"border-box",textAlign:"center",letterSpacing:"2px"},placeholder:"Enter PIN",maxLength:6,required:!0,autoFocus:!0}),M&&a.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:"8px 12px",marginTop:8,display:"flex",alignItems:"center",gap:8},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc2626",fontSize:14}}),a.jsx("p",{style:{fontSize:14,color:"#dc2626",margin:0,fontWeight:500},children:M})]})]}),a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("button",{type:"button",onClick:t,style:{flex:1,padding:"12px 16px",background:"#4a5568",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,fontWeight:500,cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:D=>{D.currentTarget.style.background="#6b7280"},onMouseLeave:D=>{D.currentTarget.style.background="#4a5568"},children:"Cancel"}),a.jsx("button",{type:"submit",style:{flex:1,padding:"12px 16px",background:"#7d8d86",border:"2px solid #7d8d86",borderRadius:8,color:"#000000",fontSize:18,fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:D=>{D.currentTarget.style.background="#3e3f29",D.currentTarget.style.borderColor="#3e3f29"},onMouseLeave:D=>{D.currentTarget.style.background="#7d8d86",D.currentTarget.style.borderColor="#7d8d86"},children:"Verify PIN"})]})]})]})}):v?a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundImage:"url(images/mcbackground3.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"#0b0d10",position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",pointerEvents:"none"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,gap:"32px",padding:"40px 0",position:"relative",zIndex:1},children:[a.jsx("div",{style:{position:"relative"},children:a.jsx("div",{style:{width:"160px",height:"160px",borderRadius:"50%",background:"rgba(0,0,0,0.6)",border:"3px solid rgba(255,255,255,0.4)",backdropFilter:"blur(15px)",boxShadow:"0 8px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:h?.icon?a.jsx("img",{src:`/retailpos/images/icons/${h.icon}.png`,alt:h.icon,style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"50%"}}):a.jsx("svg",{viewBox:"0 0 24 24",style:{width:"80px",height:"80px",color:"rgba(255,255,255,0.85)"},fill:"currentColor",children:a.jsx("path",{d:"M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"})})})}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{color:"#ffffff",fontSize:"32px",fontWeight:"600",letterSpacing:"0.5px",textShadow:"0 2px 8px rgba(0,0,0,0.8)"},children:h?.username}),a.jsx("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px",marginTop:"8px",textShadow:"0 1px 4px rgba(0,0,0,0.8)"},children:h?.role})]}),a.jsxs("form",{onSubmit:X,style:{width:"100%",maxWidth:"400px"},children:[h?.pin&&a.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:a.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"4px",backdropFilter:"blur(10px)"},children:[a.jsx("button",{type:"button",onClick:()=>{Q(!1),w(""),S("")},style:{padding:"8px 16px",background:oe?"transparent":"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:oe?"rgba(255,255,255,0.7)":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Password"}),a.jsx("button",{type:"button",onClick:()=>{Q(!0),w(""),S("")},style:{padding:"8px 16px",background:oe?"rgba(255,255,255,0.2)":"transparent",border:"none",borderRadius:"6px",color:oe?"#ffffff":"rgba(255,255,255,0.7)",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"PIN"})]})}),a.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[a.jsx("input",{type:"password",value:b,onChange:D=>{w(D.target.value),_&&S("")},placeholder:oe?"Enter PIN":"Password",maxLength:oe?6:void 0,required:!0,autoFocus:!0,style:{width:"100%",height:"48px",borderRadius:"24px",paddingLeft:"20px",paddingRight:"56px",color:"#ffffff",fontSize:"16px",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(15px)",border:"2px solid rgba(255,255,255,0.4)",boxShadow:"0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)",outline:"none",textAlign:oe?"center":"left",letterSpacing:oe?"2px":"normal",boxSizing:"border-box",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onFocus:D=>{D.target.style.border="2px solid rgba(255,255,255,0.8)",D.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onBlur:D=>{D.target.style.border="2px solid rgba(255,255,255,0.4)",D.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}}),a.jsx("button",{type:"submit",disabled:A,style:{position:"absolute",right:"4px",top:"4px",height:"40px",width:"40px",borderRadius:"50%",background:A?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.95)",border:"2px solid rgba(255,255,255,0.8)",display:"flex",alignItems:"center",justifyContent:"center",cursor:A?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 6px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)",opacity:A?.7:1},onMouseEnter:D=>{A||(D.currentTarget.style.background="#ffffff")},onMouseLeave:D=>{A||(D.currentTarget.style.background="rgba(255,255,255,0.95)")},children:A?a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{color:"#0f2d6e",fontSize:"16px"}}):a.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:"#0f2d6e"},fill:"currentColor",children:a.jsx("path",{d:"M13 5l7 7-7 7v-4H4v-6h9V5z"})})})]}),_&&a.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",backdropFilter:"blur(10px)"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#fca5a5",fontSize:"14px",textShadow:"0 1px 2px rgba(0,0,0,0.8)"}}),a.jsx("p",{style:{fontSize:"14px",color:"#fca5a5",margin:0,fontWeight:500,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:_})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px"},children:[a.jsx("button",{type:"button",onClick:J,style:{background:"none",border:"none",color:"rgba(255,255,255,0.9)",fontSize:"14px",cursor:"pointer",textDecoration:"none",transition:"color 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:D=>{D.currentTarget.style.color="#ffffff"},onMouseLeave:D=>{D.currentTarget.style.color="rgba(255,255,255,0.9)"},children:" Back to users"}),a.jsx("div",{style:{fontSize:"14px",color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:"Press Enter to sign in"})]})]})]}),a.jsx("div",{style:{padding:"24px",display:"flex",justifyContent:"flex-start",position:"relative",zIndex:1},children:a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxWidth:"300px",maxHeight:"200px",overflowY:"auto",paddingRight:"8px"},children:c.filter(D=>D.user_id!==h?.user_id).map(D=>a.jsxs("button",{onClick:()=>{x(D),w(""),S(""),Q(!1)},style:{display:"flex",alignItems:"center",gap:"10px",borderRadius:"8px",padding:"6px 10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",color:"rgba(255,255,255,0.9)",cursor:"pointer",transition:"all 0.2s ease",minWidth:"140px",fontSize:"13px"},onMouseEnter:U=>{U.currentTarget.style.background="rgba(0,0,0,0.5)",U.currentTarget.style.color="#ffffff"},onMouseLeave:U=>{U.currentTarget.style.background="rgba(0,0,0,0.4)",U.currentTarget.style.color="rgba(255,255,255,0.9)"},children:[a.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:D.icon?a.jsx("img",{src:`/retailpos/images/icons/${D.icon}.png`,alt:D.icon,style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"50%"}}):a.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.7)"},children:""})}),a.jsx("span",{style:{fontWeight:"400",fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:D.username})]},D.user_id))})}),a.jsxs("div",{style:{position:"absolute",right:"24px",bottom:"24px",display:"flex",alignItems:"center",gap:"16px",color:"rgba(255,255,255,0.8)",zIndex:1},children:[a.jsx("button",{title:"Accessibility",style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:D=>{D.currentTarget.style.background="rgba(0,0,0,0.6)",D.currentTarget.style.color="#ffffff"},onMouseLeave:D=>{D.currentTarget.style.background="rgba(0,0,0,0.4)",D.currentTarget.style.color="rgba(255,255,255,0.9)"},children:a.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:a.jsx("path",{d:"M11 2h2v4h-2zM4 9h16v2H4zM6 12l4 .5V22H8v-7.5L6 14v-2zm12 0v2l-2 .5V22h-2v-9.5l4-.5z"})})}),a.jsx("button",{onClick:t,style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:D=>{D.currentTarget.style.background="#991b1b",D.currentTarget.style.border="1px solid #991b1b",D.currentTarget.style.color="#ffffff"},onMouseLeave:D=>{D.currentTarget.style.background="rgba(0,0,0,0.4)",D.currentTarget.style.border="1px solid rgba(255,255,255,0.3)",D.currentTarget.style.color="rgba(255,255,255,0.9)"},children:a.jsxs("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:[a.jsx("path",{d:"M11 2h2v10h-2z"}),a.jsx("path",{d:"M7.05 4.05a8.5 8.5 0 1 0 9.9 0l-1.41 1.41a6.5 6.5 0 1 1-7.08 0z"})]})})]})]}):f?a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:"#9ca3af"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:12,fontSize:"24px"}}),a.jsx("span",{style:{fontSize:"18px"},children:"Loading users..."})]}):a.jsx("div",{children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"20px"},children:c.map(D=>a.jsx("button",{style:{background:"rgba(26, 26, 26, 0.3)",border:"1px solid #4a5568",borderBottom:"3px solid #7d8d86",borderRadius:"8px",padding:24,cursor:"pointer",transition:"all 0.2s ease",width:"100%",textAlign:"left",position:"relative",minHeight:"160px"},onMouseEnter:U=>{U.currentTarget.style.background="rgba(125,141,134,0.1)",U.currentTarget.style.borderColor="#7d8d86",U.currentTarget.style.boxShadow="0 0 20px rgba(125,141,134,0.2)"},onMouseLeave:U=>{U.currentTarget.style.background="rgba(26, 26, 26, 0.3)",U.currentTarget.style.borderColor="#4a5568",U.currentTarget.style.boxShadow="none"},onClick:()=>ae(D),children:a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,height:"100%"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#1a202c",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"2px solid #4a5568"},children:D.icon?a.jsx("img",{src:`/retailpos/images/icons/${D.icon}.png`,alt:D.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):a.jsx("div",{style:{fontSize:24,color:"#4a5568"},children:""})}),a.jsx("div",{style:{flex:1},children:a.jsxs("div",{style:{marginBottom:8,display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{style:{fontSize:24,fontWeight:500,color:"#ffffff"},children:D.username}),D.pin&&a.jsx("div",{style:{background:"#10b981",color:"#ffffff",fontSize:"10px",fontWeight:"600",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"PIN"})]})})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,flex:1},children:[a.jsx("div",{children:a.jsx("span",{style:{background:`${se(D.role)}20`,color:se(D.role),padding:"6px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize",display:"inline-block"},children:D.role})}),a.jsxs("div",{style:{fontSize:14,color:"#9ca3af",lineHeight:"1.4"},children:["Last login: ",Ne(D.last_used)]})]})]})},D.user_id))})})})]})}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:a.jsx("div",{style:{width:60,height:60,background:"linear-gradient(145deg, #4a5568, #2d3748)",borderRadius:"0 0 15px 15px",boxShadow:"0 4px 8px rgba(0,0,0,0.4)",border:"2px solid #4a5568"}})}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:a.jsx("div",{style:{width:300,height:30,background:"linear-gradient(145deg, #2d3748, #1a202c)",borderRadius:50,boxShadow:"0 6px 20px rgba(0,0,0,0.5)",border:"1px solid #4a5568"}})})]})}):null},jj="_backdrop_1lrks_2",Ej="_hidden_1lrks_10",kj="_visible_1lrks_15",Cj="_drawer_1lrks_20",Aj="_open_1lrks_38",Rj="_header_1lrks_42",Nj="_headerLeft_1lrks_55",Dj="_title_1lrks_62",Oj="_closeButton_1lrks_70",Ij="_messages_1lrks_84",Bj="_successMessage_1lrks_89",Mj="_errorMessage_1lrks_98",Fj="_body_1lrks_107",Lj="_nav_1lrks_114",Pj="_navList_1lrks_138",zj="_navButton_1lrks_147",Uj="_active_1lrks_165",Wj="_content_1lrks_171",qj="_mobileTabs_1lrks_176",$j="_mobileTabsList_1lrks_187",Hj="_mobileTabButton_1lrks_193",Gj="_scrollContent_1lrks_211",Vj="_section_1lrks_238",Yj="_sectionTitle_1lrks_242",Kj="_sectionCard_1lrks_249",Xj="_grid_1lrks_260",Qj="_gridTwo_1lrks_267",Jj="_field_1lrks_277",Zj="_fieldLabel_1lrks_284",eE="_required_1lrks_292",tE="_fieldInput_1lrks_298",rE="_fieldTextarea_1lrks_322",nE="_fieldSelect_1lrks_349",sE="_logoSection_1lrks_375",aE="_logoPreview_1lrks_381",iE="_logoPreviewPlaceholder_1lrks_399",oE="_logoUpload_1lrks_404",lE="_logoFileInput_1lrks_412",cE="_logoFileButton_1lrks_416",dE="_logoHelpText_1lrks_434",uE="_footer_1lrks_441",fE="_footerContent_1lrks_451",hE="_cancelButton_1lrks_458",pE="_saveButton_1lrks_473",gE="_spacer_1lrks_494",Nt={backdrop:jj,hidden:Ej,visible:kj,drawer:Cj,open:Aj,header:Rj,headerLeft:Nj,title:Dj,closeButton:Oj,messages:Ij,successMessage:Bj,errorMessage:Mj,body:Fj,nav:Lj,navList:Pj,navButton:zj,active:Uj,content:Wj,mobileTabs:qj,mobileTabsList:$j,mobileTabButton:Hj,scrollContent:Gj,section:Vj,sectionTitle:Yj,sectionCard:Kj,grid:Xj,gridTwo:Qj,field:Jj,fieldLabel:Zj,required:eE,fieldInput:tE,fieldTextarea:rE,fieldSelect:nE,logoSection:sE,logoPreview:aE,logoPreviewPlaceholder:iE,logoUpload:oE,logoFileInput:lE,logoFileButton:cE,logoHelpText:dE,footer:uE,footerContent:fE,cancelButton:hE,saveButton:pE,spacer:gE},Ph=[{id:"branding",label:"Branding"},{id:"basic",label:"Basic Info"},{id:"contact",label:"Contact"},{id:"biz",label:"Business Settings"},{id:"receipt",label:"Receipt"}],Ml=ou.forwardRef(function({id:t,title:r,children:s},o){return a.jsxs("section",{id:t,ref:o,className:Nt.section,children:[a.jsx("h3",{className:Nt.sectionTitle,children:r}),a.jsx("div",{className:Nt.sectionCard,children:s})]})});function zh({two:e,children:t}){return a.jsx("div",{className:`${Nt.grid} ${e?Nt.gridTwo:""}`,children:t})}function Zs({label:e,value:t,onChange:r,placeholder:s,multiline:o,required:c}){return a.jsxs("label",{className:Nt.field,children:[a.jsx("span",{className:`${Nt.fieldLabel} ${c?Nt.required:""}`,children:e}),o?a.jsx("textarea",{value:t,onChange:d=>r(d.target.value),placeholder:s,className:Nt.fieldTextarea,rows:4}):a.jsx("input",{value:t,onChange:d=>r(d.target.value),placeholder:s,className:Nt.fieldInput})]})}function Uh({label:e,value:t,onChange:r,options:s}){return a.jsxs("label",{className:Nt.field,children:[a.jsx("span",{className:Nt.fieldLabel,children:e}),a.jsx("select",{value:t,onChange:o=>r(o.target.value),className:Nt.fieldSelect,children:s.map(o=>a.jsx("option",{value:o,children:o},o))})]})}function xE({src:e}){return a.jsx("div",{className:Nt.logoPreview,children:e?a.jsx("img",{src:e,alt:"logo"}):a.jsx("div",{className:Nt.logoPreviewPlaceholder,children:"No logo"})})}const mE=({isOpen:e,onClose:t})=>{const{currentBusiness:r,refreshBusiness:s}=Bo(),[o,c]=T.useState(!1),[d,f]=T.useState(null),[p,h]=T.useState(!1),[x,v]=T.useState("branding"),[y,b]=T.useState({logo:null,logoPreview:null,name:"",displayName:"",type:"Retail Store",website:"",description:"",address:"",phone:"",vat:"",currency:"USD ($)",timezone:"UTC",hours:"9:00 AM - 6:00 PM",receiptFooter:"Thank you for shopping with us!"}),w=T.useRef(null),_=T.useMemo(()=>Object.fromEntries(Ph.map(({id:M})=>[M,ou.createRef()])),[]);T.useEffect(()=>{e&&r&&b({logo:null,logoPreview:r.logo_url||null,name:r.name||"",displayName:r.business_name||r.name||"",type:r.business_type||"Retail Store",website:r.website||"",description:r.description||"",address:r.address||"",phone:r.phone_number||"",vat:r.vat_number||"",currency:r.currency?`${r.currency} (${S(r.currency)})`:"USD ($)",timezone:r.timezone||"UTC",hours:r.business_hours||"9:00 AM - 6:00 PM",receiptFooter:r.receipt_footer||"Thank you for shopping with us!"})},[e,r]),T.useEffect(()=>{e&&v("branding")},[e]);const S=M=>({USD:"$",EUR:"",GBP:"",CAD:"C$",AUD:"A$",JPY:""})[M]||"$",A=M=>{const re=_[M].current;!re||!w.current||(v(M),w.current.scrollTo({top:re.offsetTop-16,behavior:"smooth"}))},k=M=>b(re=>({...re,...M})),O=M=>{const re=M.target.files?.[0];if(!re)return;const ee=URL.createObjectURL(re);k({logo:re,logoPreview:ee})},L=async M=>{try{const re=M.name.split(".").pop(),ee=`${Date.now()}.${re}`,de=`${r?.business_id}/business-logos/${ee}`,{error:oe}=await Oe.storage.from("business-assets").upload(de,M);if(oe)throw oe;const{data:Q}=Oe.storage.from("business-assets").getPublicUrl(de);return Q.publicUrl}catch(re){return console.error("Error uploading logo:",re),null}},K=async()=>{if(r){c(!0),f(null),h(!1);try{let M=y.logoPreview;if(y.logo){const de=await L(y.logo);de&&(M=de)}const re=y.currency.split(" ")[0],{error:ee}=await Oe.from("business_info").update({name:y.name,business_name:y.displayName,business_type:y.type,description:y.description,address:y.address,phone_number:y.phone||null,vat_number:y.vat||null,website:y.website||null,business_hours:y.hours||null,currency:re,timezone:y.timezone,receipt_footer:y.receiptFooter,logo_url:M||null,updated_at:new Date().toISOString()}).eq("business_id",r.business_id);if(ee)throw ee;h(!0),await s(),setTimeout(()=>{t(),h(!1)},1500)}catch(M){console.error("Error updating business info:",M),f(M instanceof Error?M.message:"Failed to update business information")}finally{c(!1)}}},ne=()=>{f(null),h(!1),v("branding"),t()};return e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`${Nt.backdrop} ${e?Nt.visible:Nt.hidden}`,onClick:ne}),a.jsxs("aside",{className:`${Nt.drawer} ${e?Nt.open:""}`,role:"dialog","aria-modal":"true",children:[a.jsxs("div",{className:Nt.header,children:[a.jsx("div",{className:Nt.headerLeft,children:a.jsx("h2",{className:Nt.title,children:"SETTINGS"})}),a.jsx("button",{onClick:ne,className:Nt.closeButton,"aria-label":"Close",children:"[X]"})]}),(p||d)&&a.jsxs("div",{className:Nt.messages,children:[p&&a.jsx("div",{className:Nt.successMessage,children:" Business information updated successfully!"}),d&&a.jsxs("div",{className:Nt.errorMessage,children:[" ",d]})]}),a.jsxs("div",{className:Nt.body,children:[a.jsx("nav",{className:Nt.nav,children:a.jsx("ul",{className:Nt.navList,children:Ph.map(M=>a.jsx("li",{children:a.jsx("button",{onClick:()=>A(M.id),className:`${Nt.navButton} ${x===M.id?Nt.active:""}`,children:M.label})},M.id))})}),a.jsxs("div",{className:Nt.content,children:[a.jsx("div",{className:Nt.mobileTabs,children:a.jsx("div",{className:Nt.mobileTabsList,children:Ph.map(M=>a.jsx("button",{onClick:()=>A(M.id),className:`${Nt.mobileTabButton} ${x===M.id?Nt.active:""}`,children:M.label},M.id))})}),a.jsxs("div",{ref:w,className:Nt.scrollContent,children:[a.jsx(Ml,{id:"branding",ref:_.branding,title:"Branding",children:a.jsxs("div",{className:Nt.logoSection,children:[a.jsx(xE,{src:y.logoPreview}),a.jsxs("div",{children:[a.jsx("label",{className:Nt.logoUpload,children:"Business Logo"}),a.jsx("input",{type:"file",accept:"image/png,image/jpeg",onChange:O,className:Nt.logoFileInput,id:"logo-input"}),a.jsx("label",{htmlFor:"logo-input",className:Nt.logoFileButton,children:"Choose File"}),a.jsx("p",{className:Nt.logoHelpText,children:"Recommended: 200200px, PNG or JPG"})]})]})}),a.jsxs(Ml,{id:"basic",ref:_.basic,title:"Basic Information",children:[a.jsxs(zh,{two:!0,children:[a.jsx(Zs,{label:"Business Name",value:y.name,onChange:M=>k({name:M}),placeholder:"Enter your legal business name",required:!0}),a.jsx(Zs,{label:"Display Name",value:y.displayName,onChange:M=>k({displayName:M}),placeholder:"Enter your business display name"}),a.jsx(Uh,{label:"Business Type",value:y.type,onChange:M=>k({type:M}),options:["Retail Store","Restaurant","Caf","Salon/Spa","Service Business","Other"]}),a.jsx(Zs,{label:"Website",value:y.website,onChange:M=>k({website:M}),placeholder:"https://yourwebsite.com"})]}),a.jsx(Zs,{label:"Description",value:y.description,onChange:M=>k({description:M}),multiline:!0,placeholder:"Brief description of your business..."})]}),a.jsxs(Ml,{id:"contact",ref:_.contact,title:"Contact Information",children:[a.jsx(Zs,{label:"Address",value:y.address,onChange:M=>k({address:M}),placeholder:"Enter your complete business address",required:!0}),a.jsxs(zh,{two:!0,children:[a.jsx(Zs,{label:"Phone Number",value:y.phone,onChange:M=>k({phone:M}),placeholder:"+1 (555) 123-4567"}),a.jsx(Zs,{label:"VAT/Tax Number",value:y.vat,onChange:M=>k({vat:M}),placeholder:"Enter tax ID"})]})]}),a.jsxs(Ml,{id:"biz",ref:_.biz,title:"Business Settings",children:[a.jsxs(zh,{two:!0,children:[a.jsx(Uh,{label:"Currency",value:y.currency,onChange:M=>k({currency:M}),options:["USD ($)","EUR ()","GBP ()","CAD (C$)","AUD (A$)","JPY ()"]}),a.jsx(Uh,{label:"Timezone",value:y.timezone,onChange:M=>k({timezone:M}),options:["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Asia/Tokyo"]})]}),a.jsx(Zs,{label:"Business Hours",value:y.hours,onChange:M=>k({hours:M}),placeholder:"Mon-Fri 9AM-6PM, Sat 10AM-4PM"})]}),a.jsx(Ml,{id:"receipt",ref:_.receipt,title:"Receipt Footer",children:a.jsx(Zs,{label:"Footer Text",value:y.receiptFooter,onChange:M=>k({receiptFooter:M}),multiline:!0,placeholder:"Thank you for your business! Visit us again soon."})}),a.jsx("div",{className:Nt.spacer})]})]})]}),a.jsx("div",{className:Nt.footer,children:a.jsxs("div",{className:Nt.footerContent,children:[a.jsx("button",{onClick:ne,className:Nt.cancelButton,children:"Cancel"}),a.jsx("button",{onClick:K,disabled:o,className:Nt.saveButton,children:o?"Saving...":"Save Changes"})]})})]})]}):null},yE=()=>{const{user:e,logout:t,switchUser:r}=bn(),{userRole:s}=uu(),[o,c]=T.useState(!1),[d,f]=T.useState(!1),[p,h]=T.useState(!1),x=T.useRef(null);console.log("UserMenu - Current user:",e?.username,"Role:",e?.role,"UserRole from context:",s),console.log("UserMenu - User object:",e),T.useEffect(()=>{console.log("UserMenu - User changed to:",e?.username,"Role:",e?.role)},[e]),T.useEffect(()=>{const S=A=>{x.current&&!x.current.contains(A.target)&&c(!1)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]),T.useEffect(()=>{const S=A=>{A.key==="Escape"&&c(!1)};return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[]);const v=S=>{switch(S.toLowerCase()){case"admin":return"#dc2626";case"owner":return"#7c3aed";case"manager":return"#ea580c";case"cashier":return"#2563eb";default:return"#6b7280"}},y=async()=>{await t(),c(!1)},b=()=>{c(!1),f(!0)},w=async(S,A,k)=>{try{if(console.log("Attempting to switch to user:",S.username,"using",k?"PIN":"password"),await r(S.user_id,A,k))console.log("User switch successful, closing modal"),f(!1),setTimeout(()=>{console.log("User switch completed - Current user should now be:",S.username)},100);else throw new Error(k?"Invalid PIN":"Invalid password")}catch(O){throw console.error("Error switching user:",O),O}},_=()=>{h(!0),c(!1)};return a.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3},ref:x,children:[a.jsxs("button",{onClick:()=>c(!o),style:{display:"flex",alignItems:"center",gap:"8px",background:"#f3f4f6",border:"none",borderRadius:"25px",padding:"8px 12px",cursor:"pointer",transition:"all 0.2s ease",color:"#111827"},onMouseEnter:S=>{S.currentTarget.style.background="#e5e7eb"},onMouseLeave:S=>{S.currentTarget.style.background="#f3f4f6"},children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"none"},children:e?.icon?a.jsx("img",{src:`/retailpos/images/icons/${e.icon}.png`,alt:e.icon,style:{width:"28px",height:"28px",objectFit:"cover",borderRadius:"50%"}}):a.jsx("i",{className:"fa-solid fa-user",style:{fontSize:"16px",color:"#9ca3af"}})}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e?.username||"Unknown User",children:e?.username||"Unknown User"}),a.jsx("i",{className:`fa-solid fa-chevron-${o?"up":"down"}`,style:{fontSize:"12px",color:"#4b5563"}})]}),o&&a.jsxs("div",{style:{position:"absolute",right:"0",top:"100%",marginTop:"8px",minWidth:"200px",maxWidth:"300px",background:"#ffffff",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",padding:"8px 0",zIndex:1001},children:[a.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e5e7eb",marginBottom:"8px"},children:[a.jsx("div",{style:{color:"#111827",fontSize:"14px",fontWeight:"500",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},title:e?.username||"Unknown User",children:e?.username||"Unknown User"}),a.jsx("div",{style:{color:v(s),fontSize:"12px",textTransform:"capitalize",fontWeight:"500"},children:s})]}),a.jsxs("button",{onClick:b,style:{width:"100%",textAlign:"left",padding:"12px 16px",background:"transparent",border:"none",color:"#111827",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background="#f9fafb"},onMouseLeave:S=>{S.currentTarget.style.background="transparent"},children:[a.jsx("i",{className:"fa-solid fa-user-group",style:{fontSize:"16px",color:"#4b5563"}}),a.jsx("span",{children:"Switch User"})]}),a.jsxs("button",{onClick:_,style:{width:"100%",textAlign:"left",padding:"12px 16px",background:"transparent",border:"none",color:"#111827",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background="#f9fafb"},onMouseLeave:S=>{S.currentTarget.style.background="transparent"},children:[a.jsx("i",{className:"fa-solid fa-gear",style:{fontSize:"16px",color:"#4b5563"}}),a.jsx("span",{children:"Settings"})]}),a.jsx("div",{style:{borderTop:"1px solid #e5e7eb",margin:"8px 0"}}),a.jsxs("button",{onClick:y,style:{width:"100%",textAlign:"left",padding:"12px 16px",background:"transparent",border:"none",color:"#dc2626",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s ease"},onMouseEnter:S=>{S.currentTarget.style.background="#fef2f2"},onMouseLeave:S=>{S.currentTarget.style.background="transparent"},children:[a.jsx("i",{className:"fa-solid fa-sign-out-alt",style:{fontSize:"16px",color:"#dc2626"}}),a.jsx("span",{children:"Logout"})]})]}),a.jsx(Tj,{isOpen:d,onClose:()=>f(!1),onUserSwitch:w}),a.jsx(mE,{isOpen:p,onClose:()=>h(!1)})]})},vE="_container_eqwes_2",bE="_nav_eqwes_21",_E="_navContent_eqwes_27",SE="_navFlex_eqwes_33",wE="_logoContainer_eqwes_40",TE="_logoText_eqwes_45",jE="_navLinks_eqwes_51",EE="_navLink_eqwes_51",kE="_navButton_eqwes_69",CE="_heroSection_eqwes_86",AE="_heroContent_eqwes_91",RE="_heroTitle_eqwes_98",NE="_heroTitleHighlight_eqwes_106",DE="_heroSubtitle_eqwes_111",OE="_heroButtons_eqwes_120",IE="_primaryButton_eqwes_128",BE="_secondaryButton_eqwes_147",ME="_featuresSection_eqwes_167",FE="_featuresContent_eqwes_172",LE="_featuresHeader_eqwes_178",PE="_featuresTitle_eqwes_183",zE="_featuresSubtitle_eqwes_190",UE="_featuresGrid_eqwes_197",WE="_featureCard_eqwes_203",qE="_featureIcon_eqwes_214",$E="_featureTitle_eqwes_220",HE="_featureDescription_eqwes_227",GE="_benefitsSection_eqwes_232",VE="_benefitsContent_eqwes_237",YE="_benefitsGrid_eqwes_243",KE="_benefitsTitle_eqwes_250",XE="_benefitItem_eqwes_257",QE="_benefitIcon_eqwes_263",JE="_benefitContent_eqwes_280",ZE="_ctaCard_eqwes_291",ek="_ctaIcon_eqwes_299",tk="_ctaTitle_eqwes_305",rk="_ctaDescription_eqwes_312",nk="_ctaButton_eqwes_317",sk="_ctaSection_eqwes_334",ak="_ctaContent_eqwes_340",ik="_ctaSectionTitle_eqwes_346",ok="_ctaSectionDescription_eqwes_353",lk="_ctaSectionButtons_eqwes_360",ck="_ctaSectionPrimaryButton_eqwes_368",dk="_ctaSectionSecondaryButton_eqwes_387",uk="_footer_eqwes_407",fk="_footerContent_eqwes_413",hk="_footerGrid_eqwes_419",pk="_footerBrand_eqwes_426",gk="_footerBrandTitle_eqwes_430",xk="_footerBrandDescription_eqwes_436",mk="_footerSection_eqwes_442",yk="_footerLinks_eqwes_448",vk="_footerLink_eqwes_448",bk="_footerDivider_eqwes_469",at={container:vE,nav:bE,navContent:_E,navFlex:SE,logoContainer:wE,logoText:TE,navLinks:jE,navLink:EE,navButton:kE,heroSection:CE,heroContent:AE,heroTitle:RE,heroTitleHighlight:NE,heroSubtitle:DE,heroButtons:OE,primaryButton:IE,secondaryButton:BE,featuresSection:ME,featuresContent:FE,featuresHeader:LE,featuresTitle:PE,featuresSubtitle:zE,featuresGrid:UE,featureCard:WE,featureIcon:qE,featureTitle:$E,featureDescription:HE,benefitsSection:GE,benefitsContent:VE,benefitsGrid:YE,benefitsTitle:KE,benefitItem:XE,benefitIcon:QE,benefitContent:JE,ctaCard:ZE,ctaIcon:ek,ctaTitle:tk,ctaDescription:rk,ctaButton:nk,ctaSection:sk,ctaContent:ak,ctaSectionTitle:ik,ctaSectionDescription:ok,ctaSectionButtons:lk,ctaSectionPrimaryButton:ck,ctaSectionSecondaryButton:dk,footer:uk,footerContent:fk,footerGrid:hk,footerBrand:pk,footerBrandTitle:gk,footerBrandDescription:xk,footerSection:mk,footerLinks:yk,footerLink:vk,footerDivider:bk},D1=()=>{T.useEffect(()=>{document.body.style.overflow="auto",document.documentElement.style.overflow="auto";const t=document.getElementById("root");return t&&(t.style.overflow="auto",t.style.height="auto"),()=>{document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",t&&(t.style.overflow="hidden",t.style.height="100%")}},[]);const e=[{icon:"fas fa-barcode",title:"Barcode Scanning",description:"Fast and accurate product scanning with built-in barcode reader support for instant product lookup and checkout."},{icon:"fas fa-building",title:"Multi-Tenant Architecture",description:"Manage multiple businesses from one system with complete data isolation and role-based access controls."},{icon:"fas fa-credit-card",title:"Partial Payments",description:"Accept split payments, layaway plans, and partial transactions with flexible payment processing options."},{icon:"fas fa-weight",title:"Weighted Products",description:"Handle bulk items, produce, and weighted goods with precise weight-based pricing and inventory tracking."},{icon:"fas fa-volume-up",title:"Text-to-Speech",description:"AI-powered voice announcements with OpenAI TTS integration for order confirmation and accessibility."},{icon:"fas fa-chart-bar",title:"Advanced Analytics",description:"Comprehensive dashboard with sales insights, inventory tracking, and business performance metrics."}];return a.jsxs("div",{className:at.container,children:[a.jsx("nav",{className:at.nav,children:a.jsx("div",{className:at.navContent,children:a.jsxs("div",{className:at.navFlex,children:[a.jsx("div",{className:at.logoContainer,children:a.jsx("h1",{className:at.logoText,children:"TillPoint"})}),a.jsxs("div",{className:at.navLinks,children:[a.jsx("a",{href:"#features",className:at.navLink,children:"Features"}),a.jsx("a",{href:"#pricing",className:at.navLink,children:"Pricing"}),a.jsx("a",{href:"#contact",className:at.navLink,children:"Contact"}),a.jsx(Ma,{to:"/login",className:at.navLink,children:"Sign In"}),a.jsx(Ma,{to:"/login",className:at.navButton,children:"Sign In"})]})]})})}),a.jsx("section",{className:at.heroSection,children:a.jsxs("div",{className:at.heroContent,children:[a.jsxs("h1",{className:at.heroTitle,children:["Modern Point of Sale",a.jsx("span",{className:at.heroTitleHighlight,children:"Built for Today's Business"})]}),a.jsx("p",{className:at.heroSubtitle,children:"TillPoint combines powerful features with intuitive design to streamline your retail operations. From barcode scanning to advanced analytics, everything you need in one system."}),a.jsxs("div",{className:at.heroButtons,children:[a.jsx(Ma,{to:"/login",className:at.primaryButton,children:"Sign In"}),a.jsx("button",{className:at.secondaryButton,children:"Watch Demo"})]})]})}),a.jsx("section",{id:"features",className:at.featuresSection,children:a.jsxs("div",{className:at.featuresContent,children:[a.jsxs("div",{className:at.featuresHeader,children:[a.jsx("h2",{className:at.featuresTitle,children:"Everything You Need to Run Your Business"}),a.jsx("p",{className:at.featuresSubtitle,children:"Powerful features designed to make your retail operations smooth, efficient, and profitable."})]}),a.jsx("div",{className:at.featuresGrid,children:e.map((t,r)=>a.jsxs("div",{className:at.featureCard,children:[a.jsx("div",{className:at.featureIcon,children:a.jsx("i",{className:t.icon})}),a.jsx("h3",{className:at.featureTitle,children:t.title}),a.jsx("p",{className:at.featureDescription,children:t.description})]},r))})]})}),a.jsx("section",{className:at.benefitsSection,children:a.jsx("div",{className:at.benefitsContent,children:a.jsxs("div",{className:at.benefitsGrid,children:[a.jsxs("div",{children:[a.jsx("h2",{className:at.benefitsTitle,children:"Why Choose TillPoint?"}),a.jsxs("div",{className:at.benefitItem,children:[a.jsx("div",{className:at.benefitIcon,children:a.jsx("i",{className:"fas fa-check"})}),a.jsxs("div",{className:at.benefitContent,children:[a.jsx("h3",{children:"Easy Setup"}),a.jsx("p",{children:"Get up and running in minutes with our intuitive setup process."})]})]}),a.jsxs("div",{className:at.benefitItem,children:[a.jsx("div",{className:at.benefitIcon,children:a.jsx("i",{className:"fas fa-check"})}),a.jsxs("div",{className:at.benefitContent,children:[a.jsx("h3",{children:"24/7 Support"}),a.jsx("p",{children:"Our dedicated support team is always here to help you succeed."})]})]}),a.jsxs("div",{className:at.benefitItem,children:[a.jsx("div",{className:at.benefitIcon,children:a.jsx("i",{className:"fas fa-check"})}),a.jsxs("div",{className:at.benefitContent,children:[a.jsx("h3",{children:"Secure & Reliable"}),a.jsx("p",{children:"Enterprise-grade security with 99.9% uptime guarantee."})]})]})]}),a.jsxs("div",{className:at.ctaCard,children:[a.jsx("div",{className:at.ctaIcon,children:a.jsx("i",{className:"fas fa-cash-register"})}),a.jsx("h3",{className:at.ctaTitle,children:"Ready to Get Started?"}),a.jsx("p",{className:at.ctaDescription,children:"Join thousands of businesses already using TillPoint to streamline their operations."}),a.jsx(Ma,{to:"/login",className:at.ctaButton,children:"Start Your Free Trial"})]})]})})}),a.jsx("section",{className:at.ctaSection,children:a.jsxs("div",{className:at.ctaContent,children:[a.jsx("h2",{className:at.ctaSectionTitle,children:"Transform Your Business Today"}),a.jsx("p",{className:at.ctaSectionDescription,children:"Experience the power of modern point-of-sale technology. No setup fees, no long-term contracts."}),a.jsxs("div",{className:at.ctaSectionButtons,children:[a.jsx(Ma,{to:"/login",className:at.ctaSectionPrimaryButton,children:"Sign In"}),a.jsx("button",{className:at.ctaSectionSecondaryButton,children:"Schedule Demo"})]})]})}),a.jsx("footer",{className:at.footer,children:a.jsxs("div",{className:at.footerContent,children:[a.jsxs("div",{className:at.footerGrid,children:[a.jsxs("div",{className:at.footerBrand,children:[a.jsx("h3",{className:at.footerBrandTitle,children:"TillPoint"}),a.jsx("p",{className:at.footerBrandDescription,children:"The modern point-of-sale system designed for today's businesses. Powerful, intuitive, and built to grow with you."})]}),a.jsxs("div",{className:at.footerSection,children:[a.jsx("h4",{children:"Product"}),a.jsxs("ul",{className:at.footerLinks,children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:at.footerLink,children:"Features"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:at.footerLink,children:"Pricing"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:at.footerLink,children:"Integrations"})})]})]}),a.jsxs("div",{className:at.footerSection,children:[a.jsx("h4",{children:"Support"}),a.jsxs("ul",{className:at.footerLinks,children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:at.footerLink,children:"Help Center"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:at.footerLink,children:"Contact Us"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:at.footerLink,children:"Documentation"})})]})]})]}),a.jsx("div",{className:at.footerDivider,children:a.jsx("p",{children:" 2024 TillPoint. All rights reserved."})})]})})]})},_k=()=>{const[e]=Ly(),t=Ls(),[r,s]=T.useState("verifying"),[o,c]=T.useState(""),[d,f]=T.useState(!1),p=e.get("token");T.useEffect(()=>{p?h(p):(s("error"),c("Invalid verification link"))},[p]);const h=async y=>{try{s("verifying"),c("Verifying your email address...");const{data:b,error:w}=await Oe.from("email_verification_tokens").select("*").eq("token",y).eq("used",!1).single();if(w||!b){s("error"),c("Invalid or expired verification token");return}const _=new Date,S=new Date(b.expires_at);if(_>S){s("expired"),c("Verification token has expired. Please request a new one.");return}const{error:A}=await Oe.from("users").update({email_verified:!0,active:!0,email_verification_token:null,verification_token_expires:null,updated_at:new Date().toISOString()}).eq("user_id",b.user_id);if(A){console.error("Error updating user:",A),s("error"),c("Failed to verify email. Please try again.");return}await Oe.from("email_verification_tokens").update({used:!0}).eq("id",b.id),s("success"),c("Email verified successfully! You can now log in to your account."),setTimeout(()=>{t("/login")},3e3)}catch(b){console.error("Verification error:",b),s("error"),c("An error occurred during verification. Please try again.")}},x=async()=>{if(p){f(!0);try{const{data:y,error:b}=await Oe.from("email_verification_tokens").select("user_id, users(email, business_id, business_info(name))").eq("token",p).single();if(b||!y){c("Unable to resend verification email");return}const w=Math.random().toString(36).substring(2)+Date.now().toString(36),_=new Date(Date.now()+1440*60*1e3);await Oe.from("users").update({email_verification_token:w,verification_token_expires:_.toISOString()}).eq("user_id",y.user_id),await Oe.from("email_verification_tokens").insert({user_id:y.user_id,token:w,expires_at:_.toISOString()}),await Oe.from("email_verification_tokens").update({used:!0}).eq("token",p),c("A new verification email has been sent to your email address.")}catch(y){console.error("Error resending verification:",y),c("Failed to resend verification email. Please try again.")}finally{f(!1)}}},v=()=>{switch(r){case"verifying":return"";case"success":return"";case"error":return"";case"expired":return"";default:return""}};return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[a.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"500px",width:"100%",textAlign:"center",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[a.jsx("div",{style:{fontSize:"64px",marginBottom:"20px"},children:v()}),a.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1a1a1a",marginBottom:"16px"},children:"Email Verification"}),a.jsx("p",{style:{fontSize:"16px",color:"#6b7280",marginBottom:"30px",lineHeight:"1.5"},children:o}),r==="verifying"&&a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"20px"},children:[a.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e5e7eb",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),a.jsx("span",{style:{color:"#6b7280"},children:"Verifying..."})]}),r==="success"&&a.jsx("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:a.jsx("p",{style:{color:"#166534",fontSize:"14px",margin:"0"},children:"You will be redirected to the login page in a few seconds..."})}),(r==="error"||r==="expired")&&a.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[a.jsx("p",{style:{color:"#dc2626",fontSize:"14px",margin:"0 0 10px 0"},children:r==="expired"?"Your verification link has expired.":"There was an error verifying your email."}),a.jsx("button",{onClick:x,disabled:d,style:{background:d?"#9ca3af":"#3b82f6",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",cursor:d?"not-allowed":"pointer"},children:d?"Sending...":"Resend Verification Email"})]}),a.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>t("/login"),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Back to Login"}),r==="success"&&a.jsx("button",{onClick:()=>t("/login"),style:{background:"#10b981",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Continue to Login"})]})]}),a.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},An=(e,t={},r)=>{const s=typeof e=="number"&&isFinite(e)?e:0,o=h=>h&&{USD:"USD",EUR:"EUR",GBP:"GBP",CAD:"CAD",AUD:"AUD",JPY:"JPY"}[h]||"EUR",{locale:c="en-IE",currency:d=o(r),minimumFractionDigits:f=2,maximumFractionDigits:p=2}=t;try{return new Intl.NumberFormat(c,{style:"currency",currency:d,minimumFractionDigits:f,maximumFractionDigits:p}).format(s)}catch{return`${d} ${s.toFixed(2)}`}},Sk=(e,t={},r)=>{const s=typeof e=="number"&&isFinite(e)?e:0,o=f=>f&&{USD:"USD",EUR:"EUR",GBP:"GBP",CAD:"CAD",AUD:"AUD",JPY:"JPY"}[f]||"EUR",{locale:c="en-IE",currency:d=o(r)}=t;try{return new Intl.NumberFormat(c,{style:"currency",currency:d,notation:"compact",maximumFractionDigits:1}).format(s)}catch{const f=Math.abs(s);return f>=1e6?`${An(s/1e6,{...t,maximumFractionDigits:1},r)}M`:f>=1e3?`${An(s/1e3,{...t,maximumFractionDigits:1},r)}K`:An(s,t,r)}},fu=()=>{const{user:e}=bn();return{businessId:e?.business_id,businessLoading:!1,businessError:null,hasBusinessSelected:e?.business_id!=null}},wk=async e=>{console.log("[fetchSalesData] fetching sales data for business:",e);const[t,r]=await Promise.all([Oe.from("sales").select(`
        *,
        customers (name),
        shop_staff!sales_cashier_id_fkey (username),
        sale_items (
          *,
          products (
            name,
            price,
            is_weighted,
            price_per_unit,
            weight_unit
          )
        )
      `).eq("business_id",e).order("datetime",{ascending:!1}),Oe.from("side_business_sales").select(`
        *,
        side_business_items (
          name,
          price
        )
      `).eq("parent_shop_id",e).order("date_time",{ascending:!1})]);if(t.error)throw t.error;if(r.error)throw r.error;return{sales:t.data?.map(o=>{const c=o.notes&&(o.notes.includes("PARTIAL PAYMENT")||o.notes.includes("Amount Paid Today")||o.notes.includes("Remaining Balance"));let d=0,f=0,p="";if(c&&o.notes){const h=o.notes.match(/Amount Paid Today: (\d+\.?\d*)/),x=o.notes.match(/Remaining Balance: (\d+\.?\d*)/);d=h?parseFloat(h[1]):0,f=x?parseFloat(x[1]):0,p=o.notes}return{...o,customer_name:o.customers?.name||"Walk-in Customer",cashier_name:o.shop_staff?.username||"Unknown",is_partial_payment:c,partial_amount:d,remaining_amount:f,partial_notes:p,items:o.sale_items||[]}})||[],sideBusinessSales:r.data||[]}},hu=()=>{const{user:e}=bn();return Xy({queryKey:["salesData",e?.business_id],queryFn:()=>wk(e?.business_id),enabled:!!e?.business_id,staleTime:120*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1})},Tk=async e=>{console.log("[fetchProductsData] fetching products data for business:",e);const[t,r]=await Promise.all([Oe.from("products").select("*").eq("business_id",e).order("name"),Oe.from("side_business_items").select("*").eq("parent_shop_id",e).order("name")]);if(t.error)throw t.error;if(r.error)throw r.error;const s=[...new Set(t.data?.map(o=>o.category).filter(Boolean))];return{products:t.data||[],sideBusinessItems:r.data||[],categories:s}},bv=()=>{const{user:e}=bn();return Xy({queryKey:["productsData",e?.business_id],queryFn:()=>Tk(e?.business_id),enabled:!!e?.business_id,staleTime:300*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1})},jk=()=>{const{data:e,isLoading:t,error:r}=bv(),s=T.useMemo(()=>e?.products?e.products.filter(d=>d.stock_quantity<=d.reorder_level).map(d=>({product_id:d.product_id,name:d.name,stock_quantity:d.stock_quantity,reorder_level:d.reorder_level,category:d.category,supplier_info:d.supplier_info,is_low_stock:!0})).sort((d,f)=>d.stock_quantity-f.stock_quantity):[],[e]),o=async(d,f)=>(console.log("Restock product:",d,"quantity:",f),!0),c=async d=>(console.log("Quick restock product:",d),!0);return{lowStockProducts:s,lowStockItems:s,loading:t,error:r?.message||null,restockProduct:o,quickRestock:c}},Ek=({product:e,onRestock:t,onQuickRestock:r})=>{const[s,o]=T.useState(!1),[c,d]=T.useState(""),[f,p]=T.useState(!1),h=async()=>{p(!0);const b=await r(e.product_id);p(!1),b&&o(!1)},x=async()=>{const b=parseInt(c);if(isNaN(b)||b<=0)return;p(!0);const w=await t(e.product_id,b);p(!1),w&&(o(!1),d(""))},v=()=>e.stock_quantity<=2?"#ef4444":e.stock_quantity<=5?"#f59e0b":"#eab308",y=()=>e.stock_quantity<=2?"Critical":e.stock_quantity<=5?"Low":"Below Reorder";return a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 4px 16px rgba(62, 63, 41, 0.15)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.1)"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",background:v(),color:"white",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:y()}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[a.jsxs("div",{style:{width:"60px",height:"60px",borderRadius:"8px",background:"#f9fafb",border:"1px solid rgba(125, 141, 134, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:[e.image_url?a.jsx("img",{src:e.image_url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:b=>{b.currentTarget.style.setProperty("display","none")(b.currentTarget.nextElementSibling).style.setProperty("display","flex")}}):null,a.jsx("div",{style:{display:e.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:"#7d8d86",fontSize:"20px"},children:a.jsx("i",{className:"fa-solid fa-box"})})]}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0",lineHeight:"1.3"},children:e.name}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"0 0 8px 0"},children:e.category}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[a.jsxs("span",{style:{fontSize:"12px",color:"#3e3f29",fontWeight:"500"},children:["Stock: ",e.stock_quantity]}),a.jsx("span",{style:{fontSize:"12px",color:"#7d8d86"},children:""}),a.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86"},children:["Reorder at: ",e.reorder_level]})]}),s?a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"number",value:c,onChange:b=>d(b.target.value),placeholder:"Qty",min:"1",style:{width:"60px",padding:"6px 8px",border:"1px solid #7d8d86",borderRadius:"6px",fontSize:"12px",outline:"none"}}),a.jsx("button",{onClick:x,disabled:f||!c,style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f||!c?"not-allowed":"pointer",opacity:f||!c?.7:1,transition:"all 0.2s ease"},onMouseEnter:b=>{!f&&c&&(b.currentTarget.style.background="#bca88d")},onMouseLeave:b=>{!f&&c&&(b.currentTarget.style.background="#7d8d86")},children:f?a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):"Restock"}),a.jsx("button",{onClick:()=>{o(!1),d("")},disabled:f,style:{background:"transparent",color:"#7d8d86",border:"none",fontSize:"12px",cursor:f?"not-allowed":"pointer",opacity:f?.7:1},children:"Cancel"})]}):a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[a.jsxs("button",{onClick:h,disabled:f,style:{background:"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f?"not-allowed":"pointer",opacity:f?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:b=>{f||(b.currentTarget.style.background="#059669")},onMouseLeave:b=>{f||(b.currentTarget.style.background="#10b981")},children:[f?a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):a.jsx("i",{className:"fa-solid fa-bolt"}),"Quick Restock"]}),a.jsx("button",{onClick:()=>o(!0),disabled:f,style:{background:"transparent",color:"#7d8d86",border:"1px solid #7d8d86",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f?"not-allowed":"pointer",opacity:f?.7:1,transition:"all 0.2s ease"},onMouseEnter:b=>{f||(b.currentTarget.style.background="#7d8d86",b.currentTarget.style.color="white")},onMouseLeave:b=>{f||(b.currentTarget.style.background="transparent",b.currentTarget.style.color="#7d8d86")},children:"Custom"})]})]})]})]})},kk=()=>{const{lowStockItems:e,loading:t,error:r,restockProduct:s,quickRestock:o}=jk(),[c,d]=T.useState(0),f=e[c]||null,p=c<e.length-1,h=c>0,x=()=>{p&&d(c+1)},v=()=>{h&&d(c-1)};return t?a.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading low stock items..."]})}):r?a.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px"},children:r})]})}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:e.length>0?"#fbbf24":"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"18px",color:e.length>0?"#d97706":"#059669"}})}),a.jsxs("div",{children:[a.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Low Stock Items"}),a.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[e.length," item",e.length!==1?"s":""," need",e.length===1?"s":""," restocking"]})]})]}),e.length>1&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("button",{onClick:v,disabled:!h,style:{background:h?"#7d8d86":"#e5e7eb",color:h?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:h?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:y=>{h&&(y.currentTarget.style.background="#bca88d")},onMouseLeave:y=>{h&&(y.currentTarget.style.background="#7d8d86")},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86",fontWeight:"500",minWidth:"40px",textAlign:"center"},children:[c+1," / ",e.length]}),a.jsx("button",{onClick:x,disabled:!p,style:{background:p?"#7d8d86":"#e5e7eb",color:p?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:p?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:y=>{p&&(y.currentTarget.style.background="#bca88d")},onMouseLeave:y=>{p&&(y.currentTarget.style.background="#7d8d86")},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]}),e.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-check-circle",style:{fontSize:"48px",marginBottom:"16px",color:"#10b981"}}),a.jsx("p",{style:{fontSize:"16px",margin:0,fontWeight:"500"},children:"All items are well stocked!"}),a.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0",opacity:.8},children:"No items need restocking at the moment."})]}):f?a.jsx(Ek,{product:f,onRestock:s,onQuickRestock:o},f.product_id):null]})},Ck=(e,t)=>{const r=t||new Date;switch(e){case"today":{const s=r.toISOString().split("T")[0];return{start:`${s}T00:00:00`,end:`${s}T23:59:59`}}case"week":{const s=new Date(r);s.setDate(r.getDate()-r.getDay()),s.setHours(0,0,0,0);const o=new Date(s);return o.setDate(s.getDate()+6),o.setHours(23,59,59,999),{start:s.toISOString(),end:o.toISOString()}}case"month":{const s=new Date(r.getFullYear(),r.getMonth(),1),o=new Date(r.getFullYear(),r.getMonth()+1,0,23,59,59,999);return{start:s.toISOString(),end:o.toISOString()}}default:return{start:"",end:""}}},Wh=(e,t,r)=>{const{start:s,end:o}=Ck(t,r),c=e.filter(f=>{const p=new Date(f.datetime).toISOString();return p>=s&&p<=o}),d=new Map;return c.forEach(f=>{f.sale_items?.forEach(p=>{const h=p.product_id,x=d.get(h)||{quantity:0,total:0,name:p.products?.name||"Unknown",image_url:p.products?.image_url};d.set(h,{quantity:x.quantity+(p.quantity||0),total:x.total+(parseFloat(p.calculated_price)||0),name:x.name,image_url:x.image_url})})}),Array.from(d.entries()).map(([f,p])=>({product_id:f,product_name:p.name,quantity_sold:p.quantity,total_sales:p.total,image_url:p.image_url})).sort((f,p)=>p.total_sales-f.total_sales)},Ak=e=>{const{data:t,isLoading:r,error:s}=hu(),o=T.useMemo(()=>t?.sales?Wh(t.sales,"today",e):[],[t,e]),c=T.useMemo(()=>t?.sales?Wh(t.sales,"week",e):[],[t,e]),d=T.useMemo(()=>t?.sales?Wh(t.sales,"month",e):[],[t,e]);return{todayProducts:o,weekProducts:c,monthProducts:d,loading:r,error:s?.message||null}},Rk=({activePeriod:e,selectedDate:t})=>{const{todayProducts:r,weekProducts:s,monthProducts:o,loading:c,error:d}=Ak(t),[f,p]=T.useState(e??"today");T.useEffect(()=>{e&&p(e)},[e]);const h=b=>{switch(b){case"today":return r;case"week":return s;case"month":return o}},x=b=>{switch(b){case"today":if(t){const w=new Date;return t.toDateString()===w.toDateString()?"Today":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}return"Today";case"week":return"This Week";case"month":return"This Month"}},v=["today","week","month"],y=h(f);return c?a.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db"},children:[a.jsx("style",{children:"@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}} .skeleton{background-image:linear-gradient(90deg,#e5e7eb 0px,#f3f4f6 40px,#e5e7eb 80px);background-size:600px 100%;animation:shimmer 1.2s infinite linear;border-radius:8px}"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[a.jsx("div",{className:"skeleton",style:{width:"40px",height:"40px"}}),a.jsx("div",{className:"skeleton",style:{width:"160px",height:"18px"}})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[a.jsx("div",{className:"skeleton",style:{width:"80px",height:"28px"}}),a.jsx("div",{className:"skeleton",style:{width:"100px",height:"28px"}}),a.jsx("div",{className:"skeleton",style:{width:"100px",height:"28px"}})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Array.from({length:5}).map((b,w)=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",border:"1px solid rgba(125,141,134,0.1)",borderRadius:"8px"},children:[a.jsx("div",{className:"skeleton",style:{width:"32px",height:"32px"}}),a.jsx("div",{className:"skeleton",style:{width:"40px",height:"40px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{className:"skeleton",style:{width:"160px",height:"12px",marginBottom:"6px"}}),a.jsx("div",{className:"skeleton",style:{width:"100px",height:"10px"}})]}),a.jsx("div",{className:"skeleton",style:{width:"70px",height:"14px"}})]},w))})]}):d?a.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px"},children:d})]})}):a.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#bca88d",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"18px",color:"#3e3f29"}})}),a.jsx("h3",{style:{fontSize:"20px",fontWeight:600,color:"#3e3f29",margin:0},children:"Top Products"})]}),a.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:v.map(b=>a.jsxs("button",{onClick:()=>p(b),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:f===b?"#7d8d86":"#ffffff",color:f===b?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:[a.jsx("i",{className:`fa-solid ${b==="today"?"fa-calendar-day":b==="week"?"fa-calendar-week":"fa-calendar"}`,style:{fontSize:"12px",marginRight:6}}),x(b)]},b))}),y.length===0?a.jsxs("div",{style:{textAlign:"center",color:"#7d8d86",padding:"16px"},children:["No products for ",x(f)]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:y.slice(0,3).map((b,w)=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"white",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.1)"},children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:w===0?"#fbbf24":w===1?"#e5e7eb":w===2?"#f59e0b":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:w===1?"#6b7280":"#3e3f29",fontSize:"12px",fontWeight:700},children:w===0?a.jsx("i",{className:"fa-solid fa-crown",style:{fontSize:14}}):w+1}),a.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"#f9fafb",border:"1px solid #e5e7eb",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:b.image_url?a.jsx("img",{src:b.image_url,alt:b.product_name,style:{width:"100%",height:"100%",objectFit:"cover"}}):a.jsx("i",{className:"fa-solid fa-box",style:{color:"#7d8d86"}})}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("p",{style:{fontSize:14,fontWeight:600,color:"#3e3f29",margin:"0 0 2px 0"},children:b.product_name}),a.jsxs("p",{style:{fontSize:12,color:"#7d8d86",margin:0},children:[b.quantity_sold," sold"]})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("p",{style:{fontSize:14,fontWeight:600,color:"#10b981",margin:0},children:An(b.total_sales)}),w===0&&a.jsx("p",{style:{fontSize:10,color:"#d97706",margin:"2px 0 0 0",fontWeight:500},children:"TOP SELLER"})]})]},b.product_id))})]})},yi=(e,t="UTC")=>{try{return new Date(e.toLocaleString("en-US",{timeZone:t}))}catch{return console.warn(`Invalid timezone: ${t}, falling back to UTC`),new Date(e.toLocaleString("en-US",{timeZone:"UTC"}))}},Nk=(e="9:00 AM - 6:00 PM")=>{try{const t=e.match(/(\d{1,2}):(\d{2})\s*(AM|PM)\s*-\s*(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(t){const[,r,s,o,c,d,f]=t,p=(v,y,b)=>{let w=parseInt(v);const _=parseInt(y);return b.toUpperCase()==="PM"&&w!==12&&(w+=12),b.toUpperCase()==="AM"&&w===12&&(w=0),w*60+_},h=p(r,s,o),x=p(c,d,f);return{startMinutes:h,endMinutes:x}}}catch{console.warn(`Could not parse business hours: ${e}`)}return{startMinutes:540,endMinutes:1080}},_v=(e,t="UTC")=>{const r=yi(new Date,t),s=new Date(r.getFullYear(),r.getMonth(),r.getDate());switch(e){case"today":return{start:s,end:new Date(s.getTime()+1440*60*1e3)};case"week":const o=new Date(s);return o.setDate(s.getDate()-s.getDay()),{start:o,end:new Date(o.getTime()+10080*60*1e3)};case"month":const c=new Date(s.getFullYear(),s.getMonth(),1),d=new Date(s.getFullYear(),s.getMonth()+1,1);return{start:c,end:d};default:return{start:s,end:s}}},Dk=(e,t,r="UTC")=>{const{start:s,end:o}=_v("week",r),c={};for(let d=0;d<7;d++){const p=new Date(s.getTime()+d*24*60*60*1e3).toISOString().split("T")[0];c[p]={totalSales:0,transactionCount:0}}return e.forEach(d=>{const p=yi(new Date(d.datetime),r).toISOString().split("T")[0];c[p]&&(c[p].totalSales+=parseFloat(d.total_amount)||0,c[p].transactionCount+=1)}),t.forEach(d=>{const p=yi(new Date(d.date_time),r).toISOString().split("T")[0];c[p]&&(c[p].totalSales+=parseFloat(d.total_amount)||0,c[p].transactionCount+=1)}),Object.entries(c).map(([d,f])=>({day:new Date(d).toLocaleDateString("en-US",{weekday:"short"}),date:d,totalSales:f.totalSales,transactionCount:f.transactionCount,averageTransaction:f.transactionCount>0?f.totalSales/f.transactionCount:0}))},Ok=(e,t,r="UTC",s="9:00 AM - 6:00 PM")=>{const o={},{startMinutes:c,endMinutes:d}=Nk(s);for(let f=0;f<24;f++)o[f]={totalSales:0,transactionCount:0};return e.forEach(f=>{const p=yi(new Date(f.datetime),r),h=p.getHours(),x=p.getMinutes(),v=h*60+x;v>=c&&v<=d&&(o[h].totalSales+=parseFloat(f.total_amount)||0,o[h].transactionCount+=1)}),t.forEach(f=>{const p=yi(new Date(f.date_time),r),h=p.getHours(),x=p.getMinutes(),v=h*60+x;v>=c&&v<=d&&(o[h].totalSales+=parseFloat(f.total_amount)||0,o[h].transactionCount+=1)}),Object.entries(o).map(([f,p])=>({hour:parseInt(f),hourLabel:`${f}:00`,totalSales:p.totalSales,transactionCount:p.transactionCount}))},Ik=(e,t,r="UTC")=>{const{start:s,end:o}=_v("month",r),c={},d=new Date(s);for(;d<o;){const f=d.toISOString().split("T")[0];c[f]={totalSales:0,transactionCount:0},d.setDate(d.getDate()+1)}return e.forEach(f=>{const h=yi(new Date(f.datetime),r).toISOString().split("T")[0];c[h]&&(c[h].totalSales+=parseFloat(f.total_amount)||0,c[h].transactionCount+=1)}),t.forEach(f=>{const h=yi(new Date(f.date_time),r).toISOString().split("T")[0];c[h]&&(c[h].totalSales+=parseFloat(f.total_amount)||0,c[h].transactionCount+=1)}),Object.entries(c).map(([f,p])=>({day:new Date(f).toLocaleDateString("en-US",{day:"numeric"}),date:f,totalSales:p.totalSales,transactionCount:p.transactionCount,averageTransaction:p.transactionCount>0?p.totalSales/p.transactionCount:0}))},Bk=()=>{const{data:e,isLoading:t,error:r}=hu(),{currentBusiness:s}=Bo(),o=s?.timezone||"UTC",c=s?.business_hours||"9:00 AM - 6:00 PM",d=T.useMemo(()=>e?Dk(e.sales,e.sideBusinessSales,o):[],[e,o]),f=T.useMemo(()=>e?Ok(e.sales,e.sideBusinessSales,o,c):[],[e,o,c]),p=T.useMemo(()=>e?Ik(e.sales,e.sideBusinessSales,o):[],[e,o]);return{weeklyData:d,hourlyData:f,monthlyData:p,loading:t,error:r?.message||null,businessTimezone:o,businessHours:c,refreshHourlyData:()=>{},refreshWeeklyData:()=>{},refreshMonthlyData:()=>{}}},Mk=({selectedDate:e,activePeriod:t})=>{const{weeklyData:r,hourlyData:s,monthlyData:o,loading:c,error:d,businessHours:f,refreshHourlyData:p,refreshWeeklyData:h,refreshMonthlyData:x}=Bk(),{currentBusiness:v}=Bo(),[y,b]=T.useState("weekly"),[w,_]=T.useState(new Date().toISOString().split("T")[0]),[S,A]=T.useState(0),[k,O]=T.useState(0),[L,K]=T.useState({visible:!1,x:0,y:0,data:null}),ne=async U=>{_(U),await p(U)};T.useEffect(()=>{if(!e)return;const E=(Je=>`${Je.getFullYear()}-${String(Je.getMonth()+1).padStart(2,"0")}-${String(Je.getDate()).padStart(2,"0")}`)(e);_(E);const P=Je=>{const je=new Date(Je);return je.setHours(0,0,0,0),je.setDate(je.getDate()-je.getDay()),je},W=P(e),V=new Date;V.setHours(0,0,0,0);const ue=P(V),Le=W.getTime()-ue.getTime(),Ce=Math.round(Le/(1e3*60*60*24)),Te=Math.round(Ce/7);A(Te);const Be=new Date,Ve=(e.getFullYear()-Be.getFullYear())*12+(e.getMonth()-Be.getMonth());O(Ve)},[e]),T.useEffect(()=>{t&&b(t==="today"?"hourly":t==="week"?"weekly":"monthly")},[t]);const M=async()=>{const U=S-1;A(U),await h(U)},re=async()=>{const U=S+1;A(U),await h(U)},ee=async()=>{A(0),await h(0)},de=()=>{const U=new Date,E=U.getDay(),P=new Date(U);P.setDate(U.getDate()-E+S*7);const W=new Date(P);W.setDate(P.getDate()+6);const V=ue=>ue.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${V(P)} - ${V(W)}`},oe=(U,E)=>{K({visible:!0,x:U.clientX,y:U.clientY,data:E})},Q=()=>{K({visible:!1,x:0,y:0,data:null})},te=U=>{const E=Math.max(...U.map(P=>P.totalSales));return E===0?1:Math.ceil(E*1.1)},ae=(U,E)=>U===0?0:Math.max(U/E*180,4),X=(U,E=!0)=>{if(E){const P=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316"];return P[U%P.length]}else{const P=Math.min(U/9,1),W=Math.floor(59+180*P),V=Math.floor(130+-62*P),ue=Math.floor(246+-178*P);return`rgb(${W}, ${V}, ${ue})`}};if(c)return a.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading sales data..."]})});if(d)return a.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:a.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px"},children:d})]})});const J=(U="9:00 AM - 6:00 PM")=>{try{const E=U.match(/(\d{1,2}):(\d{2})\s*(AM|PM)\s*-\s*(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(E){const[,P,W,V,ue,Le,Ce]=E,Te=(Je,je,q)=>{let be=parseInt(Je);const tt=parseInt(je);return q.toUpperCase()==="PM"&&be!==12&&(be+=12),q.toUpperCase()==="AM"&&be===12&&(be=0),be},Be=Te(P,W,V),Ve=Te(ue,Le,Ce);return{startHour:Be,endHour:Ve}}}catch{console.warn(`Could not parse business hours: ${U}`)}return{startHour:9,endHour:18}},fe=(()=>{if(y!=="hourly")return s;const{startHour:U,endHour:E}=J(f);return s.filter(P=>P.hour>=U&&P.hour<=E)})(),se=y==="weekly"?r:y==="monthly"?o:fe,Ne=se.length>0?te(se):100,D=y==="monthly"?Math.ceil(se.length/12):1;return se.length===0&&!c&&!d?a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"5px solid #000000 !important",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",margin:"0",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",textAlign:"center",minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(v?.logo_url,a.jsx("img",{src:v?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:v?.business_name||v?.name||"Business Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:U=>{const E=U.target;E.style.display="none";const P=E.parentElement;P&&(P.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),a.jsxs("div",{children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(v?.business_name||v?.name)&&a.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:v?.business_name||v?.name})]})]}),a.jsxs("div",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"16px"},children:[a.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"500"},children:"No sales data available"}),a.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.8},children:y==="weekly"?"No sales recorded for this week":"No sales recorded for this date"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-100%) scale(0.9); }
          to { opacity: 1; transform: translateY(-100%) scale(1); }
        }
      `}),a.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",maxWidth:"1000px",margin:"0 auto",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(v?.logo_url,a.jsx("img",{src:v?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:v?.business_name||v?.name||"Business Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:U=>{const E=U.target;E.style.display="none";const P=E.parentElement;P&&(P.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),a.jsxs("div",{children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(v?.business_name||v?.name)&&a.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:v?.business_name||v?.name})]})]}),a.jsxs("div",{style:{display:"flex",background:"#f9fafb",borderRadius:"8px",padding:"4px",gap:"4px",marginBottom:"24px",maxWidth:"300px",border:"2px solid #d1d5db"},children:[a.jsxs("button",{onClick:()=>b("weekly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="weekly"?"#7d8d86":"transparent",color:y==="weekly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:U=>{y!=="weekly"&&(U.currentTarget.style.background="#e5e7eb",U.currentTarget.style.color="#3e3f29")},onMouseLeave:U=>{y!=="weekly"&&(U.currentTarget.style.background="transparent",U.currentTarget.style.color="#7d8d86")},children:[a.jsx("i",{className:"fa-solid fa-calendar-week",style:{fontSize:"12px"}}),"Weekly"]}),a.jsxs("button",{onClick:()=>b("hourly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="hourly"?"#7d8d86":"transparent",color:y==="hourly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:U=>{y!=="hourly"&&(U.currentTarget.style.background="#e5e7eb",U.currentTarget.style.color="#3e3f29")},onMouseLeave:U=>{y!=="hourly"&&(U.currentTarget.style.background="transparent",U.currentTarget.style.color="#7d8d86")},children:[a.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"12px"}}),"Hourly"]}),a.jsxs("button",{onClick:()=>b("monthly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="monthly"?"#7d8d86":"transparent",color:y==="monthly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:U=>{y!=="monthly"&&(U.currentTarget.style.background="#e5e7eb",U.currentTarget.style.color="#3e3f29")},onMouseLeave:U=>{y!=="monthly"&&(U.currentTarget.style.background="transparent",U.currentTarget.style.color="#7d8d86")},children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"12px"}}),"Monthly"]})]}),y==="weekly"&&a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[a.jsxs("button",{onClick:M,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:U=>{U.currentTarget.style.background="#f3f4f6",U.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:U=>{U.currentTarget.style.background="#ffffff",U.currentTarget.style.borderColor="#d1d5db"},children:[a.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Week"]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",marginBottom:"2px"},children:de()}),a.jsx("button",{onClick:ee,style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline",transition:"color 0.2s ease"},onMouseEnter:U=>{U.currentTarget.style.color="#3e3f29"},onMouseLeave:U=>{U.currentTarget.style.color="#7d8d86"},children:S===0?"Current Week":"Go to Current Week"})]}),a.jsxs("button",{onClick:re,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:U=>{U.currentTarget.style.background="#f3f4f6",U.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:U=>{U.currentTarget.style.background="#ffffff",U.currentTarget.style.borderColor="#d1d5db"},children:["Next Week",a.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),y==="monthly"&&a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[a.jsxs("button",{onClick:async()=>{const U=k-1;O(U),await x(U)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:[a.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Month"]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#3e3f29",marginBottom:"2px"},children:new Date(new Date().getFullYear(),new Date().getMonth()+k,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),a.jsx("button",{onClick:async()=>{O(0),await x(0)},style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline"},children:k===0?"Current Month":"Go to Current Month"})]}),a.jsxs("button",{onClick:async()=>{const U=k+1;O(U),await x(U)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:["Next Month",a.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),y==="hourly"&&a.jsxs("div",{style:{marginBottom:"24px",padding:"12px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"8px"},children:"Select Date:"}),a.jsx("input",{type:"date",value:w,onChange:U=>ne(U.target.value),style:{padding:"8px 12px",border:"2px solid #d1d5db",borderRadius:"6px",fontSize:"14px",color:"#3e3f29",background:"white",outline:"none"}})]}),a.jsxs("div",{style:{width:"100%",height:"400px",background:"white",borderRadius:"12px",padding:"40px",border:"2px solid #d1d5db",position:"relative",overflow:"visible",margin:"0",boxSizing:"border-box",fontFamily:"inherit",display:"flex",flexDirection:"column"},children:[a.jsx("div",{style:{position:"absolute",left:"15px",top:"40px",bottom:"30px",fontSize:"11px",color:"#9ca3af",fontWeight:"500",zIndex:1,padding:"10px 0",height:"260px"},children:[100,75,50,25,0].map((U,E)=>a.jsx("span",{style:{position:"absolute",textAlign:"right",minWidth:"20px",top:`${E*25}%`,transform:"translateY(-50%)"},children:Sk(Ne*U/100,{},v?.currency)},U))}),a.jsx("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",flex:1,gap:y==="weekly"?"20px":y==="monthly"?"6px":"12px",marginBottom:"30px",padding:"0 40px 0 70px",position:"relative",zIndex:2,overflow:"visible",width:"100%",boxSizing:"border-box",minHeight:"260px"},children:se.map((U,E)=>{const P=ae(U.totalSales,Ne),W=X(E,y!=="hourly");return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",flex:1,maxWidth:y==="weekly"?"100px":y==="monthly"?"24px":"80px",overflow:"visible",boxSizing:"border-box",height:"100%"},children:[a.jsx("div",{style:{width:"100%",maxWidth:y==="weekly"?"80px":y==="monthly"?"16px":"60px",height:`${P}px`,background:W,borderRadius:"8px 8px 0 0",marginBottom:"12px",position:"relative",transition:"all 0.3s ease",cursor:"pointer",boxSizing:"border-box",display:"block"},onMouseEnter:V=>{V.currentTarget.style.transform="scaleY(1.05)",V.currentTarget.style.opacity="0.8",oe(V,U)},onMouseLeave:V=>{V.currentTarget.style.transform="scaleY(1)",V.currentTarget.style.opacity="1",Q()}}),a.jsx("span",{style:{fontSize:y==="weekly"?"13px":"11px",fontWeight:"500",color:"#7d8d86",textAlign:"center",display:"block",margin:"0",padding:"0"},children:y==="weekly"?U.day:y==="monthly"?E%D===0?U.day:"":U.hourLabel})]},E)})})]}),L.visible&&L.data&&a.jsxs("div",{style:{position:"fixed",left:L.x+10,top:L.y-10,background:"rgba(31, 41, 55, 0.95)",color:"#ffffff",padding:"12px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",pointerEvents:"none",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",zIndex:9999,backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",transform:"translateY(-100%)",animation:"fadeIn 0.2s ease-out"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:y==="weekly"?X(0,!0):X(0,!1)}}),a.jsx("span",{style:{fontWeight:"600",fontSize:"13px"},children:y==="weekly"?L.data.day:L.data.hourLabel})]}),a.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginBottom:"2px"},children:[L.data.transactionCount," transaction",L.data.transactionCount!==1?"s":""]}),a.jsx("div",{style:{fontWeight:"600",fontSize:"14px",color:"#60a5fa"},children:An(L.data.totalSales)})]})]}),a.jsx("div",{style:{width:"100%",maxWidth:"1000px",margin:"12px auto 0 auto",display:"flex",justifyContent:"center"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",flexWrap:"wrap",background:"#3e3f29",borderRadius:"8px",padding:"8px 12px",border:"2px solid #d1d5db"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:"#7d8d86"}}),a.jsx("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:500},children:y==="weekly"?"Daily Sales":y==="monthly"?"Daily Sales (Month)":"Hourly Sales"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"12px",color:"#f1f0e4"}}),a.jsxs("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:500},children:["Max: ",An(Ne,{},v?.currency)]})]})]})})]})},Fk=()=>{const e=Ls(),{businessId:t,businessLoading:r}=fu(),{data:s}=hu(),{data:o}=bv(),{user:c,switchUser:d}=bn(),{currentBusiness:f}=Bo(),[p,h]=T.useState({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),[x,v]=T.useState(!0),[y,b]=T.useState(null),[w,_]=T.useState([]),[S,A]=T.useState(!1),[k,O]=T.useState(!1),[L,K]=T.useState(new Date),[ne,M]=T.useState(new Date),[re,ee]=T.useState([]),[de,oe]=T.useState("today"),[Q,te]=T.useState([]),[ae,X]=T.useState(0),[J,fe]=T.useState(0);T.useEffect(()=>{if(s&&o&&!r&&t!=null){const je=new Date;je.setHours(0,0,0,0);const q=new Date(je);q.setDate(q.getDate()+1);const be=s.sales.filter(ut=>{const St=new Date(ut.datetime);return St>=je&&St<q}),tt=s.sideBusinessSales.filter(ut=>{const St=new Date(ut.date_time);return St>=je&&St<q}),Me=be.reduce((ut,St)=>ut+(parseFloat(St.total_amount.toString())||0),0),ct=tt.reduce((ut,St)=>ut+(parseFloat(St.total_amount.toString())||0),0),pt=o.products.filter(ut=>ut.stock_quantity<=ut.reorder_level).length;h({totalProducts:o.products.length,totalSales:s.sales.length,totalCustomers:0,todayRevenue:Me,todaySideBusinessRevenue:ct,todayTransactions:be.length,lowStockItems:pt}),v(!1)}else t==null&&!r&&(h({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),v(!1))},[t,r,s?.sales?.length,o?.products?.length]),T.useEffect(()=>{},[de,L,t,r]);const se=async je=>{try{A(!0);const q=new Date(je);b(q),_([]);const tt=(ut=>`${ut.getFullYear()}-${String(ut.getMonth()+1).padStart(2,"0")}-${String(ut.getDate()).padStart(2,"0")}`)(q),{data:Me,error:ct}=await Oe.from("sales").select(`
          sale_id,
          datetime,
          total_amount,
          payment_method,
          sale_items (quantity)
        `).gte("datetime",`${tt}T00:00:00`).lt("datetime",`${tt}T23:59:59`).order("datetime",{ascending:!1});if(ct){console.error("Error fetching transactions:",ct);return}const pt=(Me||[]).map(ut=>({transaction_id:`TXN-${ut.sale_id.toString().padStart(6,"0")}`,datetime:ut.datetime,total_amount:ut.total_amount,payment_method:ut.payment_method,items_count:ut.sale_items?.reduce((St,ft)=>St+ft.quantity,0)||0}));_(pt)}catch(q){console.error("Error fetching transactions:",q)}finally{A(!1)}},Ne=()=>{b(null),_([])},D=je=>{Ne(),e(`/transaction/${je}`)},U=je=>{K(je),O(!1)},E=(je,q)=>{const be=new Date(je,q,1),tt=new Date(be);tt.setDate(tt.getDate()-be.getDay());const Me=[],ct=new Date(tt);for(let pt=0;pt<42;pt++)Me.push(new Date(ct)),ct.setDate(ct.getDate()+1);return Me},P=()=>{switch(de){case"today":const je=new Date;return L.toDateString()===je.toDateString()?"Today's Sales":`${L.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Sales`;case"week":return"This Week Sales";case"month":return"This Month Sales";default:return"Today's Sales"}},W=()=>{switch(de){case"today":const je=new Date;return L.toDateString()===je.toDateString()?"Today's Transactions":`${L.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Transactions`;case"week":return"This Week Transactions";case"month":return"This Month Transactions";default:return"Today's Transactions"}},V=()=>{if(ae===0)return p.todayTransactions>0?"+100%":"0%";const je=(p.todayTransactions-ae)/ae*100;return`${je>=0?"+":""}${je.toFixed(0)}%`},ue=()=>p.todayTransactions-J,Le=()=>{const je=ue(),q=V();return{text:`Products: ${je} | Side Business: ${J} (${q} from yesterday)`,icon:"fa-solid fa-chart-pie"}},Ce=je=>{const q=new Date,be=je.toDateString()===q.toDateString(),tt=je.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return be?"Today's Transactions":`${tt} Transactions`},Te=je=>{const q=new Date,be=je.toDateString()===q.toDateString(),tt=je.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return be?"No transactions found for today":`No transactions found for ${tt}`},Be=(je,q,be=100)=>{const tt=je+q;if(tt===0)return null;const ct=je/tt*100/100*360,pt=(ft,Ft,Dt)=>{const jr=ut(be/2,be/2,Dt,Ft),Xt=ut(be/2,be/2,Dt,ft),It=Ft-ft<=180?"0":"1";return`M ${be/2} ${be/2} L ${jr.x} ${jr.y} A ${Dt} ${Dt} 0 ${It} 0 ${Xt.x} ${Xt.y} Z`},ut=(ft,Ft,Dt,jr)=>{const Xt=(jr-90)*Math.PI/180;return{x:ft+Dt*Math.cos(Xt),y:Ft+Dt*Math.sin(Xt)}},St=be*.4;return a.jsxs("svg",{width:be,height:be,style:{marginRight:"12px"},children:[je>0&&a.jsx("path",{d:pt(0,ct,St),fill:"#dc2626",stroke:"#ffffff",strokeWidth:"2"}),q>0&&a.jsx("path",{d:pt(ct,360,St),fill:"#f59e0b",stroke:"#ffffff",strokeWidth:"2"})]})},Je=[{title:P(),value:An(p.todayRevenue+p.todaySideBusinessRevenue,{},f?.currency),change:`Products: ${An(p.todayRevenue,{},f?.currency)} | Side Business: ${An(p.todaySideBusinessRevenue,{},f?.currency)}`,changeColor:"#1a1a1a",icon:"fa-solid fa-euro-sign",bgColor:"#1a1a1a",iconColor:"#f1f0e4"},{title:W(),value:p.todayTransactions,change:Le().text,changeIcon:Le().icon,changeColor:"#bca88d",icon:"fa-solid fa-shopping-cart",bgColor:"#bca88d",iconColor:"#1a1a1a",pieChart:{productCount:ue(),sideBusinessCount:J}}];return x?a.jsxs("div",{style:{padding:"0"},children:[a.jsx("style",{children:`
          @keyframes shimmer { 0% { background-position: -400px 0; } 100% { background-position: 400px 0; } }
          .skeleton { background-image: linear-gradient(90deg, #e5e7eb 0px, #f3f4f6 40px, #e5e7eb 80px); background-size: 600px 100%; animation: shimmer 1.2s infinite linear; }
        `}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"24px",marginBottom:"32px"},children:[a.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),a.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),a.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),a.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px"},children:[a.jsx("div",{className:"skeleton",style:{height:"300px",borderRadius:"16px"}}),a.jsx("div",{className:"skeleton",style:{height:"300px",borderRadius:"16px"}})]}),a.jsx("div",{className:"skeleton",style:{height:"420px",borderRadius:"16px"}})]}):a.jsxs("div",{style:{padding:"0"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"16px",marginBottom:"32px"},children:[a.jsxs("div",{onClick:()=>O(!0),style:{background:"#1a1a1a",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",transition:"all 0.2s ease",minWidth:"200px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),a.jsx("span",{style:{color:"#bca88d"},children:L.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),a.jsx("i",{className:"fa-solid fa-chevron-down",style:{fontSize:"12px",color:"#bca88d",transition:"transform 0.2s ease"}})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"4px"},children:[a.jsx("button",{onClick:()=>oe("today"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:de==="today"?"#7d8d86":"transparent",color:de==="today"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Today"}),a.jsx("button",{onClick:()=>oe("week"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:de==="week"?"#7d8d86":"transparent",color:de==="week"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"This Week"}),a.jsx("button",{onClick:()=>oe("month"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:de==="month"?"#7d8d86":"transparent",color:de==="month"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"This Month"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"24px",marginBottom:"32px",minHeight:"140px"},children:[Je.map((je,q)=>a.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",transition:"all 0.3s ease",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{color:"#1a1a1a",fontSize:"16px",fontWeight:"500",margin:"0 0 12px 0"},children:je.title}),a.jsx("p",{style:{fontSize:"36px",fontWeight:"bold",color:"#1a1a1a",margin:"0 0 8px 0",lineHeight:"1.1"},children:je.value}),a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",fontSize:"14px",fontWeight:"500",color:je.changeColor,margin:0},children:je.pieChart?a.jsxs(a.Fragment,{children:[Be(je.pieChart.productCount,je.pieChart.sideBusinessCount),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#dc2626"}}),a.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"#1a1a1a"},children:["Products: ",je.pieChart.productCount]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f59e0b"}}),a.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"#1a1a1a"},children:["Side Business: ",je.pieChart.sideBusinessCount]})]})]})]}):a.jsxs(a.Fragment,{children:[je.changeIcon&&a.jsx("i",{className:je.changeIcon,style:{fontSize:"12px"}}),a.jsx("span",{children:je.change})]})}),q===0&&Q.length>0&&a.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:"12px",maxWidth:"100%"},children:Q.map(be=>a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",padding:"8px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",overflow:"hidden",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:be.image_url?a.jsx("img",{src:be.image_url,alt:be.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:tt=>{const Me=tt.target;Me.style.display="none";const ct=Me.parentElement;ct&&(ct.innerHTML='<i class="fa-solid fa-store" style="font-size: 18px; color: #7d8d86;"></i>')}}):a.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"18px",color:"#7d8d86"}})}),a.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[a.jsx("p",{style:{fontSize:"11px",color:"#7d8d86",fontWeight:"500",margin:"0 0 2px 0",lineHeight:"1.2"},children:be.name}),a.jsx("p",{style:{fontSize:"12px",color:"#1a1a1a",fontWeight:"600",margin:0},children:An(be.total_amount,{},f?.currency)})]})]},be.business_id))})})]}),a.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"14px",background:je.bgColor,display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"flex-end",marginTop:"16px"},children:a.jsx("i",{className:je.icon,style:{fontSize:"24px",color:je.iconColor}})})]})},q)),a.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:a.jsx(kk,{})}),a.jsx(Rk,{activePeriod:de,selectedDate:L})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"24px",marginBottom:"32px"},children:[a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:a.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"5px solid #000000 !important"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"18px",color:"#f1f0e4"}})}),a.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:(()=>{switch(de){case"today":const je=new Date;return L.toDateString()===je.toDateString()?"Recent Transactions":`${L.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Transactions`;case"week":return"This Week Transactions";case"month":return"This Month Transactions";default:return"Recent Transactions"}})()})]}),a.jsx("button",{onClick:()=>se(L),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"View All"})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:re.length>0?re.map(je=>a.jsxs("div",{onClick:()=>e(`/transaction/TXN-${je.sale_id.toString().padStart(6,"0")}`),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:je.partial_payment?"#fef2f2":"white",borderRadius:"8px",border:je.partial_payment?"1px solid #fecaca":"1px solid transparent",cursor:"pointer",transition:"all 0.2s ease"},children:[a.jsxs("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:je.partial_payment?"#f59e0b":je.status==="completed"?"#10b981":"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[a.jsx("i",{className:`fa-solid ${je.partial_payment?"fa-exclamation":je.status==="completed"?"fa-check":"fa-hourglass-half"}`,style:{fontSize:"12px",color:"white"}}),je.partial_payment&&a.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"8px",height:"8px",borderRadius:"50%",background:"#dc2626",border:"1px solid white"}})]}),a.jsxs("div",{style:{flex:1},children:[a.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 2px 0"},children:["#TXN-",je.sale_id.toString().padStart(6,"0")]}),a.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[je.items_count," item",je.items_count!==1?"s":""," | ",je.payment_method,je.partial_payment&&a.jsx("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"8px"},children:" PARTIAL"})]})]}),a.jsx("div",{style:{textAlign:"right"},children:je.partial_payment?a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981",margin:"0 0 2px 0"},children:An(je.partial_amount||0,{},f?.currency)}),a.jsxs("p",{style:{fontSize:"11px",color:"#6b7280",margin:"0 0 2px 0",fontWeight:"500"},children:["of ",An((je.partial_amount||0)+(je.remaining_amount||0),{},f?.currency)]}),a.jsxs("p",{style:{fontSize:"10px",color:"#dc2626",margin:0,fontWeight:"600"},children:["OWES: ",An(je.remaining_amount||0,{},f?.currency)]})]}):a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:0},children:An(je.total_amount,{},f?.currency)})})]},je.sale_id)):a.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#1a1a1a",fontSize:"14px"},children:(()=>{switch(de){case"today":const je=new Date;return L.toDateString()===je.toDateString()?"No recent transactions":`No transactions on ${L.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`;case"week":return"No transactions this week";case"month":return"No transactions this month";default:return"No recent transactions"}})()})})]})}),a.jsx("div",{children:a.jsx(Mk,{selectedDate:L,activePeriod:de})})]}),y&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",margin:0},children:Ce(y)}),a.jsx("button",{onClick:Ne,style:{background:"none",border:"none",fontSize:"24px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:""})]}),S?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"40px"},children:a.jsxs("div",{style:{fontSize:"16px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading transactions..."]})}):w.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:w.map((je,q)=>a.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>D(je.transaction_id),children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"16px"},children:a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"14px"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 4px 0"},children:je.transaction_id}),a.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[new Date(je.datetime).toLocaleTimeString()," | ",je.items_count," items | ",je.payment_method]})]})]}),a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1a1a1a"},children:An(je.total_amount,{},f?.currency)})]},q))}):a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:Te(y)})]})]})}),k&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:ne.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[a.jsx("button",{onClick:()=>M(new Date(ne.getFullYear(),ne.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("button",{onClick:()=>M(new Date(ne.getFullYear(),ne.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})}),a.jsx("button",{onClick:()=>O(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:""})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(je=>a.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#1a1a1a",padding:"8px 4px"},children:je},je)),E(ne.getFullYear(),ne.getMonth()).map((je,q)=>{const be=je.getMonth()===ne.getMonth(),tt=je.toDateString()===new Date().toDateString(),Me=je.toDateString()===L.toDateString();return a.jsx("button",{onClick:()=>U(je),style:{background:Me?"#1a1a1a":"transparent",color:Me?"#f1f0e4":be?"#1a1a1a":"#bca88d",border:tt?"2px solid #1a1a1a":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:be?1:.5},children:je.getDate()},q)})]}),a.jsx("div",{style:{textAlign:"center"},children:a.jsx("button",{onClick:()=>U(new Date),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Today"})})]})})]})};async function Lk(e,t,r){if(console.log("?? Starting image upload for product:",t),console.log("?? File details:",{name:e.name,size:e.size,type:e.type}),r==null)return console.error("Cannot upload product image without an active business"),null;try{const s=`product-images/${t}.${e.name.split(".").pop()}`;console.log("?? Uploading to Supabase Storage:",s);const{error:o}=await Oe.storage.from("products").upload(s,e,{contentType:e.type,upsert:!0});if(o)return console.error("? Upload failed:",o),null;const{data:{publicUrl:c}}=Oe.storage.from("products").getPublicUrl(s);console.log("? Image uploaded successfully:",c),console.log("?? Updating database with public URL...");const{error:d}=await Oe.from("products").update({image_url:c}).eq("product_id",t).eq("business_id",r);return d?(console.error("? DB update failed:",d),null):(console.log("? Database updated with public URL"),c)}catch(s){return console.error("?? Unexpected error during upload:",s),null}}const Pk=()=>{const{hasPermission:e}=uu(),{user:t}=bn(),{businessId:r,businessLoading:s}=fu(),[o,c]=T.useState([]),[d,f]=T.useState(!0),[p,h]=T.useState(null),[x,v]=T.useState({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),[y,b]=T.useState(null),[w,_]=T.useState(!1),[S,A]=T.useState(null),[k,O]=T.useState(null),[L,K]=T.useState(!1),[ne,M]=T.useState("daily"),[re,ee]=T.useState(""),[de,oe]=T.useState("all"),[Q,te]=T.useState(!1),[ae,X]=T.useState([]),[J,fe]=T.useState(!1),[se,Ne]=T.useState(!1),[D,U]=T.useState(null),[E,P]=T.useState({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),[W,V]=T.useState(!1),[ue,Le]=T.useState(!1),[Ce,Te]=T.useState("Hi! I'm Lily, your inventory assistant! I can help you understand your stock levels and manage your products. Hover over the stats cards to see what they mean!"),[Be,Ve]=T.useState(!1),[Je,je]=T.useState(null),[q,be]=T.useState(null),[tt,Me]=T.useState(!1),[ct,pt]=T.useState(null),[ut,St]=T.useState(null),[ft,Ft]=T.useState(1),[Dt,jr]=T.useState(10),[Xt,It]=T.useState(0),[ce,me]=T.useState([]),[qe,yt]=T.useState([]),[Ct,gr]=T.useState(null),[Cr,or]=T.useState(null),Er=300*1e3,Qt=async(C=!1)=>{if(r==null){yt([]);return}if(!C&&Ct&&Ct.businessId===r&&Date.now()-Ct.timestamp<Er){const he=Ct.data.map(Ae=>({...Ae,price:0,stock_quantity:0,supplier_info:"",reorder_level:0,image_url:null,created_at:"",updated_at:""}));yt(he);return}try{const{data:he,error:Ae}=await Oe.from("products").select("product_id, name, category").eq("business_id",r).order("name",{ascending:!0});if(Ae){console.error("Error fetching all products for suggestions:",Ae);return}const st=he||[],bt=st.map(Tt=>({...Tt,price:0,stock_quantity:0,supplier_info:"",reorder_level:0,image_url:null,created_at:"",updated_at:""}));yt(bt),gr({data:st,timestamp:Date.now(),businessId:r})}catch(he){console.error("Error fetching all products for suggestions:",he)}},lr=async()=>{if(r==null){me([]);return}try{const{data:C,error:he}=await Oe.from("products").select("category").eq("business_id",r).not("category","is",null).not("category","eq","");if(he){console.error("Error fetching categories:",he);return}const Ae=Array.from(new Set(C.map(st=>st.category))).filter(st=>st&&st.trim()!=="").sort();me(Ae)}catch(C){console.error("Error fetching distinct categories:",C)}};T.useEffect(()=>{if(r==null){c([]),yt([]),me([]),v({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),It(0);return}Jt(1,Dt,re,de,y),lr(),Qt(!0),Xe(!0)},[r,s]),T.useEffect(()=>{console.log("Modal state changed:",{showEditModal:se,editingProduct:D?.name})},[se,D]);const ie=()=>{Ft(1),Jt(1,Dt,re,de)},De=C=>{C.key==="Enter"&&(ie(),te(!1))},mt=C=>{const he=C.target.value;if(ee(he),he.length>=2){const Ae=N(he);X(Ae),te(Ae.length>0)}else te(!1),X([])},vt=C=>{const he=C.type==="product"?C.product.name:C.name;ee(he),te(!1),X([]),Ft(1),Jt(1,Dt,he,de)},xr=()=>{ee(""),te(!1),X([]),Ft(1),Jt(1,Dt,"",de)};T.useEffect(()=>{r!=null&&(Ft(1),Jt(1,Dt,re,de,y))},[de,r,s]);const Jt=async(C=ft,he=Dt,Ae=re,st=de,bt=null)=>{if(r==null){c([]),It(0),f(!1);return}try{if(f(!0),h(null),bt&&bt!=="totalProducts"){let Tt=Oe.from("products").select("*").eq("business_id",r).order("product_id",{ascending:!0});if(Ae&&Ae.trim()){const _r=`name.ilike.%${Ae.trim()}%,category.ilike.%${Ae.trim()}%`;Tt=Tt.or(_r)}st&&st!=="all"&&(Tt=Tt.eq("category",st)),bt==="outOfStock"&&(Tt=Tt.eq("stock_quantity",0));const{data:it,error:_t}=await Tt;if(_t)throw _t;let At=it||[];bt==="inStock"?At=At.filter(_r=>_r.stock_quantity>_r.reorder_level):bt==="lowStock"&&(At=At.filter(_r=>_r.stock_quantity<=_r.reorder_level&&_r.stock_quantity>0)),It(At.length);const Ut=(C-1)*he,Ir=At.slice(Ut,Ut+he);c(Ir)}else{let Tt=Oe.from("products").select("product_id",{count:"exact",head:!0}).eq("business_id",r),it=Oe.from("products").select("*").eq("business_id",r).order("product_id",{ascending:!0});if(Ae&&Ae.trim()){const En=`name.ilike.%${Ae.trim()}%,category.ilike.%${Ae.trim()}%`;Tt=Tt.or(En),it=it.or(En)}st&&st!=="all"&&(Tt=Tt.eq("category",st),it=it.eq("category",st));const{count:_t,error:At}=await Tt;if(At)throw At;It(_t||0);const Ut=(C-1)*he,{data:Ir,error:_r}=await it.range(Ut,Ut+he-1);if(_r)throw _r;c(Ir||[])}}catch(Tt){const it=Tt instanceof Error?Tt.message:"Failed to fetch products";h(it),console.error("Error fetching products:",Tt),alert(`Products loading error: ${it}. Please check your database permissions.`)}finally{f(!1)}},Xe=async(C=!1)=>{if(r==null){v({totalProducts:0,inStock:0,lowStock:0,outOfStock:0});return}if(!C&&Cr&&Cr.businessId===r&&Date.now()-Cr.timestamp<Er){v(Cr.data);return}try{const{data:he,error:Ae}=await Oe.from("products").select("stock_quantity, reorder_level").eq("business_id",r);if(Ae)throw Ae;if(he){const st=he.length,bt=he.filter(At=>At.stock_quantity>At.reorder_level).length,Tt=he.filter(At=>At.stock_quantity<=At.reorder_level&&At.stock_quantity>0).length,it=he.filter(At=>At.stock_quantity===0).length,_t={totalProducts:st,inStock:bt,lowStock:Tt,outOfStock:it};v(_t),or({data:_t,timestamp:Date.now(),businessId:r})}}catch(he){console.error("Error fetching summary stats:",he)}},Wr=C=>{y===C?(b(null),ee(""),oe("all"),Ft(1),Jt(1,Dt,"","all")):(b(C),ee(""),oe("all"),Ft(1),Jt(1,Dt,"","all",C))},Gt=C=>{const he=new Date,Ae=new Date(he.getTime()-720*60*60*1e3);new Date(he.getTime()-10080*60*1e3);const st=C.filter(_t=>_t.sales&&new Date(_t.sales.datetime)>=Ae),bt=[];for(let _t=29;_t>=0;_t--){const At=new Date(he.getTime()-_t*24*60*60*1e3),Ut=At.toISOString().split("T")[0],Ir=st.filter(er=>er.sales&&er.sales.datetime.startsWith(Ut)),_r=Ir.length,En=Ir.reduce((er,R)=>er+(R.calculated_price||R.price_each*R.quantity),0);bt.push({date:Ut,day:At.getDate(),month:At.getMonth()+1,sales:_r,revenue:En})}const Tt=[];for(let _t=3;_t>=0;_t--){const At=new Date(he.getTime()-(_t+1)*7*24*60*60*1e3),Ut=new Date(he.getTime()-_t*7*24*60*60*1e3),Ir=st.filter(er=>{if(!er.sales)return!1;const R=new Date(er.sales.datetime);return R>=At&&R<Ut}),_r=Ir.length,En=Ir.reduce((er,R)=>er+(R.calculated_price||R.price_each*R.quantity),0);Tt.push({week:`Week ${4-_t}`,startDate:At.toISOString().split("T")[0],endDate:Ut.toISOString().split("T")[0],sales:_r,revenue:En})}const it=[];for(let _t=5;_t>=0;_t--){const At=new Date(he.getFullYear(),he.getMonth()-_t,1),Ut=new Date(he.getFullYear(),he.getMonth()-_t+1,0),Ir=C.filter(er=>{if(!er.sales)return!1;const R=new Date(er.sales.datetime);return R>=At&&R<=Ut}),_r=Ir.length,En=Ir.reduce((er,R)=>er+(R.calculated_price||R.price_each*R.quantity),0);it.push({month:At.toLocaleDateString("en-US",{month:"short",year:"numeric"}),sales:_r,revenue:En})}return{daily:bt,weekly:Tt,monthly:it}},Bn=async C=>{if(r==null){O(null);return}try{K(!0),h(null),console.log("Fetching insights for product:",C.product_id,C.name);const he=C.sales_count||0,Ae=C.total_revenue||0,st=C.last_sold_date,bt=he>0?(he/30).toFixed(1):0,Tt=Ae*.6,it=Ae-Tt,_t=Ae>0?it/Ae*100:0,{data:At,error:Ut}=await Oe.from("sale_items").select(`
          *,
          sales (
            sale_id,
            datetime,
            total_amount,
            payment_method,
            customers (name),
            users (username),
            business_id
          )
        `).eq("product_id",C.product_id).eq("sales.business_id",r).order("sales.datetime",{ascending:!1});if(Ut)throw Ut;console.log("All sales query result:",{data:At});const Ir=At?.slice(0,10)||[],_r=Ir?.map(He=>({date:He.sales?new Date(He.sales.datetime).toLocaleDateString():"Unknown",time:He.sales?new Date(He.sales.datetime).toLocaleTimeString():"Unknown",quantity:He.weight||He.quantity,unit:He.weight?C.weight_unit||"kg":"units",price:He.calculated_price||He.price_each*He.quantity,customer:He.sales?.customers?.name||"Walk-in Customer",cashier:He.sales?.users?.username||"Unknown"}))||[],En=Ir?.reduce((He,ot)=>He+(ot.weight||ot.quantity),0)||0,er=new Date;er.setDate(er.getDate()-30);const Se=(Ir?.filter(He=>He.sales&&new Date(He.sales.datetime)>=er)||[]).reduce((He,ot)=>{if(ot.sales&&ot.sales.datetime){const lt=new Date(ot.sales.datetime).toDateString();He[lt]=(He[lt]||0)+1}return He},{}),Ye=Object.entries(Se).sort(([,He],[,ot])=>ot-He).slice(0,5).map(([He,ot])=>({date:He,count:ot})),Qe=Gt(At||[]);console.log("Calculated insights:",{totalSales:he,totalRevenue:Ae,totalQuantitySold:En,averageSalesPerDay:bt,topSellingDays:Ye,estimatedProfit:it,profitMargin:_t,recentSalesList:_r,lastSoldDate:st,chartData:Qe}),O({product:C,totalSales:he,totalRevenue:Ae,totalQuantitySold:En,averageSalesPerDay:parseFloat(bt),topSellingDays:Ye,estimatedProfit:it,profitMargin:_t,recentSalesList:_r,lastSoldDate:st,chartData:Qe,salesData:At||[]})}catch(he){console.error("Error fetching product insights:",he),h(he instanceof Error?he.message:"Failed to fetch product insights")}finally{K(!1)}},Nr=C=>{A(C),_(!0),Bn(C)},ar=o,Et=Math.ceil(Xt/Dt),Dr=Xt>0?(ft-1)*Dt+1:0,rn=Math.min(ft*Dt,Xt),Cs=["all",...ce],Mn=C=>!C||C.length<2?[]:ce.filter(Ae=>Ae.toLowerCase().includes(C.toLowerCase())||C.toLowerCase().includes(Ae.toLowerCase())||Ae.toLowerCase().split(" ").some(st=>st.includes(C.toLowerCase())||C.toLowerCase().includes(st))).slice(0,5),N=C=>{if(!C||C.length<2)return[];const he=C.toLowerCase(),Ae=[],st=[];qe.forEach(it=>{it.name.toLowerCase().includes(he)&&Ae.push({type:"product",product:it}),it.category.toLowerCase().includes(he)&&Ae.push({type:"product",product:it}),it.description&&it.description.toLowerCase().includes(he)&&Ae.push({type:"product",product:it}),it.sku&&it.sku.toLowerCase().includes(he)&&Ae.push({type:"product",product:it})}),ce.forEach(it=>{it.toLowerCase().includes(he)&&st.push({type:"category",name:it})});const bt=Ae.filter((it,_t,At)=>it.type==="product"&&At.findIndex(Ut=>Ut.type==="product"&&Ut.product.product_id===it.product.product_id)===_t).slice(0,6),Tt=st.filter((it,_t,At)=>it.type==="category"&&At.findIndex(Ut=>Ut.type==="category"&&Ut.name===it.name)===_t).slice(0,2);return[...bt,...Tt]},H=C=>{C>=1&&C<=Et&&(Ft(C),Jt(C,Dt,re,de))},F=C=>{jr(C),Ft(1),Jt(1,C,re,de)},z=()=>{ft>1&&H(ft-1)},G=()=>{ft<Et&&H(ft+1)},Y=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(C){const he=Math.random()*16|0;return(C==="x"?he:he&3|8).toString(16)}),ve=(C,he,Ae=!1)=>{const st=(it,_t,At=!0)=>{if(!it||it.trim()===""){if(At)throw new Error(`${_t} is required`);return 0}const Ut=parseFloat(it);if(isNaN(Ut))throw new Error(`${_t} must be a valid number`);return Ut},bt=(it,_t,At=!0)=>{if(!it||it.trim()===""){if(At)throw new Error(`${_t} is required`);return 0}const Ut=parseInt(it);if(isNaN(Ut)||!Number.isInteger(Ut))throw new Error(`${_t} must be a valid whole number`);return Ut},Tt={name:C.product_name?.trim()||(()=>{throw new Error("Product name is required")})(),category:C.category?.trim()||(()=>{throw new Error("Category is required")})(),price:C.is_weighted?0:st(C.price,"Price",!Ae),stock_quantity:bt(C.stock_quantity,"Stock quantity",!Ae),supplier_info:C.supplier_info?.trim()||"",reorder_level:bt(C.reorder_level,"Reorder level",!Ae),tax_rate:C.tax_rate?st(C.tax_rate,"Tax rate",!1):0,last_updated:new Date().toISOString(),is_weighted:C.is_weighted||!1,weight_unit:C.is_weighted?C.weight_unit:null,price_per_unit:C.is_weighted&&C.price_per_unit?st(C.price_per_unit,"Price per unit",!1):null,description:C.description?.trim()||"",sku:C.sku?.trim()||"",barcode:(()=>{const it=C.barcode?.trim();return it&&it.length>0?it:null})()};return he?{...Tt,product_id:he}:Tt},Ie=C=>{if(C.key!=="Enter")return;const he=C.target;!he||he instanceof HTMLTextAreaElement||he instanceof HTMLButtonElement||he instanceof HTMLInputElement&&he.type==="submit"||!(he instanceof HTMLInputElement||he instanceof HTMLSelectElement)||(C.preventDefault(),C.stopPropagation())},ge=async C=>{if(C.preventDefault(),console.log("Form submitted, newProduct:",E),V(!0),r==null){h("Please select a business before adding products"),V(!1);return}try{const he=Y();console.log("Generated product ID:",he);const Ae=ve(E,he),st={...Ae,business_id:r};console.log("Inserting product data:",st);const{data:bt,error:Tt}=await Oe.from("products").insert([st]).select();if(Tt)throw console.error("Supabase error:",Tt),Tt;const it=bt?.[0]?{...bt[0],barcode:Ae.barcode??null}:null;if(!it)throw new Error("Product insertion returned no data");if(console.log("Product added successfully!"),Je){const _t=await Ge(he);if(_t){const At={...it,image_url:_t};c(Ut=>[...Ut,At])}else c(At=>[...At,it])}else c(_t=>[..._t,it]);It(_t=>_t+1),P({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),je(null),be(null),fe(!1),lr(),Qt(!0),Xe(!0)}catch(he){console.error("Error adding product:",he);let Ae="Failed to add product";he instanceof Error&&he.message&&(he.message.includes("is required")||he.message.includes("must be a valid")?Ae=he.message:he.message.includes("duplicate key value violates unique constraint")?Ae="A product with this ID already exists. Please try again.":he.message.includes("violates check constraint")?Ae="Invalid data provided. Please check your input values.":he.message.includes("not-null constraint")?Ae="Required fields are missing. Please fill in all required fields.":Ae=`Failed to add product: ${he.message}`),h(Ae)}finally{V(!1)}},we=async C=>{if(C.preventDefault(),!!D){if(r==null){h("Please select a business before updating products");return}V(!0),h(null);try{console.log("Editing product data:",E);const he=ve(E,void 0,!0);console.log("Transformed product data:",he);const{data:Ae,error:st}=await Oe.from("products").update(he).eq("product_id",D.product_id).eq("business_id",r).select();if(st)throw console.error("Supabase error:",st),console.error("Error details:",JSON.stringify(st,null,2)),st;let bt=Ae?.[0]?{...Ae[0],barcode:he.barcode??null}:null;if(!bt)throw new Error("Product update returned no data");if(Je){const Tt=await Ge(D.product_id);Tt&&(bt={...bt,image_url:Tt})}c(o.map(Tt=>Tt.product_id===D.product_id?bt:Tt)),We(),Ne(!1),U(null),lr(),Qt(!0),Xe(!0)}catch(he){console.error("Failed to update product:",he);let Ae="Failed to update product";he instanceof Error&&he.message&&(he.message.includes("is required")||he.message.includes("must be a valid")?Ae=he.message:he.message.includes("violates check constraint")?Ae="Invalid data provided. Please check your input values.":he.message.includes("not-null constraint")?Ae="Required fields are missing. Please fill in all required fields.":Ae=`Failed to update product: ${he.message}`),h(Ae)}finally{V(!1)}}},Ee=async C=>{if(r==null){h("Please select a business before deleting products");return}try{console.log("??? Starting delete for product:",C);const{error:he}=await Oe.from("products").delete().eq("product_id",C).eq("business_id",r);if(he)throw console.error("?? Error deleting product:",he),he;console.log("? Product deleted successfully"),c(o.filter(Ae=>Ae.product_id!==C)),St(null),It(Ae=>Math.max(0,Ae-1)),Qt(!0),Xe(!0)}catch(he){console.error("? Delete failed:",he),h(he instanceof Error?he.message:"Failed to delete product")}},We=()=>{P({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),je(null),be(null),fe(!1),Ne(!1),U(null)},Ke=C=>{console.log("Starting edit for product:",C),U(C),P({product_name:C.name,category:C.category,price:C.is_weighted?C.price_per_unit?.toString()||"":C.price.toString(),stock_quantity:C.stock_quantity.toString(),reorder_level:C.reorder_level.toString(),supplier_info:C.supplier_info||"",tax_rate:C.tax_rate?.toString()||"",description:C.description||"",sku:C.sku||"",barcode:C.barcode||"",is_weighted:C.is_weighted||!1,weight_unit:C.weight_unit||"",price_per_unit:C.price_per_unit?.toString()||""}),be(C.image_url||null),je(null),Ne(!0),console.log("Edit modal should be open now")},nt=C=>{const he=C.target.files?.[0];if(he){je(he);const Ae=new FileReader;Ae.onload=st=>{be(st.target?.result)},Ae.readAsDataURL(he)}},Ge=async C=>{if(!Je)return null;if(r==null)return console.error("Cannot upload image without selecting a business"),null;try{return await Lk(Je,C,r)}catch(he){return console.error("Image upload failed:",he),null}},rt=C=>{pt(C),Me(!0)},wt=()=>{Me(!1),pt(null)},Zt=(C,he)=>C===0?{status:"out",color:"#ef4444",bgColor:"#fef2f2",textColor:"#dc2626"}:C<=he?{status:"low",color:"#f59e0b",bgColor:"#fffbeb",textColor:"#d97706"}:{status:"good",color:"#10b981",bgColor:"#f0fdf4",textColor:"#059669"},Vt=C=>{const he=C.toLowerCase();return he.includes("small")?"#3b82f6":he.includes("large")?"#ef4444":he.includes("medium")?"#f59e0b":"#7d8d86"},ir=C=>{const he=C.split(" ");return he.map((Ae,st)=>{const bt=Ae.toLowerCase();let Tt="#1a1a1a";return bt==="small"?Tt="#3b82f6":bt==="large"?Tt="#ef4444":bt==="medium"&&(Tt="#f59e0b"),a.jsxs("span",{style:{color:Tt},children:[Ae,st<he.length-1?" ":""]},st)})},_n=()=>a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,display:"flex",alignItems:"flex-end",gap:"12px"},children:[ue&&a.jsxs("div",{style:{background:"#f8fafc",border:"2px solid #7d8d86",borderRadius:"16px",padding:"12px 16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",maxWidth:"250px",fontSize:"14px",color:"#3e3f29",position:"relative",marginBottom:"8px"},children:[a.jsx("p",{style:{margin:0,fontWeight:"500"},children:Ce}),a.jsx("div",{style:{position:"absolute",bottom:"-8px",right:"20px",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"8px solid #7d8d86"}})]}),a.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"#f8fafc",border:"3px solid #7d8d86",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease"},onClick:()=>Le(!ue),onMouseEnter:C=>{const he=C.target;he.style.transform="scale(1.05)"},onMouseLeave:C=>{const he=C.target;he.style.transform="scale(1)"},children:a.jsx("img",{src:t?.icon?`/retailpos/images/icons/${t.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:t?.icon||"Lily",style:{width:"50px",height:"50px",borderRadius:"50%"}})})]});return d?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading inventory..."]})}):a.jsxs("div",{style:{padding:"24px",background:"#f8fafc",minHeight:"100vh",border:"1px solid rgba(125, 141, 134, 0.1)",borderRadius:"16px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px",padding:"20px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:"Inventory Management"}),a.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:"Manage your product inventory, stock levels, and suppliers."})]}),e("canManageProducts")&&a.jsxs("button",{onClick:()=>{console.log("Add Product button clicked"),fe(!0),console.log("showAddModal set to true")},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},onMouseEnter:C=>{C.target.style.background="#bca88d",Te("Click this button to add a new product to your inventory! You'll need to fill in details like name, price, stock quantity, and reorder level."),Le(!0)},onMouseLeave:C=>{C.target.style.background="#7d8d86",Le(!1)},children:[a.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"16px"}}),a.jsx("span",{children:"Add Product"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginBottom:"32px",padding:"20px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("div",{onClick:()=>Wr("totalProducts"),style:{background:y==="totalProducts"?"#f0f8f0":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:y==="totalProducts"?"2px solid #7d8d86":"2px solid transparent"},onMouseEnter:C=>{y!=="totalProducts"&&(C.target.style.background="#f1f5f9")},onMouseLeave:C=>{y!=="totalProducts"&&(C.target.style.background="#f8fafc")},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"18px",color:"#f1f0e4"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.totalProducts}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Total Products"})]})]})}),a.jsx("div",{onClick:()=>Wr("inStock"),style:{background:y==="inStock"?"#f0fdf4":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:y==="inStock"?"2px solid #10b981":"2px solid transparent"},onMouseEnter:C=>{y!=="inStock"&&(C.target.style.background="#f1f5f9")},onMouseLeave:C=>{y!=="inStock"&&(C.target.style.background="#f8fafc")},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-circle-check",style:{fontSize:"18px",color:"white"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.inStock}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"In Stock"})]})]})}),a.jsx("div",{onClick:()=>Wr("lowStock"),style:{background:y==="lowStock"?"#fffbeb":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:y==="lowStock"?"2px solid #f59e0b":"2px solid transparent"},onMouseEnter:C=>{y!=="lowStock"&&(C.target.style.background="#f1f5f9")},onMouseLeave:C=>{y!=="lowStock"&&(C.target.style.background="#f8fafc")},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-triangle-exclamation",style:{fontSize:"18px",color:"white"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.lowStock}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Low Stock"})]})]})}),a.jsx("div",{onClick:()=>Wr("outOfStock"),style:{background:y==="outOfStock"?"#fef2f2":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:y==="outOfStock"?"2px solid #ef4444":"2px solid transparent"},onMouseEnter:C=>{y!=="outOfStock"&&(C.target.style.background="#f1f5f9")},onMouseLeave:C=>{y!=="outOfStock"&&(C.target.style.background="#f8fafc")},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-circle-xmark",style:{fontSize:"18px",color:"white"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.outOfStock}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Out of Stock"})]})]})})]}),a.jsx("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"2px solid rgba(125, 141, 134, 0.3)"},children:a.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"center",flexWrap:"wrap"},children:[a.jsx("div",{style:{flex:"1",minWidth:"250px",maxWidth:"400px"},children:a.jsxs("div",{style:{position:"relative",display:"flex",gap:"8px"},children:[a.jsxs("div",{style:{position:"relative",flex:1},children:[a.jsx("i",{className:"fa-solid fa-search",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#7d8d86",fontSize:"14px",zIndex:1}}),a.jsx("input",{type:"text",placeholder:"Search products... (Press Enter to search)",value:re,onChange:mt,onKeyPress:De,onBlur:()=>{setTimeout(()=>te(!1),200)},onFocus:()=>{re.length>=2&&ae.length>0&&te(!0)},style:{width:"100%",padding:"10px 12px 10px 36px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",boxSizing:"border-box"}}),re&&a.jsx("button",{onClick:xr,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"12px",transition:"color 0.2s ease"},onMouseEnter:C=>C.target.style.color="#ef4444",onMouseLeave:C=>C.target.style.color="#7d8d86",children:a.jsx("i",{className:"fa-solid fa-times"})}),Q&&ae.length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #d1d5db",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:50,maxHeight:"300px",overflow:"auto"},children:ae.map((C,he)=>a.jsx("div",{onClick:()=>vt(C),style:{padding:"12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:he<ae.length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:Ae=>Ae.target.style.background="#f9fafb",onMouseLeave:Ae=>Ae.target.style.background="#f8fafc",children:C.type==="product"?a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"6px",overflow:"hidden",flexShrink:0,backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:C.product.image_url?a.jsx("img",{src:C.product.image_url,alt:C.product.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):a.jsx("i",{className:"fa-solid fa-box",style:{color:"#9ca3af",fontSize:"16px"}})}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("div",{style:{fontWeight:"500",marginBottom:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:C.product.name}),a.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{children:C.product.category}),a.jsx("span",{children:"?"}),a.jsx("span",{style:{fontWeight:"500",color:"#059669"},children:C.product.is_weighted?`?${C.product.price_per_unit}/${C.product.weight_unit}`:`?${C.product.price}`}),C.product.sku&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"?"}),a.jsxs("span",{children:["SKU: ",C.product.sku]})]})]})]}),a.jsx("i",{className:"fa-solid fa-box",style:{color:"#7d8d86",fontSize:"14px",flexShrink:0}})]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-tags",style:{color:"#7d8d86",fontSize:"16px",width:"16px",flexShrink:0}}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("div",{style:{fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:C.name}),a.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Category"})]}),a.jsx("i",{className:"fa-solid fa-arrow-right",style:{color:"#7d8d86",fontSize:"12px",flexShrink:0}})]})},he))})]}),a.jsxs("button",{onClick:ie,style:{padding:"10px 16px",background:"#7d8d86",color:"#f1f0e4",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},onMouseEnter:C=>C.target.style.background="#bca88d",onMouseLeave:C=>C.target.style.background="#7d8d86",children:[a.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"12px"}}),"Search"]})]})}),a.jsx("div",{style:{minWidth:"180px"},children:a.jsx("select",{value:de,onChange:C=>oe(C.target.value),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",cursor:"pointer"},children:Cs.map(C=>a.jsx("option",{value:C,children:C==="all"?"All Categories":C},C))})})]})}),a.jsx("div",{style:{background:"#f8fafc",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid rgba(125, 141, 134, 0.3)"},children:a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{style:{background:"#3e3f29",borderBottom:"4px solid #7d8d86"},children:a.jsxs("tr",{children:[a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Product"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Category"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Price"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Stock"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Status"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86"},children:"Actions"})]})}),a.jsx("tbody",{style:{border:"1px solid rgba(125, 141, 134, 0.2)"},children:ar.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:6,style:{padding:"40px",textAlign:"center",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:"No products found"}),a.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0"},children:"Add your first product to get started!"})]})}):ar.map(C=>{const he=Zt(C.stock_quantity,C.reorder_level);return a.jsxs("tr",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",borderLeft:"1px solid rgba(125, 141, 134, 0.2)",borderRight:"1px solid rgba(125, 141, 134, 0.2)",transition:"background 0.2s ease",cursor:"pointer"},onClick:()=>Nr(C),onMouseEnter:Ae=>Ae.target.style.background="rgba(125, 141, 134, 0.05)",onMouseLeave:Ae=>Ae.target.style.background="transparent",children:[a.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[C.image_url&&a.jsx("img",{src:C.image_url,alt:C.name,onClick:Ae=>{Ae.stopPropagation(),C.image_url&&rt(C.image_url)},style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:Ae=>{const st=Ae.target;st.style.transform="scale(1.05)",st.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",Te("Click on the image to see it in full size! This helps you get a better look at the product."),Le(!0)},onMouseLeave:Ae=>{const st=Ae.target;st.style.transform="scale(1)",st.style.boxShadow="none",Le(!1)}}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 4px 0"},children:ir(C.name)}),a.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["ID: ",C.product_id]})]})]})}),a.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:a.jsx("span",{style:{background:"#f3f4f6",color:Vt(C.category),padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",border:`1px solid ${Vt(C.category)}`},children:C.category})}),a.jsxs("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:C.is_weighted&&C.price_per_unit&&C.weight_unit?`?${C.price_per_unit.toFixed(2)}/${C.weight_unit}`:`?${C.price.toFixed(2)}`}),C.is_weighted&&a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"4px 0 0 0"},children:"Sold by weight"})]}),a.jsxs("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:C.stock_quantity}),a.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["Reorder: ",C.reorder_level]})]}),a.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:a.jsx("span",{style:{background:he.bgColor,color:he.textColor,padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:he.status==="good"?"In Stock":he.status==="low"?"Low Stock":"Out of Stock"})}),a.jsx("td",{style:{padding:"16px"},children:a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e("canManageProducts")&&a.jsxs("button",{onClick:Ae=>{Ae.stopPropagation(),console.log("Edit button clicked for product:",C.name),Ke(C)},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:Ae=>{Ae.target.style.background="#bca88d",Te(`Click to edit "${C.name}". You can update the price, stock quantity, reorder level, and other details!`),Le(!0)},onMouseLeave:Ae=>{Ae.target.style.background="#7d8d86",Le(!1)},children:[a.jsx("i",{className:"fa-solid fa-pen-to-square",style:{marginRight:"4px"}}),"Edit"]}),a.jsxs("button",{onClick:Ae=>{Ae.stopPropagation(),St(C)},style:{background:"#ef4444",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:Ae=>Ae.target.style.background="#dc2626",onMouseLeave:Ae=>Ae.target.style.background="#ef4444",children:[a.jsx("i",{className:"fa-solid fa-trash-can",style:{marginRight:"4px"}}),"Delete"]})]})})]},C.product_id)})})]})})}),a.jsx("div",{style:{marginTop:"16px",fontSize:"14px",color:"#7d8d86",textAlign:"center",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)",marginBottom:"16px"},children:Xt>0?a.jsxs(a.Fragment,{children:["Showing ",Dr,"-",rn," of ",Xt," products",Et>1&&a.jsxs("span",{style:{marginLeft:"16px"},children:["(Page ",ft," of ",Et,")"]})]}):"No products found"}),Et>1&&a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("label",{style:{fontSize:"14px",color:"#3e3f29",fontWeight:"500"},children:"Show:"}),a.jsxs("select",{value:Dt,onChange:C=>F(parseInt(C.target.value)),style:{padding:"6px 12px",border:"2px solid #bca88d",borderRadius:"6px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",cursor:"pointer"},children:[a.jsx("option",{value:5,children:"5"}),a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]}),a.jsx("span",{style:{fontSize:"14px",color:"#7d8d86"},children:"per page"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsxs("button",{onClick:z,disabled:ft===1,style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:ft===1?"#f3f4f6":"white",color:ft===1?"#9ca3af":"#3e3f29",cursor:ft===1?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:C=>{ft!==1&&(C.target.style.background="#f8f9fa")},onMouseLeave:C=>{ft!==1&&(C.target.style.background="#f8fafc")},children:[a.jsx("i",{className:"fa-solid fa-chevron-left",style:{marginRight:"4px"}}),"Previous"]}),a.jsx("div",{style:{display:"flex",gap:"4px"},children:Array.from({length:Math.min(5,Et)},(C,he)=>{let Ae;return Et<=5||ft<=3?Ae=he+1:ft>=Et-2?Ae=Et-4+he:Ae=ft-2+he,a.jsx("button",{onClick:()=>H(Ae),style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:ft===Ae?"#7d8d86":"white",color:ft===Ae?"#f1f0e4":"#3e3f29",cursor:"pointer",fontSize:"14px",fontWeight:ft===Ae?"600":"400",transition:"all 0.2s ease",minWidth:"40px"},onMouseEnter:st=>{ft!==Ae&&(st.target.style.background="#f8f9fa")},onMouseLeave:st=>{ft!==Ae&&(st.target.style.background="#f8fafc")},children:Ae},Ae)})}),a.jsxs("button",{onClick:G,disabled:ft===Et,style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:ft===Et?"#f3f4f6":"white",color:ft===Et?"#9ca3af":"#3e3f29",cursor:ft===Et?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:C=>{ft!==Et&&(C.target.style.background="#f8f9fa")},onMouseLeave:C=>{ft!==Et&&(C.target.style.background="#f8fafc")},children:["Next",a.jsx("i",{className:"fa-solid fa-chevron-right",style:{marginLeft:"4px"}})]})]})]}),J&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:a.jsxs("div",{style:{background:"#f8fafc",borderRadius:"16px",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Add New Product"}),a.jsx("button",{onClick:We,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:C=>{C.target.style.background="#f3f4f6",C.target.style.color="#3e3f29",Te("Click this X button to close the form without saving. It's the same as clicking Cancel!"),Le(!0)},onMouseLeave:C=>{C.target.style.background="none",C.target.style.color="#7d8d86",Le(!1)},children:a.jsx("i",{className:"fa-solid fa-times"})})]}),a.jsxs("form",{onSubmit:ge,onKeyDown:Ie,children:[p&&a.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:p}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),a.jsx("input",{type:"text",required:!0,value:E.product_name,onChange:C=>P({...E,product_name:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("input",{type:"text",required:!0,value:E.category,onChange:C=>{P({...E,category:C.target.value}),Ve(C.target.value.length>=2)},onFocus:()=>{Ve(E.category.length>=2),Te("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),Le(!0)},onBlur:()=>setTimeout(()=>Ve(!1),200),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),Be&&Mn(E.category).length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#f8fafc",border:"2px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:Mn(E.category).map((C,he)=>a.jsxs("div",{onClick:()=>{P({...E,category:C}),Ve(!1),Te(`Great choice! I've selected "${C}" for you. This helps keep your categories organized!`),Le(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:he<Mn(E.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:Ae=>Ae.target.style.background="#f8f9fa",onMouseLeave:Ae=>Ae.target.style.background="transparent",children:[a.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),C]},he))})]})]})]}),a.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsx("input",{type:"checkbox",id:"is_weighted",checked:E.is_weighted,onChange:C=>P({...E,is_weighted:C.target.checked}),style:{width:"16px",height:"16px"}}),a.jsx("label",{htmlFor:"is_weighted",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),E.is_weighted&&a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),a.jsxs("select",{value:E.weight_unit,onChange:C=>P({...E,weight_unit:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},children:[a.jsx("option",{value:"",children:"Select unit"}),a.jsx("option",{value:"kg",children:"Kilogram (kg)"}),a.jsx("option",{value:"g",children:"Gram (g)"}),a.jsx("option",{value:"lb",children:"Pound (lb)"}),a.jsx("option",{value:"oz",children:"Ounce (oz)"}),a.jsx("option",{value:"l",children:"Liter (l)"}),a.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",E.weight_unit||"unit"," *"]}),a.jsx("input",{type:"number",step:"0.01",required:E.is_weighted,value:E.price_per_unit,onChange:C=>P({...E,price_per_unit:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",E.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),a.jsx("input",{type:"number",step:"0.01",required:!E.is_weighted,value:E.is_weighted?"0":E.price,onChange:C=>{E.is_weighted||P({...E,price:C.target.value})},style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:E.is_weighted?"#f9fafb":"white",color:E.is_weighted?"#6b7280":"#3e3f29",cursor:E.is_weighted?"not-allowed":"text"},placeholder:E.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:E.is_weighted})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),a.jsx("input",{type:"number",required:!0,value:E.stock_quantity,onChange:C=>P({...E,stock_quantity:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),a.jsx("input",{type:"number",required:!0,value:E.reorder_level,onChange:C=>P({...E,reorder_level:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"10"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",value:E.tax_rate,onChange:C=>P({...E,tax_rate:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),a.jsx("input",{type:"text",value:E.supplier_info,onChange:C=>P({...E,supplier_info:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU (Auto-generated if empty)"}),a.jsx("input",{type:"text",value:E.sku,onChange:C=>P({...E,sku:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Leave empty for auto-generation"})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Barcode"}),a.jsx("input",{type:"text",value:E.barcode,onChange:C=>P({...E,barcode:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Scan or enter barcode"})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),a.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[a.jsx("input",{type:"file",accept:"image/*",onChange:nt,style:{display:"none"},id:"image-upload"}),a.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:C=>{C.target.style.borderColor="#7d8d86",C.target.style.color="#3e3f29",Te("Click here to upload a product image! This helps customers see what they're buying."),Le(!0)},onMouseLeave:C=>{C.target.style.borderColor="#bca88d",C.target.style.color="#7d8d86",Le(!1)},children:[a.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(q||D?.image_url)&&a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:q||D?.image_url,alt:"Preview",onClick:()=>{const C=q||D?.image_url;C&&rt(C)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:C=>{const he=C.target;he.style.transform="scale(1.05)",he.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:C=>{const he=C.target;he.style.transform="scale(1)",he.style.boxShadow="none"}}),a.jsx("button",{type:"button",onClick:()=>{be(null),je(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),a.jsx("textarea",{value:E.description,onChange:C=>P({...E,description:C.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:We,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:C=>{C.target.style.background="#e5e7eb",Te("This will close the form and clear all the information you've entered. Don't worry, you can always start over!"),Le(!0)},onMouseLeave:C=>{C.target.style.background="#f3f4f6",Le(!1)},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:W,style:{background:W?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:W?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:C=>{W||(Te("This will save your new product to the inventory! Make sure all required fields are filled out before clicking."),Le(!0))},onMouseLeave:C=>{W||Le(!1)},children:W?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add Product"]})})]})]})]})}),se&&D&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:a.jsxs("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Edit Product"}),a.jsx("button",{onClick:We,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:C=>{C.target.style.background="#f3f4f6",C.target.style.color="#3e3f29",Te("Click this X button to close the edit form without saving. It's the same as clicking Cancel!"),Le(!0)},onMouseLeave:C=>{C.target.style.background="none",C.target.style.color="#7d8d86",Le(!1)},children:a.jsx("i",{className:"fa-solid fa-times"})})]}),a.jsxs("form",{onSubmit:we,onKeyDown:Ie,children:[p&&a.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:p}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),a.jsx("input",{type:"text",required:!0,value:E.product_name,onChange:C=>P({...E,product_name:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("input",{type:"text",required:!0,value:E.category,onChange:C=>{P({...E,category:C.target.value}),Ve(C.target.value.length>=2)},onFocus:()=>{Ve(E.category.length>=2),Te("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),Le(!0)},onBlur:()=>setTimeout(()=>Ve(!1),200),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),Be&&Mn(E.category).length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#f8fafc",border:"2px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:Mn(E.category).map((C,he)=>a.jsxs("div",{onClick:()=>{P({...E,category:C}),Ve(!1),Te(`Great choice! I've selected "${C}" for you. This helps keep your categories organized!`),Le(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:he<Mn(E.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:Ae=>Ae.target.style.background="#f8f9fa",onMouseLeave:Ae=>Ae.target.style.background="transparent",children:[a.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),C]},he))})]})]})]}),a.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsx("input",{type:"checkbox",id:"is_weighted_edit",checked:E.is_weighted,onChange:C=>P({...E,is_weighted:C.target.checked}),style:{width:"16px",height:"16px"}}),a.jsx("label",{htmlFor:"is_weighted_edit",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),E.is_weighted&&a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),a.jsxs("select",{value:E.weight_unit,onChange:C=>P({...E,weight_unit:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},children:[a.jsx("option",{value:"",children:"Select unit"}),a.jsx("option",{value:"kg",children:"Kilogram (kg)"}),a.jsx("option",{value:"g",children:"Gram (g)"}),a.jsx("option",{value:"lb",children:"Pound (lb)"}),a.jsx("option",{value:"oz",children:"Ounce (oz)"}),a.jsx("option",{value:"l",children:"Liter (l)"}),a.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",E.weight_unit||"unit"," *"]}),a.jsx("input",{type:"number",step:"0.01",required:E.is_weighted,value:E.price_per_unit,onChange:C=>P({...E,price_per_unit:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",E.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),a.jsx("input",{type:"number",step:"0.01",required:!E.is_weighted,value:E.is_weighted?"0":E.price,onChange:C=>{E.is_weighted||P({...E,price:C.target.value})},style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:E.is_weighted?"#f9fafb":"white",color:E.is_weighted?"#6b7280":"#3e3f29",cursor:E.is_weighted?"not-allowed":"text"},placeholder:E.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:E.is_weighted})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),a.jsx("input",{type:"number",required:!0,value:E.stock_quantity,onChange:C=>P({...E,stock_quantity:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),a.jsx("input",{type:"number",required:!0,value:E.reorder_level,onChange:C=>P({...E,reorder_level:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"10"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",value:E.tax_rate,onChange:C=>P({...E,tax_rate:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),a.jsx("input",{type:"text",value:E.supplier_info,onChange:C=>P({...E,supplier_info:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU"}),a.jsx("input",{type:"text",value:E.sku,onChange:C=>P({...E,sku:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Update SKU"})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Barcode"}),a.jsx("input",{type:"text",value:E.barcode,onChange:C=>P({...E,barcode:C.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Scan or enter barcode"})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),a.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[a.jsx("input",{type:"file",accept:"image/*",onChange:nt,style:{display:"none"},id:"image-upload"}),a.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:C=>{C.target.style.borderColor="#7d8d86",C.target.style.color="#3e3f29",Te("Click here to upload a product image! This helps customers see what they're buying."),Le(!0)},onMouseLeave:C=>{C.target.style.borderColor="#bca88d",C.target.style.color="#7d8d86",Le(!1)},children:[a.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(q||D?.image_url)&&a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:q||D?.image_url,alt:"Preview",onClick:()=>{const C=q||D?.image_url;C&&rt(C)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:C=>{const he=C.target;he.style.transform="scale(1.05)",he.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:C=>{const he=C.target;he.style.transform="scale(1)",he.style.boxShadow="none"}}),a.jsx("button",{type:"button",onClick:()=>{be(null),je(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),a.jsx("textarea",{value:E.description,onChange:C=>P({...E,description:C.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:We,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:C=>{C.target.style.background="#e5e7eb",Te("This will close the edit form and discard any changes you've made. Don't worry, you can always edit again!"),Le(!0)},onMouseLeave:C=>{C.target.style.background="#f3f4f6",Le(!1)},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:W,style:{background:W?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:W?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:C=>{W||(Te("This will save your changes to the product! Make sure all required fields are filled out before clicking."),Le(!0))},onMouseLeave:C=>{W||Le(!1)},children:W?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-save"}),"Update Product"]})})]})]})]})}),tt&&ct&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:wt,children:a.jsx("div",{style:{position:"relative",width:"400px",height:"400px",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:`url(${ct})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:"8px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",backgroundColor:"#ffffff"},onClick:C=>C.stopPropagation(),children:a.jsx("button",{onClick:wt,style:{position:"absolute",top:"-40px",right:"-40px",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.9)",border:"none",color:"#3e3f29",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s ease"},onMouseEnter:C=>C.target.style.background="rgba(255, 255, 255, 1)",onMouseLeave:C=>C.target.style.background="rgba(255, 255, 255, 0.9)",children:a.jsx("i",{className:"fa-solid fa-times"})})})}),ut&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",marginBottom:"16px",textAlign:"center"},children:"Delete Product"}),a.jsxs("p",{style:{fontSize:"16px",color:"#1a1a1a",marginBottom:"8px",textAlign:"center"},children:["Are you sure you want to delete ",a.jsx("strong",{children:ut.name}),"?"]}),a.jsx("p",{style:{fontSize:"14px",color:"#ef4444",marginBottom:"24px",textAlign:"center"},children:"This action cannot be undone."}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>St(null),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:C=>C.target.style.background="#4b5563",onMouseLeave:C=>C.target.style.background="#6b7280",children:"Cancel"}),a.jsx("button",{onClick:()=>Ee(ut.product_id),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:C=>C.target.style.background="#dc2626",onMouseLeave:C=>C.target.style.background="#ef4444",children:"Delete Product"})]})]})}),w&&S&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>_(!1),children:a.jsxs("div",{style:{background:"#f8fafc",borderRadius:"16px",padding:"32px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onClick:C=>C.stopPropagation(),children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px",paddingBottom:"20px",borderBottom:"2px solid #f1f5f9"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[S.image_url&&a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:S.image_url,alt:S.name,style:{width:"80px",height:"80px",borderRadius:"16px",objectFit:"cover",border:"3px solid #e5e7eb",background:"#f3f4f6",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}),a.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#10b981",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:a.jsx("i",{className:"fas fa-chart-line"})})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[a.jsx("i",{className:"fas fa-analytics",style:{color:"#7d8d86",fontSize:"20px"}}),a.jsx("h2",{style:{margin:0,fontSize:"28px",fontWeight:"700",color:"#1e293b",letterSpacing:"-0.025em"},children:"Product Insights"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"4px"},children:[a.jsx("i",{className:"fas fa-box",style:{color:"#7d8d86",fontSize:"16px"}}),a.jsx("p",{style:{margin:0,fontSize:"18px",color:"#374151",fontWeight:"600"},children:S.name})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fas fa-tags",style:{color:"#9ca3af",fontSize:"14px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px",color:"#6b7280"},children:S.category}),S.sku&&a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-barcode",style:{color:"#9ca3af",fontSize:"14px",marginLeft:"16px"}}),a.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:["SKU: ",S.sku]})]})]})]})]}),a.jsx("button",{onClick:()=>_(!1),style:{width:"40px",height:"40px",borderRadius:"50%",background:"#f8fafc",border:"2px solid #e2e8f0",color:"#6b7280",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:C=>{C.currentTarget.style.background="#ef4444",C.currentTarget.style.color="white",C.currentTarget.style.borderColor="#ef4444"},onMouseLeave:C=>{C.currentTarget.style.background="#f8fafc",C.currentTarget.style.color="#6b7280",C.currentTarget.style.borderColor="#e2e8f0"},children:a.jsx("i",{className:"fas fa-times"})})]}),L?a.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[a.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",fontSize:"18px",color:"#7d8d86",background:"#f8fafc",padding:"20px 32px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[a.jsx("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"20px",color:"#3b82f6"}}),"Loading insights..."]}),a.jsx("div",{style:{fontSize:"14px",color:"#9ca3af",marginTop:"12px"},children:"Analyzing sales data and trends"})]}):k?a.jsxs("div",{children:[a.jsxs("div",{style:{marginBottom:"40px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-chart-bar",style:{color:"#7d8d86",fontSize:"20px"}}),a.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1e293b"},children:"Performance Overview"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px"},children:[a.jsxs("div",{style:{background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #93c5fd",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#3b82f6",fontSize:"16px"},children:a.jsx("i",{className:"fas fa-shopping-cart"})}),a.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e40af",marginBottom:"8px"},children:k.totalSales}),a.jsx("div",{style:{fontSize:"14px",color:"#1e40af",fontWeight:"500"},children:"Total Sales"})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #86efac",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#10b981",fontSize:"16px"},children:a.jsx("i",{className:"fas fa-euro-sign"})}),a.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#166534",marginBottom:"8px"},children:["?",k.totalRevenue.toFixed(2)]}),a.jsx("div",{style:{fontSize:"14px",color:"#166534",fontWeight:"500"},children:"Total Revenue"})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #fbbf24",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#f59e0b",fontSize:"16px"},children:a.jsx("i",{className:"fas fa-weight"})}),a.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#92400e",marginBottom:"8px"},children:k.totalQuantitySold.toFixed(1)}),a.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:"500"},children:[S.is_weighted?S.weight_unit||"kg":"Units"," Sold"]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #f9a8d4",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#ec4899",fontSize:"16px"},children:a.jsx("i",{className:"fas fa-percentage"})}),a.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#be185d",marginBottom:"8px"},children:[k.profitMargin.toFixed(1),"%"]}),a.jsx("div",{style:{fontSize:"14px",color:"#be185d",fontWeight:"500"},children:"Est. Profit Margin"})]})]})]}),k.chartData&&a.jsxs("div",{style:{marginBottom:"40px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[a.jsx("i",{className:"fas fa-chart-line",style:{color:"#7d8d86",fontSize:"20px"}}),a.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1e293b"},children:"Sales Trends & Analytics"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[a.jsxs("button",{onClick:()=>M("daily"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:ne==="daily"?"#3b82f6":"#f8fafc",color:ne==="daily"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:ne==="daily"?"0 4px 6px rgba(59, 130, 246, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[a.jsx("i",{className:"fas fa-calendar-day"}),"Daily (30 days)"]}),a.jsxs("button",{onClick:()=>M("weekly"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:ne==="weekly"?"#10b981":"#f8fafc",color:ne==="weekly"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:ne==="weekly"?"0 4px 6px rgba(16, 185, 129, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[a.jsx("i",{className:"fas fa-calendar-week"}),"Weekly (4 weeks)"]}),a.jsxs("button",{onClick:()=>M("monthly"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:ne==="monthly"?"#f59e0b":"#f8fafc",color:ne==="monthly"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:ne==="monthly"?"0 4px 6px rgba(245, 158, 11, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[a.jsx("i",{className:"fas fa-calendar-alt"}),"Monthly (6 months)"]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",minHeight:"220px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[ne==="daily"&&a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-chart-bar",style:{color:"#3b82f6",fontSize:"16px"}}),a.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Daily Sales (Last 30 Days)"})]}),a.jsx("div",{style:{display:"flex",alignItems:"end",gap:"4px",height:"150px"},children:k.chartData.daily.map((C,he)=>{const Ae=Math.max(...k.chartData.daily.map(bt=>bt.sales)),st=Ae>0?C.sales/Ae*120:0;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[a.jsx("div",{style:{width:"100%",height:`${st}px`,background:C.sales>0?"#7d8d86":"#e5e7eb",borderRadius:"2px 2px 0 0",minHeight:"2px"},title:`${C.date}: ${C.sales} sales, ?${C.revenue.toFixed(2)}`}),a.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:C.day})]},he)})})]}),ne==="weekly"&&a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-chart-area",style:{color:"#10b981",fontSize:"16px"}}),a.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Weekly Sales (Last 4 Weeks)"})]}),a.jsx("div",{style:{display:"flex",alignItems:"end",gap:"8px",height:"150px"},children:k.chartData.weekly.map((C,he)=>{const Ae=Math.max(...k.chartData.weekly.map(bt=>bt.sales)),st=Ae>0?C.sales/Ae*120:0;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[a.jsx("div",{style:{width:"100%",height:`${st}px`,background:C.sales>0?"#10b981":"#e5e7eb",borderRadius:"4px 4px 0 0",minHeight:"2px"},title:`${C.week}: ${C.sales} sales, ?${C.revenue.toFixed(2)}`}),a.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:C.week})]},he)})})]}),ne==="monthly"&&a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-chart-pie",style:{color:"#f59e0b",fontSize:"16px"}}),a.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Monthly Sales (Last 6 Months)"})]}),a.jsx("div",{style:{display:"flex",alignItems:"end",gap:"8px",height:"150px"},children:k.chartData.monthly.map((C,he)=>{const Ae=Math.max(...k.chartData.monthly.map(bt=>bt.sales)),st=Ae>0?C.sales/Ae*120:0;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[a.jsx("div",{style:{width:"100%",height:`${st}px`,background:C.sales>0?"#f59e0b":"#e5e7eb",borderRadius:"4px 4px 0 0",minHeight:"2px"},title:`${C.month}: ${C.sales} sales, ?${C.revenue.toFixed(2)}`}),a.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:C.month.split(" ")[0]})]},he)})})]})]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",marginBottom:"32px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-info-circle",style:{color:"#7d8d86",fontSize:"20px"}}),a.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Product Information"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-barcode",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Product ID"}),a.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.product_id})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-tags",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Category"}),a.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.category})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-boxes",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Current Stock"}),a.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.stock_quantity})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-exclamation-triangle",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Reorder Level"}),a.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.reorder_level})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-euro-sign",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Price"}),a.jsxs("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:["?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsx("i",{className:"fas fa-weight",style:{color:"#6b7280",fontSize:"16px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Type"}),a.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.is_weighted?"Weighted Product":"Regular Product"})]})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px",marginBottom:"32px"},children:[a.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[a.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Sales Performance"}),a.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",lineHeight:"1.6"},children:[a.jsxs("div",{style:{marginBottom:"8px"},children:[a.jsx("strong",{children:"Average sales per day:"})," ",k.averageSalesPerDay.toFixed(1)]}),a.jsxs("div",{style:{marginBottom:"8px"},children:[a.jsx("strong",{children:"Estimated profit:"})," ?",k.estimatedProfit.toFixed(2)]}),a.jsxs("div",{style:{marginBottom:"8px"},children:[a.jsx("strong",{children:"Last sold:"})," ",k.lastSoldDate?new Date(k.lastSoldDate).toLocaleDateString():"Never"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Price per unit:"})," ?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]})]})]}),a.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[a.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Top Selling Days (Last 30 Days)"}),k.topSellingDays.length>0?a.jsx("div",{style:{fontSize:"14px",color:"#7d8d86"},children:k.topSellingDays.map((C,he)=>a.jsxs("div",{style:{marginBottom:"4px"},children:[new Date(C.date).toLocaleDateString(),": ",C.count," sales"]},he))}):a.jsx("div",{style:{fontSize:"14px",color:"#7d8d86"},children:"No sales in the last 30 days"})]})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[a.jsx("i",{className:"fas fa-receipt",style:{color:"#7d8d86",fontSize:"20px"}}),a.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Recent Sales"})]}),k.recentSalesList.length>0?a.jsx("div",{style:{maxHeight:"300px",overflow:"auto"},children:a.jsxs("table",{style:{width:"100%",fontSize:"14px"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{borderBottom:"2px solid #e5e7eb",background:"#f9fafb"},children:[a.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fas fa-calendar",style:{fontSize:"12px",color:"#6b7280"}}),"Date"]}),a.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fas fa-hashtag",style:{fontSize:"12px",color:"#6b7280"}}),"Quantity"]}),a.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fas fa-euro-sign",style:{fontSize:"12px",color:"#6b7280"}}),"Price"]}),a.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fas fa-user",style:{fontSize:"12px",color:"#6b7280"}}),"Customer"]}),a.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fas fa-user-tie",style:{fontSize:"12px",color:"#6b7280"}}),"Cashier"]})]})}),a.jsx("tbody",{children:k.recentSalesList.map((C,he)=>a.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[a.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:[C.date," ",C.time]}),a.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:[C.quantity," ",C.unit]}),a.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:["?",C.price.toFixed(2)]}),a.jsx("td",{style:{padding:"8px 0",color:"#3e3f29"},children:C.customer}),a.jsx("td",{style:{padding:"8px 0",color:"#3e3f29"},children:C.cashier})]},he))})]})}):a.jsx("div",{style:{fontSize:"14px",color:"#7d8d86",textAlign:"center",padding:"20px"},children:"No sales recorded for this product"})]})]}):a.jsxs("div",{children:[a.jsxs("div",{style:{textAlign:"center",padding:"40px",marginBottom:"32px",background:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)",borderRadius:"16px",border:"1px solid #fecaca"},children:[a.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",fontSize:"20px",color:"#dc2626",marginBottom:"12px",fontWeight:"600"},children:[a.jsx("i",{className:"fas fa-chart-line",style:{fontSize:"24px"}}),"No Sales Data Available"]}),a.jsx("div",{style:{fontSize:"14px",color:"#991b1b"},children:"This product hasn't been sold yet"})]}),a.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[a.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Product Information"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",fontSize:"14px",color:"#7d8d86"},children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Product ID:"})," ",S.product_id]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Category:"})," ",S.category]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Current Stock:"})," ",S.stock_quantity]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Reorder Level:"})," ",S.reorder_level]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Price:"})," ?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Type:"})," ",S.is_weighted?"Weighted Product":"Regular Product"]})]})]})]})]})}),a.jsx(_n,{})]})};let xo=null,Sv=!1;const zk=e=>{Sv=e},Uk=({onBarcodeScanned:e,debounceMs:t=100,minLength:r=8,maxLength:s=20,isActive:o=!0,context:c="default"})=>{const[d,f]=T.useState(!1),[p,h]=T.useState(""),[x,v]=T.useState(0),y=T.useCallback(_=>{if(!xo||xo.context!==c||Sv&&c!=="product-modal")return;const S=Date.now();if(S-x>t*3&&h(""),v(S),_.key==="Enter"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation();const A=p.trim();if(console.log(" Barcode scanner detected Enter, input:",A,"length:",A.length,"min:",r,"max:",s),A.length>=r&&A.length<=s){console.log(" Barcode valid, calling onBarcodeScanned"),e(A),h("");return}h("");return}_.key.length===1&&h(A=>{const k=A+_.key;return console.log(" Barcode scanner input:",k),k}),_.key==="Tab"||_.key==="Shift"||_.key==="Control"||_.key},[p,x,t,r,s,e,c]),b=T.useCallback(()=>{f(!0),h(""),v(Date.now()),xo={context:c,onBarcodeScanned:e}},[c,e]),w=T.useCallback(()=>{f(!1),h(""),xo&&xo.context===c&&(xo=null)},[c]);return T.useEffect(()=>{if(d&&o){document.addEventListener("keydown",y,!0);const _=S=>{if(S.target&&S.target.tagName==="INPUT"){const A=S.target;A.value&&A.value.length>=r&&A.value.length<=s&&(console.log(" Fallback barcode detected:",A.value),e(A.value),A.value="")}};return document.addEventListener("input",_,!0),()=>{document.removeEventListener("keydown",y,!0),document.removeEventListener("input",_,!0)}}},[d,o,y,r,s,e]),{isListening:d,startListening:b,stopListening:w,currentInput:p}},wv=(e,t,r,s,o)=>{const c=`RCP-${Date.now()}`,d=new Date,f=d.toLocaleDateString("en-IE"),p=d.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"}),x=(S=>S&&{USD:"$",EUR:"",GBP:"",CAD:"C$",AUD:"A$",JPY:""}[S]||"")(s?.currency),v=s?.business_name||s?.name||"Business",y=s?.address||"",b=s?.phone_number||"",w=s?.logo_url||"/retailpos/images/backgrounds/logo1.png",_=s?.receipt_footer||"Thank you for shopping with us!";return`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Receipt - ${c}</title>
      <style>
        body { 
          font-family: 'Courier New', monospace; 
          font-size: 12px; 
          line-height: 1.4; 
          margin: 0; 
          padding: 10px; 
          background: white;
          color: black;
        }
        .receipt { 
          width: 100%; 
          max-width: 400px; 
          margin: 0 auto; 
          border: 1px solid #ccc; 
          padding: 20px; 
          background: white;
        }
        .header { 
          text-align: center; 
          margin-bottom: 15px; 
          border-bottom: 1px dashed #333; 
          padding-bottom: 10px; 
        }
        .logo-fallback {
          display: none;
          background: #333;
          color: white;
          padding: 8px;
          text-align: center;
          font-weight: bold;
          margin-bottom: 10px;
        }
        .business-info { 
          font-size: 10px; 
          margin: 8px 0; 
        }
        .divider { 
          border-top: 1px dashed #333; 
          margin: 10px 0; 
        }
        .item-row { 
          display: flex; 
          justify-content: space-between; 
          margin: 3px 0; 
        }
        .total-row { 
          font-weight: bold; 
          border-top: 1px solid #333; 
          padding-top: 5px; 
          margin-top: 8px; 
        }
        .payment-info { 
          margin: 10px 0; 
        }
        .partial-payment-info {
          margin: 10px 0;
          padding: 8px;
          background: #fef3c7;
          border: 1px solid #f59e0b;
          border-radius: 4px;
        }
        .notes-section {
          margin: 10px 0;
          padding: 8px;
          background: #f5f5f5;
          border-radius: 4px;
        }
        .footer { 
          text-align: center; 
          margin-top: 15px; 
          font-size: 10px; 
          border-top: 1px dashed #333; 
          padding-top: 10px; 
        }
        .warning {
          color: #dc2626;
          font-weight: bold;
        }
        .success {
          color: #059669;
          font-weight: bold;
        }
      </style>
    </head>
    <body>
      <div class="receipt">
        <div class="header">
          <img src="${w}" alt="${v}" style="max-width: 80px; height: auto; display: block; margin: 0 auto 10px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
          <div class="logo-fallback" style="display: none; font-size: 24px; font-weight: bold; margin-bottom: 8px; color: #3e3f29;">${v}</div>
          <div class="business-info">
            ${y?`<div>${y}</div>`:""}
            ${b?`<div>${b}</div>`:""}
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="item-row">
          <span>Date: ${f}</span>
          <span>Time: ${p}</span>
        </div>
        <div class="item-row">
          <span>Receipt: ${c}</span>
          <span>Cashier: ${r?.username||"System"}</span>
        </div>
        
        ${t.customerName?`
        <div class="item-row">
          <span>Customer: ${t.customerName}</span>
        </div>
        `:""}
        
        <div class="divider"></div>
        
        ${e.items.map(S=>{const A=S.product?.name||S.sideBusinessItem?.name||"Unknown Item",k=S.product?.price||S.customPrice||S.sideBusinessItem?.price||0;return`
          <div class="item-row">
            <span>${A} x${S.quantity}</span>
            <span>${x}${(k*S.quantity).toFixed(2)}</span>
          </div>
        `}).join("")}
        
        <div class="divider"></div>
        
        <div class="item-row total-row">
          <span>SUBTOTAL:</span>
          <span>${x}${e.subtotal.toFixed(2)}</span>
        </div>
        <div class="item-row total-row">
          <span>GRAND TOTAL:</span>
          <span>${x}${e.total.toFixed(2)}</span>
        </div>
        
        <div class="payment-info">
          <div class="item-row">
            <span>Payment Method:</span>
            <span>${t.method.toUpperCase()}</span>
          </div>
          ${t.method==="cash"?`
          <div class="item-row">
            <span>Amount Received:</span>
            <span>${x}${parseFloat(t.amountEntered).toFixed(2)}</span>
          </div>
          <div class="item-row">
            <span>Change Given:</span>
            <span>${x}${t.change.toFixed(2)}</span>
          </div>
          `:t.method==="card"?`
          <div class="item-row">
            <span>Card: ****1234</span>
            <span>Approval: ${Math.floor(Math.random()*1e4)}</span>
          </div>
          `:""}
        </div>
        
        ${o?`
        <div class="partial-payment-info">
          <div style="font-weight: bold; margin-bottom: 5px; color: #92400e;">
            <i class="fa-solid fa-credit-card" style="margin-right: 5px;"></i>
            PARTIAL PAYMENT
          </div>
          <div class="item-row">
            <span>Amount Paid Today:</span>
            <span class="success">${x}${o.amountPaid.toFixed(2)}</span>
          </div>
          <div class="item-row">
            <span>Remaining Balance:</span>
            <span class="warning">${x}${o.amountRemaining.toFixed(2)}</span>
          </div>
          ${o.dueDate?`
          <div class="item-row">
            <span>Due Date:</span>
            <span>${new Date(o.dueDate).toLocaleDateString()}</span>
          </div>
          `:""}
          ${o.notes?`
          <div style="margin-top: 5px; font-size: 10px; color: #92400e;">
            Note: ${o.notes}
          </div>
          `:""}
        </div>
        `:""}
        
        ${t.receiptNotes?`
        <div class="divider"></div>
        <div class="notes-section">
          <div style="font-weight: bold; margin-bottom: 5px;">Notes:</div>
          <div style="font-size: 9px; line-height: 1.3; margin-left: 10px;">${t.receiptNotes}</div>
        </div>
        `:""}
        
        <div class="divider"></div>
        
        <div class="footer">
          <div>${_}</div>
          <div style="margin-top: 5px;">${v}</div>
          ${o?`
          <div style="margin-top: 10px; font-size: 9px; color: #92400e;">
            <strong>Please keep this receipt for your records</strong><br>
            Remaining balance: ${x}${o.amountRemaining.toFixed(2)}
          </div>
          `:""}
        </div>
      </div>
    </body>
    </html>
  `},Wk=(e,t,r,s,o)=>{const c=window.open("","_blank");c&&(c.document.write(wv(e,t,r,s,o)),c.document.close(),c.print(),c.close())},O1=[{id:"pNInz6obpgDQGcFmaJgB",name:"Adam (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"EXAVITQu4vr4xnSDxMaL",name:"Bella (Warm, Friendly)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Josh (Professional, Clear)",type:"standard",costPer1K:.18},{id:"AZnzlk1XvdvUeBnXmlld",name:"Domi (Confident, Energetic)",type:"standard",costPer1K:.18},{id:"ErXwobaYiN019PkySvjV",name:"Elli (Natural, Conversational)",type:"standard",costPer1K:.18},{id:"MF3mGyEYCl7XYWbV9V6O",name:"Rachel (Professional, Warm)",type:"standard",costPer1K:.18},{id:"TxGEqnHWrfWFTfGW9XjX",name:"Drew (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Clyde (Friendly, Approachable)",type:"standard",costPer1K:.18}],I1=[{id:"alloy",name:"Alloy (Neutral, Balanced)",type:"standard",costPer1K:.015},{id:"echo",name:"Echo (Clear, Professional)",type:"standard",costPer1K:.015},{id:"fable",name:"Fable (Warm, Storytelling)",type:"standard",costPer1K:.015},{id:"onyx",name:"Onyx (Deep, Authoritative)",type:"standard",costPer1K:.015},{id:"nova",name:"Nova (Friendly, Energetic)",type:"standard",costPer1K:.015},{id:"shimmer",name:"Shimmer (Soft, Gentle)",type:"standard",costPer1K:.015}];class qk{settings;usage;isInitialized=!1;constructor(){this.settings=this.loadSettings(),this.usage=this.loadUsage(),this.initializeUsage()}loadSettings(){const t="sk_337a097ef281682961b7c3db26217470f085fd565c3d711d",r="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";console.log("Environment variables loaded:"),console.log("VITE_ELEVENLABS_KEY:","Present"),console.log("VITE_OPENAI_API_KEY:","Present");const s={enabled:!0,useElevenLabs:!0,selectedVoice:"HobRzuqtLputbKAXOdTj",apiKey:t,dailyLimit:5e3,useOpenAI:!0,openaiApiKey:r,openaiVoice:"alloy"};try{const o=localStorage.getItem("tts-settings");if(o){const c=JSON.parse(o),d={...s,...c};return console.log("Loaded TTS settings from localStorage:",d),d}return console.log("No saved TTS settings, using defaults:",s),s}catch(o){return console.error("Error loading TTS settings:",o),s}}loadUsage(){const t={totalCharacters:0,totalCost:0,dailyUsage:0,dailyCost:0,lastResetDate:new Date().toISOString().split("T")[0]};try{const r=localStorage.getItem("tts-usage");return r?{...t,...JSON.parse(r)}:t}catch{return t}}saveSettings(){try{localStorage.setItem("tts-settings",JSON.stringify(this.settings))}catch(t){console.error("Failed to save TTS settings:",t)}}saveUsage(){try{localStorage.setItem("tts-usage",JSON.stringify(this.usage))}catch(t){console.error("Failed to save TTS usage:",t)}}initializeUsage(){const t=new Date().toISOString().split("T")[0];this.usage.lastResetDate!==t&&(this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=t,this.saveUsage())}getSettings(){return{...this.settings}}getUsage(){return this.initializeUsage(),{...this.usage}}updateSettings(t){this.settings={...this.settings,...t},this.saveSettings()}async speak(t){if(console.log("TTS Service speak called with:",t),console.log("TTS Settings:",this.settings),console.log("useElevenLabs:",this.settings.useElevenLabs),console.log("useOpenAI:",this.settings.useOpenAI),console.log("openaiApiKey present:",!!this.settings.openaiApiKey),console.log("openaiApiKey length:",this.settings.openaiApiKey?.length||0),!this.settings.enabled)return console.log("TTS not enabled"),!1;const r=t.length,s=this.calculateCost(r);if(this.usage.dailyUsage+r>this.settings.dailyLimit&&console.log("Daily limit exceeded, trying OpenAI fallback"),this.settings.useElevenLabs&&this.settings.apiKey&&this.usage.dailyUsage+r<=this.settings.dailyLimit){if(console.log("Trying ElevenLabs TTS with voice:",this.settings.selectedVoice),await this.speakWithElevenLabs(t))return this.updateUsage(r,s),!0;console.log("ElevenLabs failed, trying OpenAI fallback...")}if(this.settings.useOpenAI&&this.settings.openaiApiKey){console.log("Trying OpenAI TTS with voice:",this.settings.openaiVoice);const o=this.calculateOpenAICost(r);if(await this.speakWithOpenAI(t))return this.updateUsage(r,o),!0;console.log("OpenAI TTS failed")}return console.log("No TTS method available"),!1}async speakWithDelay(t,r=2e3){return new Promise(s=>{setTimeout(async()=>{const o=await this.speak(t);s(o)},r)})}async speakWithElevenLabs(t){try{console.log("Making ElevenLabs API call..."),console.log("Voice ID:",this.settings.selectedVoice),console.log("API Key:",this.settings.apiKey.substring(0,10)+"...");const r=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${this.settings.selectedVoice}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":this.settings.apiKey},body:JSON.stringify({text:t,model_id:"eleven_monolingual_v1",voice_settings:{stability:.5,similarity_boost:.5}})});if(console.log("ElevenLabs response status:",r.status),!r.ok){const d=await r.text();throw console.error("ElevenLabs API error response:",d),new Error(`ElevenLabs API error: ${r.status} - ${d}`)}const s=await r.blob();console.log("Audio blob received, size:",s.size);const o=URL.createObjectURL(s),c=new Audio(o);return new Promise(d=>{c.onended=()=>{console.log("ElevenLabs audio playback ended"),URL.revokeObjectURL(o),d(!0)},c.onerror=f=>{console.error("ElevenLabs audio playback error:",f),URL.revokeObjectURL(o),d(!1)},c.onloadstart=()=>console.log("ElevenLabs audio started loading"),c.oncanplay=()=>console.log("ElevenLabs audio can play"),console.log("Starting ElevenLabs audio playback..."),c.play()})}catch(r){return console.error("ElevenLabs TTS error:",r),!1}}async speakWithOpenAI(t){try{console.log("Making OpenAI TTS API call..."),console.log("Voice:",this.settings.openaiVoice),console.log("API Key:",this.settings.openaiApiKey.substring(0,10)+"...");const r=await fetch("https://api.openai.com/v1/audio/speech",{method:"POST",headers:{Authorization:`Bearer ${this.settings.openaiApiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"tts-1",input:t,voice:this.settings.openaiVoice,response_format:"mp3"})});if(console.log("OpenAI response status:",r.status),!r.ok){const d=await r.text();throw console.error("OpenAI API error response:",d),new Error(`OpenAI API error: ${r.status} - ${d}`)}const s=await r.blob();console.log("OpenAI audio blob received, size:",s.size);const o=URL.createObjectURL(s),c=new Audio(o);return new Promise(d=>{c.onended=()=>{console.log("OpenAI audio playback ended"),URL.revokeObjectURL(o),d(!0)},c.onerror=f=>{console.error("OpenAI audio playback error:",f),URL.revokeObjectURL(o),d(!1)},c.onloadstart=()=>console.log("OpenAI audio started loading"),c.oncanplay=()=>console.log("OpenAI audio can play"),console.log("Starting OpenAI audio playback..."),c.play()})}catch(r){return console.error("OpenAI TTS error:",r),!1}}calculateCost(t){const r=O1.find(s=>s.id===this.settings.selectedVoice);return r?t/1e3*r.costPer1K:0}calculateOpenAICost(t){const r=I1.find(s=>s.id===this.settings.openaiVoice);return r?t/1e3*r.costPer1K:0}updateUsage(t,r){this.usage.totalCharacters+=t,this.usage.totalCost+=r,this.usage.dailyUsage+=t,this.usage.dailyCost+=r,this.saveUsage()}stop(){console.log("TTS service stop called")}getAvailableVoices(){return O1}getAvailableOpenAIVoices(){return I1}resetDailyUsage(){this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=new Date().toISOString().split("T")[0],this.saveUsage()}refreshSettings(){console.log("Refreshing TTS settings from environment..."),this.settings=this.loadSettings(),console.log("New settings loaded:",this.settings)}resetToDefaults(){console.log("Clearing all TTS settings and reloading from environment...");try{localStorage.removeItem("tts-settings"),console.log("Cleared localStorage settings")}catch(t){console.error("Error clearing settings:",t)}this.settings=this.loadSettings(),console.log("Reset to defaults:",this.settings)}async testOpenAI(){if(console.log("Testing OpenAI TTS connection..."),console.log("OpenAI API Key present:",!!this.settings.openaiApiKey),console.log("OpenAI Voice:",this.settings.openaiVoice),!this.settings.openaiApiKey)return console.error("No OpenAI API key found"),!1;try{const t=await this.speakWithOpenAI("Test message");return console.log("OpenAI test result:",t),t}catch(t){return console.error("OpenAI test failed:",t),!1}}}const Fr=new qk,Rd=({children:e,onClick:t,type:r="button",disabled:s=!1,className:o="",style:c={}})=>a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        @property --rotation {
          syntax: "<angle>";
          inherits: false;
          initial-value: 0deg;
        }

        .retro-button {
          --inset: 15px;
          --rad: 18px;
          /* background: rgb(255 255 255 / 0.3); */
          /* padding: var(--inset); */
          /* border-radius: calc(var(--rad) + var(--inset)); */
          border: none;
          position: relative;
          /* box-shadow: 0 4px 10px rgb(0 0 0 / 0.1); */
          cursor: pointer;
          font-family: "Poppins", sans-serif;
          font-optical-sizing: auto;
          font-weight: 600;
          font-style: normal;
        }

        /* .retro-button:before {
          --inset: -15px;
          content: "";
          display: block;
          background: conic-gradient(from var(--rotation), purple, blue, green, yellow, orange, red);
          filter: blur(20px);
          opacity: 1;
          position: absolute;
          inset: 10px;
          border-radius: calc(var(--rad) + calc(var(--inset) * -1));
          z-index: -2;
          animation: rotate 5s linear infinite;
        } */

        /* .retro-button:after {
          --inset: -15px;
          content: "";
          display: block;
          background: linear-gradient(
            to bottom,
            rgb(255 255 255 / 0.5) 0%,
            rgb(255 255 255 / 0.5) 2px,
            rgb(100 100 100 / 0.1) 30%,
            rgb(100 100 100 / 0.1) 70%,
            rgb(255 255 255 / 0.5) 99%,
            rgb(255 255 255 / 0.5) 100%
          );
          position: absolute;
          inset: -1.5px;
          border-radius: calc(var(--rad) + calc(var(--inset) * -1));
          z-index: -1;
        } */

        /* .retro-button:active:before {
          animation-play-state: paused;
          opacity: 1;
          scale: 0.9;
          filter: blur(10px);
        } */

        .retro-button:active .retro-cap {
          scale: 0.93;
        }

        .retro-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .retro-button:disabled:before {
          animation-play-state: paused;
        }

        .retro-cap {
          display: inline-block;
          background: linear-gradient(to bottom, #6b7280, #4b5563);
          border-radius: var(--rad);
          font-size: 16px;
          color: #fff;
          padding: 12px 20px;
          border: none;
          border-top: #9ca3af solid 1px;
          border-bottom: #374151 solid 1px;
          box-shadow: 0 8px 10px rgb(0 0 0 / 0.3);
          position: relative;
          transition: scale 0.1s ease-in-out;
        }

        .retro-text {
          border-radius: 50px;
          background: linear-gradient(to bottom, #4b5563, #6b7280);
          padding: 8px 20px;
          display: block;
        }

        @keyframes rotate {
          to {
            --rotation: 360deg;
          }
        }
      `}),a.jsx("button",{className:`retro-button ${o}`,onClick:t,type:r,disabled:s,style:c,children:a.jsx("span",{className:"retro-cap",children:a.jsx("span",{className:"retro-text",children:e})})})]}),Fl=()=>{const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0"),d=String(e.getSeconds()).padStart(2,"0");return`${t}-${r}-${s} ${o}:${c}:${d}`},B1=["Order confirmed! Your jollof rice dreams are one step closer.","Thanks for shopping! Even suya is jealous of your taste.","Your order is secured tighter than plantain at a party.","Order complete! Somewhere, egusi soup just smiled at you.","Confirmed! Your basket was blessed by the spirit of fufu.","You did it! May your order arrive faster than puff-puff disappears.","Order locked! Your kitchen is about to smell like victory.","Thanks for shopping! Even aunties will approve of this order.","Your order is in! We'll protect it like Nigerians protect their jollof recipe.","Success! Your food is coming with more flavor than a pepper soup challenge.","Confirmed  your taste is hotter than shito pepper.","Order complete! Don't worry, we didn't forget the Maggi cubes.","Transaction approved! Time to prepare for a feast fit for ancestors.","Done! May your meals be as sweet as ripe plantain.","Your order is confirmed  better hide it before the neighbors smell it!"],M1=async e=>{if(e.length===0){await Fr.speak("No items in order yet.");return}let t=`Order contains ${e.length} item${e.length===1?"":"s"}. `,r=0;e.forEach((s,o)=>{const c=s.product?.name||s.sideBusinessItem?.name||"Unknown Item",d=s.quantity;let f=0;s.customPrice?f=s.customPrice:s.calculatedPrice?f=s.calculatedPrice/d:s.product?.price?f=s.product.price:s.sideBusinessItem?.price&&(f=s.sideBusinessItem.price);let p=0;s.weight&&s.calculatedPrice?(p=s.calculatedPrice,t+=`Item ${o+1}: ${c}, ${s.weight} units at ${s.product?.price_per_unit?.toFixed(2)||"0.00"} per unit, `):(p=f*d,t+=`Item ${o+1}: ${c}, quantity ${d}, ${f.toFixed(2)} each, `),r+=p;const h=[`making this ${r.toFixed(2)}. `,`total so far ${r.toFixed(2)}. `,`${r.toFixed(2)} total. `,`running total ${r.toFixed(2)}. `,`${r.toFixed(2)}. `,`now at ${r.toFixed(2)}. `],x=h[Math.floor(Math.random()*h.length)];t+=x}),await Fr.speak(t),setTimeout(async()=>{const s=B1[Math.floor(Math.random()*B1.length)];await Fr.speak(s)},500)},$k=async e=>{const t=[`Your total is ${e.toFixed(2)}. Time to feast!`,`Total: ${e.toFixed(2)}. Your taste buds are about to dance!`,`${e.toFixed(2)} total. May your meals be blessed!`,`Order total: ${e.toFixed(2)}. Even jollof rice approves!`],r=t[Math.floor(Math.random()*t.length)];await Fr.speak(r)},qh=async(e,t)=>{await Fr.speak(`${e} added to order for ${t.toFixed(2)}.`)},Hk=()=>{const{user:e}=bn(),{businessId:t,businessLoading:r}=fu(),{currentBusiness:s}=Bo(),[o]=Ly(),c=Ls(),[d,f]=T.useState([]),[p,h]=T.useState([]),[x,v]=T.useState([]),[y,b]=T.useState([]),[w,_]=T.useState([]),[S,A]=T.useState("All"),[k,O]=T.useState(""),[L,K]=T.useState([]),[ne,M]=T.useState([]),[re,ee]=T.useState(!1),[de,oe]=T.useState(!1),[Q,te]=T.useState({items:[],subtotal:0,tax:0,discount:0,total:0}),[ae,X]=T.useState(""),[J,fe]=T.useState(""),[se,Ne]=T.useState(!0),[D,U]=T.useState(!1),[E,P]=T.useState("cash"),[W,V]=T.useState(""),[ue,Le]=T.useState(0),[Ce,Te]=T.useState(""),[Be,Ve]=T.useState(!1),[Je,je]=T.useState(!1),[q,be]=T.useState(null),[tt,Me]=T.useState(""),[ct,pt]=T.useState(!1),[ut,St]=T.useState(null),[ft,Ft]=T.useState(""),[Dt,jr]=T.useState(null),[Xt,It]=T.useState(!1),[ce,me]=T.useState(""),[qe,yt]=T.useState(""),[Ct,gr]=T.useState(""),[Cr,or]=T.useState([]),[,Er]=T.useState(Fr.getSettings()),[Qt,lr]=T.useState(!1),[ie,De]=T.useState(!1),[mt,vt]=T.useState("idle"),[xr,Jt]=T.useState(""),[Xe,Wr]=T.useState(!1),[Gt,Bn]=T.useState(""),[Nr,ar]=T.useState(0),[Et,Dr]=T.useState(""),[rn,Cs]=T.useState(null),[Mn,N]=T.useState(null),[H,F]=T.useState(!1);T.useEffect(()=>{if(t==null){f([]),h([]),M([]),_(["All"]),or([]),N(null),Cs(null),F(!1);return}z(S,k),G();const R=o.get("transaction");R&&(Cs(R),F(!0),Y(R))},[o,t,r,S,k]),T.useEffect(()=>{const R=Se=>{Se.key==="Enter"&&Se.ctrlKey&&Q.items.length>0&&(Se.preventDefault(),U(!0)),Se.key==="Escape"&&(O(""),ee(!1))};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[Q.items]),T.useEffect(()=>{Ie()},[d,p,S,k,ne]),T.useEffect(()=>{ne.length>0&&x.length===0&&v(ne)},[ne,x.length]),T.useEffect(()=>{Ee()},[Q.items]),T.useEffect(()=>{const R=parseFloat(W)||0,Se=Xe?parseFloat(Gt)||0:Q.total,Ye=R-Se;Le(Ye>0?Ye:0)},[W,Q.total,Xe,Gt]),T.useEffect(()=>{if(Xe){const R=parseFloat(Gt)||0,Se=Math.max(0,Q.total-R);ar(Se)}else ar(0)},[Xe,Gt,Q.total]),T.useEffect(()=>{V(Xe&&Gt||Q.total.toString())},[Q.total,Xe,Gt]);const z=async(R,Se)=>{if(t==null){f([]),h([]),M([]),_(["All"]),Ne(!1),oe(!1);return}try{Ne(!0);let Ye=Oe.from("products").select("*").eq("business_id",t).order("sales_count",{ascending:!1}).limit(50);if(R&&R!=="All"&&(Ye=Ye.eq("category",R)),Se&&Se.trim()){const Fn=Se.trim();Ye=Ye.or(`name.ilike.%${Fn}%,category.ilike.%${Fn}%,description.ilike.%${Fn}%,sku.ilike.%${Fn}%`)}const{data:Qe,error:He}=await Ye;if(He)throw He;const{data:ot,error:lt}=await Oe.from("side_business_items").select(`
          *,
          side_businesses (name, business_type)
        `).eq("parent_shop_id",t).order("name");if(lt)throw lt;const gt=Qe||[],Yt=ot||[];f(gt),h(Yt),M(gt);const Bt=gt.map(Fn=>Fn.category).filter(Boolean),Pt=Yt.map(Fn=>Fn.side_businesses?.name).filter(Boolean),Yr=["All",...new Set([...Bt,...Pt])];_(Yr)}catch{}finally{Ne(!1),oe(!1)}},G=async()=>{if(t==null){or([]);return}try{const{data:R,error:Se}=await Oe.from("side_businesses").select("business_id, name").eq("business_type","service").eq("parent_shop_id",t).order("name");if(Se)throw Se;or(R||[])}catch(R){console.error("Error fetching service businesses:",R),or([])}},Y=async R=>{if(t!=null)try{const Se=parseInt(R.replace("TXN-","")),{data:Ye,error:Qe}=await Oe.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",Se).eq("business_id",t).single();if(Qe||!Ye)return;N(Ye);const{data:He,error:ot}=await Oe.from("sale_items").select(`
          *,
          products (
            name,
            category,
            price,
            stock_quantity,
            image_url,
            is_weighted,
            weight_unit,
            price_per_unit
          )
        `).eq("sale_id",Se);if(ot)return;const lt=(He||[]).map(Pt=>{const Fn={product:{product_id:Pt.product_id.toString(),name:Pt.products?.name||"Unknown Product",price:Pt.price_each,category:Pt.products?.category||"Unknown",stock_quantity:Pt.products?.stock_quantity||0,image_url:Pt.products?.image_url,is_weighted:Pt.products?.is_weighted||!1,weight_unit:Pt.products?.weight_unit,price_per_unit:Pt.products?.price_per_unit},quantity:Pt.quantity};return Pt.products?.is_weighted&&Pt.weight&&Pt.calculated_price&&(Fn.weight=Pt.weight,Fn.calculatedPrice=Pt.calculated_price),Fn}),gt=lt.reduce((Pt,Yr)=>Yr.weight&&Yr.calculatedPrice?Pt+Yr.calculatedPrice:Pt+Yr.product.price*Yr.quantity,0),Yt=gt*.1,Bt=gt+Yt;te({items:lt,subtotal:gt,tax:Yt,discount:0,total:Bt}),Ye.customers?.name&&X(Ye.customers.name)}catch{}},ve=R=>{if(R.length<2){K([]),ee(!1);return}const Se=R.toLowerCase().trim(),Ye=d.filter(ot=>{const lt=ot.name.toLowerCase().includes(Se),gt=ot.category?.toLowerCase().includes(Se),Yt=ot.description?.toLowerCase().includes(Se),Bt=ot.sku?.toLowerCase().includes(Se);return lt||gt||Yt||Bt}).slice(0,3),Qe=p.filter(ot=>{const lt=ot.name.toLowerCase().includes(Se),gt=ot.side_businesses?.name.toLowerCase().includes(Se);return lt||gt}).slice(0,2),He=[...Ye,...Qe].slice(0,5);K(He),ee(He.length>0)},Ie=()=>{let R=ne;if(S!=="All"&&(R=R.filter(Ye=>Ye.category===S)),k){const Ye=k.toLowerCase().trim();R=R.filter(Qe=>Qe.name.toLowerCase().includes(Ye)||Qe.category?.toLowerCase().includes(Ye)||Qe.description?.toLowerCase().includes(Ye)||Qe.sku?.toLowerCase().includes(Ye))}v(R);let Se=p;S!=="All"&&(Se=Se.filter(Ye=>Ye.side_businesses?.name===S)),k&&(Se=Se.filter(Ye=>Ye.name.toLowerCase().includes(k.toLowerCase()))),b(Se)},ge=R=>{O(R),ve(R)},we=R=>{O(R.name),ee(!1),K([]),"product_id"in R?We(R):nt(R)},Ee=()=>{const R=Q.items.reduce((He,ot)=>{if(ot.product)return ot.weight&&ot.calculatedPrice?He+ot.calculatedPrice:He+ot.product.price*ot.quantity;if(ot.sideBusinessItem){const lt=ot.customPrice||ot.sideBusinessItem.price||0;return He+lt*ot.quantity}return He},0),Se=0,Ye=0,Qe=R-Ye;te(He=>({...He,subtotal:R,tax:Se,discount:Ye,total:Qe}))},We=R=>{if(R.is_weighted&&R.price_per_unit&&R.weight_unit){St(R),Ft(""),pt(!0);return}te(Se=>Se.items.find(Qe=>Qe.product?.product_id===R.product_id&&!Qe.weight)?{...Se,items:Se.items.map(Qe=>Qe.product?.product_id===R.product_id&&!Qe.weight?{...Qe,quantity:Qe.quantity+1}:Qe)}:{...Se,items:[...Se.items,{product:R,quantity:1}]}),qh(R.name,R.price)},Ke=(R,Se)=>{const Ye=Se*(R.price_per_unit||0);te(Dt?Qe=>({...Qe,items:Qe.items.map(He=>He.product?.product_id===Dt&&He.weight?{...He,weight:Se,calculatedPrice:Ye}:He)}):Qe=>({...Qe,items:[...Qe.items,{product:R,quantity:1,weight:Se,calculatedPrice:Ye}]})),pt(!1),St(null),jr(null),Ft("")},nt=R=>{if(!R.price)be(R),Me(""),je(!0);else{te(Qe=>Qe.items.find(ot=>ot.sideBusinessItem?.item_id===R.item_id)?{...Qe,items:Qe.items.map(ot=>ot.sideBusinessItem?.item_id===R.item_id?{...ot,quantity:ot.quantity+1}:ot)}:{...Qe,items:[...Qe.items,{sideBusinessItem:R,quantity:1}]});const Se=R.name,Ye=R.price||0;qh(Se,Ye)}},Ge=()=>{if(!q)return;const R=parseFloat(tt);if(isNaN(R)||R<0){alert("Please enter a valid price");return}te(Se=>Se.items.find(Qe=>Qe.sideBusinessItem?.item_id===q.item_id&&Qe.customPrice===R)?{...Se,items:Se.items.map(Qe=>Qe.sideBusinessItem?.item_id===q.item_id&&Qe.customPrice===R?{...Qe,quantity:Qe.quantity+1}:Qe)}:{...Se,items:[...Se.items,{sideBusinessItem:q,quantity:1,customPrice:R}]}),je(!1),be(null),Me("")},rt=async()=>{if(t==null){alert("Please select a business before creating a quick service item");return}if(!ce.trim()||!qe||!Ct){alert("Please fill in all fields");return}const R=parseFloat(qe);if(isNaN(R)||R<0){alert("Please enter a valid price");return}try{const Se={item_id:Date.now(),business_id:parseInt(Ct),name:ce.trim(),price:R,stock_qty:null,side_businesses:{name:Cr.find(Ye=>Ye.business_id.toString()===Ct)?.name||"Service",business_type:"service"}};te(Ye=>({...Ye,items:[...Ye.items,{sideBusinessItem:Se,quantity:1,customPrice:R}]})),qh(ce.trim(),R),me(""),yt(""),gr(""),It(!1)}catch(Se){console.error("Error creating quick service:",Se),alert("Failed to create service. Please try again.")}},wt=(R,Se)=>{if(Se<=0){_t(R);return}te(Ye=>({...Ye,items:Ye.items.map(Qe=>Qe.product?.product_id===R?{...Qe,quantity:Se}:Qe.sideBusinessItem?.item_id.toString()===R?{...Qe,quantity:Se}:Qe)}))},Zt=(R,Se)=>{if(Se<=0){_t(R);return}te(Ye=>({...Ye,items:Ye.items.map(Qe=>{if(Qe.product?.product_id===R&&Qe.weight){const He=Se*(Qe.product.price_per_unit||0);return{...Qe,weight:Se,calculatedPrice:He}}return Qe})}))},Vt=R=>typeof R=="string"?R.trim().toLowerCase():"",ir=R=>{const Se=Vt(R);return d.find(Ye=>Vt(Ye.barcode)===Se)||null},_n=(R,Se=0)=>{if(R==null||R=="")return Se;if(typeof R=="number")return Number.isFinite(R)?R:Se;const Ye=parseFloat(String(R));return Number.isFinite(Ye)?Ye:Se},C=(R,Se=0)=>{if(R==null||R=="")return Se;if(typeof R=="number")return Number.isFinite(R)?Math.trunc(R):Se;const Ye=parseInt(String(R),10);return Number.isFinite(Ye)?Ye:Se},he=R=>({...R,price:_n(R.price),stock_quantity:C(R.stock_quantity),reorder_level:C(R.reorder_level),tax_rate:_n(R.tax_rate),is_weighted:!!R.is_weighted,price_per_unit:R.price_per_unit==null?null:_n(R.price_per_unit),total_revenue:R.total_revenue==null?void 0:_n(R.total_revenue),sales_count:R.sales_count==null?void 0:C(R.sales_count),last_updated:R.last_updated,weight_unit:R.weight_unit,description:R.description,sku:R.sku,barcode:typeof R.barcode=="string"?R.barcode.trim():R.barcode,supplier_info:R.supplier_info,image_url:R.image_url}),Ae=async R=>{console.log(" Barcode scanned:",R);let Se=ir(R);if(console.log(" Local product found:",Se),!Se){if(t==null){vt("not_found"),Jt(R),setTimeout(()=>{vt("idle")},3e3);return}const Ye=Vt(R);console.log(" Searching database for barcode:",Ye,"business_id:",t);const{data:Qe,error:He}=await Oe.from("products").select("*").eq("business_id",t).ilike("barcode",Ye).limit(1);console.log(" Database query result:",Qe,"error:",He),He&&console.error("Barcode lookup failed:",He);const ot=Qe&&Qe.length>0?Qe[0]:null;if(ot){const lt=he(ot);Se=lt,f(gt=>gt.some(Bt=>Bt.product_id===lt.product_id)?gt:[lt,...gt].slice(0,50)),M(gt=>gt.some(Bt=>Bt.product_id===lt.product_id)?gt:[lt,...gt].slice(0,50))}}Se?(console.log(" Adding product to order:",Se.name),We(Se),vt("scanned"),Jt(R),setTimeout(()=>{vt("idle")},2e3)):(console.log(" Product not found for barcode:",R),vt("not_found"),Jt(R),setTimeout(()=>{vt("idle")},3e3))},st=()=>{ie?(Tt(),De(!1),vt("idle")):(bt(),De(!0),vt("listening"))},{startListening:bt,stopListening:Tt}=Uk({onBarcodeScanned:Ae,debounceMs:30,minLength:8,maxLength:20,isActive:ie,context:"sales-page"});T.useEffect(()=>{zk(Je||ct||Xt||D)},[Je,ct,Xt,D]),T.useEffect(()=>{if(!ie)return;const R=Se=>{if(Se.target&&Se.target.tagName==="INPUT"){const Ye=Se.target,Qe=Ye.value.trim();Qe.length>=8&&Qe.length<=20&&/^[A-Za-z0-9]+$/.test(Qe)&&(console.log(" Global barcode fallback detected:",Qe),Ae(Qe),Ye.value="")}};return document.addEventListener("input",R,!0),()=>{document.removeEventListener("input",R,!0)}},[ie,Ae]);const it=R=>{R.product&&R.weight&&(St(R.product),Ft(R.weight.toString()),pt(!0),jr(R.product.product_id))},_t=R=>{te(Se=>({...Se,items:Se.items.filter(Ye=>Ye.product?.product_id!==R&&Ye.sideBusinessItem?.item_id.toString()!==R)}))},At=()=>{if(window.confirm("Are you sure you want to reset the current transaction? This will clear all items from the order.")){te({items:[],subtotal:0,tax:0,discount:0,total:0}),X(""),fe(""),P("cash"),V(""),Le(0),Te("");const R=document.createElement("div");R.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,R.textContent="Transaction reset successfully!",document.body.appendChild(R),setTimeout(()=>{document.body.removeChild(R)},3e3)}},Ut=()=>{const R={method:E,amountEntered:W,change:ue,customerName:ae,receiptNotes:Ce},Se=Xe?{amountPaid:parseFloat(Gt)||0,amountRemaining:Nr,dueDate:null,notes:Et}:void 0;return wv(Q,R,e,s,Se)},Ir=()=>{const R={method:E,amountEntered:W,change:ue,customerName:ae,receiptNotes:Ce},Se=Xe?{amountPaid:parseFloat(Gt)||0,amountRemaining:Nr,dueDate:null,notes:Et}:void 0;Wk(Q,R,e,s,Se)},_r=async()=>{if(!(Q.items.length===0||r)){if(t==null){alert("Please select a business before processing a sale.");return}try{let R;if(H&&rn){const He=parseInt(rn.replace("TXN-","")),{data:ot,error:lt}=await Oe.from("sales").update({total_amount:Q.total,payment_method:E}).eq("sale_id",He).eq("business_id",t).select().single();if(lt)throw lt;R=ot}else{let He=null;if(ae.trim()){const{data:Yt,error:Bt}=await Oe.from("customers").select("customer_id").eq("business_id",t).eq("name",ae.trim()).single();if(Yt&&!Bt)He=Yt.customer_id;else{const{data:Pt,error:Yr}=await Oe.from("customers").insert([{name:ae.trim(),phone_number:J.trim()||"000-000-0000",email:null,business_id:t}]).select().single();Yr?(console.error("Error creating customer:",Yr),He=null):He=Pt.customer_id}}let ot="";Xe&&(ot=`PARTIAL PAYMENT
Amount Paid Today: ${(parseFloat(Gt)||0).toFixed(2)}
Remaining Balance: ${Nr.toFixed(2)}`,Et&&(ot+=`

Partial Payment Notes: ${Et}`)),Ce&&(ot+=(ot?`

`:"")+Ce);let lt,gt;try{const Yt={datetime:Fl(),total_amount:Xe?parseFloat(Gt)||0:Q.total,payment_method:E,cashier_id:e?.user_id,customer_id:He,discount_applied:Q.discount,partial_payment:Xe,partial_amount:Xe?parseFloat(Gt)||0:null,remaining_amount:Xe?Nr:null,partial_notes:Xe?Et:null,notes:ot||null,business_id:t},Bt=await Oe.from("sales").insert([Yt]).select("*").single();lt=Bt.data,gt=Bt.error}catch{const Bt={datetime:Fl(),total_amount:Xe?parseFloat(Gt)||0:Q.total,payment_method:E,cashier_id:e?.user_id,customer_id:He,discount_applied:Q.discount,partial_payment:Xe,partial_amount:Xe?parseFloat(Gt)||0:null,remaining_amount:Xe?Nr:null,partial_notes:Xe?Et:null,business_id:t},Pt=await Oe.from("sales").insert([Bt]).select("*").single();lt=Pt.data,gt=Pt.error}if(gt)throw gt;R=lt}if(H&&rn){const He=Mn?(await Oe.from("sale_items").select("product_id").eq("sale_id",R.sale_id)).data?.map(gt=>gt.product_id)||[]:[],ot=Q.items.filter(gt=>gt.product&&!He.includes(gt.product.product_id));if(ot.length>0){const gt=ot.map(Bt=>({sale_id:R.sale_id,product_id:Bt.product.product_id,quantity:Bt.quantity,price_each:Bt.product.price,weight:Bt.weight||null,calculated_price:Bt.calculatedPrice||null})),{error:Yt}=await Oe.from("sale_items").insert(gt);if(Yt)throw Yt;for(const Bt of gt){const Pt=Bt.calculated_price||Bt.price_each*Bt.quantity,{error:Yr}=await Oe.rpc("increment_product_sales",{product_id_param:Bt.product_id,revenue_amount:Pt,business_id_param:t});Yr&&console.error("Error updating product sales counter:",Yr)}}const lt=Q.items.filter(gt=>gt.sideBusinessItem);for(const gt of lt){let Yt=gt.sideBusinessItem.item_id;if(Yt>1e9){const{data:Pt,error:Yr}=await Oe.from("side_business_items").insert({business_id:gt.sideBusinessItem.business_id,parent_shop_id:t,name:gt.sideBusinessItem.name,price:gt.customPrice||gt.sideBusinessItem.price,stock_qty:null,notes:"Created via Quick Service"}).select().single();if(Yr)throw Yr;Yt=Pt.item_id}const{error:Bt}=await Oe.from("side_business_sales").insert({item_id:Yt,quantity:gt.quantity,total_amount:(gt.customPrice||gt.sideBusinessItem.price||0)*gt.quantity,payment_method:E,date_time:Fl(),business_id:gt.sideBusinessItem.business_id,parent_shop_id:t});if(Bt)throw Bt}}else{const He=Q.items.filter(lt=>lt.product).map(lt=>({sale_id:R.sale_id,product_id:lt.product.product_id,quantity:lt.quantity,price_each:lt.product.price,weight:lt.weight||null,calculated_price:lt.calculatedPrice||null})),ot=Q.items.filter(lt=>lt.sideBusinessItem);for(const lt of ot){let gt=lt.sideBusinessItem.item_id;if(gt>1e9){const{data:Bt,error:Pt}=await Oe.from("side_business_items").insert({business_id:lt.sideBusinessItem.business_id,parent_shop_id:t,name:lt.sideBusinessItem.name,price:lt.customPrice||lt.sideBusinessItem.price,stock_qty:null,notes:"Created via Quick Service"}).select().single();if(Pt)throw Pt;gt=Bt.item_id}const{error:Yt}=await Oe.from("side_business_sales").insert({item_id:gt,quantity:lt.quantity,total_amount:(lt.customPrice||lt.sideBusinessItem.price||0)*lt.quantity,payment_method:E,date_time:Fl(),business_id:lt.sideBusinessItem.business_id,parent_shop_id:t});if(Yt)throw Yt}if(He.length>0){const{error:lt}=await Oe.from("sale_items").insert(He);if(lt)throw lt;for(const gt of He){const Yt=gt.calculated_price||gt.price_each*gt.quantity,{error:Bt}=await Oe.rpc("increment_product_sales",{product_id_param:gt.product_id,revenue_amount:Yt,business_id_param:t});Bt&&console.error("Error updating product sales counter:",Bt)}}}const Se=H&&rn?Q.items.filter(He=>He.product?!(Mn?(Mn.sale_items||[]).map(lt=>lt.product_id):[]).includes(He.product.product_id):!1):Q.items.filter(He=>He.product);for(const He of Se){if(!He.product)continue;const{error:ot}=await Oe.from("products").update({stock_quantity:He.product.stock_quantity-He.quantity,last_updated:Fl()}).eq("product_id",He.product.product_id).eq("business_id",t);if(ot)throw ot;const{error:lt}=await Oe.from("inventory_movements").insert([{product_id:He.product.product_id,quantity_change:-He.quantity,movement_type:"Sale",reference_id:R.sale_id,business_id:t}]);if(lt)throw lt}const Ye=Q.items.filter(He=>He.sideBusinessItem);for(const He of Ye){if(!He.sideBusinessItem||He.sideBusinessItem.stock_qty===null)continue;const{error:ot}=await Oe.from("side_business_items").update({stock_qty:He.sideBusinessItem.stock_qty-He.quantity}).eq("item_id",He.sideBusinessItem.item_id).eq("parent_shop_id",t);if(ot)throw ot}te({items:[],subtotal:0,tax:0,discount:0,total:0}),X(""),fe(""),P("cash"),V(""),Le(0),Te(""),Xe&&Nr>0&&R?.sale_id&&await er(ae,J,Nr,R.sale_id),Wr(!1),Bn(""),ar(0),Dr("");const Qe=document.createElement("div");Qe.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,Qe.textContent=H?"Items added to transaction successfully!":Xe?`Partial payment processed! ${(parseFloat(Gt)||0).toFixed(2)} paid, ${Nr.toFixed(2)} remaining. Reminder created.`:"Sale processed successfully!",document.body.appendChild(Qe),setTimeout(()=>{document.body.removeChild(Qe)},3e3),$k(Q.total),U(!1),H&&rn&&setTimeout(()=>{c(`/transaction/${rn}`)},2e3)}catch(R){alert(`Failed to process sale: ${R instanceof Error?R.message:"Unknown error"}`)}}},En=()=>{const R=new Date,Se=R.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),Ye=R.toLocaleDateString("en-GB",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"});return`${Se} - ${Ye}`},er=async(R,Se,Ye,Qe)=>{if(t!=null)try{const He=e?.user_id||1,ot=`Payment Due: ${R||"Customer"}`,lt=Se?`
Phone: ${Se}`:"",gt=`Customer owes ${Ye.toFixed(2)} from Sale #${Qe}. Please follow up for payment.${lt}`,Yt=new Date;Yt.setDate(Yt.getDate()+1);const Bt=Yt.toISOString().split("T")[0],{error:Pt}=await Oe.from("reminders").insert([{title:ot,body:gt,remind_date:Bt,owner_id:He,business_id:t}]).select().single();Pt&&(console.error("Error creating partial payment reminder:",Pt),console.error("Reminder data attempted:",{title:ot,body:gt,remind_date:Bt,owner_id:He}))}catch(He){console.error("Error creating partial payment reminder:",He)}};return se?a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading products..."]}):a.jsxs("div",{style:{display:"flex",height:"100vh",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",fontFamily:"Poppins, sans-serif"},children:[a.jsxs("div",{style:{flex:1,background:"#ffffff",margin:"20px",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:H?"#fef3c7":"#f9fafb"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[a.jsx("i",{className:"fa-solid fa-cash-register",style:{marginRight:"12px",color:"#7d8d86"}}),"Point Of Sales"]}),H&&a.jsxs("div",{style:{background:"#f59e0b",color:"#92400e",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-plus-circle"}),"Adding to Transaction #",rn]})]}),H&&a.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:"8px 0 0 0",fontStyle:"italic"},children:"Adding new items to existing transaction. Existing items will be preserved."})]}),a.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f5f5f5"},children:a.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",maxWidth:"800px",margin:"0 auto"},children:[a.jsxs("div",{style:{position:"relative",flex:1,background:"#ffffff",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"2px solid #e5e7eb",transition:"all 0.3s ease"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px"},children:[a.jsx("i",{className:"fa-solid fa-search",style:{color:"#6b7280",fontSize:"18px",marginRight:"12px"}}),a.jsx("input",{type:"text",placeholder:"Search products, categories, or SKU...",value:k,onChange:R=>ge(R.target.value),onFocus:R=>{R.target.parentElement.parentElement.style.borderColor="#3b82f6",R.target.parentElement.parentElement.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.15)",ee(L.length>0)},onBlur:R=>{R.target.parentElement.parentElement.style.borderColor="#e5e7eb",R.target.parentElement.parentElement.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",setTimeout(()=>ee(!1),200)},onKeyDown:R=>{R.key==="Enter"&&(R.preventDefault(),k.trim()&&ee(!1))},style:{flex:1,padding:"4px 8px",border:"none",background:"transparent",fontSize:"16px",outline:"none",color:"#1f2937",fontWeight:"500"}}),k&&a.jsx("button",{onClick:()=>{O(""),ee(!1),K([])},style:{background:"#f3f4f6",border:"none",borderRadius:"6px",padding:"6px",cursor:"pointer",color:"#6b7280",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:R=>{R.target.style.background="#e5e7eb"(R.target).style.color="#374151"},onMouseLeave:R=>{R.target.style.background="#f3f4f6"(R.target).style.color="#6b7280"},children:a.jsx("i",{className:"fa-solid fa-times"})})]}),re&&L.length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"none",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",zIndex:1e3,maxHeight:"300px",overflowY:"auto",marginTop:"8px",backdropFilter:"blur(10px)"},children:L.map((R,Se)=>{const Ye="product_id"in R,Qe="item_id"in R;return a.jsxs("div",{onClick:()=>we(R),style:{padding:"16px 20px",cursor:"pointer",borderBottom:Se<L.length-1?"1px solid #f1f5f9":"none",display:"flex",alignItems:"center",gap:"16px",transition:"all 0.2s ease",borderRadius:Se===0?"16px 16px 0 0":Se===L.length-1?"0 0 16px 16px":"0"},onMouseEnter:He=>{He.target.style.background="linear-gradient(135deg, #f8fafc, #f1f5f9)"(He.target).style.transform="translateX(4px)"},onMouseLeave:He=>{He.target.style.background="transparent"(He.target).style.transform="translateX(0)"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:Ye&&R.image_url?`url(${R.image_url})`:"linear-gradient(135deg, #667eea, #764ba2)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",color:"#ffffff",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:Qe&&a.jsx("i",{className:"fa-solid fa-briefcase"})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"600",color:"#1e293b",lineHeight:"1.3"},children:R.name}),a.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:Ye?`${R.category}  ${R.price.toFixed(2)}`:`${R.side_businesses?.name||"Side Business"}  ${R.price?`${R.price.toFixed(2)}`:"Custom Price"}`})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"#ffffff",borderRadius:"8px",padding:"8px 12px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add"]})]},Ye?R.product_id:`sb-${R.item_id}`)})})]}),a.jsx("div",{style:{display:"flex",gap:"12px"},children:a.jsxs(Rd,{onClick:()=>It(!0),children:[a.jsx("i",{className:"fa-solid fa-plus-circle",style:{marginRight:"8px"}}),"Quick Service"]})})]})}),a.jsxs("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb",background:ie?"#f0f9ff":"#f9fafb",transition:"background-color 0.3s ease"},children:[ie&&a.jsx("input",{type:"text",style:{position:"absolute",left:"-9999px",opacity:0,pointerEvents:"none"},onInput:R=>{const Se=R.target.value;Se&&Se.length>=8&&Se.length<=20&&(console.log(" Hidden input barcode detected:",Se),Ae(Se),R.target.value="")},autoFocus:!0}),a.jsx("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:a.jsxs("div",{style:{position:"relative",flex:1,minWidth:"300px",maxWidth:"400px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Barcode Scanner"}),a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Scan or enter barcode manually",style:{flex:1,padding:"12px 16px",border:`2px solid ${ie?"#3b82f6":"#d1d5db"}`,borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.3s ease",background:ie?"#f0f9ff":"#ffffff",color:ie?"#1e40af":"#1f2937"},onKeyDown:R=>{if(R.key==="Enter"){const Se=R.target.value.trim();Se&&Se.length>=8&&Se.length<=20&&(console.log(" Manual barcode input:",Se),Ae(Se),R.target.value="")}}}),a.jsx(Rd,{onClick:st,children:mt==="listening"?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-stop",style:{marginRight:"8px"}}),"Stop Scanner"]}):mt==="scanned"?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-check",style:{marginRight:"8px"}}),"Item Added!"]}):mt==="not_found"?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Not Found"]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-barcode",style:{marginRight:"8px"}}),"Scan Barcode"]})})]})]})})]}),a.jsx("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",whiteSpace:"nowrap"},children:"Category:"}),a.jsx("select",{value:S,onChange:R=>A(R.target.value),style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer",minWidth:"200px",outline:"none",transition:"border-color 0.2s ease"},onFocus:R=>R.target.style.borderColor="#7d8d86",onBlur:R=>R.target.style.borderColor="#e5e7eb",children:w.map(R=>{let Se=0;return R==="All"?Se=d.length+p.length:Se=p.filter(Ye=>Ye.side_businesses?.name===R).length,a.jsxs("option",{value:R,children:[R," ",R==="All"?`(${Se})`:Se>0?`(${Se})`:""]},R)})})]})}),a.jsxs("div",{style:{flex:1,padding:"24px 32px",overflowY:"auto"},children:[a.jsx("div",{style:{marginBottom:"16px"},children:a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 4px 0"},children:"Products"})}),x.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",color:"#374151",margin:"0 0 8px 0"},children:"No products found"}),a.jsx("p",{style:{fontSize:"14px",margin:"0",color:"#6b7280"},children:k?`No products match "${k}"`:"Try selecting a different category"})]}):a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"12px"},children:[x.map(R=>a.jsxs("div",{style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:Se=>{Se.currentTarget.style.transform="translateY(-1px)",Se.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",Se.currentTarget.style.border="2px solid #6b7280"},onMouseLeave:Se=>{Se.currentTarget.style.transform="translateY(0)",Se.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",Se.currentTarget.style.border="2px solid #6b7280"},children:[a.jsx("div",{style:{width:"100%",height:"100px",background:R.image_url?`url(${R.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:!R.image_url&&a.jsx("i",{className:"fa-solid fa-image",style:{fontSize:"24px",color:"#9ca3af"}})}),a.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:R.name}),a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:R.is_weighted&&R.price_per_unit&&R.weight_unit?R.weight_unit==="g"&&R.price_per_unit<1?`${(R.price_per_unit*1e3).toFixed(2)}/kg`:R.weight_unit==="kg"&&R.price_per_unit>=1?`${R.price_per_unit.toFixed(2)}/kg`:`${R.price_per_unit.toFixed(2)}/${R.weight_unit}`:`${R.price.toFixed(2)}`}),a.jsxs("button",{onClick:()=>We(R),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:Se=>{Se.currentTarget.style.background="#3e3f29"},onMouseLeave:Se=>{Se.currentTarget.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},R.product_id)),y.map(R=>a.jsxs("div",{style:{background:"#ffffff",border:"3px solid #374151",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:Se=>{Se.currentTarget.style.transform="translateY(-1px)",Se.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseLeave:Se=>{Se.currentTarget.style.transform="translateY(0)",Se.currentTarget.style.boxShadow="none"},children:[a.jsx("div",{style:{width:"100%",height:"100px",background:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"24px",color:"#9ca3af"}})}),a.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:R.name}),a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:R.price?`${R.price.toFixed(2)}`:"Custom Price"}),a.jsxs("button",{onClick:()=>nt(R),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:Se=>{Se.currentTarget.style.background="#3e3f29"},onMouseLeave:Se=>{Se.currentTarget.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},`sb-${R.item_id}`))]})]})]}),a.jsxs("div",{style:{width:"400px",background:"#ffffff",margin:"20px 20px 20px 0",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px",fontWeight:"600"},children:e?.username?.charAt(0).toUpperCase()}),a.jsx("div",{children:a.jsxs("p",{style:{margin:"0",fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["Hello, ",e?.username]})})]}),a.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:En()})]}),a.jsxs("div",{style:{flex:1,padding:"24px",overflowY:"auto"},children:[a.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:["Order Detail #",Math.floor(Math.random()*1e7)]}),Q.items.length===0?a.jsxs("div",{style:{textAlign:"center",color:"#6b7280",padding:"40px 0"},children:[a.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{children:"No items in order"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Q.items.map(R=>{const Se=R.product?.product_id||`sb-${R.sideBusinessItem?.item_id}`,Ye=R.product?.name||R.sideBusinessItem?.name||"Unknown Item",Qe=R.product?.price||R.customPrice||R.sideBusinessItem?.price||0,He=!!R.sideBusinessItem;return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#ffffff",borderRadius:"8px",border:"3px solid #dc2626",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:He?"linear-gradient(135deg, #f3f4f6, #e5e7eb)":R.product?.image_url?`url(${R.product.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:He&&a.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"16px",color:"#9ca3af"}})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:Ye.length>20?Ye.substring(0,20)+"...":Ye}),a.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#7d8d86",fontWeight:"600"},children:R.weight&&R.calculatedPrice?a.jsxs(a.Fragment,{children:[R.weight," ",R.product?.weight_unit,"  ",R.calculatedPrice.toFixed(2)]}):`${Qe.toFixed(2)}`})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!R.weight&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>wt(Se,R.quantity-1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),a.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:R.quantity}),a.jsx("button",{onClick:()=>wt(Se,R.quantity+1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),R.weight&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>Zt(Se,R.weight-.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),a.jsxs("button",{onClick:()=>it(R),style:{minWidth:"60px",height:"24px",borderRadius:"4px",border:"1px solid #7d8d86",background:"#f9fafb",color:"#7d8d86",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"500",padding:"0 4px"},title:"Click to edit weight",children:[R.weight," ",R.product?.weight_unit]}),a.jsx("button",{onClick:()=>Zt(Se,R.weight+.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),a.jsx("button",{onClick:()=>_t(Se),style:{width:"24px",height:"24px",borderRadius:"4px",border:"none",background:"#ef4444",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",marginLeft:"4px"},children:a.jsx("i",{className:"fa-solid fa-trash"})})]})]},Se)})})]}),a.jsxs("div",{style:{padding:"24px",borderTop:"1px solid #e5e7eb",background:"#f9fafb"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Detail"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Customer Name"}),a.jsx("input",{type:"text",value:ae,onChange:R=>X(R.target.value),placeholder:"Enter customer name",style:{width:"100%",padding:"8px 12px",border:"1px solid #6b7280",borderRadius:"6px",fontSize:"14px",outline:"none"}})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Sub Total"}),a.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["",Q.subtotal.toFixed(2)]})]}),Q.discount>0&&a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Discount"}),a.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["",Q.discount.toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"8px",borderTop:"1px solid #d1d5db",marginBottom:"16px"},children:[a.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937"},children:"Total Payment"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"600",color:"#7d8d86"},children:["",Q.total.toFixed(2)]})]})]}),a.jsx("button",{style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"14px",fontWeight:"500",cursor:"pointer",width:"100%",marginBottom:"12px"},children:"Add Voucher"}),a.jsx("div",{style:{background:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"10px 12px",display:"flex",alignItems:"center",gap:"8px",width:"fit-content",maxWidth:"280px",marginBottom:"12px",opacity:Q.items.length===0?.5:1,cursor:Q.items.length===0?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},onClick:async()=>{if(Q.items.length!==0){if(Qt){console.log("Pausing TTS..."),Fr.pause(),lr(!1);return}console.log("Announce Order clicked!"),console.log("Order items:",Q.items),lr(!0),Fr.updateSettings({enabled:!0}),Er(Fr.getSettings()),console.log("TTS Settings after enabling:",Fr.getSettings());try{await M1(Q.items),setTimeout(()=>{Fr.updateSettings({enabled:!1}),Er(Fr.getSettings()),lr(!1)},3e3)}catch(R){console.error("TTS Error:",R),Fr.updateSettings({enabled:!1}),Er(Fr.getSettings()),lr(!1)}}},onMouseEnter:R=>{Q.items.length>0&&(R.currentTarget.style.background="#333333",R.currentTarget.style.borderColor="#555555")},onMouseLeave:R=>{Q.items.length>0&&(R.currentTarget.style.background="#2a2a2a",R.currentTarget.style.borderColor="#404040")},children:a.jsxs("button",{onClick:async()=>{if(Q.items.length!==0){if(Qt){console.log("Pausing TTS..."),Fr.stop(),lr(!1);return}console.log("Announce Order clicked!"),console.log("Order items:",Q.items),lr(!0),Fr.updateSettings({enabled:!0}),Er(Fr.getSettings()),console.log("TTS Settings after enabling:",Fr.getSettings());try{await M1(Q.items),setTimeout(()=>{Fr.updateSettings({enabled:!1}),Er(Fr.getSettings()),lr(!1)},3e3)}catch(R){console.error("TTS Error:",R),lr(!1),Fr.updateSettings({enabled:!1}),Er(Fr.getSettings())}}},disabled:Q.items.length===0,style:{background:Q.items.length===0?"#666666":"#4a5568",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",cursor:Q.items.length===0?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease",opacity:Q.items.length===0?.5:1},onMouseEnter:R=>{Q.items.length>0&&(R.target.style.background="#2d3748")},onMouseLeave:R=>{Q.items.length>0&&(R.target.style.background="#4a5568")},children:[a.jsx("i",{className:Qt?"fa-solid fa-pause":"fa-solid fa-play",style:{fontSize:"12px"}}),Qt?"Stop":"Play"]})}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[a.jsxs(Rd,{onClick:At,disabled:Q.items.length===0,style:{flex:1},children:[a.jsx("i",{className:"fa-solid fa-rotate-left",style:{marginRight:"8px"}}),"Reset"]}),a.jsxs(Rd,{onClick:()=>U(!0),disabled:Q.items.length===0,style:{flex:2},children:[a.jsx("i",{className:"fa-solid fa-credit-card",style:{marginRight:"8px"}}),"Purchase",Q.items.length>0&&a.jsx("span",{style:{fontSize:"10px",opacity:.8,marginLeft:"2px"},children:"(Ctrl+Enter)"})]})]})]})]}),D&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"20px",width:"95%",maxWidth:"700px",maxHeight:"95vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"8px",borderBottom:"1px solid #e5e7eb"},children:[a.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1f2937"},children:[a.jsx("i",{className:"fa-solid fa-receipt",style:{marginRight:"12px",color:"#7d8d86"}}),"Sales Summary"]}),a.jsx("button",{onClick:()=>U(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#6b7280",cursor:"pointer",padding:"4px"},children:a.jsx("i",{className:"fa-solid fa-xmark"})})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Customer Information"}),a.jsx("input",{type:"text",value:ae,onChange:R=>X(R.target.value),placeholder:"Enter customer name (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"12px"}})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Phone Number (Optional)"}),a.jsx("input",{type:"tel",value:J,onChange:R=>fe(R.target.value),placeholder:"Enter phone number (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"16px"}})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Payment Method"}),a.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:["cash","card","credit"].map(R=>a.jsxs("button",{onClick:()=>P(R),style:{background:E===R?"#7d8d86":"#f3f4f6",color:E===R?"white":"#374151",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",textTransform:"capitalize",transition:"all 0.2s ease"},children:[a.jsx("i",{className:`fa-solid fa-${R==="cash"?"money-bill":R==="card"?"credit-card":"hand-holding-dollar"}`,style:{marginRight:"6px"}}),R]},R))})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0"},children:"Payment Options"}),a.jsxs("button",{onClick:()=>{Wr(!Xe),Xe?(Bn(""),ar(0)):(Bn(Q.total.toString()),ar(0))},style:{background:Xe?"#ef4444":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:`fa-solid fa-${Xe?"times":"credit-card"}`,style:{fontSize:"12px"}}),Xe?"Disable Partial":"Enable Partial Payment"]})]}),Xe&&a.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[a.jsx("i",{className:"fa-solid fa-info-circle",style:{color:"#f59e0b"}}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#92400e"},children:"Partial Payment Enabled"})]}),a.jsxs("div",{style:{fontSize:"14px",color:"#92400e"},children:[a.jsxs("div",{children:["Amount to pay now: ",a.jsxs("strong",{children:["",(parseFloat(Gt)||0).toFixed(2)]})]}),a.jsxs("div",{children:["Remaining amount: ",a.jsxs("strong",{children:["",Nr.toFixed(2)]})]}),Nr>0&&a.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#fef2f2",border:"1px solid #fca5a5",borderRadius:"4px"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"6px",color:"#dc2626"}}),a.jsxs("strong",{style:{color:"#dc2626"},children:["Still need to pay: ",Nr.toFixed(2)]})]})]})]}),Xe&&a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Amount to Pay Now ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:Q.total,value:Gt,onChange:R=>{const Se=R.target.value;Bn(Se);const Ye=parseFloat(Se)||0;ar(Math.max(0,Q.total-Ye))},style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},placeholder:`Enter amount (max ${Q.total.toFixed(2)})`})]}),Xe&&a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Notes (Optional)"}),a.jsx("textarea",{value:Et,onChange:R=>Dr(R.target.value),placeholder:"Add any notes about this partial payment...",style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit",transition:"border-color 0.2s ease"}})]})]}),E==="cash"&&a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Amount Received"}),a.jsx("div",{style:{marginBottom:"12px"},children:a.jsxs("button",{onClick:()=>V(Xe?Gt:Q.total.toFixed(2)),style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:R=>R.target.style.background="#f9fafb",onMouseOut:R=>R.target.style.background="#ffffff",children:["Set Exact Amount (",Xe?(parseFloat(Gt)||0).toFixed(2):Q.total.toFixed(2),")"]})}),a.jsx("input",{type:"number",step:"0.01",value:W,onChange:R=>V(R.target.value),placeholder:`Enter amount: ${Xe?(parseFloat(Gt)||0).toFixed(2):Q.total.toFixed(2)}`,style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"block",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"18px",fontWeight:"500",outline:"none",background:"#ffffff",textAlign:"center"}}),ue>0&&a.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",color:"#0c4a6e",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-coins",style:{marginRight:"8px"}}),"Change: ",ue.toFixed(2)]}),Xe&&Nr>0&&a.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"2px solid #dc2626",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Still need to pay: ",Nr.toFixed(2)]}),W&&parseFloat(W)<Q.total&&!Xe&&a.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"1px solid #f87171",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Need ",((Xe?parseFloat(Gt)||0:Q.total)-parseFloat(W)).toFixed(2)," more"]})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Receipt Notes (Optional)"}),a.jsx("textarea",{value:Ce,onChange:R=>Te(R.target.value),placeholder:"Add notes for receipt (e.g., partial payment, special instructions, etc.)",style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit"}}),a.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:"8px 0 0 0"},children:"These notes will appear on the printed receipt"})]}),a.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"12px",marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Summary"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Subtotal"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["",Q.subtotal.toFixed(2)]})]}),Q.discount>0&&a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Discount"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["",Q.discount.toFixed(2)]})]}),Xe&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Amount to Pay Now"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#7d8d86"},children:["",(parseFloat(Gt)||0).toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Remaining Amount"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#ef4444"},children:["",Nr.toFixed(2)]})]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid #d1d5db",marginTop:"8px"},children:[a.jsx("span",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:Xe?"Total Order":"Total"}),a.jsxs("span",{style:{fontSize:"18px",fontWeight:"600",color:"#7d8d86"},children:["",Q.total.toFixed(2)]})]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"space-between"},children:[a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsxs("button",{onClick:()=>Ve(!0),style:{background:"#ffffff",color:"#3e3f29",border:"1px solid #3e3f29",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-eye"}),"View Receipt"]}),a.jsxs("button",{onClick:Ir,style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:()=>U(!1),style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),a.jsxs("button",{onClick:_r,disabled:E==="cash"&&(!W||parseFloat(W)<(Xe?parseFloat(Gt)||0:Q.total)),style:{background:E==="cash"&&(!W||parseFloat(W)<(Xe?parseFloat(Gt)||0:Q.total))?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:E==="cash"&&(!W||parseFloat(W)<(Xe?parseFloat(Gt)||0:Q.total))?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:E==="cash"&&(!W||parseFloat(W)<(Xe?parseFloat(Gt)||0:Q.total))?.6:1},children:[a.jsx("i",{className:"fa-solid fa-credit-card"}),Xe?"Process Partial Payment":"Process Sale"]})]})]})]})}),Be&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",width:"95vw",height:"95vh",overflow:"auto",position:"relative"},children:[a.jsx("button",{onClick:()=>Ve(!1),style:{position:"absolute",top:"12px",right:"12px",background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#6b7280",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},onMouseOver:R=>R.target.style.background="#f3f4f6",onMouseOut:R=>R.target.style.background="none",children:a.jsx("i",{className:"fa-solid fa-times"})}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0",textAlign:"center"},children:"Receipt Preview"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:Ut()},style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"30px",background:"#ffffff",fontFamily:"Courier New, monospace",fontSize:"16px",lineHeight:"1.6",maxWidth:"600px",margin:"0 auto"}})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>Ve(!1),style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close"}),a.jsxs("button",{onClick:()=>{Ve(!1),Ir()},style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #3e3f29 0%, #7d8d86 100%)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]})]})}),Je&&q&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[a.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"Enter Custom Price"}),a.jsxs("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#6b7280"},children:["Set the price for: ",a.jsx("strong",{children:q.name})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:tt,onChange:R=>Me(R.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onKeyDown:R=>{R.key==="Enter"&&Ge()},autoFocus:!0})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>{je(!1),be(null),Me("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),a.jsx("button",{onClick:Ge,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Add to Order"})]})]})}),ct&&ut&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:Dt?"Edit Weight":"Enter Weight"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:"0 0 8px 0"},children:ut.name}),a.jsxs("p",{style:{fontSize:"12px",color:"#9ca3af",margin:"0 0 12px 0"},children:["Price: ",ut.price_per_unit?.toFixed(2)," per ",ut.weight_unit]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:["Weight (",ut.weight_unit,")"]}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:ft,onChange:R=>Ft(R.target.value),placeholder:`Enter weight in ${ut.weight_unit}`,style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:R=>R.target.style.borderColor="#7d8d86",onBlur:R=>R.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),ft&&parseFloat(ft)>0&&a.jsxs("div",{style:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px",marginBottom:"20px"},children:[a.jsx("p",{style:{fontSize:"14px",color:"#374151",margin:"0 0 4px 0"},children:"Total Price:"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:["",((parseFloat(ft)||0)*(ut.price_per_unit||0)).toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>{pt(!1),St(null),jr(null),Ft("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),a.jsx("button",{onClick:()=>{const R=parseFloat(ft);R>0&&Ke(ut,R)},disabled:!ft||parseFloat(ft)<=0,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!ft||parseFloat(ft)<=0?"#d1d5db":"#7d8d86",color:!ft||parseFloat(ft)<=0?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:!ft||parseFloat(ft)<=0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:Dt?"Update Weight":"Add to Order"})]})]})}),Xt&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[a.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"24px",fontWeight:"600",color:"#1f2937",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-plus-circle",style:{color:"#10b981"}}),"Create Quick Service"]}),a.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280"},children:"Create a service on-the-fly with custom name and price. No need to predefine items!"}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Business"}),a.jsxs("select",{value:Ct,onChange:R=>gr(R.target.value),style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:R=>R.target.style.borderColor="#7d8d86",onBlur:R=>R.target.style.borderColor="#e5e7eb",children:[a.jsx("option",{value:"",children:"Select a service business"}),Cr.map(R=>a.jsx("option",{value:R.business_id,children:R.name},R.business_id))]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Name"}),a.jsx("input",{type:"text",value:ce,onChange:R=>me(R.target.value),placeholder:"e.g., Haircut, Consultation, Repair...",style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:R=>R.target.style.borderColor="#7d8d86",onBlur:R=>R.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:qe,onChange:R=>yt(R.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:R=>R.target.style.borderColor="#7d8d86",onBlur:R=>R.target.style.borderColor="#e5e7eb"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>{It(!1),me(""),yt(""),gr("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),a.jsxs("button",{onClick:rt,disabled:!ce.trim()||!qe||!Ct,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!ce.trim()||!qe||!Ct?"#d1d5db":"linear-gradient(135deg, #10b981, #059669)",color:!ce.trim()||!qe||!Ct?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"600",cursor:!ce.trim()||!qe||!Ct?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add to Order"]})]})]})})]})},Gk="_searchContainer_tecz1_2",Vk="_searchBarSection_tecz1_12",Yk="_searchBarWrapper_tecz1_16",Kk="_searchInputWrapper_tecz1_22",Xk="_searchIcon_tecz1_40",Qk="_searchInput_tecz1_22",Jk="_clearButton_tecz1_65",Zk="_searchResults_tecz1_87",eC="_resultsCount_tecz1_91",tC="_filtersSection_tecz1_98",rC="_filtersContainer_tecz1_103",nC="_filterGroup_tecz1_110",sC="_filterLabel_tecz1_116",aC="_filterSelect_tecz1_123",iC="_sortToggleButton_tecz1_140",oC="_clearFiltersButton_tecz1_158",Qr={searchContainer:Gk,searchBarSection:Vk,searchBarWrapper:Yk,searchInputWrapper:Kk,searchIcon:Xk,searchInput:Qk,clearButton:Jk,searchResults:Zk,resultsCount:eC,filtersSection:tC,filtersContainer:rC,filterGroup:nC,filterLabel:sC,filterSelect:aC,sortToggleButton:iC,clearFiltersButton:oC},lC=({searchTerm:e="",onSearchChange:t,searchPlaceholder:r="Search...",showSearchResults:s=!1,searchResultsCount:o=0,onClearSearch:c,filters:d=[],sortOptions:f=[],onSortToggle:p,sortOrder:h="desc",onClearFilters:x,hasActiveFilters:v=!1})=>a.jsxs("div",{className:Qr.searchContainer,children:[t&&a.jsx("div",{className:Qr.searchBarSection,children:a.jsxs("div",{className:Qr.searchBarWrapper,children:[a.jsxs("div",{className:Qr.searchInputWrapper,children:[a.jsx("i",{className:`fa-solid fa-search ${Qr.searchIcon}`}),a.jsx("input",{type:"text",placeholder:r,value:e,onChange:y=>t(y.target.value),className:Qr.searchInput}),e&&c&&a.jsx("button",{onClick:c,className:Qr.clearButton,title:"Clear search",children:a.jsx("i",{className:"fa-solid fa-times"})})]}),s&&e&&a.jsx("div",{className:Qr.searchResults,children:a.jsxs("span",{className:Qr.resultsCount,children:[o," result",o!==1?"s":""," found"]})})]})}),(d.length>0||f.length>0||p||v)&&a.jsx("div",{className:Qr.filtersSection,children:a.jsxs("div",{className:Qr.filtersContainer,children:[d.map((y,b)=>a.jsxs("div",{className:Qr.filterGroup,children:[a.jsxs("label",{className:Qr.filterLabel,children:[y.label,":"]}),a.jsx("select",{value:y.value,onChange:w=>y.onChange(w.target.value),className:Qr.filterSelect,children:y.options.map(w=>a.jsx("option",{value:w.value,children:w.label},w.value))})]},b)),f.map((y,b)=>a.jsxs("div",{className:Qr.filterGroup,children:[a.jsxs("label",{className:Qr.filterLabel,children:[y.label,":"]}),a.jsx("select",{value:y.value,onChange:w=>y.onChange(w.target.value),className:Qr.filterSelect,children:y.options.map(w=>a.jsx("option",{value:w.value,children:w.label},w.value))})]},b)),p&&a.jsx("button",{onClick:p,className:Qr.sortToggleButton,title:`Sort ${h==="asc"?"Descending":"Ascending"}`,children:a.jsx("i",{className:`fa-solid fa-sort-${h==="asc"?"up":"down"}`})}),v&&x&&a.jsxs("button",{onClick:x,className:Qr.clearFiltersButton,title:"Clear all filters",children:[a.jsx("i",{className:"fa-solid fa-times"}),"Clear"]})]})})]}),cC="_sideBusinessesContainer_272f1_2",dC="_pageHeader_272f1_8",uC="_pageTitle_272f1_17",fC="_primaryButton_272f1_31",hC="_statisticsGrid_272f1_54",pC="_statisticsCard_272f1_61",gC="_statisticsCardContent_272f1_75",xC="_statisticsInfo_272f1_81",mC="_statisticsLabel_272f1_85",yC="_statisticsValue_272f1_92",vC="_statisticsIcon_272f1_99",bC="_statisticsIconPurple_272f1_104",_C="_statisticsIconBlue_272f1_108",SC="_statisticsIconGreen_272f1_112",wC="_statisticsIconOrange_272f1_116",TC="_mainContentGrid_272f1_121",jC="_contentPanel_272f1_128",EC="_contentPanelHeader_272f1_142",kC="_contentPanelTitle_272f1_151",CC="_contentPanelBody_272f1_158",AC="_emptyStateMessage_272f1_165",RC="_emptyStateMessageIcon_272f1_171",NC="_emptyStateMessageText_272f1_177",DC="_listContainer_272f1_184",OC="_listContainerDivided_272f1_189",IC="_listItemCard_272f1_193",BC="_listItemCardContent_272f1_210",MC="_listItemCardIcon_272f1_217",FC="_listItemCardMain_272f1_234",LC="_listItemCardTitle_272f1_238",PC="_listItemCardSubtitle_272f1_245",zC="_listItemCardMeta_272f1_251",UC="_listItemCardPrice_272f1_258",WC="_listItemCardStock_272f1_264",qC="_listItemCardCount_272f1_269",$C="_listItemCardTime_272f1_274",HC="_listItemCardActions_272f1_279",GC="_actionButton_272f1_284",VC="_actionButtonIcon_272f1_303",YC="_statusBadge_272f1_308",KC="_statusBadgeRental_272f1_316",XC="_statusBadgeResale_272f1_321",QC="_statusBadgeService_272f1_326",JC="_statusBadgeGray_272f1_331",ZC="_statusBadgeCash_272f1_336",e8="_statusBadgeCard_272f1_341",t8="_statusBadgeMobile_272f1_346",r8="_modalOverlay_272f1_352",n8="_modalDialog_272f1_363",s8="_modalDialogTitle_272f1_373",a8="_modalDialogForm_272f1_380",i8="_formFieldGroup_272f1_386",o8="_formFieldLabel_272f1_391",l8="_formFieldInput_272f1_399",c8="_formFieldTextarea_272f1_420",d8="_formFieldSelect_272f1_444",u8="_actionButtonDanger_272f1_496",f8="_standardButton_272f1_506",h8="_standardButtonSecondary_272f1_516",p8="_standardButtonDanger_272f1_525",g8="_standardButtonSuccess_272f1_534",x8="_businessDetailModalHeader_272f1_544",m8="_businessAnalyticsSection_272f1_554",y8="_analyticsSectionTitle_272f1_558",v8="_analyticsGrid_272f1_567",b8="_analyticsCard_272f1_574",_8="_analyticsCardHeader_272f1_587",S8="_analyticsIcon_272f1_594",w8="_analyticsIconBlue_272f1_600",T8="_analyticsIconGreen_272f1_604",j8="_analyticsIconPurple_272f1_608",E8="_analyticsPeriod_272f1_612",k8="_analyticsCardContent_272f1_618",C8="_analyticsMetric_272f1_624",A8="_analyticsLabel_272f1_630",R8="_analyticsValue_272f1_636",N8="_itemsSectionHeader_272f1_643",D8="_restockButton_272f1_650",O8="_restockActionButton_272f1_669",I8="_editActionButton_272f1_679",B8="_formFieldHelp_272f1_690",M8="_modalHeader_272f1_698",F8="_modalCloseButton_272f1_707",L8="_required_272f1_724",P8="_errorMessage_272f1_730",z8="_listItemCardNotes_272f1_748",U8="_restockInfo_272f1_759",W8="_restockItemName_272f1_767",q8="_restockCurrentStock_272f1_774",$8="_restockPreview_272f1_780",H8="_restockPreviewText_272f1_788",G8="_businessDetailModalIcon_272f1_803",V8="_businessDetailModalInfo_272f1_819",Y8="_businessDetailModalName_272f1_823",K8="_businessDetailModalDescription_272f1_830",X8="_businessDetailModalMeta_272f1_836",Q8="_businessDetailModalDate_272f1_842",J8="_businessDetailModalStats_272f1_847",Z8="_businessDetailModalItems_272f1_854",e6="_noItemsMessage_272f1_865",t6="_deleteConfirmationWarning_272f1_872",r6="_deleteConfirmationWarningText_272f1_878",n6="_modalDialogActions_272f1_885",s6="_errorStateContainer_272f1_893",a6="_errorStateContent_272f1_901",i6="_errorStateIcon_272f1_910",o6="_errorStateTitle_272f1_916",l6="_errorStateText_272f1_922",c6="_errorStateRetryButton_272f1_927",d6="_loadingStateContainer_272f1_944",u6="_loadingStateText_272f1_951",f6="_loadingStateSpinner_272f1_959",I={sideBusinessesContainer:cC,pageHeader:dC,pageTitle:uC,primaryButton:fC,statisticsGrid:hC,statisticsCard:pC,statisticsCardContent:gC,statisticsInfo:xC,statisticsLabel:mC,statisticsValue:yC,statisticsIcon:vC,statisticsIconPurple:bC,statisticsIconBlue:_C,statisticsIconGreen:SC,statisticsIconOrange:wC,mainContentGrid:TC,contentPanel:jC,contentPanelHeader:EC,contentPanelTitle:kC,contentPanelBody:CC,emptyStateMessage:AC,emptyStateMessageIcon:RC,emptyStateMessageText:NC,listContainer:DC,listContainerDivided:OC,listItemCard:IC,listItemCardContent:BC,listItemCardIcon:MC,listItemCardMain:FC,listItemCardTitle:LC,listItemCardSubtitle:PC,listItemCardMeta:zC,listItemCardPrice:UC,listItemCardStock:WC,listItemCardCount:qC,listItemCardTime:$C,listItemCardActions:HC,actionButton:GC,actionButtonIcon:VC,statusBadge:YC,statusBadgeRental:KC,statusBadgeResale:XC,statusBadgeService:QC,statusBadgeGray:JC,statusBadgeCash:ZC,statusBadgeCard:e8,statusBadgeMobile:t8,modalOverlay:r8,modalDialog:n8,modalDialogTitle:s8,modalDialogForm:a8,formFieldGroup:i8,formFieldLabel:o8,formFieldInput:l8,formFieldTextarea:c8,formFieldSelect:d8,actionButtonDanger:u8,standardButton:f8,standardButtonSecondary:h8,standardButtonDanger:p8,standardButtonSuccess:g8,businessDetailModalHeader:x8,businessAnalyticsSection:m8,analyticsSectionTitle:y8,analyticsGrid:v8,analyticsCard:b8,analyticsCardHeader:_8,analyticsIcon:S8,analyticsIconBlue:w8,analyticsIconGreen:T8,analyticsIconPurple:j8,analyticsPeriod:E8,analyticsCardContent:k8,analyticsMetric:C8,analyticsLabel:A8,analyticsValue:R8,itemsSectionHeader:N8,restockButton:D8,restockActionButton:O8,editActionButton:I8,formFieldHelp:B8,modalHeader:M8,modalCloseButton:F8,required:L8,errorMessage:P8,listItemCardNotes:z8,restockInfo:U8,restockItemName:W8,restockCurrentStock:q8,restockPreview:$8,restockPreviewText:H8,businessDetailModalIcon:G8,businessDetailModalInfo:V8,businessDetailModalName:Y8,businessDetailModalDescription:K8,businessDetailModalMeta:X8,businessDetailModalDate:Q8,businessDetailModalStats:J8,businessDetailModalItems:Z8,noItemsMessage:e6,deleteConfirmationWarning:t6,deleteConfirmationWarningText:r6,modalDialogActions:n6,errorStateContainer:s6,errorStateContent:a6,errorStateIcon:i6,errorStateTitle:o6,errorStateText:l6,errorStateRetryButton:c6,loadingStateContainer:d6,loadingStateText:u6,loadingStateSpinner:f6};async function h6(e,t,r){console.log(" Starting image upload for side business:",t),console.log(" File details:",{name:e.name,size:e.size,type:e.type}),console.log(" User ID:",r);try{if(!r)return console.error(" No user ID provided"),null;console.log(" User ID provided:",r);const{data:s,error:o}=await Oe.storage.listBuckets();o?console.error(" Error listing buckets:",o):console.log(" Available buckets:",s?.map(h=>h.name));const c=`sidebusiness-images/${t}.${e.name.split(".").pop()}`;console.log(" Uploading to Supabase Storage:",c);const{error:d}=await Oe.storage.from("products").upload(c,e,{contentType:e.type,upsert:!0});if(d)return console.error(" Upload failed:",d),null;const{data:{publicUrl:f}}=Oe.storage.from("products").getPublicUrl(c);console.log(" Image uploaded successfully:",f),console.log(" Updating database with public URL...");const{error:p}=await Oe.from("side_businesses").update({image_url:f}).eq("business_id",t);return p?(console.error(" DB update failed:",p),null):(console.log(" Database updated with public URL"),f)}catch(s){return console.error(" Unexpected error during upload:",s),null}}const p6=()=>{const{user:e}=bn(),[t,r]=T.useState([]),[s,o]=T.useState([]),[c,d]=T.useState([]),[f,p]=T.useState(!0),[h,x]=T.useState(null),[v,y]=T.useState("all"),[b,w]=T.useState("all"),[_,S]=T.useState(""),[A,k]=T.useState("created_at"),[O,L]=T.useState("desc"),[K,ne]=T.useState(!1),[M,re]=T.useState(!1),[ee,de]=T.useState(new Set),[oe,Q]=T.useState(!1),[te,ae]=T.useState(null),[X,J]=T.useState(!1),[fe,se]=T.useState(null),[Ne,D]=T.useState(null),[U,E]=T.useState(null),[P,W]=T.useState(!1),[V,ue]=T.useState({item_id:null,current_stock:0,restock_quantity:""}),[Le,Ce]=T.useState(!1),[Te,Be]=T.useState(null),[Ve,Je]=T.useState({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),[je,q]=T.useState(null),[be,tt]=T.useState(!1),[Me,ct]=T.useState({business_id:"",name:"",price:"",stock_qty:"",notes:""}),[pt,ut]=T.useState({item_id:"",quantity:1,total_amount:"",payment_method:"cash"});T.useEffect(()=>{St()},[]);const St=async()=>{try{if(p(!0),x(null),!e?.business_id){r([]),o([]),d([]),p(!1);return}const{data:ie,error:De}=await Oe.from("side_businesses").select("*").eq("parent_shop_id",e.business_id).order("created_at",{ascending:!1});if(De)throw De;const{data:mt,error:vt}=await Oe.from("side_business_items").select(`
          *,
          side_businesses (name)
        `).eq("parent_shop_id",e.business_id).order("created_at",{ascending:!1});if(vt)throw vt;const{data:xr,error:Jt}=await Oe.from("side_business_sales").select(`
          *,
          side_business_items (
            name,
            side_businesses (name)
          )
        `).eq("parent_shop_id",e.business_id).order("date_time",{ascending:!1}).limit(10);if(Jt)throw Jt;r(ie||[]),o(mt||[]),d(xr||[])}catch(ie){x(ie instanceof Error?ie.message:"Failed to fetch data")}finally{p(!1)}},ft=async ie=>{if(ie.preventDefault(),!Ve.name.trim()){x("Business name is required");return}if(!Ve.business_type){x("Business type is required");return}if(!e?.user_id){x("User not authenticated");return}try{x(null);const{data:De,error:mt}=await Oe.from("side_businesses").insert({owner_id:e.user_id,name:Ve.name.trim(),description:Ve.description.trim()||null,business_type:Ve.business_type,parent_shop_id:e.business_id}).select();if(mt)throw console.error("Database error:",mt),new Error(`Database error: ${mt.message}`);if(!De||De.length===0)throw new Error("No data returned from insert");const vt=De[0].business_id;if(je){tt(!0);try{await h6(je,vt.toString(),e.user_id)}catch(xr){console.error("Error uploading image:",xr)}finally{tt(!1)}}Je({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),q(null),ne(!1),await St()}catch(De){console.error("Error adding business:",De),x(De instanceof Error?De.message:"Failed to add business")}},Ft=async ie=>{ie.preventDefault();try{const{error:De}=await Oe.from("side_business_items").insert({business_id:parseInt(Me.business_id),name:Me.name,price:Me.price?parseFloat(Me.price):null,stock_qty:Me.stock_qty?parseInt(Me.stock_qty):null,notes:Me.notes.trim()||null,parent_shop_id:e?.business_id});if(De)throw De;ct({business_id:"",name:"",price:"",stock_qty:"",notes:""}),re(!1),St()}catch(De){x(De instanceof Error?De.message:"Failed to add item")}},Dt=async ie=>{ie.preventDefault();try{const{error:De}=await Oe.from("side_business_sales").insert({item_id:parseInt(pt.item_id),quantity:pt.quantity,total_amount:parseFloat(pt.total_amount),payment_method:pt.payment_method,parent_shop_id:e?.business_id});if(De)throw De;ut({item_id:"",quantity:1,total_amount:"",payment_method:"cash"}),Q(!1),St()}catch(De){x(De instanceof Error?De.message:"Failed to add sale")}},jr=async ie=>{try{console.log(" Starting delete for sale:",ie);const{error:De}=await Oe.from("side_business_sales").delete().eq("sale_id",ie);if(De)throw console.error(" Error deleting sale:",De),De;console.log(" Sale deleted successfully"),D(null),St()}catch(De){console.error(" Delete sale failed:",De),x(De instanceof Error?De.message:"Failed to delete sale")}},Xt=async ie=>{try{console.log(" Starting delete for business:",ie);const{data:De,error:mt}=await Oe.from("side_business_items").select("item_id").eq("business_id",ie);if(mt)throw console.error(" Error fetching items:",mt),mt;if(console.log(" Found items to delete:",De?.length||0),De&&De.length>0){const Jt=De.map(Wr=>Wr.item_id);console.log(" Deleting sales for items:",Jt);const{error:Xe}=await Oe.from("side_business_sales").delete().in("item_id",Jt);if(Xe)throw console.error(" Error deleting sales:",Xe),Xe;console.log(" Sales deleted successfully")}console.log(" Deleting items for business:",ie);const{error:vt}=await Oe.from("side_business_items").delete().eq("business_id",ie);if(vt)throw console.error(" Error deleting items:",vt),vt;console.log(" Items deleted successfully"),console.log(" Deleting business:",ie);const{error:xr}=await Oe.from("side_businesses").delete().eq("business_id",ie);if(xr)throw console.error(" Error deleting business:",xr),xr;console.log(" Business deleted successfully"),se(null),St()}catch(De){console.error(" Delete failed:",De),x(De instanceof Error?De.message:"Failed to delete business")}},It=async ie=>{try{const De=new Date,mt=new Date(De.getFullYear(),De.getMonth(),De.getDate()),vt=new Date(mt);vt.setDate(mt.getDate()-mt.getDay());const xr=new Date(De.getFullYear(),De.getMonth(),1),{data:Jt}=await Oe.from("side_business_items").select("item_id, stock_qty").eq("business_id",ie),Xe=Jt?.reduce((ar,Et)=>ar+(Et.stock_qty||0),0)||0,Wr=Jt?.map(ar=>ar.item_id)||[];if(Wr.length===0){E({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}});return}const{data:Gt}=await Oe.from("side_business_sales").select("total_amount").in("item_id",Wr).gte("date_time",mt.toISOString()),{data:Bn}=await Oe.from("side_business_sales").select("total_amount").in("item_id",Wr).gte("date_time",vt.toISOString()),{data:Nr}=await Oe.from("side_business_sales").select("total_amount").in("item_id",Wr).gte("date_time",xr.toISOString());E({currentStock:Xe,dailySales:{count:Gt?.length||0,revenue:Gt?.reduce((ar,Et)=>ar+Et.total_amount,0)||0},weeklySales:{count:Bn?.length||0,revenue:Bn?.reduce((ar,Et)=>ar+Et.total_amount,0)||0},monthlySales:{count:Nr?.length||0,revenue:Nr?.reduce((ar,Et)=>ar+Et.total_amount,0)||0}})}catch(De){console.error("Error fetching business analytics:",De),E({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}})}},ce=async ie=>{if(ie.preventDefault(),!(!V.item_id||!V.restock_quantity))try{const De=V.current_stock+parseInt(V.restock_quantity),{error:mt}=await Oe.from("side_business_items").update({stock_qty:De}).eq("item_id",V.item_id);if(mt)throw mt;ue({item_id:null,current_stock:0,restock_quantity:""}),W(!1),St(),te&&It(te.business_id)}catch(De){x(De instanceof Error?De.message:"Failed to restock item")}},me=ie=>{ue({item_id:ie.item_id,current_stock:ie.stock_qty||0,restock_quantity:""}),W(!0)},qe=ie=>{Be(ie),Ce(!0)},yt=async ie=>{if(ie.preventDefault(),!!Te)try{const{error:De}=await Oe.from("side_business_items").update({name:Te.name,price:Te.price,notes:Te.notes}).eq("item_id",Te.item_id);if(De)throw De;Ce(!1),Be(null),St(),te&&It(te.business_id)}catch(De){x(De instanceof Error?De.message:"Failed to update item")}},Ct=ie=>{ae(ie),J(!0),It(ie.business_id)},gr=ie=>{switch(ie){case"rental":return I.statusBadgeRental;case"resale":return I.statusBadgeResale;case"service":return I.statusBadgeService;default:return I.statusBadgeGray}},Cr=ie=>{switch(ie){case"cash":return I.statusBadgeCash;case"card":return I.statusBadgeCard;case"mobile":return I.statusBadgeMobile;default:return I.statusBadgeGray}},or=s.filter(ie=>{const De=v==="all"||ie.business_id.toString()===v,mt=_===""||ie.name.toLowerCase().includes(_.toLowerCase())||ie.side_businesses?.name.toLowerCase().includes(_.toLowerCase());return De&&mt}).sort((ie,De)=>{let mt,vt;switch(A){case"name":mt=ie.name.toLowerCase(),vt=De.name.toLowerCase();break;case"price":mt=ie.price||0,vt=De.price||0;break;case"created_at":mt=new Date(ie.created_at),vt=new Date(De.created_at);break;default:return 0}return O==="asc"?mt-vt:vt-mt}),Er=t.filter(ie=>{const De=b==="all"||ie.business_type===b,mt=_===""||ie.name.toLowerCase().includes(_.toLowerCase())||ie.description?.toLowerCase().includes(_.toLowerCase());return De&&mt}).sort((ie,De)=>{let mt,vt;switch(A){case"name":mt=ie.name.toLowerCase(),vt=De.name.toLowerCase();break;case"created_at":mt=new Date(ie.created_at),vt=new Date(De.created_at);break;default:return 0}return O==="asc"?mt-vt:vt-mt}),Qt=c.filter(ie=>{const De=s.find(Xe=>Xe.item_id===ie.item_id)?.business_id,mt=v==="all"||De?.toString()===v,vt=t.find(Xe=>Xe.business_id===De),xr=b==="all"||vt?.business_type===b,Jt=_===""||ie.side_business_items?.name.toLowerCase().includes(_.toLowerCase())||ie.side_business_items?.side_businesses?.name.toLowerCase().includes(_.toLowerCase());return mt&&xr&&Jt}).sort((ie,De)=>{const mt=new Date(ie.date_time),vt=new Date(De.date_time);return O==="asc"?mt.getTime()-vt.getTime():vt.getTime()-mt.getTime()}),lr=[...new Set(t.map(ie=>ie.business_type).filter(Boolean))];return f?a.jsx("div",{className:I.loadingStateContainer,children:a.jsxs("div",{className:I.loadingStateText,children:[a.jsx("i",{className:`fa-solid fa-spinner ${I.loadingStateSpinner}`}),"Loading side businesses..."]})}):h?a.jsx("div",{className:I.errorStateContainer,children:a.jsxs("div",{className:I.errorStateContent,children:[a.jsx("i",{className:`fa-solid fa-exclamation-triangle ${I.errorStateIcon}`}),a.jsx("h2",{className:I.errorStateTitle,children:"Error Loading Side Businesses"}),a.jsx("p",{className:I.errorStateText,children:h}),a.jsx("button",{className:I.errorStateRetryButton,onClick:St,children:"Try Again"})]})}):a.jsxs("div",{className:I.sideBusinessesContainer,children:[a.jsxs("div",{className:I.pageHeader,children:[a.jsxs("h1",{className:I.pageTitle,children:[a.jsx("i",{className:"fa-solid fa-briefcase"}),"Side Businesses"]}),a.jsxs("button",{onClick:()=>ne(!0),className:I.primaryButton,children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add Business"]})]}),a.jsx(lC,{searchTerm:_,onSearchChange:S,searchPlaceholder:"Search businesses, items, or sales...",showSearchResults:!!_,searchResultsCount:or.length+Er.length+Qt.length,onClearSearch:()=>S(""),filters:[{label:"Business",value:v,onChange:y,options:[{value:"all",label:"All Businesses"},...t.map(ie=>({value:ie.business_id.toString(),label:ie.name}))]},{label:"Type",value:b,onChange:w,options:[{value:"all",label:"All Types"},...lr.map(ie=>({value:ie,label:ie.charAt(0).toUpperCase()+ie.slice(1)}))]}],sortOptions:[{label:"Sort",value:A,onChange:ie=>k(ie),options:[{value:"created_at",label:"Date Created"},{value:"name",label:"Name"},{value:"price",label:"Price"}]}],onSortToggle:()=>L(O==="asc"?"desc":"asc"),sortOrder:O,hasActiveFilters:v!=="all"||b!=="all",onClearFilters:()=>{y("all"),w("all")}}),a.jsxs("div",{className:I.statisticsGrid,children:[a.jsx("div",{className:I.statisticsCard,children:a.jsxs("div",{className:I.statisticsCardContent,children:[a.jsxs("div",{className:I.statisticsInfo,children:[a.jsx("p",{className:I.statisticsLabel,children:"Total Businesses"}),a.jsx("p",{className:I.statisticsValue,children:Er.length})]}),a.jsx("i",{className:`fas fa-briefcase ${I.statisticsIcon} ${I.statisticsIconPurple}`})]})}),a.jsx("div",{className:I.statisticsCard,children:a.jsxs("div",{className:I.statisticsCardContent,children:[a.jsxs("div",{className:I.statisticsInfo,children:[a.jsx("p",{className:I.statisticsLabel,children:"Total Items"}),a.jsx("p",{className:I.statisticsValue,children:or.length})]}),a.jsx("i",{className:`fas fa-box ${I.statisticsIcon} ${I.statisticsIconBlue}`})]})}),a.jsx("div",{className:I.statisticsCard,children:a.jsxs("div",{className:I.statisticsCardContent,children:[a.jsxs("div",{className:I.statisticsInfo,children:[a.jsx("p",{className:I.statisticsLabel,children:"Total Sales"}),a.jsx("p",{className:I.statisticsValue,children:Qt.length})]}),a.jsx("i",{className:`fas fa-chart-line ${I.statisticsIcon} ${I.statisticsIconGreen}`})]})}),a.jsx("div",{className:I.statisticsCard,children:a.jsxs("div",{className:I.statisticsCardContent,children:[a.jsxs("div",{className:I.statisticsInfo,children:[a.jsx("p",{className:I.statisticsLabel,children:"Revenue"}),a.jsxs("p",{className:I.statisticsValue,children:["",Qt.reduce((ie,De)=>ie+De.total_amount,0).toFixed(2)]})]}),a.jsx("i",{className:`fas fa-euro-sign ${I.statisticsIcon} ${I.statisticsIconOrange}`})]})})]}),a.jsxs("div",{className:I.mainContentGrid,children:[a.jsxs("div",{className:I.contentPanel,children:[a.jsx("div",{className:I.contentPanelHeader,children:a.jsx("h2",{className:I.contentPanelTitle,children:"Businesses"})}),a.jsx("div",{className:I.contentPanelBody,children:Er.length===0?a.jsxs("div",{className:I.emptyStateMessage,children:[a.jsx("i",{className:`fa-solid fa-briefcase ${I.emptyStateMessageIcon}`}),a.jsx("p",{className:I.emptyStateMessageText,children:"No businesses found. Add your first side business to get started!"})]}):a.jsx("div",{className:`${I.listContainer} ${I.listContainerDivided}`,children:Er.map(ie=>a.jsx("div",{className:I.listItemCard,onClick:()=>Ct(ie),children:a.jsxs("div",{className:I.listItemCardContent,children:[a.jsx("div",{className:I.listItemCardIcon,children:ie.image_url&&a.jsx("img",{src:ie.image_url,alt:ie.name,style:{width:"40px",height:"40px",borderRadius:"8px",objectFit:"cover"}})}),a.jsxs("div",{className:I.listItemCardMain,children:[a.jsx("h3",{className:I.listItemCardTitle,children:ie.name}),ie.description&&a.jsx("p",{className:I.listItemCardSubtitle,children:ie.description}),a.jsxs("div",{className:I.listItemCardMeta,children:[a.jsx("span",{className:`${I.statusBadge} ${gr(ie.business_type)}`,children:ie.business_type||"service"}),a.jsxs("span",{className:I.listItemCardCount,children:[s.filter(De=>De.business_id===ie.business_id).length," items"]})]})]}),a.jsx("div",{className:I.listItemCardActions,children:a.jsxs("button",{onClick:De=>{De.stopPropagation(),se(ie)},className:`${I.actionButton} ${I.actionButtonDanger}`,title:"Delete Business",children:[a.jsx("i",{className:`fas fa-trash ${I.actionButtonIcon}`}),"Delete"]})})]})},ie.business_id))})})]}),a.jsxs("div",{className:I.contentPanel,children:[a.jsxs("div",{className:I.contentPanelHeader,children:[a.jsx("h2",{className:I.contentPanelTitle,children:"Items"}),a.jsxs("button",{onClick:()=>re(!0),className:I.actionButton,style:{marginLeft:"auto"},children:[a.jsx("i",{className:`fas fa-plus ${I.actionButtonIcon}`}),"Add Item"]})]}),a.jsx("div",{className:I.contentPanelBody,children:or.length===0?a.jsxs("div",{className:I.emptyStateMessage,children:[a.jsx("i",{className:`fa-solid fa-box ${I.emptyStateMessageIcon}`}),a.jsx("p",{className:I.emptyStateMessageText,children:"No items found. Add items to your businesses!"})]}):a.jsx("div",{className:`${I.listContainer} ${I.listContainerDivided}`,children:or.map(ie=>a.jsx("div",{className:I.listItemCard,children:a.jsxs("div",{className:I.listItemCardContent,children:[a.jsxs("div",{className:I.listItemCardMain,children:[a.jsx("h3",{className:I.listItemCardTitle,children:ie.name}),a.jsx("p",{className:I.listItemCardSubtitle,children:ie.side_businesses?.name||"Unknown Business"}),a.jsxs("div",{className:I.listItemCardMeta,children:[ie.price?a.jsxs("span",{className:I.listItemCardPrice,children:["",ie.price]}):a.jsx("span",{className:I.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),ie.stock_qty!==null&&a.jsxs("span",{className:I.listItemCardStock,children:["Stock: ",ie.stock_qty]}),t.find(De=>De.business_id===ie.business_id)?.business_type==="service"&&a.jsx("span",{className:`${I.statusBadge} ${I.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]})]}),a.jsx("div",{className:I.listItemCardActions,children:a.jsxs("button",{onClick:()=>{ut(De=>({...De,item_id:ie.item_id.toString()})),Q(!0)},className:I.actionButton,children:[a.jsx("i",{className:`fas fa-plus ${I.actionButtonIcon}`}),"Sale"]})})]})},ie.item_id))})})]}),a.jsxs("div",{className:I.contentPanel,children:[a.jsx("div",{className:I.contentPanelHeader,children:a.jsx("h2",{className:I.contentPanelTitle,children:"Recent Sales"})}),a.jsx("div",{className:I.contentPanelBody,children:Qt.length===0?a.jsxs("div",{className:I.emptyStateMessage,children:[a.jsx("i",{className:`fa-solid fa-receipt ${I.emptyStateMessageIcon}`}),a.jsx("p",{className:I.emptyStateMessageText,children:"No sales recorded yet."})]}):a.jsx("div",{className:`${I.listContainer} ${I.listContainerDivided}`,children:Qt.map(ie=>a.jsx("div",{className:I.listItemCard,children:a.jsxs("div",{className:I.listItemCardContent,children:[a.jsxs("div",{className:I.listItemCardMain,children:[a.jsx("h3",{className:I.listItemCardTitle,children:ie.side_business_items?.name||"Unknown Item"}),a.jsx("p",{className:I.listItemCardSubtitle,children:ie.side_business_items?.side_businesses?.name||"Unknown Business"}),a.jsxs("p",{className:I.listItemCardTime,children:[new Date(ie.date_time).toLocaleDateString()," at ",new Date(ie.date_time).toLocaleTimeString()]}),a.jsxs("div",{className:I.listItemCardMeta,children:[a.jsxs("span",{className:I.listItemCardCount,children:["Qty: ",ie.quantity]}),a.jsxs("span",{className:I.listItemCardPrice,children:["",ie.total_amount]}),a.jsx("span",{className:`${I.statusBadge} ${Cr(ie.payment_method)}`,children:ie.payment_method})]})]}),a.jsx("div",{className:I.listItemCardActions,children:a.jsxs("button",{onClick:De=>{De.stopPropagation(),D(ie)},className:`${I.actionButton} ${I.actionButtonDanger}`,title:"Delete Sale",children:[a.jsx("i",{className:`fas fa-trash ${I.actionButtonIcon}`}),"Delete"]})})]})},ie.sale_id))})})]})]}),K&&a.jsx("div",{className:I.modalOverlay,children:a.jsxs("div",{className:I.modalDialog,children:[a.jsxs("div",{className:I.modalHeader,children:[a.jsx("h2",{className:I.modalDialogTitle,children:"Create New Business"}),a.jsx("button",{type:"button",onClick:()=>{Je({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),ne(!1),x(null)},className:I.modalCloseButton,children:a.jsx("i",{className:"fas fa-times"})})]}),h&&a.jsxs("div",{className:I.errorMessage,children:[a.jsx("i",{className:"fas fa-exclamation-triangle"}),h]}),a.jsxs("form",{onSubmit:ft,className:I.modalDialogForm,children:[a.jsxs("div",{className:I.formFieldGroup,children:[a.jsxs("label",{className:I.formFieldLabel,children:["Business Name ",a.jsx("span",{className:I.required,children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:Ve.name,onChange:ie=>Je(De=>({...De,name:ie.target.value})),className:I.formFieldInput,placeholder:"Enter business name",maxLength:100})]}),a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Description"}),a.jsx("textarea",{value:Ve.description,onChange:ie=>Je(De=>({...De,description:ie.target.value})),className:I.formFieldTextarea,rows:3,placeholder:"Brief description of your business",maxLength:500}),a.jsx("small",{className:I.formFieldHelp,children:"Optional: Describe what your business does"})]}),a.jsxs("div",{className:I.formFieldGroup,children:[a.jsxs("label",{className:I.formFieldLabel,children:["Business Type ",a.jsx("span",{className:I.required,children:"*"})]}),a.jsxs("select",{value:Ve.business_type,onChange:ie=>Je(De=>({...De,business_type:ie.target.value})),className:I.formFieldSelect,required:!0,children:[a.jsx("option",{value:"",children:"Select business type"}),a.jsx("option",{value:"service",children:"Service (Custom pricing per transaction)"}),a.jsx("option",{value:"rental",children:"Rental (Fixed pricing with stock)"}),a.jsx("option",{value:"resale",children:"Resale (Fixed pricing with stock)"})]}),a.jsxs("small",{className:I.formFieldHelp,children:[Ve.business_type==="service"&&"Services allow custom pricing for each transaction",Ve.business_type==="rental"&&"Rentals have fixed prices and track stock quantities",Ve.business_type==="resale"&&"Resale items have fixed prices and track stock quantities"]})]}),a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Business Image"}),a.jsx("input",{type:"file",accept:"image/*",onChange:ie=>{const De=ie.target.files?.[0];q(De||null)},className:I.formFieldInput}),a.jsx("small",{className:I.formFieldHelp,children:"Optional: Upload an image for your business (max 5MB, will be compressed)"}),je&&a.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#f0f0f0",borderRadius:"4px"},children:[a.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#7d8d86"}}),"Selected: ",je.name]})]}),a.jsxs("div",{className:I.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>{Je({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),q(null),ne(!1),x(null)},className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:!Ve.name.trim()||!Ve.business_type||be,className:`${I.standardButton} ${I.standardButtonPrimary}`,children:be?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin",style:{marginRight:"8px"}}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Create Business"]})})]})]})]})}),M&&a.jsx("div",{className:I.modalOverlay,children:a.jsxs("div",{className:I.modalDialog,children:[a.jsx("h2",{className:I.modalDialogTitle,children:"Add Item"}),a.jsxs("form",{onSubmit:Ft,className:I.modalDialogForm,children:[a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Business"}),a.jsxs("select",{required:!0,value:Me.business_id,onChange:ie=>ct(De=>({...De,business_id:ie.target.value})),className:I.formFieldSelect,children:[a.jsx("option",{value:"",children:"Select a business"}),t.map(ie=>a.jsxs("option",{value:ie.business_id,children:[ie.name," (",ie.business_type,")"]},ie.business_id))]})]}),a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Item Name"}),a.jsx("input",{type:"text",required:!0,value:Me.name,onChange:ie=>ct(De=>({...De,name:ie.target.value})),className:I.formFieldInput,placeholder:"e.g., Haircut, Chair Rental, etc."})]}),Me.business_id&&t.find(ie=>ie.business_id.toString()===Me.business_id)?.business_type!=="service"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Price ()"}),a.jsx("input",{type:"number",step:"0.01",value:Me.price,onChange:ie=>ct(De=>({...De,price:ie.target.value})),className:I.formFieldInput,placeholder:"0.00"})]}),a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Stock Quantity"}),a.jsx("input",{type:"number",min:"0",value:Me.stock_qty,onChange:ie=>ct(De=>({...De,stock_qty:ie.target.value})),className:I.formFieldInput,placeholder:"0"})]})]}),Me.business_id&&t.find(ie=>ie.business_id.toString()===Me.business_id)?.business_type==="service"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:I.formFieldGroup,children:a.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:0},children:[a.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"8px"}}),"Service items don't have fixed prices or stock. You'll enter the amount when recording a sale."]})}),a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Service Notes"}),a.jsx("textarea",{value:Me.notes,onChange:ie=>ct(De=>({...De,notes:ie.target.value})),className:I.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details for this service...",maxLength:500}),a.jsx("small",{className:I.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details for this service"})]})]}),a.jsxs("div",{className:I.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>re(!1),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"submit",className:`${I.standardButton} ${I.standardButtonSuccess}`,children:"Add Item"})]})]})]})}),oe&&a.jsx("div",{className:I.modalOverlay,style:{zIndex:2e3},children:a.jsxs("div",{className:I.modalDialog,children:[a.jsx("h2",{className:I.modalDialogTitle,children:"Record Sale"}),a.jsxs("form",{onSubmit:Dt,className:I.modalDialogForm,children:[a.jsxs("div",{className:I.formGroup,children:[a.jsx("label",{className:I.formLabel,children:"Item"}),a.jsxs("select",{required:!0,value:pt.item_id,onChange:ie=>ut(De=>({...De,item_id:ie.target.value})),className:I.formFieldSelect,children:[a.jsx("option",{value:"",children:"Select an item"}),s.map(ie=>a.jsxs("option",{value:ie.item_id,children:[ie.name," - ",ie.side_businesses?.name,ie.side_businesses&&t.find(De=>De.name===ie.side_businesses?.name)?.business_type==="service"?" (Service - Custom Amount)":ie.price?` (${ie.price})`:""]},ie.item_id))]})]}),a.jsxs("div",{className:I.formGroup,children:[a.jsx("label",{className:I.formLabel,children:"Quantity"}),a.jsx("input",{type:"number",min:"1",required:!0,value:pt.quantity,onChange:ie=>ut(De=>({...De,quantity:parseInt(ie.target.value)})),className:I.formFieldInput})]}),a.jsxs("div",{className:I.formGroup,children:[a.jsx("label",{className:I.formLabel,children:"Total Amount ()"}),a.jsx("input",{type:"number",step:"0.01",required:!0,value:pt.total_amount,onChange:ie=>ut(De=>({...De,total_amount:ie.target.value})),className:I.formFieldInput,placeholder:"0.00"}),pt.item_id&&s.find(ie=>ie.item_id.toString()===pt.item_id)&&t.find(ie=>ie.name===s.find(De=>De.item_id.toString()===pt.item_id)?.side_businesses?.name)?.business_type==="service"&&a.jsxs("p",{style:{color:"#7d8d86",fontSize:"12px",margin:"4px 0 0 0"},children:[a.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"4px"}}),"Enter the custom amount for this service"]})]}),a.jsxs("div",{className:I.formGroup,children:[a.jsx("label",{className:I.formLabel,children:"Payment Method"}),a.jsxs("select",{value:pt.payment_method,onChange:ie=>ut(De=>({...De,payment_method:ie.target.value})),className:I.formFieldSelect,children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"mobile",children:"Mobile"})]})]}),a.jsxs("div",{className:I.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>Q(!1),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"submit",className:`${I.standardButton} ${I.standardButtonSuccess}`,children:"Record Sale"})]})]})]})}),X&&te&&a.jsx("div",{className:I.modalOverlay,children:a.jsxs("div",{className:I.modalDialog,style:{maxWidth:"600px"},children:[a.jsx("h2",{className:I.modalDialogTitle,children:"Business Details"}),a.jsxs("div",{className:I.businessDetailModalHeader,children:[a.jsx("div",{className:I.businessDetailModalIcon,children:te.image_url?a.jsx("img",{src:te.image_url,alt:te.name,style:{width:"100%",height:"100%",borderRadius:"16px",objectFit:"cover"}}):a.jsx("i",{className:te.icon||"fa-solid fa-briefcase"})}),a.jsxs("div",{className:I.businessDetailModalInfo,children:[a.jsx("h3",{className:I.businessDetailModalName,children:te.name}),a.jsx("p",{className:I.businessDetailModalDescription,children:te.description||"No description provided"}),a.jsxs("div",{className:I.businessDetailModalMeta,children:[a.jsx("span",{className:`${I.statusBadge} ${gr(te.business_type)}`,children:te.business_type||"service"}),a.jsxs("span",{className:I.businessDetailModalDate,children:["Created: ",new Date(te.created_at).toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:I.businessDetailModalStats,children:[a.jsx("div",{className:I.statisticsCard,children:a.jsxs("div",{className:I.statisticsCardContent,children:[a.jsxs("div",{className:I.statisticsInfo,children:[a.jsx("p",{className:I.statisticsLabel,children:"Total Items"}),a.jsx("p",{className:I.statisticsValue,children:s.filter(ie=>ie.business_id===te.business_id).length})]}),a.jsx("i",{className:`fas fa-box ${I.statisticsIcon} ${I.statisticsIconBlue}`})]})}),a.jsx("div",{className:I.statisticsCard,children:a.jsxs("div",{className:I.statisticsCardContent,children:[a.jsxs("div",{className:I.statisticsInfo,children:[a.jsx("p",{className:I.statisticsLabel,children:"Current Stock"}),a.jsx("p",{className:I.statisticsValue,children:U?.currentStock||0})]}),a.jsx("i",{className:`fas fa-warehouse ${I.statisticsIcon} ${I.statisticsIconOrange}`})]})})]}),a.jsxs("div",{className:I.businessAnalyticsSection,children:[a.jsx("h4",{className:I.analyticsSectionTitle,children:"Sales Analytics"}),a.jsxs("div",{className:I.analyticsGrid,children:[a.jsxs("div",{className:I.analyticsCard,children:[a.jsxs("div",{className:I.analyticsCardHeader,children:[a.jsx("i",{className:`fas fa-calendar-day ${I.analyticsIcon} ${I.analyticsIconBlue}`}),a.jsx("span",{className:I.analyticsPeriod,children:"Today"})]}),a.jsxs("div",{className:I.analyticsCardContent,children:[a.jsxs("div",{className:I.analyticsMetric,children:[a.jsx("span",{className:I.analyticsLabel,children:"Sales"}),a.jsx("span",{className:I.analyticsValue,children:U?.dailySales.count||0})]}),a.jsxs("div",{className:I.analyticsMetric,children:[a.jsx("span",{className:I.analyticsLabel,children:"Revenue"}),a.jsxs("span",{className:I.analyticsValue,children:["",(U?.dailySales.revenue||0).toFixed(2)]})]})]})]}),a.jsxs("div",{className:I.analyticsCard,children:[a.jsxs("div",{className:I.analyticsCardHeader,children:[a.jsx("i",{className:`fas fa-calendar-week ${I.analyticsIcon} ${I.analyticsIconGreen}`}),a.jsx("span",{className:I.analyticsPeriod,children:"This Week"})]}),a.jsxs("div",{className:I.analyticsCardContent,children:[a.jsxs("div",{className:I.analyticsMetric,children:[a.jsx("span",{className:I.analyticsLabel,children:"Sales"}),a.jsx("span",{className:I.analyticsValue,children:U?.weeklySales.count||0})]}),a.jsxs("div",{className:I.analyticsMetric,children:[a.jsx("span",{className:I.analyticsLabel,children:"Revenue"}),a.jsxs("span",{className:I.analyticsValue,children:["",(U?.weeklySales.revenue||0).toFixed(2)]})]})]})]}),a.jsxs("div",{className:I.analyticsCard,children:[a.jsxs("div",{className:I.analyticsCardHeader,children:[a.jsx("i",{className:`fas fa-calendar-alt ${I.analyticsIcon} ${I.analyticsIconPurple}`}),a.jsx("span",{className:I.analyticsPeriod,children:"This Month"})]}),a.jsxs("div",{className:I.analyticsCardContent,children:[a.jsxs("div",{className:I.analyticsMetric,children:[a.jsx("span",{className:I.analyticsLabel,children:"Sales"}),a.jsx("span",{className:I.analyticsValue,children:U?.monthlySales.count||0})]}),a.jsxs("div",{className:I.analyticsMetric,children:[a.jsx("span",{className:I.analyticsLabel,children:"Revenue"}),a.jsxs("span",{className:I.analyticsValue,children:["",(U?.monthlySales.revenue||0).toFixed(2)]})]})]})]})]})]}),a.jsxs("div",{className:I.businessDetailModalItems,children:[a.jsxs("div",{className:I.itemsSectionHeader,children:[a.jsx("h4",{children:"Items in this business:"}),a.jsxs("button",{onClick:()=>re(!0),className:I.restockButton,title:"Add new item",children:[a.jsx("i",{className:"fas fa-plus"}),"Add Item"]})]}),s.filter(ie=>ie.business_id===te.business_id).length===0?a.jsx("p",{className:I.noItemsMessage,children:"No items added yet."}):a.jsx("div",{className:I.listContainer,children:s.filter(ie=>ie.business_id===te.business_id).map(ie=>a.jsx("div",{className:I.listItemCard,children:a.jsxs("div",{className:I.listItemCardContent,children:[a.jsxs("div",{className:I.listItemCardMain,children:[a.jsx("h4",{className:I.listItemCardTitle,children:ie.name}),a.jsxs("div",{className:I.listItemCardMeta,children:[ie.price?a.jsxs("span",{className:I.listItemCardPrice,children:["",ie.price]}):a.jsx("span",{className:I.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),ie.stock_qty!==null&&a.jsxs("span",{className:I.listItemCardStock,children:["Stock: ",ie.stock_qty]}),te?.business_type==="service"&&a.jsx("span",{className:`${I.statusBadge} ${I.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]}),ie.notes&&a.jsxs("div",{className:I.listItemCardNotes,children:[a.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"6px",color:"#6b7280"}}),a.jsx("span",{style:{fontSize:"12px",color:"#6b7280",fontStyle:"italic"},children:ie.notes.length>100?`${ie.notes.substring(0,100)}...`:ie.notes})]})]}),a.jsxs("div",{className:I.listItemCardActions,children:[a.jsxs("button",{onClick:()=>qe(ie),className:`${I.actionButton} ${I.editActionButton}`,title:"Edit item",children:[a.jsx("i",{className:`fas fa-edit ${I.actionButtonIcon}`}),"Edit"]}),ie.stock_qty!==null&&a.jsxs("button",{onClick:()=>me(ie),className:`${I.actionButton} ${I.restockActionButton}`,title:"Restock item",children:[a.jsx("i",{className:`fas fa-boxes-stacked ${I.actionButtonIcon}`}),"Restock"]}),a.jsxs("button",{onClick:()=>{ut(De=>({...De,item_id:ie.item_id.toString()})),Q(!0)},className:I.actionButton,title:"Record sale",children:[a.jsx("i",{className:`fas fa-plus ${I.actionButtonIcon}`}),"Sale"]})]})]})},ie.item_id))})]}),a.jsxs("div",{className:I.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>J(!1),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Close"}),a.jsx("button",{type:"button",onClick:()=>{J(!1),se(te)},className:`${I.standardButton} ${I.standardButtonDanger}`,children:"Delete Business"})]})]})}),fe&&a.jsx("div",{className:I.modalOverlay,children:a.jsxs("div",{className:I.modalDialog,children:[a.jsx("h2",{className:I.modalDialogTitle,children:"Delete Business"}),a.jsxs("p",{className:I.deleteConfirmationWarning,children:["Are you sure you want to delete ",a.jsx("strong",{children:fe.name}),"?"]}),a.jsx("p",{className:I.deleteConfirmationWarningText,children:"This will permanently delete the business, all its items, and all related sales records. This action cannot be undone."}),a.jsxs("div",{className:I.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>se(null),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>Xt(fe.business_id),className:`${I.standardButton} ${I.standardButtonDanger}`,children:"Delete Business"})]})]})}),Ne&&a.jsx("div",{className:I.modalOverlay,children:a.jsxs("div",{className:I.modalDialog,children:[a.jsx("h2",{className:I.modalDialogTitle,children:"Delete Sale"}),a.jsx("p",{className:I.deleteConfirmationWarning,children:"Are you sure you want to delete this sale?"}),a.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"8px",margin:"16px 0",border:"1px solid #e9ecef"},children:[a.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:Ne.side_business_items?.name||"Unknown Item"}),a.jsx("p",{style:{margin:"0 0 4px 0",color:"#6c757d",fontSize:"14px"},children:Ne.side_business_items?.side_businesses?.name||"Unknown Business"}),a.jsxs("p",{style:{margin:"0 0 4px 0",color:"#6c757d",fontSize:"14px"},children:["Quantity: ",Ne.quantity,"  Total: ",Ne.total_amount]}),a.jsxs("p",{style:{margin:"0",color:"#6c757d",fontSize:"14px"},children:[new Date(Ne.date_time).toLocaleDateString()," at ",new Date(Ne.date_time).toLocaleTimeString()]})]}),a.jsx("p",{className:I.deleteConfirmationWarningText,children:"This will permanently delete the sale record. This action cannot be undone."}),a.jsxs("div",{className:I.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>D(null),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>jr(Ne.sale_id),className:`${I.standardButton} ${I.standardButtonDanger}`,children:"Delete Sale"})]})]})}),P&&V.item_id&&a.jsx("div",{className:I.modalOverlay,style:{zIndex:2e3},children:a.jsxs("div",{className:I.modalDialog,children:[a.jsx("h2",{className:I.modalDialogTitle,children:"Restock Item"}),a.jsxs("div",{className:I.restockInfo,children:[a.jsx("p",{className:I.restockItemName,children:s.find(ie=>ie.item_id===V.item_id)?.name}),a.jsxs("p",{className:I.restockCurrentStock,children:["Current Stock: ",a.jsx("strong",{children:V.current_stock})]})]}),a.jsxs("form",{onSubmit:ce,className:I.modalDialogForm,children:[a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Restock Quantity"}),a.jsx("input",{type:"number",min:"1",required:!0,value:V.restock_quantity,onChange:ie=>ue(De=>({...De,restock_quantity:ie.target.value})),className:I.formFieldInput,placeholder:"Enter quantity to add"})]}),a.jsx("div",{className:I.restockPreview,children:a.jsxs("p",{className:I.restockPreviewText,children:["New stock will be: ",a.jsx("strong",{children:V.current_stock+(parseInt(V.restock_quantity)||0)})]})}),a.jsxs("div",{className:I.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>W(!1),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${I.standardButton} ${I.standardButtonSuccess}`,children:[a.jsx("i",{className:"fas fa-boxes-stacked",style:{marginRight:"8px"}}),"Restock Item"]})]})]})]})}),Le&&Te&&a.jsx("div",{className:I.modalOverlay,style:{zIndex:2e3},children:a.jsxs("div",{className:I.modalDialog,children:[a.jsx("h2",{className:I.modalDialogTitle,children:"Edit Item"}),a.jsxs("form",{onSubmit:yt,className:I.modalDialogForm,children:[a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Item Name"}),a.jsx("input",{type:"text",required:!0,value:Te.name,onChange:ie=>Be(De=>De?{...De,name:ie.target.value}:null),className:I.formFieldInput,placeholder:"Enter item name"})]}),a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Price ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:Te.price||"",onChange:ie=>Be(De=>De?{...De,price:ie.target.value?parseFloat(ie.target.value):null}:null),className:I.formFieldInput,placeholder:"Enter price (leave empty for custom pricing)"}),a.jsx("small",{className:I.formFieldHelp,children:"Leave empty for service items with custom pricing"})]}),a.jsxs("div",{className:I.formFieldGroup,children:[a.jsx("label",{className:I.formFieldLabel,children:"Notes"}),a.jsx("textarea",{value:Te.notes||"",onChange:ie=>Be(De=>De?{...De,notes:ie.target.value}:null),className:I.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details...",maxLength:500}),a.jsx("small",{className:I.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details"})]}),a.jsxs("div",{className:I.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>Ce(!1),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${I.standardButton} ${I.standardButtonPrimary}`,children:[a.jsx("i",{className:"fas fa-save",style:{marginRight:"8px"}}),"Update Item"]})]})]})]})})]})},g6=()=>{const{data:e,isLoading:t,error:r}=hu(),s=M0(),o=i1({mutationFn:async d=>{const{error:f}=await Oe.from("sales").update({partial_payment:!1,notes:null}).eq("sale_id",d);if(f)throw f},onSuccess:()=>{s.invalidateQueries({queryKey:["salesData"]})}}),c=i1({mutationFn:async d=>{const{error:f}=await Oe.from("sale_items").delete().eq("sale_id",d);if(f)throw f;const{error:p}=await Oe.from("sales").delete().eq("sale_id",d);if(p)throw p},onSuccess:()=>{s.invalidateQueries({queryKey:["salesData"]})}});return{transactions:e?.sales||[],loading:t,error:r?.message||null,fetchTransactions:()=>s.invalidateQueries({queryKey:["salesData"]}),deleteTransaction:c.mutateAsync,resolvePartialPayment:o.mutateAsync}},$h=({children:e,maxWidth:t="1400px"})=>a.jsx("div",{style:{minHeight:"100vh",background:"#f8fafc",fontFamily:"Poppins, sans-serif",padding:"20px"},children:a.jsx("div",{style:{maxWidth:t,margin:"0 auto",background:"#ffffff",borderRadius:"12px",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:e})}),x6=({title:e,subtitle:t,icon:r,children:s})=>a.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:s?"16px":"0"},children:[a.jsxs("div",{children:[a.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[r&&a.jsx("i",{className:r,style:{marginRight:"12px",color:"#7d8d86"}}),e]}),t&&a.jsx("p",{style:{fontSize:"16px",color:"#6b7280",margin:"0"},children:t})]}),s]})}),Tv=({children:e,className:t="",style:r={},padding:s="md",background:o="white",hover:c=!1})=>{const d={borderRadius:"12px",border:"1px solid #e5e7eb",transition:c?"all 0.2s ease":"none",...r},f={white:{background:"#ffffff"},gray:{background:"#f9fafb"}},p={sm:{padding:"12px"},md:{padding:"20px"},lg:{padding:"24px"}},h={...d,...f[o],...p[s]};return a.jsx("div",{className:t,style:h,onMouseEnter:x=>{c&&(x.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",x.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:x=>{c&&(x.currentTarget.style.boxShadow="none",x.currentTarget.style.transform="translateY(0)")},children:e})},m6=({searchTerm:e,setSearchTerm:t,paymentFilter:r,setPaymentFilter:s,dateFilter:o,setDateFilter:c,selectedDate:d,showCalendar:f,setShowCalendar:p,itemsPerPage:h,setItemsPerPage:x,onCalendarDateSelect:v,generateCalendarDays:y,calendarDate:b,setCalendarDate:w,partialPaymentFilter:_,setPartialPaymentFilter:S})=>a.jsxs(Tv,{background:"gray",padding:"md",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",alignItems:"end"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Search Transactions"}),a.jsx("input",{type:"text",placeholder:"Search by ID, customer, cashier...",value:e,onChange:A=>t(A.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Method"}),a.jsxs("select",{value:r,onChange:A=>s(A.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:"all",children:"All Methods"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Type"}),a.jsxs("select",{value:_,onChange:A=>S(A.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:"all",children:"All Payments"}),a.jsx("option",{value:"full",children:"Full Payments"}),a.jsx("option",{value:"partial",children:"Partial Payments"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Date Range"}),a.jsxs("select",{value:o,onChange:A=>c(A.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:"all",children:"All Time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"Last 7 Days"}),a.jsx("option",{value:"month",children:"Last 30 Days"}),a.jsx("option",{value:"custom",children:"Custom Date"})]})]}),o==="custom"&&a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Select Date"}),a.jsx("button",{onClick:()=>p(!f),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff",cursor:"pointer",textAlign:"left"},children:d?new Date(d).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Select a date"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Items Per Page"}),a.jsxs("select",{value:h,onChange:A=>x(Number(A.target.value)),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]})]})]}),f&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("button",{onClick:()=>w(new Date(b.getFullYear(),b.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:b.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>w(new Date(b.getFullYear(),b.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(A=>a.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:A},A))}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:y().map((A,k)=>{const O=A.getMonth()===b.getMonth(),L=A.toDateString()===new Date().toDateString(),K=d&&A.toDateString()===new Date(d).toDateString();return a.jsx("button",{onClick:()=>v(A),style:{background:K?"#7d8d86":"transparent",color:K?"#f1f0e4":O?"#3e3f29":"#bca88d",border:L?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:O?1:.5},children:A.getDate()},k)})}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:a.jsx("button",{onClick:()=>v(new Date),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer"},children:"Today"})})]})})]}),$l=({children:e,onClick:t,type:r="button",variant:s="primary",size:o="md",disabled:c=!1,className:d="",style:f={}})=>{const p={border:"none",borderRadius:"6px",cursor:c?"not-allowed":"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500",...f},h={primary:{background:"#7d8d86",color:"#ffffff"},secondary:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db"},danger:{background:"#3e3f29",color:"#f1f0e4"},success:{background:"#10b981",color:"#ffffff"}},x={primary:{background:"#6a7a73"},secondary:{background:"#e5e7eb"},danger:{background:"#2a2b1f"},success:{background:"#059669"}},v={sm:{padding:"6px 12px",fontSize:"12px"},md:{padding:"8px 16px",fontSize:"14px"},lg:{padding:"12px 24px",fontSize:"16px"}},y={...p,...h[s],...v[o],opacity:c?.6:1};return a.jsx("button",{type:r,onClick:t,disabled:c,className:d,style:y,onMouseEnter:b=>{c||Object.assign(b.currentTarget.style,x[s])},onMouseLeave:b=>{c||Object.assign(b.currentTarget.style,h[s])},children:e})},y6=({transaction:e,onTransactionClick:t,onDeleteTransaction:r,onResolvePartialPayment:s})=>{const o=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),c=f=>new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),d=f=>{switch(f.toLowerCase()){case"cash":return"fa-solid fa-money-bill";case"card":return"fa-solid fa-credit-card";case"mobile_money":return"fa-solid fa-mobile";default:return"fa-solid fa-money-bill"}};return a.jsxs("div",{className:"transaction-card",onClick:()=>t(e.sale_id),style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",background:e.partial_payment?"#fef2f2":"#ffffff",borderRadius:"8px",border:e.partial_payment?"2px solid #dc2626":"2px solid #374151",cursor:"pointer",transition:"all 0.2s ease",position:"relative",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",marginBottom:"12px"},onMouseEnter:f=>{const p=f.currentTarget;p.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",p.style.transform="translateY(-2px)",p.style.border=e.partial_payment?"2px solid #dc2626":"2px solid #374151"},onMouseLeave:f=>{const p=f.currentTarget;p.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.15)",p.style.transform="translateY(0)",p.style.border=e.partial_payment?"2px solid #dc2626":"2px solid #374151"},children:[a.jsxs("div",{style:{width:"60px",textAlign:"center"},children:[a.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#7d8d86",background:"#f3f4f6",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:["#",e.sale_id.toString().slice(-6)]}),e.partial_payment&&a.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"#ffffff",background:"#dc2626",padding:"2px 6px",borderRadius:"3px",marginTop:"4px",display:"inline-block"},children:"PARTIAL"})]}),a.jsx("div",{style:{minWidth:"140px",fontSize:"14px",color:"#6b7280"},children:c(e.datetime)}),a.jsx("div",{style:{flex:1,minWidth:"120px",fontSize:"14px",color:"#374151",fontWeight:"500"},children:e.customer_name}),a.jsx("div",{style:{minWidth:"100px",fontSize:"14px",color:"#6b7280"},children:e.cashier_name}),a.jsxs("div",{style:{minWidth:"120px",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"#374151"},children:[a.jsx("i",{className:d(e.payment_method),style:{color:"#7d8d86"}}),a.jsx("span",{style:{textTransform:"capitalize"},children:e.payment_method.replace("_"," ")})]}),a.jsx("div",{style:{minWidth:"120px",textAlign:"right",fontSize:"16px",fontWeight:"600",color:e.partial_payment?"#dc2626":"#059669"},children:e.partial_payment?a.jsxs("div",{children:[a.jsxs("div",{style:{fontSize:"14px",color:"#dc2626"},children:["Paid: ",o(e.partial_amount||0)]}),a.jsxs("div",{style:{fontSize:"12px",color:"#dc2626"},children:["Owed: ",o(e.remaining_amount||0)]})]}):o(e.total_amount)}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.partial_payment&&s&&a.jsxs($l,{variant:"primary",size:"sm",onClick:f=>{f.stopPropagation(),s(e.sale_id)},children:[a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px"}}),"Resolve"]}),a.jsxs($l,{variant:"danger",size:"sm",onClick:f=>{f.stopPropagation(),r(e.sale_id)},children:[a.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"10px"}}),"Delete"]}),a.jsx("div",{style:{color:"#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]})},v6=({currentPage:e,totalPages:t,onPageChange:r,startIndex:s,endIndex:o,totalItems:c})=>{if(t<=1)return null;const d=()=>{const f=[];if(t<=5)for(let h=1;h<=t;h++)f.push(h);else if(e<=3){for(let h=1;h<=4;h++)f.push(h);f.push("..."),f.push(t)}else if(e>=t-2){f.push(1),f.push("...");for(let h=t-3;h<=t;h++)f.push(h)}else{f.push(1),f.push("...");for(let h=e-1;h<=e+1;h++)f.push(h);f.push("..."),f.push(t)}return f};return a.jsxs("div",{style:{background:"#f9fafb",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[a.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-list"}),a.jsxs("span",{children:["Showing ",s+1,"-",Math.min(o,c)," of ",c," transactions"]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsxs($l,{variant:"secondary",size:"sm",onClick:()=>r(e-1),disabled:e===1,children:[a.jsx("i",{className:"fa-solid fa-chevron-left"}),"Previous"]}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:d().map((f,p)=>a.jsx(ou.Fragment,{children:f==="..."?a.jsx("span",{style:{padding:"8px 12px",color:"#6b7280",fontSize:"14px"},children:"..."}):a.jsx($l,{variant:e===f?"primary":"secondary",size:"sm",onClick:()=>r(f),style:{minWidth:"40px"},children:f})},p))}),a.jsxs($l,{variant:"secondary",size:"sm",onClick:()=>r(e+1),disabled:e===t,children:["Next",a.jsx("i",{className:"fa-solid fa-chevron-right"})]})]})]})},b6=({isOpen:e,onClose:t,selectedDate:r,onDateSelect:s,onTodaySelect:o,calendarDate:c,onCalendarDateChange:d})=>{const f=(p,h)=>{const x=new Date(p,h,1),v=new Date(x);v.setDate(v.getDate()-x.getDay());const y=[],b=new Date(v);for(let w=0;w<42;w++)y.push(new Date(b)),b.setDate(b.getDate()+1);return y};return e?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},children:c.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[a.jsx("button",{onClick:()=>d(new Date(c.getFullYear(),c.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:p=>{const h=p.currentTarget;h.style.background="#f3f4f6",h.style.color="#3e3f29"},onMouseLeave:p=>{const h=p.currentTarget;h.style.background="none",h.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("button",{onClick:()=>d(new Date(c.getFullYear(),c.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:p=>{const h=p.currentTarget;h.style.background="#f3f4f6",h.style.color="#3e3f29"},onMouseLeave:p=>{const h=p.currentTarget;h.style.background="none",h.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})}),a.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"20px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:p=>{const h=p.currentTarget;h.style.background="#f3f4f6",h.style.color="#3e3f29"},onMouseLeave:p=>{const h=p.currentTarget;h.style.background="none",h.style.color="#7d8d86"},children:""})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(p=>a.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:p},p)),f(c.getFullYear(),c.getMonth()).map((p,h)=>{const x=p.getMonth()===c.getMonth(),v=new Date,y=new Date(v.getFullYear(),v.getMonth(),v.getDate()),b=new Date(p.getFullYear(),p.getMonth(),p.getDate()),w=new Date(r.getFullYear(),r.getMonth(),r.getDate()),_=b.getTime()===y.getTime(),S=b.getTime()===w.getTime();return a.jsx("button",{onClick:()=>s(p),style:{background:S?"#7d8d86":"transparent",color:S?"#ffffff":x?"#1f2937":"#9ca3af",border:_?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:x?1:.5},onMouseEnter:A=>{if(!S){const k=A.currentTarget;k.style.background="#f3f4f6",k.style.color="#1f2937"}},onMouseLeave:A=>{if(!S){const k=A.currentTarget;k.style.background="transparent",k.style.color=x?"#1f2937":"#9ca3af"}},children:p.getDate()},h)})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:a.jsx("button",{onClick:o,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:p=>{const h=p.currentTarget;h.style.background="#6a7a73"},onMouseLeave:p=>{const h=p.currentTarget;h.style.background="#7d8d86"},children:"Today"})})]})}):null},_6=()=>{const e=Ls(),{user:t}=bn(),{transactions:r,loading:s,error:o,deleteTransaction:c,resolvePartialPayment:d}=g6(),[f,p]=T.useState(""),[h,x]=T.useState("all"),[v,y]=T.useState("all"),[b,w]=T.useState(null),[_,S]=T.useState("all"),[A,k]=T.useState(!1),[O,L]=T.useState(new Date),[K,ne]=T.useState(()=>{const Te=new Date;return new Date(Te.getFullYear(),Te.getMonth(),Te.getDate())}),[M,re]=T.useState(1),[ee,de]=T.useState(25),[oe]=T.useState("datetime"),[Q]=T.useState("desc"),te=Te=>Te.filter(Be=>{const Ve=!f||Be.sale_id.toString().includes(f)||Be.customer_name?.toLowerCase().includes(f.toLowerCase())||Be.cashier_name?.toLowerCase().includes(f.toLowerCase()),Je=h==="all"||Be.payment_method===h,je=()=>_==="all"?!0:_==="partial"?Be.partial_payment===!0:_==="full"?!Be.partial_payment:!0,q=()=>{if(b){const pt=new Date(Be.datetime),ut=new Date(pt.getFullYear(),pt.getMonth(),pt.getDate()),[St,ft,Ft]=b.split("-").map(Number),Dt=new Date(St,ft-1,Ft);return ut.getTime()===Dt.getTime()}if(v==="all")return!0;const be=new Date,tt=new Date(Be.datetime),Me=new Date(be.getFullYear(),be.getMonth(),be.getDate()),ct=new Date(tt.getFullYear(),tt.getMonth(),tt.getDate());switch(v){case"today":return ct.getTime()===Me.getTime();case"week":const pt=new Date(be.getTime()-10080*60*1e3);return tt>=pt;case"month":const ut=new Date(be.getTime()-720*60*60*1e3);return tt>=ut;default:return!0}};return Ve&&Je&&je()&&q()}),ae=Te=>[...Te].sort((Be,Ve)=>{let Je=Be[oe],je=Ve[oe];return oe==="datetime"&&(Je=new Date(Je).getTime(),je=new Date(je).getTime()),Q==="asc"?Je>je?1:-1:Je<je?1:-1}),X=te(r),J=ae(X),fe=Math.ceil(J.length/ee),se=(M-1)*ee,Ne=se+ee,D=J.slice(se,Ne),U=()=>{const Te=O.getFullYear(),Be=O.getMonth(),Ve=new Date(Te,Be,1),Je=new Date(Ve);Je.setDate(Je.getDate()-Ve.getDay());const je=[];for(let q=0;q<42;q++){const be=new Date(Je);be.setDate(Je.getDate()+q),je.push(be)}return je},E=Te=>{const Be=new Date(Te.getFullYear(),Te.getMonth(),Te.getDate());ne(Be);const Ve=Be.getFullYear(),Je=String(Be.getMonth()+1).padStart(2,"0"),je=String(Be.getDate()).padStart(2,"0"),q=`${Ve}-${Je}-${je}`;w(q),y("custom"),k(!1)},P=()=>{const Te=new Date,Be=new Date(Te.getFullYear(),Te.getMonth(),Te.getDate());ne(Be);const Ve=Be.getFullYear(),Je=String(Be.getMonth()+1).padStart(2,"0"),je=String(Be.getDate()).padStart(2,"0"),q=`${Ve}-${Je}-${je}`;w(q),y("custom"),k(!1)},W=Te=>{e(`/transaction/${Te}`)},V=async Te=>{window.confirm("Are you sure you want to delete this transaction? This action cannot be undone and will restore the stock for all items in this transaction.")&&await c(Te)&&alert("Transaction deleted successfully!")},ue=async Te=>{window.confirm("Are you sure you want to mark this partial payment as resolved? This will update the transaction to show it as fully paid.")&&await d(Te)&&alert("Partial payment resolved successfully!")},Le=Te=>{re(Te),window.scrollTo({top:0,behavior:"smooth"})},Ce=Te=>{de(Te),re(1)};return T.useEffect(()=>{re(1)},[f,h,v,b,oe,Q]),s?a.jsx($h,{children:a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"20px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transactions..."]})})}):o?a.jsx($h,{children:a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"18px",color:"#ef4444",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"12px",display:"block"}}),o]})})}):a.jsxs($h,{children:[a.jsx(x6,{title:"Transactions",subtitle:"View and manage all sales transactions",icon:"fa-solid fa-receipt",children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[a.jsxs("div",{onClick:()=>k(!0),style:{background:"#3e3f29",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),a.jsx("span",{style:{color:"#bca88d"},children:K.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#1a1a1a",fontSize:"14px",flexWrap:"wrap"},children:[a.jsx("i",{className:"fa-solid fa-receipt"}),a.jsxs("span",{children:["Showing ",se+1,"-",Math.min(Ne,J.length)," of ",J.length," transactions",b&&a.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","on ",new Date(b).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),v!=="all"&&!b&&a.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","(",v==="today"?"Today":v==="week"?"Last 7 days":v==="month"?"Last 30 days":v,")"]})]})]})]})}),a.jsxs("div",{style:{padding:"24px 32px",flex:1},children:[a.jsx(m6,{searchTerm:f,setSearchTerm:p,paymentFilter:h,setPaymentFilter:x,dateFilter:v,setDateFilter:y,selectedDate:b,showCalendar:A,setShowCalendar:k,itemsPerPage:ee,setItemsPerPage:Ce,onCalendarDateSelect:E,generateCalendarDays:U,calendarDate:O,setCalendarDate:L,partialPaymentFilter:_,setPartialPaymentFilter:S}),a.jsx(Tv,{children:D.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:D.map(Te=>a.jsx(y6,{transaction:Te,onTransactionClick:W,onDeleteTransaction:V,onResolvePartialPayment:ue},Te.sale_id))}):a.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",display:"block",color:"#d1d5db"}}),a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",margin:"0 0 8px 0"},children:"No transactions found"}),a.jsx("p",{style:{fontSize:"14px",margin:0},children:f||h!=="all"||_!=="all"||v!=="all"||K?"Try adjusting your filters to see more results.":"No transactions have been recorded yet."})]})}),a.jsx(v6,{currentPage:M,totalPages:fe,onPageChange:Le,startIndex:se,endIndex:Ne,totalItems:J.length}),a.jsx(b6,{isOpen:A,onClose:()=>k(!1),selectedDate:K,onDateSelect:E,onTodaySelect:P,calendarDate:O,onCalendarDateChange:L})]})]})},S6=()=>{const{transactionId:e}=GS(),t=Ls(),[r,s]=T.useState(null),[o,c]=T.useState([]),[d,f]=T.useState(!0),[p,h]=T.useState(!1),[x,v]=T.useState(!1),[y,b]=T.useState({payment_method:"",customer_id:null,notes:""}),[w,_]=T.useState([]),[S,A]=T.useState({});T.useEffect(()=>{e&&(k(),O())},[e]);const k=async()=>{try{f(!0);const ae=parseInt(e?.replace("TXN-","")||"0");if(!ae){console.error("Invalid transaction ID"),t("/sales");return}const{data:X,error:J}=await Oe.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",ae).single();if(J){console.error("Error fetching transaction:",J),t("/sales");return}const fe={...X,customer_name:X.customers?.name||null,cashier_name:X.users?.username||null};s(fe);const{data:se,error:Ne}=await Oe.from("sale_items").select(`
          *,
          products (
            name,
            category,
            weight_unit,
            price_per_unit,
            is_weighted,
            image_url
          )
        `).eq("sale_id",ae);if(Ne)console.error("Error fetching transaction items:",Ne);else{const D=(se||[]).map(U=>(U.products?.is_weighted&&console.log("Weighted item data:",{name:U.products.name,weight:U.weight,weight_unit:U.products.weight_unit,price_per_unit:U.products.price_per_unit,calculated_price:U.calculated_price,price_each:U.price_each}),{sale_item_id:U.sale_item_id,product_id:U.product_id,quantity:U.quantity,unit_price:U.price_each,total_price:U.calculated_price||(U.products?.is_weighted&&U.weight&&U.products?.price_per_unit?U.weight*U.products.price_per_unit:U.quantity*U.price_each),product_name:U.products?.name||"Unknown Product",product_category:U.products?.category||"Unknown Category",product_image:U.products?.image_url||null,weight:U.weight||void 0,weight_unit:U.products?.weight_unit||void 0,price_per_unit:U.products?.price_per_unit||void 0,is_weighted:U.products?.is_weighted||!1}));c(D)}}catch(ae){console.error("Error fetching transaction details:",ae),t("/sales")}finally{f(!1)}},O=async()=>{try{const{data:ae,error:X}=await Oe.from("customers").select("id, name").order("name");X?console.error("Error fetching customers:",X):_(ae||[])}catch(ae){console.error("Error fetching customers:",ae)}},L=()=>{t("/dashboard")},K=()=>{t(`/sales?transaction=${e}`)},ne=async()=>{if(r)try{v(!0);const ae=parseInt(e?.replace("TXN-","")||"0"),{error:X}=await Oe.from("sales").update({payment_method:y.payment_method,customer_id:y.customer_id,notes:y.notes}).eq("sale_id",ae);if(X){console.error("Error updating transaction:",X),alert("Failed to update transaction. Please try again.");return}await k(),h(!1),alert("Transaction updated successfully!")}catch(ae){console.error("Error saving transaction:",ae),alert("Failed to save changes. Please try again.")}finally{v(!1)}},M=()=>{h(!1),b({payment_method:"",customer_id:null,notes:""}),A({})},re=(ae,X)=>{X<0||A(J=>({...J,[ae]:X}))},ee=async ae=>{if(confirm("Are you sure you want to remove this item from the transaction?"))try{const{error:X}=await Oe.from("sale_items").delete().eq("sale_item_id",ae);if(X){console.error("Error removing item:",X),alert("Failed to remove item. Please try again.");return}await k(),alert("Item removed successfully!")}catch(X){console.error("Error removing item:",X),alert("Failed to remove item. Please try again.")}},de=async(ae,X)=>{if(X<=0){ee(ae);return}try{const J=o.find(Ne=>Ne.sale_item_id===ae);if(!J)return;const fe=X*J.unit_price,{error:se}=await Oe.from("sale_items").update({quantity:X,total_price:fe}).eq("sale_item_id",ae);if(se){console.error("Error updating item quantity:",se),alert("Failed to update item quantity. Please try again.");return}await k(),A(Ne=>{const D={...Ne};return delete D[ae],D}),alert("Item quantity updated successfully!")}catch(J){console.error("Error updating item quantity:",J),alert("Failed to update item quantity. Please try again.")}},oe=async()=>{if(!(!r||!r.partial_payment||!window.confirm(`Complete payment for Transaction #${e}?

This will mark the remaining balance of ${r.remaining_amount?.toFixed(2)||"0.00"} as paid.

The transaction will be marked as fully paid.`)))try{const X=parseInt(e?.replace("TXN-","")||"0"),{error:J}=await Oe.from("sales").update({partial_payment:!1,partial_amount:null,remaining_amount:null,partial_notes:null,notes:r.notes?`${r.notes}

Payment completed on ${new Date().toLocaleString()}`:`Payment completed on ${new Date().toLocaleString()}`}).eq("sale_id",X);if(J){console.error("Error completing payment:",J),alert("Failed to complete payment. Please try again.");return}alert("Payment completed successfully!"),await k()}catch(X){console.error("Error completing payment:",X),alert("Failed to complete payment. Please try again.")}},Q=async()=>{if(!(!r||!window.confirm(`Are you sure you want to delete Transaction #${e}?

This will:
 Remove all items from this transaction
 Restore stock quantities for all items
 Delete the transaction record

This action cannot be undone!`)))try{const X=parseInt(e?.replace("TXN-","")||"0");for(const se of o){const{data:Ne,error:D}=await Oe.from("products").select("stock_quantity").eq("product_id",se.product_id).single();if(D){console.error("Error fetching product stock:",D);continue}const{error:U}=await Oe.from("products").update({stock_quantity:Ne.stock_quantity+se.quantity,last_updated:new Date().toISOString()}).eq("product_id",se.product_id);U&&console.error("Error restoring stock:",U);const{error:E}=await Oe.from("inventory_movements").insert([{product_id:se.product_id,quantity_change:se.quantity,movement_type:"Transaction Deletion",reference_id:X,notes:`Stock restored from deleted transaction #${e}`}]);E&&console.error("Error creating inventory movement:",E)}const{error:J}=await Oe.from("sale_items").delete().eq("sale_id",X);if(J){console.error("Error deleting sale items:",J),alert("Failed to delete transaction items. Please try again.");return}const{error:fe}=await Oe.from("sales").delete().eq("sale_id",X);if(fe){console.error("Error deleting sale:",fe),alert("Failed to delete transaction. Please try again.");return}alert("Transaction deleted successfully!"),t("/dashboard")}catch(X){console.error("Error deleting transaction:",X),alert("Failed to delete transaction. Please try again.")}},te=ae=>new Date(ae).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return d?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transaction details..."]})}):r?a.jsxs("div",{style:{padding:"0"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[a.jsx("button",{onClick:L,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease"},onMouseEnter:ae=>{ae.target.style.background="#7d8d86",ae.target.style.color="#f1f0e4"},onMouseLeave:ae=>{ae.target.style.background="none",ae.target.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-arrow-left"})}),a.jsxs("div",{children:[a.jsxs("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:["Transaction #",e]}),a.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:te(r.datetime)})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsxs("button",{onClick:Q,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ae=>{ae.target.style.background="#dc2626"},onMouseLeave:ae=>{ae.target.style.background="#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"14px"}}),"Delete Transaction"]}),p?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:ne,disabled:x,style:{background:x?"#9ca3af":"#10b981",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ae=>{x||(ae.target.style.background="#059669")},onMouseLeave:ae=>{x||(ae.target.style.background="#10b981")},children:[a.jsx("i",{className:`fa-solid ${x?"fa-spinner":"fa-save"}`,style:{fontSize:"14px",animation:x?"spin 1s linear infinite":"none"}}),x?"Saving...":"Save"]}),a.jsxs("button",{onClick:M,disabled:x,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ae=>{x||(ae.target.style.background="#dc2626")},onMouseLeave:ae=>{x||(ae.target.style.background="#ef4444")},children:[a.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"14px"}}),"Cancel"]})]}):a.jsxs("button",{onClick:K,style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ae=>{ae.target.style.background="#bca88d"},onMouseLeave:ae=>{ae.target.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-edit",style:{fontSize:"14px"}}),"Edit"]})]})]}),a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Total Amount"}),a.jsxs("p",{style:{fontSize:"28px",fontWeight:"bold",color:"#3e3f29",margin:0},children:["",r.total_amount.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Payment Method"}),p?a.jsxs("select",{value:y.payment_method,onChange:ae=>b({...y,payment_method:ae.target.value}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"credit",children:"Credit"})]}):a.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0,textTransform:"capitalize"},children:r.payment_method})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Customer"}),p?a.jsxs("select",{value:y.customer_id||"",onChange:ae=>b({...y,customer_id:ae.target.value?parseInt(ae.target.value):null}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[a.jsx("option",{value:"",children:"Walk-in Customer"}),w.map(ae=>a.jsx("option",{value:ae.id,children:ae.name},ae.id))]}):a.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:r.customer_name||"Walk-in Customer"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Cashier"}),a.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:r.cashier_name||"System"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Items Count"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:[o.length," items"]})]}),r.discount_applied&&r.discount_applied>0&&a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Discount Applied"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#ef4444",margin:0},children:["-",r.discount_applied.toFixed(2)]})]})]}),r.partial_payment&&a.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px",marginTop:"24px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-credit-card",style:{color:"#f59e0b",fontSize:"16px"}}),a.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#92400e",margin:0},children:"Partial Payment Transaction"})]}),a.jsxs("button",{onClick:oe,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:ae=>{ae.target.style.background="#6b7280"},onMouseLeave:ae=>{ae.target.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"12px"}}),"Complete Payment"]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Amount Paid"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#059669",margin:0},children:["",r.partial_amount?.toFixed(2)||"0.00"]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Remaining Balance"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#dc2626",margin:0},children:["",r.remaining_amount?.toFixed(2)||"0.00"]})]}),r.partial_notes&&a.jsxs("div",{style:{gridColumn:"1 / -1"},children:[a.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Notes"}),a.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:0,fontStyle:"italic"},children:r.partial_notes})]})]})]}),a.jsxs("div",{style:{marginTop:"24px"},children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Notes"}),p?a.jsx("textarea",{value:y.notes,onChange:ae=>b({...y,notes:ae.target.value}),placeholder:"Add transaction notes...",style:{width:"100%",minHeight:"80px",fontSize:"14px",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"12px",resize:"vertical",fontFamily:"inherit"}}):a.jsx("p",{style:{fontSize:"16px",color:"#3e3f29",margin:0,fontStyle:r.notes?"normal":"italic",opacity:r.notes?1:.6},children:r.notes||"No notes added"})]})]}),a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[a.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 24px 0",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"20px"}}),"Transaction Items"]}),o.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map((ae,X)=>{const J=S[ae.sale_item_id]!==void 0,fe=J?S[ae.sale_item_id]:ae.quantity,se=ae.is_weighted&&ae.weight?ae.total_price||ae.weight*(ae.price_per_unit||0):fe*ae.unit_price;return a.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease"},onMouseEnter:Ne=>{Ne.target.style.boxShadow="0 4px 12px rgba(62, 63, 41, 0.1)",Ne.target.style.transform="translateY(-2px)"},onMouseLeave:Ne=>{Ne.target.style.boxShadow="none",Ne.target.style.transform="translateY(0)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:ae.product_image?`url(${ae.product_image})`:ae.is_weighted?"#f59e0b":"#7d8d86",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"18px",fontWeight:"bold",position:"relative",border:"2px solid rgba(125, 141, 134, 0.2)"},children:!ae.product_image&&a.jsxs(a.Fragment,{children:[ae.is_weighted&&ae.weight?`${ae.weight}${ae.weight_unit}`:ae.quantity,ae.is_weighted&&a.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",width:"16px",height:"16px",borderRadius:"50%",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"#ffffff"},children:""})]})}),p&&!ae.is_weighted&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("button",{onClick:()=>re(ae.sale_item_id,fe-1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),a.jsx("div",{style:{minWidth:"48px",height:"48px",borderRadius:"12px",background:J?"#fef3c7":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:J?"#92400e":"#f1f0e4",fontSize:"18px",fontWeight:"bold",border:J?"2px solid #f59e0b":"none"},children:fe}),a.jsx("button",{onClick:()=>re(ae.sale_item_id,fe+1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#10b981",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),J&&a.jsx("button",{onClick:()=>de(ae.sale_item_id,fe),style:{padding:"6px 12px",borderRadius:"6px",background:"#3b82f6",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer"},children:"Save"}),a.jsx("button",{onClick:()=>ee(ae.sale_item_id),style:{padding:"6px 12px",borderRadius:"6px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer",marginLeft:"8px"},children:"Remove"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:ae.product_name}),a.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[ae.product_category,"  ",ae.is_weighted&&ae.weight&&ae.weight_unit&&ae.price_per_unit?`${ae.weight} ${ae.weight_unit}  ${ae.price_per_unit.toFixed(2)}/${ae.weight_unit}`:`${ae.unit_price.toFixed(2)} each`]}),ae.is_weighted&&p&&a.jsx("p",{style:{fontSize:"12px",color:"#f59e0b",margin:"4px 0 0 0",fontStyle:"italic"},children:"Weighted items cannot be edited after sale"})]})]}),a.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:J?"#f59e0b":"#3e3f29"},children:["",se.toFixed(2)]})]},X)})}):a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-box",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:"No items found for this transaction"})]})]})]}):a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{textAlign:"center",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:"Transaction not found"})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Gd={};Gd.version="0.18.5";var jv=1252,w6=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Ev=function(e){w6.indexOf(e)!=-1&&(jv=e)};function T6(){Ev(1252)}var ec=function(e){Ev(e)};function j6(){ec(1200),T6()}var Nd=function(t){return String.fromCharCode(t)},F1=function(t){return String.fromCharCode(t)},Vd,Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function tc(e){for(var t="",r=0,s=0,o=0,c=0,d=0,f=0,p=0,h=0;h<e.length;)r=e.charCodeAt(h++),c=r>>2,s=e.charCodeAt(h++),d=(r&3)<<4|s>>4,o=e.charCodeAt(h++),f=(s&15)<<2|o>>6,p=o&63,isNaN(s)?f=p=64:isNaN(o)&&(p=64),t+=Pa.charAt(c)+Pa.charAt(d)+Pa.charAt(f)+Pa.charAt(p);return t}function la(e){var t="",r=0,s=0,o=0,c=0,d=0,f=0,p=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var h=0;h<e.length;)c=Pa.indexOf(e.charAt(h++)),d=Pa.indexOf(e.charAt(h++)),r=c<<2|d>>4,t+=String.fromCharCode(r),f=Pa.indexOf(e.charAt(h++)),s=(d&15)<<4|f>>2,f!==64&&(t+=String.fromCharCode(s)),p=Pa.indexOf(e.charAt(h++)),o=(f&3)<<6|p,p!==64&&(t+=String.fromCharCode(o));return t}var sr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),da=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function vi(e){return sr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function L1(e){return sr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Ss=function(t){return sr?da(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function pu(e){if(typeof ArrayBuffer>"u")return Ss(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),s=0;s!=e.length;++s)r[s]=e.charCodeAt(s)&255;return t}function uc(e){if(Array.isArray(e))return e.map(function(s){return String.fromCharCode(s)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function E6(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var xn=sr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:da(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var s=new Uint8Array(r),o=0;for(t=0,r=0;t<e.length;r+=o,++t)if(o=e[t].length,e[t]instanceof Uint8Array)s.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";s.set(new Uint8Array(e[t]),r)}return s}return[].concat.apply([],e.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function k6(e){for(var t=[],r=0,s=e.length+250,o=vi(e.length+255),c=0;c<e.length;++c){var d=e.charCodeAt(c);if(d<128)o[r++]=d;else if(d<2048)o[r++]=192|d>>6&31,o[r++]=128|d&63;else if(d>=55296&&d<57344){d=(d&1023)+64;var f=e.charCodeAt(++c)&1023;o[r++]=240|d>>8&7,o[r++]=128|d>>2&63,o[r++]=128|f>>6&15|(d&3)<<4,o[r++]=128|f&63}else o[r++]=224|d>>12&15,o[r++]=128|d>>6&63,o[r++]=128|d&63;r>s&&(t.push(o.slice(0,r)),r=0,o=vi(65535),s=65530)}return t.push(o.slice(0,r)),xn(t)}var Hl=/\u0000/g,Dd=/[\u0001-\u0006]/g;function To(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function ws(e,t){var r=""+e;return r.length>=t?r:Lr("0",t-r.length)+r}function q0(e,t){var r=""+e;return r.length>=t?r:Lr(" ",t-r.length)+r}function Yd(e,t){var r=""+e;return r.length>=t?r:r+Lr(" ",t-r.length)}function C6(e,t){var r=""+Math.round(e);return r.length>=t?r:Lr("0",t-r.length)+r}function A6(e,t){var r=""+e;return r.length>=t?r:Lr("0",t-r.length)+r}var P1=Math.pow(2,32);function mo(e,t){if(e>P1||e<-P1)return C6(e,t);var r=Math.round(e);return A6(r,t)}function Kd(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var z1=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Hh=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function R6(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Pr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},U1={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},N6={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Xd(e,t,r){for(var s=e<0?-1:1,o=e*s,c=0,d=1,f=0,p=1,h=0,x=0,v=Math.floor(o);h<t&&(v=Math.floor(o),f=v*d+c,x=v*h+p,!(o-v<5e-8));)o=1/(o-v),c=d,d=f,p=h,h=x;if(x>t&&(h>t?(x=p,f=c):(x=h,f=d)),!r)return[0,s*f,x];var y=Math.floor(s*f/x);return[y,s*f-y*x,x]}function Od(e,t,r){if(e>2958465||e<0)return null;var s=e|0,o=Math.floor(86400*(e-s)),c=0,d=[],f={D:s,T:o,u:86400*(e-s)-o,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(f.u)<1e-6&&(f.u=0),t&&t.date1904&&(s+=1462),f.u>.9999&&(f.u=0,++o==86400&&(f.T=o=0,++s,++f.D)),s===60)d=r?[1317,10,29]:[1900,2,29],c=3;else if(s===0)d=r?[1317,8,29]:[1900,1,0],c=6;else{s>60&&--s;var p=new Date(1900,0,1);p.setDate(p.getDate()+s-1),d=[p.getFullYear(),p.getMonth()+1,p.getDate()],c=p.getDay(),s<60&&(c=(c+6)%7),r&&(c=L6(p,d))}return f.y=d[0],f.m=d[1],f.d=d[2],f.S=o%60,o=Math.floor(o/60),f.M=o%60,o=Math.floor(o/60),f.H=o,f.q=c,f}var kv=new Date(1899,11,31,0,0,0),D6=kv.getTime(),O6=new Date(1900,2,1,0,0,0);function Cv(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=O6&&(r+=1440*60*1e3),(r-(D6+(e.getTimezoneOffset()-kv.getTimezoneOffset())*6e4))/(1440*60*1e3)}function $0(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function I6(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function B6(e){var t=e<0?12:11,r=$0(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function M6(e){var t=$0(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function F6(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=B6(e):t===10?r=e.toFixed(10).substr(0,12):r=M6(e),$0(I6(r.toUpperCase()))}function v0(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):F6(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Wa(14,Cv(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function L6(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function P6(e,t,r,s){var o="",c=0,d=0,f=r.y,p,h=0;switch(e){case 98:f=r.y+543;case 121:switch(t.length){case 1:case 2:p=f%100,h=2;break;default:p=f%1e4,h=4;break}break;case 109:switch(t.length){case 1:case 2:p=r.m,h=t.length;break;case 3:return Hh[r.m-1][1];case 5:return Hh[r.m-1][0];default:return Hh[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:p=r.d,h=t.length;break;case 3:return z1[r.q][0];default:return z1[r.q][1]}break;case 104:switch(t.length){case 1:case 2:p=1+(r.H+11)%12,h=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:p=r.H,h=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:p=r.M,h=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?ws(r.S,t.length):(s>=2?d=s===3?1e3:100:d=s===1?10:1,c=Math.round(d*(r.S+r.u)),c>=60*d&&(c=0),t==="s"?c===0?"0":""+c/d:(o=ws(c,2+s),t==="ss"?o.substr(0,2):"."+o.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":p=r.D*24+r.H;break;case"[m]":case"[mm]":p=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":p=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}h=t.length===3?1:2;break;case 101:p=f,h=1;break}var x=h>0?ws(p,h):"";return x}function za(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,s=e.substr(0,r);r!=e.length;r+=t)s+=(s.length>0?",":"")+e.substr(r,t);return s}var Av=/%/g;function z6(e,t,r){var s=t.replace(Av,""),o=t.length-s.length;return sa(e,s,r*Math.pow(10,2*o))+Lr("%",o)}function U6(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return sa(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function Rv(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Rv(e,-t);var o=e.indexOf(".");o===-1&&(o=e.indexOf("E"));var c=Math.floor(Math.log(t)*Math.LOG10E)%o;if(c<0&&(c+=o),r=(t/Math.pow(10,c)).toPrecision(s+1+(o+c)%o),r.indexOf("e")===-1){var d=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(d-r.length+c):r+="E+"+(d-c);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,o)+"."+r.substr(2+o),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(f,p,h,x){return p+h+x.substr(0,(o+c)%o)+"."+x.substr(c)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Nv=/# (\?+)( ?)\/( ?)(\d+)/;function W6(e,t,r){var s=parseInt(e[4],10),o=Math.round(t*s),c=Math.floor(o/s),d=o-c*s,f=s;return r+(c===0?"":""+c)+" "+(d===0?Lr(" ",e[1].length+1+e[4].length):q0(d,e[1].length)+e[2]+"/"+e[3]+ws(f,e[4].length))}function q6(e,t,r){return r+(t===0?"":""+t)+Lr(" ",e[1].length+2+e[4].length)}var Dv=/^#*0*\.([0#]+)/,Ov=/\).*[0#]/,Iv=/\(###\) ###\\?-####/;function Dn(e){for(var t="",r,s=0;s!=e.length;++s)switch(r=e.charCodeAt(s)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function W1(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function q1(e,t){var r=e-Math.floor(e),s=Math.pow(10,t);return t<(""+Math.round(r*s)).length?0:Math.round(r*s)}function $6(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function H6(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function ds(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Ov)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ds("n",s,r):"("+ds("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return U6(e,t,r);if(t.indexOf("%")!==-1)return z6(e,t,r);if(t.indexOf("E")!==-1)return Rv(t,r);if(t.charCodeAt(0)===36)return"$"+ds(e,t.substr(t.charAt(1)==" "?2:1),r);var o,c,d,f,p=Math.abs(r),h=r<0?"-":"";if(t.match(/^00+$/))return h+mo(p,t.length);if(t.match(/^[#?]+$/))return o=mo(r,0),o==="0"&&(o=""),o.length>t.length?o:Dn(t.substr(0,t.length-o.length))+o;if(c=t.match(Nv))return W6(c,p,h);if(t.match(/^#+0+$/))return h+mo(p,t.length-t.indexOf("0"));if(c=t.match(Dv))return o=W1(r,c[1].length).replace(/^([^\.]+)$/,"$1."+Dn(c[1])).replace(/\.$/,"."+Dn(c[1])).replace(/\.(\d*)$/,function(w,_){return"."+_+Lr("0",Dn(c[1]).length-_.length)}),t.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),c=t.match(/^(0*)\.(#*)$/))return h+W1(p,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=t.match(/^#{1,3},##0(\.?)$/))return h+za(mo(p,0));if(c=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ds(e,t,-r):za(""+(Math.floor(r)+$6(r,c[1].length)))+"."+ws(q1(r,c[1].length),c[1].length);if(c=t.match(/^#,#*,#0/))return ds(e,t.replace(/^#,#*,/,""),r);if(c=t.match(/^([0#]+)(\\?-([0#]+))+$/))return o=To(ds(e,t.replace(/[\\-]/g,""),r)),d=0,To(To(t.replace(/\\/g,"")).replace(/[0#]/g,function(w){return d<o.length?o.charAt(d++):w==="0"?"0":""}));if(t.match(Iv))return o=ds(e,"##########",r),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var x="";if(c=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(c[4].length,7),f=Xd(p,Math.pow(10,d)-1,!1),o=""+h,x=sa("n",c[1],f[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),o+=x+c[2]+"/"+c[3],x=Yd(f[2],d),x.length<c[4].length&&(x=Dn(c[4].substr(c[4].length-x.length))+x),o+=x,o;if(c=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(c[1].length,c[4].length),7),f=Xd(p,Math.pow(10,d)-1,!0),h+(f[0]||(f[1]?"":"0"))+" "+(f[1]?q0(f[1],d)+c[2]+"/"+c[3]+Yd(f[2],d):Lr(" ",2*d+1+c[2].length+c[3].length));if(c=t.match(/^[#0?]+$/))return o=mo(r,0),t.length<=o.length?o:Dn(t.substr(0,t.length-o.length))+o;if(c=t.match(/^([#0?]+)\.([#0]+)$/)){o=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),d=o.indexOf(".");var v=t.indexOf(".")-d,y=t.length-o.length-v;return Dn(t.substr(0,v)+o+t.substr(t.length-y))}if(c=t.match(/^00,000\.([#0]*0)$/))return d=q1(r,c[1].length),r<0?"-"+ds(e,t,-r):za(H6(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ws(0,3-w.length):"")+w})+"."+ws(d,c[1].length);switch(t){case"###,##0.00":return ds(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var b=za(mo(p,0));return b!=="0"?h+b:"";case"###,###.00":return ds(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ds(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function G6(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return sa(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function V6(e,t,r){var s=t.replace(Av,""),o=t.length-s.length;return sa(e,s,r*Math.pow(10,2*o))+Lr("%",o)}function Bv(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Bv(e,-t);var o=e.indexOf(".");o===-1&&(o=e.indexOf("E"));var c=Math.floor(Math.log(t)*Math.LOG10E)%o;if(c<0&&(c+=o),r=(t/Math.pow(10,c)).toPrecision(s+1+(o+c)%o),!r.match(/[Ee]/)){var d=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(d-r.length+c):r+="E+"+(d-c),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(f,p,h,x){return p+h+x.substr(0,(o+c)%o)+"."+x.substr(c)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Is(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Ov)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Is("n",s,r):"("+Is("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return G6(e,t,r);if(t.indexOf("%")!==-1)return V6(e,t,r);if(t.indexOf("E")!==-1)return Bv(t,r);if(t.charCodeAt(0)===36)return"$"+Is(e,t.substr(t.charAt(1)==" "?2:1),r);var o,c,d,f,p=Math.abs(r),h=r<0?"-":"";if(t.match(/^00+$/))return h+ws(p,t.length);if(t.match(/^[#?]+$/))return o=""+r,r===0&&(o=""),o.length>t.length?o:Dn(t.substr(0,t.length-o.length))+o;if(c=t.match(Nv))return q6(c,p,h);if(t.match(/^#+0+$/))return h+ws(p,t.length-t.indexOf("0"));if(c=t.match(Dv))return o=(""+r).replace(/^([^\.]+)$/,"$1."+Dn(c[1])).replace(/\.$/,"."+Dn(c[1])),o=o.replace(/\.(\d*)$/,function(w,_){return"."+_+Lr("0",Dn(c[1]).length-_.length)}),t.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),c=t.match(/^(0*)\.(#*)$/))return h+(""+p).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=t.match(/^#{1,3},##0(\.?)$/))return h+za(""+p);if(c=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Is(e,t,-r):za(""+r)+"."+Lr("0",c[1].length);if(c=t.match(/^#,#*,#0/))return Is(e,t.replace(/^#,#*,/,""),r);if(c=t.match(/^([0#]+)(\\?-([0#]+))+$/))return o=To(Is(e,t.replace(/[\\-]/g,""),r)),d=0,To(To(t.replace(/\\/g,"")).replace(/[0#]/g,function(w){return d<o.length?o.charAt(d++):w==="0"?"0":""}));if(t.match(Iv))return o=Is(e,"##########",r),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var x="";if(c=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(c[4].length,7),f=Xd(p,Math.pow(10,d)-1,!1),o=""+h,x=sa("n",c[1],f[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),o+=x+c[2]+"/"+c[3],x=Yd(f[2],d),x.length<c[4].length&&(x=Dn(c[4].substr(c[4].length-x.length))+x),o+=x,o;if(c=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(c[1].length,c[4].length),7),f=Xd(p,Math.pow(10,d)-1,!0),h+(f[0]||(f[1]?"":"0"))+" "+(f[1]?q0(f[1],d)+c[2]+"/"+c[3]+Yd(f[2],d):Lr(" ",2*d+1+c[2].length+c[3].length));if(c=t.match(/^[#0?]+$/))return o=""+r,t.length<=o.length?o:Dn(t.substr(0,t.length-o.length))+o;if(c=t.match(/^([#0]+)\.([#0]+)$/)){o=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),d=o.indexOf(".");var v=t.indexOf(".")-d,y=t.length-o.length-v;return Dn(t.substr(0,v)+o+t.substr(t.length-y))}if(c=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Is(e,t,-r):za(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ws(0,3-w.length):"")+w})+"."+ws(0,c[1].length);switch(t){case"###,###":case"##,###":case"#,###":var b=za(""+p);return b!=="0"?h+b:"";default:if(t.match(/\.[0#?]*$/))return Is(e,t.slice(0,t.lastIndexOf(".")),r)+Dn(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function sa(e,t,r){return(r|0)===r?Is(e,t,r):ds(e,t,r)}function Y6(e){for(var t=[],r=!1,s=0,o=0;s<e.length;++s)switch(e.charCodeAt(s)){case 34:r=!r;break;case 95:case 42:case 92:++s;break;case 59:t[t.length]=e.substr(o,s-o),o=s+1}if(t[t.length]=e.substr(o),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Mv=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Fv(e){for(var t=0,r="",s="";t<e.length;)switch(r=e.charAt(t)){case"G":Kd(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(s=r;e.charAt(t++)!=="]"&&t<e.length;)s+=e.charAt(t);if(s.match(Mv))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function K6(e,t,r,s){for(var o=[],c="",d=0,f="",p="t",h,x,v,y="H";d<e.length;)switch(f=e.charAt(d)){case"G":if(!Kd(e,d))throw new Error("unrecognized character "+f+" in "+e);o[o.length]={t:"G",v:"General"},d+=7;break;case'"':for(c="";(v=e.charCodeAt(++d))!==34&&d<e.length;)c+=String.fromCharCode(v);o[o.length]={t:"t",v:c},++d;break;case"\\":var b=e.charAt(++d),w=b==="("||b===")"?b:"t";o[o.length]={t:w,v:b},++d;break;case"_":o[o.length]={t:"t",v:" "},d+=2;break;case"@":o[o.length]={t:"T",v:t},++d;break;case"B":case"b":if(e.charAt(d+1)==="1"||e.charAt(d+1)==="2"){if(h==null&&(h=Od(t,r,e.charAt(d+1)==="2"),h==null))return"";o[o.length]={t:"X",v:e.substr(d,2)},p=f,d+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":f=f.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||h==null&&(h=Od(t,r),h==null))return"";for(c=f;++d<e.length&&e.charAt(d).toLowerCase()===f;)c+=f;f==="m"&&p.toLowerCase()==="h"&&(f="M"),f==="h"&&(f=y),o[o.length]={t:f,v:c},p=f;break;case"A":case"a":case"":var _={t:f,v:f};if(h==null&&(h=Od(t,r)),e.substr(d,3).toUpperCase()==="A/P"?(h!=null&&(_.v=h.H>=12?"P":"A"),_.t="T",y="h",d+=3):e.substr(d,5).toUpperCase()==="AM/PM"?(h!=null&&(_.v=h.H>=12?"PM":"AM"),_.t="T",d+=5,y="h"):e.substr(d,5).toUpperCase()==="/"?(h!=null&&(_.v=h.H>=12?"":""),_.t="T",d+=5,y="h"):(_.t="t",++d),h==null&&_.t==="T")return"";o[o.length]=_,p=f;break;case"[":for(c=f;e.charAt(d++)!=="]"&&d<e.length;)c+=e.charAt(d);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(Mv)){if(h==null&&(h=Od(t,r),h==null))return"";o[o.length]={t:"Z",v:c.toLowerCase()},p=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",Fv(e)||(o[o.length]={t:"t",v:c}));break;case".":if(h!=null){for(c=f;++d<e.length&&(f=e.charAt(d))==="0";)c+=f;o[o.length]={t:"s",v:c};break}case"0":case"#":for(c=f;++d<e.length&&"0#?.,E+-%".indexOf(f=e.charAt(d))>-1;)c+=f;o[o.length]={t:"n",v:c};break;case"?":for(c=f;e.charAt(++d)===f;)c+=f;o[o.length]={t:f,v:c},p=f;break;case"*":++d,(e.charAt(d)==" "||e.charAt(d)=="*")&&++d;break;case"(":case")":o[o.length]={t:s===1?"t":f,v:f},++d;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=f;d<e.length&&"0123456789".indexOf(e.charAt(++d))>-1;)c+=e.charAt(d);o[o.length]={t:"D",v:c};break;case" ":o[o.length]={t:f,v:f},++d;break;case"$":o[o.length]={t:"t",v:"$"},++d;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(f)===-1)throw new Error("unrecognized character "+f+" in "+e);o[o.length]={t:"t",v:f},++d;break}var S=0,A=0,k;for(d=o.length-1,p="t";d>=0;--d)switch(o[d].t){case"h":case"H":o[d].t=y,p="h",S<1&&(S=1);break;case"s":(k=o[d].v.match(/\.0+$/))&&(A=Math.max(A,k[0].length-1)),S<3&&(S=3);case"d":case"y":case"M":case"e":p=o[d].t;break;case"m":p==="s"&&(o[d].t="M",S<2&&(S=2));break;case"X":break;case"Z":S<1&&o[d].v.match(/[Hh]/)&&(S=1),S<2&&o[d].v.match(/[Mm]/)&&(S=2),S<3&&o[d].v.match(/[Ss]/)&&(S=3)}switch(S){case 0:break;case 1:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M),h.M>=60&&(h.M=0,++h.H);break;case 2:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M);break}var O="",L;for(d=0;d<o.length;++d)switch(o[d].t){case"t":case"T":case" ":case"D":break;case"X":o[d].v="",o[d].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[d].v=P6(o[d].t.charCodeAt(0),o[d].v,h,A),o[d].t="t";break;case"n":case"?":for(L=d+1;o[L]!=null&&((f=o[L].t)==="?"||f==="D"||(f===" "||f==="t")&&o[L+1]!=null&&(o[L+1].t==="?"||o[L+1].t==="t"&&o[L+1].v==="/")||o[d].t==="("&&(f===" "||f==="n"||f===")")||f==="t"&&(o[L].v==="/"||o[L].v===" "&&o[L+1]!=null&&o[L+1].t=="?"));)o[d].v+=o[L].v,o[L]={v:"",t:";"},++L;O+=o[d].v,d=L-1;break;case"G":o[d].t="t",o[d].v=v0(t,r);break}var K="",ne,M;if(O.length>0){O.charCodeAt(0)==40?(ne=t<0&&O.charCodeAt(0)===45?-t:t,M=sa("n",O,ne)):(ne=t<0&&s>1?-t:t,M=sa("n",O,ne),ne<0&&o[0]&&o[0].t=="t"&&(M=M.substr(1),o[0].v="-"+o[0].v)),L=M.length-1;var re=o.length;for(d=0;d<o.length;++d)if(o[d]!=null&&o[d].t!="t"&&o[d].v.indexOf(".")>-1){re=d;break}var ee=o.length;if(re===o.length&&M.indexOf("E")===-1){for(d=o.length-1;d>=0;--d)o[d]==null||"n?".indexOf(o[d].t)===-1||(L>=o[d].v.length-1?(L-=o[d].v.length,o[d].v=M.substr(L+1,o[d].v.length)):L<0?o[d].v="":(o[d].v=M.substr(0,L+1),L=-1),o[d].t="t",ee=d);L>=0&&ee<o.length&&(o[ee].v=M.substr(0,L+1)+o[ee].v)}else if(re!==o.length&&M.indexOf("E")===-1){for(L=M.indexOf(".")-1,d=re;d>=0;--d)if(!(o[d]==null||"n?".indexOf(o[d].t)===-1)){for(x=o[d].v.indexOf(".")>-1&&d===re?o[d].v.indexOf(".")-1:o[d].v.length-1,K=o[d].v.substr(x+1);x>=0;--x)L>=0&&(o[d].v.charAt(x)==="0"||o[d].v.charAt(x)==="#")&&(K=M.charAt(L--)+K);o[d].v=K,o[d].t="t",ee=d}for(L>=0&&ee<o.length&&(o[ee].v=M.substr(0,L+1)+o[ee].v),L=M.indexOf(".")+1,d=re;d<o.length;++d)if(!(o[d]==null||"n?(".indexOf(o[d].t)===-1&&d!==re)){for(x=o[d].v.indexOf(".")>-1&&d===re?o[d].v.indexOf(".")+1:0,K=o[d].v.substr(0,x);x<o[d].v.length;++x)L<M.length&&(K+=M.charAt(L++));o[d].v=K,o[d].t="t",ee=d}}}for(d=0;d<o.length;++d)o[d]!=null&&"n?".indexOf(o[d].t)>-1&&(ne=s>1&&t<0&&d>0&&o[d-1].v==="-"?-t:t,o[d].v=sa(o[d].t,o[d].v,ne),o[d].t="t");var de="";for(d=0;d!==o.length;++d)o[d]!=null&&(de+=o[d].v);return de}var $1=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function H1(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function X6(e,t){var r=Y6(e),s=r.length,o=r[s-1].indexOf("@");if(s<4&&o>-1&&--s,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||o>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=o>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=o>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=o>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var c=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[s,c];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var d=r[0].match($1),f=r[1].match($1);return H1(t,d)?[s,r[0]]:H1(t,f)?[s,r[1]]:[s,r[d!=null&&f!=null?2:1]]}return[s,c]}function Wa(e,t,r){r==null&&(r={});var s="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?s=r.dateNF:s=e;break;case"number":e==14&&r.dateNF?s=r.dateNF:s=(r.table!=null?r.table:Pr)[e],s==null&&(s=r.table&&r.table[U1[e]]||Pr[U1[e]]),s==null&&(s=N6[e]||"General");break}if(Kd(s,0))return v0(t,r);t instanceof Date&&(t=Cv(t,r.date1904));var o=X6(s,t);if(Kd(o[1]))return v0(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return K6(o[1],t,r,o[0])}function Lv(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Pr[r]==null){t<0&&(t=r);continue}if(Pr[r]==e){t=r;break}}t<0&&(t=391)}return Pr[t]=e,t}function gu(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Lv(e[t],t)}function xu(){Pr=R6()}var Pv=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Q6(e){var t=typeof e=="number"?Pr[e]:e;return t=t.replace(Pv,"(\\d+)"),new RegExp("^"+t+"$")}function J6(e,t,r){var s=-1,o=-1,c=-1,d=-1,f=-1,p=-1;(t.match(Pv)||[]).forEach(function(v,y){var b=parseInt(r[y+1],10);switch(v.toLowerCase().charAt(0)){case"y":s=b;break;case"d":c=b;break;case"h":d=b;break;case"s":p=b;break;case"m":d>=0?f=b:o=b;break}}),p>=0&&f==-1&&o>=0&&(f=o,o=-1);var h=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(o>=1?o:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);h.length==7&&(h="0"+h),h.length==8&&(h="20"+h);var x=("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(p>=0?p:0)).slice(-2);return d==-1&&f==-1&&p==-1?h:s==-1&&o==-1&&c==-1?x:h+"T"+x}var Z6=(function(){var e={};e.version="1.2.0";function t(){for(var M=0,re=new Array(256),ee=0;ee!=256;++ee)M=ee,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,re[ee]=M;return typeof Int32Array<"u"?new Int32Array(re):re}var r=t();function s(M){var re=0,ee=0,de=0,oe=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(de=0;de!=256;++de)oe[de]=M[de];for(de=0;de!=256;++de)for(ee=M[de],re=256+de;re<4096;re+=256)ee=oe[re]=ee>>>8^M[ee&255];var Q=[];for(de=1;de!=16;++de)Q[de-1]=typeof Int32Array<"u"?oe.subarray(de*256,de*256+256):oe.slice(de*256,de*256+256);return Q}var o=s(r),c=o[0],d=o[1],f=o[2],p=o[3],h=o[4],x=o[5],v=o[6],y=o[7],b=o[8],w=o[9],_=o[10],S=o[11],A=o[12],k=o[13],O=o[14];function L(M,re){for(var ee=re^-1,de=0,oe=M.length;de<oe;)ee=ee>>>8^r[(ee^M.charCodeAt(de++))&255];return~ee}function K(M,re){for(var ee=re^-1,de=M.length-15,oe=0;oe<de;)ee=O[M[oe++]^ee&255]^k[M[oe++]^ee>>8&255]^A[M[oe++]^ee>>16&255]^S[M[oe++]^ee>>>24]^_[M[oe++]]^w[M[oe++]]^b[M[oe++]]^y[M[oe++]]^v[M[oe++]]^x[M[oe++]]^h[M[oe++]]^p[M[oe++]]^f[M[oe++]]^d[M[oe++]]^c[M[oe++]]^r[M[oe++]];for(de+=15;oe<de;)ee=ee>>>8^r[(ee^M[oe++])&255];return~ee}function ne(M,re){for(var ee=re^-1,de=0,oe=M.length,Q=0,te=0;de<oe;)Q=M.charCodeAt(de++),Q<128?ee=ee>>>8^r[(ee^Q)&255]:Q<2048?(ee=ee>>>8^r[(ee^(192|Q>>6&31))&255],ee=ee>>>8^r[(ee^(128|Q&63))&255]):Q>=55296&&Q<57344?(Q=(Q&1023)+64,te=M.charCodeAt(de++)&1023,ee=ee>>>8^r[(ee^(240|Q>>8&7))&255],ee=ee>>>8^r[(ee^(128|Q>>2&63))&255],ee=ee>>>8^r[(ee^(128|te>>6&15|(Q&3)<<4))&255],ee=ee>>>8^r[(ee^(128|te&63))&255]):(ee=ee>>>8^r[(ee^(224|Q>>12&15))&255],ee=ee>>>8^r[(ee^(128|Q>>6&63))&255],ee=ee>>>8^r[(ee^(128|Q&63))&255]);return~ee}return e.table=r,e.bstr=L,e.buf=K,e.str=ne,e})(),br=(function(){var t={};t.version="1.2.1";function r(N,H){for(var F=N.split("/"),z=H.split("/"),G=0,Y=0,ve=Math.min(F.length,z.length);G<ve;++G){if(Y=F[G].length-z[G].length)return Y;if(F[G]!=z[G])return F[G]<z[G]?-1:1}return F.length-z.length}function s(N){if(N.charAt(N.length-1)=="/")return N.slice(0,-1).indexOf("/")===-1?N:s(N.slice(0,-1));var H=N.lastIndexOf("/");return H===-1?N:N.slice(0,H+1)}function o(N){if(N.charAt(N.length-1)=="/")return o(N.slice(0,-1));var H=N.lastIndexOf("/");return H===-1?N:N.slice(H+1)}function c(N,H){typeof H=="string"&&(H=new Date(H));var F=H.getHours();F=F<<6|H.getMinutes(),F=F<<5|H.getSeconds()>>>1,N.write_shift(2,F);var z=H.getFullYear()-1980;z=z<<4|H.getMonth()+1,z=z<<5|H.getDate(),N.write_shift(2,z)}function d(N){var H=N.read_shift(2)&65535,F=N.read_shift(2)&65535,z=new Date,G=F&31;F>>>=5;var Y=F&15;F>>>=4,z.setMilliseconds(0),z.setFullYear(F+1980),z.setMonth(Y-1),z.setDate(G);var ve=H&31;H>>>=5;var Ie=H&63;return H>>>=6,z.setHours(H),z.setMinutes(Ie),z.setSeconds(ve<<1),z}function f(N){Zn(N,0);for(var H={},F=0;N.l<=N.length-4;){var z=N.read_shift(2),G=N.read_shift(2),Y=N.l+G,ve={};switch(z){case 21589:F=N.read_shift(1),F&1&&(ve.mtime=N.read_shift(4)),G>5&&(F&2&&(ve.atime=N.read_shift(4)),F&4&&(ve.ctime=N.read_shift(4))),ve.mtime&&(ve.mt=new Date(ve.mtime*1e3));break}N.l=Y,H[z]=ve}return H}var p;function h(){return p||(p={})}function x(N,H){if(N[0]==80&&N[1]==75)return De(N,H);if((N[0]|32)==109&&(N[1]|32)==105)return Nr(N,H);if(N.length<512)throw new Error("CFB file size "+N.length+" < 512");var F=3,z=512,G=0,Y=0,ve=0,Ie=0,ge=0,we=[],Ee=N.slice(0,512);Zn(Ee,0);var We=v(Ee);switch(F=We[0],F){case 3:z=512;break;case 4:z=4096;break;case 0:if(We[1]==0)return De(N,H);default:throw new Error("Major Version: Expected 3 or 4 saw "+F)}z!==512&&(Ee=N.slice(0,z),Zn(Ee,28));var Ke=N.slice(0,z);y(Ee,F);var nt=Ee.read_shift(4,"i");if(F===3&&nt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+nt);Ee.l+=4,ve=Ee.read_shift(4,"i"),Ee.l+=4,Ee.chk("00100000","Mini Stream Cutoff Size: "),Ie=Ee.read_shift(4,"i"),G=Ee.read_shift(4,"i"),ge=Ee.read_shift(4,"i"),Y=Ee.read_shift(4,"i");for(var Ge=-1,rt=0;rt<109&&(Ge=Ee.read_shift(4,"i"),!(Ge<0));++rt)we[rt]=Ge;var wt=b(N,z);S(ge,Y,wt,z,we);var Zt=k(wt,ve,we,z);Zt[ve].name="!Directory",G>0&&Ie!==te&&(Zt[Ie].name="!MiniFAT"),Zt[we[0]].name="!FAT",Zt.fat_addrs=we,Zt.ssz=z;var Vt={},ir=[],_n=[],C=[];O(ve,Zt,wt,ir,G,Vt,_n,Ie),w(_n,C,ir),ir.shift();var he={FileIndex:_n,FullPaths:C};return H&&H.raw&&(he.raw={header:Ke,sectors:wt}),he}function v(N){if(N[N.l]==80&&N[N.l+1]==75)return[0,0];N.chk(ae,"Header Signature: "),N.l+=16;var H=N.read_shift(2,"u");return[N.read_shift(2,"u"),H]}function y(N,H){var F=9;switch(N.l+=2,F=N.read_shift(2)){case 9:if(H!=3)throw new Error("Sector Shift: Expected 9 saw "+F);break;case 12:if(H!=4)throw new Error("Sector Shift: Expected 12 saw "+F);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+F)}N.chk("0600","Mini Sector Shift: "),N.chk("000000000000","Reserved: ")}function b(N,H){for(var F=Math.ceil(N.length/H)-1,z=[],G=1;G<F;++G)z[G-1]=N.slice(G*H,(G+1)*H);return z[F-1]=N.slice(F*H),z}function w(N,H,F){for(var z=0,G=0,Y=0,ve=0,Ie=0,ge=F.length,we=[],Ee=[];z<ge;++z)we[z]=Ee[z]=z,H[z]=F[z];for(;Ie<Ee.length;++Ie)z=Ee[Ie],G=N[z].L,Y=N[z].R,ve=N[z].C,we[z]===z&&(G!==-1&&we[G]!==G&&(we[z]=we[G]),Y!==-1&&we[Y]!==Y&&(we[z]=we[Y])),ve!==-1&&(we[ve]=z),G!==-1&&z!=we[z]&&(we[G]=we[z],Ee.lastIndexOf(G)<Ie&&Ee.push(G)),Y!==-1&&z!=we[z]&&(we[Y]=we[z],Ee.lastIndexOf(Y)<Ie&&Ee.push(Y));for(z=1;z<ge;++z)we[z]===z&&(Y!==-1&&we[Y]!==Y?we[z]=we[Y]:G!==-1&&we[G]!==G&&(we[z]=we[G]));for(z=1;z<ge;++z)if(N[z].type!==0){if(Ie=z,Ie!=we[Ie])do Ie=we[Ie],H[z]=H[Ie]+"/"+H[z];while(Ie!==0&&we[Ie]!==-1&&Ie!=we[Ie]);we[z]=-1}for(H[0]+="/",z=1;z<ge;++z)N[z].type!==2&&(H[z]+="/")}function _(N,H,F){for(var z=N.start,G=N.size,Y=[],ve=z;F&&G>0&&ve>=0;)Y.push(H.slice(ve*Q,ve*Q+Q)),G-=Q,ve=hi(F,ve*4);return Y.length===0?Fe(0):xn(Y).slice(0,N.size)}function S(N,H,F,z,G){var Y=te;if(N===te){if(H!==0)throw new Error("DIFAT chain shorter than expected")}else if(N!==-1){var ve=F[N],Ie=(z>>>2)-1;if(!ve)return;for(var ge=0;ge<Ie&&(Y=hi(ve,ge*4))!==te;++ge)G.push(Y);S(hi(ve,z-4),H-1,F,z,G)}}function A(N,H,F,z,G){var Y=[],ve=[];G||(G=[]);var Ie=z-1,ge=0,we=0;for(ge=H;ge>=0;){G[ge]=!0,Y[Y.length]=ge,ve.push(N[ge]);var Ee=F[Math.floor(ge*4/z)];if(we=ge*4&Ie,z<4+we)throw new Error("FAT boundary crossed: "+ge+" 4 "+z);if(!N[Ee])break;ge=hi(N[Ee],we)}return{nodes:Y,data:Z1([ve])}}function k(N,H,F,z){var G=N.length,Y=[],ve=[],Ie=[],ge=[],we=z-1,Ee=0,We=0,Ke=0,nt=0;for(Ee=0;Ee<G;++Ee)if(Ie=[],Ke=Ee+H,Ke>=G&&(Ke-=G),!ve[Ke]){ge=[];var Ge=[];for(We=Ke;We>=0;){Ge[We]=!0,ve[We]=!0,Ie[Ie.length]=We,ge.push(N[We]);var rt=F[Math.floor(We*4/z)];if(nt=We*4&we,z<4+nt)throw new Error("FAT boundary crossed: "+We+" 4 "+z);if(!N[rt]||(We=hi(N[rt],nt),Ge[We]))break}Y[Ke]={nodes:Ie,data:Z1([ge])}}return Y}function O(N,H,F,z,G,Y,ve,Ie){for(var ge=0,we=z.length?2:0,Ee=H[N].data,We=0,Ke=0,nt;We<Ee.length;We+=128){var Ge=Ee.slice(We,We+128);Zn(Ge,64),Ke=Ge.read_shift(2),nt=K0(Ge,0,Ke-we),z.push(nt);var rt={name:nt,type:Ge.read_shift(1),color:Ge.read_shift(1),L:Ge.read_shift(4,"i"),R:Ge.read_shift(4,"i"),C:Ge.read_shift(4,"i"),clsid:Ge.read_shift(16),state:Ge.read_shift(4,"i"),start:0,size:0},wt=Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2);wt!==0&&(rt.ct=L(Ge,Ge.l-8));var Zt=Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2);Zt!==0&&(rt.mt=L(Ge,Ge.l-8)),rt.start=Ge.read_shift(4,"i"),rt.size=Ge.read_shift(4,"i"),rt.size<0&&rt.start<0&&(rt.size=rt.type=0,rt.start=te,rt.name=""),rt.type===5?(ge=rt.start,G>0&&ge!==te&&(H[ge].name="!StreamData")):rt.size>=4096?(rt.storage="fat",H[rt.start]===void 0&&(H[rt.start]=A(F,rt.start,H.fat_addrs,H.ssz)),H[rt.start].name=rt.name,rt.content=H[rt.start].data.slice(0,rt.size)):(rt.storage="minifat",rt.size<0?rt.size=0:ge!==te&&rt.start!==te&&H[ge]&&(rt.content=_(rt,H[ge].data,(H[Ie]||{}).data))),rt.content&&Zn(rt.content,0),Y[nt]=rt,ve.push(rt)}}function L(N,H){return new Date((ts(N,H+4)/1e7*Math.pow(2,32)+ts(N,H)/1e7-11644473600)*1e3)}function K(N,H){return h(),x(p.readFileSync(N),H)}function ne(N,H){var F=H&&H.type;switch(F||sr&&Buffer.isBuffer(N)&&(F="buffer"),F||"base64"){case"file":return K(N,H);case"base64":return x(Ss(la(N)),H);case"binary":return x(Ss(N),H)}return x(N,H)}function M(N,H){var F=H||{},z=F.root||"Root Entry";if(N.FullPaths||(N.FullPaths=[]),N.FileIndex||(N.FileIndex=[]),N.FullPaths.length!==N.FileIndex.length)throw new Error("inconsistent CFB structure");N.FullPaths.length===0&&(N.FullPaths[0]=z+"/",N.FileIndex[0]={name:z,type:5}),F.CLSID&&(N.FileIndex[0].clsid=F.CLSID),re(N)}function re(N){var H="Sh33tJ5";if(!br.find(N,"/"+H)){var F=Fe(4);F[0]=55,F[1]=F[3]=50,F[2]=54,N.FileIndex.push({name:H,type:2,content:F,size:4,L:69,R:69,C:69}),N.FullPaths.push(N.FullPaths[0]+H),ee(N)}}function ee(N,H){M(N);for(var F=!1,z=!1,G=N.FullPaths.length-1;G>=0;--G){var Y=N.FileIndex[G];switch(Y.type){case 0:z?F=!0:(N.FileIndex.pop(),N.FullPaths.pop());break;case 1:case 2:case 5:z=!0,isNaN(Y.R*Y.L*Y.C)&&(F=!0),Y.R>-1&&Y.L>-1&&Y.R==Y.L&&(F=!0);break;default:F=!0;break}}if(!(!F&&!H)){var ve=new Date(1987,1,19),Ie=0,ge=Object.create?Object.create(null):{},we=[];for(G=0;G<N.FullPaths.length;++G)ge[N.FullPaths[G]]=!0,N.FileIndex[G].type!==0&&we.push([N.FullPaths[G],N.FileIndex[G]]);for(G=0;G<we.length;++G){var Ee=s(we[G][0]);z=ge[Ee],z||(we.push([Ee,{name:o(Ee).replace("/",""),type:1,clsid:J,ct:ve,mt:ve,content:null}]),ge[Ee]=!0)}for(we.sort(function(nt,Ge){return r(nt[0],Ge[0])}),N.FullPaths=[],N.FileIndex=[],G=0;G<we.length;++G)N.FullPaths[G]=we[G][0],N.FileIndex[G]=we[G][1];for(G=0;G<we.length;++G){var We=N.FileIndex[G],Ke=N.FullPaths[G];if(We.name=o(Ke).replace("/",""),We.L=We.R=We.C=-(We.color=1),We.size=We.content?We.content.length:0,We.start=0,We.clsid=We.clsid||J,G===0)We.C=we.length>1?1:-1,We.size=0,We.type=5;else if(Ke.slice(-1)=="/"){for(Ie=G+1;Ie<we.length&&s(N.FullPaths[Ie])!=Ke;++Ie);for(We.C=Ie>=we.length?-1:Ie,Ie=G+1;Ie<we.length&&s(N.FullPaths[Ie])!=s(Ke);++Ie);We.R=Ie>=we.length?-1:Ie,We.type=1}else s(N.FullPaths[G+1]||"")==s(Ke)&&(We.R=G+1),We.type=2}}}function de(N,H){var F=H||{};if(F.fileType=="mad")return ar(N,F);switch(ee(N),F.fileType){case"zip":return vt(N,F)}var z=(function(nt){for(var Ge=0,rt=0,wt=0;wt<nt.FileIndex.length;++wt){var Zt=nt.FileIndex[wt];if(Zt.content){var Vt=Zt.content.length;Vt>0&&(Vt<4096?Ge+=Vt+63>>6:rt+=Vt+511>>9)}}for(var ir=nt.FullPaths.length+3>>2,_n=Ge+7>>3,C=Ge+127>>7,he=_n+rt+ir+C,Ae=he+127>>7,st=Ae<=109?0:Math.ceil((Ae-109)/127);he+Ae+st+127>>7>Ae;)st=++Ae<=109?0:Math.ceil((Ae-109)/127);var bt=[1,st,Ae,C,ir,rt,Ge,0];return nt.FileIndex[0].size=Ge<<6,bt[7]=(nt.FileIndex[0].start=bt[0]+bt[1]+bt[2]+bt[3]+bt[4]+bt[5])+(bt[6]+7>>3),bt})(N),G=Fe(z[7]<<9),Y=0,ve=0;{for(Y=0;Y<8;++Y)G.write_shift(1,X[Y]);for(Y=0;Y<8;++Y)G.write_shift(2,0);for(G.write_shift(2,62),G.write_shift(2,3),G.write_shift(2,65534),G.write_shift(2,9),G.write_shift(2,6),Y=0;Y<3;++Y)G.write_shift(2,0);for(G.write_shift(4,0),G.write_shift(4,z[2]),G.write_shift(4,z[0]+z[1]+z[2]+z[3]-1),G.write_shift(4,0),G.write_shift(4,4096),G.write_shift(4,z[3]?z[0]+z[1]+z[2]-1:te),G.write_shift(4,z[3]),G.write_shift(-4,z[1]?z[0]-1:te),G.write_shift(4,z[1]),Y=0;Y<109;++Y)G.write_shift(-4,Y<z[2]?z[1]+Y:-1)}if(z[1])for(ve=0;ve<z[1];++ve){for(;Y<236+ve*127;++Y)G.write_shift(-4,Y<z[2]?z[1]+Y:-1);G.write_shift(-4,ve===z[1]-1?te:ve+1)}var Ie=function(nt){for(ve+=nt;Y<ve-1;++Y)G.write_shift(-4,Y+1);nt&&(++Y,G.write_shift(-4,te))};for(ve=Y=0,ve+=z[1];Y<ve;++Y)G.write_shift(-4,fe.DIFSECT);for(ve+=z[2];Y<ve;++Y)G.write_shift(-4,fe.FATSECT);Ie(z[3]),Ie(z[4]);for(var ge=0,we=0,Ee=N.FileIndex[0];ge<N.FileIndex.length;++ge)Ee=N.FileIndex[ge],Ee.content&&(we=Ee.content.length,!(we<4096)&&(Ee.start=ve,Ie(we+511>>9)));for(Ie(z[6]+7>>3);G.l&511;)G.write_shift(-4,fe.ENDOFCHAIN);for(ve=Y=0,ge=0;ge<N.FileIndex.length;++ge)Ee=N.FileIndex[ge],Ee.content&&(we=Ee.content.length,!(!we||we>=4096)&&(Ee.start=ve,Ie(we+63>>6)));for(;G.l&511;)G.write_shift(-4,fe.ENDOFCHAIN);for(Y=0;Y<z[4]<<2;++Y){var We=N.FullPaths[Y];if(!We||We.length===0){for(ge=0;ge<17;++ge)G.write_shift(4,0);for(ge=0;ge<3;++ge)G.write_shift(4,-1);for(ge=0;ge<12;++ge)G.write_shift(4,0);continue}Ee=N.FileIndex[Y],Y===0&&(Ee.start=Ee.size?Ee.start-1:te);var Ke=Y===0&&F.root||Ee.name;if(we=2*(Ke.length+1),G.write_shift(64,Ke,"utf16le"),G.write_shift(2,we),G.write_shift(1,Ee.type),G.write_shift(1,Ee.color),G.write_shift(-4,Ee.L),G.write_shift(-4,Ee.R),G.write_shift(-4,Ee.C),Ee.clsid)G.write_shift(16,Ee.clsid,"hex");else for(ge=0;ge<4;++ge)G.write_shift(4,0);G.write_shift(4,Ee.state||0),G.write_shift(4,0),G.write_shift(4,0),G.write_shift(4,0),G.write_shift(4,0),G.write_shift(4,Ee.start),G.write_shift(4,Ee.size),G.write_shift(4,0)}for(Y=1;Y<N.FileIndex.length;++Y)if(Ee=N.FileIndex[Y],Ee.size>=4096)if(G.l=Ee.start+1<<9,sr&&Buffer.isBuffer(Ee.content))Ee.content.copy(G,G.l,0,Ee.size),G.l+=Ee.size+511&-512;else{for(ge=0;ge<Ee.size;++ge)G.write_shift(1,Ee.content[ge]);for(;ge&511;++ge)G.write_shift(1,0)}for(Y=1;Y<N.FileIndex.length;++Y)if(Ee=N.FileIndex[Y],Ee.size>0&&Ee.size<4096)if(sr&&Buffer.isBuffer(Ee.content))Ee.content.copy(G,G.l,0,Ee.size),G.l+=Ee.size+63&-64;else{for(ge=0;ge<Ee.size;++ge)G.write_shift(1,Ee.content[ge]);for(;ge&63;++ge)G.write_shift(1,0)}if(sr)G.l=G.length;else for(;G.l<G.length;)G.write_shift(1,0);return G}function oe(N,H){var F=N.FullPaths.map(function(ge){return ge.toUpperCase()}),z=F.map(function(ge){var we=ge.split("/");return we[we.length-(ge.slice(-1)=="/"?2:1)]}),G=!1;H.charCodeAt(0)===47?(G=!0,H=F[0].slice(0,-1)+H):G=H.indexOf("/")!==-1;var Y=H.toUpperCase(),ve=G===!0?F.indexOf(Y):z.indexOf(Y);if(ve!==-1)return N.FileIndex[ve];var Ie=!Y.match(Dd);for(Y=Y.replace(Hl,""),Ie&&(Y=Y.replace(Dd,"!")),ve=0;ve<F.length;++ve)if((Ie?F[ve].replace(Dd,"!"):F[ve]).replace(Hl,"")==Y||(Ie?z[ve].replace(Dd,"!"):z[ve]).replace(Hl,"")==Y)return N.FileIndex[ve];return null}var Q=64,te=-2,ae="d0cf11e0a1b11ae1",X=[208,207,17,224,161,177,26,225],J="00000000000000000000000000000000",fe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:te,FREESECT:-1,HEADER_SIGNATURE:ae,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:J,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function se(N,H,F){h();var z=de(N,F);p.writeFileSync(H,z)}function Ne(N){for(var H=new Array(N.length),F=0;F<N.length;++F)H[F]=String.fromCharCode(N[F]);return H.join("")}function D(N,H){var F=de(N,H);switch(H&&H.type||"buffer"){case"file":return h(),p.writeFileSync(H.filename,F),F;case"binary":return typeof F=="string"?F:Ne(F);case"base64":return tc(typeof F=="string"?F:Ne(F));case"buffer":if(sr)return Buffer.isBuffer(F)?F:da(F);case"array":return typeof F=="string"?Ss(F):F}return F}var U;function E(N){try{var H=N.InflateRaw,F=new H;if(F._processChunk(new Uint8Array([3,0]),F._finishFlushFlag),F.bytesRead)U=N;else throw new Error("zlib does not expose bytesRead")}catch(z){console.error("cannot use native zlib: "+(z.message||z))}}function P(N,H){if(!U)return lr(N,H);var F=U.InflateRaw,z=new F,G=z._processChunk(N.slice(N.l),z._finishFlushFlag);return N.l+=z.bytesRead,G}function W(N){return U?U.deflateRawSync(N):qe(N)}var V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ce(N){var H=(N<<1|N<<11)&139536|(N<<5|N<<15)&558144;return(H>>16|H>>8|H)&255}for(var Te=typeof Uint8Array<"u",Be=Te?new Uint8Array(256):[],Ve=0;Ve<256;++Ve)Be[Ve]=Ce(Ve);function Je(N,H){var F=Be[N&255];return H<=8?F>>>8-H:(F=F<<8|Be[N>>8&255],H<=16?F>>>16-H:(F=F<<8|Be[N>>16&255],F>>>24-H))}function je(N,H){var F=H&7,z=H>>>3;return(N[z]|(F<=6?0:N[z+1]<<8))>>>F&3}function q(N,H){var F=H&7,z=H>>>3;return(N[z]|(F<=5?0:N[z+1]<<8))>>>F&7}function be(N,H){var F=H&7,z=H>>>3;return(N[z]|(F<=4?0:N[z+1]<<8))>>>F&15}function tt(N,H){var F=H&7,z=H>>>3;return(N[z]|(F<=3?0:N[z+1]<<8))>>>F&31}function Me(N,H){var F=H&7,z=H>>>3;return(N[z]|(F<=1?0:N[z+1]<<8))>>>F&127}function ct(N,H,F){var z=H&7,G=H>>>3,Y=(1<<F)-1,ve=N[G]>>>z;return F<8-z||(ve|=N[G+1]<<8-z,F<16-z)||(ve|=N[G+2]<<16-z,F<24-z)||(ve|=N[G+3]<<24-z),ve&Y}function pt(N,H,F){var z=H&7,G=H>>>3;return z<=5?N[G]|=(F&7)<<z:(N[G]|=F<<z&255,N[G+1]=(F&7)>>8-z),H+3}function ut(N,H,F){var z=H&7,G=H>>>3;return F=(F&1)<<z,N[G]|=F,H+1}function St(N,H,F){var z=H&7,G=H>>>3;return F<<=z,N[G]|=F&255,F>>>=8,N[G+1]=F,H+8}function ft(N,H,F){var z=H&7,G=H>>>3;return F<<=z,N[G]|=F&255,F>>>=8,N[G+1]=F&255,N[G+2]=F>>>8,H+16}function Ft(N,H){var F=N.length,z=2*F>H?2*F:H+5,G=0;if(F>=H)return N;if(sr){var Y=L1(z);if(N.copy)N.copy(Y);else for(;G<N.length;++G)Y[G]=N[G];return Y}else if(Te){var ve=new Uint8Array(z);if(ve.set)ve.set(N);else for(;G<F;++G)ve[G]=N[G];return ve}return N.length=z,N}function Dt(N){for(var H=new Array(N),F=0;F<N;++F)H[F]=0;return H}function jr(N,H,F){var z=1,G=0,Y=0,ve=0,Ie=0,ge=N.length,we=Te?new Uint16Array(32):Dt(32);for(Y=0;Y<32;++Y)we[Y]=0;for(Y=ge;Y<F;++Y)N[Y]=0;ge=N.length;var Ee=Te?new Uint16Array(ge):Dt(ge);for(Y=0;Y<ge;++Y)we[G=N[Y]]++,z<G&&(z=G),Ee[Y]=0;for(we[0]=0,Y=1;Y<=z;++Y)we[Y+16]=Ie=Ie+we[Y-1]<<1;for(Y=0;Y<ge;++Y)Ie=N[Y],Ie!=0&&(Ee[Y]=we[Ie+16]++);var We=0;for(Y=0;Y<ge;++Y)if(We=N[Y],We!=0)for(Ie=Je(Ee[Y],z)>>z-We,ve=(1<<z+4-We)-1;ve>=0;--ve)H[Ie|ve<<We]=We&15|Y<<4;return z}var Xt=Te?new Uint16Array(512):Dt(512),It=Te?new Uint16Array(32):Dt(32);if(!Te){for(var ce=0;ce<512;++ce)Xt[ce]=0;for(ce=0;ce<32;++ce)It[ce]=0}(function(){for(var N=[],H=0;H<32;H++)N.push(5);jr(N,It,32);var F=[];for(H=0;H<=143;H++)F.push(8);for(;H<=255;H++)F.push(9);for(;H<=279;H++)F.push(7);for(;H<=287;H++)F.push(8);jr(F,Xt,288)})();var me=(function(){for(var H=Te?new Uint8Array(32768):[],F=0,z=0;F<Le.length-1;++F)for(;z<Le[F+1];++z)H[z]=F;for(;z<32768;++z)H[z]=29;var G=Te?new Uint8Array(259):[];for(F=0,z=0;F<ue.length-1;++F)for(;z<ue[F+1];++z)G[z]=F;function Y(Ie,ge){for(var we=0;we<Ie.length;){var Ee=Math.min(65535,Ie.length-we),We=we+Ee==Ie.length;for(ge.write_shift(1,+We),ge.write_shift(2,Ee),ge.write_shift(2,~Ee&65535);Ee-- >0;)ge[ge.l++]=Ie[we++]}return ge.l}function ve(Ie,ge){for(var we=0,Ee=0,We=Te?new Uint16Array(32768):[];Ee<Ie.length;){var Ke=Math.min(65535,Ie.length-Ee);if(Ke<10){for(we=pt(ge,we,+(Ee+Ke==Ie.length)),we&7&&(we+=8-(we&7)),ge.l=we/8|0,ge.write_shift(2,Ke),ge.write_shift(2,~Ke&65535);Ke-- >0;)ge[ge.l++]=Ie[Ee++];we=ge.l*8;continue}we=pt(ge,we,+(Ee+Ke==Ie.length)+2);for(var nt=0;Ke-- >0;){var Ge=Ie[Ee];nt=(nt<<5^Ge)&32767;var rt=-1,wt=0;if((rt=We[nt])&&(rt|=Ee&-32768,rt>Ee&&(rt-=32768),rt<Ee))for(;Ie[rt+wt]==Ie[Ee+wt]&&wt<250;)++wt;if(wt>2){Ge=G[wt],Ge<=22?we=St(ge,we,Be[Ge+1]>>1)-1:(St(ge,we,3),we+=5,St(ge,we,Be[Ge-23]>>5),we+=3);var Zt=Ge<8?0:Ge-4>>2;Zt>0&&(ft(ge,we,wt-ue[Ge]),we+=Zt),Ge=H[Ee-rt],we=St(ge,we,Be[Ge]>>3),we-=3;var Vt=Ge<4?0:Ge-2>>1;Vt>0&&(ft(ge,we,Ee-rt-Le[Ge]),we+=Vt);for(var ir=0;ir<wt;++ir)We[nt]=Ee&32767,nt=(nt<<5^Ie[Ee])&32767,++Ee;Ke-=wt-1}else Ge<=143?Ge=Ge+48:we=ut(ge,we,1),we=St(ge,we,Be[Ge]),We[nt]=Ee&32767,++Ee}we=St(ge,we,0)-1}return ge.l=(we+7)/8|0,ge.l}return function(ge,we){return ge.length<8?Y(ge,we):ve(ge,we)}})();function qe(N){var H=Fe(50+Math.floor(N.length*1.1)),F=me(N,H);return H.slice(0,F)}var yt=Te?new Uint16Array(32768):Dt(32768),Ct=Te?new Uint16Array(32768):Dt(32768),gr=Te?new Uint16Array(128):Dt(128),Cr=1,or=1;function Er(N,H){var F=tt(N,H)+257;H+=5;var z=tt(N,H)+1;H+=5;var G=be(N,H)+4;H+=4;for(var Y=0,ve=Te?new Uint8Array(19):Dt(19),Ie=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ge=1,we=Te?new Uint8Array(8):Dt(8),Ee=Te?new Uint8Array(8):Dt(8),We=ve.length,Ke=0;Ke<G;++Ke)ve[V[Ke]]=Y=q(N,H),ge<Y&&(ge=Y),we[Y]++,H+=3;var nt=0;for(we[0]=0,Ke=1;Ke<=ge;++Ke)Ee[Ke]=nt=nt+we[Ke-1]<<1;for(Ke=0;Ke<We;++Ke)(nt=ve[Ke])!=0&&(Ie[Ke]=Ee[nt]++);var Ge=0;for(Ke=0;Ke<We;++Ke)if(Ge=ve[Ke],Ge!=0){nt=Be[Ie[Ke]]>>8-Ge;for(var rt=(1<<7-Ge)-1;rt>=0;--rt)gr[nt|rt<<Ge]=Ge&7|Ke<<3}var wt=[];for(ge=1;wt.length<F+z;)switch(nt=gr[Me(N,H)],H+=nt&7,nt>>>=3){case 16:for(Y=3+je(N,H),H+=2,nt=wt[wt.length-1];Y-- >0;)wt.push(nt);break;case 17:for(Y=3+q(N,H),H+=3;Y-- >0;)wt.push(0);break;case 18:for(Y=11+Me(N,H),H+=7;Y-- >0;)wt.push(0);break;default:wt.push(nt),ge<nt&&(ge=nt);break}var Zt=wt.slice(0,F),Vt=wt.slice(F);for(Ke=F;Ke<286;++Ke)Zt[Ke]=0;for(Ke=z;Ke<30;++Ke)Vt[Ke]=0;return Cr=jr(Zt,yt,286),or=jr(Vt,Ct,30),H}function Qt(N,H){if(N[0]==3&&!(N[1]&3))return[vi(H),2];for(var F=0,z=0,G=L1(H||1<<18),Y=0,ve=G.length>>>0,Ie=0,ge=0;(z&1)==0;){if(z=q(N,F),F+=3,z>>>1)z>>1==1?(Ie=9,ge=5):(F=Er(N,F),Ie=Cr,ge=or);else{F&7&&(F+=8-(F&7));var we=N[F>>>3]|N[(F>>>3)+1]<<8;if(F+=32,we>0)for(!H&&ve<Y+we&&(G=Ft(G,Y+we),ve=G.length);we-- >0;)G[Y++]=N[F>>>3],F+=8;continue}for(;;){!H&&ve<Y+32767&&(G=Ft(G,Y+32767),ve=G.length);var Ee=ct(N,F,Ie),We=z>>>1==1?Xt[Ee]:yt[Ee];if(F+=We&15,We>>>=4,(We>>>8&255)===0)G[Y++]=We;else{if(We==256)break;We-=257;var Ke=We<8?0:We-4>>2;Ke>5&&(Ke=0);var nt=Y+ue[We];Ke>0&&(nt+=ct(N,F,Ke),F+=Ke),Ee=ct(N,F,ge),We=z>>>1==1?It[Ee]:Ct[Ee],F+=We&15,We>>>=4;var Ge=We<4?0:We-2>>1,rt=Le[We];for(Ge>0&&(rt+=ct(N,F,Ge),F+=Ge),!H&&ve<nt&&(G=Ft(G,nt+100),ve=G.length);Y<nt;)G[Y]=G[Y-rt],++Y}}}return H?[G,F+7>>>3]:[G.slice(0,Y),F+7>>>3]}function lr(N,H){var F=N.slice(N.l||0),z=Qt(F,H);return N.l+=z[1],z[0]}function ie(N,H){if(N)typeof console<"u"&&console.error(H);else throw new Error(H)}function De(N,H){var F=N;Zn(F,0);var z=[],G=[],Y={FileIndex:z,FullPaths:G};M(Y,{root:H.root});for(var ve=F.length-4;(F[ve]!=80||F[ve+1]!=75||F[ve+2]!=5||F[ve+3]!=6)&&ve>=0;)--ve;F.l=ve+4,F.l+=4;var Ie=F.read_shift(2);F.l+=6;var ge=F.read_shift(4);for(F.l=ge,ve=0;ve<Ie;++ve){F.l+=20;var we=F.read_shift(4),Ee=F.read_shift(4),We=F.read_shift(2),Ke=F.read_shift(2),nt=F.read_shift(2);F.l+=8;var Ge=F.read_shift(4),rt=f(F.slice(F.l+We,F.l+We+Ke));F.l+=We+Ke+nt;var wt=F.l;F.l=Ge+4,mt(F,we,Ee,Y,rt),F.l=wt}return Y}function mt(N,H,F,z,G){N.l+=2;var Y=N.read_shift(2),ve=N.read_shift(2),Ie=d(N);if(Y&8257)throw new Error("Unsupported ZIP encryption");for(var ge=N.read_shift(4),we=N.read_shift(4),Ee=N.read_shift(4),We=N.read_shift(2),Ke=N.read_shift(2),nt="",Ge=0;Ge<We;++Ge)nt+=String.fromCharCode(N[N.l++]);if(Ke){var rt=f(N.slice(N.l,N.l+Ke));(rt[21589]||{}).mt&&(Ie=rt[21589].mt),((G||{})[21589]||{}).mt&&(Ie=G[21589].mt)}N.l+=Ke;var wt=N.slice(N.l,N.l+we);switch(ve){case 8:wt=P(N,Ee);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ve)}var Zt=!1;Y&8&&(ge=N.read_shift(4),ge==134695760&&(ge=N.read_shift(4),Zt=!0),we=N.read_shift(4),Ee=N.read_shift(4)),we!=H&&ie(Zt,"Bad compressed size: "+H+" != "+we),Ee!=F&&ie(Zt,"Bad uncompressed size: "+F+" != "+Ee),Dr(z,nt,wt,{unsafe:!0,mt:Ie})}function vt(N,H){var F=H||{},z=[],G=[],Y=Fe(1),ve=F.compression?8:0,Ie=0,ge=0,we=0,Ee=0,We=0,Ke=N.FullPaths[0],nt=Ke,Ge=N.FileIndex[0],rt=[],wt=0;for(ge=1;ge<N.FullPaths.length;++ge)if(nt=N.FullPaths[ge].slice(Ke.length),Ge=N.FileIndex[ge],!(!Ge.size||!Ge.content||nt=="Sh33tJ5")){var Zt=Ee,Vt=Fe(nt.length);for(we=0;we<nt.length;++we)Vt.write_shift(1,nt.charCodeAt(we)&127);Vt=Vt.slice(0,Vt.l),rt[We]=Z6.buf(Ge.content,0);var ir=Ge.content;ve==8&&(ir=W(ir)),Y=Fe(30),Y.write_shift(4,67324752),Y.write_shift(2,20),Y.write_shift(2,Ie),Y.write_shift(2,ve),Ge.mt?c(Y,Ge.mt):Y.write_shift(4,0),Y.write_shift(-4,rt[We]),Y.write_shift(4,ir.length),Y.write_shift(4,Ge.content.length),Y.write_shift(2,Vt.length),Y.write_shift(2,0),Ee+=Y.length,z.push(Y),Ee+=Vt.length,z.push(Vt),Ee+=ir.length,z.push(ir),Y=Fe(46),Y.write_shift(4,33639248),Y.write_shift(2,0),Y.write_shift(2,20),Y.write_shift(2,Ie),Y.write_shift(2,ve),Y.write_shift(4,0),Y.write_shift(-4,rt[We]),Y.write_shift(4,ir.length),Y.write_shift(4,Ge.content.length),Y.write_shift(2,Vt.length),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(4,0),Y.write_shift(4,Zt),wt+=Y.l,G.push(Y),wt+=Vt.length,G.push(Vt),++We}return Y=Fe(22),Y.write_shift(4,101010256),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,We),Y.write_shift(2,We),Y.write_shift(4,wt),Y.write_shift(4,Ee),Y.write_shift(2,0),xn([xn(z),xn(G),Y])}var xr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Jt(N,H){if(N.ctype)return N.ctype;var F=N.name||"",z=F.match(/\.([^\.]+)$/);return z&&xr[z[1]]||H&&(z=(F=H).match(/[\.\\]([^\.\\])+$/),z&&xr[z[1]])?xr[z[1]]:"application/octet-stream"}function Xe(N){for(var H=tc(N),F=[],z=0;z<H.length;z+=76)F.push(H.slice(z,z+76));return F.join(`\r
`)+`\r
`}function Wr(N){var H=N.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(we){var Ee=we.charCodeAt(0).toString(16).toUpperCase();return"="+(Ee.length==1?"0"+Ee:Ee)});H=H.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),H.charAt(0)==`
`&&(H="=0D"+H.slice(1)),H=H.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var F=[],z=H.split(`\r
`),G=0;G<z.length;++G){var Y=z[G];if(Y.length==0){F.push("");continue}for(var ve=0;ve<Y.length;){var Ie=76,ge=Y.slice(ve,ve+Ie);ge.charAt(Ie-1)=="="?Ie--:ge.charAt(Ie-2)=="="?Ie-=2:ge.charAt(Ie-3)=="="&&(Ie-=3),ge=Y.slice(ve,ve+Ie),ve+=Ie,ve<Y.length&&(ge+="="),F.push(ge)}}return F.join(`\r
`)}function Gt(N){for(var H=[],F=0;F<N.length;++F){for(var z=N[F];F<=N.length&&z.charAt(z.length-1)=="=";)z=z.slice(0,z.length-1)+N[++F];H.push(z)}for(var G=0;G<H.length;++G)H[G]=H[G].replace(/[=][0-9A-Fa-f]{2}/g,function(Y){return String.fromCharCode(parseInt(Y.slice(1),16))});return Ss(H.join(`\r
`))}function Bn(N,H,F){for(var z="",G="",Y="",ve,Ie=0;Ie<10;++Ie){var ge=H[Ie];if(!ge||ge.match(/^\s*$/))break;var we=ge.match(/^(.*?):\s*([^\s].*)$/);if(we)switch(we[1].toLowerCase()){case"content-location":z=we[2].trim();break;case"content-type":Y=we[2].trim();break;case"content-transfer-encoding":G=we[2].trim();break}}switch(++Ie,G.toLowerCase()){case"base64":ve=Ss(la(H.slice(Ie).join("")));break;case"quoted-printable":ve=Gt(H.slice(Ie));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+G)}var Ee=Dr(N,z.slice(F.length),ve,{unsafe:!0});Y&&(Ee.ctype=Y)}function Nr(N,H){if(Ne(N.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var F=H&&H.root||"",z=(sr&&Buffer.isBuffer(N)?N.toString("binary"):Ne(N)).split(`\r
`),G=0,Y="";for(G=0;G<z.length;++G)if(Y=z[G],!!/^Content-Location:/i.test(Y)&&(Y=Y.slice(Y.indexOf("file")),F||(F=Y.slice(0,Y.lastIndexOf("/")+1)),Y.slice(0,F.length)!=F))for(;F.length>0&&(F=F.slice(0,F.length-1),F=F.slice(0,F.lastIndexOf("/")+1),Y.slice(0,F.length)!=F););var ve=(z[1]||"").match(/boundary="(.*?)"/);if(!ve)throw new Error("MAD cannot find boundary");var Ie="--"+(ve[1]||""),ge=[],we=[],Ee={FileIndex:ge,FullPaths:we};M(Ee);var We,Ke=0;for(G=0;G<z.length;++G){var nt=z[G];nt!==Ie&&nt!==Ie+"--"||(Ke++&&Bn(Ee,z.slice(We,G),F),We=G)}return Ee}function ar(N,H){var F=H||{},z=F.boundary||"SheetJS";z="------="+z;for(var G=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+z.slice(2)+'"',"","",""],Y=N.FullPaths[0],ve=Y,Ie=N.FileIndex[0],ge=1;ge<N.FullPaths.length;++ge)if(ve=N.FullPaths[ge].slice(Y.length),Ie=N.FileIndex[ge],!(!Ie.size||!Ie.content||ve=="Sh33tJ5")){ve=ve.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(wt){return"_x"+wt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(wt){return"_u"+wt.charCodeAt(0).toString(16)+"_"});for(var we=Ie.content,Ee=sr&&Buffer.isBuffer(we)?we.toString("binary"):Ne(we),We=0,Ke=Math.min(1024,Ee.length),nt=0,Ge=0;Ge<=Ke;++Ge)(nt=Ee.charCodeAt(Ge))>=32&&nt<128&&++We;var rt=We>=Ke*4/5;G.push(z),G.push("Content-Location: "+(F.root||"file:///C:/SheetJS/")+ve),G.push("Content-Transfer-Encoding: "+(rt?"quoted-printable":"base64")),G.push("Content-Type: "+Jt(Ie,ve)),G.push(""),G.push(rt?Wr(Ee):Xe(Ee))}return G.push(z+`--\r
`),G.join(`\r
`)}function Et(N){var H={};return M(H,N),H}function Dr(N,H,F,z){var G=z&&z.unsafe;G||M(N);var Y=!G&&br.find(N,H);if(!Y){var ve=N.FullPaths[0];H.slice(0,ve.length)==ve?ve=H:(ve.slice(-1)!="/"&&(ve+="/"),ve=(ve+H).replace("//","/")),Y={name:o(H),type:2},N.FileIndex.push(Y),N.FullPaths.push(ve),G||br.utils.cfb_gc(N)}return Y.content=F,Y.size=F?F.length:0,z&&(z.CLSID&&(Y.clsid=z.CLSID),z.mt&&(Y.mt=z.mt),z.ct&&(Y.ct=z.ct)),Y}function rn(N,H){M(N);var F=br.find(N,H);if(F){for(var z=0;z<N.FileIndex.length;++z)if(N.FileIndex[z]==F)return N.FileIndex.splice(z,1),N.FullPaths.splice(z,1),!0}return!1}function Cs(N,H,F){M(N);var z=br.find(N,H);if(z){for(var G=0;G<N.FileIndex.length;++G)if(N.FileIndex[G]==z)return N.FileIndex[G].name=o(F),N.FullPaths[G]=F,!0}return!1}function Mn(N){ee(N,!0)}return t.find=oe,t.read=ne,t.parse=x,t.write=D,t.writeFile=se,t.utils={cfb_new:Et,cfb_add:Dr,cfb_del:rn,cfb_mov:Cs,cfb_gc:Mn,ReadShift:Vl,CheckField:nb,prep_blob:Zn,bconcat:xn,use_zlib:E,_deflateRaw:qe,_inflateRaw:lr,consts:fe},t})();function e5(e){return typeof e=="string"?pu(e):Array.isArray(e)?E6(e):e}function fc(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=pu(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var s=r=="utf8"?nc(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(s,e);if(typeof Blob<"u"){var o=new Blob([e5(s)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(o,e);if(typeof saveAs<"u")return saveAs(o,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var c=URL.createObjectURL(o);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),chrome.downloads.download({url:c,filename:e,saveAs:!0});var d=document.createElement("a");if(d.download!=null)return d.download=e,d.href=c,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),c}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var f=File(e);return f.open("w"),f.encoding="binary",Array.isArray(t)&&(t=uc(t)),f.write(t),f.close(),t}catch(p){if(!p.message||!p.message.match(/onstruct/))throw p}throw new Error("cannot save file "+e)}function vn(e){for(var t=Object.keys(e),r=[],s=0;s<t.length;++s)Object.prototype.hasOwnProperty.call(e,t[s])&&r.push(t[s]);return r}function G1(e,t){for(var r=[],s=vn(e),o=0;o!==s.length;++o)r[e[s[o]][t]]==null&&(r[e[s[o]][t]]=s[o]);return r}function H0(e){for(var t=[],r=vn(e),s=0;s!==r.length;++s)t[e[r[s]]]=r[s];return t}function mu(e){for(var t=[],r=vn(e),s=0;s!==r.length;++s)t[e[r[s]]]=parseInt(r[s],10);return t}function t5(e){for(var t=[],r=vn(e),s=0;s!==r.length;++s)t[e[r[s]]]==null&&(t[e[r[s]]]=[]),t[e[r[s]]].push(r[s]);return t}var Qd=new Date(1899,11,30,0,0,0);function qn(e,t){var r=e.getTime(),s=Qd.getTime()+(e.getTimezoneOffset()-Qd.getTimezoneOffset())*6e4;return(r-s)/(1440*60*1e3)}var zv=new Date,r5=Qd.getTime()+(zv.getTimezoneOffset()-Qd.getTimezoneOffset())*6e4,V1=zv.getTimezoneOffset();function Uv(e){var t=new Date;return t.setTime(e*24*60*60*1e3+r5),t.getTimezoneOffset()!==V1&&t.setTime(t.getTime()+(t.getTimezoneOffset()-V1)*6e4),t}var Y1=new Date("2017-02-19T19:06:09.000Z"),Wv=isNaN(Y1.getFullYear())?new Date("2/19/17"):Y1,n5=Wv.getFullYear()==2017;function In(e,t){var r=new Date(e);if(n5)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Wv.getFullYear()==1917&&!isNaN(r.getFullYear())){var s=r.getFullYear();return e.indexOf(""+s)>-1||r.setFullYear(r.getFullYear()+100),r}var o=e.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+o[0],+o[1]-1,+o[2],+o[3]||0,+o[4]||0,+o[5]||0);return e.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function yu(e,t){if(sr&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(c){return r[c]||c})}catch{}for(var s=[],o=0;o!=e.length;++o)s.push(String.fromCharCode(e[o]));return s.join("")}function $n(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=$n(e[r]));return t}function Lr(e,t){for(var r="";r.length<t;)r+=e;return r}function aa(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,s=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(s))||(s=s.replace(/[(](.*)[)]/,function(o,c){return r=-r,c}),!isNaN(t=Number(s)))?t/r:t}var s5=["january","february","march","april","may","june","july","august","september","october","november","december"];function rc(e){var t=new Date(e),r=new Date(NaN),s=t.getYear(),o=t.getMonth(),c=t.getDate();if(isNaN(c))return r;var d=e.toLowerCase();if(d.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(d=d.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),d.length>3&&s5.indexOf(d)==-1)return r}else if(d.match(/[a-z]/))return r;return s<0||s>8099?r:(o>0||c>1)&&s!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function Lt(e,t,r){if(e.FullPaths){if(typeof r=="string"){var s;return sr?s=da(r):s=k6(r),br.utils.cfb_add(e,t,s)}br.utils.cfb_add(e,t,r)}else e.file(t,r)}function G0(){return br.utils.cfb_new()}var Vr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,a5={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},V0=H0(a5),Y0=/[&<>'"]/g,i5=/[\u0000-\u0008\u000b-\u001f]/g;function hr(e){var t=e+"";return t.replace(Y0,function(r){return V0[r]}).replace(i5,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function K1(e){return hr(e).replace(/ /g,"_x0020_")}var qv=/[\u0000-\u001f]/g;function o5(e){var t=e+"";return t.replace(Y0,function(r){return V0[r]}).replace(/\n/g,"<br/>").replace(qv,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function l5(e){var t=e+"";return t.replace(Y0,function(r){return V0[r]}).replace(qv,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function c5(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function d5(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Gh(e){for(var t="",r=0,s=0,o=0,c=0,d=0,f=0;r<e.length;){if(s=e.charCodeAt(r++),s<128){t+=String.fromCharCode(s);continue}if(o=e.charCodeAt(r++),s>191&&s<224){d=(s&31)<<6,d|=o&63,t+=String.fromCharCode(d);continue}if(c=e.charCodeAt(r++),s<240){t+=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63);continue}d=e.charCodeAt(r++),f=((s&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536,t+=String.fromCharCode(55296+(f>>>10&1023)),t+=String.fromCharCode(56320+(f&1023))}return t}function X1(e){var t=vi(2*e.length),r,s,o=1,c=0,d=0,f;for(s=0;s<e.length;s+=o)o=1,(f=e.charCodeAt(s))<128?r=f:f<224?(r=(f&31)*64+(e.charCodeAt(s+1)&63),o=2):f<240?(r=(f&15)*4096+(e.charCodeAt(s+1)&63)*64+(e.charCodeAt(s+2)&63),o=3):(o=4,r=(f&7)*262144+(e.charCodeAt(s+1)&63)*4096+(e.charCodeAt(s+2)&63)*64+(e.charCodeAt(s+3)&63),r-=65536,d=55296+(r>>>10&1023),r=56320+(r&1023)),d!==0&&(t[c++]=d&255,t[c++]=d>>>8,d=0),t[c++]=r%256,t[c++]=r>>>8;return t.slice(0,c).toString("ucs2")}function Q1(e){return da(e,"binary").toString("utf8")}var Id="foo bar baz",Gl=sr&&(Q1(Id)==Gh(Id)&&Q1||X1(Id)==Gh(Id)&&X1)||Gh,nc=sr?function(e){return da(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,s=0,o=0;r<e.length;)switch(s=e.charCodeAt(r++),!0){case s<128:t.push(String.fromCharCode(s));break;case s<2048:t.push(String.fromCharCode(192+(s>>6))),t.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,o=e.charCodeAt(r++)-56320+(s<<10),t.push(String.fromCharCode(240+(o>>18&7))),t.push(String.fromCharCode(144+(o>>12&63))),t.push(String.fromCharCode(128+(o>>6&63))),t.push(String.fromCharCode(128+(o&63)));break;default:t.push(String.fromCharCode(224+(s>>12))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)))}return t.join("")},u5=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var s=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),o=0;o<e.length;++o)s=s.replace(e[o][0],e[o][1]);return s}})(),$v=/(^\s|\s$|\n)/;function mn(e,t){return"<"+e+(t.match($v)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function sc(e){return vn(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ze(e,t,r){return"<"+e+(r!=null?sc(r):"")+(t!=null?(t.match($v)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function b0(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function f5(e,t){switch(typeof e){case"string":var r=Ze("vt:lpwstr",hr(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ze((e|0)==e?"vt:i4":"vt:r8",hr(String(e)));case"boolean":return Ze("vt:bool",e?"true":"false")}if(e instanceof Date)return Ze("vt:filetime",b0(e));throw new Error("Unable to serialize "+e)}var ln={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Mo=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],es={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function h5(e,t){for(var r=1-2*(e[t+7]>>>7),s=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),o=e[t+6]&15,c=5;c>=0;--c)o=o*256+e[t+c];return s==2047?o==0?r*(1/0):NaN:(s==0?s=-1022:(s-=1023,o+=Math.pow(2,52)),r*Math.pow(2,s-52)*o)}function p5(e,t,r){var s=(t<0||1/t==-1/0?1:0)<<7,o=0,c=0,d=s?-t:t;isFinite(d)?d==0?o=c=0:(o=Math.floor(Math.log(d)/Math.LN2),c=d*Math.pow(2,52-o),o<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?o=-1022:(c-=Math.pow(2,52),o+=1023)):(o=2047,c=isNaN(t)?26985:0);for(var f=0;f<=5;++f,c/=256)e[r+f]=c&255;e[r+6]=(o&15)<<4|c&15,e[r+7]=o>>4|s}var J1=function(e){for(var t=[],r=10240,s=0;s<e[0].length;++s)if(e[0][s])for(var o=0,c=e[0][s].length;o<c;o+=r)t.push.apply(t,e[0][s].slice(o,o+r));return t},Z1=sr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:da(t)})):J1(e)}:J1,ey=function(e,t,r){for(var s=[],o=t;o<r;o+=2)s.push(String.fromCharCode(zl(e,o)));return s.join("").replace(Hl,"")},K0=sr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Hl,""):ey(e,t,r)}:ey,ty=function(e,t,r){for(var s=[],o=t;o<t+r;++o)s.push(("0"+e[o].toString(16)).slice(-2));return s.join("")},Hv=sr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):ty(e,t,r)}:ty,ry=function(e,t,r){for(var s=[],o=t;o<r;o++)s.push(String.fromCharCode(So(e,o)));return s.join("")},hc=sr?function(t,r,s){return Buffer.isBuffer(t)?t.toString("utf8",r,s):ry(t,r,s)}:ry,Gv=function(e,t){var r=ts(e,t);return r>0?hc(e,t+4,t+4+r-1):""},Vv=Gv,Yv=function(e,t){var r=ts(e,t);return r>0?hc(e,t+4,t+4+r-1):""},Kv=Yv,Xv=function(e,t){var r=2*ts(e,t);return r>0?hc(e,t+4,t+4+r-1):""},Qv=Xv,Jv=function(t,r){var s=ts(t,r);return s>0?K0(t,r+4,r+4+s):""},Zv=Jv,eb=function(e,t){var r=ts(e,t);return r>0?hc(e,t+4,t+4+r):""},tb=eb,rb=function(e,t){return h5(e,t)},Jd=rb,X0=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};sr&&(Vv=function(t,r){if(!Buffer.isBuffer(t))return Gv(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},Kv=function(t,r){if(!Buffer.isBuffer(t))return Yv(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},Qv=function(t,r){if(!Buffer.isBuffer(t))return Xv(t,r);var s=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s-1)},Zv=function(t,r){if(!Buffer.isBuffer(t))return Jv(t,r);var s=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s)},tb=function(t,r){if(!Buffer.isBuffer(t))return eb(t,r);var s=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+s)},Jd=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):rb(t,r)},X0=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var So=function(e,t){return e[t]},zl=function(e,t){return e[t+1]*256+e[t]},g5=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},ts=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},hi=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},x5=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Vl(e,t){var r="",s,o,c=[],d,f,p,h;switch(t){case"dbcs":if(h=this.l,sr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(p=0;p<e;++p)r+=String.fromCharCode(zl(this,h)),h+=2;e*=2;break;case"utf8":r=hc(this,this.l,this.l+e);break;case"utf16le":e*=2,r=K0(this,this.l,this.l+e);break;case"wstr":return Vl.call(this,e,"dbcs");case"lpstr-ansi":r=Vv(this,this.l),e=4+ts(this,this.l);break;case"lpstr-cp":r=Kv(this,this.l),e=4+ts(this,this.l);break;case"lpwstr":r=Qv(this,this.l),e=4+2*ts(this,this.l);break;case"lpp4":e=4+ts(this,this.l),r=Zv(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ts(this,this.l),r=tb(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(d=So(this,this.l+e++))!==0;)c.push(Nd(d));r=c.join("");break;case"_wstr":for(e=0,r="";(d=zl(this,this.l+e))!==0;)c.push(Nd(d)),e+=2;e+=2,r=c.join("");break;case"dbcs-cont":for(r="",h=this.l,p=0;p<e;++p){if(this.lens&&this.lens.indexOf(h)!==-1)return d=So(this,h),this.l=h+1,f=Vl.call(this,e-p,d?"dbcs-cont":"sbcs-cont"),c.join("")+f;c.push(Nd(zl(this,h))),h+=2}r=c.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",h=this.l,p=0;p!=e;++p){if(this.lens&&this.lens.indexOf(h)!==-1)return d=So(this,h),this.l=h+1,f=Vl.call(this,e-p,d?"dbcs-cont":"sbcs-cont"),c.join("")+f;c.push(Nd(So(this,h))),h+=1}r=c.join("");break;default:switch(e){case 1:return s=So(this,this.l),this.l++,s;case 2:return s=(t==="i"?g5:zl)(this,this.l),this.l+=2,s;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(s=(e>0?hi:x5)(this,this.l),this.l+=4,s):(o=ts(this,this.l),this.l+=4,o);case 8:case-8:if(t==="f")return e==8?o=Jd(this,this.l):o=Jd([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,o;e=8;case 16:r=Hv(this,this.l,e);break}}return this.l+=e,r}var m5=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},y5=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},v5=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function b5(e,t,r){var s=0,o=0;if(r==="dbcs"){for(o=0;o!=t.length;++o)v5(this,t.charCodeAt(o),this.l+2*o);s=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),o=0;o!=t.length;++o)this[this.l+o]=t.charCodeAt(o)&255;s=t.length}else if(r==="hex"){for(;o<e;++o)this[this.l++]=parseInt(t.slice(2*o,2*o+2),16)||0;return this}else if(r==="utf16le"){var c=Math.min(this.l+e,this.length);for(o=0;o<Math.min(t.length,e);++o){var d=t.charCodeAt(o);this[this.l++]=d&255,this[this.l++]=d>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(e){case 1:s=1,this[this.l]=t&255;break;case 2:s=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:s=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:s=4,m5(this,t,this.l);break;case 8:if(s=8,r==="f"){p5(this,t,this.l);break}case 16:break;case-4:s=4,y5(this,t,this.l);break}return this.l+=s,this}function nb(e,t){var r=Hv(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Zn(e,t){e.l=t,e.read_shift=Vl,e.chk=nb,e.write_shift=b5}function Fs(e,t){e.l+=t}function Fe(e){var t=vi(e);return Zn(t,0),t}function Wn(){var e=[],t=sr?256:2048,r=function(h){var x=Fe(h);return Zn(x,0),x},s=r(t),o=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&e.push(s),s=null)},c=function(h){return s&&h<s.length-s.l?s:(o(),s=r(Math.max(h+1,t)))},d=function(){return o(),xn(e)},f=function(h){o(),s=h,s.l==null&&(s.l=s.length),c(t)};return{next:c,push:f,end:d,_bufs:e}}function $e(e,t,r,s){var o=+t,c;if(!isNaN(o)){s||(s=hI[o].p||(r||[]).length||0),c=1+(o>=128?1:0)+1,s>=128&&++c,s>=16384&&++c,s>=2097152&&++c;var d=e.next(c);o<=127?d.write_shift(1,o):(d.write_shift(1,(o&127)+128),d.write_shift(1,o>>7));for(var f=0;f!=4;++f)if(s>=128)d.write_shift(1,(s&127)+128),s>>=7;else{d.write_shift(1,s);break}s>0&&X0(r)&&e.push(r)}}function Yl(e,t,r){var s=$n(e);if(t.s?(s.cRel&&(s.c+=t.s.c),s.rRel&&(s.r+=t.s.r)):(s.cRel&&(s.c+=t.c),s.rRel&&(s.r+=t.r)),!r||r.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function ny(e,t,r){var s=$n(e);return s.s=Yl(s.s,t.s,r),s.e=Yl(s.e,t.s,r),s}function Kl(e,t){if(e.cRel&&e.c<0)for(e=$n(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=$n(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=pr(e);return!e.cRel&&e.cRel!=null&&(r=w5(r)),!e.rRel&&e.rRel!=null&&(r=_5(r)),r}function Vh(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Tn(e.s.c)+":"+(e.e.cRel?"":"$")+Tn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+yn(e.s.r)+":"+(e.e.rRel?"":"$")+yn(e.e.r):Kl(e.s,t.biff)+":"+Kl(e.e,t.biff)}function Q0(e){return parseInt(S5(e),10)-1}function yn(e){return""+(e+1)}function _5(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function S5(e){return e.replace(/\$(\d+)$/,"$1")}function J0(e){for(var t=T5(e),r=0,s=0;s!==t.length;++s)r=26*r+t.charCodeAt(s)-64;return r-1}function Tn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function w5(e){return e.replace(/^([A-Z])/,"$$$1")}function T5(e){return e.replace(/^\$([A-Z])/,"$1")}function j5(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function cn(e){for(var t=0,r=0,s=0;s<e.length;++s){var o=e.charCodeAt(s);o>=48&&o<=57?t=10*t+(o-48):o>=65&&o<=90&&(r=26*r+(o-64))}return{c:r-1,r:t-1}}function pr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function rs(e){var t=e.indexOf(":");return t==-1?{s:cn(e),e:cn(e)}:{s:cn(e.slice(0,t)),e:cn(e.slice(t+1))}}function Gr(e,t){return typeof t>"u"||typeof t=="number"?Gr(e.s,e.e):(typeof e!="string"&&(e=pr(e)),typeof t!="string"&&(t=pr(t)),e==t?e:e+":"+t)}function kr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,s=0,o=0,c=e.length;for(r=0;s<c&&!((o=e.charCodeAt(s)-64)<1||o>26);++s)r=26*r+o;for(t.s.c=--r,r=0;s<c&&!((o=e.charCodeAt(s)-48)<0||o>9);++s)r=10*r+o;if(t.s.r=--r,s===c||o!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++s,r=0;s!=c&&!((o=e.charCodeAt(s)-64)<1||o>26);++s)r=26*r+o;for(t.e.c=--r,r=0;s!=c&&!((o=e.charCodeAt(s)-48)<0||o>9);++s)r=10*r+o;return t.e.r=--r,t}function sy(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Wa(e.z,r?qn(t):t)}catch{}try{return e.w=Wa((e.XF||{}).numFmtId||(r?14:0),r?qn(t):t)}catch{return""+t}}function ca(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?pc[e.v]||e.v:t==null?sy(e,e.v):sy(e,t))}function wi(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",s={};return s[r]=e,{SheetNames:[r],Sheets:s}}function sb(e,t,r){var s=r||{},o=e?Array.isArray(e):s.dense,c=e||(o?[]:{}),d=0,f=0;if(c&&s.origin!=null){if(typeof s.origin=="number")d=s.origin;else{var p=typeof s.origin=="string"?cn(s.origin):s.origin;d=p.r,f=p.c}c["!ref"]||(c["!ref"]="A1:A1")}var h={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var x=kr(c["!ref"]);h.s.c=x.s.c,h.s.r=x.s.r,h.e.c=Math.max(h.e.c,x.e.c),h.e.r=Math.max(h.e.r,x.e.r),d==-1&&(h.e.r=d=x.e.r+1)}for(var v=0;v!=t.length;++v)if(t[v]){if(!Array.isArray(t[v]))throw new Error("aoa_to_sheet expects an array of arrays");for(var y=0;y!=t[v].length;++y)if(!(typeof t[v][y]>"u")){var b={v:t[v][y]},w=d+v,_=f+y;if(h.s.r>w&&(h.s.r=w),h.s.c>_&&(h.s.c=_),h.e.r<w&&(h.e.r=w),h.e.c<_&&(h.e.c=_),t[v][y]&&typeof t[v][y]=="object"&&!Array.isArray(t[v][y])&&!(t[v][y]instanceof Date))b=t[v][y];else if(Array.isArray(b.v)&&(b.f=t[v][y][1],b.v=b.v[0]),b.v===null)if(b.f)b.t="n";else if(s.nullError)b.t="e",b.v=0;else if(s.sheetStubs)b.t="z";else continue;else typeof b.v=="number"?b.t="n":typeof b.v=="boolean"?b.t="b":b.v instanceof Date?(b.z=s.dateNF||Pr[14],s.cellDates?(b.t="d",b.w=Wa(b.z,qn(b.v))):(b.t="n",b.v=qn(b.v),b.w=Wa(b.z,b.v))):b.t="s";if(o)c[w]||(c[w]=[]),c[w][_]&&c[w][_].z&&(b.z=c[w][_].z),c[w][_]=b;else{var S=pr({c:_,r:w});c[S]&&c[S].z&&(b.z=c[S].z),c[S]=b}}}return h.s.c<1e7&&(c["!ref"]=Gr(h)),c}function Fo(e,t){return sb(null,e,t)}function E5(e){return e.read_shift(4,"i")}function Ts(e,t){return t||(t=Fe(4)),t.write_shift(4,e),t}function jn(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function dn(e,t){var r=!1;return t==null&&(r=!0,t=Fe(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function k5(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function C5(e,t){return t||(t=Fe(4)),t.write_shift(2,0),t.write_shift(2,0),t}function Z0(e,t){var r=e.l,s=e.read_shift(1),o=jn(e),c=[],d={t:o,h:o};if((s&1)!==0){for(var f=e.read_shift(4),p=0;p!=f;++p)c.push(k5(e));d.r=c}else d.r=[{ich:0,ifnt:0}];return e.l=r+t,d}function A5(e,t){var r=!1;return t==null&&(r=!0,t=Fe(15+4*e.t.length)),t.write_shift(1,0),dn(e.t,t),r?t.slice(0,t.l):t}var R5=Z0;function N5(e,t){var r=!1;return t==null&&(r=!0,t=Fe(23+4*e.t.length)),t.write_shift(1,1),dn(e.t,t),t.write_shift(4,1),C5({},t),r?t.slice(0,t.l):t}function ps(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Ti(e,t){return t==null&&(t=Fe(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function ji(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Ei(e,t){return t==null&&(t=Fe(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var D5=jn,ab=dn;function ep(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Zd(e,t){var r=!1;return t==null&&(r=!0,t=Fe(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var O5=jn,_0=ep,tp=Zd;function ib(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,s=t[0]&2;e.l+=4;var o=s===0?Jd([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):hi(t,0)>>2;return r?o/100:o}function ob(e,t){t==null&&(t=Fe(4));var r=0,s=0,o=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?s=1:o==(o|0)&&o>=-536870912&&o<1<<29&&(s=1,r=1),s)t.write_shift(-4,((r?o:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function lb(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function I5(e,t){return t||(t=Fe(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var ki=lb,Lo=I5;function Po(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function bi(e,t){return(t||Fe(8)).write_shift(8,e,"f")}function B5(e){var t={},r=e.read_shift(1),s=r>>>1,o=e.read_shift(1),c=e.read_shift(2,"i"),d=e.read_shift(1),f=e.read_shift(1),p=e.read_shift(1);switch(e.l++,s){case 0:t.auto=1;break;case 1:t.index=o;var h=$5[o];h&&(t.rgb=gy(h));break;case 2:t.rgb=gy([d,f,p]);break;case 3:t.theme=o;break}return c!=0&&(t.tint=c>0?c/32767:c/32768),t}function eu(e,t){if(t||(t=Fe(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var s=e.rgb||"FFFFFF";typeof s=="number"&&(s=("000000"+s.toString(16)).slice(-6)),t.write_shift(1,parseInt(s.slice(0,2),16)),t.write_shift(1,parseInt(s.slice(2,4),16)),t.write_shift(1,parseInt(s.slice(4,6),16)),t.write_shift(1,255)}return t}function M5(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function F5(e,t){t||(t=Fe(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var cb=2,Jn=3,Bd=11,tu=19,Md=64,L5=65,P5=71,z5=4108,U5=4126,gn=80,ay={1:{n:"CodePage",t:cb},2:{n:"Category",t:gn},3:{n:"PresentationFormat",t:gn},4:{n:"ByteCount",t:Jn},5:{n:"LineCount",t:Jn},6:{n:"ParagraphCount",t:Jn},7:{n:"SlideCount",t:Jn},8:{n:"NoteCount",t:Jn},9:{n:"HiddenCount",t:Jn},10:{n:"MultimediaClipCount",t:Jn},11:{n:"ScaleCrop",t:Bd},12:{n:"HeadingPairs",t:z5},13:{n:"TitlesOfParts",t:U5},14:{n:"Manager",t:gn},15:{n:"Company",t:gn},16:{n:"LinksUpToDate",t:Bd},17:{n:"CharacterCount",t:Jn},19:{n:"SharedDoc",t:Bd},22:{n:"HyperlinksChanged",t:Bd},23:{n:"AppVersion",t:Jn,p:"version"},24:{n:"DigSig",t:L5},26:{n:"ContentType",t:gn},27:{n:"ContentStatus",t:gn},28:{n:"Language",t:gn},29:{n:"Version",t:gn},255:{},2147483648:{n:"Locale",t:tu},2147483651:{n:"Behavior",t:tu},1919054434:{}},iy={1:{n:"CodePage",t:cb},2:{n:"Title",t:gn},3:{n:"Subject",t:gn},4:{n:"Author",t:gn},5:{n:"Keywords",t:gn},6:{n:"Comments",t:gn},7:{n:"Template",t:gn},8:{n:"LastAuthor",t:gn},9:{n:"RevNumber",t:gn},10:{n:"EditTime",t:Md},11:{n:"LastPrinted",t:Md},12:{n:"CreatedDate",t:Md},13:{n:"ModifiedDate",t:Md},14:{n:"PageCount",t:Jn},15:{n:"WordCount",t:Jn},16:{n:"CharCount",t:Jn},17:{n:"Thumbnail",t:P5},18:{n:"Application",t:gn},19:{n:"DocSecurity",t:Jn},255:{},2147483648:{n:"Locale",t:tu},2147483651:{n:"Behavior",t:tu},1919054434:{}};function W5(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var q5=W5([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),$5=$n(q5),pc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},H5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Fd={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function db(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function ub(e,t){var r=t5(H5),s=[],o;s[s.length]=Vr,s[s.length]=Ze("Types",null,{xmlns:ln.CT,"xmlns:xsd":ln.xsd,"xmlns:xsi":ln.xsi}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(p){return Ze("Default",null,{Extension:p[0],ContentType:p[1]})}));var c=function(p){e[p]&&e[p].length>0&&(o=e[p][0],s[s.length]=Ze("Override",null,{PartName:(o[0]=="/"?"":"/")+o,ContentType:Fd[p][t.bookType]||Fd[p].xlsx}))},d=function(p){(e[p]||[]).forEach(function(h){s[s.length]=Ze("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:Fd[p][t.bookType]||Fd[p].xlsx})})},f=function(p){(e[p]||[]).forEach(function(h){s[s.length]=Ze("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:r[p][0]})})};return c("workbooks"),d("sheets"),d("charts"),f("themes"),["strs","styles"].forEach(c),["coreprops","extprops","custprops"].forEach(f),f("vba"),f("comments"),f("threadedcomments"),f("drawings"),d("metadata"),f("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var rr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function fb(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function jo(e){var t=[Vr,Ze("Relationships",null,{xmlns:ln.RELS})];return vn(e["!id"]).forEach(function(r){t[t.length]=Ze("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function fr(e,t,r,s,o,c){if(o||(o={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,o.Id="rId"+t,o.Type=s,o.Target=r,[rr.HLINK,rr.XPATH,rr.XMISS].indexOf(o.Type)>-1&&(o.TargetMode="External"),e["!id"][o.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][o.Id]=o,e[("/"+o.Target).replace("//","/")]=o,t}function G5(e){var t=[Vr];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function oy(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function V5(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Y5(e){var t=[Vr];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(oy(e[r][0],e[r][1])),t.push(V5("",e[r][0]));return t.push(oy("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function hb(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Gd.version+"</meta:generator></office:meta></office:document-meta>"}var gi=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Yh(e,t,r,s,o){o[e]!=null||t==null||t===""||(o[e]=t,t=hr(t),s[s.length]=r?Ze(e,t,r):mn(e,t))}function pb(e,t){var r=t||{},s=[Vr,Ze("cp:coreProperties",null,{"xmlns:cp":ln.CORE_PROPS,"xmlns:dc":ln.dc,"xmlns:dcterms":ln.dcterms,"xmlns:dcmitype":ln.dcmitype,"xmlns:xsi":ln.xsi})],o={};if(!e&&!r.Props)return s.join("");e&&(e.CreatedDate!=null&&Yh("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:b0(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},s,o),e.ModifiedDate!=null&&Yh("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:b0(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},s,o));for(var c=0;c!=gi.length;++c){var d=gi[c],f=r.Props&&r.Props[d[1]]!=null?r.Props[d[1]]:e?e[d[1]]:null;f===!0?f="1":f===!1?f="0":typeof f=="number"&&(f=String(f)),f!=null&&Yh(d[0],f,null,s,o)}return s.length>2&&(s[s.length]="</cp:coreProperties>",s[1]=s[1].replace("/>",">")),s.join("")}var Eo=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],gb=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function xb(e){var t=[],r=Ze;return e||(e={}),e.Application="SheetJS",t[t.length]=Vr,t[t.length]=Ze("Properties",null,{xmlns:ln.EXT_PROPS,"xmlns:vt":ln.vt}),Eo.forEach(function(s){if(e[s[1]]!==void 0){var o;switch(s[2]){case"string":o=hr(String(e[s[1]]));break;case"bool":o=e[s[1]]?"true":"false";break}o!==void 0&&(t[t.length]=r(s[0],o))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(s){return"<vt:lpstr>"+hr(s)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function mb(e){var t=[Vr,Ze("Properties",null,{xmlns:ln.CUST_PROPS,"xmlns:vt":ln.vt})];if(!e)return t.join("");var r=1;return vn(e).forEach(function(o){++r,t[t.length]=Ze("property",f5(e[o]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:hr(o)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ly={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function K5(e,t){var r=[];return vn(ly).map(function(s){for(var o=0;o<gi.length;++o)if(gi[o][1]==s)return gi[o];for(o=0;o<Eo.length;++o)if(Eo[o][1]==s)return Eo[o];throw s}).forEach(function(s){if(e[s[1]]!=null){var o=t&&t.Props&&t.Props[s[1]]!=null?t.Props[s[1]]:e[s[1]];switch(s[2]){case"date":o=new Date(o).toISOString().replace(/\.\d*Z/,"Z");break}typeof o=="number"?o=String(o):o===!0||o===!1?o=o?"1":"0":o instanceof Date&&(o=new Date(o).toISOString().replace(/\.\d*Z/,"")),r.push(mn(ly[s[1]]||s[1],o))}}),Ze("DocumentProperties",r.join(""),{xmlns:es.o})}function X5(e,t){var r=["Worksheets","SheetNames"],s="CustomDocumentProperties",o=[];return e&&vn(e).forEach(function(c){if(Object.prototype.hasOwnProperty.call(e,c)){for(var d=0;d<gi.length;++d)if(c==gi[d][1])return;for(d=0;d<Eo.length;++d)if(c==Eo[d][1])return;for(d=0;d<r.length;++d)if(c==r[d])return;var f=e[c],p="string";typeof f=="number"?(p="float",f=String(f)):f===!0||f===!1?(p="boolean",f=f?"1":"0"):f=String(f),o.push(Ze(K1(c),f,{"dt:dt":p}))}}),t&&vn(t).forEach(function(c){if(Object.prototype.hasOwnProperty.call(t,c)&&!(e&&Object.prototype.hasOwnProperty.call(e,c))){var d=t[c],f="string";typeof d=="number"?(f="float",d=String(d)):d===!0||d===!1?(f="boolean",d=d?"1":"0"):d instanceof Date?(f="dateTime.tz",d=d.toISOString()):d=String(d),o.push(Ze(K1(c),d,{"dt:dt":f}))}}),"<"+s+' xmlns="'+es.o+'">'+o.join("")+"</"+s+">"}function Q5(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,s=r%Math.pow(2,32),o=(r-s)/Math.pow(2,32);s*=1e7,o*=1e7;var c=s/Math.pow(2,32)|0;c>0&&(s=s%Math.pow(2,32),o+=c);var d=Fe(8);return d.write_shift(4,s),d.write_shift(4,o),d}function cy(e,t){var r=Fe(4),s=Fe(4);switch(r.write_shift(4,e==80?31:e),e){case 3:s.write_shift(-4,t);break;case 5:s=Fe(8),s.write_shift(8,t,"f");break;case 11:s.write_shift(4,t?1:0);break;case 64:s=Q5(t);break;case 31:case 80:for(s=Fe(4+2*(t.length+1)+(t.length%2?0:2)),s.write_shift(4,t.length+1),s.write_shift(0,t,"dbcs");s.l!=s.length;)s.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return xn([r,s])}var yb=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function J5(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function dy(e,t,r){var s=Fe(8),o=[],c=[],d=8,f=0,p=Fe(8),h=Fe(8);if(p.write_shift(4,2),p.write_shift(4,1200),h.write_shift(4,1),c.push(p),o.push(h),d+=8+p.length,!t){h=Fe(8),h.write_shift(4,0),o.unshift(h);var x=[Fe(4)];for(x[0].write_shift(4,e.length),f=0;f<e.length;++f){var v=e[f][0];for(p=Fe(8+2*(v.length+1)+(v.length%2?0:2)),p.write_shift(4,f+2),p.write_shift(4,v.length+1),p.write_shift(0,v,"dbcs");p.l!=p.length;)p.write_shift(1,0);x.push(p)}p=xn(x),c.unshift(p),d+=8+p.length}for(f=0;f<e.length;++f)if(!(t&&!t[e[f][0]])&&!(yb.indexOf(e[f][0])>-1||gb.indexOf(e[f][0])>-1)&&e[f][1]!=null){var y=e[f][1],b=0;if(t){b=+t[e[f][0]];var w=r[b];if(w.p=="version"&&typeof y=="string"){var _=y.split(".");y=(+_[0]<<16)+(+_[1]||0)}p=cy(w.t,y)}else{var S=J5(y);S==-1&&(S=31,y=String(y)),p=cy(S,y)}c.push(p),h=Fe(8),h.write_shift(4,t?b:2+f),o.push(h),d+=8+p.length}var A=8*(c.length+1);for(f=0;f<c.length;++f)o[f].write_shift(4,A),A+=c[f].length;return s.write_shift(4,d),s.write_shift(4,c.length),xn([s].concat(o).concat(c))}function uy(e,t,r,s,o,c){var d=Fe(o?68:48),f=[d];d.write_shift(2,65534),d.write_shift(2,0),d.write_shift(4,842412599),d.write_shift(16,br.utils.consts.HEADER_CLSID,"hex"),d.write_shift(4,o?2:1),d.write_shift(16,t,"hex"),d.write_shift(4,o?68:48);var p=dy(e,r,s);if(f.push(p),o){var h=dy(o,null,null);d.write_shift(16,c,"hex"),d.write_shift(4,68+p.length),f.push(h)}return xn(f)}function Z5(e,t){t||(t=Fe(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function eA(e,t){return e.read_shift(t)===1}function On(e,t){return t||(t=Fe(2)),t.write_shift(2,+!!e),t}function vb(e){return e.read_shift(2,"u")}function us(e,t){return t||(t=Fe(2)),t.write_shift(2,e),t}function bb(e,t,r){return r||(r=Fe(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function _b(e,t,r){var s=e.read_shift(r&&r.biff>=12?2:1),o="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var c=e.read_shift(1);c&&(o="dbcs-cont")}else r.biff==12&&(o="wstr");r.biff>=2&&r.biff<=5&&(o="cpstr");var d=s?e.read_shift(s,o):"";return d}function tA(e){var t=e.t||"",r=Fe(3);r.write_shift(2,t.length),r.write_shift(1,1);var s=Fe(2*t.length);s.write_shift(2*t.length,t,"utf16le");var o=[r,s];return xn(o)}function rA(e,t,r){var s;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var o=e.read_shift(1);return o===0?s=e.read_shift(t,"sbcs-cont"):s=e.read_shift(t,"dbcs-cont"),s}function nA(e,t,r){var s=e.read_shift(r&&r.biff==2?1:2);return s===0?(e.l++,""):rA(e,s,r)}function sA(e,t,r){if(r.biff>5)return nA(e,t,r);var s=e.read_shift(1);return s===0?(e.l++,""):e.read_shift(s,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Sb(e,t,r){return r||(r=Fe(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function fy(e,t){t||(t=Fe(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function aA(e){var t=Fe(512),r=0,s=e.Target;s.slice(0,7)=="file://"&&(s=s.slice(7));var o=s.indexOf("#"),c=o>-1?31:23;switch(s.charAt(0)){case"#":c=28;break;case".":c&=-3;break}t.write_shift(4,2),t.write_shift(4,c);var d=[8,6815827,6619237,4849780,83];for(r=0;r<d.length;++r)t.write_shift(4,d[r]);if(c==28)s=s.slice(1),fy(s,t);else if(c&2){for(d="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<d.length;++r)t.write_shift(1,parseInt(d[r],16));var f=o>-1?s.slice(0,o):s;for(t.write_shift(4,2*(f.length+1)),r=0;r<f.length;++r)t.write_shift(2,f.charCodeAt(r));t.write_shift(2,0),c&8&&fy(o>-1?s.slice(o+1):"",t)}else{for(d="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<d.length;++r)t.write_shift(1,parseInt(d[r],16));for(var p=0;s.slice(p*3,p*3+3)=="../"||s.slice(p*3,p*3+3)=="..\\";)++p;for(t.write_shift(2,p),t.write_shift(4,s.length-3*p+1),r=0;r<s.length-3*p;++r)t.write_shift(1,s.charCodeAt(r+3*p)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function _i(e,t,r,s){return s||(s=Fe(6)),s.write_shift(2,e),s.write_shift(2,t),s.write_shift(2,r||0),s}function iA(e,t,r){var s=r.biff>8?4:2,o=e.read_shift(s),c=e.read_shift(s,"i"),d=e.read_shift(s,"i");return[o,c,d]}function oA(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2);return{s:{c:s,r:t},e:{c:o,r}}}function wb(e,t){return t||(t=Fe(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function rp(e,t,r){var s=1536,o=16;switch(r.bookType){case"biff8":break;case"biff5":s=1280,o=8;break;case"biff4":s=4,o=6;break;case"biff3":s=3,o=6;break;case"biff2":s=2,o=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var c=Fe(o);return c.write_shift(2,s),c.write_shift(2,t),o>4&&c.write_shift(2,29282),o>6&&c.write_shift(2,1997),o>8&&(c.write_shift(2,49161),c.write_shift(2,1),c.write_shift(2,1798),c.write_shift(2,0)),c}function lA(e,t){var r=!t||t.biff==8,s=Fe(r?112:54);for(s.write_shift(t.biff==8?2:1,7),r&&s.write_shift(1,0),s.write_shift(4,859007059),s.write_shift(4,5458548|(r?0:536870912));s.l<s.length;)s.write_shift(1,r?0:32);return s}function cA(e,t){var r=!t||t.biff>=8?2:1,s=Fe(8+r*e.name.length);s.write_shift(4,e.pos),s.write_shift(1,e.hs||0),s.write_shift(1,e.dt),s.write_shift(1,e.name.length),t.biff>=8&&s.write_shift(1,1),s.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var o=s.slice(0,s.l);return o.l=s.l,o}function dA(e,t){var r=Fe(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var s=[],o=0;o<e.length;++o)s[o]=tA(e[o]);var c=xn([r].concat(s));return c.parts=[r.length].concat(s.map(function(d){return d.length})),c}function uA(){var e=Fe(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function fA(e){var t=Fe(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function hA(e,t){var r=e.name||"Arial",s=t&&t.biff==5,o=s?15+r.length:16+2*r.length,c=Fe(o);return c.write_shift(2,e.sz*20),c.write_shift(4,0),c.write_shift(2,400),c.write_shift(4,0),c.write_shift(2,0),c.write_shift(1,r.length),s||c.write_shift(1,1),c.write_shift((s?1:2)*r.length,r,s?"sbcs":"utf16le"),c}function pA(e,t,r,s){var o=Fe(10);return _i(e,t,s,o),o.write_shift(4,r),o}function gA(e,t,r,s,o){var c=!o||o.biff==8,d=Fe(8+ +c+(1+c)*r.length);return _i(e,t,s,d),d.write_shift(2,r.length),c&&d.write_shift(1,1),d.write_shift((1+c)*r.length,r,c?"utf16le":"sbcs"),d}function xA(e,t,r,s){var o=r&&r.biff==5;s||(s=Fe(o?3+t.length:5+2*t.length)),s.write_shift(2,e),s.write_shift(o?1:2,t.length),o||s.write_shift(1,1),s.write_shift((o?1:2)*t.length,t,o?"sbcs":"utf16le");var c=s.length>s.l?s.slice(0,s.l):s;return c.l==null&&(c.l=c.length),c}function mA(e,t){var r=t.biff==8||!t.biff?4:2,s=Fe(2*r+6);return s.write_shift(r,e.s.r),s.write_shift(r,e.e.r+1),s.write_shift(2,e.s.c),s.write_shift(2,e.e.c+1),s.write_shift(2,0),s}function hy(e,t,r,s){var o=r&&r.biff==5;s||(s=Fe(o?16:20)),s.write_shift(2,0),e.style?(s.write_shift(2,e.numFmtId||0),s.write_shift(2,65524)):(s.write_shift(2,e.numFmtId||0),s.write_shift(2,t<<4));var c=0;return e.numFmtId>0&&o&&(c|=1024),s.write_shift(4,c),s.write_shift(4,0),o||s.write_shift(4,0),s.write_shift(2,0),s}function yA(e){var t=Fe(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function vA(e,t,r,s,o,c){var d=Fe(8);return _i(e,t,s,d),bb(r,c,d),d}function bA(e,t,r,s){var o=Fe(14);return _i(e,t,s,o),bi(r,o),o}function _A(e,t,r){if(r.biff<8)return SA(e,t,r);for(var s=[],o=e.l+t,c=e.read_shift(r.biff>8?4:2);c--!==0;)s.push(iA(e,r.biff>8?12:6,r));if(e.l!=o)throw new Error("Bad ExternSheet: "+e.l+" != "+o);return s}function SA(e,t,r){e[e.l+1]==3&&e[e.l]++;var s=_b(e,t,r);return s.charCodeAt(0)==3?s.slice(1):s}function wA(e){var t=Fe(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)wb(e[r],t);return t}function TA(e){var t=Fe(24),r=cn(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var s="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),o=0;o<16;++o)t.write_shift(1,parseInt(s[o],16));return xn([t,aA(e[1])])}function jA(e){var t=e[1].Tooltip,r=Fe(10+2*(t.length+1));r.write_shift(2,2048);var s=cn(e[0]);r.write_shift(2,s.r),r.write_shift(2,s.r),r.write_shift(2,s.c),r.write_shift(2,s.c);for(var o=0;o<t.length;++o)r.write_shift(2,t.charCodeAt(o));return r.write_shift(2,0),r}function EA(e){return e||(e=Fe(4)),e.write_shift(2,1),e.write_shift(2,1),e}function kA(e,t,r){if(!r.cellStyles)return Fs(e,t);var s=r&&r.biff>=12?4:2,o=e.read_shift(s),c=e.read_shift(s),d=e.read_shift(s),f=e.read_shift(s),p=e.read_shift(2);s==2&&(e.l+=2);var h={s:o,e:c,w:d,ixfe:f,flags:p};return(r.biff>=5||!r.biff)&&(h.level=p>>8&7),h}function CA(e,t){var r=Fe(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var s=0;return e.hidden&&(s|=1),r.write_shift(1,s),s=e.level||0,r.write_shift(1,s),r.write_shift(2,0),r}function AA(e){for(var t=Fe(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function RA(e,t,r){var s=Fe(15);return xc(s,e,t),s.write_shift(8,r,"f"),s}function NA(e,t,r){var s=Fe(9);return xc(s,e,t),s.write_shift(2,r),s}var DA=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=H0({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(f,p){var h=[],x=vi(1);switch(p.type){case"base64":x=Ss(la(f));break;case"binary":x=Ss(f);break;case"buffer":case"array":x=f;break}Zn(x,0);var v=x.read_shift(1),y=!!(v&136),b=!1,w=!1;switch(v){case 2:break;case 3:break;case 48:b=!0,y=!0;break;case 49:b=!0,y=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+v.toString(16))}var _=0,S=521;v==2&&(_=x.read_shift(2)),x.l+=3,v!=2&&(_=x.read_shift(4)),_>1048576&&(_=1e6),v!=2&&(S=x.read_shift(2));var A=x.read_shift(2),k=p.codepage||1252;v!=2&&(x.l+=16,x.read_shift(1),x[x.l]!==0&&(k=e[x[x.l]]),x.l+=1,x.l+=2),w&&(x.l+=36);for(var O=[],L={},K=Math.min(x.length,v==2?521:S-10-(b?264:0)),ne=w?32:11;x.l<K&&x[x.l]!=13;)switch(L={},L.name=Vd.utils.decode(k,x.slice(x.l,x.l+ne)).replace(/[\u0000\r\n].*$/g,""),x.l+=ne,L.type=String.fromCharCode(x.read_shift(1)),v!=2&&!w&&(L.offset=x.read_shift(4)),L.len=x.read_shift(1),v==2&&(L.offset=x.read_shift(2)),L.dec=x.read_shift(1),L.name.length&&O.push(L),v!=2&&(x.l+=w?13:14),L.type){case"B":(!b||L.len!=8)&&p.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"G":case"P":p.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+L.type)}if(x[x.l]!==13&&(x.l=S-1),x.read_shift(1)!==13)throw new Error("DBF Terminator not found "+x.l+" "+x[x.l]);x.l=S;var M=0,re=0;for(h[0]=[],re=0;re!=O.length;++re)h[0][re]=O[re].name;for(;_-- >0;){if(x[x.l]===42){x.l+=A;continue}for(++x.l,h[++M]=[],re=0,re=0;re!=O.length;++re){var ee=x.slice(x.l,x.l+O[re].len);x.l+=O[re].len,Zn(ee,0);var de=Vd.utils.decode(k,ee);switch(O[re].type){case"C":de.trim().length&&(h[M][re]=de.replace(/\s+$/,""));break;case"D":de.length===8?h[M][re]=new Date(+de.slice(0,4),+de.slice(4,6)-1,+de.slice(6,8)):h[M][re]=de;break;case"F":h[M][re]=parseFloat(de.trim());break;case"+":case"I":h[M][re]=w?ee.read_shift(-4,"i")^2147483648:ee.read_shift(4,"i");break;case"L":switch(de.trim().toUpperCase()){case"Y":case"T":h[M][re]=!0;break;case"N":case"F":h[M][re]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+de+"|")}break;case"M":if(!y)throw new Error("DBF Unexpected MEMO for type "+v.toString(16));h[M][re]="##MEMO##"+(w?parseInt(de.trim(),10):ee.read_shift(4));break;case"N":de=de.replace(/\u0000/g,"").trim(),de&&de!="."&&(h[M][re]=+de||0);break;case"@":h[M][re]=new Date(ee.read_shift(-8,"f")-621356832e5);break;case"T":h[M][re]=new Date((ee.read_shift(4)-2440588)*864e5+ee.read_shift(4));break;case"Y":h[M][re]=ee.read_shift(4,"i")/1e4+ee.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":h[M][re]=-ee.read_shift(-8,"f");break;case"B":if(b&&O[re].len==8){h[M][re]=ee.read_shift(8,"f");break}case"G":case"P":ee.l+=O[re].len;break;case"0":if(O[re].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+O[re].type)}}}if(v!=2&&x.l<x.length&&x[x.l++]!=26)throw new Error("DBF EOF Marker missing "+(x.l-1)+" of "+x.length+" "+x[x.l-1].toString(16));return p&&p.sheetRows&&(h=h.slice(0,p.sheetRows)),p.DBF=O,h}function s(f,p){var h=p||{};h.dateNF||(h.dateNF="yyyymmdd");var x=Fo(r(f,h),h);return x["!cols"]=h.DBF.map(function(v){return{wch:v.len,DBF:v}}),delete h.DBF,x}function o(f,p){try{return wi(s(f,p),p)}catch(h){if(p&&p.WTF)throw h}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function d(f,p){var h=p||{};if(+h.codepage>=0&&ec(+h.codepage),h.type=="string")throw new Error("Cannot write DBF to JS string");var x=Wn(),v=iu(f,{header:1,raw:!0,cellDates:!0}),y=v[0],b=v.slice(1),w=f["!cols"]||[],_=0,S=0,A=0,k=1;for(_=0;_<y.length;++_){if(((w[_]||{}).DBF||{}).name){y[_]=w[_].DBF.name,++A;continue}if(y[_]!=null){if(++A,typeof y[_]=="number"&&(y[_]=y[_].toString(10)),typeof y[_]!="string")throw new Error("DBF Invalid column name "+y[_]+" |"+typeof y[_]+"|");if(y.indexOf(y[_])!==_){for(S=0;S<1024;++S)if(y.indexOf(y[_]+"_"+S)==-1){y[_]+="_"+S;break}}}}var O=kr(f["!ref"]),L=[],K=[],ne=[];for(_=0;_<=O.e.c-O.s.c;++_){var M="",re="",ee=0,de=[];for(S=0;S<b.length;++S)b[S][_]!=null&&de.push(b[S][_]);if(de.length==0||y[_]==null){L[_]="?";continue}for(S=0;S<de.length;++S){switch(typeof de[S]){case"number":re="B";break;case"string":re="C";break;case"boolean":re="L";break;case"object":re=de[S]instanceof Date?"D":"C";break;default:re="C"}ee=Math.max(ee,String(de[S]).length),M=M&&M!=re?"C":re}ee>250&&(ee=250),re=((w[_]||{}).DBF||{}).type,re=="C"&&w[_].DBF.len>ee&&(ee=w[_].DBF.len),M=="B"&&re=="N"&&(M="N",ne[_]=w[_].DBF.dec,ee=w[_].DBF.len),K[_]=M=="C"||re=="N"?ee:c[M]||0,k+=K[_],L[_]=M}var oe=x.next(32);for(oe.write_shift(4,318902576),oe.write_shift(4,b.length),oe.write_shift(2,296+32*A),oe.write_shift(2,k),_=0;_<4;++_)oe.write_shift(4,0);for(oe.write_shift(4,0|(+t[jv]||3)<<8),_=0,S=0;_<y.length;++_)if(y[_]!=null){var Q=x.next(32),te=(y[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);Q.write_shift(1,te,"sbcs"),Q.write_shift(1,L[_]=="?"?"C":L[_],"sbcs"),Q.write_shift(4,S),Q.write_shift(1,K[_]||c[L[_]]||0),Q.write_shift(1,ne[_]||0),Q.write_shift(1,2),Q.write_shift(4,0),Q.write_shift(1,0),Q.write_shift(4,0),Q.write_shift(4,0),S+=K[_]||c[L[_]]||0}var ae=x.next(264);for(ae.write_shift(4,13),_=0;_<65;++_)ae.write_shift(4,0);for(_=0;_<b.length;++_){var X=x.next(k);for(X.write_shift(1,0),S=0;S<y.length;++S)if(y[S]!=null)switch(L[S]){case"L":X.write_shift(1,b[_][S]==null?63:b[_][S]?84:70);break;case"B":X.write_shift(8,b[_][S]||0,"f");break;case"N":var J="0";for(typeof b[_][S]=="number"&&(J=b[_][S].toFixed(ne[S]||0)),A=0;A<K[S]-J.length;++A)X.write_shift(1,32);X.write_shift(1,J,"sbcs");break;case"D":b[_][S]?(X.write_shift(4,("0000"+b[_][S].getFullYear()).slice(-4),"sbcs"),X.write_shift(2,("00"+(b[_][S].getMonth()+1)).slice(-2),"sbcs"),X.write_shift(2,("00"+b[_][S].getDate()).slice(-2),"sbcs")):X.write_shift(8,"00000000","sbcs");break;case"C":var fe=String(b[_][S]!=null?b[_][S]:"").slice(0,K[S]);for(X.write_shift(1,fe,"sbcs"),A=0;A<K[S]-fe.length;++A)X.write_shift(1,32);break}}return x.next(1).write_shift(1,26),x.end()}return{to_workbook:o,to_sheet:s,from_sheet:d}})(),OA=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+vn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(y,b){var w=e[b];return typeof w=="number"?F1(w):w},s=function(y,b,w){var _=b.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return _==59?y:F1(_)};e["|"]=254;function o(y,b){switch(b.type){case"base64":return c(la(y),b);case"binary":return c(y,b);case"buffer":return c(sr&&Buffer.isBuffer(y)?y.toString("binary"):uc(y),b);case"array":return c(yu(y),b)}throw new Error("Unrecognized type "+b.type)}function c(y,b){var w=y.split(/[\n\r]+/),_=-1,S=-1,A=0,k=0,O=[],L=[],K=null,ne={},M=[],re=[],ee=[],de=0,oe;for(+b.codepage>=0&&ec(+b.codepage);A!==w.length;++A){de=0;var Q=w[A].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(t,r),te=Q.replace(/;;/g,"\0").split(";").map(function(V){return V.replace(/\u0000/g,";")}),ae=te[0],X;if(Q.length>0)switch(ae){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":te[1].charAt(0)=="P"&&L.push(Q.slice(3).replace(/;;/g,";"));break;case"C":var J=!1,fe=!1,se=!1,Ne=!1,D=-1,U=-1;for(k=1;k<te.length;++k)switch(te[k].charAt(0)){case"A":break;case"X":S=parseInt(te[k].slice(1))-1,fe=!0;break;case"Y":for(_=parseInt(te[k].slice(1))-1,fe||(S=0),oe=O.length;oe<=_;++oe)O[oe]=[];break;case"K":X=te[k].slice(1),X.charAt(0)==='"'?X=X.slice(1,X.length-1):X==="TRUE"?X=!0:X==="FALSE"?X=!1:isNaN(aa(X))?isNaN(rc(X).getDate())||(X=In(X)):(X=aa(X),K!==null&&Fv(K)&&(X=Uv(X))),J=!0;break;case"E":Ne=!0;var E=NR(te[k].slice(1),{r:_,c:S});O[_][S]=[O[_][S],E];break;case"S":se=!0,O[_][S]=[O[_][S],"S5S"];break;case"G":break;case"R":D=parseInt(te[k].slice(1))-1;break;case"C":U=parseInt(te[k].slice(1))-1;break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+Q)}if(J&&(O[_][S]&&O[_][S].length==2?O[_][S][0]=X:O[_][S]=X,K=null),se){if(Ne)throw new Error("SYLK shared formula cannot have own formula");var P=D>-1&&O[D][U];if(!P||!P[1])throw new Error("SYLK shared formula cannot find base");O[_][S][1]=DR(P[1],{r:_-D,c:S-U})}break;case"F":var W=0;for(k=1;k<te.length;++k)switch(te[k].charAt(0)){case"X":S=parseInt(te[k].slice(1))-1,++W;break;case"Y":for(_=parseInt(te[k].slice(1))-1,oe=O.length;oe<=_;++oe)O[oe]=[];break;case"M":de=parseInt(te[k].slice(1))/20;break;case"F":break;case"G":break;case"P":K=L[parseInt(te[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(ee=te[k].slice(1).split(" "),oe=parseInt(ee[0],10);oe<=parseInt(ee[1],10);++oe)de=parseInt(ee[2],10),re[oe-1]=de===0?{hidden:!0}:{wch:de},np(re[oe-1]);break;case"C":S=parseInt(te[k].slice(1))-1,re[S]||(re[S]={});break;case"R":_=parseInt(te[k].slice(1))-1,M[_]||(M[_]={}),de>0?(M[_].hpt=de,M[_].hpx=Cb(de)):de===0&&(M[_].hidden=!0);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+Q)}W<1&&(K=null);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+Q)}}return M.length>0&&(ne["!rows"]=M),re.length>0&&(ne["!cols"]=re),b&&b.sheetRows&&(O=O.slice(0,b.sheetRows)),[O,ne]}function d(y,b){var w=o(y,b),_=w[0],S=w[1],A=Fo(_,b);return vn(S).forEach(function(k){A[k]=S[k]}),A}function f(y,b){return wi(d(y,b),b)}function p(y,b,w,_){var S="C;Y"+(w+1)+";X"+(_+1)+";K";switch(y.t){case"n":S+=y.v||0,y.f&&!y.F&&(S+=";E"+ap(y.f,{r:w,c:_}));break;case"b":S+=y.v?"TRUE":"FALSE";break;case"e":S+=y.w||y.v;break;case"d":S+='"'+(y.w||y.v)+'"';break;case"s":S+='"'+y.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return S}function h(y,b){b.forEach(function(w,_){var S="F;W"+(_+1)+" "+(_+1)+" ";w.hidden?S+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=ru(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=nu(w.wpx)),typeof w.wch=="number"&&(S+=Math.round(w.wch))),S.charAt(S.length-1)!=" "&&y.push(S)})}function x(y,b){b.forEach(function(w,_){var S="F;";w.hidden?S+="M0;":w.hpt?S+="M"+20*w.hpt+";":w.hpx&&(S+="M"+20*su(w.hpx)+";"),S.length>2&&y.push(S+"R"+(_+1))})}function v(y,b){var w=["ID;PWXL;N;E"],_=[],S=kr(y["!ref"]),A,k=Array.isArray(y),O=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),y["!cols"]&&h(w,y["!cols"]),y["!rows"]&&x(w,y["!rows"]),w.push("B;Y"+(S.e.r-S.s.r+1)+";X"+(S.e.c-S.s.c+1)+";D"+[S.s.c,S.s.r,S.e.c,S.e.r].join(" "));for(var L=S.s.r;L<=S.e.r;++L)for(var K=S.s.c;K<=S.e.c;++K){var ne=pr({r:L,c:K});A=k?(y[L]||[])[K]:y[ne],!(!A||A.v==null&&(!A.f||A.F))&&_.push(p(A,y,L,K))}return w.join(O)+O+_.join(O)+O+"E"+O}return{to_workbook:f,to_sheet:d,from_sheet:v}})(),IA=(function(){function e(c,d){switch(d.type){case"base64":return t(la(c),d);case"binary":return t(c,d);case"buffer":return t(sr&&Buffer.isBuffer(c)?c.toString("binary"):uc(c),d);case"array":return t(yu(c),d)}throw new Error("Unrecognized type "+d.type)}function t(c,d){for(var f=c.split(`
`),p=-1,h=-1,x=0,v=[];x!==f.length;++x){if(f[x].trim()==="BOT"){v[++p]=[],h=0;continue}if(!(p<0)){var y=f[x].trim().split(","),b=y[0],w=y[1];++x;for(var _=f[x]||"";(_.match(/["]/g)||[]).length&1&&x<f.length-1;)_+=`
`+f[++x];switch(_=_.trim(),+b){case-1:if(_==="BOT"){v[++p]=[],h=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?v[p][h]=!0:_==="FALSE"?v[p][h]=!1:isNaN(aa(w))?isNaN(rc(w).getDate())?v[p][h]=w:v[p][h]=In(w):v[p][h]=aa(w),++h;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),v[p][h++]=_!==""?_:null;break}if(_==="EOD")break}}return d&&d.sheetRows&&(v=v.slice(0,d.sheetRows)),v}function r(c,d){return Fo(e(c,d),d)}function s(c,d){return wi(r(c,d),d)}var o=(function(){var c=function(p,h,x,v,y){p.push(h),p.push(x+","+v),p.push('"'+y.replace(/"/g,'""')+'"')},d=function(p,h,x,v){p.push(h+","+x),p.push(h==1?'"'+v.replace(/"/g,'""')+'"':v)};return function(p){var h=[],x=kr(p["!ref"]),v,y=Array.isArray(p);c(h,"TABLE",0,1,"sheetjs"),c(h,"VECTORS",0,x.e.r-x.s.r+1,""),c(h,"TUPLES",0,x.e.c-x.s.c+1,""),c(h,"DATA",0,0,"");for(var b=x.s.r;b<=x.e.r;++b){d(h,-1,0,"BOT");for(var w=x.s.c;w<=x.e.c;++w){var _=pr({r:b,c:w});if(v=y?(p[b]||[])[w]:p[_],!v){d(h,1,0,"");continue}switch(v.t){case"n":var S=v.w;!S&&v.v!=null&&(S=v.v),S==null?v.f&&!v.F?d(h,1,0,"="+v.f):d(h,1,0,""):d(h,0,S,"V");break;case"b":d(h,0,v.v?1:0,v.v?"TRUE":"FALSE");break;case"s":d(h,1,0,isNaN(v.v)?v.v:'="'+v.v+'"');break;case"d":v.w||(v.w=Wa(v.z||Pr[14],qn(In(v.v)))),d(h,0,v.w,"V");break;default:d(h,1,0,"")}}}d(h,-1,0,"EOD");var A=`\r
`,k=h.join(A);return k}})();return{to_workbook:s,to_sheet:r,from_sheet:o}})(),Tb=(function(){function e(v){return v.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(v){return v.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(v,y){for(var b=v.split(`
`),w=-1,_=-1,S=0,A=[];S!==b.length;++S){var k=b[S].trim().split(":");if(k[0]==="cell"){var O=cn(k[1]);if(A.length<=O.r)for(w=A.length;w<=O.r;++w)A[w]||(A[w]=[]);switch(w=O.r,_=O.c,k[2]){case"t":A[w][_]=e(k[3]);break;case"v":A[w][_]=+k[3];break;case"vtf":var L=k[k.length-1];case"vtc":switch(k[3]){case"nl":A[w][_]=!!+k[4];break;default:A[w][_]=+k[4];break}k[2]=="vtf"&&(A[w][_]=[A[w][_],L])}}}return y&&y.sheetRows&&(A=A.slice(0,y.sheetRows)),A}function s(v,y){return Fo(r(v,y),y)}function o(v,y){return wi(s(v,y),y)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),d=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,f=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),p="--SocialCalcSpreadsheetControlSave--";function h(v){if(!v||!v["!ref"])return"";for(var y=[],b=[],w,_="",S=rs(v["!ref"]),A=Array.isArray(v),k=S.s.r;k<=S.e.r;++k)for(var O=S.s.c;O<=S.e.c;++O)if(_=pr({r:k,c:O}),w=A?(v[k]||[])[O]:v[_],!(!w||w.v==null||w.t==="z")){switch(b=["cell",_,"t"],w.t){case"s":case"str":b.push(t(w.v));break;case"n":w.f?(b[2]="vtf",b[3]="n",b[4]=w.v,b[5]=t(w.f)):(b[2]="v",b[3]=w.v);break;case"b":b[2]="vt"+(w.f?"f":"c"),b[3]="nl",b[4]=w.v?"1":"0",b[5]=t(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var L=qn(In(w.v));b[2]="vtc",b[3]="nd",b[4]=""+L,b[5]=w.w||Wa(w.z||Pr[14],L);break;case"e":continue}y.push(b.join(":"))}return y.push("sheet:c:"+(S.e.c-S.s.c+1)+":r:"+(S.e.r-S.s.r+1)+":tvf:1"),y.push("valueformat:1:text-wiki"),y.join(`
`)}function x(v){return[c,d,f,d,h(v),p].join(`
`)}return{to_workbook:o,to_sheet:s,from_sheet:x}})(),BA=(function(){function e(x,v,y,b,w){w.raw?v[y][b]=x:x===""||(x==="TRUE"?v[y][b]=!0:x==="FALSE"?v[y][b]=!1:isNaN(aa(x))?isNaN(rc(x).getDate())?v[y][b]=x:v[y][b]=In(x):v[y][b]=aa(x))}function t(x,v){var y=v||{},b=[];if(!x||x.length===0)return b;for(var w=x.split(/[\r\n]/),_=w.length-1;_>=0&&w[_].length===0;)--_;for(var S=10,A=0,k=0;k<=_;++k)A=w[k].indexOf(" "),A==-1?A=w[k].length:A++,S=Math.max(S,A);for(k=0;k<=_;++k){b[k]=[];var O=0;for(e(w[k].slice(0,S).trim(),b,k,O,y),O=1;O<=(w[k].length-S)/10+1;++O)e(w[k].slice(S+(O-1)*10,S+O*10).trim(),b,k,O,y)}return y.sheetRows&&(b=b.slice(0,y.sheetRows)),b}var r={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function o(x){for(var v={},y=!1,b=0,w=0;b<x.length;++b)(w=x.charCodeAt(b))==34?y=!y:!y&&w in r&&(v[w]=(v[w]||0)+1);w=[];for(b in v)Object.prototype.hasOwnProperty.call(v,b)&&w.push([v[b],b]);if(!w.length){v=s;for(b in v)Object.prototype.hasOwnProperty.call(v,b)&&w.push([v[b],b])}return w.sort(function(_,S){return _[0]-S[0]||s[_[1]]-s[S[1]]}),r[w.pop()[1]]||44}function c(x,v){var y=v||{},b="",w=y.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};x.slice(0,4)=="sep="?x.charCodeAt(5)==13&&x.charCodeAt(6)==10?(b=x.charAt(4),x=x.slice(7)):x.charCodeAt(5)==13||x.charCodeAt(5)==10?(b=x.charAt(4),x=x.slice(6)):b=o(x.slice(0,1024)):y&&y.FS?b=y.FS:b=o(x.slice(0,1024));var S=0,A=0,k=0,O=0,L=0,K=b.charCodeAt(0),ne=!1,M=0,re=x.charCodeAt(0);x=x.replace(/\r\n/mg,`
`);var ee=y.dateNF!=null?Q6(y.dateNF):null;function de(){var oe=x.slice(O,L),Q={};if(oe.charAt(0)=='"'&&oe.charAt(oe.length-1)=='"'&&(oe=oe.slice(1,-1).replace(/""/g,'"')),oe.length===0)Q.t="z";else if(y.raw)Q.t="s",Q.v=oe;else if(oe.trim().length===0)Q.t="s",Q.v=oe;else if(oe.charCodeAt(0)==61)oe.charCodeAt(1)==34&&oe.charCodeAt(oe.length-1)==34?(Q.t="s",Q.v=oe.slice(2,-1).replace(/""/g,'"')):OR(oe)?(Q.t="n",Q.f=oe.slice(1)):(Q.t="s",Q.v=oe);else if(oe=="TRUE")Q.t="b",Q.v=!0;else if(oe=="FALSE")Q.t="b",Q.v=!1;else if(!isNaN(k=aa(oe)))Q.t="n",y.cellText!==!1&&(Q.w=oe),Q.v=k;else if(!isNaN(rc(oe).getDate())||ee&&oe.match(ee)){Q.z=y.dateNF||Pr[14];var te=0;ee&&oe.match(ee)&&(oe=J6(oe,y.dateNF,oe.match(ee)||[]),te=1),y.cellDates?(Q.t="d",Q.v=In(oe,te)):(Q.t="n",Q.v=qn(In(oe,te))),y.cellText!==!1&&(Q.w=Wa(Q.z,Q.v instanceof Date?qn(Q.v):Q.v)),y.cellNF||delete Q.z}else Q.t="s",Q.v=oe;if(Q.t=="z"||(y.dense?(w[S]||(w[S]=[]),w[S][A]=Q):w[pr({c:A,r:S})]=Q),O=L+1,re=x.charCodeAt(O),_.e.c<A&&(_.e.c=A),_.e.r<S&&(_.e.r=S),M==K)++A;else if(A=0,++S,y.sheetRows&&y.sheetRows<=S)return!0}e:for(;L<x.length;++L)switch(M=x.charCodeAt(L)){case 34:re===34&&(ne=!ne);break;case K:case 10:case 13:if(!ne&&de())break e;break}return L-O>0&&de(),w["!ref"]=Gr(_),w}function d(x,v){return!(v&&v.PRN)||v.FS||x.slice(0,4)=="sep="||x.indexOf("	")>=0||x.indexOf(",")>=0||x.indexOf(";")>=0?c(x,v):Fo(t(x,v),v)}function f(x,v){var y="",b=v.type=="string"?[0,0,0,0]:VI(x,v);switch(v.type){case"base64":y=la(x);break;case"binary":y=x;break;case"buffer":v.codepage==65001?y=x.toString("utf8"):v.codepage&&typeof Vd<"u"||(y=sr&&Buffer.isBuffer(x)?x.toString("binary"):uc(x));break;case"array":y=yu(x);break;case"string":y=x;break;default:throw new Error("Unrecognized type "+v.type)}return b[0]==239&&b[1]==187&&b[2]==191?y=Gl(y.slice(3)):v.type!="string"&&v.type!="buffer"&&v.codepage==65001?y=Gl(y):v.type=="binary"&&typeof Vd<"u",y.slice(0,19)=="socialcalc:version:"?Tb.to_sheet(v.type=="string"?y:Gl(y),v):d(y,v)}function p(x,v){return wi(f(x,v),v)}function h(x){for(var v=[],y=kr(x["!ref"]),b,w=Array.isArray(x),_=y.s.r;_<=y.e.r;++_){for(var S=[],A=y.s.c;A<=y.e.c;++A){var k=pr({r:_,c:A});if(b=w?(x[_]||[])[A]:x[k],!b||b.v==null){S.push("          ");continue}for(var O=(b.w||(ca(b),b.w)||"").slice(0,10);O.length<10;)O+=" ";S.push(O+(A===0?" ":""))}v.push(S.join(""))}return v.join(`
`)}return{to_workbook:p,to_sheet:f,from_sheet:h}})(),py=(function(){function e(E,P,W){if(E){Zn(E,E.l||0);for(var V=W.Enum||D;E.l<E.length;){var ue=E.read_shift(2),Le=V[ue]||V[65535],Ce=E.read_shift(2),Te=E.l+Ce,Be=Le.f&&Le.f(E,Ce,W);if(E.l=Te,P(Be,Le,ue))return}}}function t(E,P){switch(P.type){case"base64":return r(Ss(la(E)),P);case"binary":return r(Ss(E),P);case"buffer":case"array":return r(E,P)}throw"Unsupported type "+P.type}function r(E,P){if(!E)return E;var W=P||{},V=W.dense?[]:{},ue="Sheet1",Le="",Ce=0,Te={},Be=[],Ve=[],Je={s:{r:0,c:0},e:{r:0,c:0}},je=W.sheetRows||0;if(E[2]==0&&(E[3]==8||E[3]==9)&&E.length>=16&&E[14]==5&&E[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(E[2]==2)W.Enum=D,e(E,function(Me,ct,pt){switch(pt){case 0:W.vers=Me,Me>=4096&&(W.qpro=!0);break;case 6:Je=Me;break;case 204:Me&&(Le=Me);break;case 222:Le=Me;break;case 15:case 51:W.qpro||(Me[1].v=Me[1].v.slice(1));case 13:case 14:case 16:pt==14&&(Me[2]&112)==112&&(Me[2]&15)>1&&(Me[2]&15)<15&&(Me[1].z=W.dateNF||Pr[14],W.cellDates&&(Me[1].t="d",Me[1].v=Uv(Me[1].v))),W.qpro&&Me[3]>Ce&&(V["!ref"]=Gr(Je),Te[ue]=V,Be.push(ue),V=W.dense?[]:{},Je={s:{r:0,c:0},e:{r:0,c:0}},Ce=Me[3],ue=Le||"Sheet"+(Ce+1),Le="");var ut=W.dense?(V[Me[0].r]||[])[Me[0].c]:V[pr(Me[0])];if(ut){ut.t=Me[1].t,ut.v=Me[1].v,Me[1].z!=null&&(ut.z=Me[1].z),Me[1].f!=null&&(ut.f=Me[1].f);break}W.dense?(V[Me[0].r]||(V[Me[0].r]=[]),V[Me[0].r][Me[0].c]=Me[1]):V[pr(Me[0])]=Me[1];break}},W);else if(E[2]==26||E[2]==14)W.Enum=U,E[2]==14&&(W.qpro=!0,E.l=0),e(E,function(Me,ct,pt){switch(pt){case 204:ue=Me;break;case 22:Me[1].v=Me[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Me[3]>Ce&&(V["!ref"]=Gr(Je),Te[ue]=V,Be.push(ue),V=W.dense?[]:{},Je={s:{r:0,c:0},e:{r:0,c:0}},Ce=Me[3],ue="Sheet"+(Ce+1)),je>0&&Me[0].r>=je)break;W.dense?(V[Me[0].r]||(V[Me[0].r]=[]),V[Me[0].r][Me[0].c]=Me[1]):V[pr(Me[0])]=Me[1],Je.e.c<Me[0].c&&(Je.e.c=Me[0].c),Je.e.r<Me[0].r&&(Je.e.r=Me[0].r);break;case 27:Me[14e3]&&(Ve[Me[14e3][0]]=Me[14e3][1]);break;case 1537:Ve[Me[0]]=Me[1],Me[0]==Ce&&(ue=Me[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+E[2]);if(V["!ref"]=Gr(Je),Te[Le||ue]=V,Be.push(Le||ue),!Ve.length)return{SheetNames:Be,Sheets:Te};for(var q={},be=[],tt=0;tt<Ve.length;++tt)Te[Be[tt]]?(be.push(Ve[tt]||Be[tt]),q[Ve[tt]]=Te[Ve[tt]]||Te[Be[tt]]):(be.push(Ve[tt]),q[Ve[tt]]={"!ref":"A1"});return{SheetNames:be,Sheets:q}}function s(E,P){var W=P||{};if(+W.codepage>=0&&ec(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var V=Wn(),ue=kr(E["!ref"]),Le=Array.isArray(E),Ce=[];et(V,0,c(1030)),et(V,6,p(ue));for(var Te=Math.min(ue.e.r,8191),Be=ue.s.r;Be<=Te;++Be)for(var Ve=yn(Be),Je=ue.s.c;Je<=ue.e.c;++Je){Be===ue.s.r&&(Ce[Je]=Tn(Je));var je=Ce[Je]+Ve,q=Le?(E[Be]||[])[Je]:E[je];if(!(!q||q.t=="z"))if(q.t=="n")(q.v|0)==q.v&&q.v>=-32768&&q.v<=32767?et(V,13,b(Be,Je,q.v)):et(V,14,_(Be,Je,q.v));else{var be=ca(q);et(V,15,v(Be,Je,be.slice(0,239)))}}return et(V,1),V.end()}function o(E,P){var W=P||{};if(+W.codepage>=0&&ec(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var V=Wn();et(V,0,d(E));for(var ue=0,Le=0;ue<E.SheetNames.length;++ue)(E.Sheets[E.SheetNames[ue]]||{})["!ref"]&&et(V,27,Ne(E.SheetNames[ue],Le++));var Ce=0;for(ue=0;ue<E.SheetNames.length;++ue){var Te=E.Sheets[E.SheetNames[ue]];if(!(!Te||!Te["!ref"])){for(var Be=kr(Te["!ref"]),Ve=Array.isArray(Te),Je=[],je=Math.min(Be.e.r,8191),q=Be.s.r;q<=je;++q)for(var be=yn(q),tt=Be.s.c;tt<=Be.e.c;++tt){q===Be.s.r&&(Je[tt]=Tn(tt));var Me=Je[tt]+be,ct=Ve?(Te[q]||[])[tt]:Te[Me];if(!(!ct||ct.t=="z"))if(ct.t=="n")et(V,23,de(q,tt,Ce,ct.v));else{var pt=ca(ct);et(V,22,M(q,tt,Ce,pt.slice(0,239)))}}++Ce}}return et(V,1),V.end()}function c(E){var P=Fe(2);return P.write_shift(2,E),P}function d(E){var P=Fe(26);P.write_shift(2,4096),P.write_shift(2,4),P.write_shift(4,0);for(var W=0,V=0,ue=0,Le=0;Le<E.SheetNames.length;++Le){var Ce=E.SheetNames[Le],Te=E.Sheets[Ce];if(!(!Te||!Te["!ref"])){++ue;var Be=rs(Te["!ref"]);W<Be.e.r&&(W=Be.e.r),V<Be.e.c&&(V=Be.e.c)}}return W>8191&&(W=8191),P.write_shift(2,W),P.write_shift(1,ue),P.write_shift(1,V),P.write_shift(2,0),P.write_shift(2,0),P.write_shift(1,1),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(4,0),P}function f(E,P,W){var V={s:{c:0,r:0},e:{c:0,r:0}};return P==8&&W.qpro?(V.s.c=E.read_shift(1),E.l++,V.s.r=E.read_shift(2),V.e.c=E.read_shift(1),E.l++,V.e.r=E.read_shift(2),V):(V.s.c=E.read_shift(2),V.s.r=E.read_shift(2),P==12&&W.qpro&&(E.l+=2),V.e.c=E.read_shift(2),V.e.r=E.read_shift(2),P==12&&W.qpro&&(E.l+=2),V.s.c==65535&&(V.s.c=V.e.c=V.s.r=V.e.r=0),V)}function p(E){var P=Fe(8);return P.write_shift(2,E.s.c),P.write_shift(2,E.s.r),P.write_shift(2,E.e.c),P.write_shift(2,E.e.r),P}function h(E,P,W){var V=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(V[0].c=E.read_shift(1),V[3]=E.read_shift(1),V[0].r=E.read_shift(2),E.l+=2):(V[2]=E.read_shift(1),V[0].c=E.read_shift(2),V[0].r=E.read_shift(2)),V}function x(E,P,W){var V=E.l+P,ue=h(E,P,W);if(ue[1].t="s",W.vers==20768){E.l++;var Le=E.read_shift(1);return ue[1].v=E.read_shift(Le,"utf8"),ue}return W.qpro&&E.l++,ue[1].v=E.read_shift(V-E.l,"cstr"),ue}function v(E,P,W){var V=Fe(7+W.length);V.write_shift(1,255),V.write_shift(2,P),V.write_shift(2,E),V.write_shift(1,39);for(var ue=0;ue<V.length;++ue){var Le=W.charCodeAt(ue);V.write_shift(1,Le>=128?95:Le)}return V.write_shift(1,0),V}function y(E,P,W){var V=h(E,P,W);return V[1].v=E.read_shift(2,"i"),V}function b(E,P,W){var V=Fe(7);return V.write_shift(1,255),V.write_shift(2,P),V.write_shift(2,E),V.write_shift(2,W,"i"),V}function w(E,P,W){var V=h(E,P,W);return V[1].v=E.read_shift(8,"f"),V}function _(E,P,W){var V=Fe(13);return V.write_shift(1,255),V.write_shift(2,P),V.write_shift(2,E),V.write_shift(8,W,"f"),V}function S(E,P,W){var V=E.l+P,ue=h(E,P,W);if(ue[1].v=E.read_shift(8,"f"),W.qpro)E.l=V;else{var Le=E.read_shift(2);L(E.slice(E.l,E.l+Le),ue),E.l+=Le}return ue}function A(E,P,W){var V=P&32768;return P&=-32769,P=(V?E:0)+(P>=8192?P-16384:P),(V?"":"$")+(W?Tn(P):yn(P))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},O=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function L(E,P){Zn(E,0);for(var W=[],V=0,ue="",Le="",Ce="",Te="";E.l<E.length;){var Be=E[E.l++];switch(Be){case 0:W.push(E.read_shift(8,"f"));break;case 1:Le=A(P[0].c,E.read_shift(2),!0),ue=A(P[0].r,E.read_shift(2),!1),W.push(Le+ue);break;case 2:{var Ve=A(P[0].c,E.read_shift(2),!0),Je=A(P[0].r,E.read_shift(2),!1);Le=A(P[0].c,E.read_shift(2),!0),ue=A(P[0].r,E.read_shift(2),!1),W.push(Ve+Je+":"+Le+ue)}break;case 3:if(E.l<E.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(E.read_shift(2));break;case 6:{for(var je="";Be=E[E.l++];)je+=String.fromCharCode(Be);W.push('"'+je.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:Te=W.pop(),Ce=W.pop(),W.push(["AND","OR"][Be-20]+"("+Ce+","+Te+")");break;default:if(Be<32&&O[Be])Te=W.pop(),Ce=W.pop(),W.push(Ce+O[Be]+Te);else if(k[Be]){if(V=k[Be][1],V==69&&(V=E[E.l++]),V>W.length){console.error("WK1 bad formula parse 0x"+Be.toString(16)+":|"+W.join("|")+"|");return}var q=W.slice(-V);W.length-=V,W.push(k[Be][0]+"("+q.join(",")+")")}else return Be<=7?console.error("WK1 invalid opcode "+Be.toString(16)):Be<=24?console.error("WK1 unsupported op "+Be.toString(16)):Be<=30?console.error("WK1 invalid opcode "+Be.toString(16)):Be<=115?console.error("WK1 unsupported function opcode "+Be.toString(16)):console.error("WK1 unrecognized opcode "+Be.toString(16))}}W.length==1?P[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function K(E){var P=[{c:0,r:0},{t:"n",v:0},0];return P[0].r=E.read_shift(2),P[3]=E[E.l++],P[0].c=E[E.l++],P}function ne(E,P){var W=K(E);return W[1].t="s",W[1].v=E.read_shift(P-4,"cstr"),W}function M(E,P,W,V){var ue=Fe(6+V.length);ue.write_shift(2,E),ue.write_shift(1,W),ue.write_shift(1,P),ue.write_shift(1,39);for(var Le=0;Le<V.length;++Le){var Ce=V.charCodeAt(Le);ue.write_shift(1,Ce>=128?95:Ce)}return ue.write_shift(1,0),ue}function re(E,P){var W=K(E);W[1].v=E.read_shift(2);var V=W[1].v>>1;if(W[1].v&1)switch(V&7){case 0:V=(V>>3)*5e3;break;case 1:V=(V>>3)*500;break;case 2:V=(V>>3)/20;break;case 3:V=(V>>3)/200;break;case 4:V=(V>>3)/2e3;break;case 5:V=(V>>3)/2e4;break;case 6:V=(V>>3)/16;break;case 7:V=(V>>3)/64;break}return W[1].v=V,W}function ee(E,P){var W=K(E),V=E.read_shift(4),ue=E.read_shift(4),Le=E.read_shift(2);if(Le==65535)return V===0&&ue===3221225472?(W[1].t="e",W[1].v=15):V===0&&ue===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var Ce=Le&32768;return Le=(Le&32767)-16446,W[1].v=(1-Ce*2)*(ue*Math.pow(2,Le+32)+V*Math.pow(2,Le)),W}function de(E,P,W,V){var ue=Fe(14);if(ue.write_shift(2,E),ue.write_shift(1,W),ue.write_shift(1,P),V==0)return ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(2,65535),ue;var Le=0,Ce=0,Te=0,Be=0;return V<0&&(Le=1,V=-V),Ce=Math.log2(V)|0,V/=Math.pow(2,Ce-31),Be=V>>>0,(Be&2147483648)==0&&(V/=2,++Ce,Be=V>>>0),V-=Be,Be|=2147483648,Be>>>=0,V*=Math.pow(2,32),Te=V>>>0,ue.write_shift(4,Te),ue.write_shift(4,Be),Ce+=16383+(Le?32768:0),ue.write_shift(2,Ce),ue}function oe(E,P){var W=ee(E);return E.l+=P-14,W}function Q(E,P){var W=K(E),V=E.read_shift(4);return W[1].v=V>>6,W}function te(E,P){var W=K(E),V=E.read_shift(8,"f");return W[1].v=V,W}function ae(E,P){var W=te(E);return E.l+=P-10,W}function X(E,P){return E[E.l+P-1]==0?E.read_shift(P,"cstr"):""}function J(E,P){var W=E[E.l++];W>P-1&&(W=P-1);for(var V="";V.length<W;)V+=String.fromCharCode(E[E.l++]);return V}function fe(E,P,W){if(!(!W.qpro||P<21)){var V=E.read_shift(1);E.l+=17,E.l+=1,E.l+=2;var ue=E.read_shift(P-21,"cstr");return[V,ue]}}function se(E,P){for(var W={},V=E.l+P;E.l<V;){var ue=E.read_shift(2);if(ue==14e3){for(W[ue]=[0,""],W[ue][0]=E.read_shift(2);E[E.l];)W[ue][1]+=String.fromCharCode(E[E.l]),E.l++;E.l++}}return W}function Ne(E,P){var W=Fe(5+E.length);W.write_shift(2,14e3),W.write_shift(2,P);for(var V=0;V<E.length;++V){var ue=E.charCodeAt(V);W[W.l++]=ue>127?95:ue}return W[W.l++]=0,W}var D={0:{n:"BOF",f:vb},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:y},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:x},16:{n:"FORMULA",f:S},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:x},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:X},222:{n:"SHEETNAMELP",f:J},65535:{n:""}},U={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ne},23:{n:"NUMBER17",f:ee},24:{n:"NUMBER18",f:re},25:{n:"FORMULA19",f:oe},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:se},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:Q},38:{n:"??"},39:{n:"NUMBER27",f:te},40:{n:"FORMULA28",f:ae},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:X},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:fe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:o,to_workbook:t}})(),MA=/^\s|\s$|[\t\n\r]/;function jb(e,t){if(!t.bookSST)return"";var r=[Vr];r[r.length]=Ze("sst",null,{xmlns:Mo[0],count:e.Count,uniqueCount:e.Unique});for(var s=0;s!=e.length;++s)if(e[s]!=null){var o=e[s],c="<si>";o.r?c+=o.r:(c+="<t",o.t||(o.t=""),o.t.match(MA)&&(c+=' xml:space="preserve"'),c+=">"+hr(o.t)+"</t>"),c+="</si>",r[r.length]=c}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function FA(e){return[e.read_shift(4),e.read_shift(4)]}function LA(e,t){return t||(t=Fe(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var PA=A5;function zA(e){var t=Wn();$e(t,159,LA(e));for(var r=0;r<e.length;++r)$e(t,19,PA(e[r]));return $e(t,160),t.end()}function UA(e){for(var t=[],r=e.split(""),s=0;s<r.length;++s)t[s]=r[s].charCodeAt(0);return t}function Eb(e){var t=0,r,s=UA(e),o=s.length+1,c,d,f,p,h;for(r=vi(o),r[0]=s.length,c=1;c!=o;++c)r[c]=s[c-1];for(c=o-1;c>=0;--c)d=r[c],f=(t&16384)===0?0:1,p=t<<1&32767,h=f|p,t=h^d;return t^52811}var WA=(function(){function e(o,c){switch(c.type){case"base64":return t(la(o),c);case"binary":return t(o,c);case"buffer":return t(sr&&Buffer.isBuffer(o)?o.toString("binary"):uc(o),c);case"array":return t(yu(o),c)}throw new Error("Unrecognized type "+c.type)}function t(o,c){var d=c||{},f=d.dense?[]:{},p=o.match(/\\trowd.*?\\row\b/g);if(!p.length)throw new Error("RTF missing table");var h={s:{c:0,r:0},e:{c:0,r:p.length-1}};return p.forEach(function(x,v){Array.isArray(f)&&(f[v]=[]);for(var y=/\\\w+\b/g,b=0,w,_=-1;w=y.exec(x);){switch(w[0]){case"\\cell":var S=x.slice(b,y.lastIndex-w[0].length);if(S[0]==" "&&(S=S.slice(1)),++_,S.length){var A={v:S,t:"s"};Array.isArray(f)?f[v][_]=A:f[pr({r:v,c:_})]=A}break}b=y.lastIndex}_>h.e.c&&(h.e.c=_)}),f["!ref"]=Gr(h),f}function r(o,c){return wi(e(o,c),c)}function s(o){for(var c=["{\\rtf1\\ansi"],d=kr(o["!ref"]),f,p=Array.isArray(o),h=d.s.r;h<=d.e.r;++h){c.push("\\trowd\\trautofit1");for(var x=d.s.c;x<=d.e.c;++x)c.push("\\cellx"+(x+1));for(c.push("\\pard\\intbl"),x=d.s.c;x<=d.e.c;++x){var v=pr({r:h,c:x});f=p?(o[h]||[])[x]:o[v],!(!f||f.v==null&&(!f.f||f.F))&&(c.push(" "+(f.w||(ca(f),f.w))),c.push("\\cell"))}c.push("\\pard\\intbl\\row")}return c.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:s}})();function gy(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var qA=6,ia=qA;function ru(e){return Math.floor((e+Math.round(128/ia)/256)*ia)}function nu(e){return Math.floor((e-5)/ia*100+.5)/100}function S0(e){return Math.round((e*ia+5)/ia*256)/256}function np(e){e.width?(e.wpx=ru(e.width),e.wch=nu(e.wpx),e.MDW=ia):e.wpx?(e.wch=nu(e.wpx),e.width=S0(e.wch),e.MDW=ia):typeof e.wch=="number"&&(e.width=S0(e.wch),e.wpx=ru(e.width),e.MDW=ia),e.customWidth&&delete e.customWidth}var $A=96,kb=$A;function su(e){return e*96/kb}function Cb(e){return e*kb/96}function HA(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&(t[t.length]=Ze("numFmt",null,{numFmtId:s,formatCode:hr(e[s])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ze("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function GA(e){var t=[];return t[t.length]=Ze("cellXfs",null),e.forEach(function(r){t[t.length]=Ze("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ze("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function Ab(e,t){var r=[Vr,Ze("styleSheet",null,{xmlns:Mo[0],"xmlns:vt":ln.vt})],s;return e.SSF&&(s=HA(e.SSF))!=null&&(r[r.length]=s),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(s=GA(t.cellXfs))&&(r[r.length]=s),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function VA(e,t){var r=e.read_shift(2),s=jn(e);return[r,s]}function YA(e,t,r){r||(r=Fe(6+4*t.length)),r.write_shift(2,e),dn(t,r);var s=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),s}function KA(e,t,r){var s={};s.sz=e.read_shift(2)/20;var o=M5(e);o.fItalic&&(s.italic=1),o.fCondense&&(s.condense=1),o.fExtend&&(s.extend=1),o.fShadow&&(s.shadow=1),o.fOutline&&(s.outline=1),o.fStrikeout&&(s.strike=1);var c=e.read_shift(2);switch(c===700&&(s.bold=1),e.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var d=e.read_shift(1);d!=0&&(s.underline=d);var f=e.read_shift(1);f>0&&(s.family=f);var p=e.read_shift(1);switch(p>0&&(s.charset=p),e.l++,s.color=B5(e),e.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=jn(e),s}function XA(e,t){t||(t=Fe(153)),t.write_shift(2,e.sz*20),F5(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),eu(e.color,t);var s=0;return s=2,t.write_shift(1,s),dn(e.name,t),t.length>t.l?t.slice(0,t.l):t}var QA=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Kh,JA=Fs;function xy(e,t){t||(t=Fe(84)),Kh||(Kh=H0(QA));var r=Kh[e.patternType];r==null&&(r=40),t.write_shift(4,r);var s=0;if(r!=40)for(eu({auto:1},t),eu({auto:1},t);s<12;++s)t.write_shift(4,0);else{for(;s<4;++s)t.write_shift(4,0);for(;s<12;++s)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function ZA(e,t){var r=e.l+t,s=e.read_shift(2),o=e.read_shift(2);return e.l=r,{ixfe:s,numFmtId:o}}function Rb(e,t,r){r||(r=Fe(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var s=0;return r.write_shift(1,s),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Ll(e,t){return t||(t=Fe(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var eR=Fs;function tR(e,t){return t||(t=Fe(51)),t.write_shift(1,0),Ll(null,t),Ll(null,t),Ll(null,t),Ll(null,t),Ll(null,t),t.length>t.l?t.slice(0,t.l):t}function rR(e,t){return t||(t=Fe(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Zd(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function nR(e,t,r){var s=Fe(2052);return s.write_shift(4,e),Zd(t,s),Zd(r,s),s.length>s.l?s.slice(0,s.l):s}function sR(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var o=s[0];o<=s[1];++o)t[o]!=null&&++r}),r!=0&&($e(e,615,Ts(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var o=s[0];o<=s[1];++o)t[o]!=null&&$e(e,44,YA(o,t[o]))}),$e(e,616))}}function aR(e){var t=1;$e(e,611,Ts(t)),$e(e,43,XA({sz:12,color:{theme:1},name:"Calibri",family:2})),$e(e,612)}function iR(e){var t=2;$e(e,603,Ts(t)),$e(e,45,xy({patternType:"none"})),$e(e,45,xy({patternType:"gray125"})),$e(e,604)}function oR(e){var t=1;$e(e,613,Ts(t)),$e(e,46,tR()),$e(e,614)}function lR(e){var t=1;$e(e,626,Ts(t)),$e(e,47,Rb({numFmtId:0},65535)),$e(e,627)}function cR(e,t){$e(e,617,Ts(t.length)),t.forEach(function(r){$e(e,47,Rb(r,0))}),$e(e,618)}function dR(e){var t=1;$e(e,619,Ts(t)),$e(e,48,rR({xfId:0,name:"Normal"})),$e(e,620)}function uR(e){var t=0;$e(e,505,Ts(t)),$e(e,506)}function fR(e){var t=0;$e(e,508,nR(t,"TableStyleMedium9","PivotStyleMedium4")),$e(e,509)}function hR(e,t){var r=Wn();return $e(r,278),sR(r,e.SSF),aR(r),iR(r),oR(r),lR(r),cR(r,t.cellXfs),dR(r),uR(r),fR(r),$e(r,279),r.end()}function Nb(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Vr];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function pR(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:jn(e)}}function gR(e){var t=Fe(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),dn(e.name,t),t.slice(0,t.l)}function xR(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function mR(e){var t=Fe(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function yR(e,t){var r=Fe(8+2*t.length);return r.write_shift(4,e),dn(t,r),r.slice(0,r.l)}function vR(e){return e.l+=4,e.read_shift(4)!=0}function bR(e,t){var r=Fe(8);return r.write_shift(4,e),r.write_shift(4,1),r}function _R(){var e=Wn();return $e(e,332),$e(e,334,Ts(1)),$e(e,335,gR({name:"XLDAPR",version:12e4,flags:3496657072})),$e(e,336),$e(e,339,yR(1,"XLDAPR")),$e(e,52),$e(e,35,Ts(514)),$e(e,4096,Ts(0)),$e(e,4097,us(1)),$e(e,36),$e(e,53),$e(e,340),$e(e,337,bR(1)),$e(e,51,mR([[1,0]])),$e(e,338),$e(e,333),e.end()}function Db(){var e=[Vr];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function SR(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=pr(r);var s=e.read_shift(1);return s&2&&(t.l="1"),s&8&&(t.a="1"),t}var wo=1024;function Ob(e,t){for(var r=[21600,21600],s=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),o=[Ze("xml",null,{"xmlns:v":es.v,"xmlns:o":es.o,"xmlns:x":es.x,"xmlns:mv":es.mv}).replace(/\/>/,">"),Ze("o:shapelayout",Ze("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Ze("v:shapetype",[Ze("v:stroke",null,{joinstyle:"miter"}),Ze("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:s})];wo<e*1e3;)wo+=1e3;return t.forEach(function(c){var d=cn(c[0]),f={color2:"#BEFF82",type:"gradient"};f.type=="gradient"&&(f.angle="-180");var p=f.type=="gradient"?Ze("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,h=Ze("v:fill",p,f),x={on:"t",obscured:"t"};++wo,o=o.concat(["<v:shape"+sc({id:"_x0000_s"+wo,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(c[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",h,Ze("v:shadow",null,x),Ze("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",mn("x:Anchor",[d.c+1,0,d.r+1,0,d.c+3,20,d.r+5,20].join(",")),mn("x:AutoFill","False"),mn("x:Row",String(d.r)),mn("x:Column",String(d.c)),c[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),o.push("</xml>"),o.join("")}function Ib(e){var t=[Vr,Ze("comments",null,{xmlns:Mo[0]})],r=[];return t.push("<authors>"),e.forEach(function(s){s[1].forEach(function(o){var c=hr(o.a);r.indexOf(c)==-1&&(r.push(c),t.push("<author>"+c+"</author>")),o.T&&o.ID&&r.indexOf("tc="+o.ID)==-1&&(r.push("tc="+o.ID),t.push("<author>tc="+o.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(s){var o=0,c=[];if(s[1][0]&&s[1][0].T&&s[1][0].ID?o=r.indexOf("tc="+s[1][0].ID):s[1].forEach(function(p){p.a&&(o=r.indexOf(hr(p.a))),c.push(p.t||"")}),t.push('<comment ref="'+s[0]+'" authorId="'+o+'"><text>'),c.length<=1)t.push(mn("t",hr(c[0]||"")));else{for(var d=`Comment:
    `+c[0]+`
`,f=1;f<c.length;++f)d+=`Reply:
    `+c[f]+`
`;t.push(mn("t",hr(d)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function wR(e,t,r){var s=[Vr,Ze("ThreadedComments",null,{xmlns:ln.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(o){var c="";(o[1]||[]).forEach(function(d,f){if(!d.T){delete d.ID;return}d.a&&t.indexOf(d.a)==-1&&t.push(d.a);var p={ref:o[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};f==0?c=p.id:p.parentId=c,d.ID=p.id,d.a&&(p.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(d.a)).slice(-12)+"}"),s.push(Ze("threadedComment",mn("text",d.t||""),p))})}),s.push("</ThreadedComments>"),s.join("")}function TR(e){var t=[Vr,Ze("personList",null,{xmlns:ln.TCMNT,"xmlns:x":Mo[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,s){t.push(Ze("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+s).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function jR(e){var t={};t.iauthor=e.read_shift(4);var r=ki(e);return t.rfx=r.s,t.ref=pr(r.s),e.l+=16,t}function ER(e,t){return t==null&&(t=Fe(36)),t.write_shift(4,e[1].iauthor),Lo(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var kR=jn;function CR(e){return dn(e.slice(0,54))}function AR(e){var t=Wn(),r=[];return $e(t,628),$e(t,630),e.forEach(function(s){s[1].forEach(function(o){r.indexOf(o.a)>-1||(r.push(o.a.slice(0,54)),$e(t,632,CR(o.a)))})}),$e(t,631),$e(t,633),e.forEach(function(s){s[1].forEach(function(o){o.iauthor=r.indexOf(o.a);var c={s:cn(s[0]),e:cn(s[0])};$e(t,635,ER([c,o])),o.t&&o.t.length>0&&$e(t,637,N5(o)),$e(t,636),delete o.iauthor})}),$e(t,634),$e(t,629),t.end()}function RR(e,t){t.FullPaths.forEach(function(r,s){if(s!=0){var o=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");o.slice(-1)!=="/"&&br.utils.cfb_add(e,o,t.FileIndex[s].content)}})}var Bb=["xlsb","xlsm","xlam","biff8","xla"],NR=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(s,o,c,d){var f=!1,p=!1;c.length==0?p=!0:c.charAt(0)=="["&&(p=!0,c=c.slice(1,-1)),d.length==0?f=!0:d.charAt(0)=="["&&(f=!0,d=d.slice(1,-1));var h=c.length>0?parseInt(c,10)|0:0,x=d.length>0?parseInt(d,10)|0:0;return f?x+=t.c:--x,p?h+=t.r:--h,o+(f?"":"$")+Tn(x)+(p?"":"$")+yn(h)}return function(o,c){return t=c,o.replace(e,r)}})(),sp=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,ap=(function(){return function(t,r){return t.replace(sp,function(s,o,c,d,f,p){var h=J0(d)-(c?0:r.c),x=Q0(p)-(f?0:r.r),v=x==0?"":f?x+1:"["+x+"]",y=h==0?"":c?h+1:"["+h+"]";return o+"R"+v+"C"+y})}})();function DR(e,t){return e.replace(sp,function(r,s,o,c,d,f){return s+(o=="$"?o+c:Tn(J0(c)+t.c))+(d=="$"?d+f:yn(Q0(f)+t.r))})}function OR(e){return e.length!=1}function Hr(e){e.l+=1}function qa(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Mb(e,t,r){var s=2;if(r){if(r.biff>=2&&r.biff<=5)return Fb(e);r.biff==12&&(s=4)}var o=e.read_shift(s),c=e.read_shift(s),d=qa(e),f=qa(e);return{s:{r:o,c:d[0],cRel:d[1],rRel:d[2]},e:{r:c,c:f[0],cRel:f[1],rRel:f[2]}}}function Fb(e){var t=qa(e),r=qa(e),s=e.read_shift(1),o=e.read_shift(1);return{s:{r:t[0],c:s,cRel:t[1],rRel:t[2]},e:{r:r[0],c:o,cRel:r[1],rRel:r[2]}}}function IR(e,t,r){if(r.biff<8)return Fb(e);var s=e.read_shift(r.biff==12?4:2),o=e.read_shift(r.biff==12?4:2),c=qa(e),d=qa(e);return{s:{r:s,c:c[0],cRel:c[1],rRel:c[2]},e:{r:o,c:d[0],cRel:d[1],rRel:d[2]}}}function Lb(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return BR(e);var s=e.read_shift(r&&r.biff==12?4:2),o=qa(e);return{r:s,c:o[0],cRel:o[1],rRel:o[2]}}function BR(e){var t=qa(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function MR(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function FR(e,t,r){var s=r&&r.biff?r.biff:8;if(s>=2&&s<=5)return LR(e);var o=e.read_shift(s>=12?4:2),c=e.read_shift(2),d=(c&16384)>>14,f=(c&32768)>>15;if(c&=16383,f==1)for(;o>524287;)o-=1048576;if(d==1)for(;c>8191;)c=c-16384;return{r:o,c,cRel:d,rRel:f}}function LR(e){var t=e.read_shift(2),r=e.read_shift(1),s=(t&32768)>>15,o=(t&16384)>>14;return t&=16383,s==1&&t>=8192&&(t=t-16384),o==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:o,rRel:s}}function PR(e,t,r){var s=(e[e.l++]&96)>>5,o=Mb(e,r.biff>=2&&r.biff<=5?6:8,r);return[s,o]}function zR(e,t,r){var s=(e[e.l++]&96)>>5,o=e.read_shift(2,"i"),c=8;if(r)switch(r.biff){case 5:e.l+=12,c=6;break;case 12:c=12;break}var d=Mb(e,c,r);return[s,o,d]}function UR(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[s]}function WR(e,t,r){var s=(e[e.l++]&96)>>5,o=e.read_shift(2),c=8;if(r)switch(r.biff){case 5:e.l+=12,c=6;break;case 12:c=12;break}return e.l+=c,[s,o]}function qR(e,t,r){var s=(e[e.l++]&96)>>5,o=IR(e,t-1,r);return[s,o]}function $R(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[s]}function my(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function HR(e,t,r){e.l+=2;for(var s=e.read_shift(r&&r.biff==2?1:2),o=[],c=0;c<=s;++c)o.push(e.read_shift(r&&r.biff==2?1:2));return o}function GR(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function VR(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function YR(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function KR(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[s]}function Pb(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function XR(e){return e.read_shift(2),Pb(e)}function QR(e){return e.read_shift(2),Pb(e)}function JR(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var o=Lb(e,0,r);return[s,o]}function ZR(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var o=FR(e,0,r);return[s,o]}function eN(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var o=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var c=Lb(e,0,r);return[s,o,c]}function tN(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var o=e.read_shift(r&&r.biff<=3?1:2);return[tD[o],Wb[o],s]}function rN(e,t,r){var s=e[e.l++],o=e.read_shift(1),c=r&&r.biff<=3?[s==88?-1:0,e.read_shift(1)]:nN(e);return[o,(c[0]===0?Wb:eD)[c[1]]]}function nN(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function sN(e,t,r){e.l+=r&&r.biff==2?3:4}function aN(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var s=e.read_shift(2),o=e.read_shift(r&&r.biff==2?1:2);return[s,o]}function iN(e){return e.l++,pc[e.read_shift(1)]}function oN(e){return e.l++,e.read_shift(2)}function lN(e){return e.l++,e.read_shift(1)!==0}function cN(e){return e.l++,Po(e)}function dN(e,t,r){return e.l++,_b(e,t-1,r)}function uN(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=eA(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=pc[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Po(e);break;case 2:r[1]=sA(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function fN(e,t,r){for(var s=e.read_shift(r.biff==12?4:2),o=[],c=0;c!=s;++c)o.push((r.biff==12?ki:oA)(e));return o}function hN(e,t,r){var s=0,o=0;r.biff==12?(s=e.read_shift(4),o=e.read_shift(4)):(o=1+e.read_shift(1),s=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--s,--o==0&&(o=256));for(var c=0,d=[];c!=s&&(d[c]=[]);++c)for(var f=0;f!=o;++f)d[c][f]=uN(e,r.biff);return d}function pN(e,t,r){var s=e.read_shift(1)>>>5&3,o=!r||r.biff>=8?4:2,c=e.read_shift(o);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[s,0,c]}function gN(e,t,r){if(r.biff==5)return xN(e);var s=e.read_shift(1)>>>5&3,o=e.read_shift(2),c=e.read_shift(4);return[s,o,c]}function xN(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var s=e.read_shift(2);return e.l+=12,[t,r,s]}function mN(e,t,r){var s=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var o=e.read_shift(r&&r.biff==2?1:2);return[s,o]}function yN(e,t,r){var s=e.read_shift(1)>>>5&3,o=e.read_shift(r&&r.biff==2?1:2);return[s,o]}function vN(e,t,r){var s=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[s]}function bN(e,t,r){var s=(e[e.l++]&96)>>5,o=e.read_shift(2),c=4;if(r)switch(r.biff){case 5:c=15;break;case 12:c=6;break}return e.l+=c,[s,o]}var _N=Fs,SN=Fs,wN=Fs;function gc(e,t,r){return e.l+=2,[MR(e)]}function ip(e){return e.l+=6,[]}var TN=gc,jN=ip,EN=ip,kN=gc;function zb(e){return e.l+=2,[vb(e),e.read_shift(2)&1]}var CN=gc,AN=zb,RN=ip,NN=gc,DN=gc,ON=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function IN(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(4),o=e.read_shift(2),c=e.read_shift(2),d=ON[r>>2&31];return{ixti:t,coltype:r&3,rt:d,idx:s,c:o,C:c}}function BN(e){return e.l+=2,[e.read_shift(4)]}function MN(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function FN(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function LN(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function PN(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function zN(e){return e.l+=4,[0,0]}var yy={1:{n:"PtgExp",f:aN},2:{n:"PtgTbl",f:wN},3:{n:"PtgAdd",f:Hr},4:{n:"PtgSub",f:Hr},5:{n:"PtgMul",f:Hr},6:{n:"PtgDiv",f:Hr},7:{n:"PtgPower",f:Hr},8:{n:"PtgConcat",f:Hr},9:{n:"PtgLt",f:Hr},10:{n:"PtgLe",f:Hr},11:{n:"PtgEq",f:Hr},12:{n:"PtgGe",f:Hr},13:{n:"PtgGt",f:Hr},14:{n:"PtgNe",f:Hr},15:{n:"PtgIsect",f:Hr},16:{n:"PtgUnion",f:Hr},17:{n:"PtgRange",f:Hr},18:{n:"PtgUplus",f:Hr},19:{n:"PtgUminus",f:Hr},20:{n:"PtgPercent",f:Hr},21:{n:"PtgParen",f:Hr},22:{n:"PtgMissArg",f:Hr},23:{n:"PtgStr",f:dN},26:{n:"PtgSheet",f:MN},27:{n:"PtgEndSheet",f:FN},28:{n:"PtgErr",f:iN},29:{n:"PtgBool",f:lN},30:{n:"PtgInt",f:oN},31:{n:"PtgNum",f:cN},32:{n:"PtgArray",f:$R},33:{n:"PtgFunc",f:tN},34:{n:"PtgFuncVar",f:rN},35:{n:"PtgName",f:pN},36:{n:"PtgRef",f:JR},37:{n:"PtgArea",f:PR},38:{n:"PtgMemArea",f:mN},39:{n:"PtgMemErr",f:_N},40:{n:"PtgMemNoMem",f:SN},41:{n:"PtgMemFunc",f:yN},42:{n:"PtgRefErr",f:vN},43:{n:"PtgAreaErr",f:UR},44:{n:"PtgRefN",f:ZR},45:{n:"PtgAreaN",f:qR},46:{n:"PtgMemAreaN",f:LN},47:{n:"PtgMemNoMemN",f:PN},57:{n:"PtgNameX",f:gN},58:{n:"PtgRef3d",f:eN},59:{n:"PtgArea3d",f:zR},60:{n:"PtgRefErr3d",f:bN},61:{n:"PtgAreaErr3d",f:WR},255:{}},UN={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},WN={1:{n:"PtgElfLel",f:zb},2:{n:"PtgElfRw",f:NN},3:{n:"PtgElfCol",f:TN},6:{n:"PtgElfRwV",f:DN},7:{n:"PtgElfColV",f:kN},10:{n:"PtgElfRadical",f:CN},11:{n:"PtgElfRadicalS",f:RN},13:{n:"PtgElfColS",f:jN},15:{n:"PtgElfColSV",f:EN},16:{n:"PtgElfRadicalLel",f:AN},25:{n:"PtgList",f:IN},29:{n:"PtgSxName",f:BN},255:{}},qN={0:{n:"PtgAttrNoop",f:zN},1:{n:"PtgAttrSemi",f:KR},2:{n:"PtgAttrIf",f:VR},4:{n:"PtgAttrChoose",f:HR},8:{n:"PtgAttrGoto",f:GR},16:{n:"PtgAttrSum",f:sN},32:{n:"PtgAttrBaxcel",f:my},33:{n:"PtgAttrBaxcel",f:my},64:{n:"PtgAttrSpace",f:XR},65:{n:"PtgAttrSpaceSemi",f:QR},128:{n:"PtgAttrIfError",f:YR},255:{}};function $N(e,t,r,s){if(s.biff<8)return Fs(e,t);for(var o=e.l+t,c=[],d=0;d!==r.length;++d)switch(r[d][0]){case"PtgArray":r[d][1]=hN(e,0,s),c.push(r[d][1]);break;case"PtgMemArea":r[d][2]=fN(e,r[d][1],s),c.push(r[d][2]);break;case"PtgExp":s&&s.biff==12&&(r[d][1][1]=e.read_shift(4),c.push(r[d][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[d][0]}return t=o-e.l,t!==0&&c.push(Fs(e,t)),c}function HN(e,t,r){for(var s=e.l+t,o,c,d=[];s!=e.l;)t=s-e.l,c=e[e.l],o=yy[c]||yy[UN[c]],(c===24||c===25)&&(o=(c===24?WN:qN)[e[e.l+1]]),!o||!o.f?Fs(e,t):d.push([o.n,o.f(e,t,r)]);return d}function GN(e){for(var t=[],r=0;r<e.length;++r){for(var s=e[r],o=[],c=0;c<s.length;++c){var d=s[c];if(d)switch(d[0]){case 2:o.push('"'+d[1].replace(/"/g,'""')+'"');break;default:o.push(d[1])}else o.push("")}t.push(o.join(","))}return t.join(";")}var VN={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function YN(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Ub(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var s=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!s)return"SH33TJSERR1";var o="";if(r.biff>8)switch(e[s[0]][0]){case 357:return o=s[1]==-1?"#REF":e.SheetNames[s[1]],s[1]==s[2]?o:o+":"+e.SheetNames[s[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[s[0]][0];case 355:default:return"SH33TJSSRC"+e[s[0]][0]}switch(e[s[0]][0][0]){case 1025:return o=s[1]==-1?"#REF":e.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?o:o+":"+e.SheetNames[s[2]];case 14849:return e[s[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return e[s[0]][0][3]?(o=s[1]==-1?"#REF":e[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?o:o+":"+e[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function vy(e,t,r){var s=Ub(e,t,r);return s=="#REF"?s:YN(s,r)}function Ao(e,t,r,s,o){var c=o&&o.biff||8,d={s:{c:0,r:0}},f=[],p,h,x,v=0,y=0,b,w="";if(!e[0]||!e[0][0])return"";for(var _=-1,S="",A=0,k=e[0].length;A<k;++A){var O=e[0][A];switch(O[0]){case"PtgUminus":f.push("-"+f.pop());break;case"PtgUplus":f.push("+"+f.pop());break;case"PtgPercent":f.push(f.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(p=f.pop(),h=f.pop(),_>=0){switch(e[0][_][1][0]){case 0:S=Lr(" ",e[0][_][1][1]);break;case 1:S=Lr("\r",e[0][_][1][1]);break;default:if(S="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][_][1][0])}h=h+S,_=-1}f.push(h+VN[O[0]]+p);break;case"PtgIsect":p=f.pop(),h=f.pop(),f.push(h+" "+p);break;case"PtgUnion":p=f.pop(),h=f.pop(),f.push(h+","+p);break;case"PtgRange":p=f.pop(),h=f.pop(),f.push(h+":"+p);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":x=Yl(O[1][1],d,o),f.push(Kl(x,c));break;case"PtgRefN":x=r?Yl(O[1][1],r,o):O[1][1],f.push(Kl(x,c));break;case"PtgRef3d":v=O[1][1],x=Yl(O[1][2],d,o),w=vy(s,v,o),f.push(w+"!"+Kl(x,c));break;case"PtgFunc":case"PtgFuncVar":var L=O[1][0],K=O[1][1];L||(L=0),L&=127;var ne=L==0?[]:f.slice(-L);f.length-=L,K==="User"&&(K=ne.shift()),f.push(K+"("+ne.join(",")+")");break;case"PtgBool":f.push(O[1]?"TRUE":"FALSE");break;case"PtgInt":f.push(O[1]);break;case"PtgNum":f.push(String(O[1]));break;case"PtgStr":f.push('"'+O[1].replace(/"/g,'""')+'"');break;case"PtgErr":f.push(O[1]);break;case"PtgAreaN":b=ny(O[1][1],r?{s:r}:d,o),f.push(Vh(b,o));break;case"PtgArea":b=ny(O[1][1],d,o),f.push(Vh(b,o));break;case"PtgArea3d":v=O[1][1],b=O[1][2],w=vy(s,v,o),f.push(w+"!"+Vh(b,o));break;case"PtgAttrSum":f.push("SUM("+f.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":y=O[1][2];var M=(s.names||[])[y-1]||(s[0]||[])[y],re=M?M.Name:"SH33TJSNAME"+String(y);re&&re.slice(0,6)=="_xlfn."&&!o.xlfn&&(re=re.slice(6)),f.push(re);break;case"PtgNameX":var ee=O[1][1];y=O[1][2];var de;if(o.biff<=5)ee<0&&(ee=-ee),s[ee]&&(de=s[ee][y]);else{var oe="";if(((s[ee]||[])[0]||[])[0]==14849||(((s[ee]||[])[0]||[])[0]==1025?s[ee][y]&&s[ee][y].itab>0&&(oe=s.SheetNames[s[ee][y].itab-1]+"!"):oe=s.SheetNames[y-1]+"!"),s[ee]&&s[ee][y])oe+=s[ee][y].Name;else if(s[0]&&s[0][y])oe+=s[0][y].Name;else{var Q=(Ub(s,ee,o)||"").split(";;");Q[y-1]?oe=Q[y-1]:oe+="SH33TJSERRX"}f.push(oe);break}de||(de={Name:"SH33TJSERRY"}),f.push(de.Name);break;case"PtgParen":var te="(",ae=")";if(_>=0){switch(S="",e[0][_][1][0]){case 2:te=Lr(" ",e[0][_][1][1])+te;break;case 3:te=Lr("\r",e[0][_][1][1])+te;break;case 4:ae=Lr(" ",e[0][_][1][1])+ae;break;case 5:ae=Lr("\r",e[0][_][1][1])+ae;break;default:if(o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][_][1][0])}_=-1}f.push(te+f.pop()+ae);break;case"PtgRefErr":f.push("#REF!");break;case"PtgRefErr3d":f.push("#REF!");break;case"PtgExp":x={c:O[1][1],r:O[1][0]};var X={c:r.c,r:r.r};if(s.sharedf[pr(x)]){var J=s.sharedf[pr(x)];f.push(Ao(J,d,X,s,o))}else{var fe=!1;for(p=0;p!=s.arrayf.length;++p)if(h=s.arrayf[p],!(x.c<h[0].s.c||x.c>h[0].e.c)&&!(x.r<h[0].s.r||x.r>h[0].e.r)){f.push(Ao(h[1],d,X,s,o)),fe=!0;break}fe||f.push(O[1])}break;case"PtgArray":f.push("{"+GN(O[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=A;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":f.push("");break;case"PtgAreaErr":f.push("#REF!");break;case"PtgAreaErr3d":f.push("#REF!");break;case"PtgList":f.push("Table"+O[1].idx+"[#"+O[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(O));default:throw new Error("Unrecognized Formula Token: "+String(O))}var se=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(o.biff!=3&&_>=0&&se.indexOf(e[0][A][0])==-1){O=e[0][_];var Ne=!0;switch(O[1][0]){case 4:Ne=!1;case 0:S=Lr(" ",O[1][1]);break;case 5:Ne=!1;case 1:S=Lr("\r",O[1][1]);break;default:if(S="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+O[1][0])}f.push((Ne?S:"")+f.pop()+(Ne?"":S)),_=-1}}if(f.length>1&&o.WTF)throw new Error("bad formula stack");return f[0]}function KN(e){if(e==null){var t=Fe(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return bi(e);return bi(0)}function XN(e,t,r,s,o){var c=_i(t,r,o),d=KN(e.v),f=Fe(6),p=33;f.write_shift(2,p),f.write_shift(4,0);for(var h=Fe(e.bf.length),x=0;x<e.bf.length;++x)h[x]=e.bf[x];var v=xn([c,d,f,h]);return v}function vu(e,t,r){var s=e.read_shift(4),o=HN(e,s,r),c=e.read_shift(4),d=c>0?$N(e,c,o,r):null;return[o,d]}var QN=vu,bu=vu,JN=vu,ZN=vu,eD={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Wb={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},tD={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function rD(e){var t="of:="+e.replace(sp,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function nD(e){return e.replace(/\./,"!")}var Xl=typeof Map<"u";function op(e,t,r){var s=0,o=e.length;if(r){if(Xl?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var c=Xl?r.get(t):r[t];s<c.length;++s)if(e[c[s]].t===t)return e.Count++,c[s]}}else for(;s<o;++s)if(e[s].t===t)return e.Count++,s;return e[o]={t},e.Count++,e.Unique++,r&&(Xl?(r.has(t)||r.set(t,[]),r.get(t).push(o)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(o))),o}function _u(e,t){var r={min:e+1,max:e+1},s=-1;return t.MDW&&(ia=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?s=nu(t.wpx):t.wch!=null&&(s=t.wch),s>-1?(r.width=S0(s),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function qb(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Ga(e,t,r){var s=r.revssf[t.z!=null?t.z:"General"],o=60,c=e.length;if(s==null&&r.ssf){for(;o<392;++o)if(r.ssf[o]==null){Lv(t.z,o),r.ssf[o]=t.z,r.revssf[t.z]=s=o;break}}for(o=0;o!=c;++o)if(e[o].numFmtId===s)return o;return e[c]={numFmtId:s,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},c}function sD(e,t,r){if(e&&e["!ref"]){var s=kr(e["!ref"]);if(s.e.c<s.s.c||s.e.r<s.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function aD(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Gr(e[r])+'"/>';return t+"</mergeCells>"}function iD(e,t,r,s,o){var c=!1,d={},f=null;if(s.bookType!=="xlsx"&&t.vbaraw){var p=t.SheetNames[r];try{t.Workbook&&(p=t.Workbook.Sheets[r].CodeName||p)}catch{}c=!0,d.codeName=nc(hr(p))}if(e&&e["!outline"]){var h={summaryBelow:1,summaryRight:1};e["!outline"].above&&(h.summaryBelow=0),e["!outline"].left&&(h.summaryRight=0),f=(f||"")+Ze("outlinePr",null,h)}!c&&!f||(o[o.length]=Ze("sheetPr",f,d))}var oD=["objects","scenarios","selectLockedCells","selectUnlockedCells"],lD=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function cD(e){var t={sheet:1};return oD.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),lD.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=Eb(e.password).toString(16).toUpperCase()),Ze("sheetProtection",null,t)}function dD(e){return qb(e),Ze("pageMargins",null,e)}function uD(e,t){for(var r=["<cols>"],s,o=0;o!=t.length;++o)(s=t[o])&&(r[r.length]=Ze("col",null,_u(o,s)));return r[r.length]="</cols>",r.join("")}function fD(e,t,r,s){var o=typeof e.ref=="string"?e.ref:Gr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var c=r.Workbook.Names,d=rs(o);d.s.r==d.e.r&&(d.e.r=rs(t["!ref"]).e.r,o=Gr(d));for(var f=0;f<c.length;++f){var p=c[f];if(p.Name=="_xlnm._FilterDatabase"&&p.Sheet==s){p.Ref="'"+r.SheetNames[s]+"'!"+o;break}}return f==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+r.SheetNames[s]+"'!"+o}),Ze("autoFilter",null,{ref:o})}function hD(e,t,r,s){var o={workbookViewId:"0"};return(((s||{}).Workbook||{}).Views||[])[0]&&(o.rightToLeft=s.Workbook.Views[0].RTL?"1":"0"),Ze("sheetViews",Ze("sheetView",null,o),{})}function pD(e,t,r,s){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var o="",c=e.t,d=e.v;if(e.t!=="z")switch(e.t){case"b":o=e.v?"1":"0";break;case"n":o=""+e.v;break;case"e":o=pc[e.v];break;case"d":s&&s.cellDates?o=In(e.v,-1).toISOString():(e=$n(e),e.t="n",o=""+(e.v=qn(In(e.v)))),typeof e.z>"u"&&(e.z=Pr[14]);break;default:o=e.v;break}var f=mn("v",hr(o)),p={r:t},h=Ga(s.cellXfs,e,s);switch(h!==0&&(p.s=h),e.t){case"n":break;case"d":p.t="d";break;case"b":p.t="b";break;case"e":p.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(s&&s.bookSST){f=mn("v",""+op(s.Strings,e.v,s.revStrings)),p.t="s";break}p.t="str";break}if(e.t!=c&&(e.t=c,e.v=d),typeof e.f=="string"&&e.f){var x=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;f=Ze("f",hr(e.f),x)+(e.v!=null?f:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(p.cm=1),Ze("c",f,p)}function gD(e,t,r,s){var o=[],c=[],d=kr(e["!ref"]),f="",p,h="",x=[],v=0,y=0,b=e["!rows"],w=Array.isArray(e),_={r:h},S,A=-1;for(y=d.s.c;y<=d.e.c;++y)x[y]=Tn(y);for(v=d.s.r;v<=d.e.r;++v){for(c=[],h=yn(v),y=d.s.c;y<=d.e.c;++y){p=x[y]+h;var k=w?(e[v]||[])[y]:e[p];k!==void 0&&(f=pD(k,p,e,t))!=null&&c.push(f)}(c.length>0||b&&b[v])&&(_={r:h},b&&b[v]&&(S=b[v],S.hidden&&(_.hidden=1),A=-1,S.hpx?A=su(S.hpx):S.hpt&&(A=S.hpt),A>-1&&(_.ht=A,_.customHeight=1),S.level&&(_.outlineLevel=S.level)),o[o.length]=Ze("row",c.join(""),_))}if(b)for(;v<b.length;++v)b&&b[v]&&(_={r:v+1},S=b[v],S.hidden&&(_.hidden=1),A=-1,S.hpx?A=su(S.hpx):S.hpt&&(A=S.hpt),A>-1&&(_.ht=A,_.customHeight=1),S.level&&(_.outlineLevel=S.level),o[o.length]=Ze("row","",_));return o.join("")}function $b(e,t,r,s){var o=[Vr,Ze("worksheet",null,{xmlns:Mo[0],"xmlns:r":ln.r})],c=r.SheetNames[e],d=0,f="",p=r.Sheets[c];p==null&&(p={});var h=p["!ref"]||"A1",x=kr(h);if(x.e.c>16383||x.e.r>1048575){if(t.WTF)throw new Error("Range "+h+" exceeds format limit A1:XFD1048576");x.e.c=Math.min(x.e.c,16383),x.e.r=Math.min(x.e.c,1048575),h=Gr(x)}s||(s={}),p["!comments"]=[];var v=[];iD(p,r,e,t,o),o[o.length]=Ze("dimension",null,{ref:h}),o[o.length]=hD(p,t,e,r),t.sheetFormat&&(o[o.length]=Ze("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),p["!cols"]!=null&&p["!cols"].length>0&&(o[o.length]=uD(p,p["!cols"])),o[d=o.length]="<sheetData/>",p["!links"]=[],p["!ref"]!=null&&(f=gD(p,t),f.length>0&&(o[o.length]=f)),o.length>d+1&&(o[o.length]="</sheetData>",o[d]=o[d].replace("/>",">")),p["!protect"]&&(o[o.length]=cD(p["!protect"])),p["!autofilter"]!=null&&(o[o.length]=fD(p["!autofilter"],p,r,e)),p["!merges"]!=null&&p["!merges"].length>0&&(o[o.length]=aD(p["!merges"]));var y=-1,b,w=-1;return p["!links"].length>0&&(o[o.length]="<hyperlinks>",p["!links"].forEach(function(_){_[1].Target&&(b={ref:_[0]},_[1].Target.charAt(0)!="#"&&(w=fr(s,-1,hr(_[1].Target).replace(/#.*$/,""),rr.HLINK),b["r:id"]="rId"+w),(y=_[1].Target.indexOf("#"))>-1&&(b.location=hr(_[1].Target.slice(y+1))),_[1].Tooltip&&(b.tooltip=hr(_[1].Tooltip)),o[o.length]=Ze("hyperlink",null,b))}),o[o.length]="</hyperlinks>"),delete p["!links"],p["!margins"]!=null&&(o[o.length]=dD(p["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(o[o.length]=mn("ignoredErrors",Ze("ignoredError",null,{numberStoredAsText:1,sqref:h}))),v.length>0&&(w=fr(s,-1,"../drawings/drawing"+(e+1)+".xml",rr.DRAW),o[o.length]=Ze("drawing",null,{"r:id":"rId"+w}),p["!drawing"]=v),p["!comments"].length>0&&(w=fr(s,-1,"../drawings/vmlDrawing"+(e+1)+".vml",rr.VML),o[o.length]=Ze("legacyDrawing",null,{"r:id":"rId"+w}),p["!legacy"]=w),o.length>1&&(o[o.length]="</worksheet>",o[1]=o[1].replace("/>",">")),o.join("")}function xD(e,t){var r={},s=e.l+t;r.r=e.read_shift(4),e.l+=4;var o=e.read_shift(2);e.l+=1;var c=e.read_shift(1);return e.l=s,c&7&&(r.level=c&7),c&16&&(r.hidden=!0),c&32&&(r.hpt=o/20),r}function mD(e,t,r){var s=Fe(145),o=(r["!rows"]||[])[e]||{};s.write_shift(4,e),s.write_shift(4,0);var c=320;o.hpx?c=su(o.hpx)*20:o.hpt&&(c=o.hpt*20),s.write_shift(2,c),s.write_shift(1,0);var d=0;o.level&&(d|=o.level),o.hidden&&(d|=16),(o.hpx||o.hpt)&&(d|=32),s.write_shift(1,d),s.write_shift(1,0);var f=0,p=s.l;s.l+=4;for(var h={r:e,c:0},x=0;x<16;++x)if(!(t.s.c>x+1<<10||t.e.c<x<<10)){for(var v=-1,y=-1,b=x<<10;b<x+1<<10;++b){h.c=b;var w=Array.isArray(r)?(r[h.r]||[])[h.c]:r[pr(h)];w&&(v<0&&(v=b),y=b)}v<0||(++f,s.write_shift(4,v),s.write_shift(4,y))}var _=s.l;return s.l=p,s.write_shift(4,f),s.l=_,s.length>s.l?s.slice(0,s.l):s}function yD(e,t,r,s){var o=mD(s,r,t);(o.length>17||(t["!rows"]||[])[s])&&$e(e,0,o)}var vD=ki,bD=Lo;function _D(){}function SD(e,t){var r={},s=e[e.l];return++e.l,r.above=!(s&64),r.left=!(s&128),e.l+=18,r.name=D5(e),r}function wD(e,t,r){r==null&&(r=Fe(84+4*e.length));var s=192;t&&(t.above&&(s&=-65),t.left&&(s&=-129)),r.write_shift(1,s);for(var o=1;o<3;++o)r.write_shift(1,0);return eu({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),ab(e,r),r.slice(0,r.l)}function TD(e){var t=ps(e);return[t]}function jD(e,t,r){return r==null&&(r=Fe(8)),Ti(t,r)}function ED(e){var t=ji(e);return[t]}function kD(e,t,r){return r==null&&(r=Fe(4)),Ei(t,r)}function CD(e){var t=ps(e),r=e.read_shift(1);return[t,r,"b"]}function AD(e,t,r){return r==null&&(r=Fe(9)),Ti(t,r),r.write_shift(1,e.v?1:0),r}function RD(e){var t=ji(e),r=e.read_shift(1);return[t,r,"b"]}function ND(e,t,r){return r==null&&(r=Fe(5)),Ei(t,r),r.write_shift(1,e.v?1:0),r}function DD(e){var t=ps(e),r=e.read_shift(1);return[t,r,"e"]}function OD(e,t,r){return r==null&&(r=Fe(9)),Ti(t,r),r.write_shift(1,e.v),r}function ID(e){var t=ji(e),r=e.read_shift(1);return[t,r,"e"]}function BD(e,t,r){return r==null&&(r=Fe(8)),Ei(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function MD(e){var t=ps(e),r=e.read_shift(4);return[t,r,"s"]}function FD(e,t,r){return r==null&&(r=Fe(12)),Ti(t,r),r.write_shift(4,t.v),r}function LD(e){var t=ji(e),r=e.read_shift(4);return[t,r,"s"]}function PD(e,t,r){return r==null&&(r=Fe(8)),Ei(t,r),r.write_shift(4,t.v),r}function zD(e){var t=ps(e),r=Po(e);return[t,r,"n"]}function UD(e,t,r){return r==null&&(r=Fe(16)),Ti(t,r),bi(e.v,r),r}function WD(e){var t=ji(e),r=Po(e);return[t,r,"n"]}function qD(e,t,r){return r==null&&(r=Fe(12)),Ei(t,r),bi(e.v,r),r}function $D(e){var t=ps(e),r=ib(e);return[t,r,"n"]}function HD(e,t,r){return r==null&&(r=Fe(12)),Ti(t,r),ob(e.v,r),r}function GD(e){var t=ji(e),r=ib(e);return[t,r,"n"]}function VD(e,t,r){return r==null&&(r=Fe(8)),Ei(t,r),ob(e.v,r),r}function YD(e){var t=ps(e),r=Z0(e);return[t,r,"is"]}function KD(e){var t=ps(e),r=jn(e);return[t,r,"str"]}function XD(e,t,r){return r==null&&(r=Fe(12+4*e.v.length)),Ti(t,r),dn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function QD(e){var t=ji(e),r=jn(e);return[t,r,"str"]}function JD(e,t,r){return r==null&&(r=Fe(8+4*e.v.length)),Ei(t,r),dn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function ZD(e,t,r){var s=e.l+t,o=ps(e);o.r=r["!row"];var c=e.read_shift(1),d=[o,c,"b"];if(r.cellFormula){e.l+=2;var f=bu(e,s-e.l,r);d[3]=Ao(f,null,o,r.supbooks,r)}else e.l=s;return d}function eO(e,t,r){var s=e.l+t,o=ps(e);o.r=r["!row"];var c=e.read_shift(1),d=[o,c,"e"];if(r.cellFormula){e.l+=2;var f=bu(e,s-e.l,r);d[3]=Ao(f,null,o,r.supbooks,r)}else e.l=s;return d}function tO(e,t,r){var s=e.l+t,o=ps(e);o.r=r["!row"];var c=Po(e),d=[o,c,"n"];if(r.cellFormula){e.l+=2;var f=bu(e,s-e.l,r);d[3]=Ao(f,null,o,r.supbooks,r)}else e.l=s;return d}function rO(e,t,r){var s=e.l+t,o=ps(e);o.r=r["!row"];var c=jn(e),d=[o,c,"str"];if(r.cellFormula){e.l+=2;var f=bu(e,s-e.l,r);d[3]=Ao(f,null,o,r.supbooks,r)}else e.l=s;return d}var nO=ki,sO=Lo;function aO(e,t){return t==null&&(t=Fe(4)),t.write_shift(4,e),t}function iO(e,t){var r=e.l+t,s=ki(e),o=ep(e),c=jn(e),d=jn(e),f=jn(e);e.l=r;var p={rfx:s,relId:o,loc:c,display:f};return d&&(p.Tooltip=d),p}function oO(e,t){var r=Fe(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Lo({s:cn(e[0]),e:cn(e[0])},r),tp("rId"+t,r);var s=e[1].Target.indexOf("#"),o=s==-1?"":e[1].Target.slice(s+1);return dn(o||"",r),dn(e[1].Tooltip||"",r),dn("",r),r.slice(0,r.l)}function lO(){}function cO(e,t,r){var s=e.l+t,o=lb(e),c=e.read_shift(1),d=[o];if(d[2]=c,r.cellFormula){var f=QN(e,s-e.l,r);d[1]=f}else e.l=s;return d}function dO(e,t,r){var s=e.l+t,o=ki(e),c=[o];if(r.cellFormula){var d=ZN(e,s-e.l,r);c[1]=d,e.l=s}else e.l=s;return c}function uO(e,t,r){r==null&&(r=Fe(18));var s=_u(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(s.width||10)*256),r.write_shift(4,0);var o=0;return t.hidden&&(o|=1),typeof s.width=="number"&&(o|=2),t.level&&(o|=t.level<<8),r.write_shift(2,o),r}var Hb=["left","right","top","bottom","header","footer"];function fO(e){var t={};return Hb.forEach(function(r){t[r]=Po(e)}),t}function hO(e,t){return t==null&&(t=Fe(48)),qb(e),Hb.forEach(function(r){bi(e[r],t)}),t}function pO(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function gO(e,t,r){r==null&&(r=Fe(30));var s=924;return(((t||{}).Views||[])[0]||{}).RTL&&(s|=32),r.write_shift(2,s),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function xO(e){var t=Fe(24);return t.write_shift(4,4),t.write_shift(4,1),Lo(e,t),t}function mO(e,t){return t==null&&(t=Fe(66)),t.write_shift(2,e.password?Eb(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function yO(){}function vO(){}function bO(e,t,r,s,o,c,d){if(t.v===void 0)return!1;var f="";switch(t.t){case"b":f=t.v?"1":"0";break;case"d":t=$n(t),t.z=t.z||Pr[14],t.v=qn(In(t.v)),t.t="n";break;case"n":case"e":f=""+t.v;break;default:f=t.v;break}var p={r,c:s};switch(p.s=Ga(o.cellXfs,t,o),t.l&&c["!links"].push([pr(p),t.l]),t.c&&c["!comments"].push([pr(p),t.c]),t.t){case"s":case"str":return o.bookSST?(f=op(o.Strings,t.v,o.revStrings),p.t="s",p.v=f,d?$e(e,18,PD(t,p)):$e(e,7,FD(t,p))):(p.t="str",d?$e(e,17,JD(t,p)):$e(e,6,XD(t,p))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?d?$e(e,13,VD(t,p)):$e(e,2,HD(t,p)):d?$e(e,16,qD(t,p)):$e(e,5,UD(t,p)),!0;case"b":return p.t="b",d?$e(e,15,ND(t,p)):$e(e,4,AD(t,p)),!0;case"e":return p.t="e",d?$e(e,14,BD(t,p)):$e(e,3,OD(t,p)),!0}return d?$e(e,12,kD(t,p)):$e(e,1,jD(t,p)),!0}function _O(e,t,r,s){var o=kr(t["!ref"]||"A1"),c,d="",f=[];$e(e,145);var p=Array.isArray(t),h=o.e.r;t["!rows"]&&(h=Math.max(o.e.r,t["!rows"].length-1));for(var x=o.s.r;x<=h;++x){d=yn(x),yD(e,t,o,x);var v=!1;if(x<=o.e.r)for(var y=o.s.c;y<=o.e.c;++y){x===o.s.r&&(f[y]=Tn(y)),c=f[y]+d;var b=p?(t[x]||[])[y]:t[c];if(!b){v=!1;continue}v=bO(e,b,x,y,s,t,v)}}$e(e,146)}function SO(e,t){!t||!t["!merges"]||($e(e,177,aO(t["!merges"].length)),t["!merges"].forEach(function(r){$e(e,176,sO(r))}),$e(e,178))}function wO(e,t){!t||!t["!cols"]||($e(e,390),t["!cols"].forEach(function(r,s){r&&$e(e,60,uO(s,r))}),$e(e,391))}function TO(e,t){!t||!t["!ref"]||($e(e,648),$e(e,649,xO(kr(t["!ref"]))),$e(e,650))}function jO(e,t,r){t["!links"].forEach(function(s){if(s[1].Target){var o=fr(r,-1,s[1].Target.replace(/#.*$/,""),rr.HLINK);$e(e,494,oO(s,o))}}),delete t["!links"]}function EO(e,t,r,s){if(t["!comments"].length>0){var o=fr(s,-1,"../drawings/vmlDrawing"+(r+1)+".vml",rr.VML);$e(e,551,tp("rId"+o)),t["!legacy"]=o}}function kO(e,t,r,s){if(t["!autofilter"]){var o=t["!autofilter"],c=typeof o.ref=="string"?o.ref:Gr(o.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var d=r.Workbook.Names,f=rs(c);f.s.r==f.e.r&&(f.e.r=rs(t["!ref"]).e.r,c=Gr(f));for(var p=0;p<d.length;++p){var h=d[p];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==s){h.Ref="'"+r.SheetNames[s]+"'!"+c;break}}p==d.length&&d.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+r.SheetNames[s]+"'!"+c}),$e(e,161,Lo(kr(c))),$e(e,162)}}function CO(e,t,r){$e(e,133),$e(e,137,gO(t,r)),$e(e,138),$e(e,134)}function AO(e,t){t["!protect"]&&$e(e,535,mO(t["!protect"]))}function RO(e,t,r,s){var o=Wn(),c=r.SheetNames[e],d=r.Sheets[c]||{},f=c;try{r&&r.Workbook&&(f=r.Workbook.Sheets[e].CodeName||f)}catch{}var p=kr(d["!ref"]||"A1");if(p.e.c>16383||p.e.r>1048575){if(t.WTF)throw new Error("Range "+(d["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575)}return d["!links"]=[],d["!comments"]=[],$e(o,129),(r.vbaraw||d["!outline"])&&$e(o,147,wD(f,d["!outline"])),$e(o,148,bD(p)),CO(o,d,r.Workbook),wO(o,d),_O(o,d,e,t),AO(o,d),kO(o,d,r,e),SO(o,d),jO(o,d,s),d["!margins"]&&$e(o,476,hO(d["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&TO(o,d),EO(o,d,e,s),$e(o,130),o.end()}function NO(e,t){e.l+=10;var r=jn(e);return{name:r}}var DO=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function OO(e){return!e.Workbook||!e.Workbook.WBProps?"false":d5(e.Workbook.WBProps.date1904)?"true":"false"}var IO="][*?/\\".split("");function Gb(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return IO.forEach(function(s){if(e.indexOf(s)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function BO(e,t,r){e.forEach(function(s,o){Gb(s);for(var c=0;c<o;++c)if(s==e[c])throw new Error("Duplicate Sheet Name: "+s);if(r){var d=t&&t[o]&&t[o].CodeName||s;if(d.charCodeAt(0)==95&&d.length>22)throw new Error("Bad Code Name: Worksheet"+d)}})}function MO(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];BO(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)sD(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function Vb(e){var t=[Vr];t[t.length]=Ze("workbook",null,{xmlns:Mo[0],"xmlns:r":ln.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,s={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(DO.forEach(function(f){e.Workbook.WBProps[f[0]]!=null&&e.Workbook.WBProps[f[0]]!=f[1]&&(s[f[0]]=e.Workbook.WBProps[f[0]])}),e.Workbook.WBProps.CodeName&&(s.codeName=e.Workbook.WBProps.CodeName,delete s.CodeName)),t[t.length]=Ze("workbookPr",null,s);var o=e.Workbook&&e.Workbook.Sheets||[],c=0;if(o&&o[0]&&o[0].Hidden){for(t[t.length]="<bookViews>",c=0;c!=e.SheetNames.length&&!(!o[c]||!o[c].Hidden);++c);c==e.SheetNames.length&&(c=0),t[t.length]='<workbookView firstSheet="'+c+'" activeTab="'+c+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",c=0;c!=e.SheetNames.length;++c){var d={name:hr(e.SheetNames[c].slice(0,31))};if(d.sheetId=""+(c+1),d["r:id"]="rId"+(c+1),o[c])switch(o[c].Hidden){case 1:d.state="hidden";break;case 2:d.state="veryHidden";break}t[t.length]=Ze("sheet",null,d)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(f){var p={name:f.Name};f.Comment&&(p.comment=f.Comment),f.Sheet!=null&&(p.localSheetId=""+f.Sheet),f.Hidden&&(p.hidden="1"),f.Ref&&(t[t.length]=Ze("definedName",hr(f.Ref),p))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function FO(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=_0(e),r.name=jn(e),r}function LO(e,t){return t||(t=Fe(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),tp(e.strRelID,t),dn(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function PO(e,t){var r={},s=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var o=t>8?jn(e):"";return o.length>0&&(r.CodeName=o),r.autoCompressPictures=!!(s&65536),r.backupFile=!!(s&64),r.checkCompatibility=!!(s&4096),r.date1904=!!(s&1),r.filterPrivacy=!!(s&8),r.hidePivotFieldList=!!(s&1024),r.promptedSolutions=!!(s&16),r.publishItems=!!(s&2048),r.refreshAllConnections=!!(s&262144),r.saveExternalLinkValues=!!(s&128),r.showBorderUnselectedTables=!!(s&4),r.showInkAnnotation=!!(s&32),r.showObjects=["all","placeholders","none"][s>>13&3],r.showPivotChartFilter=!!(s&32768),r.updateLinks=["userSet","never","always"][s>>8&3],r}function zO(e,t){t||(t=Fe(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),ab(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function UO(e,t,r){var s=e.l+t;e.l+=4,e.l+=1;var o=e.read_shift(4),c=O5(e),d=JN(e,0,r),f=ep(e);e.l=s;var p={Name:c,Ptg:d};return o<268435455&&(p.Sheet=o),f&&(p.Comment=f),p}function WO(e,t){$e(e,143);for(var r=0;r!=t.SheetNames.length;++r){var s=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,o={Hidden:s,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};$e(e,156,LO(o))}$e(e,144)}function qO(e,t){t||(t=Fe(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return dn("SheetJS",t),dn(Gd.version,t),dn(Gd.version,t),dn("7262",t),t.length>t.l?t.slice(0,t.l):t}function $O(e,t){t||(t=Fe(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function HO(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,s=0,o=-1,c=-1;s<r.length;++s)!r[s]||!r[s].Hidden&&o==-1?o=s:r[s].Hidden==1&&c==-1&&(c=s);c>o||($e(e,135),$e(e,158,$O(o)),$e(e,136))}}function GO(e,t){var r=Wn();return $e(r,131),$e(r,128,qO()),$e(r,153,zO(e.Workbook&&e.Workbook.WBProps||null)),HO(r,e),WO(r,e),$e(r,132),r.end()}function VO(e,t,r){return(t.slice(-4)===".bin"?GO:Vb)(e)}function YO(e,t,r,s,o){return(t.slice(-4)===".bin"?RO:$b)(e,r,s,o)}function KO(e,t,r){return(t.slice(-4)===".bin"?hR:Ab)(e,r)}function XO(e,t,r){return(t.slice(-4)===".bin"?zA:jb)(e,r)}function QO(e,t,r){return(t.slice(-4)===".bin"?AR:Ib)(e)}function JO(e){return(e.slice(-4)===".bin"?_R:Db)()}function ZO(e,t){var r=[];return e.Props&&r.push(K5(e.Props,t)),e.Custprops&&r.push(X5(e.Props,e.Custprops)),r.join("")}function eI(){return""}function tI(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(s,o){var c=[];c.push(Ze("NumberFormat",null,{"ss:Format":hr(Pr[s.numFmtId])}));var d={"ss:ID":"s"+(21+o)};r.push(Ze("Style",c.join(""),d))}),Ze("Styles",r.join(""))}function Yb(e){return Ze("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+ap(e.Ref,{r:0,c:0})})}function rI(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],s=0;s<t.length;++s){var o=t[s];o.Sheet==null&&(o.Name.match(/^_xlfn\./)||r.push(Yb(o)))}return Ze("Names",r.join(""))}function nI(e,t,r,s){if(!e||!((s||{}).Workbook||{}).Names)return"";for(var o=s.Workbook.Names,c=[],d=0;d<o.length;++d){var f=o[d];f.Sheet==r&&(f.Name.match(/^_xlfn\./)||c.push(Yb(f)))}return c.join("")}function sI(e,t,r,s){if(!e)return"";var o=[];if(e["!margins"]&&(o.push("<PageSetup>"),e["!margins"].header&&o.push(Ze("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&o.push(Ze("Footer",null,{"x:Margin":e["!margins"].footer})),o.push(Ze("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),o.push("</PageSetup>")),s&&s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[r])if(s.Workbook.Sheets[r].Hidden)o.push(Ze("Visible",s.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var c=0;c<r&&!(s.Workbook.Sheets[c]&&!s.Workbook.Sheets[c].Hidden);++c);c==r&&o.push("<Selected/>")}return((((s||{}).Workbook||{}).Views||[])[0]||{}).RTL&&o.push("<DisplayRightToLeft/>"),e["!protect"]&&(o.push(mn("ProtectContents","True")),e["!protect"].objects&&o.push(mn("ProtectObjects","True")),e["!protect"].scenarios&&o.push(mn("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?o.push(mn("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&o.push(mn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(d){e["!protect"][d[0]]&&o.push("<"+d[1]+"/>")})),o.length==0?"":Ze("WorksheetOptions",o.join(""),{xmlns:es.x})}function aI(e){return e.map(function(t){var r=c5(t.t||""),s=Ze("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ze("Comment",s,{"ss:Author":t.a})}).join("")}function iI(e,t,r,s,o,c,d){if(!e||e.v==null&&e.f==null)return"";var f={};if(e.f&&(f["ss:Formula"]="="+hr(ap(e.f,d))),e.F&&e.F.slice(0,t.length)==t){var p=cn(e.F.slice(t.length+1));f["ss:ArrayRange"]="RC:R"+(p.r==d.r?"":"["+(p.r-d.r)+"]")+"C"+(p.c==d.c?"":"["+(p.c-d.c)+"]")}if(e.l&&e.l.Target&&(f["ss:HRef"]=hr(e.l.Target),e.l.Tooltip&&(f["x:HRefScreenTip"]=hr(e.l.Tooltip))),r["!merges"])for(var h=r["!merges"],x=0;x!=h.length;++x)h[x].s.c!=d.c||h[x].s.r!=d.r||(h[x].e.c>h[x].s.c&&(f["ss:MergeAcross"]=h[x].e.c-h[x].s.c),h[x].e.r>h[x].s.r&&(f["ss:MergeDown"]=h[x].e.r-h[x].s.r));var v="",y="";switch(e.t){case"z":if(!s.sheetStubs)return"";break;case"n":v="Number",y=String(e.v);break;case"b":v="Boolean",y=e.v?"1":"0";break;case"e":v="Error",y=pc[e.v];break;case"d":v="DateTime",y=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Pr[14]);break;case"s":v="String",y=l5(e.v||"");break}var b=Ga(s.cellXfs,e,s);f["ss:StyleID"]="s"+(21+b),f["ss:Index"]=d.c+1;var w=e.v!=null?y:"",_=e.t=="z"?"":'<Data ss:Type="'+v+'">'+w+"</Data>";return(e.c||[]).length>0&&(_+=aI(e.c)),Ze("Cell",_,f)}function oI(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Cb(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function lI(e,t,r,s){if(!e["!ref"])return"";var o=kr(e["!ref"]),c=e["!merges"]||[],d=0,f=[];e["!cols"]&&e["!cols"].forEach(function(S,A){np(S);var k=!!S.width,O=_u(A,S),L={"ss:Index":A+1};k&&(L["ss:Width"]=ru(O.width)),S.hidden&&(L["ss:Hidden"]="1"),f.push(Ze("Column",null,L))});for(var p=Array.isArray(e),h=o.s.r;h<=o.e.r;++h){for(var x=[oI(h,(e["!rows"]||[])[h])],v=o.s.c;v<=o.e.c;++v){var y=!1;for(d=0;d!=c.length;++d)if(!(c[d].s.c>v)&&!(c[d].s.r>h)&&!(c[d].e.c<v)&&!(c[d].e.r<h)){(c[d].s.c!=v||c[d].s.r!=h)&&(y=!0);break}if(!y){var b={r:h,c:v},w=pr(b),_=p?(e[h]||[])[v]:e[w];x.push(iI(_,w,e,t,r,s,b))}}x.push("</Row>"),x.length>2&&f.push(x.join(""))}return f.join("")}function cI(e,t,r){var s=[],o=r.SheetNames[e],c=r.Sheets[o],d=c?nI(c,t,e,r):"";return d.length>0&&s.push("<Names>"+d+"</Names>"),d=c?lI(c,t,e,r):"",d.length>0&&s.push("<Table>"+d+"</Table>"),s.push(sI(c,t,e,r)),s.join("")}function dI(e,t){t||(t={}),e.SSF||(e.SSF=$n(Pr)),e.SSF&&(xu(),gu(e.SSF),t.revssf=mu(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Ga(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(ZO(e,t)),r.push(eI()),r.push(""),r.push("");for(var s=0;s<e.SheetNames.length;++s)r.push(Ze("Worksheet",cI(s,t,e),{"ss:Name":hr(e.SheetNames[s])}));return r[2]=tI(e,t),r[3]=rI(e),Vr+Ze("Workbook",r.join(""),{xmlns:es.ss,"xmlns:o":es.o,"xmlns:x":es.x,"xmlns:ss":es.ss,"xmlns:dt":es.dt,"xmlns:html":es.html})}var Xh={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function uI(e,t){var r=[],s=[],o=[],c=0,d,f=G1(ay,"n"),p=G1(iy,"n");if(e.Props)for(d=vn(e.Props),c=0;c<d.length;++c)(Object.prototype.hasOwnProperty.call(f,d[c])?r:Object.prototype.hasOwnProperty.call(p,d[c])?s:o).push([d[c],e.Props[d[c]]]);if(e.Custprops)for(d=vn(e.Custprops),c=0;c<d.length;++c)Object.prototype.hasOwnProperty.call(e.Props||{},d[c])||(Object.prototype.hasOwnProperty.call(f,d[c])?r:Object.prototype.hasOwnProperty.call(p,d[c])?s:o).push([d[c],e.Custprops[d[c]]]);var h=[];for(c=0;c<o.length;++c)yb.indexOf(o[c][0])>-1||gb.indexOf(o[c][0])>-1||o[c][1]!=null&&h.push(o[c]);s.length&&br.utils.cfb_add(t,"/SummaryInformation",uy(s,Xh.SI,p,iy)),(r.length||h.length)&&br.utils.cfb_add(t,"/DocumentSummaryInformation",uy(r,Xh.DSI,f,ay,h.length?h:null,Xh.UDI))}function fI(e,t){var r=t||{},s=br.utils.cfb_new({root:"R"}),o="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":o="/Workbook",r.biff=8;break;case"biff5":o="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return br.utils.cfb_add(s,o,Kb(e,r)),r.biff==8&&(e.Props||e.Custprops)&&uI(e,s),r.biff==8&&e.vbaraw&&RR(s,br.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),s}var hI={0:{f:xD},1:{f:TD},2:{f:$D},3:{f:DD},4:{f:CD},5:{f:zD},6:{f:KD},7:{f:MD},8:{f:rO},9:{f:tO},10:{f:ZD},11:{f:eO},12:{f:ED},13:{f:GD},14:{f:ID},15:{f:RD},16:{f:WD},17:{f:QD},18:{f:LD},19:{f:Z0},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:UO},40:{},42:{},43:{f:KA},44:{f:VA},45:{f:JA},46:{f:eR},47:{f:ZA},48:{},49:{f:E5},50:{},51:{f:xR},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:kA},62:{f:YD},63:{f:SR},64:{f:yO},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Fs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:pO},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:SD},148:{f:vD,p:16},151:{f:lO},152:{},153:{f:PO},154:{},155:{},156:{f:FO},157:{},158:{},159:{T:1,f:FA},160:{T:-1},161:{T:1,f:ki},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:nO},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:pR},336:{T:-1},337:{f:vR,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:_0},357:{},358:{},359:{},360:{T:1},361:{},362:{f:_A},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:cO},427:{f:dO},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:fO},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:_D},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:iO},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:_0},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:kR},633:{T:1},634:{T:-1},635:{T:1,f:jR},636:{T:-1},637:{f:R5},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:NO},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:vO},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function et(e,t,r,s){var o=t;if(!isNaN(o)){var c=s||(r||[]).length||0,d=e.next(4);d.write_shift(2,o),d.write_shift(2,c),c>0&&X0(r)&&e.push(r)}}function pI(e,t,r,s){var o=(r||[]).length||0;if(o<=8224)return et(e,t,r,o);var c=t;if(!isNaN(c)){for(var d=r.parts||[],f=0,p=0,h=0;h+(d[f]||8224)<=8224;)h+=d[f]||8224,f++;var x=e.next(4);for(x.write_shift(2,c),x.write_shift(2,h),e.push(r.slice(p,p+h)),p+=h;p<o;){for(x=e.next(4),x.write_shift(2,60),h=0;h+(d[f]||8224)<=8224;)h+=d[f]||8224,f++;x.write_shift(2,h),e.push(r.slice(p,p+h)),p+=h}}}function xc(e,t,r){return e||(e=Fe(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function gI(e,t,r,s){var o=Fe(9);return xc(o,e,t),bb(r,s||"b",o),o}function xI(e,t,r){var s=Fe(8+2*r.length);return xc(s,e,t),s.write_shift(1,r.length),s.write_shift(r.length,r,"sbcs"),s.l<s.length?s.slice(0,s.l):s}function mI(e,t,r,s){if(t.v!=null)switch(t.t){case"d":case"n":var o=t.t=="d"?qn(In(t.v)):t.v;o==(o|0)&&o>=0&&o<65536?et(e,2,NA(r,s,o)):et(e,3,RA(r,s,o));return;case"b":case"e":et(e,5,gI(r,s,t.v,t.t));return;case"s":case"str":et(e,4,xI(r,s,(t.v||"").slice(0,255)));return}et(e,1,xc(null,r,s))}function yI(e,t,r,s){var o=Array.isArray(t),c=kr(t["!ref"]||"A1"),d,f="",p=[];if(c.e.c>255||c.e.r>16383){if(s.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");c.e.c=Math.min(c.e.c,255),c.e.r=Math.min(c.e.c,16383),d=Gr(c)}for(var h=c.s.r;h<=c.e.r;++h){f=yn(h);for(var x=c.s.c;x<=c.e.c;++x){h===c.s.r&&(p[x]=Tn(x)),d=p[x]+f;var v=o?(t[h]||[])[x]:t[d];v&&mI(e,v,h,x)}}}function vI(e,t){for(var r=t||{},s=Wn(),o=0,c=0;c<e.SheetNames.length;++c)e.SheetNames[c]==r.sheet&&(o=c);if(o==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return et(s,r.biff==4?1033:r.biff==3?521:9,rp(e,16,r)),yI(s,e.Sheets[e.SheetNames[o]],o,r),et(s,10),s.end()}function bI(e,t,r){et(e,49,hA({sz:12,name:"Arial"},r))}function _I(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var o=s[0];o<=s[1];++o)t[o]!=null&&et(e,1054,xA(o,t[o],r))})}function SI(e,t){var r=Fe(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),et(e,2151,r),r=Fe(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),wb(kr(t["!ref"]||"A1"),r),r.write_shift(4,4),et(e,2152,r)}function wI(e,t){for(var r=0;r<16;++r)et(e,224,hy({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(s){et(e,224,hy(s,0,t))})}function TI(e,t){for(var r=0;r<t["!links"].length;++r){var s=t["!links"][r];et(e,440,TA(s)),s[1].Tooltip&&et(e,2048,jA(s))}delete t["!links"]}function jI(e,t){if(t){var r=0;t.forEach(function(s,o){++r<=256&&s&&et(e,125,CA(_u(o,s),o))})}}function EI(e,t,r,s,o){var c=16+Ga(o.cellXfs,t,o);if(t.v==null&&!t.bf){et(e,513,_i(r,s,c));return}if(t.bf)et(e,6,XN(t,r,s,o,c));else switch(t.t){case"d":case"n":var d=t.t=="d"?qn(In(t.v)):t.v;et(e,515,bA(r,s,d,c));break;case"b":case"e":et(e,517,vA(r,s,t.v,c,o,t.t));break;case"s":case"str":if(o.bookSST){var f=op(o.Strings,t.v,o.revStrings);et(e,253,pA(r,s,f,c))}else et(e,516,gA(r,s,(t.v||"").slice(0,255),c,o));break;default:et(e,513,_i(r,s,c))}}function kI(e,t,r){var s=Wn(),o=r.SheetNames[e],c=r.Sheets[o]||{},d=(r||{}).Workbook||{},f=(d.Sheets||[])[e]||{},p=Array.isArray(c),h=t.biff==8,x,v="",y=[],b=kr(c["!ref"]||"A1"),w=h?65536:16384;if(b.e.c>255||b.e.r>=w){if(t.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:IV16384");b.e.c=Math.min(b.e.c,255),b.e.r=Math.min(b.e.c,w-1)}et(s,2057,rp(r,16,t)),et(s,13,us(1)),et(s,12,us(100)),et(s,15,On(!0)),et(s,17,On(!1)),et(s,16,bi(.001)),et(s,95,On(!0)),et(s,42,On(!1)),et(s,43,On(!1)),et(s,130,us(1)),et(s,128,yA()),et(s,131,On(!1)),et(s,132,On(!1)),h&&jI(s,c["!cols"]),et(s,512,mA(b,t)),h&&(c["!links"]=[]);for(var _=b.s.r;_<=b.e.r;++_){v=yn(_);for(var S=b.s.c;S<=b.e.c;++S){_===b.s.r&&(y[S]=Tn(S)),x=y[S]+v;var A=p?(c[_]||[])[S]:c[x];A&&(EI(s,A,_,S,t),h&&A.l&&c["!links"].push([x,A.l]))}}var k=f.CodeName||f.name||o;return h&&et(s,574,fA((d.Views||[])[0])),h&&(c["!merges"]||[]).length&&et(s,229,wA(c["!merges"])),h&&TI(s,c),et(s,442,Sb(k)),h&&SI(s,c),et(s,10),s.end()}function CI(e,t,r){var s=Wn(),o=(e||{}).Workbook||{},c=o.Sheets||[],d=o.WBProps||{},f=r.biff==8,p=r.biff==5;if(et(s,2057,rp(e,5,r)),r.bookType=="xla"&&et(s,135),et(s,225,f?us(1200):null),et(s,193,Z5(2)),p&&et(s,191),p&&et(s,192),et(s,226),et(s,92,lA("SheetJS",r)),et(s,66,us(f?1200:1252)),f&&et(s,353,us(0)),f&&et(s,448),et(s,317,AA(e.SheetNames.length)),f&&e.vbaraw&&et(s,211),f&&e.vbaraw){var h=d.CodeName||"ThisWorkbook";et(s,442,Sb(h))}et(s,156,us(17)),et(s,25,On(!1)),et(s,18,On(!1)),et(s,19,us(0)),f&&et(s,431,On(!1)),f&&et(s,444,us(0)),et(s,61,uA()),et(s,64,On(!1)),et(s,141,us(0)),et(s,34,On(OO(e)=="true")),et(s,14,On(!0)),f&&et(s,439,On(!1)),et(s,218,us(0)),bI(s,e,r),_I(s,e.SSF,r),wI(s,r),f&&et(s,352,On(!1));var x=s.end(),v=Wn();f&&et(v,140,EA()),f&&r.Strings&&pI(v,252,dA(r.Strings)),et(v,10);var y=v.end(),b=Wn(),w=0,_=0;for(_=0;_<e.SheetNames.length;++_)w+=(f?12:11)+(f?2:1)*e.SheetNames[_].length;var S=x.length+w+y.length;for(_=0;_<e.SheetNames.length;++_){var A=c[_]||{};et(b,133,cA({pos:S,hs:A.Hidden||0,dt:0,name:e.SheetNames[_]},r)),S+=t[_].length}var k=b.end();if(w!=k.length)throw new Error("BS8 "+w+" != "+k.length);var O=[];return x.length&&O.push(x),k.length&&O.push(k),y.length&&O.push(y),xn(O)}function AI(e,t){var r=t||{},s=[];e&&!e.SSF&&(e.SSF=$n(Pr)),e&&e.SSF&&(xu(),gu(e.SSF),r.revssf=mu(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,lp(r),r.cellXfs=[],Ga(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var o=0;o<e.SheetNames.length;++o)s[s.length]=kI(o,r,e);return s.unshift(CI(e,s,r)),xn(s)}function Kb(e,t){for(var r=0;r<=e.SheetNames.length;++r){var s=e.Sheets[e.SheetNames[r]];if(!(!s||!s["!ref"])){var o=rs(s["!ref"]);o.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var c=t||{};switch(c.biff||2){case 8:case 5:return AI(e,t);case 4:case 3:case 2:return vI(e,t)}throw new Error("invalid type "+c.bookType+" for BIFF")}function RI(e,t,r,s){for(var o=e["!merges"]||[],c=[],d=t.s.c;d<=t.e.c;++d){for(var f=0,p=0,h=0;h<o.length;++h)if(!(o[h].s.r>r||o[h].s.c>d)&&!(o[h].e.r<r||o[h].e.c<d)){if(o[h].s.r<r||o[h].s.c<d){f=-1;break}f=o[h].e.r-o[h].s.r+1,p=o[h].e.c-o[h].s.c+1;break}if(!(f<0)){var x=pr({r,c:d}),v=s.dense?(e[r]||[])[d]:e[x],y=v&&v.v!=null&&(v.h||o5(v.w||(ca(v),v.w)||""))||"",b={};f>1&&(b.rowspan=f),p>1&&(b.colspan=p),s.editable?y='<span contenteditable="true">'+y+"</span>":v&&(b["data-t"]=v&&v.t||"z",v.v!=null&&(b["data-v"]=v.v),v.z!=null&&(b["data-z"]=v.z),v.l&&(v.l.Target||"#").charAt(0)!="#"&&(y='<a href="'+v.l.Target+'">'+y+"</a>")),b.id=(s.id||"sjs")+"-"+x,c.push(Ze("td",y,b))}}var w="<tr>";return w+c.join("")+"</tr>"}var NI='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',DI="</body></html>";function OI(e,t,r){var s=[];return s.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Xb(e,t){var r=t||{},s=r.header!=null?r.header:NI,o=r.footer!=null?r.footer:DI,c=[s],d=rs(e["!ref"]);r.dense=Array.isArray(e),c.push(OI(e,d,r));for(var f=d.s.r;f<=d.e.r;++f)c.push(RI(e,d,f,r));return c.push("</table>"+o),c.join("")}function Qb(e,t,r){var s=r||{},o=0,c=0;if(s.origin!=null)if(typeof s.origin=="number")o=s.origin;else{var d=typeof s.origin=="string"?cn(s.origin):s.origin;o=d.r,c=d.c}var f=t.getElementsByTagName("tr"),p=Math.min(s.sheetRows||1e7,f.length),h={s:{r:0,c:0},e:{r:o,c}};if(e["!ref"]){var x=rs(e["!ref"]);h.s.r=Math.min(h.s.r,x.s.r),h.s.c=Math.min(h.s.c,x.s.c),h.e.r=Math.max(h.e.r,x.e.r),h.e.c=Math.max(h.e.c,x.e.c),o==-1&&(h.e.r=o=x.e.r+1)}var v=[],y=0,b=e["!rows"]||(e["!rows"]=[]),w=0,_=0,S=0,A=0,k=0,O=0;for(e["!cols"]||(e["!cols"]=[]);w<f.length&&_<p;++w){var L=f[w];if(by(L)){if(s.display)continue;b[_]={hidden:!0}}var K=L.children;for(S=A=0;S<K.length;++S){var ne=K[S];if(!(s.display&&by(ne))){var M=ne.hasAttribute("data-v")?ne.getAttribute("data-v"):ne.hasAttribute("v")?ne.getAttribute("v"):u5(ne.innerHTML),re=ne.getAttribute("data-z")||ne.getAttribute("z");for(y=0;y<v.length;++y){var ee=v[y];ee.s.c==A+c&&ee.s.r<_+o&&_+o<=ee.e.r&&(A=ee.e.c+1-c,y=-1)}O=+ne.getAttribute("colspan")||1,((k=+ne.getAttribute("rowspan")||1)>1||O>1)&&v.push({s:{r:_+o,c:A+c},e:{r:_+o+(k||1)-1,c:A+c+(O||1)-1}});var de={t:"s",v:M},oe=ne.getAttribute("data-t")||ne.getAttribute("t")||"";M!=null&&(M.length==0?de.t=oe||"z":s.raw||M.trim().length==0||oe=="s"||(M==="TRUE"?de={t:"b",v:!0}:M==="FALSE"?de={t:"b",v:!1}:isNaN(aa(M))?isNaN(rc(M).getDate())||(de={t:"d",v:In(M)},s.cellDates||(de={t:"n",v:qn(de.v)}),de.z=s.dateNF||Pr[14]):de={t:"n",v:aa(M)})),de.z===void 0&&re!=null&&(de.z=re);var Q="",te=ne.getElementsByTagName("A");if(te&&te.length)for(var ae=0;ae<te.length&&!(te[ae].hasAttribute("href")&&(Q=te[ae].getAttribute("href"),Q.charAt(0)!="#"));++ae);Q&&Q.charAt(0)!="#"&&(de.l={Target:Q}),s.dense?(e[_+o]||(e[_+o]=[]),e[_+o][A+c]=de):e[pr({c:A+c,r:_+o})]=de,h.e.c<A+c&&(h.e.c=A+c),A+=O}}++_}return v.length&&(e["!merges"]=(e["!merges"]||[]).concat(v)),h.e.r=Math.max(h.e.r,_-1+o),e["!ref"]=Gr(h),_>=p&&(e["!fullref"]=Gr((h.e.r=f.length-w+_-1+o,h))),e}function Jb(e,t){var r=t||{},s=r.dense?[]:{};return Qb(s,e,t)}function II(e,t){return wi(Jb(e,t),t)}function by(e){var t="",r=BI(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function BI(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var MI=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+sc({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Vr+t}})(),_y=(function(){var e=function(c){return hr(c).replace(/  +/g,function(d){return'<text:s text:c="'+d.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,s=function(c,d,f){var p=[];p.push('      <table:table table:name="'+hr(d.SheetNames[f])+`" table:style-name="ta1">
`);var h=0,x=0,v=rs(c["!ref"]||"A1"),y=c["!merges"]||[],b=0,w=Array.isArray(c);if(c["!cols"])for(x=0;x<=v.e.c;++x)p.push("        <table:table-column"+(c["!cols"][x]?' table:style-name="co'+c["!cols"][x].ods+'"':"")+`></table:table-column>
`);var _="",S=c["!rows"]||[];for(h=0;h<v.s.r;++h)_=S[h]?' table:style-name="ro'+S[h].ods+'"':"",p.push("        <table:table-row"+_+`></table:table-row>
`);for(;h<=v.e.r;++h){for(_=S[h]?' table:style-name="ro'+S[h].ods+'"':"",p.push("        <table:table-row"+_+`>
`),x=0;x<v.s.c;++x)p.push(t);for(;x<=v.e.c;++x){var A=!1,k={},O="";for(b=0;b!=y.length;++b)if(!(y[b].s.c>x)&&!(y[b].s.r>h)&&!(y[b].e.c<x)&&!(y[b].e.r<h)){(y[b].s.c!=x||y[b].s.r!=h)&&(A=!0),k["table:number-columns-spanned"]=y[b].e.c-y[b].s.c+1,k["table:number-rows-spanned"]=y[b].e.r-y[b].s.r+1;break}if(A){p.push(r);continue}var L=pr({r:h,c:x}),K=w?(c[h]||[])[x]:c[L];if(K&&K.f&&(k["table:formula"]=hr(rD(K.f)),K.F&&K.F.slice(0,L.length)==L)){var ne=rs(K.F);k["table:number-matrix-columns-spanned"]=ne.e.c-ne.s.c+1,k["table:number-matrix-rows-spanned"]=ne.e.r-ne.s.r+1}if(!K){p.push(t);continue}switch(K.t){case"b":O=K.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=K.v?"true":"false";break;case"n":O=K.w||String(K.v||0),k["office:value-type"]="float",k["office:value"]=K.v||0;break;case"s":case"str":O=K.v==null?"":K.v,k["office:value-type"]="string";break;case"d":O=K.w||In(K.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=In(K.v).toISOString(),k["table:style-name"]="ce1";break;default:p.push(t);continue}var M=e(O);if(K.l&&K.l.Target){var re=K.l.Target;re=re.charAt(0)=="#"?"#"+nD(re.slice(1)):re,re.charAt(0)!="#"&&!re.match(/^\w+:/)&&(re="../"+re),M=Ze("text:a",M,{"xlink:href":re.replace(/&/g,"&amp;")})}p.push("          "+Ze("table:table-cell",Ze("text:p",M,{}),k)+`
`)}p.push(`        </table:table-row>
`)}return p.push(`      </table:table>
`),p.join("")},o=function(c,d){c.push(` <office:automatic-styles>
`),c.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),c.push(`   <number:month number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:day number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:year/>
`),c.push(`  </number:date-style>
`);var f=0;d.SheetNames.map(function(h){return d.Sheets[h]}).forEach(function(h){if(h&&h["!cols"]){for(var x=0;x<h["!cols"].length;++x)if(h["!cols"][x]){var v=h["!cols"][x];if(v.width==null&&v.wpx==null&&v.wch==null)continue;np(v),v.ods=f;var y=h["!cols"][x].wpx+"px";c.push('  <style:style style:name="co'+f+`" style:family="table-column">
`),c.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+y+`"/>
`),c.push(`  </style:style>
`),++f}}});var p=0;d.SheetNames.map(function(h){return d.Sheets[h]}).forEach(function(h){if(h&&h["!rows"]){for(var x=0;x<h["!rows"].length;++x)if(h["!rows"][x]){h["!rows"][x].ods=p;var v=h["!rows"][x].hpx+"px";c.push('  <style:style style:name="ro'+p+`" style:family="table-row">
`),c.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+v+`"/>
`),c.push(`  </style:style>
`),++p}}}),c.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),c.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),c.push(`  </style:style>
`),c.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),c.push(` </office:automatic-styles>
`)};return function(d,f){var p=[Vr],h=sc({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),x=sc({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});f.bookType=="fods"?(p.push("<office:document"+h+x+`>
`),p.push(hb().replace(/office:document-meta/g,"office:meta"))):p.push("<office:document-content"+h+`>
`),o(p,d),p.push(`  <office:body>
`),p.push(`    <office:spreadsheet>
`);for(var v=0;v!=d.SheetNames.length;++v)p.push(s(d.Sheets[d.SheetNames[v]],d,v));return p.push(`    </office:spreadsheet>
`),p.push(`  </office:body>
`),f.bookType=="fods"?p.push("</office:document>"):p.push("</office:document-content>"),p.join("")}})();function Zb(e,t){if(t.bookType=="fods")return _y(e,t);var r=G0(),s="",o=[],c=[];return s="mimetype",Lt(r,s,"application/vnd.oasis.opendocument.spreadsheet"),s="content.xml",Lt(r,s,_y(e,t)),o.push([s,"text/xml"]),c.push([s,"ContentFile"]),s="styles.xml",Lt(r,s,MI(e,t)),o.push([s,"text/xml"]),c.push([s,"StylesFile"]),s="meta.xml",Lt(r,s,Vr+hb()),o.push([s,"text/xml"]),c.push([s,"MetadataFile"]),s="manifest.rdf",Lt(r,s,Y5(c)),o.push([s,"application/rdf+xml"]),s="META-INF/manifest.xml",Lt(r,s,G5(o)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function au(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function FI(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Ss(nc(e))}function LI(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var s=0;s<t.length;++s)if(e[r+s]!=t[s])continue e;return!0}return!1}function $a(e){var t=e.reduce(function(o,c){return o+c.length},0),r=new Uint8Array(t),s=0;return e.forEach(function(o){r.set(o,s),s+=o.length}),r}function PI(e,t,r){var s=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,o=r/Math.pow(10,s-6176);e[t+15]|=s>>7,e[t+14]|=(s&127)<<1;for(var c=0;o>=1;++c,o/=256)e[t+c]=o&255;e[t+15]|=r>=0?0:128}function ac(e,t){var r=t?t[0]:0,s=e[r]&127;e:if(e[r++]>=128&&(s|=(e[r]&127)<<7,e[r++]<128||(s|=(e[r]&127)<<14,e[r++]<128)||(s|=(e[r]&127)<<21,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),s}function ur(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ko(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Zr(e){for(var t=[],r=[0];r[0]<e.length;){var s=r[0],o=ac(e,r),c=o&7;o=Math.floor(o/8);var d=0,f;if(o==0)break;switch(c){case 0:{for(var p=r[0];e[r[0]++]>=128;);f=e.slice(p,r[0])}break;case 5:d=4,f=e.slice(r[0],r[0]+d),r[0]+=d;break;case 1:d=8,f=e.slice(r[0],r[0]+d),r[0]+=d;break;case 2:d=ac(e,r),f=e.slice(r[0],r[0]+d),r[0]+=d;break;case 3:case 4:default:throw new Error("PB Type ".concat(c," for Field ").concat(o," at offset ").concat(s))}var h={data:f,type:c};t[o]==null?t[o]=[h]:t[o].push(h)}return t}function pn(e){var t=[];return e.forEach(function(r,s){r.forEach(function(o){o.data&&(t.push(ur(s*8+o.type)),o.type==2&&t.push(ur(o.data.length)),t.push(o.data))})}),$a(t)}function ys(e){for(var t,r=[],s=[0];s[0]<e.length;){var o=ac(e,s),c=Zr(e.slice(s[0],s[0]+o));s[0]+=o;var d={id:ko(c[1][0].data),messages:[]};c[2].forEach(function(f){var p=Zr(f.data),h=ko(p[3][0].data);d.messages.push({meta:p,data:e.slice(s[0],s[0]+h)}),s[0]+=h}),(t=c[3])!=null&&t[0]&&(d.merge=ko(c[3][0].data)>>>0>0),r.push(d)}return r}function yo(e){var t=[];return e.forEach(function(r){var s=[];s[1]=[{data:ur(r.id),type:0}],s[2]=[],r.merge!=null&&(s[3]=[{data:ur(+!!r.merge),type:0}]);var o=[];r.messages.forEach(function(d){o.push(d.data),d.meta[3]=[{type:0,data:ur(d.data.length)}],s[2].push({data:pn(d.meta),type:2})});var c=pn(s);t.push(ur(c.length)),t.push(c),o.forEach(function(d){return t.push(d)})}),$a(t)}function zI(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],s=ac(t,r),o=[];r[0]<t.length;){var c=t[r[0]]&3;if(c==0){var d=t[r[0]++]>>2;if(d<60)++d;else{var f=d-59;d=t[r[0]],f>1&&(d|=t[r[0]+1]<<8),f>2&&(d|=t[r[0]+2]<<16),f>3&&(d|=t[r[0]+3]<<24),d>>>=0,d++,r[0]+=f}o.push(t.slice(r[0],r[0]+d)),r[0]+=d;continue}else{var p=0,h=0;if(c==1?(h=(t[r[0]]>>2&7)+4,p=(t[r[0]++]&224)<<3,p|=t[r[0]++]):(h=(t[r[0]++]>>2)+1,c==2?(p=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(p=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),o=[$a(o)],p==0)throw new Error("Invalid offset 0");if(p>o[0].length)throw new Error("Invalid offset beyond length");if(h>=p)for(o.push(o[0].slice(-p)),h-=p;h>=o[o.length-1].length;)o.push(o[o.length-1]),h-=o[o.length-1].length;o.push(o[0].slice(-p,-p+h))}}var x=$a(o);if(x.length!=s)throw new Error("Unexpected length: ".concat(x.length," != ").concat(s));return x}function vs(e){for(var t=[],r=0;r<e.length;){var s=e[r++],o=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(zI(s,e.slice(r,r+o))),r+=o}if(r!==e.length)throw new Error("data is not a valid framed stream!");return $a(t)}function vo(e){for(var t=[],r=0;r<e.length;){var s=Math.min(e.length-r,268435455),o=new Uint8Array(4);t.push(o);var c=ur(s),d=c.length;t.push(c),s<=60?(d++,t.push(new Uint8Array([s-1<<2]))):s<=256?(d+=2,t.push(new Uint8Array([240,s-1&255]))):s<=65536?(d+=3,t.push(new Uint8Array([244,s-1&255,s-1>>8&255]))):s<=16777216?(d+=4,t.push(new Uint8Array([248,s-1&255,s-1>>8&255,s-1>>16&255]))):s<=4294967296&&(d+=5,t.push(new Uint8Array([252,s-1&255,s-1>>8&255,s-1>>16&255,s-1>>>24&255]))),t.push(e.slice(r,r+s)),d+=s,o[0]=0,o[1]=d&255,o[2]=d>>8&255,o[3]=d>>16&255,r+=s}return $a(t)}function Qh(e,t){var r=new Uint8Array(32),s=au(r),o=12,c=0;switch(r[0]=5,e.t){case"n":r[1]=2,PI(r,o,e.v),c|=1,o+=16;break;case"b":r[1]=6,s.setFloat64(o,e.v?1:0,!0),c|=2,o+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,s.setUint32(o,t.indexOf(e.v),!0),c|=8,o+=4;break;default:throw"unsupported cell type "+e.t}return s.setUint32(8,c,!0),r.slice(0,o)}function Jh(e,t){var r=new Uint8Array(32),s=au(r),o=12,c=0;switch(r[0]=3,e.t){case"n":r[2]=2,s.setFloat64(o,e.v,!0),c|=32,o+=8;break;case"b":r[2]=6,s.setFloat64(o,e.v?1:0,!0),c|=32,o+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,s.setUint32(o,t.indexOf(e.v),!0),c|=16,o+=4;break;default:throw"unsupported cell type "+e.t}return s.setUint32(4,c,!0),r.slice(0,o)}function Ia(e){var t=Zr(e);return ac(t[1][0].data)}function UI(e,t,r){var s,o,c,d;if(!((s=e[6])!=null&&s[0])||!((o=e[7])!=null&&o[0]))throw"Mutation only works on post-BNC storages!";var f=((d=(c=e[8])==null?void 0:c[0])==null?void 0:d.data)&&ko(e[8][0].data)>0||!1;if(f)throw"Math only works with normal offsets";for(var p=0,h=au(e[7][0].data),x=0,v=[],y=au(e[4][0].data),b=0,w=[],_=0;_<t.length;++_){if(t[_]==null){h.setUint16(_*2,65535,!0),y.setUint16(_*2,65535);continue}h.setUint16(_*2,x,!0),y.setUint16(_*2,b,!0);var S,A;switch(typeof t[_]){case"string":S=Qh({t:"s",v:t[_]},r),A=Jh({t:"s",v:t[_]},r);break;case"number":S=Qh({t:"n",v:t[_]},r),A=Jh({t:"n",v:t[_]},r);break;case"boolean":S=Qh({t:"b",v:t[_]},r),A=Jh({t:"b",v:t[_]},r);break;default:throw new Error("Unsupported value "+t[_])}v.push(S),x+=S.length,w.push(A),b+=A.length,++p}for(e[2][0].data=ur(p);_<e[7][0].data.length/2;++_)h.setUint16(_*2,65535,!0),y.setUint16(_*2,65535,!0);return e[6][0].data=$a(v),e[3][0].data=$a(w),p}function WI(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var s=rs(r["!ref"]);s.s.r=s.s.c=0;var o=!1;s.e.c>9&&(o=!0,s.e.c=9),s.e.r>49&&(o=!0,s.e.r=49),o&&console.error("The Numbers writer is currently limited to ".concat(Gr(s)));var c=iu(r,{range:s,header:1}),d=["~Sh33tJ5~"];c.forEach(function(P){return P.forEach(function(W){typeof W=="string"&&d.push(W)})});var f={},p=[],h=br.read(t.numbers,{type:"base64"});h.FileIndex.map(function(P,W){return[P,h.FullPaths[W]]}).forEach(function(P){var W=P[0],V=P[1];if(W.type==2&&W.name.match(/\.iwa/)){var ue=W.content,Le=vs(ue),Ce=ys(Le);Ce.forEach(function(Te){p.push(Te.id),f[Te.id]={deps:[],location:V,type:ko(Te.messages[0].meta[1][0].data)}})}}),p.sort(function(P,W){return P-W});var x=p.filter(function(P){return P>1}).map(function(P){return[P,ur(P)]});h.FileIndex.map(function(P,W){return[P,h.FullPaths[W]]}).forEach(function(P){var W=P[0];if(P[1],!!W.name.match(/\.iwa/)){var V=ys(vs(W.content));V.forEach(function(ue){ue.messages.forEach(function(Le){x.forEach(function(Ce){ue.messages.some(function(Te){return ko(Te.meta[1][0].data)!=11006&&LI(Te.data,Ce[1])})&&f[Ce[0]].deps.push(ue.id)})})})}});for(var v=br.find(h,f[1].location),y=ys(vs(v.content)),b,w=0;w<y.length;++w){var _=y[w];_.id==1&&(b=_)}var S=Ia(Zr(b.messages[0].data)[1][0].data);for(v=br.find(h,f[S].location),y=ys(vs(v.content)),w=0;w<y.length;++w)_=y[w],_.id==S&&(b=_);for(S=Ia(Zr(b.messages[0].data)[2][0].data),v=br.find(h,f[S].location),y=ys(vs(v.content)),w=0;w<y.length;++w)_=y[w],_.id==S&&(b=_);for(S=Ia(Zr(b.messages[0].data)[2][0].data),v=br.find(h,f[S].location),y=ys(vs(v.content)),w=0;w<y.length;++w)_=y[w],_.id==S&&(b=_);var A=Zr(b.messages[0].data);{A[6][0].data=ur(s.e.r+1),A[7][0].data=ur(s.e.c+1);var k=Ia(A[46][0].data),O=br.find(h,f[k].location),L=ys(vs(O.content));{for(var K=0;K<L.length&&L[K].id!=k;++K);if(L[K].id!=k)throw"Bad ColumnRowUIDMapArchive";var ne=Zr(L[K].messages[0].data);ne[1]=[],ne[2]=[],ne[3]=[];for(var M=0;M<=s.e.c;++M){var re=[];re[1]=re[2]=[{type:0,data:ur(M+420690)}],ne[1].push({type:2,data:pn(re)}),ne[2].push({type:0,data:ur(M)}),ne[3].push({type:0,data:ur(M)})}ne[4]=[],ne[5]=[],ne[6]=[];for(var ee=0;ee<=s.e.r;++ee)re=[],re[1]=re[2]=[{type:0,data:ur(ee+726270)}],ne[4].push({type:2,data:pn(re)}),ne[5].push({type:0,data:ur(ee)}),ne[6].push({type:0,data:ur(ee)});L[K].messages[0].data=pn(ne)}O.content=vo(yo(L)),O.size=O.content.length,delete A[46];var de=Zr(A[4][0].data);{de[7][0].data=ur(s.e.r+1);var oe=Zr(de[1][0].data),Q=Ia(oe[2][0].data);O=br.find(h,f[Q].location),L=ys(vs(O.content));{if(L[0].id!=Q)throw"Bad HeaderStorageBucket";var te=Zr(L[0].messages[0].data);for(ee=0;ee<c.length;++ee){var ae=Zr(te[2][0].data);ae[1][0].data=ur(ee),ae[4][0].data=ur(c[ee].length),te[2][ee]={type:te[2][0].type,data:pn(ae)}}L[0].messages[0].data=pn(te)}O.content=vo(yo(L)),O.size=O.content.length;var X=Ia(de[2][0].data);O=br.find(h,f[X].location),L=ys(vs(O.content));{if(L[0].id!=X)throw"Bad HeaderStorageBucket";for(te=Zr(L[0].messages[0].data),M=0;M<=s.e.c;++M)ae=Zr(te[2][0].data),ae[1][0].data=ur(M),ae[4][0].data=ur(s.e.r+1),te[2][M]={type:te[2][0].type,data:pn(ae)};L[0].messages[0].data=pn(te)}O.content=vo(yo(L)),O.size=O.content.length;var J=Ia(de[4][0].data);(function(){for(var P=br.find(h,f[J].location),W=ys(vs(P.content)),V,ue=0;ue<W.length;++ue){var Le=W[ue];Le.id==J&&(V=Le)}var Ce=Zr(V.messages[0].data);{Ce[3]=[];var Te=[];d.forEach(function(Je,je){Te[1]=[{type:0,data:ur(je)}],Te[2]=[{type:0,data:ur(1)}],Te[3]=[{type:2,data:FI(Je)}],Ce[3].push({type:2,data:pn(Te)})})}V.messages[0].data=pn(Ce);var Be=yo(W),Ve=vo(Be);P.content=Ve,P.size=P.content.length})();var fe=Zr(de[3][0].data);{var se=fe[1][0];delete fe[2];var Ne=Zr(se.data);{var D=Ia(Ne[2][0].data);(function(){for(var P=br.find(h,f[D].location),W=ys(vs(P.content)),V,ue=0;ue<W.length;++ue){var Le=W[ue];Le.id==D&&(V=Le)}var Ce=Zr(V.messages[0].data);{delete Ce[6],delete fe[7];var Te=new Uint8Array(Ce[5][0].data);Ce[5]=[];for(var Be=0,Ve=0;Ve<=s.e.r;++Ve){var Je=Zr(Te);Be+=UI(Je,c[Ve],d),Je[1][0].data=ur(Ve),Ce[5].push({data:pn(Je),type:2})}Ce[1]=[{type:0,data:ur(s.e.c+1)}],Ce[2]=[{type:0,data:ur(s.e.r+1)}],Ce[3]=[{type:0,data:ur(Be)}],Ce[4]=[{type:0,data:ur(s.e.r+1)}]}V.messages[0].data=pn(Ce);var je=yo(W),q=vo(je);P.content=q,P.size=P.content.length})()}se.data=pn(Ne)}de[3][0].data=pn(fe)}A[4][0].data=pn(de)}b.messages[0].data=pn(A);var U=yo(y),E=vo(U);return v.content=E,v.size=v.content.length,h}function qI(e){return function(r){for(var s=0;s!=e.length;++s){var o=e[s];r[o[0]]===void 0&&(r[o[0]]=o[1]),o[2]==="n"&&(r[o[0]]=Number(r[o[0]]))}}}function lp(e){qI([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function $I(e,t){return t.bookType=="ods"?Zb(e,t):t.bookType=="numbers"?WI(e,t):t.bookType=="xlsb"?HI(e,t):GI(e,t)}function HI(e,t){wo=1024,e&&!e.SSF&&(e.SSF=$n(Pr)),e&&e.SSF&&(xu(),gu(e.SSF),t.revssf=mu(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Xl?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",s=Bb.indexOf(t.bookType)>-1,o=db();lp(t=t||{});var c=G0(),d="",f=0;if(t.cellXfs=[],Ga(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),d="docProps/core.xml",Lt(c,d,pb(e.Props,t)),o.coreprops.push(d),fr(t.rels,2,d,rr.CORE_PROPS),d="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var p=[],h=0;h<e.SheetNames.length;++h)(e.Workbook.Sheets[h]||{}).Hidden!=2&&p.push(e.SheetNames[h]);e.Props.SheetNames=p}for(e.Props.Worksheets=e.Props.SheetNames.length,Lt(c,d,xb(e.Props)),o.extprops.push(d),fr(t.rels,3,d,rr.EXT_PROPS),e.Custprops!==e.Props&&vn(e.Custprops||{}).length>0&&(d="docProps/custom.xml",Lt(c,d,mb(e.Custprops)),o.custprops.push(d),fr(t.rels,4,d,rr.CUST_PROPS)),f=1;f<=e.SheetNames.length;++f){var x={"!id":{}},v=e.Sheets[e.SheetNames[f-1]],y=(v||{})["!type"]||"sheet";switch(y){case"chart":default:d="xl/worksheets/sheet"+f+"."+r,Lt(c,d,YO(f-1,d,t,e,x)),o.sheets.push(d),fr(t.wbrels,-1,"worksheets/sheet"+f+"."+r,rr.WS[0])}if(v){var b=v["!comments"],w=!1,_="";b&&b.length>0&&(_="xl/comments"+f+"."+r,Lt(c,_,QO(b,_)),o.comments.push(_),fr(x,-1,"../comments"+f+"."+r,rr.CMNT),w=!0),v["!legacy"]&&w&&Lt(c,"xl/drawings/vmlDrawing"+f+".vml",Ob(f,v["!comments"])),delete v["!comments"],delete v["!legacy"]}x["!id"].rId1&&Lt(c,fb(d),jo(x))}return t.Strings!=null&&t.Strings.length>0&&(d="xl/sharedStrings."+r,Lt(c,d,XO(t.Strings,d,t)),o.strs.push(d),fr(t.wbrels,-1,"sharedStrings."+r,rr.SST)),d="xl/workbook."+r,Lt(c,d,VO(e,d)),o.workbooks.push(d),fr(t.rels,1,d,rr.WB),d="xl/theme/theme1.xml",Lt(c,d,Nb(e.Themes,t)),o.themes.push(d),fr(t.wbrels,-1,"theme/theme1.xml",rr.THEME),d="xl/styles."+r,Lt(c,d,KO(e,d,t)),o.styles.push(d),fr(t.wbrels,-1,"styles."+r,rr.STY),e.vbaraw&&s&&(d="xl/vbaProject.bin",Lt(c,d,e.vbaraw),o.vba.push(d),fr(t.wbrels,-1,"vbaProject.bin",rr.VBA)),d="xl/metadata."+r,Lt(c,d,JO(d)),o.metadata.push(d),fr(t.wbrels,-1,"metadata."+r,rr.XLMETA),Lt(c,"[Content_Types].xml",ub(o,t)),Lt(c,"_rels/.rels",jo(t.rels)),Lt(c,"xl/_rels/workbook."+r+".rels",jo(t.wbrels)),delete t.revssf,delete t.ssf,c}function GI(e,t){wo=1024,e&&!e.SSF&&(e.SSF=$n(Pr)),e&&e.SSF&&(xu(),gu(e.SSF),t.revssf=mu(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Xl?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",s=Bb.indexOf(t.bookType)>-1,o=db();lp(t=t||{});var c=G0(),d="",f=0;if(t.cellXfs=[],Ga(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),d="docProps/core.xml",Lt(c,d,pb(e.Props,t)),o.coreprops.push(d),fr(t.rels,2,d,rr.CORE_PROPS),d="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var p=[],h=0;h<e.SheetNames.length;++h)(e.Workbook.Sheets[h]||{}).Hidden!=2&&p.push(e.SheetNames[h]);e.Props.SheetNames=p}e.Props.Worksheets=e.Props.SheetNames.length,Lt(c,d,xb(e.Props)),o.extprops.push(d),fr(t.rels,3,d,rr.EXT_PROPS),e.Custprops!==e.Props&&vn(e.Custprops||{}).length>0&&(d="docProps/custom.xml",Lt(c,d,mb(e.Custprops)),o.custprops.push(d),fr(t.rels,4,d,rr.CUST_PROPS));var x=["SheetJ5"];for(t.tcid=0,f=1;f<=e.SheetNames.length;++f){var v={"!id":{}},y=e.Sheets[e.SheetNames[f-1]],b=(y||{})["!type"]||"sheet";switch(b){case"chart":default:d="xl/worksheets/sheet"+f+"."+r,Lt(c,d,$b(f-1,t,e,v)),o.sheets.push(d),fr(t.wbrels,-1,"worksheets/sheet"+f+"."+r,rr.WS[0])}if(y){var w=y["!comments"],_=!1,S="";if(w&&w.length>0){var A=!1;w.forEach(function(k){k[1].forEach(function(O){O.T==!0&&(A=!0)})}),A&&(S="xl/threadedComments/threadedComment"+f+"."+r,Lt(c,S,wR(w,x,t)),o.threadedcomments.push(S),fr(v,-1,"../threadedComments/threadedComment"+f+"."+r,rr.TCMNT)),S="xl/comments"+f+"."+r,Lt(c,S,Ib(w)),o.comments.push(S),fr(v,-1,"../comments"+f+"."+r,rr.CMNT),_=!0}y["!legacy"]&&_&&Lt(c,"xl/drawings/vmlDrawing"+f+".vml",Ob(f,y["!comments"])),delete y["!comments"],delete y["!legacy"]}v["!id"].rId1&&Lt(c,fb(d),jo(v))}return t.Strings!=null&&t.Strings.length>0&&(d="xl/sharedStrings."+r,Lt(c,d,jb(t.Strings,t)),o.strs.push(d),fr(t.wbrels,-1,"sharedStrings."+r,rr.SST)),d="xl/workbook."+r,Lt(c,d,Vb(e)),o.workbooks.push(d),fr(t.rels,1,d,rr.WB),d="xl/theme/theme1.xml",Lt(c,d,Nb(e.Themes,t)),o.themes.push(d),fr(t.wbrels,-1,"theme/theme1.xml",rr.THEME),d="xl/styles."+r,Lt(c,d,Ab(e,t)),o.styles.push(d),fr(t.wbrels,-1,"styles."+r,rr.STY),e.vbaraw&&s&&(d="xl/vbaProject.bin",Lt(c,d,e.vbaraw),o.vba.push(d),fr(t.wbrels,-1,"vbaProject.bin",rr.VBA)),d="xl/metadata."+r,Lt(c,d,Db()),o.metadata.push(d),fr(t.wbrels,-1,"metadata."+r,rr.XLMETA),x.length>1&&(d="xl/persons/person.xml",Lt(c,d,TR(x)),o.people.push(d),fr(t.wbrels,-1,"persons/person.xml",rr.PEOPLE)),Lt(c,"[Content_Types].xml",ub(o,t)),Lt(c,"_rels/.rels",jo(t.rels)),Lt(c,"xl/_rels/workbook."+r+".rels",jo(t.wbrels)),delete t.revssf,delete t.ssf,c}function VI(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=la(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function e2(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return fc(t.file,br.write(e,{type:sr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return br.write(e,t)}function YI(e,t){var r=$n(t||{}),s=$I(e,r);return KI(s,r)}function KI(e,t){var r={},s=sr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=s;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=s;break;default:throw new Error("Unrecognized type "+t.type)}var o=e.FullPaths?br.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof o=="string"){if(t.type=="binary"||t.type=="base64")return o;o=new Uint8Array(pu(o))}return t.password&&typeof encrypt_agile<"u"?e2(encrypt_agile(o,t.password),t):t.type==="file"?fc(t.file,o):t.type=="string"?Gl(o):o}function XI(e,t){var r=t||{},s=fI(e,r);return e2(s,r)}function Bs(e,t,r){r||(r="");var s=r+e;switch(t.type){case"base64":return tc(nc(s));case"binary":return nc(s);case"string":return e;case"file":return fc(t.file,s,"utf8");case"buffer":return sr?da(s,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(s):Bs(s,{type:"binary"}).split("").map(function(o){return o.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function QI(e,t){switch(t.type){case"base64":return tc(e);case"binary":return e;case"string":return e;case"file":return fc(t.file,e,"binary");case"buffer":return sr?da(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Ld(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",s=0;s<e.length;++s)r+=String.fromCharCode(e[s]);return t.type=="base64"?tc(r):t.type=="string"?Gl(r):r;case"file":return fc(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function t2(e,t){j6(),MO(e);var r=$n(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var s=t2(e,r);return r.type="array",pu(s)}var o=0;if(r.sheet&&(typeof r.sheet=="number"?o=r.sheet:o=e.SheetNames.indexOf(r.sheet),!e.SheetNames[o]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Bs(dI(e,r),r);case"slk":case"sylk":return Bs(OA.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"htm":case"html":return Bs(Xb(e.Sheets[e.SheetNames[o]],r),r);case"txt":return QI(r2(e.Sheets[e.SheetNames[o]],r),r);case"csv":return Bs(cp(e.Sheets[e.SheetNames[o]],r),r,"\uFEFF");case"dif":return Bs(IA.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"dbf":return Ld(DA.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"prn":return Bs(BA.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"rtf":return Bs(WA.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"eth":return Bs(Tb.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"fods":return Bs(Zb(e,r),r);case"wk1":return Ld(py.sheet_to_wk1(e.Sheets[e.SheetNames[o]],r),r);case"wk3":return Ld(py.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Ld(Kb(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),XI(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return YI(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function JI(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function ZI(e,t,r){var s={};return s.type="file",s.file=t,JI(s),t2(e,s)}function eB(e,t,r,s,o,c,d,f){var p=yn(r),h=f.defval,x=f.raw||!Object.prototype.hasOwnProperty.call(f,"raw"),v=!0,y=o===1?[]:{};if(o!==1)if(Object.defineProperty)try{Object.defineProperty(y,"__rowNum__",{value:r,enumerable:!1})}catch{y.__rowNum__=r}else y.__rowNum__=r;if(!d||e[r])for(var b=t.s.c;b<=t.e.c;++b){var w=d?e[r][b]:e[s[b]+p];if(w===void 0||w.t===void 0){if(h===void 0)continue;c[b]!=null&&(y[c[b]]=h);continue}var _=w.v;switch(w.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(c[b]!=null){if(_==null)if(w.t=="e"&&_===null)y[c[b]]=null;else if(h!==void 0)y[c[b]]=h;else if(x&&_===null)y[c[b]]=null;else continue;else y[c[b]]=x&&(w.t!=="n"||w.t==="n"&&f.rawNumbers!==!1)?_:ca(w,_,f);_!=null&&(v=!1)}}return{row:y,isempty:v}}function iu(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},s=0,o=1,c=[],d=0,f="",p={s:{r:0,c:0},e:{r:0,c:0}},h=t||{},x=h.range!=null?h.range:e["!ref"];switch(h.header===1?s=1:h.header==="A"?s=2:Array.isArray(h.header)?s=3:h.header==null&&(s=0),typeof x){case"string":p=kr(x);break;case"number":p=kr(e["!ref"]),p.s.r=x;break;default:p=x}s>0&&(o=0);var v=yn(p.s.r),y=[],b=[],w=0,_=0,S=Array.isArray(e),A=p.s.r,k=0,O={};S&&!e[A]&&(e[A]=[]);var L=h.skipHidden&&e["!cols"]||[],K=h.skipHidden&&e["!rows"]||[];for(k=p.s.c;k<=p.e.c;++k)if(!(L[k]||{}).hidden)switch(y[k]=Tn(k),r=S?e[A][k]:e[y[k]+v],s){case 1:c[k]=k-p.s.c;break;case 2:c[k]=y[k];break;case 3:c[k]=h.header[k-p.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),f=d=ca(r,null,h),_=O[d]||0,!_)O[d]=1;else{do f=d+"_"+_++;while(O[f]);O[d]=_,O[f]=1}c[k]=f}for(A=p.s.r+o;A<=p.e.r;++A)if(!(K[A]||{}).hidden){var ne=eB(e,p,A,y,s,c,S,h);(ne.isempty===!1||(s===1?h.blankrows!==!1:h.blankrows))&&(b[w++]=ne.row)}return b.length=w,b}var Sy=/"/g;function tB(e,t,r,s,o,c,d,f){for(var p=!0,h=[],x="",v=yn(r),y=t.s.c;y<=t.e.c;++y)if(s[y]){var b=f.dense?(e[r]||[])[y]:e[s[y]+v];if(b==null)x="";else if(b.v!=null){p=!1,x=""+(f.rawNumbers&&b.t=="n"?b.v:ca(b,null,f));for(var w=0,_=0;w!==x.length;++w)if((_=x.charCodeAt(w))===o||_===c||_===34||f.forceQuotes){x='"'+x.replace(Sy,'""')+'"';break}x=="ID"&&(x='"ID"')}else b.f!=null&&!b.F?(p=!1,x="="+b.f,x.indexOf(",")>=0&&(x='"'+x.replace(Sy,'""')+'"')):x="";h.push(x)}return f.blankrows===!1&&p?null:h.join(d)}function cp(e,t){var r=[],s=t??{};if(e==null||e["!ref"]==null)return"";var o=kr(e["!ref"]),c=s.FS!==void 0?s.FS:",",d=c.charCodeAt(0),f=s.RS!==void 0?s.RS:`
`,p=f.charCodeAt(0),h=new RegExp((c=="|"?"\\|":c)+"+$"),x="",v=[];s.dense=Array.isArray(e);for(var y=s.skipHidden&&e["!cols"]||[],b=s.skipHidden&&e["!rows"]||[],w=o.s.c;w<=o.e.c;++w)(y[w]||{}).hidden||(v[w]=Tn(w));for(var _=0,S=o.s.r;S<=o.e.r;++S)(b[S]||{}).hidden||(x=tB(e,o,S,v,d,p,c,s),x!=null&&(s.strip&&(x=x.replace(h,"")),(x||s.blankrows!==!1)&&r.push((_++?f:"")+x)));return delete s.dense,r.join("")}function r2(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=cp(e,t);return r}function rB(e){var t="",r,s="";if(e==null||e["!ref"]==null)return[];var o=kr(e["!ref"]),c="",d=[],f,p=[],h=Array.isArray(e);for(f=o.s.c;f<=o.e.c;++f)d[f]=Tn(f);for(var x=o.s.r;x<=o.e.r;++x)for(c=yn(x),f=o.s.c;f<=o.e.c;++f)if(t=d[f]+c,r=h?(e[x]||[])[f]:e[t],s="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;s=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)s=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)s=""+r.v;else if(r.t=="b")s=r.v?"TRUE":"FALSE";else if(r.w!==void 0)s="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?s="'"+r.v:s=""+r.v}}p[p.length]=t+"="+s}return p}function n2(e,t,r){var s=r||{},o=+!s.skipHeader,c=e||{},d=0,f=0;if(c&&s.origin!=null)if(typeof s.origin=="number")d=s.origin;else{var p=typeof s.origin=="string"?cn(s.origin):s.origin;d=p.r,f=p.c}var h,x={s:{c:0,r:0},e:{c:f,r:d+t.length-1+o}};if(c["!ref"]){var v=kr(c["!ref"]);x.e.c=Math.max(x.e.c,v.e.c),x.e.r=Math.max(x.e.r,v.e.r),d==-1&&(d=v.e.r+1,x.e.r=d+t.length-1+o)}else d==-1&&(d=0,x.e.r=t.length-1+o);var y=s.header||[],b=0;t.forEach(function(_,S){vn(_).forEach(function(A){(b=y.indexOf(A))==-1&&(y[b=y.length]=A);var k=_[A],O="z",L="",K=pr({c:f+b,r:d+S+o});h=ic(c,K),k&&typeof k=="object"&&!(k instanceof Date)?c[K]=k:(typeof k=="number"?O="n":typeof k=="boolean"?O="b":typeof k=="string"?O="s":k instanceof Date?(O="d",s.cellDates||(O="n",k=qn(k)),L=s.dateNF||Pr[14]):k===null&&s.nullError&&(O="e",k=0),h?(h.t=O,h.v=k,delete h.w,delete h.R,L&&(h.z=L)):c[K]=h={t:O,v:k},L&&(h.z=L))})}),x.e.c=Math.max(x.e.c,f+y.length-1);var w=yn(d);if(o)for(b=0;b<y.length;++b)c[Tn(b+f)+w]={t:"s",v:y[b]};return c["!ref"]=Gr(x),c}function nB(e,t){return n2(null,e,t)}function ic(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var s=cn(t);return e[s.r]||(e[s.r]=[]),e[s.r][s.c]||(e[s.r][s.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?ic(e,pr(t)):ic(e,pr({r:t,c:r||0}))}function sB(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function aB(){return{SheetNames:[],Sheets:{}}}function iB(e,t,r,s){var o=1;if(!r)for(;o<=65535&&e.SheetNames.indexOf(r="Sheet"+o)!=-1;++o,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&e.SheetNames.indexOf(r)>=0){var c=r.match(/(^.*?)(\d+)$/);o=c&&+c[2]||0;var d=c&&c[1]||r;for(++o;o<=65535&&e.SheetNames.indexOf(r=d+o)!=-1;++o);}if(Gb(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function oB(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var s=sB(e,t);switch(e.Workbook.Sheets[s]||(e.Workbook.Sheets[s]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[s].Hidden=r}function lB(e,t){return e.z=t,e}function s2(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function cB(e,t,r){return s2(e,"#"+t,r)}function dB(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function uB(e,t,r,s){for(var o=typeof t!="string"?t:kr(t),c=typeof t=="string"?t:Gr(t),d=o.s.r;d<=o.e.r;++d)for(var f=o.s.c;f<=o.e.c;++f){var p=ic(e,d,f);p.t="n",p.F=c,delete p.v,d==o.s.r&&f==o.s.c&&(p.f=r,s&&(p.D=!0))}return e}var ea={encode_col:Tn,encode_row:yn,encode_cell:pr,encode_range:Gr,decode_col:J0,decode_row:Q0,split_cell:j5,decode_cell:cn,decode_range:rs,format_cell:ca,sheet_add_aoa:sb,sheet_add_json:n2,sheet_add_dom:Qb,aoa_to_sheet:Fo,json_to_sheet:nB,table_to_sheet:Jb,table_to_book:II,sheet_to_csv:cp,sheet_to_txt:r2,sheet_to_json:iu,sheet_to_html:Xb,sheet_to_formulae:rB,sheet_to_row_object_array:iu,sheet_get_cell:ic,book_new:aB,book_append_sheet:iB,book_set_sheet_visibility:oB,cell_set_number_format:lB,cell_set_hyperlink:s2,cell_set_internal_link:cB,cell_add_comment:dB,sheet_set_array_formula:uB,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function fB({isOpen:e,onClose:t,vaultEntries:r,businessId:s}){const{currentBusiness:o}=Bo(),[c,d]=T.useState("weekly"),[f,p]=T.useState("2025-W37"),[h,x]=T.useState(null),[v,y]=T.useState(!1),[b,w]=T.useState(!1),[_,S]=T.useState(""),[A,k]=T.useState(""),[O,L]=T.useState(!1),K=o?.business_name||o?.name||"Business",ne=o?.address||"Not specified",M=o?.phone_number||"Not specified",re=o?.vat_number||"Not specified",de=(X=>X&&{USD:"$",EUR:"",GBP:"",CAD:"C$",AUD:"A$",JPY:""}[X]||"")(o?.currency),oe=X=>`${de}${X.toFixed(2)}`,Q=async(X,J)=>{try{y(!0);let fe,se;if(b&&X&&J)fe=new Date(X),fe.setHours(0,0,0,0),se=new Date(J),se.setHours(23,59,59,999);else if(c==="weekly"){const me=new Date,qe=me.getDay(),yt=me.getDate()-qe+(qe===0?-6:1);fe=new Date(me.setDate(yt)),fe.setHours(0,0,0,0),se=new Date(fe),se.setDate(se.getDate()+6),se.setHours(23,59,59,999)}else{const me=new Date;fe=new Date(me.getFullYear(),me.getMonth(),1),se=new Date(me.getFullYear(),me.getMonth()+1,0,23,59,59,999)}const{data:Ne,error:D}=await Oe.from("sales").select("total_amount, discount_applied, cashier_id").gte("datetime",fe.toISOString()).lte("datetime",se.toISOString());if(D)throw D;const U=Ne?.reduce((me,qe)=>me+(qe.total_amount||0),0)||0,E=Ne?.reduce((me,qe)=>me+(qe.discount_applied||0),0)||0,P=Ne?.length||0,W=P>0?U/P:0,{data:V,error:ue}=await Oe.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(category),
          sales!inner(datetime)
        `).gte("sales.datetime",fe.toISOString()).lte("sales.datetime",se.toISOString());if(ue)throw ue;const Le=new Map;V?.forEach(me=>{const qe=me.products?.category||"Other",yt=me.quantity*me.price_each,Ct=Le.get(qe)||{revenue:0,units:0};Le.set(qe,{revenue:Ct.revenue+yt,units:Ct.units+me.quantity})});const Ce=Array.from(Le.entries()).map(([me,qe])=>({name:me,revenue:qe.revenue,percentage:U>0?Number((qe.revenue/U*100).toFixed(1)):0,units:qe.units})).sort((me,qe)=>qe.revenue-me.revenue),{data:Te,error:Be}=await Oe.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(name),
          sales!inner(datetime)
        `).gte("sales.datetime",fe.toISOString()).lte("sales.datetime",se.toISOString());if(Be)throw Be;const Ve=new Map;Te?.forEach(me=>{const qe=me.products?.name||"Unknown Product",yt=me.quantity*me.price_each,Ct=Ve.get(qe)||{units:0,revenue:0};Ve.set(qe,{units:Ct.units+me.quantity,revenue:Ct.revenue+yt})});const Je=Array.from(Ve.entries()).map(([me,qe])=>({name:me,...qe})).sort((me,qe)=>qe.revenue-me.revenue).slice(0,10).map((me,qe)=>({rank:qe+1,...me})),{data:je,error:q}=await Oe.from("products").select("name");if(q)throw q;const tt=(je?.map(me=>{const qe=Ve.get(me.name);return{name:me.name,units:qe?.units||0,revenue:qe?.revenue||0}})||[]).sort((me,qe)=>me.revenue-qe.revenue).slice(0,10).map((me,qe)=>({rank:qe+1,...me})),{data:Me,error:ct}=await Oe.from("products").select("name, stock_quantity, reorder_level");if(ct)throw ct;const pt=Me?.filter(me=>me.stock_quantity<=me.reorder_level).map(me=>({product:me.name,current:me.stock_quantity,reorder:me.reorder_level,urgent:me.stock_quantity<=me.reorder_level*.5}))||[],ut=Me?.filter(me=>me.stock_quantity===0).map(me=>({product:me.name,lastStock:"N/A",expectedDelivery:"TBD"}))||[],{data:St,error:ft}=await Oe.from("sales").select(`
          total_amount,
          cashier_id,
          users!inner(username)
        `).gte("datetime",fe.toISOString()).lte("datetime",se.toISOString());if(ft)throw ft;const Ft=new Map;St?.forEach(me=>{const qe=me.cashier_id,yt=me.users?.username||"Unknown",Ct=Ft.get(qe)||{name:yt,revenue:0,transactions:0};Ft.set(qe,{name:yt,revenue:Ct.revenue+(me.total_amount||0),transactions:Ct.transactions+1})});const Dt=Array.from(Ft.values()).map(me=>({name:me.name,revenue:me.revenue,transactions:me.transactions,avgTransaction:me.transactions>0?me.revenue/me.transactions:0,hours:40,accuracy:99})),{data:jr,error:Xt}=await Oe.from("side_business_sales").select(`
          total_amount,
          quantity,
          side_business_items!inner(
            name,
            side_businesses!inner(name)
          )
        `).eq("parent_shop_id",s||1).gte("date_time",fe.toISOString()).lte("date_time",se.toISOString());Xt&&console.error("Error fetching side business data:",Xt);const It=new Map;jr&&jr.forEach(me=>{const qe=me.side_business_items.side_businesses.name,yt=me.side_business_items.name;It.has(qe)||It.set(qe,{name:qe,revenue:0,transactions:0,items:new Map});const Ct=It.get(qe);Ct.revenue+=me.total_amount,Ct.transactions+=1,Ct.items.has(yt)||Ct.items.set(yt,{name:yt,units:0,revenue:0});const gr=Ct.items.get(yt);gr.units+=me.quantity,gr.revenue+=me.total_amount});const ce=Array.from(It.values()).map(me=>({name:me.name,revenue:me.revenue,transactions:me.transactions,avgTransaction:me.transactions>0?me.revenue/me.transactions:0,topItems:Array.from(me.items.values()).sort((qe,yt)=>yt.revenue-qe.revenue).slice(0,3)}));x({kpis:{totalSales:U,transactions:P,avgTransaction:W,discounts:E},categories:Ce,topProducts:Je,leastSoldProducts:tt,lowStock:pt,outOfStock:ut,staff:Dt,sideBusinesses:ce})}catch(fe){console.error("Error fetching report data:",fe)}finally{y(!1)}};T.useEffect(()=>{e&&Q()},[e,c,f]);const te=()=>{const X=window.open("","_blank"),J=document.getElementById("sales-report-content").innerHTML;X.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>${K} Sales Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
            th { background-color: #f5f5f5; }
            .urgent { color: red; font-weight: bold; }
            .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0; }
            .kpi-card { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
            h1, h2, h3 { color: #333; }
            .print-only { display: block; }
          </style>
        </head>
        <body>
          ${J}
          <script>window.print();<\/script>
        </body>
      </html>
    `)},ae=async()=>{try{L(!0);const X=b?_:null,J=b?A:null;let fe="";if(b&&X&&J){const Ce=new Date(X).toLocaleDateString("en-IE"),Te=new Date(J).toLocaleDateString("en-IE");fe=`${Ce}_to_${Te}`}else if(c==="weekly")fe=`Week_${f}`;else{const Ce=new Date;fe=`${Ce.getFullYear()}_${String(Ce.getMonth()+1).padStart(2,"0")}`}const se=ea.book_new(),Ne=[[`${K} - FINANCIAL REPORT FOR ACCOUNTANT`],[""],["BUSINESS INFORMATION"],["Company Name:",K],["Address:",ne],["Phone:",M],["VAT Number:",re],["Business Type:","Retail Store"],[""],["REPORTING PERIOD"],["Period:",b?`${_} to ${A}`:c==="weekly"?`Week ${f}`:new Date().toLocaleDateString("en-IE",{year:"numeric",month:"long"})],["Report Generated:",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})],[""],["REVENUE SUMMARY (EXCLUDING VAT)"],["Gross Sales Revenue",h?.kpis.totalSales?h.kpis.totalSales:0],["Less: Customer Discounts",h?.kpis.discounts?h.kpis.discounts:0],["Net Sales Revenue (Before VAT)",h?.kpis.totalSales&&h?.kpis.discounts?h.kpis.totalSales-h.kpis.discounts:h?.kpis.totalSales?h.kpis.totalSales:0],[""],["TRANSACTION ANALYSIS"],["Total Number of Transactions",h?.kpis.transactions||0],["Average Transaction Value",h?.kpis.avgTransaction?h.kpis.avgTransaction:0],["Total Items Sold",h?.categories.reduce((Ce,Te)=>Ce+Te.units,0)||0],[""],["CATEGORY PERFORMANCE"],["Category","Revenue","Percentage of Sales","Units Sold","Average Price per Unit"],...h?.categories.map(Ce=>[Ce.name,Ce.revenue,`${Ce.percentage}%`,Ce.units,Ce.units>0?Ce.revenue/Ce.units:0])||[],[""],["TOP PERFORMING PRODUCTS"],["Product Name","Units Sold","Revenue Generated","Average Price per Unit"],...h?.topProducts.slice(0,15).map(Ce=>[Ce.name,Ce.units,Ce.revenue,Ce.units>0?Ce.revenue/Ce.units:0])||[],[""],["ACCOUNTING NOTES"],[`1. All amounts are in ${o?.currency||"EUR"} (${de})`],["2. Revenue figures are exclusive of VAT unless otherwise stated"],["3. Customer discounts are deducted from gross revenue"],["4. This report is generated automatically from POS system data"],["5. For VAT calculations, standard rate should be applied to net sales"],["6. Inventory movements and cost of goods sold are not included in this report"],["7. Report covers retail sales only - side business operations excluded"],[""],["VERIFICATION REQUIRED"],["- Cross-reference with bank deposits"],["- Verify VAT calculations and rates"],["- Confirm discount policies and approvals"],["- Reconcile with physical inventory counts"]],D=ea.aoa_to_sheet(Ne);ea.book_append_sheet(se,D,"Financial Summary");const U=[["DETAILED SALES BREAKDOWN"],[""],["Product Name","Category","Units Sold","Revenue Generated","Average Price per Unit"],...h?.topProducts.map(Ce=>[Ce.name,h.categories.find(Te=>h.topProducts.filter(Be=>h.categories.some(Ve=>Ve.name==="Category"&&Be.name===Ce.name)).length>0)?.name||"Other",Ce.units,Ce.revenue,Ce.units>0?Ce.revenue/Ce.units:0])||[],[""],["CATEGORY TOTALS"],["Category","Total Revenue","Total Units","Average Price per Unit","Percentage of Total Sales"],...h?.categories.map(Ce=>[Ce.name,Ce.revenue,Ce.units,Ce.units>0?Ce.revenue/Ce.units:0,`${Ce.percentage}%`])||[]],E=ea.aoa_to_sheet(U);ea.book_append_sheet(se,E,"Sales Details");const P=[["TRANSACTION ANALYSIS"],[""],["Metric","Value","Notes"],["Total Transactions",h?.kpis.transactions||0,"Number of completed sales"],["Average Transaction Value",h?.kpis.avgTransaction?h.kpis.avgTransaction:0,"Revenue per transaction"],["Total Items Sold",h?.categories.reduce((Ce,Te)=>Ce+Te.units,0)||0,"Sum of all units sold"],["Average Items per Transaction",h?.kpis.transactions>0?h.categories.reduce((Ce,Te)=>Ce+Te.units,0)/h.kpis.transactions:0,"Items sold divided by transactions"],["Discount Rate",h?.kpis.totalSales>0?(h.kpis.discounts/h.kpis.totalSales*100).toFixed(2)+"%":"0%","Percentage of revenue given as discounts"],[""],["DAILY BREAKDOWN (ESTIMATED)"],["Note: Daily breakdown requires individual transaction data"],["Average Daily Revenue",h?.kpis.totalSales&&h?.kpis.transactions>0?h.kpis.totalSales/Math.max(1,h.kpis.transactions/10):0,"Estimated based on transaction volume"],["Average Daily Transactions",h?.kpis.transactions>0?h.kpis.transactions/Math.max(1,h.kpis.transactions/10):0,"Estimated daily transaction count"]],W=ea.aoa_to_sheet(P);ea.book_append_sheet(se,W,"Transaction Analysis");const V=[["VAT CALCULATION WORKSHEET"],[""],["IMPORTANT: This is a template - verify VAT rates and calculations"],[""],["Net Sales Revenue (Before VAT)",h?.kpis.totalSales&&h?.kpis.discounts?h.kpis.totalSales-h.kpis.discounts:h?.kpis.totalSales?h.kpis.totalSales:0],[""],["VAT CALCULATIONS (Standard Rate 23%)"],["VAT on Net Sales",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],["Total Revenue Including VAT",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*1.23:h?.kpis.totalSales?h.kpis.totalSales*1.23:0],[""],["VAT CALCULATIONS (Reduced Rate 13.5% - if applicable)"],["Note: Verify which products qualify for reduced rate"],["VAT on Reduced Rate Items",0,"To be calculated based on product categorization"],[""],["VAT SUMMARY"],["Standard Rate VAT (23%)",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],["Reduced Rate VAT (13.5%)",0,"Calculate based on qualifying products"],["Total VAT Collected",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],[""],["VERIFICATION CHECKLIST"],[" Verify current VAT rates"],[" Confirm product VAT categorization"],[" Cross-check with VAT returns"],[" Validate calculation methods"],[" Check for any exempt or zero-rated items"]],ue=ea.aoa_to_sheet(V);ea.book_append_sheet(se,ue,"VAT Calculation");const Le=`LandM_Store_Accountant_Report_${fe}_${new Date().toISOString().split("T")[0]}.xlsx`;ZI(se,Le)}catch(X){console.error("Error exporting to Excel:",X),alert("Failed to export to Excel. Please try again.")}finally{L(!1)}};return e?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"900px",width:"95%",maxHeight:"80vh",overflowY:"auto",color:"#3e3f29"},children:[v&&a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{fontSize:"24px",marginBottom:"20px"}}),a.jsx("p",{children:"Loading report data..."})]}),!v&&!h&&a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"20px",color:"#dc3545"}}),a.jsx("p",{children:"Unable to load report data. Please try again."}),a.jsx("button",{onClick:t,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"8px",marginTop:"20px",cursor:"pointer"},children:"Close"})]}),!v&&h&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[a.jsx("i",{className:"fa-solid fa-chart-line",style:{marginRight:"10px",color:"#7d8d86"}}),"Sales Reports"]}),a.jsx("button",{onClick:t,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:X=>{X.currentTarget.style.background="#7d8d86",X.currentTarget.style.color="#ffffff",X.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:X=>{X.currentTarget.style.background="none",X.currentTarget.style.color="#3e3f29",X.currentTarget.style.transform="rotate(0deg)"},children:""})]}),a.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"30px",flexWrap:"wrap",alignItems:"center"},children:[a.jsxs("select",{style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:c,onChange:X=>d(X.target.value),children:[a.jsx("option",{value:"weekly",children:"Weekly Report"}),a.jsx("option",{value:"monthly",children:"Monthly Report"}),a.jsx("option",{value:"custom",children:"Custom Date Range"})]}),c==="weekly"&&a.jsx("input",{type:"week",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:f,onChange:X=>p(X.target.value)}),c==="custom"&&a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsx("input",{type:"date",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:_,onChange:X=>S(X.target.value),placeholder:"Start Date"}),a.jsx("span",{style:{color:"#7d8d86",fontSize:"14px"},children:"to"}),a.jsx("input",{type:"date",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:A,onChange:X=>k(X.target.value),placeholder:"End Date"})]}),a.jsxs("button",{onClick:()=>Q(_,A),disabled:v||c==="custom"&&(!_||!A),style:{background:v?"#cccccc":"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:v?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:X=>{v||(X.currentTarget.style.background="#3e3f29",X.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:X=>{v||(X.currentTarget.style.background="#7d8d86",X.currentTarget.style.transform="translateY(0)")},children:[a.jsx("i",{className:`fa-solid ${v?"fa-spinner fa-spin":"fa-refresh"}`}),v?"Loading...":"Refresh Data"]}),a.jsxs("button",{onClick:te,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:X=>{X.currentTarget.style.background="#3e3f29",X.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:X=>{X.currentTarget.style.background="#7d8d86",X.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-print"}),"Print Report"]}),a.jsxs("button",{onClick:ae,disabled:O||!h||c==="custom"&&(!_||!A),style:{background:O?"#cccccc":"#10b981",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:O?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:X=>{O||(X.currentTarget.style.background="#059669",X.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:X=>{O||(X.currentTarget.style.background="#10b981",X.currentTarget.style.transform="translateY(0)")},children:[a.jsx("i",{className:`fa-solid ${O?"fa-spinner fa-spin":"fa-file-excel"}`}),O?"Exporting...":"Export to Excel"]})]}),a.jsxs("div",{id:"sales-report-content",style:{color:"#3e3f29"},children:[a.jsxs("div",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",paddingBottom:"20px",marginBottom:"30px"},children:[a.jsxs("h1",{style:{color:"#3e3f29",fontSize:"28px",fontWeight:"700",marginBottom:"10px"},children:[a.jsx("i",{className:"fa-solid fa-file-invoice",style:{marginRight:"10px"}}),o?.business_name||o?.name||"Business"," Sales Report"]}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px"},children:"Reporting Period: Week 37: 9-15 September 2025"})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-chart-bar",style:{marginRight:"10px"}}),"1. Overview (KPIs)"]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Sales"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:oe(h.kpis.totalSales)})]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Transactions"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:h.kpis.transactions.toLocaleString()})]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Avg Transaction"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:oe(h.kpis.avgTransaction)})]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Discounts"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:oe(h.kpis.discounts)})]})]})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-shopping-cart",style:{marginRight:"10px"}}),"2. Sales Breakdown"]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Sales by Category"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Category"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"% of Total"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"})]})}),a.jsx("tbody",{children:h.categories.map((X,J)=>a.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:X.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:oe(X.revenue)}),a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[X.percentage,"%"]}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:X.units})]},J))})]})})]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Top 10 Products Sold"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Rank"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),a.jsx("tbody",{children:h.topProducts.map(X=>a.jsxs("tr",{style:{background:X.rank%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:["#",X.rank]}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:X.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:X.units}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:oe(X.revenue)})]},X.rank))})]})})]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Least Sold Products"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),a.jsx("tbody",{children:h.leastSoldProducts.map((X,J)=>a.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:X.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:X.units}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:oe(X.revenue)})]},X.rank))})]})})]})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-warehouse",style:{marginRight:"10px"}}),"3. Inventory Alerts"]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc3545"}}),"Low Stock Products"]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Current Stock"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Reorder Level"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Status"})]})}),a.jsx("tbody",{children:h.lowStock.map((X,J)=>a.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:X.product}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:X.current}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:X.reorder}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29"},children:X.urgent&&a.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:"URGENT"})})]},J))})]})})]}),h.outOfStock.length>0&&a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-box",style:{color:"#dc3545"}}),"Out of Stock Products"]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Last Stock Date"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Expected Delivery"})]})}),a.jsx("tbody",{children:h.outOfStock.map((X,J)=>a.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:X.product}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:X.lastStock}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:X.expectedDelivery})]},J))})]})})]})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-users",style:{marginRight:"10px"}}),"4. Staff Performance"]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Cashier"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue Handled"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Hours"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Accuracy"})]})}),a.jsx("tbody",{children:h.staff.map((X,J)=>a.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:X.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:oe(X.revenue)}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:X.transactions}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:oe(X.avgTransaction)}),a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[X.hours,"h"]}),a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[X.accuracy,"%"]})]},J))})]})})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-store",style:{marginRight:"10px"}}),"5. Side Business Performance"]}),h.sideBusinesses.length>0?a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Business Name"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Top Items"})]})}),a.jsx("tbody",{children:h.sideBusinesses.map((X,J)=>a.jsxs("tr",{style:{background:J%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:X.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:oe(X.revenue)}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:X.transactions}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:oe(X.avgTransaction)}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:X.topItems.map((fe,se)=>a.jsxs("div",{style:{fontSize:"12px",marginBottom:"2px",color:"#7d8d86"},children:[fe.name,": ",fe.units," units (",oe(fe.revenue),")"]},se))})]},J))})]})}):a.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#7d8d86",background:"rgba(125, 141, 134, 0.05)",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"24px",marginBottom:"10px",display:"block"}}),"No side business sales data found for this period."]})]}),a.jsxs("section",{style:{borderTop:"2px solid rgba(125, 141, 134, 0.3)",paddingTop:"20px",marginTop:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:[a.jsx("i",{className:"fa-solid fa-file-text",style:{marginRight:"10px"}}),"6. Report Footer"]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"10px"},children:o?.business_name||o?.name||"Business"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Unit 2 Glenmore Park, Dundalk, Co. Louth"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Phone: 087 797 0412"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"VAT Number: IE1234567A"})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[a.jsx("strong",{children:"Reporting Period:"})," Week 37: 9-15 September 2025"]}),a.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[a.jsx("strong",{children:"Generated on:"})," ",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),a.jsx("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",fontStyle:"italic",margin:0},children:["This report was automatically generated by the ",o?.business_name||o?.name||"Business"," POS System. For questions or clarifications, contact the store manager."]})})]})]})]})]})]})}):null}const hB=({isOpen:e,onClose:t})=>{const{user:r}=bn(),[s,o]=T.useState(""),[c,d]=T.useState(""),[f,p]=T.useState(""),[h,x]=T.useState(!1),[v,y]=T.useState(null),[b,w]=T.useState([]),[_,S]=T.useState(!1),[A,k]=T.useState(!1),[O,L]=T.useState(!1),[K,ne]=T.useState({title:"",username:"",password:"",website:""}),[M,re]=T.useState(new Set),[ee,de]=T.useState(null),[oe,Q]=T.useState(!1),[te,ae]=T.useState(!1),[X,J]=T.useState(""),[fe,se]=T.useState(""),[Ne,D]=T.useState(!1);T.useEffect(()=>{e&&(o(""),d(""),p(""),x(!1),y(null),w([]),S(!1),k(!1),L(!1),re(new Set),de(null),Q(!1),ae(!1),J(""),se(""),D(!1),ne({title:"",username:"",password:"",website:""}))},[e]);const U=q=>{s.length<4&&(o(be=>be+q),d(""),p(""))},E=()=>{o(""),d(""),p("")},P=async q=>{if(r)try{const be=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(q)),tt=Array.from(new Uint8Array(be)).map(pt=>pt.toString(16).padStart(2,"0")).join(""),{data:Me,error:ct}=await Oe.from("vault").insert([{owner_id:r.user_id,pin_hash:tt}]).select();if(ct)throw ct;y(Me[0].vault_id),d(" Vault created successfully!"),p("success"),x(!0)}catch(be){console.error("Error creating vault:",be),d(" Failed to create vault. Try again."),p("error")}},W=async q=>{if(r)try{const{data:be,error:tt}=await Oe.from("vault").select("vault_id, pin_hash").eq("owner_id",r.user_id).single();if(tt){if(tt.code==="PGRST116"){k(!0),d("Creating your vault..."),p("success"),await P(q);return}throw tt}const Me=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(q)),ct=Array.from(new Uint8Array(Me)).map(pt=>pt.toString(16).padStart(2,"0")).join("");be.pin_hash===ct?(y(be.vault_id),d(" Access Granted! Vault Unlocked"),p("success"),x(!0),await V(be.vault_id)):(d(" Incorrect PIN. Try again."),p("error"),setTimeout(()=>E(),1e3))}catch(be){console.error("Error verifying PIN:",be),d(" Failed to access vault. Try again."),p("error")}},V=async q=>{try{const{data:be,error:tt}=await Oe.from("vault_entries").select("entry_id, label, email, password_enc, link, created_at").eq("vault_id",q).order("created_at",{ascending:!1});if(tt)throw tt;console.log("Raw data from database:",be),be.length>0&&(console.log("First entry password_enc:",be[0].password_enc),console.log("Type of password_enc:",typeof be[0].password_enc));const Me=be.map(ct=>({...ct,password:ct.password_enc||"No password"}));w(Me),S(!0)}catch(be){console.error("Error fetching vault entries:",be)}},ue=async()=>{if(!v||!K.title||!K.password){d(" Title and password are required"),p("error");return}try{const{data:q,error:be}=await Oe.from("vault_entries").insert([{vault_id:v,label:K.title,email:K.username,password_enc:K.password,link:K.website}]).select();if(be)throw be;await V(v),ne({title:"",username:"",password:"",website:""}),L(!1),d(" Password saved successfully!"),p("success")}catch(q){console.error("Error saving entry:",q),d(" Failed to save password. Try again."),p("error")}},Le=q=>{re(be=>{const tt=new Set(be);return tt.has(q)?tt.delete(q):tt.add(q),tt})},Ce=async(q,be)=>{try{await navigator.clipboard.writeText(q),d(` ${be} copied to clipboard!`),p("success"),setTimeout(()=>{d(""),p("")},2e3)}catch{d(` Failed to copy ${be}`),p("error"),setTimeout(()=>{d(""),p("")},2e3)}},Te=q=>{de(q)},Be=async q=>{if(v)try{const{error:be}=await Oe.from("vault_entries").delete().eq("entry_id",q).eq("vault_id",v);if(be)throw be;await V(v),de(null),d(" Password deleted successfully!"),p("success"),setTimeout(()=>{d(""),p("")},2e3)}catch(be){console.error("Error deleting entry:",be),d(" Failed to delete password. Try again."),p("error"),setTimeout(()=>{d(""),p("")},2e3)}},Ve=()=>{s.length===4&&W(s)},Je=async()=>{if(X.length<4){d(" PIN must be at least 4 digits"),p("error");return}if(X!==fe){d(" PINs do not match"),p("error");return}if(!v){d(" No vault found"),p("error");return}D(!0),d("Updating vault PIN..."),p("success");try{const q=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(X)),be=Array.from(new Uint8Array(q)).map(Me=>Me.toString(16).padStart(2,"0")).join(""),{error:tt}=await Oe.from("vault").update({pin_hash:be}).eq("vault_id",v);if(tt)throw tt;d(" Vault PIN updated successfully!"),p("success"),J(""),se(""),ae(!1)}catch(q){console.error("Error updating vault PIN:",q),d(" Failed to update vault PIN"),p("error")}finally{D(!1)}},je=q=>{const be=q.key;be>="0"&&be<="9"?U(be):be==="Backspace"||be==="Delete"?s.length>0&&o(tt=>tt.slice(0,-1)):be==="Enter"?Ve():be==="Escape"&&t()};return e?a.jsxs(a.Fragment,{children:[!h&&a.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"400px",width:"90%",textAlign:"center"},onKeyDown:je,tabIndex:-1,children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",border:"1px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px"},children:A?"Creating your vault...":"Enter your 4-digit PIN"}),a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"30px"},children:[0,1,2,3].map(q=>a.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"2px solid rgba(125, 141, 134, 0.3)",background:q<s.length?"linear-gradient(135deg, #7d8d86, #3e3f29)":"transparent",borderColor:q<s.length?"#3e3f29":"rgba(125, 141, 134, 0.3)",transform:q<s.length?"scale(1.1)":"scale(1)",transition:"all 0.3s ease"}},q))}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"15px",marginBottom:"20px"},children:[[1,2,3,4,5,6,7,8,9].map(q=>a.jsx("button",{onClick:()=>U(q.toString()),style:{width:"70px",height:"70px",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)"},onMouseEnter:be=>{be.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",be.currentTarget.style.color="#f1f0e4",be.currentTarget.style.transform="translateY(-2px)",be.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:be=>{be.currentTarget.style.background="#ffffff",be.currentTarget.style.color="#3e3f29",be.currentTarget.style.transform="translateY(0)",be.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:q},q)),a.jsx("button",{onClick:()=>U("0"),style:{width:"70px",height:"70px",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)",gridColumn:"2"},onMouseEnter:q=>{q.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",q.currentTarget.style.color="#f1f0e4",q.currentTarget.style.transform="translateY(-2px)",q.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:q=>{q.currentTarget.style.background="#ffffff",q.currentTarget.style.color="#3e3f29",q.currentTarget.style.transform="translateY(0)",q.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:"0"})]}),a.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[a.jsx("button",{onClick:E,style:{padding:"12px 24px",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",background:"transparent",color:"#7d8d86",border:"2px solid rgba(125, 141, 134, 0.3)"},onMouseEnter:q=>{q.currentTarget.style.background="rgba(125, 141, 134, 0.1)",q.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:q=>{q.currentTarget.style.background="transparent",q.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Clear"}),a.jsx("button",{onClick:Ve,disabled:s.length!==4,style:{padding:"12px 24px",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:s.length===4?"pointer":"not-allowed",transition:"all 0.3s ease",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#f1f0e4",border:"2px solid transparent",opacity:s.length===4?1:.5},onMouseEnter:q=>{s.length===4&&(q.currentTarget.style.transform="translateY(-2px)",q.currentTarget.style.boxShadow="0 8px 16px rgba(62, 63, 41, 0.2)")},onMouseLeave:q=>{q.currentTarget.style.transform="translateY(0)",q.currentTarget.style.boxShadow="none"},children:A?"Creating...":"Unlock"})]}),c&&a.jsx("div",{style:{marginTop:"20px",padding:"12px",borderRadius:"10px",fontSize:"14px",fontWeight:"500",background:f==="success"?"rgba(125, 141, 134, 0.1)":"rgba(220, 53, 69, 0.1)",color:f==="success"?"#3e3f29":"#dc3545",border:f==="success"?"1px solid rgba(125, 141, 134, 0.3)":"1px solid rgba(220, 53, 69, 0.3)"},children:c})]})}),h&&a.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"900px",width:"95%",maxHeight:"70vh",minHeight:"500px",overflowY:"auto",textAlign:"center"},onKeyDown:je,tabIndex:-1,children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",color:"#3e3f29"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[a.jsx("i",{className:"fa-solid fa-vault",style:{marginRight:"10px",color:"#7d8d86"}}),"Password Vault"]}),a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsxs("button",{onClick:()=>ae(!0),style:{background:"#dc3545",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:q=>{q.currentTarget.style.background="#c82333",q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:q=>{q.currentTarget.style.background="#dc3545",q.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-key"}),"Manage PIN"]}),a.jsxs("button",{onClick:()=>Q(!0),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:q=>{q.currentTarget.style.background="#3e3f29",q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:q=>{q.currentTarget.style.background="#7d8d86",q.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-chart-line"}),"Reports"]}),a.jsx("button",{onClick:t,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:q=>{q.currentTarget.style.background="#7d8d86",q.currentTarget.style.color="#ffffff",q.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:q=>{q.currentTarget.style.background="none",q.currentTarget.style.color="#3e3f29",q.currentTarget.style.transform="rotate(0deg)"},children:""})]})]}),a.jsx("div",{style:{marginBottom:"20px"},children:a.jsxs("button",{onClick:()=>L(!O),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"25px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},onMouseEnter:q=>{q.currentTarget.style.background="#3e3f29",q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:q=>{q.currentTarget.style.background="#7d8d86",q.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-plus"}),O?"Cancel":"Add Password"]})}),O&&a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",marginBottom:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",textAlign:"center"},children:"Add New Password"}),a.jsxs("div",{style:{display:"grid",gap:"15px"},children:[a.jsx("input",{type:"text",placeholder:"Title (e.g., Facebook, Twitter)",value:K.title,onChange:q=>ne({...K,title:q.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:q=>{q.target.style.borderColor="#7d8d86",q.target.style.background="#ffffff"},onBlur:q=>{q.target.style.borderColor="rgba(125, 141, 134, 0.3)",q.target.style.background="#ffffff"}}),a.jsx("input",{type:"text",placeholder:"Username/Email",value:K.username,onChange:q=>ne({...K,username:q.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:q=>{q.target.style.borderColor="#7d8d86",q.target.style.background="#ffffff"},onBlur:q=>{q.target.style.borderColor="rgba(125, 141, 134, 0.3)",q.target.style.background="#ffffff"}}),a.jsx("input",{type:"password",placeholder:"Password",value:K.password,onChange:q=>ne({...K,password:q.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:q=>{q.target.style.borderColor="#7d8d86",q.target.style.background="#ffffff"},onBlur:q=>{q.target.style.borderColor="rgba(125, 141, 134, 0.3)",q.target.style.background="#ffffff"}}),a.jsx("input",{type:"url",placeholder:"Website (optional)",value:K.website,onChange:q=>ne({...K,website:q.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:q=>{q.target.style.borderColor="#7d8d86",q.target.style.background="#ffffff"},onBlur:q=>{q.target.style.borderColor="rgba(125, 141, 134, 0.3)",q.target.style.background="#ffffff"}}),a.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>L(!1),style:{padding:"10px 20px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"20px",background:"transparent",color:"#7d8d86",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:q=>{q.currentTarget.style.background="rgba(125, 141, 134, 0.1)",q.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:q=>{q.currentTarget.style.background="transparent",q.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),a.jsx("button",{onClick:ue,disabled:!K.title||!K.password,style:{padding:"10px 20px",border:"none",borderRadius:"20px",background:K.title&&K.password?"#7d8d86":"rgba(125, 141, 134, 0.3)",color:"#f1f0e4",fontSize:"14px",fontWeight:"600",cursor:K.title&&K.password?"pointer":"not-allowed",transition:"all 0.3s ease"},onMouseEnter:q=>{K.title&&K.password&&(q.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:q=>{q.currentTarget.style.transform="translateY(0)"},children:"Save Password"})]})]})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-shield-halved"}),"Saved Passwords"]}),b.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:b.map(q=>a.jsxs("div",{style:{background:"#ffffff",borderRadius:"10px",padding:"15px",border:"1px solid rgba(125, 141, 134, 0.2)",transition:"all 0.3s ease",cursor:"pointer",position:"relative"},onMouseEnter:be=>{be.currentTarget.style.background="rgba(125, 141, 134, 0.1)",be.currentTarget.style.borderColor="#7d8d86",be.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:be=>{be.currentTarget.style.background="#ffffff",be.currentTarget.style.borderColor="rgba(125, 141, 134, 0.2)",be.currentTarget.style.transform="translateY(0)"},children:[a.jsx("button",{onClick:be=>{be.stopPropagation(),Te(q.entry_id)},style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",color:"#dc3545",fontSize:"16px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.3s ease",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:be=>{be.currentTarget.style.background="rgba(220, 53, 69, 0.1)",be.currentTarget.style.transform="scale(1.1)"},onMouseLeave:be=>{be.currentTarget.style.background="none",be.currentTarget.style.transform="scale(1)"},children:""}),a.jsx("div",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"5px",paddingRight:"30px"},children:q.label}),a.jsx("div",{style:{color:"#7d8d86",fontSize:"14px",marginBottom:"8px"},children:q.email}),a.jsx("div",{style:{color:"#3e3f29",fontSize:"14px",fontFamily:"monospace",marginBottom:"8px",padding:"4px 8px",background:"rgba(125, 141, 134, 0.1)",borderRadius:"4px",wordBreak:"break-all"},children:M.has(q.entry_id)?q.password:""}),a.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>Ce(q.password,"Password"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:be=>{be.currentTarget.style.background="#3e3f29",be.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:be=>{be.currentTarget.style.background="#7d8d86",be.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-copy",style:{marginRight:"4px"}}),"Copy"]}),a.jsxs("button",{onClick:()=>Ce(q.email,"Email"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:be=>{be.currentTarget.style.background="#3e3f29",be.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:be=>{be.currentTarget.style.background="#7d8d86",be.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-envelope",style:{marginRight:"4px"}}),"Copy Email"]}),a.jsxs("button",{onClick:()=>Le(q.entry_id),style:{background:M.has(q.entry_id)?"#3e3f29":"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:be=>{be.currentTarget.style.background=M.has(q.entry_id)?"#7d8d86":"#3e3f29",be.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:be=>{be.currentTarget.style.background=M.has(q.entry_id)?"#3e3f29":"#7d8d86",be.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:`fa-solid ${M.has(q.entry_id)?"fa-eye-slash":"fa-eye"}`,style:{marginRight:"4px"}}),M.has(q.entry_id)?"Hide":"Show"]})]})]},q.entry_id))}):a.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#bca88d",fontSize:"14px"},children:[a.jsx("i",{className:"fa-solid fa-folder-open",style:{fontSize:"24px",marginBottom:"8px",display:"block"}}),"No passwords saved yet"]})]})})]})}),ee&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"400px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"15px"},children:"Delete Password?"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"25px",lineHeight:"1.5"},children:"Are you sure you want to delete this password? This action cannot be undone."}),a.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>de(null),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:q=>{q.currentTarget.style.background="rgba(125, 141, 134, 0.1)",q.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:q=>{q.currentTarget.style.background="transparent",q.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),a.jsx("button",{onClick:()=>Be(ee),style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:q=>{q.currentTarget.style.background="#c82333",q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:q=>{q.currentTarget.style.background="#dc3545",q.currentTarget.style.transform="translateY(0)"},children:"Delete"})]})]})}),te&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"500px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[a.jsxs("h3",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-key",style:{color:"#dc3545"}}),"Manage System PIN"]}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px",lineHeight:"1.5"},children:"Change the system access PIN. This PIN is required to access the POS system."}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",marginBottom:"30px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"New PIN (minimum 4 digits)"}),a.jsx("input",{type:"password",value:X,onChange:q=>J(q.target.value),placeholder:"Enter new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:q=>{q.target.style.borderColor="#dc3545"},onBlur:q=>{q.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"Confirm PIN"}),a.jsx("input",{type:"password",value:fe,onChange:q=>se(q.target.value),placeholder:"Confirm new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:q=>{q.target.style.borderColor="#dc3545"},onBlur:q=>{q.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]})]}),a.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>ae(!1),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:q=>{q.currentTarget.style.background="rgba(125, 141, 134, 0.1)",q.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:q=>{q.currentTarget.style.background="transparent",q.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),a.jsx("button",{onClick:Je,disabled:Ne||X.length<4||X!==fe,style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:Ne||X.length<4||X!==fe?"rgba(220, 53, 69, 0.3)":"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:Ne||X.length<4||X!==fe?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:q=>{!Ne&&X.length>=4&&X===fe&&(q.currentTarget.style.background="#c82333",q.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:q=>{q.currentTarget.style.background=Ne||X.length<4||X!==fe?"rgba(220, 53, 69, 0.3)":"#dc3545",q.currentTarget.style.transform="translateY(0)"},children:Ne?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-save"}),"Update PIN"]})})]})]})}),a.jsx(fB,{isOpen:oe,onClose:()=>Q(!1),vaultEntries:b,businessId:r?.business_id})]}):null},pB=()=>{const{businessId:e,businessLoading:t}=fu(),[r,s]=T.useState([]),[o,c]=T.useState(!1),[d,f]=T.useState(!1),[p,h]=T.useState(null),[x,v]=T.useState({username:"",password:"",role:"Cashier",icon:"ryu"}),y=[{name:"lily",label:"Lily"},{name:"chunli",label:"Chun-Li"},{name:"ken",label:"Ken"},{name:"kimberly",label:"Kimberly"},{name:"mai",label:"Mai"},{name:"manon",label:"Manon"},{name:"rashid",label:"Rashid"},{name:"ryu",label:"Ryu"},{name:"zangief",label:"Zangief"}],[b,w]=T.useState(!1),[_,S]=T.useState(""),[A,k]=T.useState(!0),[O,L]=T.useState(!1);T.useEffect(()=>{e&&K()},[e,t]);const K=async()=>{if(!e){s([]),k(!1);return}try{k(!0);const{data:te,error:ae}=await Oe.from("users").select("*").eq("business_id",e).order("user_id",{ascending:!1});if(ae){console.error("Error fetching users:",ae),S("Failed to fetch users");return}s(te||[])}catch(te){console.error("Error fetching users:",te),S("Failed to fetch users")}finally{k(!1)}},ne=async te=>{if(te.preventDefault(),w(!0),S(""),!x.username.trim()){S("Username is required"),w(!1);return}if(!x.password.trim()){S("Password is required"),w(!1);return}if(!e){S("Business ID is not available. Please refresh the page and try again."),w(!1);return}try{console.log("Adding user with data:",{username:x.username,role:x.role,icon:x.icon,business_id:e});const{data:ae,error:X}=await Oe.from("users").select("user_id").eq("username",x.username.trim()).eq("business_id",e).single();if(X&&X.code!=="PGRST116")throw console.error("Error checking username:",X),new Error("Failed to check if username exists");if(ae)throw new Error("Username already exists. Please choose a different username.");const J=La(x.password);console.log("Creating user with password:",x.password),console.log("Generated hash:",J),console.log("Hash type:",typeof J);const fe={username:x.username.trim(),password_hash:J,role:x.role,active:!0,business_id:e};fe.icon=x.icon;const{data:se,error:Ne}=await Oe.from("users").insert([fe]).select();if(Ne)throw console.error("Supabase error adding user:",Ne),Ne.code==="23505"?new Error("Username already exists. Please choose a different username."):Ne.code==="23503"?new Error("Invalid business ID. Please refresh the page and try again."):Ne.code==="23502"?new Error("Required field is missing. Please fill in all required fields."):Ne.message.includes("duplicate key value violates unique constraint")?new Error("Username already exists. Please choose a different username."):Ne.message.includes("violates foreign key constraint")?new Error("Invalid business ID. Please refresh the page and try again."):Ne.message.includes("Could not find the 'icon' column")?new Error("Database schema is outdated. Please run the database migration to add the icon column."):new Error(`Database error: ${Ne.message}`);if(!se||se.length===0)throw new Error("No data returned from insert operation");console.log("User added successfully:",se[0]),v({username:"",password:"",role:"Cashier",icon:"ryu"}),c(!1),K()}catch(ae){console.error("Error adding user:",ae),ae instanceof Error?S(`Failed to add user: ${ae.message}`):S("Failed to add user: Unknown error occurred")}finally{w(!1)}},M=async te=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:ae}=await Oe.from("users").delete().eq("user_id",te);if(ae)throw console.error("Error deleting user:",ae),ae;K()}catch(ae){console.error("Error deleting user:",ae),S(`Failed to delete user: ${ae instanceof Error?ae.message:"Unknown error"}`)}},re=async(te,ae)=>{try{const{error:X}=await Oe.from("users").update({active:!ae}).eq("user_id",te);if(X)throw console.error("Error updating user status:",X),X;K()}catch(X){console.error("Error updating user status:",X),S(`Failed to update user: ${X instanceof Error?X.message:"Unknown error"}`)}},ee=te=>{h(te),v({username:te.username,password:"",role:te.role,icon:te.icon||"ryu"}),f(!0)},de=async te=>{if(te.preventDefault(),!!p){w(!0),S("");try{const ae={username:x.username,role:x.role,icon:x.icon};if(x.password.trim()){const J=La(x.password);console.log("Updating user password:",x.password),console.log("Generated hash:",J),console.log("Hash type:",typeof J),ae.password_hash=J}const{error:X}=await Oe.from("users").update(ae).eq("user_id",p.user_id);if(X)throw console.error("Error updating user:",X),X;v({username:"",password:"",role:"Cashier",icon:"ryu"}),h(null),f(!1),K()}catch(ae){console.error("Error updating user:",ae),S(`Failed to update user: ${ae instanceof Error?ae.message:"Unknown error"}`)}finally{w(!1)}}},oe=async()=>{if(!e){S("No business selected");return}try{k(!0);const te=`admin_${e}`,{data:ae,error:X}=await Oe.from("users").select("user_id").eq("business_id",e).eq("username",te).eq("role","Admin").single();if(X&&X.code!=="PGRST116"){console.error(`Error checking admin for business ${e}:`,X),S("Failed to check for existing admin account");return}if(ae)S("Admin account already exists for this business");else{const J=La("admin123");console.log("Creating admin account with password: admin123"),console.log("Generated hash:",J),console.log("Hash type:",typeof J);const{error:fe}=await Oe.from("users").insert({username:te,password_hash:J,role:"Admin",active:!0,business_id:e,icon:"ryu",created_at:new Date().toISOString()});fe?(console.error(`Error creating admin for business ${e}:`,fe),S("Failed to create admin account")):(console.log(`Admin account created for business ID: ${e}`),S("Admin account created successfully"),K())}}catch(te){console.error("Error creating admin account:",te),S(`Failed to create admin account: ${te instanceof Error?te.message:"Unknown error"}`)}finally{k(!1)}},Q=te=>{switch(te){case"Admin":return"#ef4444";case"Owner":return"#8b5cf6";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#1a1a1a"}};return A?a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading users..."]}):a.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[a.jsxs("div",{children:[a.jsxs("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 8px 0"},children:[a.jsx("i",{className:"fa-solid fa-users-cog",style:{marginRight:"12px",color:"#7d8d86"}}),"User Management"]}),a.jsx("p",{style:{color:"#1a1a1a",margin:"0",fontSize:"18px"},children:"Manage system users and their permissions"})]}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsxs("button",{onClick:()=>c(!0),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"18px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]}),a.jsxs("button",{onClick:oe,style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},disabled:A,children:[a.jsx("i",{className:"fa-solid fa-user-shield"}),"Create Admin Account"]})]})]}),_&&a.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px 16px",borderRadius:"8px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),_]}),a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[a.jsx("div",{style:{padding:"20px 24px",borderBottom:"2px solid #d1d5db",background:"#f9fafb"},children:a.jsxs("h3",{style:{margin:"0",fontSize:"20px",fontWeight:"600",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-list",style:{marginRight:"8px",color:"#7d8d86"}}),"All Users (",r.length,")"]})}),r.length===0?a.jsxs("div",{style:{padding:"48px 24px",textAlign:"center",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-users",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"20px",margin:"0 0 8px 0"},children:"No users found"}),a.jsx("p",{style:{fontSize:"16px",margin:"0"},children:"Add your first user to get started"})]}):a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#f9fafb"},children:[a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Icon"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Role"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Status"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User ID"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Actions"})]})}),a.jsx("tbody",{children:r.map((te,ae)=>a.jsxs("tr",{style:{borderBottom:ae<r.length-1?"1px solid #f3f4f6":"none"},children:[a.jsx("td",{style:{padding:"16px 24px"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a",marginBottom:"4px",fontSize:"16px"},children:te.username}),a.jsxs("div",{style:{fontSize:"15px",color:"#1a1a1a"},children:["ID: ",te.user_id]})]})}),a.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden",border:"2px solid #e5e7eb"},children:te.icon?a.jsx("img",{src:`/retailpos/images/icons/${te.icon}.png`,alt:te.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):a.jsx("i",{className:"fa-solid fa-user",style:{fontSize:"20px",color:"#9ca3af"}})})}),a.jsx("td",{style:{padding:"16px 24px"},children:a.jsx("span",{style:{background:`${Q(te.role)}20`,color:Q(te.role),padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize"},children:te.role})}),a.jsx("td",{style:{padding:"16px 24px"},children:a.jsx("span",{style:{background:te.active?"#dcfce720":"#fef2f220",color:te.active?"#16a34a":"#dc2626",padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:te.active?"Active":"Inactive"})}),a.jsxs("td",{style:{padding:"16px 24px",color:"#1a1a1a",fontSize:"15px"},children:["User #",te.user_id]}),a.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:a.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[a.jsxs("button",{onClick:()=>ee(te),style:{background:"#e0f2fe",color:"#0c4a6e",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Edit User",children:[a.jsx("i",{className:"fa-solid fa-pen-to-square"}),"Edit"]}),a.jsxs("button",{onClick:()=>re(te.user_id,te.active),style:{background:te.active?"#fef2f2":"#dcfce7",color:te.active?"#dc2626":"#16a34a",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:te.active?"Deactivate":"Activate",children:[a.jsx("i",{className:`fa-solid fa-${te.active?"ban":"check"}`}),te.active?"Deactivate":"Activate"]}),a.jsxs("button",{onClick:()=>M(te.user_id),style:{background:"#fef2f2",color:"#dc2626",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Delete User",children:[a.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]})]})})]},te.user_id))})]})})]}),o&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsxs("h2",{style:{margin:"0",fontSize:"26px",fontWeight:"600",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-user-plus",style:{marginRight:"8px",color:"#7d8d86"}}),"Add New User"]}),a.jsx("button",{onClick:()=>c(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:a.jsx("i",{className:"fa-solid fa-xmark"})})]}),a.jsxs("form",{onSubmit:ne,children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),a.jsx("input",{type:"text",value:x.username,onChange:te=>v({...x,username:te.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Password *"}),a.jsx("input",{type:"password",value:x.password,onChange:te=>v({...x,password:te.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter password"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),a.jsxs("select",{value:x.role,onChange:te=>v({...x,role:te.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[a.jsx("option",{value:"cashier",children:"Cashier"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"admin",children:"Admin"})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:y.map(te=>a.jsxs("button",{type:"button",onClick:()=>v({...x,icon:te.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:x.icon===te.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:x.icon===te.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:x.icon===te.name?"scale(1.05)":"scale(1)",boxShadow:x.icon===te.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:a.jsx("img",{src:`/retailpos/images/icons/${te.name}.png`,alt:te.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:x.icon===te.name?"brightness(1.1) contrast(1.1)":"none"}})}),x.icon===te.name&&a.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},te.name))})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:()=>c(!1),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:b,style:{background:b?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:b?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]})})]})]})]})}),d&&p&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1a1a1a"},children:[a.jsx("i",{className:"fa-solid fa-user-pen",style:{marginRight:"8px",color:"#7d8d86"}}),"Edit User"]}),a.jsx("button",{onClick:()=>{f(!1),h(null)},style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:a.jsx("i",{className:"fa-solid fa-xmark"})})]}),a.jsxs("form",{onSubmit:de,children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),a.jsx("input",{type:"text",value:x.username,onChange:te=>v({...x,username:te.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"New Password (leave blank to keep current)"}),a.jsx("input",{type:"password",value:x.password,onChange:te=>v({...x,password:te.target.value}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter new password (optional)"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),a.jsxs("select",{value:x.role,onChange:te=>v({...x,role:te.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[a.jsx("option",{value:"Cashier",children:"Cashier"}),a.jsx("option",{value:"Manager",children:"Manager"}),a.jsx("option",{value:"Admin",children:"Admin"})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:y.map(te=>a.jsxs("button",{type:"button",onClick:()=>v({...x,icon:te.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:x.icon===te.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:x.icon===te.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:x.icon===te.name?"scale(1.05)":"scale(1)",boxShadow:x.icon===te.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:a.jsx("img",{src:`/retailpos/images/icons/${te.name}.png`,alt:te.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:x.icon===te.name?"brightness(1.1) contrast(1.1)":"none"}})}),x.icon===te.name&&a.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},te.name))})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),h(null)},style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:b,style:{background:b?"#9ca3af":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:b?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-floppy-disk"}),"Update User"]})})]})]})]})}),a.jsx("div",{onClick:()=>L(!0),title:"Access Secure Vault - Manage sensitive operations and settings",style:{position:"fixed",bottom:"24px",right:"24px",zIndex:50,width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(125, 141, 134, 0.4)",cursor:"pointer",transition:"all 0.2s ease"},children:a.jsx("i",{className:"fa-solid fa-vault",style:{fontSize:"48px",color:"#f1f0e4"}})}),a.jsx(hB,{isOpen:O,onClose:()=>L(!1)})]})},gB="_container_k4aew_2",xB="_header_k4aew_10",mB="_title_k4aew_16",yB="_mainContent_k4aew_32",vB="_offlineNotice_k4aew_39",bB="_offlineNoticeContent_k4aew_51",_B="_dateNavigation_k4aew_62",SB="_navButton_k4aew_76",wB="_currentDate_k4aew_102",TB="_controls_k4aew_144",jB="_button_k4aew_151",EB="_buttonPrimary_k4aew_170",kB="_buttonSecondary_k4aew_179",CB="_buttonDanger_k4aew_192",AB="_notesContainer_k4aew_202",RB="_gridBackground_k4aew_218",NB="_gridPattern_k4aew_224",DB="_emptyState_k4aew_234",OB="_emptyStateContent_k4aew_242",IB="_emptyStateIcon_k4aew_247",BB="_emptyStateTitle_k4aew_252",MB="_dragIndicator_k4aew_258",FB="_footer_k4aew_271",LB="_stickyNote_k4aew_279",PB="_stickyNoteDragging_k4aew_286",zB="_note_k4aew_202",UB="_noteOverdue_k4aew_306",WB="_noteDueToday_k4aew_310",qB="_noteYellow_k4aew_315",$B="_notePink_k4aew_321",HB="_noteBlue_k4aew_327",GB="_noteGreen_k4aew_333",VB="_notePurple_k4aew_339",YB="_noteOrange_k4aew_345",KB="_noteTopStrip_k4aew_351",XB="_noteContent_k4aew_433",QB="_noteContentEditing_k4aew_439",JB="_noteInput_k4aew_445",ZB="_noteDateInput_k4aew_456",eM="_noteTextarea_k4aew_466",tM="_noteDisplay_k4aew_480",rM="_noteTitle_k4aew_486",nM="_noteTitleResolved_k4aew_494",sM="_noteDate_k4aew_456",aM="_noteDateOverdue_k4aew_505",iM="_noteDateToday_k4aew_510",oM="_noteBody_k4aew_515",lM="_noteBodyResolved_k4aew_524",cM="_noteCorner_k4aew_529",dM="_noteCornerEffect_k4aew_537",uM="_modalOverlay_k4aew_548",fM="_modal_k4aew_548",hM="_modalHeader_k4aew_569",pM="_modalTitle_k4aew_573",gM="_modalClose_k4aew_593",xM="_modalForm_k4aew_605",mM="_errorMessage_k4aew_611",yM="_errorContent_k4aew_619",vM="_formGroup_k4aew_628",bM="_formLabel_k4aew_633",_M="_formInput_k4aew_641",SM="_formTextarea_k4aew_655",wM="_colorSelection_k4aew_670",TM="_colorOption_k4aew_676",jM="_colorOptionSelected_k4aew_689",EM="_checkboxContainer_k4aew_694",kM="_formCheckbox_k4aew_700",CM="_checkboxLabel_k4aew_707",AM="_preview_k4aew_716",RM="_previewLabel_k4aew_720",NM="_previewNote_k4aew_728",DM="_previewTitle_k4aew_734",OM="_previewDate_k4aew_741",IM="_previewBody_k4aew_751",BM="_modalActions_k4aew_757",MM="_modalButton_k4aew_763",FM="_modalButtonCancel_k4aew_777",LM="_modalButtonSubmit_k4aew_786",PM="_modalButtonDanger_k4aew_795",zM="_loading_k4aew_805",UM="_loadingContent_k4aew_813",WM="_loadingIcon_k4aew_817",qM="_loadingText_k4aew_823",$M="_confirmationDialog_k4aew_869",HM="_confirmationContent_k4aew_880",GM="_confirmationHeader_k4aew_889",VM="_confirmationIcon_k4aew_895",YM="_confirmationButton_k4aew_926",KM="_confirmationButtonCancel_k4aew_936",XM="_confirmationButtonConfirm_k4aew_945",QM="_calendarModal_k4aew_955",JM="_calendar_k4aew_955",ZM="_calendarHeader_k4aew_981",e7="_calendarCloseButton_k4aew_989",t7="_calendarTitle_k4aew_1011",r7="_calendarNavButton_k4aew_1017",n7="_calendarGrid_k4aew_1035",s7="_calendarDayHeader_k4aew_1041",a7="_calendarDay_k4aew_1041",i7="_calendarDayOtherMonth_k4aew_1068",o7="_calendarDayToday_k4aew_1072",l7="_calendarDaySelected_k4aew_1082",c7="_calendarDayWithReminders_k4aew_1092",d7="_calendarDayWithRemindersToday_k4aew_1102",u7="_calendarDayWithRemindersSelected_k4aew_1111",f7="_calendarReminderCount_k4aew_1136",h7="_lilyMascot_k4aew_1178",p7="_lilySpeechBubble_k4aew_1188",g7="_lilySpeechTail_k4aew_1206",x7="_lilyImage_k4aew_1217",xe={container:gB,header:xB,title:mB,mainContent:yB,offlineNotice:vB,offlineNoticeContent:bB,dateNavigation:_B,navButton:SB,currentDate:wB,controls:TB,button:jB,buttonPrimary:EB,buttonSecondary:kB,buttonDanger:CB,notesContainer:AB,gridBackground:RB,gridPattern:NB,emptyState:DB,emptyStateContent:OB,emptyStateIcon:IB,emptyStateTitle:BB,dragIndicator:MB,footer:FB,stickyNote:LB,stickyNoteDragging:PB,note:zB,noteOverdue:UB,noteDueToday:WB,noteYellow:qB,notePink:$B,noteBlue:HB,noteGreen:GB,notePurple:VB,noteOrange:YB,noteTopStrip:KB,noteContent:XB,noteContentEditing:QB,noteInput:JB,noteDateInput:ZB,noteTextarea:eM,noteDisplay:tM,noteTitle:rM,noteTitleResolved:nM,noteDate:sM,noteDateOverdue:aM,noteDateToday:iM,noteBody:oM,noteBodyResolved:lM,noteCorner:cM,noteCornerEffect:dM,modalOverlay:uM,modal:fM,modalHeader:hM,modalTitle:pM,modalClose:gM,modalForm:xM,errorMessage:mM,errorContent:yM,formGroup:vM,formLabel:bM,formInput:_M,formTextarea:SM,colorSelection:wM,colorOption:TM,colorOptionSelected:jM,checkboxContainer:EM,formCheckbox:kM,checkboxLabel:CM,preview:AM,previewLabel:RM,previewNote:NM,previewTitle:DM,previewDate:OM,previewBody:IM,modalActions:BM,modalButton:MM,modalButtonCancel:FM,modalButtonSubmit:LM,modalButtonDanger:PM,loading:zM,loadingContent:UM,loadingIcon:WM,loadingText:qM,confirmationDialog:$M,confirmationContent:HM,confirmationHeader:GM,confirmationIcon:VM,confirmationButton:YM,confirmationButtonCancel:KM,confirmationButtonConfirm:XM,calendarModal:QM,calendar:JM,calendarHeader:ZM,calendarCloseButton:e7,calendarTitle:t7,calendarNavButton:r7,calendarGrid:n7,calendarDayHeader:s7,calendarDay:a7,calendarDayOtherMonth:i7,calendarDayToday:o7,calendarDaySelected:l7,calendarDayWithReminders:c7,calendarDayWithRemindersToday:d7,calendarDayWithRemindersSelected:u7,calendarReminderCount:f7,lilyMascot:h7,lilySpeechBubble:p7,lilySpeechTail:g7,lilyImage:x7};function m7(){const{user:e,currentUserId:t}=bn(),[r,s]=T.useState([]),[o,c]=T.useState(!0),[d,f]=T.useState(null),[p,h]=T.useState({x:0,y:0}),[x,v]=T.useState(null),[y,b]=T.useState(!1),[w,_]=T.useState(!1),[S,A]=T.useState(!1),[k,O]=T.useState(null),[L,K]=T.useState({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),[ne,M]=T.useState({title:"",body:"",remind_date:"",color:"yellow",resolved:!1}),[re,ee]=T.useState(new Date),[de,oe]=T.useState(!1),[Q,te]=T.useState(!1),[ae,X]=T.useState(new Date),[J,fe]=T.useState(!1),[se,Ne]=T.useState("Hi! I'm Lily, your reminder assistant! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),[D,U]=T.useState(()=>{const ce=localStorage.getItem("lilyEnabled");return ce!==null?JSON.parse(ce):!0}),[E,P]=T.useState(!0),W={yellow:{bg:xe.noteYellow,border:xe.noteYellow,shadow:xe.noteYellow},pink:{bg:xe.notePink,border:xe.notePink,shadow:xe.notePink},blue:{bg:xe.noteBlue,border:xe.noteBlue,shadow:xe.noteBlue},green:{bg:xe.noteGreen,border:xe.noteGreen,shadow:xe.noteGreen},purple:{bg:xe.notePurple,border:xe.notePurple,shadow:xe.notePurple},orange:{bg:xe.noteOrange,border:xe.noteOrange,shadow:xe.noteOrange}},V=()=>{const ce=new Date(re);ce.setDate(ce.getDate()-1),ee(ce)},ue=()=>{const ce=new Date(re);ce.setDate(ce.getDate()+1),ee(ce)},Le=ce=>{const me=new Date(ae);ce==="prev"?me.setMonth(me.getMonth()-1):me.setMonth(me.getMonth()+1),X(me)},Ce=ce=>{ee(ce),te(!1)},Te=()=>{const ce=new Set;return r.forEach(me=>{const qe=new Date(me.remind_date);ce.add(qe.toDateString())}),ce},Be=()=>{const ce={};return r.forEach(me=>{const yt=new Date(me.remind_date).toDateString();ce[yt]=(ce[yt]||0)+1}),ce},Ve=()=>{const ce=ae.getFullYear(),me=ae.getMonth(),qe=new Date(ce,me,1),yt=new Date(qe);yt.setDate(yt.getDate()-qe.getDay());const Ct=[],gr=Te(),Cr=Be(),or=new Date,Er=new Date(re);for(let Qt=0;Qt<42;Qt++){const lr=new Date(yt);lr.setDate(yt.getDate()+Qt);const ie=lr.getMonth()===me,De=lr.toDateString()===or.toDateString(),mt=lr.toDateString()===Er.toDateString(),vt=gr.has(lr.toDateString()),xr=Cr[lr.toDateString()]||0;Ct.push({date:lr,isCurrentMonth:ie,isToday:De,isSelected:mt,hasReminders:vt,reminderCount:xr})}return Ct},Je=()=>{const ce=!D;U(ce),localStorage.setItem("lilyEnabled",JSON.stringify(ce)),ce&&(Ne("Hi! I'm back! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),fe(!0))},je=()=>D?a.jsxs("div",{className:xe.lilyMascot,children:[J&&a.jsxs("div",{className:xe.lilySpeechBubble,children:[a.jsx("p",{children:se}),a.jsx("div",{className:xe.lilySpeechTail})]}),a.jsx("div",{className:xe.lilyImage,onClick:()=>{fe(!J)},onDoubleClick:()=>{Je()},children:a.jsx("img",{src:e?.icon?`/retailpos/images/icons/${e.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:e?.icon||"Lily"})})]}):null,q=()=>{const ce=new Date(re);return ce.setHours(0,0,0,0),r.filter(me=>{const qe=new Date(me.remind_date);qe.setHours(0,0,0,0);const yt=qe.getTime()===ce.getTime(),Ct=E||!me.resolved;return yt&&Ct})},be=async()=>{if(s([]),oe(!1),!y)try{const{error:ce}=await Oe.from("reminders").delete().neq("reminder_id",0);ce&&console.error("Error deleting all reminders from database:",ce)}catch(ce){console.error("Error deleting all reminders:",ce)}},tt=async()=>{try{if(c(!0),!e?.business_id){s([]),c(!1);return}const{data:ce,error:me}=await Oe.from("reminders").select("*").eq("business_id",e.business_id).order("remind_date",{ascending:!0});if(me)throw console.error("Database fetch error:",me),me;console.log("Fetched reminders from database:",ce);const qe=ce?.map((yt,Ct)=>({...yt,x:Math.random()*400+50,y:Math.random()*300+50,rotation:(Math.random()-.5)*6,isEditing:!1,color:Object.keys(W)[Ct%Object.keys(W).length]}))||[];console.log("Reminders with UI properties:",qe),s(qe)}catch(ce){console.error("Error fetching reminders:",ce),v("Failed to load reminders. Please try again.")}finally{c(!1)}};T.useEffect(()=>{(async()=>{try{const{data:me,error:qe}=await Oe.from("reminders").select("count",{count:"exact",head:!0});qe?(console.error("Table test error:",qe),v("Database table 'reminders' does not exist. Please run the SQL commands from database-schema.sql in your Supabase SQL editor."),b(!0),c(!1)):(console.log("Table exists, fetching reminders..."),tt())}catch(me){console.error("Table test failed:",me),v("Failed to connect to database. Please check your connection.")}})()},[]);const Me=()=>{K({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),v(null),_(!0)},ct=()=>{_(!1),K({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"})},pt=()=>{A(!1),O(null),M({title:"",body:"",remind_date:"",color:"yellow",resolved:!1})},ut=async()=>{if(!k||!ne.title.trim()||!ne.body.trim()){v("Please fill in both title and body for the reminder.");return}await Ft(k.reminder_id,{title:ne.title.trim(),body:ne.body.trim(),remind_date:ne.remind_date,color:ne.color,resolved:ne.resolved}),pt()},St=async()=>{if(!L.title.trim()||!L.body.trim()){v("Please fill in both title and body for the reminder.");return}const ce={title:L.title.trim(),body:L.body.trim(),remind_date:L.remind_date,owner_id:t?parseInt(t):1,business_id:e?.business_id||1};if(y){const me=Date.now();s([...r,{...ce,reminder_id:me,created_at:new Date().toISOString()}]),ct();return}try{if(t)ce.owner_id=parseInt(t);else{const yt=Date.now();s([...r,{...ce,reminder_id:yt,created_at:new Date().toISOString()}]),ct();return}const{data:me,error:qe}=await Oe.from("reminders").insert([{title:ce.title,body:ce.body,remind_date:ce.remind_date,owner_id:ce.owner_id}]).select().single();if(qe){const yt=Date.now();s([...r,{...ce,reminder_id:yt,created_at:new Date().toISOString()}]),ct();return}s([...r,{...ce,reminder_id:me.reminder_id,created_at:new Date().toISOString()}]),ct()}catch(me){console.error("Error adding reminder:",me);const qe=Date.now();s([...r,{...ce,reminder_id:qe,created_at:new Date().toISOString()}]),ct()}},ft=async ce=>{if(s(r.filter(me=>me.reminder_id!==ce)),!y)try{const{error:me}=await Oe.from("reminders").delete().eq("reminder_id",ce);me&&console.error("Error deleting reminder from database:",me)}catch(me){console.error("Error deleting reminder:",me)}},Ft=async(ce,me)=>{if(console.log("updateReminder called with:",{id:ce,updates:me,offlineMode:y}),s(r.map(qe=>qe.reminder_id===ce?{...qe,...me}:qe)),y){console.log("Offline mode - skipping database update");return}try{if(me.title||me.body||me.remind_date||me.resolved!==void 0){console.log("Updating database with:",{title:me.title,body:me.body,remind_date:me.remind_date,resolved:me.resolved});const{error:qe}=await Oe.from("reminders").update({title:me.title,body:me.body,remind_date:me.remind_date,resolved:me.resolved}).eq("reminder_id",ce);qe?console.error("Error updating reminder in database:",qe):console.log("Successfully updated reminder in database")}}catch(qe){console.error("Error updating reminder:",qe)}},Dt=(ce,me)=>{ce.preventDefault();const qe=ce.currentTarget.getBoundingClientRect();f(me),h({x:ce.clientX-qe.left,y:ce.clientY-qe.top})},jr=ce=>{if(d){const me=document.getElementById("sticky-container");if(me){const qe=me.getBoundingClientRect(),yt=Math.max(0,Math.min(ce.clientX-qe.left-p.x,qe.width-224)),Ct=Math.max(0,Math.min(ce.clientY-qe.top-p.y,qe.height-224));s(r.map(gr=>gr.reminder_id===d.reminder_id?{...gr,x:yt,y:Ct}:gr))}}},Xt=()=>{f(null),h({x:0,y:0})};T.useEffect(()=>{if(d)return document.addEventListener("mousemove",jr),document.addEventListener("mouseup",Xt),()=>{document.removeEventListener("mousemove",jr),document.removeEventListener("mouseup",Xt)}},[d,p]);const It=({reminder:ce})=>{const[me,qe]=T.useState(ce.title),[yt,Ct]=T.useState(ce.body),[gr,Cr]=T.useState(ce.remind_date),or=T.useRef(null);T.useEffect(()=>{ce.isEditing&&or.current&&(or.current.focus(),or.current.select())},[ce.isEditing]);const Er=Xe=>{Ct(Xe.target.value),Xe.target.style.height="auto",Xe.target.style.height=Xe.target.scrollHeight+"px"},Qt=()=>{me.trim()&&yt.trim()?Ft(ce.reminder_id,{title:me.trim(),body:yt.trim(),remind_date:gr,isEditing:!1}):(qe(ce.title),Ct(ce.body),Cr(ce.remind_date),Ft(ce.reminder_id,{isEditing:!1}))},lr=Xe=>{Xe.key==="Enter"&&Xe.shiftKey||(Xe.key==="Enter"?(Xe.preventDefault(),Qt()):Xe.key==="Escape"&&(qe(ce.title),Ct(ce.body),Cr(ce.remind_date),Ft(ce.reminder_id,{isEditing:!1})))},ie=Xe=>{Xe.key==="Enter"?(Xe.preventDefault(),Qt()):Xe.key==="Escape"&&(qe(ce.title),Ct(ce.body),Cr(ce.remind_date),Ft(ce.reminder_id,{isEditing:!1}))},De=W[ce.color]||W.yellow,mt=new Date,vt=new Date(ce.remind_date),xr=vt<mt&&vt.toDateString()!==mt.toDateString(),Jt=vt.toDateString()===mt.toDateString();return a.jsx("div",{className:`${xe.stickyNote} ${d?.reminder_id===ce.reminder_id?xe.stickyNoteDragging:""}`,style:{left:`${ce.x}px`,top:`${ce.y}px`,transform:`rotate(${ce.rotation}deg)`},children:a.jsxs("div",{className:`${xe.note} ${De.bg} ${xr?xe.noteOverdue:Jt?xe.noteDueToday:""}`,onMouseDown:Xe=>!ce.isEditing&&Dt(Xe,ce),children:[a.jsx("div",{className:`${xe.noteTopStrip} ${De.border}`}),a.jsx("div",{className:xe.noteContent,children:ce.isEditing?a.jsxs("div",{className:xe.noteContentEditing,children:[a.jsx("input",{type:"text",value:me,onChange:Xe=>qe(Xe.target.value),onKeyDown:ie,onBlur:Qt,className:xe.noteInput,placeholder:"Reminder title..."}),a.jsx("input",{type:"date",value:gr,onChange:Xe=>Cr(Xe.target.value),onKeyDown:ie,onBlur:Qt,className:xe.noteDateInput}),a.jsx("textarea",{ref:or,value:yt,onChange:Er,onBlur:Qt,onKeyDown:lr,className:xe.noteTextarea,style:{fontFamily:"Comic Sans MS, cursive, sans-serif",minHeight:"80px"},placeholder:"Reminder details..."})]}):a.jsxs("div",{onContextMenu:Xe=>{Xe.preventDefault(),Xe.stopPropagation(),console.log("Note right-clicked for reminder:",ce.reminder_id),O(ce),M({title:ce.title,body:ce.body,remind_date:ce.remind_date,color:ce.color||"yellow",resolved:ce.resolved||!1}),A(!0)},className:xe.noteDisplay,children:[a.jsx("div",{className:xe.noteTitle,children:a.jsx("span",{className:ce.resolved?xe.noteTitleResolved:"",children:ce.title})}),a.jsxs("div",{className:`${xe.noteDate} ${xr?xe.noteDateOverdue:Jt?xe.noteDateToday:""}`,children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(ce.remind_date).toLocaleDateString(),xr&&a.jsx("span",{style:{color:"#dc2626",marginLeft:"0.5rem",fontWeight:"700"},children:"OVERDUE"}),Jt&&!xr&&a.jsx("span",{style:{color:"#d97706",marginLeft:"0.5rem",fontWeight:"700"},children:"TODAY"})]}),a.jsx("div",{className:`${xe.noteBody} ${ce.resolved?xe.noteBodyResolved:""}`,style:{fontFamily:"Comic Sans MS, cursive, sans-serif"},children:ce.body})]})}),a.jsx("div",{className:xe.noteCorner,children:a.jsx("div",{className:`${xe.noteCornerEffect} ${De.bg}`})})]})})};return o?a.jsx("div",{className:xe.loading,children:a.jsxs("div",{className:xe.loadingContent,children:[a.jsx("i",{className:`fa-solid fa-spinner fa-spin ${xe.loadingIcon}`}),a.jsx("p",{className:xe.loadingText,children:"Loading reminders..."})]})}):a.jsxs("div",{className:xe.container,children:[a.jsx("div",{className:xe.header,children:a.jsxs("div",{className:xe.title,children:[a.jsxs("h1",{children:[a.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.75rem"}}),"Reminders"]}),a.jsx("p",{children:"Click and drag to move reminders around  Right-click to edit"})]})}),a.jsxs("div",{className:xe.mainContent,children:[a.jsxs("div",{className:xe.dateNavigation,children:[a.jsx("button",{onClick:V,className:xe.navButton,onMouseEnter:()=>{D&&(Ne("Click this arrow to go to the previous day! This helps you navigate through your reminders day by day."),fe(!0))},onMouseLeave:()=>{D&&fe(!1)},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("div",{className:xe.currentDate,onClick:()=>te(!Q),style:{cursor:"pointer"},onMouseEnter:()=>{D&&(Ne("Click on this date to open the calendar modal! You can see all your reminders and navigate to any date quickly."),fe(!0))},onMouseLeave:()=>{D&&fe(!1)},children:re.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsx("button",{onClick:ue,className:xe.navButton,onMouseEnter:()=>{D&&(Ne("Click this arrow to go to the next day! This helps you navigate through your reminders day by day."),fe(!0))},onMouseLeave:()=>{D&&fe(!1)},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),Q&&a.jsx("div",{className:xe.calendarModal,onClick:()=>te(!1),children:a.jsxs("div",{className:xe.calendar,onClick:ce=>ce.stopPropagation(),children:[a.jsxs("div",{className:xe.calendarHeader,children:[a.jsx("button",{onClick:()=>te(!1),className:xe.calendarCloseButton,children:a.jsx("i",{className:"fa-solid fa-times"})}),a.jsx("button",{onClick:()=>Le("prev"),className:xe.calendarNavButton,children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("div",{className:xe.calendarTitle,children:ae.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>Le("next"),className:xe.calendarNavButton,children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),a.jsxs("div",{className:xe.calendarGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ce=>a.jsx("div",{className:xe.calendarDayHeader,children:ce},ce)),Ve().map((ce,me)=>{let qe=xe.calendarDay;return ce.isCurrentMonth?ce.hasReminders&&ce.isToday?qe+=` ${xe.calendarDayWithRemindersToday}`:ce.hasReminders&&ce.isSelected?qe+=` ${xe.calendarDayWithRemindersSelected}`:ce.hasReminders?qe+=` ${xe.calendarDayWithReminders}`:ce.isToday?qe+=` ${xe.calendarDayToday}`:ce.isSelected&&(qe+=` ${xe.calendarDaySelected}`):qe+=` ${xe.calendarDayOtherMonth}`,a.jsxs("div",{className:qe,onClick:()=>Ce(ce.date),children:[ce.date.getDate(),ce.hasReminders&&a.jsx("div",{className:xe.calendarReminderCount,children:ce.reminderCount})]},me)})]})]})}),y&&a.jsx("div",{className:xe.offlineNotice,children:a.jsxs("div",{className:xe.offlineNoticeContent,children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),a.jsxs("div",{children:[a.jsx("strong",{children:"Offline Mode:"})," The reminders table doesn't exist in your database yet. Reminders will work locally but won't be saved permanently.",a.jsx("a",{href:"#",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),style:{textDecoration:"underline",marginLeft:"0.25rem"},children:"Create the table in Supabase"})]})]})}),a.jsxs("div",{className:xe.controls,children:[a.jsxs("button",{onClick:Me,className:`${xe.button} ${xe.buttonPrimary}`,onMouseEnter:()=>{D&&(Ne("Click this button to add a new reminder! You can set the title, content, date, and color for your reminder."),fe(!0))},onMouseLeave:()=>{D&&fe(!1)},children:[a.jsx("i",{className:"fa-solid fa-plus-circle"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Add Reminder"})]}),a.jsxs("button",{onClick:()=>{const ce=document.getElementById("sticky-container");if(ce){const me=ce.getBoundingClientRect();s(r.map(qe=>({...qe,x:Math.random()*(me.width-224)+20,y:Math.random()*(me.height-224)+20,rotation:(Math.random()-.5)*6})))}},className:`${xe.button} ${xe.buttonSecondary}`,onMouseEnter:()=>{D&&(Ne("Click this button to shuffle all your reminders around! This gives them new random positions on the board."),fe(!0))},onMouseLeave:()=>{D&&fe(!1)},children:[a.jsx("i",{className:"fa-solid fa-random"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Shuffle"})]}),a.jsxs("button",{onClick:()=>P(!E),className:`${xe.button} ${E?xe.buttonPrimary:xe.buttonSecondary}`,onMouseEnter:()=>{D&&(Ne(E?"Click to hide completed reminders and focus on what's still pending!":"Click to show all reminders including completed ones!"),fe(!0))},onMouseLeave:()=>{D&&fe(!1)},children:[a.jsx("i",{className:`fa-solid ${E?"fa-eye":"fa-eye-slash"}`}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:E?"Show All":"Hide Completed"})]}),r.length>0&&a.jsxs("button",{onClick:()=>oe(!0),className:`${xe.button} ${xe.buttonDanger}`,onMouseEnter:()=>{D&&(Ne("Click this button to remove all reminders at once! Be careful - this action cannot be undone."),fe(!0))},onMouseLeave:()=>{D&&fe(!1)},children:[a.jsx("i",{className:"fa-solid fa-trash-can"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Clear All"})]})]}),a.jsxs("div",{id:"sticky-container",className:xe.notesContainer,style:{minHeight:"600px"},children:[a.jsx("div",{className:xe.gridBackground,children:a.jsx("div",{className:xe.gridPattern})}),q().map(ce=>a.jsx(It,{reminder:ce},ce.reminder_id)),q().length===0&&a.jsx("div",{className:xe.emptyState,children:a.jsxs("div",{className:xe.emptyStateContent,children:[a.jsx("div",{className:xe.emptyStateIcon,children:a.jsx("i",{className:"fa-solid fa-sticky-note"})}),a.jsx("h3",{className:xe.emptyStateTitle,children:"No reminders for this date"}),a.jsxs("p",{children:['Click "Add Reminder" to create your first reminder for ',re.toLocaleDateString()]})]})}),d&&a.jsxs("div",{className:xe.dragIndicator,children:[a.jsx("i",{className:"fa-solid fa-arrows-up-down-left-right",style:{marginRight:"0.25rem"}}),"Dragging reminder..."]})]}),a.jsx("div",{className:xe.footer,children:a.jsxs("p",{children:[a.jsx("i",{className:"fa-solid fa-lightbulb",style:{marginRight:"0.25rem"}}),"Tips: Shift+Enter for new lines  Escape to cancel editing  Right-click to edit  Drag reminders around freely"]})}),w&&a.jsx("div",{className:xe.modalOverlay,children:a.jsx("div",{className:xe.modal,children:a.jsxs("div",{className:xe.modalHeader,children:[a.jsxs("div",{className:xe.modalTitle,children:[a.jsxs("h2",{children:[a.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Create New Reminder"]}),a.jsx("button",{onClick:ct,className:xe.modalClose,children:a.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),a.jsxs("form",{onSubmit:ce=>{ce.preventDefault(),St()},className:xe.modalForm,children:[x&&a.jsx("div",{className:xe.errorMessage,children:a.jsxs("div",{className:xe.errorContent,children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),a.jsx("span",{style:{fontSize:"0.875rem"},children:x})]})}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"title",className:xe.formLabel,children:"Title *"}),a.jsx("input",{type:"text",id:"title",value:L.title,onChange:ce=>K({...L,title:ce.target.value}),className:xe.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"remind_date",className:xe.formLabel,children:"Remind Date *"}),a.jsx("input",{type:"date",id:"remind_date",value:L.remind_date,onChange:ce=>K({...L,remind_date:ce.target.value}),className:xe.formInput,required:!0})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{className:xe.formLabel,children:"Color"}),a.jsx("div",{className:xe.colorSelection,children:Object.entries(W).map(([ce,me])=>a.jsx("button",{type:"button",onClick:()=>K({...L,color:ce}),className:`${xe.colorOption} ${me.bg} ${L.color===ce?xe.colorOptionSelected:""}`,title:ce},ce))})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"body",className:xe.formLabel,children:"Details *"}),a.jsx("textarea",{id:"body",value:L.body,onChange:ce=>K({...L,body:ce.target.value}),className:xe.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),L.title&&L.body&&a.jsxs("div",{className:xe.preview,children:[a.jsx("label",{className:xe.previewLabel,children:"Preview"}),a.jsxs("div",{className:`${xe.previewNote} ${W[L.color]?.bg} ${W[L.color]?.border}`,children:[a.jsx("div",{className:xe.previewTitle,children:L.title}),a.jsxs("div",{className:xe.previewDate,children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(L.remind_date).toLocaleDateString()]}),a.jsx("div",{className:xe.previewBody,children:L.body})]})]}),a.jsxs("div",{className:xe.modalActions,children:[a.jsx("button",{type:"button",onClick:ct,className:`${xe.modalButton} ${xe.modalButtonCancel}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${xe.modalButton} ${xe.modalButtonSubmit}`,children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Create Reminder"]})]})]})]})})}),S&&k&&a.jsx("div",{className:xe.modalOverlay,children:a.jsx("div",{className:xe.modal,children:a.jsxs("div",{className:xe.modalHeader,children:[a.jsxs("div",{className:xe.modalTitle,children:[a.jsxs("h2",{children:[a.jsx("i",{className:"fa-solid fa-edit",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Edit Reminder"]}),a.jsx("button",{onClick:pt,className:xe.modalClose,children:a.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),a.jsxs("form",{onSubmit:ce=>{ce.preventDefault(),ut()},className:xe.modalForm,children:[x&&a.jsx("div",{className:xe.errorMessage,children:a.jsxs("div",{className:xe.errorContent,children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),a.jsx("span",{style:{fontSize:"0.875rem"},children:x})]})}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"edit-title",className:xe.formLabel,children:"Title *"}),a.jsx("input",{type:"text",id:"edit-title",value:ne.title,onChange:ce=>M({...ne,title:ce.target.value}),className:xe.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"edit-remind_date",className:xe.formLabel,children:"Remind Date *"}),a.jsx("input",{type:"date",id:"edit-remind_date",value:ne.remind_date,onChange:ce=>M({...ne,remind_date:ce.target.value}),className:xe.formInput,required:!0})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{className:xe.formLabel,children:"Color"}),a.jsx("div",{className:xe.colorSelection,children:Object.entries(W).map(([ce,me])=>a.jsx("button",{type:"button",onClick:()=>M({...ne,color:ce}),className:`${xe.colorOption} ${me.bg} ${ne.color===ce?xe.colorOptionSelected:""}`,title:ce},ce))})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{className:xe.formLabel,children:"Status"}),a.jsxs("div",{className:xe.checkboxContainer,children:[a.jsx("input",{type:"checkbox",id:"edit-resolved",checked:ne.resolved,onChange:ce=>M({...ne,resolved:ce.target.checked}),className:xe.formCheckbox}),a.jsxs("label",{htmlFor:"edit-resolved",className:xe.checkboxLabel,children:[a.jsx("i",{className:`fa-solid ${ne.resolved?"fa-check-square":"fa-square"}`,style:{marginRight:"0.5rem"}}),"Mark as completed/resolved"]})]})]}),a.jsxs("div",{className:xe.formGroup,children:[a.jsx("label",{htmlFor:"edit-body",className:xe.formLabel,children:"Details *"}),a.jsx("textarea",{id:"edit-body",value:ne.body,onChange:ce=>M({...ne,body:ce.target.value}),className:xe.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),ne.title&&ne.body&&a.jsxs("div",{className:xe.preview,children:[a.jsx("label",{className:xe.previewLabel,children:"Preview"}),a.jsxs("div",{className:`${xe.previewNote} ${W[ne.color]?.bg} ${W[ne.color]?.border}`,children:[a.jsx("div",{className:xe.previewTitle,children:ne.title}),a.jsxs("div",{className:xe.previewDate,children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(ne.remind_date).toLocaleDateString()]}),a.jsx("div",{className:xe.previewBody,children:ne.body})]})]}),a.jsxs("div",{className:xe.modalActions,children:[a.jsxs("button",{type:"button",onClick:()=>{ft(k.reminder_id),pt()},className:`${xe.modalButton} ${xe.modalButtonDanger}`,children:[a.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),a.jsx("button",{type:"button",onClick:pt,className:`${xe.modalButton} ${xe.modalButtonCancel}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${xe.modalButton} ${xe.modalButtonSubmit}`,children:[a.jsx("i",{className:"fa-solid fa-save"}),"Update Reminder"]})]})]})]})})}),de&&a.jsx("div",{className:xe.confirmationDialog,children:a.jsxs("div",{className:xe.confirmationContent,children:[a.jsxs("div",{className:xe.confirmationHeader,children:[a.jsx("div",{className:xe.confirmationIcon,children:a.jsx("i",{className:"fa-solid fa-exclamation-triangle"})}),a.jsx("h3",{children:"Remove All Reminders"})]}),a.jsx("p",{children:"Are you sure you want to remove all reminders? This action cannot be undone."}),a.jsxs("div",{className:xe.confirmationButtons,children:[a.jsxs("button",{onClick:()=>oe(!1),className:`${xe.confirmationButton} ${xe.confirmationButtonCancel}`,children:[a.jsx("i",{className:"fa-solid fa-times",style:{marginRight:"0.5rem"}}),"Cancel"]}),a.jsxs("button",{onClick:be,className:`${xe.confirmationButton} ${xe.confirmationButtonConfirm}`,children:[a.jsx("i",{className:"fa-solid fa-trash",style:{marginRight:"0.5rem"}}),"Remove All"]})]})]})})]}),a.jsx(je,{})]})}const y7=()=>{const e=Ls(),{user:t,switchUser:r}=bn(),[s,o]=T.useState([]),[c,d]=T.useState(!0),[f,p]=T.useState(null),[h,x]=T.useState(!1),[v,y]=T.useState(""),[b,w]=T.useState(""),[_,S]=T.useState(!1),[A,k]=T.useState(!1),[O,L]=T.useState(""),[K,ne]=T.useState(""),[M,re]=T.useState(!1),[ee,de]=T.useState(!1);T.useEffect(()=>{t?.business_id&&oe()},[t?.business_id]),T.useEffect(()=>{t?.pin&&!M&&k(!0)},[t?.pin,M]);const oe=async()=>{if(t?.business_id)try{d(!0);const{data:se,error:Ne}=await Oe.from("users").select("*").eq("business_id",t.business_id).eq("active",!0).order("user_id",{ascending:!1});if(Ne){console.error("Error fetching users:",Ne);return}o(se||[])}catch(se){console.error("Error fetching users:",se)}finally{d(!1)}},Q=se=>{p(se),x(!0),y(""),w(""),de(!1)},te=async se=>{if(se.preventDefault(),!(!f||!v)){S(!0),w("");try{if(await r(f.user_id,v,ee))e("/dashboard");else throw new Error(ee?"Invalid PIN":"Invalid password")}catch(Ne){console.log("Password error:",Ne),w(ee?"Invalid PIN. Please try again.":"Invalid password. Please try again.")}finally{S(!1)}}},ae=()=>{x(!1),p(null),y(""),w(""),S(!1),de(!1)},X=se=>{switch(se.toLowerCase()){case"admin":return"#dc2626";case"owner":return"#7c3aed";case"manager":return"#ea580c";case"cashier":return"#2563eb";default:return"#6b7280"}},J=se=>{if(!se)return"Never";const Ne=new Date(se);return Number.isNaN(Ne.getTime())?"Never":Ne.toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})},fe=async se=>{if(se.preventDefault(),!O){ne("Please enter your PIN");return}t?.pin&&t.pin===O?(k(!1),re(!0),L(""),ne("")):ne("Invalid PIN. Please try again.")};return a.jsx("div",{style:{position:"fixed",inset:"0",backgroundColor:"#0b0d10",backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02) 2px, transparent 2px, transparent 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",zIndex:9999},children:a.jsxs("div",{style:{background:"transparent",width:"100%",maxWidth:"1200px",padding:"20px"},children:[a.jsx("div",{style:{background:"#000000",borderRadius:"12px",border:"4px solid #4a5568",boxShadow:"inset 0 0 20px rgba(0,0,0,0.5)",padding:"16px"},children:a.jsxs("div",{style:{background:"#000000",borderRadius:"8px",padding:"24px",position:"relative",overflow:"hidden",height:"700px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid #4a5568",position:"relative"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#ef4444"}}),a.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#eab308"}}),a.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#7d8d86"}})]}),a.jsx("h2",{style:{fontSize:"32px",fontWeight:"bold",color:"#ffffff",margin:0},children:"Select User"}),a.jsx("button",{onClick:()=>{h?ae():e("/login")},style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"color 0.2s ease",fontSize:"32px"},onMouseEnter:se=>{se.currentTarget.style.color="#ffffff"},onMouseLeave:se=>{se.currentTarget.style.color="#9ca3af"},"aria-label":"Close",children:""})]}),a.jsx("div",{children:A?a.jsx("div",{children:a.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:8,padding:24,marginBottom:24,textAlign:"center"},children:[a.jsxs("div",{style:{marginBottom:16},children:[a.jsx("i",{className:"fa-solid fa-lock",style:{fontSize:"48px",color:"#7d8d86",marginBottom:"16px"}}),a.jsx("h3",{style:{color:"#ffffff",fontSize:"24px",margin:"0 0 8px 0"},children:"PIN Required"}),a.jsx("p",{style:{color:"#9ca3af",fontSize:"16px",margin:0},children:"Enter your PIN to access the user system"})]}),a.jsxs("form",{onSubmit:fe,style:{display:"flex",flexDirection:"column",gap:16,maxWidth:"300px",margin:"0 auto"},children:[a.jsxs("div",{children:[a.jsx("input",{type:"password",value:O,onChange:se=>{L(se.target.value),K&&ne("")},style:{width:"200px",padding:12,background:"#1a202c",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,boxSizing:"border-box",textAlign:"center",letterSpacing:"2px"},placeholder:"Enter PIN",maxLength:6,required:!0,autoFocus:!0}),K&&a.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:"8px 12px",marginTop:8,display:"flex",alignItems:"center",gap:8},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc2626",fontSize:14}}),a.jsx("p",{style:{fontSize:14,color:"#dc2626",margin:0,fontWeight:500},children:K})]})]}),a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("button",{type:"button",onClick:()=>{e("/login")},style:{flex:1,padding:"12px 16px",background:"#4a5568",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,fontWeight:500,cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:se=>{se.currentTarget.style.background="#6b7280"},onMouseLeave:se=>{se.currentTarget.style.background="#4a5568"},children:"Back to Login"}),a.jsx("button",{type:"submit",style:{flex:1,padding:"12px 16px",background:"#7d8d86",border:"2px solid #7d8d86",borderRadius:8,color:"#000000",fontSize:18,fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:se=>{se.currentTarget.style.background="#3e3f29",se.currentTarget.style.borderColor="#3e3f29"},onMouseLeave:se=>{se.currentTarget.style.background="#7d8d86",se.currentTarget.style.borderColor="#7d8d86"},children:"Verify PIN"})]})]})]})}):h?a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundImage:"url(images/mcbackground3.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"#0b0d10",position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",pointerEvents:"none"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,gap:"32px",padding:"40px 0",position:"relative",zIndex:1},children:[a.jsx("div",{style:{position:"relative"},children:a.jsx("div",{style:{width:"160px",height:"160px",borderRadius:"50%",background:"rgba(0,0,0,0.6)",border:"3px solid rgba(255,255,255,0.4)",backdropFilter:"blur(15px)",boxShadow:"0 8px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:f?.icon?a.jsx("img",{src:`/retailpos/images/icons/${f.icon}.png`,alt:f.icon,style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"50%"}}):a.jsx("svg",{viewBox:"0 0 24 24",style:{width:"80px",height:"80px",color:"rgba(255,255,255,0.85)"},fill:"currentColor",children:a.jsx("path",{d:"M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"})})})}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{color:"#ffffff",fontSize:"32px",fontWeight:"600",letterSpacing:"0.5px",textShadow:"0 2px 8px rgba(0,0,0,0.8)"},children:f?.username}),a.jsx("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px",marginTop:"8px",textShadow:"0 1px 4px rgba(0,0,0,0.8)"},children:f?.role})]}),a.jsxs("form",{onSubmit:te,style:{width:"100%",maxWidth:"400px"},children:[f?.pin&&a.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:a.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"4px",backdropFilter:"blur(10px)"},children:[a.jsx("button",{type:"button",onClick:()=>{de(!1),y(""),w("")},style:{padding:"8px 16px",background:ee?"transparent":"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:ee?"rgba(255,255,255,0.7)":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Password"}),a.jsx("button",{type:"button",onClick:()=>{de(!0),y(""),w("")},style:{padding:"8px 16px",background:ee?"rgba(255,255,255,0.2)":"transparent",border:"none",borderRadius:"6px",color:ee?"#ffffff":"rgba(255,255,255,0.7)",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"PIN"})]})}),a.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[a.jsx("input",{type:"password",value:v,onChange:se=>{y(se.target.value),b&&w("")},placeholder:ee?"Enter PIN":"Password",maxLength:ee?6:void 0,required:!0,autoFocus:!0,style:{width:"100%",height:"48px",borderRadius:"24px",paddingLeft:"20px",paddingRight:"56px",color:"#ffffff",fontSize:"16px",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(15px)",border:"2px solid rgba(255,255,255,0.4)",boxShadow:"0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)",outline:"none",textAlign:ee?"center":"left",letterSpacing:ee?"2px":"normal",boxSizing:"border-box",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onFocus:se=>{se.target.style.border="2px solid rgba(255,255,255,0.8)",se.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onBlur:se=>{se.target.style.border="2px solid rgba(255,255,255,0.4)",se.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}}),a.jsx("button",{type:"submit",disabled:_,style:{position:"absolute",right:"4px",top:"4px",height:"40px",width:"40px",borderRadius:"50%",background:_?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.95)",border:"2px solid rgba(255,255,255,0.8)",display:"flex",alignItems:"center",justifyContent:"center",cursor:_?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 6px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)",opacity:_?.7:1},onMouseEnter:se=>{_||(se.currentTarget.style.background="#ffffff")},onMouseLeave:se=>{_||(se.currentTarget.style.background="rgba(255,255,255,0.95)")},children:_?a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{color:"#0f2d6e",fontSize:"16px"}}):a.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:"#0f2d6e"},fill:"currentColor",children:a.jsx("path",{d:"M13 5l7 7-7 7v-4H4v-6h9V5z"})})})]}),b&&a.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",backdropFilter:"blur(10px)"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#fca5a5",fontSize:"14px",textShadow:"0 1px 2px rgba(0,0,0,0.8)"}}),a.jsx("p",{style:{fontSize:"14px",color:"#fca5a5",margin:0,fontWeight:500,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:b})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px"},children:[a.jsx("button",{type:"button",onClick:ae,style:{background:"none",border:"none",color:"rgba(255,255,255,0.9)",fontSize:"14px",cursor:"pointer",textDecoration:"none",transition:"color 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:se=>{se.currentTarget.style.color="#ffffff"},onMouseLeave:se=>{se.currentTarget.style.color="rgba(255,255,255,0.9)"},children:" Back to users"}),a.jsx("div",{style:{fontSize:"14px",color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:"Press Enter to sign in"})]})]})]}),a.jsx("div",{style:{padding:"24px",display:"flex",justifyContent:"flex-start",position:"relative",zIndex:1},children:a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxWidth:"300px",maxHeight:"200px",overflowY:"auto",paddingRight:"8px"},children:s.filter(se=>se.user_id!==f?.user_id).map(se=>a.jsxs("button",{onClick:()=>{p(se),y(""),w(""),de(!1)},style:{display:"flex",alignItems:"center",gap:"10px",borderRadius:"8px",padding:"6px 10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",color:"rgba(255,255,255,0.9)",cursor:"pointer",transition:"all 0.2s ease",minWidth:"140px",fontSize:"13px"},onMouseEnter:Ne=>{Ne.currentTarget.style.background="rgba(0,0,0,0.5)",Ne.currentTarget.style.color="#ffffff"},onMouseLeave:Ne=>{Ne.currentTarget.style.background="rgba(0,0,0,0.4)",Ne.currentTarget.style.color="rgba(255,255,255,0.9)"},children:[a.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:se.icon?a.jsx("img",{src:`/retailpos/images/icons/${se.icon}.png`,alt:se.icon,style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"50%"}}):a.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.7)"},children:""})}),a.jsx("span",{style:{fontWeight:"400",fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:se.username})]},se.user_id))})}),a.jsxs("div",{style:{position:"absolute",right:"24px",bottom:"24px",display:"flex",alignItems:"center",gap:"16px",color:"rgba(255,255,255,0.8)",zIndex:1},children:[a.jsx("button",{title:"Accessibility",style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:se=>{se.currentTarget.style.background="rgba(0,0,0,0.6)",se.currentTarget.style.color="#ffffff"},onMouseLeave:se=>{se.currentTarget.style.background="rgba(0,0,0,0.4)",se.currentTarget.style.color="rgba(255,255,255,0.9)"},children:a.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:a.jsx("path",{d:"M11 2h2v4h-2zM4 9h16v2H4zM6 12l4 .5V22H8v-7.5L6 14v-2zm12 0v2l-2 .5V22h-2v-9.5l4-.5z"})})}),a.jsx("button",{onClick:()=>e("/login"),style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:se=>{se.currentTarget.style.background="#991b1b",se.currentTarget.style.border="1px solid #991b1b",se.currentTarget.style.color="#ffffff"},onMouseLeave:se=>{se.currentTarget.style.background="rgba(0,0,0,0.4)",se.currentTarget.style.border="1px solid rgba(255,255,255,0.3)",se.currentTarget.style.color="rgba(255,255,255,0.9)"},children:a.jsxs("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:[a.jsx("path",{d:"M11 2h2v10h-2z"}),a.jsx("path",{d:"M7.05 4.05a8.5 8.5 0 1 0 9.9 0l-1.41 1.41a6.5 6.5 0 1 1-7.08 0z"})]})})]})]}):c?a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:"#9ca3af"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:12,fontSize:"24px"}}),a.jsx("span",{style:{fontSize:"18px"},children:"Loading users..."})]}):a.jsx("div",{children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"20px"},children:s.map(se=>a.jsx("button",{style:{background:"rgba(26, 26, 26, 0.3)",border:"1px solid #4a5568",borderBottom:"3px solid #7d8d86",borderRadius:"8px",padding:24,cursor:"pointer",transition:"all 0.2s ease",width:"100%",textAlign:"left",position:"relative",minHeight:"160px"},onMouseEnter:Ne=>{Ne.currentTarget.style.background="rgba(125,141,134,0.1)",Ne.currentTarget.style.borderColor="#7d8d86",Ne.currentTarget.style.boxShadow="0 0 20px rgba(125,141,134,0.2)"},onMouseLeave:Ne=>{Ne.currentTarget.style.background="rgba(26, 26, 26, 0.3)",Ne.currentTarget.style.borderColor="#4a5568",Ne.currentTarget.style.boxShadow="none"},onClick:()=>Q(se),children:a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,height:"100%"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#1a202c",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"2px solid #4a5568"},children:se.icon?a.jsx("img",{src:`/retailpos/images/icons/${se.icon}.png`,alt:se.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):a.jsx("div",{style:{fontSize:24,color:"#4a5568"},children:""})}),a.jsx("div",{style:{flex:1},children:a.jsxs("div",{style:{marginBottom:8,display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{style:{fontSize:24,fontWeight:500,color:"#ffffff"},children:se.username}),se.pin&&a.jsx("div",{style:{background:"#10b981",color:"#ffffff",fontSize:"10px",fontWeight:"600",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"PIN"})]})})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,flex:1},children:[a.jsx("div",{children:a.jsx("span",{style:{background:`${X(se.role)}20`,color:X(se.role),padding:"6px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize",display:"inline-block"},children:se.role})}),a.jsxs("div",{style:{fontSize:14,color:"#9ca3af",lineHeight:"1.4"},children:["Last login: ",J(se.last_used)]})]})]})},se.user_id))})})})]})}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:a.jsx("div",{style:{width:60,height:60,background:"linear-gradient(145deg, #4a5568, #2d3748)",borderRadius:"0 0 15px 15px",boxShadow:"0 4px 8px rgba(0,0,0,0.4)",border:"2px solid #4a5568"}})}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:a.jsx("div",{style:{width:300,height:30,background:"linear-gradient(145deg, #2d3748, #1a202c)",borderRadius:50,boxShadow:"0 6px 20px rgba(0,0,0,0.5)",border:"1px solid #4a5568"}})})]})})},v7=()=>{const{isCollapsed:e}=W0();return I3(),a.jsxs("div",{style:{height:"100vh",background:"#f8f9fa",color:"#1a1a1a",display:"flex",overflow:"hidden",backgroundImage:"url(/retailpos/images/backgrounds/u2541828551_An_elegant_illustration_of_a_small_African_corner_5e875dd7-e5d8-4655-af92-bb5c9c2865fd_1.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.05)",zIndex:0}}),a.jsx(wj,{}),a.jsx(yE,{}),a.jsx("main",{style:{flex:1,marginLeft:e?"70px":"200px",padding:"24px",height:"100vh",overflow:"auto",transition:"margin-left 0.3s ease",position:"relative",zIndex:1},children:a.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative",zIndex:1},children:a.jsxs(Dy,{children:[a.jsx(Rn,{path:"/dashboard",element:a.jsx(Fk,{})}),a.jsx(Rn,{path:"/products",element:a.jsx(Bl,{children:a.jsx(Pk,{})})}),a.jsx(Rn,{path:"/sales",element:a.jsx(Bl,{requiredPermission:"canProcessSales",children:a.jsx(Hk,{})})}),a.jsx(Rn,{path:"/side-businesses",element:a.jsx(Bl,{requiredPermission:"canProcessSales",children:a.jsx(p6,{})})}),a.jsx(Rn,{path:"/transactions",element:a.jsx(Bl,{children:a.jsx(_6,{})})}),a.jsx(Rn,{path:"/admin",element:a.jsx(Bl,{requiredPermission:"canManageUsers",children:a.jsx(pB,{})})}),a.jsx(Rn,{path:"/reminders",element:a.jsx(m7,{})}),a.jsx(Rn,{path:"/transaction/:transactionId",element:a.jsx(S6,{})})]})})})]})},b7=new l4({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:1}}});function _7(){return a.jsx(c4,{client:b7,children:a.jsx(C3,{children:a.jsx(A3,{children:a.jsx(N3,{children:a.jsx(R3,{children:a.jsx(O3,{children:a.jsx(Rw,{basename:"/retailpos",children:a.jsxs(Dy,{children:[a.jsx(Rn,{path:"/",element:a.jsx(D1,{})}),a.jsx(Rn,{path:"/landing",element:a.jsx(D1,{})}),a.jsx(Rn,{path:"/login",element:a.jsx(vv,{})}),a.jsx(Rn,{path:"/verify-email",element:a.jsx(_k,{})}),a.jsx(Rn,{path:"/select-user",element:a.jsx(y7,{})}),a.jsx(Rn,{path:"/*",element:a.jsx(Sj,{children:a.jsx(v7,{})})})]})})})})})})})})}xS.createRoot(document.getElementById("root")).render(a.jsx(ou.StrictMode,{children:a.jsx(_7,{})}));
