(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();function h0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function K_(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function a(){var o=!1;try{o=this instanceof a}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,o.get?o:{enumerable:!0,get:function(){return e[a]}})}),r}var xh={exports:{}},kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm;function X_(){if(jm)return kl;jm=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:e,type:a,key:d,ref:o!==void 0?o:null,props:c}}return kl.Fragment=t,kl.jsx=r,kl.jsxs=r,kl}var Em;function Q_(){return Em||(Em=1,xh.exports=X_()),xh.exports}var s=Q_(),mh={exports:{}},Bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km;function J_(){if(km)return Bt;km=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.iterator;function v(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function S(C,X,E){this.props=C,this.context=X,this.refs=_,this.updater=E||b}S.prototype.isReactComponent={},S.prototype.setState=function(C,X){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,X,"setState")},S.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function N(){}N.prototype=S.prototype;function R(C,X,E){this.props=C,this.context=X,this.refs=_,this.updater=E||b}var O=R.prototype=new N;O.constructor=R,w(O,S.prototype),O.isPureReactComponent=!0;var P=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},ae=Object.prototype.hasOwnProperty;function Y(C,X,E,z,H,Z){return E=Z.ref,{$$typeof:e,type:C,key:X,ref:E!==void 0?E:null,props:Z}}function F(C,X){return Y(C.type,X,void 0,void 0,void 0,C.props)}function Q(C){return typeof C=="object"&&C!==null&&C.$$typeof===e}function oe(C){var X={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(E){return X[E]})}var q=/\/+/g;function de(C,X){return typeof C=="object"&&C!==null&&C.key!=null?oe(""+C.key):X.toString(36)}function te(){}function ne(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(te,te):(C.status="pending",C.then(function(X){C.status==="pending"&&(C.status="fulfilled",C.value=X)},function(X){C.status==="pending"&&(C.status="rejected",C.reason=X)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function me(C,X,E,z,H){var Z=typeof C;(Z==="undefined"||Z==="boolean")&&(C=null);var ge=!1;if(C===null)ge=!0;else switch(Z){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(C.$$typeof){case e:case t:ge=!0;break;case x:return ge=C._init,me(ge(C._payload),X,E,z,H)}}if(ge)return H=H(C),ge=z===""?"."+de(C,0):z,P(H)?(E="",ge!=null&&(E=ge.replace(q,"$&/")+"/"),me(H,X,E,"",function(Re){return Re})):H!=null&&(Q(H)&&(H=F(H,E+(H.key==null||C&&C.key===H.key?"":(""+H.key).replace(q,"$&/")+"/")+ge)),X.push(H)),1;ge=0;var Fe=z===""?".":z+":";if(P(C))for(var qe=0;qe<C.length;qe++)z=C[qe],Z=Fe+de(z,qe),ge+=me(z,X,E,Z,H);else if(qe=v(C),typeof qe=="function")for(C=qe.call(C),qe=0;!(z=C.next()).done;)z=z.value,Z=Fe+de(z,qe++),ge+=me(z,X,E,Z,H);else if(Z==="object"){if(typeof C.then=="function")return me(ne(C),X,E,z,H);throw X=String(C),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ge}function re(C,X,E){if(C==null)return C;var z=[],H=0;return me(C,z,"","",function(Z){return X.call(E,Z,H++)}),z}function be(C){if(C._status===-1){var X=C._result;X=X(),X.then(function(E){(C._status===0||C._status===-1)&&(C._status=1,C._result=E)},function(E){(C._status===0||C._status===-1)&&(C._status=2,C._result=E)}),C._status===-1&&(C._status=0,C._result=X)}if(C._status===1)return C._result.default;throw C._result}var W=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function xe(){}return Bt.Children={map:re,forEach:function(C,X,E){re(C,function(){X.apply(this,arguments)},E)},count:function(C){var X=0;return re(C,function(){X++}),X},toArray:function(C){return re(C,function(X){return X})||[]},only:function(C){if(!Q(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Bt.Component=S,Bt.Fragment=r,Bt.Profiler=o,Bt.PureComponent=R,Bt.StrictMode=a,Bt.Suspense=h,Bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,Bt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return J.H.useMemoCache(C)}},Bt.cache=function(C){return function(){return C.apply(null,arguments)}},Bt.cloneElement=function(C,X,E){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var z=w({},C.props),H=C.key,Z=void 0;if(X!=null)for(ge in X.ref!==void 0&&(Z=void 0),X.key!==void 0&&(H=""+X.key),X)!ae.call(X,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&X.ref===void 0||(z[ge]=X[ge]);var ge=arguments.length-2;if(ge===1)z.children=E;else if(1<ge){for(var Fe=Array(ge),qe=0;qe<ge;qe++)Fe[qe]=arguments[qe+2];z.children=Fe}return Y(C.type,H,void 0,void 0,Z,z)},Bt.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:c,_context:C},C},Bt.createElement=function(C,X,E){var z,H={},Z=null;if(X!=null)for(z in X.key!==void 0&&(Z=""+X.key),X)ae.call(X,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(H[z]=X[z]);var ge=arguments.length-2;if(ge===1)H.children=E;else if(1<ge){for(var Fe=Array(ge),qe=0;qe<ge;qe++)Fe[qe]=arguments[qe+2];H.children=Fe}if(C&&C.defaultProps)for(z in ge=C.defaultProps,ge)H[z]===void 0&&(H[z]=ge[z]);return Y(C,Z,void 0,void 0,null,H)},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(C){return{$$typeof:f,render:C}},Bt.isValidElement=Q,Bt.lazy=function(C){return{$$typeof:x,_payload:{_status:-1,_result:C},_init:be}},Bt.memo=function(C,X){return{$$typeof:p,type:C,compare:X===void 0?null:X}},Bt.startTransition=function(C){var X=J.T,E={};J.T=E;try{var z=C(),H=J.S;H!==null&&H(E,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(xe,W)}catch(Z){W(Z)}finally{J.T=X}},Bt.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},Bt.use=function(C){return J.H.use(C)},Bt.useActionState=function(C,X,E){return J.H.useActionState(C,X,E)},Bt.useCallback=function(C,X){return J.H.useCallback(C,X)},Bt.useContext=function(C){return J.H.useContext(C)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(C,X){return J.H.useDeferredValue(C,X)},Bt.useEffect=function(C,X,E){var z=J.H;if(typeof E=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return z.useEffect(C,X)},Bt.useId=function(){return J.H.useId()},Bt.useImperativeHandle=function(C,X,E){return J.H.useImperativeHandle(C,X,E)},Bt.useInsertionEffect=function(C,X){return J.H.useInsertionEffect(C,X)},Bt.useLayoutEffect=function(C,X){return J.H.useLayoutEffect(C,X)},Bt.useMemo=function(C,X){return J.H.useMemo(C,X)},Bt.useOptimistic=function(C,X){return J.H.useOptimistic(C,X)},Bt.useReducer=function(C,X,E){return J.H.useReducer(C,X,E)},Bt.useRef=function(C){return J.H.useRef(C)},Bt.useState=function(C){return J.H.useState(C)},Bt.useSyncExternalStore=function(C,X,E){return J.H.useSyncExternalStore(C,X,E)},Bt.useTransition=function(){return J.H.useTransition()},Bt.version="19.1.1",Bt}var Cm;function p0(){return Cm||(Cm=1,mh.exports=J_()),mh.exports}var T=p0();const py=h0(T);var yh={exports:{}},Cl={},vh={exports:{}},bh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function Z_(){return Am||(Am=1,(function(e){function t(re,be){var W=re.length;re.push(be);e:for(;0<W;){var xe=W-1>>>1,C=re[xe];if(0<o(C,be))re[xe]=be,re[W]=C,W=xe;else break e}}function r(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var be=re[0],W=re.pop();if(W!==be){re[0]=W;e:for(var xe=0,C=re.length,X=C>>>1;xe<X;){var E=2*(xe+1)-1,z=re[E],H=E+1,Z=re[H];if(0>o(z,W))H<C&&0>o(Z,z)?(re[xe]=Z,re[H]=W,xe=H):(re[xe]=z,re[E]=W,xe=E);else if(H<C&&0>o(Z,W))re[xe]=Z,re[H]=W,xe=H;else break e}}return be}function o(re,be){var W=re.sortIndex-be.sortIndex;return W!==0?W:re.id-be.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var h=[],p=[],x=1,y=null,v=3,b=!1,w=!1,_=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function P(re){for(var be=r(p);be!==null;){if(be.callback===null)a(p);else if(be.startTime<=re)a(p),be.sortIndex=be.expirationTime,t(h,be);else break;be=r(p)}}function J(re){if(_=!1,P(re),!w)if(r(h)!==null)w=!0,ae||(ae=!0,de());else{var be=r(p);be!==null&&me(J,be.startTime-re)}}var ae=!1,Y=-1,F=5,Q=-1;function oe(){return S?!0:!(e.unstable_now()-Q<F)}function q(){if(S=!1,ae){var re=e.unstable_now();Q=re;var be=!0;try{e:{w=!1,_&&(_=!1,R(Y),Y=-1),b=!0;var W=v;try{t:{for(P(re),y=r(h);y!==null&&!(y.expirationTime>re&&oe());){var xe=y.callback;if(typeof xe=="function"){y.callback=null,v=y.priorityLevel;var C=xe(y.expirationTime<=re);if(re=e.unstable_now(),typeof C=="function"){y.callback=C,P(re),be=!0;break t}y===r(h)&&a(h),P(re)}else a(h);y=r(h)}if(y!==null)be=!0;else{var X=r(p);X!==null&&me(J,X.startTime-re),be=!1}}break e}finally{y=null,v=W,b=!1}be=void 0}}finally{be?de():ae=!1}}}var de;if(typeof O=="function")de=function(){O(q)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ne=te.port2;te.port1.onmessage=q,de=function(){ne.postMessage(null)}}else de=function(){N(q,0)};function me(re,be){Y=N(function(){re(e.unstable_now())},be)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(re){switch(v){case 1:case 2:case 3:var be=3;break;default:be=v}var W=v;v=be;try{return re()}finally{v=W}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(re,be){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var W=v;v=re;try{return be()}finally{v=W}},e.unstable_scheduleCallback=function(re,be,W){var xe=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?xe+W:xe):W=xe,re){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=W+C,re={id:x++,callback:be,priorityLevel:re,startTime:W,expirationTime:C,sortIndex:-1},W>xe?(re.sortIndex=W,t(p,re),r(h)===null&&re===r(p)&&(_?(R(Y),Y=-1):_=!0,me(J,W-xe))):(re.sortIndex=C,t(h,re),w||b||(w=!0,ae||(ae=!0,de()))),re},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(re){var be=v;return function(){var W=v;v=be;try{return re.apply(this,arguments)}finally{v=W}}}})(bh)),bh}var Rm;function eS(){return Rm||(Rm=1,vh.exports=Z_()),vh.exports}var _h={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function tS(){if(Nm)return yn;Nm=1;var e=p0();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(h,p,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:h,containerInfo:p,implementation:x}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,yn.createPortal=function(h,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(h,p,null,x)},yn.flushSync=function(h){var p=d.T,x=a.p;try{if(d.T=null,a.p=2,h)return h()}finally{d.T=p,a.p=x,a.d.f()}},yn.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(h,p))},yn.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},yn.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var x=p.as,y=f(x,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?a.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:b}):x==="script"&&a.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},yn.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=f(p.as,p.crossOrigin);a.d.M(h,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(h)},yn.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,y=f(x,p.crossOrigin);a.d.L(h,x,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},yn.preloadModule=function(h,p){if(typeof h=="string")if(p){var x=f(p.as,p.crossOrigin);a.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(h)},yn.requestFormReset=function(h){a.d.r(h)},yn.unstable_batchedUpdates=function(h,p){return h(p)},yn.useFormState=function(h,p,x){return d.H.useFormState(h,p,x)},yn.useFormStatus=function(){return d.H.useHostTransitionStatus()},yn.version="19.1.1",yn}var Dm;function rS(){if(Dm)return _h.exports;Dm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_h.exports=tS(),_h.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function nS(){if(Om)return Cl;Om=1;var e=eS(),t=p0(),r=rS();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(c(n)!==n)throw Error(a(188))}function h(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(a(188));return i!==n?null:n}for(var l=n,u=i;;){var g=l.return;if(g===null)break;var m=g.alternate;if(m===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===l)return f(g),n;if(m===u)return f(g),i;m=m.sibling}throw Error(a(188))}if(l.return!==u.return)l=g,u=m;else{for(var j=!1,M=g.child;M;){if(M===l){j=!0,l=g,u=m;break}if(M===u){j=!0,u=g,l=m;break}M=M.sibling}if(!j){for(M=m.child;M;){if(M===l){j=!0,l=m,u=g;break}if(M===u){j=!0,u=m,l=g;break}M=M.sibling}if(!j)throw Error(a(189))}}if(l.alternate!==u)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var x=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),O=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function de(n){return n===null||typeof n!="object"?null:(n=q&&n[q]||n["@@iterator"],typeof n=="function"?n:null)}var te=Symbol.for("react.client.reference");function ne(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===te?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case S:return"Profiler";case _:return"StrictMode";case J:return"Suspense";case ae:return"SuspenseList";case Q:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case O:return(n.displayName||"Context")+".Provider";case R:return(n._context.displayName||"Context")+".Consumer";case P:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Y:return i=n.displayName||null,i!==null?i:ne(n.type)||"Memo";case F:i=n._payload,n=n._init;try{return ne(n(i))}catch{}}return null}var me=Array.isArray,re=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},xe=[],C=-1;function X(n){return{current:n}}function E(n){0>C||(n.current=xe[C],xe[C]=null,C--)}function z(n,i){C++,xe[C]=n.current,n.current=i}var H=X(null),Z=X(null),ge=X(null),Fe=X(null);function qe(n,i){switch(z(ge,i),z(Z,n),z(H,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Zx(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Zx(i),n=em(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}E(H),z(H,n)}function Re(){E(H),E(Z),E(ge)}function Oe(n){n.memoizedState!==null&&z(Fe,n);var i=H.current,l=em(i,n.type);i!==l&&(z(Z,n),z(H,l))}function et(n){Z.current===n&&(E(H),E(Z)),Fe.current===n&&(E(Fe),Sl._currentValue=W)}var ve=Object.prototype.hasOwnProperty,Ge=e.unstable_scheduleCallback,G=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,rt=e.unstable_requestPaint,Be=e.unstable_now,gt=e.unstable_getCurrentPriorityLevel,at=e.unstable_ImmediatePriority,vt=e.unstable_UserBlockingPriority,bt=e.unstable_NormalPriority,Ie=e.unstable_LowPriority,nt=e.unstable_IdlePriority,mt=e.log,Ut=e.unstable_setDisableYieldValue,or=null,Lt=null;function le(n){if(typeof mt=="function"&&Ut(n),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(or,n)}catch{}}var He=Math.clz32?Math.clz32:lr,ht=Math.log,Ot=Math.LN2;function lr(n){return n>>>=0,n===0?32:31-(ht(n)/Ot|0)|0}var kr=256,Sr=4194304;function rr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rr(n,i,l){var u=n.pendingLanes;if(u===0)return 0;var g=0,m=n.suspendedLanes,j=n.pingedLanes;n=n.warmLanes;var M=u&134217727;return M!==0?(u=M&~m,u!==0?g=rr(u):(j&=M,j!==0?g=rr(j):l||(l=M&~n,l!==0&&(g=rr(l))))):(M=u&~m,M!==0?g=rr(M):j!==0?g=rr(j):l||(l=u&~n,l!==0&&(g=rr(l)))),g===0?0:i!==0&&i!==g&&(i&m)===0&&(m=g&-g,l=i&-i,m>=l||m===32&&(l&4194048)!==0)?i:g}function Ht(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ir(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function se(){var n=kr;return kr<<=1,(kr&4194048)===0&&(kr=256),n}function ke(){var n=Sr;return Sr<<=1,(Sr&62914560)===0&&(Sr=4194304),n}function xt(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function Nt(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function nr(n,i,l,u,g,m){var j=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var M=n.entanglements,ee=n.expirationTimes,Se=n.hiddenUpdates;for(l=j&~l;0<l;){var Le=31-He(l),ze=1<<Le;M[Le]=0,ee[Le]=-1;var je=Se[Le];if(je!==null)for(Se[Le]=null,Le=0;Le<je.length;Le++){var Ee=je[Le];Ee!==null&&(Ee.lane&=-536870913)}l&=~ze}u!==0&&st(n,u,0),m!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=m&~(j&~i))}function st(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-He(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|l&4194090}function At(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var u=31-He(l),g=1<<u;g&i|n[u]&i&&(n[u]|=i),l&=~g}}function Dt(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function _n(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function jr(){var n=be.p;return n!==0?n:(n=window.event,n===void 0?32:vm(n.type))}function Sn(n,i){var l=be.p;try{return be.p=n,i()}finally{be.p=l}}var Yt=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Yt,gr="__reactProps$"+Yt,Un="__reactContainer$"+Yt,ha="__reactEvents$"+Yt,Wn="__reactListeners$"+Yt,D="__reactHandles$"+Yt,U="__reactResources$"+Yt,B="__reactMarker$"+Yt;function L(n){delete n[Rt],delete n[gr],delete n[ha],delete n[Wn],delete n[D]}function V(n){var i=n[Rt];if(i)return i;for(var l=n.parentNode;l;){if(i=l[Un]||l[Rt]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=am(n);n!==null;){if(l=n[Rt])return l;n=am(n)}return i}n=l,l=n.parentNode}return null}function K(n){if(n=n[Rt]||n[Un]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function _e(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function De(n){var i=n[U];return i||(i=n[U]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function fe(n){n[B]=!0}var we=new Set,Te={};function Ue(n,i){Ye(n,i),Ye(n+"Capture",i)}function Ye(n,i){for(Te[n]=i,n=0;n<i.length;n++)we.add(i[n])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},tt={};function St(n){return ve.call(tt,n)?!0:ve.call($e,n)?!1:it.test(n)?tt[n]=!0:($e[n]=!0,!1)}function Kt(n,i,l){if(St(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function Qt(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function Jt(n,i,l,u){if(u===null)n.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+u)}}var wn,k;function ce(n){if(wn===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);wn=i&&i[1]||"",k=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wn+n+k}var Ae=!1;function ct(n,i){if(!n||Ae)return"";Ae=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(Ee){var je=Ee}Reflect.construct(n,[],ze)}else{try{ze.call()}catch(Ee){je=Ee}n.call(ze.prototype)}}else{try{throw Error()}catch(Ee){je=Ee}(ze=n())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(Ee){if(Ee&&je&&typeof Ee.stack=="string")return[Ee.stack,je.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),j=m[0],M=m[1];if(j&&M){var ee=j.split(`
`),Se=M.split(`
`);for(g=u=0;u<ee.length&&!ee[u].includes("DetermineComponentFrameRoot");)u++;for(;g<Se.length&&!Se[g].includes("DetermineComponentFrameRoot");)g++;if(u===ee.length||g===Se.length)for(u=ee.length-1,g=Se.length-1;1<=u&&0<=g&&ee[u]!==Se[g];)g--;for(;1<=u&&0<=g;u--,g--)if(ee[u]!==Se[g]){if(u!==1||g!==1)do if(u--,g--,0>g||ee[u]!==Se[g]){var Le=`
`+ee[u].replace(" at new "," at ");return n.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",n.displayName)),Le}while(1<=u&&0<=g);break}}}finally{Ae=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?ce(l):""}function _t(n){switch(n.tag){case 26:case 27:case 5:return ce(n.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 15:return ct(n.type,!1);case 11:return ct(n.type.render,!1);case 1:return ct(n.type,!0);case 31:return ce("Activity");default:return""}}function wt(n){try{var i="";do i+=_t(n),n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ot(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function jt(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Et(n){var i=jt(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,m=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(j){u=""+j,m.call(this,j)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(j){u=""+j},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Pt(n){n._valueTracker||(n._valueTracker=Et(n))}function Fr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return n&&(u=jt(n)?n.checked?"true":"false":n.value),n=u,n!==l?(i.setValue(n),!0):!1}function br(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Tn=/[\n"\\]/g;function A(n){return n.replace(Tn,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function he(n,i,l,u,g,m,j,M){n.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.type=j:n.removeAttribute("type"),i!=null?j==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+ot(i)):n.value!==""+ot(i)&&(n.value=""+ot(i)):j!=="submit"&&j!=="reset"||n.removeAttribute("value"),i!=null?Qe(n,j,ot(i)):l!=null?Qe(n,j,ot(l)):u!=null&&n.removeAttribute("value"),g==null&&m!=null&&(n.defaultChecked=!!m),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.name=""+ot(M):n.removeAttribute("name")}function Ke(n,i,l,u,g,m,j,M){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;l=l!=null?""+ot(l):"",i=i!=null?""+ot(i):l,M||i===n.value||(n.value=i),n.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=M?n.checked:!!u,n.defaultChecked=!!u,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(n.name=j)}function Qe(n,i,l){i==="number"&&br(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Ve(n,i,l,u){if(n=n.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=i.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&u&&(n[l].defaultSelected=!0)}else{for(l=""+ot(l),i=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function Xe(n,i,l){if(i!=null&&(i=""+ot(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+ot(l):""}function lt(n,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(a(92));if(me(u)){if(1<u.length)throw Error(a(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=ot(i),n.defaultValue=l,u=n.textContent,u===l&&u!==""&&u!==null&&(n.value=u)}function ut(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Zt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mt(n,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,l):typeof l!="number"||l===0||Zt.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function Wt(n,i,l){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&l[g]!==u&&Mt(n,g,u)}else for(var m in i)i.hasOwnProperty(m)&&Mt(n,m,i[m])}function Lr(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var On=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uc(n){return Yb.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var gu=null;function xu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ti=null,ji=null;function tp(n){var i=K(n);if(i&&(n=i.stateNode)){var l=n[gr]||null;e:switch(n=i.stateNode,i.type){case"input":if(he(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+A(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==n&&u.form===n.form){var g=u[gr]||null;if(!g)throw Error(a(90));he(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===n.form&&Fr(u)}break e;case"textarea":Xe(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Ve(n,!!l.multiple,i,!1)}}}var mu=!1;function rp(n,i,l){if(mu)return n(i,l);mu=!0;try{var u=n(i);return u}finally{if(mu=!1,(Ti!==null||ji!==null)&&(Xc(),Ti&&(i=Ti,n=ji,ji=Ti=null,tp(i),n)))for(i=0;i<n.length;i++)tp(n[i])}}function Mo(n,i){var l=n.stateNode;if(l===null)return null;var u=l[gr]||null;if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,i,typeof l));return l}var Fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yu=!1;if(Fa)try{var Bo={};Object.defineProperty(Bo,"passive",{get:function(){yu=!0}}),window.addEventListener("test",Bo,Bo),window.removeEventListener("test",Bo,Bo)}catch{yu=!1}var ls=null,vu=null,fc=null;function np(){if(fc)return fc;var n,i=vu,l=i.length,u,g="value"in ls?ls.value:ls.textContent,m=g.length;for(n=0;n<l&&i[n]===g[n];n++);var j=l-n;for(u=1;u<=j&&i[l-u]===g[m-u];u++);return fc=g.slice(n,1<u?1-u:void 0)}function hc(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function pc(){return!0}function ap(){return!1}function In(n){function i(l,u,g,m,j){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=m,this.target=j,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(l=n[M],this[M]=l?l(m):m[M]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?pc:ap,this.isPropagationStopped=ap,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=pc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=pc)},persist:function(){},isPersistent:pc}),i}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gc=In(Hs),Fo=x({},Hs,{view:0,detail:0}),Kb=In(Fo),bu,_u,Lo,xc=x({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Lo&&(Lo&&n.type==="mousemove"?(bu=n.screenX-Lo.screenX,_u=n.screenY-Lo.screenY):_u=bu=0,Lo=n),bu)},movementY:function(n){return"movementY"in n?n.movementY:_u}}),sp=In(xc),Xb=x({},xc,{dataTransfer:0}),Qb=In(Xb),Jb=x({},Fo,{relatedTarget:0}),Su=In(Jb),Zb=x({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),e2=In(Zb),t2=x({},Hs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),r2=In(t2),n2=x({},Hs,{data:0}),ip=In(n2),a2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o2(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=i2[n])?!!i[n]:!1}function wu(){return o2}var l2=x({},Fo,{key:function(n){if(n.key){var i=a2[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=hc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?s2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wu,charCode:function(n){return n.type==="keypress"?hc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?hc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),c2=In(l2),d2=x({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),op=In(d2),u2=x({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wu}),f2=In(u2),h2=x({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),p2=In(h2),g2=x({},xc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),x2=In(g2),m2=x({},Hs,{newState:0,oldState:0}),y2=In(m2),v2=[9,13,27,32],Tu=Fa&&"CompositionEvent"in window,Po=null;Fa&&"documentMode"in document&&(Po=document.documentMode);var b2=Fa&&"TextEvent"in window&&!Po,lp=Fa&&(!Tu||Po&&8<Po&&11>=Po),cp=" ",dp=!1;function up(n,i){switch(n){case"keyup":return v2.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ei=!1;function _2(n,i){switch(n){case"compositionend":return fp(i);case"keypress":return i.which!==32?null:(dp=!0,cp);case"textInput":return n=i.data,n===cp&&dp?null:n;default:return null}}function S2(n,i){if(Ei)return n==="compositionend"||!Tu&&up(n,i)?(n=np(),fc=vu=ls=null,Ei=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return lp&&i.locale!=="ko"?null:i.data;default:return null}}var w2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!w2[n.type]:i==="textarea"}function pp(n,i,l,u){Ti?ji?ji.push(u):ji=[u]:Ti=u,i=rd(i,"onChange"),0<i.length&&(l=new gc("onChange","change",null,l,u),n.push({event:l,listeners:i}))}var zo=null,Uo=null;function T2(n){Yx(n,0)}function mc(n){var i=_e(n);if(Fr(i))return n}function gp(n,i){if(n==="change")return i}var xp=!1;if(Fa){var ju;if(Fa){var Eu="oninput"in document;if(!Eu){var mp=document.createElement("div");mp.setAttribute("oninput","return;"),Eu=typeof mp.oninput=="function"}ju=Eu}else ju=!1;xp=ju&&(!document.documentMode||9<document.documentMode)}function yp(){zo&&(zo.detachEvent("onpropertychange",vp),Uo=zo=null)}function vp(n){if(n.propertyName==="value"&&mc(Uo)){var i=[];pp(i,Uo,n,xu(n)),rp(T2,i)}}function j2(n,i,l){n==="focusin"?(yp(),zo=i,Uo=l,zo.attachEvent("onpropertychange",vp)):n==="focusout"&&yp()}function E2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return mc(Uo)}function k2(n,i){if(n==="click")return mc(i)}function C2(n,i){if(n==="input"||n==="change")return mc(i)}function A2(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var qn=typeof Object.is=="function"?Object.is:A2;function Wo(n,i){if(qn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!ve.call(i,g)||!qn(n[g],i[g]))return!1}return!0}function bp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _p(n,i){var l=bp(n);n=0;for(var u;l;){if(l.nodeType===3){if(u=n+l.textContent.length,n<=i&&u>=i)return{node:l,offset:i-n};n=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=bp(l)}}function Sp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Sp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function wp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=br(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=br(n.document)}return i}function ku(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var R2=Fa&&"documentMode"in document&&11>=document.documentMode,ki=null,Cu=null,qo=null,Au=!1;function Tp(n,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Au||ki==null||ki!==br(u)||(u=ki,"selectionStart"in u&&ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),qo&&Wo(qo,u)||(qo=u,u=rd(Cu,"onSelect"),0<u.length&&(i=new gc("onSelect","select",null,i,l),n.push({event:i,listeners:u}),i.target=ki)))}function $s(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var Ci={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionrun:$s("Transition","TransitionRun"),transitionstart:$s("Transition","TransitionStart"),transitioncancel:$s("Transition","TransitionCancel"),transitionend:$s("Transition","TransitionEnd")},Ru={},jp={};Fa&&(jp=document.createElement("div").style,"AnimationEvent"in window||(delete Ci.animationend.animation,delete Ci.animationiteration.animation,delete Ci.animationstart.animation),"TransitionEvent"in window||delete Ci.transitionend.transition);function Gs(n){if(Ru[n])return Ru[n];if(!Ci[n])return n;var i=Ci[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in jp)return Ru[n]=i[l];return n}var Ep=Gs("animationend"),kp=Gs("animationiteration"),Cp=Gs("animationstart"),N2=Gs("transitionrun"),D2=Gs("transitionstart"),O2=Gs("transitioncancel"),Ap=Gs("transitionend"),Rp=new Map,Nu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nu.push("scrollEnd");function pa(n,i){Rp.set(n,i),Ue(i,[n])}var Np=new WeakMap;function ta(n,i){if(typeof n=="object"&&n!==null){var l=Np.get(n);return l!==void 0?l:(i={value:n,source:i,stack:wt(i)},Np.set(n,i),i)}return{value:n,source:i,stack:wt(i)}}var ra=[],Ai=0,Du=0;function yc(){for(var n=Ai,i=Du=Ai=0;i<n;){var l=ra[i];ra[i++]=null;var u=ra[i];ra[i++]=null;var g=ra[i];ra[i++]=null;var m=ra[i];if(ra[i++]=null,u!==null&&g!==null){var j=u.pending;j===null?g.next=g:(g.next=j.next,j.next=g),u.pending=g}m!==0&&Dp(l,g,m)}}function vc(n,i,l,u){ra[Ai++]=n,ra[Ai++]=i,ra[Ai++]=l,ra[Ai++]=u,Du|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ou(n,i,l,u){return vc(n,i,l,u),bc(n)}function Ri(n,i){return vc(n,null,null,i),bc(n)}function Dp(n,i,l){n.lanes|=l;var u=n.alternate;u!==null&&(u.lanes|=l);for(var g=!1,m=n.return;m!==null;)m.childLanes|=l,u=m.alternate,u!==null&&(u.childLanes|=l),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(g=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,g&&i!==null&&(g=31-He(l),n=m.hiddenUpdates,u=n[g],u===null?n[g]=[i]:u.push(i),i.lane=l|536870912),m):null}function bc(n){if(50<pl)throw pl=0,zf=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ni={};function I2(n,i,l,u){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(n,i,l,u){return new I2(n,i,l,u)}function Iu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function La(n,i){var l=n.alternate;return l===null?(l=Hn(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Op(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function _c(n,i,l,u,g,m){var j=0;if(u=n,typeof n=="function")Iu(n)&&(j=1);else if(typeof n=="string")j=B_(n,l,H.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case Q:return n=Hn(31,l,i,g),n.elementType=Q,n.lanes=m,n;case w:return Vs(l.children,g,m,i);case _:j=8,g|=24;break;case S:return n=Hn(12,l,i,g|2),n.elementType=S,n.lanes=m,n;case J:return n=Hn(13,l,i,g),n.elementType=J,n.lanes=m,n;case ae:return n=Hn(19,l,i,g),n.elementType=ae,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:case O:j=10;break e;case R:j=9;break e;case P:j=11;break e;case Y:j=14;break e;case F:j=16,u=null;break e}j=29,l=Error(a(130,n===null?"null":typeof n,"")),u=null}return i=Hn(j,l,i,g),i.elementType=n,i.type=u,i.lanes=m,i}function Vs(n,i,l,u){return n=Hn(7,n,u,i),n.lanes=l,n}function Mu(n,i,l){return n=Hn(6,n,null,i),n.lanes=l,n}function Bu(n,i,l){return i=Hn(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Di=[],Oi=0,Sc=null,wc=0,na=[],aa=0,Ys=null,Pa=1,za="";function Ks(n,i){Di[Oi++]=wc,Di[Oi++]=Sc,Sc=n,wc=i}function Ip(n,i,l){na[aa++]=Pa,na[aa++]=za,na[aa++]=Ys,Ys=n;var u=Pa;n=za;var g=32-He(u)-1;u&=~(1<<g),l+=1;var m=32-He(i)+g;if(30<m){var j=g-g%5;m=(u&(1<<j)-1).toString(32),u>>=j,g-=j,Pa=1<<32-He(i)+g|l<<g|u,za=m+n}else Pa=1<<m|l<<g|u,za=n}function Fu(n){n.return!==null&&(Ks(n,1),Ip(n,1,0))}function Lu(n){for(;n===Sc;)Sc=Di[--Oi],Di[Oi]=null,wc=Di[--Oi],Di[Oi]=null;for(;n===Ys;)Ys=na[--aa],na[aa]=null,za=na[--aa],na[aa]=null,Pa=na[--aa],na[aa]=null}var jn=null,Dr=null,ar=!1,Xs=null,ka=!1,Pu=Error(a(519));function Qs(n){var i=Error(a(418,""));throw Go(ta(i,n)),Pu}function Mp(n){var i=n.stateNode,l=n.type,u=n.memoizedProps;switch(i[Rt]=n,i[gr]=u,l){case"dialog":Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":case"embed":Gt("load",i);break;case"video":case"audio":for(l=0;l<xl.length;l++)Gt(xl[l],i);break;case"source":Gt("error",i);break;case"img":case"image":case"link":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"input":Gt("invalid",i),Ke(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Pt(i);break;case"select":Gt("invalid",i);break;case"textarea":Gt("invalid",i),lt(i,u.value,u.defaultValue,u.children),Pt(i)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||Jx(i.textContent,l)?(u.popover!=null&&(Gt("beforetoggle",i),Gt("toggle",i)),u.onScroll!=null&&Gt("scroll",i),u.onScrollEnd!=null&&Gt("scrollend",i),u.onClick!=null&&(i.onclick=nd),i=!0):i=!1,i||Qs(n)}function Bp(n){for(jn=n.return;jn;)switch(jn.tag){case 5:case 13:ka=!1;return;case 27:case 3:ka=!0;return;default:jn=jn.return}}function Ho(n){if(n!==jn)return!1;if(!ar)return Bp(n),ar=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||rh(n.type,n.memoizedProps)),l=!l),l&&Dr&&Qs(n),Bp(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(l=n.data,l==="/$"){if(i===0){Dr=xa(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++;n=n.nextSibling}Dr=null}}else i===27?(i=Dr,Ts(n.type)?(n=ih,ih=null,Dr=n):Dr=i):Dr=jn?xa(n.stateNode.nextSibling):null;return!0}function $o(){Dr=jn=null,ar=!1}function Fp(){var n=Xs;return n!==null&&(Fn===null?Fn=n:Fn.push.apply(Fn,n),Xs=null),n}function Go(n){Xs===null?Xs=[n]:Xs.push(n)}var zu=X(null),Js=null,Ua=null;function cs(n,i,l){z(zu,i._currentValue),i._currentValue=l}function Wa(n){n._currentValue=zu.current,E(zu)}function Uu(n,i,l){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===l)break;n=n.return}}function Wu(n,i,l,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var m=g.dependencies;if(m!==null){var j=g.child;m=m.firstContext;e:for(;m!==null;){var M=m;m=g;for(var ee=0;ee<i.length;ee++)if(M.context===i[ee]){m.lanes|=l,M=m.alternate,M!==null&&(M.lanes|=l),Uu(m.return,l,n),u||(j=null);break e}m=M.next}}else if(g.tag===18){if(j=g.return,j===null)throw Error(a(341));j.lanes|=l,m=j.alternate,m!==null&&(m.lanes|=l),Uu(j,l,n),j=null}else j=g.child;if(j!==null)j.return=g;else for(j=g;j!==null;){if(j===n){j=null;break}if(g=j.sibling,g!==null){g.return=j.return,j=g;break}j=j.return}g=j}}function Vo(n,i,l,u){n=null;for(var g=i,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var j=g.alternate;if(j===null)throw Error(a(387));if(j=j.memoizedProps,j!==null){var M=g.type;qn(g.pendingProps.value,j.value)||(n!==null?n.push(M):n=[M])}}else if(g===Fe.current){if(j=g.alternate,j===null)throw Error(a(387));j.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Sl):n=[Sl])}g=g.return}n!==null&&Wu(i,n,l,u),i.flags|=262144}function Tc(n){for(n=n.firstContext;n!==null;){if(!qn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Zs(n){Js=n,Ua=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function mn(n){return Lp(Js,n)}function jc(n,i){return Js===null&&Zs(n),Lp(n,i)}function Lp(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Ua===null){if(n===null)throw Error(a(308));Ua=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Ua=Ua.next=i;return l}var M2=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},B2=e.unstable_scheduleCallback,F2=e.unstable_NormalPriority,Gr={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qu(){return{controller:new M2,data:new Map,refCount:0}}function Yo(n){n.refCount--,n.refCount===0&&B2(F2,function(){n.controller.abort()})}var Ko=null,Hu=0,Ii=0,Mi=null;function L2(n,i){if(Ko===null){var l=Ko=[];Hu=0,Ii=Vf(),Mi={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Hu++,i.then(Pp,Pp),i}function Pp(){if(--Hu===0&&Ko!==null){Mi!==null&&(Mi.status="fulfilled");var n=Ko;Ko=null,Ii=0,Mi=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function P2(n,i){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<l.length;g++)(0,l[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var zp=re.S;re.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&L2(n,i),zp!==null&&zp(n,i)};var ei=X(null);function $u(){var n=ei.current;return n!==null?n:wr.pooledCache}function Ec(n,i){i===null?z(ei,ei.current):z(ei,i.pool)}function Up(){var n=$u();return n===null?null:{parent:Gr._currentValue,pool:n}}var Xo=Error(a(460)),Wp=Error(a(474)),kc=Error(a(542)),Gu={then:function(){}};function qp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Cc(){}function Hp(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(Cc,Cc),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Gp(n),n;default:if(typeof i.status=="string")i.then(Cc,Cc);else{if(n=wr,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Gp(n),n}throw Qo=i,Xo}}var Qo=null;function $p(){if(Qo===null)throw Error(a(459));var n=Qo;return Qo=null,n}function Gp(n){if(n===Xo||n===kc)throw Error(a(483))}var ds=!1;function Vu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yu(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function us(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function fs(n,i,l){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(cr&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=bc(n),Dp(n,null,l),i}return vc(n,u,i,l),bc(n)}function Jo(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,l|=u,i.lanes=l,At(n,l)}}function Ku(n,i){var l=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var j={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?g=m=j:m=m.next=j,l=l.next}while(l!==null);m===null?g=m=i:m=m.next=i}else g=m=i;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var Xu=!1;function Zo(){if(Xu){var n=Mi;if(n!==null)throw n}}function el(n,i,l,u){Xu=!1;var g=n.updateQueue;ds=!1;var m=g.firstBaseUpdate,j=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var ee=M,Se=ee.next;ee.next=null,j===null?m=Se:j.next=Se,j=ee;var Le=n.alternate;Le!==null&&(Le=Le.updateQueue,M=Le.lastBaseUpdate,M!==j&&(M===null?Le.firstBaseUpdate=Se:M.next=Se,Le.lastBaseUpdate=ee))}if(m!==null){var ze=g.baseState;j=0,Le=Se=ee=null,M=m;do{var je=M.lane&-536870913,Ee=je!==M.lane;if(Ee?(Xt&je)===je:(u&je)===je){je!==0&&je===Ii&&(Xu=!0),Le!==null&&(Le=Le.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ct=n,Tt=M;je=i;var yr=l;switch(Tt.tag){case 1:if(Ct=Tt.payload,typeof Ct=="function"){ze=Ct.call(yr,ze,je);break e}ze=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Tt.payload,je=typeof Ct=="function"?Ct.call(yr,ze,je):Ct,je==null)break e;ze=x({},ze,je);break e;case 2:ds=!0}}je=M.callback,je!==null&&(n.flags|=64,Ee&&(n.flags|=8192),Ee=g.callbacks,Ee===null?g.callbacks=[je]:Ee.push(je))}else Ee={lane:je,tag:M.tag,payload:M.payload,callback:M.callback,next:null},Le===null?(Se=Le=Ee,ee=ze):Le=Le.next=Ee,j|=je;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;Ee=M,M=Ee.next,Ee.next=null,g.lastBaseUpdate=Ee,g.shared.pending=null}}while(!0);Le===null&&(ee=ze),g.baseState=ee,g.firstBaseUpdate=Se,g.lastBaseUpdate=Le,m===null&&(g.shared.lanes=0),bs|=j,n.lanes=j,n.memoizedState=ze}}function Vp(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function Yp(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Vp(l[n],i)}var Bi=X(null),Ac=X(0);function Kp(n,i){n=Ka,z(Ac,n),z(Bi,i),Ka=n|i.baseLanes}function Qu(){z(Ac,Ka),z(Bi,Bi.current)}function Ju(){Ka=Ac.current,E(Bi),E(Ac)}var hs=0,zt=null,xr=null,Ur=null,Rc=!1,Fi=!1,ti=!1,Nc=0,tl=0,Li=null,z2=0;function Pr(){throw Error(a(321))}function Zu(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!qn(n[l],i[l]))return!1;return!0}function ef(n,i,l,u,g,m){return hs=m,zt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,re.H=n===null||n.memoizedState===null?Dg:Og,ti=!1,m=l(u,g),ti=!1,Fi&&(m=Qp(i,l,u,g)),Xp(n),m}function Xp(n){re.H=Fc;var i=xr!==null&&xr.next!==null;if(hs=0,Ur=xr=zt=null,Rc=!1,tl=0,Li=null,i)throw Error(a(300));n===null||Zr||(n=n.dependencies,n!==null&&Tc(n)&&(Zr=!0))}function Qp(n,i,l,u){zt=n;var g=0;do{if(Fi&&(Li=null),tl=0,Fi=!1,25<=g)throw Error(a(301));if(g+=1,Ur=xr=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}re.H=V2,m=i(l,u)}while(Fi);return m}function U2(){var n=re.H,i=n.useState()[0];return i=typeof i.then=="function"?rl(i):i,n=n.useState()[0],(xr!==null?xr.memoizedState:null)!==n&&(zt.flags|=1024),i}function tf(){var n=Nc!==0;return Nc=0,n}function rf(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function nf(n){if(Rc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Rc=!1}hs=0,Ur=xr=zt=null,Fi=!1,tl=Nc=0,Li=null}function Mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?zt.memoizedState=Ur=n:Ur=Ur.next=n,Ur}function Wr(){if(xr===null){var n=zt.alternate;n=n!==null?n.memoizedState:null}else n=xr.next;var i=Ur===null?zt.memoizedState:Ur.next;if(i!==null)Ur=i,xr=n;else{if(n===null)throw zt.alternate===null?Error(a(467)):Error(a(310));xr=n,n={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Ur===null?zt.memoizedState=Ur=n:Ur=Ur.next=n}return Ur}function af(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(n){var i=tl;return tl+=1,Li===null&&(Li=[]),n=Hp(Li,n,i),i=zt,(Ur===null?i.memoizedState:Ur.next)===null&&(i=i.alternate,re.H=i===null||i.memoizedState===null?Dg:Og),n}function Dc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return rl(n);if(n.$$typeof===O)return mn(n)}throw Error(a(438,String(n)))}function sf(n){var i=null,l=zt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=af(),zt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),u=0;u<n;u++)l[u]=oe;return i.index++,l}function qa(n,i){return typeof i=="function"?i(n):i}function Oc(n){var i=Wr();return of(i,xr,n)}function of(n,i,l){var u=n.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=l;var g=n.baseQueue,m=u.pending;if(m!==null){if(g!==null){var j=g.next;g.next=m.next,m.next=j}i.baseQueue=g=m,u.pending=null}if(m=n.baseState,g===null)n.memoizedState=m;else{i=g.next;var M=j=null,ee=null,Se=i,Le=!1;do{var ze=Se.lane&-536870913;if(ze!==Se.lane?(Xt&ze)===ze:(hs&ze)===ze){var je=Se.revertLane;if(je===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),ze===Ii&&(Le=!0);else if((hs&je)===je){Se=Se.next,je===Ii&&(Le=!0);continue}else ze={lane:0,revertLane:Se.revertLane,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},ee===null?(M=ee=ze,j=m):ee=ee.next=ze,zt.lanes|=je,bs|=je;ze=Se.action,ti&&l(m,ze),m=Se.hasEagerState?Se.eagerState:l(m,ze)}else je={lane:ze,revertLane:Se.revertLane,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},ee===null?(M=ee=je,j=m):ee=ee.next=je,zt.lanes|=ze,bs|=ze;Se=Se.next}while(Se!==null&&Se!==i);if(ee===null?j=m:ee.next=M,!qn(m,n.memoizedState)&&(Zr=!0,Le&&(l=Mi,l!==null)))throw l;n.memoizedState=m,n.baseState=j,n.baseQueue=ee,u.lastRenderedState=m}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function lf(n){var i=Wr(),l=i.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var u=l.dispatch,g=l.pending,m=i.memoizedState;if(g!==null){l.pending=null;var j=g=g.next;do m=n(m,j.action),j=j.next;while(j!==g);qn(m,i.memoizedState)||(Zr=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),l.lastRenderedState=m}return[m,u]}function Jp(n,i,l){var u=zt,g=Wr(),m=ar;if(m){if(l===void 0)throw Error(a(407));l=l()}else l=i();var j=!qn((xr||g).memoizedState,l);j&&(g.memoizedState=l,Zr=!0),g=g.queue;var M=tg.bind(null,u,g,n);if(nl(2048,8,M,[n]),g.getSnapshot!==i||j||Ur!==null&&Ur.memoizedState.tag&1){if(u.flags|=2048,Pi(9,Ic(),eg.bind(null,u,g,l,i),null),wr===null)throw Error(a(349));m||(hs&124)!==0||Zp(u,i,l)}return l}function Zp(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=zt.updateQueue,i===null?(i=af(),zt.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function eg(n,i,l,u){i.value=l,i.getSnapshot=u,rg(i)&&ng(n)}function tg(n,i,l){return l(function(){rg(i)&&ng(n)})}function rg(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!qn(n,l)}catch{return!0}}function ng(n){var i=Ri(n,2);i!==null&&Kn(i,n,2)}function cf(n){var i=Mn();if(typeof n=="function"){var l=n;if(n=l(),ti){le(!0);try{l()}finally{le(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:n},i}function ag(n,i,l,u){return n.baseState=l,of(n,xr,typeof u=="function"?u:qa)}function W2(n,i,l,u,g){if(Bc(n))throw Error(a(485));if(n=i.action,n!==null){var m={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){m.listeners.push(j)}};re.T!==null?l(!0):m.isTransition=!1,u(m),l=i.pending,l===null?(m.next=i.pending=m,sg(i,m)):(m.next=l.next,i.pending=l.next=m)}}function sg(n,i){var l=i.action,u=i.payload,g=n.state;if(i.isTransition){var m=re.T,j={};re.T=j;try{var M=l(g,u),ee=re.S;ee!==null&&ee(j,M),ig(n,i,M)}catch(Se){df(n,i,Se)}finally{re.T=m}}else try{m=l(g,u),ig(n,i,m)}catch(Se){df(n,i,Se)}}function ig(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){og(n,i,u)},function(u){return df(n,i,u)}):og(n,i,l)}function og(n,i,l){i.status="fulfilled",i.value=l,lg(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,sg(n,l)))}function df(n,i,l){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,lg(i),i=i.next;while(i!==u)}n.action=null}function lg(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function cg(n,i){return i}function dg(n,i){if(ar){var l=wr.formState;if(l!==null){e:{var u=zt;if(ar){if(Dr){t:{for(var g=Dr,m=ka;g.nodeType!==8;){if(!m){g=null;break t}if(g=xa(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Dr=xa(g.nextSibling),u=g.data==="F!";break e}}Qs(u)}u=!1}u&&(i=l[0])}}return l=Mn(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cg,lastRenderedState:i},l.queue=u,l=Ag.bind(null,zt,u),u.dispatch=l,u=cf(!1),m=gf.bind(null,zt,!1,u.queue),u=Mn(),g={state:i,dispatch:null,action:n,pending:null},u.queue=g,l=W2.bind(null,zt,g,m,l),g.dispatch=l,u.memoizedState=n,[i,l,!1]}function ug(n){var i=Wr();return fg(i,xr,n)}function fg(n,i,l){if(i=of(n,i,cg)[0],n=Oc(qa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=rl(i)}catch(j){throw j===Xo?kc:j}else u=i;i=Wr();var g=i.queue,m=g.dispatch;return l!==i.memoizedState&&(zt.flags|=2048,Pi(9,Ic(),q2.bind(null,g,l),null)),[u,m,n]}function q2(n,i){n.action=i}function hg(n){var i=Wr(),l=xr;if(l!==null)return fg(i,l,n);Wr(),i=i.memoizedState,l=Wr();var u=l.queue.dispatch;return l.memoizedState=n,[i,u,!1]}function Pi(n,i,l,u){return n={tag:n,create:l,deps:u,inst:i,next:null},i=zt.updateQueue,i===null&&(i=af(),zt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(u=l.next,l.next=n,n.next=u,i.lastEffect=n),n}function Ic(){return{destroy:void 0,resource:void 0}}function pg(){return Wr().memoizedState}function Mc(n,i,l,u){var g=Mn();u=u===void 0?null:u,zt.flags|=n,g.memoizedState=Pi(1|i,Ic(),l,u)}function nl(n,i,l,u){var g=Wr();u=u===void 0?null:u;var m=g.memoizedState.inst;xr!==null&&u!==null&&Zu(u,xr.memoizedState.deps)?g.memoizedState=Pi(i,m,l,u):(zt.flags|=n,g.memoizedState=Pi(1|i,m,l,u))}function gg(n,i){Mc(8390656,8,n,i)}function xg(n,i){nl(2048,8,n,i)}function mg(n,i){return nl(4,2,n,i)}function yg(n,i){return nl(4,4,n,i)}function vg(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function bg(n,i,l){l=l!=null?l.concat([n]):null,nl(4,4,vg.bind(null,i,n),l)}function uf(){}function _g(n,i){var l=Wr();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&Zu(i,u[1])?u[0]:(l.memoizedState=[n,i],n)}function Sg(n,i){var l=Wr();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&Zu(i,u[1]))return u[0];if(u=n(),ti){le(!0);try{n()}finally{le(!1)}}return l.memoizedState=[u,i],u}function ff(n,i,l){return l===void 0||(hs&1073741824)!==0?n.memoizedState=i:(n.memoizedState=l,n=jx(),zt.lanes|=n,bs|=n,l)}function wg(n,i,l,u){return qn(l,i)?l:Bi.current!==null?(n=ff(n,l,u),qn(n,i)||(Zr=!0),n):(hs&42)===0?(Zr=!0,n.memoizedState=l):(n=jx(),zt.lanes|=n,bs|=n,i)}function Tg(n,i,l,u,g){var m=be.p;be.p=m!==0&&8>m?m:8;var j=re.T,M={};re.T=M,gf(n,!1,i,l);try{var ee=g(),Se=re.S;if(Se!==null&&Se(M,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Le=P2(ee,u);al(n,i,Le,Yn(n))}else al(n,i,u,Yn(n))}catch(ze){al(n,i,{then:function(){},status:"rejected",reason:ze},Yn())}finally{be.p=m,re.T=j}}function H2(){}function hf(n,i,l,u){if(n.tag!==5)throw Error(a(476));var g=jg(n).queue;Tg(n,g,i,W,l===null?H2:function(){return Eg(n),l(u)})}function jg(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:W},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Eg(n){var i=jg(n).next.queue;al(n,i,{},Yn())}function pf(){return mn(Sl)}function kg(){return Wr().memoizedState}function Cg(){return Wr().memoizedState}function $2(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=Yn();n=us(l);var u=fs(i,n,l);u!==null&&(Kn(u,i,l),Jo(u,i,l)),i={cache:qu()},n.payload=i;return}i=i.return}}function G2(n,i,l){var u=Yn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Bc(n)?Rg(i,l):(l=Ou(n,i,l,u),l!==null&&(Kn(l,n,u),Ng(l,i,u)))}function Ag(n,i,l){var u=Yn();al(n,i,l,u)}function al(n,i,l,u){var g={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Bc(n))Rg(i,g);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var j=i.lastRenderedState,M=m(j,l);if(g.hasEagerState=!0,g.eagerState=M,qn(M,j))return vc(n,i,g,0),wr===null&&yc(),!1}catch{}finally{}if(l=Ou(n,i,g,u),l!==null)return Kn(l,n,u),Ng(l,i,u),!0}return!1}function gf(n,i,l,u){if(u={lane:2,revertLane:Vf(),action:u,hasEagerState:!1,eagerState:null,next:null},Bc(n)){if(i)throw Error(a(479))}else i=Ou(n,l,u,2),i!==null&&Kn(i,n,2)}function Bc(n){var i=n.alternate;return n===zt||i!==null&&i===zt}function Rg(n,i){Fi=Rc=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Ng(n,i,l){if((l&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,l|=u,i.lanes=l,At(n,l)}}var Fc={readContext:mn,use:Dc,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useLayoutEffect:Pr,useInsertionEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useSyncExternalStore:Pr,useId:Pr,useHostTransitionStatus:Pr,useFormState:Pr,useActionState:Pr,useOptimistic:Pr,useMemoCache:Pr,useCacheRefresh:Pr},Dg={readContext:mn,use:Dc,useCallback:function(n,i){return Mn().memoizedState=[n,i===void 0?null:i],n},useContext:mn,useEffect:gg,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,Mc(4194308,4,vg.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Mc(4194308,4,n,i)},useInsertionEffect:function(n,i){Mc(4,2,n,i)},useMemo:function(n,i){var l=Mn();i=i===void 0?null:i;var u=n();if(ti){le(!0);try{n()}finally{le(!1)}}return l.memoizedState=[u,i],u},useReducer:function(n,i,l){var u=Mn();if(l!==void 0){var g=l(i);if(ti){le(!0);try{l(i)}finally{le(!1)}}}else g=i;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=G2.bind(null,zt,n),[u.memoizedState,n]},useRef:function(n){var i=Mn();return n={current:n},i.memoizedState=n},useState:function(n){n=cf(n);var i=n.queue,l=Ag.bind(null,zt,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:uf,useDeferredValue:function(n,i){var l=Mn();return ff(l,n,i)},useTransition:function(){var n=cf(!1);return n=Tg.bind(null,zt,n.queue,!0,!1),Mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var u=zt,g=Mn();if(ar){if(l===void 0)throw Error(a(407));l=l()}else{if(l=i(),wr===null)throw Error(a(349));(Xt&124)!==0||Zp(u,i,l)}g.memoizedState=l;var m={value:l,getSnapshot:i};return g.queue=m,gg(tg.bind(null,u,m,n),[n]),u.flags|=2048,Pi(9,Ic(),eg.bind(null,u,m,l,i),null),l},useId:function(){var n=Mn(),i=wr.identifierPrefix;if(ar){var l=za,u=Pa;l=(u&~(1<<32-He(u)-1)).toString(32)+l,i=""+i+"R"+l,l=Nc++,0<l&&(i+="H"+l.toString(32)),i+=""}else l=z2++,i=""+i+"r"+l.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:pf,useFormState:dg,useActionState:dg,useOptimistic:function(n){var i=Mn();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=gf.bind(null,zt,!0,l),l.dispatch=i,[n,i]},useMemoCache:sf,useCacheRefresh:function(){return Mn().memoizedState=$2.bind(null,zt)}},Og={readContext:mn,use:Dc,useCallback:_g,useContext:mn,useEffect:xg,useImperativeHandle:bg,useInsertionEffect:mg,useLayoutEffect:yg,useMemo:Sg,useReducer:Oc,useRef:pg,useState:function(){return Oc(qa)},useDebugValue:uf,useDeferredValue:function(n,i){var l=Wr();return wg(l,xr.memoizedState,n,i)},useTransition:function(){var n=Oc(qa)[0],i=Wr().memoizedState;return[typeof n=="boolean"?n:rl(n),i]},useSyncExternalStore:Jp,useId:kg,useHostTransitionStatus:pf,useFormState:ug,useActionState:ug,useOptimistic:function(n,i){var l=Wr();return ag(l,xr,n,i)},useMemoCache:sf,useCacheRefresh:Cg},V2={readContext:mn,use:Dc,useCallback:_g,useContext:mn,useEffect:xg,useImperativeHandle:bg,useInsertionEffect:mg,useLayoutEffect:yg,useMemo:Sg,useReducer:lf,useRef:pg,useState:function(){return lf(qa)},useDebugValue:uf,useDeferredValue:function(n,i){var l=Wr();return xr===null?ff(l,n,i):wg(l,xr.memoizedState,n,i)},useTransition:function(){var n=lf(qa)[0],i=Wr().memoizedState;return[typeof n=="boolean"?n:rl(n),i]},useSyncExternalStore:Jp,useId:kg,useHostTransitionStatus:pf,useFormState:hg,useActionState:hg,useOptimistic:function(n,i){var l=Wr();return xr!==null?ag(l,xr,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:sf,useCacheRefresh:Cg},zi=null,sl=0;function Lc(n){var i=sl;return sl+=1,zi===null&&(zi=[]),Hp(zi,n,i)}function il(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Pc(n,i){throw i.$$typeof===y?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Ig(n){var i=n._init;return i(n._payload)}function Mg(n){function i(ue,ie){if(n){var ye=ue.deletions;ye===null?(ue.deletions=[ie],ue.flags|=16):ye.push(ie)}}function l(ue,ie){if(!n)return null;for(;ie!==null;)i(ue,ie),ie=ie.sibling;return null}function u(ue){for(var ie=new Map;ue!==null;)ue.key!==null?ie.set(ue.key,ue):ie.set(ue.index,ue),ue=ue.sibling;return ie}function g(ue,ie){return ue=La(ue,ie),ue.index=0,ue.sibling=null,ue}function m(ue,ie,ye){return ue.index=ye,n?(ye=ue.alternate,ye!==null?(ye=ye.index,ye<ie?(ue.flags|=67108866,ie):ye):(ue.flags|=67108866,ie)):(ue.flags|=1048576,ie)}function j(ue){return n&&ue.alternate===null&&(ue.flags|=67108866),ue}function M(ue,ie,ye,Pe){return ie===null||ie.tag!==6?(ie=Mu(ye,ue.mode,Pe),ie.return=ue,ie):(ie=g(ie,ye),ie.return=ue,ie)}function ee(ue,ie,ye,Pe){var ft=ye.type;return ft===w?Le(ue,ie,ye.props.children,Pe,ye.key):ie!==null&&(ie.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===F&&Ig(ft)===ie.type)?(ie=g(ie,ye.props),il(ie,ye),ie.return=ue,ie):(ie=_c(ye.type,ye.key,ye.props,null,ue.mode,Pe),il(ie,ye),ie.return=ue,ie)}function Se(ue,ie,ye,Pe){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ye.containerInfo||ie.stateNode.implementation!==ye.implementation?(ie=Bu(ye,ue.mode,Pe),ie.return=ue,ie):(ie=g(ie,ye.children||[]),ie.return=ue,ie)}function Le(ue,ie,ye,Pe,ft){return ie===null||ie.tag!==7?(ie=Vs(ye,ue.mode,Pe,ft),ie.return=ue,ie):(ie=g(ie,ye),ie.return=ue,ie)}function ze(ue,ie,ye){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=Mu(""+ie,ue.mode,ye),ie.return=ue,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case v:return ye=_c(ie.type,ie.key,ie.props,null,ue.mode,ye),il(ye,ie),ye.return=ue,ye;case b:return ie=Bu(ie,ue.mode,ye),ie.return=ue,ie;case F:var Pe=ie._init;return ie=Pe(ie._payload),ze(ue,ie,ye)}if(me(ie)||de(ie))return ie=Vs(ie,ue.mode,ye,null),ie.return=ue,ie;if(typeof ie.then=="function")return ze(ue,Lc(ie),ye);if(ie.$$typeof===O)return ze(ue,jc(ue,ie),ye);Pc(ue,ie)}return null}function je(ue,ie,ye,Pe){var ft=ie!==null?ie.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ft!==null?null:M(ue,ie,""+ye,Pe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case v:return ye.key===ft?ee(ue,ie,ye,Pe):null;case b:return ye.key===ft?Se(ue,ie,ye,Pe):null;case F:return ft=ye._init,ye=ft(ye._payload),je(ue,ie,ye,Pe)}if(me(ye)||de(ye))return ft!==null?null:Le(ue,ie,ye,Pe,null);if(typeof ye.then=="function")return je(ue,ie,Lc(ye),Pe);if(ye.$$typeof===O)return je(ue,ie,jc(ue,ye),Pe);Pc(ue,ye)}return null}function Ee(ue,ie,ye,Pe,ft){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return ue=ue.get(ye)||null,M(ie,ue,""+Pe,ft);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case v:return ue=ue.get(Pe.key===null?ye:Pe.key)||null,ee(ie,ue,Pe,ft);case b:return ue=ue.get(Pe.key===null?ye:Pe.key)||null,Se(ie,ue,Pe,ft);case F:var qt=Pe._init;return Pe=qt(Pe._payload),Ee(ue,ie,ye,Pe,ft)}if(me(Pe)||de(Pe))return ue=ue.get(ye)||null,Le(ie,ue,Pe,ft,null);if(typeof Pe.then=="function")return Ee(ue,ie,ye,Lc(Pe),ft);if(Pe.$$typeof===O)return Ee(ue,ie,ye,jc(ie,Pe),ft);Pc(ie,Pe)}return null}function Ct(ue,ie,ye,Pe){for(var ft=null,qt=null,yt=ie,kt=ie=0,tn=null;yt!==null&&kt<ye.length;kt++){yt.index>kt?(tn=yt,yt=null):tn=yt.sibling;var er=je(ue,yt,ye[kt],Pe);if(er===null){yt===null&&(yt=tn);break}n&&yt&&er.alternate===null&&i(ue,yt),ie=m(er,ie,kt),qt===null?ft=er:qt.sibling=er,qt=er,yt=tn}if(kt===ye.length)return l(ue,yt),ar&&Ks(ue,kt),ft;if(yt===null){for(;kt<ye.length;kt++)yt=ze(ue,ye[kt],Pe),yt!==null&&(ie=m(yt,ie,kt),qt===null?ft=yt:qt.sibling=yt,qt=yt);return ar&&Ks(ue,kt),ft}for(yt=u(yt);kt<ye.length;kt++)tn=Ee(yt,ue,kt,ye[kt],Pe),tn!==null&&(n&&tn.alternate!==null&&yt.delete(tn.key===null?kt:tn.key),ie=m(tn,ie,kt),qt===null?ft=tn:qt.sibling=tn,qt=tn);return n&&yt.forEach(function(As){return i(ue,As)}),ar&&Ks(ue,kt),ft}function Tt(ue,ie,ye,Pe){if(ye==null)throw Error(a(151));for(var ft=null,qt=null,yt=ie,kt=ie=0,tn=null,er=ye.next();yt!==null&&!er.done;kt++,er=ye.next()){yt.index>kt?(tn=yt,yt=null):tn=yt.sibling;var As=je(ue,yt,er.value,Pe);if(As===null){yt===null&&(yt=tn);break}n&&yt&&As.alternate===null&&i(ue,yt),ie=m(As,ie,kt),qt===null?ft=As:qt.sibling=As,qt=As,yt=tn}if(er.done)return l(ue,yt),ar&&Ks(ue,kt),ft;if(yt===null){for(;!er.done;kt++,er=ye.next())er=ze(ue,er.value,Pe),er!==null&&(ie=m(er,ie,kt),qt===null?ft=er:qt.sibling=er,qt=er);return ar&&Ks(ue,kt),ft}for(yt=u(yt);!er.done;kt++,er=ye.next())er=Ee(yt,ue,kt,er.value,Pe),er!==null&&(n&&er.alternate!==null&&yt.delete(er.key===null?kt:er.key),ie=m(er,ie,kt),qt===null?ft=er:qt.sibling=er,qt=er);return n&&yt.forEach(function(Y_){return i(ue,Y_)}),ar&&Ks(ue,kt),ft}function yr(ue,ie,ye,Pe){if(typeof ye=="object"&&ye!==null&&ye.type===w&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case v:e:{for(var ft=ye.key;ie!==null;){if(ie.key===ft){if(ft=ye.type,ft===w){if(ie.tag===7){l(ue,ie.sibling),Pe=g(ie,ye.props.children),Pe.return=ue,ue=Pe;break e}}else if(ie.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===F&&Ig(ft)===ie.type){l(ue,ie.sibling),Pe=g(ie,ye.props),il(Pe,ye),Pe.return=ue,ue=Pe;break e}l(ue,ie);break}else i(ue,ie);ie=ie.sibling}ye.type===w?(Pe=Vs(ye.props.children,ue.mode,Pe,ye.key),Pe.return=ue,ue=Pe):(Pe=_c(ye.type,ye.key,ye.props,null,ue.mode,Pe),il(Pe,ye),Pe.return=ue,ue=Pe)}return j(ue);case b:e:{for(ft=ye.key;ie!==null;){if(ie.key===ft)if(ie.tag===4&&ie.stateNode.containerInfo===ye.containerInfo&&ie.stateNode.implementation===ye.implementation){l(ue,ie.sibling),Pe=g(ie,ye.children||[]),Pe.return=ue,ue=Pe;break e}else{l(ue,ie);break}else i(ue,ie);ie=ie.sibling}Pe=Bu(ye,ue.mode,Pe),Pe.return=ue,ue=Pe}return j(ue);case F:return ft=ye._init,ye=ft(ye._payload),yr(ue,ie,ye,Pe)}if(me(ye))return Ct(ue,ie,ye,Pe);if(de(ye)){if(ft=de(ye),typeof ft!="function")throw Error(a(150));return ye=ft.call(ye),Tt(ue,ie,ye,Pe)}if(typeof ye.then=="function")return yr(ue,ie,Lc(ye),Pe);if(ye.$$typeof===O)return yr(ue,ie,jc(ue,ye),Pe);Pc(ue,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint"?(ye=""+ye,ie!==null&&ie.tag===6?(l(ue,ie.sibling),Pe=g(ie,ye),Pe.return=ue,ue=Pe):(l(ue,ie),Pe=Mu(ye,ue.mode,Pe),Pe.return=ue,ue=Pe),j(ue)):l(ue,ie)}return function(ue,ie,ye,Pe){try{sl=0;var ft=yr(ue,ie,ye,Pe);return zi=null,ft}catch(yt){if(yt===Xo||yt===kc)throw yt;var qt=Hn(29,yt,null,ue.mode);return qt.lanes=Pe,qt.return=ue,qt}finally{}}}var Ui=Mg(!0),Bg=Mg(!1),sa=X(null),Ca=null;function ps(n){var i=n.alternate;z(Vr,Vr.current&1),z(sa,n),Ca===null&&(i===null||Bi.current!==null||i.memoizedState!==null)&&(Ca=n)}function Fg(n){if(n.tag===22){if(z(Vr,Vr.current),z(sa,n),Ca===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Ca=n)}}else gs()}function gs(){z(Vr,Vr.current),z(sa,sa.current)}function Ha(n){E(sa),Ca===n&&(Ca=null),E(Vr)}var Vr=X(0);function zc(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||sh(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function xf(n,i,l,u){i=n.memoizedState,l=l(u,i),l=l==null?i:x({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var mf={enqueueSetState:function(n,i,l){n=n._reactInternals;var u=Yn(),g=us(u);g.payload=i,l!=null&&(g.callback=l),i=fs(n,g,u),i!==null&&(Kn(i,n,u),Jo(i,n,u))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var u=Yn(),g=us(u);g.tag=1,g.payload=i,l!=null&&(g.callback=l),i=fs(n,g,u),i!==null&&(Kn(i,n,u),Jo(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=Yn(),u=us(l);u.tag=2,i!=null&&(u.callback=i),i=fs(n,u,l),i!==null&&(Kn(i,n,l),Jo(i,n,l))}};function Lg(n,i,l,u,g,m,j){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,j):i.prototype&&i.prototype.isPureReactComponent?!Wo(l,u)||!Wo(g,m):!0}function Pg(n,i,l,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==n&&mf.enqueueReplaceState(i,i.state,null)}function ri(n,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(n=n.defaultProps){l===i&&(l=x({},l));for(var g in n)l[g]===void 0&&(l[g]=n[g])}return l}var Uc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function zg(n){Uc(n)}function Ug(n){console.error(n)}function Wg(n){Uc(n)}function Wc(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function qg(n,i,l){try{var u=n.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function yf(n,i,l){return l=us(l),l.tag=3,l.payload={element:null},l.callback=function(){Wc(n,i)},l}function Hg(n){return n=us(n),n.tag=3,n}function $g(n,i,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var m=u.value;n.payload=function(){return g(m)},n.callback=function(){qg(i,l,u)}}var j=l.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(n.callback=function(){qg(i,l,u),typeof g!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var M=u.stack;this.componentDidCatch(u.value,{componentStack:M!==null?M:""})})}function Y2(n,i,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&Vo(i,l,g,!0),l=sa.current,l!==null){switch(l.tag){case 13:return Ca===null?Wf():l.alternate===null&&Or===0&&(Or=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===Gu?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),Hf(n,u,g)),!1;case 22:return l.flags|=65536,u===Gu?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),Hf(n,u,g)),!1}throw Error(a(435,l.tag))}return Hf(n,u,g),Wf(),!1}if(ar)return i=sa.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==Pu&&(n=Error(a(422),{cause:u}),Go(ta(n,l)))):(u!==Pu&&(i=Error(a(423),{cause:u}),Go(ta(i,l))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=ta(u,l),g=yf(n.stateNode,u,g),Ku(n,g),Or!==4&&(Or=2)),!1;var m=Error(a(520),{cause:u});if(m=ta(m,l),hl===null?hl=[m]:hl.push(m),Or!==4&&(Or=2),i===null)return!0;u=ta(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=g&-g,l.lanes|=n,n=yf(l.stateNode,u,n),Ku(l,n),!1;case 1:if(i=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(_s===null||!_s.has(m))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Hg(g),$g(g,n,l,u),Ku(l,g),!1}l=l.return}while(l!==null);return!1}var Gg=Error(a(461)),Zr=!1;function ln(n,i,l,u){i.child=n===null?Bg(i,null,l,u):Ui(i,n.child,l,u)}function Vg(n,i,l,u,g){l=l.render;var m=i.ref;if("ref"in u){var j={};for(var M in u)M!=="ref"&&(j[M]=u[M])}else j=u;return Zs(i),u=ef(n,i,l,j,m,g),M=tf(),n!==null&&!Zr?(rf(n,i,g),$a(n,i,g)):(ar&&M&&Fu(i),i.flags|=1,ln(n,i,u,g),i.child)}function Yg(n,i,l,u,g){if(n===null){var m=l.type;return typeof m=="function"&&!Iu(m)&&m.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=m,Kg(n,i,m,u,g)):(n=_c(l.type,null,u,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Ef(n,g)){var j=m.memoizedProps;if(l=l.compare,l=l!==null?l:Wo,l(j,u)&&n.ref===i.ref)return $a(n,i,g)}return i.flags|=1,n=La(m,u),n.ref=i.ref,n.return=i,i.child=n}function Kg(n,i,l,u,g){if(n!==null){var m=n.memoizedProps;if(Wo(m,u)&&n.ref===i.ref)if(Zr=!1,i.pendingProps=u=m,Ef(n,g))(n.flags&131072)!==0&&(Zr=!0);else return i.lanes=n.lanes,$a(n,i,g)}return vf(n,i,l,u,g)}function Xg(n,i,l){var u=i.pendingProps,g=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|l:l,n!==null){for(g=i.child=n.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return Qg(n,i,u,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ec(i,m!==null?m.cachePool:null),m!==null?Kp(i,m):Qu(),Fg(i);else return i.lanes=i.childLanes=536870912,Qg(n,i,m!==null?m.baseLanes|l:l,l)}else m!==null?(Ec(i,m.cachePool),Kp(i,m),gs(),i.memoizedState=null):(n!==null&&Ec(i,null),Qu(),gs());return ln(n,i,g,l),i.child}function Qg(n,i,l,u){var g=$u();return g=g===null?null:{parent:Gr._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},n!==null&&Ec(i,null),Qu(),Fg(i),n!==null&&Vo(n,i,u,!0),null}function qc(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function vf(n,i,l,u,g){return Zs(i),l=ef(n,i,l,u,void 0,g),u=tf(),n!==null&&!Zr?(rf(n,i,g),$a(n,i,g)):(ar&&u&&Fu(i),i.flags|=1,ln(n,i,l,g),i.child)}function Jg(n,i,l,u,g,m){return Zs(i),i.updateQueue=null,l=Qp(i,u,l,g),Xp(n),u=tf(),n!==null&&!Zr?(rf(n,i,m),$a(n,i,m)):(ar&&u&&Fu(i),i.flags|=1,ln(n,i,l,m),i.child)}function Zg(n,i,l,u,g){if(Zs(i),i.stateNode===null){var m=Ni,j=l.contextType;typeof j=="object"&&j!==null&&(m=mn(j)),m=new l(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=mf,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},Vu(i),j=l.contextType,m.context=typeof j=="object"&&j!==null?mn(j):Ni,m.state=i.memoizedState,j=l.getDerivedStateFromProps,typeof j=="function"&&(xf(i,l,j,u),m.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(j=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),j!==m.state&&mf.enqueueReplaceState(m,m.state,null),el(i,u,m,g),Zo(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){m=i.stateNode;var M=i.memoizedProps,ee=ri(l,M);m.props=ee;var Se=m.context,Le=l.contextType;j=Ni,typeof Le=="object"&&Le!==null&&(j=mn(Le));var ze=l.getDerivedStateFromProps;Le=typeof ze=="function"||typeof m.getSnapshotBeforeUpdate=="function",M=i.pendingProps!==M,Le||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(M||Se!==j)&&Pg(i,m,u,j),ds=!1;var je=i.memoizedState;m.state=je,el(i,u,m,g),Zo(),Se=i.memoizedState,M||je!==Se||ds?(typeof ze=="function"&&(xf(i,l,ze,u),Se=i.memoizedState),(ee=ds||Lg(i,l,ee,u,je,Se,j))?(Le||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Se),m.props=u,m.state=Se,m.context=j,u=ee):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,Yu(n,i),j=i.memoizedProps,Le=ri(l,j),m.props=Le,ze=i.pendingProps,je=m.context,Se=l.contextType,ee=Ni,typeof Se=="object"&&Se!==null&&(ee=mn(Se)),M=l.getDerivedStateFromProps,(Se=typeof M=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(j!==ze||je!==ee)&&Pg(i,m,u,ee),ds=!1,je=i.memoizedState,m.state=je,el(i,u,m,g),Zo();var Ee=i.memoizedState;j!==ze||je!==Ee||ds||n!==null&&n.dependencies!==null&&Tc(n.dependencies)?(typeof M=="function"&&(xf(i,l,M,u),Ee=i.memoizedState),(Le=ds||Lg(i,l,Le,u,je,Ee,ee)||n!==null&&n.dependencies!==null&&Tc(n.dependencies))?(Se||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Ee,ee),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Ee,ee)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||j===n.memoizedProps&&je===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&je===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Ee),m.props=u,m.state=Ee,m.context=ee,u=Le):(typeof m.componentDidUpdate!="function"||j===n.memoizedProps&&je===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&je===n.memoizedState||(i.flags|=1024),u=!1)}return m=u,qc(n,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&u?(i.child=Ui(i,n.child,null,g),i.child=Ui(i,null,l,g)):ln(n,i,l,g),i.memoizedState=m.state,n=i.child):n=$a(n,i,g),n}function ex(n,i,l,u){return $o(),i.flags|=256,ln(n,i,l,u),i.child}var bf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _f(n){return{baseLanes:n,cachePool:Up()}}function Sf(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=ia),n}function tx(n,i,l){var u=i.pendingProps,g=!1,m=(i.flags&128)!==0,j;if((j=m)||(j=n!==null&&n.memoizedState===null?!1:(Vr.current&2)!==0),j&&(g=!0,i.flags&=-129),j=(i.flags&32)!==0,i.flags&=-33,n===null){if(ar){if(g?ps(i):gs(),ar){var M=Dr,ee;if(ee=M){e:{for(ee=M,M=ka;ee.nodeType!==8;){if(!M){M=null;break e}if(ee=xa(ee.nextSibling),ee===null){M=null;break e}}M=ee}M!==null?(i.memoizedState={dehydrated:M,treeContext:Ys!==null?{id:Pa,overflow:za}:null,retryLane:536870912,hydrationErrors:null},ee=Hn(18,null,null,0),ee.stateNode=M,ee.return=i,i.child=ee,jn=i,Dr=null,ee=!0):ee=!1}ee||Qs(i)}if(M=i.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return sh(M)?i.lanes=32:i.lanes=536870912,null;Ha(i)}return M=u.children,u=u.fallback,g?(gs(),g=i.mode,M=Hc({mode:"hidden",children:M},g),u=Vs(u,g,l,null),M.return=i,u.return=i,M.sibling=u,i.child=M,g=i.child,g.memoizedState=_f(l),g.childLanes=Sf(n,j,l),i.memoizedState=bf,u):(ps(i),wf(i,M))}if(ee=n.memoizedState,ee!==null&&(M=ee.dehydrated,M!==null)){if(m)i.flags&256?(ps(i),i.flags&=-257,i=Tf(n,i,l)):i.memoizedState!==null?(gs(),i.child=n.child,i.flags|=128,i=null):(gs(),g=u.fallback,M=i.mode,u=Hc({mode:"visible",children:u.children},M),g=Vs(g,M,l,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,Ui(i,n.child,null,l),u=i.child,u.memoizedState=_f(l),u.childLanes=Sf(n,j,l),i.memoizedState=bf,i=g);else if(ps(i),sh(M)){if(j=M.nextSibling&&M.nextSibling.dataset,j)var Se=j.dgst;j=Se,u=Error(a(419)),u.stack="",u.digest=j,Go({value:u,source:null,stack:null}),i=Tf(n,i,l)}else if(Zr||Vo(n,i,l,!1),j=(l&n.childLanes)!==0,Zr||j){if(j=wr,j!==null&&(u=l&-l,u=(u&42)!==0?1:Dt(u),u=(u&(j.suspendedLanes|l))!==0?0:u,u!==0&&u!==ee.retryLane))throw ee.retryLane=u,Ri(n,u),Kn(j,n,u),Gg;M.data==="$?"||Wf(),i=Tf(n,i,l)}else M.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=ee.treeContext,Dr=xa(M.nextSibling),jn=i,ar=!0,Xs=null,ka=!1,n!==null&&(na[aa++]=Pa,na[aa++]=za,na[aa++]=Ys,Pa=n.id,za=n.overflow,Ys=i),i=wf(i,u.children),i.flags|=4096);return i}return g?(gs(),g=u.fallback,M=i.mode,ee=n.child,Se=ee.sibling,u=La(ee,{mode:"hidden",children:u.children}),u.subtreeFlags=ee.subtreeFlags&65011712,Se!==null?g=La(Se,g):(g=Vs(g,M,l,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,M=n.child.memoizedState,M===null?M=_f(l):(ee=M.cachePool,ee!==null?(Se=Gr._currentValue,ee=ee.parent!==Se?{parent:Se,pool:Se}:ee):ee=Up(),M={baseLanes:M.baseLanes|l,cachePool:ee}),g.memoizedState=M,g.childLanes=Sf(n,j,l),i.memoizedState=bf,u):(ps(i),l=n.child,n=l.sibling,l=La(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,n!==null&&(j=i.deletions,j===null?(i.deletions=[n],i.flags|=16):j.push(n)),i.child=l,i.memoizedState=null,l)}function wf(n,i){return i=Hc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Hc(n,i){return n=Hn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Tf(n,i,l){return Ui(i,n.child,null,l),n=wf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function rx(n,i,l){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Uu(n.return,i,l)}function jf(n,i,l,u,g){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=l,m.tailMode=g)}function nx(n,i,l){var u=i.pendingProps,g=u.revealOrder,m=u.tail;if(ln(n,i,u.children,l),u=Vr.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rx(n,l,i);else if(n.tag===19)rx(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(z(Vr,u),g){case"forwards":for(l=i.child,g=null;l!==null;)n=l.alternate,n!==null&&zc(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),jf(i,!1,g,l,m);break;case"backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&zc(n)===null){i.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}jf(i,!0,l,null,m);break;case"together":jf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function $a(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),bs|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(Vo(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,l=La(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=La(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function Ef(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Tc(n)))}function K2(n,i,l){switch(i.tag){case 3:qe(i,i.stateNode.containerInfo),cs(i,Gr,n.memoizedState.cache),$o();break;case 27:case 5:Oe(i);break;case 4:qe(i,i.stateNode.containerInfo);break;case 10:cs(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ps(i),i.flags|=128,null):(l&i.child.childLanes)!==0?tx(n,i,l):(ps(i),n=$a(n,i,l),n!==null?n.sibling:null);ps(i);break;case 19:var g=(n.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(Vo(n,i,l,!1),u=(l&i.childLanes)!==0),g){if(u)return nx(n,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),z(Vr,Vr.current),u)break;return null;case 22:case 23:return i.lanes=0,Xg(n,i,l);case 24:cs(i,Gr,n.memoizedState.cache)}return $a(n,i,l)}function ax(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)Zr=!0;else{if(!Ef(n,l)&&(i.flags&128)===0)return Zr=!1,K2(n,i,l);Zr=(n.flags&131072)!==0}else Zr=!1,ar&&(i.flags&1048576)!==0&&Ip(i,wc,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,g=u._init;if(u=g(u._payload),i.type=u,typeof u=="function")Iu(u)?(n=ri(u,n),i.tag=1,i=Zg(null,i,u,n,l)):(i.tag=0,i=vf(null,i,u,n,l));else{if(u!=null){if(g=u.$$typeof,g===P){i.tag=11,i=Vg(null,i,u,n,l);break e}else if(g===Y){i.tag=14,i=Yg(null,i,u,n,l);break e}}throw i=ne(u)||u,Error(a(306,i,""))}}return i;case 0:return vf(n,i,i.type,i.pendingProps,l);case 1:return u=i.type,g=ri(u,i.pendingProps),Zg(n,i,u,g,l);case 3:e:{if(qe(i,i.stateNode.containerInfo),n===null)throw Error(a(387));u=i.pendingProps;var m=i.memoizedState;g=m.element,Yu(n,i),el(i,u,null,l);var j=i.memoizedState;if(u=j.cache,cs(i,Gr,u),u!==m.cache&&Wu(i,[Gr],l,!0),Zo(),u=j.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:j.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=ex(n,i,u,l);break e}else if(u!==g){g=ta(Error(a(424)),i),Go(g),i=ex(n,i,u,l);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Dr=xa(n.firstChild),jn=i,ar=!0,Xs=null,ka=!0,l=Bg(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if($o(),u===g){i=$a(n,i,l);break e}ln(n,i,u,l)}i=i.child}return i;case 26:return qc(n,i),n===null?(l=lm(i.type,null,i.pendingProps,null))?i.memoizedState=l:ar||(l=i.type,n=i.pendingProps,u=ad(ge.current).createElement(l),u[Rt]=i,u[gr]=n,dn(u,l,n),fe(u),i.stateNode=u):i.memoizedState=lm(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Oe(i),n===null&&ar&&(u=i.stateNode=sm(i.type,i.pendingProps,ge.current),jn=i,ka=!0,g=Dr,Ts(i.type)?(ih=g,Dr=xa(u.firstChild)):Dr=g),ln(n,i,i.pendingProps.children,l),qc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&ar&&((g=u=Dr)&&(u=w_(u,i.type,i.pendingProps,ka),u!==null?(i.stateNode=u,jn=i,Dr=xa(u.firstChild),ka=!1,g=!0):g=!1),g||Qs(i)),Oe(i),g=i.type,m=i.pendingProps,j=n!==null?n.memoizedProps:null,u=m.children,rh(g,m)?u=null:j!==null&&rh(g,j)&&(i.flags|=32),i.memoizedState!==null&&(g=ef(n,i,U2,null,null,l),Sl._currentValue=g),qc(n,i),ln(n,i,u,l),i.child;case 6:return n===null&&ar&&((n=l=Dr)&&(l=T_(l,i.pendingProps,ka),l!==null?(i.stateNode=l,jn=i,Dr=null,n=!0):n=!1),n||Qs(i)),null;case 13:return tx(n,i,l);case 4:return qe(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Ui(i,null,u,l):ln(n,i,u,l),i.child;case 11:return Vg(n,i,i.type,i.pendingProps,l);case 7:return ln(n,i,i.pendingProps,l),i.child;case 8:return ln(n,i,i.pendingProps.children,l),i.child;case 12:return ln(n,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,cs(i,i.type,u.value),ln(n,i,u.children,l),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,Zs(i),g=mn(g),u=u(g),i.flags|=1,ln(n,i,u,l),i.child;case 14:return Yg(n,i,i.type,i.pendingProps,l);case 15:return Kg(n,i,i.type,i.pendingProps,l);case 19:return nx(n,i,l);case 31:return u=i.pendingProps,l=i.mode,u={mode:u.mode,children:u.children},n===null?(l=Hc(u,l),l.ref=i.ref,i.child=l,l.return=i,i=l):(l=La(n.child,u),l.ref=i.ref,i.child=l,l.return=i,i=l),i;case 22:return Xg(n,i,l);case 24:return Zs(i),u=mn(Gr),n===null?(g=$u(),g===null&&(g=wr,m=qu(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=l),g=m),i.memoizedState={parent:u,cache:g},Vu(i),cs(i,Gr,g)):((n.lanes&l)!==0&&(Yu(n,i),el(i,null,null,l),Zo()),g=n.memoizedState,m=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),cs(i,Gr,u)):(u=m.cache,cs(i,Gr,u),u!==g.cache&&Wu(i,[Gr],l,!0))),ln(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Ga(n){n.flags|=4}function sx(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!hm(i)){if(i=sa.current,i!==null&&((Xt&4194048)===Xt?Ca!==null:(Xt&62914560)!==Xt&&(Xt&536870912)===0||i!==Ca))throw Qo=Gu,Wp;n.flags|=8192}}function $c(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?ke():536870912,n.lanes|=i,$i|=i)}function ol(n,i){if(!ar)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Nr(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,u=0;if(i)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=l,i}function X2(n,i,l){var u=i.pendingProps;switch(Lu(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(i),null;case 1:return Nr(i),null;case 3:return l=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Wa(Gr),Re(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Ho(i)?Ga(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Fp())),Nr(i),null;case 26:return l=i.memoizedState,n===null?(Ga(i),l!==null?(Nr(i),sx(i,l)):(Nr(i),i.flags&=-16777217)):l?l!==n.memoizedState?(Ga(i),Nr(i),sx(i,l)):(Nr(i),i.flags&=-16777217):(n.memoizedProps!==u&&Ga(i),Nr(i),i.flags&=-16777217),null;case 27:et(i),l=ge.current;var g=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ga(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Nr(i),null}n=H.current,Ho(i)?Mp(i):(n=sm(g,u,l),i.stateNode=n,Ga(i))}return Nr(i),null;case 5:if(et(i),l=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ga(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Nr(i),null}if(n=H.current,Ho(i))Mp(i);else{switch(g=ad(ge.current),n){case 1:n=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:n=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":n=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":n=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":n=g.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?g.createElement(l,{is:u.is}):g.createElement(l)}}n[Rt]=i,n[gr]=u;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)n.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=n;e:switch(dn(n,l,u),l){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ga(i)}}return Nr(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Ga(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(n=ge.current,Ho(i)){if(n=i.stateNode,l=i.memoizedProps,u=null,g=jn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[Rt]=i,n=!!(n.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Jx(n.nodeValue,l)),n||Qs(i)}else n=ad(n).createTextNode(u),n[Rt]=i,i.stateNode=n}return Nr(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Ho(i),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(a(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));g[Rt]=i}else $o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nr(i),g=!1}else g=Fp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(Ha(i),i):(Ha(i),null)}if(Ha(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=u!==null,n=n!==null&&n.memoizedState!==null,l){u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==g&&(u.flags|=2048)}return l!==n&&l&&(i.child.flags|=8192),$c(i,i.updateQueue),Nr(i),null;case 4:return Re(),n===null&&Qf(i.stateNode.containerInfo),Nr(i),null;case 10:return Wa(i.type),Nr(i),null;case 19:if(E(Vr),g=i.memoizedState,g===null)return Nr(i),null;if(u=(i.flags&128)!==0,m=g.rendering,m===null)if(u)ol(g,!1);else{if(Or!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=zc(n),m!==null){for(i.flags|=128,ol(g,!1),n=m.updateQueue,i.updateQueue=n,$c(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)Op(l,n),l=l.sibling;return z(Vr,Vr.current&1|2),i.child}n=n.sibling}g.tail!==null&&Be()>Yc&&(i.flags|=128,u=!0,ol(g,!1),i.lanes=4194304)}else{if(!u)if(n=zc(m),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,$c(i,n),ol(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!ar)return Nr(i),null}else 2*Be()-g.renderingStartTime>Yc&&l!==536870912&&(i.flags|=128,u=!0,ol(g,!1),i.lanes=4194304);g.isBackwards?(m.sibling=i.child,i.child=m):(n=g.last,n!==null?n.sibling=m:i.child=m,g.last=m)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Be(),i.sibling=null,n=Vr.current,z(Vr,u?n&1|2:n&1),i):(Nr(i),null);case 22:case 23:return Ha(i),Ju(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(Nr(i),i.subtreeFlags&6&&(i.flags|=8192)):Nr(i),l=i.updateQueue,l!==null&&$c(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),n!==null&&E(ei),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Wa(Gr),Nr(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Q2(n,i){switch(Lu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Wa(Gr),Re(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return et(i),null;case 13:if(Ha(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));$o()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return E(Vr),null;case 4:return Re(),null;case 10:return Wa(i.type),null;case 22:case 23:return Ha(i),Ju(),n!==null&&E(ei),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Wa(Gr),null;case 25:return null;default:return null}}function ix(n,i){switch(Lu(i),i.tag){case 3:Wa(Gr),Re();break;case 26:case 27:case 5:et(i);break;case 4:Re();break;case 13:Ha(i);break;case 19:E(Vr);break;case 10:Wa(i.type);break;case 22:case 23:Ha(i),Ju(),n!==null&&E(ei);break;case 24:Wa(Gr)}}function ll(n,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&n)===n){u=void 0;var m=l.create,j=l.inst;u=m(),j.destroy=u}l=l.next}while(l!==g)}}catch(M){_r(i,i.return,M)}}function xs(n,i,l){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var m=g.next;u=m;do{if((u.tag&n)===n){var j=u.inst,M=j.destroy;if(M!==void 0){j.destroy=void 0,g=i;var ee=l,Se=M;try{Se()}catch(Le){_r(g,ee,Le)}}}u=u.next}while(u!==m)}}catch(Le){_r(i,i.return,Le)}}function ox(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{Yp(i,l)}catch(u){_r(n,n.return,u)}}}function lx(n,i,l){l.props=ri(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(u){_r(n,i,u)}}function cl(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof l=="function"?n.refCleanup=l(u):l.current=u}}catch(g){_r(n,i,g)}}function Aa(n,i){var l=n.ref,u=n.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){_r(n,i,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){_r(n,i,g)}else l.current=null}function cx(n){var i=n.type,l=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){_r(n,n.return,g)}}function kf(n,i,l){try{var u=n.stateNode;y_(u,n.type,l,i),u[gr]=i}catch(g){_r(n,n.return,g)}}function dx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ts(n.type)||n.tag===4}function Cf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ts(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Af(n,i,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=nd));else if(u!==4&&(u===27&&Ts(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(Af(n,i,l),n=n.sibling;n!==null;)Af(n,i,l),n=n.sibling}function Gc(n,i,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(u!==4&&(u===27&&Ts(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Gc(n,i,l),n=n.sibling;n!==null;)Gc(n,i,l),n=n.sibling}function ux(n){var i=n.stateNode,l=n.memoizedProps;try{for(var u=n.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);dn(i,u,l),i[Rt]=n,i[gr]=l}catch(m){_r(n,n.return,m)}}var Va=!1,zr=!1,Rf=!1,fx=typeof WeakSet=="function"?WeakSet:Set,en=null;function J2(n,i){if(n=n.containerInfo,eh=dd,n=wp(n),ku(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var j=0,M=-1,ee=-1,Se=0,Le=0,ze=n,je=null;t:for(;;){for(var Ee;ze!==l||g!==0&&ze.nodeType!==3||(M=j+g),ze!==m||u!==0&&ze.nodeType!==3||(ee=j+u),ze.nodeType===3&&(j+=ze.nodeValue.length),(Ee=ze.firstChild)!==null;)je=ze,ze=Ee;for(;;){if(ze===n)break t;if(je===l&&++Se===g&&(M=j),je===m&&++Le===u&&(ee=j),(Ee=ze.nextSibling)!==null)break;ze=je,je=ze.parentNode}ze=Ee}l=M===-1||ee===-1?null:{start:M,end:ee}}else l=null}l=l||{start:0,end:0}}else l=null;for(th={focusedElem:n,selectionRange:l},dd=!1,en=i;en!==null;)if(i=en,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,en=n;else for(;en!==null;){switch(i=en,m=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,l=i,g=m.memoizedProps,m=m.memoizedState,u=l.stateNode;try{var Ct=ri(l.type,g,l.elementType===l.type);n=u.getSnapshotBeforeUpdate(Ct,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Tt){_r(l,l.return,Tt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)ah(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ah(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,en=n;break}en=i.return}}function hx(n,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:ms(n,l),u&4&&ll(5,l);break;case 1:if(ms(n,l),u&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(j){_r(l,l.return,j)}else{var g=ri(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(g,i,n.__reactInternalSnapshotBeforeUpdate)}catch(j){_r(l,l.return,j)}}u&64&&ox(l),u&512&&cl(l,l.return);break;case 3:if(ms(n,l),u&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Yp(n,i)}catch(j){_r(l,l.return,j)}}break;case 27:i===null&&u&4&&ux(l);case 26:case 5:ms(n,l),i===null&&u&4&&cx(l),u&512&&cl(l,l.return);break;case 12:ms(n,l);break;case 13:ms(n,l),u&4&&xx(n,l),u&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=o_.bind(null,l),j_(n,l))));break;case 22:if(u=l.memoizedState!==null||Va,!u){i=i!==null&&i.memoizedState!==null||zr,g=Va;var m=zr;Va=u,(zr=i)&&!m?ys(n,l,(l.subtreeFlags&8772)!==0):ms(n,l),Va=g,zr=m}break;case 30:break;default:ms(n,l)}}function px(n){var i=n.alternate;i!==null&&(n.alternate=null,px(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&L(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Cr=null,Bn=!1;function Ya(n,i,l){for(l=l.child;l!==null;)gx(n,i,l),l=l.sibling}function gx(n,i,l){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(or,l)}catch{}switch(l.tag){case 26:zr||Aa(l,i),Ya(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:zr||Aa(l,i);var u=Cr,g=Bn;Ts(l.type)&&(Cr=l.stateNode,Bn=!1),Ya(n,i,l),yl(l.stateNode),Cr=u,Bn=g;break;case 5:zr||Aa(l,i);case 6:if(u=Cr,g=Bn,Cr=null,Ya(n,i,l),Cr=u,Bn=g,Cr!==null)if(Bn)try{(Cr.nodeType===9?Cr.body:Cr.nodeName==="HTML"?Cr.ownerDocument.body:Cr).removeChild(l.stateNode)}catch(m){_r(l,i,m)}else try{Cr.removeChild(l.stateNode)}catch(m){_r(l,i,m)}break;case 18:Cr!==null&&(Bn?(n=Cr,nm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),El(n)):nm(Cr,l.stateNode));break;case 4:u=Cr,g=Bn,Cr=l.stateNode.containerInfo,Bn=!0,Ya(n,i,l),Cr=u,Bn=g;break;case 0:case 11:case 14:case 15:zr||xs(2,l,i),zr||xs(4,l,i),Ya(n,i,l);break;case 1:zr||(Aa(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&lx(l,i,u)),Ya(n,i,l);break;case 21:Ya(n,i,l);break;case 22:zr=(u=zr)||l.memoizedState!==null,Ya(n,i,l),zr=u;break;default:Ya(n,i,l)}}function xx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{El(n)}catch(l){_r(i,i.return,l)}}function Z2(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new fx),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new fx),i;default:throw Error(a(435,n.tag))}}function Nf(n,i){var l=Z2(n);i.forEach(function(u){var g=l_.bind(null,n,u);l.has(u)||(l.add(u),u.then(g,g))})}function $n(n,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],m=n,j=i,M=j;e:for(;M!==null;){switch(M.tag){case 27:if(Ts(M.type)){Cr=M.stateNode,Bn=!1;break e}break;case 5:Cr=M.stateNode,Bn=!1;break e;case 3:case 4:Cr=M.stateNode.containerInfo,Bn=!0;break e}M=M.return}if(Cr===null)throw Error(a(160));gx(m,j,g),Cr=null,Bn=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)mx(i,n),i=i.sibling}var ga=null;function mx(n,i){var l=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:$n(i,n),Gn(n),u&4&&(xs(3,n,n.return),ll(3,n),xs(5,n,n.return));break;case 1:$n(i,n),Gn(n),u&512&&(zr||l===null||Aa(l,l.return)),u&64&&Va&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=ga;if($n(i,n),Gn(n),u&512&&(zr||l===null||Aa(l,l.return)),u&4){var m=l!==null?l.memoizedState:null;if(u=n.memoizedState,l===null)if(u===null)if(n.stateNode===null){e:{u=n.type,l=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":m=g.getElementsByTagName("title")[0],(!m||m[B]||m[Rt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(u),g.head.insertBefore(m,g.querySelector("head > title"))),dn(m,u,l),m[Rt]=n,fe(m),u=m;break e;case"link":var j=um("link","href",g).get(u+(l.href||""));if(j){for(var M=0;M<j.length;M++)if(m=j[M],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){j.splice(M,1);break t}}m=g.createElement(u),dn(m,u,l),g.head.appendChild(m);break;case"meta":if(j=um("meta","content",g).get(u+(l.content||""))){for(M=0;M<j.length;M++)if(m=j[M],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){j.splice(M,1);break t}}m=g.createElement(u),dn(m,u,l),g.head.appendChild(m);break;default:throw Error(a(468,u))}m[Rt]=n,fe(m),u=m}n.stateNode=u}else fm(g,n.type,n.stateNode);else n.stateNode=dm(g,u,n.memoizedProps);else m!==u?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,u===null?fm(g,n.type,n.stateNode):dm(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&kf(n,n.memoizedProps,l.memoizedProps)}break;case 27:$n(i,n),Gn(n),u&512&&(zr||l===null||Aa(l,l.return)),l!==null&&u&4&&kf(n,n.memoizedProps,l.memoizedProps);break;case 5:if($n(i,n),Gn(n),u&512&&(zr||l===null||Aa(l,l.return)),n.flags&32){g=n.stateNode;try{ut(g,"")}catch(Ee){_r(n,n.return,Ee)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,kf(n,g,l!==null?l.memoizedProps:g)),u&1024&&(Rf=!0);break;case 6:if($n(i,n),Gn(n),u&4){if(n.stateNode===null)throw Error(a(162));u=n.memoizedProps,l=n.stateNode;try{l.nodeValue=u}catch(Ee){_r(n,n.return,Ee)}}break;case 3:if(od=null,g=ga,ga=sd(i.containerInfo),$n(i,n),ga=g,Gn(n),u&4&&l!==null&&l.memoizedState.isDehydrated)try{El(i.containerInfo)}catch(Ee){_r(n,n.return,Ee)}Rf&&(Rf=!1,yx(n));break;case 4:u=ga,ga=sd(n.stateNode.containerInfo),$n(i,n),Gn(n),ga=u;break;case 12:$n(i,n),Gn(n);break;case 13:$n(i,n),Gn(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ff=Be()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Nf(n,u)));break;case 22:g=n.memoizedState!==null;var ee=l!==null&&l.memoizedState!==null,Se=Va,Le=zr;if(Va=Se||g,zr=Le||ee,$n(i,n),zr=Le,Va=Se,Gn(n),u&8192)e:for(i=n.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(l===null||ee||Va||zr||ni(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){ee=l=i;try{if(m=ee.stateNode,g)j=m.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{M=ee.stateNode;var ze=ee.memoizedProps.style,je=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;M.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(Ee){_r(ee,ee.return,Ee)}}}else if(i.tag===6){if(l===null){ee=i;try{ee.stateNode.nodeValue=g?"":ee.memoizedProps}catch(Ee){_r(ee,ee.return,Ee)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Nf(n,l))));break;case 19:$n(i,n),Gn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Nf(n,u)));break;case 30:break;case 21:break;default:$n(i,n),Gn(n)}}function Gn(n){var i=n.flags;if(i&2){try{for(var l,u=n.return;u!==null;){if(dx(u)){l=u;break}u=u.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var g=l.stateNode,m=Cf(n);Gc(n,m,g);break;case 5:var j=l.stateNode;l.flags&32&&(ut(j,""),l.flags&=-33);var M=Cf(n);Gc(n,M,j);break;case 3:case 4:var ee=l.stateNode.containerInfo,Se=Cf(n);Af(n,Se,ee);break;default:throw Error(a(161))}}catch(Le){_r(n,n.return,Le)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function yx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;yx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ms(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)hx(n,i.alternate,i),i=i.sibling}function ni(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:xs(4,i,i.return),ni(i);break;case 1:Aa(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&lx(i,i.return,l),ni(i);break;case 27:yl(i.stateNode);case 26:case 5:Aa(i,i.return),ni(i);break;case 22:i.memoizedState===null&&ni(i);break;case 30:ni(i);break;default:ni(i)}n=n.sibling}}function ys(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=n,m=i,j=m.flags;switch(m.tag){case 0:case 11:case 15:ys(g,m,l),ll(4,m);break;case 1:if(ys(g,m,l),u=m,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Se){_r(u,u.return,Se)}if(u=m,g=u.updateQueue,g!==null){var M=u.stateNode;try{var ee=g.shared.hiddenCallbacks;if(ee!==null)for(g.shared.hiddenCallbacks=null,g=0;g<ee.length;g++)Vp(ee[g],M)}catch(Se){_r(u,u.return,Se)}}l&&j&64&&ox(m),cl(m,m.return);break;case 27:ux(m);case 26:case 5:ys(g,m,l),l&&u===null&&j&4&&cx(m),cl(m,m.return);break;case 12:ys(g,m,l);break;case 13:ys(g,m,l),l&&j&4&&xx(g,m);break;case 22:m.memoizedState===null&&ys(g,m,l),cl(m,m.return);break;case 30:break;default:ys(g,m,l)}i=i.sibling}}function Df(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Yo(l))}function Of(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Yo(n))}function Ra(n,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)vx(n,i,l,u),i=i.sibling}function vx(n,i,l,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Ra(n,i,l,u),g&2048&&ll(9,i);break;case 1:Ra(n,i,l,u);break;case 3:Ra(n,i,l,u),g&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Yo(n)));break;case 12:if(g&2048){Ra(n,i,l,u),n=i.stateNode;try{var m=i.memoizedProps,j=m.id,M=m.onPostCommit;typeof M=="function"&&M(j,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(ee){_r(i,i.return,ee)}}else Ra(n,i,l,u);break;case 13:Ra(n,i,l,u);break;case 23:break;case 22:m=i.stateNode,j=i.alternate,i.memoizedState!==null?m._visibility&2?Ra(n,i,l,u):dl(n,i):m._visibility&2?Ra(n,i,l,u):(m._visibility|=2,Wi(n,i,l,u,(i.subtreeFlags&10256)!==0)),g&2048&&Df(j,i);break;case 24:Ra(n,i,l,u),g&2048&&Of(i.alternate,i);break;default:Ra(n,i,l,u)}}function Wi(n,i,l,u,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=n,j=i,M=l,ee=u,Se=j.flags;switch(j.tag){case 0:case 11:case 15:Wi(m,j,M,ee,g),ll(8,j);break;case 23:break;case 22:var Le=j.stateNode;j.memoizedState!==null?Le._visibility&2?Wi(m,j,M,ee,g):dl(m,j):(Le._visibility|=2,Wi(m,j,M,ee,g)),g&&Se&2048&&Df(j.alternate,j);break;case 24:Wi(m,j,M,ee,g),g&&Se&2048&&Of(j.alternate,j);break;default:Wi(m,j,M,ee,g)}i=i.sibling}}function dl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,u=i,g=u.flags;switch(u.tag){case 22:dl(l,u),g&2048&&Df(u.alternate,u);break;case 24:dl(l,u),g&2048&&Of(u.alternate,u);break;default:dl(l,u)}i=i.sibling}}var ul=8192;function qi(n){if(n.subtreeFlags&ul)for(n=n.child;n!==null;)bx(n),n=n.sibling}function bx(n){switch(n.tag){case 26:qi(n),n.flags&ul&&n.memoizedState!==null&&L_(ga,n.memoizedState,n.memoizedProps);break;case 5:qi(n);break;case 3:case 4:var i=ga;ga=sd(n.stateNode.containerInfo),qi(n),ga=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=ul,ul=16777216,qi(n),ul=i):qi(n));break;default:qi(n)}}function _x(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function fl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];en=u,wx(u,n)}_x(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Sx(n),n=n.sibling}function Sx(n){switch(n.tag){case 0:case 11:case 15:fl(n),n.flags&2048&&xs(9,n,n.return);break;case 3:fl(n);break;case 12:fl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Vc(n)):fl(n);break;default:fl(n)}}function Vc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];en=u,wx(u,n)}_x(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:xs(8,i,i.return),Vc(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Vc(i));break;default:Vc(i)}n=n.sibling}}function wx(n,i){for(;en!==null;){var l=en;switch(l.tag){case 0:case 11:case 15:xs(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Yo(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,en=u;else e:for(l=n;en!==null;){u=en;var g=u.sibling,m=u.return;if(px(u),u===l){en=null;break e}if(g!==null){g.return=m,en=g;break e}en=m}}}var e_={getCacheForType:function(n){var i=mn(Gr),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l}},t_=typeof WeakMap=="function"?WeakMap:Map,cr=0,wr=null,$t=null,Xt=0,dr=0,Vn=null,vs=!1,Hi=!1,If=!1,Ka=0,Or=0,bs=0,ai=0,Mf=0,ia=0,$i=0,hl=null,Fn=null,Bf=!1,Ff=0,Yc=1/0,Kc=null,_s=null,cn=0,Ss=null,Gi=null,Vi=0,Lf=0,Pf=null,Tx=null,pl=0,zf=null;function Yn(){if((cr&2)!==0&&Xt!==0)return Xt&-Xt;if(re.T!==null){var n=Ii;return n!==0?n:Vf()}return jr()}function jx(){ia===0&&(ia=(Xt&536870912)===0||ar?se():536870912);var n=sa.current;return n!==null&&(n.flags|=32),ia}function Kn(n,i,l){(n===wr&&(dr===2||dr===9)||n.cancelPendingCommit!==null)&&(Yi(n,0),ws(n,Xt,ia,!1)),Nt(n,l),((cr&2)===0||n!==wr)&&(n===wr&&((cr&2)===0&&(ai|=l),Or===4&&ws(n,Xt,ia,!1)),Na(n))}function Ex(n,i,l){if((cr&6)!==0)throw Error(a(327));var u=!l&&(i&124)===0&&(i&n.expiredLanes)===0||Ht(n,i),g=u?a_(n,i):qf(n,i,!0),m=u;do{if(g===0){Hi&&!u&&ws(n,i,0,!1);break}else{if(l=n.current.alternate,m&&!r_(l)){g=qf(n,i,!1),m=!1;continue}if(g===2){if(m=i,n.errorRecoveryDisabledLanes&m)var j=0;else j=n.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){i=j;e:{var M=n;g=hl;var ee=M.current.memoizedState.isDehydrated;if(ee&&(Yi(M,j).flags|=256),j=qf(M,j,!1),j!==2){if(If&&!ee){M.errorRecoveryDisabledLanes|=m,ai|=m,g=4;break e}m=Fn,Fn=g,m!==null&&(Fn===null?Fn=m:Fn.push.apply(Fn,m))}g=j}if(m=!1,g!==2)continue}}if(g===1){Yi(n,0),ws(n,i,0,!0);break}e:{switch(u=n,m=g,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:ws(u,i,ia,!vs);break e;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(g=Ff+300-Be(),10<g)){if(ws(u,i,ia,!vs),Rr(u,0,!0)!==0)break e;u.timeoutHandle=tm(kx.bind(null,u,l,Fn,Kc,Bf,i,ia,ai,$i,vs,m,2,-0,0),g);break e}kx(u,l,Fn,Kc,Bf,i,ia,ai,$i,vs,m,0,-0,0)}}break}while(!0);Na(n)}function kx(n,i,l,u,g,m,j,M,ee,Se,Le,ze,je,Ee){if(n.timeoutHandle=-1,ze=i.subtreeFlags,(ze&8192||(ze&16785408)===16785408)&&(_l={stylesheets:null,count:0,unsuspend:F_},bx(i),ze=P_(),ze!==null)){n.cancelPendingCommit=ze(Ix.bind(null,n,i,m,l,u,g,j,M,ee,Le,1,je,Ee)),ws(n,m,j,!Se);return}Ix(n,i,m,l,u,g,j,M,ee)}function r_(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],m=g.getSnapshot;g=g.value;try{if(!qn(m(),g))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ws(n,i,l,u){i&=~Mf,i&=~ai,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var g=i;0<g;){var m=31-He(g),j=1<<m;u[m]=-1,g&=~j}l!==0&&st(n,l,i)}function Xc(){return(cr&6)===0?(gl(0),!1):!0}function Uf(){if($t!==null){if(dr===0)var n=$t.return;else n=$t,Ua=Js=null,nf(n),zi=null,sl=0,n=$t;for(;n!==null;)ix(n.alternate,n),n=n.return;$t=null}}function Yi(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,b_(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Uf(),wr=n,$t=l=La(n.current,null),Xt=i,dr=0,Vn=null,vs=!1,Hi=Ht(n,i),If=!1,$i=ia=Mf=ai=bs=Or=0,Fn=hl=null,Bf=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var g=31-He(u),m=1<<g;i|=n[g],u&=~m}return Ka=i,yc(),l}function Cx(n,i){zt=null,re.H=Fc,i===Xo||i===kc?(i=$p(),dr=3):i===Wp?(i=$p(),dr=4):dr=i===Gg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Vn=i,$t===null&&(Or=1,Wc(n,ta(i,n.current)))}function Ax(){var n=re.H;return re.H=Fc,n===null?Fc:n}function Rx(){var n=re.A;return re.A=e_,n}function Wf(){Or=4,vs||(Xt&4194048)!==Xt&&sa.current!==null||(Hi=!0),(bs&134217727)===0&&(ai&134217727)===0||wr===null||ws(wr,Xt,ia,!1)}function qf(n,i,l){var u=cr;cr|=2;var g=Ax(),m=Rx();(wr!==n||Xt!==i)&&(Kc=null,Yi(n,i)),i=!1;var j=Or;e:do try{if(dr!==0&&$t!==null){var M=$t,ee=Vn;switch(dr){case 8:Uf(),j=6;break e;case 3:case 2:case 9:case 6:sa.current===null&&(i=!0);var Se=dr;if(dr=0,Vn=null,Ki(n,M,ee,Se),l&&Hi){j=0;break e}break;default:Se=dr,dr=0,Vn=null,Ki(n,M,ee,Se)}}n_(),j=Or;break}catch(Le){Cx(n,Le)}while(!0);return i&&n.shellSuspendCounter++,Ua=Js=null,cr=u,re.H=g,re.A=m,$t===null&&(wr=null,Xt=0,yc()),j}function n_(){for(;$t!==null;)Nx($t)}function a_(n,i){var l=cr;cr|=2;var u=Ax(),g=Rx();wr!==n||Xt!==i?(Kc=null,Yc=Be()+500,Yi(n,i)):Hi=Ht(n,i);e:do try{if(dr!==0&&$t!==null){i=$t;var m=Vn;t:switch(dr){case 1:dr=0,Vn=null,Ki(n,i,m,1);break;case 2:case 9:if(qp(m)){dr=0,Vn=null,Dx(i);break}i=function(){dr!==2&&dr!==9||wr!==n||(dr=7),Na(n)},m.then(i,i);break e;case 3:dr=7;break e;case 4:dr=5;break e;case 7:qp(m)?(dr=0,Vn=null,Dx(i)):(dr=0,Vn=null,Ki(n,i,m,7));break;case 5:var j=null;switch($t.tag){case 26:j=$t.memoizedState;case 5:case 27:var M=$t;if(!j||hm(j)){dr=0,Vn=null;var ee=M.sibling;if(ee!==null)$t=ee;else{var Se=M.return;Se!==null?($t=Se,Qc(Se)):$t=null}break t}}dr=0,Vn=null,Ki(n,i,m,5);break;case 6:dr=0,Vn=null,Ki(n,i,m,6);break;case 8:Uf(),Or=6;break e;default:throw Error(a(462))}}s_();break}catch(Le){Cx(n,Le)}while(!0);return Ua=Js=null,re.H=u,re.A=g,cr=l,$t!==null?0:(wr=null,Xt=0,yc(),Or)}function s_(){for(;$t!==null&&!Ce();)Nx($t)}function Nx(n){var i=ax(n.alternate,n,Ka);n.memoizedProps=n.pendingProps,i===null?Qc(n):$t=i}function Dx(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=Jg(l,i,i.pendingProps,i.type,void 0,Xt);break;case 11:i=Jg(l,i,i.pendingProps,i.type.render,i.ref,Xt);break;case 5:nf(i);default:ix(l,i),i=$t=Op(i,Ka),i=ax(l,i,Ka)}n.memoizedProps=n.pendingProps,i===null?Qc(n):$t=i}function Ki(n,i,l,u){Ua=Js=null,nf(i),zi=null,sl=0;var g=i.return;try{if(Y2(n,g,i,l,Xt)){Or=1,Wc(n,ta(l,n.current)),$t=null;return}}catch(m){if(g!==null)throw $t=g,m;Or=1,Wc(n,ta(l,n.current)),$t=null;return}i.flags&32768?(ar||u===1?n=!0:Hi||(Xt&536870912)!==0?n=!1:(vs=n=!0,(u===2||u===9||u===3||u===6)&&(u=sa.current,u!==null&&u.tag===13&&(u.flags|=16384))),Ox(i,n)):Qc(i)}function Qc(n){var i=n;do{if((i.flags&32768)!==0){Ox(i,vs);return}n=i.return;var l=X2(i.alternate,i,Ka);if(l!==null){$t=l;return}if(i=i.sibling,i!==null){$t=i;return}$t=i=n}while(i!==null);Or===0&&(Or=5)}function Ox(n,i){do{var l=Q2(n.alternate,n);if(l!==null){l.flags&=32767,$t=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){$t=n;return}$t=n=l}while(n!==null);Or=6,$t=null}function Ix(n,i,l,u,g,m,j,M,ee){n.cancelPendingCommit=null;do Jc();while(cn!==0);if((cr&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=Du,nr(n,l,m,j,M,ee),n===wr&&($t=wr=null,Xt=0),Gi=i,Ss=n,Vi=l,Lf=m,Pf=g,Tx=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,c_(bt,function(){return Px(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=re.T,re.T=null,g=be.p,be.p=2,j=cr,cr|=4;try{J2(n,i,l)}finally{cr=j,be.p=g,re.T=u}}cn=1,Mx(),Bx(),Fx()}}function Mx(){if(cn===1){cn=0;var n=Ss,i=Gi,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=re.T,re.T=null;var u=be.p;be.p=2;var g=cr;cr|=4;try{mx(i,n);var m=th,j=wp(n.containerInfo),M=m.focusedElem,ee=m.selectionRange;if(j!==M&&M&&M.ownerDocument&&Sp(M.ownerDocument.documentElement,M)){if(ee!==null&&ku(M)){var Se=ee.start,Le=ee.end;if(Le===void 0&&(Le=Se),"selectionStart"in M)M.selectionStart=Se,M.selectionEnd=Math.min(Le,M.value.length);else{var ze=M.ownerDocument||document,je=ze&&ze.defaultView||window;if(je.getSelection){var Ee=je.getSelection(),Ct=M.textContent.length,Tt=Math.min(ee.start,Ct),yr=ee.end===void 0?Tt:Math.min(ee.end,Ct);!Ee.extend&&Tt>yr&&(j=yr,yr=Tt,Tt=j);var ue=_p(M,Tt),ie=_p(M,yr);if(ue&&ie&&(Ee.rangeCount!==1||Ee.anchorNode!==ue.node||Ee.anchorOffset!==ue.offset||Ee.focusNode!==ie.node||Ee.focusOffset!==ie.offset)){var ye=ze.createRange();ye.setStart(ue.node,ue.offset),Ee.removeAllRanges(),Tt>yr?(Ee.addRange(ye),Ee.extend(ie.node,ie.offset)):(ye.setEnd(ie.node,ie.offset),Ee.addRange(ye))}}}}for(ze=[],Ee=M;Ee=Ee.parentNode;)Ee.nodeType===1&&ze.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ze.length;M++){var Pe=ze[M];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}dd=!!eh,th=eh=null}finally{cr=g,be.p=u,re.T=l}}n.current=i,cn=2}}function Bx(){if(cn===2){cn=0;var n=Ss,i=Gi,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=re.T,re.T=null;var u=be.p;be.p=2;var g=cr;cr|=4;try{hx(n,i.alternate,i)}finally{cr=g,be.p=u,re.T=l}}cn=3}}function Fx(){if(cn===4||cn===3){cn=0,rt();var n=Ss,i=Gi,l=Vi,u=Tx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,Gi=Ss=null,Lx(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(_s=null),_n(l),i=i.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(or,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=re.T,g=be.p,be.p=2,re.T=null;try{for(var m=n.onRecoverableError,j=0;j<u.length;j++){var M=u[j];m(M.value,{componentStack:M.stack})}}finally{re.T=i,be.p=g}}(Vi&3)!==0&&Jc(),Na(n),g=n.pendingLanes,(l&4194090)!==0&&(g&42)!==0?n===zf?pl++:(pl=0,zf=n):pl=0,gl(0)}}function Lx(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Yo(i)))}function Jc(n){return Mx(),Bx(),Fx(),Px()}function Px(){if(cn!==5)return!1;var n=Ss,i=Lf;Lf=0;var l=_n(Vi),u=re.T,g=be.p;try{be.p=32>l?32:l,re.T=null,l=Pf,Pf=null;var m=Ss,j=Vi;if(cn=0,Gi=Ss=null,Vi=0,(cr&6)!==0)throw Error(a(331));var M=cr;if(cr|=4,Sx(m.current),vx(m,m.current,j,l),cr=M,gl(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(or,m)}catch{}return!0}finally{be.p=g,re.T=u,Lx(n,i)}}function zx(n,i,l){i=ta(l,i),i=yf(n.stateNode,i,2),n=fs(n,i,2),n!==null&&(Nt(n,2),Na(n))}function _r(n,i,l){if(n.tag===3)zx(n,n,l);else for(;i!==null;){if(i.tag===3){zx(i,n,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(_s===null||!_s.has(u))){n=ta(l,n),l=Hg(2),u=fs(i,l,2),u!==null&&($g(l,u,i,n),Nt(u,2),Na(u));break}}i=i.return}}function Hf(n,i,l){var u=n.pingCache;if(u===null){u=n.pingCache=new t_;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(l)||(If=!0,g.add(l),n=i_.bind(null,n,i,l),i.then(n,n))}function i_(n,i,l){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,wr===n&&(Xt&l)===l&&(Or===4||Or===3&&(Xt&62914560)===Xt&&300>Be()-Ff?(cr&2)===0&&Yi(n,0):Mf|=l,$i===Xt&&($i=0)),Na(n)}function Ux(n,i){i===0&&(i=ke()),n=Ri(n,i),n!==null&&(Nt(n,i),Na(n))}function o_(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Ux(n,l)}function l_(n,i){var l=0;switch(n.tag){case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),Ux(n,l)}function c_(n,i){return Ge(n,i)}var Zc=null,Xi=null,$f=!1,ed=!1,Gf=!1,si=0;function Na(n){n!==Xi&&n.next===null&&(Xi===null?Zc=Xi=n:Xi=Xi.next=n),ed=!0,$f||($f=!0,u_())}function gl(n,i){if(!Gf&&ed){Gf=!0;do for(var l=!1,u=Zc;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var m=0;else{var j=u.suspendedLanes,M=u.pingedLanes;m=(1<<31-He(42|n)+1)-1,m&=g&~(j&~M),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,$x(u,m))}else m=Xt,m=Rr(u,u===wr?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Ht(u,m)||(l=!0,$x(u,m));u=u.next}while(l);Gf=!1}}function d_(){Wx()}function Wx(){ed=$f=!1;var n=0;si!==0&&(v_()&&(n=si),si=0);for(var i=Be(),l=null,u=Zc;u!==null;){var g=u.next,m=qx(u,i);m===0?(u.next=null,l===null?Zc=g:l.next=g,g===null&&(Xi=l)):(l=u,(n!==0||(m&3)!==0)&&(ed=!0)),u=g}gl(n)}function qx(n,i){for(var l=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var j=31-He(m),M=1<<j,ee=g[j];ee===-1?((M&l)===0||(M&u)!==0)&&(g[j]=ir(M,i)):ee<=i&&(n.expiredLanes|=M),m&=~M}if(i=wr,l=Xt,l=Rr(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,l===0||n===i&&(dr===2||dr===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&G(u),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Ht(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(u!==null&&G(u),_n(l)){case 2:case 8:l=vt;break;case 32:l=bt;break;case 268435456:l=nt;break;default:l=bt}return u=Hx.bind(null,n),l=Ge(l,u),n.callbackPriority=i,n.callbackNode=l,i}return u!==null&&u!==null&&G(u),n.callbackPriority=2,n.callbackNode=null,2}function Hx(n,i){if(cn!==0&&cn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Jc()&&n.callbackNode!==l)return null;var u=Xt;return u=Rr(n,n===wr?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Ex(n,u,i),qx(n,Be()),n.callbackNode!=null&&n.callbackNode===l?Hx.bind(null,n):null)}function $x(n,i){if(Jc())return null;Ex(n,i,!0)}function u_(){__(function(){(cr&6)!==0?Ge(at,d_):Wx()})}function Vf(){return si===0&&(si=se()),si}function Gx(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:uc(""+n)}function Vx(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function f_(n,i,l,u,g){if(i==="submit"&&l&&l.stateNode===g){var m=Gx((g[gr]||null).action),j=u.submitter;j&&(i=(i=j[gr]||null)?Gx(i.formAction):j.getAttribute("formAction"),i!==null&&(m=i,j=null));var M=new gc("action","action",null,u,g);n.push({event:M,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(si!==0){var ee=j?Vx(g,j):new FormData(g);hf(l,{pending:!0,data:ee,method:g.method,action:m},null,ee)}}else typeof m=="function"&&(M.preventDefault(),ee=j?Vx(g,j):new FormData(g),hf(l,{pending:!0,data:ee,method:g.method,action:m},m,ee))},currentTarget:g}]})}}for(var Yf=0;Yf<Nu.length;Yf++){var Kf=Nu[Yf],h_=Kf.toLowerCase(),p_=Kf[0].toUpperCase()+Kf.slice(1);pa(h_,"on"+p_)}pa(Ep,"onAnimationEnd"),pa(kp,"onAnimationIteration"),pa(Cp,"onAnimationStart"),pa("dblclick","onDoubleClick"),pa("focusin","onFocus"),pa("focusout","onBlur"),pa(N2,"onTransitionRun"),pa(D2,"onTransitionStart"),pa(O2,"onTransitionCancel"),pa(Ap,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Ue("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ue("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ue("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ue("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ue("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ue("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function Yx(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var u=n[l],g=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var j=u.length-1;0<=j;j--){var M=u[j],ee=M.instance,Se=M.currentTarget;if(M=M.listener,ee!==m&&g.isPropagationStopped())break e;m=M,g.currentTarget=Se;try{m(g)}catch(Le){Uc(Le)}g.currentTarget=null,m=ee}else for(j=0;j<u.length;j++){if(M=u[j],ee=M.instance,Se=M.currentTarget,M=M.listener,ee!==m&&g.isPropagationStopped())break e;m=M,g.currentTarget=Se;try{m(g)}catch(Le){Uc(Le)}g.currentTarget=null,m=ee}}}}function Gt(n,i){var l=i[ha];l===void 0&&(l=i[ha]=new Set);var u=n+"__bubble";l.has(u)||(Kx(i,n,2,!1),l.add(u))}function Xf(n,i,l){var u=0;i&&(u|=4),Kx(l,n,u,i)}var td="_reactListening"+Math.random().toString(36).slice(2);function Qf(n){if(!n[td]){n[td]=!0,we.forEach(function(l){l!=="selectionchange"&&(g_.has(l)||Xf(l,!1,n),Xf(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[td]||(i[td]=!0,Xf("selectionchange",!1,i))}}function Kx(n,i,l,u){switch(vm(i)){case 2:var g=W_;break;case 8:g=q_;break;default:g=uh}l=g.bind(null,i,l,n),g=void 0,!yu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(i,l,{capture:!0,passive:g}):n.addEventListener(i,l,!0):g!==void 0?n.addEventListener(i,l,{passive:g}):n.addEventListener(i,l,!1)}function Jf(n,i,l,u,g){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var j=u.tag;if(j===3||j===4){var M=u.stateNode.containerInfo;if(M===g)break;if(j===4)for(j=u.return;j!==null;){var ee=j.tag;if((ee===3||ee===4)&&j.stateNode.containerInfo===g)return;j=j.return}for(;M!==null;){if(j=V(M),j===null)return;if(ee=j.tag,ee===5||ee===6||ee===26||ee===27){u=m=j;continue e}M=M.parentNode}}u=u.return}rp(function(){var Se=m,Le=xu(l),ze=[];e:{var je=Rp.get(n);if(je!==void 0){var Ee=gc,Ct=n;switch(n){case"keypress":if(hc(l)===0)break e;case"keydown":case"keyup":Ee=c2;break;case"focusin":Ct="focus",Ee=Su;break;case"focusout":Ct="blur",Ee=Su;break;case"beforeblur":case"afterblur":Ee=Su;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=sp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=Qb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=f2;break;case Ep:case kp:case Cp:Ee=e2;break;case Ap:Ee=p2;break;case"scroll":case"scrollend":Ee=Kb;break;case"wheel":Ee=x2;break;case"copy":case"cut":case"paste":Ee=r2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=op;break;case"toggle":case"beforetoggle":Ee=y2}var Tt=(i&4)!==0,yr=!Tt&&(n==="scroll"||n==="scrollend"),ue=Tt?je!==null?je+"Capture":null:je;Tt=[];for(var ie=Se,ye;ie!==null;){var Pe=ie;if(ye=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||ye===null||ue===null||(Pe=Mo(ie,ue),Pe!=null&&Tt.push(ml(ie,Pe,ye))),yr)break;ie=ie.return}0<Tt.length&&(je=new Ee(je,Ct,null,l,Le),ze.push({event:je,listeners:Tt}))}}if((i&7)===0){e:{if(je=n==="mouseover"||n==="pointerover",Ee=n==="mouseout"||n==="pointerout",je&&l!==gu&&(Ct=l.relatedTarget||l.fromElement)&&(V(Ct)||Ct[Un]))break e;if((Ee||je)&&(je=Le.window===Le?Le:(je=Le.ownerDocument)?je.defaultView||je.parentWindow:window,Ee?(Ct=l.relatedTarget||l.toElement,Ee=Se,Ct=Ct?V(Ct):null,Ct!==null&&(yr=c(Ct),Tt=Ct.tag,Ct!==yr||Tt!==5&&Tt!==27&&Tt!==6)&&(Ct=null)):(Ee=null,Ct=Se),Ee!==Ct)){if(Tt=sp,Pe="onMouseLeave",ue="onMouseEnter",ie="mouse",(n==="pointerout"||n==="pointerover")&&(Tt=op,Pe="onPointerLeave",ue="onPointerEnter",ie="pointer"),yr=Ee==null?je:_e(Ee),ye=Ct==null?je:_e(Ct),je=new Tt(Pe,ie+"leave",Ee,l,Le),je.target=yr,je.relatedTarget=ye,Pe=null,V(Le)===Se&&(Tt=new Tt(ue,ie+"enter",Ct,l,Le),Tt.target=ye,Tt.relatedTarget=yr,Pe=Tt),yr=Pe,Ee&&Ct)t:{for(Tt=Ee,ue=Ct,ie=0,ye=Tt;ye;ye=Qi(ye))ie++;for(ye=0,Pe=ue;Pe;Pe=Qi(Pe))ye++;for(;0<ie-ye;)Tt=Qi(Tt),ie--;for(;0<ye-ie;)ue=Qi(ue),ye--;for(;ie--;){if(Tt===ue||ue!==null&&Tt===ue.alternate)break t;Tt=Qi(Tt),ue=Qi(ue)}Tt=null}else Tt=null;Ee!==null&&Xx(ze,je,Ee,Tt,!1),Ct!==null&&yr!==null&&Xx(ze,yr,Ct,Tt,!0)}}e:{if(je=Se?_e(Se):window,Ee=je.nodeName&&je.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&je.type==="file")var ft=gp;else if(hp(je))if(xp)ft=C2;else{ft=E2;var qt=j2}else Ee=je.nodeName,!Ee||Ee.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?Se&&Lr(Se.elementType)&&(ft=gp):ft=k2;if(ft&&(ft=ft(n,Se))){pp(ze,ft,l,Le);break e}qt&&qt(n,je,Se),n==="focusout"&&Se&&je.type==="number"&&Se.memoizedProps.value!=null&&Qe(je,"number",je.value)}switch(qt=Se?_e(Se):window,n){case"focusin":(hp(qt)||qt.contentEditable==="true")&&(ki=qt,Cu=Se,qo=null);break;case"focusout":qo=Cu=ki=null;break;case"mousedown":Au=!0;break;case"contextmenu":case"mouseup":case"dragend":Au=!1,Tp(ze,l,Le);break;case"selectionchange":if(R2)break;case"keydown":case"keyup":Tp(ze,l,Le)}var yt;if(Tu)e:{switch(n){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else Ei?up(n,l)&&(kt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(kt="onCompositionStart");kt&&(lp&&l.locale!=="ko"&&(Ei||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&Ei&&(yt=np()):(ls=Le,vu="value"in ls?ls.value:ls.textContent,Ei=!0)),qt=rd(Se,kt),0<qt.length&&(kt=new ip(kt,n,null,l,Le),ze.push({event:kt,listeners:qt}),yt?kt.data=yt:(yt=fp(l),yt!==null&&(kt.data=yt)))),(yt=b2?_2(n,l):S2(n,l))&&(kt=rd(Se,"onBeforeInput"),0<kt.length&&(qt=new ip("onBeforeInput","beforeinput",null,l,Le),ze.push({event:qt,listeners:kt}),qt.data=yt)),f_(ze,n,Se,l,Le)}Yx(ze,i)})}function ml(n,i,l){return{instance:n,listener:i,currentTarget:l}}function rd(n,i){for(var l=i+"Capture",u=[];n!==null;){var g=n,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=Mo(n,l),g!=null&&u.unshift(ml(n,g,m)),g=Mo(n,i),g!=null&&u.push(ml(n,g,m))),n.tag===3)return u;n=n.return}return[]}function Qi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Xx(n,i,l,u,g){for(var m=i._reactName,j=[];l!==null&&l!==u;){var M=l,ee=M.alternate,Se=M.stateNode;if(M=M.tag,ee!==null&&ee===u)break;M!==5&&M!==26&&M!==27||Se===null||(ee=Se,g?(Se=Mo(l,m),Se!=null&&j.unshift(ml(l,Se,ee))):g||(Se=Mo(l,m),Se!=null&&j.push(ml(l,Se,ee)))),l=l.return}j.length!==0&&n.push({event:i,listeners:j})}var x_=/\r\n?/g,m_=/\u0000|\uFFFD/g;function Qx(n){return(typeof n=="string"?n:""+n).replace(x_,`
`).replace(m_,"")}function Jx(n,i){return i=Qx(i),Qx(n)===i}function nd(){}function mr(n,i,l,u,g,m){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||ut(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&ut(n,""+u);break;case"className":Qt(n,"class",u);break;case"tabIndex":Qt(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Qt(n,l,u);break;case"style":Wt(n,u,m);break;case"data":if(i!=="object"){Qt(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=uc(""+u),n.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(i!=="input"&&mr(n,i,"name",g.name,g,null),mr(n,i,"formEncType",g.formEncType,g,null),mr(n,i,"formMethod",g.formMethod,g,null),mr(n,i,"formTarget",g.formTarget,g,null)):(mr(n,i,"encType",g.encType,g,null),mr(n,i,"method",g.method,g,null),mr(n,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=uc(""+u),n.setAttribute(l,u);break;case"onClick":u!=null&&(n.onclick=nd);break;case"onScroll":u!=null&&Gt("scroll",n);break;case"onScrollEnd":u!=null&&Gt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}l=uc(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""+u):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":u===!0?n.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,u):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(l,u):n.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(l):n.setAttribute(l,u);break;case"popover":Gt("beforetoggle",n),Gt("toggle",n),Kt(n,"popover",u);break;case"xlinkActuate":Jt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Jt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Jt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Jt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Jt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Jt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Kt(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=On.get(l)||l,Kt(n,l,u))}}function Zf(n,i,l,u,g,m){switch(l){case"style":Wt(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof u=="string"?ut(n,u):(typeof u=="number"||typeof u=="bigint")&&ut(n,""+u);break;case"onScroll":u!=null&&Gt("scroll",n);break;case"onScrollEnd":u!=null&&Gt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=nd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Te.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),i=l.slice(2,g?l.length-7:void 0),m=n[gr]||null,m=m!=null?m[l]:null,typeof m=="function"&&n.removeEventListener(i,m,g),typeof u=="function")){typeof m!="function"&&m!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,u,g);break e}l in n?n[l]=u:u===!0?n.setAttribute(l,""):Kt(n,l,u)}}}function dn(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",n),Gt("load",n);var u=!1,g=!1,m;for(m in l)if(l.hasOwnProperty(m)){var j=l[m];if(j!=null)switch(m){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:mr(n,i,m,j,l,null)}}g&&mr(n,i,"srcSet",l.srcSet,l,null),u&&mr(n,i,"src",l.src,l,null);return;case"input":Gt("invalid",n);var M=m=j=g=null,ee=null,Se=null;for(u in l)if(l.hasOwnProperty(u)){var Le=l[u];if(Le!=null)switch(u){case"name":g=Le;break;case"type":j=Le;break;case"checked":ee=Le;break;case"defaultChecked":Se=Le;break;case"value":m=Le;break;case"defaultValue":M=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(a(137,i));break;default:mr(n,i,u,Le,l,null)}}Ke(n,m,M,ee,Se,j,g,!1),Pt(n);return;case"select":Gt("invalid",n),u=j=m=null;for(g in l)if(l.hasOwnProperty(g)&&(M=l[g],M!=null))switch(g){case"value":m=M;break;case"defaultValue":j=M;break;case"multiple":u=M;default:mr(n,i,g,M,l,null)}i=m,l=j,n.multiple=!!u,i!=null?Ve(n,!!u,i,!1):l!=null&&Ve(n,!!u,l,!0);return;case"textarea":Gt("invalid",n),m=g=u=null;for(j in l)if(l.hasOwnProperty(j)&&(M=l[j],M!=null))switch(j){case"value":u=M;break;case"defaultValue":g=M;break;case"children":m=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(a(91));break;default:mr(n,i,j,M,l,null)}lt(n,u,g,m),Pt(n);return;case"option":for(ee in l)if(l.hasOwnProperty(ee)&&(u=l[ee],u!=null))switch(ee){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:mr(n,i,ee,u,l,null)}return;case"dialog":Gt("beforetoggle",n),Gt("toggle",n),Gt("cancel",n),Gt("close",n);break;case"iframe":case"object":Gt("load",n);break;case"video":case"audio":for(u=0;u<xl.length;u++)Gt(xl[u],n);break;case"image":Gt("error",n),Gt("load",n);break;case"details":Gt("toggle",n);break;case"embed":case"source":case"link":Gt("error",n),Gt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Se in l)if(l.hasOwnProperty(Se)&&(u=l[Se],u!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:mr(n,i,Se,u,l,null)}return;default:if(Lr(i)){for(Le in l)l.hasOwnProperty(Le)&&(u=l[Le],u!==void 0&&Zf(n,i,Le,u,l,void 0));return}}for(M in l)l.hasOwnProperty(M)&&(u=l[M],u!=null&&mr(n,i,M,u,l,null))}function y_(n,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,j=null,M=null,ee=null,Se=null,Le=null;for(Ee in l){var ze=l[Ee];if(l.hasOwnProperty(Ee)&&ze!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":ee=ze;default:u.hasOwnProperty(Ee)||mr(n,i,Ee,null,u,ze)}}for(var je in u){var Ee=u[je];if(ze=l[je],u.hasOwnProperty(je)&&(Ee!=null||ze!=null))switch(je){case"type":m=Ee;break;case"name":g=Ee;break;case"checked":Se=Ee;break;case"defaultChecked":Le=Ee;break;case"value":j=Ee;break;case"defaultValue":M=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(a(137,i));break;default:Ee!==ze&&mr(n,i,je,Ee,u,ze)}}he(n,j,M,ee,Se,Le,m,g);return;case"select":Ee=j=M=je=null;for(m in l)if(ee=l[m],l.hasOwnProperty(m)&&ee!=null)switch(m){case"value":break;case"multiple":Ee=ee;default:u.hasOwnProperty(m)||mr(n,i,m,null,u,ee)}for(g in u)if(m=u[g],ee=l[g],u.hasOwnProperty(g)&&(m!=null||ee!=null))switch(g){case"value":je=m;break;case"defaultValue":M=m;break;case"multiple":j=m;default:m!==ee&&mr(n,i,g,m,u,ee)}i=M,l=j,u=Ee,je!=null?Ve(n,!!l,je,!1):!!u!=!!l&&(i!=null?Ve(n,!!l,i,!0):Ve(n,!!l,l?[]:"",!1));return;case"textarea":Ee=je=null;for(M in l)if(g=l[M],l.hasOwnProperty(M)&&g!=null&&!u.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:mr(n,i,M,null,u,g)}for(j in u)if(g=u[j],m=l[j],u.hasOwnProperty(j)&&(g!=null||m!=null))switch(j){case"value":je=g;break;case"defaultValue":Ee=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(a(91));break;default:g!==m&&mr(n,i,j,g,u,m)}Xe(n,je,Ee);return;case"option":for(var Ct in l)if(je=l[Ct],l.hasOwnProperty(Ct)&&je!=null&&!u.hasOwnProperty(Ct))switch(Ct){case"selected":n.selected=!1;break;default:mr(n,i,Ct,null,u,je)}for(ee in u)if(je=u[ee],Ee=l[ee],u.hasOwnProperty(ee)&&je!==Ee&&(je!=null||Ee!=null))switch(ee){case"selected":n.selected=je&&typeof je!="function"&&typeof je!="symbol";break;default:mr(n,i,ee,je,u,Ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in l)je=l[Tt],l.hasOwnProperty(Tt)&&je!=null&&!u.hasOwnProperty(Tt)&&mr(n,i,Tt,null,u,je);for(Se in u)if(je=u[Se],Ee=l[Se],u.hasOwnProperty(Se)&&je!==Ee&&(je!=null||Ee!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(a(137,i));break;default:mr(n,i,Se,je,u,Ee)}return;default:if(Lr(i)){for(var yr in l)je=l[yr],l.hasOwnProperty(yr)&&je!==void 0&&!u.hasOwnProperty(yr)&&Zf(n,i,yr,void 0,u,je);for(Le in u)je=u[Le],Ee=l[Le],!u.hasOwnProperty(Le)||je===Ee||je===void 0&&Ee===void 0||Zf(n,i,Le,je,u,Ee);return}}for(var ue in l)je=l[ue],l.hasOwnProperty(ue)&&je!=null&&!u.hasOwnProperty(ue)&&mr(n,i,ue,null,u,je);for(ze in u)je=u[ze],Ee=l[ze],!u.hasOwnProperty(ze)||je===Ee||je==null&&Ee==null||mr(n,i,ze,je,u,Ee)}var eh=null,th=null;function ad(n){return n.nodeType===9?n:n.ownerDocument}function Zx(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function em(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function rh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var nh=null;function v_(){var n=window.event;return n&&n.type==="popstate"?n===nh?!1:(nh=n,!0):(nh=null,!1)}var tm=typeof setTimeout=="function"?setTimeout:void 0,b_=typeof clearTimeout=="function"?clearTimeout:void 0,rm=typeof Promise=="function"?Promise:void 0,__=typeof queueMicrotask=="function"?queueMicrotask:typeof rm<"u"?function(n){return rm.resolve(null).then(n).catch(S_)}:tm;function S_(n){setTimeout(function(){throw n})}function Ts(n){return n==="head"}function nm(n,i){var l=i,u=0,g=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(0<u&&8>u){l=u;var j=n.ownerDocument;if(l&1&&yl(j.documentElement),l&2&&yl(j.body),l&4)for(l=j.head,yl(l),j=l.firstChild;j;){var M=j.nextSibling,ee=j.nodeName;j[B]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&j.rel.toLowerCase()==="stylesheet"||l.removeChild(j),j=M}}if(g===0){n.removeChild(m),El(i);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:u=l.charCodeAt(0)-48;else u=0;l=m}while(l);El(i)}function ah(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ah(l),L(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function w_(n,i,l,u){for(;n.nodeType===1;){var g=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[B])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=xa(n.nextSibling),n===null)break}return null}function T_(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=xa(n.nextSibling),n===null))return null;return n}function sh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function j_(n,i){var l=n.ownerDocument;if(n.data!=="$?"||l.readyState==="complete")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function xa(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var ih=null;function am(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}function sm(n,i,l){switch(i=ad(l),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function yl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);L(n)}var oa=new Map,im=new Set;function sd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Xa=be.d;be.d={f:E_,r:k_,D:C_,C:A_,L:R_,m:N_,X:O_,S:D_,M:I_};function E_(){var n=Xa.f(),i=Xc();return n||i}function k_(n){var i=K(n);i!==null&&i.tag===5&&i.type==="form"?Eg(i):Xa.r(n)}var Ji=typeof document>"u"?null:document;function om(n,i,l){var u=Ji;if(u&&typeof i=="string"&&i){var g=A(i);g='link[rel="'+n+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),im.has(g)||(im.add(g),n={rel:n,crossOrigin:l,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),dn(i,"link",n),fe(i),u.head.appendChild(i)))}}function C_(n){Xa.D(n),om("dns-prefetch",n,null)}function A_(n,i){Xa.C(n,i),om("preconnect",n,i)}function R_(n,i,l){Xa.L(n,i,l);var u=Ji;if(u&&n&&i){var g='link[rel="preload"][as="'+A(i)+'"]';i==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+A(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+A(l.imageSizes)+'"]')):g+='[href="'+A(n)+'"]';var m=g;switch(i){case"style":m=Zi(n);break;case"script":m=eo(n)}oa.has(m)||(n=x({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),oa.set(m,n),u.querySelector(g)!==null||i==="style"&&u.querySelector(vl(m))||i==="script"&&u.querySelector(bl(m))||(i=u.createElement("link"),dn(i,"link",n),fe(i),u.head.appendChild(i)))}}function N_(n,i){Xa.m(n,i);var l=Ji;if(l&&n){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+A(u)+'"][href="'+A(n)+'"]',m=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=eo(n)}if(!oa.has(m)&&(n=x({rel:"modulepreload",href:n},i),oa.set(m,n),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(bl(m)))return}u=l.createElement("link"),dn(u,"link",n),fe(u),l.head.appendChild(u)}}}function D_(n,i,l){Xa.S(n,i,l);var u=Ji;if(u&&n){var g=De(u).hoistableStyles,m=Zi(n);i=i||"default";var j=g.get(m);if(!j){var M={loading:0,preload:null};if(j=u.querySelector(vl(m)))M.loading=5;else{n=x({rel:"stylesheet",href:n,"data-precedence":i},l),(l=oa.get(m))&&oh(n,l);var ee=j=u.createElement("link");fe(ee),dn(ee,"link",n),ee._p=new Promise(function(Se,Le){ee.onload=Se,ee.onerror=Le}),ee.addEventListener("load",function(){M.loading|=1}),ee.addEventListener("error",function(){M.loading|=2}),M.loading|=4,id(j,i,u)}j={type:"stylesheet",instance:j,count:1,state:M},g.set(m,j)}}}function O_(n,i){Xa.X(n,i);var l=Ji;if(l&&n){var u=De(l).hoistableScripts,g=eo(n),m=u.get(g);m||(m=l.querySelector(bl(g)),m||(n=x({src:n,async:!0},i),(i=oa.get(g))&&lh(n,i),m=l.createElement("script"),fe(m),dn(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function I_(n,i){Xa.M(n,i);var l=Ji;if(l&&n){var u=De(l).hoistableScripts,g=eo(n),m=u.get(g);m||(m=l.querySelector(bl(g)),m||(n=x({src:n,async:!0,type:"module"},i),(i=oa.get(g))&&lh(n,i),m=l.createElement("script"),fe(m),dn(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function lm(n,i,l,u){var g=(g=ge.current)?sd(g):null;if(!g)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Zi(l.href),l=De(g).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Zi(l.href);var m=De(g).hoistableStyles,j=m.get(n);if(j||(g=g.ownerDocument||g,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,j),(m=g.querySelector(vl(n)))&&!m._p&&(j.instance=m,j.state.loading=5),oa.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},oa.set(n,l),m||M_(g,n,l,j.state))),i&&u===null)throw Error(a(528,""));return j}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=eo(l),l=De(g).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Zi(n){return'href="'+A(n)+'"'}function vl(n){return'link[rel="stylesheet"]['+n+"]"}function cm(n){return x({},n,{"data-precedence":n.precedence,precedence:null})}function M_(n,i,l,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),dn(i,"link",l),fe(i),n.head.appendChild(i))}function eo(n){return'[src="'+A(n)+'"]'}function bl(n){return"script[async]"+n}function dm(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+A(l.href)+'"]');if(u)return i.instance=u,fe(u),u;var g=x({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),fe(u),dn(u,"style",g),id(u,l.precedence,n),i.instance=u;case"stylesheet":g=Zi(l.href);var m=n.querySelector(vl(g));if(m)return i.state.loading|=4,i.instance=m,fe(m),m;u=cm(l),(g=oa.get(g))&&oh(u,g),m=(n.ownerDocument||n).createElement("link"),fe(m);var j=m;return j._p=new Promise(function(M,ee){j.onload=M,j.onerror=ee}),dn(m,"link",u),i.state.loading|=4,id(m,l.precedence,n),i.instance=m;case"script":return m=eo(l.src),(g=n.querySelector(bl(m)))?(i.instance=g,fe(g),g):(u=l,(g=oa.get(m))&&(u=x({},l),lh(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),fe(g),dn(g,"link",u),n.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,id(u,l.precedence,n));return i.instance}function id(n,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,m=g,j=0;j<u.length;j++){var M=u[j];if(M.dataset.precedence===i)m=M;else if(m!==g)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function oh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function lh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var od=null;function um(n,i,l){if(od===null){var u=new Map,g=od=new Map;g.set(l,u)}else g=od,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(n))return u;for(u.set(n,null),l=l.getElementsByTagName(n),g=0;g<l.length;g++){var m=l[g];if(!(m[B]||m[Rt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var j=m.getAttribute(i)||"";j=n+j;var M=u.get(j);M?M.push(m):u.set(j,[m])}}return u}function fm(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function B_(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function hm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var _l=null;function F_(){}function L_(n,i,l){if(_l===null)throw Error(a(475));var u=_l;if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=Zi(l.href),m=n.querySelector(vl(g));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=ld.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=m,fe(m);return}m=n.ownerDocument||n,l=cm(l),(g=oa.get(g))&&oh(l,g),m=m.createElement("link"),fe(m);var j=m;j._p=new Promise(function(M,ee){j.onload=M,j.onerror=ee}),dn(m,"link",l),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=ld.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function P_(){if(_l===null)throw Error(a(475));var n=_l;return n.stylesheets&&n.count===0&&ch(n,n.stylesheets),0<n.count?function(i){var l=setTimeout(function(){if(n.stylesheets&&ch(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(l)}}:null}function ld(){if(this.count--,this.count===0){if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var cd=null;function ch(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,cd=new Map,i.forEach(z_,n),cd=null,ld.call(n))}function z_(n,i){if(!(i.state.loading&4)){var l=cd.get(n);if(l)var u=l.get(null);else{l=new Map,cd.set(n,l);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var j=g[m];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(l.set(j.dataset.precedence,j),u=j)}u&&l.set(null,u)}g=i.instance,j=g.getAttribute("data-precedence"),m=l.get(j)||u,m===u&&l.set(null,g),l.set(j,g),this.count++,u=ld.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),m?m.parentNode.insertBefore(g,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),i.state.loading|=4}}var Sl={$$typeof:O,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function U_(n,i,l,u,g,m,j,M){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.hiddenUpdates=xt(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function pm(n,i,l,u,g,m,j,M,ee,Se,Le,ze){return n=new U_(n,i,l,j,M,ee,Se,ze),i=1,m===!0&&(i|=24),m=Hn(3,null,null,i),n.current=m,m.stateNode=n,i=qu(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:l,cache:i},Vu(m),n}function gm(n){return n?(n=Ni,n):Ni}function xm(n,i,l,u,g,m){g=gm(g),u.context===null?u.context=g:u.pendingContext=g,u=us(i),u.payload={element:l},m=m===void 0?null:m,m!==null&&(u.callback=m),l=fs(n,u,i),l!==null&&(Kn(l,n,i),Jo(l,n,i))}function mm(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function dh(n,i){mm(n,i),(n=n.alternate)&&mm(n,i)}function ym(n){if(n.tag===13){var i=Ri(n,67108864);i!==null&&Kn(i,n,67108864),dh(n,67108864)}}var dd=!0;function W_(n,i,l,u){var g=re.T;re.T=null;var m=be.p;try{be.p=2,uh(n,i,l,u)}finally{be.p=m,re.T=g}}function q_(n,i,l,u){var g=re.T;re.T=null;var m=be.p;try{be.p=8,uh(n,i,l,u)}finally{be.p=m,re.T=g}}function uh(n,i,l,u){if(dd){var g=fh(u);if(g===null)Jf(n,i,u,ud,l),bm(n,u);else if($_(g,n,i,l,u))u.stopPropagation();else if(bm(n,u),i&4&&-1<H_.indexOf(n)){for(;g!==null;){var m=K(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var j=rr(m.pendingLanes);if(j!==0){var M=m;for(M.pendingLanes|=2,M.entangledLanes|=2;j;){var ee=1<<31-He(j);M.entanglements[1]|=ee,j&=~ee}Na(m),(cr&6)===0&&(Yc=Be()+500,gl(0))}}break;case 13:M=Ri(m,2),M!==null&&Kn(M,m,2),Xc(),dh(m,2)}if(m=fh(u),m===null&&Jf(n,i,u,ud,l),m===g)break;g=m}g!==null&&u.stopPropagation()}else Jf(n,i,u,null,l)}}function fh(n){return n=xu(n),hh(n)}var ud=null;function hh(n){if(ud=null,n=V(n),n!==null){var i=c(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=d(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return ud=n,null}function vm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case at:return 2;case vt:return 8;case bt:case Ie:return 32;case nt:return 268435456;default:return 32}default:return 32}}var ph=!1,js=null,Es=null,ks=null,wl=new Map,Tl=new Map,Cs=[],H_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bm(n,i){switch(n){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(i.pointerId)}}function jl(n,i,l,u,g,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:m,targetContainers:[g]},i!==null&&(i=K(i),i!==null&&ym(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function $_(n,i,l,u,g){switch(i){case"focusin":return js=jl(js,n,i,l,u,g),!0;case"dragenter":return Es=jl(Es,n,i,l,u,g),!0;case"mouseover":return ks=jl(ks,n,i,l,u,g),!0;case"pointerover":var m=g.pointerId;return wl.set(m,jl(wl.get(m)||null,n,i,l,u,g)),!0;case"gotpointercapture":return m=g.pointerId,Tl.set(m,jl(Tl.get(m)||null,n,i,l,u,g)),!0}return!1}function _m(n){var i=V(n.target);if(i!==null){var l=c(i);if(l!==null){if(i=l.tag,i===13){if(i=d(l),i!==null){n.blockedOn=i,Sn(n.priority,function(){if(l.tag===13){var u=Yn();u=Dt(u);var g=Ri(l,u);g!==null&&Kn(g,l,u),dh(l,u)}});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fd(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=fh(n.nativeEvent);if(l===null){l=n.nativeEvent;var u=new l.constructor(l.type,l);gu=u,l.target.dispatchEvent(u),gu=null}else return i=K(l),i!==null&&ym(i),n.blockedOn=l,!1;i.shift()}return!0}function Sm(n,i,l){fd(n)&&l.delete(i)}function G_(){ph=!1,js!==null&&fd(js)&&(js=null),Es!==null&&fd(Es)&&(Es=null),ks!==null&&fd(ks)&&(ks=null),wl.forEach(Sm),Tl.forEach(Sm)}function hd(n,i){n.blockedOn===i&&(n.blockedOn=null,ph||(ph=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,G_)))}var pd=null;function wm(n){pd!==n&&(pd=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){pd===n&&(pd=null);for(var i=0;i<n.length;i+=3){var l=n[i],u=n[i+1],g=n[i+2];if(typeof u!="function"){if(hh(u||l)===null)continue;break}var m=K(l);m!==null&&(n.splice(i,3),i-=3,hf(m,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function El(n){function i(ee){return hd(ee,n)}js!==null&&hd(js,n),Es!==null&&hd(Es,n),ks!==null&&hd(ks,n),wl.forEach(i),Tl.forEach(i);for(var l=0;l<Cs.length;l++){var u=Cs[l];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Cs.length&&(l=Cs[0],l.blockedOn===null);)_m(l),l.blockedOn===null&&Cs.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],m=l[u+1],j=g[gr]||null;if(typeof m=="function")j||wm(l);else if(j){var M=null;if(m&&m.hasAttribute("formAction")){if(g=m,j=m[gr]||null)M=j.formAction;else if(hh(g)!==null)continue}else M=j.action;typeof M=="function"?l[u+1]=M:(l.splice(u,3),u-=3),wm(l)}}}function gh(n){this._internalRoot=n}gd.prototype.render=gh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var l=i.current,u=Yn();xm(l,u,n,i,null,null)},gd.prototype.unmount=gh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;xm(n.current,2,null,n,null,null),Xc(),i[Un]=null}};function gd(n){this._internalRoot=n}gd.prototype.unstable_scheduleHydration=function(n){if(n){var i=jr();n={blockedOn:null,target:n,priority:i};for(var l=0;l<Cs.length&&i!==0&&i<Cs[l].priority;l++);Cs.splice(l,0,n),l===0&&_m(n)}};var Tm=t.version;if(Tm!=="19.1.1")throw Error(a(527,Tm,"19.1.1"));be.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=h(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var V_={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{or=xd.inject(V_),Lt=xd}catch{}}return Cl.createRoot=function(n,i){if(!o(n))throw Error(a(299));var l=!1,u="",g=zg,m=Ug,j=Wg,M=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(j=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(M=i.unstable_transitionCallbacks)),i=pm(n,1,!1,null,null,l,u,g,m,j,M,null),n[Un]=i.current,Qf(n),new gh(i)},Cl.hydrateRoot=function(n,i,l){if(!o(n))throw Error(a(299));var u=!1,g="",m=zg,j=Ug,M=Wg,ee=null,Se=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(j=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(ee=l.unstable_transitionCallbacks),l.formState!==void 0&&(Se=l.formState)),i=pm(n,1,!0,i,l??null,u,g,m,j,M,ee,Se),i.context=gm(null),l=i.current,u=Yn(),u=Dt(u),g=us(u),g.callback=null,fs(l,g,u),l=u,i.current.lanes=l,Nt(i,l),Na(i),n[Un]=i.current,Qf(n),new gd(i)},Cl.version="19.1.1",Cl}var Im;function aS(){if(Im)return yh.exports;Im=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yh.exports=nS(),yh.exports}var sS=aS();const iS=h0(sS);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mm="popstate";function oS(e={}){function t(a,o){let{pathname:c,search:d,hash:f}=a.location;return qh("",{pathname:c,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(a,o){return typeof o=="string"?o:$l(o)}return cS(t,r,null,e)}function Ar(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ua(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lS(){return Math.random().toString(36).substring(2,10)}function Bm(e,t){return{usr:e.state,key:e.key,idx:t}}function qh(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Eo(t):t,state:r,key:t&&t.key||a||lS()}}function $l({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Eo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function cS(e,t,r,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,f="POP",h=null,p=x();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function x(){return(d.state||{idx:null}).idx}function y(){f="POP";let S=x(),N=S==null?null:S-p;p=S,h&&h({action:f,location:_.location,delta:N})}function v(S,N){f="PUSH";let R=qh(_.location,S,N);p=x()+1;let O=Bm(R,p),P=_.createHref(R);try{d.pushState(O,"",P)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;o.location.assign(P)}c&&h&&h({action:f,location:_.location,delta:1})}function b(S,N){f="REPLACE";let R=qh(_.location,S,N);p=x();let O=Bm(R,p),P=_.createHref(R);d.replaceState(O,"",P),c&&h&&h({action:f,location:_.location,delta:0})}function w(S){return dS(S)}let _={get action(){return f},get location(){return e(o,d)},listen(S){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(Mm,y),h=S,()=>{o.removeEventListener(Mm,y),h=null}},createHref(S){return t(o,S)},createURL:w,encodeLocation(S){let N=w(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:b,go(S){return d.go(S)}};return _}function dS(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ar(r,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:$l(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function gy(e,t,r="/"){return uS(e,t,r,!1)}function uS(e,t,r,a){let o=typeof t=="string"?Eo(t):t,c=as(o.pathname||"/",r);if(c==null)return null;let d=xy(e);fS(d);let f=null;for(let h=0;f==null&&h<d.length;++h){let p=wS(c);f=_S(d[h],p,a)}return f}function xy(e,t=[],r=[],a="",o=!1){let c=(d,f,h=o,p)=>{let x={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(a)&&h)return;Ar(x.relativePath.startsWith(a),`Absolute route path "${x.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(a.length)}let y=es([a,x.relativePath]),v=r.concat(x);d.children&&d.children.length>0&&(Ar(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),xy(d.children,t,v,y,h)),!(d.path==null&&!d.index)&&t.push({path:y,score:vS(y,d.index),routesMeta:v})};return e.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))c(d,f);else for(let h of my(d.path))c(d,f,!0,h)}),t}function my(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,o=r.endsWith("?"),c=r.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=my(a.join("/")),f=[];return f.push(...d.map(h=>h===""?c:[c,h].join("/"))),o&&f.push(...d),f.map(h=>e.startsWith("/")&&h===""?"/":h)}function fS(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:bS(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var hS=/^:[\w-]+$/,pS=3,gS=2,xS=1,mS=10,yS=-2,Fm=e=>e==="*";function vS(e,t){let r=e.split("/"),a=r.length;return r.some(Fm)&&(a+=yS),t&&(a+=gS),r.filter(o=>!Fm(o)).reduce((o,c)=>o+(hS.test(c)?pS:c===""?xS:mS),a)}function bS(e,t){return e.length===t.length&&e.slice(0,-1).every((a,o)=>a===t[o])?e[e.length-1]-t[t.length-1]:0}function _S(e,t,r=!1){let{routesMeta:a}=e,o={},c="/",d=[];for(let f=0;f<a.length;++f){let h=a[f],p=f===a.length-1,x=c==="/"?t:t.slice(c.length)||"/",y=Md({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},x),v=h.route;if(!y&&p&&r&&!a[a.length-1].route.index&&(y=Md({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},x)),!y)return null;Object.assign(o,y.params),d.push({params:o,pathname:es([c,y.pathname]),pathnameBase:kS(es([c,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(c=es([c,y.pathnameBase]))}return d}function Md(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=SS(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:a.reduce((p,{paramName:x,isOptional:y},v)=>{if(x==="*"){let w=f[v]||"";d=c.slice(0,c.length-w.length).replace(/(.)\/+$/,"$1")}const b=f[v];return y&&!b?p[x]=void 0:p[x]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:d,pattern:e}}function SS(e,t=!1,r=!0){ua(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,h)=>(a.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),a]}function wS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ua(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function as(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function TS(e,t="/"){let{pathname:r,search:a="",hash:o=""}=typeof e=="string"?Eo(e):e;return{pathname:r?r.startsWith("/")?r:jS(r,t):t,search:CS(a),hash:AS(o)}}function jS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Sh(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ES(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function g0(e){let t=ES(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function x0(e,t,r,a=!1){let o;typeof e=="string"?o=Eo(e):(o={...e},Ar(!o.pathname||!o.pathname.includes("?"),Sh("?","pathname","search",o)),Ar(!o.pathname||!o.pathname.includes("#"),Sh("#","pathname","hash",o)),Ar(!o.search||!o.search.includes("#"),Sh("#","search","hash",o)));let c=e===""||o.pathname==="",d=c?"/":o.pathname,f;if(d==null)f=r;else{let y=t.length-1;if(!a&&d.startsWith("..")){let v=d.split("/");for(;v[0]==="..";)v.shift(),y-=1;o.pathname=v.join("/")}f=y>=0?t[y]:"/"}let h=TS(o,f),p=d&&d!=="/"&&d.endsWith("/"),x=(c||d===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(p||x)&&(h.pathname+="/"),h}var es=e=>e.join("/").replace(/\/\/+/g,"/"),kS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),CS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,AS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function RS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var yy=["POST","PUT","PATCH","DELETE"];new Set(yy);var NS=["GET",...yy];new Set(NS);var ko=T.createContext(null);ko.displayName="DataRouter";var tu=T.createContext(null);tu.displayName="DataRouterState";T.createContext(!1);var vy=T.createContext({isTransitioning:!1});vy.displayName="ViewTransition";var DS=T.createContext(new Map);DS.displayName="Fetchers";var OS=T.createContext(null);OS.displayName="Await";var Ta=T.createContext(null);Ta.displayName="Navigation";var tc=T.createContext(null);tc.displayName="Location";var ja=T.createContext({outlet:null,matches:[],isDataRoute:!1});ja.displayName="Route";var m0=T.createContext(null);m0.displayName="RouteError";function IS(e,{relative:t}={}){Ar(Co(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=T.useContext(Ta),{hash:o,pathname:c,search:d}=rc(e,{relative:t}),f=c;return r!=="/"&&(f=c==="/"?r:es([r,c])),a.createHref({pathname:f,search:d,hash:o})}function Co(){return T.useContext(tc)!=null}function Ea(){return Ar(Co(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(tc).location}var by="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _y(e){T.useContext(Ta).static||T.useLayoutEffect(e)}function Ba(){let{isDataRoute:e}=T.useContext(ja);return e?YS():MS()}function MS(){Ar(Co(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(ko),{basename:t,navigator:r}=T.useContext(Ta),{matches:a}=T.useContext(ja),{pathname:o}=Ea(),c=JSON.stringify(g0(a)),d=T.useRef(!1);return _y(()=>{d.current=!0}),T.useCallback((h,p={})=>{if(ua(d.current,by),!d.current)return;if(typeof h=="number"){r.go(h);return}let x=x0(h,JSON.parse(c),o,p.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:es([t,x.pathname])),(p.replace?r.replace:r.push)(x,p.state,p)},[t,r,c,o,e])}T.createContext(null);function BS(){let{matches:e}=T.useContext(ja),t=e[e.length-1];return t?t.params:{}}function rc(e,{relative:t}={}){let{matches:r}=T.useContext(ja),{pathname:a}=Ea(),o=JSON.stringify(g0(r));return T.useMemo(()=>x0(e,JSON.parse(o),a,t==="path"),[e,o,a,t])}function FS(e,t){return Sy(e,t)}function Sy(e,t,r,a,o){Ar(Co(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=T.useContext(Ta),{matches:d}=T.useContext(ja),f=d[d.length-1],h=f?f.params:{},p=f?f.pathname:"/",x=f?f.pathnameBase:"/",y=f&&f.route;{let R=y&&y.path||"";wy(p,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let v=Ea(),b;if(t){let R=typeof t=="string"?Eo(t):t;Ar(x==="/"||R.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${R.pathname}" was given in the \`location\` prop.`),b=R}else b=v;let w=b.pathname||"/",_=w;if(x!=="/"){let R=x.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let S=gy(e,{pathname:_});ua(y||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ua(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=WS(S&&S.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:es([x,c.encodeLocation?c.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?x:es([x,c.encodeLocation?c.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),d,r,a,o);return t&&N?T.createElement(tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},N):N}function LS(){let e=VS(),t=RS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:c},"ErrorBoundary")," or"," ",T.createElement("code",{style:c},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:o},r):null,d)}var PS=T.createElement(LS,null),zS=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?T.createElement(ja.Provider,{value:this.props.routeContext},T.createElement(m0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function US({routeContext:e,match:t,children:r}){let a=T.useContext(ko);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(ja.Provider,{value:e},r)}function WS(e,t=[],r=null,a=null,o=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let c=e,d=r?.errors;if(d!=null){let p=c.findIndex(x=>x.route.id&&d?.[x.route.id]!==void 0);Ar(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,p+1))}let f=!1,h=-1;if(r)for(let p=0;p<c.length;p++){let x=c[p];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(h=p),x.route.id){let{loaderData:y,errors:v}=r,b=x.route.loader&&!y.hasOwnProperty(x.route.id)&&(!v||v[x.route.id]===void 0);if(x.route.lazy||b){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((p,x,y)=>{let v,b=!1,w=null,_=null;r&&(v=d&&x.route.id?d[x.route.id]:void 0,w=x.route.errorElement||PS,f&&(h<0&&y===0?(wy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,_=null):h===y&&(b=!0,_=x.route.hydrateFallbackElement||null)));let S=t.concat(c.slice(0,y+1)),N=()=>{let R;return v?R=w:b?R=_:x.route.Component?R=T.createElement(x.route.Component,null):x.route.element?R=x.route.element:R=p,T.createElement(US,{match:x,routeContext:{outlet:p,matches:S,isDataRoute:r!=null},children:R})};return r&&(x.route.ErrorBoundary||x.route.errorElement||y===0)?T.createElement(zS,{location:r.location,revalidation:r.revalidation,component:w,error:v,children:N(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:a}):N()},null)}function y0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qS(e){let t=T.useContext(ko);return Ar(t,y0(e)),t}function HS(e){let t=T.useContext(tu);return Ar(t,y0(e)),t}function $S(e){let t=T.useContext(ja);return Ar(t,y0(e)),t}function v0(e){let t=$S(e),r=t.matches[t.matches.length-1];return Ar(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function GS(){return v0("useRouteId")}function VS(){let e=T.useContext(m0),t=HS("useRouteError"),r=v0("useRouteError");return e!==void 0?e:t.errors?.[r]}function YS(){let{router:e}=qS("useNavigate"),t=v0("useNavigate"),r=T.useRef(!1);return _y(()=>{r.current=!0}),T.useCallback(async(o,c={})=>{ua(r.current,by),r.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...c}))},[e,t])}var Lm={};function wy(e,t,r){!t&&!Lm[e]&&(Lm[e]=!0,ua(!1,r))}T.memo(KS);function KS({routes:e,future:t,state:r,unstable_onError:a}){return Sy(e,void 0,r,a,t)}function Pm({to:e,replace:t,state:r,relative:a}){Ar(Co(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=T.useContext(Ta);ua(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=T.useContext(ja),{pathname:d}=Ea(),f=Ba(),h=x0(e,g0(c),d,a==="path"),p=JSON.stringify(h);return T.useEffect(()=>{f(JSON.parse(p),{replace:t,state:r,relative:a})},[f,p,a,t,r]),null}function Cn(e){Ar(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function XS({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:o,static:c=!1}){Ar(!Co(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),f=T.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof r=="string"&&(r=Eo(r));let{pathname:h="/",search:p="",hash:x="",state:y=null,key:v="default"}=r,b=T.useMemo(()=>{let w=as(h,d);return w==null?null:{location:{pathname:w,search:p,hash:x,state:y,key:v},navigationType:a}},[d,h,p,x,y,v,a]);return ua(b!=null,`<Router basename="${d}"> is not able to match the URL "${h}${p}${x}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:T.createElement(Ta.Provider,{value:f},T.createElement(tc.Provider,{children:t,value:b}))}function Ty({children:e,location:t}){return FS(Hh(e),t)}function Hh(e,t=[]){let r=[];return T.Children.forEach(e,(a,o)=>{if(!T.isValidElement(a))return;let c=[...t,o];if(a.type===T.Fragment){r.push.apply(r,Hh(a.props.children,c));return}Ar(a.type===Cn,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ar(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Hh(a.props.children,c)),r.push(d)}),r}var Od="get",Id="application/x-www-form-urlencoded";function ru(e){return e!=null&&typeof e.tagName=="string"}function QS(e){return ru(e)&&e.tagName.toLowerCase()==="button"}function JS(e){return ru(e)&&e.tagName.toLowerCase()==="form"}function ZS(e){return ru(e)&&e.tagName.toLowerCase()==="input"}function ew(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function tw(e,t){return e.button===0&&(!t||t==="_self")&&!ew(e)}function $h(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map(o=>[r,o]):[[r,a]])},[]))}function rw(e,t){let r=$h(e);return t&&t.forEach((a,o)=>{r.has(o)||t.getAll(o).forEach(c=>{r.append(o,c)})}),r}var md=null;function nw(){if(md===null)try{new FormData(document.createElement("form"),0),md=!1}catch{md=!0}return md}var aw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wh(e){return e!=null&&!aw.has(e)?(ua(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Id}"`),null):e}function sw(e,t){let r,a,o,c,d;if(JS(e)){let f=e.getAttribute("action");a=f?as(f,t):null,r=e.getAttribute("method")||Od,o=wh(e.getAttribute("enctype"))||Id,c=new FormData(e)}else if(QS(e)||ZS(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||f.getAttribute("action");if(a=h?as(h,t):null,r=e.getAttribute("formmethod")||f.getAttribute("method")||Od,o=wh(e.getAttribute("formenctype"))||wh(f.getAttribute("enctype"))||Id,c=new FormData(f,e),!nw()){let{name:p,type:x,value:y}=e;if(x==="image"){let v=p?`${p}.`:"";c.append(`${v}x`,"0"),c.append(`${v}y`,"0")}else p&&c.append(p,y)}}else{if(ru(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Od,a=null,o=Id,d=e}return c&&o==="text/plain"&&(d=c,c=void 0),{action:a,method:r.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function b0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function iw(e,t,r){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${r}`:t&&as(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function ow(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function cw(e,t,r){let a=await Promise.all(e.map(async o=>{let c=t.routes[o.route.id];if(c){let d=await ow(c,r);return d.links?d.links():[]}return[]}));return hw(a.flat(1).filter(lw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function zm(e,t,r,a,o,c){let d=(h,p)=>r[p]?h.route.id!==r[p].route.id:!0,f=(h,p)=>r[p].pathname!==h.pathname||r[p].route.path?.endsWith("*")&&r[p].params["*"]!==h.params["*"];return c==="assets"?t.filter((h,p)=>d(h,p)||f(h,p)):c==="data"?t.filter((h,p)=>{let x=a.routes[h.route.id];if(!x||!x.hasLoader)return!1;if(d(h,p)||f(h,p))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function dw(e,t,{includeHydrateFallback:r}={}){return uw(e.map(a=>{let o=t.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function uw(e){return[...new Set(e)]}function fw(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function hw(e,t){let r=new Set;return new Set(t),e.reduce((a,o)=>{let c=JSON.stringify(fw(o));return r.has(c)||(r.add(c),a.push({key:c,link:o})),a},[])}function jy(){let e=T.useContext(ko);return b0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function pw(){let e=T.useContext(tu);return b0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var _0=T.createContext(void 0);_0.displayName="FrameworkContext";function Ey(){let e=T.useContext(_0);return b0(e,"You must render this element inside a <HydratedRouter> element"),e}function gw(e,t){let r=T.useContext(_0),[a,o]=T.useState(!1),[c,d]=T.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:p,onMouseLeave:x,onTouchStart:y}=t,v=T.useRef(null);T.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let _=N=>{N.forEach(R=>{d(R.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[e]),T.useEffect(()=>{if(a){let _=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(_)}}},[a]);let b=()=>{o(!0)},w=()=>{o(!1),d(!1)};return r?e!=="intent"?[c,v,{}]:[c,v,{onFocus:Al(f,b),onBlur:Al(h,w),onMouseEnter:Al(p,b),onMouseLeave:Al(x,w),onTouchStart:Al(y,b)}]:[!1,v,{}]}function Al(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function xw({page:e,...t}){let{router:r}=jy(),a=T.useMemo(()=>gy(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?T.createElement(yw,{page:e,matches:a,...t}):null}function mw(e){let{manifest:t,routeModules:r}=Ey(),[a,o]=T.useState([]);return T.useEffect(()=>{let c=!1;return cw(e,t,r).then(d=>{c||o(d)}),()=>{c=!0}},[e,t,r]),a}function yw({page:e,matches:t,...r}){let a=Ea(),{manifest:o,routeModules:c}=Ey(),{basename:d}=jy(),{loaderData:f,matches:h}=pw(),p=T.useMemo(()=>zm(e,t,h,o,a,"data"),[e,t,h,o,a]),x=T.useMemo(()=>zm(e,t,h,o,a,"assets"),[e,t,h,o,a]),y=T.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let w=new Set,_=!1;if(t.forEach(N=>{let R=o.routes[N.route.id];!R||!R.hasLoader||(!p.some(O=>O.route.id===N.route.id)&&N.route.id in f&&c[N.route.id]?.shouldRevalidate||R.hasClientLoader?_=!0:w.add(N.route.id))}),w.size===0)return[];let S=iw(e,d,"data");return _&&w.size>0&&S.searchParams.set("_routes",t.filter(N=>w.has(N.route.id)).map(N=>N.route.id).join(",")),[S.pathname+S.search]},[d,f,a,o,p,t,e,c]),v=T.useMemo(()=>dw(x,o),[x,o]),b=mw(x);return T.createElement(T.Fragment,null,y.map(w=>T.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),v.map(w=>T.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),b.map(({key:w,link:_})=>T.createElement("link",{key:w,nonce:r.nonce,..._})))}function vw(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var ky=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ky&&(window.__reactRouterVersion="7.9.1")}catch{}function bw({basename:e,children:t,window:r}){let a=T.useRef();a.current==null&&(a.current=oS({window:r,v5Compat:!0}));let o=a.current,[c,d]=T.useState({action:o.action,location:o.location}),f=T.useCallback(h=>{T.startTransition(()=>d(h))},[d]);return T.useLayoutEffect(()=>o.listen(f),[o,f]),T.createElement(XS,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:o})}var Cy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Os=T.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:o,reloadDocument:c,replace:d,state:f,target:h,to:p,preventScrollReset:x,viewTransition:y,...v},b){let{basename:w}=T.useContext(Ta),_=typeof p=="string"&&Cy.test(p),S,N=!1;if(typeof p=="string"&&_&&(S=p,ky))try{let Q=new URL(window.location.href),oe=p.startsWith("//")?new URL(Q.protocol+p):new URL(p),q=as(oe.pathname,w);oe.origin===Q.origin&&q!=null?p=q+oe.search+oe.hash:N=!0}catch{ua(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=IS(p,{relative:o}),[O,P,J]=gw(a,v),ae=Tw(p,{replace:d,state:f,target:h,preventScrollReset:x,relative:o,viewTransition:y});function Y(Q){t&&t(Q),Q.defaultPrevented||ae(Q)}let F=T.createElement("a",{...v,...J,href:S||R,onClick:N||c?t:Y,ref:vw(b,P),target:h,"data-discover":!_&&r==="render"?"true":void 0});return O&&!_?T.createElement(T.Fragment,null,F,T.createElement(xw,{page:R})):F});Os.displayName="Link";var _w=T.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:o=!1,style:c,to:d,viewTransition:f,children:h,...p},x){let y=rc(d,{relative:p.relative}),v=Ea(),b=T.useContext(tu),{navigator:w,basename:_}=T.useContext(Ta),S=b!=null&&Aw(y)&&f===!0,N=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,R=v.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(R=R.toLowerCase(),O=O?O.toLowerCase():null,N=N.toLowerCase()),O&&_&&(O=as(O,_)||O);const P=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let J=R===N||!o&&R.startsWith(N)&&R.charAt(P)==="/",ae=O!=null&&(O===N||!o&&O.startsWith(N)&&O.charAt(N.length)==="/"),Y={isActive:J,isPending:ae,isTransitioning:S},F=J?t:void 0,Q;typeof a=="function"?Q=a(Y):Q=[a,J?"active":null,ae?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let oe=typeof c=="function"?c(Y):c;return T.createElement(Os,{...p,"aria-current":F,className:Q,ref:x,style:oe,to:d,viewTransition:f},typeof h=="function"?h(Y):h)});_w.displayName="NavLink";var Sw=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:o,state:c,method:d=Od,action:f,onSubmit:h,relative:p,preventScrollReset:x,viewTransition:y,...v},b)=>{let w=kw(),_=Cw(f,{relative:p}),S=d.toLowerCase()==="get"?"get":"post",N=typeof f=="string"&&Cy.test(f),R=O=>{if(h&&h(O),O.defaultPrevented)return;O.preventDefault();let P=O.nativeEvent.submitter,J=P?.getAttribute("formmethod")||d;w(P||O.currentTarget,{fetcherKey:t,method:J,navigate:r,replace:o,state:c,relative:p,preventScrollReset:x,viewTransition:y})};return T.createElement("form",{ref:b,method:S,action:_,onSubmit:a?h:R,...v,"data-discover":!N&&e==="render"?"true":void 0})});Sw.displayName="Form";function ww(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ay(e){let t=T.useContext(ko);return Ar(t,ww(e)),t}function Tw(e,{target:t,replace:r,state:a,preventScrollReset:o,relative:c,viewTransition:d}={}){let f=Ba(),h=Ea(),p=rc(e,{relative:c});return T.useCallback(x=>{if(tw(x,t)){x.preventDefault();let y=r!==void 0?r:$l(h)===$l(p);f(e,{replace:y,state:a,preventScrollReset:o,relative:c,viewTransition:d})}},[h,f,p,r,a,t,e,o,c,d])}function Ry(e){ua(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=T.useRef($h(e)),r=T.useRef(!1),a=Ea(),o=T.useMemo(()=>rw(a.search,r.current?null:t.current),[a.search]),c=Ba(),d=T.useCallback((f,h)=>{const p=$h(typeof f=="function"?f(new URLSearchParams(o)):f);r.current=!0,c("?"+p,h)},[c,o]);return[o,d]}var jw=0,Ew=()=>`__${String(++jw)}__`;function kw(){let{router:e}=Ay("useSubmit"),{basename:t}=T.useContext(Ta),r=GS();return T.useCallback(async(a,o={})=>{let{action:c,method:d,encType:f,formData:h,body:p}=sw(a,t);if(o.navigate===!1){let x=o.fetcherKey||Ew();await e.fetch(x,r,o.action||c,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||d,formEncType:o.encType||f,flushSync:o.flushSync})}else await e.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||d,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,r])}function Cw(e,{relative:t}={}){let{basename:r}=T.useContext(Ta),a=T.useContext(ja);Ar(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...rc(e||".",{relative:t})},d=Ea();if(e==null){c.search=d.search;let f=new URLSearchParams(c.search),h=f.getAll("index");if(h.some(x=>x==="")){f.delete("index"),h.filter(y=>y).forEach(y=>f.append("index",y));let x=f.toString();c.search=x?`?${x}`:""}}return(!e||e===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:es([r,c.pathname])),$l(c)}function Aw(e,{relative:t}={}){let r=T.useContext(vy);Ar(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Ay("useViewTransitionState"),o=rc(e,{relative:t});if(!r.isTransitioning)return!1;let c=as(r.currentLocation.pathname,a)||r.currentLocation.pathname,d=as(r.nextLocation.pathname,a)||r.nextLocation.pathname;return Md(o.pathname,d)!=null||Md(o.pathname,c)!=null}var Ao=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rw={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Nw=class{#e=Rw;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},ui=new Nw;function Dw(e){setTimeout(e,0)}var hi=typeof window>"u"||"Deno"in globalThis;function An(){}function Ow(e,t){return typeof e=="function"?e(t):e}function Gh(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ny(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ls(e,t){return typeof e=="function"?e(t):e}function da(e,t){return typeof e=="function"?e(t):e}function Um(e,t){const{type:r="all",exact:a,fetchStatus:o,predicate:c,queryKey:d,stale:f}=e;if(d){if(a){if(t.queryHash!==S0(d,t.options))return!1}else if(!Gl(t.queryKey,d))return!1}if(r!=="all"){const h=t.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof f=="boolean"&&t.isStale()!==f||o&&o!==t.state.fetchStatus||c&&!c(t))}function Wm(e,t){const{exact:r,status:a,predicate:o,mutationKey:c}=e;if(c){if(!t.options.mutationKey)return!1;if(r){if(pi(t.options.mutationKey)!==pi(c))return!1}else if(!Gl(t.options.mutationKey,c))return!1}return!(a&&t.state.status!==a||o&&!o(t))}function S0(e,t){return(t?.queryKeyHashFn||pi)(e)}function pi(e){return JSON.stringify(e,(t,r)=>Vh(r)?Object.keys(r).sort().reduce((a,o)=>(a[o]=r[o],a),{}):r)}function Gl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Gl(e[r],t[r])):!1}var Iw=Object.prototype.hasOwnProperty;function Dy(e,t){if(e===t)return e;const r=qm(e)&&qm(t);if(!r&&!(Vh(e)&&Vh(t)))return t;const o=(r?e:Object.keys(e)).length,c=r?t:Object.keys(t),d=c.length,f=r?new Array(d):{};let h=0;for(let p=0;p<d;p++){const x=r?p:c[p],y=e[x],v=t[x];if(y===v){f[x]=y,(r?p<o:Iw.call(e,x))&&h++;continue}if(y===null||v===null||typeof y!="object"||typeof v!="object"){f[x]=v;continue}const b=Dy(y,v);f[x]=b,b===y&&h++}return o===d&&h===o?e:f}function Bd(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function qm(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Vh(e){if(!Hm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Hm(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Hm(e){return Object.prototype.toString.call(e)==="[object Object]"}function Mw(e){return new Promise(t=>{ui.setTimeout(t,e)})}function Yh(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Dy(e,t):t}function Bw(e,t,r=0){const a=[...e,t];return r&&a.length>r?a.slice(1):a}function Fw(e,t,r=0){const a=[t,...e];return r&&a.length>r?a.slice(0,-1):a}var w0=Symbol();function Oy(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===w0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Iy(e,t){return typeof e=="function"?e(...t):!!e}var Lw=class extends Ao{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!hi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},T0=new Lw;function Kh(){let e,t;const r=new Promise((o,c)=>{e=o,t=c});r.status="pending",r.catch(()=>{});function a(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{a({status:"fulfilled",value:o}),e(o)},r.reject=o=>{a({status:"rejected",reason:o}),t(o)},r}var Pw=Dw;function zw(){let e=[],t=0,r=f=>{f()},a=f=>{f()},o=Pw;const c=f=>{t?e.push(f):o(()=>{r(f)})},d=()=>{const f=e;e=[],f.length&&o(()=>{a(()=>{f.forEach(h=>{r(h)})})})};return{batch:f=>{let h;t++;try{h=f()}finally{t--,t||d()}return h},batchCalls:f=>(...h)=>{c(()=>{f(...h)})},schedule:c,setNotifyFunction:f=>{r=f},setBatchNotifyFunction:f=>{a=f},setScheduler:f=>{o=f}}}var Jr=zw(),Uw=class extends Ao{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!hi&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Fd=new Uw;function Ww(e){return Math.min(1e3*2**e,3e4)}function My(e){return(e??"online")==="online"?Fd.isOnline():!0}var Xh=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function By(e){let t=!1,r=0,a;const o=Kh(),c=()=>o.status!=="pending",d=_=>{if(!c()){const S=new Xh(_);v(S),e.onCancel?.(S)}},f=()=>{t=!0},h=()=>{t=!1},p=()=>T0.isFocused()&&(e.networkMode==="always"||Fd.isOnline())&&e.canRun(),x=()=>My(e.networkMode)&&e.canRun(),y=_=>{c()||(a?.(),o.resolve(_))},v=_=>{c()||(a?.(),o.reject(_))},b=()=>new Promise(_=>{a=S=>{(c()||p())&&_(S)},e.onPause?.()}).then(()=>{a=void 0,c()||e.onContinue?.()}),w=()=>{if(c())return;let _;const S=r===0?e.initialPromise:void 0;try{_=S??e.fn()}catch(N){_=Promise.reject(N)}Promise.resolve(_).then(y).catch(N=>{if(c())return;const R=e.retry??(hi?0:3),O=e.retryDelay??Ww,P=typeof O=="function"?O(r,N):O,J=R===!0||typeof R=="number"&&r<R||typeof R=="function"&&R(r,N);if(t||!J){v(N);return}r++,e.onFail?.(r,N),Mw(P).then(()=>p()?void 0:b()).then(()=>{t?v(N):w()})})};return{promise:o,status:()=>o.status,cancel:d,continue:()=>(a?.(),o),cancelRetry:f,continueRetry:h,canStart:x,start:()=>(x()?w():b().then(w),o)}}var Fy=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Gh(this.gcTime)&&(this.#e=ui.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(hi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(ui.clearTimeout(this.#e),this.#e=void 0)}},qw=class extends Fy{#e;#t;#r;#a;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#r=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=$m(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=$m(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=Yh(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(An).catch(An):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>da(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===w0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ls(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Ny(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,a=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},o=()=>{const f=Oy(this.options,t),p=(()=>{const x={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(x),x})();return this.#o=!1,this.options.persister?this.options.persister(f,p,this):f(p)},d=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:o};return a(f),f})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#s({type:"fetch",meta:d.fetchOptions?.meta}),this.#n=By({initialPromise:t?.initialPromise,fn:d.fetchFn,onCancel:f=>{f instanceof Xh&&f.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(f,h)=>{this.#s({type:"failed",failureCount:f,error:h})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const f=await this.#n.start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#r.config.onSuccess?.(f,this),this.#r.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof Xh){if(f.silent)return this.#n.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#s({type:"error",error:f}),this.#r.config.onError?.(f,this),this.#r.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Ly(r.data,this.options),fetchMeta:e.meta??null};case"success":const a={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Jr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Ly(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:My(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function $m(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,a=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Hw=class extends Ao{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=Kh(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#i;#o;#s;#g;#f;#h;#c;#d;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Gm(this.#t,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Qh(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Qh(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#_(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof da(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),t._defaulted&&!Bd(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&Vm(this.#t,r,this.options,t)&&this.#u(),this.updateResult(),a&&(this.#t!==r||da(this.options.enabled,this.#t)!==da(t.enabled,this.#t)||Ls(this.options.staleTime,this.#t)!==Ls(t.staleTime,this.#t))&&this.#x();const o=this.#m();a&&(this.#t!==r||da(this.options.enabled,this.#t)!==da(t.enabled,this.#t)||o!==this.#l)&&this.#y(o)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return Gw(this,r)&&(this.#a=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(r,a)=>(this.trackProp(a),t?.(a),a==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#S();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(An)),t}#x(){this.#b();const e=Ls(this.options.staleTime,this.#t);if(hi||this.#a.isStale||!Gh(e))return;const r=Ny(this.#a.dataUpdatedAt,e)+1;this.#c=ui.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#_(),this.#l=e,!(hi||da(this.options.enabled,this.#t)===!1||!Gh(this.#l)||this.#l===0)&&(this.#d=ui.setInterval(()=>{(this.options.refetchIntervalInBackground||T0.isFocused())&&this.#u()},this.#l))}#v(){this.#x(),this.#y(this.#m())}#b(){this.#c&&(ui.clearTimeout(this.#c),this.#c=void 0)}#_(){this.#d&&(ui.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const r=this.#t,a=this.options,o=this.#a,c=this.#n,d=this.#i,h=e!==r?e.state:this.#r,{state:p}=e;let x={...p},y=!1,v;if(t._optimisticResults){const F=this.hasListeners(),Q=!F&&Gm(e,t),oe=F&&Vm(e,r,t,a);(Q||oe)&&(x={...x,...Ly(p.data,e.options)}),t._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:b,errorUpdatedAt:w,status:_}=x;v=x.data;let S=!1;if(t.placeholderData!==void 0&&v===void 0&&_==="pending"){let F;o?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(F=o.data,S=!0):F=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,F!==void 0&&(_="success",v=Yh(o?.data,F,t),y=!0)}if(t.select&&v!==void 0&&!S)if(o&&v===c?.data&&t.select===this.#g)v=this.#f;else try{this.#g=t.select,v=t.select(v),v=Yh(o?.data,v,t),this.#f=v,this.#s=null}catch(F){this.#s=F}this.#s&&(b=this.#s,v=this.#f,w=Date.now(),_="error");const N=x.fetchStatus==="fetching",R=_==="pending",O=_==="error",P=R&&N,J=v!==void 0,Y={status:_,fetchStatus:x.fetchStatus,isPending:R,isSuccess:_==="success",isError:O,isInitialLoading:P,isLoading:P,data:v,dataUpdatedAt:x.dataUpdatedAt,error:b,errorUpdatedAt:w,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>h.dataUpdateCount||x.errorUpdateCount>h.errorUpdateCount,isFetching:N,isRefetching:N&&!R,isLoadingError:O&&!J,isPaused:x.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:O&&J,isStale:j0(e,t),refetch:this.refetch,promise:this.#o,isEnabled:da(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const F=q=>{Y.status==="error"?q.reject(Y.error):Y.data!==void 0&&q.resolve(Y.data)},Q=()=>{const q=this.#o=Y.promise=Kh();F(q)},oe=this.#o;switch(oe.status){case"pending":e.queryHash===r.queryHash&&F(oe);break;case"fulfilled":(Y.status==="error"||Y.data!==oe.value)&&Q();break;case"rejected":(Y.status!=="error"||Y.error!==oe.reason)&&Q();break}}return Y}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#t),Bd(t,e))return;this.#a=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!this.#p.size)return!0;const c=new Set(o??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#a).some(d=>{const f=d;return this.#a[f]!==e[f]&&c.has(f)})};this.#w({listeners:r()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){Jr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function $w(e,t){return da(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Gm(e,t){return $w(e,t)||e.state.data!==void 0&&Qh(e,t,t.refetchOnMount)}function Qh(e,t,r){if(da(t.enabled,e)!==!1&&Ls(t.staleTime,e)!=="static"){const a=typeof r=="function"?r(e):r;return a==="always"||a!==!1&&j0(e,t)}return!1}function Vm(e,t,r,a){return(e!==t||da(a.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&j0(e,r)}function j0(e,t){return da(t.enabled,e)!==!1&&e.isStaleByTime(Ls(t.staleTime,e))}function Gw(e,t){return!Bd(e.getCurrentResult(),t)}function Ym(e){return{onFetch:(t,r)=>{const a=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,c=t.state.data?.pages||[],d=t.state.data?.pageParams||[];let f={pages:[],pageParams:[]},h=0;const p=async()=>{let x=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},v=Oy(t.options,t.fetchOptions),b=async(w,_,S)=>{if(x)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const R=(()=>{const ae={client:t.client,queryKey:t.queryKey,pageParam:_,direction:S?"backward":"forward",meta:t.options.meta};return y(ae),ae})(),O=await v(R),{maxPages:P}=t.options,J=S?Fw:Bw;return{pages:J(w.pages,O,P),pageParams:J(w.pageParams,_,P)}};if(o&&c.length){const w=o==="backward",_=w?Vw:Km,S={pages:c,pageParams:d},N=_(a,S);f=await b(S,N,w)}else{const w=e??c.length;do{const _=h===0?d[0]??a.initialPageParam:Km(a,f);if(h>0&&_==null)break;f=await b(f,_),h++}while(h<w)}return f};t.options.persister?t.fetchFn=()=>t.options.persister?.(p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=p}}}function Km(e,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,r[a],r):void 0}function Vw(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Yw=class extends Fy{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||Py(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=By({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(c,d)=>{this.#n({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",o=!this.#a.canStart();try{if(a)t();else{this.#n({type:"pending",variables:e,isPaused:o}),await this.#r.config.onMutate?.(e,this,r);const d=await this.options.onMutate?.(e,r);d!==this.state.context&&this.#n({type:"pending",context:d,variables:e,isPaused:o})}const c=await this.#a.start();return await this.#r.config.onSuccess?.(c,e,this.state.context,this,r),await this.options.onSuccess?.(c,e,this.state.context,r),await this.#r.config.onSettled?.(c,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(c,null,e,this.state.context,r),this.#n({type:"success",data:c}),c}catch(c){try{throw await this.#r.config.onError?.(c,e,this.state.context,this,r),await this.options.onError?.(c,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,c,e,this.state.context,r),c}finally{this.#n({type:"error",error:c})}}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Jr.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function Py(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kw=class extends Ao{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const a=new Yw({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){this.#e.add(e);const t=yd(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=yd(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=yd(e);if(typeof t=="string"){const a=this.#t.get(t)?.find(o=>o.state.status==="pending");return!a||a===e}else return!0}runNext(e){const t=yd(e);return typeof t=="string"?this.#t.get(t)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Jr.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Wm(t,r))}findAll(e={}){return this.getAll().filter(t=>Wm(e,t))}notify(e){Jr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Jr.batch(()=>Promise.all(e.map(t=>t.continue().catch(An))))}};function yd(e){return e.options.scope?.id}var Xw=class extends Ao{#e;#t=void 0;#r;#a;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Bd(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&pi(r.mutationKey)!==pi(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#a=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??Py();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Jr.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,o={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#a.onSuccess?.(t.data,r,a,o),this.#a.onSettled?.(t.data,null,r,a,o)):t?.type==="error"&&(this.#a.onError?.(t.error,r,a,o),this.#a.onSettled?.(void 0,t.error,r,a,o))}this.listeners.forEach(r=>{r(this.#t)})})}},Qw=class extends Ao{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const a=t.queryKey,o=t.queryHash??S0(a,t);let c=this.get(o);return c||(c=new qw({client:e,queryKey:a,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(c)),c}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Jr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Um(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Um(e,r)):t}notify(e){Jr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Jr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Jr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Jw=class{#e;#t;#r;#a;#n;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new Qw,this.#t=e.mutationCache||new Kw,this.#r=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=T0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Fd.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ls(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(e,t,r){const a=this.defaultQueryOptions({queryKey:e}),c=this.#e.get(a.queryHash)?.state.data,d=Ow(t,c);if(d!==void 0)return this.#e.build(this,a).setData(d,{...r,manual:!0})}setQueriesData(e,t,r){return Jr.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Jr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Jr.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},a=Jr.batch(()=>this.#e.findAll(e).map(o=>o.cancel(r)));return Promise.all(a).then(An).catch(An)}invalidateQueries(e,t={}){return Jr.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=Jr.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let c=o.fetch(void 0,r);return r.throwOnError||(c=c.catch(An)),o.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(a).then(An)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(Ls(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(An).catch(An)}fetchInfiniteQuery(e){return e.behavior=Ym(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(An).catch(An)}ensureInfiniteQueryData(e){return e.behavior=Ym(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Fd.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#a.set(pi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(a=>{Gl(e,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(pi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(a=>{Gl(e,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=S0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===w0&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},zy=T.createContext(void 0),E0=e=>{const t=T.useContext(zy);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Zw=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(zy.Provider,{value:e,children:t})),Uy=T.createContext(!1),e4=()=>T.useContext(Uy);Uy.Provider;function t4(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var r4=T.createContext(t4()),n4=()=>T.useContext(r4),a4=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},s4=e=>{T.useEffect(()=>{e.clearReset()},[e])},i4=({result:e,errorResetBoundary:t,throwOnError:r,query:a,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(o&&e.data===void 0||Iy(r,[e.error,a])),o4=e=>{if(e.suspense){const r=o=>o==="static"?o:Math.max(o??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...o)=>r(a(...o)):r(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},l4=(e,t)=>e.isLoading&&e.isFetching&&!t,c4=(e,t)=>e?.suspense&&t.isPending,Xm=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function d4(e,t,r){const a=e4(),o=n4(),c=E0(),d=c.defaultQueryOptions(e);c.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=a?"isRestoring":"optimistic",o4(d),a4(d,o),s4(o);const f=!c.getQueryCache().get(d.queryHash),[h]=T.useState(()=>new t(c,d)),p=h.getOptimisticResult(d),x=!a&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(y=>{const v=x?h.subscribe(Jr.batchCalls(y)):An;return h.updateResult(),v},[h,x]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),T.useEffect(()=>{h.setOptions(d)},[d,h]),c4(d,p))throw Xm(d,h,o);if(i4({result:p,errorResetBoundary:o,throwOnError:d.throwOnError,query:c.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw p.error;return c.getDefaultOptions().queries?._experimental_afterQuery?.(d,p),d.experimental_prefetchInRender&&!hi&&l4(p,a)&&(f?Xm(d,h,o):c.getQueryCache().get(d.queryHash)?.promise)?.catch(An).finally(()=>{h.updateResult()}),d.notifyOnChangeProps?p:h.trackResult(p)}function k0(e,t){return d4(e,Hw)}function Qm(e,t){const r=E0(),[a]=T.useState(()=>new Xw(r,e));T.useEffect(()=>{a.setOptions(e)},[a,e]);const o=T.useSyncExternalStore(T.useCallback(d=>a.subscribe(Jr.batchCalls(d)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),c=T.useCallback((d,f)=>{a.mutate(d,f).catch(An)},[a]);if(o.error&&Iy(a.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:c,mutateAsync:o.mutate}}const u4="modulepreload",f4=function(e){return"/retailpos/"+e},Jm={},nc=function(t,r,a){let o=Promise.resolve();if(r&&r.length>0){let p=function(x){return Promise.all(x.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var d=p;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=f?.nonce||f?.getAttribute("nonce");o=p(r.map(x=>{if(x=f4(x),x in Jm)return;Jm[x]=!0;const y=x.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${v}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":u4,y||(b.as="script"),b.crossOrigin="",b.href=x,h&&b.setAttribute("nonce",h),document.head.appendChild(b),y)return new Promise((w,_)=>{b.addEventListener("load",w),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${x}`)))})}))}function c(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return o.then(f=>{for(const h of f||[])h.status==="rejected"&&c(h.reason);return t().catch(c)})},h4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>nc(async()=>{const{default:a}=await Promise.resolve().then(()=>Ro);return{default:a}},[]).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class C0 extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class p4 extends C0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Zm extends C0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class e1 extends C0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Jh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Jh||(Jh={}));var g4=function(e,t,r,a){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(a.next(x))}catch(y){d(y)}}function h(x){try{p(a.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class x4{constructor(t,{headers:r={},customFetch:a,region:o=Jh.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=h4(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return g4(this,void 0,void 0,function*(){try{const{headers:o,method:c,body:d}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${t}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let x;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=d):typeof d=="string"?(f["Content-Type"]="text/plain",x=d):typeof FormData<"u"&&d instanceof FormData?x=d:(f["Content-Type"]="application/json",x=JSON.stringify(d)));const y=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:x}).catch(_=>{throw new p4(_)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new Zm(y);if(!y.ok)throw new e1(y);let b=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield y.json():b==="application/octet-stream"?w=yield y.blob():b==="text/event-stream"?w=y:b==="multipart/form-data"?w=yield y.formData():w=yield y.text(),{data:w,error:null,response:y}}catch(o){return{data:null,error:o,response:o instanceof e1||o instanceof Zm?o.context:void 0}}})}}var rn={},to={},ro={},no={},ao={},so={},m4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},To=m4();const y4=To.fetch,Wy=To.fetch.bind(To),qy=To.Headers,v4=To.Request,b4=To.Response,Ro=Object.freeze(Object.defineProperty({__proto__:null,Headers:qy,Request:v4,Response:b4,default:Wy,fetch:y4},Symbol.toStringTag,{value:"Module"})),_4=K_(Ro);var vd={},t1;function Hy(){if(t1)return vd;t1=1,Object.defineProperty(vd,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return vd.default=e,vd}var r1;function $y(){if(r1)return so;r1=1;var e=so&&so.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(so,"__esModule",{value:!0});const t=e(_4),r=e(Hy());class a{constructor(c){var d,f;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(d=c.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=c.signal,this.isMaybeSingle=(f=c.isMaybeSingle)!==null&&f!==void 0?f:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,d){return this.headers=new Headers(this.headers),this.headers.set(c,d),this}then(c,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let h=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var x,y,v,b;let w=null,_=null,S=null,N=p.status,R=p.statusText;if(p.ok){if(this.method!=="HEAD"){const ae=await p.text();ae===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?_=ae:_=JSON.parse(ae))}const P=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),J=(v=p.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");P&&J&&J.length>1&&(S=parseInt(J[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(w={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,S=null,N=406,R="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const P=await p.text();try{w=JSON.parse(P),Array.isArray(w)&&p.status===404&&(_=[],w=null,N=200,R="OK")}catch{p.status===404&&P===""?(N=204,R="No Content"):w={message:P}}if(w&&this.isMaybeSingle&&(!((b=w?.details)===null||b===void 0)&&b.includes("0 rows"))&&(w=null,N=200,R="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:_,count:S,status:N,statusText:R}});return this.shouldThrowOnError||(h=h.catch(p=>{var x,y,v;return{error:{message:`${(x=p?.name)!==null&&x!==void 0?x:"FetchError"}: ${p?.message}`,details:`${(y=p?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=p?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(c,d)}returns(){return this}overrideTypes(){return this}}return so.default=a,so}var n1;function Gy(){if(n1)return ao;n1=1;var e=ao&&ao.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ao,"__esModule",{value:!0});const t=e($y());class r extends t.default{select(o){let c=!1;const d=(o??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:c=!0,nullsFirst:d,foreignTable:f,referencedTable:h=f}={}){const p=h?`${h}.order`:"order",x=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${x?`${x},`:""}${o}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,c,{foreignTable:d,referencedTable:f=d}={}){const h=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(p,`${c-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:c=!1,settings:d=!1,buffers:f=!1,wal:h=!1,format:p="text"}={}){var x;const y=[o?"analyze":null,c?"verbose":null,d?"settings":null,f?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${v}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return ao.default=r,ao}var a1;function A0(){if(a1)return no;a1=1;var e=no&&no.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(no,"__esModule",{value:!0});const t=e(Gy());class r extends t.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}in(o,c){const d=Array.from(new Set(c)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:d,type:f}={}){let h="";f==="plain"?h="pl":f==="phrase"?h="ph":f==="websearch"&&(h="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${h}fts${p}.${c}`),this}match(o){return Object.entries(o).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(o,c,d){return this.url.searchParams.append(o,`not.${c}.${d}`),this}or(o,{foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,c,d){return this.url.searchParams.append(o,`${c}.${d}`),this}}return no.default=r,no}var s1;function Vy(){if(s1)return ro;s1=1;var e=ro&&ro.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ro,"__esModule",{value:!0});const t=e(A0());class r{constructor(o,{headers:c={},schema:d,fetch:f}){this.url=o,this.headers=new Headers(c),this.schema=d,this.fetch=f}select(o,{head:c=!1,count:d}={}){const f=c?"HEAD":"GET";let h=!1;const p=(o??"*").split("").map(x=>/\s/.test(x)&&!h?"":(x==='"'&&(h=!h),x)).join("");return this.url.searchParams.set("select",p),d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:c,defaultToNull:d=!0}={}){var f;const h="POST";if(c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(p.length>0){const x=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:c,ignoreDuplicates:d=!1,count:f,defaultToNull:h=!0}={}){var p;const x="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),f&&this.headers.append("Prefer",`count=${f}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const y=o.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:c}={}){var d;const f="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var c;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return ro.default=r,ro}var i1;function S4(){if(i1)return to;i1=1;var e=to&&to.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(to,"__esModule",{value:!0});const t=e(Vy()),r=e(A0());class a{constructor(c,{headers:d={},schema:f,fetch:h}={}){this.url=c,this.headers=new Headers(d),this.schemaName=f,this.fetch=h}from(c){const d=new URL(`${this.url}/${c}`);return new t.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new a(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,d={},{head:f=!1,get:h=!1,count:p}={}){var x;let y;const v=new URL(`${this.url}/rpc/${c}`);let b;f||h?(y=f?"HEAD":"GET",Object.entries(d).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{v.searchParams.append(_,S)})):(y="POST",b=d);const w=new Headers(this.headers);return p&&w.set("Prefer",`count=${p}`),new r.default({method:y,url:v,headers:w,schema:this.schemaName,body:b,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return to.default=a,to}var o1;function w4(){if(o1)return rn;o1=1;var e=rn&&rn.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(rn,"__esModule",{value:!0}),rn.PostgrestError=rn.PostgrestBuilder=rn.PostgrestTransformBuilder=rn.PostgrestFilterBuilder=rn.PostgrestQueryBuilder=rn.PostgrestClient=void 0;const t=e(S4());rn.PostgrestClient=t.default;const r=e(Vy());rn.PostgrestQueryBuilder=r.default;const a=e(A0());rn.PostgrestFilterBuilder=a.default;const o=e(Gy());rn.PostgrestTransformBuilder=o.default;const c=e($y());rn.PostgrestBuilder=c.default;const d=e(Hy());return rn.PostgrestError=d.default,rn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:c.default,PostgrestError:d.default},rn}var T4=w4();const j4=h0(T4),{PostgrestClient:E4,PostgrestQueryBuilder:SM,PostgrestFilterBuilder:wM,PostgrestTransformBuilder:TM,PostgrestBuilder:jM,PostgrestError:EM}=j4;class k4{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const a=r.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const a=this.getWebSocketConstructor();return new a(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const C4="2.15.5",A4=`realtime-js/${C4}`,R4="1.0.0",Zh=1e4,N4=1e3,D4=100;var Ml;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ml||(Ml={}));var Kr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Kr||(Kr={}));var ba;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ba||(ba={}));var e0;(function(e){e.websocket="websocket"})(e0||(e0={}));var ci;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ci||(ci={}));class O4{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const o=r.getUint8(1),c=r.getUint8(2);let d=this.HEADER_LENGTH+2;const f=a.decode(t.slice(d,d+o));d=d+o;const h=a.decode(t.slice(d,d+c));d=d+c;const p=JSON.parse(a.decode(t.slice(d,t.byteLength)));return{ref:null,topic:f,event:h,payload:p}}}class Yy{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Tr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Tr||(Tr={}));const l1=(e,t,r={})=>{var a;const o=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((c,d)=>(c[d]=I4(d,e,t,o),c),{})},I4=(e,t,r,a)=>{const o=t.find(f=>f.name===e),c=o?.type,d=r[e];return c&&!a.includes(c)?Ky(c,d):t0(d)},Ky=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return L4(t,r)}switch(e){case Tr.bool:return M4(t);case Tr.float4:case Tr.float8:case Tr.int2:case Tr.int4:case Tr.int8:case Tr.numeric:case Tr.oid:return B4(t);case Tr.json:case Tr.jsonb:return F4(t);case Tr.timestamp:return P4(t);case Tr.abstime:case Tr.date:case Tr.daterange:case Tr.int4range:case Tr.int8range:case Tr.money:case Tr.reltime:case Tr.text:case Tr.time:case Tr.timestamptz:case Tr.timetz:case Tr.tsrange:case Tr.tstzrange:return t0(t);default:return t0(t)}},t0=e=>e,M4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},B4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},F4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},L4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let c;const d=e.slice(1,r);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(f=>Ky(t,f))}return e},P4=e=>typeof e=="string"?e.replace(" ","T"):e,Xy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Th{constructor(t,r,a={},o=Zh){this.channel=t,this.event=r,this.payload=a,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var c1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(c1||(c1={}));class Bl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},o=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bl.syncState(this.state,o,c,d),this.pendingDiffs.forEach(h=>{this.state=Bl.syncDiff(this.state,h,c,d)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},o=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Bl.syncDiff(this.state,o,c,d),f())}),this.onJoin((o,c,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:d})}),this.onLeave((o,c,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,o){const c=this.cloneDeep(t),d=this.transformState(r),f={},h={};return this.map(c,(p,x)=>{d[p]||(h[p]=x)}),this.map(d,(p,x)=>{const y=c[p];if(y){const v=x.map(S=>S.presence_ref),b=y.map(S=>S.presence_ref),w=x.filter(S=>b.indexOf(S.presence_ref)<0),_=y.filter(S=>v.indexOf(S.presence_ref)<0);w.length>0&&(f[p]=w),_.length>0&&(h[p]=_)}else f[p]=x}),this.syncDiff(c,{joins:f,leaves:h},a,o)}static syncDiff(t,r,a,o){const{joins:c,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),o||(o=()=>{}),this.map(c,(f,h)=>{var p;const x=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(h),x.length>0){const y=t[f].map(b=>b.presence_ref),v=x.filter(b=>y.indexOf(b.presence_ref)<0);t[f].unshift(...v)}a(f,x,h)}),this.map(d,(f,h)=>{let p=t[f];if(!p)return;const x=h.map(y=>y.presence_ref);p=p.filter(y=>x.indexOf(y.presence_ref)<0),t[f]=p,o(f,p,h),p.length===0&&delete t[f]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const o=t[a];return"metas"in o?r[a]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[a]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var d1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(d1||(d1={}));var Fl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Fl||(Fl={}));var Za;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Za||(Za={}));class R0{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=Kr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Th(this,ba.join,this.params,this.timeout),this.rejoinTimer=new Yy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Kr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Kr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ba.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new Bl(this),this.broadcastEndpointURL=Xy(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Kr.closed){const{config:{broadcast:d,presence:f,private:h}}=this.params,p=(o=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&o!==void 0?o:[],x=!!this.bindings[Fl.PRESENCE]&&this.bindings[Fl.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,y={},v={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:x}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>t?.(Za.CHANNEL_ERROR,b)),this._onClose(()=>t?.(Za.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var w;if(this.socket.setAuth(),b===void 0){t?.(Za.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(w=_?.length)!==null&&w!==void 0?w:0,N=[];for(let R=0;R<S;R++){const O=_[R],{filter:{event:P,schema:J,table:ae,filter:Y}}=O,F=b&&b[R];if(F&&F.event===P&&F.schema===J&&F.table===ae&&F.filter===Y)N.push(Object.assign(Object.assign({},O),{id:F.id}));else{this.unsubscribe(),this.state=Kr.errored,t?.(Za.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(Za.SUBSCRIBED);return}}).receive("error",b=>{this.state=Kr.errored,t?.(Za.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t?.(Za.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this.state===Kr.joined&&t===Fl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,a)}async send(t,r={}){var a,o;if(!this._canPush()&&t.type==="broadcast"){const{event:c,payload:d}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,f,h;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Kr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ba.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(o=>{a=new Th(this,ba.leave,{},t),a.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Kr.closed,this.bindings={}}async _fetchWithTimeout(t,r,a){const o=new AbortController,c=setTimeout(()=>o.abort(),a),d=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(c),d}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Th(this,t,r,a);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>D4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var o,c;const d=t.toLocaleLowerCase(),{close:f,error:h,leave:p,join:x}=ba;if(a&&[f,h,p,x].indexOf(d)>=0&&a!==this._joinRef())return;let v=this._onMessage(d,r,a);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var w,_,S;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((S=(_=b.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===d}).map(b=>b.callback(v,a)):(c=this.bindings[d])===null||c===void 0||c.filter(b=>{var w,_,S,N,R,O;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in b){const P=b.id,J=(w=b.filter)===null||w===void 0?void 0:w.event;return P&&((_=r.ids)===null||_===void 0?void 0:_.includes(P))&&(J==="*"||J?.toLocaleLowerCase()===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const P=(R=(N=b?.filter)===null||N===void 0?void 0:N.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return P==="*"||P===((O=r?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===d}).map(b=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:_,table:S,commit_timestamp:N,type:R,errors:O}=w;v=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:N,eventType:R,new:{},old:{},errors:O}),this._getPayloadRecords(w))}b.callback(v,a)})}_isClosed(){return this.state===Kr.closed}_isJoined(){return this.state===Kr.joined}_isJoining(){return this.state===Kr.joining}_isLeaving(){return this.state===Kr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const o=t.toLocaleLowerCase(),c={type:o,filter:r,callback:a};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&R0.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ba.close,{},t)}_onError(t){this._on(ba.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=l1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=l1(t.columns,t.old_record)),r}}const jh=()=>{},bd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},z4=[1e3,2e3,5e3,1e4],U4=1e4,W4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class q4{constructor(t,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zh,this.transport=null,this.heartbeatIntervalMs=bd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jh,this.ref=0,this.reconnectTimer=null,this.logger=jh,this.conn=null,this.sendBuffer=[],this.serializer=new O4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let c;return o?c=o:typeof fetch>"u"?c=(...d)=>nc(async()=>{const{default:f}=await Promise.resolve().then(()=>Ro);return{default:f}},void 0).then(({default:f})=>f(...d)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...d)=>c(...d)},!(!((a=r?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${e0.websocket}`,this.httpEndpoint=Xy(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=k4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:R4}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Ml.connecting:return ci.Connecting;case Ml.open:return ci.Open;case Ml.closing:return ci.Closing;default:return ci.Closed}}isConnected(){return this.connectionState()===ci.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const a=`realtime:${t}`,o=this.getChannels().find(c=>c.topic===a);if(o)return o;{const c=new R0(`realtime:${t}`,r,this);return this.channels.push(c),c}}push(t){const{topic:r,event:a,payload:o,ref:c}=t,d=()=>{this.encode(t,f=>{var h;(h=this.conn)===null||h===void 0||h.send(f)})};this.log("push",`${r} ${a} (${c})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(N4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},bd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:o,payload:c,ref:d}=r,f=d?`(${d})`:"",h=c.status||"";this.log("receive",`${h} ${a} ${o} ${f}`.trim(),c),this.channels.filter(p=>p._isMember(a)).forEach(p=>p._trigger(o,c,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ba.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${a}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([W4],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const o={access_token:r,version:A4};r&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(ba.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Yy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,a,o,c,d,f,h,p,x;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(a=t?.timeout)!==null&&a!==void 0?a:Zh,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:bd.HEARTBEAT_INTERVAL,this.worker=(c=t?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=t?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:jh,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t?.reconnectAfterMs)!==null&&h!==void 0?h:(y=>z4[y-1]||U4),this.encode=(p=t?.encode)!==null&&p!==void 0?p:((y,v)=>v(JSON.stringify(y))),this.decode=(x=t?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class N0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Qr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class H4 extends N0{constructor(t,r,a){super(t),this.name="StorageApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class r0 extends N0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var $4=function(e,t,r,a){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(a.next(x))}catch(y){d(y)}}function h(x){try{p(a.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Qy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>nc(async()=>{const{default:a}=await Promise.resolve().then(()=>Ro);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},G4=()=>$4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield nc(()=>Promise.resolve().then(()=>Ro),void 0)).Response:Response}),n0=e=>{if(Array.isArray(e))return e.map(r=>n0(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const o=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[o]=n0(a)}),t},V4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var yi=function(e,t,r,a){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(a.next(x))}catch(y){d(y)}}function h(x){try{p(a.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Eh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Y4=(e,t,r)=>yi(void 0,void 0,void 0,function*(){const a=yield G4();e instanceof a&&!r?.noResolveJson?e.json().then(o=>{const c=e.status||500,d=o?.statusCode||c+"";t(new H4(Eh(o),c,d))}).catch(o=>{t(new r0(Eh(o),o))}):t(new r0(Eh(e),e))}),K4=(e,t,r,a)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!a?o:(V4(a)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(a)):o.body=a,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function ac(e,t,r,a,o,c){return yi(this,void 0,void 0,function*(){return new Promise((d,f)=>{e(r,K4(t,a,o,c)).then(h=>{if(!h.ok)throw h;return a?.noResolveJson?h:h.json()}).then(h=>d(h)).catch(h=>Y4(h,f,a))})})}function Ld(e,t,r,a){return yi(this,void 0,void 0,function*(){return ac(e,"GET",t,r,a)})}function Ia(e,t,r,a,o){return yi(this,void 0,void 0,function*(){return ac(e,"POST",t,a,o,r)})}function a0(e,t,r,a,o){return yi(this,void 0,void 0,function*(){return ac(e,"PUT",t,a,o,r)})}function X4(e,t,r,a){return yi(this,void 0,void 0,function*(){return ac(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Jy(e,t,r,a,o){return yi(this,void 0,void 0,function*(){return ac(e,"DELETE",t,a,o,r)})}var En=function(e,t,r,a){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(a.next(x))}catch(y){d(y)}}function h(x){try{p(a.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Q4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},u1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class J4{constructor(t,r={},a,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=a,this.fetch=Qy(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,a,o){return En(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},u1),o);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const h=d.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h))):(c=a,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,h&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(r),x=this._getFinalPath(p),y=yield(t=="PUT"?a0:Ia)(this.fetch,`${this.url}/object/${x}`,c,Object.assign({headers:f},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Qr(c))return{data:null,error:c};throw c}})}upload(t,r,a){return En(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,o){return En(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),f=new URL(this.url+`/object/upload/sign/${d}`);f.searchParams.set("token",r);try{let h;const p=Object.assign({upsert:u1.upsert},o),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&a instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",a)):typeof FormData<"u"&&a instanceof FormData?(h=a,h.append("cacheControl",p.cacheControl)):(h=a,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const y=yield a0(this.fetch,f.toString(),h,{headers:x});return{data:{path:c,fullPath:y.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Qr(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,r){return En(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const c=yield Ia(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:o}),d=new URL(this.url+c.url),f=d.searchParams.get("token");if(!f)throw new N0("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:f},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qr(a))return{data:null,error:a};throw a}})}update(t,r,a){return En(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return En(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qr(o))return{data:null,error:o};throw o}})}copy(t,r,a){return En(this,void 0,void 0,function*(){try{return{data:{path:(yield Ia(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qr(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,a){return En(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),c=yield Ia(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const d=a?.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qr(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,a){return En(this,void 0,void 0,function*(){try{const o=yield Ia(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),c=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qr(o))return{data:null,error:o};throw o}})}download(t,r){return En(this,void 0,void 0,function*(){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),d=c?`?${c}`:"";try{const f=this._getFinalPath(t);return{data:yield(yield Ld(this.fetch,`${this.url}/${o}/${f}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Qr(f))return{data:null,error:f};throw f}})}info(t){return En(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield Ld(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:n0(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qr(a))return{data:null,error:a};throw a}})}exists(t){return En(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield X4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qr(a)&&a instanceof r0){const o=a.originalError;if([400,404].includes(o?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),o=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&o.push(c);const f=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&o.push(h);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${a}${p}`)}}}remove(t){return En(this,void 0,void 0,function*(){try{return{data:yield Jy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}list(t,r,a){return En(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Q4),r),{prefix:t||""});return{data:yield Ia(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},a),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qr(o))return{data:null,error:o};throw o}})}listV2(t,r){return En(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield Ia(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qr(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Z4="2.12.1",eT={"X-Client-Info":`storage-js/${Z4}`};var io=function(e,t,r,a){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(a.next(x))}catch(y){d(y)}}function h(x){try{p(a.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class tT{constructor(t,r={},a,o){this.shouldThrowOnError=!1;const c=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},eT),r),this.fetch=Qy(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return io(this,void 0,void 0,function*(){try{return{data:yield Ld(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}getBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield Ld(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return io(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qr(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return io(this,void 0,void 0,function*(){try{return{data:yield a0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qr(a))return{data:null,error:a};throw a}})}emptyBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield Jy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}}class rT extends tT{constructor(t,r={},a,o){super(t,r,a,o)}from(t){return new J4(this.url,this.headers,t,this.fetch)}}const nT="2.57.4";let Ol="";typeof Deno<"u"?Ol="deno":typeof document<"u"?Ol="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ol="react-native":Ol="node";const aT={"X-Client-Info":`supabase-js-${Ol}/${nT}`},sT={headers:aT},iT={schema:"public"},oT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lT={};var cT=function(e,t,r,a){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(a.next(x))}catch(y){d(y)}}function h(x){try{p(a.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const dT=e=>{let t;return e?t=e:typeof fetch>"u"?t=Wy:t=fetch,(...r)=>t(...r)},uT=()=>typeof Headers>"u"?qy:Headers,fT=(e,t,r)=>{const a=dT(r),o=uT();return(c,d)=>cT(void 0,void 0,void 0,function*(){var f;const h=(f=yield t())!==null&&f!==void 0?f:e;let p=new o(d?.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),a(c,Object.assign(Object.assign({},d),{headers:p}))})};var hT=function(e,t,r,a){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(a.next(x))}catch(y){d(y)}}function h(x){try{p(a.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};function pT(e){return e.endsWith("/")?e:e+"/"}function gT(e,t){var r,a;const{db:o,auth:c,realtime:d,global:f}=e,{db:h,auth:p,realtime:x,global:y}=t,v={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},p),c),realtime:Object.assign(Object.assign({},x),d),storage:{},global:Object.assign(Object.assign(Object.assign({},y),f),{headers:Object.assign(Object.assign({},(r=y?.headers)!==null&&r!==void 0?r:{}),(a=f?.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>hT(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function xT(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Zy="2.71.1",xo=30*1e3,s0=3,kh=s0*xo,mT="http://localhost:9999",yT="supabase.auth.token",vT={"X-Client-Info":`gotrue-js/${Zy}`},i0="X-Supabase-Api-Version",ev={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_T=600*1e3;class D0 extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function It(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ST extends D0{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function wT(e){return It(e)&&e.name==="AuthApiError"}class tv extends D0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ws extends D0{constructor(t,r,a,o){super(t,a,o),this.name=r,this.status=a}}class Ds extends Ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function TT(e){return It(e)&&e.name==="AuthSessionMissingError"}class _d extends Ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Sd extends Ws{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class wd extends Ws{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jT(e){return It(e)&&e.name==="AuthImplicitGrantRedirectError"}class f1 extends Ws{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class o0 extends Ws{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ch(e){return It(e)&&e.name==="AuthRetryableFetchError"}class h1 extends Ws{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class l0 extends Ws{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),p1=` 	
\r=`.split(""),ET=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<p1.length;t+=1)e[p1[t].charCodeAt(0)]=-2;for(let t=0;t<Pd.length;t+=1)e[Pd[t].charCodeAt(0)]=t;return e})();function g1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Pd[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Pd[a]),t.queuedBits-=6}}function rv(e,t,r){const a=ET[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function x1(e){const t=[],r=d=>{t.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=d=>{AT(d,a,r)};for(let d=0;d<e.length;d+=1)rv(e.charCodeAt(d),o,c);return t.join("")}function kT(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function CT(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const o=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}kT(a,t)}}function AT(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function RT(e){const t=[],r={queue:0,queuedBits:0},a=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)rv(e.charCodeAt(o),r,a);return new Uint8Array(t)}function NT(e){const t=[];return CT(e,r=>t.push(r)),new Uint8Array(t)}function DT(e){const t=[],r={queue:0,queuedBits:0},a=o=>{t.push(o)};return e.forEach(o=>g1(o,r,a)),g1(null,r,a),t.join("")}function OT(e){return Math.round(Date.now()/1e3)+e}function IT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const va=()=>typeof window<"u"&&typeof document<"u",ii={tested:!1,writable:!1},nv=()=>{if(!va())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ii.tested)return ii.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ii.tested=!0,ii.writable=!0}catch{ii.tested=!0,ii.writable=!1}return ii.writable};function MT(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,c)=>{t[c]=o})}catch{}return r.searchParams.forEach((a,o)=>{t[o]=a}),t}const av=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>nc(async()=>{const{default:a}=await Promise.resolve().then(()=>Ro);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},BT=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mo=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},oi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Rs=async(e,t)=>{await e.removeItem(t)};class nu{constructor(){this.promise=new nu.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}nu.promiseConstructor=Promise;function Ah(e){const t=e.split(".");if(t.length!==3)throw new l0("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!bT.test(t[a]))throw new l0("JWT not in base64url format");return{header:JSON.parse(x1(t[0])),payload:JSON.parse(x1(t[1])),signature:RT(t[2]),raw:{header:t[0],payload:t[1]}}}async function FT(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function LT(e,t){return new Promise((a,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await e(c);if(!t(c,null,d)){a(d);return}}catch(d){if(!t(c,d)){o(d);return}}})()})}function PT(e){return("0"+e.toString(16)).substr(-2)}function zT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let o="";for(let c=0;c<56;c++)o+=r.charAt(Math.floor(Math.random()*a));return o}return crypto.getRandomValues(t),Array.from(t,PT).join("")}async function UT(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(a);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function WT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await UT(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oo(e,t,r=!1){const a=zT();let o=a;r&&(o+="/PASSWORD_RECOVERY"),await mo(e,`${t}-code-verifier`,o);const c=await WT(a);return[c,a===c?"plain":"s256"]}const qT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function HT(e){const t=e.headers.get(i0);if(!t||!t.match(qT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function $T(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function GT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const VT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lo(e){if(!VT.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Rh(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function m1(e){return JSON.parse(JSON.stringify(e))}var YT=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]]);return r};const li=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),KT=[502,503,504];async function y1(e){var t;if(!BT(e))throw new o0(li(e),0);if(KT.includes(e.status))throw new o0(li(e),e.status);let r;try{r=await e.json()}catch(c){throw new tv(li(c),c)}let a;const o=HT(e);if(o&&o.getTime()>=ev["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new h1(li(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Ds}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new h1(li(r),e.status,r.weak_password.reasons);throw new ST(li(r),e.status||500,a)}const XT=(e,t,r,a)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),r))};async function Vt(e,t,r,a){var o;const c=Object.assign({},a?.headers);c[i0]||(c[i0]=ev["2024-01-01"].name),a?.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const d=(o=a?.query)!==null&&o!==void 0?o:{};a?.redirectTo&&(d.redirect_to=a.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",h=await QT(e,t,r+f,{headers:c,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(h):{data:Object.assign({},h),error:null}}async function QT(e,t,r,a,o,c){const d=XT(t,a,o,c);let f;try{f=await e(r,Object.assign({},d))}catch(h){throw console.error(h),new o0(li(h),0)}if(f.ok||await y1(f),a?.noResolveJson)return f;try{return await f.json()}catch(h){await y1(h)}}function Ja(e){var t;let r=null;t3(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=OT(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function v1(e){const t=Ja(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Is(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function JT(e){return{data:e,error:null}}function ZT(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:o,verification_type:c}=e,d=YT(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:r,hashed_token:a,redirect_to:o,verification_type:c},h=Object.assign({},d);return{data:{properties:f,user:h},error:null}}function e3(e){return e}function t3(e){return e.access_token&&e.refresh_token&&e.expires_in}const Nh=["global","local","others"];var r3=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]]);return r};class n3{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=av(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Nh[0]){if(Nh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nh.join(", ")}`);try{return await Vt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(It(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await Vt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Is})}catch(a){if(It(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=r3(t,["options"]),o=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(o.new_email=a?.newEmail,delete o.newEmail),await Vt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:ZT,redirectTo:r?.redirectTo})}catch(r){if(It(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Vt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Is})}catch(r){if(It(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,o,c,d,f,h;try{const p={nextPage:null,lastPage:0,total:0},x=await Vt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:e3});if(x.error)throw x.error;const y=await x.json(),v=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,b=(h=(f=x.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);p[`${S}Page`]=_}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(It(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){lo(t);try{return await Vt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Is})}catch(r){if(It(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){lo(t);try{return await Vt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Is})}catch(a){if(It(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){lo(t);try{return await Vt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Is})}catch(a){if(It(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){lo(t.userId);try{const{data:r,error:a}=await Vt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:a}}catch(r){if(It(r))return{data:null,error:r};throw r}}async _deleteFactor(t){lo(t.userId),lo(t.id);try{return{data:await Vt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(It(r))return{data:null,error:r};throw r}}}function b1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function a3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const co={debug:!!(globalThis&&nv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class s3 extends sv{}async function i3(e,t,r){co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),co.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async o=>{if(o){co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{co.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw co.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new s3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(co.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}a3();const o3={url:mT,storageKey:yT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _1(e,t,r){return await r()}const uo={};class Vl{constructor(t){var r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vl.nextInstanceID,Vl.nextInstanceID+=1,this.instanceID>0&&va()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},o3),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new n3({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=av(o.fetch),this.lock=o.lock||_1,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:va()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=i3:this.lock=_1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:nv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=b1(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=b1(this.memoryStorage)),va()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=uo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=uo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=MT(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),va()&&this.detectSessionInUrl&&a!=="none"){const{data:o,error:c}=await this._getSessionFromURL(r,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),jT(c)){const h=(t=c.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return It(r)?{error:r}:{error:new tv("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,o;try{const c=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Ja}),{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const h=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(It(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(t){var r,a,o;try{let c;if("email"in t){const{email:x,password:y,options:v}=t;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await oo(this.storage,this.storageKey)),c=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:x,password:y,data:(r=v?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:w},xform:Ja})}else if("phone"in t){const{phone:x,password:y,options:v}=t;c=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:y,data:(a=v?.data)!==null&&a!==void 0?a:{},channel:(o=v?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Ja})}else throw new Sd("You must provide either an email or phone number and a password");const{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const h=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(It(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(t){try{let r;if("email"in t){const{email:c,password:d,options:f}=t;r=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:v1})}else if("phone"in t){const{phone:c,password:d,options:f}=t;r=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:v1})}else throw new Sd("You must provide either an email or phone number and a password");const{data:a,error:o}=r;return o?{data:{user:null,session:null},error:o}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new _d}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:o})}catch(r){if(It(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,o,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,a,o,c,d,f,h,p,x,y,v,b;let w,_;if("message"in t)w=t.message,_=t.signature;else{const{chain:S,wallet:N,statement:R,options:O}=t;let P;if(va())if(typeof N=="object")P=N;else{const ae=window;if("solana"in ae&&typeof ae.solana=="object"&&("signIn"in ae.solana&&typeof ae.solana.signIn=="function"||"signMessage"in ae.solana&&typeof ae.solana.signMessage=="function"))P=ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=N}const J=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in P&&P.signIn){const ae=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:J.host,uri:J.href}),R?{statement:R}:null));let Y;if(Array.isArray(ae)&&ae[0]&&typeof ae[0]=="object")Y=ae[0];else if(ae&&typeof ae=="object"&&"signedMessage"in ae&&"signature"in ae)Y=ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)w=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),_=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${J.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${J.href}`,`Issued At: ${(o=(a=O?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=O?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((d=O?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((h=O?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((p=O?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((y=(x=O?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||y===void 0)&&y.length?["Resources",...O.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const ae=await P.signMessage(new TextEncoder().encode(w),"utf8");if(!ae||!(ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=ae}}try{const{data:S,error:N}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:DT(_)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ja});if(N)throw N;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new _d}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:N})}catch(S){if(It(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await oi(this.storage,`${this.storageKey}-code-verifier`),[a,o]=(r??"").split("/");try{const{data:c,error:d}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Ja});if(await Rs(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new _d}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:d})}catch(c){if(It(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(t){try{const{options:r,provider:a,token:o,access_token:c,nonce:d}=t,f=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:o,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ja}),{data:h,error:p}=f;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new _d}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(r){if(It(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,o,c,d;try{if("email"in t){const{email:f,options:h}=t;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await oo(this.storage,this.storageKey));const{error:y}=await Vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(a=h?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in t){const{phone:f,options:h}=t,{data:p,error:x}=await Vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(c=h?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(d=h?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:x}}throw new Sd("You must provide either an email or phone number.")}catch(f){if(It(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(t){var r,a;try{let o,c;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,c=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:f}=await Vt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:Ja});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const h=d.session,p=d.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(o){if(It(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var r,a,o;try{let c=null,d=null;return this.flowType==="pkce"&&([c,d]=await oo(this.storage,this.storageKey)),await Vt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:JT})}catch(c){if(It(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new Ds;const{error:o}=await Vt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(It(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:o,options:c}=t,{error:d}=await Vt(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in t){const{phone:a,type:o,options:c}=t,{data:d,error:f}=await Vt(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:f}}throw new Sd("You must provide either an email or phone number and a type")}catch(r){if(It(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<kh:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const d=await oi(this.userStorage,this.storageKey+"-user");d?.user?t.user=d.user:t.user=Rh()}if(this.storage.isServer&&t.user){let d=this.suppressGetSessionWarning;t=new Proxy(t,{get:(h,p,x)=>(!d&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,x))})}return{data:{session:t},error:null}}const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{session:null},error:c}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Is}):await this._useSession(async r=>{var a,o,c;const{data:d,error:f}=r;if(f)throw f;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ds}:await Vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Is})})}catch(r){if(It(r))return TT(r)&&(await this._removeSession(),await Rs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:o,error:c}=a;if(c)throw c;if(!o.session)throw new Ds;const d=o.session;let f=null,h=null;this.flowType==="pkce"&&t.email!=null&&([f,h]=await oo(this.storage,this.storageKey));const{data:p,error:x}=await Vt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:h}),jwt:d.access_token,xform:Is});if(x)throw x;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(a){if(It(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ds;const r=Date.now()/1e3;let a=r,o=!0,c=null;const{payload:d}=Ah(t.access_token);if(d.exp&&(a=d.exp,o=a<=r),o){const{session:f,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:h}=await this._getUser(t.access_token);if(h)throw h;c={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(It(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:d,error:f}=r;if(f)throw f;t=(a=d.session)!==null&&a!==void 0?a:void 0}if(!t?.refresh_token)throw new Ds;const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{user:null,session:null},error:c}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(It(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!va())throw new wd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new wd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new f1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new f1("No code detected.");const{data:R,error:O}=await this._exchangeCodeForSession(t.code);if(O)throw O;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:o,access_token:c,refresh_token:d,expires_in:f,expires_at:h,token_type:p}=t;if(!c||!f||!d||!p)throw new wd("No session defined in URL");const x=Math.round(Date.now()/1e3),y=parseInt(f);let v=x+y;h&&(v=parseInt(h));const b=v-x;b*1e3<=xo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const w=v-y;x-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,x):x-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,x);const{data:_,error:S}=await this._getUser(c);if(S)throw S;const N={provider_token:a,provider_refresh_token:o,access_token:c,expires_in:y,expires_at:v,refresh_token:d,token_type:p,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:t.type},error:null}}catch(a){if(It(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await oi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:o,error:c}=r;if(c)return{error:c};const d=(a=o.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:f}=await this.admin.signOut(d,t);if(f&&!(wT(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return t!=="others"&&(await this._removeSession(),await Rs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=IT(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,o;try{const{data:{session:c},error:d}=r;if(d)throw d;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,r={}){let a=null,o=null;this.flowType==="pkce"&&([a,o]=await oo(this.storage,this.storageKey,!0));try{return await Vt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(It(c))return{data:null,error:c};throw c}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(It(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:o}=await this._useSession(async c=>{var d,f,h,p,x;const{data:y,error:v}=c;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Vt(this.fetch,"GET",b,{headers:this.headers,jwt:(x=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(o)throw o;return va()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:t.provider,url:a?.url},error:null}}catch(a){if(It(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,o;const{data:c,error:d}=r;if(d)throw d;return await Vt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(It(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await LT(async o=>(o>0&&await FT(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await Vt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ja})),(o,c)=>{const d=200*Math.pow(2,o);return c&&Ch(c)&&Date.now()+d-a<xo})}catch(a){if(this._debug(r,"error",a),It(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),va()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const o=await oi(this.storage,this.storageKey);if(o&&this.userStorage){let d=await oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await mo(this.userStorage,this.storageKey+"-user",d)),o.user=(t=d?.user)!==null&&t!==void 0?t:Rh()}else if(o&&!o.user&&!o.user){const d=await oi(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await Rs(this.storage,this.storageKey+"-user"),await mo(this.storage,this.storageKey,o)):o.user=Rh()}if(this._debug(a,"session from storage",o),!this._isValidSession(o)){this._debug(a,"session is not valid"),o!==null&&await this._removeSession();return}const c=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<kh;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${kh}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),Ch(d)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(o.access_token);!f&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(a,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(a,"error",o),console.error(o);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new Ds;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new nu;const{data:c,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!c.session)throw new Ds;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={session:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(o,"error",c),It(c)){const d={session:null,error:c};return Ch(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,a=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,r)}catch(h){c.push(h)}});if(await Promise.all(d),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await mo(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const c=m1(o);await mo(this.storage,this.storageKey,c)}else{const o=m1(r);await mo(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Rs(this.storage,this.storageKey),await Rs(this.storage,this.storageKey+"-code-verifier"),await Rs(this.storage,this.storageKey+"-user"),this.userStorage&&await Rs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&va()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),xo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((a.expires_at*1e3-t)/xo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${xo}ms, refresh threshold is ${s0} ticks`),o<=s0&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof sv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!va()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const o=[`provider=${encodeURIComponent(r)}`];if(a?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&o.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,d]=await oo(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(f.toString())}if(a?.queryParams){const c=new URLSearchParams(a.queryParams);o.push(c.toString())}return a?.skipBrowserRedirect&&o.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:o,error:c}=r;return c?{data:null,error:c}:await Vt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(It(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,o;const{data:c,error:d}=r;if(d)return{data:null,error:d};const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:h,error:p}=await Vt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(It(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:o,error:c}=r;if(c)return{data:null,error:c};const{data:d,error:f}=await Vt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(r){if(It(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:o,error:c}=r;return c?{data:null,error:c}:await Vt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(It(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=t?.factors||[],o=a.filter(d=>d.factor_type==="totp"&&d.status==="verified"),c=a.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:a,totp:o,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:o},error:c}=t;if(c)return{data:null,error:c};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Ah(o.access_token);let f=null;d.aal&&(f=d.aal);let h=f;((a=(r=o.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(h="aal2");const x=d.amr||[];return{data:{currentLevel:f,nextLevel:h,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(f=>f.kid===t);if(a)return a;const o=Date.now();if(a=this.jwks.keys.find(f=>f.kid===t),a&&this.jwks_cached_at+_T>o)return a;const{data:c,error:d}=await Vt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,a=c.keys.find(f=>f.kid===t),!a)?null:a}async getClaims(t,r={}){try{let a=t;if(!a){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};a=b.session.access_token}const{header:o,payload:c,signature:d,raw:{header:f,payload:h}}=Ah(a);r?.allowExpired||$T(c.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:c,header:o,signature:d},error:null}}const x=GT(o.alg),y=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,y,d,NT(`${f}.${h}`)))throw new l0("Invalid JWT signature");return{data:{claims:c,header:o,signature:d},error:null}}catch(a){if(It(a))return{data:null,error:a};throw a}}}Vl.nextInstanceID=0;const l3=Vl;class c3 extends l3{constructor(t){super(t)}}var d3=function(e,t,r,a){function o(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(x){try{p(a.next(x))}catch(y){d(y)}}function h(x){try{p(a.throw(x))}catch(y){d(y)}}function p(x){x.done?c(x.value):o(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class u3{constructor(t,r,a){var o,c,d;this.supabaseUrl=t,this.supabaseKey=r;const f=xT(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:iT,realtime:lT,auth:Object.assign(Object.assign({},oT),{storageKey:h}),global:sT},x=gT(a??{},p);this.storageKey=(o=x.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=x.global.headers)!==null&&c!==void 0?c:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,x.global.fetch),this.fetch=fT(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new E4(new URL("rest/v1",f).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new rT(this.storageUrl.href,this.headers,this.fetch,a?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new x4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return d3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:o,userStorage:c,storageKey:d,flowType:f,lock:h,debug:p},x,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c3({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),x),storageKey:d,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:o,userStorage:c,flowType:f,lock:h,debug:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new q4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a?.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const f3=(e,t,r)=>new u3(e,t,r);function h3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}h3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const p3="https://wuluriiajnaruvaldlhb.supabase.co",g3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bHVyaWlham5hcnV2YWxkbGhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4MDc4OTQsImV4cCI6MjA3MzM4Mzg5NH0.-Dx4fALDwoKHjsxOy1hKsME_DG4ZCQi2PdLCq5wV_hI",x3=async(e,t)=>{const r=e instanceof Request?e:void 0,a=r?.url??(typeof e=="string"?e:e instanceof URL?e.toString():""),o=(t?.method??r?.method??"GET").toUpperCase();if(a.includes("/rest/v1"))try{const{pathname:c}=new URL(a);console.info("[supabase]",o,c),c.includes("pg_timezone_names")&&console.trace("Timezone list requested from Supabase")}catch{console.info("[supabase]",o,a)}return fetch(e,t)},Ne=f3(p3,g3,{global:{fetch:x3}}),Ms=e=>{let t=0;for(let r=0;r<e.length;r++){const a=e.charCodeAt(r);t=(t<<5)-t+a,t=t&t}return t.toString()},m3=e=>{let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r++){const a=e.charCodeAt(r);t=(t<<5)-t+a,t=t&t}return t.toString()},iv=T.createContext(void 0),on=()=>{const e=T.useContext(iv);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},y3=({children:e})=>{const[t,r]=T.useState(null),[a,o]=T.useState(null),[c,d]=T.useState(!0);T.useEffect(()=>{const _=setTimeout(()=>{c&&d(!1)},3e4);(async()=>{try{const{data:{session:R}}=await Ne.auth.getSession();if(R?.user)o(R.user),await f(R.user.id);else{const O=localStorage.getItem("pos_user");O&&r(JSON.parse(O))}}catch{}finally{d(!1)}})();const{data:{subscription:N}}=Ne.auth.onAuthStateChange(async(R,O)=>{if(R==="SIGNED_IN"&&O?.user){o(O.user);try{await f(O.user.id)}catch{}}else R==="SIGNED_OUT"?(o(null),r(null),localStorage.removeItem("pos_user")):R==="TOKEN_REFRESHED"&&O?.user&&o(O.user)});return()=>{clearTimeout(_),N.unsubscribe()}},[]);const f=async _=>{try{const{data:S,error:N}=await Ne.from("users").select("*").eq("user_id",parseInt(_)).single();if(N){console.error("Error loading user:",N),r(null);return}const R={user_id:S.user_id,username:S.username,role:S.role,active:S.active,icon:S.icon,business_id:S.business_id??null};r(R),localStorage.setItem("pos_user",JSON.stringify(R))}catch(S){console.error("Error in loadUserProfile:",S),r(null)}},h=async(_,S)=>{try{d(!0);const N=Ms(S),{data:R,error:O}=await Ne.from("users").select("business_id").eq("username",_).eq("password_hash",N).eq("active",!0).single();return O||!R?{success:!1}:{success:!0,businessId:R.business_id}}catch{return{success:!1}}finally{d(!1)}},p=async(_,S)=>{try{d(!0);const N=await x(_,S);return N&&localStorage.setItem("lastLogin",new Date().toLocaleString()),N}catch{return!1}finally{d(!1)}},x=async(_,S)=>{try{const N=Ms(S),{data:R,error:O}=await Ne.from("users").select("*").eq("username",_).eq("password_hash",N).eq("active",!0).single();if(O||!R)return!1;const P={user_id:R.user_id,username:R.username,role:R.role,active:R.active,icon:R.icon,business_id:R.business_id??null,last_used:R.last_used};return r(P),localStorage.setItem("pos_user",JSON.stringify(P)),localStorage.setItem("lastLogin",new Date().toLocaleString()),localStorage.setItem("lastPassword",S),await Ne.from("users").update({last_used:new Date().toISOString()}).eq("user_id",R.user_id),!0}catch{return!1}},w={user:t,supabaseUser:a,login:p,authenticate:h,register:async(_,S,N)=>{try{d(!0);const{data:R}=await Ne.from("users").select("user_id").eq("username",_).single();if(R)return console.error("Username already exists"),{success:!1};const{data:O}=await Ne.from("business_info").select("business_id").eq("name",N).single();if(O)return console.error("Business name already exists"),{success:!1};const{data:P,error:J}=await Ne.from("business_info").insert({name:N,business_name:N,business_type:"Retail Store",address:"Default Address",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("business_id").single();if(J||!P)return console.error("Error creating business:",J),{success:!1};const ae=Ms(S),{data:Y,error:F}=await Ne.from("users").insert({username:_,password_hash:ae,role:"Owner",active:!0,business_id:P.business_id,created_at:new Date().toISOString()}).select("*").single();if(F||!Y)return console.error("Error creating user:",F),await Ne.from("business_info").delete().eq("business_id",P.business_id),{success:!1};try{const q=Ms("admin123"),de=`admin_${P.business_id}`;await Ne.from("users").insert({username:de,password_hash:q,role:"Admin",active:!0,business_id:P.business_id,created_at:new Date().toISOString()}),console.log("Admin account created successfully for business:",P.business_id,"with username:",de)}catch(q){console.warn("Failed to create admin account:",q)}const Q={user_id:Y.user_id,username:Y.username,role:Y.role,active:Y.active,icon:Y.icon,business_id:Y.business_id};return r(Q),localStorage.setItem("pos_user",JSON.stringify(Q)),localStorage.setItem("current_business_id",P.business_id.toString()),localStorage.setItem("lastLogin",new Date().toLocaleString()),{success:!0,adminCredentials:{username:`admin_${P.business_id}`,password:"admin123",businessId:P.business_id}}}catch(R){return console.error("Registration error:",R),{success:!1}}finally{d(!1)}},switchUser:async(_,S,N=!1)=>{try{d(!0),console.log("Switching to user ID:",_,"with",N?"PIN":"password","length:",S.length);let R,O;if(N){const J=await Ne.from("users").select("*").eq("user_id",_).eq("pin",S).eq("active",!0).single();R=J.data,O=J.error}else{const J=Ms(S);console.log("Hashed password:",J),console.log("Target user ID:",_);const{data:ae}=await Ne.from("users").select("password_hash, username").eq("user_id",_).single();console.log("User data from DB:",ae),console.log("Expected hash:",J),console.log("Actual hash in DB:",ae?.password_hash);let Y=await Ne.from("users").select("*").eq("user_id",_).eq("password_hash",J).eq("active",!0).single();if(Y.error||!Y.data){console.log("First attempt failed, trying with integer hash");const F=parseInt(J);Y=await Ne.from("users").select("*").eq("user_id",_).eq("password_hash",F).eq("active",!0).single()}if(Y.error||!Y.data){console.log("Integer hash failed, trying with alternative hash function");const F=m3(S);console.log("Alternative hash:",F),Y=await Ne.from("users").select("*").eq("user_id",_).eq("password_hash",F).eq("active",!0).single()}(Y.error||!Y.data)&&(console.log("Alternative hash failed, trying with stored hash for debugging"),Y=await Ne.from("users").select("*").eq("user_id",_).eq("password_hash",ae?.password_hash).eq("active",!0).single(),Y.data&&console.log("SUCCESS with stored hash! This means the password is correct but hash function is inconsistent")),R=Y.data,O=Y.error}if(O||!R)return console.error("User switch failed:",O),console.error("Query result - data:",R,"error:",O),!1;console.log("Found target user data:",R),await Ne.from("users").update({last_used:new Date().toISOString()}).eq("user_id",_);const P={user_id:R.user_id,username:R.username,role:R.role,active:R.active,icon:R.icon,business_id:R.business_id??null,last_used:new Date().toISOString(),pin:R.pin};return console.log("Before switch - Current user:",t?.username,"Role:",t?.role),r(P),localStorage.setItem("pos_user",JSON.stringify(P)),localStorage.setItem("lastLogin",new Date().toLocaleString()),N||localStorage.setItem("lastPassword",S),await new Promise(J=>setTimeout(J,50)),console.log("After switch - New user:",P.username,"Role:",P.role),console.log("User switched successfully to:",P.username,"Role:",P.role),console.log("Updated localStorage user:",JSON.parse(localStorage.getItem("pos_user")||"{}")),console.log("User state should now be updated - no redirect should occur"),!0}catch(R){return console.error("User switch error:",R),!1}finally{d(!1)}},logout:async()=>{try{a&&await Ne.auth.signOut(),r(null),o(null),localStorage.removeItem("pos_user"),localStorage.removeItem("lastPassword"),window.location.href="/retailpos/login"}catch{window.location.href="/retailpos/login"}},loading:c,currentUserId:a?.id||t?.user_id?.toString()};return s.jsx(iv.Provider,{value:w,children:e})},v3=T.createContext(void 0),b3=({children:e})=>{const{user:t,loading:r}=on(),[a,o]=T.useState(null),[c,d]=T.useState(!0),[f,h]=T.useState(null),p=T.useCallback(async()=>{if(!t?.business_id){o(null),d(!1);return}try{d(!0),h(null);const{data:v,error:b}=await Ne.from("business_info").select("*").eq("business_id",t.business_id).single();if(b)throw b;o(v),localStorage.setItem("current_business_id",v.business_id.toString())}catch(v){console.error("Error loading business:",v),h(v instanceof Error?v.message:"Failed to load business"),o(null)}finally{d(!1)}},[t]),x=T.useCallback(async()=>{await p()},[p]);T.useEffect(()=>{r||p()},[p,r]);const y={currentBusiness:a,currentBusinessId:a?.business_id??null,loading:c||r,error:f,refreshBusiness:x};return s.jsx(v3.Provider,{value:y,children:e})},ov=T.createContext(void 0),_3=({children:e})=>{const[t,r]=T.useState(!1);return s.jsx(ov.Provider,{value:{isCollapsed:t,setIsCollapsed:r},children:e})},O0=()=>{const e=T.useContext(ov);if(e===void 0)throw new Error("useNav must be used within a NavProvider");return e},S1={Admin:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Owner:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Manager:{canManageUsers:!1,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!1,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Cashier:{canManageUsers:!1,canManageProducts:!1,canProcessSales:!0,canViewReports:!1,canChangeSettings:!1,canUploadImages:!1,canLookupProducts:!0,canLookupCustomers:!0}},lv=T.createContext(void 0),S3=({children:e})=>{const{user:t}=on(),r=t?.role||"Cashier",a=r.charAt(0).toUpperCase()+r.slice(1).toLowerCase(),o=S1[a]||S1.Cashier,c=h=>o[h]||!1,f={userRole:a,permissions:o,hasPermission:c,canAccessRoute:h=>{switch(h){case"/admin":return c("canManageUsers");case"/products":return c("canManageProducts")||c("canLookupProducts");case"/sales":return c("canProcessSales");case"/transactions":return c("canProcessSales");case"/side-businesses":return c("canProcessSales");case"/reminders":return c("canProcessSales");case"/customers":return c("canLookupCustomers");case"/":return!0;default:return!0}}};return s.jsx(lv.Provider,{value:f,children:e})},au=()=>{const e=T.useContext(lv);if(e===void 0)throw new Error("useRole must be used within a RoleProvider");return e},w3=T.createContext(void 0),T3=({children:e})=>{const[t,r]=T.useState(null),[a,o]=T.useState(!1);T.useEffect(()=>{const f=sessionStorage.getItem("pin_validated");r(f==="true")},[]);const c=async f=>{o(!0);const h="1967";return await new Promise(p=>setTimeout(p,500)),f===h?(r(!0),sessionStorage.setItem("pin_validated","true"),o(!1),!0):(r(!1),o(!1),!1)},d=f=>{r(f)};return s.jsx(w3.Provider,{value:{isPinValid:t,isCheckingPin:a,validatePin:c,setPinValid:d},children:e})},j3=()=>{const{isCollapsed:e,setIsCollapsed:t}=O0();T.useEffect(()=>{const r=o=>{if(e)return;const c=document.querySelector("nav");if(c&&c.contains(o.target))return;o.target.closest('button, a, input, select, textarea, [role="button"], [onclick]')||t(!0)},a=setTimeout(()=>{document.addEventListener("click",r)},100);return()=>{clearTimeout(a),document.removeEventListener("click",r)}},[e,t])},E3="_container_1374x_18",k3="_header_1374x_24",C3="_headerContent_1374x_30",A3="_headerLeft_1374x_55",R3="_logo_1374x_60",N3="_headerRight_1374x_66",D3="_backLink_1374x_71",O3="_mainContent_1374x_83",I3="_formContainer_1374x_89",M3="_formWrapper_1374x_109",B3="_formHeader_1374x_118",F3="_formTitle_1374x_122",L3="_formSubtitle_1374x_129",P3="_form_1374x_89",z3="_label_1374x_142",U3="_input_1374x_150",W3="_inputError_1374x_166",q3="_passwordContainer_1374x_170",H3="_passwordToggle_1374x_174",$3="_error_1374x_187",G3="_errorMessage_1374x_193",V3="_formOptions_1374x_204",Y3="_rememberMe_1374x_210",K3="_checkbox_1374x_215",X3="_checkboxLabel_1374x_223",Q3="_forgotPassword_1374x_229",J3="_forgotPasswordLink_1374x_233",Z3="_submitButton_1374x_248",ej="_backButton_1374x_274",tj="_buttonGroup_1374x_291",rj="_socialLogin_1374x_320",nj="_divider_1374x_324",aj="_dividerLine_1374x_328",sj="_dividerText_1374x_337",ij="_socialButtons_1374x_350",oj="_socialButton_1374x_350",lj="_successMessage_1374x_390",cj="_successIcon_1374x_397",dj="_successTitle_1374x_418",uj="_successText_1374x_424",fj="_imageContainer_1374x_429",pt={container:E3,header:k3,headerContent:C3,headerLeft:A3,logo:R3,headerRight:N3,backLink:D3,mainContent:O3,formContainer:I3,formWrapper:M3,formHeader:B3,formTitle:F3,formSubtitle:L3,form:P3,label:z3,input:U3,inputError:W3,passwordContainer:q3,passwordToggle:H3,error:$3,errorMessage:G3,formOptions:V3,rememberMe:Y3,checkbox:K3,checkboxLabel:X3,forgotPassword:Q3,forgotPasswordLink:J3,submitButton:Z3,backButton:ej,buttonGroup:tj,socialLogin:rj,divider:nj,dividerLine:aj,dividerText:sj,socialButtons:ij,socialButton:oj,successMessage:lj,successIcon:cj,successTitle:dj,successText:uj,imageContainer:fj},cv=()=>{const e=Ba(),{login:t,loading:r}=on(),[a,o]=T.useState({email:"",password:"",rememberMe:!1}),[c,d]=T.useState({}),[f,h]=T.useState(!1),[p,x]=T.useState(!1),[y,v]=T.useState(!1),[b,w]=T.useState(!1),[_,S]=T.useState(!1),N=q=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(q),R=q=>{d(de=>{const te={...de};return delete te[q],te})},O=()=>{let q=!0;const de={};return a.email.trim()?N(a.email)||(de.email="Please enter a valid email address",q=!1):(de.email="Email is required",q=!1),a.password||(de.password="Password is required",q=!1),d(de),q},P=()=>{let q=!0;const de={};return a.email.trim()?N(a.email)||(de.resetEmail="Please enter a valid email address",q=!1):(de.resetEmail="Email is required",q=!1),d(de),q},J=q=>{const{name:de,value:te,type:ne,checked:me}=q.target;o(re=>({...re,[de]:ne==="checkbox"?me:te})),c[de]&&R(de)},ae=async q=>{q.preventDefault(),O()&&(S(!0),await t(a.email,a.password)?e("/select-user"):d({general:"Invalid email or password"}),S(!1))},Y=async q=>{q.preventDefault(),P()&&(S(!0),setTimeout(()=>{S(!1),w(!0)},2e3))},F=()=>{h(!f)},Q=q=>{q.preventDefault(),x(!0),d({})},oe=()=>{x(!1),w(!1),v(!1),d({}),o(q=>({...q,password:""}))};return s.jsxs("div",{className:pt.container,children:[s.jsx("header",{className:pt.header,children:s.jsxs("div",{className:pt.headerContent,children:[s.jsx("div",{className:pt.headerLeft,children:s.jsx("h1",{className:pt.logo,children:"TillPoint"})}),s.jsx("div",{className:pt.headerRight,children:s.jsx("a",{href:"/",className:pt.backLink,children:" Back to Home"})})]})}),s.jsxs("div",{className:pt.mainContent,children:[s.jsx("div",{className:pt.formContainer,children:s.jsxs("div",{className:pt.formWrapper,children:[!p&&!y&&!b&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:pt.formHeader,children:[s.jsx("h2",{className:pt.formTitle,children:"Welcome Back"}),s.jsx("p",{className:pt.formSubtitle,children:"Sign in to your TillPoint account"})]}),s.jsxs("form",{onSubmit:ae,className:pt.form,children:[c.general&&s.jsx("div",{className:pt.errorMessage,children:c.general}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:pt.label,children:"Email Address"}),s.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:J,required:!0,className:`${pt.input} ${c.email?pt.inputError:""}`,placeholder:"Enter your email"}),c.email&&s.jsx("span",{className:pt.error,children:c.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:pt.label,children:"Password"}),s.jsxs("div",{className:pt.passwordContainer,children:[s.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:a.password,onChange:J,required:!0,className:`${pt.input} ${c.password?pt.inputError:""}`,placeholder:"Enter your password"}),s.jsx("button",{type:"button",onClick:F,className:pt.passwordToggle,children:s.jsx("i",{className:`fas ${f?"fa-eye-slash":"fa-eye"}`})})]}),c.password&&s.jsx("span",{className:pt.error,children:c.password})]}),s.jsxs("div",{className:pt.formOptions,children:[s.jsxs("div",{className:pt.rememberMe,children:[s.jsx("input",{id:"remember-me",name:"rememberMe",type:"checkbox",checked:a.rememberMe,onChange:J,className:pt.checkbox}),s.jsx("label",{htmlFor:"remember-me",className:pt.checkboxLabel,children:"Remember me"})]}),s.jsx("div",{className:pt.forgotPassword,children:s.jsx("button",{type:"button",onClick:Q,className:pt.forgotPasswordLink,children:"Forgot your password?"})})]}),s.jsx("button",{type:"submit",className:pt.submitButton,disabled:_,children:_?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-spinner fa-spin"}),"Signing In..."]}):"Sign In"})]}),s.jsxs("div",{className:pt.socialLogin,children:[s.jsxs("div",{className:pt.divider,children:[s.jsx("div",{className:pt.dividerLine}),s.jsx("div",{className:pt.dividerText,children:s.jsx("span",{children:"Or continue with"})})]}),s.jsxs("div",{className:pt.socialButtons,children:[s.jsxs("button",{type:"button",className:pt.socialButton,children:[s.jsx("i",{className:"fab fa-google"}),"Google"]}),s.jsxs("button",{type:"button",className:pt.socialButton,children:[s.jsx("i",{className:"fab fa-microsoft"}),"Microsoft"]})]})]})]}),p&&!b&&s.jsxs("form",{onSubmit:Y,className:pt.form,children:[s.jsxs("div",{className:pt.formHeader,children:[s.jsx("h3",{className:pt.formTitle,children:"Reset Password"}),s.jsx("p",{className:pt.formSubtitle,children:"Enter your email address and we'll send you a link to reset your password"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reset-email",className:pt.label,children:"Email Address"}),s.jsx("input",{type:"email",id:"reset-email",name:"email",value:a.email,onChange:J,required:!0,className:`${pt.input} ${c.resetEmail?pt.inputError:""}`,placeholder:"Enter your email"}),c.resetEmail&&s.jsx("span",{className:pt.error,children:c.resetEmail})]}),s.jsxs("div",{className:pt.buttonGroup,children:[s.jsx("button",{type:"button",onClick:oe,className:pt.backButton,children:"Back to Sign In"}),s.jsx("button",{type:"submit",className:pt.submitButton,disabled:_,children:_?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-spinner fa-spin"}),"Sending..."]}):"Send Reset Link"})]})]}),y&&s.jsxs("div",{className:pt.successMessage,children:[s.jsx("div",{className:pt.successIcon,children:s.jsx("i",{className:"fas fa-check"})}),s.jsx("h3",{className:pt.successTitle,children:"Welcome Back!"}),s.jsx("p",{className:pt.successText,children:"You have successfully signed in to your account."}),s.jsx("button",{onClick:handleGoToStaffLogin,className:pt.submitButton,children:"Go to Staff Login"})]}),b&&s.jsxs("div",{className:pt.successMessage,children:[s.jsx("div",{className:pt.successIcon,children:s.jsx("i",{className:"fas fa-envelope"})}),s.jsx("h3",{className:pt.successTitle,children:"Reset Link Sent!"}),s.jsx("p",{className:pt.successText,children:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions."}),s.jsx("button",{onClick:oe,className:pt.submitButton,children:"Back to Sign In"})]})]})}),s.jsx("div",{className:pt.imageContainer})]})]})},hj=({children:e})=>{const{user:t,supabaseUser:r,loading:a}=on();return a?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Loading..."})]})}):!t&&!r?s.jsx(cv,{}):s.jsx(s.Fragment,{children:e})},Rl=({children:e,requiredPermission:t,fallbackRoute:r="/"})=>{const a=Ea(),{canAccessRoute:o,hasPermission:c}=au();return o(a.pathname)?t&&!c(t)?s.jsx(Pm,{to:r,replace:!0}):s.jsx(s.Fragment,{children:e}):s.jsx(Pm,{to:r,replace:!0})},pj=()=>{const e=Ea(),{isCollapsed:t,setIsCollapsed:r}=O0(),{canAccessRoute:a}=au(),c=[{path:"/dashboard",label:"Dashboard",icon:"fas fa-home"},{path:"/products",label:"Products",icon:"fas fa-box"},{path:"/sales",label:"Sales",icon:"fas fa-dollar-sign"},{path:"/transactions",label:"Transactions",icon:"fas fa-receipt"},{path:"/side-businesses",label:"Side Businesses",icon:"fas fa-briefcase"},{path:"/reminders",label:"Reminders",icon:"fas fa-sticky-note"},{path:"/admin",label:"Admin",icon:"fas fa-users-cog"}].filter(d=>a(d.path));return s.jsxs("nav",{style:{width:t?"70px":"200px",height:"100vh",background:"#1a1a1a",borderRight:"1px solid #333333",display:"flex",flexDirection:"column",position:"fixed",left:0,top:0,zIndex:50,padding:t?"20px 10px 20px 10px":"20px 16px 20px 16px",boxShadow:"2px 0 8px rgba(0, 0, 0, 0.3)",transition:"width 0.3s ease, padding 0.3s ease"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:t?"center":"flex-start",gap:"12px",marginBottom:"32px",paddingBottom:"16px",borderBottom:"1px solid #333333"},children:[s.jsx("div",{onClick:()=>r(!t),style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:d=>d.target.style.setProperty("background-color","#333333"),onMouseLeave:d=>d.target.style.setProperty("background-color","transparent"),children:s.jsx("div",{style:{width:"16px",height:"2px",background:"#ffffff",position:"relative",transition:"transform 0.3s ease"},children:s.jsx("div",{style:{position:"absolute",top:"6px",left:0,width:"16px",height:"2px",background:"#ffffff",transition:"transform 0.3s ease"}})})}),!t&&s.jsx("h1",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"bold",margin:0,transition:"opacity 0.3s ease"},children:"Retail POS"})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1,overflowY:"auto"},children:c.map(d=>s.jsxs(Os,{to:d.path,style:{display:"flex",alignItems:"center",justifyContent:t?"center":"flex-start",gap:"12px",padding:t?"12px 8px":"12px 16px",borderRadius:"8px",textDecoration:"none",transition:"all 0.2s ease",background:e.pathname===d.path?"#333333":"transparent",color:e.pathname===d.path?"#ffffff":"#cccccc"},onMouseEnter:f=>{if(e.pathname!==d.path){const h=f.currentTarget;h.style.backgroundColor="#333333",h.style.color="#ffffff"}},onMouseLeave:f=>{if(e.pathname!==d.path){const h=f.currentTarget;h.style.backgroundColor="transparent",h.style.color="#cccccc"}},children:[s.jsx("i",{className:d.icon,style:{fontSize:"16px",width:"20px"}}),!t&&s.jsx("span",{style:{fontSize:"13px",fontWeight:"500",transition:"opacity 0.3s ease"},children:d.label})]},d.path))})]})},gj=({isOpen:e,onClose:t,onUserSwitch:r})=>{const{user:a,switchUser:o}=on(),[c,d]=T.useState([]),[f,h]=T.useState(!0),[p,x]=T.useState(null),[y,v]=T.useState(!1),[b,w]=T.useState(""),[_,S]=T.useState(""),[N,R]=T.useState(!1),[O,P]=T.useState(!1),[J,ae]=T.useState(""),[Y,F]=T.useState(""),[Q,oe]=T.useState(!1),[q,de]=T.useState(!1);T.useEffect(()=>{e&&a?.business_id&&te()},[e,a?.business_id]),T.useEffect(()=>{e&&a?.pin&&!Q&&P(!0)},[e,a?.pin,Q]);const te=async()=>{if(a?.business_id)try{h(!0);const{data:C,error:X}=await Ne.from("users").select("*").eq("business_id",a.business_id).eq("active",!0).order("user_id",{ascending:!1});if(X){console.error("Error fetching users:",X);return}d(C||[])}catch(C){console.error("Error fetching users:",C)}finally{h(!1)}},ne=C=>{x(C),v(!0),w(""),S(""),de(!1)},me=async C=>{if(C.preventDefault(),!(!p||!b)){R(!0),S("");try{await r(p,b,q)}catch(X){console.log("Password error:",X),S(q?"Invalid PIN. Please try again.":"Invalid password. Please try again.")}finally{R(!1)}}},re=()=>{v(!1),x(null),w(""),S(""),R(!1),de(!1)},be=async C=>{if(C.preventDefault(),!J){F("Please enter your PIN");return}a?.pin&&a.pin===J?(P(!1),oe(!0),ae(""),F("")):F("Invalid PIN. Please try again.")},W=C=>{switch(C.toLowerCase()){case"admin":return"#dc2626";case"owner":return"#7c3aed";case"manager":return"#ea580c";case"cashier":return"#2563eb";default:return"#6b7280"}},xe=C=>{if(!C)return"Never";const X=new Date(C);return Number.isNaN(X.getTime())?"Never":X.toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})};return e?s.jsx("div",{style:{position:"fixed",inset:"0",backgroundColor:"#0b0d10",backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02) 2px, transparent 2px, transparent 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",zIndex:9999},children:s.jsxs("div",{style:{background:"transparent",width:"100%",maxWidth:"1200px",padding:"20px"},children:[s.jsx("div",{style:{background:"#000000",borderRadius:"12px",border:"4px solid #4a5568",boxShadow:"inset 0 0 20px rgba(0,0,0,0.5)",padding:"16px"},children:s.jsxs("div",{style:{background:"#000000",borderRadius:"8px",padding:"24px",position:"relative",overflow:"hidden",height:"700px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid #4a5568",position:"relative"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#ef4444"}}),s.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#eab308"}}),s.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#7d8d86"}})]}),s.jsx("h2",{style:{fontSize:"32px",fontWeight:"bold",color:"#ffffff",margin:0},children:"Switch User"}),s.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"color 0.2s ease",fontSize:"32px"},onMouseEnter:C=>{C.currentTarget.style.color="#ffffff"},onMouseLeave:C=>{C.currentTarget.style.color="#9ca3af"},"aria-label":"Close",children:""})]}),s.jsx("div",{children:O?s.jsx("div",{children:s.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:8,padding:24,marginBottom:24,textAlign:"center"},children:[s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("i",{className:"fa-solid fa-lock",style:{fontSize:"48px",color:"#7d8d86",marginBottom:"16px"}}),s.jsx("h3",{style:{color:"#ffffff",fontSize:"24px",margin:"0 0 8px 0"},children:"PIN Required"}),s.jsx("p",{style:{color:"#9ca3af",fontSize:"16px",margin:0},children:"Enter your PIN to access the user system"})]}),s.jsxs("form",{onSubmit:be,style:{display:"flex",flexDirection:"column",gap:16,maxWidth:"300px",margin:"0 auto"},children:[s.jsxs("div",{children:[s.jsx("input",{type:"password",value:J,onChange:C=>{ae(C.target.value),Y&&F("")},style:{width:"200px",padding:12,background:"#1a202c",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,boxSizing:"border-box",textAlign:"center",letterSpacing:"2px"},placeholder:"Enter PIN",maxLength:6,required:!0,autoFocus:!0}),Y&&s.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:"8px 12px",marginTop:8,display:"flex",alignItems:"center",gap:8},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc2626",fontSize:14}}),s.jsx("p",{style:{fontSize:14,color:"#dc2626",margin:0,fontWeight:500},children:Y})]})]}),s.jsxs("div",{style:{display:"flex",gap:12},children:[s.jsx("button",{type:"button",onClick:t,style:{flex:1,padding:"12px 16px",background:"#4a5568",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,fontWeight:500,cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:C=>{C.currentTarget.style.background="#6b7280"},onMouseLeave:C=>{C.currentTarget.style.background="#4a5568"},children:"Cancel"}),s.jsx("button",{type:"submit",style:{flex:1,padding:"12px 16px",background:"#7d8d86",border:"2px solid #7d8d86",borderRadius:8,color:"#000000",fontSize:18,fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:C=>{C.currentTarget.style.background="#3e3f29",C.currentTarget.style.borderColor="#3e3f29"},onMouseLeave:C=>{C.currentTarget.style.background="#7d8d86",C.currentTarget.style.borderColor="#7d8d86"},children:"Verify PIN"})]})]})]})}):y?s.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundImage:"url(images/mcbackground3.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"#0b0d10",position:"relative"},children:[s.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",pointerEvents:"none"}}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,gap:"32px",padding:"40px 0",position:"relative",zIndex:1},children:[s.jsx("div",{style:{position:"relative"},children:s.jsx("div",{style:{width:"160px",height:"160px",borderRadius:"50%",background:"rgba(0,0,0,0.6)",border:"3px solid rgba(255,255,255,0.4)",backdropFilter:"blur(15px)",boxShadow:"0 8px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:p?.icon?s.jsx("img",{src:`/retailpos/images/icons/${p.icon}.png`,alt:p.icon,style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"50%"}}):s.jsx("svg",{viewBox:"0 0 24 24",style:{width:"80px",height:"80px",color:"rgba(255,255,255,0.85)"},fill:"currentColor",children:s.jsx("path",{d:"M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"})})})}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{color:"#ffffff",fontSize:"32px",fontWeight:"600",letterSpacing:"0.5px",textShadow:"0 2px 8px rgba(0,0,0,0.8)"},children:p?.username}),s.jsx("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px",marginTop:"8px",textShadow:"0 1px 4px rgba(0,0,0,0.8)"},children:p?.role})]}),s.jsxs("form",{onSubmit:me,style:{width:"100%",maxWidth:"400px"},children:[p?.pin&&s.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:s.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"4px",backdropFilter:"blur(10px)"},children:[s.jsx("button",{type:"button",onClick:()=>{de(!1),w(""),S("")},style:{padding:"8px 16px",background:q?"transparent":"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:q?"rgba(255,255,255,0.7)":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Password"}),s.jsx("button",{type:"button",onClick:()=>{de(!0),w(""),S("")},style:{padding:"8px 16px",background:q?"rgba(255,255,255,0.2)":"transparent",border:"none",borderRadius:"6px",color:q?"#ffffff":"rgba(255,255,255,0.7)",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"PIN"})]})}),s.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[s.jsx("input",{type:"password",value:b,onChange:C=>{w(C.target.value),_&&S("")},placeholder:q?"Enter PIN":"Password",maxLength:q?6:void 0,required:!0,autoFocus:!0,style:{width:"100%",height:"48px",borderRadius:"24px",paddingLeft:"20px",paddingRight:"56px",color:"#ffffff",fontSize:"16px",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(15px)",border:"2px solid rgba(255,255,255,0.4)",boxShadow:"0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)",outline:"none",textAlign:q?"center":"left",letterSpacing:q?"2px":"normal",boxSizing:"border-box",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onFocus:C=>{C.target.style.border="2px solid rgba(255,255,255,0.8)",C.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onBlur:C=>{C.target.style.border="2px solid rgba(255,255,255,0.4)",C.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}}),s.jsx("button",{type:"submit",disabled:N,style:{position:"absolute",right:"4px",top:"4px",height:"40px",width:"40px",borderRadius:"50%",background:N?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.95)",border:"2px solid rgba(255,255,255,0.8)",display:"flex",alignItems:"center",justifyContent:"center",cursor:N?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 6px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)",opacity:N?.7:1},onMouseEnter:C=>{N||(C.currentTarget.style.background="#ffffff")},onMouseLeave:C=>{N||(C.currentTarget.style.background="rgba(255,255,255,0.95)")},children:N?s.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{color:"#0f2d6e",fontSize:"16px"}}):s.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:"#0f2d6e"},fill:"currentColor",children:s.jsx("path",{d:"M13 5l7 7-7 7v-4H4v-6h9V5z"})})})]}),_&&s.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",backdropFilter:"blur(10px)"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#fca5a5",fontSize:"14px",textShadow:"0 1px 2px rgba(0,0,0,0.8)"}}),s.jsx("p",{style:{fontSize:"14px",color:"#fca5a5",margin:0,fontWeight:500,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:_})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px"},children:[s.jsx("button",{type:"button",onClick:re,style:{background:"none",border:"none",color:"rgba(255,255,255,0.9)",fontSize:"14px",cursor:"pointer",textDecoration:"none",transition:"color 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:C=>{C.currentTarget.style.color="#ffffff"},onMouseLeave:C=>{C.currentTarget.style.color="rgba(255,255,255,0.9)"},children:" Back to users"}),s.jsx("div",{style:{fontSize:"14px",color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:"Press Enter to sign in"})]})]})]}),s.jsx("div",{style:{padding:"24px",display:"flex",justifyContent:"flex-start",position:"relative",zIndex:1},children:s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxWidth:"300px",maxHeight:"200px",overflowY:"auto",paddingRight:"8px"},children:c.filter(C=>C.user_id!==p?.user_id).map(C=>s.jsxs("button",{onClick:()=>{x(C),w(""),S(""),de(!1)},style:{display:"flex",alignItems:"center",gap:"10px",borderRadius:"8px",padding:"6px 10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",color:"rgba(255,255,255,0.9)",cursor:"pointer",transition:"all 0.2s ease",minWidth:"140px",fontSize:"13px"},onMouseEnter:X=>{X.currentTarget.style.background="rgba(0,0,0,0.5)",X.currentTarget.style.color="#ffffff"},onMouseLeave:X=>{X.currentTarget.style.background="rgba(0,0,0,0.4)",X.currentTarget.style.color="rgba(255,255,255,0.9)"},children:[s.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:C.icon?s.jsx("img",{src:`/retailpos/images/icons/${C.icon}.png`,alt:C.icon,style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"50%"}}):s.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.7)"},children:""})}),s.jsx("span",{style:{fontWeight:"400",fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:C.username})]},C.user_id))})}),s.jsxs("div",{style:{position:"absolute",right:"24px",bottom:"24px",display:"flex",alignItems:"center",gap:"16px",color:"rgba(255,255,255,0.8)",zIndex:1},children:[s.jsx("button",{title:"Accessibility",style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:C=>{C.currentTarget.style.background="rgba(0,0,0,0.6)",C.currentTarget.style.color="#ffffff"},onMouseLeave:C=>{C.currentTarget.style.background="rgba(0,0,0,0.4)",C.currentTarget.style.color="rgba(255,255,255,0.9)"},children:s.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:s.jsx("path",{d:"M11 2h2v4h-2zM4 9h16v2H4zM6 12l4 .5V22H8v-7.5L6 14v-2zm12 0v2l-2 .5V22h-2v-9.5l4-.5z"})})}),s.jsx("button",{onClick:t,style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:C=>{C.currentTarget.style.background="#991b1b",C.currentTarget.style.border="1px solid #991b1b",C.currentTarget.style.color="#ffffff"},onMouseLeave:C=>{C.currentTarget.style.background="rgba(0,0,0,0.4)",C.currentTarget.style.border="1px solid rgba(255,255,255,0.3)",C.currentTarget.style.color="rgba(255,255,255,0.9)"},children:s.jsxs("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:[s.jsx("path",{d:"M11 2h2v10h-2z"}),s.jsx("path",{d:"M7.05 4.05a8.5 8.5 0 1 0 9.9 0l-1.41 1.41a6.5 6.5 0 1 1-7.08 0z"})]})})]})]}):f?s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:"#9ca3af"},children:[s.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:12,fontSize:"24px"}}),s.jsx("span",{style:{fontSize:"18px"},children:"Loading users..."})]}):s.jsx("div",{children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"20px"},children:c.map(C=>s.jsx("button",{style:{background:"rgba(26, 26, 26, 0.3)",border:"1px solid #4a5568",borderBottom:"3px solid #7d8d86",borderRadius:"8px",padding:24,cursor:"pointer",transition:"all 0.2s ease",width:"100%",textAlign:"left",position:"relative",minHeight:"160px"},onMouseEnter:X=>{X.currentTarget.style.background="rgba(125,141,134,0.1)",X.currentTarget.style.borderColor="#7d8d86",X.currentTarget.style.boxShadow="0 0 20px rgba(125,141,134,0.2)"},onMouseLeave:X=>{X.currentTarget.style.background="rgba(26, 26, 26, 0.3)",X.currentTarget.style.borderColor="#4a5568",X.currentTarget.style.boxShadow="none"},onClick:()=>ne(C),children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,height:"100%"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[s.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#1a202c",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"2px solid #4a5568"},children:C.icon?s.jsx("img",{src:`/retailpos/images/icons/${C.icon}.png`,alt:C.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):s.jsx("div",{style:{fontSize:24,color:"#4a5568"},children:""})}),s.jsx("div",{style:{flex:1},children:s.jsxs("div",{style:{marginBottom:8,display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{style:{fontSize:24,fontWeight:500,color:"#ffffff"},children:C.username}),C.pin&&s.jsx("div",{style:{background:"#10b981",color:"#ffffff",fontSize:"10px",fontWeight:"600",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"PIN"})]})})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,flex:1},children:[s.jsx("div",{children:s.jsx("span",{style:{background:`${W(C.role)}20`,color:W(C.role),padding:"6px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize",display:"inline-block"},children:C.role})}),s.jsxs("div",{style:{fontSize:14,color:"#9ca3af",lineHeight:"1.4"},children:["Last login: ",xe(C.last_used)]})]})]})},C.user_id))})})})]})}),s.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:s.jsx("div",{style:{width:60,height:60,background:"linear-gradient(145deg, #4a5568, #2d3748)",borderRadius:"0 0 15px 15px",boxShadow:"0 4px 8px rgba(0,0,0,0.4)",border:"2px solid #4a5568"}})}),s.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:s.jsx("div",{style:{width:300,height:30,background:"linear-gradient(145deg, #2d3748, #1a202c)",borderRadius:50,boxShadow:"0 6px 20px rgba(0,0,0,0.5)",border:"1px solid #4a5568"}})})]})}):null},xj=()=>{const{user:e,logout:t,switchUser:r}=on(),{userRole:a}=au(),[o,c]=T.useState(!1),[d,f]=T.useState(!1),h=T.useRef(null);console.log("UserMenu - Current user:",e?.username,"Role:",e?.role,"UserRole from context:",a),console.log("UserMenu - User object:",e),T.useEffect(()=>{console.log("UserMenu - User changed to:",e?.username,"Role:",e?.role)},[e]),T.useEffect(()=>{const w=_=>{h.current&&!h.current.contains(_.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]),T.useEffect(()=>{const w=_=>{_.key==="Escape"&&c(!1)};return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}},[]);const p=w=>{switch(w.toLowerCase()){case"admin":return"#dc2626";case"owner":return"#7c3aed";case"manager":return"#ea580c";case"cashier":return"#2563eb";default:return"#6b7280"}},x=async()=>{await t(),c(!1)},y=()=>{c(!1),f(!0)},v=async(w,_,S)=>{try{if(console.log("Attempting to switch to user:",w.username,"using",S?"PIN":"password"),await r(w.user_id,_,S))console.log("User switch successful, closing modal"),f(!1),setTimeout(()=>{console.log("User switch completed - Current user should now be:",w.username)},100);else throw new Error(S?"Invalid PIN":"Invalid password")}catch(N){throw console.error("Error switching user:",N),N}},b=()=>{alert("Settings functionality not implemented yet"),c(!1)};return s.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3},ref:h,children:[s.jsxs("button",{onClick:()=>c(!o),style:{display:"flex",alignItems:"center",gap:"8px",background:"#f3f4f6",border:"none",borderRadius:"25px",padding:"8px 12px",cursor:"pointer",transition:"all 0.2s ease",color:"#111827"},onMouseEnter:w=>{w.currentTarget.style.background="#e5e7eb"},onMouseLeave:w=>{w.currentTarget.style.background="#f3f4f6"},children:[s.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"none"},children:e?.icon?s.jsx("img",{src:`/retailpos/images/icons/${e.icon}.png`,alt:e.icon,style:{width:"28px",height:"28px",objectFit:"cover",borderRadius:"50%"}}):s.jsx("i",{className:"fa-solid fa-user",style:{fontSize:"16px",color:"#9ca3af"}})}),s.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#111827"},children:e?.username||"Unknown User"}),s.jsx("i",{className:`fa-solid fa-chevron-${o?"up":"down"}`,style:{fontSize:"12px",color:"#4b5563"}})]}),o&&s.jsxs("div",{style:{position:"absolute",right:"0",top:"100%",marginTop:"8px",width:"200px",background:"#ffffff",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",padding:"8px 0",zIndex:1001},children:[s.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e5e7eb",marginBottom:"8px"},children:[s.jsx("div",{style:{color:"#111827",fontSize:"14px",fontWeight:"500",marginBottom:"4px"},children:e?.username||"Unknown User"}),s.jsx("div",{style:{color:p(a),fontSize:"12px",textTransform:"capitalize",fontWeight:"500"},children:a})]}),s.jsxs("button",{onClick:y,style:{width:"100%",textAlign:"left",padding:"12px 16px",background:"transparent",border:"none",color:"#111827",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s ease"},onMouseEnter:w=>{w.currentTarget.style.background="#f9fafb"},onMouseLeave:w=>{w.currentTarget.style.background="transparent"},children:[s.jsx("i",{className:"fa-solid fa-user-group",style:{fontSize:"16px",color:"#4b5563"}}),s.jsx("span",{children:"Switch User"})]}),s.jsxs("button",{onClick:b,style:{width:"100%",textAlign:"left",padding:"12px 16px",background:"transparent",border:"none",color:"#111827",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s ease"},onMouseEnter:w=>{w.currentTarget.style.background="#f9fafb"},onMouseLeave:w=>{w.currentTarget.style.background="transparent"},children:[s.jsx("i",{className:"fa-solid fa-gear",style:{fontSize:"16px",color:"#4b5563"}}),s.jsx("span",{children:"Settings"})]}),s.jsx("div",{style:{borderTop:"1px solid #e5e7eb",margin:"8px 0"}}),s.jsxs("button",{onClick:x,style:{width:"100%",textAlign:"left",padding:"12px 16px",background:"transparent",border:"none",color:"#dc2626",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"background 0.2s ease"},onMouseEnter:w=>{w.currentTarget.style.background="#fef2f2"},onMouseLeave:w=>{w.currentTarget.style.background="transparent"},children:[s.jsx("i",{className:"fa-solid fa-sign-out-alt",style:{fontSize:"16px",color:"#dc2626"}}),s.jsx("span",{children:"Logout"})]})]}),s.jsx(gj,{isOpen:d,onClose:()=>f(!1),onUserSwitch:v})]})},mj="_container_eqwes_2",yj="_nav_eqwes_21",vj="_navContent_eqwes_27",bj="_navFlex_eqwes_33",_j="_logoContainer_eqwes_40",Sj="_logoText_eqwes_45",wj="_navLinks_eqwes_51",Tj="_navLink_eqwes_51",jj="_navButton_eqwes_69",Ej="_heroSection_eqwes_86",kj="_heroContent_eqwes_91",Cj="_heroTitle_eqwes_98",Aj="_heroTitleHighlight_eqwes_106",Rj="_heroSubtitle_eqwes_111",Nj="_heroButtons_eqwes_120",Dj="_primaryButton_eqwes_128",Oj="_secondaryButton_eqwes_147",Ij="_featuresSection_eqwes_167",Mj="_featuresContent_eqwes_172",Bj="_featuresHeader_eqwes_178",Fj="_featuresTitle_eqwes_183",Lj="_featuresSubtitle_eqwes_190",Pj="_featuresGrid_eqwes_197",zj="_featureCard_eqwes_203",Uj="_featureIcon_eqwes_214",Wj="_featureTitle_eqwes_220",qj="_featureDescription_eqwes_227",Hj="_benefitsSection_eqwes_232",$j="_benefitsContent_eqwes_237",Gj="_benefitsGrid_eqwes_243",Vj="_benefitsTitle_eqwes_250",Yj="_benefitItem_eqwes_257",Kj="_benefitIcon_eqwes_263",Xj="_benefitContent_eqwes_280",Qj="_ctaCard_eqwes_291",Jj="_ctaIcon_eqwes_299",Zj="_ctaTitle_eqwes_305",eE="_ctaDescription_eqwes_312",tE="_ctaButton_eqwes_317",rE="_ctaSection_eqwes_334",nE="_ctaContent_eqwes_340",aE="_ctaSectionTitle_eqwes_346",sE="_ctaSectionDescription_eqwes_353",iE="_ctaSectionButtons_eqwes_360",oE="_ctaSectionPrimaryButton_eqwes_368",lE="_ctaSectionSecondaryButton_eqwes_387",cE="_footer_eqwes_407",dE="_footerContent_eqwes_413",uE="_footerGrid_eqwes_419",fE="_footerBrand_eqwes_426",hE="_footerBrandTitle_eqwes_430",pE="_footerBrandDescription_eqwes_436",gE="_footerSection_eqwes_442",xE="_footerLinks_eqwes_448",mE="_footerLink_eqwes_448",yE="_footerDivider_eqwes_469",dt={container:mj,nav:yj,navContent:vj,navFlex:bj,logoContainer:_j,logoText:Sj,navLinks:wj,navLink:Tj,navButton:jj,heroSection:Ej,heroContent:kj,heroTitle:Cj,heroTitleHighlight:Aj,heroSubtitle:Rj,heroButtons:Nj,primaryButton:Dj,secondaryButton:Oj,featuresSection:Ij,featuresContent:Mj,featuresHeader:Bj,featuresTitle:Fj,featuresSubtitle:Lj,featuresGrid:Pj,featureCard:zj,featureIcon:Uj,featureTitle:Wj,featureDescription:qj,benefitsSection:Hj,benefitsContent:$j,benefitsGrid:Gj,benefitsTitle:Vj,benefitItem:Yj,benefitIcon:Kj,benefitContent:Xj,ctaCard:Qj,ctaIcon:Jj,ctaTitle:Zj,ctaDescription:eE,ctaButton:tE,ctaSection:rE,ctaContent:nE,ctaSectionTitle:aE,ctaSectionDescription:sE,ctaSectionButtons:iE,ctaSectionPrimaryButton:oE,ctaSectionSecondaryButton:lE,footer:cE,footerContent:dE,footerGrid:uE,footerBrand:fE,footerBrandTitle:hE,footerBrandDescription:pE,footerSection:gE,footerLinks:xE,footerLink:mE,footerDivider:yE},w1=()=>{T.useEffect(()=>{document.body.style.overflow="auto",document.documentElement.style.overflow="auto";const t=document.getElementById("root");return t&&(t.style.overflow="auto",t.style.height="auto"),()=>{document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",t&&(t.style.overflow="hidden",t.style.height="100%")}},[]);const e=[{icon:"fas fa-barcode",title:"Barcode Scanning",description:"Fast and accurate product scanning with built-in barcode reader support for instant product lookup and checkout."},{icon:"fas fa-building",title:"Multi-Tenant Architecture",description:"Manage multiple businesses from one system with complete data isolation and role-based access controls."},{icon:"fas fa-credit-card",title:"Partial Payments",description:"Accept split payments, layaway plans, and partial transactions with flexible payment processing options."},{icon:"fas fa-weight",title:"Weighted Products",description:"Handle bulk items, produce, and weighted goods with precise weight-based pricing and inventory tracking."},{icon:"fas fa-volume-up",title:"Text-to-Speech",description:"AI-powered voice announcements with OpenAI TTS integration for order confirmation and accessibility."},{icon:"fas fa-chart-bar",title:"Advanced Analytics",description:"Comprehensive dashboard with sales insights, inventory tracking, and business performance metrics."}];return s.jsxs("div",{className:dt.container,children:[s.jsx("nav",{className:dt.nav,children:s.jsx("div",{className:dt.navContent,children:s.jsxs("div",{className:dt.navFlex,children:[s.jsx("div",{className:dt.logoContainer,children:s.jsx("h1",{className:dt.logoText,children:"TillPoint"})}),s.jsxs("div",{className:dt.navLinks,children:[s.jsx("a",{href:"#features",className:dt.navLink,children:"Features"}),s.jsx("a",{href:"#pricing",className:dt.navLink,children:"Pricing"}),s.jsx("a",{href:"#contact",className:dt.navLink,children:"Contact"}),s.jsx(Os,{to:"/login",className:dt.navLink,children:"Sign In"}),s.jsx(Os,{to:"/login",className:dt.navButton,children:"Sign In"})]})]})})}),s.jsx("section",{className:dt.heroSection,children:s.jsxs("div",{className:dt.heroContent,children:[s.jsxs("h1",{className:dt.heroTitle,children:["Modern Point of Sale",s.jsx("span",{className:dt.heroTitleHighlight,children:"Built for Today's Business"})]}),s.jsx("p",{className:dt.heroSubtitle,children:"TillPoint combines powerful features with intuitive design to streamline your retail operations. From barcode scanning to advanced analytics, everything you need in one system."}),s.jsxs("div",{className:dt.heroButtons,children:[s.jsx(Os,{to:"/login",className:dt.primaryButton,children:"Sign In"}),s.jsx("button",{className:dt.secondaryButton,children:"Watch Demo"})]})]})}),s.jsx("section",{id:"features",className:dt.featuresSection,children:s.jsxs("div",{className:dt.featuresContent,children:[s.jsxs("div",{className:dt.featuresHeader,children:[s.jsx("h2",{className:dt.featuresTitle,children:"Everything You Need to Run Your Business"}),s.jsx("p",{className:dt.featuresSubtitle,children:"Powerful features designed to make your retail operations smooth, efficient, and profitable."})]}),s.jsx("div",{className:dt.featuresGrid,children:e.map((t,r)=>s.jsxs("div",{className:dt.featureCard,children:[s.jsx("div",{className:dt.featureIcon,children:s.jsx("i",{className:t.icon})}),s.jsx("h3",{className:dt.featureTitle,children:t.title}),s.jsx("p",{className:dt.featureDescription,children:t.description})]},r))})]})}),s.jsx("section",{className:dt.benefitsSection,children:s.jsx("div",{className:dt.benefitsContent,children:s.jsxs("div",{className:dt.benefitsGrid,children:[s.jsxs("div",{children:[s.jsx("h2",{className:dt.benefitsTitle,children:"Why Choose TillPoint?"}),s.jsxs("div",{className:dt.benefitItem,children:[s.jsx("div",{className:dt.benefitIcon,children:s.jsx("i",{className:"fas fa-check"})}),s.jsxs("div",{className:dt.benefitContent,children:[s.jsx("h3",{children:"Easy Setup"}),s.jsx("p",{children:"Get up and running in minutes with our intuitive setup process."})]})]}),s.jsxs("div",{className:dt.benefitItem,children:[s.jsx("div",{className:dt.benefitIcon,children:s.jsx("i",{className:"fas fa-check"})}),s.jsxs("div",{className:dt.benefitContent,children:[s.jsx("h3",{children:"24/7 Support"}),s.jsx("p",{children:"Our dedicated support team is always here to help you succeed."})]})]}),s.jsxs("div",{className:dt.benefitItem,children:[s.jsx("div",{className:dt.benefitIcon,children:s.jsx("i",{className:"fas fa-check"})}),s.jsxs("div",{className:dt.benefitContent,children:[s.jsx("h3",{children:"Secure & Reliable"}),s.jsx("p",{children:"Enterprise-grade security with 99.9% uptime guarantee."})]})]})]}),s.jsxs("div",{className:dt.ctaCard,children:[s.jsx("div",{className:dt.ctaIcon,children:s.jsx("i",{className:"fas fa-cash-register"})}),s.jsx("h3",{className:dt.ctaTitle,children:"Ready to Get Started?"}),s.jsx("p",{className:dt.ctaDescription,children:"Join thousands of businesses already using TillPoint to streamline their operations."}),s.jsx(Os,{to:"/login",className:dt.ctaButton,children:"Start Your Free Trial"})]})]})})}),s.jsx("section",{className:dt.ctaSection,children:s.jsxs("div",{className:dt.ctaContent,children:[s.jsx("h2",{className:dt.ctaSectionTitle,children:"Transform Your Business Today"}),s.jsx("p",{className:dt.ctaSectionDescription,children:"Experience the power of modern point-of-sale technology. No setup fees, no long-term contracts."}),s.jsxs("div",{className:dt.ctaSectionButtons,children:[s.jsx(Os,{to:"/login",className:dt.ctaSectionPrimaryButton,children:"Sign In"}),s.jsx("button",{className:dt.ctaSectionSecondaryButton,children:"Schedule Demo"})]})]})}),s.jsx("footer",{className:dt.footer,children:s.jsxs("div",{className:dt.footerContent,children:[s.jsxs("div",{className:dt.footerGrid,children:[s.jsxs("div",{className:dt.footerBrand,children:[s.jsx("h3",{className:dt.footerBrandTitle,children:"TillPoint"}),s.jsx("p",{className:dt.footerBrandDescription,children:"The modern point-of-sale system designed for today's businesses. Powerful, intuitive, and built to grow with you."})]}),s.jsxs("div",{className:dt.footerSection,children:[s.jsx("h4",{children:"Product"}),s.jsxs("ul",{className:dt.footerLinks,children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:dt.footerLink,children:"Features"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:dt.footerLink,children:"Pricing"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:dt.footerLink,children:"Integrations"})})]})]}),s.jsxs("div",{className:dt.footerSection,children:[s.jsx("h4",{children:"Support"}),s.jsxs("ul",{className:dt.footerLinks,children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:dt.footerLink,children:"Help Center"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:dt.footerLink,children:"Contact Us"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:dt.footerLink,children:"Documentation"})})]})]})]}),s.jsx("div",{className:dt.footerDivider,children:s.jsx("p",{children:" 2024 TillPoint. All rights reserved."})})]})})]})},vE=()=>{const[e]=Ry(),t=Ba(),[r,a]=T.useState("verifying"),[o,c]=T.useState(""),[d,f]=T.useState(!1),h=e.get("token");T.useEffect(()=>{h?p(h):(a("error"),c("Invalid verification link"))},[h]);const p=async v=>{try{a("verifying"),c("Verifying your email address...");const{data:b,error:w}=await Ne.from("email_verification_tokens").select("*").eq("token",v).eq("used",!1).single();if(w||!b){a("error"),c("Invalid or expired verification token");return}const _=new Date,S=new Date(b.expires_at);if(_>S){a("expired"),c("Verification token has expired. Please request a new one.");return}const{error:N}=await Ne.from("users").update({email_verified:!0,active:!0,email_verification_token:null,verification_token_expires:null,updated_at:new Date().toISOString()}).eq("user_id",b.user_id);if(N){console.error("Error updating user:",N),a("error"),c("Failed to verify email. Please try again.");return}await Ne.from("email_verification_tokens").update({used:!0}).eq("id",b.id),a("success"),c("Email verified successfully! You can now log in to your account."),setTimeout(()=>{t("/login")},3e3)}catch(b){console.error("Verification error:",b),a("error"),c("An error occurred during verification. Please try again.")}},x=async()=>{if(h){f(!0);try{const{data:v,error:b}=await Ne.from("email_verification_tokens").select("user_id, users(email, business_id, business_info(name))").eq("token",h).single();if(b||!v){c("Unable to resend verification email");return}const w=Math.random().toString(36).substring(2)+Date.now().toString(36),_=new Date(Date.now()+1440*60*1e3);await Ne.from("users").update({email_verification_token:w,verification_token_expires:_.toISOString()}).eq("user_id",v.user_id),await Ne.from("email_verification_tokens").insert({user_id:v.user_id,token:w,expires_at:_.toISOString()}),await Ne.from("email_verification_tokens").update({used:!0}).eq("token",h),c("A new verification email has been sent to your email address.")}catch(v){console.error("Error resending verification:",v),c("Failed to resend verification email. Please try again.")}finally{f(!1)}}},y=()=>{switch(r){case"verifying":return"";case"success":return"";case"error":return"";case"expired":return"";default:return""}};return s.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[s.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"500px",width:"100%",textAlign:"center",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[s.jsx("div",{style:{fontSize:"64px",marginBottom:"20px"},children:y()}),s.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1a1a1a",marginBottom:"16px"},children:"Email Verification"}),s.jsx("p",{style:{fontSize:"16px",color:"#6b7280",marginBottom:"30px",lineHeight:"1.5"},children:o}),r==="verifying"&&s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"20px"},children:[s.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e5e7eb",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),s.jsx("span",{style:{color:"#6b7280"},children:"Verifying..."})]}),r==="success"&&s.jsx("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:s.jsx("p",{style:{color:"#166534",fontSize:"14px",margin:"0"},children:"You will be redirected to the login page in a few seconds..."})}),(r==="error"||r==="expired")&&s.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[s.jsx("p",{style:{color:"#dc2626",fontSize:"14px",margin:"0 0 10px 0"},children:r==="expired"?"Your verification link has expired.":"There was an error verifying your email."}),s.jsx("button",{onClick:x,disabled:d,style:{background:d?"#9ca3af":"#3b82f6",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",cursor:d?"not-allowed":"pointer"},children:d?"Sending...":"Resend Verification Email"})]}),s.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[s.jsx("button",{onClick:()=>t("/login"),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Back to Login"}),r==="success"&&s.jsx("button",{onClick:()=>t("/login"),style:{background:"#10b981",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Continue to Login"})]})]}),s.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},kn=(e,t={})=>{const r=typeof e=="number"&&isFinite(e)?e:0,{locale:a="en-IE",currency:o="EUR",minimumFractionDigits:c=2,maximumFractionDigits:d=2}=t;try{return new Intl.NumberFormat(a,{style:"currency",currency:o,minimumFractionDigits:c,maximumFractionDigits:d}).format(r)}catch{return`${o} ${r.toFixed(2)}`}},bE=(e,t={})=>{const r=typeof e=="number"&&isFinite(e)?e:0,{locale:a="en-IE",currency:o="EUR"}=t;try{return new Intl.NumberFormat(a,{style:"currency",currency:o,notation:"compact",maximumFractionDigits:1}).format(r)}catch{const c=Math.abs(r);return c>=1e6?`${kn(r/1e6,{...t,maximumFractionDigits:1})}M`:c>=1e3?`${kn(r/1e3,{...t,maximumFractionDigits:1})}K`:kn(r,t)}},su=()=>{const{user:e}=on();return{businessId:e?.business_id,businessLoading:!1,businessError:null,hasBusinessSelected:e?.business_id!=null}},_E=async e=>{console.log("[fetchSalesData] fetching sales data for business:",e);const[t,r]=await Promise.all([Ne.from("sales").select(`
        *,
        customers (name),
        shop_staff!sales_cashier_id_fkey (username),
        sale_items (
          *,
          products (
            name,
            price,
            is_weighted,
            price_per_unit,
            weight_unit
          )
        )
      `).eq("business_id",e).order("datetime",{ascending:!1}),Ne.from("side_business_sales").select(`
        *,
        side_business_items (
          name,
          price
        )
      `).eq("parent_shop_id",e).order("date_time",{ascending:!1})]);if(t.error)throw t.error;if(r.error)throw r.error;return{sales:t.data?.map(o=>{const c=o.notes&&(o.notes.includes("PARTIAL PAYMENT")||o.notes.includes("Amount Paid Today")||o.notes.includes("Remaining Balance"));let d=0,f=0,h="";if(c&&o.notes){const p=o.notes.match(/Amount Paid Today: (\d+\.?\d*)/),x=o.notes.match(/Remaining Balance: (\d+\.?\d*)/);d=p?parseFloat(p[1]):0,f=x?parseFloat(x[1]):0,h=o.notes}return{...o,customer_name:o.customers?.name||"Walk-in Customer",cashier_name:o.shop_staff?.username||"Unknown",is_partial_payment:c,partial_amount:d,remaining_amount:f,partial_notes:h,items:o.sale_items||[]}})||[],sideBusinessSales:r.data||[]}},iu=()=>{const{user:e}=on();return k0({queryKey:["salesData",e?.business_id],queryFn:()=>_E(e?.business_id),enabled:!!e?.business_id,staleTime:120*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1})},SE=async e=>{console.log("[fetchProductsData] fetching products data for business:",e);const[t,r]=await Promise.all([Ne.from("products").select("*").eq("business_id",e).order("name"),Ne.from("side_business_items").select("*").eq("parent_shop_id",e).order("name")]);if(t.error)throw t.error;if(r.error)throw r.error;const a=[...new Set(t.data?.map(o=>o.category).filter(Boolean))];return{products:t.data||[],sideBusinessItems:r.data||[],categories:a}},dv=()=>{const{user:e}=on();return k0({queryKey:["productsData",e?.business_id],queryFn:()=>SE(e?.business_id),enabled:!!e?.business_id,staleTime:300*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1})},wE=()=>{const{data:e,isLoading:t,error:r}=dv(),a=T.useMemo(()=>e?.products?e.products.filter(d=>d.stock_quantity<=d.reorder_level).map(d=>({product_id:d.product_id,name:d.name,stock_quantity:d.stock_quantity,reorder_level:d.reorder_level,category:d.category,supplier_info:d.supplier_info,is_low_stock:!0})).sort((d,f)=>d.stock_quantity-f.stock_quantity):[],[e]),o=async(d,f)=>(console.log("Restock product:",d,"quantity:",f),!0),c=async d=>(console.log("Quick restock product:",d),!0);return{lowStockProducts:a,lowStockItems:a,loading:t,error:r?.message||null,restockProduct:o,quickRestock:c}},TE=({product:e,onRestock:t,onQuickRestock:r})=>{const[a,o]=T.useState(!1),[c,d]=T.useState(""),[f,h]=T.useState(!1),p=async()=>{h(!0);const b=await r(e.product_id);h(!1),b&&o(!1)},x=async()=>{const b=parseInt(c);if(isNaN(b)||b<=0)return;h(!0);const w=await t(e.product_id,b);h(!1),w&&(o(!1),d(""))},y=()=>e.stock_quantity<=2?"#ef4444":e.stock_quantity<=5?"#f59e0b":"#eab308",v=()=>e.stock_quantity<=2?"Critical":e.stock_quantity<=5?"Low":"Below Reorder";return s.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 4px 16px rgba(62, 63, 41, 0.15)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.1)"},children:[s.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",background:y(),color:"white",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:v()}),s.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[s.jsxs("div",{style:{width:"60px",height:"60px",borderRadius:"8px",background:"#f9fafb",border:"1px solid rgba(125, 141, 134, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:[e.image_url?s.jsx("img",{src:e.image_url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:b=>{b.currentTarget.style.setProperty("display","none")(b.currentTarget.nextElementSibling).style.setProperty("display","flex")}}):null,s.jsx("div",{style:{display:e.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:"#7d8d86",fontSize:"20px"},children:s.jsx("i",{className:"fa-solid fa-box"})})]}),s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0",lineHeight:"1.3"},children:e.name}),s.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"0 0 8px 0"},children:e.category}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[s.jsxs("span",{style:{fontSize:"12px",color:"#3e3f29",fontWeight:"500"},children:["Stock: ",e.stock_quantity]}),s.jsx("span",{style:{fontSize:"12px",color:"#7d8d86"},children:""}),s.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86"},children:["Reorder at: ",e.reorder_level]})]}),a?s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[s.jsx("input",{type:"number",value:c,onChange:b=>d(b.target.value),placeholder:"Qty",min:"1",style:{width:"60px",padding:"6px 8px",border:"1px solid #7d8d86",borderRadius:"6px",fontSize:"12px",outline:"none"}}),s.jsx("button",{onClick:x,disabled:f||!c,style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f||!c?"not-allowed":"pointer",opacity:f||!c?.7:1,transition:"all 0.2s ease"},onMouseEnter:b=>{!f&&c&&(b.currentTarget.style.background="#bca88d")},onMouseLeave:b=>{!f&&c&&(b.currentTarget.style.background="#7d8d86")},children:f?s.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):"Restock"}),s.jsx("button",{onClick:()=>{o(!1),d("")},disabled:f,style:{background:"transparent",color:"#7d8d86",border:"none",fontSize:"12px",cursor:f?"not-allowed":"pointer",opacity:f?.7:1},children:"Cancel"})]}):s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s.jsxs("button",{onClick:p,disabled:f,style:{background:"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f?"not-allowed":"pointer",opacity:f?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:b=>{f||(b.currentTarget.style.background="#059669")},onMouseLeave:b=>{f||(b.currentTarget.style.background="#10b981")},children:[f?s.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):s.jsx("i",{className:"fa-solid fa-bolt"}),"Quick Restock"]}),s.jsx("button",{onClick:()=>o(!0),disabled:f,style:{background:"transparent",color:"#7d8d86",border:"1px solid #7d8d86",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:f?"not-allowed":"pointer",opacity:f?.7:1,transition:"all 0.2s ease"},onMouseEnter:b=>{f||(b.currentTarget.style.background="#7d8d86",b.currentTarget.style.color="white")},onMouseLeave:b=>{f||(b.currentTarget.style.background="transparent",b.currentTarget.style.color="#7d8d86")},children:"Custom"})]})]})]})]})},jE=()=>{const{lowStockItems:e,loading:t,error:r,restockProduct:a,quickRestock:o}=wE(),[c,d]=T.useState(0),f=e[c]||null,h=c<e.length-1,p=c>0,x=()=>{h&&d(c+1)},y=()=>{p&&d(c-1)};return t?s.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[s.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading low stock items..."]})}):r?s.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),s.jsx("p",{style:{margin:0,fontSize:"14px"},children:r})]})}):s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:e.length>0?"#fbbf24":"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"18px",color:e.length>0?"#d97706":"#059669"}})}),s.jsxs("div",{children:[s.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Low Stock Items"}),s.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[e.length," item",e.length!==1?"s":""," need",e.length===1?"s":""," restocking"]})]})]}),e.length>1&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("button",{onClick:y,disabled:!p,style:{background:p?"#7d8d86":"#e5e7eb",color:p?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:p?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:v=>{p&&(v.currentTarget.style.background="#bca88d")},onMouseLeave:v=>{p&&(v.currentTarget.style.background="#7d8d86")},children:s.jsx("i",{className:"fa-solid fa-chevron-left"})}),s.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86",fontWeight:"500",minWidth:"40px",textAlign:"center"},children:[c+1," / ",e.length]}),s.jsx("button",{onClick:x,disabled:!h,style:{background:h?"#7d8d86":"#e5e7eb",color:h?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:h?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:v=>{h&&(v.currentTarget.style.background="#bca88d")},onMouseLeave:v=>{h&&(v.currentTarget.style.background="#7d8d86")},children:s.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]}),e.length===0?s.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#7d8d86"},children:[s.jsx("i",{className:"fa-solid fa-check-circle",style:{fontSize:"48px",marginBottom:"16px",color:"#10b981"}}),s.jsx("p",{style:{fontSize:"16px",margin:0,fontWeight:"500"},children:"All items are well stocked!"}),s.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0",opacity:.8},children:"No items need restocking at the moment."})]}):f?s.jsx(TE,{product:f,onRestock:a,onQuickRestock:o},f.product_id):null]})},EE=(e,t)=>{const r=t||new Date;switch(e){case"today":{const a=r.toISOString().split("T")[0];return{start:`${a}T00:00:00`,end:`${a}T23:59:59`}}case"week":{const a=new Date(r);a.setDate(r.getDate()-r.getDay()),a.setHours(0,0,0,0);const o=new Date(a);return o.setDate(a.getDate()+6),o.setHours(23,59,59,999),{start:a.toISOString(),end:o.toISOString()}}case"month":{const a=new Date(r.getFullYear(),r.getMonth(),1),o=new Date(r.getFullYear(),r.getMonth()+1,0,23,59,59,999);return{start:a.toISOString(),end:o.toISOString()}}default:return{start:"",end:""}}},Dh=(e,t,r)=>{const{start:a,end:o}=EE(t,r),c=e.filter(f=>{const h=new Date(f.datetime).toISOString();return h>=a&&h<=o}),d=new Map;return c.forEach(f=>{f.sale_items?.forEach(h=>{const p=h.product_id,x=d.get(p)||{quantity:0,total:0,name:h.products?.name||"Unknown",image_url:h.products?.image_url};d.set(p,{quantity:x.quantity+(h.quantity||0),total:x.total+(parseFloat(h.calculated_price)||0),name:x.name,image_url:x.image_url})})}),Array.from(d.entries()).map(([f,h])=>({product_id:f,product_name:h.name,quantity_sold:h.quantity,total_sales:h.total,image_url:h.image_url})).sort((f,h)=>h.total_sales-f.total_sales)},kE=e=>{const{data:t,isLoading:r,error:a}=iu(),o=T.useMemo(()=>t?.sales?Dh(t.sales,"today",e):[],[t,e]),c=T.useMemo(()=>t?.sales?Dh(t.sales,"week",e):[],[t,e]),d=T.useMemo(()=>t?.sales?Dh(t.sales,"month",e):[],[t,e]);return{todayProducts:o,weekProducts:c,monthProducts:d,loading:r,error:a?.message||null}},CE=({activePeriod:e,selectedDate:t})=>{const{todayProducts:r,weekProducts:a,monthProducts:o,loading:c,error:d}=kE(t),[f,h]=T.useState(e??"today");T.useEffect(()=>{e&&h(e)},[e]);const p=b=>{switch(b){case"today":return r;case"week":return a;case"month":return o}},x=b=>{switch(b){case"today":if(t){const w=new Date;return t.toDateString()===w.toDateString()?"Today":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}return"Today";case"week":return"This Week";case"month":return"This Month"}},y=["today","week","month"],v=p(f);return c?s.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db"},children:[s.jsx("style",{children:"@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}} .skeleton{background-image:linear-gradient(90deg,#e5e7eb 0px,#f3f4f6 40px,#e5e7eb 80px);background-size:600px 100%;animation:shimmer 1.2s infinite linear;border-radius:8px}"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[s.jsx("div",{className:"skeleton",style:{width:"40px",height:"40px"}}),s.jsx("div",{className:"skeleton",style:{width:"160px",height:"18px"}})]}),s.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[s.jsx("div",{className:"skeleton",style:{width:"80px",height:"28px"}}),s.jsx("div",{className:"skeleton",style:{width:"100px",height:"28px"}}),s.jsx("div",{className:"skeleton",style:{width:"100px",height:"28px"}})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Array.from({length:5}).map((b,w)=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",border:"1px solid rgba(125,141,134,0.1)",borderRadius:"8px"},children:[s.jsx("div",{className:"skeleton",style:{width:"32px",height:"32px"}}),s.jsx("div",{className:"skeleton",style:{width:"40px",height:"40px"}}),s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{className:"skeleton",style:{width:"160px",height:"12px",marginBottom:"6px"}}),s.jsx("div",{className:"skeleton",style:{width:"100px",height:"10px"}})]}),s.jsx("div",{className:"skeleton",style:{width:"70px",height:"14px"}})]},w))})]}):d?s.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),s.jsx("p",{style:{margin:0,fontSize:"14px"},children:d})]})}):s.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#bca88d",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"18px",color:"#3e3f29"}})}),s.jsx("h3",{style:{fontSize:"20px",fontWeight:600,color:"#3e3f29",margin:0},children:"Top Products"})]}),s.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:y.map(b=>s.jsxs("button",{onClick:()=>h(b),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:f===b?"#7d8d86":"#ffffff",color:f===b?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:[s.jsx("i",{className:`fa-solid ${b==="today"?"fa-calendar-day":b==="week"?"fa-calendar-week":"fa-calendar"}`,style:{fontSize:"12px",marginRight:6}}),x(b)]},b))}),v.length===0?s.jsxs("div",{style:{textAlign:"center",color:"#7d8d86",padding:"16px"},children:["No products for ",x(f)]}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:v.slice(0,3).map((b,w)=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"white",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.1)"},children:[s.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:w===0?"#fbbf24":w===1?"#e5e7eb":w===2?"#f59e0b":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:w===1?"#6b7280":"#3e3f29",fontSize:"12px",fontWeight:700},children:w===0?s.jsx("i",{className:"fa-solid fa-crown",style:{fontSize:14}}):w+1}),s.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"#f9fafb",border:"1px solid #e5e7eb",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:b.image_url?s.jsx("img",{src:b.image_url,alt:b.product_name,style:{width:"100%",height:"100%",objectFit:"cover"}}):s.jsx("i",{className:"fa-solid fa-box",style:{color:"#7d8d86"}})}),s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("p",{style:{fontSize:14,fontWeight:600,color:"#3e3f29",margin:"0 0 2px 0"},children:b.product_name}),s.jsxs("p",{style:{fontSize:12,color:"#7d8d86",margin:0},children:[b.quantity_sold," sold"]})]}),s.jsxs("div",{style:{textAlign:"right"},children:[s.jsx("p",{style:{fontSize:14,fontWeight:600,color:"#10b981",margin:0},children:kn(b.total_sales)}),w===0&&s.jsx("p",{style:{fontSize:10,color:"#d97706",margin:"2px 0 0 0",fontWeight:500},children:"TOP SELLER"})]})]},b.product_id))})]})},uv=e=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate());switch(e){case"today":return{start:r,end:new Date(r.getTime()+1440*60*1e3)};case"week":const a=new Date(r);return a.setDate(r.getDate()-r.getDay()),{start:a,end:new Date(a.getTime()+10080*60*1e3)};case"month":const o=new Date(r.getFullYear(),r.getMonth(),1),c=new Date(r.getFullYear(),r.getMonth()+1,1);return{start:o,end:c};default:return{start:r,end:r}}},AE=(e,t)=>{const{start:r,end:a}=uv("week"),o={};for(let c=0;c<7;c++){const f=new Date(r.getTime()+c*24*60*60*1e3).toISOString().split("T")[0];o[f]={totalSales:0,transactionCount:0}}return e.forEach(c=>{const d=new Date(c.datetime).toISOString().split("T")[0];o[d]&&(o[d].totalSales+=parseFloat(c.total_amount)||0,o[d].transactionCount+=1)}),t.forEach(c=>{const d=new Date(c.date_time).toISOString().split("T")[0];o[d]&&(o[d].totalSales+=parseFloat(c.total_amount)||0,o[d].transactionCount+=1)}),Object.entries(o).map(([c,d])=>({day:new Date(c).toLocaleDateString("en-US",{weekday:"short"}),date:c,totalSales:d.totalSales,transactionCount:d.transactionCount,averageTransaction:d.transactionCount>0?d.totalSales/d.transactionCount:0}))},RE=(e,t)=>{const r={};for(let a=0;a<24;a++)r[a]={totalSales:0,transactionCount:0};return e.forEach(a=>{const o=new Date(a.datetime).getHours();r[o].totalSales+=parseFloat(a.total_amount)||0,r[o].transactionCount+=1}),t.forEach(a=>{const o=new Date(a.date_time).getHours();r[o].totalSales+=parseFloat(a.total_amount)||0,r[o].transactionCount+=1}),Object.entries(r).map(([a,o])=>({hour:parseInt(a),hourLabel:`${a}:00`,totalSales:o.totalSales,transactionCount:o.transactionCount}))},NE=(e,t)=>{const{start:r,end:a}=uv("month"),o={},c=new Date(r);for(;c<a;){const d=c.toISOString().split("T")[0];o[d]={totalSales:0,transactionCount:0},c.setDate(c.getDate()+1)}return e.forEach(d=>{const f=new Date(d.datetime).toISOString().split("T")[0];o[f]&&(o[f].totalSales+=parseFloat(d.total_amount)||0,o[f].transactionCount+=1)}),t.forEach(d=>{const f=new Date(d.date_time).toISOString().split("T")[0];o[f]&&(o[f].totalSales+=parseFloat(d.total_amount)||0,o[f].transactionCount+=1)}),Object.entries(o).map(([d,f])=>({day:new Date(d).toLocaleDateString("en-US",{day:"numeric"}),date:d,totalSales:f.totalSales,transactionCount:f.transactionCount,averageTransaction:f.transactionCount>0?f.totalSales/f.transactionCount:0}))},DE=()=>{const{data:e,isLoading:t,error:r}=iu(),a=T.useMemo(()=>e?AE(e.sales,e.sideBusinessSales):[],[e]),o=T.useMemo(()=>e?RE(e.sales,e.sideBusinessSales):[],[e]),c=T.useMemo(()=>e?NE(e.sales,e.sideBusinessSales):[],[e]);return{weeklyData:a,hourlyData:o,monthlyData:c,loading:t,error:r?.message||null,refreshHourlyData:()=>{},refreshWeeklyData:()=>{},refreshMonthlyData:()=>{}}},OE=async e=>{console.log("[fetchBusinessData] fetching business_info for business:",e);const{data:t,error:r}=await Ne.from("business_info").select("*").eq("business_id",e).single();if(r)throw console.error("Error fetching business data:",r),r;return t},IE=()=>{const{user:e}=on();return k0({queryKey:["businessData",e?.business_id],queryFn:()=>OE(e?.business_id),enabled:!!e?.business_id,staleTime:300*1e3})},ME=()=>{const{data:e,isLoading:t,error:r}=IE();return{businessInfo:e,loading:t,error:r?.message||null,refetch:()=>{}}},BE=({selectedDate:e,activePeriod:t})=>{const{weeklyData:r,hourlyData:a,monthlyData:o,loading:c,error:d,refreshHourlyData:f,refreshWeeklyData:h,refreshMonthlyData:p}=DE(),{businessInfo:x}=ME(),[y,v]=T.useState("weekly"),[b,w]=T.useState(new Date().toISOString().split("T")[0]),[_,S]=T.useState(0),[N,R]=T.useState(0),[O,P]=T.useState({visible:!1,x:0,y:0,data:null}),J=async W=>{w(W),await f(W)};T.useEffect(()=>{if(!e)return;const xe=(Re=>`${Re.getFullYear()}-${String(Re.getMonth()+1).padStart(2,"0")}-${String(Re.getDate()).padStart(2,"0")}`)(e);w(xe);const C=Re=>{const Oe=new Date(Re);return Oe.setHours(0,0,0,0),Oe.setDate(Oe.getDate()-Oe.getDay()),Oe},X=C(e),E=new Date;E.setHours(0,0,0,0);const z=C(E),H=X.getTime()-z.getTime(),Z=Math.round(H/(1e3*60*60*24)),ge=Math.round(Z/7);S(ge);const Fe=new Date,qe=(e.getFullYear()-Fe.getFullYear())*12+(e.getMonth()-Fe.getMonth());R(qe)},[e]),T.useEffect(()=>{t&&v(t==="today"?"hourly":t==="week"?"weekly":"monthly")},[t]);const ae=async()=>{const W=_-1;S(W),await h(W)},Y=async()=>{const W=_+1;S(W),await h(W)},F=async()=>{S(0),await h(0)},Q=()=>{const W=new Date,xe=W.getDay(),C=new Date(W);C.setDate(W.getDate()-xe+_*7);const X=new Date(C);X.setDate(C.getDate()+6);const E=z=>z.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${E(C)} - ${E(X)}`},oe=(W,xe)=>{P({visible:!0,x:W.clientX,y:W.clientY,data:xe})},q=()=>{P({visible:!1,x:0,y:0,data:null})},de=W=>{const xe=Math.max(...W.map(C=>C.totalSales));return xe===0?1:Math.ceil(xe*1.1)},te=(W,xe)=>W===0?0:Math.max(W/xe*180,4),ne=(W,xe=!0)=>{if(xe){const C=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316"];return C[W%C.length]}else{const C=Math.min(W/9,1),X=Math.floor(59+180*C),E=Math.floor(130+-62*C),z=Math.floor(246+-178*C);return`rgb(${X}, ${E}, ${z})`}};if(c)return s.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[s.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading sales data..."]})});if(d)return s.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:s.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),s.jsx("p",{style:{margin:0,fontSize:"14px"},children:d})]})});const me=y==="weekly"?r:y==="monthly"?o:a,re=me.length>0?de(me):100,be=y==="monthly"?Math.ceil(me.length/12):1;return me.length===0&&!c&&!d?s.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"5px solid #000000 !important",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",margin:"0",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",textAlign:"center",minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[s.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(x?.logo_url,s.jsx("img",{src:x?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:x?.name||"LandM Store Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:W=>{const xe=W.target;xe.style.display="none";const C=xe.parentElement;C&&(C.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),s.jsxs("div",{children:[s.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(x?.name||"LandM Store")&&s.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:x?.name||"LandM Store"})]})]}),s.jsxs("div",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"16px"},children:[s.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),s.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"500"},children:"No sales data available"}),s.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.8},children:y==="weekly"?"No sales recorded for this week":"No sales recorded for this date"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-100%) scale(0.9); }
          to { opacity: 1; transform: translateY(-100%) scale(1); }
        }
      `}),s.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",maxWidth:"1000px",margin:"0 auto",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[s.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(x?.logo_url,s.jsx("img",{src:x?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:x?.name||"LandM Store Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:W=>{const xe=W.target;xe.style.display="none";const C=xe.parentElement;C&&(C.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),s.jsxs("div",{children:[s.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(x?.name||"LandM Store")&&s.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:x?.name||"LandM Store"})]})]}),s.jsxs("div",{style:{display:"flex",background:"#f9fafb",borderRadius:"8px",padding:"4px",gap:"4px",marginBottom:"24px",maxWidth:"300px",border:"2px solid #d1d5db"},children:[s.jsxs("button",{onClick:()=>v("weekly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="weekly"?"#7d8d86":"transparent",color:y==="weekly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:W=>{y!=="weekly"&&(W.currentTarget.style.background="#e5e7eb",W.currentTarget.style.color="#3e3f29")},onMouseLeave:W=>{y!=="weekly"&&(W.currentTarget.style.background="transparent",W.currentTarget.style.color="#7d8d86")},children:[s.jsx("i",{className:"fa-solid fa-calendar-week",style:{fontSize:"12px"}}),"Weekly"]}),s.jsxs("button",{onClick:()=>v("hourly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="hourly"?"#7d8d86":"transparent",color:y==="hourly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:W=>{y!=="hourly"&&(W.currentTarget.style.background="#e5e7eb",W.currentTarget.style.color="#3e3f29")},onMouseLeave:W=>{y!=="hourly"&&(W.currentTarget.style.background="transparent",W.currentTarget.style.color="#7d8d86")},children:[s.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"12px"}}),"Hourly"]}),s.jsxs("button",{onClick:()=>v("monthly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:y==="monthly"?"#7d8d86":"transparent",color:y==="monthly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:W=>{y!=="monthly"&&(W.currentTarget.style.background="#e5e7eb",W.currentTarget.style.color="#3e3f29")},onMouseLeave:W=>{y!=="monthly"&&(W.currentTarget.style.background="transparent",W.currentTarget.style.color="#7d8d86")},children:[s.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"12px"}}),"Monthly"]})]}),y==="weekly"&&s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[s.jsxs("button",{onClick:ae,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:W=>{W.currentTarget.style.background="#f3f4f6",W.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:W=>{W.currentTarget.style.background="#ffffff",W.currentTarget.style.borderColor="#d1d5db"},children:[s.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Week"]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",marginBottom:"2px"},children:Q()}),s.jsx("button",{onClick:F,style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline",transition:"color 0.2s ease"},onMouseEnter:W=>{W.currentTarget.style.color="#3e3f29"},onMouseLeave:W=>{W.currentTarget.style.color="#7d8d86"},children:_===0?"Current Week":"Go to Current Week"})]}),s.jsxs("button",{onClick:Y,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:W=>{W.currentTarget.style.background="#f3f4f6",W.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:W=>{W.currentTarget.style.background="#ffffff",W.currentTarget.style.borderColor="#d1d5db"},children:["Next Week",s.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),y==="monthly"&&s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[s.jsxs("button",{onClick:async()=>{const W=N-1;R(W),await p(W)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:[s.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Month"]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#3e3f29",marginBottom:"2px"},children:new Date(new Date().getFullYear(),new Date().getMonth()+N,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),s.jsx("button",{onClick:async()=>{R(0),await p(0)},style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline"},children:N===0?"Current Month":"Go to Current Month"})]}),s.jsxs("button",{onClick:async()=>{const W=N+1;R(W),await p(W)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:["Next Month",s.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),y==="hourly"&&s.jsxs("div",{style:{marginBottom:"24px",padding:"12px",background:"#f9fafb",borderRadius:"8px",border:"2px solid #d1d5db"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"8px"},children:"Select Date:"}),s.jsx("input",{type:"date",value:b,onChange:W=>J(W.target.value),style:{padding:"8px 12px",border:"2px solid #d1d5db",borderRadius:"6px",fontSize:"14px",color:"#3e3f29",background:"white",outline:"none"}})]}),s.jsxs("div",{style:{width:"100%",height:"400px",background:"white",borderRadius:"12px",padding:"40px",border:"2px solid #d1d5db",position:"relative",overflow:"visible",margin:"0",boxSizing:"border-box",fontFamily:"inherit",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{position:"absolute",left:"15px",top:"40px",bottom:"30px",fontSize:"11px",color:"#9ca3af",fontWeight:"500",zIndex:1,padding:"10px 0",height:"260px"},children:[100,75,50,25,0].map((W,xe)=>s.jsx("span",{style:{position:"absolute",textAlign:"right",minWidth:"20px",top:`${xe*25}%`,transform:"translateY(-50%)"},children:bE(re*W/100)},W))}),s.jsx("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",flex:1,gap:y==="weekly"?"20px":y==="monthly"?"6px":"12px",marginBottom:"30px",padding:"0 40px 0 70px",position:"relative",zIndex:2,overflow:"visible",width:"100%",boxSizing:"border-box",minHeight:"260px"},children:me.map((W,xe)=>{const C=te(W.totalSales,re),X=ne(xe,y!=="hourly");return s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",flex:1,maxWidth:y==="weekly"?"100px":y==="monthly"?"24px":"80px",overflow:"visible",boxSizing:"border-box",height:"100%"},children:[s.jsx("div",{style:{width:"100%",maxWidth:y==="weekly"?"80px":y==="monthly"?"16px":"60px",height:`${C}px`,background:X,borderRadius:"8px 8px 0 0",marginBottom:"12px",position:"relative",transition:"all 0.3s ease",cursor:"pointer",boxSizing:"border-box",display:"block"},onMouseEnter:E=>{E.currentTarget.style.transform="scaleY(1.05)",E.currentTarget.style.opacity="0.8",oe(E,W)},onMouseLeave:E=>{E.currentTarget.style.transform="scaleY(1)",E.currentTarget.style.opacity="1",q()}}),s.jsx("span",{style:{fontSize:y==="weekly"?"13px":"11px",fontWeight:"500",color:"#7d8d86",textAlign:"center",display:"block",margin:"0",padding:"0"},children:y==="weekly"?W.day:y==="monthly"?xe%be===0?W.day:"":W.hourLabel})]},xe)})})]}),O.visible&&O.data&&s.jsxs("div",{style:{position:"fixed",left:O.x+10,top:O.y-10,background:"rgba(31, 41, 55, 0.95)",color:"#ffffff",padding:"12px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",pointerEvents:"none",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",zIndex:9999,backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",transform:"translateY(-100%)",animation:"fadeIn 0.2s ease-out"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[s.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:y==="weekly"?ne(0,!0):ne(0,!1)}}),s.jsx("span",{style:{fontWeight:"600",fontSize:"13px"},children:y==="weekly"?O.data.day:O.data.hourLabel})]}),s.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginBottom:"2px"},children:[O.data.transactionCount," transaction",O.data.transactionCount!==1?"s":""]}),s.jsx("div",{style:{fontWeight:"600",fontSize:"14px",color:"#60a5fa"},children:kn(O.data.totalSales)})]})]}),s.jsx("div",{style:{width:"100%",maxWidth:"1000px",margin:"12px auto 0 auto"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",flexWrap:"wrap",background:"#3e3f29",borderRadius:"8px",padding:"8px 12px",border:"2px solid #d1d5db"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:"#7d8d86"}}),s.jsx("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:500},children:y==="weekly"?"Daily Sales":y==="monthly"?"Daily Sales (Month)":"Hourly Sales"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"12px",color:"#f1f0e4"}}),s.jsxs("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:500},children:["Max: ",kn(re)]})]})]})})]})},FE=()=>{const e=Ba(),{businessId:t,businessLoading:r}=su(),{data:a}=iu(),{data:o}=dv(),{user:c,switchUser:d}=on(),[f,h]=T.useState({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),[p,x]=T.useState(!0),[y,v]=T.useState(null),[b,w]=T.useState([]),[_,S]=T.useState(!1),[N,R]=T.useState(!1),[O,P]=T.useState(new Date),[J,ae]=T.useState(new Date),[Y,F]=T.useState([]),[Q,oe]=T.useState("today"),[q,de]=T.useState([]),[te,ne]=T.useState(0),[me,re]=T.useState(0);T.useEffect(()=>{if(a&&o&&!r&&t!=null){const ve=new Date;ve.setHours(0,0,0,0);const Ge=new Date(ve);Ge.setDate(Ge.getDate()+1);const G=a.sales.filter(at=>{const vt=new Date(at.datetime);return vt>=ve&&vt<Ge}),Ce=a.sideBusinessSales.filter(at=>{const vt=new Date(at.date_time);return vt>=ve&&vt<Ge}),rt=G.reduce((at,vt)=>at+(parseFloat(vt.total_amount.toString())||0),0),Be=Ce.reduce((at,vt)=>at+(parseFloat(vt.total_amount.toString())||0),0),gt=o.products.filter(at=>at.stock_quantity<=at.reorder_level).length;h({totalProducts:o.products.length,totalSales:a.sales.length,totalCustomers:0,todayRevenue:rt,todaySideBusinessRevenue:Be,todayTransactions:G.length,lowStockItems:gt}),x(!1)}else t==null&&!r&&(h({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),x(!1))},[t,r,a?.sales?.length,o?.products?.length]),T.useEffect(()=>{},[Q,O,t,r]);const be=async ve=>{try{S(!0);const Ge=new Date(ve);v(Ge),w([]);const Ce=(at=>`${at.getFullYear()}-${String(at.getMonth()+1).padStart(2,"0")}-${String(at.getDate()).padStart(2,"0")}`)(Ge),{data:rt,error:Be}=await Ne.from("sales").select(`
          sale_id,
          datetime,
          total_amount,
          payment_method,
          sale_items (quantity)
        `).gte("datetime",`${Ce}T00:00:00`).lt("datetime",`${Ce}T23:59:59`).order("datetime",{ascending:!1});if(Be){console.error("Error fetching transactions:",Be);return}const gt=(rt||[]).map(at=>({transaction_id:`TXN-${at.sale_id.toString().padStart(6,"0")}`,datetime:at.datetime,total_amount:at.total_amount,payment_method:at.payment_method,items_count:at.sale_items?.reduce((vt,bt)=>vt+bt.quantity,0)||0}));w(gt)}catch(Ge){console.error("Error fetching transactions:",Ge)}finally{S(!1)}},W=()=>{v(null),w([])},xe=ve=>{W(),e(`/transaction/${ve}`)},C=ve=>{P(ve),R(!1)},X=(ve,Ge)=>{const G=new Date(ve,Ge,1),Ce=new Date(G);Ce.setDate(Ce.getDate()-G.getDay());const rt=[],Be=new Date(Ce);for(let gt=0;gt<42;gt++)rt.push(new Date(Be)),Be.setDate(Be.getDate()+1);return rt},E=()=>{switch(Q){case"today":const ve=new Date;return O.toDateString()===ve.toDateString()?"Today's Sales":`${O.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Sales`;case"week":return"This Week Sales";case"month":return"This Month Sales";default:return"Today's Sales"}},z=()=>{switch(Q){case"today":const ve=new Date;return O.toDateString()===ve.toDateString()?"Today's Transactions":`${O.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Transactions`;case"week":return"This Week Transactions";case"month":return"This Month Transactions";default:return"Today's Transactions"}},H=()=>{if(te===0)return f.todayTransactions>0?"+100%":"0%";const ve=(f.todayTransactions-te)/te*100;return`${ve>=0?"+":""}${ve.toFixed(0)}%`},Z=()=>f.todayTransactions-me,ge=()=>{const ve=Z(),Ge=H();return{text:`Products: ${ve} | Side Business: ${me} (${Ge} from yesterday)`,icon:"fa-solid fa-chart-pie"}},Fe=ve=>{const Ge=new Date,G=ve.toDateString()===Ge.toDateString(),Ce=ve.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return G?"Today's Transactions":`${Ce} Transactions`},qe=ve=>{const Ge=new Date,G=ve.toDateString()===Ge.toDateString(),Ce=ve.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return G?"No transactions found for today":`No transactions found for ${Ce}`},Re=(ve,Ge,G=100)=>{const Ce=ve+Ge;if(Ce===0)return null;const Be=ve/Ce*100/100*360,gt=(bt,Ie,nt)=>{const mt=at(G/2,G/2,nt,Ie),Ut=at(G/2,G/2,nt,bt),or=Ie-bt<=180?"0":"1";return`M ${G/2} ${G/2} L ${mt.x} ${mt.y} A ${nt} ${nt} 0 ${or} 0 ${Ut.x} ${Ut.y} Z`},at=(bt,Ie,nt,mt)=>{const Ut=(mt-90)*Math.PI/180;return{x:bt+nt*Math.cos(Ut),y:Ie+nt*Math.sin(Ut)}},vt=G*.4;return s.jsxs("svg",{width:G,height:G,style:{marginRight:"12px"},children:[ve>0&&s.jsx("path",{d:gt(0,Be,vt),fill:"#dc2626",stroke:"#ffffff",strokeWidth:"2"}),Ge>0&&s.jsx("path",{d:gt(Be,360,vt),fill:"#f59e0b",stroke:"#ffffff",strokeWidth:"2"})]})},et=[{title:E(),value:kn(f.todayRevenue+f.todaySideBusinessRevenue),change:`Products: ${kn(f.todayRevenue)} | Side Business: ${kn(f.todaySideBusinessRevenue)}`,changeColor:"#1a1a1a",icon:"fa-solid fa-euro-sign",bgColor:"#1a1a1a",iconColor:"#f1f0e4"},{title:z(),value:f.todayTransactions,change:ge().text,changeIcon:ge().icon,changeColor:"#bca88d",icon:"fa-solid fa-shopping-cart",bgColor:"#bca88d",iconColor:"#1a1a1a",pieChart:{productCount:Z(),sideBusinessCount:me}}];return p?s.jsxs("div",{style:{padding:"0"},children:[s.jsx("style",{children:`
          @keyframes shimmer { 0% { background-position: -400px 0; } 100% { background-position: 400px 0; } }
          .skeleton { background-image: linear-gradient(90deg, #e5e7eb 0px, #f3f4f6 40px, #e5e7eb 80px); background-size: 600px 100%; animation: shimmer 1.2s infinite linear; }
        `}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"24px",marginBottom:"32px"},children:[s.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),s.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),s.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}}),s.jsx("div",{className:"skeleton",style:{height:"140px",borderRadius:"16px"}})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px"},children:[s.jsx("div",{className:"skeleton",style:{height:"300px",borderRadius:"16px"}}),s.jsx("div",{className:"skeleton",style:{height:"300px",borderRadius:"16px"}})]}),s.jsx("div",{className:"skeleton",style:{height:"420px",borderRadius:"16px"}})]}):s.jsxs("div",{style:{padding:"0"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"16px",marginBottom:"32px"},children:[s.jsxs("div",{onClick:()=>R(!0),style:{background:"#1a1a1a",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",transition:"all 0.2s ease",minWidth:"200px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[s.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),s.jsx("span",{style:{color:"#bca88d"},children:O.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),s.jsx("i",{className:"fa-solid fa-chevron-down",style:{fontSize:"12px",color:"#bca88d",transition:"transform 0.2s ease"}})]}),s.jsxs("div",{style:{display:"flex",gap:"8px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"4px"},children:[s.jsx("button",{onClick:()=>oe("today"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:Q==="today"?"#7d8d86":"transparent",color:Q==="today"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Today"}),s.jsx("button",{onClick:()=>oe("week"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:Q==="week"?"#7d8d86":"transparent",color:Q==="week"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"This Week"}),s.jsx("button",{onClick:()=>oe("month"),style:{padding:"6px 10px",borderRadius:"6px",border:"none",background:Q==="month"?"#7d8d86":"transparent",color:Q==="month"?"#f1f0e4":"#7d8d86",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"This Month"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"24px",marginBottom:"32px",minHeight:"140px"},children:[et.map((ve,Ge)=>s.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",transition:"all 0.3s ease",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[s.jsxs("div",{children:[s.jsx("p",{style:{color:"#1a1a1a",fontSize:"16px",fontWeight:"500",margin:"0 0 12px 0"},children:ve.title}),s.jsx("p",{style:{fontSize:"36px",fontWeight:"bold",color:"#1a1a1a",margin:"0 0 8px 0",lineHeight:"1.1"},children:ve.value}),s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",fontSize:"14px",fontWeight:"500",color:ve.changeColor,margin:0},children:ve.pieChart?s.jsxs(s.Fragment,{children:[Re(ve.pieChart.productCount,ve.pieChart.sideBusinessCount),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#dc2626"}}),s.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"#1a1a1a"},children:["Products: ",ve.pieChart.productCount]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f59e0b"}}),s.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"#1a1a1a"},children:["Side Business: ",ve.pieChart.sideBusinessCount]})]})]})]}):s.jsxs(s.Fragment,{children:[ve.changeIcon&&s.jsx("i",{className:ve.changeIcon,style:{fontSize:"12px"}}),s.jsx("span",{children:ve.change})]})}),Ge===0&&q.length>0&&s.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:"12px",maxWidth:"100%"},children:q.map(G=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",padding:"8px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",overflow:"hidden",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:G.image_url?s.jsx("img",{src:G.image_url,alt:G.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:Ce=>{const rt=Ce.target;rt.style.display="none";const Be=rt.parentElement;Be&&(Be.innerHTML='<i class="fa-solid fa-store" style="font-size: 18px; color: #7d8d86;"></i>')}}):s.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"18px",color:"#7d8d86"}})}),s.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[s.jsx("p",{style:{fontSize:"11px",color:"#7d8d86",fontWeight:"500",margin:"0 0 2px 0",lineHeight:"1.2"},children:G.name}),s.jsx("p",{style:{fontSize:"12px",color:"#1a1a1a",fontWeight:"600",margin:0},children:kn(G.total_amount)})]})]},G.business_id))})})]}),s.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"14px",background:ve.bgColor,display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"flex-end",marginTop:"16px"},children:s.jsx("i",{className:ve.icon,style:{fontSize:"24px",color:ve.iconColor}})})]})},Ge)),s.jsx("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid #d1d5db",borderWidth:"2px",borderStyle:"solid",borderColor:"#d1d5db",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px"},children:s.jsx(jE,{})}),s.jsx(CE,{activePeriod:Q,selectedDate:O})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"24px",marginBottom:"32px"},children:[s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:s.jsxs("div",{className:"dashboardCard",style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"5px solid #000000 !important"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"18px",color:"#f1f0e4"}})}),s.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:(()=>{switch(Q){case"today":const ve=new Date;return O.toDateString()===ve.toDateString()?"Recent Transactions":`${O.toLocaleDateString("en-US",{month:"short",day:"numeric"})} Transactions`;case"week":return"This Week Transactions";case"month":return"This Month Transactions";default:return"Recent Transactions"}})()})]}),s.jsx("button",{onClick:()=>be(O),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"View All"})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Y.length>0?Y.map(ve=>s.jsxs("div",{onClick:()=>e(`/transaction/TXN-${ve.sale_id.toString().padStart(6,"0")}`),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:ve.partial_payment?"#fef2f2":"white",borderRadius:"8px",border:ve.partial_payment?"1px solid #fecaca":"1px solid transparent",cursor:"pointer",transition:"all 0.2s ease"},children:[s.jsxs("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:ve.partial_payment?"#f59e0b":ve.status==="completed"?"#10b981":"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[s.jsx("i",{className:`fa-solid ${ve.partial_payment?"fa-exclamation":ve.status==="completed"?"fa-check":"fa-hourglass-half"}`,style:{fontSize:"12px",color:"white"}}),ve.partial_payment&&s.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"8px",height:"8px",borderRadius:"50%",background:"#dc2626",border:"1px solid white"}})]}),s.jsxs("div",{style:{flex:1},children:[s.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 2px 0"},children:["#TXN-",ve.sale_id.toString().padStart(6,"0")]}),s.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[ve.items_count," item",ve.items_count!==1?"s":""," | ",ve.payment_method,ve.partial_payment&&s.jsx("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"8px"},children:" PARTIAL"})]})]}),s.jsx("div",{style:{textAlign:"right"},children:ve.partial_payment?s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981",margin:"0 0 2px 0"},children:kn(ve.partial_amount||0)}),s.jsxs("p",{style:{fontSize:"11px",color:"#6b7280",margin:"0 0 2px 0",fontWeight:"500"},children:["of ",kn((ve.partial_amount||0)+(ve.remaining_amount||0))]}),s.jsxs("p",{style:{fontSize:"10px",color:"#dc2626",margin:0,fontWeight:"600"},children:["OWES: ",kn(ve.remaining_amount||0)]})]}):s.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:0},children:kn(ve.total_amount)})})]},ve.sale_id)):s.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#1a1a1a",fontSize:"14px"},children:(()=>{switch(Q){case"today":const ve=new Date;return O.toDateString()===ve.toDateString()?"No recent transactions":`No transactions on ${O.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`;case"week":return"No transactions this week";case"month":return"No transactions this month";default:return"No recent transactions"}})()})})]})}),s.jsx("div",{children:s.jsx(BE,{selectedDate:O,activePeriod:Q})})]}),y&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",margin:0},children:Fe(y)}),s.jsx("button",{onClick:W,style:{background:"none",border:"none",fontSize:"24px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:""})]}),_?s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"40px"},children:s.jsxs("div",{style:{fontSize:"16px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading transactions..."]})}):b.length>0?s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:b.map((ve,Ge)=>s.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>xe(ve.transaction_id),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"16px"},children:s.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"14px"}})}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 4px 0"},children:ve.transaction_id}),s.jsxs("p",{style:{fontSize:"12px",color:"#1a1a1a",margin:0},children:[new Date(ve.datetime).toLocaleTimeString()," | ",ve.items_count," items | ",ve.payment_method]})]})]}),s.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1a1a1a"},children:kn(ve.total_amount)})]},Ge))}):s.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#1a1a1a"},children:[s.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),s.jsx("p",{style:{fontSize:"16px",margin:0},children:qe(y)})]})]})}),N&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[s.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1a1a1a",margin:0},children:J.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s.jsx("button",{onClick:()=>ae(new Date(J.getFullYear(),J.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:s.jsx("i",{className:"fa-solid fa-chevron-left"})}),s.jsx("button",{onClick:()=>ae(new Date(J.getFullYear(),J.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#1a1a1a",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},children:s.jsx("i",{className:"fa-solid fa-chevron-right"})}),s.jsx("button",{onClick:()=>R(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},children:""})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ve=>s.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#1a1a1a",padding:"8px 4px"},children:ve},ve)),X(J.getFullYear(),J.getMonth()).map((ve,Ge)=>{const G=ve.getMonth()===J.getMonth(),Ce=ve.toDateString()===new Date().toDateString(),rt=ve.toDateString()===O.toDateString();return s.jsx("button",{onClick:()=>C(ve),style:{background:rt?"#1a1a1a":"transparent",color:rt?"#f1f0e4":G?"#1a1a1a":"#bca88d",border:Ce?"2px solid #1a1a1a":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:G?1:.5},children:ve.getDate()},Ge)})]}),s.jsx("div",{style:{textAlign:"center"},children:s.jsx("button",{onClick:()=>C(new Date),style:{background:"#1a1a1a",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Today"})})]})})]})};async function LE(e,t,r){if(console.log("?? Starting image upload for product:",t),console.log("?? File details:",{name:e.name,size:e.size,type:e.type}),r==null)return console.error("Cannot upload product image without an active business"),null;try{const a=`product-images/${t}.${e.name.split(".").pop()}`;console.log("?? Uploading to Supabase Storage:",a);const{error:o}=await Ne.storage.from("products").upload(a,e,{contentType:e.type,upsert:!0});if(o)return console.error("? Upload failed:",o),null;const{data:{publicUrl:c}}=Ne.storage.from("products").getPublicUrl(a);console.log("? Image uploaded successfully:",c),console.log("?? Updating database with public URL...");const{error:d}=await Ne.from("products").update({image_url:c}).eq("product_id",t).eq("business_id",r);return d?(console.error("? DB update failed:",d),null):(console.log("? Database updated with public URL"),c)}catch(a){return console.error("?? Unexpected error during upload:",a),null}}const PE=()=>{const{hasPermission:e}=au(),{user:t}=on(),{businessId:r,businessLoading:a}=su(),[o,c]=T.useState([]),[d,f]=T.useState(!0),[h,p]=T.useState(null),[x,y]=T.useState({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),[v,b]=T.useState(null),[w,_]=T.useState(!1),[S,N]=T.useState(null),[R,O]=T.useState(null),[P,J]=T.useState(!1),[ae,Y]=T.useState("daily"),[F,Q]=T.useState(""),[oe,q]=T.useState("all"),[de,te]=T.useState(!1),[ne,me]=T.useState([]),[re,be]=T.useState(!1),[W,xe]=T.useState(!1),[C,X]=T.useState(null),[E,z]=T.useState({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),[H,Z]=T.useState(!1),[ge,Fe]=T.useState(!1),[qe,Re]=T.useState("Hi! I'm Lily, your inventory assistant! I can help you understand your stock levels and manage your products. Hover over the stats cards to see what they mean!"),[Oe,et]=T.useState(!1),[ve,Ge]=T.useState(null),[G,Ce]=T.useState(null),[rt,Be]=T.useState(!1),[gt,at]=T.useState(null),[vt,bt]=T.useState(null),[Ie,nt]=T.useState(1),[mt,Ut]=T.useState(10),[or,Lt]=T.useState(0),[le,He]=T.useState([]),[ht,Ot]=T.useState([]),[lr,kr]=T.useState(null),[Sr,rr]=T.useState(null),Rr=300*1e3,Ht=async(k=!1)=>{if(r==null){Ot([]);return}if(!k&&lr&&lr.businessId===r&&Date.now()-lr.timestamp<Rr){const ce=lr.data.map(Ae=>({...Ae,price:0,stock_quantity:0,supplier_info:"",reorder_level:0,image_url:null,created_at:"",updated_at:""}));Ot(ce);return}try{const{data:ce,error:Ae}=await Ne.from("products").select("product_id, name, category").eq("business_id",r).order("name",{ascending:!0});if(Ae){console.error("Error fetching all products for suggestions:",Ae);return}const ct=ce||[],_t=ct.map(wt=>({...wt,price:0,stock_quantity:0,supplier_info:"",reorder_level:0,image_url:null,created_at:"",updated_at:""}));Ot(_t),kr({data:ct,timestamp:Date.now(),businessId:r})}catch(ce){console.error("Error fetching all products for suggestions:",ce)}},ir=async()=>{if(r==null){He([]);return}try{const{data:k,error:ce}=await Ne.from("products").select("category").eq("business_id",r).not("category","is",null).not("category","eq","");if(ce){console.error("Error fetching categories:",ce);return}const Ae=Array.from(new Set(k.map(ct=>ct.category))).filter(ct=>ct&&ct.trim()!=="").sort();He(Ae)}catch(k){console.error("Error fetching distinct categories:",k)}};T.useEffect(()=>{if(r==null){c([]),Ot([]),He([]),y({totalProducts:0,inStock:0,lowStock:0,outOfStock:0}),Lt(0);return}st(1,mt,F,oe,v),ir(),Ht(!0),At(!0)},[r,a]),T.useEffect(()=>{console.log("Modal state changed:",{showEditModal:W,editingProduct:C?.name})},[W,C]);const se=()=>{nt(1),st(1,mt,F,oe)},ke=k=>{k.key==="Enter"&&(se(),te(!1))},xt=k=>{const ce=k.target.value;if(Q(ce),ce.length>=2){const Ae=D(ce);me(Ae),te(Ae.length>0)}else te(!1),me([])},Nt=k=>{const ce=k.type==="product"?k.product.name:k.name;Q(ce),te(!1),me([]),nt(1),st(1,mt,ce,oe)},nr=()=>{Q(""),te(!1),me([]),nt(1),st(1,mt,"",oe)};T.useEffect(()=>{r!=null&&(nt(1),st(1,mt,F,oe,v))},[oe,r,a]);const st=async(k=Ie,ce=mt,Ae=F,ct=oe,_t=null)=>{if(r==null){c([]),Lt(0),f(!1);return}try{if(f(!0),p(null),_t&&_t!=="totalProducts"){let wt=Ne.from("products").select("*").eq("business_id",r).order("product_id",{ascending:!0});if(Ae&&Ae.trim()){const br=`name.ilike.%${Ae.trim()}%,category.ilike.%${Ae.trim()}%`;wt=wt.or(br)}ct&&ct!=="all"&&(wt=wt.eq("category",ct)),_t==="outOfStock"&&(wt=wt.eq("stock_quantity",0));const{data:ot,error:jt}=await wt;if(jt)throw jt;let Et=ot||[];_t==="inStock"?Et=Et.filter(br=>br.stock_quantity>br.reorder_level):_t==="lowStock"&&(Et=Et.filter(br=>br.stock_quantity<=br.reorder_level&&br.stock_quantity>0)),Lt(Et.length);const Pt=(k-1)*ce,Fr=Et.slice(Pt,Pt+ce);c(Fr)}else{let wt=Ne.from("products").select("product_id",{count:"exact",head:!0}).eq("business_id",r),ot=Ne.from("products").select("*").eq("business_id",r).order("product_id",{ascending:!0});if(Ae&&Ae.trim()){const Tn=`name.ilike.%${Ae.trim()}%,category.ilike.%${Ae.trim()}%`;wt=wt.or(Tn),ot=ot.or(Tn)}ct&&ct!=="all"&&(wt=wt.eq("category",ct),ot=ot.eq("category",ct));const{count:jt,error:Et}=await wt;if(Et)throw Et;Lt(jt||0);const Pt=(k-1)*ce,{data:Fr,error:br}=await ot.range(Pt,Pt+ce-1);if(br)throw br;c(Fr||[])}}catch(wt){const ot=wt instanceof Error?wt.message:"Failed to fetch products";p(ot),console.error("Error fetching products:",wt),alert(`Products loading error: ${ot}. Please check your database permissions.`)}finally{f(!1)}},At=async(k=!1)=>{if(r==null){y({totalProducts:0,inStock:0,lowStock:0,outOfStock:0});return}if(!k&&Sr&&Sr.businessId===r&&Date.now()-Sr.timestamp<Rr){y(Sr.data);return}try{const{data:ce,error:Ae}=await Ne.from("products").select("stock_quantity, reorder_level").eq("business_id",r);if(Ae)throw Ae;if(ce){const ct=ce.length,_t=ce.filter(Et=>Et.stock_quantity>Et.reorder_level).length,wt=ce.filter(Et=>Et.stock_quantity<=Et.reorder_level&&Et.stock_quantity>0).length,ot=ce.filter(Et=>Et.stock_quantity===0).length,jt={totalProducts:ct,inStock:_t,lowStock:wt,outOfStock:ot};y(jt),rr({data:jt,timestamp:Date.now(),businessId:r})}}catch(ce){console.error("Error fetching summary stats:",ce)}},Dt=k=>{v===k?(b(null),Q(""),q("all"),nt(1),st(1,mt,"","all")):(b(k),Q(""),q("all"),nt(1),st(1,mt,"","all",k))},_n=k=>{const ce=new Date,Ae=new Date(ce.getTime()-720*60*60*1e3);new Date(ce.getTime()-10080*60*1e3);const ct=k.filter(jt=>jt.sales&&new Date(jt.sales.datetime)>=Ae),_t=[];for(let jt=29;jt>=0;jt--){const Et=new Date(ce.getTime()-jt*24*60*60*1e3),Pt=Et.toISOString().split("T")[0],Fr=ct.filter(A=>A.sales&&A.sales.datetime.startsWith(Pt)),br=Fr.length,Tn=Fr.reduce((A,he)=>A+(he.calculated_price||he.price_each*he.quantity),0);_t.push({date:Pt,day:Et.getDate(),month:Et.getMonth()+1,sales:br,revenue:Tn})}const wt=[];for(let jt=3;jt>=0;jt--){const Et=new Date(ce.getTime()-(jt+1)*7*24*60*60*1e3),Pt=new Date(ce.getTime()-jt*7*24*60*60*1e3),Fr=ct.filter(A=>{if(!A.sales)return!1;const he=new Date(A.sales.datetime);return he>=Et&&he<Pt}),br=Fr.length,Tn=Fr.reduce((A,he)=>A+(he.calculated_price||he.price_each*he.quantity),0);wt.push({week:`Week ${4-jt}`,startDate:Et.toISOString().split("T")[0],endDate:Pt.toISOString().split("T")[0],sales:br,revenue:Tn})}const ot=[];for(let jt=5;jt>=0;jt--){const Et=new Date(ce.getFullYear(),ce.getMonth()-jt,1),Pt=new Date(ce.getFullYear(),ce.getMonth()-jt+1,0),Fr=k.filter(A=>{if(!A.sales)return!1;const he=new Date(A.sales.datetime);return he>=Et&&he<=Pt}),br=Fr.length,Tn=Fr.reduce((A,he)=>A+(he.calculated_price||he.price_each*he.quantity),0);ot.push({month:Et.toLocaleDateString("en-US",{month:"short",year:"numeric"}),sales:br,revenue:Tn})}return{daily:_t,weekly:wt,monthly:ot}},jr=async k=>{if(r==null){O(null);return}try{J(!0),p(null),console.log("Fetching insights for product:",k.product_id,k.name);const ce=k.sales_count||0,Ae=k.total_revenue||0,ct=k.last_sold_date,_t=ce>0?(ce/30).toFixed(1):0,wt=Ae*.6,ot=Ae-wt,jt=Ae>0?ot/Ae*100:0,{data:Et,error:Pt}=await Ne.from("sale_items").select(`
          *,
          sales (
            sale_id,
            datetime,
            total_amount,
            payment_method,
            customers (name),
            users (username),
            business_id
          )
        `).eq("product_id",k.product_id).eq("sales.business_id",r).order("sales.datetime",{ascending:!1});if(Pt)throw Pt;console.log("All sales query result:",{data:Et});const Fr=Et?.slice(0,10)||[],br=Fr?.map(Xe=>({date:Xe.sales?new Date(Xe.sales.datetime).toLocaleDateString():"Unknown",time:Xe.sales?new Date(Xe.sales.datetime).toLocaleTimeString():"Unknown",quantity:Xe.weight||Xe.quantity,unit:Xe.weight?k.weight_unit||"kg":"units",price:Xe.calculated_price||Xe.price_each*Xe.quantity,customer:Xe.sales?.customers?.name||"Walk-in Customer",cashier:Xe.sales?.users?.username||"Unknown"}))||[],Tn=Fr?.reduce((Xe,lt)=>Xe+(lt.weight||lt.quantity),0)||0,A=new Date;A.setDate(A.getDate()-30);const Ke=(Fr?.filter(Xe=>Xe.sales&&new Date(Xe.sales.datetime)>=A)||[]).reduce((Xe,lt)=>{if(lt.sales&&lt.sales.datetime){const ut=new Date(lt.sales.datetime).toDateString();Xe[ut]=(Xe[ut]||0)+1}return Xe},{}),Qe=Object.entries(Ke).sort(([,Xe],[,lt])=>lt-Xe).slice(0,5).map(([Xe,lt])=>({date:Xe,count:lt})),Ve=_n(Et||[]);console.log("Calculated insights:",{totalSales:ce,totalRevenue:Ae,totalQuantitySold:Tn,averageSalesPerDay:_t,topSellingDays:Qe,estimatedProfit:ot,profitMargin:jt,recentSalesList:br,lastSoldDate:ct,chartData:Ve}),O({product:k,totalSales:ce,totalRevenue:Ae,totalQuantitySold:Tn,averageSalesPerDay:parseFloat(_t),topSellingDays:Qe,estimatedProfit:ot,profitMargin:jt,recentSalesList:br,lastSoldDate:ct,chartData:Ve,salesData:Et||[]})}catch(ce){console.error("Error fetching product insights:",ce),p(ce instanceof Error?ce.message:"Failed to fetch product insights")}finally{J(!1)}},Sn=k=>{N(k),_(!0),jr(k)},Yt=o,Rt=Math.ceil(or/mt),gr=or>0?(Ie-1)*mt+1:0,Un=Math.min(Ie*mt,or),ha=["all",...le],Wn=k=>!k||k.length<2?[]:le.filter(Ae=>Ae.toLowerCase().includes(k.toLowerCase())||k.toLowerCase().includes(Ae.toLowerCase())||Ae.toLowerCase().split(" ").some(ct=>ct.includes(k.toLowerCase())||k.toLowerCase().includes(ct))).slice(0,5),D=k=>{if(!k||k.length<2)return[];const ce=k.toLowerCase(),Ae=[],ct=[];ht.forEach(ot=>{ot.name.toLowerCase().includes(ce)&&Ae.push({type:"product",product:ot}),ot.category.toLowerCase().includes(ce)&&Ae.push({type:"product",product:ot}),ot.description&&ot.description.toLowerCase().includes(ce)&&Ae.push({type:"product",product:ot}),ot.sku&&ot.sku.toLowerCase().includes(ce)&&Ae.push({type:"product",product:ot})}),le.forEach(ot=>{ot.toLowerCase().includes(ce)&&ct.push({type:"category",name:ot})});const _t=Ae.filter((ot,jt,Et)=>ot.type==="product"&&Et.findIndex(Pt=>Pt.type==="product"&&Pt.product.product_id===ot.product.product_id)===jt).slice(0,6),wt=ct.filter((ot,jt,Et)=>ot.type==="category"&&Et.findIndex(Pt=>Pt.type==="category"&&Pt.name===ot.name)===jt).slice(0,2);return[..._t,...wt]},U=k=>{k>=1&&k<=Rt&&(nt(k),st(k,mt,F,oe))},B=k=>{Ut(k),nt(1),st(1,k,F,oe)},L=()=>{Ie>1&&U(Ie-1)},V=()=>{Ie<Rt&&U(Ie+1)},K=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(k){const ce=Math.random()*16|0;return(k==="x"?ce:ce&3|8).toString(16)}),_e=(k,ce,Ae=!1)=>{const ct=(ot,jt,Et=!0)=>{if(!ot||ot.trim()===""){if(Et)throw new Error(`${jt} is required`);return 0}const Pt=parseFloat(ot);if(isNaN(Pt))throw new Error(`${jt} must be a valid number`);return Pt},_t=(ot,jt,Et=!0)=>{if(!ot||ot.trim()===""){if(Et)throw new Error(`${jt} is required`);return 0}const Pt=parseInt(ot);if(isNaN(Pt)||!Number.isInteger(Pt))throw new Error(`${jt} must be a valid whole number`);return Pt},wt={name:k.product_name?.trim()||(()=>{throw new Error("Product name is required")})(),category:k.category?.trim()||(()=>{throw new Error("Category is required")})(),price:k.is_weighted?0:ct(k.price,"Price",!Ae),stock_quantity:_t(k.stock_quantity,"Stock quantity",!Ae),supplier_info:k.supplier_info?.trim()||"",reorder_level:_t(k.reorder_level,"Reorder level",!Ae),tax_rate:k.tax_rate?ct(k.tax_rate,"Tax rate",!1):0,last_updated:new Date().toISOString(),is_weighted:k.is_weighted||!1,weight_unit:k.is_weighted?k.weight_unit:null,price_per_unit:k.is_weighted&&k.price_per_unit?ct(k.price_per_unit,"Price per unit",!1):null,description:k.description?.trim()||"",sku:k.sku?.trim()||"",barcode:(()=>{const ot=k.barcode?.trim();return ot&&ot.length>0?ot:null})()};return ce?{...wt,product_id:ce}:wt},De=k=>{if(k.key!=="Enter")return;const ce=k.target;!ce||ce instanceof HTMLTextAreaElement||ce instanceof HTMLButtonElement||ce instanceof HTMLInputElement&&ce.type==="submit"||!(ce instanceof HTMLInputElement||ce instanceof HTMLSelectElement)||(k.preventDefault(),k.stopPropagation())},fe=async k=>{if(k.preventDefault(),console.log("Form submitted, newProduct:",E),Z(!0),r==null){p("Please select a business before adding products"),Z(!1);return}try{const ce=K();console.log("Generated product ID:",ce);const Ae=_e(E,ce),ct={...Ae,business_id:r};console.log("Inserting product data:",ct);const{data:_t,error:wt}=await Ne.from("products").insert([ct]).select();if(wt)throw console.error("Supabase error:",wt),wt;const ot=_t?.[0]?{..._t[0],barcode:Ae.barcode??null}:null;if(!ot)throw new Error("Product insertion returned no data");if(console.log("Product added successfully!"),ve){const jt=await $e(ce);if(jt){const Et={...ot,image_url:jt};c(Pt=>[...Pt,Et])}else c(Et=>[...Et,ot])}else c(jt=>[...jt,ot]);Lt(jt=>jt+1),z({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),Ge(null),Ce(null),be(!1),ir(),Ht(!0),At(!0)}catch(ce){console.error("Error adding product:",ce);let Ae="Failed to add product";ce instanceof Error&&ce.message&&(ce.message.includes("is required")||ce.message.includes("must be a valid")?Ae=ce.message:ce.message.includes("duplicate key value violates unique constraint")?Ae="A product with this ID already exists. Please try again.":ce.message.includes("violates check constraint")?Ae="Invalid data provided. Please check your input values.":ce.message.includes("not-null constraint")?Ae="Required fields are missing. Please fill in all required fields.":Ae=`Failed to add product: ${ce.message}`),p(Ae)}finally{Z(!1)}},we=async k=>{if(k.preventDefault(),!!C){if(r==null){p("Please select a business before updating products");return}Z(!0),p(null);try{console.log("Editing product data:",E);const ce=_e(E,void 0,!0);console.log("Transformed product data:",ce);const{data:Ae,error:ct}=await Ne.from("products").update(ce).eq("product_id",C.product_id).eq("business_id",r).select();if(ct)throw console.error("Supabase error:",ct),console.error("Error details:",JSON.stringify(ct,null,2)),ct;let _t=Ae?.[0]?{...Ae[0],barcode:ce.barcode??null}:null;if(!_t)throw new Error("Product update returned no data");if(ve){const wt=await $e(C.product_id);wt&&(_t={..._t,image_url:wt})}c(o.map(wt=>wt.product_id===C.product_id?_t:wt)),Ue(),xe(!1),X(null),ir(),Ht(!0),At(!0)}catch(ce){console.error("Failed to update product:",ce);let Ae="Failed to update product";ce instanceof Error&&ce.message&&(ce.message.includes("is required")||ce.message.includes("must be a valid")?Ae=ce.message:ce.message.includes("violates check constraint")?Ae="Invalid data provided. Please check your input values.":ce.message.includes("not-null constraint")?Ae="Required fields are missing. Please fill in all required fields.":Ae=`Failed to update product: ${ce.message}`),p(Ae)}finally{Z(!1)}}},Te=async k=>{if(r==null){p("Please select a business before deleting products");return}try{console.log("??? Starting delete for product:",k);const{error:ce}=await Ne.from("products").delete().eq("product_id",k).eq("business_id",r);if(ce)throw console.error("?? Error deleting product:",ce),ce;console.log("? Product deleted successfully"),c(o.filter(Ae=>Ae.product_id!==k)),bt(null),Lt(Ae=>Math.max(0,Ae-1)),Ht(!0),At(!0)}catch(ce){console.error("? Delete failed:",ce),p(ce instanceof Error?ce.message:"Failed to delete product")}},Ue=()=>{z({product_name:"",category:"",price:"",stock_quantity:"100",reorder_level:"10",supplier_info:"",tax_rate:"",description:"",sku:"",barcode:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),Ge(null),Ce(null),be(!1),xe(!1),X(null)},Ye=k=>{console.log("Starting edit for product:",k),X(k),z({product_name:k.name,category:k.category,price:k.is_weighted?k.price_per_unit?.toString()||"":k.price.toString(),stock_quantity:k.stock_quantity.toString(),reorder_level:k.reorder_level.toString(),supplier_info:k.supplier_info||"",tax_rate:k.tax_rate?.toString()||"",description:k.description||"",sku:k.sku||"",barcode:k.barcode||"",is_weighted:k.is_weighted||!1,weight_unit:k.weight_unit||"",price_per_unit:k.price_per_unit?.toString()||""}),Ce(k.image_url||null),Ge(null),xe(!0),console.log("Edit modal should be open now")},it=k=>{const ce=k.target.files?.[0];if(ce){Ge(ce);const Ae=new FileReader;Ae.onload=ct=>{Ce(ct.target?.result)},Ae.readAsDataURL(ce)}},$e=async k=>{if(!ve)return null;if(r==null)return console.error("Cannot upload image without selecting a business"),null;try{return await LE(ve,k,r)}catch(ce){return console.error("Image upload failed:",ce),null}},tt=k=>{at(k),Be(!0)},St=()=>{Be(!1),at(null)},Kt=(k,ce)=>k===0?{status:"out",color:"#ef4444",bgColor:"#fef2f2",textColor:"#dc2626"}:k<=ce?{status:"low",color:"#f59e0b",bgColor:"#fffbeb",textColor:"#d97706"}:{status:"good",color:"#10b981",bgColor:"#f0fdf4",textColor:"#059669"},Qt=k=>{const ce=k.toLowerCase();return ce.includes("small")?"#3b82f6":ce.includes("large")?"#ef4444":ce.includes("medium")?"#f59e0b":"#7d8d86"},Jt=k=>{const ce=k.split(" ");return ce.map((Ae,ct)=>{const _t=Ae.toLowerCase();let wt="#1a1a1a";return _t==="small"?wt="#3b82f6":_t==="large"?wt="#ef4444":_t==="medium"&&(wt="#f59e0b"),s.jsxs("span",{style:{color:wt},children:[Ae,ct<ce.length-1?" ":""]},ct)})},wn=()=>s.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,display:"flex",alignItems:"flex-end",gap:"12px"},children:[ge&&s.jsxs("div",{style:{background:"#f8fafc",border:"2px solid #7d8d86",borderRadius:"16px",padding:"12px 16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",maxWidth:"250px",fontSize:"14px",color:"#3e3f29",position:"relative",marginBottom:"8px"},children:[s.jsx("p",{style:{margin:0,fontWeight:"500"},children:qe}),s.jsx("div",{style:{position:"absolute",bottom:"-8px",right:"20px",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"8px solid #7d8d86"}})]}),s.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"#f8fafc",border:"3px solid #7d8d86",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease"},onClick:()=>Fe(!ge),onMouseEnter:k=>{const ce=k.target;ce.style.transform="scale(1.05)"},onMouseLeave:k=>{const ce=k.target;ce.style.transform="scale(1)"},children:s.jsx("img",{src:t?.icon?`/retailpos/images/icons/${t.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:t?.icon||"Lily",style:{width:"50px",height:"50px",borderRadius:"50%"}})})]});return d?s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:s.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading inventory..."]})}):s.jsxs("div",{style:{padding:"24px",background:"#f8fafc",minHeight:"100vh",border:"1px solid rgba(125, 141, 134, 0.1)",borderRadius:"16px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px",padding:"20px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsxs("div",{children:[s.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:"Inventory Management"}),s.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:"Manage your product inventory, stock levels, and suppliers."})]}),e("canManageProducts")&&s.jsxs("button",{onClick:()=>{console.log("Add Product button clicked"),be(!0),console.log("showAddModal set to true")},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},onMouseEnter:k=>{k.target.style.background="#bca88d",Re("Click this button to add a new product to your inventory! You'll need to fill in details like name, price, stock quantity, and reorder level."),Fe(!0)},onMouseLeave:k=>{k.target.style.background="#7d8d86",Fe(!1)},children:[s.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"16px"}}),s.jsx("span",{children:"Add Product"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginBottom:"32px",padding:"20px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsx("div",{onClick:()=>Dt("totalProducts"),style:{background:v==="totalProducts"?"#f0f8f0":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="totalProducts"?"2px solid #7d8d86":"2px solid transparent"},onMouseEnter:k=>{v!=="totalProducts"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{v!=="totalProducts"&&(k.target.style.background="#f8fafc")},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"18px",color:"#f1f0e4"}})}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.totalProducts}),s.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Total Products"})]})]})}),s.jsx("div",{onClick:()=>Dt("inStock"),style:{background:v==="inStock"?"#f0fdf4":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="inStock"?"2px solid #10b981":"2px solid transparent"},onMouseEnter:k=>{v!=="inStock"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{v!=="inStock"&&(k.target.style.background="#f8fafc")},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("i",{className:"fa-solid fa-circle-check",style:{fontSize:"18px",color:"white"}})}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.inStock}),s.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"In Stock"})]})]})}),s.jsx("div",{onClick:()=>Dt("lowStock"),style:{background:v==="lowStock"?"#fffbeb":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="lowStock"?"2px solid #f59e0b":"2px solid transparent"},onMouseEnter:k=>{v!=="lowStock"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{v!=="lowStock"&&(k.target.style.background="#f8fafc")},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("i",{className:"fa-solid fa-triangle-exclamation",style:{fontSize:"18px",color:"white"}})}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.lowStock}),s.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Low Stock"})]})]})}),s.jsx("div",{onClick:()=>Dt("outOfStock"),style:{background:v==="outOfStock"?"#fef2f2":"#f8fafc",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",cursor:"pointer",transition:"all 0.2s ease",border:v==="outOfStock"?"2px solid #ef4444":"2px solid transparent"},onMouseEnter:k=>{v!=="outOfStock"&&(k.target.style.background="#f1f5f9")},onMouseLeave:k=>{v!=="outOfStock"&&(k.target.style.background="#f8fafc")},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("i",{className:"fa-solid fa-circle-xmark",style:{fontSize:"18px",color:"white"}})}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:x.outOfStock}),s.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Out of Stock"})]})]})})]}),s.jsx("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"2px solid rgba(125, 141, 134, 0.3)"},children:s.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"center",flexWrap:"wrap"},children:[s.jsx("div",{style:{flex:"1",minWidth:"250px",maxWidth:"400px"},children:s.jsxs("div",{style:{position:"relative",display:"flex",gap:"8px"},children:[s.jsxs("div",{style:{position:"relative",flex:1},children:[s.jsx("i",{className:"fa-solid fa-search",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#7d8d86",fontSize:"14px",zIndex:1}}),s.jsx("input",{type:"text",placeholder:"Search products... (Press Enter to search)",value:F,onChange:xt,onKeyPress:ke,onBlur:()=>{setTimeout(()=>te(!1),200)},onFocus:()=>{F.length>=2&&ne.length>0&&te(!0)},style:{width:"100%",padding:"10px 12px 10px 36px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",boxSizing:"border-box"}}),F&&s.jsx("button",{onClick:nr,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"12px",transition:"color 0.2s ease"},onMouseEnter:k=>k.target.style.color="#ef4444",onMouseLeave:k=>k.target.style.color="#7d8d86",children:s.jsx("i",{className:"fa-solid fa-times"})}),de&&ne.length>0&&s.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #d1d5db",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:50,maxHeight:"300px",overflow:"auto"},children:ne.map((k,ce)=>s.jsx("div",{onClick:()=>Nt(k),style:{padding:"12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ce<ne.length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:Ae=>Ae.target.style.background="#f9fafb",onMouseLeave:Ae=>Ae.target.style.background="#f8fafc",children:k.type==="product"?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"6px",overflow:"hidden",flexShrink:0,backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:k.product.image_url?s.jsx("img",{src:k.product.image_url,alt:k.product.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):s.jsx("i",{className:"fa-solid fa-box",style:{color:"#9ca3af",fontSize:"16px"}})}),s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("div",{style:{fontWeight:"500",marginBottom:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.product.name}),s.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{children:k.product.category}),s.jsx("span",{children:"?"}),s.jsx("span",{style:{fontWeight:"500",color:"#059669"},children:k.product.is_weighted?`?${k.product.price_per_unit}/${k.product.weight_unit}`:`?${k.product.price}`}),k.product.sku&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"?"}),s.jsxs("span",{children:["SKU: ",k.product.sku]})]})]})]}),s.jsx("i",{className:"fa-solid fa-box",style:{color:"#7d8d86",fontSize:"14px",flexShrink:0}})]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-tags",style:{color:"#7d8d86",fontSize:"16px",width:"16px",flexShrink:0}}),s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("div",{style:{fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.name}),s.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Category"})]}),s.jsx("i",{className:"fa-solid fa-arrow-right",style:{color:"#7d8d86",fontSize:"12px",flexShrink:0}})]})},ce))})]}),s.jsxs("button",{onClick:se,style:{padding:"10px 16px",background:"#7d8d86",color:"#f1f0e4",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},onMouseEnter:k=>k.target.style.background="#bca88d",onMouseLeave:k=>k.target.style.background="#7d8d86",children:[s.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"12px"}}),"Search"]})]})}),s.jsx("div",{style:{minWidth:"180px"},children:s.jsx("select",{value:oe,onChange:k=>q(k.target.value),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",cursor:"pointer"},children:ha.map(k=>s.jsx("option",{value:k,children:k==="all"?"All Categories":k},k))})})]})}),s.jsx("div",{style:{background:"#f8fafc",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"2px solid rgba(125, 141, 134, 0.3)"},children:s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{style:{background:"#3e3f29",borderBottom:"4px solid #7d8d86"},children:s.jsxs("tr",{children:[s.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Product"}),s.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Category"}),s.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Price"}),s.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Stock"}),s.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86",borderRight:"2px solid #7d8d86"},children:"Status"}),s.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",borderBottom:"4px solid #7d8d86"},children:"Actions"})]})}),s.jsx("tbody",{style:{border:"1px solid rgba(125, 141, 134, 0.2)"},children:Yt.length===0?s.jsx("tr",{children:s.jsxs("td",{colSpan:6,style:{padding:"40px",textAlign:"center",color:"#7d8d86"},children:[s.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),s.jsx("p",{style:{fontSize:"16px",margin:0},children:"No products found"}),s.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0"},children:"Add your first product to get started!"})]})}):Yt.map(k=>{const ce=Kt(k.stock_quantity,k.reorder_level);return s.jsxs("tr",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",borderLeft:"1px solid rgba(125, 141, 134, 0.2)",borderRight:"1px solid rgba(125, 141, 134, 0.2)",transition:"background 0.2s ease",cursor:"pointer"},onClick:()=>Sn(k),onMouseEnter:Ae=>Ae.target.style.background="rgba(125, 141, 134, 0.05)",onMouseLeave:Ae=>Ae.target.style.background="transparent",children:[s.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[k.image_url&&s.jsx("img",{src:k.image_url,alt:k.name,onClick:Ae=>{Ae.stopPropagation(),k.image_url&&tt(k.image_url)},style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:Ae=>{const ct=Ae.target;ct.style.transform="scale(1.05)",ct.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",Re("Click on the image to see it in full size! This helps you get a better look at the product."),Fe(!0)},onMouseLeave:Ae=>{const ct=Ae.target;ct.style.transform="scale(1)",ct.style.boxShadow="none",Fe(!1)}}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 4px 0"},children:Jt(k.name)}),s.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["ID: ",k.product_id]})]})]})}),s.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:s.jsx("span",{style:{background:"#f3f4f6",color:Qt(k.category),padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",border:`1px solid ${Qt(k.category)}`},children:k.category})}),s.jsxs("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:k.is_weighted&&k.price_per_unit&&k.weight_unit?`?${k.price_per_unit.toFixed(2)}/${k.weight_unit}`:`?${k.price.toFixed(2)}`}),k.is_weighted&&s.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"4px 0 0 0"},children:"Sold by weight"})]}),s.jsxs("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:k.stock_quantity}),s.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["Reorder: ",k.reorder_level]})]}),s.jsx("td",{style:{padding:"16px",borderRight:"2px solid rgba(125, 141, 134, 0.25)"},children:s.jsx("span",{style:{background:ce.bgColor,color:ce.textColor,padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:ce.status==="good"?"In Stock":ce.status==="low"?"Low Stock":"Out of Stock"})}),s.jsx("td",{style:{padding:"16px"},children:s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e("canManageProducts")&&s.jsxs("button",{onClick:Ae=>{Ae.stopPropagation(),console.log("Edit button clicked for product:",k.name),Ye(k)},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:Ae=>{Ae.target.style.background="#bca88d",Re(`Click to edit "${k.name}". You can update the price, stock quantity, reorder level, and other details!`),Fe(!0)},onMouseLeave:Ae=>{Ae.target.style.background="#7d8d86",Fe(!1)},children:[s.jsx("i",{className:"fa-solid fa-pen-to-square",style:{marginRight:"4px"}}),"Edit"]}),s.jsxs("button",{onClick:Ae=>{Ae.stopPropagation(),bt(k)},style:{background:"#ef4444",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:Ae=>Ae.target.style.background="#dc2626",onMouseLeave:Ae=>Ae.target.style.background="#ef4444",children:[s.jsx("i",{className:"fa-solid fa-trash-can",style:{marginRight:"4px"}}),"Delete"]})]})})]},k.product_id)})})]})})}),s.jsx("div",{style:{marginTop:"16px",fontSize:"14px",color:"#7d8d86",textAlign:"center",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)",marginBottom:"16px"},children:or>0?s.jsxs(s.Fragment,{children:["Showing ",gr,"-",Un," of ",or," products",Rt>1&&s.jsxs("span",{style:{marginLeft:"16px"},children:["(Page ",Ie," of ",Rt,")"]})]}):"No products found"}),Rt>1&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"#f8fafc",borderRadius:"12px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",marginBottom:"24px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("label",{style:{fontSize:"14px",color:"#3e3f29",fontWeight:"500"},children:"Show:"}),s.jsxs("select",{value:mt,onChange:k=>B(parseInt(k.target.value)),style:{padding:"6px 12px",border:"2px solid #bca88d",borderRadius:"6px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",cursor:"pointer"},children:[s.jsx("option",{value:5,children:"5"}),s.jsx("option",{value:10,children:"10"}),s.jsx("option",{value:25,children:"25"}),s.jsx("option",{value:50,children:"50"}),s.jsx("option",{value:100,children:"100"})]}),s.jsx("span",{style:{fontSize:"14px",color:"#7d8d86"},children:"per page"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsxs("button",{onClick:L,disabled:Ie===1,style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ie===1?"#f3f4f6":"white",color:Ie===1?"#9ca3af":"#3e3f29",cursor:Ie===1?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:k=>{Ie!==1&&(k.target.style.background="#f8f9fa")},onMouseLeave:k=>{Ie!==1&&(k.target.style.background="#f8fafc")},children:[s.jsx("i",{className:"fa-solid fa-chevron-left",style:{marginRight:"4px"}}),"Previous"]}),s.jsx("div",{style:{display:"flex",gap:"4px"},children:Array.from({length:Math.min(5,Rt)},(k,ce)=>{let Ae;return Rt<=5||Ie<=3?Ae=ce+1:Ie>=Rt-2?Ae=Rt-4+ce:Ae=Ie-2+ce,s.jsx("button",{onClick:()=>U(Ae),style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ie===Ae?"#7d8d86":"white",color:Ie===Ae?"#f1f0e4":"#3e3f29",cursor:"pointer",fontSize:"14px",fontWeight:Ie===Ae?"600":"400",transition:"all 0.2s ease",minWidth:"40px"},onMouseEnter:ct=>{Ie!==Ae&&(ct.target.style.background="#f8f9fa")},onMouseLeave:ct=>{Ie!==Ae&&(ct.target.style.background="#f8fafc")},children:Ae},Ae)})}),s.jsxs("button",{onClick:V,disabled:Ie===Rt,style:{padding:"8px 12px",border:"2px solid #bca88d",borderRadius:"6px",background:Ie===Rt?"#f3f4f6":"white",color:Ie===Rt?"#9ca3af":"#3e3f29",cursor:Ie===Rt?"not-allowed":"pointer",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:k=>{Ie!==Rt&&(k.target.style.background="#f8f9fa")},onMouseLeave:k=>{Ie!==Rt&&(k.target.style.background="#f8fafc")},children:["Next",s.jsx("i",{className:"fa-solid fa-chevron-right",style:{marginLeft:"4px"}})]})]})]}),re&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:s.jsxs("div",{style:{background:"#f8fafc",borderRadius:"16px",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[s.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Add New Product"}),s.jsx("button",{onClick:Ue,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#f3f4f6",k.target.style.color="#3e3f29",Re("Click this X button to close the form without saving. It's the same as clicking Cancel!"),Fe(!0)},onMouseLeave:k=>{k.target.style.background="none",k.target.style.color="#7d8d86",Fe(!1)},children:s.jsx("i",{className:"fa-solid fa-times"})})]}),s.jsxs("form",{onSubmit:fe,onKeyDown:De,children:[h&&s.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:h}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),s.jsx("input",{type:"text",required:!0,value:E.product_name,onChange:k=>z({...E,product_name:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:"text",required:!0,value:E.category,onChange:k=>{z({...E,category:k.target.value}),et(k.target.value.length>=2)},onFocus:()=>{et(E.category.length>=2),Re("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),Fe(!0)},onBlur:()=>setTimeout(()=>et(!1),200),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),Oe&&Wn(E.category).length>0&&s.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#f8fafc",border:"2px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:Wn(E.category).map((k,ce)=>s.jsxs("div",{onClick:()=>{z({...E,category:k}),et(!1),Re(`Great choice! I've selected "${k}" for you. This helps keep your categories organized!`),Fe(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ce<Wn(E.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:Ae=>Ae.target.style.background="#f8f9fa",onMouseLeave:Ae=>Ae.target.style.background="transparent",children:[s.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),k]},ce))})]})]})]}),s.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[s.jsx("input",{type:"checkbox",id:"is_weighted",checked:E.is_weighted,onChange:k=>z({...E,is_weighted:k.target.checked}),style:{width:"16px",height:"16px"}}),s.jsx("label",{htmlFor:"is_weighted",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),E.is_weighted&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),s.jsxs("select",{value:E.weight_unit,onChange:k=>z({...E,weight_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},children:[s.jsx("option",{value:"",children:"Select unit"}),s.jsx("option",{value:"kg",children:"Kilogram (kg)"}),s.jsx("option",{value:"g",children:"Gram (g)"}),s.jsx("option",{value:"lb",children:"Pound (lb)"}),s.jsx("option",{value:"oz",children:"Ounce (oz)"}),s.jsx("option",{value:"l",children:"Liter (l)"}),s.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",E.weight_unit||"unit"," *"]}),s.jsx("input",{type:"number",step:"0.01",required:E.is_weighted,value:E.price_per_unit,onChange:k=>z({...E,price_per_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",E.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),s.jsx("input",{type:"number",step:"0.01",required:!E.is_weighted,value:E.is_weighted?"0":E.price,onChange:k=>{E.is_weighted||z({...E,price:k.target.value})},style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:E.is_weighted?"#f9fafb":"white",color:E.is_weighted?"#6b7280":"#3e3f29",cursor:E.is_weighted?"not-allowed":"text"},placeholder:E.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:E.is_weighted})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),s.jsx("input",{type:"number",required:!0,value:E.stock_quantity,onChange:k=>z({...E,stock_quantity:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),s.jsx("input",{type:"number",required:!0,value:E.reorder_level,onChange:k=>z({...E,reorder_level:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"10"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),s.jsx("input",{type:"number",step:"0.01",value:E.tax_rate,onChange:k=>z({...E,tax_rate:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),s.jsx("input",{type:"text",value:E.supplier_info,onChange:k=>z({...E,supplier_info:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU (Auto-generated if empty)"}),s.jsx("input",{type:"text",value:E.sku,onChange:k=>z({...E,sku:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Leave empty for auto-generation"})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Barcode"}),s.jsx("input",{type:"text",value:E.barcode,onChange:k=>z({...E,barcode:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Scan or enter barcode"})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),s.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[s.jsx("input",{type:"file",accept:"image/*",onChange:it,style:{display:"none"},id:"image-upload"}),s.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:k=>{k.target.style.borderColor="#7d8d86",k.target.style.color="#3e3f29",Re("Click here to upload a product image! This helps customers see what they're buying."),Fe(!0)},onMouseLeave:k=>{k.target.style.borderColor="#bca88d",k.target.style.color="#7d8d86",Fe(!1)},children:[s.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(G||C?.image_url)&&s.jsxs("div",{style:{position:"relative"},children:[s.jsx("img",{src:G||C?.image_url,alt:"Preview",onClick:()=>{const k=G||C?.image_url;k&&tt(k)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:k=>{const ce=k.target;ce.style.transform="scale(1.05)",ce.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:k=>{const ce=k.target;ce.style.transform="scale(1)",ce.style.boxShadow="none"}}),s.jsx("button",{type:"button",onClick:()=>{Ce(null),Ge(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),s.jsx("textarea",{value:E.description,onChange:k=>z({...E,description:k.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),s.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[s.jsx("button",{type:"button",onClick:Ue,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#e5e7eb",Re("This will close the form and clear all the information you've entered. Don't worry, you can always start over!"),Fe(!0)},onMouseLeave:k=>{k.target.style.background="#f3f4f6",Fe(!1)},children:"Cancel"}),s.jsx("button",{type:"submit",disabled:H,style:{background:H?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:H?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:k=>{H||(Re("This will save your new product to the inventory! Make sure all required fields are filled out before clicking."),Fe(!0))},onMouseLeave:k=>{H||Fe(!1)},children:H?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Adding..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-plus"}),"Add Product"]})})]})]})]})}),W&&C&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:s.jsxs("div",{style:{background:"#f8fafc",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[s.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Edit Product"}),s.jsx("button",{onClick:Ue,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#f3f4f6",k.target.style.color="#3e3f29",Re("Click this X button to close the edit form without saving. It's the same as clicking Cancel!"),Fe(!0)},onMouseLeave:k=>{k.target.style.background="none",k.target.style.color="#7d8d86",Fe(!1)},children:s.jsx("i",{className:"fa-solid fa-times"})})]}),s.jsxs("form",{onSubmit:we,onKeyDown:De,children:[h&&s.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:h}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),s.jsx("input",{type:"text",required:!0,value:E.product_name,onChange:k=>z({...E,product_name:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:"text",required:!0,value:E.category,onChange:k=>{z({...E,category:k.target.value}),et(k.target.value.length>=2)},onFocus:()=>{et(E.category.length>=2),Re("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),Fe(!0)},onBlur:()=>setTimeout(()=>et(!1),200),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),Oe&&Wn(E.category).length>0&&s.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#f8fafc",border:"2px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:Wn(E.category).map((k,ce)=>s.jsxs("div",{onClick:()=>{z({...E,category:k}),et(!1),Re(`Great choice! I've selected "${k}" for you. This helps keep your categories organized!`),Fe(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ce<Wn(E.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:Ae=>Ae.target.style.background="#f8f9fa",onMouseLeave:Ae=>Ae.target.style.background="transparent",children:[s.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),k]},ce))})]})]})]}),s.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[s.jsx("input",{type:"checkbox",id:"is_weighted_edit",checked:E.is_weighted,onChange:k=>z({...E,is_weighted:k.target.checked}),style:{width:"16px",height:"16px"}}),s.jsx("label",{htmlFor:"is_weighted_edit",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),E.is_weighted&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),s.jsxs("select",{value:E.weight_unit,onChange:k=>z({...E,weight_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},children:[s.jsx("option",{value:"",children:"Select unit"}),s.jsx("option",{value:"kg",children:"Kilogram (kg)"}),s.jsx("option",{value:"g",children:"Gram (g)"}),s.jsx("option",{value:"lb",children:"Pound (lb)"}),s.jsx("option",{value:"oz",children:"Ounce (oz)"}),s.jsx("option",{value:"l",children:"Liter (l)"}),s.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",E.weight_unit||"unit"," *"]}),s.jsx("input",{type:"number",step:"0.01",required:E.is_weighted,value:E.price_per_unit,onChange:k=>z({...E,price_per_unit:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",E.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),s.jsx("input",{type:"number",step:"0.01",required:!E.is_weighted,value:E.is_weighted?"0":E.price,onChange:k=>{E.is_weighted||z({...E,price:k.target.value})},style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:E.is_weighted?"#f9fafb":"white",color:E.is_weighted?"#6b7280":"#3e3f29",cursor:E.is_weighted?"not-allowed":"text"},placeholder:E.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:E.is_weighted})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),s.jsx("input",{type:"number",required:!0,value:E.stock_quantity,onChange:k=>z({...E,stock_quantity:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),s.jsx("input",{type:"number",required:!0,value:E.reorder_level,onChange:k=>z({...E,reorder_level:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"10"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),s.jsx("input",{type:"number",step:"0.01",value:E.tax_rate,onChange:k=>z({...E,tax_rate:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"0.00"})]})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),s.jsx("input",{type:"text",value:E.supplier_info,onChange:k=>z({...E,supplier_info:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU"}),s.jsx("input",{type:"text",value:E.sku,onChange:k=>z({...E,sku:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Update SKU"})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Barcode"}),s.jsx("input",{type:"text",value:E.barcode,onChange:k=>z({...E,barcode:k.target.value}),style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29"},placeholder:"Scan or enter barcode"})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),s.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[s.jsx("input",{type:"file",accept:"image/*",onChange:it,style:{display:"none"},id:"image-upload"}),s.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:k=>{k.target.style.borderColor="#7d8d86",k.target.style.color="#3e3f29",Re("Click here to upload a product image! This helps customers see what they're buying."),Fe(!0)},onMouseLeave:k=>{k.target.style.borderColor="#bca88d",k.target.style.color="#7d8d86",Fe(!1)},children:[s.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(G||C?.image_url)&&s.jsxs("div",{style:{position:"relative"},children:[s.jsx("img",{src:G||C?.image_url,alt:"Preview",onClick:()=>{const k=G||C?.image_url;k&&tt(k)},style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",background:"#f3f4f6",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:k=>{const ce=k.target;ce.style.transform="scale(1.05)",ce.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:k=>{const ce=k.target;ce.style.transform="scale(1)",ce.style.boxShadow="none"}}),s.jsx("button",{type:"button",onClick:()=>{Ce(null),Ge(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),s.jsx("textarea",{value:E.description,onChange:k=>z({...E,description:k.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),s.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[s.jsx("button",{type:"button",onClick:Ue,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:k=>{k.target.style.background="#e5e7eb",Re("This will close the edit form and discard any changes you've made. Don't worry, you can always edit again!"),Fe(!0)},onMouseLeave:k=>{k.target.style.background="#f3f4f6",Fe(!1)},children:"Cancel"}),s.jsx("button",{type:"submit",disabled:H,style:{background:H?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:H?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:k=>{H||(Re("This will save your changes to the product! Make sure all required fields are filled out before clicking."),Fe(!0))},onMouseLeave:k=>{H||Fe(!1)},children:H?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-save"}),"Update Product"]})})]})]})]})}),rt&&gt&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:St,children:s.jsx("div",{style:{position:"relative",width:"400px",height:"400px",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:`url(${gt})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:"8px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",backgroundColor:"#ffffff"},onClick:k=>k.stopPropagation(),children:s.jsx("button",{onClick:St,style:{position:"absolute",top:"-40px",right:"-40px",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.9)",border:"none",color:"#3e3f29",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s ease"},onMouseEnter:k=>k.target.style.background="rgba(255, 255, 255, 1)",onMouseLeave:k=>k.target.style.background="rgba(255, 255, 255, 0.9)",children:s.jsx("i",{className:"fa-solid fa-times"})})})}),vt&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[s.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1a1a1a",marginBottom:"16px",textAlign:"center"},children:"Delete Product"}),s.jsxs("p",{style:{fontSize:"16px",color:"#1a1a1a",marginBottom:"8px",textAlign:"center"},children:["Are you sure you want to delete ",s.jsx("strong",{children:vt.name}),"?"]}),s.jsx("p",{style:{fontSize:"14px",color:"#ef4444",marginBottom:"24px",textAlign:"center"},children:"This action cannot be undone."}),s.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[s.jsx("button",{onClick:()=>bt(null),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:k=>k.target.style.background="#4b5563",onMouseLeave:k=>k.target.style.background="#6b7280",children:"Cancel"}),s.jsx("button",{onClick:()=>Te(vt.product_id),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:k=>k.target.style.background="#dc2626",onMouseLeave:k=>k.target.style.background="#ef4444",children:"Delete Product"})]})]})}),w&&S&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:()=>_(!1),children:s.jsxs("div",{style:{background:"#f8fafc",borderRadius:"16px",padding:"32px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px",paddingBottom:"20px",borderBottom:"2px solid #f1f5f9"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[S.image_url&&s.jsxs("div",{style:{position:"relative"},children:[s.jsx("img",{src:S.image_url,alt:S.name,style:{width:"80px",height:"80px",borderRadius:"16px",objectFit:"cover",border:"3px solid #e5e7eb",background:"#f3f4f6",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}),s.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#10b981",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:s.jsx("i",{className:"fas fa-chart-line"})})]}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[s.jsx("i",{className:"fas fa-analytics",style:{color:"#7d8d86",fontSize:"20px"}}),s.jsx("h2",{style:{margin:0,fontSize:"28px",fontWeight:"700",color:"#1e293b",letterSpacing:"-0.025em"},children:"Product Insights"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"4px"},children:[s.jsx("i",{className:"fas fa-box",style:{color:"#7d8d86",fontSize:"16px"}}),s.jsx("p",{style:{margin:0,fontSize:"18px",color:"#374151",fontWeight:"600"},children:S.name})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("i",{className:"fas fa-tags",style:{color:"#9ca3af",fontSize:"14px"}}),s.jsx("p",{style:{margin:0,fontSize:"14px",color:"#6b7280"},children:S.category}),S.sku&&s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-barcode",style:{color:"#9ca3af",fontSize:"14px",marginLeft:"16px"}}),s.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:["SKU: ",S.sku]})]})]})]})]}),s.jsx("button",{onClick:()=>_(!1),style:{width:"40px",height:"40px",borderRadius:"50%",background:"#f8fafc",border:"2px solid #e2e8f0",color:"#6b7280",cursor:"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:k=>{k.currentTarget.style.background="#ef4444",k.currentTarget.style.color="white",k.currentTarget.style.borderColor="#ef4444"},onMouseLeave:k=>{k.currentTarget.style.background="#f8fafc",k.currentTarget.style.color="#6b7280",k.currentTarget.style.borderColor="#e2e8f0"},children:s.jsx("i",{className:"fas fa-times"})})]}),P?s.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[s.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",fontSize:"18px",color:"#7d8d86",background:"#f8fafc",padding:"20px 32px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[s.jsx("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"20px",color:"#3b82f6"}}),"Loading insights..."]}),s.jsx("div",{style:{fontSize:"14px",color:"#9ca3af",marginTop:"12px"},children:"Analyzing sales data and trends"})]}):R?s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:"40px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[s.jsx("i",{className:"fas fa-chart-bar",style:{color:"#7d8d86",fontSize:"20px"}}),s.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1e293b"},children:"Performance Overview"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px"},children:[s.jsxs("div",{style:{background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #93c5fd",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[s.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#3b82f6",fontSize:"16px"},children:s.jsx("i",{className:"fas fa-shopping-cart"})}),s.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e40af",marginBottom:"8px"},children:R.totalSales}),s.jsx("div",{style:{fontSize:"14px",color:"#1e40af",fontWeight:"500"},children:"Total Sales"})]}),s.jsxs("div",{style:{background:"linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #86efac",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[s.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#10b981",fontSize:"16px"},children:s.jsx("i",{className:"fas fa-euro-sign"})}),s.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#166534",marginBottom:"8px"},children:["?",R.totalRevenue.toFixed(2)]}),s.jsx("div",{style:{fontSize:"14px",color:"#166534",fontWeight:"500"},children:"Total Revenue"})]}),s.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #fbbf24",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[s.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#f59e0b",fontSize:"16px"},children:s.jsx("i",{className:"fas fa-weight"})}),s.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#92400e",marginBottom:"8px"},children:R.totalQuantitySold.toFixed(1)}),s.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:"500"},children:[S.is_weighted?S.weight_unit||"kg":"Units"," Sold"]})]}),s.jsxs("div",{style:{background:"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)",padding:"24px",borderRadius:"16px",textAlign:"center",border:"1px solid #f9a8d4",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},children:[s.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",color:"#ec4899",fontSize:"16px"},children:s.jsx("i",{className:"fas fa-percentage"})}),s.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#be185d",marginBottom:"8px"},children:[R.profitMargin.toFixed(1),"%"]}),s.jsx("div",{style:{fontSize:"14px",color:"#be185d",fontWeight:"500"},children:"Est. Profit Margin"})]})]})]}),R.chartData&&s.jsxs("div",{style:{marginBottom:"40px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[s.jsx("i",{className:"fas fa-chart-line",style:{color:"#7d8d86",fontSize:"20px"}}),s.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1e293b"},children:"Sales Trends & Analytics"})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[s.jsxs("button",{onClick:()=>Y("daily"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:ae==="daily"?"#3b82f6":"#f8fafc",color:ae==="daily"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:ae==="daily"?"0 4px 6px rgba(59, 130, 246, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[s.jsx("i",{className:"fas fa-calendar-day"}),"Daily (30 days)"]}),s.jsxs("button",{onClick:()=>Y("weekly"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:ae==="weekly"?"#10b981":"#f8fafc",color:ae==="weekly"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:ae==="weekly"?"0 4px 6px rgba(16, 185, 129, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[s.jsx("i",{className:"fas fa-calendar-week"}),"Weekly (4 weeks)"]}),s.jsxs("button",{onClick:()=>Y("monthly"),style:{padding:"12px 20px",borderRadius:"12px",border:"none",background:ae==="monthly"?"#f59e0b":"#f8fafc",color:ae==="monthly"?"white":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:ae==="monthly"?"0 4px 6px rgba(245, 158, 11, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[s.jsx("i",{className:"fas fa-calendar-alt"}),"Monthly (6 months)"]})]}),s.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",minHeight:"220px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[ae==="daily"&&s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[s.jsx("i",{className:"fas fa-chart-bar",style:{color:"#3b82f6",fontSize:"16px"}}),s.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Daily Sales (Last 30 Days)"})]}),s.jsx("div",{style:{display:"flex",alignItems:"end",gap:"4px",height:"150px"},children:R.chartData.daily.map((k,ce)=>{const Ae=Math.max(...R.chartData.daily.map(_t=>_t.sales)),ct=Ae>0?k.sales/Ae*120:0;return s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[s.jsx("div",{style:{width:"100%",height:`${ct}px`,background:k.sales>0?"#7d8d86":"#e5e7eb",borderRadius:"2px 2px 0 0",minHeight:"2px"},title:`${k.date}: ${k.sales} sales, ?${k.revenue.toFixed(2)}`}),s.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:k.day})]},ce)})})]}),ae==="weekly"&&s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[s.jsx("i",{className:"fas fa-chart-area",style:{color:"#10b981",fontSize:"16px"}}),s.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Weekly Sales (Last 4 Weeks)"})]}),s.jsx("div",{style:{display:"flex",alignItems:"end",gap:"8px",height:"150px"},children:R.chartData.weekly.map((k,ce)=>{const Ae=Math.max(...R.chartData.weekly.map(_t=>_t.sales)),ct=Ae>0?k.sales/Ae*120:0;return s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[s.jsx("div",{style:{width:"100%",height:`${ct}px`,background:k.sales>0?"#10b981":"#e5e7eb",borderRadius:"4px 4px 0 0",minHeight:"2px"},title:`${k.week}: ${k.sales} sales, ?${k.revenue.toFixed(2)}`}),s.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:k.week})]},ce)})})]}),ae==="monthly"&&s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[s.jsx("i",{className:"fas fa-chart-pie",style:{color:"#f59e0b",fontSize:"16px"}}),s.jsx("h4",{style:{margin:0,fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:"Monthly Sales (Last 6 Months)"})]}),s.jsx("div",{style:{display:"flex",alignItems:"end",gap:"8px",height:"150px"},children:R.chartData.monthly.map((k,ce)=>{const Ae=Math.max(...R.chartData.monthly.map(_t=>_t.sales)),ct=Ae>0?k.sales/Ae*120:0;return s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[s.jsx("div",{style:{width:"100%",height:`${ct}px`,background:k.sales>0?"#f59e0b":"#e5e7eb",borderRadius:"4px 4px 0 0",minHeight:"2px"},title:`${k.month}: ${k.sales} sales, ?${k.revenue.toFixed(2)}`}),s.jsx("div",{style:{fontSize:"10px",color:"#6b7280",marginTop:"4px",textAlign:"center"},children:k.month.split(" ")[0]})]},ce)})})]})]})]}),s.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",marginBottom:"32px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[s.jsx("i",{className:"fas fa-info-circle",style:{color:"#7d8d86",fontSize:"20px"}}),s.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Product Information"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[s.jsx("i",{className:"fas fa-barcode",style:{color:"#6b7280",fontSize:"16px"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Product ID"}),s.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.product_id})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[s.jsx("i",{className:"fas fa-tags",style:{color:"#6b7280",fontSize:"16px"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Category"}),s.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.category})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[s.jsx("i",{className:"fas fa-boxes",style:{color:"#6b7280",fontSize:"16px"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Current Stock"}),s.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.stock_quantity})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[s.jsx("i",{className:"fas fa-exclamation-triangle",style:{color:"#6b7280",fontSize:"16px"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Reorder Level"}),s.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.reorder_level})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[s.jsx("i",{className:"fas fa-euro-sign",style:{color:"#6b7280",fontSize:"16px"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Price"}),s.jsxs("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:["?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[s.jsx("i",{className:"fas fa-weight",style:{color:"#6b7280",fontSize:"16px"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:"Type"}),s.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"600"},children:S.is_weighted?"Weighted Product":"Regular Product"})]})]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px",marginBottom:"32px"},children:[s.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[s.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Sales Performance"}),s.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",lineHeight:"1.6"},children:[s.jsxs("div",{style:{marginBottom:"8px"},children:[s.jsx("strong",{children:"Average sales per day:"})," ",R.averageSalesPerDay.toFixed(1)]}),s.jsxs("div",{style:{marginBottom:"8px"},children:[s.jsx("strong",{children:"Estimated profit:"})," ?",R.estimatedProfit.toFixed(2)]}),s.jsxs("div",{style:{marginBottom:"8px"},children:[s.jsx("strong",{children:"Last sold:"})," ",R.lastSoldDate?new Date(R.lastSoldDate).toLocaleDateString():"Never"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Price per unit:"})," ?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]})]})]}),s.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[s.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Top Selling Days (Last 30 Days)"}),R.topSellingDays.length>0?s.jsx("div",{style:{fontSize:"14px",color:"#7d8d86"},children:R.topSellingDays.map((k,ce)=>s.jsxs("div",{style:{marginBottom:"4px"},children:[new Date(k.date).toLocaleDateString(),": ",k.count," sales"]},ce))}):s.jsx("div",{style:{fontSize:"14px",color:"#7d8d86"},children:"No sales in the last 30 days"})]})]}),s.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"24px",borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[s.jsx("i",{className:"fas fa-receipt",style:{color:"#7d8d86",fontSize:"20px"}}),s.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Recent Sales"})]}),R.recentSalesList.length>0?s.jsx("div",{style:{maxHeight:"300px",overflow:"auto"},children:s.jsxs("table",{style:{width:"100%",fontSize:"14px"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"2px solid #e5e7eb",background:"#f9fafb"},children:[s.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("i",{className:"fas fa-calendar",style:{fontSize:"12px",color:"#6b7280"}}),"Date"]}),s.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("i",{className:"fas fa-hashtag",style:{fontSize:"12px",color:"#6b7280"}}),"Quantity"]}),s.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("i",{className:"fas fa-euro-sign",style:{fontSize:"12px",color:"#6b7280"}}),"Price"]}),s.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("i",{className:"fas fa-user",style:{fontSize:"12px",color:"#6b7280"}}),"Customer"]}),s.jsxs("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("i",{className:"fas fa-user-tie",style:{fontSize:"12px",color:"#6b7280"}}),"Cashier"]})]})}),s.jsx("tbody",{children:R.recentSalesList.map((k,ce)=>s.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[s.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:[k.date," ",k.time]}),s.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:[k.quantity," ",k.unit]}),s.jsxs("td",{style:{padding:"8px 0",color:"#3e3f29"},children:["?",k.price.toFixed(2)]}),s.jsx("td",{style:{padding:"8px 0",color:"#3e3f29"},children:k.customer}),s.jsx("td",{style:{padding:"8px 0",color:"#3e3f29"},children:k.cashier})]},ce))})]})}):s.jsx("div",{style:{fontSize:"14px",color:"#7d8d86",textAlign:"center",padding:"20px"},children:"No sales recorded for this product"})]})]}):s.jsxs("div",{children:[s.jsxs("div",{style:{textAlign:"center",padding:"40px",marginBottom:"32px",background:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)",borderRadius:"16px",border:"1px solid #fecaca"},children:[s.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"12px",fontSize:"20px",color:"#dc2626",marginBottom:"12px",fontWeight:"600"},children:[s.jsx("i",{className:"fas fa-chart-line",style:{fontSize:"24px"}}),"No Sales Data Available"]}),s.jsx("div",{style:{fontSize:"14px",color:"#991b1b"},children:"This product hasn't been sold yet"})]}),s.jsxs("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px"},children:[s.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:"Product Information"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",fontSize:"14px",color:"#7d8d86"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Product ID:"})," ",S.product_id]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Category:"})," ",S.category]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Current Stock:"})," ",S.stock_quantity]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Reorder Level:"})," ",S.reorder_level]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Price:"})," ?",S.is_weighted?`${S.price_per_unit}/${S.weight_unit}`:S.price.toFixed(2)]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Type:"})," ",S.is_weighted?"Weighted Product":"Regular Product"]})]})]})]})]})}),s.jsx(wn,{})]})};let fo=null,fv=!1;const zE=e=>{fv=e},UE=({onBarcodeScanned:e,debounceMs:t=100,minLength:r=8,maxLength:a=20,isActive:o=!0,context:c="default"})=>{const[d,f]=T.useState(!1),[h,p]=T.useState(""),[x,y]=T.useState(0),v=T.useCallback(_=>{if(!fo||fo.context!==c||fv&&c!=="product-modal")return;const S=Date.now();if(S-x>t*3&&p(""),y(S),_.key==="Enter"){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation();const N=h.trim();if(console.log(" Barcode scanner detected Enter, input:",N,"length:",N.length,"min:",r,"max:",a),N.length>=r&&N.length<=a){console.log(" Barcode valid, calling onBarcodeScanned"),e(N),p("");return}p("");return}_.key.length===1&&p(N=>{const R=N+_.key;return console.log(" Barcode scanner input:",R),R}),_.key==="Tab"||_.key==="Shift"||_.key==="Control"||_.key},[h,x,t,r,a,e,c]),b=T.useCallback(()=>{f(!0),p(""),y(Date.now()),fo={context:c,onBarcodeScanned:e}},[c,e]),w=T.useCallback(()=>{f(!1),p(""),fo&&fo.context===c&&(fo=null)},[c]);return T.useEffect(()=>{if(d&&o){document.addEventListener("keydown",v,!0);const _=S=>{if(S.target&&S.target.tagName==="INPUT"){const N=S.target;N.value&&N.value.length>=r&&N.value.length<=a&&(console.log(" Fallback barcode detected:",N.value),e(N.value),N.value="")}};return document.addEventListener("input",_,!0),()=>{document.removeEventListener("keydown",v,!0),document.removeEventListener("input",_,!0)}}},[d,o,v,r,a,e]),{isListening:d,startListening:b,stopListening:w,currentInput:h}},T1=[{id:"pNInz6obpgDQGcFmaJgB",name:"Adam (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"EXAVITQu4vr4xnSDxMaL",name:"Bella (Warm, Friendly)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Josh (Professional, Clear)",type:"standard",costPer1K:.18},{id:"AZnzlk1XvdvUeBnXmlld",name:"Domi (Confident, Energetic)",type:"standard",costPer1K:.18},{id:"ErXwobaYiN019PkySvjV",name:"Elli (Natural, Conversational)",type:"standard",costPer1K:.18},{id:"MF3mGyEYCl7XYWbV9V6O",name:"Rachel (Professional, Warm)",type:"standard",costPer1K:.18},{id:"TxGEqnHWrfWFTfGW9XjX",name:"Drew (Deep, Authoritative)",type:"standard",costPer1K:.18},{id:"VR6AewLTigWG4xSOukaG",name:"Clyde (Friendly, Approachable)",type:"standard",costPer1K:.18}],j1=[{id:"alloy",name:"Alloy (Neutral, Balanced)",type:"standard",costPer1K:.015},{id:"echo",name:"Echo (Clear, Professional)",type:"standard",costPer1K:.015},{id:"fable",name:"Fable (Warm, Storytelling)",type:"standard",costPer1K:.015},{id:"onyx",name:"Onyx (Deep, Authoritative)",type:"standard",costPer1K:.015},{id:"nova",name:"Nova (Friendly, Energetic)",type:"standard",costPer1K:.015},{id:"shimmer",name:"Shimmer (Soft, Gentle)",type:"standard",costPer1K:.015}];class WE{settings;usage;isInitialized=!1;constructor(){this.settings=this.loadSettings(),this.usage=this.loadUsage(),this.initializeUsage()}loadSettings(){const t="sk_337a097ef281682961b7c3db26217470f085fd565c3d711d",r="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";console.log("Environment variables loaded:"),console.log("VITE_ELEVENLABS_KEY:","Present"),console.log("VITE_OPENAI_API_KEY:","Present");const a={enabled:!0,useElevenLabs:!0,selectedVoice:"HobRzuqtLputbKAXOdTj",apiKey:t,dailyLimit:5e3,useOpenAI:!0,openaiApiKey:r,openaiVoice:"alloy"};try{const o=localStorage.getItem("tts-settings");if(o){const c=JSON.parse(o),d={...a,...c};return console.log("Loaded TTS settings from localStorage:",d),d}return console.log("No saved TTS settings, using defaults:",a),a}catch(o){return console.error("Error loading TTS settings:",o),a}}loadUsage(){const t={totalCharacters:0,totalCost:0,dailyUsage:0,dailyCost:0,lastResetDate:new Date().toISOString().split("T")[0]};try{const r=localStorage.getItem("tts-usage");return r?{...t,...JSON.parse(r)}:t}catch{return t}}saveSettings(){try{localStorage.setItem("tts-settings",JSON.stringify(this.settings))}catch(t){console.error("Failed to save TTS settings:",t)}}saveUsage(){try{localStorage.setItem("tts-usage",JSON.stringify(this.usage))}catch(t){console.error("Failed to save TTS usage:",t)}}initializeUsage(){const t=new Date().toISOString().split("T")[0];this.usage.lastResetDate!==t&&(this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=t,this.saveUsage())}getSettings(){return{...this.settings}}getUsage(){return this.initializeUsage(),{...this.usage}}updateSettings(t){this.settings={...this.settings,...t},this.saveSettings()}async speak(t){if(console.log("TTS Service speak called with:",t),console.log("TTS Settings:",this.settings),console.log("useElevenLabs:",this.settings.useElevenLabs),console.log("useOpenAI:",this.settings.useOpenAI),console.log("openaiApiKey present:",!!this.settings.openaiApiKey),console.log("openaiApiKey length:",this.settings.openaiApiKey?.length||0),!this.settings.enabled)return console.log("TTS not enabled"),!1;const r=t.length,a=this.calculateCost(r);if(this.usage.dailyUsage+r>this.settings.dailyLimit&&console.log("Daily limit exceeded, trying OpenAI fallback"),this.settings.useElevenLabs&&this.settings.apiKey&&this.usage.dailyUsage+r<=this.settings.dailyLimit){if(console.log("Trying ElevenLabs TTS with voice:",this.settings.selectedVoice),await this.speakWithElevenLabs(t))return this.updateUsage(r,a),!0;console.log("ElevenLabs failed, trying OpenAI fallback...")}if(this.settings.useOpenAI&&this.settings.openaiApiKey){console.log("Trying OpenAI TTS with voice:",this.settings.openaiVoice);const o=this.calculateOpenAICost(r);if(await this.speakWithOpenAI(t))return this.updateUsage(r,o),!0;console.log("OpenAI TTS failed")}return console.log("No TTS method available"),!1}async speakWithDelay(t,r=2e3){return new Promise(a=>{setTimeout(async()=>{const o=await this.speak(t);a(o)},r)})}async speakWithElevenLabs(t){try{console.log("Making ElevenLabs API call..."),console.log("Voice ID:",this.settings.selectedVoice),console.log("API Key:",this.settings.apiKey.substring(0,10)+"...");const r=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${this.settings.selectedVoice}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":this.settings.apiKey},body:JSON.stringify({text:t,model_id:"eleven_monolingual_v1",voice_settings:{stability:.5,similarity_boost:.5}})});if(console.log("ElevenLabs response status:",r.status),!r.ok){const d=await r.text();throw console.error("ElevenLabs API error response:",d),new Error(`ElevenLabs API error: ${r.status} - ${d}`)}const a=await r.blob();console.log("Audio blob received, size:",a.size);const o=URL.createObjectURL(a),c=new Audio(o);return new Promise(d=>{c.onended=()=>{console.log("ElevenLabs audio playback ended"),URL.revokeObjectURL(o),d(!0)},c.onerror=f=>{console.error("ElevenLabs audio playback error:",f),URL.revokeObjectURL(o),d(!1)},c.onloadstart=()=>console.log("ElevenLabs audio started loading"),c.oncanplay=()=>console.log("ElevenLabs audio can play"),console.log("Starting ElevenLabs audio playback..."),c.play()})}catch(r){return console.error("ElevenLabs TTS error:",r),!1}}async speakWithOpenAI(t){try{console.log("Making OpenAI TTS API call..."),console.log("Voice:",this.settings.openaiVoice),console.log("API Key:",this.settings.openaiApiKey.substring(0,10)+"...");const r=await fetch("https://api.openai.com/v1/audio/speech",{method:"POST",headers:{Authorization:`Bearer ${this.settings.openaiApiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"tts-1",input:t,voice:this.settings.openaiVoice,response_format:"mp3"})});if(console.log("OpenAI response status:",r.status),!r.ok){const d=await r.text();throw console.error("OpenAI API error response:",d),new Error(`OpenAI API error: ${r.status} - ${d}`)}const a=await r.blob();console.log("OpenAI audio blob received, size:",a.size);const o=URL.createObjectURL(a),c=new Audio(o);return new Promise(d=>{c.onended=()=>{console.log("OpenAI audio playback ended"),URL.revokeObjectURL(o),d(!0)},c.onerror=f=>{console.error("OpenAI audio playback error:",f),URL.revokeObjectURL(o),d(!1)},c.onloadstart=()=>console.log("OpenAI audio started loading"),c.oncanplay=()=>console.log("OpenAI audio can play"),console.log("Starting OpenAI audio playback..."),c.play()})}catch(r){return console.error("OpenAI TTS error:",r),!1}}calculateCost(t){const r=T1.find(a=>a.id===this.settings.selectedVoice);return r?t/1e3*r.costPer1K:0}calculateOpenAICost(t){const r=j1.find(a=>a.id===this.settings.openaiVoice);return r?t/1e3*r.costPer1K:0}updateUsage(t,r){this.usage.totalCharacters+=t,this.usage.totalCost+=r,this.usage.dailyUsage+=t,this.usage.dailyCost+=r,this.saveUsage()}stop(){console.log("TTS service stop called")}getAvailableVoices(){return T1}getAvailableOpenAIVoices(){return j1}resetDailyUsage(){this.usage.dailyUsage=0,this.usage.dailyCost=0,this.usage.lastResetDate=new Date().toISOString().split("T")[0],this.saveUsage()}refreshSettings(){console.log("Refreshing TTS settings from environment..."),this.settings=this.loadSettings(),console.log("New settings loaded:",this.settings)}resetToDefaults(){console.log("Clearing all TTS settings and reloading from environment...");try{localStorage.removeItem("tts-settings"),console.log("Cleared localStorage settings")}catch(t){console.error("Error clearing settings:",t)}this.settings=this.loadSettings(),console.log("Reset to defaults:",this.settings)}async testOpenAI(){if(console.log("Testing OpenAI TTS connection..."),console.log("OpenAI API Key present:",!!this.settings.openaiApiKey),console.log("OpenAI Voice:",this.settings.openaiVoice),!this.settings.openaiApiKey)return console.error("No OpenAI API key found"),!1;try{const t=await this.speakWithOpenAI("Test message");return console.log("OpenAI test result:",t),t}catch(t){return console.error("OpenAI test failed:",t),!1}}}const Ir=new WE,Td=({children:e,onClick:t,type:r="button",disabled:a=!1,className:o="",style:c={}})=>s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @property --rotation {
          syntax: "<angle>";
          inherits: false;
          initial-value: 0deg;
        }

        .retro-button {
          --inset: 15px;
          --rad: 18px;
          /* background: rgb(255 255 255 / 0.3); */
          /* padding: var(--inset); */
          /* border-radius: calc(var(--rad) + var(--inset)); */
          border: none;
          position: relative;
          /* box-shadow: 0 4px 10px rgb(0 0 0 / 0.1); */
          cursor: pointer;
          font-family: "Poppins", sans-serif;
          font-optical-sizing: auto;
          font-weight: 600;
          font-style: normal;
        }

        /* .retro-button:before {
          --inset: -15px;
          content: "";
          display: block;
          background: conic-gradient(from var(--rotation), purple, blue, green, yellow, orange, red);
          filter: blur(20px);
          opacity: 1;
          position: absolute;
          inset: 10px;
          border-radius: calc(var(--rad) + calc(var(--inset) * -1));
          z-index: -2;
          animation: rotate 5s linear infinite;
        } */

        /* .retro-button:after {
          --inset: -15px;
          content: "";
          display: block;
          background: linear-gradient(
            to bottom,
            rgb(255 255 255 / 0.5) 0%,
            rgb(255 255 255 / 0.5) 2px,
            rgb(100 100 100 / 0.1) 30%,
            rgb(100 100 100 / 0.1) 70%,
            rgb(255 255 255 / 0.5) 99%,
            rgb(255 255 255 / 0.5) 100%
          );
          position: absolute;
          inset: -1.5px;
          border-radius: calc(var(--rad) + calc(var(--inset) * -1));
          z-index: -1;
        } */

        /* .retro-button:active:before {
          animation-play-state: paused;
          opacity: 1;
          scale: 0.9;
          filter: blur(10px);
        } */

        .retro-button:active .retro-cap {
          scale: 0.93;
        }

        .retro-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .retro-button:disabled:before {
          animation-play-state: paused;
        }

        .retro-cap {
          display: inline-block;
          background: linear-gradient(to bottom, #6b7280, #4b5563);
          border-radius: var(--rad);
          font-size: 16px;
          color: #fff;
          padding: 12px 20px;
          border: none;
          border-top: #9ca3af solid 1px;
          border-bottom: #374151 solid 1px;
          box-shadow: 0 8px 10px rgb(0 0 0 / 0.3);
          position: relative;
          transition: scale 0.1s ease-in-out;
        }

        .retro-text {
          border-radius: 50px;
          background: linear-gradient(to bottom, #4b5563, #6b7280);
          padding: 8px 20px;
          display: block;
        }

        @keyframes rotate {
          to {
            --rotation: 360deg;
          }
        }
      `}),s.jsx("button",{className:`retro-button ${o}`,onClick:t,type:r,disabled:a,style:c,children:s.jsx("span",{className:"retro-cap",children:s.jsx("span",{className:"retro-text",children:e})})})]}),Nl=()=>{const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0"),d=String(e.getSeconds()).padStart(2,"0");return`${t}-${r}-${a} ${o}:${c}:${d}`},E1=["Order confirmed! Your jollof rice dreams are one step closer.","Thanks for shopping! Even suya is jealous of your taste.","Your order is secured tighter than plantain at a party.","Order complete! Somewhere, egusi soup just smiled at you.","Confirmed! Your basket was blessed by the spirit of fufu.","You did it! May your order arrive faster than puff-puff disappears.","Order locked! Your kitchen is about to smell like victory.","Thanks for shopping! Even aunties will approve of this order.","Your order is in! We'll protect it like Nigerians protect their jollof recipe.","Success! Your food is coming with more flavor than a pepper soup challenge.","Confirmed  your taste is hotter than shito pepper.","Order complete! Don't worry, we didn't forget the Maggi cubes.","Transaction approved! Time to prepare for a feast fit for ancestors.","Done! May your meals be as sweet as ripe plantain.","Your order is confirmed  better hide it before the neighbors smell it!"],k1=async e=>{if(e.length===0){await Ir.speak("No items in order yet.");return}let t=`Order contains ${e.length} item${e.length===1?"":"s"}. `,r=0;e.forEach((a,o)=>{const c=a.product?.name||a.sideBusinessItem?.name||"Unknown Item",d=a.quantity;let f=0;a.customPrice?f=a.customPrice:a.calculatedPrice?f=a.calculatedPrice/d:a.product?.price?f=a.product.price:a.sideBusinessItem?.price&&(f=a.sideBusinessItem.price);let h=0;a.weight&&a.calculatedPrice?(h=a.calculatedPrice,t+=`Item ${o+1}: ${c}, ${a.weight} units at ${a.product?.price_per_unit?.toFixed(2)||"0.00"} per unit, `):(h=f*d,t+=`Item ${o+1}: ${c}, quantity ${d}, ${f.toFixed(2)} each, `),r+=h;const p=[`making this ${r.toFixed(2)}. `,`total so far ${r.toFixed(2)}. `,`${r.toFixed(2)} total. `,`running total ${r.toFixed(2)}. `,`${r.toFixed(2)}. `,`now at ${r.toFixed(2)}. `],x=p[Math.floor(Math.random()*p.length)];t+=x}),await Ir.speak(t),setTimeout(async()=>{const a=E1[Math.floor(Math.random()*E1.length)];await Ir.speak(a)},500)},qE=async e=>{const t=[`Your total is ${e.toFixed(2)}. Time to feast!`,`Total: ${e.toFixed(2)}. Your taste buds are about to dance!`,`${e.toFixed(2)} total. May your meals be blessed!`,`Order total: ${e.toFixed(2)}. Even jollof rice approves!`],r=t[Math.floor(Math.random()*t.length)];await Ir.speak(r)},Oh=async(e,t)=>{await Ir.speak(`${e} added to order for ${t.toFixed(2)}.`)},HE=()=>{const{user:e}=on(),{businessId:t,businessLoading:r}=su(),[a]=Ry(),o=Ba(),[c,d]=T.useState([]),[f,h]=T.useState([]),[p,x]=T.useState([]),[y,v]=T.useState([]),[b,w]=T.useState([]),[_,S]=T.useState("All"),[N,R]=T.useState(""),[O,P]=T.useState([]),[J,ae]=T.useState([]),[Y,F]=T.useState(!1),[Q,oe]=T.useState(!1),[q,de]=T.useState({items:[],subtotal:0,tax:0,discount:0,total:0}),[te,ne]=T.useState(""),[me,re]=T.useState(""),[be,W]=T.useState(!0),[xe,C]=T.useState(!1),[X,E]=T.useState("cash"),[z,H]=T.useState(""),[Z,ge]=T.useState(0),[Fe,qe]=T.useState(""),[Re,Oe]=T.useState(!1),[et,ve]=T.useState(!1),[Ge,G]=T.useState(null),[Ce,rt]=T.useState(""),[Be,gt]=T.useState(!1),[at,vt]=T.useState(null),[bt,Ie]=T.useState(""),[nt,mt]=T.useState(null),[Ut,or]=T.useState(!1),[Lt,le]=T.useState(""),[He,ht]=T.useState(""),[Ot,lr]=T.useState(""),[kr,Sr]=T.useState([]),[,rr]=T.useState(Ir.getSettings()),[Rr,Ht]=T.useState(!1),[ir,se]=T.useState(!1),[ke,xt]=T.useState("idle"),[Nt,nr]=T.useState(""),[st,At]=T.useState(!1),[Dt,_n]=T.useState(""),[jr,Sn]=T.useState(0),[Yt,Rt]=T.useState(""),[gr,Un]=T.useState(null),[ha,Wn]=T.useState(null),[D,U]=T.useState(!1);T.useEffect(()=>{if(t==null){d([]),h([]),ae([]),w(["All"]),Sr([]),Wn(null),Un(null),U(!1);return}B(_,N),L();const A=a.get("transaction");A&&(Un(A),U(!0),V(A))},[a,t,r,_,N]),T.useEffect(()=>{const A=he=>{he.key==="Enter"&&he.ctrlKey&&q.items.length>0&&(he.preventDefault(),C(!0)),he.key==="Escape"&&(R(""),F(!1))};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[q.items]),T.useEffect(()=>{_e()},[c,f,_,N,J]),T.useEffect(()=>{J.length>0&&p.length===0&&x(J)},[J,p.length]),T.useEffect(()=>{we()},[q.items]),T.useEffect(()=>{const A=parseFloat(z)||0,he=st?parseFloat(Dt)||0:q.total,Ke=A-he;ge(Ke>0?Ke:0)},[z,q.total,st,Dt]),T.useEffect(()=>{if(st){const A=parseFloat(Dt)||0,he=Math.max(0,q.total-A);Sn(he)}else Sn(0)},[st,Dt,q.total]),T.useEffect(()=>{H(st&&Dt||q.total.toString())},[q.total,st,Dt]);const B=async(A,he)=>{if(t==null){d([]),h([]),ae([]),w(["All"]),W(!1),oe(!1);return}try{W(!0);let Ke=Ne.from("products").select("*").eq("business_id",t).order("sales_count",{ascending:!1}).limit(50);if(A&&A!=="All"&&(Ke=Ke.eq("category",A)),he&&he.trim()){const On=he.trim();Ke=Ke.or(`name.ilike.%${On}%,category.ilike.%${On}%,description.ilike.%${On}%,sku.ilike.%${On}%`)}const{data:Qe,error:Ve}=await Ke;if(Ve)throw Ve;const{data:Xe,error:lt}=await Ne.from("side_business_items").select(`
          *,
          side_businesses (name, business_type)
        `).eq("parent_shop_id",t).order("name");if(lt)throw lt;const ut=Qe||[],Zt=Xe||[];d(ut),h(Zt),ae(ut);const Mt=ut.map(On=>On.category).filter(Boolean),Wt=Zt.map(On=>On.side_businesses?.name).filter(Boolean),Lr=["All",...new Set([...Mt,...Wt])];w(Lr)}catch{}finally{W(!1),oe(!1)}},L=async()=>{if(t==null){Sr([]);return}try{const{data:A,error:he}=await Ne.from("side_businesses").select("business_id, name").eq("business_type","service").eq("parent_shop_id",t).order("name");if(he)throw he;Sr(A||[])}catch(A){console.error("Error fetching service businesses:",A),Sr([])}},V=async A=>{if(t!=null)try{const he=parseInt(A.replace("TXN-","")),{data:Ke,error:Qe}=await Ne.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",he).eq("business_id",t).single();if(Qe||!Ke)return;Wn(Ke);const{data:Ve,error:Xe}=await Ne.from("sale_items").select(`
          *,
          products (
            name,
            category,
            price,
            stock_quantity,
            image_url,
            is_weighted,
            weight_unit,
            price_per_unit
          )
        `).eq("sale_id",he);if(Xe)return;const lt=(Ve||[]).map(Wt=>{const On={product:{product_id:Wt.product_id.toString(),name:Wt.products?.name||"Unknown Product",price:Wt.price_each,category:Wt.products?.category||"Unknown",stock_quantity:Wt.products?.stock_quantity||0,image_url:Wt.products?.image_url,is_weighted:Wt.products?.is_weighted||!1,weight_unit:Wt.products?.weight_unit,price_per_unit:Wt.products?.price_per_unit},quantity:Wt.quantity};return Wt.products?.is_weighted&&Wt.weight&&Wt.calculated_price&&(On.weight=Wt.weight,On.calculatedPrice=Wt.calculated_price),On}),ut=lt.reduce((Wt,Lr)=>Lr.weight&&Lr.calculatedPrice?Wt+Lr.calculatedPrice:Wt+Lr.product.price*Lr.quantity,0),Zt=ut*.1,Mt=ut+Zt;de({items:lt,subtotal:ut,tax:Zt,discount:0,total:Mt}),Ke.customers?.name&&ne(Ke.customers.name)}catch{}},K=A=>{if(A.length<2){P([]),F(!1);return}const he=A.toLowerCase().trim(),Ke=c.filter(Xe=>{const lt=Xe.name.toLowerCase().includes(he),ut=Xe.category?.toLowerCase().includes(he),Zt=Xe.description?.toLowerCase().includes(he),Mt=Xe.sku?.toLowerCase().includes(he);return lt||ut||Zt||Mt}).slice(0,3),Qe=f.filter(Xe=>{const lt=Xe.name.toLowerCase().includes(he),ut=Xe.side_businesses?.name.toLowerCase().includes(he);return lt||ut}).slice(0,2),Ve=[...Ke,...Qe].slice(0,5);P(Ve),F(Ve.length>0)},_e=()=>{let A=J;if(_!=="All"&&(A=A.filter(Ke=>Ke.category===_)),N){const Ke=N.toLowerCase().trim();A=A.filter(Qe=>Qe.name.toLowerCase().includes(Ke)||Qe.category?.toLowerCase().includes(Ke)||Qe.description?.toLowerCase().includes(Ke)||Qe.sku?.toLowerCase().includes(Ke))}x(A);let he=f;_!=="All"&&(he=he.filter(Ke=>Ke.side_businesses?.name===_)),N&&(he=he.filter(Ke=>Ke.name.toLowerCase().includes(N.toLowerCase()))),v(he)},De=A=>{R(A),K(A)},fe=A=>{R(A.name),F(!1),P([]),"product_id"in A?Te(A):Ye(A)},we=()=>{const A=q.items.reduce((Ve,Xe)=>{if(Xe.product)return Xe.weight&&Xe.calculatedPrice?Ve+Xe.calculatedPrice:Ve+Xe.product.price*Xe.quantity;if(Xe.sideBusinessItem){const lt=Xe.customPrice||Xe.sideBusinessItem.price||0;return Ve+lt*Xe.quantity}return Ve},0),he=0,Ke=0,Qe=A-Ke;de(Ve=>({...Ve,subtotal:A,tax:he,discount:Ke,total:Qe}))},Te=A=>{if(A.is_weighted&&A.price_per_unit&&A.weight_unit){vt(A),Ie(""),gt(!0);return}de(he=>he.items.find(Qe=>Qe.product?.product_id===A.product_id&&!Qe.weight)?{...he,items:he.items.map(Qe=>Qe.product?.product_id===A.product_id&&!Qe.weight?{...Qe,quantity:Qe.quantity+1}:Qe)}:{...he,items:[...he.items,{product:A,quantity:1}]}),Oh(A.name,A.price)},Ue=(A,he)=>{const Ke=he*(A.price_per_unit||0);de(nt?Qe=>({...Qe,items:Qe.items.map(Ve=>Ve.product?.product_id===nt&&Ve.weight?{...Ve,weight:he,calculatedPrice:Ke}:Ve)}):Qe=>({...Qe,items:[...Qe.items,{product:A,quantity:1,weight:he,calculatedPrice:Ke}]})),gt(!1),vt(null),mt(null),Ie("")},Ye=A=>{if(!A.price)G(A),rt(""),ve(!0);else{de(Qe=>Qe.items.find(Xe=>Xe.sideBusinessItem?.item_id===A.item_id)?{...Qe,items:Qe.items.map(Xe=>Xe.sideBusinessItem?.item_id===A.item_id?{...Xe,quantity:Xe.quantity+1}:Xe)}:{...Qe,items:[...Qe.items,{sideBusinessItem:A,quantity:1}]});const he=A.name,Ke=A.price||0;Oh(he,Ke)}},it=()=>{if(!Ge)return;const A=parseFloat(Ce);if(isNaN(A)||A<0){alert("Please enter a valid price");return}de(he=>he.items.find(Qe=>Qe.sideBusinessItem?.item_id===Ge.item_id&&Qe.customPrice===A)?{...he,items:he.items.map(Qe=>Qe.sideBusinessItem?.item_id===Ge.item_id&&Qe.customPrice===A?{...Qe,quantity:Qe.quantity+1}:Qe)}:{...he,items:[...he.items,{sideBusinessItem:Ge,quantity:1,customPrice:A}]}),ve(!1),G(null),rt("")},$e=async()=>{if(t==null){alert("Please select a business before creating a quick service item");return}if(!Lt.trim()||!He||!Ot){alert("Please fill in all fields");return}const A=parseFloat(He);if(isNaN(A)||A<0){alert("Please enter a valid price");return}try{const he={item_id:Date.now(),business_id:parseInt(Ot),name:Lt.trim(),price:A,stock_qty:null,side_businesses:{name:kr.find(Ke=>Ke.business_id.toString()===Ot)?.name||"Service",business_type:"service"}};de(Ke=>({...Ke,items:[...Ke.items,{sideBusinessItem:he,quantity:1,customPrice:A}]})),Oh(Lt.trim(),A),le(""),ht(""),lr(""),or(!1)}catch(he){console.error("Error creating quick service:",he),alert("Failed to create service. Please try again.")}},tt=(A,he)=>{if(he<=0){ot(A);return}de(Ke=>({...Ke,items:Ke.items.map(Qe=>Qe.product?.product_id===A?{...Qe,quantity:he}:Qe.sideBusinessItem?.item_id.toString()===A?{...Qe,quantity:he}:Qe)}))},St=(A,he)=>{if(he<=0){ot(A);return}de(Ke=>({...Ke,items:Ke.items.map(Qe=>{if(Qe.product?.product_id===A&&Qe.weight){const Ve=he*(Qe.product.price_per_unit||0);return{...Qe,weight:he,calculatedPrice:Ve}}return Qe})}))},Kt=A=>typeof A=="string"?A.trim().toLowerCase():"",Qt=A=>{const he=Kt(A);return c.find(Ke=>Kt(Ke.barcode)===he)||null},Jt=(A,he=0)=>{if(A==null||A=="")return he;if(typeof A=="number")return Number.isFinite(A)?A:he;const Ke=parseFloat(String(A));return Number.isFinite(Ke)?Ke:he},wn=(A,he=0)=>{if(A==null||A=="")return he;if(typeof A=="number")return Number.isFinite(A)?Math.trunc(A):he;const Ke=parseInt(String(A),10);return Number.isFinite(Ke)?Ke:he},k=A=>({...A,price:Jt(A.price),stock_quantity:wn(A.stock_quantity),reorder_level:wn(A.reorder_level),tax_rate:Jt(A.tax_rate),is_weighted:!!A.is_weighted,price_per_unit:A.price_per_unit==null?null:Jt(A.price_per_unit),total_revenue:A.total_revenue==null?void 0:Jt(A.total_revenue),sales_count:A.sales_count==null?void 0:wn(A.sales_count),last_updated:A.last_updated,weight_unit:A.weight_unit,description:A.description,sku:A.sku,barcode:typeof A.barcode=="string"?A.barcode.trim():A.barcode,supplier_info:A.supplier_info,image_url:A.image_url}),ce=async A=>{console.log(" Barcode scanned:",A);let he=Qt(A);if(console.log(" Local product found:",he),!he){if(t==null){xt("not_found"),nr(A),setTimeout(()=>{xt("idle")},3e3);return}const Ke=Kt(A);console.log(" Searching database for barcode:",Ke,"business_id:",t);const{data:Qe,error:Ve}=await Ne.from("products").select("*").eq("business_id",t).ilike("barcode",Ke).limit(1);console.log(" Database query result:",Qe,"error:",Ve),Ve&&console.error("Barcode lookup failed:",Ve);const Xe=Qe&&Qe.length>0?Qe[0]:null;if(Xe){const lt=k(Xe);he=lt,d(ut=>ut.some(Mt=>Mt.product_id===lt.product_id)?ut:[lt,...ut].slice(0,50)),ae(ut=>ut.some(Mt=>Mt.product_id===lt.product_id)?ut:[lt,...ut].slice(0,50))}}he?(console.log(" Adding product to order:",he.name),Te(he),xt("scanned"),nr(A),setTimeout(()=>{xt("idle")},2e3)):(console.log(" Product not found for barcode:",A),xt("not_found"),nr(A),setTimeout(()=>{xt("idle")},3e3))},Ae=()=>{ir?(_t(),se(!1),xt("idle")):(ct(),se(!0),xt("listening"))},{startListening:ct,stopListening:_t}=UE({onBarcodeScanned:ce,debounceMs:30,minLength:8,maxLength:20,isActive:ir,context:"sales-page"});T.useEffect(()=>{zE(et||Be||Ut||xe)},[et,Be,Ut,xe]),T.useEffect(()=>{if(!ir)return;const A=he=>{if(he.target&&he.target.tagName==="INPUT"){const Ke=he.target,Qe=Ke.value.trim();Qe.length>=8&&Qe.length<=20&&/^[A-Za-z0-9]+$/.test(Qe)&&(console.log(" Global barcode fallback detected:",Qe),ce(Qe),Ke.value="")}};return document.addEventListener("input",A,!0),()=>{document.removeEventListener("input",A,!0)}},[ir,ce]);const wt=A=>{A.product&&A.weight&&(vt(A.product),Ie(A.weight.toString()),gt(!0),mt(A.product.product_id))},ot=A=>{de(he=>({...he,items:he.items.filter(Ke=>Ke.product?.product_id!==A&&Ke.sideBusinessItem?.item_id.toString()!==A)}))},jt=()=>{if(window.confirm("Are you sure you want to reset the current transaction? This will clear all items from the order.")){de({items:[],subtotal:0,tax:0,discount:0,total:0}),ne(""),re(""),E("cash"),H(""),ge(0),qe("");const A=document.createElement("div");A.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,A.textContent="Transaction reset successfully!",document.body.appendChild(A),setTimeout(()=>{document.body.removeChild(A)},3e3)}},Et=()=>{const A=`RCP-${Date.now()}`,he=new Date,Ke=he.toLocaleDateString("en-IE"),Qe=he.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"});return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Receipt - ${A}</title>
        <style>
          body { 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            line-height: 1.4; 
            margin: 0; 
            padding: 10px; 
            background: white;
            color: black;
          }
          .receipt { 
            width: 100%; 
            max-width: 400px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            padding: 20px; 
            background: white;
          }
          .header { 
            text-align: center; 
            margin-bottom: 15px; 
            border-bottom: 1px dashed #333; 
            padding-bottom: 10px; 
          }
          .logo-fallback {
            display: none;
            background: #333;
            color: white;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
          }
          .business-info { 
            font-size: 10px; 
            margin: 8px 0; 
          }
          .divider { 
            border-top: 1px dashed #333; 
            margin: 10px 0; 
          }
          .item-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 3px 0; 
          }
          .total-row { 
            font-weight: bold; 
            border-top: 1px solid #333; 
            padding-top: 5px; 
            margin-top: 8px; 
          }
          .payment-info { 
            margin: 10px 0; 
          }
          .notes-section {
            margin: 10px 0;
            padding: 8px;
            background: #f5f5f5;
            border-radius: 4px;
          }
          .footer { 
            text-align: center; 
            margin-top: 15px; 
            font-size: 10px; 
            border-top: 1px dashed #333; 
            padding-top: 10px; 
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            <img src="/retailpos/images/backgrounds/logo1.png" alt="LandM Store" style="max-width: 80px; height: auto; display: block; margin: 0 auto 10px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <div class="logo-fallback" style="display: none; font-size: 24px; font-weight: bold; margin-bottom: 8px; color: #1a1a1a;">LandM Store</div>
            <div class="business-info">
              <div>Unit 2 Glenmore Park</div>
              <div>Dundalk, Co. Louth</div>
              <div>087 797 0412</div>
            </div>
          </div>
          
          <div class="divider"></div>
          
          <div class="item-row">
            <span>Date: ${Ke}</span>
            <span>Time: ${Qe}</span>
          </div>
          <div class="item-row">
            <span>Receipt: ${A}</span>
            <span>Cashier: ${e?.username||"System"}</span>
          </div>
          
          <div class="divider"></div>
          
          ${q.items.map(Ve=>{const Xe=Ve.product?.name||Ve.sideBusinessItem?.name||"Unknown Item",lt=Ve.product?.price||Ve.customPrice||Ve.sideBusinessItem?.price||0;return`
            <div class="item-row">
              <span>${Xe} x${Ve.quantity}</span>
              <span>${(lt*Ve.quantity).toFixed(2)}</span>
            </div>
          `}).join("")}
          
          <div class="divider"></div>
          
          <div class="item-row total-row">
            <span>SUBTOTAL:</span>
            <span>${q.subtotal.toFixed(2)}</span>
          </div>
          <div class="item-row total-row">
            <span>${st?"ORDER TOTAL:":"GRAND TOTAL:"}</span>
            <span>${q.total.toFixed(2)}</span>
          </div>
          
          ${st?`
          <div class="divider"></div>
          <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 4px; padding: 8px; margin: 10px 0;">
            <div style="font-weight: bold; margin-bottom: 5px; color: #92400e;">
              <i class="fa-solid fa-credit-card" style="margin-right: 5px;"></i>
              PARTIAL PAYMENT
            </div>
            <div class="item-row">
              <span>Amount Paid Today:</span>
              <span style="color: #059669; font-weight: bold;">${(parseFloat(Dt)||0).toFixed(2)}</span>
            </div>
            <div class="item-row">
              <span>Remaining Balance:</span>
              <span style="color: #dc2626; font-weight: bold;">${jr.toFixed(2)}</span>
            </div>
            ${Yt?`
            <div style="margin-top: 5px; font-size: 10px; color: #92400e;">
              Note: ${Yt}
            </div>
            `:""}
          </div>
          `:""}
          
          <div class="payment-info">
            <div class="item-row">
              <span>Payment Method:</span>
              <span>${X.toUpperCase()}</span>
            </div>
            ${X==="cash"?`
            <div class="item-row">
              <span>Amount Received:</span>
              <span>${parseFloat(z).toFixed(2)}</span>
            </div>
            <div class="item-row">
              <span>Change Given:</span>
              <span>${Z.toFixed(2)}</span>
            </div>
            `:X==="card"?`
            <div class="item-row">
              <span>Card: ****1234</span>
              <span>Approval: ${Math.floor(Math.random()*1e4)}</span>
            </div>
            `:""}
          </div>
          
          ${Fe||st&&Yt?`
          <div class="divider"></div>
          <div class="notes-section">
            <div style="font-weight: bold; margin-bottom: 5px;">Notes:</div>
            <div style="font-size: 9px; line-height: 1.3; margin-left: 10px;">
              ${st?`PARTIAL PAYMENT
Amount Paid Today: ${(parseFloat(Dt)||0).toFixed(2)}
Remaining Balance: ${jr.toFixed(2)}
${Yt?`Partial Payment Notes: ${Yt}`:""}`:""}
              ${Fe?(st?`

`:"")+Fe:""}
            </div>
          </div>
          `:""}
          
          <div class="divider"></div>
          
          <div class="footer">
            <div>Thank you for shopping with us!</div>
            <div style="margin-top: 5px;">LandM Store - Your Local African Food Store</div>
            ${st?`
            <div style="margin-top: 10px; font-size: 9px; color: #92400e;">
              <strong>Please keep this receipt for your records</strong><br>
              Remaining balance: ${jr.toFixed(2)}
            </div>
            `:""}
          </div>
        </div>
      </body>
      </html>
    `},Pt=()=>{const A=window.open("","_blank");A&&(A.document.write(Et()),A.document.close(),A.print(),A.close())},Fr=async()=>{if(!(q.items.length===0||r)){if(t==null){alert("Please select a business before processing a sale.");return}try{let A;if(D&&gr){const Ve=parseInt(gr.replace("TXN-","")),{data:Xe,error:lt}=await Ne.from("sales").update({total_amount:q.total,payment_method:X}).eq("sale_id",Ve).eq("business_id",t).select().single();if(lt)throw lt;A=Xe}else{let Ve=null;if(te.trim()){const{data:Zt,error:Mt}=await Ne.from("customers").select("customer_id").eq("business_id",t).eq("name",te.trim()).single();if(Zt&&!Mt)Ve=Zt.customer_id;else{const{data:Wt,error:Lr}=await Ne.from("customers").insert([{name:te.trim(),phone_number:me.trim()||"000-000-0000",email:null,business_id:t}]).select().single();Lr?(console.error("Error creating customer:",Lr),Ve=null):Ve=Wt.customer_id}}let Xe="";st&&(Xe=`PARTIAL PAYMENT
Amount Paid Today: ${(parseFloat(Dt)||0).toFixed(2)}
Remaining Balance: ${jr.toFixed(2)}`,Yt&&(Xe+=`

Partial Payment Notes: ${Yt}`)),Fe&&(Xe+=(Xe?`

`:"")+Fe);let lt,ut;try{const Zt={datetime:Nl(),total_amount:st?parseFloat(Dt)||0:q.total,payment_method:X,cashier_id:e?.user_id,customer_id:Ve,discount_applied:q.discount,partial_payment:st,partial_amount:st?parseFloat(Dt)||0:null,remaining_amount:st?jr:null,partial_notes:st?Yt:null,notes:Xe||null,business_id:t},Mt=await Ne.from("sales").insert([Zt]).select("*").single();lt=Mt.data,ut=Mt.error}catch{const Mt={datetime:Nl(),total_amount:st?parseFloat(Dt)||0:q.total,payment_method:X,cashier_id:e?.user_id,customer_id:Ve,discount_applied:q.discount,partial_payment:st,partial_amount:st?parseFloat(Dt)||0:null,remaining_amount:st?jr:null,partial_notes:st?Yt:null,business_id:t},Wt=await Ne.from("sales").insert([Mt]).select("*").single();lt=Wt.data,ut=Wt.error}if(ut)throw ut;A=lt}if(D&&gr){const Ve=ha?(await Ne.from("sale_items").select("product_id").eq("sale_id",A.sale_id)).data?.map(ut=>ut.product_id)||[]:[],Xe=q.items.filter(ut=>ut.product&&!Ve.includes(ut.product.product_id));if(Xe.length>0){const ut=Xe.map(Mt=>({sale_id:A.sale_id,product_id:Mt.product.product_id,quantity:Mt.quantity,price_each:Mt.product.price,weight:Mt.weight||null,calculated_price:Mt.calculatedPrice||null})),{error:Zt}=await Ne.from("sale_items").insert(ut);if(Zt)throw Zt;for(const Mt of ut){const Wt=Mt.calculated_price||Mt.price_each*Mt.quantity,{error:Lr}=await Ne.rpc("increment_product_sales",{product_id_param:Mt.product_id,revenue_amount:Wt,business_id_param:t});Lr&&console.error("Error updating product sales counter:",Lr)}}const lt=q.items.filter(ut=>ut.sideBusinessItem);for(const ut of lt){let Zt=ut.sideBusinessItem.item_id;if(Zt>1e9){const{data:Wt,error:Lr}=await Ne.from("side_business_items").insert({business_id:ut.sideBusinessItem.business_id,parent_shop_id:t,name:ut.sideBusinessItem.name,price:ut.customPrice||ut.sideBusinessItem.price,stock_qty:null,notes:"Created via Quick Service"}).select().single();if(Lr)throw Lr;Zt=Wt.item_id}const{error:Mt}=await Ne.from("side_business_sales").insert({item_id:Zt,quantity:ut.quantity,total_amount:(ut.customPrice||ut.sideBusinessItem.price||0)*ut.quantity,payment_method:X,date_time:Nl(),business_id:ut.sideBusinessItem.business_id,parent_shop_id:t});if(Mt)throw Mt}}else{const Ve=q.items.filter(lt=>lt.product).map(lt=>({sale_id:A.sale_id,product_id:lt.product.product_id,quantity:lt.quantity,price_each:lt.product.price,weight:lt.weight||null,calculated_price:lt.calculatedPrice||null})),Xe=q.items.filter(lt=>lt.sideBusinessItem);for(const lt of Xe){let ut=lt.sideBusinessItem.item_id;if(ut>1e9){const{data:Mt,error:Wt}=await Ne.from("side_business_items").insert({business_id:lt.sideBusinessItem.business_id,parent_shop_id:t,name:lt.sideBusinessItem.name,price:lt.customPrice||lt.sideBusinessItem.price,stock_qty:null,notes:"Created via Quick Service"}).select().single();if(Wt)throw Wt;ut=Mt.item_id}const{error:Zt}=await Ne.from("side_business_sales").insert({item_id:ut,quantity:lt.quantity,total_amount:(lt.customPrice||lt.sideBusinessItem.price||0)*lt.quantity,payment_method:X,date_time:Nl(),business_id:lt.sideBusinessItem.business_id,parent_shop_id:t});if(Zt)throw Zt}if(Ve.length>0){const{error:lt}=await Ne.from("sale_items").insert(Ve);if(lt)throw lt;for(const ut of Ve){const Zt=ut.calculated_price||ut.price_each*ut.quantity,{error:Mt}=await Ne.rpc("increment_product_sales",{product_id_param:ut.product_id,revenue_amount:Zt,business_id_param:t});Mt&&console.error("Error updating product sales counter:",Mt)}}}const he=D&&gr?q.items.filter(Ve=>Ve.product?!(ha?(ha.sale_items||[]).map(lt=>lt.product_id):[]).includes(Ve.product.product_id):!1):q.items.filter(Ve=>Ve.product);for(const Ve of he){if(!Ve.product)continue;const{error:Xe}=await Ne.from("products").update({stock_quantity:Ve.product.stock_quantity-Ve.quantity,last_updated:Nl()}).eq("product_id",Ve.product.product_id).eq("business_id",t);if(Xe)throw Xe;const{error:lt}=await Ne.from("inventory_movements").insert([{product_id:Ve.product.product_id,quantity_change:-Ve.quantity,movement_type:"Sale",reference_id:A.sale_id,business_id:t}]);if(lt)throw lt}const Ke=q.items.filter(Ve=>Ve.sideBusinessItem);for(const Ve of Ke){if(!Ve.sideBusinessItem||Ve.sideBusinessItem.stock_qty===null)continue;const{error:Xe}=await Ne.from("side_business_items").update({stock_qty:Ve.sideBusinessItem.stock_qty-Ve.quantity}).eq("item_id",Ve.sideBusinessItem.item_id).eq("parent_shop_id",t);if(Xe)throw Xe}de({items:[],subtotal:0,tax:0,discount:0,total:0}),ne(""),re(""),E("cash"),H(""),ge(0),qe(""),st&&jr>0&&A?.sale_id&&await Tn(te,me,jr,A.sale_id),At(!1),_n(""),Sn(0),Rt("");const Qe=document.createElement("div");Qe.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,Qe.textContent=D?"Items added to transaction successfully!":st?`Partial payment processed! ${(parseFloat(Dt)||0).toFixed(2)} paid, ${jr.toFixed(2)} remaining. Reminder created.`:"Sale processed successfully!",document.body.appendChild(Qe),setTimeout(()=>{document.body.removeChild(Qe)},3e3),qE(q.total),C(!1),D&&gr&&setTimeout(()=>{o(`/transaction/${gr}`)},2e3)}catch(A){alert(`Failed to process sale: ${A instanceof Error?A.message:"Unknown error"}`)}}},br=()=>{const A=new Date,he=A.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),Ke=A.toLocaleDateString("en-GB",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"});return`${he} - ${Ke}`},Tn=async(A,he,Ke,Qe)=>{if(t!=null)try{const Ve=e?.user_id||1,Xe=`Payment Due: ${A||"Customer"}`,lt=he?`
Phone: ${he}`:"",ut=`Customer owes ${Ke.toFixed(2)} from Sale #${Qe}. Please follow up for payment.${lt}`,Zt=new Date;Zt.setDate(Zt.getDate()+1);const Mt=Zt.toISOString().split("T")[0],{error:Wt}=await Ne.from("reminders").insert([{title:Xe,body:ut,remind_date:Mt,owner_id:Ve,business_id:t}]).select().single();Wt&&(console.error("Error creating partial payment reminder:",Wt),console.error("Reminder data attempted:",{title:Xe,body:ut,remind_date:Mt,owner_id:Ve}))}catch(Ve){console.error("Error creating partial payment reminder:",Ve)}};return be?s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#6b7280"},children:[s.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading products..."]}):s.jsxs("div",{style:{display:"flex",height:"100vh",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",fontFamily:"Poppins, sans-serif"},children:[s.jsxs("div",{style:{flex:1,background:"#ffffff",margin:"20px",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:D?"#fef3c7":"#f9fafb"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[s.jsx("i",{className:"fa-solid fa-cash-register",style:{marginRight:"12px",color:"#7d8d86"}}),"Point Of Sales"]}),D&&s.jsxs("div",{style:{background:"#f59e0b",color:"#92400e",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("i",{className:"fa-solid fa-plus-circle"}),"Adding to Transaction #",gr]})]}),D&&s.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:"8px 0 0 0",fontStyle:"italic"},children:"Adding new items to existing transaction. Existing items will be preserved."})]}),s.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f5f5f5"},children:s.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{position:"relative",flex:1,background:"#ffffff",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"2px solid #e5e7eb",transition:"all 0.3s ease"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px"},children:[s.jsx("i",{className:"fa-solid fa-search",style:{color:"#6b7280",fontSize:"18px",marginRight:"12px"}}),s.jsx("input",{type:"text",placeholder:"Search products, categories, or SKU...",value:N,onChange:A=>De(A.target.value),onFocus:A=>{A.target.parentElement.parentElement.style.borderColor="#3b82f6",A.target.parentElement.parentElement.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.15)",F(O.length>0)},onBlur:A=>{A.target.parentElement.parentElement.style.borderColor="#e5e7eb",A.target.parentElement.parentElement.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",setTimeout(()=>F(!1),200)},onKeyDown:A=>{A.key==="Enter"&&(A.preventDefault(),N.trim()&&F(!1))},style:{flex:1,padding:"4px 8px",border:"none",background:"transparent",fontSize:"16px",outline:"none",color:"#1f2937",fontWeight:"500"}}),N&&s.jsx("button",{onClick:()=>{R(""),F(!1),P([])},style:{background:"#f3f4f6",border:"none",borderRadius:"6px",padding:"6px",cursor:"pointer",color:"#6b7280",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:A=>{A.target.style.background="#e5e7eb"(A.target).style.color="#374151"},onMouseLeave:A=>{A.target.style.background="#f3f4f6"(A.target).style.color="#6b7280"},children:s.jsx("i",{className:"fa-solid fa-times"})})]}),Y&&O.length>0&&s.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"none",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",zIndex:1e3,maxHeight:"300px",overflowY:"auto",marginTop:"8px",backdropFilter:"blur(10px)"},children:O.map((A,he)=>{const Ke="product_id"in A,Qe="item_id"in A;return s.jsxs("div",{onClick:()=>fe(A),style:{padding:"16px 20px",cursor:"pointer",borderBottom:he<O.length-1?"1px solid #f1f5f9":"none",display:"flex",alignItems:"center",gap:"16px",transition:"all 0.2s ease",borderRadius:he===0?"16px 16px 0 0":he===O.length-1?"0 0 16px 16px":"0"},onMouseEnter:Ve=>{Ve.target.style.background="linear-gradient(135deg, #f8fafc, #f1f5f9)"(Ve.target).style.transform="translateX(4px)"},onMouseLeave:Ve=>{Ve.target.style.background="transparent"(Ve.target).style.transform="translateX(0)"},children:[s.jsx("div",{style:{width:"40px",height:"40px",background:Ke&&A.image_url?`url(${A.image_url})`:"linear-gradient(135deg, #667eea, #764ba2)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",color:"#ffffff",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:Qe&&s.jsx("i",{className:"fa-solid fa-briefcase"})}),s.jsxs("div",{style:{flex:1},children:[s.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"600",color:"#1e293b",lineHeight:"1.3"},children:A.name}),s.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:Ke?`${A.category}  ${A.price.toFixed(2)}`:`${A.side_businesses?.name||"Side Business"}  ${A.price?`${A.price.toFixed(2)}`:"Custom Price"}`})]}),s.jsxs("div",{style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"#ffffff",borderRadius:"8px",padding:"8px 12px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},children:[s.jsx("i",{className:"fa-solid fa-plus"}),"Add"]})]},Ke?A.product_id:`sb-${A.item_id}`)})})]}),s.jsx("div",{style:{display:"flex",gap:"12px"},children:s.jsxs(Td,{onClick:()=>or(!0),children:[s.jsx("i",{className:"fa-solid fa-plus-circle",style:{marginRight:"8px"}}),"Quick Service"]})})]})}),s.jsxs("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb",background:ir?"#f0f9ff":"#f9fafb",transition:"background-color 0.3s ease"},children:[ir&&s.jsx("input",{type:"text",style:{position:"absolute",left:"-9999px",opacity:0,pointerEvents:"none"},onInput:A=>{const he=A.target.value;he&&he.length>=8&&he.length<=20&&(console.log(" Hidden input barcode detected:",he),ce(he),A.target.value="")},autoFocus:!0}),s.jsx("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:s.jsxs("div",{style:{position:"relative",flex:1,minWidth:"300px",maxWidth:"400px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Barcode Scanner"}),s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[s.jsx("input",{type:"text",placeholder:"Scan or enter barcode manually",style:{flex:1,padding:"12px 16px",border:`2px solid ${ir?"#3b82f6":"#d1d5db"}`,borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.3s ease",background:ir?"#f0f9ff":"#ffffff",color:ir?"#1e40af":"#1f2937"},onKeyDown:A=>{if(A.key==="Enter"){const he=A.target.value.trim();he&&he.length>=8&&he.length<=20&&(console.log(" Manual barcode input:",he),ce(he),A.target.value="")}}}),s.jsx(Td,{onClick:Ae,children:ke==="listening"?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-stop",style:{marginRight:"8px"}}),"Stop Scanner"]}):ke==="scanned"?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-check",style:{marginRight:"8px"}}),"Item Added!"]}):ke==="not_found"?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Not Found"]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-barcode",style:{marginRight:"8px"}}),"Scan Barcode"]})})]})]})})]}),s.jsx("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",whiteSpace:"nowrap"},children:"Category:"}),s.jsx("select",{value:_,onChange:A=>S(A.target.value),style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer",minWidth:"200px",outline:"none",transition:"border-color 0.2s ease"},onFocus:A=>A.target.style.borderColor="#7d8d86",onBlur:A=>A.target.style.borderColor="#e5e7eb",children:b.map(A=>{let he=0;return A==="All"?he=c.length+f.length:he=f.filter(Ke=>Ke.side_businesses?.name===A).length,s.jsxs("option",{value:A,children:[A," ",A==="All"?`(${he})`:he>0?`(${he})`:""]},A)})})]})}),s.jsxs("div",{style:{flex:1,padding:"24px 32px",overflowY:"auto"},children:[s.jsx("div",{style:{marginBottom:"16px"},children:s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 4px 0"},children:"Products"})}),p.length===0?s.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[s.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),s.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",color:"#374151",margin:"0 0 8px 0"},children:"No products found"}),s.jsx("p",{style:{fontSize:"14px",margin:"0",color:"#6b7280"},children:N?`No products match "${N}"`:"Try selecting a different category"})]}):s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"12px"},children:[p.map(A=>s.jsxs("div",{style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:he=>{he.currentTarget.style.transform="translateY(-1px)",he.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",he.currentTarget.style.border="2px solid #6b7280"},onMouseLeave:he=>{he.currentTarget.style.transform="translateY(0)",he.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",he.currentTarget.style.border="2px solid #6b7280"},children:[s.jsx("div",{style:{width:"100%",height:"100px",background:A.image_url?`url(${A.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:!A.image_url&&s.jsx("i",{className:"fa-solid fa-image",style:{fontSize:"24px",color:"#9ca3af"}})}),s.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:A.name}),s.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:A.is_weighted&&A.price_per_unit&&A.weight_unit?A.weight_unit==="g"&&A.price_per_unit<1?`${(A.price_per_unit*1e3).toFixed(2)}/kg`:A.weight_unit==="kg"&&A.price_per_unit>=1?`${A.price_per_unit.toFixed(2)}/kg`:`${A.price_per_unit.toFixed(2)}/${A.weight_unit}`:`${A.price.toFixed(2)}`}),s.jsxs("button",{onClick:()=>Te(A),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:he=>{he.currentTarget.style.background="#3e3f29"},onMouseLeave:he=>{he.currentTarget.style.background="#7d8d86"},children:[s.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},A.product_id)),y.map(A=>s.jsxs("div",{style:{background:"#ffffff",border:"3px solid #374151",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:he=>{he.currentTarget.style.transform="translateY(-1px)",he.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseLeave:he=>{he.currentTarget.style.transform="translateY(0)",he.currentTarget.style.boxShadow="none"},children:[s.jsx("div",{style:{width:"100%",height:"100px",background:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"24px",color:"#9ca3af"}})}),s.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:A.name}),s.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:A.price?`${A.price.toFixed(2)}`:"Custom Price"}),s.jsxs("button",{onClick:()=>Ye(A),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:he=>{he.currentTarget.style.background="#3e3f29"},onMouseLeave:he=>{he.currentTarget.style.background="#7d8d86"},children:[s.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},`sb-${A.item_id}`))]})]})]}),s.jsxs("div",{style:{width:"400px",background:"#ffffff",margin:"20px 20px 20px 0",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px",fontWeight:"600"},children:e?.username?.charAt(0).toUpperCase()}),s.jsx("div",{children:s.jsxs("p",{style:{margin:"0",fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["Hello, ",e?.username]})})]}),s.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:br()})]}),s.jsxs("div",{style:{flex:1,padding:"24px",overflowY:"auto"},children:[s.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:["Order Detail #",Math.floor(Math.random()*1e7)]}),q.items.length===0?s.jsxs("div",{style:{textAlign:"center",color:"#6b7280",padding:"40px 0"},children:[s.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),s.jsx("p",{children:"No items in order"})]}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:q.items.map(A=>{const he=A.product?.product_id||`sb-${A.sideBusinessItem?.item_id}`,Ke=A.product?.name||A.sideBusinessItem?.name||"Unknown Item",Qe=A.product?.price||A.customPrice||A.sideBusinessItem?.price||0,Ve=!!A.sideBusinessItem;return s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#ffffff",borderRadius:"8px",border:"3px solid #dc2626",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[s.jsx("div",{style:{width:"40px",height:"40px",background:Ve?"linear-gradient(135deg, #f3f4f6, #e5e7eb)":A.product?.image_url?`url(${A.product.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:Ve&&s.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"16px",color:"#9ca3af"}})}),s.jsxs("div",{style:{flex:1},children:[s.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:Ke.length>20?Ke.substring(0,20)+"...":Ke}),s.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#7d8d86",fontWeight:"600"},children:A.weight&&A.calculatedPrice?s.jsxs(s.Fragment,{children:[A.weight," ",A.product?.weight_unit,"  ",A.calculatedPrice.toFixed(2)]}):`${Qe.toFixed(2)}`})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!A.weight&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>tt(he,A.quantity-1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),s.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:A.quantity}),s.jsx("button",{onClick:()=>tt(he,A.quantity+1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),A.weight&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>St(he,A.weight-.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),s.jsxs("button",{onClick:()=>wt(A),style:{minWidth:"60px",height:"24px",borderRadius:"4px",border:"1px solid #7d8d86",background:"#f9fafb",color:"#7d8d86",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"500",padding:"0 4px"},title:"Click to edit weight",children:[A.weight," ",A.product?.weight_unit]}),s.jsx("button",{onClick:()=>St(he,A.weight+.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),s.jsx("button",{onClick:()=>ot(he),style:{width:"24px",height:"24px",borderRadius:"4px",border:"none",background:"#ef4444",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",marginLeft:"4px"},children:s.jsx("i",{className:"fa-solid fa-trash"})})]})]},he)})})]}),s.jsxs("div",{style:{padding:"24px",borderTop:"1px solid #e5e7eb",background:"#f9fafb"},children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Detail"}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Customer Name"}),s.jsx("input",{type:"text",value:te,onChange:A=>ne(A.target.value),placeholder:"Enter customer name",style:{width:"100%",padding:"8px 12px",border:"1px solid #6b7280",borderRadius:"6px",fontSize:"14px",outline:"none"}})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[s.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Sub Total"}),s.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["",q.subtotal.toFixed(2)]})]}),q.discount>0&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[s.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Discount"}),s.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["",q.discount.toFixed(2)]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"8px",borderTop:"1px solid #d1d5db",marginBottom:"16px"},children:[s.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937"},children:"Total Payment"}),s.jsxs("span",{style:{fontSize:"16px",fontWeight:"600",color:"#7d8d86"},children:["",q.total.toFixed(2)]})]})]}),s.jsx("button",{style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"14px",fontWeight:"500",cursor:"pointer",width:"100%",marginBottom:"12px"},children:"Add Voucher"}),s.jsx("div",{style:{background:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"10px 12px",display:"flex",alignItems:"center",gap:"8px",width:"fit-content",maxWidth:"280px",marginBottom:"12px",opacity:q.items.length===0?.5:1,cursor:q.items.length===0?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},onClick:async()=>{if(q.items.length!==0){if(Rr){console.log("Pausing TTS..."),Ir.pause(),Ht(!1);return}console.log("Announce Order clicked!"),console.log("Order items:",q.items),Ht(!0),Ir.updateSettings({enabled:!0}),rr(Ir.getSettings()),console.log("TTS Settings after enabling:",Ir.getSettings());try{await k1(q.items),setTimeout(()=>{Ir.updateSettings({enabled:!1}),rr(Ir.getSettings()),Ht(!1)},3e3)}catch(A){console.error("TTS Error:",A),Ir.updateSettings({enabled:!1}),rr(Ir.getSettings()),Ht(!1)}}},onMouseEnter:A=>{q.items.length>0&&(A.currentTarget.style.background="#333333",A.currentTarget.style.borderColor="#555555")},onMouseLeave:A=>{q.items.length>0&&(A.currentTarget.style.background="#2a2a2a",A.currentTarget.style.borderColor="#404040")},children:s.jsxs("button",{onClick:async()=>{if(q.items.length!==0){if(Rr){console.log("Pausing TTS..."),Ir.stop(),Ht(!1);return}console.log("Announce Order clicked!"),console.log("Order items:",q.items),Ht(!0),Ir.updateSettings({enabled:!0}),rr(Ir.getSettings()),console.log("TTS Settings after enabling:",Ir.getSettings());try{await k1(q.items),setTimeout(()=>{Ir.updateSettings({enabled:!1}),rr(Ir.getSettings()),Ht(!1)},3e3)}catch(A){console.error("TTS Error:",A),Ht(!1),Ir.updateSettings({enabled:!1}),rr(Ir.getSettings())}}},disabled:q.items.length===0,style:{background:q.items.length===0?"#666666":"#4a5568",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",cursor:q.items.length===0?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease",opacity:q.items.length===0?.5:1},onMouseEnter:A=>{q.items.length>0&&(A.target.style.background="#2d3748")},onMouseLeave:A=>{q.items.length>0&&(A.target.style.background="#4a5568")},children:[s.jsx("i",{className:Rr?"fa-solid fa-pause":"fa-solid fa-play",style:{fontSize:"12px"}}),Rr?"Stop":"Play"]})}),s.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[s.jsxs(Td,{onClick:jt,disabled:q.items.length===0,style:{flex:1},children:[s.jsx("i",{className:"fa-solid fa-rotate-left",style:{marginRight:"8px"}}),"Reset"]}),s.jsxs(Td,{onClick:()=>C(!0),disabled:q.items.length===0,style:{flex:2},children:[s.jsx("i",{className:"fa-solid fa-credit-card",style:{marginRight:"8px"}}),"Purchase",q.items.length>0&&s.jsx("span",{style:{fontSize:"10px",opacity:.8,marginLeft:"2px"},children:"(Ctrl+Enter)"})]})]})]})]}),xe&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"20px",width:"95%",maxWidth:"700px",maxHeight:"95vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"8px",borderBottom:"1px solid #e5e7eb"},children:[s.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1f2937"},children:[s.jsx("i",{className:"fa-solid fa-receipt",style:{marginRight:"12px",color:"#7d8d86"}}),"Sales Summary"]}),s.jsx("button",{onClick:()=>C(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#6b7280",cursor:"pointer",padding:"4px"},children:s.jsx("i",{className:"fa-solid fa-xmark"})})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Customer Information"}),s.jsx("input",{type:"text",value:te,onChange:A=>ne(A.target.value),placeholder:"Enter customer name (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"12px"}})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Phone Number (Optional)"}),s.jsx("input",{type:"tel",value:me,onChange:A=>re(A.target.value),placeholder:"Enter phone number (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"16px"}})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Payment Method"}),s.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:["cash","card","credit"].map(A=>s.jsxs("button",{onClick:()=>E(A),style:{background:X===A?"#7d8d86":"#f3f4f6",color:X===A?"white":"#374151",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",textTransform:"capitalize",transition:"all 0.2s ease"},children:[s.jsx("i",{className:`fa-solid fa-${A==="cash"?"money-bill":A==="card"?"credit-card":"hand-holding-dollar"}`,style:{marginRight:"6px"}}),A]},A))})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0"},children:"Payment Options"}),s.jsxs("button",{onClick:()=>{At(!st),st?(_n(""),Sn(0)):(_n(q.total.toString()),Sn(0))},style:{background:st?"#ef4444":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("i",{className:`fa-solid fa-${st?"times":"credit-card"}`,style:{fontSize:"12px"}}),st?"Disable Partial":"Enable Partial Payment"]})]}),st&&s.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[s.jsx("i",{className:"fa-solid fa-info-circle",style:{color:"#f59e0b"}}),s.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#92400e"},children:"Partial Payment Enabled"})]}),s.jsxs("div",{style:{fontSize:"14px",color:"#92400e"},children:[s.jsxs("div",{children:["Amount to pay now: ",s.jsxs("strong",{children:["",(parseFloat(Dt)||0).toFixed(2)]})]}),s.jsxs("div",{children:["Remaining amount: ",s.jsxs("strong",{children:["",jr.toFixed(2)]})]}),jr>0&&s.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#fef2f2",border:"1px solid #fca5a5",borderRadius:"4px"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"6px",color:"#dc2626"}}),s.jsxs("strong",{style:{color:"#dc2626"},children:["Still need to pay: ",jr.toFixed(2)]})]})]})]}),st&&s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Amount to Pay Now ()"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:q.total,value:Dt,onChange:A=>{const he=A.target.value;_n(he);const Ke=parseFloat(he)||0;Sn(Math.max(0,q.total-Ke))},style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},placeholder:`Enter amount (max ${q.total.toFixed(2)})`})]}),st&&s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Notes (Optional)"}),s.jsx("textarea",{value:Yt,onChange:A=>Rt(A.target.value),placeholder:"Add any notes about this partial payment...",style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit",transition:"border-color 0.2s ease"}})]})]}),X==="cash"&&s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Amount Received"}),s.jsx("div",{style:{marginBottom:"12px"},children:s.jsxs("button",{onClick:()=>H(st?Dt:q.total.toFixed(2)),style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:A=>A.target.style.background="#f9fafb",onMouseOut:A=>A.target.style.background="#ffffff",children:["Set Exact Amount (",st?(parseFloat(Dt)||0).toFixed(2):q.total.toFixed(2),")"]})}),s.jsx("input",{type:"number",step:"0.01",value:z,onChange:A=>H(A.target.value),placeholder:`Enter amount: ${st?(parseFloat(Dt)||0).toFixed(2):q.total.toFixed(2)}`,style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"block",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"18px",fontWeight:"500",outline:"none",background:"#ffffff",textAlign:"center"}}),Z>0&&s.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",color:"#0c4a6e",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[s.jsx("i",{className:"fa-solid fa-coins",style:{marginRight:"8px"}}),"Change: ",Z.toFixed(2)]}),st&&jr>0&&s.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"2px solid #dc2626",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Still need to pay: ",jr.toFixed(2)]}),z&&parseFloat(z)<q.total&&!st&&s.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"1px solid #f87171",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Need ",((st?parseFloat(Dt)||0:q.total)-parseFloat(z)).toFixed(2)," more"]})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Receipt Notes (Optional)"}),s.jsx("textarea",{value:Fe,onChange:A=>qe(A.target.value),placeholder:"Add notes for receipt (e.g., partial payment, special instructions, etc.)",style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit"}}),s.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:"8px 0 0 0"},children:"These notes will appear on the printed receipt"})]}),s.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"12px",marginBottom:"16px"},children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Summary"}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Subtotal"}),s.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["",q.subtotal.toFixed(2)]})]}),q.discount>0&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Discount"}),s.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["",q.discount.toFixed(2)]})]}),st&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Amount to Pay Now"}),s.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#7d8d86"},children:["",(parseFloat(Dt)||0).toFixed(2)]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Remaining Amount"}),s.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#ef4444"},children:["",jr.toFixed(2)]})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid #d1d5db",marginTop:"8px"},children:[s.jsx("span",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:st?"Total Order":"Total"}),s.jsxs("span",{style:{fontSize:"18px",fontWeight:"600",color:"#7d8d86"},children:["",q.total.toFixed(2)]})]})]})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"space-between"},children:[s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsxs("button",{onClick:()=>Oe(!0),style:{background:"#ffffff",color:"#3e3f29",border:"1px solid #3e3f29",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("i",{className:"fa-solid fa-eye"}),"View Receipt"]}),s.jsxs("button",{onClick:Pt,style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]}),s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsx("button",{onClick:()=>C(!1),style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),s.jsxs("button",{onClick:Fr,disabled:X==="cash"&&(!z||parseFloat(z)<(st?parseFloat(Dt)||0:q.total)),style:{background:X==="cash"&&(!z||parseFloat(z)<(st?parseFloat(Dt)||0:q.total))?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:X==="cash"&&(!z||parseFloat(z)<(st?parseFloat(Dt)||0:q.total))?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:X==="cash"&&(!z||parseFloat(z)<(st?parseFloat(Dt)||0:q.total))?.6:1},children:[s.jsx("i",{className:"fa-solid fa-credit-card"}),st?"Process Partial Payment":"Process Sale"]})]})]})]})}),Re&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",width:"95vw",height:"95vh",overflow:"auto",position:"relative"},children:[s.jsx("button",{onClick:()=>Oe(!1),style:{position:"absolute",top:"12px",right:"12px",background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#6b7280",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},onMouseOver:A=>A.target.style.background="#f3f4f6",onMouseOut:A=>A.target.style.background="none",children:s.jsx("i",{className:"fa-solid fa-times"})}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0",textAlign:"center"},children:"Receipt Preview"}),s.jsx("div",{dangerouslySetInnerHTML:{__html:Et()},style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"30px",background:"#ffffff",fontFamily:"Courier New, monospace",fontSize:"16px",lineHeight:"1.6",maxWidth:"600px",margin:"0 auto"}})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[s.jsx("button",{onClick:()=>Oe(!1),style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close"}),s.jsxs("button",{onClick:()=>{Oe(!1),Pt()},style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #3e3f29 0%, #7d8d86 100%)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]})]})}),et&&Ge&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[s.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"Enter Custom Price"}),s.jsxs("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#6b7280"},children:["Set the price for: ",s.jsx("strong",{children:Ge.name})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price ()"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:Ce,onChange:A=>rt(A.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onKeyDown:A=>{A.key==="Enter"&&it()},autoFocus:!0})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[s.jsx("button",{onClick:()=>{ve(!1),G(null),rt("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),s.jsx("button",{onClick:it,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Add to Order"})]})]})}),Be&&at&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:nt?"Edit Weight":"Enter Weight"}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:"0 0 8px 0"},children:at.name}),s.jsxs("p",{style:{fontSize:"12px",color:"#9ca3af",margin:"0 0 12px 0"},children:["Price: ",at.price_per_unit?.toFixed(2)," per ",at.weight_unit]})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:["Weight (",at.weight_unit,")"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:bt,onChange:A=>Ie(A.target.value),placeholder:`Enter weight in ${at.weight_unit}`,style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:A=>A.target.style.borderColor="#7d8d86",onBlur:A=>A.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),bt&&parseFloat(bt)>0&&s.jsxs("div",{style:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px",marginBottom:"20px"},children:[s.jsx("p",{style:{fontSize:"14px",color:"#374151",margin:"0 0 4px 0"},children:"Total Price:"}),s.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:["",((parseFloat(bt)||0)*(at.price_per_unit||0)).toFixed(2)]})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[s.jsx("button",{onClick:()=>{gt(!1),vt(null),mt(null),Ie("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),s.jsx("button",{onClick:()=>{const A=parseFloat(bt);A>0&&Ue(at,A)},disabled:!bt||parseFloat(bt)<=0,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!bt||parseFloat(bt)<=0?"#d1d5db":"#7d8d86",color:!bt||parseFloat(bt)<=0?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:!bt||parseFloat(bt)<=0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:nt?"Update Weight":"Add to Order"})]})]})}),Ut&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[s.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"24px",fontWeight:"600",color:"#1f2937",display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("i",{className:"fa-solid fa-plus-circle",style:{color:"#10b981"}}),"Create Quick Service"]}),s.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280"},children:"Create a service on-the-fly with custom name and price. No need to predefine items!"}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Business"}),s.jsxs("select",{value:Ot,onChange:A=>lr(A.target.value),style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:A=>A.target.style.borderColor="#7d8d86",onBlur:A=>A.target.style.borderColor="#e5e7eb",children:[s.jsx("option",{value:"",children:"Select a service business"}),kr.map(A=>s.jsx("option",{value:A.business_id,children:A.name},A.business_id))]})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Service Name"}),s.jsx("input",{type:"text",value:Lt,onChange:A=>le(A.target.value),placeholder:"e.g., Haircut, Consultation, Repair...",style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:A=>A.target.style.borderColor="#7d8d86",onBlur:A=>A.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price ()"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:He,onChange:A=>ht(A.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:A=>A.target.style.borderColor="#7d8d86",onBlur:A=>A.target.style.borderColor="#e5e7eb"})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[s.jsx("button",{onClick:()=>{or(!1),le(""),ht(""),lr("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),s.jsxs("button",{onClick:$e,disabled:!Lt.trim()||!He||!Ot,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!Lt.trim()||!He||!Ot?"#d1d5db":"linear-gradient(135deg, #10b981, #059669)",color:!Lt.trim()||!He||!Ot?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"600",cursor:!Lt.trim()||!He||!Ot?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("i",{className:"fa-solid fa-plus"}),"Add to Order"]})]})]})})]})},$E="_searchContainer_tecz1_2",GE="_searchBarSection_tecz1_12",VE="_searchBarWrapper_tecz1_16",YE="_searchInputWrapper_tecz1_22",KE="_searchIcon_tecz1_40",XE="_searchInput_tecz1_22",QE="_clearButton_tecz1_65",JE="_searchResults_tecz1_87",ZE="_resultsCount_tecz1_91",ek="_filtersSection_tecz1_98",tk="_filtersContainer_tecz1_103",rk="_filterGroup_tecz1_110",nk="_filterLabel_tecz1_116",ak="_filterSelect_tecz1_123",sk="_sortToggleButton_tecz1_140",ik="_clearFiltersButton_tecz1_158",Yr={searchContainer:$E,searchBarSection:GE,searchBarWrapper:VE,searchInputWrapper:YE,searchIcon:KE,searchInput:XE,clearButton:QE,searchResults:JE,resultsCount:ZE,filtersSection:ek,filtersContainer:tk,filterGroup:rk,filterLabel:nk,filterSelect:ak,sortToggleButton:sk,clearFiltersButton:ik},ok=({searchTerm:e="",onSearchChange:t,searchPlaceholder:r="Search...",showSearchResults:a=!1,searchResultsCount:o=0,onClearSearch:c,filters:d=[],sortOptions:f=[],onSortToggle:h,sortOrder:p="desc",onClearFilters:x,hasActiveFilters:y=!1})=>s.jsxs("div",{className:Yr.searchContainer,children:[t&&s.jsx("div",{className:Yr.searchBarSection,children:s.jsxs("div",{className:Yr.searchBarWrapper,children:[s.jsxs("div",{className:Yr.searchInputWrapper,children:[s.jsx("i",{className:`fa-solid fa-search ${Yr.searchIcon}`}),s.jsx("input",{type:"text",placeholder:r,value:e,onChange:v=>t(v.target.value),className:Yr.searchInput}),e&&c&&s.jsx("button",{onClick:c,className:Yr.clearButton,title:"Clear search",children:s.jsx("i",{className:"fa-solid fa-times"})})]}),a&&e&&s.jsx("div",{className:Yr.searchResults,children:s.jsxs("span",{className:Yr.resultsCount,children:[o," result",o!==1?"s":""," found"]})})]})}),(d.length>0||f.length>0||h||y)&&s.jsx("div",{className:Yr.filtersSection,children:s.jsxs("div",{className:Yr.filtersContainer,children:[d.map((v,b)=>s.jsxs("div",{className:Yr.filterGroup,children:[s.jsxs("label",{className:Yr.filterLabel,children:[v.label,":"]}),s.jsx("select",{value:v.value,onChange:w=>v.onChange(w.target.value),className:Yr.filterSelect,children:v.options.map(w=>s.jsx("option",{value:w.value,children:w.label},w.value))})]},b)),f.map((v,b)=>s.jsxs("div",{className:Yr.filterGroup,children:[s.jsxs("label",{className:Yr.filterLabel,children:[v.label,":"]}),s.jsx("select",{value:v.value,onChange:w=>v.onChange(w.target.value),className:Yr.filterSelect,children:v.options.map(w=>s.jsx("option",{value:w.value,children:w.label},w.value))})]},b)),h&&s.jsx("button",{onClick:h,className:Yr.sortToggleButton,title:`Sort ${p==="asc"?"Descending":"Ascending"}`,children:s.jsx("i",{className:`fa-solid fa-sort-${p==="asc"?"up":"down"}`})}),y&&x&&s.jsxs("button",{onClick:x,className:Yr.clearFiltersButton,title:"Clear all filters",children:[s.jsx("i",{className:"fa-solid fa-times"}),"Clear"]})]})})]}),lk="_sideBusinessesContainer_272f1_2",ck="_pageHeader_272f1_8",dk="_pageTitle_272f1_17",uk="_primaryButton_272f1_31",fk="_statisticsGrid_272f1_54",hk="_statisticsCard_272f1_61",pk="_statisticsCardContent_272f1_75",gk="_statisticsInfo_272f1_81",xk="_statisticsLabel_272f1_85",mk="_statisticsValue_272f1_92",yk="_statisticsIcon_272f1_99",vk="_statisticsIconPurple_272f1_104",bk="_statisticsIconBlue_272f1_108",_k="_statisticsIconGreen_272f1_112",Sk="_statisticsIconOrange_272f1_116",wk="_mainContentGrid_272f1_121",Tk="_contentPanel_272f1_128",jk="_contentPanelHeader_272f1_142",Ek="_contentPanelTitle_272f1_151",kk="_contentPanelBody_272f1_158",Ck="_emptyStateMessage_272f1_165",Ak="_emptyStateMessageIcon_272f1_171",Rk="_emptyStateMessageText_272f1_177",Nk="_listContainer_272f1_184",Dk="_listContainerDivided_272f1_189",Ok="_listItemCard_272f1_193",Ik="_listItemCardContent_272f1_210",Mk="_listItemCardIcon_272f1_217",Bk="_listItemCardMain_272f1_234",Fk="_listItemCardTitle_272f1_238",Lk="_listItemCardSubtitle_272f1_245",Pk="_listItemCardMeta_272f1_251",zk="_listItemCardPrice_272f1_258",Uk="_listItemCardStock_272f1_264",Wk="_listItemCardCount_272f1_269",qk="_listItemCardTime_272f1_274",Hk="_listItemCardActions_272f1_279",$k="_actionButton_272f1_284",Gk="_actionButtonIcon_272f1_303",Vk="_statusBadge_272f1_308",Yk="_statusBadgeRental_272f1_316",Kk="_statusBadgeResale_272f1_321",Xk="_statusBadgeService_272f1_326",Qk="_statusBadgeGray_272f1_331",Jk="_statusBadgeCash_272f1_336",Zk="_statusBadgeCard_272f1_341",e8="_statusBadgeMobile_272f1_346",t8="_modalOverlay_272f1_352",r8="_modalDialog_272f1_363",n8="_modalDialogTitle_272f1_373",a8="_modalDialogForm_272f1_380",s8="_formFieldGroup_272f1_386",i8="_formFieldLabel_272f1_391",o8="_formFieldInput_272f1_399",l8="_formFieldTextarea_272f1_420",c8="_formFieldSelect_272f1_444",d8="_actionButtonDanger_272f1_496",u8="_standardButton_272f1_506",f8="_standardButtonSecondary_272f1_516",h8="_standardButtonDanger_272f1_525",p8="_standardButtonSuccess_272f1_534",g8="_businessDetailModalHeader_272f1_544",x8="_businessAnalyticsSection_272f1_554",m8="_analyticsSectionTitle_272f1_558",y8="_analyticsGrid_272f1_567",v8="_analyticsCard_272f1_574",b8="_analyticsCardHeader_272f1_587",_8="_analyticsIcon_272f1_594",S8="_analyticsIconBlue_272f1_600",w8="_analyticsIconGreen_272f1_604",T8="_analyticsIconPurple_272f1_608",j8="_analyticsPeriod_272f1_612",E8="_analyticsCardContent_272f1_618",k8="_analyticsMetric_272f1_624",C8="_analyticsLabel_272f1_630",A8="_analyticsValue_272f1_636",R8="_itemsSectionHeader_272f1_643",N8="_restockButton_272f1_650",D8="_restockActionButton_272f1_669",O8="_editActionButton_272f1_679",I8="_formFieldHelp_272f1_690",M8="_modalHeader_272f1_698",B8="_modalCloseButton_272f1_707",F8="_required_272f1_724",L8="_errorMessage_272f1_730",P8="_listItemCardNotes_272f1_748",z8="_restockInfo_272f1_759",U8="_restockItemName_272f1_767",W8="_restockCurrentStock_272f1_774",q8="_restockPreview_272f1_780",H8="_restockPreviewText_272f1_788",$8="_businessDetailModalIcon_272f1_803",G8="_businessDetailModalInfo_272f1_819",V8="_businessDetailModalName_272f1_823",Y8="_businessDetailModalDescription_272f1_830",K8="_businessDetailModalMeta_272f1_836",X8="_businessDetailModalDate_272f1_842",Q8="_businessDetailModalStats_272f1_847",J8="_businessDetailModalItems_272f1_854",Z8="_noItemsMessage_272f1_865",e6="_deleteConfirmationWarning_272f1_872",t6="_deleteConfirmationWarningText_272f1_878",r6="_modalDialogActions_272f1_885",n6="_errorStateContainer_272f1_893",a6="_errorStateContent_272f1_901",s6="_errorStateIcon_272f1_910",i6="_errorStateTitle_272f1_916",o6="_errorStateText_272f1_922",l6="_errorStateRetryButton_272f1_927",c6="_loadingStateContainer_272f1_944",d6="_loadingStateText_272f1_951",u6="_loadingStateSpinner_272f1_959",I={sideBusinessesContainer:lk,pageHeader:ck,pageTitle:dk,primaryButton:uk,statisticsGrid:fk,statisticsCard:hk,statisticsCardContent:pk,statisticsInfo:gk,statisticsLabel:xk,statisticsValue:mk,statisticsIcon:yk,statisticsIconPurple:vk,statisticsIconBlue:bk,statisticsIconGreen:_k,statisticsIconOrange:Sk,mainContentGrid:wk,contentPanel:Tk,contentPanelHeader:jk,contentPanelTitle:Ek,contentPanelBody:kk,emptyStateMessage:Ck,emptyStateMessageIcon:Ak,emptyStateMessageText:Rk,listContainer:Nk,listContainerDivided:Dk,listItemCard:Ok,listItemCardContent:Ik,listItemCardIcon:Mk,listItemCardMain:Bk,listItemCardTitle:Fk,listItemCardSubtitle:Lk,listItemCardMeta:Pk,listItemCardPrice:zk,listItemCardStock:Uk,listItemCardCount:Wk,listItemCardTime:qk,listItemCardActions:Hk,actionButton:$k,actionButtonIcon:Gk,statusBadge:Vk,statusBadgeRental:Yk,statusBadgeResale:Kk,statusBadgeService:Xk,statusBadgeGray:Qk,statusBadgeCash:Jk,statusBadgeCard:Zk,statusBadgeMobile:e8,modalOverlay:t8,modalDialog:r8,modalDialogTitle:n8,modalDialogForm:a8,formFieldGroup:s8,formFieldLabel:i8,formFieldInput:o8,formFieldTextarea:l8,formFieldSelect:c8,actionButtonDanger:d8,standardButton:u8,standardButtonSecondary:f8,standardButtonDanger:h8,standardButtonSuccess:p8,businessDetailModalHeader:g8,businessAnalyticsSection:x8,analyticsSectionTitle:m8,analyticsGrid:y8,analyticsCard:v8,analyticsCardHeader:b8,analyticsIcon:_8,analyticsIconBlue:S8,analyticsIconGreen:w8,analyticsIconPurple:T8,analyticsPeriod:j8,analyticsCardContent:E8,analyticsMetric:k8,analyticsLabel:C8,analyticsValue:A8,itemsSectionHeader:R8,restockButton:N8,restockActionButton:D8,editActionButton:O8,formFieldHelp:I8,modalHeader:M8,modalCloseButton:B8,required:F8,errorMessage:L8,listItemCardNotes:P8,restockInfo:z8,restockItemName:U8,restockCurrentStock:W8,restockPreview:q8,restockPreviewText:H8,businessDetailModalIcon:$8,businessDetailModalInfo:G8,businessDetailModalName:V8,businessDetailModalDescription:Y8,businessDetailModalMeta:K8,businessDetailModalDate:X8,businessDetailModalStats:Q8,businessDetailModalItems:J8,noItemsMessage:Z8,deleteConfirmationWarning:e6,deleteConfirmationWarningText:t6,modalDialogActions:r6,errorStateContainer:n6,errorStateContent:a6,errorStateIcon:s6,errorStateTitle:i6,errorStateText:o6,errorStateRetryButton:l6,loadingStateContainer:c6,loadingStateText:d6,loadingStateSpinner:u6};async function f6(e,t,r){console.log(" Starting image upload for side business:",t),console.log(" File details:",{name:e.name,size:e.size,type:e.type}),console.log(" User ID:",r);try{if(!r)return console.error(" No user ID provided"),null;console.log(" User ID provided:",r);const{data:a,error:o}=await Ne.storage.listBuckets();o?console.error(" Error listing buckets:",o):console.log(" Available buckets:",a?.map(p=>p.name));const c=`sidebusiness-images/${t}.${e.name.split(".").pop()}`;console.log(" Uploading to Supabase Storage:",c);const{error:d}=await Ne.storage.from("products").upload(c,e,{contentType:e.type,upsert:!0});if(d)return console.error(" Upload failed:",d),null;const{data:{publicUrl:f}}=Ne.storage.from("products").getPublicUrl(c);console.log(" Image uploaded successfully:",f),console.log(" Updating database with public URL...");const{error:h}=await Ne.from("side_businesses").update({image_url:f}).eq("business_id",t);return h?(console.error(" DB update failed:",h),null):(console.log(" Database updated with public URL"),f)}catch(a){return console.error(" Unexpected error during upload:",a),null}}const h6=()=>{const{user:e}=on(),[t,r]=T.useState([]),[a,o]=T.useState([]),[c,d]=T.useState([]),[f,h]=T.useState(!0),[p,x]=T.useState(null),[y,v]=T.useState("all"),[b,w]=T.useState("all"),[_,S]=T.useState(""),[N,R]=T.useState("created_at"),[O,P]=T.useState("desc"),[J,ae]=T.useState(!1),[Y,F]=T.useState(!1),[Q,oe]=T.useState(new Set),[q,de]=T.useState(!1),[te,ne]=T.useState(null),[me,re]=T.useState(!1),[be,W]=T.useState(null),[xe,C]=T.useState(null),[X,E]=T.useState(null),[z,H]=T.useState(!1),[Z,ge]=T.useState({item_id:null,current_stock:0,restock_quantity:""}),[Fe,qe]=T.useState(!1),[Re,Oe]=T.useState(null),[et,ve]=T.useState({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),[Ge,G]=T.useState(null),[Ce,rt]=T.useState(!1),[Be,gt]=T.useState({business_id:"",name:"",price:"",stock_qty:"",notes:""}),[at,vt]=T.useState({item_id:"",quantity:1,total_amount:"",payment_method:"cash"});T.useEffect(()=>{bt()},[]);const bt=async()=>{try{if(h(!0),x(null),!e?.business_id){r([]),o([]),d([]),h(!1);return}const{data:se,error:ke}=await Ne.from("side_businesses").select("*").eq("parent_shop_id",e.business_id).order("created_at",{ascending:!1});if(ke)throw ke;const{data:xt,error:Nt}=await Ne.from("side_business_items").select(`
          *,
          side_businesses (name)
        `).eq("parent_shop_id",e.business_id).order("created_at",{ascending:!1});if(Nt)throw Nt;const{data:nr,error:st}=await Ne.from("side_business_sales").select(`
          *,
          side_business_items (
            name,
            side_businesses (name)
          )
        `).eq("parent_shop_id",e.business_id).order("date_time",{ascending:!1}).limit(10);if(st)throw st;r(se||[]),o(xt||[]),d(nr||[])}catch(se){x(se instanceof Error?se.message:"Failed to fetch data")}finally{h(!1)}},Ie=async se=>{if(se.preventDefault(),!et.name.trim()){x("Business name is required");return}if(!et.business_type){x("Business type is required");return}if(!e?.user_id){x("User not authenticated");return}try{x(null);const{data:ke,error:xt}=await Ne.from("side_businesses").insert({owner_id:e.user_id,name:et.name.trim(),description:et.description.trim()||null,business_type:et.business_type,parent_shop_id:e.business_id}).select();if(xt)throw console.error("Database error:",xt),new Error(`Database error: ${xt.message}`);if(!ke||ke.length===0)throw new Error("No data returned from insert");const Nt=ke[0].business_id;if(Ge){rt(!0);try{await f6(Ge,Nt.toString(),e.user_id)}catch(nr){console.error("Error uploading image:",nr)}finally{rt(!1)}}ve({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),G(null),ae(!1),await bt()}catch(ke){console.error("Error adding business:",ke),x(ke instanceof Error?ke.message:"Failed to add business")}},nt=async se=>{se.preventDefault();try{const{error:ke}=await Ne.from("side_business_items").insert({business_id:parseInt(Be.business_id),name:Be.name,price:Be.price?parseFloat(Be.price):null,stock_qty:Be.stock_qty?parseInt(Be.stock_qty):null,notes:Be.notes.trim()||null,parent_shop_id:e?.business_id});if(ke)throw ke;gt({business_id:"",name:"",price:"",stock_qty:"",notes:""}),F(!1),bt()}catch(ke){x(ke instanceof Error?ke.message:"Failed to add item")}},mt=async se=>{se.preventDefault();try{const{error:ke}=await Ne.from("side_business_sales").insert({item_id:parseInt(at.item_id),quantity:at.quantity,total_amount:parseFloat(at.total_amount),payment_method:at.payment_method,parent_shop_id:e?.business_id});if(ke)throw ke;vt({item_id:"",quantity:1,total_amount:"",payment_method:"cash"}),de(!1),bt()}catch(ke){x(ke instanceof Error?ke.message:"Failed to add sale")}},Ut=async se=>{try{console.log(" Starting delete for sale:",se);const{error:ke}=await Ne.from("side_business_sales").delete().eq("sale_id",se);if(ke)throw console.error(" Error deleting sale:",ke),ke;console.log(" Sale deleted successfully"),C(null),bt()}catch(ke){console.error(" Delete sale failed:",ke),x(ke instanceof Error?ke.message:"Failed to delete sale")}},or=async se=>{try{console.log(" Starting delete for business:",se);const{data:ke,error:xt}=await Ne.from("side_business_items").select("item_id").eq("business_id",se);if(xt)throw console.error(" Error fetching items:",xt),xt;if(console.log(" Found items to delete:",ke?.length||0),ke&&ke.length>0){const st=ke.map(Dt=>Dt.item_id);console.log(" Deleting sales for items:",st);const{error:At}=await Ne.from("side_business_sales").delete().in("item_id",st);if(At)throw console.error(" Error deleting sales:",At),At;console.log(" Sales deleted successfully")}console.log(" Deleting items for business:",se);const{error:Nt}=await Ne.from("side_business_items").delete().eq("business_id",se);if(Nt)throw console.error(" Error deleting items:",Nt),Nt;console.log(" Items deleted successfully"),console.log(" Deleting business:",se);const{error:nr}=await Ne.from("side_businesses").delete().eq("business_id",se);if(nr)throw console.error(" Error deleting business:",nr),nr;console.log(" Business deleted successfully"),W(null),bt()}catch(ke){console.error(" Delete failed:",ke),x(ke instanceof Error?ke.message:"Failed to delete business")}},Lt=async se=>{try{const ke=new Date,xt=new Date(ke.getFullYear(),ke.getMonth(),ke.getDate()),Nt=new Date(xt);Nt.setDate(xt.getDate()-xt.getDay());const nr=new Date(ke.getFullYear(),ke.getMonth(),1),{data:st}=await Ne.from("side_business_items").select("item_id, stock_qty").eq("business_id",se),At=st?.reduce((Yt,Rt)=>Yt+(Rt.stock_qty||0),0)||0,Dt=st?.map(Yt=>Yt.item_id)||[];if(Dt.length===0){E({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}});return}const{data:_n}=await Ne.from("side_business_sales").select("total_amount").in("item_id",Dt).gte("date_time",xt.toISOString()),{data:jr}=await Ne.from("side_business_sales").select("total_amount").in("item_id",Dt).gte("date_time",Nt.toISOString()),{data:Sn}=await Ne.from("side_business_sales").select("total_amount").in("item_id",Dt).gte("date_time",nr.toISOString());E({currentStock:At,dailySales:{count:_n?.length||0,revenue:_n?.reduce((Yt,Rt)=>Yt+Rt.total_amount,0)||0},weeklySales:{count:jr?.length||0,revenue:jr?.reduce((Yt,Rt)=>Yt+Rt.total_amount,0)||0},monthlySales:{count:Sn?.length||0,revenue:Sn?.reduce((Yt,Rt)=>Yt+Rt.total_amount,0)||0}})}catch(ke){console.error("Error fetching business analytics:",ke),E({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}})}},le=async se=>{if(se.preventDefault(),!(!Z.item_id||!Z.restock_quantity))try{const ke=Z.current_stock+parseInt(Z.restock_quantity),{error:xt}=await Ne.from("side_business_items").update({stock_qty:ke}).eq("item_id",Z.item_id);if(xt)throw xt;ge({item_id:null,current_stock:0,restock_quantity:""}),H(!1),bt(),te&&Lt(te.business_id)}catch(ke){x(ke instanceof Error?ke.message:"Failed to restock item")}},He=se=>{ge({item_id:se.item_id,current_stock:se.stock_qty||0,restock_quantity:""}),H(!0)},ht=se=>{Oe(se),qe(!0)},Ot=async se=>{if(se.preventDefault(),!!Re)try{const{error:ke}=await Ne.from("side_business_items").update({name:Re.name,price:Re.price,notes:Re.notes}).eq("item_id",Re.item_id);if(ke)throw ke;qe(!1),Oe(null),bt(),te&&Lt(te.business_id)}catch(ke){x(ke instanceof Error?ke.message:"Failed to update item")}},lr=se=>{ne(se),re(!0),Lt(se.business_id)},kr=se=>{switch(se){case"rental":return I.statusBadgeRental;case"resale":return I.statusBadgeResale;case"service":return I.statusBadgeService;default:return I.statusBadgeGray}},Sr=se=>{switch(se){case"cash":return I.statusBadgeCash;case"card":return I.statusBadgeCard;case"mobile":return I.statusBadgeMobile;default:return I.statusBadgeGray}},rr=a.filter(se=>{const ke=y==="all"||se.business_id.toString()===y,xt=_===""||se.name.toLowerCase().includes(_.toLowerCase())||se.side_businesses?.name.toLowerCase().includes(_.toLowerCase());return ke&&xt}).sort((se,ke)=>{let xt,Nt;switch(N){case"name":xt=se.name.toLowerCase(),Nt=ke.name.toLowerCase();break;case"price":xt=se.price||0,Nt=ke.price||0;break;case"created_at":xt=new Date(se.created_at),Nt=new Date(ke.created_at);break;default:return 0}return O==="asc"?xt-Nt:Nt-xt}),Rr=t.filter(se=>{const ke=b==="all"||se.business_type===b,xt=_===""||se.name.toLowerCase().includes(_.toLowerCase())||se.description?.toLowerCase().includes(_.toLowerCase());return ke&&xt}).sort((se,ke)=>{let xt,Nt;switch(N){case"name":xt=se.name.toLowerCase(),Nt=ke.name.toLowerCase();break;case"created_at":xt=new Date(se.created_at),Nt=new Date(ke.created_at);break;default:return 0}return O==="asc"?xt-Nt:Nt-xt}),Ht=c.filter(se=>{const ke=a.find(At=>At.item_id===se.item_id)?.business_id,xt=y==="all"||ke?.toString()===y,Nt=t.find(At=>At.business_id===ke),nr=b==="all"||Nt?.business_type===b,st=_===""||se.side_business_items?.name.toLowerCase().includes(_.toLowerCase())||se.side_business_items?.side_businesses?.name.toLowerCase().includes(_.toLowerCase());return xt&&nr&&st}).sort((se,ke)=>{const xt=new Date(se.date_time),Nt=new Date(ke.date_time);return O==="asc"?xt.getTime()-Nt.getTime():Nt.getTime()-xt.getTime()}),ir=[...new Set(t.map(se=>se.business_type).filter(Boolean))];return f?s.jsx("div",{className:I.loadingStateContainer,children:s.jsxs("div",{className:I.loadingStateText,children:[s.jsx("i",{className:`fa-solid fa-spinner ${I.loadingStateSpinner}`}),"Loading side businesses..."]})}):p?s.jsx("div",{className:I.errorStateContainer,children:s.jsxs("div",{className:I.errorStateContent,children:[s.jsx("i",{className:`fa-solid fa-exclamation-triangle ${I.errorStateIcon}`}),s.jsx("h2",{className:I.errorStateTitle,children:"Error Loading Side Businesses"}),s.jsx("p",{className:I.errorStateText,children:p}),s.jsx("button",{className:I.errorStateRetryButton,onClick:bt,children:"Try Again"})]})}):s.jsxs("div",{className:I.sideBusinessesContainer,children:[s.jsxs("div",{className:I.pageHeader,children:[s.jsxs("h1",{className:I.pageTitle,children:[s.jsx("i",{className:"fa-solid fa-briefcase"}),"Side Businesses"]}),s.jsxs("button",{onClick:()=>ae(!0),className:I.primaryButton,children:[s.jsx("i",{className:"fa-solid fa-plus"}),"Add Business"]})]}),s.jsx(ok,{searchTerm:_,onSearchChange:S,searchPlaceholder:"Search businesses, items, or sales...",showSearchResults:!!_,searchResultsCount:rr.length+Rr.length+Ht.length,onClearSearch:()=>S(""),filters:[{label:"Business",value:y,onChange:v,options:[{value:"all",label:"All Businesses"},...t.map(se=>({value:se.business_id.toString(),label:se.name}))]},{label:"Type",value:b,onChange:w,options:[{value:"all",label:"All Types"},...ir.map(se=>({value:se,label:se.charAt(0).toUpperCase()+se.slice(1)}))]}],sortOptions:[{label:"Sort",value:N,onChange:se=>R(se),options:[{value:"created_at",label:"Date Created"},{value:"name",label:"Name"},{value:"price",label:"Price"}]}],onSortToggle:()=>P(O==="asc"?"desc":"asc"),sortOrder:O,hasActiveFilters:y!=="all"||b!=="all",onClearFilters:()=>{v("all"),w("all")}}),s.jsxs("div",{className:I.statisticsGrid,children:[s.jsx("div",{className:I.statisticsCard,children:s.jsxs("div",{className:I.statisticsCardContent,children:[s.jsxs("div",{className:I.statisticsInfo,children:[s.jsx("p",{className:I.statisticsLabel,children:"Total Businesses"}),s.jsx("p",{className:I.statisticsValue,children:Rr.length})]}),s.jsx("i",{className:`fas fa-briefcase ${I.statisticsIcon} ${I.statisticsIconPurple}`})]})}),s.jsx("div",{className:I.statisticsCard,children:s.jsxs("div",{className:I.statisticsCardContent,children:[s.jsxs("div",{className:I.statisticsInfo,children:[s.jsx("p",{className:I.statisticsLabel,children:"Total Items"}),s.jsx("p",{className:I.statisticsValue,children:rr.length})]}),s.jsx("i",{className:`fas fa-box ${I.statisticsIcon} ${I.statisticsIconBlue}`})]})}),s.jsx("div",{className:I.statisticsCard,children:s.jsxs("div",{className:I.statisticsCardContent,children:[s.jsxs("div",{className:I.statisticsInfo,children:[s.jsx("p",{className:I.statisticsLabel,children:"Total Sales"}),s.jsx("p",{className:I.statisticsValue,children:Ht.length})]}),s.jsx("i",{className:`fas fa-chart-line ${I.statisticsIcon} ${I.statisticsIconGreen}`})]})}),s.jsx("div",{className:I.statisticsCard,children:s.jsxs("div",{className:I.statisticsCardContent,children:[s.jsxs("div",{className:I.statisticsInfo,children:[s.jsx("p",{className:I.statisticsLabel,children:"Revenue"}),s.jsxs("p",{className:I.statisticsValue,children:["",Ht.reduce((se,ke)=>se+ke.total_amount,0).toFixed(2)]})]}),s.jsx("i",{className:`fas fa-euro-sign ${I.statisticsIcon} ${I.statisticsIconOrange}`})]})})]}),s.jsxs("div",{className:I.mainContentGrid,children:[s.jsxs("div",{className:I.contentPanel,children:[s.jsx("div",{className:I.contentPanelHeader,children:s.jsx("h2",{className:I.contentPanelTitle,children:"Businesses"})}),s.jsx("div",{className:I.contentPanelBody,children:Rr.length===0?s.jsxs("div",{className:I.emptyStateMessage,children:[s.jsx("i",{className:`fa-solid fa-briefcase ${I.emptyStateMessageIcon}`}),s.jsx("p",{className:I.emptyStateMessageText,children:"No businesses found. Add your first side business to get started!"})]}):s.jsx("div",{className:`${I.listContainer} ${I.listContainerDivided}`,children:Rr.map(se=>s.jsx("div",{className:I.listItemCard,onClick:()=>lr(se),children:s.jsxs("div",{className:I.listItemCardContent,children:[s.jsx("div",{className:I.listItemCardIcon,children:se.image_url&&s.jsx("img",{src:se.image_url,alt:se.name,style:{width:"40px",height:"40px",borderRadius:"8px",objectFit:"cover"}})}),s.jsxs("div",{className:I.listItemCardMain,children:[s.jsx("h3",{className:I.listItemCardTitle,children:se.name}),se.description&&s.jsx("p",{className:I.listItemCardSubtitle,children:se.description}),s.jsxs("div",{className:I.listItemCardMeta,children:[s.jsx("span",{className:`${I.statusBadge} ${kr(se.business_type)}`,children:se.business_type||"service"}),s.jsxs("span",{className:I.listItemCardCount,children:[a.filter(ke=>ke.business_id===se.business_id).length," items"]})]})]}),s.jsx("div",{className:I.listItemCardActions,children:s.jsxs("button",{onClick:ke=>{ke.stopPropagation(),W(se)},className:`${I.actionButton} ${I.actionButtonDanger}`,title:"Delete Business",children:[s.jsx("i",{className:`fas fa-trash ${I.actionButtonIcon}`}),"Delete"]})})]})},se.business_id))})})]}),s.jsxs("div",{className:I.contentPanel,children:[s.jsxs("div",{className:I.contentPanelHeader,children:[s.jsx("h2",{className:I.contentPanelTitle,children:"Items"}),s.jsxs("button",{onClick:()=>F(!0),className:I.actionButton,style:{marginLeft:"auto"},children:[s.jsx("i",{className:`fas fa-plus ${I.actionButtonIcon}`}),"Add Item"]})]}),s.jsx("div",{className:I.contentPanelBody,children:rr.length===0?s.jsxs("div",{className:I.emptyStateMessage,children:[s.jsx("i",{className:`fa-solid fa-box ${I.emptyStateMessageIcon}`}),s.jsx("p",{className:I.emptyStateMessageText,children:"No items found. Add items to your businesses!"})]}):s.jsx("div",{className:`${I.listContainer} ${I.listContainerDivided}`,children:rr.map(se=>s.jsx("div",{className:I.listItemCard,children:s.jsxs("div",{className:I.listItemCardContent,children:[s.jsxs("div",{className:I.listItemCardMain,children:[s.jsx("h3",{className:I.listItemCardTitle,children:se.name}),s.jsx("p",{className:I.listItemCardSubtitle,children:se.side_businesses?.name||"Unknown Business"}),s.jsxs("div",{className:I.listItemCardMeta,children:[se.price?s.jsxs("span",{className:I.listItemCardPrice,children:["",se.price]}):s.jsx("span",{className:I.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),se.stock_qty!==null&&s.jsxs("span",{className:I.listItemCardStock,children:["Stock: ",se.stock_qty]}),t.find(ke=>ke.business_id===se.business_id)?.business_type==="service"&&s.jsx("span",{className:`${I.statusBadge} ${I.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]})]}),s.jsx("div",{className:I.listItemCardActions,children:s.jsxs("button",{onClick:()=>{vt(ke=>({...ke,item_id:se.item_id.toString()})),de(!0)},className:I.actionButton,children:[s.jsx("i",{className:`fas fa-plus ${I.actionButtonIcon}`}),"Sale"]})})]})},se.item_id))})})]}),s.jsxs("div",{className:I.contentPanel,children:[s.jsx("div",{className:I.contentPanelHeader,children:s.jsx("h2",{className:I.contentPanelTitle,children:"Recent Sales"})}),s.jsx("div",{className:I.contentPanelBody,children:Ht.length===0?s.jsxs("div",{className:I.emptyStateMessage,children:[s.jsx("i",{className:`fa-solid fa-receipt ${I.emptyStateMessageIcon}`}),s.jsx("p",{className:I.emptyStateMessageText,children:"No sales recorded yet."})]}):s.jsx("div",{className:`${I.listContainer} ${I.listContainerDivided}`,children:Ht.map(se=>s.jsx("div",{className:I.listItemCard,children:s.jsxs("div",{className:I.listItemCardContent,children:[s.jsxs("div",{className:I.listItemCardMain,children:[s.jsx("h3",{className:I.listItemCardTitle,children:se.side_business_items?.name||"Unknown Item"}),s.jsx("p",{className:I.listItemCardSubtitle,children:se.side_business_items?.side_businesses?.name||"Unknown Business"}),s.jsxs("p",{className:I.listItemCardTime,children:[new Date(se.date_time).toLocaleDateString()," at ",new Date(se.date_time).toLocaleTimeString()]}),s.jsxs("div",{className:I.listItemCardMeta,children:[s.jsxs("span",{className:I.listItemCardCount,children:["Qty: ",se.quantity]}),s.jsxs("span",{className:I.listItemCardPrice,children:["",se.total_amount]}),s.jsx("span",{className:`${I.statusBadge} ${Sr(se.payment_method)}`,children:se.payment_method})]})]}),s.jsx("div",{className:I.listItemCardActions,children:s.jsxs("button",{onClick:ke=>{ke.stopPropagation(),C(se)},className:`${I.actionButton} ${I.actionButtonDanger}`,title:"Delete Sale",children:[s.jsx("i",{className:`fas fa-trash ${I.actionButtonIcon}`}),"Delete"]})})]})},se.sale_id))})})]})]}),J&&s.jsx("div",{className:I.modalOverlay,children:s.jsxs("div",{className:I.modalDialog,children:[s.jsxs("div",{className:I.modalHeader,children:[s.jsx("h2",{className:I.modalDialogTitle,children:"Create New Business"}),s.jsx("button",{type:"button",onClick:()=>{ve({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),ae(!1),x(null)},className:I.modalCloseButton,children:s.jsx("i",{className:"fas fa-times"})})]}),p&&s.jsxs("div",{className:I.errorMessage,children:[s.jsx("i",{className:"fas fa-exclamation-triangle"}),p]}),s.jsxs("form",{onSubmit:Ie,className:I.modalDialogForm,children:[s.jsxs("div",{className:I.formFieldGroup,children:[s.jsxs("label",{className:I.formFieldLabel,children:["Business Name ",s.jsx("span",{className:I.required,children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:et.name,onChange:se=>ve(ke=>({...ke,name:se.target.value})),className:I.formFieldInput,placeholder:"Enter business name",maxLength:100})]}),s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Description"}),s.jsx("textarea",{value:et.description,onChange:se=>ve(ke=>({...ke,description:se.target.value})),className:I.formFieldTextarea,rows:3,placeholder:"Brief description of your business",maxLength:500}),s.jsx("small",{className:I.formFieldHelp,children:"Optional: Describe what your business does"})]}),s.jsxs("div",{className:I.formFieldGroup,children:[s.jsxs("label",{className:I.formFieldLabel,children:["Business Type ",s.jsx("span",{className:I.required,children:"*"})]}),s.jsxs("select",{value:et.business_type,onChange:se=>ve(ke=>({...ke,business_type:se.target.value})),className:I.formFieldSelect,required:!0,children:[s.jsx("option",{value:"",children:"Select business type"}),s.jsx("option",{value:"service",children:"Service (Custom pricing per transaction)"}),s.jsx("option",{value:"rental",children:"Rental (Fixed pricing with stock)"}),s.jsx("option",{value:"resale",children:"Resale (Fixed pricing with stock)"})]}),s.jsxs("small",{className:I.formFieldHelp,children:[et.business_type==="service"&&"Services allow custom pricing for each transaction",et.business_type==="rental"&&"Rentals have fixed prices and track stock quantities",et.business_type==="resale"&&"Resale items have fixed prices and track stock quantities"]})]}),s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Business Image"}),s.jsx("input",{type:"file",accept:"image/*",onChange:se=>{const ke=se.target.files?.[0];G(ke||null)},className:I.formFieldInput}),s.jsx("small",{className:I.formFieldHelp,children:"Optional: Upload an image for your business (max 5MB, will be compressed)"}),Ge&&s.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#f0f0f0",borderRadius:"4px"},children:[s.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#7d8d86"}}),"Selected: ",Ge.name]})]}),s.jsxs("div",{className:I.modalDialogActions,children:[s.jsx("button",{type:"button",onClick:()=>{ve({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),G(null),ae(!1),x(null)},className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!et.name.trim()||!et.business_type||Ce,className:`${I.standardButton} ${I.standardButtonPrimary}`,children:Ce?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-spinner fa-spin",style:{marginRight:"8px"}}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Create Business"]})})]})]})]})}),Y&&s.jsx("div",{className:I.modalOverlay,children:s.jsxs("div",{className:I.modalDialog,children:[s.jsx("h2",{className:I.modalDialogTitle,children:"Add Item"}),s.jsxs("form",{onSubmit:nt,className:I.modalDialogForm,children:[s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Business"}),s.jsxs("select",{required:!0,value:Be.business_id,onChange:se=>gt(ke=>({...ke,business_id:se.target.value})),className:I.formFieldSelect,children:[s.jsx("option",{value:"",children:"Select a business"}),t.map(se=>s.jsxs("option",{value:se.business_id,children:[se.name," (",se.business_type,")"]},se.business_id))]})]}),s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Item Name"}),s.jsx("input",{type:"text",required:!0,value:Be.name,onChange:se=>gt(ke=>({...ke,name:se.target.value})),className:I.formFieldInput,placeholder:"e.g., Haircut, Chair Rental, etc."})]}),Be.business_id&&t.find(se=>se.business_id.toString()===Be.business_id)?.business_type!=="service"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Price ()"}),s.jsx("input",{type:"number",step:"0.01",value:Be.price,onChange:se=>gt(ke=>({...ke,price:se.target.value})),className:I.formFieldInput,placeholder:"0.00"})]}),s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Stock Quantity"}),s.jsx("input",{type:"number",min:"0",value:Be.stock_qty,onChange:se=>gt(ke=>({...ke,stock_qty:se.target.value})),className:I.formFieldInput,placeholder:"0"})]})]}),Be.business_id&&t.find(se=>se.business_id.toString()===Be.business_id)?.business_type==="service"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:I.formFieldGroup,children:s.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:0},children:[s.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"8px"}}),"Service items don't have fixed prices or stock. You'll enter the amount when recording a sale."]})}),s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Service Notes"}),s.jsx("textarea",{value:Be.notes,onChange:se=>gt(ke=>({...ke,notes:se.target.value})),className:I.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details for this service...",maxLength:500}),s.jsx("small",{className:I.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details for this service"})]})]}),s.jsxs("div",{className:I.modalDialogActions,children:[s.jsx("button",{type:"button",onClick:()=>F(!1),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),s.jsx("button",{type:"submit",className:`${I.standardButton} ${I.standardButtonSuccess}`,children:"Add Item"})]})]})]})}),q&&s.jsx("div",{className:I.modalOverlay,style:{zIndex:2e3},children:s.jsxs("div",{className:I.modalDialog,children:[s.jsx("h2",{className:I.modalDialogTitle,children:"Record Sale"}),s.jsxs("form",{onSubmit:mt,className:I.modalDialogForm,children:[s.jsxs("div",{className:I.formGroup,children:[s.jsx("label",{className:I.formLabel,children:"Item"}),s.jsxs("select",{required:!0,value:at.item_id,onChange:se=>vt(ke=>({...ke,item_id:se.target.value})),className:I.formFieldSelect,children:[s.jsx("option",{value:"",children:"Select an item"}),a.map(se=>s.jsxs("option",{value:se.item_id,children:[se.name," - ",se.side_businesses?.name,se.side_businesses&&t.find(ke=>ke.name===se.side_businesses?.name)?.business_type==="service"?" (Service - Custom Amount)":se.price?` (${se.price})`:""]},se.item_id))]})]}),s.jsxs("div",{className:I.formGroup,children:[s.jsx("label",{className:I.formLabel,children:"Quantity"}),s.jsx("input",{type:"number",min:"1",required:!0,value:at.quantity,onChange:se=>vt(ke=>({...ke,quantity:parseInt(se.target.value)})),className:I.formFieldInput})]}),s.jsxs("div",{className:I.formGroup,children:[s.jsx("label",{className:I.formLabel,children:"Total Amount ()"}),s.jsx("input",{type:"number",step:"0.01",required:!0,value:at.total_amount,onChange:se=>vt(ke=>({...ke,total_amount:se.target.value})),className:I.formFieldInput,placeholder:"0.00"}),at.item_id&&a.find(se=>se.item_id.toString()===at.item_id)&&t.find(se=>se.name===a.find(ke=>ke.item_id.toString()===at.item_id)?.side_businesses?.name)?.business_type==="service"&&s.jsxs("p",{style:{color:"#7d8d86",fontSize:"12px",margin:"4px 0 0 0"},children:[s.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"4px"}}),"Enter the custom amount for this service"]})]}),s.jsxs("div",{className:I.formGroup,children:[s.jsx("label",{className:I.formLabel,children:"Payment Method"}),s.jsxs("select",{value:at.payment_method,onChange:se=>vt(ke=>({...ke,payment_method:se.target.value})),className:I.formFieldSelect,children:[s.jsx("option",{value:"cash",children:"Cash"}),s.jsx("option",{value:"card",children:"Card"}),s.jsx("option",{value:"mobile",children:"Mobile"})]})]}),s.jsxs("div",{className:I.modalDialogActions,children:[s.jsx("button",{type:"button",onClick:()=>de(!1),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),s.jsx("button",{type:"submit",className:`${I.standardButton} ${I.standardButtonSuccess}`,children:"Record Sale"})]})]})]})}),me&&te&&s.jsx("div",{className:I.modalOverlay,children:s.jsxs("div",{className:I.modalDialog,style:{maxWidth:"600px"},children:[s.jsx("h2",{className:I.modalDialogTitle,children:"Business Details"}),s.jsxs("div",{className:I.businessDetailModalHeader,children:[s.jsx("div",{className:I.businessDetailModalIcon,children:te.image_url?s.jsx("img",{src:te.image_url,alt:te.name,style:{width:"100%",height:"100%",borderRadius:"16px",objectFit:"cover"}}):s.jsx("i",{className:te.icon||"fa-solid fa-briefcase"})}),s.jsxs("div",{className:I.businessDetailModalInfo,children:[s.jsx("h3",{className:I.businessDetailModalName,children:te.name}),s.jsx("p",{className:I.businessDetailModalDescription,children:te.description||"No description provided"}),s.jsxs("div",{className:I.businessDetailModalMeta,children:[s.jsx("span",{className:`${I.statusBadge} ${kr(te.business_type)}`,children:te.business_type||"service"}),s.jsxs("span",{className:I.businessDetailModalDate,children:["Created: ",new Date(te.created_at).toLocaleDateString()]})]})]})]}),s.jsxs("div",{className:I.businessDetailModalStats,children:[s.jsx("div",{className:I.statisticsCard,children:s.jsxs("div",{className:I.statisticsCardContent,children:[s.jsxs("div",{className:I.statisticsInfo,children:[s.jsx("p",{className:I.statisticsLabel,children:"Total Items"}),s.jsx("p",{className:I.statisticsValue,children:a.filter(se=>se.business_id===te.business_id).length})]}),s.jsx("i",{className:`fas fa-box ${I.statisticsIcon} ${I.statisticsIconBlue}`})]})}),s.jsx("div",{className:I.statisticsCard,children:s.jsxs("div",{className:I.statisticsCardContent,children:[s.jsxs("div",{className:I.statisticsInfo,children:[s.jsx("p",{className:I.statisticsLabel,children:"Current Stock"}),s.jsx("p",{className:I.statisticsValue,children:X?.currentStock||0})]}),s.jsx("i",{className:`fas fa-warehouse ${I.statisticsIcon} ${I.statisticsIconOrange}`})]})})]}),s.jsxs("div",{className:I.businessAnalyticsSection,children:[s.jsx("h4",{className:I.analyticsSectionTitle,children:"Sales Analytics"}),s.jsxs("div",{className:I.analyticsGrid,children:[s.jsxs("div",{className:I.analyticsCard,children:[s.jsxs("div",{className:I.analyticsCardHeader,children:[s.jsx("i",{className:`fas fa-calendar-day ${I.analyticsIcon} ${I.analyticsIconBlue}`}),s.jsx("span",{className:I.analyticsPeriod,children:"Today"})]}),s.jsxs("div",{className:I.analyticsCardContent,children:[s.jsxs("div",{className:I.analyticsMetric,children:[s.jsx("span",{className:I.analyticsLabel,children:"Sales"}),s.jsx("span",{className:I.analyticsValue,children:X?.dailySales.count||0})]}),s.jsxs("div",{className:I.analyticsMetric,children:[s.jsx("span",{className:I.analyticsLabel,children:"Revenue"}),s.jsxs("span",{className:I.analyticsValue,children:["",(X?.dailySales.revenue||0).toFixed(2)]})]})]})]}),s.jsxs("div",{className:I.analyticsCard,children:[s.jsxs("div",{className:I.analyticsCardHeader,children:[s.jsx("i",{className:`fas fa-calendar-week ${I.analyticsIcon} ${I.analyticsIconGreen}`}),s.jsx("span",{className:I.analyticsPeriod,children:"This Week"})]}),s.jsxs("div",{className:I.analyticsCardContent,children:[s.jsxs("div",{className:I.analyticsMetric,children:[s.jsx("span",{className:I.analyticsLabel,children:"Sales"}),s.jsx("span",{className:I.analyticsValue,children:X?.weeklySales.count||0})]}),s.jsxs("div",{className:I.analyticsMetric,children:[s.jsx("span",{className:I.analyticsLabel,children:"Revenue"}),s.jsxs("span",{className:I.analyticsValue,children:["",(X?.weeklySales.revenue||0).toFixed(2)]})]})]})]}),s.jsxs("div",{className:I.analyticsCard,children:[s.jsxs("div",{className:I.analyticsCardHeader,children:[s.jsx("i",{className:`fas fa-calendar-alt ${I.analyticsIcon} ${I.analyticsIconPurple}`}),s.jsx("span",{className:I.analyticsPeriod,children:"This Month"})]}),s.jsxs("div",{className:I.analyticsCardContent,children:[s.jsxs("div",{className:I.analyticsMetric,children:[s.jsx("span",{className:I.analyticsLabel,children:"Sales"}),s.jsx("span",{className:I.analyticsValue,children:X?.monthlySales.count||0})]}),s.jsxs("div",{className:I.analyticsMetric,children:[s.jsx("span",{className:I.analyticsLabel,children:"Revenue"}),s.jsxs("span",{className:I.analyticsValue,children:["",(X?.monthlySales.revenue||0).toFixed(2)]})]})]})]})]})]}),s.jsxs("div",{className:I.businessDetailModalItems,children:[s.jsxs("div",{className:I.itemsSectionHeader,children:[s.jsx("h4",{children:"Items in this business:"}),s.jsxs("button",{onClick:()=>F(!0),className:I.restockButton,title:"Add new item",children:[s.jsx("i",{className:"fas fa-plus"}),"Add Item"]})]}),a.filter(se=>se.business_id===te.business_id).length===0?s.jsx("p",{className:I.noItemsMessage,children:"No items added yet."}):s.jsx("div",{className:I.listContainer,children:a.filter(se=>se.business_id===te.business_id).map(se=>s.jsx("div",{className:I.listItemCard,children:s.jsxs("div",{className:I.listItemCardContent,children:[s.jsxs("div",{className:I.listItemCardMain,children:[s.jsx("h4",{className:I.listItemCardTitle,children:se.name}),s.jsxs("div",{className:I.listItemCardMeta,children:[se.price?s.jsxs("span",{className:I.listItemCardPrice,children:["",se.price]}):s.jsx("span",{className:I.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),se.stock_qty!==null&&s.jsxs("span",{className:I.listItemCardStock,children:["Stock: ",se.stock_qty]}),te?.business_type==="service"&&s.jsx("span",{className:`${I.statusBadge} ${I.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]}),se.notes&&s.jsxs("div",{className:I.listItemCardNotes,children:[s.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"6px",color:"#6b7280"}}),s.jsx("span",{style:{fontSize:"12px",color:"#6b7280",fontStyle:"italic"},children:se.notes.length>100?`${se.notes.substring(0,100)}...`:se.notes})]})]}),s.jsxs("div",{className:I.listItemCardActions,children:[s.jsxs("button",{onClick:()=>ht(se),className:`${I.actionButton} ${I.editActionButton}`,title:"Edit item",children:[s.jsx("i",{className:`fas fa-edit ${I.actionButtonIcon}`}),"Edit"]}),se.stock_qty!==null&&s.jsxs("button",{onClick:()=>He(se),className:`${I.actionButton} ${I.restockActionButton}`,title:"Restock item",children:[s.jsx("i",{className:`fas fa-boxes-stacked ${I.actionButtonIcon}`}),"Restock"]}),s.jsxs("button",{onClick:()=>{vt(ke=>({...ke,item_id:se.item_id.toString()})),de(!0)},className:I.actionButton,title:"Record sale",children:[s.jsx("i",{className:`fas fa-plus ${I.actionButtonIcon}`}),"Sale"]})]})]})},se.item_id))})]}),s.jsxs("div",{className:I.modalDialogActions,children:[s.jsx("button",{type:"button",onClick:()=>re(!1),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Close"}),s.jsx("button",{type:"button",onClick:()=>{re(!1),W(te)},className:`${I.standardButton} ${I.standardButtonDanger}`,children:"Delete Business"})]})]})}),be&&s.jsx("div",{className:I.modalOverlay,children:s.jsxs("div",{className:I.modalDialog,children:[s.jsx("h2",{className:I.modalDialogTitle,children:"Delete Business"}),s.jsxs("p",{className:I.deleteConfirmationWarning,children:["Are you sure you want to delete ",s.jsx("strong",{children:be.name}),"?"]}),s.jsx("p",{className:I.deleteConfirmationWarningText,children:"This will permanently delete the business, all its items, and all related sales records. This action cannot be undone."}),s.jsxs("div",{className:I.modalDialogActions,children:[s.jsx("button",{type:"button",onClick:()=>W(null),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>or(be.business_id),className:`${I.standardButton} ${I.standardButtonDanger}`,children:"Delete Business"})]})]})}),xe&&s.jsx("div",{className:I.modalOverlay,children:s.jsxs("div",{className:I.modalDialog,children:[s.jsx("h2",{className:I.modalDialogTitle,children:"Delete Sale"}),s.jsx("p",{className:I.deleteConfirmationWarning,children:"Are you sure you want to delete this sale?"}),s.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"8px",margin:"16px 0",border:"1px solid #e9ecef"},children:[s.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:xe.side_business_items?.name||"Unknown Item"}),s.jsx("p",{style:{margin:"0 0 4px 0",color:"#6c757d",fontSize:"14px"},children:xe.side_business_items?.side_businesses?.name||"Unknown Business"}),s.jsxs("p",{style:{margin:"0 0 4px 0",color:"#6c757d",fontSize:"14px"},children:["Quantity: ",xe.quantity,"  Total: ",xe.total_amount]}),s.jsxs("p",{style:{margin:"0",color:"#6c757d",fontSize:"14px"},children:[new Date(xe.date_time).toLocaleDateString()," at ",new Date(xe.date_time).toLocaleTimeString()]})]}),s.jsx("p",{className:I.deleteConfirmationWarningText,children:"This will permanently delete the sale record. This action cannot be undone."}),s.jsxs("div",{className:I.modalDialogActions,children:[s.jsx("button",{type:"button",onClick:()=>C(null),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>Ut(xe.sale_id),className:`${I.standardButton} ${I.standardButtonDanger}`,children:"Delete Sale"})]})]})}),z&&Z.item_id&&s.jsx("div",{className:I.modalOverlay,style:{zIndex:2e3},children:s.jsxs("div",{className:I.modalDialog,children:[s.jsx("h2",{className:I.modalDialogTitle,children:"Restock Item"}),s.jsxs("div",{className:I.restockInfo,children:[s.jsx("p",{className:I.restockItemName,children:a.find(se=>se.item_id===Z.item_id)?.name}),s.jsxs("p",{className:I.restockCurrentStock,children:["Current Stock: ",s.jsx("strong",{children:Z.current_stock})]})]}),s.jsxs("form",{onSubmit:le,className:I.modalDialogForm,children:[s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Restock Quantity"}),s.jsx("input",{type:"number",min:"1",required:!0,value:Z.restock_quantity,onChange:se=>ge(ke=>({...ke,restock_quantity:se.target.value})),className:I.formFieldInput,placeholder:"Enter quantity to add"})]}),s.jsx("div",{className:I.restockPreview,children:s.jsxs("p",{className:I.restockPreviewText,children:["New stock will be: ",s.jsx("strong",{children:Z.current_stock+(parseInt(Z.restock_quantity)||0)})]})}),s.jsxs("div",{className:I.modalDialogActions,children:[s.jsx("button",{type:"button",onClick:()=>H(!1),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),s.jsxs("button",{type:"submit",className:`${I.standardButton} ${I.standardButtonSuccess}`,children:[s.jsx("i",{className:"fas fa-boxes-stacked",style:{marginRight:"8px"}}),"Restock Item"]})]})]})]})}),Fe&&Re&&s.jsx("div",{className:I.modalOverlay,style:{zIndex:2e3},children:s.jsxs("div",{className:I.modalDialog,children:[s.jsx("h2",{className:I.modalDialogTitle,children:"Edit Item"}),s.jsxs("form",{onSubmit:Ot,className:I.modalDialogForm,children:[s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Item Name"}),s.jsx("input",{type:"text",required:!0,value:Re.name,onChange:se=>Oe(ke=>ke?{...ke,name:se.target.value}:null),className:I.formFieldInput,placeholder:"Enter item name"})]}),s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Price ()"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:Re.price||"",onChange:se=>Oe(ke=>ke?{...ke,price:se.target.value?parseFloat(se.target.value):null}:null),className:I.formFieldInput,placeholder:"Enter price (leave empty for custom pricing)"}),s.jsx("small",{className:I.formFieldHelp,children:"Leave empty for service items with custom pricing"})]}),s.jsxs("div",{className:I.formFieldGroup,children:[s.jsx("label",{className:I.formFieldLabel,children:"Notes"}),s.jsx("textarea",{value:Re.notes||"",onChange:se=>Oe(ke=>ke?{...ke,notes:se.target.value}:null),className:I.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details...",maxLength:500}),s.jsx("small",{className:I.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details"})]}),s.jsxs("div",{className:I.modalDialogActions,children:[s.jsx("button",{type:"button",onClick:()=>qe(!1),className:`${I.standardButton} ${I.standardButtonSecondary}`,children:"Cancel"}),s.jsxs("button",{type:"submit",className:`${I.standardButton} ${I.standardButtonPrimary}`,children:[s.jsx("i",{className:"fas fa-save",style:{marginRight:"8px"}}),"Update Item"]})]})]})]})})]})},p6=()=>{const{data:e,isLoading:t,error:r}=iu(),a=E0(),o=Qm({mutationFn:async d=>{const{error:f}=await Ne.from("sales").update({partial_payment:!1,notes:null}).eq("sale_id",d);if(f)throw f},onSuccess:()=>{a.invalidateQueries({queryKey:["salesData"]})}}),c=Qm({mutationFn:async d=>{const{error:f}=await Ne.from("sale_items").delete().eq("sale_id",d);if(f)throw f;const{error:h}=await Ne.from("sales").delete().eq("sale_id",d);if(h)throw h},onSuccess:()=>{a.invalidateQueries({queryKey:["salesData"]})}});return{transactions:e?.sales||[],loading:t,error:r?.message||null,fetchTransactions:()=>a.invalidateQueries({queryKey:["salesData"]}),deleteTransaction:c.mutateAsync,resolvePartialPayment:o.mutateAsync}},Ih=({children:e,maxWidth:t="1400px"})=>s.jsx("div",{style:{minHeight:"100vh",background:"#f8fafc",fontFamily:"Poppins, sans-serif",padding:"20px"},children:s.jsx("div",{style:{maxWidth:t,margin:"0 auto",background:"#ffffff",borderRadius:"12px",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:e})}),g6=({title:e,subtitle:t,icon:r,children:a})=>s.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:a?"16px":"0"},children:[s.jsxs("div",{children:[s.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[r&&s.jsx("i",{className:r,style:{marginRight:"12px",color:"#7d8d86"}}),e]}),t&&s.jsx("p",{style:{fontSize:"16px",color:"#6b7280",margin:"0"},children:t})]}),a]})}),hv=({children:e,className:t="",style:r={},padding:a="md",background:o="white",hover:c=!1})=>{const d={borderRadius:"12px",border:"1px solid #e5e7eb",transition:c?"all 0.2s ease":"none",...r},f={white:{background:"#ffffff"},gray:{background:"#f9fafb"}},h={sm:{padding:"12px"},md:{padding:"20px"},lg:{padding:"24px"}},p={...d,...f[o],...h[a]};return s.jsx("div",{className:t,style:p,onMouseEnter:x=>{c&&(x.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",x.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:x=>{c&&(x.currentTarget.style.boxShadow="none",x.currentTarget.style.transform="translateY(0)")},children:e})},x6=({searchTerm:e,setSearchTerm:t,paymentFilter:r,setPaymentFilter:a,dateFilter:o,setDateFilter:c,selectedDate:d,showCalendar:f,setShowCalendar:h,itemsPerPage:p,setItemsPerPage:x,onCalendarDateSelect:y,generateCalendarDays:v,calendarDate:b,setCalendarDate:w,partialPaymentFilter:_,setPartialPaymentFilter:S})=>s.jsxs(hv,{background:"gray",padding:"md",children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",alignItems:"end"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Search Transactions"}),s.jsx("input",{type:"text",placeholder:"Search by ID, customer, cashier...",value:e,onChange:N=>t(N.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Method"}),s.jsxs("select",{value:r,onChange:N=>a(N.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[s.jsx("option",{value:"all",children:"All Methods"}),s.jsx("option",{value:"cash",children:"Cash"}),s.jsx("option",{value:"card",children:"Card"}),s.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Type"}),s.jsxs("select",{value:_,onChange:N=>S(N.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[s.jsx("option",{value:"all",children:"All Payments"}),s.jsx("option",{value:"full",children:"Full Payments"}),s.jsx("option",{value:"partial",children:"Partial Payments"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Date Range"}),s.jsxs("select",{value:o,onChange:N=>c(N.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[s.jsx("option",{value:"all",children:"All Time"}),s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"week",children:"Last 7 Days"}),s.jsx("option",{value:"month",children:"Last 30 Days"}),s.jsx("option",{value:"custom",children:"Custom Date"})]})]}),o==="custom"&&s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Select Date"}),s.jsx("button",{onClick:()=>h(!f),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff",cursor:"pointer",textAlign:"left"},children:d?new Date(d).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Select a date"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Items Per Page"}),s.jsxs("select",{value:p,onChange:N=>x(Number(N.target.value)),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[s.jsx("option",{value:10,children:"10"}),s.jsx("option",{value:25,children:"25"}),s.jsx("option",{value:50,children:"50"}),s.jsx("option",{value:100,children:"100"})]})]})]}),f&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[s.jsx("button",{onClick:()=>w(new Date(b.getFullYear(),b.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:s.jsx("i",{className:"fa-solid fa-chevron-left"})}),s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:b.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>w(new Date(b.getFullYear(),b.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:s.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(N=>s.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:N},N))}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:v().map((N,R)=>{const O=N.getMonth()===b.getMonth(),P=N.toDateString()===new Date().toDateString(),J=d&&N.toDateString()===new Date(d).toDateString();return s.jsx("button",{onClick:()=>y(N),style:{background:J?"#7d8d86":"transparent",color:J?"#f1f0e4":O?"#3e3f29":"#bca88d",border:P?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:O?1:.5},children:N.getDate()},R)})}),s.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:s.jsx("button",{onClick:()=>y(new Date),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer"},children:"Today"})})]})})]}),Ll=({children:e,onClick:t,type:r="button",variant:a="primary",size:o="md",disabled:c=!1,className:d="",style:f={}})=>{const h={border:"none",borderRadius:"6px",cursor:c?"not-allowed":"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500",...f},p={primary:{background:"#7d8d86",color:"#ffffff"},secondary:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db"},danger:{background:"#3e3f29",color:"#f1f0e4"},success:{background:"#10b981",color:"#ffffff"}},x={primary:{background:"#6a7a73"},secondary:{background:"#e5e7eb"},danger:{background:"#2a2b1f"},success:{background:"#059669"}},y={sm:{padding:"6px 12px",fontSize:"12px"},md:{padding:"8px 16px",fontSize:"14px"},lg:{padding:"12px 24px",fontSize:"16px"}},v={...h,...p[a],...y[o],opacity:c?.6:1};return s.jsx("button",{type:r,onClick:t,disabled:c,className:d,style:v,onMouseEnter:b=>{c||Object.assign(b.currentTarget.style,x[a])},onMouseLeave:b=>{c||Object.assign(b.currentTarget.style,p[a])},children:e})},m6=({transaction:e,onTransactionClick:t,onDeleteTransaction:r,onResolvePartialPayment:a})=>{const o=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),c=f=>new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),d=f=>{switch(f.toLowerCase()){case"cash":return"fa-solid fa-money-bill";case"card":return"fa-solid fa-credit-card";case"mobile_money":return"fa-solid fa-mobile";default:return"fa-solid fa-money-bill"}};return s.jsxs("div",{className:"transaction-card",onClick:()=>t(e.sale_id),style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",background:e.partial_payment?"#fef2f2":"#ffffff",borderRadius:"8px",border:e.partial_payment?"2px solid #dc2626":"2px solid #374151",cursor:"pointer",transition:"all 0.2s ease",position:"relative",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",marginBottom:"12px"},onMouseEnter:f=>{const h=f.currentTarget;h.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",h.style.transform="translateY(-2px)",h.style.border=e.partial_payment?"2px solid #dc2626":"2px solid #374151"},onMouseLeave:f=>{const h=f.currentTarget;h.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.15)",h.style.transform="translateY(0)",h.style.border=e.partial_payment?"2px solid #dc2626":"2px solid #374151"},children:[s.jsxs("div",{style:{width:"60px",textAlign:"center"},children:[s.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#7d8d86",background:"#f3f4f6",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:["#",e.sale_id.toString().slice(-6)]}),e.partial_payment&&s.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"#ffffff",background:"#dc2626",padding:"2px 6px",borderRadius:"3px",marginTop:"4px",display:"inline-block"},children:"PARTIAL"})]}),s.jsx("div",{style:{minWidth:"140px",fontSize:"14px",color:"#6b7280"},children:c(e.datetime)}),s.jsx("div",{style:{flex:1,minWidth:"120px",fontSize:"14px",color:"#374151",fontWeight:"500"},children:e.customer_name}),s.jsx("div",{style:{minWidth:"100px",fontSize:"14px",color:"#6b7280"},children:e.cashier_name}),s.jsxs("div",{style:{minWidth:"120px",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"#374151"},children:[s.jsx("i",{className:d(e.payment_method),style:{color:"#7d8d86"}}),s.jsx("span",{style:{textTransform:"capitalize"},children:e.payment_method.replace("_"," ")})]}),s.jsx("div",{style:{minWidth:"120px",textAlign:"right",fontSize:"16px",fontWeight:"600",color:e.partial_payment?"#dc2626":"#059669"},children:e.partial_payment?s.jsxs("div",{children:[s.jsxs("div",{style:{fontSize:"14px",color:"#dc2626"},children:["Paid: ",o(e.partial_amount||0)]}),s.jsxs("div",{style:{fontSize:"12px",color:"#dc2626"},children:["Owed: ",o(e.remaining_amount||0)]})]}):o(e.total_amount)}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.partial_payment&&a&&s.jsxs(Ll,{variant:"primary",size:"sm",onClick:f=>{f.stopPropagation(),a(e.sale_id)},children:[s.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px"}}),"Resolve"]}),s.jsxs(Ll,{variant:"danger",size:"sm",onClick:f=>{f.stopPropagation(),r(e.sale_id)},children:[s.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"10px"}}),"Delete"]}),s.jsx("div",{style:{color:"#7d8d86"},children:s.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]})},y6=({currentPage:e,totalPages:t,onPageChange:r,startIndex:a,endIndex:o,totalItems:c})=>{if(t<=1)return null;const d=()=>{const f=[];if(t<=5)for(let p=1;p<=t;p++)f.push(p);else if(e<=3){for(let p=1;p<=4;p++)f.push(p);f.push("..."),f.push(t)}else if(e>=t-2){f.push(1),f.push("...");for(let p=t-3;p<=t;p++)f.push(p)}else{f.push(1),f.push("...");for(let p=e-1;p<=e+1;p++)f.push(p);f.push("..."),f.push(t)}return f};return s.jsxs("div",{style:{background:"#f9fafb",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[s.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("i",{className:"fa-solid fa-list"}),s.jsxs("span",{children:["Showing ",a+1,"-",Math.min(o,c)," of ",c," transactions"]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsxs(Ll,{variant:"secondary",size:"sm",onClick:()=>r(e-1),disabled:e===1,children:[s.jsx("i",{className:"fa-solid fa-chevron-left"}),"Previous"]}),s.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:d().map((f,h)=>s.jsx(py.Fragment,{children:f==="..."?s.jsx("span",{style:{padding:"8px 12px",color:"#6b7280",fontSize:"14px"},children:"..."}):s.jsx(Ll,{variant:e===f?"primary":"secondary",size:"sm",onClick:()=>r(f),style:{minWidth:"40px"},children:f})},h))}),s.jsxs(Ll,{variant:"secondary",size:"sm",onClick:()=>r(e+1),disabled:e===t,children:["Next",s.jsx("i",{className:"fa-solid fa-chevron-right"})]})]})]})},v6=({isOpen:e,onClose:t,selectedDate:r,onDateSelect:a,onTodaySelect:o,calendarDate:c,onCalendarDateChange:d})=>{const f=(h,p)=>{const x=new Date(h,p,1),y=new Date(x);y.setDate(y.getDate()-x.getDay());const v=[],b=new Date(y);for(let w=0;w<42;w++)v.push(new Date(b)),b.setDate(b.getDate()+1);return v};return e?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[s.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},children:c.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s.jsx("button",{onClick:()=>d(new Date(c.getFullYear(),c.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:s.jsx("i",{className:"fa-solid fa-chevron-left"})}),s.jsx("button",{onClick:()=>d(new Date(c.getFullYear(),c.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:s.jsx("i",{className:"fa-solid fa-chevron-right"})}),s.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"20px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:""})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>s.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:h},h)),f(c.getFullYear(),c.getMonth()).map((h,p)=>{const x=h.getMonth()===c.getMonth(),y=new Date,v=new Date(y.getFullYear(),y.getMonth(),y.getDate()),b=new Date(h.getFullYear(),h.getMonth(),h.getDate()),w=new Date(r.getFullYear(),r.getMonth(),r.getDate()),_=b.getTime()===v.getTime(),S=b.getTime()===w.getTime();return s.jsx("button",{onClick:()=>a(h),style:{background:S?"#7d8d86":"transparent",color:S?"#ffffff":x?"#1f2937":"#9ca3af",border:_?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:x?1:.5},onMouseEnter:N=>{if(!S){const R=N.currentTarget;R.style.background="#f3f4f6",R.style.color="#1f2937"}},onMouseLeave:N=>{if(!S){const R=N.currentTarget;R.style.background="transparent",R.style.color=x?"#1f2937":"#9ca3af"}},children:h.getDate()},p)})]}),s.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:s.jsx("button",{onClick:o,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:h=>{const p=h.currentTarget;p.style.background="#6a7a73"},onMouseLeave:h=>{const p=h.currentTarget;p.style.background="#7d8d86"},children:"Today"})})]})}):null},b6=()=>{const e=Ba(),{user:t}=on(),{transactions:r,loading:a,error:o,deleteTransaction:c,resolvePartialPayment:d}=p6(),[f,h]=T.useState(""),[p,x]=T.useState("all"),[y,v]=T.useState("all"),[b,w]=T.useState(null),[_,S]=T.useState("all"),[N,R]=T.useState(!1),[O,P]=T.useState(new Date),[J,ae]=T.useState(()=>{const Re=new Date;return new Date(Re.getFullYear(),Re.getMonth(),Re.getDate())}),[Y,F]=T.useState(1),[Q,oe]=T.useState(25),[q]=T.useState("datetime"),[de]=T.useState("desc"),te=Re=>Re.filter(Oe=>{const et=!f||Oe.sale_id.toString().includes(f)||Oe.customer_name?.toLowerCase().includes(f.toLowerCase())||Oe.cashier_name?.toLowerCase().includes(f.toLowerCase()),ve=p==="all"||Oe.payment_method===p,Ge=()=>_==="all"?!0:_==="partial"?Oe.partial_payment===!0:_==="full"?!Oe.partial_payment:!0,G=()=>{if(b){const at=new Date(Oe.datetime),vt=new Date(at.getFullYear(),at.getMonth(),at.getDate()),[bt,Ie,nt]=b.split("-").map(Number),mt=new Date(bt,Ie-1,nt);return vt.getTime()===mt.getTime()}if(y==="all")return!0;const Ce=new Date,rt=new Date(Oe.datetime),Be=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate()),gt=new Date(rt.getFullYear(),rt.getMonth(),rt.getDate());switch(y){case"today":return gt.getTime()===Be.getTime();case"week":const at=new Date(Ce.getTime()-10080*60*1e3);return rt>=at;case"month":const vt=new Date(Ce.getTime()-720*60*60*1e3);return rt>=vt;default:return!0}};return et&&ve&&Ge()&&G()}),ne=Re=>[...Re].sort((Oe,et)=>{let ve=Oe[q],Ge=et[q];return q==="datetime"&&(ve=new Date(ve).getTime(),Ge=new Date(Ge).getTime()),de==="asc"?ve>Ge?1:-1:ve<Ge?1:-1}),me=te(r),re=ne(me),be=Math.ceil(re.length/Q),W=(Y-1)*Q,xe=W+Q,C=re.slice(W,xe),X=()=>{const Re=O.getFullYear(),Oe=O.getMonth(),et=new Date(Re,Oe,1),ve=new Date(et);ve.setDate(ve.getDate()-et.getDay());const Ge=[];for(let G=0;G<42;G++){const Ce=new Date(ve);Ce.setDate(ve.getDate()+G),Ge.push(Ce)}return Ge},E=Re=>{const Oe=new Date(Re.getFullYear(),Re.getMonth(),Re.getDate());ae(Oe);const et=Oe.getFullYear(),ve=String(Oe.getMonth()+1).padStart(2,"0"),Ge=String(Oe.getDate()).padStart(2,"0"),G=`${et}-${ve}-${Ge}`;w(G),v("custom"),R(!1)},z=()=>{const Re=new Date,Oe=new Date(Re.getFullYear(),Re.getMonth(),Re.getDate());ae(Oe);const et=Oe.getFullYear(),ve=String(Oe.getMonth()+1).padStart(2,"0"),Ge=String(Oe.getDate()).padStart(2,"0"),G=`${et}-${ve}-${Ge}`;w(G),v("custom"),R(!1)},H=Re=>{e(`/transaction/${Re}`)},Z=async Re=>{window.confirm("Are you sure you want to delete this transaction? This action cannot be undone and will restore the stock for all items in this transaction.")&&await c(Re)&&alert("Transaction deleted successfully!")},ge=async Re=>{window.confirm("Are you sure you want to mark this partial payment as resolved? This will update the transaction to show it as fully paid.")&&await d(Re)&&alert("Partial payment resolved successfully!")},Fe=Re=>{F(Re),window.scrollTo({top:0,behavior:"smooth"})},qe=Re=>{oe(Re),F(1)};return T.useEffect(()=>{F(1)},[f,p,y,b,q,de]),a?s.jsx(Ih,{children:s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:s.jsxs("div",{style:{fontSize:"20px",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transactions..."]})})}):o?s.jsx(Ih,{children:s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:s.jsxs("div",{style:{fontSize:"18px",color:"#ef4444",textAlign:"center"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"12px",display:"block"}}),o]})})}):s.jsxs(Ih,{children:[s.jsx(g6,{title:"Transactions",subtitle:"View and manage all sales transactions",icon:"fa-solid fa-receipt",children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[s.jsxs("div",{onClick:()=>R(!0),style:{background:"#3e3f29",border:"1px solid #1a1a1a",borderRadius:"8px",padding:"12px 16px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[s.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),s.jsx("span",{style:{color:"#bca88d"},children:J.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#1a1a1a",fontSize:"14px",flexWrap:"wrap"},children:[s.jsx("i",{className:"fa-solid fa-receipt"}),s.jsxs("span",{children:["Showing ",W+1,"-",Math.min(xe,re.length)," of ",re.length," transactions",b&&s.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","on ",new Date(b).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),y!=="all"&&!b&&s.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","(",y==="today"?"Today":y==="week"?"Last 7 days":y==="month"?"Last 30 days":y,")"]})]})]})]})}),s.jsxs("div",{style:{padding:"24px 32px",flex:1},children:[s.jsx(x6,{searchTerm:f,setSearchTerm:h,paymentFilter:p,setPaymentFilter:x,dateFilter:y,setDateFilter:v,selectedDate:b,showCalendar:N,setShowCalendar:R,itemsPerPage:Q,setItemsPerPage:qe,onCalendarDateSelect:E,generateCalendarDays:X,calendarDate:O,setCalendarDate:P,partialPaymentFilter:_,setPartialPaymentFilter:S}),s.jsx(hv,{children:C.length>0?s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:C.map(Re=>s.jsx(m6,{transaction:Re,onTransactionClick:H,onDeleteTransaction:Z,onResolvePartialPayment:ge},Re.sale_id))}):s.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[s.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",display:"block",color:"#d1d5db"}}),s.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",margin:"0 0 8px 0"},children:"No transactions found"}),s.jsx("p",{style:{fontSize:"14px",margin:0},children:f||p!=="all"||_!=="all"||y!=="all"||J?"Try adjusting your filters to see more results.":"No transactions have been recorded yet."})]})}),s.jsx(y6,{currentPage:Y,totalPages:be,onPageChange:Fe,startIndex:W,endIndex:xe,totalItems:re.length}),s.jsx(v6,{isOpen:N,onClose:()=>R(!1),selectedDate:J,onDateSelect:E,onTodaySelect:z,calendarDate:O,onCalendarDateChange:P})]})]})},_6=()=>{const{transactionId:e}=BS(),t=Ba(),[r,a]=T.useState(null),[o,c]=T.useState([]),[d,f]=T.useState(!0),[h,p]=T.useState(!1),[x,y]=T.useState(!1),[v,b]=T.useState({payment_method:"",customer_id:null,notes:""}),[w,_]=T.useState([]),[S,N]=T.useState({});T.useEffect(()=>{e&&(R(),O())},[e]);const R=async()=>{try{f(!0);const ne=parseInt(e?.replace("TXN-","")||"0");if(!ne){console.error("Invalid transaction ID"),t("/sales");return}const{data:me,error:re}=await Ne.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",ne).single();if(re){console.error("Error fetching transaction:",re),t("/sales");return}const be={...me,customer_name:me.customers?.name||null,cashier_name:me.users?.username||null};a(be);const{data:W,error:xe}=await Ne.from("sale_items").select(`
          *,
          products (
            name,
            category,
            weight_unit,
            price_per_unit,
            is_weighted,
            image_url
          )
        `).eq("sale_id",ne);if(xe)console.error("Error fetching transaction items:",xe);else{const C=(W||[]).map(X=>(X.products?.is_weighted&&console.log("Weighted item data:",{name:X.products.name,weight:X.weight,weight_unit:X.products.weight_unit,price_per_unit:X.products.price_per_unit,calculated_price:X.calculated_price,price_each:X.price_each}),{sale_item_id:X.sale_item_id,product_id:X.product_id,quantity:X.quantity,unit_price:X.price_each,total_price:X.calculated_price||(X.products?.is_weighted&&X.weight&&X.products?.price_per_unit?X.weight*X.products.price_per_unit:X.quantity*X.price_each),product_name:X.products?.name||"Unknown Product",product_category:X.products?.category||"Unknown Category",product_image:X.products?.image_url||null,weight:X.weight||void 0,weight_unit:X.products?.weight_unit||void 0,price_per_unit:X.products?.price_per_unit||void 0,is_weighted:X.products?.is_weighted||!1}));c(C)}}catch(ne){console.error("Error fetching transaction details:",ne),t("/sales")}finally{f(!1)}},O=async()=>{try{const{data:ne,error:me}=await Ne.from("customers").select("id, name").order("name");me?console.error("Error fetching customers:",me):_(ne||[])}catch(ne){console.error("Error fetching customers:",ne)}},P=()=>{t("/dashboard")},J=()=>{t(`/sales?transaction=${e}`)},ae=async()=>{if(r)try{y(!0);const ne=parseInt(e?.replace("TXN-","")||"0"),{error:me}=await Ne.from("sales").update({payment_method:v.payment_method,customer_id:v.customer_id,notes:v.notes}).eq("sale_id",ne);if(me){console.error("Error updating transaction:",me),alert("Failed to update transaction. Please try again.");return}await R(),p(!1),alert("Transaction updated successfully!")}catch(ne){console.error("Error saving transaction:",ne),alert("Failed to save changes. Please try again.")}finally{y(!1)}},Y=()=>{p(!1),b({payment_method:"",customer_id:null,notes:""}),N({})},F=(ne,me)=>{me<0||N(re=>({...re,[ne]:me}))},Q=async ne=>{if(confirm("Are you sure you want to remove this item from the transaction?"))try{const{error:me}=await Ne.from("sale_items").delete().eq("sale_item_id",ne);if(me){console.error("Error removing item:",me),alert("Failed to remove item. Please try again.");return}await R(),alert("Item removed successfully!")}catch(me){console.error("Error removing item:",me),alert("Failed to remove item. Please try again.")}},oe=async(ne,me)=>{if(me<=0){Q(ne);return}try{const re=o.find(xe=>xe.sale_item_id===ne);if(!re)return;const be=me*re.unit_price,{error:W}=await Ne.from("sale_items").update({quantity:me,total_price:be}).eq("sale_item_id",ne);if(W){console.error("Error updating item quantity:",W),alert("Failed to update item quantity. Please try again.");return}await R(),N(xe=>{const C={...xe};return delete C[ne],C}),alert("Item quantity updated successfully!")}catch(re){console.error("Error updating item quantity:",re),alert("Failed to update item quantity. Please try again.")}},q=async()=>{if(!(!r||!r.partial_payment||!window.confirm(`Complete payment for Transaction #${e}?

This will mark the remaining balance of ${r.remaining_amount?.toFixed(2)||"0.00"} as paid.

The transaction will be marked as fully paid.`)))try{const me=parseInt(e?.replace("TXN-","")||"0"),{error:re}=await Ne.from("sales").update({partial_payment:!1,partial_amount:null,remaining_amount:null,partial_notes:null,notes:r.notes?`${r.notes}

Payment completed on ${new Date().toLocaleString()}`:`Payment completed on ${new Date().toLocaleString()}`}).eq("sale_id",me);if(re){console.error("Error completing payment:",re),alert("Failed to complete payment. Please try again.");return}alert("Payment completed successfully!"),await R()}catch(me){console.error("Error completing payment:",me),alert("Failed to complete payment. Please try again.")}},de=async()=>{if(!(!r||!window.confirm(`Are you sure you want to delete Transaction #${e}?

This will:
 Remove all items from this transaction
 Restore stock quantities for all items
 Delete the transaction record

This action cannot be undone!`)))try{const me=parseInt(e?.replace("TXN-","")||"0");for(const W of o){const{data:xe,error:C}=await Ne.from("products").select("stock_quantity").eq("product_id",W.product_id).single();if(C){console.error("Error fetching product stock:",C);continue}const{error:X}=await Ne.from("products").update({stock_quantity:xe.stock_quantity+W.quantity,last_updated:new Date().toISOString()}).eq("product_id",W.product_id);X&&console.error("Error restoring stock:",X);const{error:E}=await Ne.from("inventory_movements").insert([{product_id:W.product_id,quantity_change:W.quantity,movement_type:"Transaction Deletion",reference_id:me,notes:`Stock restored from deleted transaction #${e}`}]);E&&console.error("Error creating inventory movement:",E)}const{error:re}=await Ne.from("sale_items").delete().eq("sale_id",me);if(re){console.error("Error deleting sale items:",re),alert("Failed to delete transaction items. Please try again.");return}const{error:be}=await Ne.from("sales").delete().eq("sale_id",me);if(be){console.error("Error deleting sale:",be),alert("Failed to delete transaction. Please try again.");return}alert("Transaction deleted successfully!"),t("/dashboard")}catch(me){console.error("Error deleting transaction:",me),alert("Failed to delete transaction. Please try again.")}},te=ne=>new Date(ne).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return d?s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:s.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transaction details..."]})}):r?s.jsxs("div",{style:{padding:"0"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[s.jsx("button",{onClick:P,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease"},onMouseEnter:ne=>{ne.target.style.background="#7d8d86",ne.target.style.color="#f1f0e4"},onMouseLeave:ne=>{ne.target.style.background="none",ne.target.style.color="#7d8d86"},children:s.jsx("i",{className:"fa-solid fa-arrow-left"})}),s.jsxs("div",{children:[s.jsxs("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:["Transaction #",e]}),s.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:te(r.datetime)})]})]}),s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsxs("button",{onClick:de,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ne=>{ne.target.style.background="#dc2626"},onMouseLeave:ne=>{ne.target.style.background="#ef4444"},children:[s.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"14px"}}),"Delete Transaction"]}),h?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:ae,disabled:x,style:{background:x?"#9ca3af":"#10b981",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ne=>{x||(ne.target.style.background="#059669")},onMouseLeave:ne=>{x||(ne.target.style.background="#10b981")},children:[s.jsx("i",{className:`fa-solid ${x?"fa-spinner":"fa-save"}`,style:{fontSize:"14px",animation:x?"spin 1s linear infinite":"none"}}),x?"Saving...":"Save"]}),s.jsxs("button",{onClick:Y,disabled:x,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ne=>{x||(ne.target.style.background="#dc2626")},onMouseLeave:ne=>{x||(ne.target.style.background="#ef4444")},children:[s.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"14px"}}),"Cancel"]})]}):s.jsxs("button",{onClick:J,style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:ne=>{ne.target.style.background="#bca88d"},onMouseLeave:ne=>{ne.target.style.background="#7d8d86"},children:[s.jsx("i",{className:"fa-solid fa-edit",style:{fontSize:"14px"}}),"Edit"]})]})]}),s.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px"},children:[s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Total Amount"}),s.jsxs("p",{style:{fontSize:"28px",fontWeight:"bold",color:"#3e3f29",margin:0},children:["",r.total_amount.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Payment Method"}),h?s.jsxs("select",{value:v.payment_method,onChange:ne=>b({...v,payment_method:ne.target.value}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[s.jsx("option",{value:"cash",children:"Cash"}),s.jsx("option",{value:"card",children:"Card"}),s.jsx("option",{value:"credit",children:"Credit"})]}):s.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0,textTransform:"capitalize"},children:r.payment_method})]}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Customer"}),h?s.jsxs("select",{value:v.customer_id||"",onChange:ne=>b({...v,customer_id:ne.target.value?parseInt(ne.target.value):null}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[s.jsx("option",{value:"",children:"Walk-in Customer"}),w.map(ne=>s.jsx("option",{value:ne.id,children:ne.name},ne.id))]}):s.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:r.customer_name||"Walk-in Customer"})]}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Cashier"}),s.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:r.cashier_name||"System"})]}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Items Count"}),s.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:[o.length," items"]})]}),r.discount_applied&&r.discount_applied>0&&s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Discount Applied"}),s.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#ef4444",margin:0},children:["-",r.discount_applied.toFixed(2)]})]})]}),r.partial_payment&&s.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px",marginTop:"24px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("i",{className:"fa-solid fa-credit-card",style:{color:"#f59e0b",fontSize:"16px"}}),s.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#92400e",margin:0},children:"Partial Payment Transaction"})]}),s.jsxs("button",{onClick:q,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:ne=>{ne.target.style.background="#6b7280"},onMouseLeave:ne=>{ne.target.style.background="#7d8d86"},children:[s.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"12px"}}),"Complete Payment"]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Amount Paid"}),s.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#059669",margin:0},children:["",r.partial_amount?.toFixed(2)||"0.00"]})]}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Remaining Balance"}),s.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#dc2626",margin:0},children:["",r.remaining_amount?.toFixed(2)||"0.00"]})]}),r.partial_notes&&s.jsxs("div",{style:{gridColumn:"1 / -1"},children:[s.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Notes"}),s.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:0,fontStyle:"italic"},children:r.partial_notes})]})]})]}),s.jsxs("div",{style:{marginTop:"24px"},children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Notes"}),h?s.jsx("textarea",{value:v.notes,onChange:ne=>b({...v,notes:ne.target.value}),placeholder:"Add transaction notes...",style:{width:"100%",minHeight:"80px",fontSize:"14px",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"12px",resize:"vertical",fontFamily:"inherit"}}):s.jsx("p",{style:{fontSize:"16px",color:"#3e3f29",margin:0,fontStyle:r.notes?"normal":"italic",opacity:r.notes?1:.6},children:r.notes||"No notes added"})]})]}),s.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[s.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 24px 0",display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"20px"}}),"Transaction Items"]}),o.length>0?s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map((ne,me)=>{const re=S[ne.sale_item_id]!==void 0,be=re?S[ne.sale_item_id]:ne.quantity,W=ne.is_weighted&&ne.weight?ne.total_price||ne.weight*(ne.price_per_unit||0):be*ne.unit_price;return s.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease"},onMouseEnter:xe=>{xe.target.style.boxShadow="0 4px 12px rgba(62, 63, 41, 0.1)",xe.target.style.transform="translateY(-2px)"},onMouseLeave:xe=>{xe.target.style.boxShadow="none",xe.target.style.transform="translateY(0)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[s.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:ne.product_image?`url(${ne.product_image})`:ne.is_weighted?"#f59e0b":"#7d8d86",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"18px",fontWeight:"bold",position:"relative",border:"2px solid rgba(125, 141, 134, 0.2)"},children:!ne.product_image&&s.jsxs(s.Fragment,{children:[ne.is_weighted&&ne.weight?`${ne.weight}${ne.weight_unit}`:ne.quantity,ne.is_weighted&&s.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",width:"16px",height:"16px",borderRadius:"50%",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"#ffffff"},children:""})]})}),h&&!ne.is_weighted&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("button",{onClick:()=>F(ne.sale_item_id,be-1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),s.jsx("div",{style:{minWidth:"48px",height:"48px",borderRadius:"12px",background:re?"#fef3c7":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:re?"#92400e":"#f1f0e4",fontSize:"18px",fontWeight:"bold",border:re?"2px solid #f59e0b":"none"},children:be}),s.jsx("button",{onClick:()=>F(ne.sale_item_id,be+1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#10b981",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),re&&s.jsx("button",{onClick:()=>oe(ne.sale_item_id,be),style:{padding:"6px 12px",borderRadius:"6px",background:"#3b82f6",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer"},children:"Save"}),s.jsx("button",{onClick:()=>Q(ne.sale_item_id),style:{padding:"6px 12px",borderRadius:"6px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer",marginLeft:"8px"},children:"Remove"})]}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:ne.product_name}),s.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[ne.product_category,"  ",ne.is_weighted&&ne.weight&&ne.weight_unit&&ne.price_per_unit?`${ne.weight} ${ne.weight_unit}  ${ne.price_per_unit.toFixed(2)}/${ne.weight_unit}`:`${ne.unit_price.toFixed(2)} each`]}),ne.is_weighted&&h&&s.jsx("p",{style:{fontSize:"12px",color:"#f59e0b",margin:"4px 0 0 0",fontStyle:"italic"},children:"Weighted items cannot be edited after sale"})]})]}),s.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:re?"#f59e0b":"#3e3f29"},children:["",W.toFixed(2)]})]},me)})}):s.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#7d8d86"},children:[s.jsx("i",{className:"fa-solid fa-box",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),s.jsx("p",{style:{fontSize:"16px",margin:0},children:"No items found for this transaction"})]})]})]}):s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:s.jsxs("div",{style:{textAlign:"center",color:"#7d8d86"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),s.jsx("p",{style:{fontSize:"16px",margin:0},children:"Transaction not found"})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var zd={};zd.version="0.18.5";var pv=1252,S6=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],gv=function(e){S6.indexOf(e)!=-1&&(pv=e)};function w6(){gv(1252)}var Yl=function(e){gv(e)};function T6(){Yl(1200),w6()}var jd=function(t){return String.fromCharCode(t)},C1=function(t){return String.fromCharCode(t)},Ud,Bs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Kl(e){for(var t="",r=0,a=0,o=0,c=0,d=0,f=0,h=0,p=0;p<e.length;)r=e.charCodeAt(p++),c=r>>2,a=e.charCodeAt(p++),d=(r&3)<<4|a>>4,o=e.charCodeAt(p++),f=(a&15)<<2|o>>6,h=o&63,isNaN(a)?f=h=64:isNaN(o)&&(h=64),t+=Bs.charAt(c)+Bs.charAt(d)+Bs.charAt(f)+Bs.charAt(h);return t}function ss(e){var t="",r=0,a=0,o=0,c=0,d=0,f=0,h=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var p=0;p<e.length;)c=Bs.indexOf(e.charAt(p++)),d=Bs.indexOf(e.charAt(p++)),r=c<<2|d>>4,t+=String.fromCharCode(r),f=Bs.indexOf(e.charAt(p++)),a=(d&15)<<4|f>>2,f!==64&&(t+=String.fromCharCode(a)),h=Bs.indexOf(e.charAt(p++)),o=(f&3)<<6|h,h!==64&&(t+=String.fromCharCode(o));return t}var sr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),os=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function gi(e){return sr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function A1(e){return sr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var _a=function(t){return sr?os(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function ou(e){if(typeof ArrayBuffer>"u")return _a(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function sc(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function j6(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var hn=sr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:os(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),o=0;for(t=0,r=0;t<e.length;r+=o,++t)if(o=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function E6(e){for(var t=[],r=0,a=e.length+250,o=gi(e.length+255),c=0;c<e.length;++c){var d=e.charCodeAt(c);if(d<128)o[r++]=d;else if(d<2048)o[r++]=192|d>>6&31,o[r++]=128|d&63;else if(d>=55296&&d<57344){d=(d&1023)+64;var f=e.charCodeAt(++c)&1023;o[r++]=240|d>>8&7,o[r++]=128|d>>2&63,o[r++]=128|f>>6&15|(d&3)<<4,o[r++]=128|f&63}else o[r++]=224|d>>12&15,o[r++]=128|d>>6&63,o[r++]=128|d&63;r>a&&(t.push(o.slice(0,r)),r=0,o=gi(65535),a=65530)}return t.push(o.slice(0,r)),hn(t)}var Pl=/\u0000/g,Ed=/[\u0001-\u0006]/g;function bo(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Sa(e,t){var r=""+e;return r.length>=t?r:Mr("0",t-r.length)+r}function I0(e,t){var r=""+e;return r.length>=t?r:Mr(" ",t-r.length)+r}function Wd(e,t){var r=""+e;return r.length>=t?r:r+Mr(" ",t-r.length)}function k6(e,t){var r=""+Math.round(e);return r.length>=t?r:Mr("0",t-r.length)+r}function C6(e,t){var r=""+e;return r.length>=t?r:Mr("0",t-r.length)+r}var R1=Math.pow(2,32);function ho(e,t){if(e>R1||e<-R1)return k6(e,t);var r=Math.round(e);return C6(r,t)}function qd(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var N1=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Mh=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function A6(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Br={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},D1={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},R6={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Hd(e,t,r){for(var a=e<0?-1:1,o=e*a,c=0,d=1,f=0,h=1,p=0,x=0,y=Math.floor(o);p<t&&(y=Math.floor(o),f=y*d+c,x=y*p+h,!(o-y<5e-8));)o=1/(o-y),c=d,d=f,h=p,p=x;if(x>t&&(p>t?(x=h,f=c):(x=p,f=d)),!r)return[0,a*f,x];var v=Math.floor(a*f/x);return[v,a*f-v*x,x]}function kd(e,t,r){if(e>2958465||e<0)return null;var a=e|0,o=Math.floor(86400*(e-a)),c=0,d=[],f={D:a,T:o,u:86400*(e-a)-o,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(f.u)<1e-6&&(f.u=0),t&&t.date1904&&(a+=1462),f.u>.9999&&(f.u=0,++o==86400&&(f.T=o=0,++a,++f.D)),a===60)d=r?[1317,10,29]:[1900,2,29],c=3;else if(a===0)d=r?[1317,8,29]:[1900,1,0],c=6;else{a>60&&--a;var h=new Date(1900,0,1);h.setDate(h.getDate()+a-1),d=[h.getFullYear(),h.getMonth()+1,h.getDate()],c=h.getDay(),a<60&&(c=(c+6)%7),r&&(c=F6(h,d))}return f.y=d[0],f.m=d[1],f.d=d[2],f.S=o%60,o=Math.floor(o/60),f.M=o%60,o=Math.floor(o/60),f.H=o,f.q=c,f}var xv=new Date(1899,11,31,0,0,0),N6=xv.getTime(),D6=new Date(1900,2,1,0,0,0);function mv(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=D6&&(r+=1440*60*1e3),(r-(N6+(e.getTimezoneOffset()-xv.getTimezoneOffset())*6e4))/(1440*60*1e3)}function M0(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function O6(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function I6(e){var t=e<0?12:11,r=M0(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function M6(e){var t=M0(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function B6(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=I6(e):t===10?r=e.toFixed(10).substr(0,12):r=M6(e),M0(O6(r.toUpperCase()))}function c0(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):B6(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Ps(14,mv(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function F6(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function L6(e,t,r,a){var o="",c=0,d=0,f=r.y,h,p=0;switch(e){case 98:f=r.y+543;case 121:switch(t.length){case 1:case 2:h=f%100,p=2;break;default:h=f%1e4,p=4;break}break;case 109:switch(t.length){case 1:case 2:h=r.m,p=t.length;break;case 3:return Mh[r.m-1][1];case 5:return Mh[r.m-1][0];default:return Mh[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:h=r.d,p=t.length;break;case 3:return N1[r.q][0];default:return N1[r.q][1]}break;case 104:switch(t.length){case 1:case 2:h=1+(r.H+11)%12,p=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:h=r.H,p=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:h=r.M,p=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Sa(r.S,t.length):(a>=2?d=a===3?1e3:100:d=a===1?10:1,c=Math.round(d*(r.S+r.u)),c>=60*d&&(c=0),t==="s"?c===0?"0":""+c/d:(o=Sa(c,2+a),t==="ss"?o.substr(0,2):"."+o.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":h=r.D*24+r.H;break;case"[m]":case"[mm]":h=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":h=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}p=t.length===3?1:2;break;case 101:h=f,p=1;break}var x=p>0?Sa(h,p):"";return x}function Fs(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var yv=/%/g;function P6(e,t,r){var a=t.replace(yv,""),o=t.length-a.length;return ts(e,a,r*Math.pow(10,2*o))+Mr("%",o)}function z6(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return ts(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function vv(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+vv(e,-t);var o=e.indexOf(".");o===-1&&(o=e.indexOf("E"));var c=Math.floor(Math.log(t)*Math.LOG10E)%o;if(c<0&&(c+=o),r=(t/Math.pow(10,c)).toPrecision(a+1+(o+c)%o),r.indexOf("e")===-1){var d=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(d-r.length+c):r+="E+"+(d-c);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,o)+"."+r.substr(2+o),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(f,h,p,x){return h+p+x.substr(0,(o+c)%o)+"."+x.substr(c)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var bv=/# (\?+)( ?)\/( ?)(\d+)/;function U6(e,t,r){var a=parseInt(e[4],10),o=Math.round(t*a),c=Math.floor(o/a),d=o-c*a,f=a;return r+(c===0?"":""+c)+" "+(d===0?Mr(" ",e[1].length+1+e[4].length):I0(d,e[1].length)+e[2]+"/"+e[3]+Sa(f,e[4].length))}function W6(e,t,r){return r+(t===0?"":""+t)+Mr(" ",e[1].length+2+e[4].length)}var _v=/^#*0*\.([0#]+)/,Sv=/\).*[0#]/,wv=/\(###\) ###\\?-####/;function Rn(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function O1(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function I1(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function q6(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function H6(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function la(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Sv)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?la("n",a,r):"("+la("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return z6(e,t,r);if(t.indexOf("%")!==-1)return P6(e,t,r);if(t.indexOf("E")!==-1)return vv(t,r);if(t.charCodeAt(0)===36)return"$"+la(e,t.substr(t.charAt(1)==" "?2:1),r);var o,c,d,f,h=Math.abs(r),p=r<0?"-":"";if(t.match(/^00+$/))return p+ho(h,t.length);if(t.match(/^[#?]+$/))return o=ho(r,0),o==="0"&&(o=""),o.length>t.length?o:Rn(t.substr(0,t.length-o.length))+o;if(c=t.match(bv))return U6(c,h,p);if(t.match(/^#+0+$/))return p+ho(h,t.length-t.indexOf("0"));if(c=t.match(_v))return o=O1(r,c[1].length).replace(/^([^\.]+)$/,"$1."+Rn(c[1])).replace(/\.$/,"."+Rn(c[1])).replace(/\.(\d*)$/,function(w,_){return"."+_+Mr("0",Rn(c[1]).length-_.length)}),t.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),c=t.match(/^(0*)\.(#*)$/))return p+O1(h,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=t.match(/^#{1,3},##0(\.?)$/))return p+Fs(ho(h,0));if(c=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+la(e,t,-r):Fs(""+(Math.floor(r)+q6(r,c[1].length)))+"."+Sa(I1(r,c[1].length),c[1].length);if(c=t.match(/^#,#*,#0/))return la(e,t.replace(/^#,#*,/,""),r);if(c=t.match(/^([0#]+)(\\?-([0#]+))+$/))return o=bo(la(e,t.replace(/[\\-]/g,""),r)),d=0,bo(bo(t.replace(/\\/g,"")).replace(/[0#]/g,function(w){return d<o.length?o.charAt(d++):w==="0"?"0":""}));if(t.match(wv))return o=la(e,"##########",r),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var x="";if(c=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(c[4].length,7),f=Hd(h,Math.pow(10,d)-1,!1),o=""+p,x=ts("n",c[1],f[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),o+=x+c[2]+"/"+c[3],x=Wd(f[2],d),x.length<c[4].length&&(x=Rn(c[4].substr(c[4].length-x.length))+x),o+=x,o;if(c=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(c[1].length,c[4].length),7),f=Hd(h,Math.pow(10,d)-1,!0),p+(f[0]||(f[1]?"":"0"))+" "+(f[1]?I0(f[1],d)+c[2]+"/"+c[3]+Wd(f[2],d):Mr(" ",2*d+1+c[2].length+c[3].length));if(c=t.match(/^[#0?]+$/))return o=ho(r,0),t.length<=o.length?o:Rn(t.substr(0,t.length-o.length))+o;if(c=t.match(/^([#0?]+)\.([#0]+)$/)){o=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),d=o.indexOf(".");var y=t.indexOf(".")-d,v=t.length-o.length-y;return Rn(t.substr(0,y)+o+t.substr(t.length-v))}if(c=t.match(/^00,000\.([#0]*0)$/))return d=I1(r,c[1].length),r<0?"-"+la(e,t,-r):Fs(H6(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?Sa(0,3-w.length):"")+w})+"."+Sa(d,c[1].length);switch(t){case"###,##0.00":return la(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var b=Fs(ho(h,0));return b!=="0"?p+b:"";case"###,###.00":return la(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return la(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function $6(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return ts(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function G6(e,t,r){var a=t.replace(yv,""),o=t.length-a.length;return ts(e,a,r*Math.pow(10,2*o))+Mr("%",o)}function Tv(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Tv(e,-t);var o=e.indexOf(".");o===-1&&(o=e.indexOf("E"));var c=Math.floor(Math.log(t)*Math.LOG10E)%o;if(c<0&&(c+=o),r=(t/Math.pow(10,c)).toPrecision(a+1+(o+c)%o),!r.match(/[Ee]/)){var d=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(d-r.length+c):r+="E+"+(d-c),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(f,h,p,x){return h+p+x.substr(0,(o+c)%o)+"."+x.substr(c)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Da(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Sv)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Da("n",a,r):"("+Da("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return $6(e,t,r);if(t.indexOf("%")!==-1)return G6(e,t,r);if(t.indexOf("E")!==-1)return Tv(t,r);if(t.charCodeAt(0)===36)return"$"+Da(e,t.substr(t.charAt(1)==" "?2:1),r);var o,c,d,f,h=Math.abs(r),p=r<0?"-":"";if(t.match(/^00+$/))return p+Sa(h,t.length);if(t.match(/^[#?]+$/))return o=""+r,r===0&&(o=""),o.length>t.length?o:Rn(t.substr(0,t.length-o.length))+o;if(c=t.match(bv))return W6(c,h,p);if(t.match(/^#+0+$/))return p+Sa(h,t.length-t.indexOf("0"));if(c=t.match(_v))return o=(""+r).replace(/^([^\.]+)$/,"$1."+Rn(c[1])).replace(/\.$/,"."+Rn(c[1])),o=o.replace(/\.(\d*)$/,function(w,_){return"."+_+Mr("0",Rn(c[1]).length-_.length)}),t.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),c=t.match(/^(0*)\.(#*)$/))return p+(""+h).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=t.match(/^#{1,3},##0(\.?)$/))return p+Fs(""+h);if(c=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Da(e,t,-r):Fs(""+r)+"."+Mr("0",c[1].length);if(c=t.match(/^#,#*,#0/))return Da(e,t.replace(/^#,#*,/,""),r);if(c=t.match(/^([0#]+)(\\?-([0#]+))+$/))return o=bo(Da(e,t.replace(/[\\-]/g,""),r)),d=0,bo(bo(t.replace(/\\/g,"")).replace(/[0#]/g,function(w){return d<o.length?o.charAt(d++):w==="0"?"0":""}));if(t.match(wv))return o=Da(e,"##########",r),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var x="";if(c=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(c[4].length,7),f=Hd(h,Math.pow(10,d)-1,!1),o=""+p,x=ts("n",c[1],f[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),o+=x+c[2]+"/"+c[3],x=Wd(f[2],d),x.length<c[4].length&&(x=Rn(c[4].substr(c[4].length-x.length))+x),o+=x,o;if(c=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(c[1].length,c[4].length),7),f=Hd(h,Math.pow(10,d)-1,!0),p+(f[0]||(f[1]?"":"0"))+" "+(f[1]?I0(f[1],d)+c[2]+"/"+c[3]+Wd(f[2],d):Mr(" ",2*d+1+c[2].length+c[3].length));if(c=t.match(/^[#0?]+$/))return o=""+r,t.length<=o.length?o:Rn(t.substr(0,t.length-o.length))+o;if(c=t.match(/^([#0]+)\.([#0]+)$/)){o=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),d=o.indexOf(".");var y=t.indexOf(".")-d,v=t.length-o.length-y;return Rn(t.substr(0,y)+o+t.substr(t.length-v))}if(c=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Da(e,t,-r):Fs(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?Sa(0,3-w.length):"")+w})+"."+Sa(0,c[1].length);switch(t){case"###,###":case"##,###":case"#,###":var b=Fs(""+h);return b!=="0"?p+b:"";default:if(t.match(/\.[0#?]*$/))return Da(e,t.slice(0,t.lastIndexOf(".")),r)+Rn(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ts(e,t,r){return(r|0)===r?Da(e,t,r):la(e,t,r)}function V6(e){for(var t=[],r=!1,a=0,o=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(o,a-o),o=a+1}if(t[t.length]=e.substr(o),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var jv=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ev(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":qd(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(jv))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Y6(e,t,r,a){for(var o=[],c="",d=0,f="",h="t",p,x,y,v="H";d<e.length;)switch(f=e.charAt(d)){case"G":if(!qd(e,d))throw new Error("unrecognized character "+f+" in "+e);o[o.length]={t:"G",v:"General"},d+=7;break;case'"':for(c="";(y=e.charCodeAt(++d))!==34&&d<e.length;)c+=String.fromCharCode(y);o[o.length]={t:"t",v:c},++d;break;case"\\":var b=e.charAt(++d),w=b==="("||b===")"?b:"t";o[o.length]={t:w,v:b},++d;break;case"_":o[o.length]={t:"t",v:" "},d+=2;break;case"@":o[o.length]={t:"T",v:t},++d;break;case"B":case"b":if(e.charAt(d+1)==="1"||e.charAt(d+1)==="2"){if(p==null&&(p=kd(t,r,e.charAt(d+1)==="2"),p==null))return"";o[o.length]={t:"X",v:e.substr(d,2)},h=f,d+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":f=f.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||p==null&&(p=kd(t,r),p==null))return"";for(c=f;++d<e.length&&e.charAt(d).toLowerCase()===f;)c+=f;f==="m"&&h.toLowerCase()==="h"&&(f="M"),f==="h"&&(f=v),o[o.length]={t:f,v:c},h=f;break;case"A":case"a":case"":var _={t:f,v:f};if(p==null&&(p=kd(t,r)),e.substr(d,3).toUpperCase()==="A/P"?(p!=null&&(_.v=p.H>=12?"P":"A"),_.t="T",v="h",d+=3):e.substr(d,5).toUpperCase()==="AM/PM"?(p!=null&&(_.v=p.H>=12?"PM":"AM"),_.t="T",d+=5,v="h"):e.substr(d,5).toUpperCase()==="/"?(p!=null&&(_.v=p.H>=12?"":""),_.t="T",d+=5,v="h"):(_.t="t",++d),p==null&&_.t==="T")return"";o[o.length]=_,h=f;break;case"[":for(c=f;e.charAt(d++)!=="]"&&d<e.length;)c+=e.charAt(d);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(jv)){if(p==null&&(p=kd(t,r),p==null))return"";o[o.length]={t:"Z",v:c.toLowerCase()},h=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ev(e)||(o[o.length]={t:"t",v:c}));break;case".":if(p!=null){for(c=f;++d<e.length&&(f=e.charAt(d))==="0";)c+=f;o[o.length]={t:"s",v:c};break}case"0":case"#":for(c=f;++d<e.length&&"0#?.,E+-%".indexOf(f=e.charAt(d))>-1;)c+=f;o[o.length]={t:"n",v:c};break;case"?":for(c=f;e.charAt(++d)===f;)c+=f;o[o.length]={t:f,v:c},h=f;break;case"*":++d,(e.charAt(d)==" "||e.charAt(d)=="*")&&++d;break;case"(":case")":o[o.length]={t:a===1?"t":f,v:f},++d;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=f;d<e.length&&"0123456789".indexOf(e.charAt(++d))>-1;)c+=e.charAt(d);o[o.length]={t:"D",v:c};break;case" ":o[o.length]={t:f,v:f},++d;break;case"$":o[o.length]={t:"t",v:"$"},++d;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(f)===-1)throw new Error("unrecognized character "+f+" in "+e);o[o.length]={t:"t",v:f},++d;break}var S=0,N=0,R;for(d=o.length-1,h="t";d>=0;--d)switch(o[d].t){case"h":case"H":o[d].t=v,h="h",S<1&&(S=1);break;case"s":(R=o[d].v.match(/\.0+$/))&&(N=Math.max(N,R[0].length-1)),S<3&&(S=3);case"d":case"y":case"M":case"e":h=o[d].t;break;case"m":h==="s"&&(o[d].t="M",S<2&&(S=2));break;case"X":break;case"Z":S<1&&o[d].v.match(/[Hh]/)&&(S=1),S<2&&o[d].v.match(/[Mm]/)&&(S=2),S<3&&o[d].v.match(/[Ss]/)&&(S=3)}switch(S){case 0:break;case 1:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M),p.M>=60&&(p.M=0,++p.H);break;case 2:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M);break}var O="",P;for(d=0;d<o.length;++d)switch(o[d].t){case"t":case"T":case" ":case"D":break;case"X":o[d].v="",o[d].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[d].v=L6(o[d].t.charCodeAt(0),o[d].v,p,N),o[d].t="t";break;case"n":case"?":for(P=d+1;o[P]!=null&&((f=o[P].t)==="?"||f==="D"||(f===" "||f==="t")&&o[P+1]!=null&&(o[P+1].t==="?"||o[P+1].t==="t"&&o[P+1].v==="/")||o[d].t==="("&&(f===" "||f==="n"||f===")")||f==="t"&&(o[P].v==="/"||o[P].v===" "&&o[P+1]!=null&&o[P+1].t=="?"));)o[d].v+=o[P].v,o[P]={v:"",t:";"},++P;O+=o[d].v,d=P-1;break;case"G":o[d].t="t",o[d].v=c0(t,r);break}var J="",ae,Y;if(O.length>0){O.charCodeAt(0)==40?(ae=t<0&&O.charCodeAt(0)===45?-t:t,Y=ts("n",O,ae)):(ae=t<0&&a>1?-t:t,Y=ts("n",O,ae),ae<0&&o[0]&&o[0].t=="t"&&(Y=Y.substr(1),o[0].v="-"+o[0].v)),P=Y.length-1;var F=o.length;for(d=0;d<o.length;++d)if(o[d]!=null&&o[d].t!="t"&&o[d].v.indexOf(".")>-1){F=d;break}var Q=o.length;if(F===o.length&&Y.indexOf("E")===-1){for(d=o.length-1;d>=0;--d)o[d]==null||"n?".indexOf(o[d].t)===-1||(P>=o[d].v.length-1?(P-=o[d].v.length,o[d].v=Y.substr(P+1,o[d].v.length)):P<0?o[d].v="":(o[d].v=Y.substr(0,P+1),P=-1),o[d].t="t",Q=d);P>=0&&Q<o.length&&(o[Q].v=Y.substr(0,P+1)+o[Q].v)}else if(F!==o.length&&Y.indexOf("E")===-1){for(P=Y.indexOf(".")-1,d=F;d>=0;--d)if(!(o[d]==null||"n?".indexOf(o[d].t)===-1)){for(x=o[d].v.indexOf(".")>-1&&d===F?o[d].v.indexOf(".")-1:o[d].v.length-1,J=o[d].v.substr(x+1);x>=0;--x)P>=0&&(o[d].v.charAt(x)==="0"||o[d].v.charAt(x)==="#")&&(J=Y.charAt(P--)+J);o[d].v=J,o[d].t="t",Q=d}for(P>=0&&Q<o.length&&(o[Q].v=Y.substr(0,P+1)+o[Q].v),P=Y.indexOf(".")+1,d=F;d<o.length;++d)if(!(o[d]==null||"n?(".indexOf(o[d].t)===-1&&d!==F)){for(x=o[d].v.indexOf(".")>-1&&d===F?o[d].v.indexOf(".")+1:0,J=o[d].v.substr(0,x);x<o[d].v.length;++x)P<Y.length&&(J+=Y.charAt(P++));o[d].v=J,o[d].t="t",Q=d}}}for(d=0;d<o.length;++d)o[d]!=null&&"n?".indexOf(o[d].t)>-1&&(ae=a>1&&t<0&&d>0&&o[d-1].v==="-"?-t:t,o[d].v=ts(o[d].t,o[d].v,ae),o[d].t="t");var oe="";for(d=0;d!==o.length;++d)o[d]!=null&&(oe+=o[d].v);return oe}var M1=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function B1(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function K6(e,t){var r=V6(e),a=r.length,o=r[a-1].indexOf("@");if(a<4&&o>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||o>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=o>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=o>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=o>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var c=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,c];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var d=r[0].match(M1),f=r[1].match(M1);return B1(t,d)?[a,r[0]]:B1(t,f)?[a,r[1]]:[a,r[d!=null&&f!=null?2:1]]}return[a,c]}function Ps(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:Br)[e],a==null&&(a=r.table&&r.table[D1[e]]||Br[D1[e]]),a==null&&(a=R6[e]||"General");break}if(qd(a,0))return c0(t,r);t instanceof Date&&(t=mv(t,r.date1904));var o=K6(a,t);if(qd(o[1]))return c0(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Y6(o[1],t,r,o[0])}function kv(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Br[r]==null){t<0&&(t=r);continue}if(Br[r]==e){t=r;break}}t<0&&(t=391)}return Br[t]=e,t}function lu(e){for(var t=0;t!=392;++t)e[t]!==void 0&&kv(e[t],t)}function cu(){Br=A6()}var Cv=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function X6(e){var t=typeof e=="number"?Br[e]:e;return t=t.replace(Cv,"(\\d+)"),new RegExp("^"+t+"$")}function Q6(e,t,r){var a=-1,o=-1,c=-1,d=-1,f=-1,h=-1;(t.match(Cv)||[]).forEach(function(y,v){var b=parseInt(r[v+1],10);switch(y.toLowerCase().charAt(0)){case"y":a=b;break;case"d":c=b;break;case"h":d=b;break;case"s":h=b;break;case"m":d>=0?f=b:o=b;break}}),h>=0&&f==-1&&o>=0&&(f=o,o=-1);var p=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(o>=1?o:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);p.length==7&&(p="0"+p),p.length==8&&(p="20"+p);var x=("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2);return d==-1&&f==-1&&h==-1?p:a==-1&&o==-1&&c==-1?x:p+"T"+x}var J6=(function(){var e={};e.version="1.2.0";function t(){for(var Y=0,F=new Array(256),Q=0;Q!=256;++Q)Y=Q,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,F[Q]=Y;return typeof Int32Array<"u"?new Int32Array(F):F}var r=t();function a(Y){var F=0,Q=0,oe=0,q=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(oe=0;oe!=256;++oe)q[oe]=Y[oe];for(oe=0;oe!=256;++oe)for(Q=Y[oe],F=256+oe;F<4096;F+=256)Q=q[F]=Q>>>8^Y[Q&255];var de=[];for(oe=1;oe!=16;++oe)de[oe-1]=typeof Int32Array<"u"?q.subarray(oe*256,oe*256+256):q.slice(oe*256,oe*256+256);return de}var o=a(r),c=o[0],d=o[1],f=o[2],h=o[3],p=o[4],x=o[5],y=o[6],v=o[7],b=o[8],w=o[9],_=o[10],S=o[11],N=o[12],R=o[13],O=o[14];function P(Y,F){for(var Q=F^-1,oe=0,q=Y.length;oe<q;)Q=Q>>>8^r[(Q^Y.charCodeAt(oe++))&255];return~Q}function J(Y,F){for(var Q=F^-1,oe=Y.length-15,q=0;q<oe;)Q=O[Y[q++]^Q&255]^R[Y[q++]^Q>>8&255]^N[Y[q++]^Q>>16&255]^S[Y[q++]^Q>>>24]^_[Y[q++]]^w[Y[q++]]^b[Y[q++]]^v[Y[q++]]^y[Y[q++]]^x[Y[q++]]^p[Y[q++]]^h[Y[q++]]^f[Y[q++]]^d[Y[q++]]^c[Y[q++]]^r[Y[q++]];for(oe+=15;q<oe;)Q=Q>>>8^r[(Q^Y[q++])&255];return~Q}function ae(Y,F){for(var Q=F^-1,oe=0,q=Y.length,de=0,te=0;oe<q;)de=Y.charCodeAt(oe++),de<128?Q=Q>>>8^r[(Q^de)&255]:de<2048?(Q=Q>>>8^r[(Q^(192|de>>6&31))&255],Q=Q>>>8^r[(Q^(128|de&63))&255]):de>=55296&&de<57344?(de=(de&1023)+64,te=Y.charCodeAt(oe++)&1023,Q=Q>>>8^r[(Q^(240|de>>8&7))&255],Q=Q>>>8^r[(Q^(128|de>>2&63))&255],Q=Q>>>8^r[(Q^(128|te>>6&15|(de&3)<<4))&255],Q=Q>>>8^r[(Q^(128|te&63))&255]):(Q=Q>>>8^r[(Q^(224|de>>12&15))&255],Q=Q>>>8^r[(Q^(128|de>>6&63))&255],Q=Q>>>8^r[(Q^(128|de&63))&255]);return~Q}return e.table=r,e.bstr=P,e.buf=J,e.str=ae,e})(),vr=(function(){var t={};t.version="1.2.1";function r(D,U){for(var B=D.split("/"),L=U.split("/"),V=0,K=0,_e=Math.min(B.length,L.length);V<_e;++V){if(K=B[V].length-L[V].length)return K;if(B[V]!=L[V])return B[V]<L[V]?-1:1}return B.length-L.length}function a(D){if(D.charAt(D.length-1)=="/")return D.slice(0,-1).indexOf("/")===-1?D:a(D.slice(0,-1));var U=D.lastIndexOf("/");return U===-1?D:D.slice(0,U+1)}function o(D){if(D.charAt(D.length-1)=="/")return o(D.slice(0,-1));var U=D.lastIndexOf("/");return U===-1?D:D.slice(U+1)}function c(D,U){typeof U=="string"&&(U=new Date(U));var B=U.getHours();B=B<<6|U.getMinutes(),B=B<<5|U.getSeconds()>>>1,D.write_shift(2,B);var L=U.getFullYear()-1980;L=L<<4|U.getMonth()+1,L=L<<5|U.getDate(),D.write_shift(2,L)}function d(D){var U=D.read_shift(2)&65535,B=D.read_shift(2)&65535,L=new Date,V=B&31;B>>>=5;var K=B&15;B>>>=4,L.setMilliseconds(0),L.setFullYear(B+1980),L.setMonth(K-1),L.setDate(V);var _e=U&31;U>>>=5;var De=U&63;return U>>>=6,L.setHours(U),L.setMinutes(De),L.setSeconds(_e<<1),L}function f(D){Qn(D,0);for(var U={},B=0;D.l<=D.length-4;){var L=D.read_shift(2),V=D.read_shift(2),K=D.l+V,_e={};switch(L){case 21589:B=D.read_shift(1),B&1&&(_e.mtime=D.read_shift(4)),V>5&&(B&2&&(_e.atime=D.read_shift(4)),B&4&&(_e.ctime=D.read_shift(4))),_e.mtime&&(_e.mt=new Date(_e.mtime*1e3));break}D.l=K,U[L]=_e}return U}var h;function p(){return h||(h={})}function x(D,U){if(D[0]==80&&D[1]==75)return ke(D,U);if((D[0]|32)==109&&(D[1]|32)==105)return Sn(D,U);if(D.length<512)throw new Error("CFB file size "+D.length+" < 512");var B=3,L=512,V=0,K=0,_e=0,De=0,fe=0,we=[],Te=D.slice(0,512);Qn(Te,0);var Ue=y(Te);switch(B=Ue[0],B){case 3:L=512;break;case 4:L=4096;break;case 0:if(Ue[1]==0)return ke(D,U);default:throw new Error("Major Version: Expected 3 or 4 saw "+B)}L!==512&&(Te=D.slice(0,L),Qn(Te,28));var Ye=D.slice(0,L);v(Te,B);var it=Te.read_shift(4,"i");if(B===3&&it!==0)throw new Error("# Directory Sectors: Expected 0 saw "+it);Te.l+=4,_e=Te.read_shift(4,"i"),Te.l+=4,Te.chk("00100000","Mini Stream Cutoff Size: "),De=Te.read_shift(4,"i"),V=Te.read_shift(4,"i"),fe=Te.read_shift(4,"i"),K=Te.read_shift(4,"i");for(var $e=-1,tt=0;tt<109&&($e=Te.read_shift(4,"i"),!($e<0));++tt)we[tt]=$e;var St=b(D,L);S(fe,K,St,L,we);var Kt=R(St,_e,we,L);Kt[_e].name="!Directory",V>0&&De!==te&&(Kt[De].name="!MiniFAT"),Kt[we[0]].name="!FAT",Kt.fat_addrs=we,Kt.ssz=L;var Qt={},Jt=[],wn=[],k=[];O(_e,Kt,St,Jt,V,Qt,wn,De),w(wn,k,Jt),Jt.shift();var ce={FileIndex:wn,FullPaths:k};return U&&U.raw&&(ce.raw={header:Ye,sectors:St}),ce}function y(D){if(D[D.l]==80&&D[D.l+1]==75)return[0,0];D.chk(ne,"Header Signature: "),D.l+=16;var U=D.read_shift(2,"u");return[D.read_shift(2,"u"),U]}function v(D,U){var B=9;switch(D.l+=2,B=D.read_shift(2)){case 9:if(U!=3)throw new Error("Sector Shift: Expected 9 saw "+B);break;case 12:if(U!=4)throw new Error("Sector Shift: Expected 12 saw "+B);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+B)}D.chk("0600","Mini Sector Shift: "),D.chk("000000000000","Reserved: ")}function b(D,U){for(var B=Math.ceil(D.length/U)-1,L=[],V=1;V<B;++V)L[V-1]=D.slice(V*U,(V+1)*U);return L[B-1]=D.slice(B*U),L}function w(D,U,B){for(var L=0,V=0,K=0,_e=0,De=0,fe=B.length,we=[],Te=[];L<fe;++L)we[L]=Te[L]=L,U[L]=B[L];for(;De<Te.length;++De)L=Te[De],V=D[L].L,K=D[L].R,_e=D[L].C,we[L]===L&&(V!==-1&&we[V]!==V&&(we[L]=we[V]),K!==-1&&we[K]!==K&&(we[L]=we[K])),_e!==-1&&(we[_e]=L),V!==-1&&L!=we[L]&&(we[V]=we[L],Te.lastIndexOf(V)<De&&Te.push(V)),K!==-1&&L!=we[L]&&(we[K]=we[L],Te.lastIndexOf(K)<De&&Te.push(K));for(L=1;L<fe;++L)we[L]===L&&(K!==-1&&we[K]!==K?we[L]=we[K]:V!==-1&&we[V]!==V&&(we[L]=we[V]));for(L=1;L<fe;++L)if(D[L].type!==0){if(De=L,De!=we[De])do De=we[De],U[L]=U[De]+"/"+U[L];while(De!==0&&we[De]!==-1&&De!=we[De]);we[L]=-1}for(U[0]+="/",L=1;L<fe;++L)D[L].type!==2&&(U[L]+="/")}function _(D,U,B){for(var L=D.start,V=D.size,K=[],_e=L;B&&V>0&&_e>=0;)K.push(U.slice(_e*de,_e*de+de)),V-=de,_e=di(B,_e*4);return K.length===0?Me(0):hn(K).slice(0,D.size)}function S(D,U,B,L,V){var K=te;if(D===te){if(U!==0)throw new Error("DIFAT chain shorter than expected")}else if(D!==-1){var _e=B[D],De=(L>>>2)-1;if(!_e)return;for(var fe=0;fe<De&&(K=di(_e,fe*4))!==te;++fe)V.push(K);S(di(_e,L-4),U-1,B,L,V)}}function N(D,U,B,L,V){var K=[],_e=[];V||(V=[]);var De=L-1,fe=0,we=0;for(fe=U;fe>=0;){V[fe]=!0,K[K.length]=fe,_e.push(D[fe]);var Te=B[Math.floor(fe*4/L)];if(we=fe*4&De,L<4+we)throw new Error("FAT boundary crossed: "+fe+" 4 "+L);if(!D[Te])break;fe=di(D[Te],we)}return{nodes:K,data:H1([_e])}}function R(D,U,B,L){var V=D.length,K=[],_e=[],De=[],fe=[],we=L-1,Te=0,Ue=0,Ye=0,it=0;for(Te=0;Te<V;++Te)if(De=[],Ye=Te+U,Ye>=V&&(Ye-=V),!_e[Ye]){fe=[];var $e=[];for(Ue=Ye;Ue>=0;){$e[Ue]=!0,_e[Ue]=!0,De[De.length]=Ue,fe.push(D[Ue]);var tt=B[Math.floor(Ue*4/L)];if(it=Ue*4&we,L<4+it)throw new Error("FAT boundary crossed: "+Ue+" 4 "+L);if(!D[tt]||(Ue=di(D[tt],it),$e[Ue]))break}K[Ye]={nodes:De,data:H1([fe])}}return K}function O(D,U,B,L,V,K,_e,De){for(var fe=0,we=L.length?2:0,Te=U[D].data,Ue=0,Ye=0,it;Ue<Te.length;Ue+=128){var $e=Te.slice(Ue,Ue+128);Qn($e,64),Ye=$e.read_shift(2),it=z0($e,0,Ye-we),L.push(it);var tt={name:it,type:$e.read_shift(1),color:$e.read_shift(1),L:$e.read_shift(4,"i"),R:$e.read_shift(4,"i"),C:$e.read_shift(4,"i"),clsid:$e.read_shift(16),state:$e.read_shift(4,"i"),start:0,size:0},St=$e.read_shift(2)+$e.read_shift(2)+$e.read_shift(2)+$e.read_shift(2);St!==0&&(tt.ct=P($e,$e.l-8));var Kt=$e.read_shift(2)+$e.read_shift(2)+$e.read_shift(2)+$e.read_shift(2);Kt!==0&&(tt.mt=P($e,$e.l-8)),tt.start=$e.read_shift(4,"i"),tt.size=$e.read_shift(4,"i"),tt.size<0&&tt.start<0&&(tt.size=tt.type=0,tt.start=te,tt.name=""),tt.type===5?(fe=tt.start,V>0&&fe!==te&&(U[fe].name="!StreamData")):tt.size>=4096?(tt.storage="fat",U[tt.start]===void 0&&(U[tt.start]=N(B,tt.start,U.fat_addrs,U.ssz)),U[tt.start].name=tt.name,tt.content=U[tt.start].data.slice(0,tt.size)):(tt.storage="minifat",tt.size<0?tt.size=0:fe!==te&&tt.start!==te&&U[fe]&&(tt.content=_(tt,U[fe].data,(U[De]||{}).data))),tt.content&&Qn(tt.content,0),K[it]=tt,_e.push(tt)}}function P(D,U){return new Date((Zn(D,U+4)/1e7*Math.pow(2,32)+Zn(D,U)/1e7-11644473600)*1e3)}function J(D,U){return p(),x(h.readFileSync(D),U)}function ae(D,U){var B=U&&U.type;switch(B||sr&&Buffer.isBuffer(D)&&(B="buffer"),B||"base64"){case"file":return J(D,U);case"base64":return x(_a(ss(D)),U);case"binary":return x(_a(D),U)}return x(D,U)}function Y(D,U){var B=U||{},L=B.root||"Root Entry";if(D.FullPaths||(D.FullPaths=[]),D.FileIndex||(D.FileIndex=[]),D.FullPaths.length!==D.FileIndex.length)throw new Error("inconsistent CFB structure");D.FullPaths.length===0&&(D.FullPaths[0]=L+"/",D.FileIndex[0]={name:L,type:5}),B.CLSID&&(D.FileIndex[0].clsid=B.CLSID),F(D)}function F(D){var U="Sh33tJ5";if(!vr.find(D,"/"+U)){var B=Me(4);B[0]=55,B[1]=B[3]=50,B[2]=54,D.FileIndex.push({name:U,type:2,content:B,size:4,L:69,R:69,C:69}),D.FullPaths.push(D.FullPaths[0]+U),Q(D)}}function Q(D,U){Y(D);for(var B=!1,L=!1,V=D.FullPaths.length-1;V>=0;--V){var K=D.FileIndex[V];switch(K.type){case 0:L?B=!0:(D.FileIndex.pop(),D.FullPaths.pop());break;case 1:case 2:case 5:L=!0,isNaN(K.R*K.L*K.C)&&(B=!0),K.R>-1&&K.L>-1&&K.R==K.L&&(B=!0);break;default:B=!0;break}}if(!(!B&&!U)){var _e=new Date(1987,1,19),De=0,fe=Object.create?Object.create(null):{},we=[];for(V=0;V<D.FullPaths.length;++V)fe[D.FullPaths[V]]=!0,D.FileIndex[V].type!==0&&we.push([D.FullPaths[V],D.FileIndex[V]]);for(V=0;V<we.length;++V){var Te=a(we[V][0]);L=fe[Te],L||(we.push([Te,{name:o(Te).replace("/",""),type:1,clsid:re,ct:_e,mt:_e,content:null}]),fe[Te]=!0)}for(we.sort(function(it,$e){return r(it[0],$e[0])}),D.FullPaths=[],D.FileIndex=[],V=0;V<we.length;++V)D.FullPaths[V]=we[V][0],D.FileIndex[V]=we[V][1];for(V=0;V<we.length;++V){var Ue=D.FileIndex[V],Ye=D.FullPaths[V];if(Ue.name=o(Ye).replace("/",""),Ue.L=Ue.R=Ue.C=-(Ue.color=1),Ue.size=Ue.content?Ue.content.length:0,Ue.start=0,Ue.clsid=Ue.clsid||re,V===0)Ue.C=we.length>1?1:-1,Ue.size=0,Ue.type=5;else if(Ye.slice(-1)=="/"){for(De=V+1;De<we.length&&a(D.FullPaths[De])!=Ye;++De);for(Ue.C=De>=we.length?-1:De,De=V+1;De<we.length&&a(D.FullPaths[De])!=a(Ye);++De);Ue.R=De>=we.length?-1:De,Ue.type=1}else a(D.FullPaths[V+1]||"")==a(Ye)&&(Ue.R=V+1),Ue.type=2}}}function oe(D,U){var B=U||{};if(B.fileType=="mad")return Yt(D,B);switch(Q(D),B.fileType){case"zip":return Nt(D,B)}var L=(function(it){for(var $e=0,tt=0,St=0;St<it.FileIndex.length;++St){var Kt=it.FileIndex[St];if(Kt.content){var Qt=Kt.content.length;Qt>0&&(Qt<4096?$e+=Qt+63>>6:tt+=Qt+511>>9)}}for(var Jt=it.FullPaths.length+3>>2,wn=$e+7>>3,k=$e+127>>7,ce=wn+tt+Jt+k,Ae=ce+127>>7,ct=Ae<=109?0:Math.ceil((Ae-109)/127);ce+Ae+ct+127>>7>Ae;)ct=++Ae<=109?0:Math.ceil((Ae-109)/127);var _t=[1,ct,Ae,k,Jt,tt,$e,0];return it.FileIndex[0].size=$e<<6,_t[7]=(it.FileIndex[0].start=_t[0]+_t[1]+_t[2]+_t[3]+_t[4]+_t[5])+(_t[6]+7>>3),_t})(D),V=Me(L[7]<<9),K=0,_e=0;{for(K=0;K<8;++K)V.write_shift(1,me[K]);for(K=0;K<8;++K)V.write_shift(2,0);for(V.write_shift(2,62),V.write_shift(2,3),V.write_shift(2,65534),V.write_shift(2,9),V.write_shift(2,6),K=0;K<3;++K)V.write_shift(2,0);for(V.write_shift(4,0),V.write_shift(4,L[2]),V.write_shift(4,L[0]+L[1]+L[2]+L[3]-1),V.write_shift(4,0),V.write_shift(4,4096),V.write_shift(4,L[3]?L[0]+L[1]+L[2]-1:te),V.write_shift(4,L[3]),V.write_shift(-4,L[1]?L[0]-1:te),V.write_shift(4,L[1]),K=0;K<109;++K)V.write_shift(-4,K<L[2]?L[1]+K:-1)}if(L[1])for(_e=0;_e<L[1];++_e){for(;K<236+_e*127;++K)V.write_shift(-4,K<L[2]?L[1]+K:-1);V.write_shift(-4,_e===L[1]-1?te:_e+1)}var De=function(it){for(_e+=it;K<_e-1;++K)V.write_shift(-4,K+1);it&&(++K,V.write_shift(-4,te))};for(_e=K=0,_e+=L[1];K<_e;++K)V.write_shift(-4,be.DIFSECT);for(_e+=L[2];K<_e;++K)V.write_shift(-4,be.FATSECT);De(L[3]),De(L[4]);for(var fe=0,we=0,Te=D.FileIndex[0];fe<D.FileIndex.length;++fe)Te=D.FileIndex[fe],Te.content&&(we=Te.content.length,!(we<4096)&&(Te.start=_e,De(we+511>>9)));for(De(L[6]+7>>3);V.l&511;)V.write_shift(-4,be.ENDOFCHAIN);for(_e=K=0,fe=0;fe<D.FileIndex.length;++fe)Te=D.FileIndex[fe],Te.content&&(we=Te.content.length,!(!we||we>=4096)&&(Te.start=_e,De(we+63>>6)));for(;V.l&511;)V.write_shift(-4,be.ENDOFCHAIN);for(K=0;K<L[4]<<2;++K){var Ue=D.FullPaths[K];if(!Ue||Ue.length===0){for(fe=0;fe<17;++fe)V.write_shift(4,0);for(fe=0;fe<3;++fe)V.write_shift(4,-1);for(fe=0;fe<12;++fe)V.write_shift(4,0);continue}Te=D.FileIndex[K],K===0&&(Te.start=Te.size?Te.start-1:te);var Ye=K===0&&B.root||Te.name;if(we=2*(Ye.length+1),V.write_shift(64,Ye,"utf16le"),V.write_shift(2,we),V.write_shift(1,Te.type),V.write_shift(1,Te.color),V.write_shift(-4,Te.L),V.write_shift(-4,Te.R),V.write_shift(-4,Te.C),Te.clsid)V.write_shift(16,Te.clsid,"hex");else for(fe=0;fe<4;++fe)V.write_shift(4,0);V.write_shift(4,Te.state||0),V.write_shift(4,0),V.write_shift(4,0),V.write_shift(4,0),V.write_shift(4,0),V.write_shift(4,Te.start),V.write_shift(4,Te.size),V.write_shift(4,0)}for(K=1;K<D.FileIndex.length;++K)if(Te=D.FileIndex[K],Te.size>=4096)if(V.l=Te.start+1<<9,sr&&Buffer.isBuffer(Te.content))Te.content.copy(V,V.l,0,Te.size),V.l+=Te.size+511&-512;else{for(fe=0;fe<Te.size;++fe)V.write_shift(1,Te.content[fe]);for(;fe&511;++fe)V.write_shift(1,0)}for(K=1;K<D.FileIndex.length;++K)if(Te=D.FileIndex[K],Te.size>0&&Te.size<4096)if(sr&&Buffer.isBuffer(Te.content))Te.content.copy(V,V.l,0,Te.size),V.l+=Te.size+63&-64;else{for(fe=0;fe<Te.size;++fe)V.write_shift(1,Te.content[fe]);for(;fe&63;++fe)V.write_shift(1,0)}if(sr)V.l=V.length;else for(;V.l<V.length;)V.write_shift(1,0);return V}function q(D,U){var B=D.FullPaths.map(function(fe){return fe.toUpperCase()}),L=B.map(function(fe){var we=fe.split("/");return we[we.length-(fe.slice(-1)=="/"?2:1)]}),V=!1;U.charCodeAt(0)===47?(V=!0,U=B[0].slice(0,-1)+U):V=U.indexOf("/")!==-1;var K=U.toUpperCase(),_e=V===!0?B.indexOf(K):L.indexOf(K);if(_e!==-1)return D.FileIndex[_e];var De=!K.match(Ed);for(K=K.replace(Pl,""),De&&(K=K.replace(Ed,"!")),_e=0;_e<B.length;++_e)if((De?B[_e].replace(Ed,"!"):B[_e]).replace(Pl,"")==K||(De?L[_e].replace(Ed,"!"):L[_e]).replace(Pl,"")==K)return D.FileIndex[_e];return null}var de=64,te=-2,ne="d0cf11e0a1b11ae1",me=[208,207,17,224,161,177,26,225],re="00000000000000000000000000000000",be={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:te,FREESECT:-1,HEADER_SIGNATURE:ne,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:re,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function W(D,U,B){p();var L=oe(D,B);h.writeFileSync(U,L)}function xe(D){for(var U=new Array(D.length),B=0;B<D.length;++B)U[B]=String.fromCharCode(D[B]);return U.join("")}function C(D,U){var B=oe(D,U);switch(U&&U.type||"buffer"){case"file":return p(),h.writeFileSync(U.filename,B),B;case"binary":return typeof B=="string"?B:xe(B);case"base64":return Kl(typeof B=="string"?B:xe(B));case"buffer":if(sr)return Buffer.isBuffer(B)?B:os(B);case"array":return typeof B=="string"?_a(B):B}return B}var X;function E(D){try{var U=D.InflateRaw,B=new U;if(B._processChunk(new Uint8Array([3,0]),B._finishFlushFlag),B.bytesRead)X=D;else throw new Error("zlib does not expose bytesRead")}catch(L){console.error("cannot use native zlib: "+(L.message||L))}}function z(D,U){if(!X)return ir(D,U);var B=X.InflateRaw,L=new B,V=L._processChunk(D.slice(D.l),L._finishFlushFlag);return D.l+=L.bytesRead,V}function H(D){return X?X.deflateRawSync(D):ht(D)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Fe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function qe(D){var U=(D<<1|D<<11)&139536|(D<<5|D<<15)&558144;return(U>>16|U>>8|U)&255}for(var Re=typeof Uint8Array<"u",Oe=Re?new Uint8Array(256):[],et=0;et<256;++et)Oe[et]=qe(et);function ve(D,U){var B=Oe[D&255];return U<=8?B>>>8-U:(B=B<<8|Oe[D>>8&255],U<=16?B>>>16-U:(B=B<<8|Oe[D>>16&255],B>>>24-U))}function Ge(D,U){var B=U&7,L=U>>>3;return(D[L]|(B<=6?0:D[L+1]<<8))>>>B&3}function G(D,U){var B=U&7,L=U>>>3;return(D[L]|(B<=5?0:D[L+1]<<8))>>>B&7}function Ce(D,U){var B=U&7,L=U>>>3;return(D[L]|(B<=4?0:D[L+1]<<8))>>>B&15}function rt(D,U){var B=U&7,L=U>>>3;return(D[L]|(B<=3?0:D[L+1]<<8))>>>B&31}function Be(D,U){var B=U&7,L=U>>>3;return(D[L]|(B<=1?0:D[L+1]<<8))>>>B&127}function gt(D,U,B){var L=U&7,V=U>>>3,K=(1<<B)-1,_e=D[V]>>>L;return B<8-L||(_e|=D[V+1]<<8-L,B<16-L)||(_e|=D[V+2]<<16-L,B<24-L)||(_e|=D[V+3]<<24-L),_e&K}function at(D,U,B){var L=U&7,V=U>>>3;return L<=5?D[V]|=(B&7)<<L:(D[V]|=B<<L&255,D[V+1]=(B&7)>>8-L),U+3}function vt(D,U,B){var L=U&7,V=U>>>3;return B=(B&1)<<L,D[V]|=B,U+1}function bt(D,U,B){var L=U&7,V=U>>>3;return B<<=L,D[V]|=B&255,B>>>=8,D[V+1]=B,U+8}function Ie(D,U,B){var L=U&7,V=U>>>3;return B<<=L,D[V]|=B&255,B>>>=8,D[V+1]=B&255,D[V+2]=B>>>8,U+16}function nt(D,U){var B=D.length,L=2*B>U?2*B:U+5,V=0;if(B>=U)return D;if(sr){var K=A1(L);if(D.copy)D.copy(K);else for(;V<D.length;++V)K[V]=D[V];return K}else if(Re){var _e=new Uint8Array(L);if(_e.set)_e.set(D);else for(;V<B;++V)_e[V]=D[V];return _e}return D.length=L,D}function mt(D){for(var U=new Array(D),B=0;B<D;++B)U[B]=0;return U}function Ut(D,U,B){var L=1,V=0,K=0,_e=0,De=0,fe=D.length,we=Re?new Uint16Array(32):mt(32);for(K=0;K<32;++K)we[K]=0;for(K=fe;K<B;++K)D[K]=0;fe=D.length;var Te=Re?new Uint16Array(fe):mt(fe);for(K=0;K<fe;++K)we[V=D[K]]++,L<V&&(L=V),Te[K]=0;for(we[0]=0,K=1;K<=L;++K)we[K+16]=De=De+we[K-1]<<1;for(K=0;K<fe;++K)De=D[K],De!=0&&(Te[K]=we[De+16]++);var Ue=0;for(K=0;K<fe;++K)if(Ue=D[K],Ue!=0)for(De=ve(Te[K],L)>>L-Ue,_e=(1<<L+4-Ue)-1;_e>=0;--_e)U[De|_e<<Ue]=Ue&15|K<<4;return L}var or=Re?new Uint16Array(512):mt(512),Lt=Re?new Uint16Array(32):mt(32);if(!Re){for(var le=0;le<512;++le)or[le]=0;for(le=0;le<32;++le)Lt[le]=0}(function(){for(var D=[],U=0;U<32;U++)D.push(5);Ut(D,Lt,32);var B=[];for(U=0;U<=143;U++)B.push(8);for(;U<=255;U++)B.push(9);for(;U<=279;U++)B.push(7);for(;U<=287;U++)B.push(8);Ut(B,or,288)})();var He=(function(){for(var U=Re?new Uint8Array(32768):[],B=0,L=0;B<Fe.length-1;++B)for(;L<Fe[B+1];++L)U[L]=B;for(;L<32768;++L)U[L]=29;var V=Re?new Uint8Array(259):[];for(B=0,L=0;B<ge.length-1;++B)for(;L<ge[B+1];++L)V[L]=B;function K(De,fe){for(var we=0;we<De.length;){var Te=Math.min(65535,De.length-we),Ue=we+Te==De.length;for(fe.write_shift(1,+Ue),fe.write_shift(2,Te),fe.write_shift(2,~Te&65535);Te-- >0;)fe[fe.l++]=De[we++]}return fe.l}function _e(De,fe){for(var we=0,Te=0,Ue=Re?new Uint16Array(32768):[];Te<De.length;){var Ye=Math.min(65535,De.length-Te);if(Ye<10){for(we=at(fe,we,+(Te+Ye==De.length)),we&7&&(we+=8-(we&7)),fe.l=we/8|0,fe.write_shift(2,Ye),fe.write_shift(2,~Ye&65535);Ye-- >0;)fe[fe.l++]=De[Te++];we=fe.l*8;continue}we=at(fe,we,+(Te+Ye==De.length)+2);for(var it=0;Ye-- >0;){var $e=De[Te];it=(it<<5^$e)&32767;var tt=-1,St=0;if((tt=Ue[it])&&(tt|=Te&-32768,tt>Te&&(tt-=32768),tt<Te))for(;De[tt+St]==De[Te+St]&&St<250;)++St;if(St>2){$e=V[St],$e<=22?we=bt(fe,we,Oe[$e+1]>>1)-1:(bt(fe,we,3),we+=5,bt(fe,we,Oe[$e-23]>>5),we+=3);var Kt=$e<8?0:$e-4>>2;Kt>0&&(Ie(fe,we,St-ge[$e]),we+=Kt),$e=U[Te-tt],we=bt(fe,we,Oe[$e]>>3),we-=3;var Qt=$e<4?0:$e-2>>1;Qt>0&&(Ie(fe,we,Te-tt-Fe[$e]),we+=Qt);for(var Jt=0;Jt<St;++Jt)Ue[it]=Te&32767,it=(it<<5^De[Te])&32767,++Te;Ye-=St-1}else $e<=143?$e=$e+48:we=vt(fe,we,1),we=bt(fe,we,Oe[$e]),Ue[it]=Te&32767,++Te}we=bt(fe,we,0)-1}return fe.l=(we+7)/8|0,fe.l}return function(fe,we){return fe.length<8?K(fe,we):_e(fe,we)}})();function ht(D){var U=Me(50+Math.floor(D.length*1.1)),B=He(D,U);return U.slice(0,B)}var Ot=Re?new Uint16Array(32768):mt(32768),lr=Re?new Uint16Array(32768):mt(32768),kr=Re?new Uint16Array(128):mt(128),Sr=1,rr=1;function Rr(D,U){var B=rt(D,U)+257;U+=5;var L=rt(D,U)+1;U+=5;var V=Ce(D,U)+4;U+=4;for(var K=0,_e=Re?new Uint8Array(19):mt(19),De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],fe=1,we=Re?new Uint8Array(8):mt(8),Te=Re?new Uint8Array(8):mt(8),Ue=_e.length,Ye=0;Ye<V;++Ye)_e[Z[Ye]]=K=G(D,U),fe<K&&(fe=K),we[K]++,U+=3;var it=0;for(we[0]=0,Ye=1;Ye<=fe;++Ye)Te[Ye]=it=it+we[Ye-1]<<1;for(Ye=0;Ye<Ue;++Ye)(it=_e[Ye])!=0&&(De[Ye]=Te[it]++);var $e=0;for(Ye=0;Ye<Ue;++Ye)if($e=_e[Ye],$e!=0){it=Oe[De[Ye]]>>8-$e;for(var tt=(1<<7-$e)-1;tt>=0;--tt)kr[it|tt<<$e]=$e&7|Ye<<3}var St=[];for(fe=1;St.length<B+L;)switch(it=kr[Be(D,U)],U+=it&7,it>>>=3){case 16:for(K=3+Ge(D,U),U+=2,it=St[St.length-1];K-- >0;)St.push(it);break;case 17:for(K=3+G(D,U),U+=3;K-- >0;)St.push(0);break;case 18:for(K=11+Be(D,U),U+=7;K-- >0;)St.push(0);break;default:St.push(it),fe<it&&(fe=it);break}var Kt=St.slice(0,B),Qt=St.slice(B);for(Ye=B;Ye<286;++Ye)Kt[Ye]=0;for(Ye=L;Ye<30;++Ye)Qt[Ye]=0;return Sr=Ut(Kt,Ot,286),rr=Ut(Qt,lr,30),U}function Ht(D,U){if(D[0]==3&&!(D[1]&3))return[gi(U),2];for(var B=0,L=0,V=A1(U||1<<18),K=0,_e=V.length>>>0,De=0,fe=0;(L&1)==0;){if(L=G(D,B),B+=3,L>>>1)L>>1==1?(De=9,fe=5):(B=Rr(D,B),De=Sr,fe=rr);else{B&7&&(B+=8-(B&7));var we=D[B>>>3]|D[(B>>>3)+1]<<8;if(B+=32,we>0)for(!U&&_e<K+we&&(V=nt(V,K+we),_e=V.length);we-- >0;)V[K++]=D[B>>>3],B+=8;continue}for(;;){!U&&_e<K+32767&&(V=nt(V,K+32767),_e=V.length);var Te=gt(D,B,De),Ue=L>>>1==1?or[Te]:Ot[Te];if(B+=Ue&15,Ue>>>=4,(Ue>>>8&255)===0)V[K++]=Ue;else{if(Ue==256)break;Ue-=257;var Ye=Ue<8?0:Ue-4>>2;Ye>5&&(Ye=0);var it=K+ge[Ue];Ye>0&&(it+=gt(D,B,Ye),B+=Ye),Te=gt(D,B,fe),Ue=L>>>1==1?Lt[Te]:lr[Te],B+=Ue&15,Ue>>>=4;var $e=Ue<4?0:Ue-2>>1,tt=Fe[Ue];for($e>0&&(tt+=gt(D,B,$e),B+=$e),!U&&_e<it&&(V=nt(V,it+100),_e=V.length);K<it;)V[K]=V[K-tt],++K}}}return U?[V,B+7>>>3]:[V.slice(0,K),B+7>>>3]}function ir(D,U){var B=D.slice(D.l||0),L=Ht(B,U);return D.l+=L[1],L[0]}function se(D,U){if(D)typeof console<"u"&&console.error(U);else throw new Error(U)}function ke(D,U){var B=D;Qn(B,0);var L=[],V=[],K={FileIndex:L,FullPaths:V};Y(K,{root:U.root});for(var _e=B.length-4;(B[_e]!=80||B[_e+1]!=75||B[_e+2]!=5||B[_e+3]!=6)&&_e>=0;)--_e;B.l=_e+4,B.l+=4;var De=B.read_shift(2);B.l+=6;var fe=B.read_shift(4);for(B.l=fe,_e=0;_e<De;++_e){B.l+=20;var we=B.read_shift(4),Te=B.read_shift(4),Ue=B.read_shift(2),Ye=B.read_shift(2),it=B.read_shift(2);B.l+=8;var $e=B.read_shift(4),tt=f(B.slice(B.l+Ue,B.l+Ue+Ye));B.l+=Ue+Ye+it;var St=B.l;B.l=$e+4,xt(B,we,Te,K,tt),B.l=St}return K}function xt(D,U,B,L,V){D.l+=2;var K=D.read_shift(2),_e=D.read_shift(2),De=d(D);if(K&8257)throw new Error("Unsupported ZIP encryption");for(var fe=D.read_shift(4),we=D.read_shift(4),Te=D.read_shift(4),Ue=D.read_shift(2),Ye=D.read_shift(2),it="",$e=0;$e<Ue;++$e)it+=String.fromCharCode(D[D.l++]);if(Ye){var tt=f(D.slice(D.l,D.l+Ye));(tt[21589]||{}).mt&&(De=tt[21589].mt),((V||{})[21589]||{}).mt&&(De=V[21589].mt)}D.l+=Ye;var St=D.slice(D.l,D.l+we);switch(_e){case 8:St=z(D,Te);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+_e)}var Kt=!1;K&8&&(fe=D.read_shift(4),fe==134695760&&(fe=D.read_shift(4),Kt=!0),we=D.read_shift(4),Te=D.read_shift(4)),we!=U&&se(Kt,"Bad compressed size: "+U+" != "+we),Te!=B&&se(Kt,"Bad uncompressed size: "+B+" != "+Te),gr(L,it,St,{unsafe:!0,mt:De})}function Nt(D,U){var B=U||{},L=[],V=[],K=Me(1),_e=B.compression?8:0,De=0,fe=0,we=0,Te=0,Ue=0,Ye=D.FullPaths[0],it=Ye,$e=D.FileIndex[0],tt=[],St=0;for(fe=1;fe<D.FullPaths.length;++fe)if(it=D.FullPaths[fe].slice(Ye.length),$e=D.FileIndex[fe],!(!$e.size||!$e.content||it=="Sh33tJ5")){var Kt=Te,Qt=Me(it.length);for(we=0;we<it.length;++we)Qt.write_shift(1,it.charCodeAt(we)&127);Qt=Qt.slice(0,Qt.l),tt[Ue]=J6.buf($e.content,0);var Jt=$e.content;_e==8&&(Jt=H(Jt)),K=Me(30),K.write_shift(4,67324752),K.write_shift(2,20),K.write_shift(2,De),K.write_shift(2,_e),$e.mt?c(K,$e.mt):K.write_shift(4,0),K.write_shift(-4,tt[Ue]),K.write_shift(4,Jt.length),K.write_shift(4,$e.content.length),K.write_shift(2,Qt.length),K.write_shift(2,0),Te+=K.length,L.push(K),Te+=Qt.length,L.push(Qt),Te+=Jt.length,L.push(Jt),K=Me(46),K.write_shift(4,33639248),K.write_shift(2,0),K.write_shift(2,20),K.write_shift(2,De),K.write_shift(2,_e),K.write_shift(4,0),K.write_shift(-4,tt[Ue]),K.write_shift(4,Jt.length),K.write_shift(4,$e.content.length),K.write_shift(2,Qt.length),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(4,0),K.write_shift(4,Kt),St+=K.l,V.push(K),St+=Qt.length,V.push(Qt),++Ue}return K=Me(22),K.write_shift(4,101010256),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(2,Ue),K.write_shift(2,Ue),K.write_shift(4,St),K.write_shift(4,Te),K.write_shift(2,0),hn([hn(L),hn(V),K])}var nr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function st(D,U){if(D.ctype)return D.ctype;var B=D.name||"",L=B.match(/\.([^\.]+)$/);return L&&nr[L[1]]||U&&(L=(B=U).match(/[\.\\]([^\.\\])+$/),L&&nr[L[1]])?nr[L[1]]:"application/octet-stream"}function At(D){for(var U=Kl(D),B=[],L=0;L<U.length;L+=76)B.push(U.slice(L,L+76));return B.join(`\r
`)+`\r
`}function Dt(D){var U=D.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(we){var Te=we.charCodeAt(0).toString(16).toUpperCase();return"="+(Te.length==1?"0"+Te:Te)});U=U.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),U.charAt(0)==`
`&&(U="=0D"+U.slice(1)),U=U.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var B=[],L=U.split(`\r
`),V=0;V<L.length;++V){var K=L[V];if(K.length==0){B.push("");continue}for(var _e=0;_e<K.length;){var De=76,fe=K.slice(_e,_e+De);fe.charAt(De-1)=="="?De--:fe.charAt(De-2)=="="?De-=2:fe.charAt(De-3)=="="&&(De-=3),fe=K.slice(_e,_e+De),_e+=De,_e<K.length&&(fe+="="),B.push(fe)}}return B.join(`\r
`)}function _n(D){for(var U=[],B=0;B<D.length;++B){for(var L=D[B];B<=D.length&&L.charAt(L.length-1)=="=";)L=L.slice(0,L.length-1)+D[++B];U.push(L)}for(var V=0;V<U.length;++V)U[V]=U[V].replace(/[=][0-9A-Fa-f]{2}/g,function(K){return String.fromCharCode(parseInt(K.slice(1),16))});return _a(U.join(`\r
`))}function jr(D,U,B){for(var L="",V="",K="",_e,De=0;De<10;++De){var fe=U[De];if(!fe||fe.match(/^\s*$/))break;var we=fe.match(/^(.*?):\s*([^\s].*)$/);if(we)switch(we[1].toLowerCase()){case"content-location":L=we[2].trim();break;case"content-type":K=we[2].trim();break;case"content-transfer-encoding":V=we[2].trim();break}}switch(++De,V.toLowerCase()){case"base64":_e=_a(ss(U.slice(De).join("")));break;case"quoted-printable":_e=_n(U.slice(De));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+V)}var Te=gr(D,L.slice(B.length),_e,{unsafe:!0});K&&(Te.ctype=K)}function Sn(D,U){if(xe(D.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var B=U&&U.root||"",L=(sr&&Buffer.isBuffer(D)?D.toString("binary"):xe(D)).split(`\r
`),V=0,K="";for(V=0;V<L.length;++V)if(K=L[V],!!/^Content-Location:/i.test(K)&&(K=K.slice(K.indexOf("file")),B||(B=K.slice(0,K.lastIndexOf("/")+1)),K.slice(0,B.length)!=B))for(;B.length>0&&(B=B.slice(0,B.length-1),B=B.slice(0,B.lastIndexOf("/")+1),K.slice(0,B.length)!=B););var _e=(L[1]||"").match(/boundary="(.*?)"/);if(!_e)throw new Error("MAD cannot find boundary");var De="--"+(_e[1]||""),fe=[],we=[],Te={FileIndex:fe,FullPaths:we};Y(Te);var Ue,Ye=0;for(V=0;V<L.length;++V){var it=L[V];it!==De&&it!==De+"--"||(Ye++&&jr(Te,L.slice(Ue,V),B),Ue=V)}return Te}function Yt(D,U){var B=U||{},L=B.boundary||"SheetJS";L="------="+L;for(var V=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+L.slice(2)+'"',"","",""],K=D.FullPaths[0],_e=K,De=D.FileIndex[0],fe=1;fe<D.FullPaths.length;++fe)if(_e=D.FullPaths[fe].slice(K.length),De=D.FileIndex[fe],!(!De.size||!De.content||_e=="Sh33tJ5")){_e=_e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(St){return"_x"+St.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(St){return"_u"+St.charCodeAt(0).toString(16)+"_"});for(var we=De.content,Te=sr&&Buffer.isBuffer(we)?we.toString("binary"):xe(we),Ue=0,Ye=Math.min(1024,Te.length),it=0,$e=0;$e<=Ye;++$e)(it=Te.charCodeAt($e))>=32&&it<128&&++Ue;var tt=Ue>=Ye*4/5;V.push(L),V.push("Content-Location: "+(B.root||"file:///C:/SheetJS/")+_e),V.push("Content-Transfer-Encoding: "+(tt?"quoted-printable":"base64")),V.push("Content-Type: "+st(De,_e)),V.push(""),V.push(tt?Dt(Te):At(Te))}return V.push(L+`--\r
`),V.join(`\r
`)}function Rt(D){var U={};return Y(U,D),U}function gr(D,U,B,L){var V=L&&L.unsafe;V||Y(D);var K=!V&&vr.find(D,U);if(!K){var _e=D.FullPaths[0];U.slice(0,_e.length)==_e?_e=U:(_e.slice(-1)!="/"&&(_e+="/"),_e=(_e+U).replace("//","/")),K={name:o(U),type:2},D.FileIndex.push(K),D.FullPaths.push(_e),V||vr.utils.cfb_gc(D)}return K.content=B,K.size=B?B.length:0,L&&(L.CLSID&&(K.clsid=L.CLSID),L.mt&&(K.mt=L.mt),L.ct&&(K.ct=L.ct)),K}function Un(D,U){Y(D);var B=vr.find(D,U);if(B){for(var L=0;L<D.FileIndex.length;++L)if(D.FileIndex[L]==B)return D.FileIndex.splice(L,1),D.FullPaths.splice(L,1),!0}return!1}function ha(D,U,B){Y(D);var L=vr.find(D,U);if(L){for(var V=0;V<D.FileIndex.length;++V)if(D.FileIndex[V]==L)return D.FileIndex[V].name=o(B),D.FullPaths[V]=B,!0}return!1}function Wn(D){Q(D,!0)}return t.find=q,t.read=ae,t.parse=x,t.write=C,t.writeFile=W,t.utils={cfb_new:Rt,cfb_add:gr,cfb_del:Un,cfb_mov:ha,cfb_gc:Wn,ReadShift:Ul,CheckField:Gv,prep_blob:Qn,bconcat:hn,use_zlib:E,_deflateRaw:ht,_inflateRaw:ir,consts:be},t})();function Z6(e){return typeof e=="string"?ou(e):Array.isArray(e)?j6(e):e}function ic(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=ou(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Ql(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var o=new Blob([Z6(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(o,e);if(typeof saveAs<"u")return saveAs(o,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var c=URL.createObjectURL(o);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),chrome.downloads.download({url:c,filename:e,saveAs:!0});var d=document.createElement("a");if(d.download!=null)return d.download=e,d.href=c,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),c}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var f=File(e);return f.open("w"),f.encoding="binary",Array.isArray(t)&&(t=sc(t)),f.write(t),f.close(),t}catch(h){if(!h.message||!h.message.match(/onstruct/))throw h}throw new Error("cannot save file "+e)}function xn(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function F1(e,t){for(var r=[],a=xn(e),o=0;o!==a.length;++o)r[e[a[o]][t]]==null&&(r[e[a[o]][t]]=a[o]);return r}function B0(e){for(var t=[],r=xn(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function du(e){for(var t=[],r=xn(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function eC(e){for(var t=[],r=xn(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var $d=new Date(1899,11,30,0,0,0);function Pn(e,t){var r=e.getTime(),a=$d.getTime()+(e.getTimezoneOffset()-$d.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var Av=new Date,tC=$d.getTime()+(Av.getTimezoneOffset()-$d.getTimezoneOffset())*6e4,L1=Av.getTimezoneOffset();function Rv(e){var t=new Date;return t.setTime(e*24*60*60*1e3+tC),t.getTimezoneOffset()!==L1&&t.setTime(t.getTime()+(t.getTimezoneOffset()-L1)*6e4),t}var P1=new Date("2017-02-19T19:06:09.000Z"),Nv=isNaN(P1.getFullYear())?new Date("2/19/17"):P1,rC=Nv.getFullYear()==2017;function Dn(e,t){var r=new Date(e);if(rC)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Nv.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var o=e.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+o[0],+o[1]-1,+o[2],+o[3]||0,+o[4]||0,+o[5]||0);return e.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function uu(e,t){if(sr&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(c){return r[c]||c})}catch{}for(var a=[],o=0;o!=e.length;++o)a.push(String.fromCharCode(e[o]));return a.join("")}function zn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=zn(e[r]));return t}function Mr(e,t){for(var r="";r.length<t;)r+=e;return r}function rs(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(o,c){return r=-r,c}),!isNaN(t=Number(a)))?t/r:t}var nC=["january","february","march","april","may","june","july","august","september","october","november","december"];function Xl(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),o=t.getMonth(),c=t.getDate();if(isNaN(c))return r;var d=e.toLowerCase();if(d.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(d=d.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),d.length>3&&nC.indexOf(d)==-1)return r}else if(d.match(/[a-z]/))return r;return a<0||a>8099?r:(o>0||c>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function Ft(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return sr?a=os(r):a=E6(r),vr.utils.cfb_add(e,t,a)}vr.utils.cfb_add(e,t,r)}else e.file(t,r)}function F0(){return vr.utils.cfb_new()}var $r=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,aC={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},L0=B0(aC),P0=/[&<>'"]/g,sC=/[\u0000-\u0008\u000b-\u001f]/g;function hr(e){var t=e+"";return t.replace(P0,function(r){return L0[r]}).replace(sC,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function z1(e){return hr(e).replace(/ /g,"_x0020_")}var Dv=/[\u0000-\u001f]/g;function iC(e){var t=e+"";return t.replace(P0,function(r){return L0[r]}).replace(/\n/g,"<br/>").replace(Dv,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function oC(e){var t=e+"";return t.replace(P0,function(r){return L0[r]}).replace(Dv,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function lC(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function cC(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Bh(e){for(var t="",r=0,a=0,o=0,c=0,d=0,f=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(o=e.charCodeAt(r++),a>191&&a<224){d=(a&31)<<6,d|=o&63,t+=String.fromCharCode(d);continue}if(c=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63);continue}d=e.charCodeAt(r++),f=((a&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536,t+=String.fromCharCode(55296+(f>>>10&1023)),t+=String.fromCharCode(56320+(f&1023))}return t}function U1(e){var t=gi(2*e.length),r,a,o=1,c=0,d=0,f;for(a=0;a<e.length;a+=o)o=1,(f=e.charCodeAt(a))<128?r=f:f<224?(r=(f&31)*64+(e.charCodeAt(a+1)&63),o=2):f<240?(r=(f&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),o=3):(o=4,r=(f&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,d=55296+(r>>>10&1023),r=56320+(r&1023)),d!==0&&(t[c++]=d&255,t[c++]=d>>>8,d=0),t[c++]=r%256,t[c++]=r>>>8;return t.slice(0,c).toString("ucs2")}function W1(e){return os(e,"binary").toString("utf8")}var Cd="foo bar baz",zl=sr&&(W1(Cd)==Bh(Cd)&&W1||U1(Cd)==Bh(Cd)&&U1)||Bh,Ql=sr?function(e){return os(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,o=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,o=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(o>>18&7))),t.push(String.fromCharCode(144+(o>>12&63))),t.push(String.fromCharCode(128+(o>>6&63))),t.push(String.fromCharCode(128+(o&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},dC=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),o=0;o<e.length;++o)a=a.replace(e[o][0],e[o][1]);return a}})(),Ov=/(^\s|\s$|\n)/;function pn(e,t){return"<"+e+(t.match(Ov)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Jl(e){return xn(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Je(e,t,r){return"<"+e+(r!=null?Jl(r):"")+(t!=null?(t.match(Ov)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function d0(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function uC(e,t){switch(typeof e){case"string":var r=Je("vt:lpwstr",hr(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Je((e|0)==e?"vt:i4":"vt:r8",hr(String(e)));case"boolean":return Je("vt:bool",e?"true":"false")}if(e instanceof Date)return Je("vt:filetime",d0(e));throw new Error("Unable to serialize "+e)}var nn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},No=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Jn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function fC(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),o=e[t+6]&15,c=5;c>=0;--c)o=o*256+e[t+c];return a==2047?o==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,o+=Math.pow(2,52)),r*Math.pow(2,a-52)*o)}function hC(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,o=0,c=0,d=a?-t:t;isFinite(d)?d==0?o=c=0:(o=Math.floor(Math.log(d)/Math.LN2),c=d*Math.pow(2,52-o),o<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?o=-1022:(c-=Math.pow(2,52),o+=1023)):(o=2047,c=isNaN(t)?26985:0);for(var f=0;f<=5;++f,c/=256)e[r+f]=c&255;e[r+6]=(o&15)<<4|c&15,e[r+7]=o>>4|a}var q1=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var o=0,c=e[0][a].length;o<c;o+=r)t.push.apply(t,e[0][a].slice(o,o+r));return t},H1=sr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:os(t)})):q1(e)}:q1,$1=function(e,t,r){for(var a=[],o=t;o<r;o+=2)a.push(String.fromCharCode(Il(e,o)));return a.join("").replace(Pl,"")},z0=sr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Pl,""):$1(e,t,r)}:$1,G1=function(e,t,r){for(var a=[],o=t;o<t+r;++o)a.push(("0"+e[o].toString(16)).slice(-2));return a.join("")},Iv=sr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):G1(e,t,r)}:G1,V1=function(e,t,r){for(var a=[],o=t;o<r;o++)a.push(String.fromCharCode(yo(e,o)));return a.join("")},oc=sr?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):V1(t,r,a)}:V1,Mv=function(e,t){var r=Zn(e,t);return r>0?oc(e,t+4,t+4+r-1):""},Bv=Mv,Fv=function(e,t){var r=Zn(e,t);return r>0?oc(e,t+4,t+4+r-1):""},Lv=Fv,Pv=function(e,t){var r=2*Zn(e,t);return r>0?oc(e,t+4,t+4+r-1):""},zv=Pv,Uv=function(t,r){var a=Zn(t,r);return a>0?z0(t,r+4,r+4+a):""},Wv=Uv,qv=function(e,t){var r=Zn(e,t);return r>0?oc(e,t+4,t+4+r):""},Hv=qv,$v=function(e,t){return fC(e,t)},Gd=$v,U0=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};sr&&(Bv=function(t,r){if(!Buffer.isBuffer(t))return Mv(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},Lv=function(t,r){if(!Buffer.isBuffer(t))return Fv(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},zv=function(t,r){if(!Buffer.isBuffer(t))return Pv(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},Wv=function(t,r){if(!Buffer.isBuffer(t))return Uv(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},Hv=function(t,r){if(!Buffer.isBuffer(t))return qv(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},Gd=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):$v(t,r)},U0=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var yo=function(e,t){return e[t]},Il=function(e,t){return e[t+1]*256+e[t]},pC=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Zn=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},di=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},gC=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Ul(e,t){var r="",a,o,c=[],d,f,h,p;switch(t){case"dbcs":if(p=this.l,sr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(h=0;h<e;++h)r+=String.fromCharCode(Il(this,p)),p+=2;e*=2;break;case"utf8":r=oc(this,this.l,this.l+e);break;case"utf16le":e*=2,r=z0(this,this.l,this.l+e);break;case"wstr":return Ul.call(this,e,"dbcs");case"lpstr-ansi":r=Bv(this,this.l),e=4+Zn(this,this.l);break;case"lpstr-cp":r=Lv(this,this.l),e=4+Zn(this,this.l);break;case"lpwstr":r=zv(this,this.l),e=4+2*Zn(this,this.l);break;case"lpp4":e=4+Zn(this,this.l),r=Wv(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Zn(this,this.l),r=Hv(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(d=yo(this,this.l+e++))!==0;)c.push(jd(d));r=c.join("");break;case"_wstr":for(e=0,r="";(d=Il(this,this.l+e))!==0;)c.push(jd(d)),e+=2;e+=2,r=c.join("");break;case"dbcs-cont":for(r="",p=this.l,h=0;h<e;++h){if(this.lens&&this.lens.indexOf(p)!==-1)return d=yo(this,p),this.l=p+1,f=Ul.call(this,e-h,d?"dbcs-cont":"sbcs-cont"),c.join("")+f;c.push(jd(Il(this,p))),p+=2}r=c.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",p=this.l,h=0;h!=e;++h){if(this.lens&&this.lens.indexOf(p)!==-1)return d=yo(this,p),this.l=p+1,f=Ul.call(this,e-h,d?"dbcs-cont":"sbcs-cont"),c.join("")+f;c.push(jd(yo(this,p))),p+=1}r=c.join("");break;default:switch(e){case 1:return a=yo(this,this.l),this.l++,a;case 2:return a=(t==="i"?pC:Il)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?di:gC)(this,this.l),this.l+=4,a):(o=Zn(this,this.l),this.l+=4,o);case 8:case-8:if(t==="f")return e==8?o=Gd(this,this.l):o=Gd([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,o;e=8;case 16:r=Iv(this,this.l,e);break}}return this.l+=e,r}var xC=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},mC=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},yC=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function vC(e,t,r){var a=0,o=0;if(r==="dbcs"){for(o=0;o!=t.length;++o)yC(this,t.charCodeAt(o),this.l+2*o);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),o=0;o!=t.length;++o)this[this.l+o]=t.charCodeAt(o)&255;a=t.length}else if(r==="hex"){for(;o<e;++o)this[this.l++]=parseInt(t.slice(2*o,2*o+2),16)||0;return this}else if(r==="utf16le"){var c=Math.min(this.l+e,this.length);for(o=0;o<Math.min(t.length,e);++o){var d=t.charCodeAt(o);this[this.l++]=d&255,this[this.l++]=d>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,xC(this,t,this.l);break;case 8:if(a=8,r==="f"){hC(this,t,this.l);break}case 16:break;case-4:a=4,mC(this,t,this.l);break}return this.l+=a,this}function Gv(e,t){var r=Iv(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Qn(e,t){e.l=t,e.read_shift=Ul,e.chk=Gv,e.write_shift=vC}function Ma(e,t){e.l+=t}function Me(e){var t=gi(e);return Qn(t,0),t}function Ln(){var e=[],t=sr?256:2048,r=function(p){var x=Me(p);return Qn(x,0),x},a=r(t),o=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},c=function(p){return a&&p<a.length-a.l?a:(o(),a=r(Math.max(p+1,t)))},d=function(){return o(),hn(e)},f=function(p){o(),a=p,a.l==null&&(a.l=a.length),c(t)};return{next:c,push:f,end:d,_bufs:e}}function We(e,t,r,a){var o=+t,c;if(!isNaN(o)){a||(a=fO[o].p||(r||[]).length||0),c=1+(o>=128?1:0)+1,a>=128&&++c,a>=16384&&++c,a>=2097152&&++c;var d=e.next(c);o<=127?d.write_shift(1,o):(d.write_shift(1,(o&127)+128),d.write_shift(1,o>>7));for(var f=0;f!=4;++f)if(a>=128)d.write_shift(1,(a&127)+128),a>>=7;else{d.write_shift(1,a);break}a>0&&U0(r)&&e.push(r)}}function Wl(e,t,r){var a=zn(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function Y1(e,t,r){var a=zn(e);return a.s=Wl(a.s,t.s,r),a.e=Wl(a.e,t.s,r),a}function ql(e,t){if(e.cRel&&e.c<0)for(e=zn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=zn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=pr(e);return!e.cRel&&e.cRel!=null&&(r=SC(r)),!e.rRel&&e.rRel!=null&&(r=bC(r)),r}function Fh(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+vn(e.s.c)+":"+(e.e.cRel?"":"$")+vn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+gn(e.s.r)+":"+(e.e.rRel?"":"$")+gn(e.e.r):ql(e.s,t.biff)+":"+ql(e.e,t.biff)}function W0(e){return parseInt(_C(e),10)-1}function gn(e){return""+(e+1)}function bC(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function _C(e){return e.replace(/\$(\d+)$/,"$1")}function q0(e){for(var t=wC(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function vn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function SC(e){return e.replace(/^([A-Z])/,"$$$1")}function wC(e){return e.replace(/^\$([A-Z])/,"$1")}function TC(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function an(e){for(var t=0,r=0,a=0;a<e.length;++a){var o=e.charCodeAt(a);o>=48&&o<=57?t=10*t+(o-48):o>=65&&o<=90&&(r=26*r+(o-64))}return{c:r-1,r:t-1}}function pr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function ea(e){var t=e.indexOf(":");return t==-1?{s:an(e),e:an(e)}:{s:an(e.slice(0,t)),e:an(e.slice(t+1))}}function Hr(e,t){return typeof t>"u"||typeof t=="number"?Hr(e.s,e.e):(typeof e!="string"&&(e=pr(e)),typeof t!="string"&&(t=pr(t)),e==t?e:e+":"+t)}function Er(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,o=0,c=e.length;for(r=0;a<c&&!((o=e.charCodeAt(a)-64)<1||o>26);++a)r=26*r+o;for(t.s.c=--r,r=0;a<c&&!((o=e.charCodeAt(a)-48)<0||o>9);++a)r=10*r+o;if(t.s.r=--r,a===c||o!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=c&&!((o=e.charCodeAt(a)-64)<1||o>26);++a)r=26*r+o;for(t.e.c=--r,r=0;a!=c&&!((o=e.charCodeAt(a)-48)<0||o>9);++a)r=10*r+o;return t.e.r=--r,t}function K1(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Ps(e.z,r?Pn(t):t)}catch{}try{return e.w=Ps((e.XF||{}).numFmtId||(r?14:0),r?Pn(t):t)}catch{return""+t}}function is(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?lc[e.v]||e.v:t==null?K1(e,e.v):K1(e,t))}function vi(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function Vv(e,t,r){var a=r||{},o=e?Array.isArray(e):a.dense,c=e||(o?[]:{}),d=0,f=0;if(c&&a.origin!=null){if(typeof a.origin=="number")d=a.origin;else{var h=typeof a.origin=="string"?an(a.origin):a.origin;d=h.r,f=h.c}c["!ref"]||(c["!ref"]="A1:A1")}var p={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var x=Er(c["!ref"]);p.s.c=x.s.c,p.s.r=x.s.r,p.e.c=Math.max(p.e.c,x.e.c),p.e.r=Math.max(p.e.r,x.e.r),d==-1&&(p.e.r=d=x.e.r+1)}for(var y=0;y!=t.length;++y)if(t[y]){if(!Array.isArray(t[y]))throw new Error("aoa_to_sheet expects an array of arrays");for(var v=0;v!=t[y].length;++v)if(!(typeof t[y][v]>"u")){var b={v:t[y][v]},w=d+y,_=f+v;if(p.s.r>w&&(p.s.r=w),p.s.c>_&&(p.s.c=_),p.e.r<w&&(p.e.r=w),p.e.c<_&&(p.e.c=_),t[y][v]&&typeof t[y][v]=="object"&&!Array.isArray(t[y][v])&&!(t[y][v]instanceof Date))b=t[y][v];else if(Array.isArray(b.v)&&(b.f=t[y][v][1],b.v=b.v[0]),b.v===null)if(b.f)b.t="n";else if(a.nullError)b.t="e",b.v=0;else if(a.sheetStubs)b.t="z";else continue;else typeof b.v=="number"?b.t="n":typeof b.v=="boolean"?b.t="b":b.v instanceof Date?(b.z=a.dateNF||Br[14],a.cellDates?(b.t="d",b.w=Ps(b.z,Pn(b.v))):(b.t="n",b.v=Pn(b.v),b.w=Ps(b.z,b.v))):b.t="s";if(o)c[w]||(c[w]=[]),c[w][_]&&c[w][_].z&&(b.z=c[w][_].z),c[w][_]=b;else{var S=pr({c:_,r:w});c[S]&&c[S].z&&(b.z=c[S].z),c[S]=b}}}return p.s.c<1e7&&(c["!ref"]=Hr(p)),c}function Do(e,t){return Vv(null,e,t)}function jC(e){return e.read_shift(4,"i")}function wa(e,t){return t||(t=Me(4)),t.write_shift(4,e),t}function bn(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function sn(e,t){var r=!1;return t==null&&(r=!0,t=Me(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function EC(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function kC(e,t){return t||(t=Me(4)),t.write_shift(2,0),t.write_shift(2,0),t}function H0(e,t){var r=e.l,a=e.read_shift(1),o=bn(e),c=[],d={t:o,h:o};if((a&1)!==0){for(var f=e.read_shift(4),h=0;h!=f;++h)c.push(EC(e));d.r=c}else d.r=[{ich:0,ifnt:0}];return e.l=r+t,d}function CC(e,t){var r=!1;return t==null&&(r=!0,t=Me(15+4*e.t.length)),t.write_shift(1,0),sn(e.t,t),r?t.slice(0,t.l):t}var AC=H0;function RC(e,t){var r=!1;return t==null&&(r=!0,t=Me(23+4*e.t.length)),t.write_shift(1,1),sn(e.t,t),t.write_shift(4,1),kC({},t),r?t.slice(0,t.l):t}function fa(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function bi(e,t){return t==null&&(t=Me(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function _i(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Si(e,t){return t==null&&(t=Me(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var NC=bn,Yv=sn;function $0(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Vd(e,t){var r=!1;return t==null&&(r=!0,t=Me(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var DC=bn,u0=$0,G0=Vd;function Kv(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var o=a===0?Gd([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):di(t,0)>>2;return r?o/100:o}function Xv(e,t){t==null&&(t=Me(4));var r=0,a=0,o=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:o==(o|0)&&o>=-536870912&&o<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?o:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Qv(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function OC(e,t){return t||(t=Me(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var wi=Qv,Oo=OC;function Io(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function xi(e,t){return(t||Me(8)).write_shift(8,e,"f")}function IC(e){var t={},r=e.read_shift(1),a=r>>>1,o=e.read_shift(1),c=e.read_shift(2,"i"),d=e.read_shift(1),f=e.read_shift(1),h=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=o;var p=qC[o];p&&(t.rgb=iy(p));break;case 2:t.rgb=iy([d,f,h]);break;case 3:t.theme=o;break}return c!=0&&(t.tint=c>0?c/32767:c/32768),t}function Yd(e,t){if(t||(t=Me(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function MC(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function BC(e,t){t||(t=Me(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var Jv=2,Xn=3,Ad=11,Kd=19,Rd=64,FC=65,LC=71,PC=4108,zC=4126,fn=80,X1={1:{n:"CodePage",t:Jv},2:{n:"Category",t:fn},3:{n:"PresentationFormat",t:fn},4:{n:"ByteCount",t:Xn},5:{n:"LineCount",t:Xn},6:{n:"ParagraphCount",t:Xn},7:{n:"SlideCount",t:Xn},8:{n:"NoteCount",t:Xn},9:{n:"HiddenCount",t:Xn},10:{n:"MultimediaClipCount",t:Xn},11:{n:"ScaleCrop",t:Ad},12:{n:"HeadingPairs",t:PC},13:{n:"TitlesOfParts",t:zC},14:{n:"Manager",t:fn},15:{n:"Company",t:fn},16:{n:"LinksUpToDate",t:Ad},17:{n:"CharacterCount",t:Xn},19:{n:"SharedDoc",t:Ad},22:{n:"HyperlinksChanged",t:Ad},23:{n:"AppVersion",t:Xn,p:"version"},24:{n:"DigSig",t:FC},26:{n:"ContentType",t:fn},27:{n:"ContentStatus",t:fn},28:{n:"Language",t:fn},29:{n:"Version",t:fn},255:{},2147483648:{n:"Locale",t:Kd},2147483651:{n:"Behavior",t:Kd},1919054434:{}},Q1={1:{n:"CodePage",t:Jv},2:{n:"Title",t:fn},3:{n:"Subject",t:fn},4:{n:"Author",t:fn},5:{n:"Keywords",t:fn},6:{n:"Comments",t:fn},7:{n:"Template",t:fn},8:{n:"LastAuthor",t:fn},9:{n:"RevNumber",t:fn},10:{n:"EditTime",t:Rd},11:{n:"LastPrinted",t:Rd},12:{n:"CreatedDate",t:Rd},13:{n:"ModifiedDate",t:Rd},14:{n:"PageCount",t:Xn},15:{n:"WordCount",t:Xn},16:{n:"CharCount",t:Xn},17:{n:"Thumbnail",t:LC},18:{n:"Application",t:fn},19:{n:"DocSecurity",t:Xn},255:{},2147483648:{n:"Locale",t:Kd},2147483651:{n:"Behavior",t:Kd},1919054434:{}};function UC(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var WC=UC([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),qC=zn(WC),lc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},HC={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Nd={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Zv(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function eb(e,t){var r=eC(HC),a=[],o;a[a.length]=$r,a[a.length]=Je("Types",null,{xmlns:nn.CT,"xmlns:xsd":nn.xsd,"xmlns:xsi":nn.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(h){return Je("Default",null,{Extension:h[0],ContentType:h[1]})}));var c=function(h){e[h]&&e[h].length>0&&(o=e[h][0],a[a.length]=Je("Override",null,{PartName:(o[0]=="/"?"":"/")+o,ContentType:Nd[h][t.bookType]||Nd[h].xlsx}))},d=function(h){(e[h]||[]).forEach(function(p){a[a.length]=Je("Override",null,{PartName:(p[0]=="/"?"":"/")+p,ContentType:Nd[h][t.bookType]||Nd[h].xlsx})})},f=function(h){(e[h]||[]).forEach(function(p){a[a.length]=Je("Override",null,{PartName:(p[0]=="/"?"":"/")+p,ContentType:r[h][0]})})};return c("workbooks"),d("sheets"),d("charts"),f("themes"),["strs","styles"].forEach(c),["coreprops","extprops","custprops"].forEach(f),f("vba"),f("comments"),f("threadedcomments"),f("drawings"),d("metadata"),f("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var tr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function tb(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function _o(e){var t=[$r,Je("Relationships",null,{xmlns:nn.RELS})];return xn(e["!id"]).forEach(function(r){t[t.length]=Je("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function fr(e,t,r,a,o,c){if(o||(o={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,o.Id="rId"+t,o.Type=a,o.Target=r,[tr.HLINK,tr.XPATH,tr.XMISS].indexOf(o.Type)>-1&&(o.TargetMode="External"),e["!id"][o.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][o.Id]=o,e[("/"+o.Target).replace("//","/")]=o,t}function $C(e){var t=[$r];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function J1(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function GC(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function VC(e){var t=[$r];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(J1(e[r][0],e[r][1])),t.push(GC("",e[r][0]));return t.push(J1("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function rb(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+zd.version+"</meta:generator></office:meta></office:document-meta>"}var fi=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Lh(e,t,r,a,o){o[e]!=null||t==null||t===""||(o[e]=t,t=hr(t),a[a.length]=r?Je(e,t,r):pn(e,t))}function nb(e,t){var r=t||{},a=[$r,Je("cp:coreProperties",null,{"xmlns:cp":nn.CORE_PROPS,"xmlns:dc":nn.dc,"xmlns:dcterms":nn.dcterms,"xmlns:dcmitype":nn.dcmitype,"xmlns:xsi":nn.xsi})],o={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&Lh("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:d0(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,o),e.ModifiedDate!=null&&Lh("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:d0(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,o));for(var c=0;c!=fi.length;++c){var d=fi[c],f=r.Props&&r.Props[d[1]]!=null?r.Props[d[1]]:e?e[d[1]]:null;f===!0?f="1":f===!1?f="0":typeof f=="number"&&(f=String(f)),f!=null&&Lh(d[0],f,null,a,o)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var So=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],ab=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function sb(e){var t=[],r=Je;return e||(e={}),e.Application="SheetJS",t[t.length]=$r,t[t.length]=Je("Properties",null,{xmlns:nn.EXT_PROPS,"xmlns:vt":nn.vt}),So.forEach(function(a){if(e[a[1]]!==void 0){var o;switch(a[2]){case"string":o=hr(String(e[a[1]]));break;case"bool":o=e[a[1]]?"true":"false";break}o!==void 0&&(t[t.length]=r(a[0],o))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+hr(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function ib(e){var t=[$r,Je("Properties",null,{xmlns:nn.CUST_PROPS,"xmlns:vt":nn.vt})];if(!e)return t.join("");var r=1;return xn(e).forEach(function(o){++r,t[t.length]=Je("property",uC(e[o]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:hr(o)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Z1={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function YC(e,t){var r=[];return xn(Z1).map(function(a){for(var o=0;o<fi.length;++o)if(fi[o][1]==a)return fi[o];for(o=0;o<So.length;++o)if(So[o][1]==a)return So[o];throw a}).forEach(function(a){if(e[a[1]]!=null){var o=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":o=new Date(o).toISOString().replace(/\.\d*Z/,"Z");break}typeof o=="number"?o=String(o):o===!0||o===!1?o=o?"1":"0":o instanceof Date&&(o=new Date(o).toISOString().replace(/\.\d*Z/,"")),r.push(pn(Z1[a[1]]||a[1],o))}}),Je("DocumentProperties",r.join(""),{xmlns:Jn.o})}function KC(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",o=[];return e&&xn(e).forEach(function(c){if(Object.prototype.hasOwnProperty.call(e,c)){for(var d=0;d<fi.length;++d)if(c==fi[d][1])return;for(d=0;d<So.length;++d)if(c==So[d][1])return;for(d=0;d<r.length;++d)if(c==r[d])return;var f=e[c],h="string";typeof f=="number"?(h="float",f=String(f)):f===!0||f===!1?(h="boolean",f=f?"1":"0"):f=String(f),o.push(Je(z1(c),f,{"dt:dt":h}))}}),t&&xn(t).forEach(function(c){if(Object.prototype.hasOwnProperty.call(t,c)&&!(e&&Object.prototype.hasOwnProperty.call(e,c))){var d=t[c],f="string";typeof d=="number"?(f="float",d=String(d)):d===!0||d===!1?(f="boolean",d=d?"1":"0"):d instanceof Date?(f="dateTime.tz",d=d.toISOString()):d=String(d),o.push(Je(z1(c),d,{"dt:dt":f}))}}),"<"+a+' xmlns="'+Jn.o+'">'+o.join("")+"</"+a+">"}function XC(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),o=(r-a)/Math.pow(2,32);a*=1e7,o*=1e7;var c=a/Math.pow(2,32)|0;c>0&&(a=a%Math.pow(2,32),o+=c);var d=Me(8);return d.write_shift(4,a),d.write_shift(4,o),d}function ey(e,t){var r=Me(4),a=Me(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=Me(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=XC(t);break;case 31:case 80:for(a=Me(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return hn([r,a])}var ob=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function QC(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function ty(e,t,r){var a=Me(8),o=[],c=[],d=8,f=0,h=Me(8),p=Me(8);if(h.write_shift(4,2),h.write_shift(4,1200),p.write_shift(4,1),c.push(h),o.push(p),d+=8+h.length,!t){p=Me(8),p.write_shift(4,0),o.unshift(p);var x=[Me(4)];for(x[0].write_shift(4,e.length),f=0;f<e.length;++f){var y=e[f][0];for(h=Me(8+2*(y.length+1)+(y.length%2?0:2)),h.write_shift(4,f+2),h.write_shift(4,y.length+1),h.write_shift(0,y,"dbcs");h.l!=h.length;)h.write_shift(1,0);x.push(h)}h=hn(x),c.unshift(h),d+=8+h.length}for(f=0;f<e.length;++f)if(!(t&&!t[e[f][0]])&&!(ob.indexOf(e[f][0])>-1||ab.indexOf(e[f][0])>-1)&&e[f][1]!=null){var v=e[f][1],b=0;if(t){b=+t[e[f][0]];var w=r[b];if(w.p=="version"&&typeof v=="string"){var _=v.split(".");v=(+_[0]<<16)+(+_[1]||0)}h=ey(w.t,v)}else{var S=QC(v);S==-1&&(S=31,v=String(v)),h=ey(S,v)}c.push(h),p=Me(8),p.write_shift(4,t?b:2+f),o.push(p),d+=8+h.length}var N=8*(c.length+1);for(f=0;f<c.length;++f)o[f].write_shift(4,N),N+=c[f].length;return a.write_shift(4,d),a.write_shift(4,c.length),hn([a].concat(o).concat(c))}function ry(e,t,r,a,o,c){var d=Me(o?68:48),f=[d];d.write_shift(2,65534),d.write_shift(2,0),d.write_shift(4,842412599),d.write_shift(16,vr.utils.consts.HEADER_CLSID,"hex"),d.write_shift(4,o?2:1),d.write_shift(16,t,"hex"),d.write_shift(4,o?68:48);var h=ty(e,r,a);if(f.push(h),o){var p=ty(o,null,null);d.write_shift(16,c,"hex"),d.write_shift(4,68+h.length),f.push(p)}return hn(f)}function JC(e,t){t||(t=Me(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function ZC(e,t){return e.read_shift(t)===1}function Nn(e,t){return t||(t=Me(2)),t.write_shift(2,+!!e),t}function lb(e){return e.read_shift(2,"u")}function ca(e,t){return t||(t=Me(2)),t.write_shift(2,e),t}function cb(e,t,r){return r||(r=Me(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function db(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),o="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var c=e.read_shift(1);c&&(o="dbcs-cont")}else r.biff==12&&(o="wstr");r.biff>=2&&r.biff<=5&&(o="cpstr");var d=a?e.read_shift(a,o):"";return d}function e5(e){var t=e.t||"",r=Me(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=Me(2*t.length);a.write_shift(2*t.length,t,"utf16le");var o=[r,a];return hn(o)}function t5(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var o=e.read_shift(1);return o===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function r5(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):t5(e,a,r)}function n5(e,t,r){if(r.biff>5)return r5(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function ub(e,t,r){return r||(r=Me(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function ny(e,t){t||(t=Me(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function a5(e){var t=Me(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var o=a.indexOf("#"),c=o>-1?31:23;switch(a.charAt(0)){case"#":c=28;break;case".":c&=-3;break}t.write_shift(4,2),t.write_shift(4,c);var d=[8,6815827,6619237,4849780,83];for(r=0;r<d.length;++r)t.write_shift(4,d[r]);if(c==28)a=a.slice(1),ny(a,t);else if(c&2){for(d="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<d.length;++r)t.write_shift(1,parseInt(d[r],16));var f=o>-1?a.slice(0,o):a;for(t.write_shift(4,2*(f.length+1)),r=0;r<f.length;++r)t.write_shift(2,f.charCodeAt(r));t.write_shift(2,0),c&8&&ny(o>-1?a.slice(o+1):"",t)}else{for(d="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<d.length;++r)t.write_shift(1,parseInt(d[r],16));for(var h=0;a.slice(h*3,h*3+3)=="../"||a.slice(h*3,h*3+3)=="..\\";)++h;for(t.write_shift(2,h),t.write_shift(4,a.length-3*h+1),r=0;r<a.length-3*h;++r)t.write_shift(1,a.charCodeAt(r+3*h)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function mi(e,t,r,a){return a||(a=Me(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function s5(e,t,r){var a=r.biff>8?4:2,o=e.read_shift(a),c=e.read_shift(a,"i"),d=e.read_shift(a,"i");return[o,c,d]}function i5(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),o=e.read_shift(2);return{s:{c:a,r:t},e:{c:o,r}}}function fb(e,t){return t||(t=Me(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function V0(e,t,r){var a=1536,o=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,o=8;break;case"biff4":a=4,o=6;break;case"biff3":a=3,o=6;break;case"biff2":a=2,o=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var c=Me(o);return c.write_shift(2,a),c.write_shift(2,t),o>4&&c.write_shift(2,29282),o>6&&c.write_shift(2,1997),o>8&&(c.write_shift(2,49161),c.write_shift(2,1),c.write_shift(2,1798),c.write_shift(2,0)),c}function o5(e,t){var r=!t||t.biff==8,a=Me(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function l5(e,t){var r=!t||t.biff>=8?2:1,a=Me(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var o=a.slice(0,a.l);return o.l=a.l,o}function c5(e,t){var r=Me(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],o=0;o<e.length;++o)a[o]=e5(e[o]);var c=hn([r].concat(a));return c.parts=[r.length].concat(a.map(function(d){return d.length})),c}function d5(){var e=Me(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function u5(e){var t=Me(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function f5(e,t){var r=e.name||"Arial",a=t&&t.biff==5,o=a?15+r.length:16+2*r.length,c=Me(o);return c.write_shift(2,e.sz*20),c.write_shift(4,0),c.write_shift(2,400),c.write_shift(4,0),c.write_shift(2,0),c.write_shift(1,r.length),a||c.write_shift(1,1),c.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),c}function h5(e,t,r,a){var o=Me(10);return mi(e,t,a,o),o.write_shift(4,r),o}function p5(e,t,r,a,o){var c=!o||o.biff==8,d=Me(8+ +c+(1+c)*r.length);return mi(e,t,a,d),d.write_shift(2,r.length),c&&d.write_shift(1,1),d.write_shift((1+c)*r.length,r,c?"utf16le":"sbcs"),d}function g5(e,t,r,a){var o=r&&r.biff==5;a||(a=Me(o?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(o?1:2,t.length),o||a.write_shift(1,1),a.write_shift((o?1:2)*t.length,t,o?"sbcs":"utf16le");var c=a.length>a.l?a.slice(0,a.l):a;return c.l==null&&(c.l=c.length),c}function x5(e,t){var r=t.biff==8||!t.biff?4:2,a=Me(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function ay(e,t,r,a){var o=r&&r.biff==5;a||(a=Me(o?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var c=0;return e.numFmtId>0&&o&&(c|=1024),a.write_shift(4,c),a.write_shift(4,0),o||a.write_shift(4,0),a.write_shift(2,0),a}function m5(e){var t=Me(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function y5(e,t,r,a,o,c){var d=Me(8);return mi(e,t,a,d),cb(r,c,d),d}function v5(e,t,r,a){var o=Me(14);return mi(e,t,a,o),xi(r,o),o}function b5(e,t,r){if(r.biff<8)return _5(e,t,r);for(var a=[],o=e.l+t,c=e.read_shift(r.biff>8?4:2);c--!==0;)a.push(s5(e,r.biff>8?12:6,r));if(e.l!=o)throw new Error("Bad ExternSheet: "+e.l+" != "+o);return a}function _5(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=db(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function S5(e){var t=Me(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)fb(e[r],t);return t}function w5(e){var t=Me(24),r=an(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),o=0;o<16;++o)t.write_shift(1,parseInt(a[o],16));return hn([t,a5(e[1])])}function T5(e){var t=e[1].Tooltip,r=Me(10+2*(t.length+1));r.write_shift(2,2048);var a=an(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var o=0;o<t.length;++o)r.write_shift(2,t.charCodeAt(o));return r.write_shift(2,0),r}function j5(e){return e||(e=Me(4)),e.write_shift(2,1),e.write_shift(2,1),e}function E5(e,t,r){if(!r.cellStyles)return Ma(e,t);var a=r&&r.biff>=12?4:2,o=e.read_shift(a),c=e.read_shift(a),d=e.read_shift(a),f=e.read_shift(a),h=e.read_shift(2);a==2&&(e.l+=2);var p={s:o,e:c,w:d,ixfe:f,flags:h};return(r.biff>=5||!r.biff)&&(p.level=h>>8&7),p}function k5(e,t){var r=Me(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function C5(e){for(var t=Me(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function A5(e,t,r){var a=Me(15);return dc(a,e,t),a.write_shift(8,r,"f"),a}function R5(e,t,r){var a=Me(9);return dc(a,e,t),a.write_shift(2,r),a}var N5=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=B0({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(f,h){var p=[],x=gi(1);switch(h.type){case"base64":x=_a(ss(f));break;case"binary":x=_a(f);break;case"buffer":case"array":x=f;break}Qn(x,0);var y=x.read_shift(1),v=!!(y&136),b=!1,w=!1;switch(y){case 2:break;case 3:break;case 48:b=!0,v=!0;break;case 49:b=!0,v=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+y.toString(16))}var _=0,S=521;y==2&&(_=x.read_shift(2)),x.l+=3,y!=2&&(_=x.read_shift(4)),_>1048576&&(_=1e6),y!=2&&(S=x.read_shift(2));var N=x.read_shift(2),R=h.codepage||1252;y!=2&&(x.l+=16,x.read_shift(1),x[x.l]!==0&&(R=e[x[x.l]]),x.l+=1,x.l+=2),w&&(x.l+=36);for(var O=[],P={},J=Math.min(x.length,y==2?521:S-10-(b?264:0)),ae=w?32:11;x.l<J&&x[x.l]!=13;)switch(P={},P.name=Ud.utils.decode(R,x.slice(x.l,x.l+ae)).replace(/[\u0000\r\n].*$/g,""),x.l+=ae,P.type=String.fromCharCode(x.read_shift(1)),y!=2&&!w&&(P.offset=x.read_shift(4)),P.len=x.read_shift(1),y==2&&(P.offset=x.read_shift(2)),P.dec=x.read_shift(1),P.name.length&&O.push(P),y!=2&&(x.l+=w?13:14),P.type){case"B":(!b||P.len!=8)&&h.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"G":case"P":h.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+P.type)}if(x[x.l]!==13&&(x.l=S-1),x.read_shift(1)!==13)throw new Error("DBF Terminator not found "+x.l+" "+x[x.l]);x.l=S;var Y=0,F=0;for(p[0]=[],F=0;F!=O.length;++F)p[0][F]=O[F].name;for(;_-- >0;){if(x[x.l]===42){x.l+=N;continue}for(++x.l,p[++Y]=[],F=0,F=0;F!=O.length;++F){var Q=x.slice(x.l,x.l+O[F].len);x.l+=O[F].len,Qn(Q,0);var oe=Ud.utils.decode(R,Q);switch(O[F].type){case"C":oe.trim().length&&(p[Y][F]=oe.replace(/\s+$/,""));break;case"D":oe.length===8?p[Y][F]=new Date(+oe.slice(0,4),+oe.slice(4,6)-1,+oe.slice(6,8)):p[Y][F]=oe;break;case"F":p[Y][F]=parseFloat(oe.trim());break;case"+":case"I":p[Y][F]=w?Q.read_shift(-4,"i")^2147483648:Q.read_shift(4,"i");break;case"L":switch(oe.trim().toUpperCase()){case"Y":case"T":p[Y][F]=!0;break;case"N":case"F":p[Y][F]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+oe+"|")}break;case"M":if(!v)throw new Error("DBF Unexpected MEMO for type "+y.toString(16));p[Y][F]="##MEMO##"+(w?parseInt(oe.trim(),10):Q.read_shift(4));break;case"N":oe=oe.replace(/\u0000/g,"").trim(),oe&&oe!="."&&(p[Y][F]=+oe||0);break;case"@":p[Y][F]=new Date(Q.read_shift(-8,"f")-621356832e5);break;case"T":p[Y][F]=new Date((Q.read_shift(4)-2440588)*864e5+Q.read_shift(4));break;case"Y":p[Y][F]=Q.read_shift(4,"i")/1e4+Q.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":p[Y][F]=-Q.read_shift(-8,"f");break;case"B":if(b&&O[F].len==8){p[Y][F]=Q.read_shift(8,"f");break}case"G":case"P":Q.l+=O[F].len;break;case"0":if(O[F].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+O[F].type)}}}if(y!=2&&x.l<x.length&&x[x.l++]!=26)throw new Error("DBF EOF Marker missing "+(x.l-1)+" of "+x.length+" "+x[x.l-1].toString(16));return h&&h.sheetRows&&(p=p.slice(0,h.sheetRows)),h.DBF=O,p}function a(f,h){var p=h||{};p.dateNF||(p.dateNF="yyyymmdd");var x=Do(r(f,p),p);return x["!cols"]=p.DBF.map(function(y){return{wch:y.len,DBF:y}}),delete p.DBF,x}function o(f,h){try{return vi(a(f,h),h)}catch(p){if(h&&h.WTF)throw p}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function d(f,h){var p=h||{};if(+p.codepage>=0&&Yl(+p.codepage),p.type=="string")throw new Error("Cannot write DBF to JS string");var x=Ln(),y=eu(f,{header:1,raw:!0,cellDates:!0}),v=y[0],b=y.slice(1),w=f["!cols"]||[],_=0,S=0,N=0,R=1;for(_=0;_<v.length;++_){if(((w[_]||{}).DBF||{}).name){v[_]=w[_].DBF.name,++N;continue}if(v[_]!=null){if(++N,typeof v[_]=="number"&&(v[_]=v[_].toString(10)),typeof v[_]!="string")throw new Error("DBF Invalid column name "+v[_]+" |"+typeof v[_]+"|");if(v.indexOf(v[_])!==_){for(S=0;S<1024;++S)if(v.indexOf(v[_]+"_"+S)==-1){v[_]+="_"+S;break}}}}var O=Er(f["!ref"]),P=[],J=[],ae=[];for(_=0;_<=O.e.c-O.s.c;++_){var Y="",F="",Q=0,oe=[];for(S=0;S<b.length;++S)b[S][_]!=null&&oe.push(b[S][_]);if(oe.length==0||v[_]==null){P[_]="?";continue}for(S=0;S<oe.length;++S){switch(typeof oe[S]){case"number":F="B";break;case"string":F="C";break;case"boolean":F="L";break;case"object":F=oe[S]instanceof Date?"D":"C";break;default:F="C"}Q=Math.max(Q,String(oe[S]).length),Y=Y&&Y!=F?"C":F}Q>250&&(Q=250),F=((w[_]||{}).DBF||{}).type,F=="C"&&w[_].DBF.len>Q&&(Q=w[_].DBF.len),Y=="B"&&F=="N"&&(Y="N",ae[_]=w[_].DBF.dec,Q=w[_].DBF.len),J[_]=Y=="C"||F=="N"?Q:c[Y]||0,R+=J[_],P[_]=Y}var q=x.next(32);for(q.write_shift(4,318902576),q.write_shift(4,b.length),q.write_shift(2,296+32*N),q.write_shift(2,R),_=0;_<4;++_)q.write_shift(4,0);for(q.write_shift(4,0|(+t[pv]||3)<<8),_=0,S=0;_<v.length;++_)if(v[_]!=null){var de=x.next(32),te=(v[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);de.write_shift(1,te,"sbcs"),de.write_shift(1,P[_]=="?"?"C":P[_],"sbcs"),de.write_shift(4,S),de.write_shift(1,J[_]||c[P[_]]||0),de.write_shift(1,ae[_]||0),de.write_shift(1,2),de.write_shift(4,0),de.write_shift(1,0),de.write_shift(4,0),de.write_shift(4,0),S+=J[_]||c[P[_]]||0}var ne=x.next(264);for(ne.write_shift(4,13),_=0;_<65;++_)ne.write_shift(4,0);for(_=0;_<b.length;++_){var me=x.next(R);for(me.write_shift(1,0),S=0;S<v.length;++S)if(v[S]!=null)switch(P[S]){case"L":me.write_shift(1,b[_][S]==null?63:b[_][S]?84:70);break;case"B":me.write_shift(8,b[_][S]||0,"f");break;case"N":var re="0";for(typeof b[_][S]=="number"&&(re=b[_][S].toFixed(ae[S]||0)),N=0;N<J[S]-re.length;++N)me.write_shift(1,32);me.write_shift(1,re,"sbcs");break;case"D":b[_][S]?(me.write_shift(4,("0000"+b[_][S].getFullYear()).slice(-4),"sbcs"),me.write_shift(2,("00"+(b[_][S].getMonth()+1)).slice(-2),"sbcs"),me.write_shift(2,("00"+b[_][S].getDate()).slice(-2),"sbcs")):me.write_shift(8,"00000000","sbcs");break;case"C":var be=String(b[_][S]!=null?b[_][S]:"").slice(0,J[S]);for(me.write_shift(1,be,"sbcs"),N=0;N<J[S]-be.length;++N)me.write_shift(1,32);break}}return x.next(1).write_shift(1,26),x.end()}return{to_workbook:o,to_sheet:a,from_sheet:d}})(),D5=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+xn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(v,b){var w=e[b];return typeof w=="number"?C1(w):w},a=function(v,b,w){var _=b.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return _==59?v:C1(_)};e["|"]=254;function o(v,b){switch(b.type){case"base64":return c(ss(v),b);case"binary":return c(v,b);case"buffer":return c(sr&&Buffer.isBuffer(v)?v.toString("binary"):sc(v),b);case"array":return c(uu(v),b)}throw new Error("Unrecognized type "+b.type)}function c(v,b){var w=v.split(/[\n\r]+/),_=-1,S=-1,N=0,R=0,O=[],P=[],J=null,ae={},Y=[],F=[],Q=[],oe=0,q;for(+b.codepage>=0&&Yl(+b.codepage);N!==w.length;++N){oe=0;var de=w[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),te=de.replace(/;;/g,"\0").split(";").map(function(Z){return Z.replace(/\u0000/g,";")}),ne=te[0],me;if(de.length>0)switch(ne){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":te[1].charAt(0)=="P"&&P.push(de.slice(3).replace(/;;/g,";"));break;case"C":var re=!1,be=!1,W=!1,xe=!1,C=-1,X=-1;for(R=1;R<te.length;++R)switch(te[R].charAt(0)){case"A":break;case"X":S=parseInt(te[R].slice(1))-1,be=!0;break;case"Y":for(_=parseInt(te[R].slice(1))-1,be||(S=0),q=O.length;q<=_;++q)O[q]=[];break;case"K":me=te[R].slice(1),me.charAt(0)==='"'?me=me.slice(1,me.length-1):me==="TRUE"?me=!0:me==="FALSE"?me=!1:isNaN(rs(me))?isNaN(Xl(me).getDate())||(me=Dn(me)):(me=rs(me),J!==null&&Ev(J)&&(me=Rv(me))),re=!0;break;case"E":xe=!0;var E=RA(te[R].slice(1),{r:_,c:S});O[_][S]=[O[_][S],E];break;case"S":W=!0,O[_][S]=[O[_][S],"S5S"];break;case"G":break;case"R":C=parseInt(te[R].slice(1))-1;break;case"C":X=parseInt(te[R].slice(1))-1;break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+de)}if(re&&(O[_][S]&&O[_][S].length==2?O[_][S][0]=me:O[_][S]=me,J=null),W){if(xe)throw new Error("SYLK shared formula cannot have own formula");var z=C>-1&&O[C][X];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");O[_][S][1]=NA(z[1],{r:_-C,c:S-X})}break;case"F":var H=0;for(R=1;R<te.length;++R)switch(te[R].charAt(0)){case"X":S=parseInt(te[R].slice(1))-1,++H;break;case"Y":for(_=parseInt(te[R].slice(1))-1,q=O.length;q<=_;++q)O[q]=[];break;case"M":oe=parseInt(te[R].slice(1))/20;break;case"F":break;case"G":break;case"P":J=P[parseInt(te[R].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(Q=te[R].slice(1).split(" "),q=parseInt(Q[0],10);q<=parseInt(Q[1],10);++q)oe=parseInt(Q[2],10),F[q-1]=oe===0?{hidden:!0}:{wch:oe},Y0(F[q-1]);break;case"C":S=parseInt(te[R].slice(1))-1,F[S]||(F[S]={});break;case"R":_=parseInt(te[R].slice(1))-1,Y[_]||(Y[_]={}),oe>0?(Y[_].hpt=oe,Y[_].hpx=mb(oe)):oe===0&&(Y[_].hidden=!0);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+de)}H<1&&(J=null);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+de)}}return Y.length>0&&(ae["!rows"]=Y),F.length>0&&(ae["!cols"]=F),b&&b.sheetRows&&(O=O.slice(0,b.sheetRows)),[O,ae]}function d(v,b){var w=o(v,b),_=w[0],S=w[1],N=Do(_,b);return xn(S).forEach(function(R){N[R]=S[R]}),N}function f(v,b){return vi(d(v,b),b)}function h(v,b,w,_){var S="C;Y"+(w+1)+";X"+(_+1)+";K";switch(v.t){case"n":S+=v.v||0,v.f&&!v.F&&(S+=";E"+X0(v.f,{r:w,c:_}));break;case"b":S+=v.v?"TRUE":"FALSE";break;case"e":S+=v.w||v.v;break;case"d":S+='"'+(v.w||v.v)+'"';break;case"s":S+='"'+v.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return S}function p(v,b){b.forEach(function(w,_){var S="F;W"+(_+1)+" "+(_+1)+" ";w.hidden?S+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=Xd(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=Qd(w.wpx)),typeof w.wch=="number"&&(S+=Math.round(w.wch))),S.charAt(S.length-1)!=" "&&v.push(S)})}function x(v,b){b.forEach(function(w,_){var S="F;";w.hidden?S+="M0;":w.hpt?S+="M"+20*w.hpt+";":w.hpx&&(S+="M"+20*Jd(w.hpx)+";"),S.length>2&&v.push(S+"R"+(_+1))})}function y(v,b){var w=["ID;PWXL;N;E"],_=[],S=Er(v["!ref"]),N,R=Array.isArray(v),O=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),v["!cols"]&&p(w,v["!cols"]),v["!rows"]&&x(w,v["!rows"]),w.push("B;Y"+(S.e.r-S.s.r+1)+";X"+(S.e.c-S.s.c+1)+";D"+[S.s.c,S.s.r,S.e.c,S.e.r].join(" "));for(var P=S.s.r;P<=S.e.r;++P)for(var J=S.s.c;J<=S.e.c;++J){var ae=pr({r:P,c:J});N=R?(v[P]||[])[J]:v[ae],!(!N||N.v==null&&(!N.f||N.F))&&_.push(h(N,v,P,J))}return w.join(O)+O+_.join(O)+O+"E"+O}return{to_workbook:f,to_sheet:d,from_sheet:y}})(),O5=(function(){function e(c,d){switch(d.type){case"base64":return t(ss(c),d);case"binary":return t(c,d);case"buffer":return t(sr&&Buffer.isBuffer(c)?c.toString("binary"):sc(c),d);case"array":return t(uu(c),d)}throw new Error("Unrecognized type "+d.type)}function t(c,d){for(var f=c.split(`
`),h=-1,p=-1,x=0,y=[];x!==f.length;++x){if(f[x].trim()==="BOT"){y[++h]=[],p=0;continue}if(!(h<0)){var v=f[x].trim().split(","),b=v[0],w=v[1];++x;for(var _=f[x]||"";(_.match(/["]/g)||[]).length&1&&x<f.length-1;)_+=`
`+f[++x];switch(_=_.trim(),+b){case-1:if(_==="BOT"){y[++h]=[],p=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?y[h][p]=!0:_==="FALSE"?y[h][p]=!1:isNaN(rs(w))?isNaN(Xl(w).getDate())?y[h][p]=w:y[h][p]=Dn(w):y[h][p]=rs(w),++p;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),y[h][p++]=_!==""?_:null;break}if(_==="EOD")break}}return d&&d.sheetRows&&(y=y.slice(0,d.sheetRows)),y}function r(c,d){return Do(e(c,d),d)}function a(c,d){return vi(r(c,d),d)}var o=(function(){var c=function(h,p,x,y,v){h.push(p),h.push(x+","+y),h.push('"'+v.replace(/"/g,'""')+'"')},d=function(h,p,x,y){h.push(p+","+x),h.push(p==1?'"'+y.replace(/"/g,'""')+'"':y)};return function(h){var p=[],x=Er(h["!ref"]),y,v=Array.isArray(h);c(p,"TABLE",0,1,"sheetjs"),c(p,"VECTORS",0,x.e.r-x.s.r+1,""),c(p,"TUPLES",0,x.e.c-x.s.c+1,""),c(p,"DATA",0,0,"");for(var b=x.s.r;b<=x.e.r;++b){d(p,-1,0,"BOT");for(var w=x.s.c;w<=x.e.c;++w){var _=pr({r:b,c:w});if(y=v?(h[b]||[])[w]:h[_],!y){d(p,1,0,"");continue}switch(y.t){case"n":var S=y.w;!S&&y.v!=null&&(S=y.v),S==null?y.f&&!y.F?d(p,1,0,"="+y.f):d(p,1,0,""):d(p,0,S,"V");break;case"b":d(p,0,y.v?1:0,y.v?"TRUE":"FALSE");break;case"s":d(p,1,0,isNaN(y.v)?y.v:'="'+y.v+'"');break;case"d":y.w||(y.w=Ps(y.z||Br[14],Pn(Dn(y.v)))),d(p,0,y.w,"V");break;default:d(p,1,0,"")}}}d(p,-1,0,"EOD");var N=`\r
`,R=p.join(N);return R}})();return{to_workbook:a,to_sheet:r,from_sheet:o}})(),hb=(function(){function e(y){return y.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(y){return y.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(y,v){for(var b=y.split(`
`),w=-1,_=-1,S=0,N=[];S!==b.length;++S){var R=b[S].trim().split(":");if(R[0]==="cell"){var O=an(R[1]);if(N.length<=O.r)for(w=N.length;w<=O.r;++w)N[w]||(N[w]=[]);switch(w=O.r,_=O.c,R[2]){case"t":N[w][_]=e(R[3]);break;case"v":N[w][_]=+R[3];break;case"vtf":var P=R[R.length-1];case"vtc":switch(R[3]){case"nl":N[w][_]=!!+R[4];break;default:N[w][_]=+R[4];break}R[2]=="vtf"&&(N[w][_]=[N[w][_],P])}}}return v&&v.sheetRows&&(N=N.slice(0,v.sheetRows)),N}function a(y,v){return Do(r(y,v),v)}function o(y,v){return vi(a(y,v),v)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),d=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,f=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),h="--SocialCalcSpreadsheetControlSave--";function p(y){if(!y||!y["!ref"])return"";for(var v=[],b=[],w,_="",S=ea(y["!ref"]),N=Array.isArray(y),R=S.s.r;R<=S.e.r;++R)for(var O=S.s.c;O<=S.e.c;++O)if(_=pr({r:R,c:O}),w=N?(y[R]||[])[O]:y[_],!(!w||w.v==null||w.t==="z")){switch(b=["cell",_,"t"],w.t){case"s":case"str":b.push(t(w.v));break;case"n":w.f?(b[2]="vtf",b[3]="n",b[4]=w.v,b[5]=t(w.f)):(b[2]="v",b[3]=w.v);break;case"b":b[2]="vt"+(w.f?"f":"c"),b[3]="nl",b[4]=w.v?"1":"0",b[5]=t(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var P=Pn(Dn(w.v));b[2]="vtc",b[3]="nd",b[4]=""+P,b[5]=w.w||Ps(w.z||Br[14],P);break;case"e":continue}v.push(b.join(":"))}return v.push("sheet:c:"+(S.e.c-S.s.c+1)+":r:"+(S.e.r-S.s.r+1)+":tvf:1"),v.push("valueformat:1:text-wiki"),v.join(`
`)}function x(y){return[c,d,f,d,p(y),h].join(`
`)}return{to_workbook:o,to_sheet:a,from_sheet:x}})(),I5=(function(){function e(x,y,v,b,w){w.raw?y[v][b]=x:x===""||(x==="TRUE"?y[v][b]=!0:x==="FALSE"?y[v][b]=!1:isNaN(rs(x))?isNaN(Xl(x).getDate())?y[v][b]=x:y[v][b]=Dn(x):y[v][b]=rs(x))}function t(x,y){var v=y||{},b=[];if(!x||x.length===0)return b;for(var w=x.split(/[\r\n]/),_=w.length-1;_>=0&&w[_].length===0;)--_;for(var S=10,N=0,R=0;R<=_;++R)N=w[R].indexOf(" "),N==-1?N=w[R].length:N++,S=Math.max(S,N);for(R=0;R<=_;++R){b[R]=[];var O=0;for(e(w[R].slice(0,S).trim(),b,R,O,v),O=1;O<=(w[R].length-S)/10+1;++O)e(w[R].slice(S+(O-1)*10,S+O*10).trim(),b,R,O,v)}return v.sheetRows&&(b=b.slice(0,v.sheetRows)),b}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function o(x){for(var y={},v=!1,b=0,w=0;b<x.length;++b)(w=x.charCodeAt(b))==34?v=!v:!v&&w in r&&(y[w]=(y[w]||0)+1);w=[];for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&w.push([y[b],b]);if(!w.length){y=a;for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&w.push([y[b],b])}return w.sort(function(_,S){return _[0]-S[0]||a[_[1]]-a[S[1]]}),r[w.pop()[1]]||44}function c(x,y){var v=y||{},b="",w=v.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};x.slice(0,4)=="sep="?x.charCodeAt(5)==13&&x.charCodeAt(6)==10?(b=x.charAt(4),x=x.slice(7)):x.charCodeAt(5)==13||x.charCodeAt(5)==10?(b=x.charAt(4),x=x.slice(6)):b=o(x.slice(0,1024)):v&&v.FS?b=v.FS:b=o(x.slice(0,1024));var S=0,N=0,R=0,O=0,P=0,J=b.charCodeAt(0),ae=!1,Y=0,F=x.charCodeAt(0);x=x.replace(/\r\n/mg,`
`);var Q=v.dateNF!=null?X6(v.dateNF):null;function oe(){var q=x.slice(O,P),de={};if(q.charAt(0)=='"'&&q.charAt(q.length-1)=='"'&&(q=q.slice(1,-1).replace(/""/g,'"')),q.length===0)de.t="z";else if(v.raw)de.t="s",de.v=q;else if(q.trim().length===0)de.t="s",de.v=q;else if(q.charCodeAt(0)==61)q.charCodeAt(1)==34&&q.charCodeAt(q.length-1)==34?(de.t="s",de.v=q.slice(2,-1).replace(/""/g,'"')):DA(q)?(de.t="n",de.f=q.slice(1)):(de.t="s",de.v=q);else if(q=="TRUE")de.t="b",de.v=!0;else if(q=="FALSE")de.t="b",de.v=!1;else if(!isNaN(R=rs(q)))de.t="n",v.cellText!==!1&&(de.w=q),de.v=R;else if(!isNaN(Xl(q).getDate())||Q&&q.match(Q)){de.z=v.dateNF||Br[14];var te=0;Q&&q.match(Q)&&(q=Q6(q,v.dateNF,q.match(Q)||[]),te=1),v.cellDates?(de.t="d",de.v=Dn(q,te)):(de.t="n",de.v=Pn(Dn(q,te))),v.cellText!==!1&&(de.w=Ps(de.z,de.v instanceof Date?Pn(de.v):de.v)),v.cellNF||delete de.z}else de.t="s",de.v=q;if(de.t=="z"||(v.dense?(w[S]||(w[S]=[]),w[S][N]=de):w[pr({c:N,r:S})]=de),O=P+1,F=x.charCodeAt(O),_.e.c<N&&(_.e.c=N),_.e.r<S&&(_.e.r=S),Y==J)++N;else if(N=0,++S,v.sheetRows&&v.sheetRows<=S)return!0}e:for(;P<x.length;++P)switch(Y=x.charCodeAt(P)){case 34:F===34&&(ae=!ae);break;case J:case 10:case 13:if(!ae&&oe())break e;break}return P-O>0&&oe(),w["!ref"]=Hr(_),w}function d(x,y){return!(y&&y.PRN)||y.FS||x.slice(0,4)=="sep="||x.indexOf("	")>=0||x.indexOf(",")>=0||x.indexOf(";")>=0?c(x,y):Do(t(x,y),y)}function f(x,y){var v="",b=y.type=="string"?[0,0,0,0]:GO(x,y);switch(y.type){case"base64":v=ss(x);break;case"binary":v=x;break;case"buffer":y.codepage==65001?v=x.toString("utf8"):y.codepage&&typeof Ud<"u"||(v=sr&&Buffer.isBuffer(x)?x.toString("binary"):sc(x));break;case"array":v=uu(x);break;case"string":v=x;break;default:throw new Error("Unrecognized type "+y.type)}return b[0]==239&&b[1]==187&&b[2]==191?v=zl(v.slice(3)):y.type!="string"&&y.type!="buffer"&&y.codepage==65001?v=zl(v):y.type=="binary"&&typeof Ud<"u",v.slice(0,19)=="socialcalc:version:"?hb.to_sheet(y.type=="string"?v:zl(v),y):d(v,y)}function h(x,y){return vi(f(x,y),y)}function p(x){for(var y=[],v=Er(x["!ref"]),b,w=Array.isArray(x),_=v.s.r;_<=v.e.r;++_){for(var S=[],N=v.s.c;N<=v.e.c;++N){var R=pr({r:_,c:N});if(b=w?(x[_]||[])[N]:x[R],!b||b.v==null){S.push("          ");continue}for(var O=(b.w||(is(b),b.w)||"").slice(0,10);O.length<10;)O+=" ";S.push(O+(N===0?" ":""))}y.push(S.join(""))}return y.join(`
`)}return{to_workbook:h,to_sheet:f,from_sheet:p}})(),sy=(function(){function e(E,z,H){if(E){Qn(E,E.l||0);for(var Z=H.Enum||C;E.l<E.length;){var ge=E.read_shift(2),Fe=Z[ge]||Z[65535],qe=E.read_shift(2),Re=E.l+qe,Oe=Fe.f&&Fe.f(E,qe,H);if(E.l=Re,z(Oe,Fe,ge))return}}}function t(E,z){switch(z.type){case"base64":return r(_a(ss(E)),z);case"binary":return r(_a(E),z);case"buffer":case"array":return r(E,z)}throw"Unsupported type "+z.type}function r(E,z){if(!E)return E;var H=z||{},Z=H.dense?[]:{},ge="Sheet1",Fe="",qe=0,Re={},Oe=[],et=[],ve={s:{r:0,c:0},e:{r:0,c:0}},Ge=H.sheetRows||0;if(E[2]==0&&(E[3]==8||E[3]==9)&&E.length>=16&&E[14]==5&&E[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(E[2]==2)H.Enum=C,e(E,function(Be,gt,at){switch(at){case 0:H.vers=Be,Be>=4096&&(H.qpro=!0);break;case 6:ve=Be;break;case 204:Be&&(Fe=Be);break;case 222:Fe=Be;break;case 15:case 51:H.qpro||(Be[1].v=Be[1].v.slice(1));case 13:case 14:case 16:at==14&&(Be[2]&112)==112&&(Be[2]&15)>1&&(Be[2]&15)<15&&(Be[1].z=H.dateNF||Br[14],H.cellDates&&(Be[1].t="d",Be[1].v=Rv(Be[1].v))),H.qpro&&Be[3]>qe&&(Z["!ref"]=Hr(ve),Re[ge]=Z,Oe.push(ge),Z=H.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},qe=Be[3],ge=Fe||"Sheet"+(qe+1),Fe="");var vt=H.dense?(Z[Be[0].r]||[])[Be[0].c]:Z[pr(Be[0])];if(vt){vt.t=Be[1].t,vt.v=Be[1].v,Be[1].z!=null&&(vt.z=Be[1].z),Be[1].f!=null&&(vt.f=Be[1].f);break}H.dense?(Z[Be[0].r]||(Z[Be[0].r]=[]),Z[Be[0].r][Be[0].c]=Be[1]):Z[pr(Be[0])]=Be[1];break}},H);else if(E[2]==26||E[2]==14)H.Enum=X,E[2]==14&&(H.qpro=!0,E.l=0),e(E,function(Be,gt,at){switch(at){case 204:ge=Be;break;case 22:Be[1].v=Be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Be[3]>qe&&(Z["!ref"]=Hr(ve),Re[ge]=Z,Oe.push(ge),Z=H.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},qe=Be[3],ge="Sheet"+(qe+1)),Ge>0&&Be[0].r>=Ge)break;H.dense?(Z[Be[0].r]||(Z[Be[0].r]=[]),Z[Be[0].r][Be[0].c]=Be[1]):Z[pr(Be[0])]=Be[1],ve.e.c<Be[0].c&&(ve.e.c=Be[0].c),ve.e.r<Be[0].r&&(ve.e.r=Be[0].r);break;case 27:Be[14e3]&&(et[Be[14e3][0]]=Be[14e3][1]);break;case 1537:et[Be[0]]=Be[1],Be[0]==qe&&(ge=Be[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+E[2]);if(Z["!ref"]=Hr(ve),Re[Fe||ge]=Z,Oe.push(Fe||ge),!et.length)return{SheetNames:Oe,Sheets:Re};for(var G={},Ce=[],rt=0;rt<et.length;++rt)Re[Oe[rt]]?(Ce.push(et[rt]||Oe[rt]),G[et[rt]]=Re[et[rt]]||Re[Oe[rt]]):(Ce.push(et[rt]),G[et[rt]]={"!ref":"A1"});return{SheetNames:Ce,Sheets:G}}function a(E,z){var H=z||{};if(+H.codepage>=0&&Yl(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var Z=Ln(),ge=Er(E["!ref"]),Fe=Array.isArray(E),qe=[];Ze(Z,0,c(1030)),Ze(Z,6,h(ge));for(var Re=Math.min(ge.e.r,8191),Oe=ge.s.r;Oe<=Re;++Oe)for(var et=gn(Oe),ve=ge.s.c;ve<=ge.e.c;++ve){Oe===ge.s.r&&(qe[ve]=vn(ve));var Ge=qe[ve]+et,G=Fe?(E[Oe]||[])[ve]:E[Ge];if(!(!G||G.t=="z"))if(G.t=="n")(G.v|0)==G.v&&G.v>=-32768&&G.v<=32767?Ze(Z,13,b(Oe,ve,G.v)):Ze(Z,14,_(Oe,ve,G.v));else{var Ce=is(G);Ze(Z,15,y(Oe,ve,Ce.slice(0,239)))}}return Ze(Z,1),Z.end()}function o(E,z){var H=z||{};if(+H.codepage>=0&&Yl(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var Z=Ln();Ze(Z,0,d(E));for(var ge=0,Fe=0;ge<E.SheetNames.length;++ge)(E.Sheets[E.SheetNames[ge]]||{})["!ref"]&&Ze(Z,27,xe(E.SheetNames[ge],Fe++));var qe=0;for(ge=0;ge<E.SheetNames.length;++ge){var Re=E.Sheets[E.SheetNames[ge]];if(!(!Re||!Re["!ref"])){for(var Oe=Er(Re["!ref"]),et=Array.isArray(Re),ve=[],Ge=Math.min(Oe.e.r,8191),G=Oe.s.r;G<=Ge;++G)for(var Ce=gn(G),rt=Oe.s.c;rt<=Oe.e.c;++rt){G===Oe.s.r&&(ve[rt]=vn(rt));var Be=ve[rt]+Ce,gt=et?(Re[G]||[])[rt]:Re[Be];if(!(!gt||gt.t=="z"))if(gt.t=="n")Ze(Z,23,oe(G,rt,qe,gt.v));else{var at=is(gt);Ze(Z,22,Y(G,rt,qe,at.slice(0,239)))}}++qe}}return Ze(Z,1),Z.end()}function c(E){var z=Me(2);return z.write_shift(2,E),z}function d(E){var z=Me(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var H=0,Z=0,ge=0,Fe=0;Fe<E.SheetNames.length;++Fe){var qe=E.SheetNames[Fe],Re=E.Sheets[qe];if(!(!Re||!Re["!ref"])){++ge;var Oe=ea(Re["!ref"]);H<Oe.e.r&&(H=Oe.e.r),Z<Oe.e.c&&(Z=Oe.e.c)}}return H>8191&&(H=8191),z.write_shift(2,H),z.write_shift(1,ge),z.write_shift(1,Z),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function f(E,z,H){var Z={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&H.qpro?(Z.s.c=E.read_shift(1),E.l++,Z.s.r=E.read_shift(2),Z.e.c=E.read_shift(1),E.l++,Z.e.r=E.read_shift(2),Z):(Z.s.c=E.read_shift(2),Z.s.r=E.read_shift(2),z==12&&H.qpro&&(E.l+=2),Z.e.c=E.read_shift(2),Z.e.r=E.read_shift(2),z==12&&H.qpro&&(E.l+=2),Z.s.c==65535&&(Z.s.c=Z.e.c=Z.s.r=Z.e.r=0),Z)}function h(E){var z=Me(8);return z.write_shift(2,E.s.c),z.write_shift(2,E.s.r),z.write_shift(2,E.e.c),z.write_shift(2,E.e.r),z}function p(E,z,H){var Z=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(Z[0].c=E.read_shift(1),Z[3]=E.read_shift(1),Z[0].r=E.read_shift(2),E.l+=2):(Z[2]=E.read_shift(1),Z[0].c=E.read_shift(2),Z[0].r=E.read_shift(2)),Z}function x(E,z,H){var Z=E.l+z,ge=p(E,z,H);if(ge[1].t="s",H.vers==20768){E.l++;var Fe=E.read_shift(1);return ge[1].v=E.read_shift(Fe,"utf8"),ge}return H.qpro&&E.l++,ge[1].v=E.read_shift(Z-E.l,"cstr"),ge}function y(E,z,H){var Z=Me(7+H.length);Z.write_shift(1,255),Z.write_shift(2,z),Z.write_shift(2,E),Z.write_shift(1,39);for(var ge=0;ge<Z.length;++ge){var Fe=H.charCodeAt(ge);Z.write_shift(1,Fe>=128?95:Fe)}return Z.write_shift(1,0),Z}function v(E,z,H){var Z=p(E,z,H);return Z[1].v=E.read_shift(2,"i"),Z}function b(E,z,H){var Z=Me(7);return Z.write_shift(1,255),Z.write_shift(2,z),Z.write_shift(2,E),Z.write_shift(2,H,"i"),Z}function w(E,z,H){var Z=p(E,z,H);return Z[1].v=E.read_shift(8,"f"),Z}function _(E,z,H){var Z=Me(13);return Z.write_shift(1,255),Z.write_shift(2,z),Z.write_shift(2,E),Z.write_shift(8,H,"f"),Z}function S(E,z,H){var Z=E.l+z,ge=p(E,z,H);if(ge[1].v=E.read_shift(8,"f"),H.qpro)E.l=Z;else{var Fe=E.read_shift(2);P(E.slice(E.l,E.l+Fe),ge),E.l+=Fe}return ge}function N(E,z,H){var Z=z&32768;return z&=-32769,z=(Z?E:0)+(z>=8192?z-16384:z),(Z?"":"$")+(H?vn(z):gn(z))}var R={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},O=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function P(E,z){Qn(E,0);for(var H=[],Z=0,ge="",Fe="",qe="",Re="";E.l<E.length;){var Oe=E[E.l++];switch(Oe){case 0:H.push(E.read_shift(8,"f"));break;case 1:Fe=N(z[0].c,E.read_shift(2),!0),ge=N(z[0].r,E.read_shift(2),!1),H.push(Fe+ge);break;case 2:{var et=N(z[0].c,E.read_shift(2),!0),ve=N(z[0].r,E.read_shift(2),!1);Fe=N(z[0].c,E.read_shift(2),!0),ge=N(z[0].r,E.read_shift(2),!1),H.push(et+ve+":"+Fe+ge)}break;case 3:if(E.l<E.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(E.read_shift(2));break;case 6:{for(var Ge="";Oe=E[E.l++];)Ge+=String.fromCharCode(Oe);H.push('"'+Ge.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:Re=H.pop(),qe=H.pop(),H.push(["AND","OR"][Oe-20]+"("+qe+","+Re+")");break;default:if(Oe<32&&O[Oe])Re=H.pop(),qe=H.pop(),H.push(qe+O[Oe]+Re);else if(R[Oe]){if(Z=R[Oe][1],Z==69&&(Z=E[E.l++]),Z>H.length){console.error("WK1 bad formula parse 0x"+Oe.toString(16)+":|"+H.join("|")+"|");return}var G=H.slice(-Z);H.length-=Z,H.push(R[Oe][0]+"("+G.join(",")+")")}else return Oe<=7?console.error("WK1 invalid opcode "+Oe.toString(16)):Oe<=24?console.error("WK1 unsupported op "+Oe.toString(16)):Oe<=30?console.error("WK1 invalid opcode "+Oe.toString(16)):Oe<=115?console.error("WK1 unsupported function opcode "+Oe.toString(16)):console.error("WK1 unrecognized opcode "+Oe.toString(16))}}H.length==1?z[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function J(E){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=E.read_shift(2),z[3]=E[E.l++],z[0].c=E[E.l++],z}function ae(E,z){var H=J(E);return H[1].t="s",H[1].v=E.read_shift(z-4,"cstr"),H}function Y(E,z,H,Z){var ge=Me(6+Z.length);ge.write_shift(2,E),ge.write_shift(1,H),ge.write_shift(1,z),ge.write_shift(1,39);for(var Fe=0;Fe<Z.length;++Fe){var qe=Z.charCodeAt(Fe);ge.write_shift(1,qe>=128?95:qe)}return ge.write_shift(1,0),ge}function F(E,z){var H=J(E);H[1].v=E.read_shift(2);var Z=H[1].v>>1;if(H[1].v&1)switch(Z&7){case 0:Z=(Z>>3)*5e3;break;case 1:Z=(Z>>3)*500;break;case 2:Z=(Z>>3)/20;break;case 3:Z=(Z>>3)/200;break;case 4:Z=(Z>>3)/2e3;break;case 5:Z=(Z>>3)/2e4;break;case 6:Z=(Z>>3)/16;break;case 7:Z=(Z>>3)/64;break}return H[1].v=Z,H}function Q(E,z){var H=J(E),Z=E.read_shift(4),ge=E.read_shift(4),Fe=E.read_shift(2);if(Fe==65535)return Z===0&&ge===3221225472?(H[1].t="e",H[1].v=15):Z===0&&ge===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var qe=Fe&32768;return Fe=(Fe&32767)-16446,H[1].v=(1-qe*2)*(ge*Math.pow(2,Fe+32)+Z*Math.pow(2,Fe)),H}function oe(E,z,H,Z){var ge=Me(14);if(ge.write_shift(2,E),ge.write_shift(1,H),ge.write_shift(1,z),Z==0)return ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(2,65535),ge;var Fe=0,qe=0,Re=0,Oe=0;return Z<0&&(Fe=1,Z=-Z),qe=Math.log2(Z)|0,Z/=Math.pow(2,qe-31),Oe=Z>>>0,(Oe&2147483648)==0&&(Z/=2,++qe,Oe=Z>>>0),Z-=Oe,Oe|=2147483648,Oe>>>=0,Z*=Math.pow(2,32),Re=Z>>>0,ge.write_shift(4,Re),ge.write_shift(4,Oe),qe+=16383+(Fe?32768:0),ge.write_shift(2,qe),ge}function q(E,z){var H=Q(E);return E.l+=z-14,H}function de(E,z){var H=J(E),Z=E.read_shift(4);return H[1].v=Z>>6,H}function te(E,z){var H=J(E),Z=E.read_shift(8,"f");return H[1].v=Z,H}function ne(E,z){var H=te(E);return E.l+=z-10,H}function me(E,z){return E[E.l+z-1]==0?E.read_shift(z,"cstr"):""}function re(E,z){var H=E[E.l++];H>z-1&&(H=z-1);for(var Z="";Z.length<H;)Z+=String.fromCharCode(E[E.l++]);return Z}function be(E,z,H){if(!(!H.qpro||z<21)){var Z=E.read_shift(1);E.l+=17,E.l+=1,E.l+=2;var ge=E.read_shift(z-21,"cstr");return[Z,ge]}}function W(E,z){for(var H={},Z=E.l+z;E.l<Z;){var ge=E.read_shift(2);if(ge==14e3){for(H[ge]=[0,""],H[ge][0]=E.read_shift(2);E[E.l];)H[ge][1]+=String.fromCharCode(E[E.l]),E.l++;E.l++}}return H}function xe(E,z){var H=Me(5+E.length);H.write_shift(2,14e3),H.write_shift(2,z);for(var Z=0;Z<E.length;++Z){var ge=E.charCodeAt(Z);H[H.l++]=ge>127?95:ge}return H[H.l++]=0,H}var C={0:{n:"BOF",f:lb},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:v},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:x},16:{n:"FORMULA",f:S},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:x},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:me},222:{n:"SHEETNAMELP",f:re},65535:{n:""}},X={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ae},23:{n:"NUMBER17",f:Q},24:{n:"NUMBER18",f:F},25:{n:"FORMULA19",f:q},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:W},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:de},38:{n:"??"},39:{n:"NUMBER27",f:te},40:{n:"FORMULA28",f:ne},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:me},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:be},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:o,to_workbook:t}})(),M5=/^\s|\s$|[\t\n\r]/;function pb(e,t){if(!t.bookSST)return"";var r=[$r];r[r.length]=Je("sst",null,{xmlns:No[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var o=e[a],c="<si>";o.r?c+=o.r:(c+="<t",o.t||(o.t=""),o.t.match(M5)&&(c+=' xml:space="preserve"'),c+=">"+hr(o.t)+"</t>"),c+="</si>",r[r.length]=c}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function B5(e){return[e.read_shift(4),e.read_shift(4)]}function F5(e,t){return t||(t=Me(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var L5=CC;function P5(e){var t=Ln();We(t,159,F5(e));for(var r=0;r<e.length;++r)We(t,19,L5(e[r]));return We(t,160),t.end()}function z5(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function gb(e){var t=0,r,a=z5(e),o=a.length+1,c,d,f,h,p;for(r=gi(o),r[0]=a.length,c=1;c!=o;++c)r[c]=a[c-1];for(c=o-1;c>=0;--c)d=r[c],f=(t&16384)===0?0:1,h=t<<1&32767,p=f|h,t=p^d;return t^52811}var U5=(function(){function e(o,c){switch(c.type){case"base64":return t(ss(o),c);case"binary":return t(o,c);case"buffer":return t(sr&&Buffer.isBuffer(o)?o.toString("binary"):sc(o),c);case"array":return t(uu(o),c)}throw new Error("Unrecognized type "+c.type)}function t(o,c){var d=c||{},f=d.dense?[]:{},h=o.match(/\\trowd.*?\\row\b/g);if(!h.length)throw new Error("RTF missing table");var p={s:{c:0,r:0},e:{c:0,r:h.length-1}};return h.forEach(function(x,y){Array.isArray(f)&&(f[y]=[]);for(var v=/\\\w+\b/g,b=0,w,_=-1;w=v.exec(x);){switch(w[0]){case"\\cell":var S=x.slice(b,v.lastIndex-w[0].length);if(S[0]==" "&&(S=S.slice(1)),++_,S.length){var N={v:S,t:"s"};Array.isArray(f)?f[y][_]=N:f[pr({r:y,c:_})]=N}break}b=v.lastIndex}_>p.e.c&&(p.e.c=_)}),f["!ref"]=Hr(p),f}function r(o,c){return vi(e(o,c),c)}function a(o){for(var c=["{\\rtf1\\ansi"],d=Er(o["!ref"]),f,h=Array.isArray(o),p=d.s.r;p<=d.e.r;++p){c.push("\\trowd\\trautofit1");for(var x=d.s.c;x<=d.e.c;++x)c.push("\\cellx"+(x+1));for(c.push("\\pard\\intbl"),x=d.s.c;x<=d.e.c;++x){var y=pr({r:p,c:x});f=h?(o[p]||[])[x]:o[y],!(!f||f.v==null&&(!f.f||f.F))&&(c.push(" "+(f.w||(is(f),f.w))),c.push("\\cell"))}c.push("\\pard\\intbl\\row")}return c.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}})();function iy(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var W5=6,ns=W5;function Xd(e){return Math.floor((e+Math.round(128/ns)/256)*ns)}function Qd(e){return Math.floor((e-5)/ns*100+.5)/100}function f0(e){return Math.round((e*ns+5)/ns*256)/256}function Y0(e){e.width?(e.wpx=Xd(e.width),e.wch=Qd(e.wpx),e.MDW=ns):e.wpx?(e.wch=Qd(e.wpx),e.width=f0(e.wch),e.MDW=ns):typeof e.wch=="number"&&(e.width=f0(e.wch),e.wpx=Xd(e.width),e.MDW=ns),e.customWidth&&delete e.customWidth}var q5=96,xb=q5;function Jd(e){return e*96/xb}function mb(e){return e*xb/96}function H5(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=Je("numFmt",null,{numFmtId:a,formatCode:hr(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Je("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function $5(e){var t=[];return t[t.length]=Je("cellXfs",null),e.forEach(function(r){t[t.length]=Je("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Je("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function yb(e,t){var r=[$r,Je("styleSheet",null,{xmlns:No[0],"xmlns:vt":nn.vt})],a;return e.SSF&&(a=H5(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=$5(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function G5(e,t){var r=e.read_shift(2),a=bn(e);return[r,a]}function V5(e,t,r){r||(r=Me(6+4*t.length)),r.write_shift(2,e),sn(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function Y5(e,t,r){var a={};a.sz=e.read_shift(2)/20;var o=MC(e);o.fItalic&&(a.italic=1),o.fCondense&&(a.condense=1),o.fExtend&&(a.extend=1),o.fShadow&&(a.shadow=1),o.fOutline&&(a.outline=1),o.fStrikeout&&(a.strike=1);var c=e.read_shift(2);switch(c===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var d=e.read_shift(1);d!=0&&(a.underline=d);var f=e.read_shift(1);f>0&&(a.family=f);var h=e.read_shift(1);switch(h>0&&(a.charset=h),e.l++,a.color=IC(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=bn(e),a}function K5(e,t){t||(t=Me(153)),t.write_shift(2,e.sz*20),BC(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Yd(e.color,t);var a=0;return a=2,t.write_shift(1,a),sn(e.name,t),t.length>t.l?t.slice(0,t.l):t}var X5=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ph,Q5=Ma;function oy(e,t){t||(t=Me(84)),Ph||(Ph=B0(X5));var r=Ph[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(Yd({auto:1},t),Yd({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function J5(e,t){var r=e.l+t,a=e.read_shift(2),o=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:o}}function vb(e,t,r){r||(r=Me(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Dl(e,t){return t||(t=Me(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Z5=Ma;function eA(e,t){return t||(t=Me(51)),t.write_shift(1,0),Dl(null,t),Dl(null,t),Dl(null,t),Dl(null,t),Dl(null,t),t.length>t.l?t.slice(0,t.l):t}function tA(e,t){return t||(t=Me(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Vd(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function rA(e,t,r){var a=Me(2052);return a.write_shift(4,e),Vd(t,a),Vd(r,a),a.length>a.l?a.slice(0,a.l):a}function nA(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)t[o]!=null&&++r}),r!=0&&(We(e,615,wa(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)t[o]!=null&&We(e,44,V5(o,t[o]))}),We(e,616))}}function aA(e){var t=1;We(e,611,wa(t)),We(e,43,K5({sz:12,color:{theme:1},name:"Calibri",family:2})),We(e,612)}function sA(e){var t=2;We(e,603,wa(t)),We(e,45,oy({patternType:"none"})),We(e,45,oy({patternType:"gray125"})),We(e,604)}function iA(e){var t=1;We(e,613,wa(t)),We(e,46,eA()),We(e,614)}function oA(e){var t=1;We(e,626,wa(t)),We(e,47,vb({numFmtId:0},65535)),We(e,627)}function lA(e,t){We(e,617,wa(t.length)),t.forEach(function(r){We(e,47,vb(r,0))}),We(e,618)}function cA(e){var t=1;We(e,619,wa(t)),We(e,48,tA({xfId:0,name:"Normal"})),We(e,620)}function dA(e){var t=0;We(e,505,wa(t)),We(e,506)}function uA(e){var t=0;We(e,508,rA(t,"TableStyleMedium9","PivotStyleMedium4")),We(e,509)}function fA(e,t){var r=Ln();return We(r,278),nA(r,e.SSF),aA(r),sA(r),iA(r),oA(r),lA(r,t.cellXfs),cA(r),dA(r),uA(r),We(r,279),r.end()}function bb(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[$r];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function hA(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:bn(e)}}function pA(e){var t=Me(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),sn(e.name,t),t.slice(0,t.l)}function gA(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function xA(e){var t=Me(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function mA(e,t){var r=Me(8+2*t.length);return r.write_shift(4,e),sn(t,r),r.slice(0,r.l)}function yA(e){return e.l+=4,e.read_shift(4)!=0}function vA(e,t){var r=Me(8);return r.write_shift(4,e),r.write_shift(4,1),r}function bA(){var e=Ln();return We(e,332),We(e,334,wa(1)),We(e,335,pA({name:"XLDAPR",version:12e4,flags:3496657072})),We(e,336),We(e,339,mA(1,"XLDAPR")),We(e,52),We(e,35,wa(514)),We(e,4096,wa(0)),We(e,4097,ca(1)),We(e,36),We(e,53),We(e,340),We(e,337,vA(1)),We(e,51,xA([[1,0]])),We(e,338),We(e,333),e.end()}function _b(){var e=[$r];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function _A(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=pr(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}var vo=1024;function Sb(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),o=[Je("xml",null,{"xmlns:v":Jn.v,"xmlns:o":Jn.o,"xmlns:x":Jn.x,"xmlns:mv":Jn.mv}).replace(/\/>/,">"),Je("o:shapelayout",Je("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Je("v:shapetype",[Je("v:stroke",null,{joinstyle:"miter"}),Je("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];vo<e*1e3;)vo+=1e3;return t.forEach(function(c){var d=an(c[0]),f={color2:"#BEFF82",type:"gradient"};f.type=="gradient"&&(f.angle="-180");var h=f.type=="gradient"?Je("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,p=Je("v:fill",h,f),x={on:"t",obscured:"t"};++vo,o=o.concat(["<v:shape"+Jl({id:"_x0000_s"+vo,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(c[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",p,Je("v:shadow",null,x),Je("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",pn("x:Anchor",[d.c+1,0,d.r+1,0,d.c+3,20,d.r+5,20].join(",")),pn("x:AutoFill","False"),pn("x:Row",String(d.r)),pn("x:Column",String(d.c)),c[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),o.push("</xml>"),o.join("")}function wb(e){var t=[$r,Je("comments",null,{xmlns:No[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(o){var c=hr(o.a);r.indexOf(c)==-1&&(r.push(c),t.push("<author>"+c+"</author>")),o.T&&o.ID&&r.indexOf("tc="+o.ID)==-1&&(r.push("tc="+o.ID),t.push("<author>tc="+o.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var o=0,c=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?o=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(h){h.a&&(o=r.indexOf(hr(h.a))),c.push(h.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+o+'"><text>'),c.length<=1)t.push(pn("t",hr(c[0]||"")));else{for(var d=`Comment:
    `+c[0]+`
`,f=1;f<c.length;++f)d+=`Reply:
    `+c[f]+`
`;t.push(pn("t",hr(d)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function SA(e,t,r){var a=[$r,Je("ThreadedComments",null,{xmlns:nn.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(o){var c="";(o[1]||[]).forEach(function(d,f){if(!d.T){delete d.ID;return}d.a&&t.indexOf(d.a)==-1&&t.push(d.a);var h={ref:o[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};f==0?c=h.id:h.parentId=c,d.ID=h.id,d.a&&(h.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(d.a)).slice(-12)+"}"),a.push(Je("threadedComment",pn("text",d.t||""),h))})}),a.push("</ThreadedComments>"),a.join("")}function wA(e){var t=[$r,Je("personList",null,{xmlns:nn.TCMNT,"xmlns:x":No[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(Je("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function TA(e){var t={};t.iauthor=e.read_shift(4);var r=wi(e);return t.rfx=r.s,t.ref=pr(r.s),e.l+=16,t}function jA(e,t){return t==null&&(t=Me(36)),t.write_shift(4,e[1].iauthor),Oo(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var EA=bn;function kA(e){return sn(e.slice(0,54))}function CA(e){var t=Ln(),r=[];return We(t,628),We(t,630),e.forEach(function(a){a[1].forEach(function(o){r.indexOf(o.a)>-1||(r.push(o.a.slice(0,54)),We(t,632,kA(o.a)))})}),We(t,631),We(t,633),e.forEach(function(a){a[1].forEach(function(o){o.iauthor=r.indexOf(o.a);var c={s:an(a[0]),e:an(a[0])};We(t,635,jA([c,o])),o.t&&o.t.length>0&&We(t,637,RC(o)),We(t,636),delete o.iauthor})}),We(t,634),We(t,629),t.end()}function AA(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var o=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");o.slice(-1)!=="/"&&vr.utils.cfb_add(e,o,t.FileIndex[a].content)}})}var Tb=["xlsb","xlsm","xlam","biff8","xla"],RA=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,o,c,d){var f=!1,h=!1;c.length==0?h=!0:c.charAt(0)=="["&&(h=!0,c=c.slice(1,-1)),d.length==0?f=!0:d.charAt(0)=="["&&(f=!0,d=d.slice(1,-1));var p=c.length>0?parseInt(c,10)|0:0,x=d.length>0?parseInt(d,10)|0:0;return f?x+=t.c:--x,h?p+=t.r:--p,o+(f?"":"$")+vn(x)+(h?"":"$")+gn(p)}return function(o,c){return t=c,o.replace(e,r)}})(),K0=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,X0=(function(){return function(t,r){return t.replace(K0,function(a,o,c,d,f,h){var p=q0(d)-(c?0:r.c),x=W0(h)-(f?0:r.r),y=x==0?"":f?x+1:"["+x+"]",v=p==0?"":c?p+1:"["+p+"]";return o+"R"+y+"C"+v})}})();function NA(e,t){return e.replace(K0,function(r,a,o,c,d,f){return a+(o=="$"?o+c:vn(q0(c)+t.c))+(d=="$"?d+f:gn(W0(f)+t.r))})}function DA(e){return e.length!=1}function qr(e){e.l+=1}function zs(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function jb(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return Eb(e);r.biff==12&&(a=4)}var o=e.read_shift(a),c=e.read_shift(a),d=zs(e),f=zs(e);return{s:{r:o,c:d[0],cRel:d[1],rRel:d[2]},e:{r:c,c:f[0],cRel:f[1],rRel:f[2]}}}function Eb(e){var t=zs(e),r=zs(e),a=e.read_shift(1),o=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:o,cRel:r[1],rRel:r[2]}}}function OA(e,t,r){if(r.biff<8)return Eb(e);var a=e.read_shift(r.biff==12?4:2),o=e.read_shift(r.biff==12?4:2),c=zs(e),d=zs(e);return{s:{r:a,c:c[0],cRel:c[1],rRel:c[2]},e:{r:o,c:d[0],cRel:d[1],rRel:d[2]}}}function kb(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return IA(e);var a=e.read_shift(r&&r.biff==12?4:2),o=zs(e);return{r:a,c:o[0],cRel:o[1],rRel:o[2]}}function IA(e){var t=zs(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function MA(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function BA(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return FA(e);var o=e.read_shift(a>=12?4:2),c=e.read_shift(2),d=(c&16384)>>14,f=(c&32768)>>15;if(c&=16383,f==1)for(;o>524287;)o-=1048576;if(d==1)for(;c>8191;)c=c-16384;return{r:o,c,cRel:d,rRel:f}}function FA(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,o=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),o==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:o,rRel:a}}function LA(e,t,r){var a=(e[e.l++]&96)>>5,o=jb(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,o]}function PA(e,t,r){var a=(e[e.l++]&96)>>5,o=e.read_shift(2,"i"),c=8;if(r)switch(r.biff){case 5:e.l+=12,c=6;break;case 12:c=12;break}var d=jb(e,c,r);return[a,o,d]}function zA(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function UA(e,t,r){var a=(e[e.l++]&96)>>5,o=e.read_shift(2),c=8;if(r)switch(r.biff){case 5:e.l+=12,c=6;break;case 12:c=12;break}return e.l+=c,[a,o]}function WA(e,t,r){var a=(e[e.l++]&96)>>5,o=OA(e,t-1,r);return[a,o]}function qA(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function ly(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function HA(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),o=[],c=0;c<=a;++c)o.push(e.read_shift(r&&r.biff==2?1:2));return o}function $A(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function GA(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function VA(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function YA(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function Cb(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function KA(e){return e.read_shift(2),Cb(e)}function XA(e){return e.read_shift(2),Cb(e)}function QA(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var o=kb(e,0,r);return[a,o]}function JA(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var o=BA(e,0,r);return[a,o]}function ZA(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var o=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var c=kb(e,0,r);return[a,o,c]}function eR(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var o=e.read_shift(r&&r.biff<=3?1:2);return[eN[o],Nb[o],a]}function tR(e,t,r){var a=e[e.l++],o=e.read_shift(1),c=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:rR(e);return[o,(c[0]===0?Nb:ZR)[c[1]]]}function rR(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function nR(e,t,r){e.l+=r&&r.biff==2?3:4}function aR(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),o=e.read_shift(r&&r.biff==2?1:2);return[a,o]}function sR(e){return e.l++,lc[e.read_shift(1)]}function iR(e){return e.l++,e.read_shift(2)}function oR(e){return e.l++,e.read_shift(1)!==0}function lR(e){return e.l++,Io(e)}function cR(e,t,r){return e.l++,db(e,t-1,r)}function dR(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ZC(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=lc[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Io(e);break;case 2:r[1]=n5(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function uR(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),o=[],c=0;c!=a;++c)o.push((r.biff==12?wi:i5)(e));return o}function fR(e,t,r){var a=0,o=0;r.biff==12?(a=e.read_shift(4),o=e.read_shift(4)):(o=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--o==0&&(o=256));for(var c=0,d=[];c!=a&&(d[c]=[]);++c)for(var f=0;f!=o;++f)d[c][f]=dR(e,r.biff);return d}function hR(e,t,r){var a=e.read_shift(1)>>>5&3,o=!r||r.biff>=8?4:2,c=e.read_shift(o);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,c]}function pR(e,t,r){if(r.biff==5)return gR(e);var a=e.read_shift(1)>>>5&3,o=e.read_shift(2),c=e.read_shift(4);return[a,o,c]}function gR(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function xR(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var o=e.read_shift(r&&r.biff==2?1:2);return[a,o]}function mR(e,t,r){var a=e.read_shift(1)>>>5&3,o=e.read_shift(r&&r.biff==2?1:2);return[a,o]}function yR(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function vR(e,t,r){var a=(e[e.l++]&96)>>5,o=e.read_shift(2),c=4;if(r)switch(r.biff){case 5:c=15;break;case 12:c=6;break}return e.l+=c,[a,o]}var bR=Ma,_R=Ma,SR=Ma;function cc(e,t,r){return e.l+=2,[MA(e)]}function Q0(e){return e.l+=6,[]}var wR=cc,TR=Q0,jR=Q0,ER=cc;function Ab(e){return e.l+=2,[lb(e),e.read_shift(2)&1]}var kR=cc,CR=Ab,AR=Q0,RR=cc,NR=cc,DR=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function OR(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),o=e.read_shift(2),c=e.read_shift(2),d=DR[r>>2&31];return{ixti:t,coltype:r&3,rt:d,idx:a,c:o,C:c}}function IR(e){return e.l+=2,[e.read_shift(4)]}function MR(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function BR(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function FR(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function LR(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function PR(e){return e.l+=4,[0,0]}var cy={1:{n:"PtgExp",f:aR},2:{n:"PtgTbl",f:SR},3:{n:"PtgAdd",f:qr},4:{n:"PtgSub",f:qr},5:{n:"PtgMul",f:qr},6:{n:"PtgDiv",f:qr},7:{n:"PtgPower",f:qr},8:{n:"PtgConcat",f:qr},9:{n:"PtgLt",f:qr},10:{n:"PtgLe",f:qr},11:{n:"PtgEq",f:qr},12:{n:"PtgGe",f:qr},13:{n:"PtgGt",f:qr},14:{n:"PtgNe",f:qr},15:{n:"PtgIsect",f:qr},16:{n:"PtgUnion",f:qr},17:{n:"PtgRange",f:qr},18:{n:"PtgUplus",f:qr},19:{n:"PtgUminus",f:qr},20:{n:"PtgPercent",f:qr},21:{n:"PtgParen",f:qr},22:{n:"PtgMissArg",f:qr},23:{n:"PtgStr",f:cR},26:{n:"PtgSheet",f:MR},27:{n:"PtgEndSheet",f:BR},28:{n:"PtgErr",f:sR},29:{n:"PtgBool",f:oR},30:{n:"PtgInt",f:iR},31:{n:"PtgNum",f:lR},32:{n:"PtgArray",f:qA},33:{n:"PtgFunc",f:eR},34:{n:"PtgFuncVar",f:tR},35:{n:"PtgName",f:hR},36:{n:"PtgRef",f:QA},37:{n:"PtgArea",f:LA},38:{n:"PtgMemArea",f:xR},39:{n:"PtgMemErr",f:bR},40:{n:"PtgMemNoMem",f:_R},41:{n:"PtgMemFunc",f:mR},42:{n:"PtgRefErr",f:yR},43:{n:"PtgAreaErr",f:zA},44:{n:"PtgRefN",f:JA},45:{n:"PtgAreaN",f:WA},46:{n:"PtgMemAreaN",f:FR},47:{n:"PtgMemNoMemN",f:LR},57:{n:"PtgNameX",f:pR},58:{n:"PtgRef3d",f:ZA},59:{n:"PtgArea3d",f:PA},60:{n:"PtgRefErr3d",f:vR},61:{n:"PtgAreaErr3d",f:UA},255:{}},zR={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},UR={1:{n:"PtgElfLel",f:Ab},2:{n:"PtgElfRw",f:RR},3:{n:"PtgElfCol",f:wR},6:{n:"PtgElfRwV",f:NR},7:{n:"PtgElfColV",f:ER},10:{n:"PtgElfRadical",f:kR},11:{n:"PtgElfRadicalS",f:AR},13:{n:"PtgElfColS",f:TR},15:{n:"PtgElfColSV",f:jR},16:{n:"PtgElfRadicalLel",f:CR},25:{n:"PtgList",f:OR},29:{n:"PtgSxName",f:IR},255:{}},WR={0:{n:"PtgAttrNoop",f:PR},1:{n:"PtgAttrSemi",f:YA},2:{n:"PtgAttrIf",f:GA},4:{n:"PtgAttrChoose",f:HA},8:{n:"PtgAttrGoto",f:$A},16:{n:"PtgAttrSum",f:nR},32:{n:"PtgAttrBaxcel",f:ly},33:{n:"PtgAttrBaxcel",f:ly},64:{n:"PtgAttrSpace",f:KA},65:{n:"PtgAttrSpaceSemi",f:XA},128:{n:"PtgAttrIfError",f:VA},255:{}};function qR(e,t,r,a){if(a.biff<8)return Ma(e,t);for(var o=e.l+t,c=[],d=0;d!==r.length;++d)switch(r[d][0]){case"PtgArray":r[d][1]=fR(e,0,a),c.push(r[d][1]);break;case"PtgMemArea":r[d][2]=uR(e,r[d][1],a),c.push(r[d][2]);break;case"PtgExp":a&&a.biff==12&&(r[d][1][1]=e.read_shift(4),c.push(r[d][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[d][0]}return t=o-e.l,t!==0&&c.push(Ma(e,t)),c}function HR(e,t,r){for(var a=e.l+t,o,c,d=[];a!=e.l;)t=a-e.l,c=e[e.l],o=cy[c]||cy[zR[c]],(c===24||c===25)&&(o=(c===24?UR:WR)[e[e.l+1]]),!o||!o.f?Ma(e,t):d.push([o.n,o.f(e,t,r)]);return d}function $R(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],o=[],c=0;c<a.length;++c){var d=a[c];if(d)switch(d[0]){case 2:o.push('"'+d[1].replace(/"/g,'""')+'"');break;default:o.push(d[1])}else o.push("")}t.push(o.join(","))}return t.join(";")}var GR={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function VR(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Rb(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var o="";if(r.biff>8)switch(e[a[0]][0]){case 357:return o=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?o:o+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return o=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?o:o+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return e[a[0]][0][3]?(o=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?o:o+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function dy(e,t,r){var a=Rb(e,t,r);return a=="#REF"?a:VR(a,r)}function jo(e,t,r,a,o){var c=o&&o.biff||8,d={s:{c:0,r:0}},f=[],h,p,x,y=0,v=0,b,w="";if(!e[0]||!e[0][0])return"";for(var _=-1,S="",N=0,R=e[0].length;N<R;++N){var O=e[0][N];switch(O[0]){case"PtgUminus":f.push("-"+f.pop());break;case"PtgUplus":f.push("+"+f.pop());break;case"PtgPercent":f.push(f.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(h=f.pop(),p=f.pop(),_>=0){switch(e[0][_][1][0]){case 0:S=Mr(" ",e[0][_][1][1]);break;case 1:S=Mr("\r",e[0][_][1][1]);break;default:if(S="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][_][1][0])}p=p+S,_=-1}f.push(p+GR[O[0]]+h);break;case"PtgIsect":h=f.pop(),p=f.pop(),f.push(p+" "+h);break;case"PtgUnion":h=f.pop(),p=f.pop(),f.push(p+","+h);break;case"PtgRange":h=f.pop(),p=f.pop(),f.push(p+":"+h);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":x=Wl(O[1][1],d,o),f.push(ql(x,c));break;case"PtgRefN":x=r?Wl(O[1][1],r,o):O[1][1],f.push(ql(x,c));break;case"PtgRef3d":y=O[1][1],x=Wl(O[1][2],d,o),w=dy(a,y,o),f.push(w+"!"+ql(x,c));break;case"PtgFunc":case"PtgFuncVar":var P=O[1][0],J=O[1][1];P||(P=0),P&=127;var ae=P==0?[]:f.slice(-P);f.length-=P,J==="User"&&(J=ae.shift()),f.push(J+"("+ae.join(",")+")");break;case"PtgBool":f.push(O[1]?"TRUE":"FALSE");break;case"PtgInt":f.push(O[1]);break;case"PtgNum":f.push(String(O[1]));break;case"PtgStr":f.push('"'+O[1].replace(/"/g,'""')+'"');break;case"PtgErr":f.push(O[1]);break;case"PtgAreaN":b=Y1(O[1][1],r?{s:r}:d,o),f.push(Fh(b,o));break;case"PtgArea":b=Y1(O[1][1],d,o),f.push(Fh(b,o));break;case"PtgArea3d":y=O[1][1],b=O[1][2],w=dy(a,y,o),f.push(w+"!"+Fh(b,o));break;case"PtgAttrSum":f.push("SUM("+f.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":v=O[1][2];var Y=(a.names||[])[v-1]||(a[0]||[])[v],F=Y?Y.Name:"SH33TJSNAME"+String(v);F&&F.slice(0,6)=="_xlfn."&&!o.xlfn&&(F=F.slice(6)),f.push(F);break;case"PtgNameX":var Q=O[1][1];v=O[1][2];var oe;if(o.biff<=5)Q<0&&(Q=-Q),a[Q]&&(oe=a[Q][v]);else{var q="";if(((a[Q]||[])[0]||[])[0]==14849||(((a[Q]||[])[0]||[])[0]==1025?a[Q][v]&&a[Q][v].itab>0&&(q=a.SheetNames[a[Q][v].itab-1]+"!"):q=a.SheetNames[v-1]+"!"),a[Q]&&a[Q][v])q+=a[Q][v].Name;else if(a[0]&&a[0][v])q+=a[0][v].Name;else{var de=(Rb(a,Q,o)||"").split(";;");de[v-1]?q=de[v-1]:q+="SH33TJSERRX"}f.push(q);break}oe||(oe={Name:"SH33TJSERRY"}),f.push(oe.Name);break;case"PtgParen":var te="(",ne=")";if(_>=0){switch(S="",e[0][_][1][0]){case 2:te=Mr(" ",e[0][_][1][1])+te;break;case 3:te=Mr("\r",e[0][_][1][1])+te;break;case 4:ne=Mr(" ",e[0][_][1][1])+ne;break;case 5:ne=Mr("\r",e[0][_][1][1])+ne;break;default:if(o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][_][1][0])}_=-1}f.push(te+f.pop()+ne);break;case"PtgRefErr":f.push("#REF!");break;case"PtgRefErr3d":f.push("#REF!");break;case"PtgExp":x={c:O[1][1],r:O[1][0]};var me={c:r.c,r:r.r};if(a.sharedf[pr(x)]){var re=a.sharedf[pr(x)];f.push(jo(re,d,me,a,o))}else{var be=!1;for(h=0;h!=a.arrayf.length;++h)if(p=a.arrayf[h],!(x.c<p[0].s.c||x.c>p[0].e.c)&&!(x.r<p[0].s.r||x.r>p[0].e.r)){f.push(jo(p[1],d,me,a,o)),be=!0;break}be||f.push(O[1])}break;case"PtgArray":f.push("{"+$R(O[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":f.push("");break;case"PtgAreaErr":f.push("#REF!");break;case"PtgAreaErr3d":f.push("#REF!");break;case"PtgList":f.push("Table"+O[1].idx+"[#"+O[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(O));default:throw new Error("Unrecognized Formula Token: "+String(O))}var W=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(o.biff!=3&&_>=0&&W.indexOf(e[0][N][0])==-1){O=e[0][_];var xe=!0;switch(O[1][0]){case 4:xe=!1;case 0:S=Mr(" ",O[1][1]);break;case 5:xe=!1;case 1:S=Mr("\r",O[1][1]);break;default:if(S="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+O[1][0])}f.push((xe?S:"")+f.pop()+(xe?"":S)),_=-1}}if(f.length>1&&o.WTF)throw new Error("bad formula stack");return f[0]}function YR(e){if(e==null){var t=Me(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return xi(e);return xi(0)}function KR(e,t,r,a,o){var c=mi(t,r,o),d=YR(e.v),f=Me(6),h=33;f.write_shift(2,h),f.write_shift(4,0);for(var p=Me(e.bf.length),x=0;x<e.bf.length;++x)p[x]=e.bf[x];var y=hn([c,d,f,p]);return y}function fu(e,t,r){var a=e.read_shift(4),o=HR(e,a,r),c=e.read_shift(4),d=c>0?qR(e,c,o,r):null;return[o,d]}var XR=fu,hu=fu,QR=fu,JR=fu,ZR={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Nb={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},eN={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function tN(e){var t="of:="+e.replace(K0,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function rN(e){return e.replace(/\./,"!")}var Hl=typeof Map<"u";function J0(e,t,r){var a=0,o=e.length;if(r){if(Hl?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var c=Hl?r.get(t):r[t];a<c.length;++a)if(e[c[a]].t===t)return e.Count++,c[a]}}else for(;a<o;++a)if(e[a].t===t)return e.Count++,a;return e[o]={t},e.Count++,e.Unique++,r&&(Hl?(r.has(t)||r.set(t,[]),r.get(t).push(o)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(o))),o}function pu(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(ns=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=Qd(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=f0(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Db(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function qs(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],o=60,c=e.length;if(a==null&&r.ssf){for(;o<392;++o)if(r.ssf[o]==null){kv(t.z,o),r.ssf[o]=t.z,r.revssf[t.z]=a=o;break}}for(o=0;o!=c;++o)if(e[o].numFmtId===a)return o;return e[c]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},c}function nN(e,t,r){if(e&&e["!ref"]){var a=Er(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function aN(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Hr(e[r])+'"/>';return t+"</mergeCells>"}function sN(e,t,r,a,o){var c=!1,d={},f=null;if(a.bookType!=="xlsx"&&t.vbaraw){var h=t.SheetNames[r];try{t.Workbook&&(h=t.Workbook.Sheets[r].CodeName||h)}catch{}c=!0,d.codeName=Ql(hr(h))}if(e&&e["!outline"]){var p={summaryBelow:1,summaryRight:1};e["!outline"].above&&(p.summaryBelow=0),e["!outline"].left&&(p.summaryRight=0),f=(f||"")+Je("outlinePr",null,p)}!c&&!f||(o[o.length]=Je("sheetPr",f,d))}var iN=["objects","scenarios","selectLockedCells","selectUnlockedCells"],oN=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function lN(e){var t={sheet:1};return iN.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),oN.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=gb(e.password).toString(16).toUpperCase()),Je("sheetProtection",null,t)}function cN(e){return Db(e),Je("pageMargins",null,e)}function dN(e,t){for(var r=["<cols>"],a,o=0;o!=t.length;++o)(a=t[o])&&(r[r.length]=Je("col",null,pu(o,a)));return r[r.length]="</cols>",r.join("")}function uN(e,t,r,a){var o=typeof e.ref=="string"?e.ref:Hr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var c=r.Workbook.Names,d=ea(o);d.s.r==d.e.r&&(d.e.r=ea(t["!ref"]).e.r,o=Hr(d));for(var f=0;f<c.length;++f){var h=c[f];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==a){h.Ref="'"+r.SheetNames[a]+"'!"+o;break}}return f==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+o}),Je("autoFilter",null,{ref:o})}function fN(e,t,r,a){var o={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(o.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),Je("sheetViews",Je("sheetView",null,o),{})}function hN(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var o="",c=e.t,d=e.v;if(e.t!=="z")switch(e.t){case"b":o=e.v?"1":"0";break;case"n":o=""+e.v;break;case"e":o=lc[e.v];break;case"d":a&&a.cellDates?o=Dn(e.v,-1).toISOString():(e=zn(e),e.t="n",o=""+(e.v=Pn(Dn(e.v)))),typeof e.z>"u"&&(e.z=Br[14]);break;default:o=e.v;break}var f=pn("v",hr(o)),h={r:t},p=qs(a.cellXfs,e,a);switch(p!==0&&(h.s=p),e.t){case"n":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){f=pn("v",""+J0(a.Strings,e.v,a.revStrings)),h.t="s";break}h.t="str";break}if(e.t!=c&&(e.t=c,e.v=d),typeof e.f=="string"&&e.f){var x=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;f=Je("f",hr(e.f),x)+(e.v!=null?f:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(h.cm=1),Je("c",f,h)}function pN(e,t,r,a){var o=[],c=[],d=Er(e["!ref"]),f="",h,p="",x=[],y=0,v=0,b=e["!rows"],w=Array.isArray(e),_={r:p},S,N=-1;for(v=d.s.c;v<=d.e.c;++v)x[v]=vn(v);for(y=d.s.r;y<=d.e.r;++y){for(c=[],p=gn(y),v=d.s.c;v<=d.e.c;++v){h=x[v]+p;var R=w?(e[y]||[])[v]:e[h];R!==void 0&&(f=hN(R,h,e,t))!=null&&c.push(f)}(c.length>0||b&&b[y])&&(_={r:p},b&&b[y]&&(S=b[y],S.hidden&&(_.hidden=1),N=-1,S.hpx?N=Jd(S.hpx):S.hpt&&(N=S.hpt),N>-1&&(_.ht=N,_.customHeight=1),S.level&&(_.outlineLevel=S.level)),o[o.length]=Je("row",c.join(""),_))}if(b)for(;y<b.length;++y)b&&b[y]&&(_={r:y+1},S=b[y],S.hidden&&(_.hidden=1),N=-1,S.hpx?N=Jd(S.hpx):S.hpt&&(N=S.hpt),N>-1&&(_.ht=N,_.customHeight=1),S.level&&(_.outlineLevel=S.level),o[o.length]=Je("row","",_));return o.join("")}function Ob(e,t,r,a){var o=[$r,Je("worksheet",null,{xmlns:No[0],"xmlns:r":nn.r})],c=r.SheetNames[e],d=0,f="",h=r.Sheets[c];h==null&&(h={});var p=h["!ref"]||"A1",x=Er(p);if(x.e.c>16383||x.e.r>1048575){if(t.WTF)throw new Error("Range "+p+" exceeds format limit A1:XFD1048576");x.e.c=Math.min(x.e.c,16383),x.e.r=Math.min(x.e.c,1048575),p=Hr(x)}a||(a={}),h["!comments"]=[];var y=[];sN(h,r,e,t,o),o[o.length]=Je("dimension",null,{ref:p}),o[o.length]=fN(h,t,e,r),t.sheetFormat&&(o[o.length]=Je("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),h["!cols"]!=null&&h["!cols"].length>0&&(o[o.length]=dN(h,h["!cols"])),o[d=o.length]="<sheetData/>",h["!links"]=[],h["!ref"]!=null&&(f=pN(h,t),f.length>0&&(o[o.length]=f)),o.length>d+1&&(o[o.length]="</sheetData>",o[d]=o[d].replace("/>",">")),h["!protect"]&&(o[o.length]=lN(h["!protect"])),h["!autofilter"]!=null&&(o[o.length]=uN(h["!autofilter"],h,r,e)),h["!merges"]!=null&&h["!merges"].length>0&&(o[o.length]=aN(h["!merges"]));var v=-1,b,w=-1;return h["!links"].length>0&&(o[o.length]="<hyperlinks>",h["!links"].forEach(function(_){_[1].Target&&(b={ref:_[0]},_[1].Target.charAt(0)!="#"&&(w=fr(a,-1,hr(_[1].Target).replace(/#.*$/,""),tr.HLINK),b["r:id"]="rId"+w),(v=_[1].Target.indexOf("#"))>-1&&(b.location=hr(_[1].Target.slice(v+1))),_[1].Tooltip&&(b.tooltip=hr(_[1].Tooltip)),o[o.length]=Je("hyperlink",null,b))}),o[o.length]="</hyperlinks>"),delete h["!links"],h["!margins"]!=null&&(o[o.length]=cN(h["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(o[o.length]=pn("ignoredErrors",Je("ignoredError",null,{numberStoredAsText:1,sqref:p}))),y.length>0&&(w=fr(a,-1,"../drawings/drawing"+(e+1)+".xml",tr.DRAW),o[o.length]=Je("drawing",null,{"r:id":"rId"+w}),h["!drawing"]=y),h["!comments"].length>0&&(w=fr(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",tr.VML),o[o.length]=Je("legacyDrawing",null,{"r:id":"rId"+w}),h["!legacy"]=w),o.length>1&&(o[o.length]="</worksheet>",o[1]=o[1].replace("/>",">")),o.join("")}function gN(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var o=e.read_shift(2);e.l+=1;var c=e.read_shift(1);return e.l=a,c&7&&(r.level=c&7),c&16&&(r.hidden=!0),c&32&&(r.hpt=o/20),r}function xN(e,t,r){var a=Me(145),o=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var c=320;o.hpx?c=Jd(o.hpx)*20:o.hpt&&(c=o.hpt*20),a.write_shift(2,c),a.write_shift(1,0);var d=0;o.level&&(d|=o.level),o.hidden&&(d|=16),(o.hpx||o.hpt)&&(d|=32),a.write_shift(1,d),a.write_shift(1,0);var f=0,h=a.l;a.l+=4;for(var p={r:e,c:0},x=0;x<16;++x)if(!(t.s.c>x+1<<10||t.e.c<x<<10)){for(var y=-1,v=-1,b=x<<10;b<x+1<<10;++b){p.c=b;var w=Array.isArray(r)?(r[p.r]||[])[p.c]:r[pr(p)];w&&(y<0&&(y=b),v=b)}y<0||(++f,a.write_shift(4,y),a.write_shift(4,v))}var _=a.l;return a.l=h,a.write_shift(4,f),a.l=_,a.length>a.l?a.slice(0,a.l):a}function mN(e,t,r,a){var o=xN(a,r,t);(o.length>17||(t["!rows"]||[])[a])&&We(e,0,o)}var yN=wi,vN=Oo;function bN(){}function _N(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=NC(e),r}function SN(e,t,r){r==null&&(r=Me(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var o=1;o<3;++o)r.write_shift(1,0);return Yd({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Yv(e,r),r.slice(0,r.l)}function wN(e){var t=fa(e);return[t]}function TN(e,t,r){return r==null&&(r=Me(8)),bi(t,r)}function jN(e){var t=_i(e);return[t]}function EN(e,t,r){return r==null&&(r=Me(4)),Si(t,r)}function kN(e){var t=fa(e),r=e.read_shift(1);return[t,r,"b"]}function CN(e,t,r){return r==null&&(r=Me(9)),bi(t,r),r.write_shift(1,e.v?1:0),r}function AN(e){var t=_i(e),r=e.read_shift(1);return[t,r,"b"]}function RN(e,t,r){return r==null&&(r=Me(5)),Si(t,r),r.write_shift(1,e.v?1:0),r}function NN(e){var t=fa(e),r=e.read_shift(1);return[t,r,"e"]}function DN(e,t,r){return r==null&&(r=Me(9)),bi(t,r),r.write_shift(1,e.v),r}function ON(e){var t=_i(e),r=e.read_shift(1);return[t,r,"e"]}function IN(e,t,r){return r==null&&(r=Me(8)),Si(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function MN(e){var t=fa(e),r=e.read_shift(4);return[t,r,"s"]}function BN(e,t,r){return r==null&&(r=Me(12)),bi(t,r),r.write_shift(4,t.v),r}function FN(e){var t=_i(e),r=e.read_shift(4);return[t,r,"s"]}function LN(e,t,r){return r==null&&(r=Me(8)),Si(t,r),r.write_shift(4,t.v),r}function PN(e){var t=fa(e),r=Io(e);return[t,r,"n"]}function zN(e,t,r){return r==null&&(r=Me(16)),bi(t,r),xi(e.v,r),r}function UN(e){var t=_i(e),r=Io(e);return[t,r,"n"]}function WN(e,t,r){return r==null&&(r=Me(12)),Si(t,r),xi(e.v,r),r}function qN(e){var t=fa(e),r=Kv(e);return[t,r,"n"]}function HN(e,t,r){return r==null&&(r=Me(12)),bi(t,r),Xv(e.v,r),r}function $N(e){var t=_i(e),r=Kv(e);return[t,r,"n"]}function GN(e,t,r){return r==null&&(r=Me(8)),Si(t,r),Xv(e.v,r),r}function VN(e){var t=fa(e),r=H0(e);return[t,r,"is"]}function YN(e){var t=fa(e),r=bn(e);return[t,r,"str"]}function KN(e,t,r){return r==null&&(r=Me(12+4*e.v.length)),bi(t,r),sn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function XN(e){var t=_i(e),r=bn(e);return[t,r,"str"]}function QN(e,t,r){return r==null&&(r=Me(8+4*e.v.length)),Si(t,r),sn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function JN(e,t,r){var a=e.l+t,o=fa(e);o.r=r["!row"];var c=e.read_shift(1),d=[o,c,"b"];if(r.cellFormula){e.l+=2;var f=hu(e,a-e.l,r);d[3]=jo(f,null,o,r.supbooks,r)}else e.l=a;return d}function ZN(e,t,r){var a=e.l+t,o=fa(e);o.r=r["!row"];var c=e.read_shift(1),d=[o,c,"e"];if(r.cellFormula){e.l+=2;var f=hu(e,a-e.l,r);d[3]=jo(f,null,o,r.supbooks,r)}else e.l=a;return d}function eD(e,t,r){var a=e.l+t,o=fa(e);o.r=r["!row"];var c=Io(e),d=[o,c,"n"];if(r.cellFormula){e.l+=2;var f=hu(e,a-e.l,r);d[3]=jo(f,null,o,r.supbooks,r)}else e.l=a;return d}function tD(e,t,r){var a=e.l+t,o=fa(e);o.r=r["!row"];var c=bn(e),d=[o,c,"str"];if(r.cellFormula){e.l+=2;var f=hu(e,a-e.l,r);d[3]=jo(f,null,o,r.supbooks,r)}else e.l=a;return d}var rD=wi,nD=Oo;function aD(e,t){return t==null&&(t=Me(4)),t.write_shift(4,e),t}function sD(e,t){var r=e.l+t,a=wi(e),o=$0(e),c=bn(e),d=bn(e),f=bn(e);e.l=r;var h={rfx:a,relId:o,loc:c,display:f};return d&&(h.Tooltip=d),h}function iD(e,t){var r=Me(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Oo({s:an(e[0]),e:an(e[0])},r),G0("rId"+t,r);var a=e[1].Target.indexOf("#"),o=a==-1?"":e[1].Target.slice(a+1);return sn(o||"",r),sn(e[1].Tooltip||"",r),sn("",r),r.slice(0,r.l)}function oD(){}function lD(e,t,r){var a=e.l+t,o=Qv(e),c=e.read_shift(1),d=[o];if(d[2]=c,r.cellFormula){var f=XR(e,a-e.l,r);d[1]=f}else e.l=a;return d}function cD(e,t,r){var a=e.l+t,o=wi(e),c=[o];if(r.cellFormula){var d=JR(e,a-e.l,r);c[1]=d,e.l=a}else e.l=a;return c}function dD(e,t,r){r==null&&(r=Me(18));var a=pu(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var o=0;return t.hidden&&(o|=1),typeof a.width=="number"&&(o|=2),t.level&&(o|=t.level<<8),r.write_shift(2,o),r}var Ib=["left","right","top","bottom","header","footer"];function uD(e){var t={};return Ib.forEach(function(r){t[r]=Io(e)}),t}function fD(e,t){return t==null&&(t=Me(48)),Db(e),Ib.forEach(function(r){xi(e[r],t)}),t}function hD(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function pD(e,t,r){r==null&&(r=Me(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function gD(e){var t=Me(24);return t.write_shift(4,4),t.write_shift(4,1),Oo(e,t),t}function xD(e,t){return t==null&&(t=Me(66)),t.write_shift(2,e.password?gb(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function mD(){}function yD(){}function vD(e,t,r,a,o,c,d){if(t.v===void 0)return!1;var f="";switch(t.t){case"b":f=t.v?"1":"0";break;case"d":t=zn(t),t.z=t.z||Br[14],t.v=Pn(Dn(t.v)),t.t="n";break;case"n":case"e":f=""+t.v;break;default:f=t.v;break}var h={r,c:a};switch(h.s=qs(o.cellXfs,t,o),t.l&&c["!links"].push([pr(h),t.l]),t.c&&c["!comments"].push([pr(h),t.c]),t.t){case"s":case"str":return o.bookSST?(f=J0(o.Strings,t.v,o.revStrings),h.t="s",h.v=f,d?We(e,18,LN(t,h)):We(e,7,BN(t,h))):(h.t="str",d?We(e,17,QN(t,h)):We(e,6,KN(t,h))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?d?We(e,13,GN(t,h)):We(e,2,HN(t,h)):d?We(e,16,WN(t,h)):We(e,5,zN(t,h)),!0;case"b":return h.t="b",d?We(e,15,RN(t,h)):We(e,4,CN(t,h)),!0;case"e":return h.t="e",d?We(e,14,IN(t,h)):We(e,3,DN(t,h)),!0}return d?We(e,12,EN(t,h)):We(e,1,TN(t,h)),!0}function bD(e,t,r,a){var o=Er(t["!ref"]||"A1"),c,d="",f=[];We(e,145);var h=Array.isArray(t),p=o.e.r;t["!rows"]&&(p=Math.max(o.e.r,t["!rows"].length-1));for(var x=o.s.r;x<=p;++x){d=gn(x),mN(e,t,o,x);var y=!1;if(x<=o.e.r)for(var v=o.s.c;v<=o.e.c;++v){x===o.s.r&&(f[v]=vn(v)),c=f[v]+d;var b=h?(t[x]||[])[v]:t[c];if(!b){y=!1;continue}y=vD(e,b,x,v,a,t,y)}}We(e,146)}function _D(e,t){!t||!t["!merges"]||(We(e,177,aD(t["!merges"].length)),t["!merges"].forEach(function(r){We(e,176,nD(r))}),We(e,178))}function SD(e,t){!t||!t["!cols"]||(We(e,390),t["!cols"].forEach(function(r,a){r&&We(e,60,dD(a,r))}),We(e,391))}function wD(e,t){!t||!t["!ref"]||(We(e,648),We(e,649,gD(Er(t["!ref"]))),We(e,650))}function TD(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var o=fr(r,-1,a[1].Target.replace(/#.*$/,""),tr.HLINK);We(e,494,iD(a,o))}}),delete t["!links"]}function jD(e,t,r,a){if(t["!comments"].length>0){var o=fr(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",tr.VML);We(e,551,G0("rId"+o)),t["!legacy"]=o}}function ED(e,t,r,a){if(t["!autofilter"]){var o=t["!autofilter"],c=typeof o.ref=="string"?o.ref:Hr(o.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var d=r.Workbook.Names,f=ea(c);f.s.r==f.e.r&&(f.e.r=ea(t["!ref"]).e.r,c=Hr(f));for(var h=0;h<d.length;++h){var p=d[h];if(p.Name=="_xlnm._FilterDatabase"&&p.Sheet==a){p.Ref="'"+r.SheetNames[a]+"'!"+c;break}}h==d.length&&d.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+c}),We(e,161,Oo(Er(c))),We(e,162)}}function kD(e,t,r){We(e,133),We(e,137,pD(t,r)),We(e,138),We(e,134)}function CD(e,t){t["!protect"]&&We(e,535,xD(t["!protect"]))}function AD(e,t,r,a){var o=Ln(),c=r.SheetNames[e],d=r.Sheets[c]||{},f=c;try{r&&r.Workbook&&(f=r.Workbook.Sheets[e].CodeName||f)}catch{}var h=Er(d["!ref"]||"A1");if(h.e.c>16383||h.e.r>1048575){if(t.WTF)throw new Error("Range "+(d["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575)}return d["!links"]=[],d["!comments"]=[],We(o,129),(r.vbaraw||d["!outline"])&&We(o,147,SN(f,d["!outline"])),We(o,148,vN(h)),kD(o,d,r.Workbook),SD(o,d),bD(o,d,e,t),CD(o,d),ED(o,d,r,e),_D(o,d),TD(o,d,a),d["!margins"]&&We(o,476,fD(d["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&wD(o,d),jD(o,d,e,a),We(o,130),o.end()}function RD(e,t){e.l+=10;var r=bn(e);return{name:r}}var ND=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function DD(e){return!e.Workbook||!e.Workbook.WBProps?"false":cC(e.Workbook.WBProps.date1904)?"true":"false"}var OD="][*?/\\".split("");function Mb(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return OD.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function ID(e,t,r){e.forEach(function(a,o){Mb(a);for(var c=0;c<o;++c)if(a==e[c])throw new Error("Duplicate Sheet Name: "+a);if(r){var d=t&&t[o]&&t[o].CodeName||a;if(d.charCodeAt(0)==95&&d.length>22)throw new Error("Bad Code Name: Worksheet"+d)}})}function MD(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];ID(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)nN(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function Bb(e){var t=[$r];t[t.length]=Je("workbook",null,{xmlns:No[0],"xmlns:r":nn.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(ND.forEach(function(f){e.Workbook.WBProps[f[0]]!=null&&e.Workbook.WBProps[f[0]]!=f[1]&&(a[f[0]]=e.Workbook.WBProps[f[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=Je("workbookPr",null,a);var o=e.Workbook&&e.Workbook.Sheets||[],c=0;if(o&&o[0]&&o[0].Hidden){for(t[t.length]="<bookViews>",c=0;c!=e.SheetNames.length&&!(!o[c]||!o[c].Hidden);++c);c==e.SheetNames.length&&(c=0),t[t.length]='<workbookView firstSheet="'+c+'" activeTab="'+c+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",c=0;c!=e.SheetNames.length;++c){var d={name:hr(e.SheetNames[c].slice(0,31))};if(d.sheetId=""+(c+1),d["r:id"]="rId"+(c+1),o[c])switch(o[c].Hidden){case 1:d.state="hidden";break;case 2:d.state="veryHidden";break}t[t.length]=Je("sheet",null,d)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(f){var h={name:f.Name};f.Comment&&(h.comment=f.Comment),f.Sheet!=null&&(h.localSheetId=""+f.Sheet),f.Hidden&&(h.hidden="1"),f.Ref&&(t[t.length]=Je("definedName",hr(f.Ref),h))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function BD(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=u0(e),r.name=bn(e),r}function FD(e,t){return t||(t=Me(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),G0(e.strRelID,t),sn(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function LD(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var o=t>8?bn(e):"";return o.length>0&&(r.CodeName=o),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function PD(e,t){t||(t=Me(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Yv(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function zD(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var o=e.read_shift(4),c=DC(e),d=QR(e,0,r),f=$0(e);e.l=a;var h={Name:c,Ptg:d};return o<268435455&&(h.Sheet=o),f&&(h.Comment=f),h}function UD(e,t){We(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,o={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};We(e,156,FD(o))}We(e,144)}function WD(e,t){t||(t=Me(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return sn("SheetJS",t),sn(zd.version,t),sn(zd.version,t),sn("7262",t),t.length>t.l?t.slice(0,t.l):t}function qD(e,t){t||(t=Me(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function HD(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,o=-1,c=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&o==-1?o=a:r[a].Hidden==1&&c==-1&&(c=a);c>o||(We(e,135),We(e,158,qD(o)),We(e,136))}}function $D(e,t){var r=Ln();return We(r,131),We(r,128,WD()),We(r,153,PD(e.Workbook&&e.Workbook.WBProps||null)),HD(r,e),UD(r,e),We(r,132),r.end()}function GD(e,t,r){return(t.slice(-4)===".bin"?$D:Bb)(e)}function VD(e,t,r,a,o){return(t.slice(-4)===".bin"?AD:Ob)(e,r,a,o)}function YD(e,t,r){return(t.slice(-4)===".bin"?fA:yb)(e,r)}function KD(e,t,r){return(t.slice(-4)===".bin"?P5:pb)(e,r)}function XD(e,t,r){return(t.slice(-4)===".bin"?CA:wb)(e)}function QD(e){return(e.slice(-4)===".bin"?bA:_b)()}function JD(e,t){var r=[];return e.Props&&r.push(YC(e.Props,t)),e.Custprops&&r.push(KC(e.Props,e.Custprops)),r.join("")}function ZD(){return""}function eO(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,o){var c=[];c.push(Je("NumberFormat",null,{"ss:Format":hr(Br[a.numFmtId])}));var d={"ss:ID":"s"+(21+o)};r.push(Je("Style",c.join(""),d))}),Je("Styles",r.join(""))}function Fb(e){return Je("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+X0(e.Ref,{r:0,c:0})})}function tO(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var o=t[a];o.Sheet==null&&(o.Name.match(/^_xlfn\./)||r.push(Fb(o)))}return Je("Names",r.join(""))}function rO(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var o=a.Workbook.Names,c=[],d=0;d<o.length;++d){var f=o[d];f.Sheet==r&&(f.Name.match(/^_xlfn\./)||c.push(Fb(f)))}return c.join("")}function nO(e,t,r,a){if(!e)return"";var o=[];if(e["!margins"]&&(o.push("<PageSetup>"),e["!margins"].header&&o.push(Je("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&o.push(Je("Footer",null,{"x:Margin":e["!margins"].footer})),o.push(Je("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),o.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)o.push(Je("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var c=0;c<r&&!(a.Workbook.Sheets[c]&&!a.Workbook.Sheets[c].Hidden);++c);c==r&&o.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&o.push("<DisplayRightToLeft/>"),e["!protect"]&&(o.push(pn("ProtectContents","True")),e["!protect"].objects&&o.push(pn("ProtectObjects","True")),e["!protect"].scenarios&&o.push(pn("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?o.push(pn("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&o.push(pn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(d){e["!protect"][d[0]]&&o.push("<"+d[1]+"/>")})),o.length==0?"":Je("WorksheetOptions",o.join(""),{xmlns:Jn.x})}function aO(e){return e.map(function(t){var r=lC(t.t||""),a=Je("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Je("Comment",a,{"ss:Author":t.a})}).join("")}function sO(e,t,r,a,o,c,d){if(!e||e.v==null&&e.f==null)return"";var f={};if(e.f&&(f["ss:Formula"]="="+hr(X0(e.f,d))),e.F&&e.F.slice(0,t.length)==t){var h=an(e.F.slice(t.length+1));f["ss:ArrayRange"]="RC:R"+(h.r==d.r?"":"["+(h.r-d.r)+"]")+"C"+(h.c==d.c?"":"["+(h.c-d.c)+"]")}if(e.l&&e.l.Target&&(f["ss:HRef"]=hr(e.l.Target),e.l.Tooltip&&(f["x:HRefScreenTip"]=hr(e.l.Tooltip))),r["!merges"])for(var p=r["!merges"],x=0;x!=p.length;++x)p[x].s.c!=d.c||p[x].s.r!=d.r||(p[x].e.c>p[x].s.c&&(f["ss:MergeAcross"]=p[x].e.c-p[x].s.c),p[x].e.r>p[x].s.r&&(f["ss:MergeDown"]=p[x].e.r-p[x].s.r));var y="",v="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":y="Number",v=String(e.v);break;case"b":y="Boolean",v=e.v?"1":"0";break;case"e":y="Error",v=lc[e.v];break;case"d":y="DateTime",v=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Br[14]);break;case"s":y="String",v=oC(e.v||"");break}var b=qs(a.cellXfs,e,a);f["ss:StyleID"]="s"+(21+b),f["ss:Index"]=d.c+1;var w=e.v!=null?v:"",_=e.t=="z"?"":'<Data ss:Type="'+y+'">'+w+"</Data>";return(e.c||[]).length>0&&(_+=aO(e.c)),Je("Cell",_,f)}function iO(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=mb(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function oO(e,t,r,a){if(!e["!ref"])return"";var o=Er(e["!ref"]),c=e["!merges"]||[],d=0,f=[];e["!cols"]&&e["!cols"].forEach(function(S,N){Y0(S);var R=!!S.width,O=pu(N,S),P={"ss:Index":N+1};R&&(P["ss:Width"]=Xd(O.width)),S.hidden&&(P["ss:Hidden"]="1"),f.push(Je("Column",null,P))});for(var h=Array.isArray(e),p=o.s.r;p<=o.e.r;++p){for(var x=[iO(p,(e["!rows"]||[])[p])],y=o.s.c;y<=o.e.c;++y){var v=!1;for(d=0;d!=c.length;++d)if(!(c[d].s.c>y)&&!(c[d].s.r>p)&&!(c[d].e.c<y)&&!(c[d].e.r<p)){(c[d].s.c!=y||c[d].s.r!=p)&&(v=!0);break}if(!v){var b={r:p,c:y},w=pr(b),_=h?(e[p]||[])[y]:e[w];x.push(sO(_,w,e,t,r,a,b))}}x.push("</Row>"),x.length>2&&f.push(x.join(""))}return f.join("")}function lO(e,t,r){var a=[],o=r.SheetNames[e],c=r.Sheets[o],d=c?rO(c,t,e,r):"";return d.length>0&&a.push("<Names>"+d+"</Names>"),d=c?oO(c,t,e,r):"",d.length>0&&a.push("<Table>"+d+"</Table>"),a.push(nO(c,t,e,r)),a.join("")}function cO(e,t){t||(t={}),e.SSF||(e.SSF=zn(Br)),e.SSF&&(cu(),lu(e.SSF),t.revssf=du(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],qs(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(JD(e,t)),r.push(ZD()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(Je("Worksheet",lO(a,t,e),{"ss:Name":hr(e.SheetNames[a])}));return r[2]=eO(e,t),r[3]=tO(e),$r+Je("Workbook",r.join(""),{xmlns:Jn.ss,"xmlns:o":Jn.o,"xmlns:x":Jn.x,"xmlns:ss":Jn.ss,"xmlns:dt":Jn.dt,"xmlns:html":Jn.html})}var zh={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function dO(e,t){var r=[],a=[],o=[],c=0,d,f=F1(X1,"n"),h=F1(Q1,"n");if(e.Props)for(d=xn(e.Props),c=0;c<d.length;++c)(Object.prototype.hasOwnProperty.call(f,d[c])?r:Object.prototype.hasOwnProperty.call(h,d[c])?a:o).push([d[c],e.Props[d[c]]]);if(e.Custprops)for(d=xn(e.Custprops),c=0;c<d.length;++c)Object.prototype.hasOwnProperty.call(e.Props||{},d[c])||(Object.prototype.hasOwnProperty.call(f,d[c])?r:Object.prototype.hasOwnProperty.call(h,d[c])?a:o).push([d[c],e.Custprops[d[c]]]);var p=[];for(c=0;c<o.length;++c)ob.indexOf(o[c][0])>-1||ab.indexOf(o[c][0])>-1||o[c][1]!=null&&p.push(o[c]);a.length&&vr.utils.cfb_add(t,"/SummaryInformation",ry(a,zh.SI,h,Q1)),(r.length||p.length)&&vr.utils.cfb_add(t,"/DocumentSummaryInformation",ry(r,zh.DSI,f,X1,p.length?p:null,zh.UDI))}function uO(e,t){var r=t||{},a=vr.utils.cfb_new({root:"R"}),o="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":o="/Workbook",r.biff=8;break;case"biff5":o="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return vr.utils.cfb_add(a,o,Lb(e,r)),r.biff==8&&(e.Props||e.Custprops)&&dO(e,a),r.biff==8&&e.vbaraw&&AA(a,vr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var fO={0:{f:gN},1:{f:wN},2:{f:qN},3:{f:NN},4:{f:kN},5:{f:PN},6:{f:YN},7:{f:MN},8:{f:tD},9:{f:eD},10:{f:JN},11:{f:ZN},12:{f:jN},13:{f:$N},14:{f:ON},15:{f:AN},16:{f:UN},17:{f:XN},18:{f:FN},19:{f:H0},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:zD},40:{},42:{},43:{f:Y5},44:{f:G5},45:{f:Q5},46:{f:Z5},47:{f:J5},48:{},49:{f:jC},50:{},51:{f:gA},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:E5},62:{f:VN},63:{f:_A},64:{f:mD},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ma,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:hD},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:_N},148:{f:yN,p:16},151:{f:oD},152:{},153:{f:LD},154:{},155:{},156:{f:BD},157:{},158:{},159:{T:1,f:B5},160:{T:-1},161:{T:1,f:wi},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:rD},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:hA},336:{T:-1},337:{f:yA,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:u0},357:{},358:{},359:{},360:{T:1},361:{},362:{f:b5},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:lD},427:{f:cD},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:uD},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:bN},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:sD},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:u0},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:EA},633:{T:1},634:{T:-1},635:{T:1,f:TA},636:{T:-1},637:{f:AC},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:RD},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:yD},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ze(e,t,r,a){var o=t;if(!isNaN(o)){var c=a||(r||[]).length||0,d=e.next(4);d.write_shift(2,o),d.write_shift(2,c),c>0&&U0(r)&&e.push(r)}}function hO(e,t,r,a){var o=(r||[]).length||0;if(o<=8224)return Ze(e,t,r,o);var c=t;if(!isNaN(c)){for(var d=r.parts||[],f=0,h=0,p=0;p+(d[f]||8224)<=8224;)p+=d[f]||8224,f++;var x=e.next(4);for(x.write_shift(2,c),x.write_shift(2,p),e.push(r.slice(h,h+p)),h+=p;h<o;){for(x=e.next(4),x.write_shift(2,60),p=0;p+(d[f]||8224)<=8224;)p+=d[f]||8224,f++;x.write_shift(2,p),e.push(r.slice(h,h+p)),h+=p}}}function dc(e,t,r){return e||(e=Me(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function pO(e,t,r,a){var o=Me(9);return dc(o,e,t),cb(r,a||"b",o),o}function gO(e,t,r){var a=Me(8+2*r.length);return dc(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function xO(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var o=t.t=="d"?Pn(Dn(t.v)):t.v;o==(o|0)&&o>=0&&o<65536?Ze(e,2,R5(r,a,o)):Ze(e,3,A5(r,a,o));return;case"b":case"e":Ze(e,5,pO(r,a,t.v,t.t));return;case"s":case"str":Ze(e,4,gO(r,a,(t.v||"").slice(0,255)));return}Ze(e,1,dc(null,r,a))}function mO(e,t,r,a){var o=Array.isArray(t),c=Er(t["!ref"]||"A1"),d,f="",h=[];if(c.e.c>255||c.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");c.e.c=Math.min(c.e.c,255),c.e.r=Math.min(c.e.c,16383),d=Hr(c)}for(var p=c.s.r;p<=c.e.r;++p){f=gn(p);for(var x=c.s.c;x<=c.e.c;++x){p===c.s.r&&(h[x]=vn(x)),d=h[x]+f;var y=o?(t[p]||[])[x]:t[d];y&&xO(e,y,p,x)}}}function yO(e,t){for(var r=t||{},a=Ln(),o=0,c=0;c<e.SheetNames.length;++c)e.SheetNames[c]==r.sheet&&(o=c);if(o==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ze(a,r.biff==4?1033:r.biff==3?521:9,V0(e,16,r)),mO(a,e.Sheets[e.SheetNames[o]],o,r),Ze(a,10),a.end()}function vO(e,t,r){Ze(e,49,f5({sz:12,name:"Arial"},r))}function bO(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)t[o]!=null&&Ze(e,1054,g5(o,t[o],r))})}function _O(e,t){var r=Me(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ze(e,2151,r),r=Me(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),fb(Er(t["!ref"]||"A1"),r),r.write_shift(4,4),Ze(e,2152,r)}function SO(e,t){for(var r=0;r<16;++r)Ze(e,224,ay({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){Ze(e,224,ay(a,0,t))})}function wO(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];Ze(e,440,w5(a)),a[1].Tooltip&&Ze(e,2048,T5(a))}delete t["!links"]}function TO(e,t){if(t){var r=0;t.forEach(function(a,o){++r<=256&&a&&Ze(e,125,k5(pu(o,a),o))})}}function jO(e,t,r,a,o){var c=16+qs(o.cellXfs,t,o);if(t.v==null&&!t.bf){Ze(e,513,mi(r,a,c));return}if(t.bf)Ze(e,6,KR(t,r,a,o,c));else switch(t.t){case"d":case"n":var d=t.t=="d"?Pn(Dn(t.v)):t.v;Ze(e,515,v5(r,a,d,c));break;case"b":case"e":Ze(e,517,y5(r,a,t.v,c,o,t.t));break;case"s":case"str":if(o.bookSST){var f=J0(o.Strings,t.v,o.revStrings);Ze(e,253,h5(r,a,f,c))}else Ze(e,516,p5(r,a,(t.v||"").slice(0,255),c,o));break;default:Ze(e,513,mi(r,a,c))}}function EO(e,t,r){var a=Ln(),o=r.SheetNames[e],c=r.Sheets[o]||{},d=(r||{}).Workbook||{},f=(d.Sheets||[])[e]||{},h=Array.isArray(c),p=t.biff==8,x,y="",v=[],b=Er(c["!ref"]||"A1"),w=p?65536:16384;if(b.e.c>255||b.e.r>=w){if(t.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:IV16384");b.e.c=Math.min(b.e.c,255),b.e.r=Math.min(b.e.c,w-1)}Ze(a,2057,V0(r,16,t)),Ze(a,13,ca(1)),Ze(a,12,ca(100)),Ze(a,15,Nn(!0)),Ze(a,17,Nn(!1)),Ze(a,16,xi(.001)),Ze(a,95,Nn(!0)),Ze(a,42,Nn(!1)),Ze(a,43,Nn(!1)),Ze(a,130,ca(1)),Ze(a,128,m5()),Ze(a,131,Nn(!1)),Ze(a,132,Nn(!1)),p&&TO(a,c["!cols"]),Ze(a,512,x5(b,t)),p&&(c["!links"]=[]);for(var _=b.s.r;_<=b.e.r;++_){y=gn(_);for(var S=b.s.c;S<=b.e.c;++S){_===b.s.r&&(v[S]=vn(S)),x=v[S]+y;var N=h?(c[_]||[])[S]:c[x];N&&(jO(a,N,_,S,t),p&&N.l&&c["!links"].push([x,N.l]))}}var R=f.CodeName||f.name||o;return p&&Ze(a,574,u5((d.Views||[])[0])),p&&(c["!merges"]||[]).length&&Ze(a,229,S5(c["!merges"])),p&&wO(a,c),Ze(a,442,ub(R)),p&&_O(a,c),Ze(a,10),a.end()}function kO(e,t,r){var a=Ln(),o=(e||{}).Workbook||{},c=o.Sheets||[],d=o.WBProps||{},f=r.biff==8,h=r.biff==5;if(Ze(a,2057,V0(e,5,r)),r.bookType=="xla"&&Ze(a,135),Ze(a,225,f?ca(1200):null),Ze(a,193,JC(2)),h&&Ze(a,191),h&&Ze(a,192),Ze(a,226),Ze(a,92,o5("SheetJS",r)),Ze(a,66,ca(f?1200:1252)),f&&Ze(a,353,ca(0)),f&&Ze(a,448),Ze(a,317,C5(e.SheetNames.length)),f&&e.vbaraw&&Ze(a,211),f&&e.vbaraw){var p=d.CodeName||"ThisWorkbook";Ze(a,442,ub(p))}Ze(a,156,ca(17)),Ze(a,25,Nn(!1)),Ze(a,18,Nn(!1)),Ze(a,19,ca(0)),f&&Ze(a,431,Nn(!1)),f&&Ze(a,444,ca(0)),Ze(a,61,d5()),Ze(a,64,Nn(!1)),Ze(a,141,ca(0)),Ze(a,34,Nn(DD(e)=="true")),Ze(a,14,Nn(!0)),f&&Ze(a,439,Nn(!1)),Ze(a,218,ca(0)),vO(a,e,r),bO(a,e.SSF,r),SO(a,r),f&&Ze(a,352,Nn(!1));var x=a.end(),y=Ln();f&&Ze(y,140,j5()),f&&r.Strings&&hO(y,252,c5(r.Strings)),Ze(y,10);var v=y.end(),b=Ln(),w=0,_=0;for(_=0;_<e.SheetNames.length;++_)w+=(f?12:11)+(f?2:1)*e.SheetNames[_].length;var S=x.length+w+v.length;for(_=0;_<e.SheetNames.length;++_){var N=c[_]||{};Ze(b,133,l5({pos:S,hs:N.Hidden||0,dt:0,name:e.SheetNames[_]},r)),S+=t[_].length}var R=b.end();if(w!=R.length)throw new Error("BS8 "+w+" != "+R.length);var O=[];return x.length&&O.push(x),R.length&&O.push(R),v.length&&O.push(v),hn(O)}function CO(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=zn(Br)),e&&e.SSF&&(cu(),lu(e.SSF),r.revssf=du(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Z0(r),r.cellXfs=[],qs(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var o=0;o<e.SheetNames.length;++o)a[a.length]=EO(o,r,e);return a.unshift(kO(e,a,r)),hn(a)}function Lb(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var o=ea(a["!ref"]);o.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var c=t||{};switch(c.biff||2){case 8:case 5:return CO(e,t);case 4:case 3:case 2:return yO(e,t)}throw new Error("invalid type "+c.bookType+" for BIFF")}function AO(e,t,r,a){for(var o=e["!merges"]||[],c=[],d=t.s.c;d<=t.e.c;++d){for(var f=0,h=0,p=0;p<o.length;++p)if(!(o[p].s.r>r||o[p].s.c>d)&&!(o[p].e.r<r||o[p].e.c<d)){if(o[p].s.r<r||o[p].s.c<d){f=-1;break}f=o[p].e.r-o[p].s.r+1,h=o[p].e.c-o[p].s.c+1;break}if(!(f<0)){var x=pr({r,c:d}),y=a.dense?(e[r]||[])[d]:e[x],v=y&&y.v!=null&&(y.h||iC(y.w||(is(y),y.w)||""))||"",b={};f>1&&(b.rowspan=f),h>1&&(b.colspan=h),a.editable?v='<span contenteditable="true">'+v+"</span>":y&&(b["data-t"]=y&&y.t||"z",y.v!=null&&(b["data-v"]=y.v),y.z!=null&&(b["data-z"]=y.z),y.l&&(y.l.Target||"#").charAt(0)!="#"&&(v='<a href="'+y.l.Target+'">'+v+"</a>")),b.id=(a.id||"sjs")+"-"+x,c.push(Je("td",v,b))}}var w="<tr>";return w+c.join("")+"</tr>"}var RO='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',NO="</body></html>";function DO(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Pb(e,t){var r=t||{},a=r.header!=null?r.header:RO,o=r.footer!=null?r.footer:NO,c=[a],d=ea(e["!ref"]);r.dense=Array.isArray(e),c.push(DO(e,d,r));for(var f=d.s.r;f<=d.e.r;++f)c.push(AO(e,d,f,r));return c.push("</table>"+o),c.join("")}function zb(e,t,r){var a=r||{},o=0,c=0;if(a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var d=typeof a.origin=="string"?an(a.origin):a.origin;o=d.r,c=d.c}var f=t.getElementsByTagName("tr"),h=Math.min(a.sheetRows||1e7,f.length),p={s:{r:0,c:0},e:{r:o,c}};if(e["!ref"]){var x=ea(e["!ref"]);p.s.r=Math.min(p.s.r,x.s.r),p.s.c=Math.min(p.s.c,x.s.c),p.e.r=Math.max(p.e.r,x.e.r),p.e.c=Math.max(p.e.c,x.e.c),o==-1&&(p.e.r=o=x.e.r+1)}var y=[],v=0,b=e["!rows"]||(e["!rows"]=[]),w=0,_=0,S=0,N=0,R=0,O=0;for(e["!cols"]||(e["!cols"]=[]);w<f.length&&_<h;++w){var P=f[w];if(uy(P)){if(a.display)continue;b[_]={hidden:!0}}var J=P.children;for(S=N=0;S<J.length;++S){var ae=J[S];if(!(a.display&&uy(ae))){var Y=ae.hasAttribute("data-v")?ae.getAttribute("data-v"):ae.hasAttribute("v")?ae.getAttribute("v"):dC(ae.innerHTML),F=ae.getAttribute("data-z")||ae.getAttribute("z");for(v=0;v<y.length;++v){var Q=y[v];Q.s.c==N+c&&Q.s.r<_+o&&_+o<=Q.e.r&&(N=Q.e.c+1-c,v=-1)}O=+ae.getAttribute("colspan")||1,((R=+ae.getAttribute("rowspan")||1)>1||O>1)&&y.push({s:{r:_+o,c:N+c},e:{r:_+o+(R||1)-1,c:N+c+(O||1)-1}});var oe={t:"s",v:Y},q=ae.getAttribute("data-t")||ae.getAttribute("t")||"";Y!=null&&(Y.length==0?oe.t=q||"z":a.raw||Y.trim().length==0||q=="s"||(Y==="TRUE"?oe={t:"b",v:!0}:Y==="FALSE"?oe={t:"b",v:!1}:isNaN(rs(Y))?isNaN(Xl(Y).getDate())||(oe={t:"d",v:Dn(Y)},a.cellDates||(oe={t:"n",v:Pn(oe.v)}),oe.z=a.dateNF||Br[14]):oe={t:"n",v:rs(Y)})),oe.z===void 0&&F!=null&&(oe.z=F);var de="",te=ae.getElementsByTagName("A");if(te&&te.length)for(var ne=0;ne<te.length&&!(te[ne].hasAttribute("href")&&(de=te[ne].getAttribute("href"),de.charAt(0)!="#"));++ne);de&&de.charAt(0)!="#"&&(oe.l={Target:de}),a.dense?(e[_+o]||(e[_+o]=[]),e[_+o][N+c]=oe):e[pr({c:N+c,r:_+o})]=oe,p.e.c<N+c&&(p.e.c=N+c),N+=O}}++_}return y.length&&(e["!merges"]=(e["!merges"]||[]).concat(y)),p.e.r=Math.max(p.e.r,_-1+o),e["!ref"]=Hr(p),_>=h&&(e["!fullref"]=Hr((p.e.r=f.length-w+_-1+o,p))),e}function Ub(e,t){var r=t||{},a=r.dense?[]:{};return zb(a,e,t)}function OO(e,t){return vi(Ub(e,t),t)}function uy(e){var t="",r=IO(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function IO(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var MO=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Jl({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return $r+t}})(),fy=(function(){var e=function(c){return hr(c).replace(/  +/g,function(d){return'<text:s text:c="'+d.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(c,d,f){var h=[];h.push('      <table:table table:name="'+hr(d.SheetNames[f])+`" table:style-name="ta1">
`);var p=0,x=0,y=ea(c["!ref"]||"A1"),v=c["!merges"]||[],b=0,w=Array.isArray(c);if(c["!cols"])for(x=0;x<=y.e.c;++x)h.push("        <table:table-column"+(c["!cols"][x]?' table:style-name="co'+c["!cols"][x].ods+'"':"")+`></table:table-column>
`);var _="",S=c["!rows"]||[];for(p=0;p<y.s.r;++p)_=S[p]?' table:style-name="ro'+S[p].ods+'"':"",h.push("        <table:table-row"+_+`></table:table-row>
`);for(;p<=y.e.r;++p){for(_=S[p]?' table:style-name="ro'+S[p].ods+'"':"",h.push("        <table:table-row"+_+`>
`),x=0;x<y.s.c;++x)h.push(t);for(;x<=y.e.c;++x){var N=!1,R={},O="";for(b=0;b!=v.length;++b)if(!(v[b].s.c>x)&&!(v[b].s.r>p)&&!(v[b].e.c<x)&&!(v[b].e.r<p)){(v[b].s.c!=x||v[b].s.r!=p)&&(N=!0),R["table:number-columns-spanned"]=v[b].e.c-v[b].s.c+1,R["table:number-rows-spanned"]=v[b].e.r-v[b].s.r+1;break}if(N){h.push(r);continue}var P=pr({r:p,c:x}),J=w?(c[p]||[])[x]:c[P];if(J&&J.f&&(R["table:formula"]=hr(tN(J.f)),J.F&&J.F.slice(0,P.length)==P)){var ae=ea(J.F);R["table:number-matrix-columns-spanned"]=ae.e.c-ae.s.c+1,R["table:number-matrix-rows-spanned"]=ae.e.r-ae.s.r+1}if(!J){h.push(t);continue}switch(J.t){case"b":O=J.v?"TRUE":"FALSE",R["office:value-type"]="boolean",R["office:boolean-value"]=J.v?"true":"false";break;case"n":O=J.w||String(J.v||0),R["office:value-type"]="float",R["office:value"]=J.v||0;break;case"s":case"str":O=J.v==null?"":J.v,R["office:value-type"]="string";break;case"d":O=J.w||Dn(J.v).toISOString(),R["office:value-type"]="date",R["office:date-value"]=Dn(J.v).toISOString(),R["table:style-name"]="ce1";break;default:h.push(t);continue}var Y=e(O);if(J.l&&J.l.Target){var F=J.l.Target;F=F.charAt(0)=="#"?"#"+rN(F.slice(1)):F,F.charAt(0)!="#"&&!F.match(/^\w+:/)&&(F="../"+F),Y=Je("text:a",Y,{"xlink:href":F.replace(/&/g,"&amp;")})}h.push("          "+Je("table:table-cell",Je("text:p",Y,{}),R)+`
`)}h.push(`        </table:table-row>
`)}return h.push(`      </table:table>
`),h.join("")},o=function(c,d){c.push(` <office:automatic-styles>
`),c.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),c.push(`   <number:month number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:day number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:year/>
`),c.push(`  </number:date-style>
`);var f=0;d.SheetNames.map(function(p){return d.Sheets[p]}).forEach(function(p){if(p&&p["!cols"]){for(var x=0;x<p["!cols"].length;++x)if(p["!cols"][x]){var y=p["!cols"][x];if(y.width==null&&y.wpx==null&&y.wch==null)continue;Y0(y),y.ods=f;var v=p["!cols"][x].wpx+"px";c.push('  <style:style style:name="co'+f+`" style:family="table-column">
`),c.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+v+`"/>
`),c.push(`  </style:style>
`),++f}}});var h=0;d.SheetNames.map(function(p){return d.Sheets[p]}).forEach(function(p){if(p&&p["!rows"]){for(var x=0;x<p["!rows"].length;++x)if(p["!rows"][x]){p["!rows"][x].ods=h;var y=p["!rows"][x].hpx+"px";c.push('  <style:style style:name="ro'+h+`" style:family="table-row">
`),c.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+y+`"/>
`),c.push(`  </style:style>
`),++h}}}),c.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),c.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),c.push(`  </style:style>
`),c.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),c.push(` </office:automatic-styles>
`)};return function(d,f){var h=[$r],p=Jl({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),x=Jl({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});f.bookType=="fods"?(h.push("<office:document"+p+x+`>
`),h.push(rb().replace(/office:document-meta/g,"office:meta"))):h.push("<office:document-content"+p+`>
`),o(h,d),h.push(`  <office:body>
`),h.push(`    <office:spreadsheet>
`);for(var y=0;y!=d.SheetNames.length;++y)h.push(a(d.Sheets[d.SheetNames[y]],d,y));return h.push(`    </office:spreadsheet>
`),h.push(`  </office:body>
`),f.bookType=="fods"?h.push("</office:document>"):h.push("</office:document-content>"),h.join("")}})();function Wb(e,t){if(t.bookType=="fods")return fy(e,t);var r=F0(),a="",o=[],c=[];return a="mimetype",Ft(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",Ft(r,a,fy(e,t)),o.push([a,"text/xml"]),c.push([a,"ContentFile"]),a="styles.xml",Ft(r,a,MO(e,t)),o.push([a,"text/xml"]),c.push([a,"StylesFile"]),a="meta.xml",Ft(r,a,$r+rb()),o.push([a,"text/xml"]),c.push([a,"MetadataFile"]),a="manifest.rdf",Ft(r,a,VC(c)),o.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",Ft(r,a,$C(o)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Zd(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function BO(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):_a(Ql(e))}function FO(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Us(e){var t=e.reduce(function(o,c){return o+c.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(o){r.set(o,a),a+=o.length}),r}function LO(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,o=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var c=0;o>=1;++c,o/=256)e[t+c]=o&255;e[t+15]|=r>=0?0:128}function Zl(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function ur(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function wo(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Xr(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],o=Zl(e,r),c=o&7;o=Math.floor(o/8);var d=0,f;if(o==0)break;switch(c){case 0:{for(var h=r[0];e[r[0]++]>=128;);f=e.slice(h,r[0])}break;case 5:d=4,f=e.slice(r[0],r[0]+d),r[0]+=d;break;case 1:d=8,f=e.slice(r[0],r[0]+d),r[0]+=d;break;case 2:d=Zl(e,r),f=e.slice(r[0],r[0]+d),r[0]+=d;break;case 3:case 4:default:throw new Error("PB Type ".concat(c," for Field ").concat(o," at offset ").concat(a))}var p={data:f,type:c};t[o]==null?t[o]=[p]:t[o].push(p)}return t}function un(e){var t=[];return e.forEach(function(r,a){r.forEach(function(o){o.data&&(t.push(ur(a*8+o.type)),o.type==2&&t.push(ur(o.data.length)),t.push(o.data))})}),Us(t)}function ma(e){for(var t,r=[],a=[0];a[0]<e.length;){var o=Zl(e,a),c=Xr(e.slice(a[0],a[0]+o));a[0]+=o;var d={id:wo(c[1][0].data),messages:[]};c[2].forEach(function(f){var h=Xr(f.data),p=wo(h[3][0].data);d.messages.push({meta:h,data:e.slice(a[0],a[0]+p)}),a[0]+=p}),(t=c[3])!=null&&t[0]&&(d.merge=wo(c[3][0].data)>>>0>0),r.push(d)}return r}function po(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:ur(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:ur(+!!r.merge),type:0}]);var o=[];r.messages.forEach(function(d){o.push(d.data),d.meta[3]=[{type:0,data:ur(d.data.length)}],a[2].push({data:un(d.meta),type:2})});var c=un(a);t.push(ur(c.length)),t.push(c),o.forEach(function(d){return t.push(d)})}),Us(t)}function PO(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=Zl(t,r),o=[];r[0]<t.length;){var c=t[r[0]]&3;if(c==0){var d=t[r[0]++]>>2;if(d<60)++d;else{var f=d-59;d=t[r[0]],f>1&&(d|=t[r[0]+1]<<8),f>2&&(d|=t[r[0]+2]<<16),f>3&&(d|=t[r[0]+3]<<24),d>>>=0,d++,r[0]+=f}o.push(t.slice(r[0],r[0]+d)),r[0]+=d;continue}else{var h=0,p=0;if(c==1?(p=(t[r[0]]>>2&7)+4,h=(t[r[0]++]&224)<<3,h|=t[r[0]++]):(p=(t[r[0]++]>>2)+1,c==2?(h=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(h=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),o=[Us(o)],h==0)throw new Error("Invalid offset 0");if(h>o[0].length)throw new Error("Invalid offset beyond length");if(p>=h)for(o.push(o[0].slice(-h)),p-=h;p>=o[o.length-1].length;)o.push(o[o.length-1]),p-=o[o.length-1].length;o.push(o[0].slice(-h,-h+p))}}var x=Us(o);if(x.length!=a)throw new Error("Unexpected length: ".concat(x.length," != ").concat(a));return x}function ya(e){for(var t=[],r=0;r<e.length;){var a=e[r++],o=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(PO(a,e.slice(r,r+o))),r+=o}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Us(t)}function go(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),o=new Uint8Array(4);t.push(o);var c=ur(a),d=c.length;t.push(c),a<=60?(d++,t.push(new Uint8Array([a-1<<2]))):a<=256?(d+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(d+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(d+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(d+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),d+=a,o[0]=0,o[1]=d&255,o[2]=d>>8&255,o[3]=d>>16&255,r+=a}return Us(t)}function Uh(e,t){var r=new Uint8Array(32),a=Zd(r),o=12,c=0;switch(r[0]=5,e.t){case"n":r[1]=2,LO(r,o,e.v),c|=1,o+=16;break;case"b":r[1]=6,a.setFloat64(o,e.v?1:0,!0),c|=2,o+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(o,t.indexOf(e.v),!0),c|=8,o+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,c,!0),r.slice(0,o)}function Wh(e,t){var r=new Uint8Array(32),a=Zd(r),o=12,c=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(o,e.v,!0),c|=32,o+=8;break;case"b":r[2]=6,a.setFloat64(o,e.v?1:0,!0),c|=32,o+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(o,t.indexOf(e.v),!0),c|=16,o+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,c,!0),r.slice(0,o)}function Ns(e){var t=Xr(e);return Zl(t[1][0].data)}function zO(e,t,r){var a,o,c,d;if(!((a=e[6])!=null&&a[0])||!((o=e[7])!=null&&o[0]))throw"Mutation only works on post-BNC storages!";var f=((d=(c=e[8])==null?void 0:c[0])==null?void 0:d.data)&&wo(e[8][0].data)>0||!1;if(f)throw"Math only works with normal offsets";for(var h=0,p=Zd(e[7][0].data),x=0,y=[],v=Zd(e[4][0].data),b=0,w=[],_=0;_<t.length;++_){if(t[_]==null){p.setUint16(_*2,65535,!0),v.setUint16(_*2,65535);continue}p.setUint16(_*2,x,!0),v.setUint16(_*2,b,!0);var S,N;switch(typeof t[_]){case"string":S=Uh({t:"s",v:t[_]},r),N=Wh({t:"s",v:t[_]},r);break;case"number":S=Uh({t:"n",v:t[_]},r),N=Wh({t:"n",v:t[_]},r);break;case"boolean":S=Uh({t:"b",v:t[_]},r),N=Wh({t:"b",v:t[_]},r);break;default:throw new Error("Unsupported value "+t[_])}y.push(S),x+=S.length,w.push(N),b+=N.length,++h}for(e[2][0].data=ur(h);_<e[7][0].data.length/2;++_)p.setUint16(_*2,65535,!0),v.setUint16(_*2,65535,!0);return e[6][0].data=Us(y),e[3][0].data=Us(w),h}function UO(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=ea(r["!ref"]);a.s.r=a.s.c=0;var o=!1;a.e.c>9&&(o=!0,a.e.c=9),a.e.r>49&&(o=!0,a.e.r=49),o&&console.error("The Numbers writer is currently limited to ".concat(Hr(a)));var c=eu(r,{range:a,header:1}),d=["~Sh33tJ5~"];c.forEach(function(z){return z.forEach(function(H){typeof H=="string"&&d.push(H)})});var f={},h=[],p=vr.read(t.numbers,{type:"base64"});p.FileIndex.map(function(z,H){return[z,p.FullPaths[H]]}).forEach(function(z){var H=z[0],Z=z[1];if(H.type==2&&H.name.match(/\.iwa/)){var ge=H.content,Fe=ya(ge),qe=ma(Fe);qe.forEach(function(Re){h.push(Re.id),f[Re.id]={deps:[],location:Z,type:wo(Re.messages[0].meta[1][0].data)}})}}),h.sort(function(z,H){return z-H});var x=h.filter(function(z){return z>1}).map(function(z){return[z,ur(z)]});p.FileIndex.map(function(z,H){return[z,p.FullPaths[H]]}).forEach(function(z){var H=z[0];if(z[1],!!H.name.match(/\.iwa/)){var Z=ma(ya(H.content));Z.forEach(function(ge){ge.messages.forEach(function(Fe){x.forEach(function(qe){ge.messages.some(function(Re){return wo(Re.meta[1][0].data)!=11006&&FO(Re.data,qe[1])})&&f[qe[0]].deps.push(ge.id)})})})}});for(var y=vr.find(p,f[1].location),v=ma(ya(y.content)),b,w=0;w<v.length;++w){var _=v[w];_.id==1&&(b=_)}var S=Ns(Xr(b.messages[0].data)[1][0].data);for(y=vr.find(p,f[S].location),v=ma(ya(y.content)),w=0;w<v.length;++w)_=v[w],_.id==S&&(b=_);for(S=Ns(Xr(b.messages[0].data)[2][0].data),y=vr.find(p,f[S].location),v=ma(ya(y.content)),w=0;w<v.length;++w)_=v[w],_.id==S&&(b=_);for(S=Ns(Xr(b.messages[0].data)[2][0].data),y=vr.find(p,f[S].location),v=ma(ya(y.content)),w=0;w<v.length;++w)_=v[w],_.id==S&&(b=_);var N=Xr(b.messages[0].data);{N[6][0].data=ur(a.e.r+1),N[7][0].data=ur(a.e.c+1);var R=Ns(N[46][0].data),O=vr.find(p,f[R].location),P=ma(ya(O.content));{for(var J=0;J<P.length&&P[J].id!=R;++J);if(P[J].id!=R)throw"Bad ColumnRowUIDMapArchive";var ae=Xr(P[J].messages[0].data);ae[1]=[],ae[2]=[],ae[3]=[];for(var Y=0;Y<=a.e.c;++Y){var F=[];F[1]=F[2]=[{type:0,data:ur(Y+420690)}],ae[1].push({type:2,data:un(F)}),ae[2].push({type:0,data:ur(Y)}),ae[3].push({type:0,data:ur(Y)})}ae[4]=[],ae[5]=[],ae[6]=[];for(var Q=0;Q<=a.e.r;++Q)F=[],F[1]=F[2]=[{type:0,data:ur(Q+726270)}],ae[4].push({type:2,data:un(F)}),ae[5].push({type:0,data:ur(Q)}),ae[6].push({type:0,data:ur(Q)});P[J].messages[0].data=un(ae)}O.content=go(po(P)),O.size=O.content.length,delete N[46];var oe=Xr(N[4][0].data);{oe[7][0].data=ur(a.e.r+1);var q=Xr(oe[1][0].data),de=Ns(q[2][0].data);O=vr.find(p,f[de].location),P=ma(ya(O.content));{if(P[0].id!=de)throw"Bad HeaderStorageBucket";var te=Xr(P[0].messages[0].data);for(Q=0;Q<c.length;++Q){var ne=Xr(te[2][0].data);ne[1][0].data=ur(Q),ne[4][0].data=ur(c[Q].length),te[2][Q]={type:te[2][0].type,data:un(ne)}}P[0].messages[0].data=un(te)}O.content=go(po(P)),O.size=O.content.length;var me=Ns(oe[2][0].data);O=vr.find(p,f[me].location),P=ma(ya(O.content));{if(P[0].id!=me)throw"Bad HeaderStorageBucket";for(te=Xr(P[0].messages[0].data),Y=0;Y<=a.e.c;++Y)ne=Xr(te[2][0].data),ne[1][0].data=ur(Y),ne[4][0].data=ur(a.e.r+1),te[2][Y]={type:te[2][0].type,data:un(ne)};P[0].messages[0].data=un(te)}O.content=go(po(P)),O.size=O.content.length;var re=Ns(oe[4][0].data);(function(){for(var z=vr.find(p,f[re].location),H=ma(ya(z.content)),Z,ge=0;ge<H.length;++ge){var Fe=H[ge];Fe.id==re&&(Z=Fe)}var qe=Xr(Z.messages[0].data);{qe[3]=[];var Re=[];d.forEach(function(ve,Ge){Re[1]=[{type:0,data:ur(Ge)}],Re[2]=[{type:0,data:ur(1)}],Re[3]=[{type:2,data:BO(ve)}],qe[3].push({type:2,data:un(Re)})})}Z.messages[0].data=un(qe);var Oe=po(H),et=go(Oe);z.content=et,z.size=z.content.length})();var be=Xr(oe[3][0].data);{var W=be[1][0];delete be[2];var xe=Xr(W.data);{var C=Ns(xe[2][0].data);(function(){for(var z=vr.find(p,f[C].location),H=ma(ya(z.content)),Z,ge=0;ge<H.length;++ge){var Fe=H[ge];Fe.id==C&&(Z=Fe)}var qe=Xr(Z.messages[0].data);{delete qe[6],delete be[7];var Re=new Uint8Array(qe[5][0].data);qe[5]=[];for(var Oe=0,et=0;et<=a.e.r;++et){var ve=Xr(Re);Oe+=zO(ve,c[et],d),ve[1][0].data=ur(et),qe[5].push({data:un(ve),type:2})}qe[1]=[{type:0,data:ur(a.e.c+1)}],qe[2]=[{type:0,data:ur(a.e.r+1)}],qe[3]=[{type:0,data:ur(Oe)}],qe[4]=[{type:0,data:ur(a.e.r+1)}]}Z.messages[0].data=un(qe);var Ge=po(H),G=go(Ge);z.content=G,z.size=z.content.length})()}W.data=un(xe)}oe[3][0].data=un(be)}N[4][0].data=un(oe)}b.messages[0].data=un(N);var X=po(v),E=go(X);return y.content=E,y.size=y.content.length,p}function WO(e){return function(r){for(var a=0;a!=e.length;++a){var o=e[a];r[o[0]]===void 0&&(r[o[0]]=o[1]),o[2]==="n"&&(r[o[0]]=Number(r[o[0]]))}}}function Z0(e){WO([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function qO(e,t){return t.bookType=="ods"?Wb(e,t):t.bookType=="numbers"?UO(e,t):t.bookType=="xlsb"?HO(e,t):$O(e,t)}function HO(e,t){vo=1024,e&&!e.SSF&&(e.SSF=zn(Br)),e&&e.SSF&&(cu(),lu(e.SSF),t.revssf=du(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Hl?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=Tb.indexOf(t.bookType)>-1,o=Zv();Z0(t=t||{});var c=F0(),d="",f=0;if(t.cellXfs=[],qs(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),d="docProps/core.xml",Ft(c,d,nb(e.Props,t)),o.coreprops.push(d),fr(t.rels,2,d,tr.CORE_PROPS),d="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var h=[],p=0;p<e.SheetNames.length;++p)(e.Workbook.Sheets[p]||{}).Hidden!=2&&h.push(e.SheetNames[p]);e.Props.SheetNames=h}for(e.Props.Worksheets=e.Props.SheetNames.length,Ft(c,d,sb(e.Props)),o.extprops.push(d),fr(t.rels,3,d,tr.EXT_PROPS),e.Custprops!==e.Props&&xn(e.Custprops||{}).length>0&&(d="docProps/custom.xml",Ft(c,d,ib(e.Custprops)),o.custprops.push(d),fr(t.rels,4,d,tr.CUST_PROPS)),f=1;f<=e.SheetNames.length;++f){var x={"!id":{}},y=e.Sheets[e.SheetNames[f-1]],v=(y||{})["!type"]||"sheet";switch(v){case"chart":default:d="xl/worksheets/sheet"+f+"."+r,Ft(c,d,VD(f-1,d,t,e,x)),o.sheets.push(d),fr(t.wbrels,-1,"worksheets/sheet"+f+"."+r,tr.WS[0])}if(y){var b=y["!comments"],w=!1,_="";b&&b.length>0&&(_="xl/comments"+f+"."+r,Ft(c,_,XD(b,_)),o.comments.push(_),fr(x,-1,"../comments"+f+"."+r,tr.CMNT),w=!0),y["!legacy"]&&w&&Ft(c,"xl/drawings/vmlDrawing"+f+".vml",Sb(f,y["!comments"])),delete y["!comments"],delete y["!legacy"]}x["!id"].rId1&&Ft(c,tb(d),_o(x))}return t.Strings!=null&&t.Strings.length>0&&(d="xl/sharedStrings."+r,Ft(c,d,KD(t.Strings,d,t)),o.strs.push(d),fr(t.wbrels,-1,"sharedStrings."+r,tr.SST)),d="xl/workbook."+r,Ft(c,d,GD(e,d)),o.workbooks.push(d),fr(t.rels,1,d,tr.WB),d="xl/theme/theme1.xml",Ft(c,d,bb(e.Themes,t)),o.themes.push(d),fr(t.wbrels,-1,"theme/theme1.xml",tr.THEME),d="xl/styles."+r,Ft(c,d,YD(e,d,t)),o.styles.push(d),fr(t.wbrels,-1,"styles."+r,tr.STY),e.vbaraw&&a&&(d="xl/vbaProject.bin",Ft(c,d,e.vbaraw),o.vba.push(d),fr(t.wbrels,-1,"vbaProject.bin",tr.VBA)),d="xl/metadata."+r,Ft(c,d,QD(d)),o.metadata.push(d),fr(t.wbrels,-1,"metadata."+r,tr.XLMETA),Ft(c,"[Content_Types].xml",eb(o,t)),Ft(c,"_rels/.rels",_o(t.rels)),Ft(c,"xl/_rels/workbook."+r+".rels",_o(t.wbrels)),delete t.revssf,delete t.ssf,c}function $O(e,t){vo=1024,e&&!e.SSF&&(e.SSF=zn(Br)),e&&e.SSF&&(cu(),lu(e.SSF),t.revssf=du(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Hl?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=Tb.indexOf(t.bookType)>-1,o=Zv();Z0(t=t||{});var c=F0(),d="",f=0;if(t.cellXfs=[],qs(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),d="docProps/core.xml",Ft(c,d,nb(e.Props,t)),o.coreprops.push(d),fr(t.rels,2,d,tr.CORE_PROPS),d="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var h=[],p=0;p<e.SheetNames.length;++p)(e.Workbook.Sheets[p]||{}).Hidden!=2&&h.push(e.SheetNames[p]);e.Props.SheetNames=h}e.Props.Worksheets=e.Props.SheetNames.length,Ft(c,d,sb(e.Props)),o.extprops.push(d),fr(t.rels,3,d,tr.EXT_PROPS),e.Custprops!==e.Props&&xn(e.Custprops||{}).length>0&&(d="docProps/custom.xml",Ft(c,d,ib(e.Custprops)),o.custprops.push(d),fr(t.rels,4,d,tr.CUST_PROPS));var x=["SheetJ5"];for(t.tcid=0,f=1;f<=e.SheetNames.length;++f){var y={"!id":{}},v=e.Sheets[e.SheetNames[f-1]],b=(v||{})["!type"]||"sheet";switch(b){case"chart":default:d="xl/worksheets/sheet"+f+"."+r,Ft(c,d,Ob(f-1,t,e,y)),o.sheets.push(d),fr(t.wbrels,-1,"worksheets/sheet"+f+"."+r,tr.WS[0])}if(v){var w=v["!comments"],_=!1,S="";if(w&&w.length>0){var N=!1;w.forEach(function(R){R[1].forEach(function(O){O.T==!0&&(N=!0)})}),N&&(S="xl/threadedComments/threadedComment"+f+"."+r,Ft(c,S,SA(w,x,t)),o.threadedcomments.push(S),fr(y,-1,"../threadedComments/threadedComment"+f+"."+r,tr.TCMNT)),S="xl/comments"+f+"."+r,Ft(c,S,wb(w)),o.comments.push(S),fr(y,-1,"../comments"+f+"."+r,tr.CMNT),_=!0}v["!legacy"]&&_&&Ft(c,"xl/drawings/vmlDrawing"+f+".vml",Sb(f,v["!comments"])),delete v["!comments"],delete v["!legacy"]}y["!id"].rId1&&Ft(c,tb(d),_o(y))}return t.Strings!=null&&t.Strings.length>0&&(d="xl/sharedStrings."+r,Ft(c,d,pb(t.Strings,t)),o.strs.push(d),fr(t.wbrels,-1,"sharedStrings."+r,tr.SST)),d="xl/workbook."+r,Ft(c,d,Bb(e)),o.workbooks.push(d),fr(t.rels,1,d,tr.WB),d="xl/theme/theme1.xml",Ft(c,d,bb(e.Themes,t)),o.themes.push(d),fr(t.wbrels,-1,"theme/theme1.xml",tr.THEME),d="xl/styles."+r,Ft(c,d,yb(e,t)),o.styles.push(d),fr(t.wbrels,-1,"styles."+r,tr.STY),e.vbaraw&&a&&(d="xl/vbaProject.bin",Ft(c,d,e.vbaraw),o.vba.push(d),fr(t.wbrels,-1,"vbaProject.bin",tr.VBA)),d="xl/metadata."+r,Ft(c,d,_b()),o.metadata.push(d),fr(t.wbrels,-1,"metadata."+r,tr.XLMETA),x.length>1&&(d="xl/persons/person.xml",Ft(c,d,wA(x)),o.people.push(d),fr(t.wbrels,-1,"persons/person.xml",tr.PEOPLE)),Ft(c,"[Content_Types].xml",eb(o,t)),Ft(c,"_rels/.rels",_o(t.rels)),Ft(c,"xl/_rels/workbook."+r+".rels",_o(t.wbrels)),delete t.revssf,delete t.ssf,c}function GO(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=ss(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function qb(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return ic(t.file,vr.write(e,{type:sr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return vr.write(e,t)}function VO(e,t){var r=zn(t||{}),a=qO(e,r);return YO(a,r)}function YO(e,t){var r={},a=sr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var o=e.FullPaths?vr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof o=="string"){if(t.type=="binary"||t.type=="base64")return o;o=new Uint8Array(ou(o))}return t.password&&typeof encrypt_agile<"u"?qb(encrypt_agile(o,t.password),t):t.type==="file"?ic(t.file,o):t.type=="string"?zl(o):o}function KO(e,t){var r=t||{},a=uO(e,r);return qb(a,r)}function Oa(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return Kl(Ql(a));case"binary":return Ql(a);case"string":return e;case"file":return ic(t.file,a,"utf8");case"buffer":return sr?os(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):Oa(a,{type:"binary"}).split("").map(function(o){return o.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function XO(e,t){switch(t.type){case"base64":return Kl(e);case"binary":return e;case"string":return e;case"file":return ic(t.file,e,"binary");case"buffer":return sr?os(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Dd(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?Kl(r):t.type=="string"?zl(r):r;case"file":return ic(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Hb(e,t){T6(),MD(e);var r=zn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=Hb(e,r);return r.type="array",ou(a)}var o=0;if(r.sheet&&(typeof r.sheet=="number"?o=r.sheet:o=e.SheetNames.indexOf(r.sheet),!e.SheetNames[o]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Oa(cO(e,r),r);case"slk":case"sylk":return Oa(D5.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"htm":case"html":return Oa(Pb(e.Sheets[e.SheetNames[o]],r),r);case"txt":return XO($b(e.Sheets[e.SheetNames[o]],r),r);case"csv":return Oa(ep(e.Sheets[e.SheetNames[o]],r),r,"\uFEFF");case"dif":return Oa(O5.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"dbf":return Dd(N5.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"prn":return Oa(I5.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"rtf":return Oa(U5.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"eth":return Oa(hb.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"fods":return Oa(Wb(e,r),r);case"wk1":return Dd(sy.sheet_to_wk1(e.Sheets[e.SheetNames[o]],r),r);case"wk3":return Dd(sy.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Dd(Lb(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),KO(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return VO(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function QO(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function JO(e,t,r){var a={};return a.type="file",a.file=t,QO(a),Hb(e,a)}function ZO(e,t,r,a,o,c,d,f){var h=gn(r),p=f.defval,x=f.raw||!Object.prototype.hasOwnProperty.call(f,"raw"),y=!0,v=o===1?[]:{};if(o!==1)if(Object.defineProperty)try{Object.defineProperty(v,"__rowNum__",{value:r,enumerable:!1})}catch{v.__rowNum__=r}else v.__rowNum__=r;if(!d||e[r])for(var b=t.s.c;b<=t.e.c;++b){var w=d?e[r][b]:e[a[b]+h];if(w===void 0||w.t===void 0){if(p===void 0)continue;c[b]!=null&&(v[c[b]]=p);continue}var _=w.v;switch(w.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(c[b]!=null){if(_==null)if(w.t=="e"&&_===null)v[c[b]]=null;else if(p!==void 0)v[c[b]]=p;else if(x&&_===null)v[c[b]]=null;else continue;else v[c[b]]=x&&(w.t!=="n"||w.t==="n"&&f.rawNumbers!==!1)?_:is(w,_,f);_!=null&&(y=!1)}}return{row:v,isempty:y}}function eu(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,o=1,c=[],d=0,f="",h={s:{r:0,c:0},e:{r:0,c:0}},p=t||{},x=p.range!=null?p.range:e["!ref"];switch(p.header===1?a=1:p.header==="A"?a=2:Array.isArray(p.header)?a=3:p.header==null&&(a=0),typeof x){case"string":h=Er(x);break;case"number":h=Er(e["!ref"]),h.s.r=x;break;default:h=x}a>0&&(o=0);var y=gn(h.s.r),v=[],b=[],w=0,_=0,S=Array.isArray(e),N=h.s.r,R=0,O={};S&&!e[N]&&(e[N]=[]);var P=p.skipHidden&&e["!cols"]||[],J=p.skipHidden&&e["!rows"]||[];for(R=h.s.c;R<=h.e.c;++R)if(!(P[R]||{}).hidden)switch(v[R]=vn(R),r=S?e[N][R]:e[v[R]+y],a){case 1:c[R]=R-h.s.c;break;case 2:c[R]=v[R];break;case 3:c[R]=p.header[R-h.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),f=d=is(r,null,p),_=O[d]||0,!_)O[d]=1;else{do f=d+"_"+_++;while(O[f]);O[d]=_,O[f]=1}c[R]=f}for(N=h.s.r+o;N<=h.e.r;++N)if(!(J[N]||{}).hidden){var ae=ZO(e,h,N,v,a,c,S,p);(ae.isempty===!1||(a===1?p.blankrows!==!1:p.blankrows))&&(b[w++]=ae.row)}return b.length=w,b}var hy=/"/g;function eI(e,t,r,a,o,c,d,f){for(var h=!0,p=[],x="",y=gn(r),v=t.s.c;v<=t.e.c;++v)if(a[v]){var b=f.dense?(e[r]||[])[v]:e[a[v]+y];if(b==null)x="";else if(b.v!=null){h=!1,x=""+(f.rawNumbers&&b.t=="n"?b.v:is(b,null,f));for(var w=0,_=0;w!==x.length;++w)if((_=x.charCodeAt(w))===o||_===c||_===34||f.forceQuotes){x='"'+x.replace(hy,'""')+'"';break}x=="ID"&&(x='"ID"')}else b.f!=null&&!b.F?(h=!1,x="="+b.f,x.indexOf(",")>=0&&(x='"'+x.replace(hy,'""')+'"')):x="";p.push(x)}return f.blankrows===!1&&h?null:p.join(d)}function ep(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var o=Er(e["!ref"]),c=a.FS!==void 0?a.FS:",",d=c.charCodeAt(0),f=a.RS!==void 0?a.RS:`
`,h=f.charCodeAt(0),p=new RegExp((c=="|"?"\\|":c)+"+$"),x="",y=[];a.dense=Array.isArray(e);for(var v=a.skipHidden&&e["!cols"]||[],b=a.skipHidden&&e["!rows"]||[],w=o.s.c;w<=o.e.c;++w)(v[w]||{}).hidden||(y[w]=vn(w));for(var _=0,S=o.s.r;S<=o.e.r;++S)(b[S]||{}).hidden||(x=eI(e,o,S,y,d,h,c,a),x!=null&&(a.strip&&(x=x.replace(p,"")),(x||a.blankrows!==!1)&&r.push((_++?f:"")+x)));return delete a.dense,r.join("")}function $b(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=ep(e,t);return r}function tI(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var o=Er(e["!ref"]),c="",d=[],f,h=[],p=Array.isArray(e);for(f=o.s.c;f<=o.e.c;++f)d[f]=vn(f);for(var x=o.s.r;x<=o.e.r;++x)for(c=gn(x),f=o.s.c;f<=o.e.c;++f)if(t=d[f]+c,r=p?(e[x]||[])[f]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}h[h.length]=t+"="+a}return h}function Gb(e,t,r){var a=r||{},o=+!a.skipHeader,c=e||{},d=0,f=0;if(c&&a.origin!=null)if(typeof a.origin=="number")d=a.origin;else{var h=typeof a.origin=="string"?an(a.origin):a.origin;d=h.r,f=h.c}var p,x={s:{c:0,r:0},e:{c:f,r:d+t.length-1+o}};if(c["!ref"]){var y=Er(c["!ref"]);x.e.c=Math.max(x.e.c,y.e.c),x.e.r=Math.max(x.e.r,y.e.r),d==-1&&(d=y.e.r+1,x.e.r=d+t.length-1+o)}else d==-1&&(d=0,x.e.r=t.length-1+o);var v=a.header||[],b=0;t.forEach(function(_,S){xn(_).forEach(function(N){(b=v.indexOf(N))==-1&&(v[b=v.length]=N);var R=_[N],O="z",P="",J=pr({c:f+b,r:d+S+o});p=ec(c,J),R&&typeof R=="object"&&!(R instanceof Date)?c[J]=R:(typeof R=="number"?O="n":typeof R=="boolean"?O="b":typeof R=="string"?O="s":R instanceof Date?(O="d",a.cellDates||(O="n",R=Pn(R)),P=a.dateNF||Br[14]):R===null&&a.nullError&&(O="e",R=0),p?(p.t=O,p.v=R,delete p.w,delete p.R,P&&(p.z=P)):c[J]=p={t:O,v:R},P&&(p.z=P))})}),x.e.c=Math.max(x.e.c,f+v.length-1);var w=gn(d);if(o)for(b=0;b<v.length;++b)c[vn(b+f)+w]={t:"s",v:v[b]};return c["!ref"]=Hr(x),c}function rI(e,t){return Gb(null,e,t)}function ec(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=an(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?ec(e,pr(t)):ec(e,pr({r:t,c:r||0}))}function nI(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function aI(){return{SheetNames:[],Sheets:{}}}function sI(e,t,r,a){var o=1;if(!r)for(;o<=65535&&e.SheetNames.indexOf(r="Sheet"+o)!=-1;++o,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var c=r.match(/(^.*?)(\d+)$/);o=c&&+c[2]||0;var d=c&&c[1]||r;for(++o;o<=65535&&e.SheetNames.indexOf(r=d+o)!=-1;++o);}if(Mb(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function iI(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=nI(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function oI(e,t){return e.z=t,e}function Vb(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function lI(e,t,r){return Vb(e,"#"+t,r)}function cI(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function dI(e,t,r,a){for(var o=typeof t!="string"?t:Er(t),c=typeof t=="string"?t:Hr(t),d=o.s.r;d<=o.e.r;++d)for(var f=o.s.c;f<=o.e.c;++f){var h=ec(e,d,f);h.t="n",h.F=c,delete h.v,d==o.s.r&&f==o.s.c&&(h.f=r,a&&(h.D=!0))}return e}var Qa={encode_col:vn,encode_row:gn,encode_cell:pr,encode_range:Hr,decode_col:q0,decode_row:W0,split_cell:TC,decode_cell:an,decode_range:ea,format_cell:is,sheet_add_aoa:Vv,sheet_add_json:Gb,sheet_add_dom:zb,aoa_to_sheet:Do,json_to_sheet:rI,table_to_sheet:Ub,table_to_book:OO,sheet_to_csv:ep,sheet_to_txt:$b,sheet_to_json:eu,sheet_to_html:Pb,sheet_to_formulae:tI,sheet_to_row_object_array:eu,sheet_get_cell:ec,book_new:aI,book_append_sheet:sI,book_set_sheet_visibility:iI,cell_set_number_format:oI,cell_set_hyperlink:Vb,cell_set_internal_link:lI,cell_add_comment:cI,sheet_set_array_formula:dI,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function uI({isOpen:e,onClose:t,vaultEntries:r,businessId:a}){const[o,c]=T.useState("weekly"),[d,f]=T.useState("2025-W37"),[h,p]=T.useState(null),[x,y]=T.useState(!1),[v,b]=T.useState(!1),[w,_]=T.useState(""),[S,N]=T.useState(""),[R,O]=T.useState(!1),P=F=>`${F.toFixed(2)}`,J=async(F,Q)=>{try{y(!0);let oe,q;if(v&&F&&Q)oe=new Date(F),oe.setHours(0,0,0,0),q=new Date(Q),q.setHours(23,59,59,999);else if(o==="weekly"){const Ie=new Date,nt=Ie.getDay(),mt=Ie.getDate()-nt+(nt===0?-6:1);oe=new Date(Ie.setDate(mt)),oe.setHours(0,0,0,0),q=new Date(oe),q.setDate(q.getDate()+6),q.setHours(23,59,59,999)}else{const Ie=new Date;oe=new Date(Ie.getFullYear(),Ie.getMonth(),1),q=new Date(Ie.getFullYear(),Ie.getMonth()+1,0,23,59,59,999)}const{data:de,error:te}=await Ne.from("sales").select("total_amount, discount_applied, cashier_id").gte("datetime",oe.toISOString()).lte("datetime",q.toISOString());if(te)throw te;const ne=de?.reduce((Ie,nt)=>Ie+(nt.total_amount||0),0)||0,me=de?.reduce((Ie,nt)=>Ie+(nt.discount_applied||0),0)||0,re=de?.length||0,be=re>0?ne/re:0,{data:W,error:xe}=await Ne.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(category),
          sales!inner(datetime)
        `).gte("sales.datetime",oe.toISOString()).lte("sales.datetime",q.toISOString());if(xe)throw xe;const C=new Map;W?.forEach(Ie=>{const nt=Ie.products?.category||"Other",mt=Ie.quantity*Ie.price_each,Ut=C.get(nt)||{revenue:0,units:0};C.set(nt,{revenue:Ut.revenue+mt,units:Ut.units+Ie.quantity})});const X=Array.from(C.entries()).map(([Ie,nt])=>({name:Ie,revenue:nt.revenue,percentage:ne>0?Number((nt.revenue/ne*100).toFixed(1)):0,units:nt.units})).sort((Ie,nt)=>nt.revenue-Ie.revenue),{data:E,error:z}=await Ne.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(name),
          sales!inner(datetime)
        `).gte("sales.datetime",oe.toISOString()).lte("sales.datetime",q.toISOString());if(z)throw z;const H=new Map;E?.forEach(Ie=>{const nt=Ie.products?.name||"Unknown Product",mt=Ie.quantity*Ie.price_each,Ut=H.get(nt)||{units:0,revenue:0};H.set(nt,{units:Ut.units+Ie.quantity,revenue:Ut.revenue+mt})});const Z=Array.from(H.entries()).map(([Ie,nt])=>({name:Ie,...nt})).sort((Ie,nt)=>nt.revenue-Ie.revenue).slice(0,10).map((Ie,nt)=>({rank:nt+1,...Ie})),{data:ge,error:Fe}=await Ne.from("products").select("name");if(Fe)throw Fe;const Re=(ge?.map(Ie=>{const nt=H.get(Ie.name);return{name:Ie.name,units:nt?.units||0,revenue:nt?.revenue||0}})||[]).sort((Ie,nt)=>Ie.revenue-nt.revenue).slice(0,10).map((Ie,nt)=>({rank:nt+1,...Ie})),{data:Oe,error:et}=await Ne.from("products").select("name, stock_quantity, reorder_level");if(et)throw et;const ve=Oe?.filter(Ie=>Ie.stock_quantity<=Ie.reorder_level).map(Ie=>({product:Ie.name,current:Ie.stock_quantity,reorder:Ie.reorder_level,urgent:Ie.stock_quantity<=Ie.reorder_level*.5}))||[],Ge=Oe?.filter(Ie=>Ie.stock_quantity===0).map(Ie=>({product:Ie.name,lastStock:"N/A",expectedDelivery:"TBD"}))||[],{data:G,error:Ce}=await Ne.from("sales").select(`
          total_amount,
          cashier_id,
          users!inner(username)
        `).gte("datetime",oe.toISOString()).lte("datetime",q.toISOString());if(Ce)throw Ce;const rt=new Map;G?.forEach(Ie=>{const nt=Ie.cashier_id,mt=Ie.users?.username||"Unknown",Ut=rt.get(nt)||{name:mt,revenue:0,transactions:0};rt.set(nt,{name:mt,revenue:Ut.revenue+(Ie.total_amount||0),transactions:Ut.transactions+1})});const Be=Array.from(rt.values()).map(Ie=>({name:Ie.name,revenue:Ie.revenue,transactions:Ie.transactions,avgTransaction:Ie.transactions>0?Ie.revenue/Ie.transactions:0,hours:40,accuracy:99})),{data:gt,error:at}=await Ne.from("side_business_sales").select(`
          total_amount,
          quantity,
          side_business_items!inner(
            name,
            side_businesses!inner(name)
          )
        `).eq("parent_shop_id",a||1).gte("date_time",oe.toISOString()).lte("date_time",q.toISOString());at&&console.error("Error fetching side business data:",at);const vt=new Map;gt&&gt.forEach(Ie=>{const nt=Ie.side_business_items.side_businesses.name,mt=Ie.side_business_items.name;vt.has(nt)||vt.set(nt,{name:nt,revenue:0,transactions:0,items:new Map});const Ut=vt.get(nt);Ut.revenue+=Ie.total_amount,Ut.transactions+=1,Ut.items.has(mt)||Ut.items.set(mt,{name:mt,units:0,revenue:0});const or=Ut.items.get(mt);or.units+=Ie.quantity,or.revenue+=Ie.total_amount});const bt=Array.from(vt.values()).map(Ie=>({name:Ie.name,revenue:Ie.revenue,transactions:Ie.transactions,avgTransaction:Ie.transactions>0?Ie.revenue/Ie.transactions:0,topItems:Array.from(Ie.items.values()).sort((nt,mt)=>mt.revenue-nt.revenue).slice(0,3)}));p({kpis:{totalSales:ne,transactions:re,avgTransaction:be,discounts:me},categories:X,topProducts:Z,leastSoldProducts:Re,lowStock:ve,outOfStock:Ge,staff:Be,sideBusinesses:bt})}catch(oe){console.error("Error fetching report data:",oe)}finally{y(!1)}};T.useEffect(()=>{e&&J()},[e,o,d]);const ae=()=>{const F=window.open("","_blank"),Q=document.getElementById("sales-report-content").innerHTML;F.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>LandM Store Sales Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
            th { background-color: #f5f5f5; }
            .urgent { color: red; font-weight: bold; }
            .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0; }
            .kpi-card { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
            h1, h2, h3 { color: #333; }
            .print-only { display: block; }
          </style>
        </head>
        <body>
          ${Q}
          <script>window.print();<\/script>
        </body>
      </html>
    `)},Y=async()=>{try{O(!0);const F=v?w:null,Q=v?S:null;let oe="";if(v&&F&&Q){const X=new Date(F).toLocaleDateString("en-IE"),E=new Date(Q).toLocaleDateString("en-IE");oe=`${X}_to_${E}`}else if(o==="weekly")oe=`Week_${d}`;else{const X=new Date;oe=`${X.getFullYear()}_${String(X.getMonth()+1).padStart(2,"0")}`}const q=Qa.book_new(),de=[["LANDM STORE - FINANCIAL REPORT FOR ACCOUNTANT"],[""],["BUSINESS INFORMATION"],["Company Name:","LandM Store"],["Address:","Unit 2 Glenmore Park, Dundalk, Co. Louth"],["Phone:","087 797 0412"],["VAT Number:","IE1234567A"],["Business Type:","Retail Store"],[""],["REPORTING PERIOD"],["Period:",v?`${w} to ${S}`:o==="weekly"?`Week ${d}`:new Date().toLocaleDateString("en-IE",{year:"numeric",month:"long"})],["Report Generated:",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})],[""],["REVENUE SUMMARY (EXCLUDING VAT)"],["Gross Sales Revenue",h?.kpis.totalSales?h.kpis.totalSales:0],["Less: Customer Discounts",h?.kpis.discounts?h.kpis.discounts:0],["Net Sales Revenue (Before VAT)",h?.kpis.totalSales&&h?.kpis.discounts?h.kpis.totalSales-h.kpis.discounts:h?.kpis.totalSales?h.kpis.totalSales:0],[""],["TRANSACTION ANALYSIS"],["Total Number of Transactions",h?.kpis.transactions||0],["Average Transaction Value",h?.kpis.avgTransaction?h.kpis.avgTransaction:0],["Total Items Sold",h?.categories.reduce((X,E)=>X+E.units,0)||0],[""],["CATEGORY PERFORMANCE"],["Category","Revenue","Percentage of Sales","Units Sold","Average Price per Unit"],...h?.categories.map(X=>[X.name,X.revenue,`${X.percentage}%`,X.units,X.units>0?X.revenue/X.units:0])||[],[""],["TOP PERFORMING PRODUCTS"],["Product Name","Units Sold","Revenue Generated","Average Price per Unit"],...h?.topProducts.slice(0,15).map(X=>[X.name,X.units,X.revenue,X.units>0?X.revenue/X.units:0])||[],[""],["ACCOUNTING NOTES"],["1. All amounts are in Euro ()"],["2. Revenue figures are exclusive of VAT unless otherwise stated"],["3. Customer discounts are deducted from gross revenue"],["4. This report is generated automatically from POS system data"],["5. For VAT calculations, standard rate should be applied to net sales"],["6. Inventory movements and cost of goods sold are not included in this report"],["7. Report covers retail sales only - side business operations excluded"],[""],["VERIFICATION REQUIRED"],["- Cross-reference with bank deposits"],["- Verify VAT calculations and rates"],["- Confirm discount policies and approvals"],["- Reconcile with physical inventory counts"]],te=Qa.aoa_to_sheet(de);Qa.book_append_sheet(q,te,"Financial Summary");const ne=[["DETAILED SALES BREAKDOWN"],[""],["Product Name","Category","Units Sold","Revenue Generated","Average Price per Unit"],...h?.topProducts.map(X=>[X.name,h.categories.find(E=>h.topProducts.filter(z=>h.categories.some(H=>H.name==="Category"&&z.name===X.name)).length>0)?.name||"Other",X.units,X.revenue,X.units>0?X.revenue/X.units:0])||[],[""],["CATEGORY TOTALS"],["Category","Total Revenue","Total Units","Average Price per Unit","Percentage of Total Sales"],...h?.categories.map(X=>[X.name,X.revenue,X.units,X.units>0?X.revenue/X.units:0,`${X.percentage}%`])||[]],me=Qa.aoa_to_sheet(ne);Qa.book_append_sheet(q,me,"Sales Details");const re=[["TRANSACTION ANALYSIS"],[""],["Metric","Value","Notes"],["Total Transactions",h?.kpis.transactions||0,"Number of completed sales"],["Average Transaction Value",h?.kpis.avgTransaction?h.kpis.avgTransaction:0,"Revenue per transaction"],["Total Items Sold",h?.categories.reduce((X,E)=>X+E.units,0)||0,"Sum of all units sold"],["Average Items per Transaction",h?.kpis.transactions>0?h.categories.reduce((X,E)=>X+E.units,0)/h.kpis.transactions:0,"Items sold divided by transactions"],["Discount Rate",h?.kpis.totalSales>0?(h.kpis.discounts/h.kpis.totalSales*100).toFixed(2)+"%":"0%","Percentage of revenue given as discounts"],[""],["DAILY BREAKDOWN (ESTIMATED)"],["Note: Daily breakdown requires individual transaction data"],["Average Daily Revenue",h?.kpis.totalSales&&h?.kpis.transactions>0?h.kpis.totalSales/Math.max(1,h.kpis.transactions/10):0,"Estimated based on transaction volume"],["Average Daily Transactions",h?.kpis.transactions>0?h.kpis.transactions/Math.max(1,h.kpis.transactions/10):0,"Estimated daily transaction count"]],be=Qa.aoa_to_sheet(re);Qa.book_append_sheet(q,be,"Transaction Analysis");const W=[["VAT CALCULATION WORKSHEET"],[""],["IMPORTANT: This is a template - verify VAT rates and calculations"],[""],["Net Sales Revenue (Before VAT)",h?.kpis.totalSales&&h?.kpis.discounts?h.kpis.totalSales-h.kpis.discounts:h?.kpis.totalSales?h.kpis.totalSales:0],[""],["VAT CALCULATIONS (Standard Rate 23%)"],["VAT on Net Sales",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],["Total Revenue Including VAT",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*1.23:h?.kpis.totalSales?h.kpis.totalSales*1.23:0],[""],["VAT CALCULATIONS (Reduced Rate 13.5% - if applicable)"],["Note: Verify which products qualify for reduced rate"],["VAT on Reduced Rate Items",0,"To be calculated based on product categorization"],[""],["VAT SUMMARY"],["Standard Rate VAT (23%)",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],["Reduced Rate VAT (13.5%)",0,"Calculate based on qualifying products"],["Total VAT Collected",h?.kpis.totalSales&&h?.kpis.discounts?(h.kpis.totalSales-h.kpis.discounts)*.23:h?.kpis.totalSales?h.kpis.totalSales*.23:0],[""],["VERIFICATION CHECKLIST"],[" Verify current VAT rates"],[" Confirm product VAT categorization"],[" Cross-check with VAT returns"],[" Validate calculation methods"],[" Check for any exempt or zero-rated items"]],xe=Qa.aoa_to_sheet(W);Qa.book_append_sheet(q,xe,"VAT Calculation");const C=`LandM_Store_Accountant_Report_${oe}_${new Date().toISOString().split("T")[0]}.xlsx`;JO(q,C)}catch(F){console.error("Error exporting to Excel:",F),alert("Failed to export to Excel. Please try again.")}finally{O(!1)}};return e?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"900px",width:"95%",maxHeight:"80vh",overflowY:"auto",color:"#3e3f29"},children:[x&&s.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[s.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{fontSize:"24px",marginBottom:"20px"}}),s.jsx("p",{children:"Loading report data..."})]}),!x&&!h&&s.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"20px",color:"#dc3545"}}),s.jsx("p",{children:"Unable to load report data. Please try again."}),s.jsx("button",{onClick:t,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"8px",marginTop:"20px",cursor:"pointer"},children:"Close"})]}),!x&&h&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[s.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[s.jsx("i",{className:"fa-solid fa-chart-line",style:{marginRight:"10px",color:"#7d8d86"}}),"Sales Reports"]}),s.jsx("button",{onClick:t,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:F=>{F.currentTarget.style.background="#7d8d86",F.currentTarget.style.color="#ffffff",F.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:F=>{F.currentTarget.style.background="none",F.currentTarget.style.color="#3e3f29",F.currentTarget.style.transform="rotate(0deg)"},children:""})]}),s.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"30px",flexWrap:"wrap",alignItems:"center"},children:[s.jsxs("select",{style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:o,onChange:F=>c(F.target.value),children:[s.jsx("option",{value:"weekly",children:"Weekly Report"}),s.jsx("option",{value:"monthly",children:"Monthly Report"}),s.jsx("option",{value:"custom",children:"Custom Date Range"})]}),o==="weekly"&&s.jsx("input",{type:"week",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:d,onChange:F=>f(F.target.value)}),o==="custom"&&s.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[s.jsx("input",{type:"date",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:w,onChange:F=>_(F.target.value),placeholder:"Start Date"}),s.jsx("span",{style:{color:"#7d8d86",fontSize:"14px"},children:"to"}),s.jsx("input",{type:"date",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:S,onChange:F=>N(F.target.value),placeholder:"End Date"})]}),s.jsxs("button",{onClick:()=>J(w,S),disabled:x||o==="custom"&&(!w||!S),style:{background:x?"#cccccc":"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:x?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:F=>{x||(F.currentTarget.style.background="#3e3f29",F.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:F=>{x||(F.currentTarget.style.background="#7d8d86",F.currentTarget.style.transform="translateY(0)")},children:[s.jsx("i",{className:`fa-solid ${x?"fa-spinner fa-spin":"fa-refresh"}`}),x?"Loading...":"Refresh Data"]}),s.jsxs("button",{onClick:ae,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:F=>{F.currentTarget.style.background="#3e3f29",F.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:F=>{F.currentTarget.style.background="#7d8d86",F.currentTarget.style.transform="translateY(0)"},children:[s.jsx("i",{className:"fa-solid fa-print"}),"Print Report"]}),s.jsxs("button",{onClick:Y,disabled:R||!h||o==="custom"&&(!w||!S),style:{background:R?"#cccccc":"#10b981",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:R?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:F=>{R||(F.currentTarget.style.background="#059669",F.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:F=>{R||(F.currentTarget.style.background="#10b981",F.currentTarget.style.transform="translateY(0)")},children:[s.jsx("i",{className:`fa-solid ${R?"fa-spinner fa-spin":"fa-file-excel"}`}),R?"Exporting...":"Export to Excel"]})]}),s.jsxs("div",{id:"sales-report-content",style:{color:"#3e3f29"},children:[s.jsxs("div",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",paddingBottom:"20px",marginBottom:"30px"},children:[s.jsxs("h1",{style:{color:"#3e3f29",fontSize:"28px",fontWeight:"700",marginBottom:"10px"},children:[s.jsx("i",{className:"fa-solid fa-file-invoice",style:{marginRight:"10px"}}),"LandM Store Sales Report"]}),s.jsx("p",{style:{color:"#7d8d86",fontSize:"16px"},children:"Reporting Period: Week 37: 9-15 September 2025"})]}),s.jsxs("section",{style:{marginBottom:"40px"},children:[s.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx("i",{className:"fa-solid fa-chart-bar",style:{marginRight:"10px"}}),"1. Overview (KPIs)"]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[s.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Sales"}),s.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:P(h.kpis.totalSales)})]}),s.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Transactions"}),s.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:h.kpis.transactions.toLocaleString()})]}),s.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Avg Transaction"}),s.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:P(h.kpis.avgTransaction)})]}),s.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Discounts"}),s.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:P(h.kpis.discounts)})]})]})]}),s.jsxs("section",{style:{marginBottom:"40px"},children:[s.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx("i",{className:"fa-solid fa-shopping-cart",style:{marginRight:"10px"}}),"2. Sales Breakdown"]}),s.jsxs("div",{style:{marginBottom:"30px"},children:[s.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Sales by Category"}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Category"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"% of Total"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"})]})}),s.jsx("tbody",{children:h.categories.map((F,Q)=>s.jsxs("tr",{style:{background:Q%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:F.name}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:P(F.revenue)}),s.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[F.percentage,"%"]}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:F.units})]},Q))})]})})]}),s.jsxs("div",{style:{marginBottom:"30px"},children:[s.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Top 10 Products Sold"}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Rank"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),s.jsx("tbody",{children:h.topProducts.map(F=>s.jsxs("tr",{style:{background:F.rank%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[s.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:["#",F.rank]}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:F.name}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:F.units}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:P(F.revenue)})]},F.rank))})]})})]}),s.jsxs("div",{style:{marginBottom:"30px"},children:[s.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Least Sold Products"}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),s.jsx("tbody",{children:h.leastSoldProducts.map((F,Q)=>s.jsxs("tr",{style:{background:Q%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:F.name}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:F.units}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:P(F.revenue)})]},F.rank))})]})})]})]}),s.jsxs("section",{style:{marginBottom:"40px"},children:[s.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx("i",{className:"fa-solid fa-warehouse",style:{marginRight:"10px"}}),"3. Inventory Alerts"]}),s.jsxs("div",{style:{marginBottom:"30px"},children:[s.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc3545"}}),"Low Stock Products"]}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Current Stock"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Reorder Level"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Status"})]})}),s.jsx("tbody",{children:h.lowStock.map((F,Q)=>s.jsxs("tr",{style:{background:Q%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:F.product}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:F.current}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:F.reorder}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29"},children:F.urgent&&s.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:"URGENT"})})]},Q))})]})})]}),h.outOfStock.length>0&&s.jsxs("div",{style:{marginBottom:"30px"},children:[s.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("i",{className:"fa-solid fa-box",style:{color:"#dc3545"}}),"Out of Stock Products"]}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Last Stock Date"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Expected Delivery"})]})}),s.jsx("tbody",{children:h.outOfStock.map((F,Q)=>s.jsxs("tr",{style:{background:Q%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:F.product}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:F.lastStock}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:F.expectedDelivery})]},Q))})]})})]})]}),s.jsxs("section",{style:{marginBottom:"40px"},children:[s.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx("i",{className:"fa-solid fa-users",style:{marginRight:"10px"}}),"4. Staff Performance"]}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Cashier"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue Handled"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Hours"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Accuracy"})]})}),s.jsx("tbody",{children:h.staff.map((F,Q)=>s.jsxs("tr",{style:{background:Q%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:F.name}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P(F.revenue)}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:F.transactions}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P(F.avgTransaction)}),s.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[F.hours,"h"]}),s.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[F.accuracy,"%"]})]},Q))})]})})]}),s.jsxs("section",{style:{marginBottom:"40px"},children:[s.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx("i",{className:"fa-solid fa-store",style:{marginRight:"10px"}}),"5. Side Business Performance"]}),h.sideBusinesses.length>0?s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Business Name"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),s.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Top Items"})]})}),s.jsx("tbody",{children:h.sideBusinesses.map((F,Q)=>s.jsxs("tr",{style:{background:Q%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:F.name}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P(F.revenue)}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:F.transactions}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:P(F.avgTransaction)}),s.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:F.topItems.map((oe,q)=>s.jsxs("div",{style:{fontSize:"12px",marginBottom:"2px",color:"#7d8d86"},children:[oe.name,": ",oe.units," units (",P(oe.revenue),")"]},q))})]},Q))})]})}):s.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#7d8d86",background:"rgba(125, 141, 134, 0.05)",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsx("i",{className:"fa-solid fa-store",style:{fontSize:"24px",marginBottom:"10px",display:"block"}}),"No side business sales data found for this period."]})]}),s.jsxs("section",{style:{borderTop:"2px solid rgba(125, 141, 134, 0.3)",paddingTop:"20px",marginTop:"40px"},children:[s.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:[s.jsx("i",{className:"fa-solid fa-file-text",style:{marginRight:"10px"}}),"6. Report Footer"]}),s.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[s.jsxs("div",{children:[s.jsx("h3",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"10px"},children:"LandM Store"}),s.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Unit 2 Glenmore Park, Dundalk, Co. Louth"}),s.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Phone: 087 797 0412"}),s.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"VAT Number: IE1234567A"})]}),s.jsxs("div",{style:{textAlign:"right"},children:[s.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[s.jsx("strong",{children:"Reporting Period:"})," Week 37: 9-15 September 2025"]}),s.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[s.jsx("strong",{children:"Generated on:"})," ",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsx("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:s.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",fontStyle:"italic",margin:0},children:"This report was automatically generated by the LandM Store POS System. For questions or clarifications, contact the store manager."})})]})]})]})]})]})}):null}const fI=({isOpen:e,onClose:t})=>{const{user:r}=on(),[a,o]=T.useState(""),[c,d]=T.useState(""),[f,h]=T.useState(""),[p,x]=T.useState(!1),[y,v]=T.useState(null),[b,w]=T.useState([]),[_,S]=T.useState(!1),[N,R]=T.useState(!1),[O,P]=T.useState(!1),[J,ae]=T.useState({title:"",username:"",password:"",website:""}),[Y,F]=T.useState(new Set),[Q,oe]=T.useState(null),[q,de]=T.useState(!1),[te,ne]=T.useState(!1),[me,re]=T.useState(""),[be,W]=T.useState(""),[xe,C]=T.useState(!1);T.useEffect(()=>{e&&(o(""),d(""),h(""),x(!1),v(null),w([]),S(!1),R(!1),P(!1),F(new Set),oe(null),de(!1),ne(!1),re(""),W(""),C(!1),ae({title:"",username:"",password:"",website:""}))},[e]);const X=G=>{a.length<4&&(o(Ce=>Ce+G),d(""),h(""))},E=()=>{o(""),d(""),h("")},z=async G=>{if(r)try{const Ce=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(G)),rt=Array.from(new Uint8Array(Ce)).map(at=>at.toString(16).padStart(2,"0")).join(""),{data:Be,error:gt}=await Ne.from("vault").insert([{owner_id:r.user_id,pin_hash:rt}]).select();if(gt)throw gt;v(Be[0].vault_id),d(" Vault created successfully!"),h("success"),x(!0)}catch(Ce){console.error("Error creating vault:",Ce),d(" Failed to create vault. Try again."),h("error")}},H=async G=>{if(r)try{const{data:Ce,error:rt}=await Ne.from("vault").select("vault_id, pin_hash").eq("owner_id",r.user_id).single();if(rt){if(rt.code==="PGRST116"){R(!0),d("Creating your vault..."),h("success"),await z(G);return}throw rt}const Be=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(G)),gt=Array.from(new Uint8Array(Be)).map(at=>at.toString(16).padStart(2,"0")).join("");Ce.pin_hash===gt?(v(Ce.vault_id),d(" Access Granted! Vault Unlocked"),h("success"),x(!0),await Z(Ce.vault_id)):(d(" Incorrect PIN. Try again."),h("error"),setTimeout(()=>E(),1e3))}catch(Ce){console.error("Error verifying PIN:",Ce),d(" Failed to access vault. Try again."),h("error")}},Z=async G=>{try{const{data:Ce,error:rt}=await Ne.from("vault_entries").select("entry_id, label, email, password_enc, link, created_at").eq("vault_id",G).order("created_at",{ascending:!1});if(rt)throw rt;console.log("Raw data from database:",Ce),Ce.length>0&&(console.log("First entry password_enc:",Ce[0].password_enc),console.log("Type of password_enc:",typeof Ce[0].password_enc));const Be=Ce.map(gt=>({...gt,password:gt.password_enc||"No password"}));w(Be),S(!0)}catch(Ce){console.error("Error fetching vault entries:",Ce)}},ge=async()=>{if(!y||!J.title||!J.password){d(" Title and password are required"),h("error");return}try{const{data:G,error:Ce}=await Ne.from("vault_entries").insert([{vault_id:y,label:J.title,email:J.username,password_enc:J.password,link:J.website}]).select();if(Ce)throw Ce;await Z(y),ae({title:"",username:"",password:"",website:""}),P(!1),d(" Password saved successfully!"),h("success")}catch(G){console.error("Error saving entry:",G),d(" Failed to save password. Try again."),h("error")}},Fe=G=>{F(Ce=>{const rt=new Set(Ce);return rt.has(G)?rt.delete(G):rt.add(G),rt})},qe=async(G,Ce)=>{try{await navigator.clipboard.writeText(G),d(` ${Ce} copied to clipboard!`),h("success"),setTimeout(()=>{d(""),h("")},2e3)}catch{d(` Failed to copy ${Ce}`),h("error"),setTimeout(()=>{d(""),h("")},2e3)}},Re=G=>{oe(G)},Oe=async G=>{if(y)try{const{error:Ce}=await Ne.from("vault_entries").delete().eq("entry_id",G).eq("vault_id",y);if(Ce)throw Ce;await Z(y),oe(null),d(" Password deleted successfully!"),h("success"),setTimeout(()=>{d(""),h("")},2e3)}catch(Ce){console.error("Error deleting entry:",Ce),d(" Failed to delete password. Try again."),h("error"),setTimeout(()=>{d(""),h("")},2e3)}},et=()=>{a.length===4&&H(a)},ve=async()=>{if(me.length<4){d(" PIN must be at least 4 digits"),h("error");return}if(me!==be){d(" PINs do not match"),h("error");return}if(!y){d(" No vault found"),h("error");return}C(!0),d("Updating vault PIN..."),h("success");try{const G=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(me)),Ce=Array.from(new Uint8Array(G)).map(Be=>Be.toString(16).padStart(2,"0")).join(""),{error:rt}=await Ne.from("vault").update({pin_hash:Ce}).eq("vault_id",y);if(rt)throw rt;d(" Vault PIN updated successfully!"),h("success"),re(""),W(""),ne(!1)}catch(G){console.error("Error updating vault PIN:",G),d(" Failed to update vault PIN"),h("error")}finally{C(!1)}},Ge=G=>{const Ce=G.key;Ce>="0"&&Ce<="9"?X(Ce):Ce==="Backspace"||Ce==="Delete"?a.length>0&&o(rt=>rt.slice(0,-1)):Ce==="Enter"?et():Ce==="Escape"&&t()};return e?s.jsxs(s.Fragment,{children:[!p&&s.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"400px",width:"90%",textAlign:"center"},onKeyDown:Ge,tabIndex:-1,children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",border:"1px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29"},children:[s.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px"},children:N?"Creating your vault...":"Enter your 4-digit PIN"}),s.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"30px"},children:[0,1,2,3].map(G=>s.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"2px solid rgba(125, 141, 134, 0.3)",background:G<a.length?"linear-gradient(135deg, #7d8d86, #3e3f29)":"transparent",borderColor:G<a.length?"#3e3f29":"rgba(125, 141, 134, 0.3)",transform:G<a.length?"scale(1.1)":"scale(1)",transition:"all 0.3s ease"}},G))}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"15px",marginBottom:"20px"},children:[[1,2,3,4,5,6,7,8,9].map(G=>s.jsx("button",{onClick:()=>X(G.toString()),style:{width:"70px",height:"70px",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)"},onMouseEnter:Ce=>{Ce.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",Ce.currentTarget.style.color="#f1f0e4",Ce.currentTarget.style.transform="translateY(-2px)",Ce.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:Ce=>{Ce.currentTarget.style.background="#ffffff",Ce.currentTarget.style.color="#3e3f29",Ce.currentTarget.style.transform="translateY(0)",Ce.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:G},G)),s.jsx("button",{onClick:()=>X("0"),style:{width:"70px",height:"70px",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)",gridColumn:"2"},onMouseEnter:G=>{G.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",G.currentTarget.style.color="#f1f0e4",G.currentTarget.style.transform="translateY(-2px)",G.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:G=>{G.currentTarget.style.background="#ffffff",G.currentTarget.style.color="#3e3f29",G.currentTarget.style.transform="translateY(0)",G.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:"0"})]}),s.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[s.jsx("button",{onClick:E,style:{padding:"12px 24px",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",background:"transparent",color:"#7d8d86",border:"2px solid rgba(125, 141, 134, 0.3)"},onMouseEnter:G=>{G.currentTarget.style.background="rgba(125, 141, 134, 0.1)",G.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:G=>{G.currentTarget.style.background="transparent",G.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Clear"}),s.jsx("button",{onClick:et,disabled:a.length!==4,style:{padding:"12px 24px",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:a.length===4?"pointer":"not-allowed",transition:"all 0.3s ease",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#f1f0e4",border:"2px solid transparent",opacity:a.length===4?1:.5},onMouseEnter:G=>{a.length===4&&(G.currentTarget.style.transform="translateY(-2px)",G.currentTarget.style.boxShadow="0 8px 16px rgba(62, 63, 41, 0.2)")},onMouseLeave:G=>{G.currentTarget.style.transform="translateY(0)",G.currentTarget.style.boxShadow="none"},children:N?"Creating...":"Unlock"})]}),c&&s.jsx("div",{style:{marginTop:"20px",padding:"12px",borderRadius:"10px",fontSize:"14px",fontWeight:"500",background:f==="success"?"rgba(125, 141, 134, 0.1)":"rgba(220, 53, 69, 0.1)",color:f==="success"?"#3e3f29":"#dc3545",border:f==="success"?"1px solid rgba(125, 141, 134, 0.3)":"1px solid rgba(220, 53, 69, 0.3)"},children:c})]})}),p&&s.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"900px",width:"95%",maxHeight:"70vh",minHeight:"500px",overflowY:"auto",textAlign:"center"},onKeyDown:Ge,tabIndex:-1,children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",color:"#3e3f29"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[s.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[s.jsx("i",{className:"fa-solid fa-vault",style:{marginRight:"10px",color:"#7d8d86"}}),"Password Vault"]}),s.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[s.jsxs("button",{onClick:()=>ne(!0),style:{background:"#dc3545",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:G=>{G.currentTarget.style.background="#c82333",G.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:G=>{G.currentTarget.style.background="#dc3545",G.currentTarget.style.transform="translateY(0)"},children:[s.jsx("i",{className:"fa-solid fa-key"}),"Manage PIN"]}),s.jsxs("button",{onClick:()=>de(!0),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:G=>{G.currentTarget.style.background="#3e3f29",G.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:G=>{G.currentTarget.style.background="#7d8d86",G.currentTarget.style.transform="translateY(0)"},children:[s.jsx("i",{className:"fa-solid fa-chart-line"}),"Reports"]}),s.jsx("button",{onClick:t,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:G=>{G.currentTarget.style.background="#7d8d86",G.currentTarget.style.color="#ffffff",G.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:G=>{G.currentTarget.style.background="none",G.currentTarget.style.color="#3e3f29",G.currentTarget.style.transform="rotate(0deg)"},children:""})]})]}),s.jsx("div",{style:{marginBottom:"20px"},children:s.jsxs("button",{onClick:()=>P(!O),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"25px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},onMouseEnter:G=>{G.currentTarget.style.background="#3e3f29",G.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:G=>{G.currentTarget.style.background="#7d8d86",G.currentTarget.style.transform="translateY(0)"},children:[s.jsx("i",{className:"fa-solid fa-plus"}),O?"Cancel":"Add Password"]})}),O&&s.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",marginBottom:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",textAlign:"center"},children:"Add New Password"}),s.jsxs("div",{style:{display:"grid",gap:"15px"},children:[s.jsx("input",{type:"text",placeholder:"Title (e.g., Facebook, Twitter)",value:J.title,onChange:G=>ae({...J,title:G.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:G=>{G.target.style.borderColor="#7d8d86",G.target.style.background="#ffffff"},onBlur:G=>{G.target.style.borderColor="rgba(125, 141, 134, 0.3)",G.target.style.background="#ffffff"}}),s.jsx("input",{type:"text",placeholder:"Username/Email",value:J.username,onChange:G=>ae({...J,username:G.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:G=>{G.target.style.borderColor="#7d8d86",G.target.style.background="#ffffff"},onBlur:G=>{G.target.style.borderColor="rgba(125, 141, 134, 0.3)",G.target.style.background="#ffffff"}}),s.jsx("input",{type:"password",placeholder:"Password",value:J.password,onChange:G=>ae({...J,password:G.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:G=>{G.target.style.borderColor="#7d8d86",G.target.style.background="#ffffff"},onBlur:G=>{G.target.style.borderColor="rgba(125, 141, 134, 0.3)",G.target.style.background="#ffffff"}}),s.jsx("input",{type:"url",placeholder:"Website (optional)",value:J.website,onChange:G=>ae({...J,website:G.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:G=>{G.target.style.borderColor="#7d8d86",G.target.style.background="#ffffff"},onBlur:G=>{G.target.style.borderColor="rgba(125, 141, 134, 0.3)",G.target.style.background="#ffffff"}}),s.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[s.jsx("button",{onClick:()=>P(!1),style:{padding:"10px 20px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"20px",background:"transparent",color:"#7d8d86",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:G=>{G.currentTarget.style.background="rgba(125, 141, 134, 0.1)",G.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:G=>{G.currentTarget.style.background="transparent",G.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),s.jsx("button",{onClick:ge,disabled:!J.title||!J.password,style:{padding:"10px 20px",border:"none",borderRadius:"20px",background:J.title&&J.password?"#7d8d86":"rgba(125, 141, 134, 0.3)",color:"#f1f0e4",fontSize:"14px",fontWeight:"600",cursor:J.title&&J.password?"pointer":"not-allowed",transition:"all 0.3s ease"},onMouseEnter:G=>{J.title&&J.password&&(G.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:G=>{G.currentTarget.style.transform="translateY(0)"},children:"Save Password"})]})]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:s.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[s.jsxs("div",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx("i",{className:"fa-solid fa-shield-halved"}),"Saved Passwords"]}),b.length>0?s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:b.map(G=>s.jsxs("div",{style:{background:"#ffffff",borderRadius:"10px",padding:"15px",border:"1px solid rgba(125, 141, 134, 0.2)",transition:"all 0.3s ease",cursor:"pointer",position:"relative"},onMouseEnter:Ce=>{Ce.currentTarget.style.background="rgba(125, 141, 134, 0.1)",Ce.currentTarget.style.borderColor="#7d8d86",Ce.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Ce=>{Ce.currentTarget.style.background="#ffffff",Ce.currentTarget.style.borderColor="rgba(125, 141, 134, 0.2)",Ce.currentTarget.style.transform="translateY(0)"},children:[s.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),Re(G.entry_id)},style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",color:"#dc3545",fontSize:"16px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.3s ease",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Ce=>{Ce.currentTarget.style.background="rgba(220, 53, 69, 0.1)",Ce.currentTarget.style.transform="scale(1.1)"},onMouseLeave:Ce=>{Ce.currentTarget.style.background="none",Ce.currentTarget.style.transform="scale(1)"},children:""}),s.jsx("div",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"5px",paddingRight:"30px"},children:G.label}),s.jsx("div",{style:{color:"#7d8d86",fontSize:"14px",marginBottom:"8px"},children:G.email}),s.jsx("div",{style:{color:"#3e3f29",fontSize:"14px",fontFamily:"monospace",marginBottom:"8px",padding:"4px 8px",background:"rgba(125, 141, 134, 0.1)",borderRadius:"4px",wordBreak:"break-all"},children:Y.has(G.entry_id)?G.password:""}),s.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[s.jsxs("button",{onClick:()=>qe(G.password,"Password"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Ce=>{Ce.currentTarget.style.background="#3e3f29",Ce.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Ce=>{Ce.currentTarget.style.background="#7d8d86",Ce.currentTarget.style.transform="translateY(0)"},children:[s.jsx("i",{className:"fa-solid fa-copy",style:{marginRight:"4px"}}),"Copy"]}),s.jsxs("button",{onClick:()=>qe(G.email,"Email"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Ce=>{Ce.currentTarget.style.background="#3e3f29",Ce.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Ce=>{Ce.currentTarget.style.background="#7d8d86",Ce.currentTarget.style.transform="translateY(0)"},children:[s.jsx("i",{className:"fa-solid fa-envelope",style:{marginRight:"4px"}}),"Copy Email"]}),s.jsxs("button",{onClick:()=>Fe(G.entry_id),style:{background:Y.has(G.entry_id)?"#3e3f29":"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Ce=>{Ce.currentTarget.style.background=Y.has(G.entry_id)?"#7d8d86":"#3e3f29",Ce.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Ce=>{Ce.currentTarget.style.background=Y.has(G.entry_id)?"#3e3f29":"#7d8d86",Ce.currentTarget.style.transform="translateY(0)"},children:[s.jsx("i",{className:`fa-solid ${Y.has(G.entry_id)?"fa-eye-slash":"fa-eye"}`,style:{marginRight:"4px"}}),Y.has(G.entry_id)?"Hide":"Show"]})]})]},G.entry_id))}):s.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#bca88d",fontSize:"14px"},children:[s.jsx("i",{className:"fa-solid fa-folder-open",style:{fontSize:"24px",marginBottom:"8px",display:"block"}}),"No passwords saved yet"]})]})})]})}),Q&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"400px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[s.jsx("h3",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"15px"},children:"Delete Password?"}),s.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"25px",lineHeight:"1.5"},children:"Are you sure you want to delete this password? This action cannot be undone."}),s.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[s.jsx("button",{onClick:()=>oe(null),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:G=>{G.currentTarget.style.background="rgba(125, 141, 134, 0.1)",G.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:G=>{G.currentTarget.style.background="transparent",G.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),s.jsx("button",{onClick:()=>Oe(Q),style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:G=>{G.currentTarget.style.background="#c82333",G.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:G=>{G.currentTarget.style.background="#dc3545",G.currentTarget.style.transform="translateY(0)"},children:"Delete"})]})]})}),te&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"500px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[s.jsxs("h3",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[s.jsx("i",{className:"fa-solid fa-key",style:{color:"#dc3545"}}),"Manage System PIN"]}),s.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px",lineHeight:"1.5"},children:"Change the system access PIN. This PIN is required to access the POS system."}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",marginBottom:"30px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"New PIN (minimum 4 digits)"}),s.jsx("input",{type:"password",value:me,onChange:G=>re(G.target.value),placeholder:"Enter new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:G=>{G.target.style.borderColor="#dc3545"},onBlur:G=>{G.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#3e3f29",marginBottom:"8px",textAlign:"left"},children:"Confirm PIN"}),s.jsx("input",{type:"password",value:be,onChange:G=>W(G.target.value),placeholder:"Confirm new PIN",style:{width:"100%",padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease",fontFamily:"monospace",letterSpacing:"2px"},onFocus:G=>{G.target.style.borderColor="#dc3545"},onBlur:G=>{G.target.style.borderColor="rgba(125, 141, 134, 0.3)"},maxLength:10})]})]}),s.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[s.jsx("button",{onClick:()=>ne(!1),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:G=>{G.currentTarget.style.background="rgba(125, 141, 134, 0.1)",G.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:G=>{G.currentTarget.style.background="transparent",G.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),s.jsx("button",{onClick:ve,disabled:xe||me.length<4||me!==be,style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:xe||me.length<4||me!==be?"rgba(220, 53, 69, 0.3)":"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:xe||me.length<4||me!==be?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:G=>{!xe&&me.length>=4&&me===be&&(G.currentTarget.style.background="#c82333",G.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:G=>{G.currentTarget.style.background=xe||me.length<4||me!==be?"rgba(220, 53, 69, 0.3)":"#dc3545",G.currentTarget.style.transform="translateY(0)"},children:xe?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-save"}),"Update PIN"]})})]})]})}),s.jsx(uI,{isOpen:q,onClose:()=>de(!1),vaultEntries:b,businessId:r?.business_id})]}):null},hI=()=>{const{businessId:e,businessLoading:t}=su(),[r,a]=T.useState([]),[o,c]=T.useState(!1),[d,f]=T.useState(!1),[h,p]=T.useState(null),[x,y]=T.useState({username:"",password:"",role:"Cashier",icon:"ryu"}),v=[{name:"lily",label:"Lily"},{name:"chunli",label:"Chun-Li"},{name:"ken",label:"Ken"},{name:"kimberly",label:"Kimberly"},{name:"mai",label:"Mai"},{name:"manon",label:"Manon"},{name:"rashid",label:"Rashid"},{name:"ryu",label:"Ryu"},{name:"zangief",label:"Zangief"}],[b,w]=T.useState(!1),[_,S]=T.useState(""),[N,R]=T.useState(!0),[O,P]=T.useState(!1);T.useEffect(()=>{e&&J()},[e,t]);const J=async()=>{if(!e){a([]),R(!1);return}try{R(!0);const{data:te,error:ne}=await Ne.from("users").select("*").eq("business_id",e).order("user_id",{ascending:!1});if(ne){console.error("Error fetching users:",ne),S("Failed to fetch users");return}a(te||[])}catch(te){console.error("Error fetching users:",te),S("Failed to fetch users")}finally{R(!1)}},ae=async te=>{if(te.preventDefault(),w(!0),S(""),!x.username.trim()){S("Username is required"),w(!1);return}if(!x.password.trim()){S("Password is required"),w(!1);return}if(!e){S("Business ID is not available. Please refresh the page and try again."),w(!1);return}try{console.log("Adding user with data:",{username:x.username,role:x.role,icon:x.icon,business_id:e});const{data:ne,error:me}=await Ne.from("users").select("user_id").eq("username",x.username.trim()).eq("business_id",e).single();if(me&&me.code!=="PGRST116")throw console.error("Error checking username:",me),new Error("Failed to check if username exists");if(ne)throw new Error("Username already exists. Please choose a different username.");const re=Ms(x.password);console.log("Creating user with password:",x.password),console.log("Generated hash:",re),console.log("Hash type:",typeof re);const be={username:x.username.trim(),password_hash:re,role:x.role,active:!0,business_id:e};be.icon=x.icon;const{data:W,error:xe}=await Ne.from("users").insert([be]).select();if(xe)throw console.error("Supabase error adding user:",xe),xe.code==="23505"?new Error("Username already exists. Please choose a different username."):xe.code==="23503"?new Error("Invalid business ID. Please refresh the page and try again."):xe.code==="23502"?new Error("Required field is missing. Please fill in all required fields."):xe.message.includes("duplicate key value violates unique constraint")?new Error("Username already exists. Please choose a different username."):xe.message.includes("violates foreign key constraint")?new Error("Invalid business ID. Please refresh the page and try again."):xe.message.includes("Could not find the 'icon' column")?new Error("Database schema is outdated. Please run the database migration to add the icon column."):new Error(`Database error: ${xe.message}`);if(!W||W.length===0)throw new Error("No data returned from insert operation");console.log("User added successfully:",W[0]),y({username:"",password:"",role:"Cashier",icon:"ryu"}),c(!1),J()}catch(ne){console.error("Error adding user:",ne),ne instanceof Error?S(`Failed to add user: ${ne.message}`):S("Failed to add user: Unknown error occurred")}finally{w(!1)}},Y=async te=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:ne}=await Ne.from("users").delete().eq("user_id",te);if(ne)throw console.error("Error deleting user:",ne),ne;J()}catch(ne){console.error("Error deleting user:",ne),S(`Failed to delete user: ${ne instanceof Error?ne.message:"Unknown error"}`)}},F=async(te,ne)=>{try{const{error:me}=await Ne.from("users").update({active:!ne}).eq("user_id",te);if(me)throw console.error("Error updating user status:",me),me;J()}catch(me){console.error("Error updating user status:",me),S(`Failed to update user: ${me instanceof Error?me.message:"Unknown error"}`)}},Q=te=>{p(te),y({username:te.username,password:"",role:te.role,icon:te.icon||"ryu"}),f(!0)},oe=async te=>{if(te.preventDefault(),!!h){w(!0),S("");try{const ne={username:x.username,role:x.role,icon:x.icon};if(x.password.trim()){const re=Ms(x.password);console.log("Updating user password:",x.password),console.log("Generated hash:",re),console.log("Hash type:",typeof re),ne.password_hash=re}const{error:me}=await Ne.from("users").update(ne).eq("user_id",h.user_id);if(me)throw console.error("Error updating user:",me),me;y({username:"",password:"",role:"Cashier",icon:"ryu"}),p(null),f(!1),J()}catch(ne){console.error("Error updating user:",ne),S(`Failed to update user: ${ne instanceof Error?ne.message:"Unknown error"}`)}finally{w(!1)}}},q=async()=>{if(!e){S("No business selected");return}try{R(!0);const te=`admin_${e}`,{data:ne,error:me}=await Ne.from("users").select("user_id").eq("business_id",e).eq("username",te).eq("role","Admin").single();if(me&&me.code!=="PGRST116"){console.error(`Error checking admin for business ${e}:`,me),S("Failed to check for existing admin account");return}if(ne)S("Admin account already exists for this business");else{const re=Ms("admin123");console.log("Creating admin account with password: admin123"),console.log("Generated hash:",re),console.log("Hash type:",typeof re);const{error:be}=await Ne.from("users").insert({username:te,password_hash:re,role:"Admin",active:!0,business_id:e,icon:"ryu",created_at:new Date().toISOString()});be?(console.error(`Error creating admin for business ${e}:`,be),S("Failed to create admin account")):(console.log(`Admin account created for business ID: ${e}`),S("Admin account created successfully"),J())}}catch(te){console.error("Error creating admin account:",te),S(`Failed to create admin account: ${te instanceof Error?te.message:"Unknown error"}`)}finally{R(!1)}},de=te=>{switch(te){case"Admin":return"#ef4444";case"Owner":return"#8b5cf6";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#1a1a1a"}};return N?s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#1a1a1a"},children:[s.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading users..."]}):s.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[s.jsxs("div",{children:[s.jsxs("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#1a1a1a",margin:"0 0 8px 0"},children:[s.jsx("i",{className:"fa-solid fa-users-cog",style:{marginRight:"12px",color:"#7d8d86"}}),"User Management"]}),s.jsx("p",{style:{color:"#1a1a1a",margin:"0",fontSize:"18px"},children:"Manage system users and their permissions"})]}),s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsxs("button",{onClick:()=>c(!0),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"18px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[s.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]}),s.jsxs("button",{onClick:q,style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},disabled:N,children:[s.jsx("i",{className:"fa-solid fa-user-shield"}),"Create Admin Account"]})]})]}),_&&s.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px 16px",borderRadius:"8px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),_]}),s.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[s.jsx("div",{style:{padding:"20px 24px",borderBottom:"2px solid #d1d5db",background:"#f9fafb"},children:s.jsxs("h3",{style:{margin:"0",fontSize:"20px",fontWeight:"600",color:"#1a1a1a"},children:[s.jsx("i",{className:"fa-solid fa-list",style:{marginRight:"8px",color:"#7d8d86"}}),"All Users (",r.length,")"]})}),r.length===0?s.jsxs("div",{style:{padding:"48px 24px",textAlign:"center",color:"#1a1a1a"},children:[s.jsx("i",{className:"fa-solid fa-users",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),s.jsx("p",{style:{fontSize:"20px",margin:"0 0 8px 0"},children:"No users found"}),s.jsx("p",{style:{fontSize:"16px",margin:"0"},children:"Add your first user to get started"})]}):s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"#f9fafb"},children:[s.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User"}),s.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Icon"}),s.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Role"}),s.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Status"}),s.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User ID"}),s.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#1a1a1a",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Actions"})]})}),s.jsx("tbody",{children:r.map((te,ne)=>s.jsxs("tr",{style:{borderBottom:ne<r.length-1?"1px solid #f3f4f6":"none"},children:[s.jsx("td",{style:{padding:"16px 24px"},children:s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a",marginBottom:"4px",fontSize:"16px"},children:te.username}),s.jsxs("div",{style:{fontSize:"15px",color:"#1a1a1a"},children:["ID: ",te.user_id]})]})}),s.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:s.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden",border:"2px solid #e5e7eb"},children:te.icon?s.jsx("img",{src:`/retailpos/images/icons/${te.icon}.png`,alt:te.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):s.jsx("i",{className:"fa-solid fa-user",style:{fontSize:"20px",color:"#9ca3af"}})})}),s.jsx("td",{style:{padding:"16px 24px"},children:s.jsx("span",{style:{background:`${de(te.role)}20`,color:de(te.role),padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize"},children:te.role})}),s.jsx("td",{style:{padding:"16px 24px"},children:s.jsx("span",{style:{background:te.active?"#dcfce720":"#fef2f220",color:te.active?"#16a34a":"#dc2626",padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:te.active?"Active":"Inactive"})}),s.jsxs("td",{style:{padding:"16px 24px",color:"#1a1a1a",fontSize:"15px"},children:["User #",te.user_id]}),s.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:s.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[s.jsxs("button",{onClick:()=>Q(te),style:{background:"#e0f2fe",color:"#0c4a6e",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Edit User",children:[s.jsx("i",{className:"fa-solid fa-pen-to-square"}),"Edit"]}),s.jsxs("button",{onClick:()=>F(te.user_id,te.active),style:{background:te.active?"#fef2f2":"#dcfce7",color:te.active?"#dc2626":"#16a34a",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:te.active?"Deactivate":"Activate",children:[s.jsx("i",{className:`fa-solid fa-${te.active?"ban":"check"}`}),te.active?"Deactivate":"Activate"]}),s.jsxs("button",{onClick:()=>Y(te.user_id),style:{background:"#fef2f2",color:"#dc2626",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Delete User",children:[s.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]})]})})]},te.user_id))})]})})]}),o&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[s.jsxs("h2",{style:{margin:"0",fontSize:"26px",fontWeight:"600",color:"#1a1a1a"},children:[s.jsx("i",{className:"fa-solid fa-user-plus",style:{marginRight:"8px",color:"#7d8d86"}}),"Add New User"]}),s.jsx("button",{onClick:()=>c(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:s.jsx("i",{className:"fa-solid fa-xmark"})})]}),s.jsxs("form",{onSubmit:ae,children:[s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),s.jsx("input",{type:"text",value:x.username,onChange:te=>y({...x,username:te.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Password *"}),s.jsx("input",{type:"password",value:x.password,onChange:te=>y({...x,password:te.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter password"})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),s.jsxs("select",{value:x.role,onChange:te=>y({...x,role:te.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[s.jsx("option",{value:"cashier",children:"Cashier"}),s.jsx("option",{value:"manager",children:"Manager"}),s.jsx("option",{value:"admin",children:"Admin"})]})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:v.map(te=>s.jsxs("button",{type:"button",onClick:()=>y({...x,icon:te.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:x.icon===te.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:x.icon===te.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:x.icon===te.name?"scale(1.05)":"scale(1)",boxShadow:x.icon===te.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[s.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:s.jsx("img",{src:`/retailpos/images/icons/${te.name}.png`,alt:te.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:x.icon===te.name?"brightness(1.1) contrast(1.1)":"none"}})}),x.icon===te.name&&s.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:s.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},te.name))})]}),s.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[s.jsx("button",{type:"button",onClick:()=>c(!1),style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),s.jsx("button",{type:"submit",disabled:b,style:{background:b?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:b?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Adding..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]})})]})]})]})}),d&&h&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[s.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1a1a1a"},children:[s.jsx("i",{className:"fa-solid fa-user-pen",style:{marginRight:"8px",color:"#7d8d86"}}),"Edit User"]}),s.jsx("button",{onClick:()=>{f(!1),p(null)},style:{background:"none",border:"none",fontSize:"20px",color:"#1a1a1a",cursor:"pointer",padding:"4px"},children:s.jsx("i",{className:"fa-solid fa-xmark"})})]}),s.jsxs("form",{onSubmit:oe,children:[s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Username *"}),s.jsx("input",{type:"text",value:x.username,onChange:te=>y({...x,username:te.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"New Password (leave blank to keep current)"}),s.jsx("input",{type:"password",value:x.password,onChange:te=>y({...x,password:te.target.value}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter new password (optional)"})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#1a1a1a"},children:"Role *"}),s.jsxs("select",{value:x.role,onChange:te=>y({...x,role:te.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[s.jsx("option",{value:"Cashier",children:"Cashier"}),s.jsx("option",{value:"Manager",children:"Manager"}),s.jsx("option",{value:"Admin",children:"Admin"})]})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1a1a1a",fontSize:"16px"},children:"Character Icon *"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:v.map(te=>s.jsxs("button",{type:"button",onClick:()=>y({...x,icon:te.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:x.icon===te.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:x.icon===te.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:x.icon===te.name?"scale(1.05)":"scale(1)",boxShadow:x.icon===te.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[s.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:s.jsx("img",{src:`/retailpos/images/icons/${te.name}.png`,alt:te.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:x.icon===te.name?"brightness(1.1) contrast(1.1)":"none"}})}),x.icon===te.name&&s.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:s.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},te.name))})]}),s.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[s.jsx("button",{type:"button",onClick:()=>{f(!1),p(null)},style:{background:"#f3f4f6",color:"#1a1a1a",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),s.jsx("button",{type:"submit",disabled:b,style:{background:b?"#9ca3af":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:b?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-floppy-disk"}),"Update User"]})})]})]})]})}),s.jsx("div",{onClick:()=>P(!0),title:"Access Secure Vault - Manage sensitive operations and settings",style:{position:"fixed",bottom:"24px",right:"24px",zIndex:50,width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(125, 141, 134, 0.4)",cursor:"pointer",transition:"all 0.2s ease"},children:s.jsx("i",{className:"fa-solid fa-vault",style:{fontSize:"48px",color:"#f1f0e4"}})}),s.jsx(fI,{isOpen:O,onClose:()=>P(!1)})]})},pI="_container_k4aew_2",gI="_header_k4aew_10",xI="_title_k4aew_16",mI="_mainContent_k4aew_32",yI="_offlineNotice_k4aew_39",vI="_offlineNoticeContent_k4aew_51",bI="_dateNavigation_k4aew_62",_I="_navButton_k4aew_76",SI="_currentDate_k4aew_102",wI="_controls_k4aew_144",TI="_button_k4aew_151",jI="_buttonPrimary_k4aew_170",EI="_buttonSecondary_k4aew_179",kI="_buttonDanger_k4aew_192",CI="_notesContainer_k4aew_202",AI="_gridBackground_k4aew_218",RI="_gridPattern_k4aew_224",NI="_emptyState_k4aew_234",DI="_emptyStateContent_k4aew_242",OI="_emptyStateIcon_k4aew_247",II="_emptyStateTitle_k4aew_252",MI="_dragIndicator_k4aew_258",BI="_footer_k4aew_271",FI="_stickyNote_k4aew_279",LI="_stickyNoteDragging_k4aew_286",PI="_note_k4aew_202",zI="_noteOverdue_k4aew_306",UI="_noteDueToday_k4aew_310",WI="_noteYellow_k4aew_315",qI="_notePink_k4aew_321",HI="_noteBlue_k4aew_327",$I="_noteGreen_k4aew_333",GI="_notePurple_k4aew_339",VI="_noteOrange_k4aew_345",YI="_noteTopStrip_k4aew_351",KI="_noteContent_k4aew_433",XI="_noteContentEditing_k4aew_439",QI="_noteInput_k4aew_445",JI="_noteDateInput_k4aew_456",ZI="_noteTextarea_k4aew_466",e7="_noteDisplay_k4aew_480",t7="_noteTitle_k4aew_486",r7="_noteTitleResolved_k4aew_494",n7="_noteDate_k4aew_456",a7="_noteDateOverdue_k4aew_505",s7="_noteDateToday_k4aew_510",i7="_noteBody_k4aew_515",o7="_noteBodyResolved_k4aew_524",l7="_noteCorner_k4aew_529",c7="_noteCornerEffect_k4aew_537",d7="_modalOverlay_k4aew_548",u7="_modal_k4aew_548",f7="_modalHeader_k4aew_569",h7="_modalTitle_k4aew_573",p7="_modalClose_k4aew_593",g7="_modalForm_k4aew_605",x7="_errorMessage_k4aew_611",m7="_errorContent_k4aew_619",y7="_formGroup_k4aew_628",v7="_formLabel_k4aew_633",b7="_formInput_k4aew_641",_7="_formTextarea_k4aew_655",S7="_colorSelection_k4aew_670",w7="_colorOption_k4aew_676",T7="_colorOptionSelected_k4aew_689",j7="_checkboxContainer_k4aew_694",E7="_formCheckbox_k4aew_700",k7="_checkboxLabel_k4aew_707",C7="_preview_k4aew_716",A7="_previewLabel_k4aew_720",R7="_previewNote_k4aew_728",N7="_previewTitle_k4aew_734",D7="_previewDate_k4aew_741",O7="_previewBody_k4aew_751",I7="_modalActions_k4aew_757",M7="_modalButton_k4aew_763",B7="_modalButtonCancel_k4aew_777",F7="_modalButtonSubmit_k4aew_786",L7="_modalButtonDanger_k4aew_795",P7="_loading_k4aew_805",z7="_loadingContent_k4aew_813",U7="_loadingIcon_k4aew_817",W7="_loadingText_k4aew_823",q7="_confirmationDialog_k4aew_869",H7="_confirmationContent_k4aew_880",$7="_confirmationHeader_k4aew_889",G7="_confirmationIcon_k4aew_895",V7="_confirmationButton_k4aew_926",Y7="_confirmationButtonCancel_k4aew_936",K7="_confirmationButtonConfirm_k4aew_945",X7="_calendarModal_k4aew_955",Q7="_calendar_k4aew_955",J7="_calendarHeader_k4aew_981",Z7="_calendarCloseButton_k4aew_989",eM="_calendarTitle_k4aew_1011",tM="_calendarNavButton_k4aew_1017",rM="_calendarGrid_k4aew_1035",nM="_calendarDayHeader_k4aew_1041",aM="_calendarDay_k4aew_1041",sM="_calendarDayOtherMonth_k4aew_1068",iM="_calendarDayToday_k4aew_1072",oM="_calendarDaySelected_k4aew_1082",lM="_calendarDayWithReminders_k4aew_1092",cM="_calendarDayWithRemindersToday_k4aew_1102",dM="_calendarDayWithRemindersSelected_k4aew_1111",uM="_calendarReminderCount_k4aew_1136",fM="_lilyMascot_k4aew_1178",hM="_lilySpeechBubble_k4aew_1188",pM="_lilySpeechTail_k4aew_1206",gM="_lilyImage_k4aew_1217",pe={container:pI,header:gI,title:xI,mainContent:mI,offlineNotice:yI,offlineNoticeContent:vI,dateNavigation:bI,navButton:_I,currentDate:SI,controls:wI,button:TI,buttonPrimary:jI,buttonSecondary:EI,buttonDanger:kI,notesContainer:CI,gridBackground:AI,gridPattern:RI,emptyState:NI,emptyStateContent:DI,emptyStateIcon:OI,emptyStateTitle:II,dragIndicator:MI,footer:BI,stickyNote:FI,stickyNoteDragging:LI,note:PI,noteOverdue:zI,noteDueToday:UI,noteYellow:WI,notePink:qI,noteBlue:HI,noteGreen:$I,notePurple:GI,noteOrange:VI,noteTopStrip:YI,noteContent:KI,noteContentEditing:XI,noteInput:QI,noteDateInput:JI,noteTextarea:ZI,noteDisplay:e7,noteTitle:t7,noteTitleResolved:r7,noteDate:n7,noteDateOverdue:a7,noteDateToday:s7,noteBody:i7,noteBodyResolved:o7,noteCorner:l7,noteCornerEffect:c7,modalOverlay:d7,modal:u7,modalHeader:f7,modalTitle:h7,modalClose:p7,modalForm:g7,errorMessage:x7,errorContent:m7,formGroup:y7,formLabel:v7,formInput:b7,formTextarea:_7,colorSelection:S7,colorOption:w7,colorOptionSelected:T7,checkboxContainer:j7,formCheckbox:E7,checkboxLabel:k7,preview:C7,previewLabel:A7,previewNote:R7,previewTitle:N7,previewDate:D7,previewBody:O7,modalActions:I7,modalButton:M7,modalButtonCancel:B7,modalButtonSubmit:F7,modalButtonDanger:L7,loading:P7,loadingContent:z7,loadingIcon:U7,loadingText:W7,confirmationDialog:q7,confirmationContent:H7,confirmationHeader:$7,confirmationIcon:G7,confirmationButton:V7,confirmationButtonCancel:Y7,confirmationButtonConfirm:K7,calendarModal:X7,calendar:Q7,calendarHeader:J7,calendarCloseButton:Z7,calendarTitle:eM,calendarNavButton:tM,calendarGrid:rM,calendarDayHeader:nM,calendarDay:aM,calendarDayOtherMonth:sM,calendarDayToday:iM,calendarDaySelected:oM,calendarDayWithReminders:lM,calendarDayWithRemindersToday:cM,calendarDayWithRemindersSelected:dM,calendarReminderCount:uM,lilyMascot:fM,lilySpeechBubble:hM,lilySpeechTail:pM,lilyImage:gM};function xM(){const{user:e,currentUserId:t}=on(),[r,a]=T.useState([]),[o,c]=T.useState(!0),[d,f]=T.useState(null),[h,p]=T.useState({x:0,y:0}),[x,y]=T.useState(null),[v,b]=T.useState(!1),[w,_]=T.useState(!1),[S,N]=T.useState(!1),[R,O]=T.useState(null),[P,J]=T.useState({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),[ae,Y]=T.useState({title:"",body:"",remind_date:"",color:"yellow",resolved:!1}),[F,Q]=T.useState(new Date),[oe,q]=T.useState(!1),[de,te]=T.useState(!1),[ne,me]=T.useState(new Date),[re,be]=T.useState(!1),[W,xe]=T.useState("Hi! I'm Lily, your reminder assistant! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),[C,X]=T.useState(()=>{const le=localStorage.getItem("lilyEnabled");return le!==null?JSON.parse(le):!0}),[E,z]=T.useState(!0),H={yellow:{bg:pe.noteYellow,border:pe.noteYellow,shadow:pe.noteYellow},pink:{bg:pe.notePink,border:pe.notePink,shadow:pe.notePink},blue:{bg:pe.noteBlue,border:pe.noteBlue,shadow:pe.noteBlue},green:{bg:pe.noteGreen,border:pe.noteGreen,shadow:pe.noteGreen},purple:{bg:pe.notePurple,border:pe.notePurple,shadow:pe.notePurple},orange:{bg:pe.noteOrange,border:pe.noteOrange,shadow:pe.noteOrange}},Z=()=>{const le=new Date(F);le.setDate(le.getDate()-1),Q(le)},ge=()=>{const le=new Date(F);le.setDate(le.getDate()+1),Q(le)},Fe=le=>{const He=new Date(ne);le==="prev"?He.setMonth(He.getMonth()-1):He.setMonth(He.getMonth()+1),me(He)},qe=le=>{Q(le),te(!1)},Re=()=>{const le=new Set;return r.forEach(He=>{const ht=new Date(He.remind_date);le.add(ht.toDateString())}),le},Oe=()=>{const le={};return r.forEach(He=>{const Ot=new Date(He.remind_date).toDateString();le[Ot]=(le[Ot]||0)+1}),le},et=()=>{const le=ne.getFullYear(),He=ne.getMonth(),ht=new Date(le,He,1),Ot=new Date(ht);Ot.setDate(Ot.getDate()-ht.getDay());const lr=[],kr=Re(),Sr=Oe(),rr=new Date,Rr=new Date(F);for(let Ht=0;Ht<42;Ht++){const ir=new Date(Ot);ir.setDate(Ot.getDate()+Ht);const se=ir.getMonth()===He,ke=ir.toDateString()===rr.toDateString(),xt=ir.toDateString()===Rr.toDateString(),Nt=kr.has(ir.toDateString()),nr=Sr[ir.toDateString()]||0;lr.push({date:ir,isCurrentMonth:se,isToday:ke,isSelected:xt,hasReminders:Nt,reminderCount:nr})}return lr},ve=()=>{const le=!C;X(le),localStorage.setItem("lilyEnabled",JSON.stringify(le)),le&&(xe("Hi! I'm back! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),be(!0))},Ge=()=>C?s.jsxs("div",{className:pe.lilyMascot,children:[re&&s.jsxs("div",{className:pe.lilySpeechBubble,children:[s.jsx("p",{children:W}),s.jsx("div",{className:pe.lilySpeechTail})]}),s.jsx("div",{className:pe.lilyImage,onClick:()=>{be(!re)},onDoubleClick:()=>{ve()},children:s.jsx("img",{src:e?.icon?`/retailpos/images/icons/${e.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:e?.icon||"Lily"})})]}):null,G=()=>{const le=new Date(F);return le.setHours(0,0,0,0),r.filter(He=>{const ht=new Date(He.remind_date);ht.setHours(0,0,0,0);const Ot=ht.getTime()===le.getTime(),lr=E||!He.resolved;return Ot&&lr})},Ce=async()=>{if(a([]),q(!1),!v)try{const{error:le}=await Ne.from("reminders").delete().neq("reminder_id",0);le&&console.error("Error deleting all reminders from database:",le)}catch(le){console.error("Error deleting all reminders:",le)}},rt=async()=>{try{if(c(!0),!e?.business_id){a([]),c(!1);return}const{data:le,error:He}=await Ne.from("reminders").select("*").eq("business_id",e.business_id).order("remind_date",{ascending:!0});if(He)throw console.error("Database fetch error:",He),He;console.log("Fetched reminders from database:",le);const ht=le?.map((Ot,lr)=>({...Ot,x:Math.random()*400+50,y:Math.random()*300+50,rotation:(Math.random()-.5)*6,isEditing:!1,color:Object.keys(H)[lr%Object.keys(H).length]}))||[];console.log("Reminders with UI properties:",ht),a(ht)}catch(le){console.error("Error fetching reminders:",le),y("Failed to load reminders. Please try again.")}finally{c(!1)}};T.useEffect(()=>{(async()=>{try{const{data:He,error:ht}=await Ne.from("reminders").select("count",{count:"exact",head:!0});ht?(console.error("Table test error:",ht),y("Database table 'reminders' does not exist. Please run the SQL commands from database-schema.sql in your Supabase SQL editor."),b(!0),c(!1)):(console.log("Table exists, fetching reminders..."),rt())}catch(He){console.error("Table test failed:",He),y("Failed to connect to database. Please check your connection.")}})()},[]);const Be=()=>{J({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),y(null),_(!0)},gt=()=>{_(!1),J({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"})},at=()=>{N(!1),O(null),Y({title:"",body:"",remind_date:"",color:"yellow",resolved:!1})},vt=async()=>{if(!R||!ae.title.trim()||!ae.body.trim()){y("Please fill in both title and body for the reminder.");return}await nt(R.reminder_id,{title:ae.title.trim(),body:ae.body.trim(),remind_date:ae.remind_date,color:ae.color,resolved:ae.resolved}),at()},bt=async()=>{if(!P.title.trim()||!P.body.trim()){y("Please fill in both title and body for the reminder.");return}const le={title:P.title.trim(),body:P.body.trim(),remind_date:P.remind_date,owner_id:t?parseInt(t):1,business_id:e?.business_id||1};if(v){const He=Date.now();a([...r,{...le,reminder_id:He,created_at:new Date().toISOString()}]),gt();return}try{if(t)le.owner_id=parseInt(t);else{const Ot=Date.now();a([...r,{...le,reminder_id:Ot,created_at:new Date().toISOString()}]),gt();return}const{data:He,error:ht}=await Ne.from("reminders").insert([{title:le.title,body:le.body,remind_date:le.remind_date,owner_id:le.owner_id}]).select().single();if(ht){const Ot=Date.now();a([...r,{...le,reminder_id:Ot,created_at:new Date().toISOString()}]),gt();return}a([...r,{...le,reminder_id:He.reminder_id,created_at:new Date().toISOString()}]),gt()}catch(He){console.error("Error adding reminder:",He);const ht=Date.now();a([...r,{...le,reminder_id:ht,created_at:new Date().toISOString()}]),gt()}},Ie=async le=>{if(a(r.filter(He=>He.reminder_id!==le)),!v)try{const{error:He}=await Ne.from("reminders").delete().eq("reminder_id",le);He&&console.error("Error deleting reminder from database:",He)}catch(He){console.error("Error deleting reminder:",He)}},nt=async(le,He)=>{if(console.log("updateReminder called with:",{id:le,updates:He,offlineMode:v}),a(r.map(ht=>ht.reminder_id===le?{...ht,...He}:ht)),v){console.log("Offline mode - skipping database update");return}try{if(He.title||He.body||He.remind_date||He.resolved!==void 0){console.log("Updating database with:",{title:He.title,body:He.body,remind_date:He.remind_date,resolved:He.resolved});const{error:ht}=await Ne.from("reminders").update({title:He.title,body:He.body,remind_date:He.remind_date,resolved:He.resolved}).eq("reminder_id",le);ht?console.error("Error updating reminder in database:",ht):console.log("Successfully updated reminder in database")}}catch(ht){console.error("Error updating reminder:",ht)}},mt=(le,He)=>{le.preventDefault();const ht=le.currentTarget.getBoundingClientRect();f(He),p({x:le.clientX-ht.left,y:le.clientY-ht.top})},Ut=le=>{if(d){const He=document.getElementById("sticky-container");if(He){const ht=He.getBoundingClientRect(),Ot=Math.max(0,Math.min(le.clientX-ht.left-h.x,ht.width-224)),lr=Math.max(0,Math.min(le.clientY-ht.top-h.y,ht.height-224));a(r.map(kr=>kr.reminder_id===d.reminder_id?{...kr,x:Ot,y:lr}:kr))}}},or=()=>{f(null),p({x:0,y:0})};T.useEffect(()=>{if(d)return document.addEventListener("mousemove",Ut),document.addEventListener("mouseup",or),()=>{document.removeEventListener("mousemove",Ut),document.removeEventListener("mouseup",or)}},[d,h]);const Lt=({reminder:le})=>{const[He,ht]=T.useState(le.title),[Ot,lr]=T.useState(le.body),[kr,Sr]=T.useState(le.remind_date),rr=T.useRef(null);T.useEffect(()=>{le.isEditing&&rr.current&&(rr.current.focus(),rr.current.select())},[le.isEditing]);const Rr=At=>{lr(At.target.value),At.target.style.height="auto",At.target.style.height=At.target.scrollHeight+"px"},Ht=()=>{He.trim()&&Ot.trim()?nt(le.reminder_id,{title:He.trim(),body:Ot.trim(),remind_date:kr,isEditing:!1}):(ht(le.title),lr(le.body),Sr(le.remind_date),nt(le.reminder_id,{isEditing:!1}))},ir=At=>{At.key==="Enter"&&At.shiftKey||(At.key==="Enter"?(At.preventDefault(),Ht()):At.key==="Escape"&&(ht(le.title),lr(le.body),Sr(le.remind_date),nt(le.reminder_id,{isEditing:!1})))},se=At=>{At.key==="Enter"?(At.preventDefault(),Ht()):At.key==="Escape"&&(ht(le.title),lr(le.body),Sr(le.remind_date),nt(le.reminder_id,{isEditing:!1}))},ke=H[le.color]||H.yellow,xt=new Date,Nt=new Date(le.remind_date),nr=Nt<xt&&Nt.toDateString()!==xt.toDateString(),st=Nt.toDateString()===xt.toDateString();return s.jsx("div",{className:`${pe.stickyNote} ${d?.reminder_id===le.reminder_id?pe.stickyNoteDragging:""}`,style:{left:`${le.x}px`,top:`${le.y}px`,transform:`rotate(${le.rotation}deg)`},children:s.jsxs("div",{className:`${pe.note} ${ke.bg} ${nr?pe.noteOverdue:st?pe.noteDueToday:""}`,onMouseDown:At=>!le.isEditing&&mt(At,le),children:[s.jsx("div",{className:`${pe.noteTopStrip} ${ke.border}`}),s.jsx("div",{className:pe.noteContent,children:le.isEditing?s.jsxs("div",{className:pe.noteContentEditing,children:[s.jsx("input",{type:"text",value:He,onChange:At=>ht(At.target.value),onKeyDown:se,onBlur:Ht,className:pe.noteInput,placeholder:"Reminder title..."}),s.jsx("input",{type:"date",value:kr,onChange:At=>Sr(At.target.value),onKeyDown:se,onBlur:Ht,className:pe.noteDateInput}),s.jsx("textarea",{ref:rr,value:Ot,onChange:Rr,onBlur:Ht,onKeyDown:ir,className:pe.noteTextarea,style:{fontFamily:"Comic Sans MS, cursive, sans-serif",minHeight:"80px"},placeholder:"Reminder details..."})]}):s.jsxs("div",{onContextMenu:At=>{At.preventDefault(),At.stopPropagation(),console.log("Note right-clicked for reminder:",le.reminder_id),O(le),Y({title:le.title,body:le.body,remind_date:le.remind_date,color:le.color||"yellow",resolved:le.resolved||!1}),N(!0)},className:pe.noteDisplay,children:[s.jsx("div",{className:pe.noteTitle,children:s.jsx("span",{className:le.resolved?pe.noteTitleResolved:"",children:le.title})}),s.jsxs("div",{className:`${pe.noteDate} ${nr?pe.noteDateOverdue:st?pe.noteDateToday:""}`,children:[s.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(le.remind_date).toLocaleDateString(),nr&&s.jsx("span",{style:{color:"#dc2626",marginLeft:"0.5rem",fontWeight:"700"},children:"OVERDUE"}),st&&!nr&&s.jsx("span",{style:{color:"#d97706",marginLeft:"0.5rem",fontWeight:"700"},children:"TODAY"})]}),s.jsx("div",{className:`${pe.noteBody} ${le.resolved?pe.noteBodyResolved:""}`,style:{fontFamily:"Comic Sans MS, cursive, sans-serif"},children:le.body})]})}),s.jsx("div",{className:pe.noteCorner,children:s.jsx("div",{className:`${pe.noteCornerEffect} ${ke.bg}`})})]})})};return o?s.jsx("div",{className:pe.loading,children:s.jsxs("div",{className:pe.loadingContent,children:[s.jsx("i",{className:`fa-solid fa-spinner fa-spin ${pe.loadingIcon}`}),s.jsx("p",{className:pe.loadingText,children:"Loading reminders..."})]})}):s.jsxs("div",{className:pe.container,children:[s.jsx("div",{className:pe.header,children:s.jsxs("div",{className:pe.title,children:[s.jsxs("h1",{children:[s.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.75rem"}}),"Reminders"]}),s.jsx("p",{children:"Click and drag to move reminders around  Right-click to edit"})]})}),s.jsxs("div",{className:pe.mainContent,children:[s.jsxs("div",{className:pe.dateNavigation,children:[s.jsx("button",{onClick:Z,className:pe.navButton,onMouseEnter:()=>{C&&(xe("Click this arrow to go to the previous day! This helps you navigate through your reminders day by day."),be(!0))},onMouseLeave:()=>{C&&be(!1)},children:s.jsx("i",{className:"fa-solid fa-chevron-left"})}),s.jsx("div",{className:pe.currentDate,onClick:()=>te(!de),style:{cursor:"pointer"},onMouseEnter:()=>{C&&(xe("Click on this date to open the calendar modal! You can see all your reminders and navigate to any date quickly."),be(!0))},onMouseLeave:()=>{C&&be(!1)},children:F.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),s.jsx("button",{onClick:ge,className:pe.navButton,onMouseEnter:()=>{C&&(xe("Click this arrow to go to the next day! This helps you navigate through your reminders day by day."),be(!0))},onMouseLeave:()=>{C&&be(!1)},children:s.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),de&&s.jsx("div",{className:pe.calendarModal,onClick:()=>te(!1),children:s.jsxs("div",{className:pe.calendar,onClick:le=>le.stopPropagation(),children:[s.jsxs("div",{className:pe.calendarHeader,children:[s.jsx("button",{onClick:()=>te(!1),className:pe.calendarCloseButton,children:s.jsx("i",{className:"fa-solid fa-times"})}),s.jsx("button",{onClick:()=>Fe("prev"),className:pe.calendarNavButton,children:s.jsx("i",{className:"fa-solid fa-chevron-left"})}),s.jsx("div",{className:pe.calendarTitle,children:ne.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>Fe("next"),className:pe.calendarNavButton,children:s.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),s.jsxs("div",{className:pe.calendarGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(le=>s.jsx("div",{className:pe.calendarDayHeader,children:le},le)),et().map((le,He)=>{let ht=pe.calendarDay;return le.isCurrentMonth?le.hasReminders&&le.isToday?ht+=` ${pe.calendarDayWithRemindersToday}`:le.hasReminders&&le.isSelected?ht+=` ${pe.calendarDayWithRemindersSelected}`:le.hasReminders?ht+=` ${pe.calendarDayWithReminders}`:le.isToday?ht+=` ${pe.calendarDayToday}`:le.isSelected&&(ht+=` ${pe.calendarDaySelected}`):ht+=` ${pe.calendarDayOtherMonth}`,s.jsxs("div",{className:ht,onClick:()=>qe(le.date),children:[le.date.getDate(),le.hasReminders&&s.jsx("div",{className:pe.calendarReminderCount,children:le.reminderCount})]},He)})]})]})}),v&&s.jsx("div",{className:pe.offlineNotice,children:s.jsxs("div",{className:pe.offlineNoticeContent,children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),s.jsxs("div",{children:[s.jsx("strong",{children:"Offline Mode:"})," The reminders table doesn't exist in your database yet. Reminders will work locally but won't be saved permanently.",s.jsx("a",{href:"#",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),style:{textDecoration:"underline",marginLeft:"0.25rem"},children:"Create the table in Supabase"})]})]})}),s.jsxs("div",{className:pe.controls,children:[s.jsxs("button",{onClick:Be,className:`${pe.button} ${pe.buttonPrimary}`,onMouseEnter:()=>{C&&(xe("Click this button to add a new reminder! You can set the title, content, date, and color for your reminder."),be(!0))},onMouseLeave:()=>{C&&be(!1)},children:[s.jsx("i",{className:"fa-solid fa-plus-circle"}),s.jsx("span",{style:{marginLeft:"0.5rem"},children:"Add Reminder"})]}),s.jsxs("button",{onClick:()=>{const le=document.getElementById("sticky-container");if(le){const He=le.getBoundingClientRect();a(r.map(ht=>({...ht,x:Math.random()*(He.width-224)+20,y:Math.random()*(He.height-224)+20,rotation:(Math.random()-.5)*6})))}},className:`${pe.button} ${pe.buttonSecondary}`,onMouseEnter:()=>{C&&(xe("Click this button to shuffle all your reminders around! This gives them new random positions on the board."),be(!0))},onMouseLeave:()=>{C&&be(!1)},children:[s.jsx("i",{className:"fa-solid fa-random"}),s.jsx("span",{style:{marginLeft:"0.5rem"},children:"Shuffle"})]}),s.jsxs("button",{onClick:()=>z(!E),className:`${pe.button} ${E?pe.buttonPrimary:pe.buttonSecondary}`,onMouseEnter:()=>{C&&(xe(E?"Click to hide completed reminders and focus on what's still pending!":"Click to show all reminders including completed ones!"),be(!0))},onMouseLeave:()=>{C&&be(!1)},children:[s.jsx("i",{className:`fa-solid ${E?"fa-eye":"fa-eye-slash"}`}),s.jsx("span",{style:{marginLeft:"0.5rem"},children:E?"Show All":"Hide Completed"})]}),r.length>0&&s.jsxs("button",{onClick:()=>q(!0),className:`${pe.button} ${pe.buttonDanger}`,onMouseEnter:()=>{C&&(xe("Click this button to remove all reminders at once! Be careful - this action cannot be undone."),be(!0))},onMouseLeave:()=>{C&&be(!1)},children:[s.jsx("i",{className:"fa-solid fa-trash-can"}),s.jsx("span",{style:{marginLeft:"0.5rem"},children:"Clear All"})]})]}),s.jsxs("div",{id:"sticky-container",className:pe.notesContainer,style:{minHeight:"600px"},children:[s.jsx("div",{className:pe.gridBackground,children:s.jsx("div",{className:pe.gridPattern})}),G().map(le=>s.jsx(Lt,{reminder:le},le.reminder_id)),G().length===0&&s.jsx("div",{className:pe.emptyState,children:s.jsxs("div",{className:pe.emptyStateContent,children:[s.jsx("div",{className:pe.emptyStateIcon,children:s.jsx("i",{className:"fa-solid fa-sticky-note"})}),s.jsx("h3",{className:pe.emptyStateTitle,children:"No reminders for this date"}),s.jsxs("p",{children:['Click "Add Reminder" to create your first reminder for ',F.toLocaleDateString()]})]})}),d&&s.jsxs("div",{className:pe.dragIndicator,children:[s.jsx("i",{className:"fa-solid fa-arrows-up-down-left-right",style:{marginRight:"0.25rem"}}),"Dragging reminder..."]})]}),s.jsx("div",{className:pe.footer,children:s.jsxs("p",{children:[s.jsx("i",{className:"fa-solid fa-lightbulb",style:{marginRight:"0.25rem"}}),"Tips: Shift+Enter for new lines  Escape to cancel editing  Right-click to edit  Drag reminders around freely"]})}),w&&s.jsx("div",{className:pe.modalOverlay,children:s.jsx("div",{className:pe.modal,children:s.jsxs("div",{className:pe.modalHeader,children:[s.jsxs("div",{className:pe.modalTitle,children:[s.jsxs("h2",{children:[s.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Create New Reminder"]}),s.jsx("button",{onClick:gt,className:pe.modalClose,children:s.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),s.jsxs("form",{onSubmit:le=>{le.preventDefault(),bt()},className:pe.modalForm,children:[x&&s.jsx("div",{className:pe.errorMessage,children:s.jsxs("div",{className:pe.errorContent,children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),s.jsx("span",{style:{fontSize:"0.875rem"},children:x})]})}),s.jsxs("div",{className:pe.formGroup,children:[s.jsx("label",{htmlFor:"title",className:pe.formLabel,children:"Title *"}),s.jsx("input",{type:"text",id:"title",value:P.title,onChange:le=>J({...P,title:le.target.value}),className:pe.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),s.jsxs("div",{className:pe.formGroup,children:[s.jsx("label",{htmlFor:"remind_date",className:pe.formLabel,children:"Remind Date *"}),s.jsx("input",{type:"date",id:"remind_date",value:P.remind_date,onChange:le=>J({...P,remind_date:le.target.value}),className:pe.formInput,required:!0})]}),s.jsxs("div",{className:pe.formGroup,children:[s.jsx("label",{className:pe.formLabel,children:"Color"}),s.jsx("div",{className:pe.colorSelection,children:Object.entries(H).map(([le,He])=>s.jsx("button",{type:"button",onClick:()=>J({...P,color:le}),className:`${pe.colorOption} ${He.bg} ${P.color===le?pe.colorOptionSelected:""}`,title:le},le))})]}),s.jsxs("div",{className:pe.formGroup,children:[s.jsx("label",{htmlFor:"body",className:pe.formLabel,children:"Details *"}),s.jsx("textarea",{id:"body",value:P.body,onChange:le=>J({...P,body:le.target.value}),className:pe.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),P.title&&P.body&&s.jsxs("div",{className:pe.preview,children:[s.jsx("label",{className:pe.previewLabel,children:"Preview"}),s.jsxs("div",{className:`${pe.previewNote} ${H[P.color]?.bg} ${H[P.color]?.border}`,children:[s.jsx("div",{className:pe.previewTitle,children:P.title}),s.jsxs("div",{className:pe.previewDate,children:[s.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(P.remind_date).toLocaleDateString()]}),s.jsx("div",{className:pe.previewBody,children:P.body})]})]}),s.jsxs("div",{className:pe.modalActions,children:[s.jsx("button",{type:"button",onClick:gt,className:`${pe.modalButton} ${pe.modalButtonCancel}`,children:"Cancel"}),s.jsxs("button",{type:"submit",className:`${pe.modalButton} ${pe.modalButtonSubmit}`,children:[s.jsx("i",{className:"fa-solid fa-plus"}),"Create Reminder"]})]})]})]})})}),S&&R&&s.jsx("div",{className:pe.modalOverlay,children:s.jsx("div",{className:pe.modal,children:s.jsxs("div",{className:pe.modalHeader,children:[s.jsxs("div",{className:pe.modalTitle,children:[s.jsxs("h2",{children:[s.jsx("i",{className:"fa-solid fa-edit",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Edit Reminder"]}),s.jsx("button",{onClick:at,className:pe.modalClose,children:s.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),s.jsxs("form",{onSubmit:le=>{le.preventDefault(),vt()},className:pe.modalForm,children:[x&&s.jsx("div",{className:pe.errorMessage,children:s.jsxs("div",{className:pe.errorContent,children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),s.jsx("span",{style:{fontSize:"0.875rem"},children:x})]})}),s.jsxs("div",{className:pe.formGroup,children:[s.jsx("label",{htmlFor:"edit-title",className:pe.formLabel,children:"Title *"}),s.jsx("input",{type:"text",id:"edit-title",value:ae.title,onChange:le=>Y({...ae,title:le.target.value}),className:pe.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),s.jsxs("div",{className:pe.formGroup,children:[s.jsx("label",{htmlFor:"edit-remind_date",className:pe.formLabel,children:"Remind Date *"}),s.jsx("input",{type:"date",id:"edit-remind_date",value:ae.remind_date,onChange:le=>Y({...ae,remind_date:le.target.value}),className:pe.formInput,required:!0})]}),s.jsxs("div",{className:pe.formGroup,children:[s.jsx("label",{className:pe.formLabel,children:"Color"}),s.jsx("div",{className:pe.colorSelection,children:Object.entries(H).map(([le,He])=>s.jsx("button",{type:"button",onClick:()=>Y({...ae,color:le}),className:`${pe.colorOption} ${He.bg} ${ae.color===le?pe.colorOptionSelected:""}`,title:le},le))})]}),s.jsxs("div",{className:pe.formGroup,children:[s.jsx("label",{className:pe.formLabel,children:"Status"}),s.jsxs("div",{className:pe.checkboxContainer,children:[s.jsx("input",{type:"checkbox",id:"edit-resolved",checked:ae.resolved,onChange:le=>Y({...ae,resolved:le.target.checked}),className:pe.formCheckbox}),s.jsxs("label",{htmlFor:"edit-resolved",className:pe.checkboxLabel,children:[s.jsx("i",{className:`fa-solid ${ae.resolved?"fa-check-square":"fa-square"}`,style:{marginRight:"0.5rem"}}),"Mark as completed/resolved"]})]})]}),s.jsxs("div",{className:pe.formGroup,children:[s.jsx("label",{htmlFor:"edit-body",className:pe.formLabel,children:"Details *"}),s.jsx("textarea",{id:"edit-body",value:ae.body,onChange:le=>Y({...ae,body:le.target.value}),className:pe.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),ae.title&&ae.body&&s.jsxs("div",{className:pe.preview,children:[s.jsx("label",{className:pe.previewLabel,children:"Preview"}),s.jsxs("div",{className:`${pe.previewNote} ${H[ae.color]?.bg} ${H[ae.color]?.border}`,children:[s.jsx("div",{className:pe.previewTitle,children:ae.title}),s.jsxs("div",{className:pe.previewDate,children:[s.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(ae.remind_date).toLocaleDateString()]}),s.jsx("div",{className:pe.previewBody,children:ae.body})]})]}),s.jsxs("div",{className:pe.modalActions,children:[s.jsxs("button",{type:"button",onClick:()=>{Ie(R.reminder_id),at()},className:`${pe.modalButton} ${pe.modalButtonDanger}`,children:[s.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),s.jsx("button",{type:"button",onClick:at,className:`${pe.modalButton} ${pe.modalButtonCancel}`,children:"Cancel"}),s.jsxs("button",{type:"submit",className:`${pe.modalButton} ${pe.modalButtonSubmit}`,children:[s.jsx("i",{className:"fa-solid fa-save"}),"Update Reminder"]})]})]})]})})}),oe&&s.jsx("div",{className:pe.confirmationDialog,children:s.jsxs("div",{className:pe.confirmationContent,children:[s.jsxs("div",{className:pe.confirmationHeader,children:[s.jsx("div",{className:pe.confirmationIcon,children:s.jsx("i",{className:"fa-solid fa-exclamation-triangle"})}),s.jsx("h3",{children:"Remove All Reminders"})]}),s.jsx("p",{children:"Are you sure you want to remove all reminders? This action cannot be undone."}),s.jsxs("div",{className:pe.confirmationButtons,children:[s.jsxs("button",{onClick:()=>q(!1),className:`${pe.confirmationButton} ${pe.confirmationButtonCancel}`,children:[s.jsx("i",{className:"fa-solid fa-times",style:{marginRight:"0.5rem"}}),"Cancel"]}),s.jsxs("button",{onClick:Ce,className:`${pe.confirmationButton} ${pe.confirmationButtonConfirm}`,children:[s.jsx("i",{className:"fa-solid fa-trash",style:{marginRight:"0.5rem"}}),"Remove All"]})]})]})})]}),s.jsx(Ge,{})]})}const mM=()=>{const e=Ba(),{user:t,switchUser:r}=on(),[a,o]=T.useState([]),[c,d]=T.useState(!0),[f,h]=T.useState(null),[p,x]=T.useState(!1),[y,v]=T.useState(""),[b,w]=T.useState(""),[_,S]=T.useState(!1),[N,R]=T.useState(!1),[O,P]=T.useState(""),[J,ae]=T.useState(""),[Y,F]=T.useState(!1),[Q,oe]=T.useState(!1);T.useEffect(()=>{t?.business_id&&q()},[t?.business_id]),T.useEffect(()=>{t?.pin&&!Y&&R(!0)},[t?.pin,Y]);const q=async()=>{if(t?.business_id)try{d(!0);const{data:W,error:xe}=await Ne.from("users").select("*").eq("business_id",t.business_id).eq("active",!0).order("user_id",{ascending:!1});if(xe){console.error("Error fetching users:",xe);return}o(W||[])}catch(W){console.error("Error fetching users:",W)}finally{d(!1)}},de=W=>{h(W),x(!0),v(""),w(""),oe(!1)},te=async W=>{if(W.preventDefault(),!(!f||!y)){S(!0),w("");try{if(await r(f.user_id,y,Q))e("/dashboard");else throw new Error(Q?"Invalid PIN":"Invalid password")}catch(xe){console.log("Password error:",xe),w(Q?"Invalid PIN. Please try again.":"Invalid password. Please try again.")}finally{S(!1)}}},ne=()=>{x(!1),h(null),v(""),w(""),S(!1),oe(!1)},me=W=>{switch(W.toLowerCase()){case"admin":return"#dc2626";case"owner":return"#7c3aed";case"manager":return"#ea580c";case"cashier":return"#2563eb";default:return"#6b7280"}},re=W=>{if(!W)return"Never";const xe=new Date(W);return Number.isNaN(xe.getTime())?"Never":xe.toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})},be=async W=>{if(W.preventDefault(),!O){ae("Please enter your PIN");return}t?.pin&&t.pin===O?(R(!1),F(!0),P(""),ae("")):ae("Invalid PIN. Please try again.")};return s.jsx("div",{style:{position:"fixed",inset:"0",backgroundColor:"#0b0d10",backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02) 2px, transparent 2px, transparent 4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",zIndex:9999},children:s.jsxs("div",{style:{background:"transparent",width:"100%",maxWidth:"1200px",padding:"20px"},children:[s.jsx("div",{style:{background:"#000000",borderRadius:"12px",border:"4px solid #4a5568",boxShadow:"inset 0 0 20px rgba(0,0,0,0.5)",padding:"16px"},children:s.jsxs("div",{style:{background:"#000000",borderRadius:"8px",padding:"24px",position:"relative",overflow:"hidden",height:"700px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid #4a5568",position:"relative"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#ef4444"}}),s.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#eab308"}}),s.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:"#7d8d86"}})]}),s.jsx("h2",{style:{fontSize:"32px",fontWeight:"bold",color:"#ffffff",margin:0},children:"Select User"}),s.jsx("button",{onClick:()=>{p?ne():e("/login")},style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"color 0.2s ease",fontSize:"32px"},onMouseEnter:W=>{W.currentTarget.style.color="#ffffff"},onMouseLeave:W=>{W.currentTarget.style.color="#9ca3af"},"aria-label":"Close",children:""})]}),s.jsx("div",{children:N?s.jsx("div",{children:s.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:8,padding:24,marginBottom:24,textAlign:"center"},children:[s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("i",{className:"fa-solid fa-lock",style:{fontSize:"48px",color:"#7d8d86",marginBottom:"16px"}}),s.jsx("h3",{style:{color:"#ffffff",fontSize:"24px",margin:"0 0 8px 0"},children:"PIN Required"}),s.jsx("p",{style:{color:"#9ca3af",fontSize:"16px",margin:0},children:"Enter your PIN to access the user system"})]}),s.jsxs("form",{onSubmit:be,style:{display:"flex",flexDirection:"column",gap:16,maxWidth:"300px",margin:"0 auto"},children:[s.jsxs("div",{children:[s.jsx("input",{type:"password",value:O,onChange:W=>{P(W.target.value),J&&ae("")},style:{width:"200px",padding:12,background:"#1a202c",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,boxSizing:"border-box",textAlign:"center",letterSpacing:"2px"},placeholder:"Enter PIN",maxLength:6,required:!0,autoFocus:!0}),J&&s.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:"8px 12px",marginTop:8,display:"flex",alignItems:"center",gap:8},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc2626",fontSize:14}}),s.jsx("p",{style:{fontSize:14,color:"#dc2626",margin:0,fontWeight:500},children:J})]})]}),s.jsxs("div",{style:{display:"flex",gap:12},children:[s.jsx("button",{type:"button",onClick:()=>{e("/login")},style:{flex:1,padding:"12px 16px",background:"#4a5568",border:"1px solid #4a5568",borderRadius:8,color:"#ffffff",fontSize:18,fontWeight:500,cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:W=>{W.currentTarget.style.background="#6b7280"},onMouseLeave:W=>{W.currentTarget.style.background="#4a5568"},children:"Back to Login"}),s.jsx("button",{type:"submit",style:{flex:1,padding:"12px 16px",background:"#7d8d86",border:"2px solid #7d8d86",borderRadius:8,color:"#000000",fontSize:18,fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:W=>{W.currentTarget.style.background="#3e3f29",W.currentTarget.style.borderColor="#3e3f29"},onMouseLeave:W=>{W.currentTarget.style.background="#7d8d86",W.currentTarget.style.borderColor="#7d8d86"},children:"Verify PIN"})]})]})]})}):p?s.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundImage:"url(images/mcbackground3.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"#0b0d10",position:"relative"},children:[s.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",pointerEvents:"none"}}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,gap:"32px",padding:"40px 0",position:"relative",zIndex:1},children:[s.jsx("div",{style:{position:"relative"},children:s.jsx("div",{style:{width:"160px",height:"160px",borderRadius:"50%",background:"rgba(0,0,0,0.6)",border:"3px solid rgba(255,255,255,0.4)",backdropFilter:"blur(15px)",boxShadow:"0 8px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:f?.icon?s.jsx("img",{src:`/retailpos/images/icons/${f.icon}.png`,alt:f.icon,style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"50%"}}):s.jsx("svg",{viewBox:"0 0 24 24",style:{width:"80px",height:"80px",color:"rgba(255,255,255,0.85)"},fill:"currentColor",children:s.jsx("path",{d:"M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"})})})}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{color:"#ffffff",fontSize:"32px",fontWeight:"600",letterSpacing:"0.5px",textShadow:"0 2px 8px rgba(0,0,0,0.8)"},children:f?.username}),s.jsx("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px",marginTop:"8px",textShadow:"0 1px 4px rgba(0,0,0,0.8)"},children:f?.role})]}),s.jsxs("form",{onSubmit:te,style:{width:"100%",maxWidth:"400px"},children:[f?.pin&&s.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:s.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"4px",backdropFilter:"blur(10px)"},children:[s.jsx("button",{type:"button",onClick:()=>{oe(!1),v(""),w("")},style:{padding:"8px 16px",background:Q?"transparent":"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:Q?"rgba(255,255,255,0.7)":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Password"}),s.jsx("button",{type:"button",onClick:()=>{oe(!0),v(""),w("")},style:{padding:"8px 16px",background:Q?"rgba(255,255,255,0.2)":"transparent",border:"none",borderRadius:"6px",color:Q?"#ffffff":"rgba(255,255,255,0.7)",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"PIN"})]})}),s.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[s.jsx("input",{type:"password",value:y,onChange:W=>{v(W.target.value),b&&w("")},placeholder:Q?"Enter PIN":"Password",maxLength:Q?6:void 0,required:!0,autoFocus:!0,style:{width:"100%",height:"48px",borderRadius:"24px",paddingLeft:"20px",paddingRight:"56px",color:"#ffffff",fontSize:"16px",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(15px)",border:"2px solid rgba(255,255,255,0.4)",boxShadow:"0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)",outline:"none",textAlign:Q?"center":"left",letterSpacing:Q?"2px":"normal",boxSizing:"border-box",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onFocus:W=>{W.target.style.border="2px solid rgba(255,255,255,0.8)",W.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},onBlur:W=>{W.target.style.border="2px solid rgba(255,255,255,0.4)",W.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"}}),s.jsx("button",{type:"submit",disabled:_,style:{position:"absolute",right:"4px",top:"4px",height:"40px",width:"40px",borderRadius:"50%",background:_?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.95)",border:"2px solid rgba(255,255,255,0.8)",display:"flex",alignItems:"center",justifyContent:"center",cursor:_?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 6px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2)",opacity:_?.7:1},onMouseEnter:W=>{_||(W.currentTarget.style.background="#ffffff")},onMouseLeave:W=>{_||(W.currentTarget.style.background="rgba(255,255,255,0.95)")},children:_?s.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{color:"#0f2d6e",fontSize:"16px"}}):s.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:"#0f2d6e"},fill:"currentColor",children:s.jsx("path",{d:"M13 5l7 7-7 7v-4H4v-6h9V5z"})})})]}),b&&s.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",backdropFilter:"blur(10px)"},children:[s.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#fca5a5",fontSize:"14px",textShadow:"0 1px 2px rgba(0,0,0,0.8)"}}),s.jsx("p",{style:{fontSize:"14px",color:"#fca5a5",margin:0,fontWeight:500,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:b})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px"},children:[s.jsx("button",{type:"button",onClick:ne,style:{background:"none",border:"none",color:"rgba(255,255,255,0.9)",fontSize:"14px",cursor:"pointer",textDecoration:"none",transition:"color 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:W=>{W.currentTarget.style.color="#ffffff"},onMouseLeave:W=>{W.currentTarget.style.color="rgba(255,255,255,0.9)"},children:" Back to users"}),s.jsx("div",{style:{fontSize:"14px",color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:"Press Enter to sign in"})]})]})]}),s.jsx("div",{style:{padding:"24px",display:"flex",justifyContent:"flex-start",position:"relative",zIndex:1},children:s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxWidth:"300px",maxHeight:"200px",overflowY:"auto",paddingRight:"8px"},children:a.filter(W=>W.user_id!==f?.user_id).map(W=>s.jsxs("button",{onClick:()=>{h(W),v(""),w(""),oe(!1)},style:{display:"flex",alignItems:"center",gap:"10px",borderRadius:"8px",padding:"6px 10px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",color:"rgba(255,255,255,0.9)",cursor:"pointer",transition:"all 0.2s ease",minWidth:"140px",fontSize:"13px"},onMouseEnter:xe=>{xe.currentTarget.style.background="rgba(0,0,0,0.5)",xe.currentTarget.style.color="#ffffff"},onMouseLeave:xe=>{xe.currentTarget.style.background="rgba(0,0,0,0.4)",xe.currentTarget.style.color="rgba(255,255,255,0.9)"},children:[s.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:W.icon?s.jsx("img",{src:`/retailpos/images/icons/${W.icon}.png`,alt:W.icon,style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"50%"}}):s.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.7)"},children:""})}),s.jsx("span",{style:{fontWeight:"400",fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:W.username})]},W.user_id))})}),s.jsxs("div",{style:{position:"absolute",right:"24px",bottom:"24px",display:"flex",alignItems:"center",gap:"16px",color:"rgba(255,255,255,0.8)",zIndex:1},children:[s.jsx("button",{title:"Accessibility",style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:W=>{W.currentTarget.style.background="rgba(0,0,0,0.6)",W.currentTarget.style.color="#ffffff"},onMouseLeave:W=>{W.currentTarget.style.background="rgba(0,0,0,0.4)",W.currentTarget.style.color="rgba(255,255,255,0.9)"},children:s.jsx("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:s.jsx("path",{d:"M11 2h2v4h-2zM4 9h16v2H4zM6 12l4 .5V22H8v-7.5L6 14v-2zm12 0v2l-2 .5V22h-2v-9.5l4-.5z"})})}),s.jsx("button",{onClick:()=>e("/login"),style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"rgba(255,255,255,0.9)"},onMouseEnter:W=>{W.currentTarget.style.background="#991b1b",W.currentTarget.style.border="1px solid #991b1b",W.currentTarget.style.color="#ffffff"},onMouseLeave:W=>{W.currentTarget.style.background="rgba(0,0,0,0.4)",W.currentTarget.style.border="1px solid rgba(255,255,255,0.3)",W.currentTarget.style.color="rgba(255,255,255,0.9)"},children:s.jsxs("svg",{viewBox:"0 0 24 24",style:{width:"20px",height:"20px"},fill:"currentColor",children:[s.jsx("path",{d:"M11 2h2v10h-2z"}),s.jsx("path",{d:"M7.05 4.05a8.5 8.5 0 1 0 9.9 0l-1.41 1.41a6.5 6.5 0 1 1-7.08 0z"})]})})]})]}):c?s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:"#9ca3af"},children:[s.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:12,fontSize:"24px"}}),s.jsx("span",{style:{fontSize:"18px"},children:"Loading users..."})]}):s.jsx("div",{children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"20px"},children:a.map(W=>s.jsx("button",{style:{background:"rgba(26, 26, 26, 0.3)",border:"1px solid #4a5568",borderBottom:"3px solid #7d8d86",borderRadius:"8px",padding:24,cursor:"pointer",transition:"all 0.2s ease",width:"100%",textAlign:"left",position:"relative",minHeight:"160px"},onMouseEnter:xe=>{xe.currentTarget.style.background="rgba(125,141,134,0.1)",xe.currentTarget.style.borderColor="#7d8d86",xe.currentTarget.style.boxShadow="0 0 20px rgba(125,141,134,0.2)"},onMouseLeave:xe=>{xe.currentTarget.style.background="rgba(26, 26, 26, 0.3)",xe.currentTarget.style.borderColor="#4a5568",xe.currentTarget.style.boxShadow="none"},onClick:()=>de(W),children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,height:"100%"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[s.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#1a202c",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"2px solid #4a5568"},children:W.icon?s.jsx("img",{src:`/retailpos/images/icons/${W.icon}.png`,alt:W.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):s.jsx("div",{style:{fontSize:24,color:"#4a5568"},children:""})}),s.jsx("div",{style:{flex:1},children:s.jsxs("div",{style:{marginBottom:8,display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{style:{fontSize:24,fontWeight:500,color:"#ffffff"},children:W.username}),W.pin&&s.jsx("div",{style:{background:"#10b981",color:"#ffffff",fontSize:"10px",fontWeight:"600",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"PIN"})]})})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,flex:1},children:[s.jsx("div",{children:s.jsx("span",{style:{background:`${me(W.role)}20`,color:me(W.role),padding:"6px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize",display:"inline-block"},children:W.role})}),s.jsxs("div",{style:{fontSize:14,color:"#9ca3af",lineHeight:"1.4"},children:["Last login: ",re(W.last_used)]})]})]})},W.user_id))})})})]})}),s.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:s.jsx("div",{style:{width:60,height:60,background:"linear-gradient(145deg, #4a5568, #2d3748)",borderRadius:"0 0 15px 15px",boxShadow:"0 4px 8px rgba(0,0,0,0.4)",border:"2px solid #4a5568"}})}),s.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:8},children:s.jsx("div",{style:{width:300,height:30,background:"linear-gradient(145deg, #2d3748, #1a202c)",borderRadius:50,boxShadow:"0 6px 20px rgba(0,0,0,0.5)",border:"1px solid #4a5568"}})})]})})},yM=()=>{const{isCollapsed:e}=O0();return j3(),s.jsxs("div",{style:{height:"100vh",background:"#f8f9fa",color:"#1a1a1a",display:"flex",overflow:"hidden",backgroundImage:"url(/retailpos/images/backgrounds/u2541828551_An_elegant_illustration_of_a_small_African_corner_5e875dd7-e5d8-4655-af92-bb5c9c2865fd_1.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:[s.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.05)",zIndex:0}}),s.jsx(pj,{}),s.jsx(xj,{}),s.jsx("main",{style:{flex:1,marginLeft:e?"70px":"200px",padding:"24px",height:"100vh",overflow:"auto",transition:"margin-left 0.3s ease",position:"relative",zIndex:1},children:s.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative",zIndex:1},children:s.jsxs(Ty,{children:[s.jsx(Cn,{path:"/dashboard",element:s.jsx(FE,{})}),s.jsx(Cn,{path:"/products",element:s.jsx(Rl,{children:s.jsx(PE,{})})}),s.jsx(Cn,{path:"/sales",element:s.jsx(Rl,{requiredPermission:"canProcessSales",children:s.jsx(HE,{})})}),s.jsx(Cn,{path:"/side-businesses",element:s.jsx(Rl,{requiredPermission:"canProcessSales",children:s.jsx(h6,{})})}),s.jsx(Cn,{path:"/transactions",element:s.jsx(Rl,{children:s.jsx(b6,{})})}),s.jsx(Cn,{path:"/admin",element:s.jsx(Rl,{requiredPermission:"canManageUsers",children:s.jsx(hI,{})})}),s.jsx(Cn,{path:"/reminders",element:s.jsx(xM,{})}),s.jsx(Cn,{path:"/transaction/:transactionId",element:s.jsx(_6,{})})]})})})]})},vM=new Jw({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:1}}});function bM(){return s.jsx(Zw,{client:vM,children:s.jsx(y3,{children:s.jsx(b3,{children:s.jsx(S3,{children:s.jsx(_3,{children:s.jsx(T3,{children:s.jsx(bw,{basename:"/retailpos",children:s.jsxs(Ty,{children:[s.jsx(Cn,{path:"/",element:s.jsx(w1,{})}),s.jsx(Cn,{path:"/landing",element:s.jsx(w1,{})}),s.jsx(Cn,{path:"/login",element:s.jsx(cv,{})}),s.jsx(Cn,{path:"/verify-email",element:s.jsx(vE,{})}),s.jsx(Cn,{path:"/select-user",element:s.jsx(mM,{})}),s.jsx(Cn,{path:"/*",element:s.jsx(hj,{children:s.jsx(yM,{})})})]})})})})})})})})}iS.createRoot(document.getElementById("root")).render(s.jsx(py.StrictMode,{children:s.jsx(bM,{})}));
