(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const u of d)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function i(d){const u={};return d.integrity&&(u.integrity=d.integrity),d.referrerPolicy&&(u.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?u.credentials="include":d.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(d){if(d.ep)return;d.ep=!0;const u=i(d);fetch(d.href,u)}})();function Md(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function ny(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var r=l.default;if(typeof r=="function"){var i=function o(){var d=!1;try{d=this instanceof o}catch{}return d?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};i.prototype=r.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(l).forEach(function(o){var d=Object.getOwnPropertyDescriptor(l,o);Object.defineProperty(i,o,d.get?d:{enumerable:!0,get:function(){return l[o]}})}),i}var nd={exports:{}},ii={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function ay(){if(Ep)return ii;Ep=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(o,d,u){var h=null;if(u!==void 0&&(h=""+u),d.key!==void 0&&(h=""+d.key),"key"in d){u={};for(var g in d)g!=="key"&&(u[g]=d[g])}else u=d;return d=u.ref,{$$typeof:l,type:o,key:h,ref:d!==void 0?d:null,props:u}}return ii.Fragment=r,ii.jsx=i,ii.jsxs=i,ii}var Rp;function sy(){return Rp||(Rp=1,nd.exports=ay()),nd.exports}var a=sy(),ad={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function ry(){if(Np)return $e;Np=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.iterator;function k(w){return w===null||typeof w!="object"?null:(w=S&&w[S]||w["@@iterator"],typeof w=="function"?w:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function A(w,K,ce){this.props=w,this.context=K,this.refs=N,this.updater=ce||j}A.prototype.isReactComponent={},A.prototype.setState=function(w,K){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,K,"setState")},A.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function P(){}P.prototype=A.prototype;function E(w,K,ce){this.props=w,this.context=K,this.refs=N,this.updater=ce||j}var U=E.prototype=new P;U.constructor=E,C(U,A.prototype),U.isPureReactComponent=!0;var Z=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},re=Object.prototype.hasOwnProperty;function de(w,K,ce,ue,we,M){return ce=M.ref,{$$typeof:l,type:w,key:K,ref:ce!==void 0?ce:null,props:M}}function ve(w,K){return de(w.type,K,void 0,void 0,void 0,w.props)}function ye(w){return typeof w=="object"&&w!==null&&w.$$typeof===l}function Ae(w){var K={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(ce){return K[ce]})}var R=/\/+/g;function q(w,K){return typeof w=="object"&&w!==null&&w.key!=null?Ae(""+w.key):K.toString(36)}function O(){}function se(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(O,O):(w.status="pending",w.then(function(K){w.status==="pending"&&(w.status="fulfilled",w.value=K)},function(K){w.status==="pending"&&(w.status="rejected",w.reason=K)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function he(w,K,ce,ue,we){var M=typeof w;(M==="undefined"||M==="boolean")&&(w=null);var Q=!1;if(w===null)Q=!0;else switch(M){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(w.$$typeof){case l:case r:Q=!0;break;case x:return Q=w._init,he(Q(w._payload),K,ce,ue,we)}}if(Q)return we=we(w),Q=ue===""?"."+q(w,0):ue,Z(we)?(ce="",Q!=null&&(ce=Q.replace(R,"$&/")+"/"),he(we,K,ce,"",function(ge){return ge})):we!=null&&(ye(we)&&(we=ve(we,ce+(we.key==null||w&&w.key===we.key?"":(""+we.key).replace(R,"$&/")+"/")+Q)),K.push(we)),1;Q=0;var oe=ue===""?".":ue+":";if(Z(w))for(var be=0;be<w.length;be++)ue=w[be],M=oe+q(ue,be),Q+=he(ue,K,ce,M,we);else if(be=k(w),typeof be=="function")for(w=be.call(w),be=0;!(ue=w.next()).done;)ue=ue.value,M=oe+q(ue,be++),Q+=he(ue,K,ce,M,we);else if(M==="object"){if(typeof w.then=="function")return he(se(w),K,ce,ue,we);throw K=String(w),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Q}function I(w,K,ce){if(w==null)return w;var ue=[],we=0;return he(w,ue,"","",function(M){return K.call(ce,M,we++)}),ue}function J(w){if(w._status===-1){var K=w._result;K=K(),K.then(function(ce){(w._status===0||w._status===-1)&&(w._status=1,w._result=ce)},function(ce){(w._status===0||w._status===-1)&&(w._status=2,w._result=ce)}),w._status===-1&&(w._status=0,w._result=K)}if(w._status===1)return w._result.default;throw w._result}var fe=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function Se(){}return $e.Children={map:I,forEach:function(w,K,ce){I(w,function(){K.apply(this,arguments)},ce)},count:function(w){var K=0;return I(w,function(){K++}),K},toArray:function(w){return I(w,function(K){return K})||[]},only:function(w){if(!ye(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},$e.Component=A,$e.Fragment=i,$e.Profiler=d,$e.PureComponent=E,$e.StrictMode=o,$e.Suspense=m,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,$e.__COMPILER_RUNTIME={__proto__:null,c:function(w){return G.H.useMemoCache(w)}},$e.cache=function(w){return function(){return w.apply(null,arguments)}},$e.cloneElement=function(w,K,ce){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var ue=C({},w.props),we=w.key,M=void 0;if(K!=null)for(Q in K.ref!==void 0&&(M=void 0),K.key!==void 0&&(we=""+K.key),K)!re.call(K,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&K.ref===void 0||(ue[Q]=K[Q]);var Q=arguments.length-2;if(Q===1)ue.children=ce;else if(1<Q){for(var oe=Array(Q),be=0;be<Q;be++)oe[be]=arguments[be+2];ue.children=oe}return de(w.type,we,void 0,void 0,M,ue)},$e.createContext=function(w){return w={$$typeof:h,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:u,_context:w},w},$e.createElement=function(w,K,ce){var ue,we={},M=null;if(K!=null)for(ue in K.key!==void 0&&(M=""+K.key),K)re.call(K,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(we[ue]=K[ue]);var Q=arguments.length-2;if(Q===1)we.children=ce;else if(1<Q){for(var oe=Array(Q),be=0;be<Q;be++)oe[be]=arguments[be+2];we.children=oe}if(w&&w.defaultProps)for(ue in Q=w.defaultProps,Q)we[ue]===void 0&&(we[ue]=Q[ue]);return de(w,M,void 0,void 0,null,we)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(w){return{$$typeof:g,render:w}},$e.isValidElement=ye,$e.lazy=function(w){return{$$typeof:x,_payload:{_status:-1,_result:w},_init:J}},$e.memo=function(w,K){return{$$typeof:p,type:w,compare:K===void 0?null:K}},$e.startTransition=function(w){var K=G.T,ce={};G.T=ce;try{var ue=w(),we=G.S;we!==null&&we(ce,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Se,fe)}catch(M){fe(M)}finally{G.T=K}},$e.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},$e.use=function(w){return G.H.use(w)},$e.useActionState=function(w,K,ce){return G.H.useActionState(w,K,ce)},$e.useCallback=function(w,K){return G.H.useCallback(w,K)},$e.useContext=function(w){return G.H.useContext(w)},$e.useDebugValue=function(){},$e.useDeferredValue=function(w,K){return G.H.useDeferredValue(w,K)},$e.useEffect=function(w,K,ce){var ue=G.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(w,K)},$e.useId=function(){return G.H.useId()},$e.useImperativeHandle=function(w,K,ce){return G.H.useImperativeHandle(w,K,ce)},$e.useInsertionEffect=function(w,K){return G.H.useInsertionEffect(w,K)},$e.useLayoutEffect=function(w,K){return G.H.useLayoutEffect(w,K)},$e.useMemo=function(w,K){return G.H.useMemo(w,K)},$e.useOptimistic=function(w,K){return G.H.useOptimistic(w,K)},$e.useReducer=function(w,K,ce){return G.H.useReducer(w,K,ce)},$e.useRef=function(w){return G.H.useRef(w)},$e.useState=function(w){return G.H.useState(w)},$e.useSyncExternalStore=function(w,K,ce){return G.H.useSyncExternalStore(w,K,ce)},$e.useTransition=function(){return G.H.useTransition()},$e.version="19.1.1",$e}var zp;function Bd(){return zp||(zp=1,ad.exports=ry()),ad.exports}var v=Bd();const gg=Md(v);var sd={exports:{}},oi={},rd={exports:{}},id={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function iy(){return Dp||(Dp=1,(function(l){function r(I,J){var fe=I.length;I.push(J);e:for(;0<fe;){var Se=fe-1>>>1,w=I[Se];if(0<d(w,J))I[Se]=J,I[fe]=w,fe=Se;else break e}}function i(I){return I.length===0?null:I[0]}function o(I){if(I.length===0)return null;var J=I[0],fe=I.pop();if(fe!==J){I[0]=fe;e:for(var Se=0,w=I.length,K=w>>>1;Se<K;){var ce=2*(Se+1)-1,ue=I[ce],we=ce+1,M=I[we];if(0>d(ue,fe))we<w&&0>d(M,ue)?(I[Se]=M,I[we]=fe,Se=we):(I[Se]=ue,I[ce]=fe,Se=ce);else if(we<w&&0>d(M,fe))I[Se]=M,I[we]=fe,Se=we;else break e}}return J}function d(I,J){var fe=I.sortIndex-J.sortIndex;return fe!==0?fe:I.id-J.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;l.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();l.unstable_now=function(){return h.now()-g}}var m=[],p=[],x=1,S=null,k=3,j=!1,C=!1,N=!1,A=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function Z(I){for(var J=i(p);J!==null;){if(J.callback===null)o(p);else if(J.startTime<=I)o(p),J.sortIndex=J.expirationTime,r(m,J);else break;J=i(p)}}function G(I){if(N=!1,Z(I),!C)if(i(m)!==null)C=!0,re||(re=!0,q());else{var J=i(p);J!==null&&he(G,J.startTime-I)}}var re=!1,de=-1,ve=5,ye=-1;function Ae(){return A?!0:!(l.unstable_now()-ye<ve)}function R(){if(A=!1,re){var I=l.unstable_now();ye=I;var J=!0;try{e:{C=!1,N&&(N=!1,E(de),de=-1),j=!0;var fe=k;try{t:{for(Z(I),S=i(m);S!==null&&!(S.expirationTime>I&&Ae());){var Se=S.callback;if(typeof Se=="function"){S.callback=null,k=S.priorityLevel;var w=Se(S.expirationTime<=I);if(I=l.unstable_now(),typeof w=="function"){S.callback=w,Z(I),J=!0;break t}S===i(m)&&o(m),Z(I)}else o(m);S=i(m)}if(S!==null)J=!0;else{var K=i(p);K!==null&&he(G,K.startTime-I),J=!1}}break e}finally{S=null,k=fe,j=!1}J=void 0}}finally{J?q():re=!1}}}var q;if(typeof U=="function")q=function(){U(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,se=O.port2;O.port1.onmessage=R,q=function(){se.postMessage(null)}}else q=function(){P(R,0)};function he(I,J){de=P(function(){I(l.unstable_now())},J)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(I){I.callback=null},l.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<I?Math.floor(1e3/I):5},l.unstable_getCurrentPriorityLevel=function(){return k},l.unstable_next=function(I){switch(k){case 1:case 2:case 3:var J=3;break;default:J=k}var fe=k;k=J;try{return I()}finally{k=fe}},l.unstable_requestPaint=function(){A=!0},l.unstable_runWithPriority=function(I,J){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var fe=k;k=I;try{return J()}finally{k=fe}},l.unstable_scheduleCallback=function(I,J,fe){var Se=l.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Se+fe:Se):fe=Se,I){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=fe+w,I={id:x++,callback:J,priorityLevel:I,startTime:fe,expirationTime:w,sortIndex:-1},fe>Se?(I.sortIndex=fe,r(p,I),i(m)===null&&I===i(p)&&(N?(E(de),de=-1):N=!0,he(G,fe-Se))):(I.sortIndex=w,r(m,I),C||j||(C=!0,re||(re=!0,q()))),I},l.unstable_shouldYield=Ae,l.unstable_wrapCallback=function(I){var J=k;return function(){var fe=k;k=J;try{return I.apply(this,arguments)}finally{k=fe}}}})(id)),id}var Ap;function oy(){return Ap||(Ap=1,rd.exports=iy()),rd.exports}var od={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp;function ly(){if(Mp)return Jt;Mp=1;var l=Bd();function r(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},d=Symbol.for("react.portal");function u(m,p,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:S==null?null:""+S,children:m,containerInfo:p,implementation:x}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Jt.createPortal=function(m,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(r(299));return u(m,p,null,x)},Jt.flushSync=function(m){var p=h.T,x=o.p;try{if(h.T=null,o.p=2,m)return m()}finally{h.T=p,o.p=x,o.d.f()}},Jt.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(m,p))},Jt.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},Jt.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var x=p.as,S=g(x,p.crossOrigin),k=typeof p.integrity=="string"?p.integrity:void 0,j=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?o.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:k,fetchPriority:j}):x==="script"&&o.d.X(m,{crossOrigin:S,integrity:k,fetchPriority:j,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Jt.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=g(p.as,p.crossOrigin);o.d.M(m,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(m)},Jt.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,S=g(x,p.crossOrigin);o.d.L(m,x,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Jt.preloadModule=function(m,p){if(typeof m=="string")if(p){var x=g(p.as,p.crossOrigin);o.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(m)},Jt.requestFormReset=function(m){o.d.r(m)},Jt.unstable_batchedUpdates=function(m,p){return m(p)},Jt.useFormState=function(m,p,x){return h.H.useFormState(m,p,x)},Jt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Jt.version="19.1.1",Jt}var Bp;function cy(){if(Bp)return od.exports;Bp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),od.exports=ly(),od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op;function dy(){if(Op)return oi;Op=1;var l=oy(),r=Bd(),i=cy();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(o(188))}function m(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,s=t;;){var c=n.return;if(c===null)break;var f=c.alternate;if(f===null){if(s=c.return,s!==null){n=s;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===n)return g(c),e;if(f===s)return g(c),t;f=f.sibling}throw Error(o(188))}if(n.return!==s.return)n=c,s=f;else{for(var y=!1,b=c.child;b;){if(b===n){y=!0,n=c,s=f;break}if(b===s){y=!0,s=c,n=f;break}b=b.sibling}if(!y){for(b=f.child;b;){if(b===n){y=!0,n=f,s=c;break}if(b===s){y=!0,s=f,n=c;break}b=b.sibling}if(!y)throw Error(o(189))}}if(n.alternate!==s)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),U=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),ye=Symbol.for("react.activity"),Ae=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function q(e){return e===null||typeof e!="object"?null:(e=R&&e[R]||e["@@iterator"],typeof e=="function"?e:null)}var O=Symbol.for("react.client.reference");function se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===O?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case A:return"Profiler";case N:return"StrictMode";case G:return"Suspense";case re:return"SuspenseList";case ye:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case U:return(e.displayName||"Context")+".Provider";case E:return(e._context.displayName||"Context")+".Consumer";case Z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case de:return t=e.displayName||null,t!==null?t:se(e.type)||"Memo";case ve:t=e._payload,e=e._init;try{return se(e(t))}catch{}}return null}var he=Array.isArray,I=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Se=[],w=-1;function K(e){return{current:e}}function ce(e){0>w||(e.current=Se[w],Se[w]=null,w--)}function ue(e,t){w++,Se[w]=e.current,e.current=t}var we=K(null),M=K(null),Q=K(null),oe=K(null);function be(e,t){switch(ue(Q,t),ue(M,e),ue(we,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?np(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=np(t),e=ap(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ce(we),ue(we,e)}function ge(){ce(we),ce(M),ce(Q)}function je(e){e.memoizedState!==null&&ue(oe,e);var t=we.current,n=ap(t,e.type);t!==n&&(ue(M,e),ue(we,n))}function Ye(e){M.current===e&&(ce(we),ce(M)),oe.current===e&&(ce(oe),ti._currentValue=fe)}var Le=Object.prototype.hasOwnProperty,He=l.unstable_scheduleCallback,yt=l.unstable_cancelCallback,Dt=l.unstable_shouldYield,dt=l.unstable_requestPaint,gt=l.unstable_now,on=l.unstable_getCurrentPriorityLevel,z=l.unstable_ImmediatePriority,ke=l.unstable_UserBlockingPriority,Ee=l.unstable_NormalPriority,Ze=l.unstable_LowPriority,nt=l.unstable_IdlePriority,mt=l.log,gn=l.unstable_setDisableYieldValue,H=null,pe=null;function _e(e){if(typeof mt=="function"&&gn(e),pe&&typeof pe.setStrictMode=="function")try{pe.setStrictMode(H,e)}catch{}}var Pe=Math.clz32?Math.clz32:Be,B=Math.log,ee=Math.LN2;function Be(e){return e>>>=0,e===0?32:31-(B(e)/ee|0)|0}var We=256,Re=4194304;function it(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ue(e,t,n){var s=e.pendingLanes;if(s===0)return 0;var c=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var b=s&134217727;return b!==0?(s=b&~f,s!==0?c=it(s):(y&=b,y!==0?c=it(y):n||(n=b&~e,n!==0&&(c=it(n))))):(b=s&~f,b!==0?c=it(b):y!==0?c=it(y):n||(n=s&~e,n!==0&&(c=it(n)))),c===0?0:t!==0&&t!==c&&(t&f)===0&&(f=c&-c,n=t&-t,f>=n||f===32&&(n&4194048)!==0)?t:c}function At(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function jt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xt(){var e=We;return We<<=1,(We&4194048)===0&&(We=256),e}function kt(){var e=Re;return Re<<=1,(Re&62914560)===0&&(Re=4194304),e}function St(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ut(e,t,n,s,c,f){var y=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var b=e.entanglements,D=e.expirationTimes,Y=e.hiddenUpdates;for(n=y&~n;0<n;){var te=31-Pe(n),ie=1<<te;b[te]=0,D[te]=-1;var V=Y[te];if(V!==null)for(Y[te]=null,te=0;te<V.length;te++){var X=V[te];X!==null&&(X.lane&=-536870913)}n&=~ie}s!==0&&fs(e,s,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~t))}function fs(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Pe(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194090}function vi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Pe(n),c=1<<s;c&t|e[s]&t&&(e[s]|=t),n&=~c}}function mn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function dr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Pa(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:Sp(e.type))}function Vo(e,t){var n=J.p;try{return J.p=e,t()}finally{J.p=n}}var Bn=Math.random().toString(36).slice(2),$t="__reactFiber$"+Bn,Kt="__reactProps$"+Bn,ua="__reactContainer$"+Bn,ur="__reactEvents$"+Bn,Xo="__reactListeners$"+Bn,Ko="__reactHandles$"+Bn,fr="__reactResources$"+Bn,Ha="__reactMarker$"+Bn;function hs(e){delete e[$t],delete e[Kt],delete e[ur],delete e[Xo],delete e[Ko]}function Hn(e){var t=e[$t];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ua]||n[$t]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=op(e);e!==null;){if(n=e[$t])return n;e=op(e)}return t}e=n,n=e.parentNode}return null}function Wn(e){if(e=e[$t]||e[ua]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function fa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function ha(e){var t=e[fr];return t||(t=e[fr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ct(e){e[Ha]=!0}var hr=new Set,_i={};function On(e,t){Fn(e,t),Fn(e+"Capture",t)}function Fn(e,t){for(_i[e]=t,e=0;e<t.length;e++)hr.add(t[e])}var Qo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Si={},wi={};function T(e){return Le.call(wi,e)?!0:Le.call(Si,e)?!1:Qo.test(e)?wi[e]=!0:(Si[e]=!0,!1)}function ae(e,t,n){if(T(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ne(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function me(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}var xe,ze;function Te(e){if(xe===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);xe=t&&t[1]||"",ze=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+e+ze}var Rt=!1;function bt(e,t){if(!e||Rt)return"";Rt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var V=X}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(X){V=X}e.call(ie.prototype)}}else{try{throw Error()}catch(X){V=X}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&V&&typeof X.stack=="string")return[X.stack,V.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=s.DetermineComponentFrameRoot(),y=f[0],b=f[1];if(y&&b){var D=y.split(`
`),Y=b.split(`
`);for(c=s=0;s<D.length&&!D[s].includes("DetermineComponentFrameRoot");)s++;for(;c<Y.length&&!Y[c].includes("DetermineComponentFrameRoot");)c++;if(s===D.length||c===Y.length)for(s=D.length-1,c=Y.length-1;1<=s&&0<=c&&D[s]!==Y[c];)c--;for(;1<=s&&0<=c;s--,c--)if(D[s]!==Y[c]){if(s!==1||c!==1)do if(s--,c--,0>c||D[s]!==Y[c]){var te=`
`+D[s].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=s&&0<=c);break}}}finally{Rt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Te(n):""}function Qt(e){switch(e.tag){case 26:case 27:case 5:return Te(e.type);case 16:return Te("Lazy");case 13:return Te("Suspense");case 19:return Te("SuspenseList");case 0:case 15:return bt(e.type,!1);case 11:return bt(e.type.render,!1);case 1:return bt(e.type,!0);case 31:return Te("Activity");default:return""}}function et(e){try{var t="";do t+=Qt(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function at(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pa(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zo(e){var t=pa(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,f=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){s=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ga(e){e._valueTracker||(e._valueTracker=Zo(e))}function Qd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=pa(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ji(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Zg=/[\n"\\]/g;function xn(e){return e.replace(Zg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Jo(e,t,n,s,c,f,y,b){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+at(t)):e.value!==""+at(t)&&(e.value=""+at(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?el(e,y,at(t)):n!=null?el(e,y,at(n)):s!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+at(b):e.removeAttribute("name")}function Zd(e,t,n,s,c,f,y,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;n=n!=null?""+at(n):"",t=t!=null?""+at(t):n,b||t===e.value||(e.value=t),e.defaultValue=t}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=b?e.checked:!!s,e.defaultChecked=!!s,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y)}function el(e,t,n){t==="number"&&ji(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ps(e,t,n,s){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&s&&(e[n].defaultSelected=!0)}else{for(n=""+at(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Jd(e,t,n){if(t!=null&&(t=""+at(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+at(n):""}function eu(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(o(92));if(he(s)){if(1<s.length)throw Error(o(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=at(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function gs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tu(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||Jg.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function nu(e,t,n){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in t)s=t[c],t.hasOwnProperty(c)&&n[c]!==s&&tu(e,c,s)}else for(var f in t)t.hasOwnProperty(f)&&tu(e,f,t[f])}function tl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var em=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ki(e){return tm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var nl=null;function al(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ms=null,xs=null;function au(e){var t=Wn(e);if(t&&(e=t.stateNode)){var n=e[Kt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Jo(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var c=s[Kt]||null;if(!c)throw Error(o(90));Jo(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&Qd(s)}break e;case"textarea":Jd(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ps(e,!!n.multiple,t,!1)}}}var sl=!1;function su(e,t,n){if(sl)return e(t,n);sl=!0;try{var s=e(t);return s}finally{if(sl=!1,(ms!==null||xs!==null)&&(uo(),ms&&(t=ms,e=xs,xs=ms=null,au(t),e)))for(t=0;t<e.length;t++)au(e[t])}}function pr(e,t){var n=e.stateNode;if(n===null)return null;var s=n[Kt]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=!1;if(Yn)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){rl=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{rl=!1}var ma=null,il=null,Ci=null;function ru(){if(Ci)return Ci;var e,t=il,n=t.length,s,c="value"in ma?ma.value:ma.textContent,f=c.length;for(e=0;e<n&&t[e]===c[e];e++);var y=n-e;for(s=1;s<=y&&t[n-s]===c[f-s];s++);return Ci=c.slice(e,1<s?1-s:void 0)}function Ti(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ei(){return!0}function iu(){return!1}function nn(e){function t(n,s,c,f,y){this._reactName=n,this._targetInst=c,this.type=s,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(n=e[b],this[b]=n?n(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ei:iu,this.isPropagationStopped=iu,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),t}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=nn(Wa),mr=x({},Wa,{view:0,detail:0}),nm=nn(mr),ol,ll,xr,Ni=x({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xr&&(xr&&e.type==="mousemove"?(ol=e.screenX-xr.screenX,ll=e.screenY-xr.screenY):ll=ol=0,xr=e),ol)},movementY:function(e){return"movementY"in e?e.movementY:ll}}),ou=nn(Ni),am=x({},Ni,{dataTransfer:0}),sm=nn(am),rm=x({},mr,{relatedTarget:0}),cl=nn(rm),im=x({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),om=nn(im),lm=x({},Wa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cm=nn(lm),dm=x({},Wa,{data:0}),lu=nn(dm),um={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hm[e])?!!t[e]:!1}function dl(){return pm}var gm=x({},mr,{key:function(e){if(e.key){var t=um[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ti(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dl,charCode:function(e){return e.type==="keypress"?Ti(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ti(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mm=nn(gm),xm=x({},Ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cu=nn(xm),ym=x({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dl}),bm=nn(ym),vm=x({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),_m=nn(vm),Sm=x({},Ni,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wm=nn(Sm),jm=x({},Wa,{newState:0,oldState:0}),km=nn(jm),Cm=[9,13,27,32],ul=Yn&&"CompositionEvent"in window,yr=null;Yn&&"documentMode"in document&&(yr=document.documentMode);var Tm=Yn&&"TextEvent"in window&&!yr,du=Yn&&(!ul||yr&&8<yr&&11>=yr),uu=" ",fu=!1;function hu(e,t){switch(e){case"keyup":return Cm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ys=!1;function Em(e,t){switch(e){case"compositionend":return pu(t);case"keypress":return t.which!==32?null:(fu=!0,uu);case"textInput":return e=t.data,e===uu&&fu?null:e;default:return null}}function Rm(e,t){if(ys)return e==="compositionend"||!ul&&hu(e,t)?(e=ru(),Ci=il=ma=null,ys=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return du&&t.locale!=="ko"?null:t.data;default:return null}}var Nm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Nm[e.type]:t==="textarea"}function mu(e,t,n,s){ms?xs?xs.push(s):xs=[s]:ms=s,t=xo(t,"onChange"),0<t.length&&(n=new Ri("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var br=null,vr=null;function zm(e){Qh(e,0)}function zi(e){var t=fa(e);if(Qd(t))return e}function xu(e,t){if(e==="change")return t}var yu=!1;if(Yn){var fl;if(Yn){var hl="oninput"in document;if(!hl){var bu=document.createElement("div");bu.setAttribute("oninput","return;"),hl=typeof bu.oninput=="function"}fl=hl}else fl=!1;yu=fl&&(!document.documentMode||9<document.documentMode)}function vu(){br&&(br.detachEvent("onpropertychange",_u),vr=br=null)}function _u(e){if(e.propertyName==="value"&&zi(vr)){var t=[];mu(t,vr,e,al(e)),su(zm,t)}}function Dm(e,t,n){e==="focusin"?(vu(),br=t,vr=n,br.attachEvent("onpropertychange",_u)):e==="focusout"&&vu()}function Am(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zi(vr)}function Mm(e,t){if(e==="click")return zi(t)}function Bm(e,t){if(e==="input"||e==="change")return zi(t)}function Om(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ln=typeof Object.is=="function"?Object.is:Om;function _r(e,t){if(ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var c=n[s];if(!Le.call(t,c)||!ln(e[c],t[c]))return!1}return!0}function Su(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wu(e,t){var n=Su(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Su(n)}}function ju(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ju(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ku(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ji(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ji(e.document)}return t}function pl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Lm=Yn&&"documentMode"in document&&11>=document.documentMode,bs=null,gl=null,Sr=null,ml=!1;function Cu(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ml||bs==null||bs!==ji(s)||(s=bs,"selectionStart"in s&&pl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Sr&&_r(Sr,s)||(Sr=s,s=xo(gl,"onSelect"),0<s.length&&(t=new Ri("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=bs)))}function Fa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vs={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},xl={},Tu={};Yn&&(Tu=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Ya(e){if(xl[e])return xl[e];if(!vs[e])return e;var t=vs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Tu)return xl[e]=t[n];return e}var Eu=Ya("animationend"),Ru=Ya("animationiteration"),Nu=Ya("animationstart"),Im=Ya("transitionrun"),Um=Ya("transitionstart"),qm=Ya("transitioncancel"),zu=Ya("transitionend"),Du=new Map,yl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yl.push("scrollEnd");function Cn(e,t){Du.set(e,t),On(t,[e])}var Au=new WeakMap;function yn(e,t){if(typeof e=="object"&&e!==null){var n=Au.get(e);return n!==void 0?n:(t={value:e,source:t,stack:et(t)},Au.set(e,t),t)}return{value:e,source:t,stack:et(t)}}var bn=[],_s=0,bl=0;function Di(){for(var e=_s,t=bl=_s=0;t<e;){var n=bn[t];bn[t++]=null;var s=bn[t];bn[t++]=null;var c=bn[t];bn[t++]=null;var f=bn[t];if(bn[t++]=null,s!==null&&c!==null){var y=s.pending;y===null?c.next=c:(c.next=y.next,y.next=c),s.pending=c}f!==0&&Mu(n,c,f)}}function Ai(e,t,n,s){bn[_s++]=e,bn[_s++]=t,bn[_s++]=n,bn[_s++]=s,bl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function vl(e,t,n,s){return Ai(e,t,n,s),Mi(e)}function Ss(e,t){return Ai(e,null,null,t),Mi(e)}function Mu(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var c=!1,f=e.return;f!==null;)f.childLanes|=n,s=f.alternate,s!==null&&(s.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&t!==null&&(c=31-Pe(n),e=f.hiddenUpdates,s=e[c],s===null?e[c]=[t]:s.push(t),t.lane=n|536870912),f):null}function Mi(e){if(50<Gr)throw Gr=0,Cc=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ws={};function $m(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(e,t,n,s){return new $m(e,t,n,s)}function _l(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gn(e,t){var n=e.alternate;return n===null?(n=cn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Bu(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Bi(e,t,n,s,c,f){var y=0;if(s=e,typeof e=="function")_l(e)&&(y=1);else if(typeof e=="string")y=Hx(e,n,we.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ye:return e=cn(31,n,t,c),e.elementType=ye,e.lanes=f,e;case C:return Ga(n.children,c,f,t);case N:y=8,c|=24;break;case A:return e=cn(12,n,t,c|2),e.elementType=A,e.lanes=f,e;case G:return e=cn(13,n,t,c),e.elementType=G,e.lanes=f,e;case re:return e=cn(19,n,t,c),e.elementType=re,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:case U:y=10;break e;case E:y=9;break e;case Z:y=11;break e;case de:y=14;break e;case ve:y=16,s=null;break e}y=29,n=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=cn(y,n,t,c),t.elementType=e,t.type=s,t.lanes=f,t}function Ga(e,t,n,s){return e=cn(7,e,s,t),e.lanes=n,e}function Sl(e,t,n){return e=cn(6,e,null,t),e.lanes=n,e}function wl(e,t,n){return t=cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var js=[],ks=0,Oi=null,Li=0,vn=[],_n=0,Va=null,Vn=1,Xn="";function Xa(e,t){js[ks++]=Li,js[ks++]=Oi,Oi=e,Li=t}function Ou(e,t,n){vn[_n++]=Vn,vn[_n++]=Xn,vn[_n++]=Va,Va=e;var s=Vn;e=Xn;var c=32-Pe(s)-1;s&=~(1<<c),n+=1;var f=32-Pe(t)+c;if(30<f){var y=c-c%5;f=(s&(1<<y)-1).toString(32),s>>=y,c-=y,Vn=1<<32-Pe(t)+c|n<<c|s,Xn=f+e}else Vn=1<<f|n<<c|s,Xn=e}function jl(e){e.return!==null&&(Xa(e,1),Ou(e,1,0))}function kl(e){for(;e===Oi;)Oi=js[--ks],js[ks]=null,Li=js[--ks],js[ks]=null;for(;e===Va;)Va=vn[--_n],vn[_n]=null,Xn=vn[--_n],vn[_n]=null,Vn=vn[--_n],vn[_n]=null}var en=null,Tt=null,tt=!1,Ka=null,Ln=!1,Cl=Error(o(519));function Qa(e){var t=Error(o(418,""));throw kr(yn(t,e)),Cl}function Lu(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[$t]=e,t[Kt]=s,n){case"dialog":Xe("cancel",t),Xe("close",t);break;case"iframe":case"object":case"embed":Xe("load",t);break;case"video":case"audio":for(n=0;n<Xr.length;n++)Xe(Xr[n],t);break;case"source":Xe("error",t);break;case"img":case"image":case"link":Xe("error",t),Xe("load",t);break;case"details":Xe("toggle",t);break;case"input":Xe("invalid",t),Zd(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),ga(t);break;case"select":Xe("invalid",t);break;case"textarea":Xe("invalid",t),eu(t,s.value,s.defaultValue,s.children),ga(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||tp(t.textContent,n)?(s.popover!=null&&(Xe("beforetoggle",t),Xe("toggle",t)),s.onScroll!=null&&Xe("scroll",t),s.onScrollEnd!=null&&Xe("scrollend",t),s.onClick!=null&&(t.onclick=yo),t=!0):t=!1,t||Qa(e)}function Iu(e){for(en=e.return;en;)switch(en.tag){case 5:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:en=en.return}}function wr(e){if(e!==en)return!1;if(!tt)return Iu(e),tt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Pc(e.type,e.memoizedProps)),n=!n),n&&Tt&&Qa(e),Iu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Tt=En(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Tt=null}}else t===27?(t=Tt,Da(e.type)?(e=Yc,Yc=null,Tt=e):Tt=t):Tt=en?En(e.stateNode.nextSibling):null;return!0}function jr(){Tt=en=null,tt=!1}function Uu(){var e=Ka;return e!==null&&(rn===null?rn=e:rn.push.apply(rn,e),Ka=null),e}function kr(e){Ka===null?Ka=[e]:Ka.push(e)}var Tl=K(null),Za=null,Kn=null;function xa(e,t,n){ue(Tl,t._currentValue),t._currentValue=n}function Qn(e){e._currentValue=Tl.current,ce(Tl)}function El(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Rl(e,t,n,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var y=c.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=c;for(var D=0;D<t.length;D++)if(b.context===t[D]){f.lanes|=n,b=f.alternate,b!==null&&(b.lanes|=n),El(f.return,n,e),s||(y=null);break e}f=b.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(o(341));y.lanes|=n,f=y.alternate,f!==null&&(f.lanes|=n),El(y,n,e),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===e){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function Cr(e,t,n,s){e=null;for(var c=t,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(o(387));if(y=y.memoizedProps,y!==null){var b=c.type;ln(c.pendingProps.value,y.value)||(e!==null?e.push(b):e=[b])}}else if(c===oe.current){if(y=c.alternate,y===null)throw Error(o(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(ti):e=[ti])}c=c.return}e!==null&&Rl(t,e,n,s),t.flags|=262144}function Ii(e){for(e=e.firstContext;e!==null;){if(!ln(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ja(e){Za=e,Kn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Zt(e){return qu(Za,e)}function Ui(e,t){return Za===null&&Ja(e),qu(e,t)}function qu(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Kn===null){if(e===null)throw Error(o(308));Kn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Kn=Kn.next=t;return n}var Pm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Hm=l.unstable_scheduleCallback,Wm=l.unstable_NormalPriority,Ot={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nl(){return{controller:new Pm,data:new Map,refCount:0}}function Tr(e){e.refCount--,e.refCount===0&&Hm(Wm,function(){e.controller.abort()})}var Er=null,zl=0,Cs=0,Ts=null;function Fm(e,t){if(Er===null){var n=Er=[];zl=0,Cs=Ac(),Ts={status:"pending",value:void 0,then:function(s){n.push(s)}}}return zl++,t.then($u,$u),t}function $u(){if(--zl===0&&Er!==null){Ts!==null&&(Ts.status="fulfilled");var e=Er;Er=null,Cs=0,Ts=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ym(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(s.status="rejected",s.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),s}var Pu=I.S;I.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Fm(e,t),Pu!==null&&Pu(e,t)};var es=K(null);function Dl(){var e=es.current;return e!==null?e:ht.pooledCache}function qi(e,t){t===null?ue(es,es.current):ue(es,t.pool)}function Hu(){var e=Dl();return e===null?null:{parent:Ot._currentValue,pool:e}}var Rr=Error(o(460)),Wu=Error(o(474)),$i=Error(o(542)),Al={then:function(){}};function Fu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Pi(){}function Yu(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Pi,Pi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vu(e),e;default:if(typeof t.status=="string")t.then(Pi,Pi);else{if(e=ht,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=s}},function(s){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vu(e),e}throw Nr=t,Rr}}var Nr=null;function Gu(){if(Nr===null)throw Error(o(459));var e=Nr;return Nr=null,e}function Vu(e){if(e===Rr||e===$i)throw Error(o(483))}var ya=!1;function Ml(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function va(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(st&2)!==0){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,t=Mi(e),Mu(e,null,n),t}return Ai(e,s,t,n),Mi(e)}function zr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,vi(e,n)}}function Ol(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var c=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var y={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?c=f=y:f=f.next=y,n=n.next}while(n!==null);f===null?c=f=t:f=f.next=t}else c=f=t;n={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ll=!1;function Dr(){if(Ll){var e=Ts;if(e!==null)throw e}}function Ar(e,t,n,s){Ll=!1;var c=e.updateQueue;ya=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var D=b,Y=D.next;D.next=null,y===null?f=Y:y.next=Y,y=D;var te=e.alternate;te!==null&&(te=te.updateQueue,b=te.lastBaseUpdate,b!==y&&(b===null?te.firstBaseUpdate=Y:b.next=Y,te.lastBaseUpdate=D))}if(f!==null){var ie=c.baseState;y=0,te=Y=D=null,b=f;do{var V=b.lane&-536870913,X=V!==b.lane;if(X?(Qe&V)===V:(s&V)===V){V!==0&&V===Cs&&(Ll=!0),te!==null&&(te=te.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ie=e,Me=b;V=t;var ct=n;switch(Me.tag){case 1:if(Ie=Me.payload,typeof Ie=="function"){ie=Ie.call(ct,ie,V);break e}ie=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Me.payload,V=typeof Ie=="function"?Ie.call(ct,ie,V):Ie,V==null)break e;ie=x({},ie,V);break e;case 2:ya=!0}}V=b.callback,V!==null&&(e.flags|=64,X&&(e.flags|=8192),X=c.callbacks,X===null?c.callbacks=[V]:X.push(V))}else X={lane:V,tag:b.tag,payload:b.payload,callback:b.callback,next:null},te===null?(Y=te=X,D=ie):te=te.next=X,y|=V;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;X=b,b=X.next,X.next=null,c.lastBaseUpdate=X,c.shared.pending=null}}while(!0);te===null&&(D=ie),c.baseState=D,c.firstBaseUpdate=Y,c.lastBaseUpdate=te,f===null&&(c.shared.lanes=0),Ea|=y,e.lanes=y,e.memoizedState=ie}}function Xu(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Ku(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Xu(n[e],t)}var Es=K(null),Hi=K(0);function Qu(e,t){e=sa,ue(Hi,e),ue(Es,t),sa=e|t.baseLanes}function Il(){ue(Hi,sa),ue(Es,Es.current)}function Ul(){sa=Hi.current,ce(Es),ce(Hi)}var _a=0,Fe=null,ot=null,Mt=null,Wi=!1,Rs=!1,ts=!1,Fi=0,Mr=0,Ns=null,Gm=0;function Nt(){throw Error(o(321))}function ql(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ln(e[n],t[n]))return!1;return!0}function $l(e,t,n,s,c,f){return _a=f,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=e===null||e.memoizedState===null?Bf:Of,ts=!1,f=n(s,c),ts=!1,Rs&&(f=Ju(t,n,s,c)),Zu(e),f}function Zu(e){I.H=Qi;var t=ot!==null&&ot.next!==null;if(_a=0,Mt=ot=Fe=null,Wi=!1,Mr=0,Ns=null,t)throw Error(o(300));e===null||Pt||(e=e.dependencies,e!==null&&Ii(e)&&(Pt=!0))}function Ju(e,t,n,s){Fe=e;var c=0;do{if(Rs&&(Ns=null),Mr=0,Rs=!1,25<=c)throw Error(o(301));if(c+=1,Mt=ot=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}I.H=ex,f=t(n,s)}while(Rs);return f}function Vm(){var e=I.H,t=e.useState()[0];return t=typeof t.then=="function"?Br(t):t,e=e.useState()[0],(ot!==null?ot.memoizedState:null)!==e&&(Fe.flags|=1024),t}function Pl(){var e=Fi!==0;return Fi=0,e}function Hl(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Wl(e){if(Wi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Wi=!1}_a=0,Mt=ot=Fe=null,Rs=!1,Mr=Fi=0,Ns=null}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Fe.memoizedState=Mt=e:Mt=Mt.next=e,Mt}function Bt(){if(ot===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=Mt===null?Fe.memoizedState:Mt.next;if(t!==null)Mt=t,ot=e;else{if(e===null)throw Fe.alternate===null?Error(o(467)):Error(o(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Mt===null?Fe.memoizedState=Mt=e:Mt=Mt.next=e}return Mt}function Fl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Br(e){var t=Mr;return Mr+=1,Ns===null&&(Ns=[]),e=Yu(Ns,e,t),t=Fe,(Mt===null?t.memoizedState:Mt.next)===null&&(t=t.alternate,I.H=t===null||t.memoizedState===null?Bf:Of),e}function Yi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Br(e);if(e.$$typeof===U)return Zt(e)}throw Error(o(438,String(e)))}function Yl(e){var t=null,n=Fe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=Fe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Fl(),Fe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=Ae;return t.index++,n}function Zn(e,t){return typeof t=="function"?t(e):t}function Gi(e){var t=Bt();return Gl(t,ot,e)}function Gl(e,t,n){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=n;var c=e.baseQueue,f=s.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}t.baseQueue=c=f,s.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{t=c.next;var b=y=null,D=null,Y=t,te=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(Qe&ie)===ie:(_a&ie)===ie){var V=Y.revertLane;if(V===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===Cs&&(te=!0);else if((_a&V)===V){Y=Y.next,V===Cs&&(te=!0);continue}else ie={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},D===null?(b=D=ie,y=f):D=D.next=ie,Fe.lanes|=V,Ea|=V;ie=Y.action,ts&&n(f,ie),f=Y.hasEagerState?Y.eagerState:n(f,ie)}else V={lane:ie,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},D===null?(b=D=V,y=f):D=D.next=V,Fe.lanes|=ie,Ea|=ie;Y=Y.next}while(Y!==null&&Y!==t);if(D===null?y=f:D.next=b,!ln(f,e.memoizedState)&&(Pt=!0,te&&(n=Ts,n!==null)))throw n;e.memoizedState=f,e.baseState=y,e.baseQueue=D,s.lastRenderedState=f}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Vl(e){var t=Bt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var s=n.dispatch,c=n.pending,f=t.memoizedState;if(c!==null){n.pending=null;var y=c=c.next;do f=e(f,y.action),y=y.next;while(y!==c);ln(f,t.memoizedState)||(Pt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,s]}function ef(e,t,n){var s=Fe,c=Bt(),f=tt;if(f){if(n===void 0)throw Error(o(407));n=n()}else n=t();var y=!ln((ot||c).memoizedState,n);y&&(c.memoizedState=n,Pt=!0),c=c.queue;var b=af.bind(null,s,c,e);if(Or(2048,8,b,[e]),c.getSnapshot!==t||y||Mt!==null&&Mt.memoizedState.tag&1){if(s.flags|=2048,zs(9,Vi(),nf.bind(null,s,c,n,t),null),ht===null)throw Error(o(349));f||(_a&124)!==0||tf(s,t,n)}return n}function tf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t=Fl(),Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nf(e,t,n,s){t.value=n,t.getSnapshot=s,sf(t)&&rf(e)}function af(e,t,n){return n(function(){sf(t)&&rf(e)})}function sf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ln(e,n)}catch{return!0}}function rf(e){var t=Ss(e,2);t!==null&&pn(t,e,2)}function Xl(e){var t=an();if(typeof e=="function"){var n=e;if(e=n(),ts){_e(!0);try{n()}finally{_e(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:e},t}function of(e,t,n,s){return e.baseState=n,Gl(e,ot,typeof s=="function"?s:Zn)}function Xm(e,t,n,s,c){if(Ki(e))throw Error(o(485));if(e=t.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};I.T!==null?n(!0):f.isTransition=!1,s(f),n=t.pending,n===null?(f.next=t.pending=f,lf(t,f)):(f.next=n.next,t.pending=n.next=f)}}function lf(e,t){var n=t.action,s=t.payload,c=e.state;if(t.isTransition){var f=I.T,y={};I.T=y;try{var b=n(c,s),D=I.S;D!==null&&D(y,b),cf(e,t,b)}catch(Y){Kl(e,t,Y)}finally{I.T=f}}else try{f=n(c,s),cf(e,t,f)}catch(Y){Kl(e,t,Y)}}function cf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){df(e,t,s)},function(s){return Kl(e,t,s)}):df(e,t,n)}function df(e,t,n){t.status="fulfilled",t.value=n,uf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,lf(e,n)))}function Kl(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,uf(t),t=t.next;while(t!==s)}e.action=null}function uf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ff(e,t){return t}function hf(e,t){if(tt){var n=ht.formState;if(n!==null){e:{var s=Fe;if(tt){if(Tt){t:{for(var c=Tt,f=Ln;c.nodeType!==8;){if(!f){c=null;break t}if(c=En(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){Tt=En(c.nextSibling),s=c.data==="F!";break e}}Qa(s)}s=!1}s&&(t=n[0])}}return n=an(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ff,lastRenderedState:t},n.queue=s,n=Df.bind(null,Fe,s),s.dispatch=n,s=Xl(!1),f=tc.bind(null,Fe,!1,s.queue),s=an(),c={state:t,dispatch:null,action:e,pending:null},s.queue=c,n=Xm.bind(null,Fe,c,f,n),c.dispatch=n,s.memoizedState=e,[t,n,!1]}function pf(e){var t=Bt();return gf(t,ot,e)}function gf(e,t,n){if(t=Gl(e,t,ff)[0],e=Gi(Zn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Br(t)}catch(y){throw y===Rr?$i:y}else s=t;t=Bt();var c=t.queue,f=c.dispatch;return n!==t.memoizedState&&(Fe.flags|=2048,zs(9,Vi(),Km.bind(null,c,n),null)),[s,f,e]}function Km(e,t){e.action=t}function mf(e){var t=Bt(),n=ot;if(n!==null)return gf(t,n,e);Bt(),t=t.memoizedState,n=Bt();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function zs(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},t=Fe.updateQueue,t===null&&(t=Fl(),Fe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Vi(){return{destroy:void 0,resource:void 0}}function xf(){return Bt().memoizedState}function Xi(e,t,n,s){var c=an();s=s===void 0?null:s,Fe.flags|=e,c.memoizedState=zs(1|t,Vi(),n,s)}function Or(e,t,n,s){var c=Bt();s=s===void 0?null:s;var f=c.memoizedState.inst;ot!==null&&s!==null&&ql(s,ot.memoizedState.deps)?c.memoizedState=zs(t,f,n,s):(Fe.flags|=e,c.memoizedState=zs(1|t,f,n,s))}function yf(e,t){Xi(8390656,8,e,t)}function bf(e,t){Or(2048,8,e,t)}function vf(e,t){return Or(4,2,e,t)}function _f(e,t){return Or(4,4,e,t)}function Sf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wf(e,t,n){n=n!=null?n.concat([e]):null,Or(4,4,Sf.bind(null,t,e),n)}function Ql(){}function jf(e,t){var n=Bt();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&ql(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function kf(e,t){var n=Bt();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&ql(t,s[1]))return s[0];if(s=e(),ts){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[s,t],s}function Zl(e,t,n){return n===void 0||(_a&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=Eh(),Fe.lanes|=e,Ea|=e,n)}function Cf(e,t,n,s){return ln(n,t)?n:Es.current!==null?(e=Zl(e,n,s),ln(e,t)||(Pt=!0),e):(_a&42)===0?(Pt=!0,e.memoizedState=n):(e=Eh(),Fe.lanes|=e,Ea|=e,t)}function Tf(e,t,n,s,c){var f=J.p;J.p=f!==0&&8>f?f:8;var y=I.T,b={};I.T=b,tc(e,!1,t,n);try{var D=c(),Y=I.S;if(Y!==null&&Y(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var te=Ym(D,s);Lr(e,t,te,hn(e))}else Lr(e,t,s,hn(e))}catch(ie){Lr(e,t,{then:function(){},status:"rejected",reason:ie},hn())}finally{J.p=f,I.T=y}}function Qm(){}function Jl(e,t,n,s){if(e.tag!==5)throw Error(o(476));var c=Ef(e).queue;Tf(e,c,t,fe,n===null?Qm:function(){return Rf(e),n(s)})}function Ef(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:fe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Rf(e){var t=Ef(e).next.queue;Lr(e,t,{},hn())}function ec(){return Zt(ti)}function Nf(){return Bt().memoizedState}function zf(){return Bt().memoizedState}function Zm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=hn();e=ba(n);var s=va(t,e,n);s!==null&&(pn(s,t,n),zr(s,t,n)),t={cache:Nl()},e.payload=t;return}t=t.return}}function Jm(e,t,n){var s=hn();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ki(e)?Af(t,n):(n=vl(e,t,n,s),n!==null&&(pn(n,e,s),Mf(n,t,s)))}function Df(e,t,n){var s=hn();Lr(e,t,n,s)}function Lr(e,t,n,s){var c={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ki(e))Af(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,b=f(y,n);if(c.hasEagerState=!0,c.eagerState=b,ln(b,y))return Ai(e,t,c,0),ht===null&&Di(),!1}catch{}finally{}if(n=vl(e,t,c,s),n!==null)return pn(n,e,s),Mf(n,t,s),!0}return!1}function tc(e,t,n,s){if(s={lane:2,revertLane:Ac(),action:s,hasEagerState:!1,eagerState:null,next:null},Ki(e)){if(t)throw Error(o(479))}else t=vl(e,n,s,2),t!==null&&pn(t,e,2)}function Ki(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function Af(e,t){Rs=Wi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Mf(e,t,n){if((n&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,vi(e,n)}}var Qi={readContext:Zt,use:Yi,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt},Bf={readContext:Zt,use:Yi,useCallback:function(e,t){return an().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:yf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Xi(4194308,4,Sf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xi(4194308,4,e,t)},useInsertionEffect:function(e,t){Xi(4,2,e,t)},useMemo:function(e,t){var n=an();t=t===void 0?null:t;var s=e();if(ts){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=an();if(n!==void 0){var c=n(t);if(ts){_e(!0);try{n(t)}finally{_e(!1)}}}else c=t;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=Jm.bind(null,Fe,e),[s.memoizedState,e]},useRef:function(e){var t=an();return e={current:e},t.memoizedState=e},useState:function(e){e=Xl(e);var t=e.queue,n=Df.bind(null,Fe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ql,useDeferredValue:function(e,t){var n=an();return Zl(n,e,t)},useTransition:function(){var e=Xl(!1);return e=Tf.bind(null,Fe,e.queue,!0,!1),an().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=Fe,c=an();if(tt){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),ht===null)throw Error(o(349));(Qe&124)!==0||tf(s,t,n)}c.memoizedState=n;var f={value:n,getSnapshot:t};return c.queue=f,yf(af.bind(null,s,f,e),[e]),s.flags|=2048,zs(9,Vi(),nf.bind(null,s,f,n,t),null),n},useId:function(){var e=an(),t=ht.identifierPrefix;if(tt){var n=Xn,s=Vn;n=(s&~(1<<32-Pe(s)-1)).toString(32)+n,t="«"+t+"R"+n,n=Fi++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=Gm++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:ec,useFormState:hf,useActionState:hf,useOptimistic:function(e){var t=an();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=tc.bind(null,Fe,!0,n),n.dispatch=t,[e,t]},useMemoCache:Yl,useCacheRefresh:function(){return an().memoizedState=Zm.bind(null,Fe)}},Of={readContext:Zt,use:Yi,useCallback:jf,useContext:Zt,useEffect:bf,useImperativeHandle:wf,useInsertionEffect:vf,useLayoutEffect:_f,useMemo:kf,useReducer:Gi,useRef:xf,useState:function(){return Gi(Zn)},useDebugValue:Ql,useDeferredValue:function(e,t){var n=Bt();return Cf(n,ot.memoizedState,e,t)},useTransition:function(){var e=Gi(Zn)[0],t=Bt().memoizedState;return[typeof e=="boolean"?e:Br(e),t]},useSyncExternalStore:ef,useId:Nf,useHostTransitionStatus:ec,useFormState:pf,useActionState:pf,useOptimistic:function(e,t){var n=Bt();return of(n,ot,e,t)},useMemoCache:Yl,useCacheRefresh:zf},ex={readContext:Zt,use:Yi,useCallback:jf,useContext:Zt,useEffect:bf,useImperativeHandle:wf,useInsertionEffect:vf,useLayoutEffect:_f,useMemo:kf,useReducer:Vl,useRef:xf,useState:function(){return Vl(Zn)},useDebugValue:Ql,useDeferredValue:function(e,t){var n=Bt();return ot===null?Zl(n,e,t):Cf(n,ot.memoizedState,e,t)},useTransition:function(){var e=Vl(Zn)[0],t=Bt().memoizedState;return[typeof e=="boolean"?e:Br(e),t]},useSyncExternalStore:ef,useId:Nf,useHostTransitionStatus:ec,useFormState:mf,useActionState:mf,useOptimistic:function(e,t){var n=Bt();return ot!==null?of(n,ot,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Yl,useCacheRefresh:zf},Ds=null,Ir=0;function Zi(e){var t=Ir;return Ir+=1,Ds===null&&(Ds=[]),Yu(Ds,e,t)}function Ur(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ji(e,t){throw t.$$typeof===S?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Lf(e){var t=e._init;return t(e._payload)}function If(e){function t($,L){if(e){var F=$.deletions;F===null?($.deletions=[L],$.flags|=16):F.push(L)}}function n($,L){if(!e)return null;for(;L!==null;)t($,L),L=L.sibling;return null}function s($){for(var L=new Map;$!==null;)$.key!==null?L.set($.key,$):L.set($.index,$),$=$.sibling;return L}function c($,L){return $=Gn($,L),$.index=0,$.sibling=null,$}function f($,L,F){return $.index=F,e?(F=$.alternate,F!==null?(F=F.index,F<L?($.flags|=67108866,L):F):($.flags|=67108866,L)):($.flags|=1048576,L)}function y($){return e&&$.alternate===null&&($.flags|=67108866),$}function b($,L,F,ne){return L===null||L.tag!==6?(L=Sl(F,$.mode,ne),L.return=$,L):(L=c(L,F),L.return=$,L)}function D($,L,F,ne){var Ce=F.type;return Ce===C?te($,L,F.props.children,ne,F.key):L!==null&&(L.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ve&&Lf(Ce)===L.type)?(L=c(L,F.props),Ur(L,F),L.return=$,L):(L=Bi(F.type,F.key,F.props,null,$.mode,ne),Ur(L,F),L.return=$,L)}function Y($,L,F,ne){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=wl(F,$.mode,ne),L.return=$,L):(L=c(L,F.children||[]),L.return=$,L)}function te($,L,F,ne,Ce){return L===null||L.tag!==7?(L=Ga(F,$.mode,ne,Ce),L.return=$,L):(L=c(L,F),L.return=$,L)}function ie($,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Sl(""+L,$.mode,F),L.return=$,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case k:return F=Bi(L.type,L.key,L.props,null,$.mode,F),Ur(F,L),F.return=$,F;case j:return L=wl(L,$.mode,F),L.return=$,L;case ve:var ne=L._init;return L=ne(L._payload),ie($,L,F)}if(he(L)||q(L))return L=Ga(L,$.mode,F,null),L.return=$,L;if(typeof L.then=="function")return ie($,Zi(L),F);if(L.$$typeof===U)return ie($,Ui($,L),F);Ji($,L)}return null}function V($,L,F,ne){var Ce=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ce!==null?null:b($,L,""+F,ne);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case k:return F.key===Ce?D($,L,F,ne):null;case j:return F.key===Ce?Y($,L,F,ne):null;case ve:return Ce=F._init,F=Ce(F._payload),V($,L,F,ne)}if(he(F)||q(F))return Ce!==null?null:te($,L,F,ne,null);if(typeof F.then=="function")return V($,L,Zi(F),ne);if(F.$$typeof===U)return V($,L,Ui($,F),ne);Ji($,F)}return null}function X($,L,F,ne,Ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return $=$.get(F)||null,b(L,$,""+ne,Ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:return $=$.get(ne.key===null?F:ne.key)||null,D(L,$,ne,Ce);case j:return $=$.get(ne.key===null?F:ne.key)||null,Y(L,$,ne,Ce);case ve:var Ge=ne._init;return ne=Ge(ne._payload),X($,L,F,ne,Ce)}if(he(ne)||q(ne))return $=$.get(F)||null,te(L,$,ne,Ce,null);if(typeof ne.then=="function")return X($,L,F,Zi(ne),Ce);if(ne.$$typeof===U)return X($,L,F,Ui(L,ne),Ce);Ji(L,ne)}return null}function Ie($,L,F,ne){for(var Ce=null,Ge=null,De=L,Oe=L=0,Wt=null;De!==null&&Oe<F.length;Oe++){De.index>Oe?(Wt=De,De=null):Wt=De.sibling;var Je=V($,De,F[Oe],ne);if(Je===null){De===null&&(De=Wt);break}e&&De&&Je.alternate===null&&t($,De),L=f(Je,L,Oe),Ge===null?Ce=Je:Ge.sibling=Je,Ge=Je,De=Wt}if(Oe===F.length)return n($,De),tt&&Xa($,Oe),Ce;if(De===null){for(;Oe<F.length;Oe++)De=ie($,F[Oe],ne),De!==null&&(L=f(De,L,Oe),Ge===null?Ce=De:Ge.sibling=De,Ge=De);return tt&&Xa($,Oe),Ce}for(De=s(De);Oe<F.length;Oe++)Wt=X(De,$,Oe,F[Oe],ne),Wt!==null&&(e&&Wt.alternate!==null&&De.delete(Wt.key===null?Oe:Wt.key),L=f(Wt,L,Oe),Ge===null?Ce=Wt:Ge.sibling=Wt,Ge=Wt);return e&&De.forEach(function(La){return t($,La)}),tt&&Xa($,Oe),Ce}function Me($,L,F,ne){if(F==null)throw Error(o(151));for(var Ce=null,Ge=null,De=L,Oe=L=0,Wt=null,Je=F.next();De!==null&&!Je.done;Oe++,Je=F.next()){De.index>Oe?(Wt=De,De=null):Wt=De.sibling;var La=V($,De,Je.value,ne);if(La===null){De===null&&(De=Wt);break}e&&De&&La.alternate===null&&t($,De),L=f(La,L,Oe),Ge===null?Ce=La:Ge.sibling=La,Ge=La,De=Wt}if(Je.done)return n($,De),tt&&Xa($,Oe),Ce;if(De===null){for(;!Je.done;Oe++,Je=F.next())Je=ie($,Je.value,ne),Je!==null&&(L=f(Je,L,Oe),Ge===null?Ce=Je:Ge.sibling=Je,Ge=Je);return tt&&Xa($,Oe),Ce}for(De=s(De);!Je.done;Oe++,Je=F.next())Je=X(De,$,Oe,Je.value,ne),Je!==null&&(e&&Je.alternate!==null&&De.delete(Je.key===null?Oe:Je.key),L=f(Je,L,Oe),Ge===null?Ce=Je:Ge.sibling=Je,Ge=Je);return e&&De.forEach(function(ty){return t($,ty)}),tt&&Xa($,Oe),Ce}function ct($,L,F,ne){if(typeof F=="object"&&F!==null&&F.type===C&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case k:e:{for(var Ce=F.key;L!==null;){if(L.key===Ce){if(Ce=F.type,Ce===C){if(L.tag===7){n($,L.sibling),ne=c(L,F.props.children),ne.return=$,$=ne;break e}}else if(L.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ve&&Lf(Ce)===L.type){n($,L.sibling),ne=c(L,F.props),Ur(ne,F),ne.return=$,$=ne;break e}n($,L);break}else t($,L);L=L.sibling}F.type===C?(ne=Ga(F.props.children,$.mode,ne,F.key),ne.return=$,$=ne):(ne=Bi(F.type,F.key,F.props,null,$.mode,ne),Ur(ne,F),ne.return=$,$=ne)}return y($);case j:e:{for(Ce=F.key;L!==null;){if(L.key===Ce)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){n($,L.sibling),ne=c(L,F.children||[]),ne.return=$,$=ne;break e}else{n($,L);break}else t($,L);L=L.sibling}ne=wl(F,$.mode,ne),ne.return=$,$=ne}return y($);case ve:return Ce=F._init,F=Ce(F._payload),ct($,L,F,ne)}if(he(F))return Ie($,L,F,ne);if(q(F)){if(Ce=q(F),typeof Ce!="function")throw Error(o(150));return F=Ce.call(F),Me($,L,F,ne)}if(typeof F.then=="function")return ct($,L,Zi(F),ne);if(F.$$typeof===U)return ct($,L,Ui($,F),ne);Ji($,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(n($,L.sibling),ne=c(L,F),ne.return=$,$=ne):(n($,L),ne=Sl(F,$.mode,ne),ne.return=$,$=ne),y($)):n($,L)}return function($,L,F,ne){try{Ir=0;var Ce=ct($,L,F,ne);return Ds=null,Ce}catch(De){if(De===Rr||De===$i)throw De;var Ge=cn(29,De,null,$.mode);return Ge.lanes=ne,Ge.return=$,Ge}finally{}}}var As=If(!0),Uf=If(!1),Sn=K(null),In=null;function Sa(e){var t=e.alternate;ue(Lt,Lt.current&1),ue(Sn,e),In===null&&(t===null||Es.current!==null||t.memoizedState!==null)&&(In=e)}function qf(e){if(e.tag===22){if(ue(Lt,Lt.current),ue(Sn,e),In===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(In=e)}}else wa()}function wa(){ue(Lt,Lt.current),ue(Sn,Sn.current)}function Jn(e){ce(Sn),In===e&&(In=null),ce(Lt)}var Lt=K(0);function eo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Fc(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function nc(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ac={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=hn(),c=ba(s);c.payload=t,n!=null&&(c.callback=n),t=va(e,c,s),t!==null&&(pn(t,e,s),zr(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=hn(),c=ba(s);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=va(e,c,s),t!==null&&(pn(t,e,s),zr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hn(),s=ba(n);s.tag=2,t!=null&&(s.callback=t),t=va(e,s,n),t!==null&&(pn(t,e,n),zr(t,e,n))}};function $f(e,t,n,s,c,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,f,y):t.prototype&&t.prototype.isPureReactComponent?!_r(n,s)||!_r(c,f):!0}function Pf(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&ac.enqueueReplaceState(t,t.state,null)}function ns(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}var to=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Hf(e){to(e)}function Wf(e){console.error(e)}function Ff(e){to(e)}function no(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Yf(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function sc(e,t,n){return n=ba(n),n.tag=3,n.payload={element:null},n.callback=function(){no(e,t)},n}function Gf(e){return e=ba(e),e.tag=3,e}function Vf(e,t,n,s){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;e.payload=function(){return c(f)},e.callback=function(){Yf(t,n,s)}}var y=n.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Yf(t,n,s),typeof c!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})})}function tx(e,t,n,s,c){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&Cr(t,n,c,!0),n=Sn.current,n!==null){switch(n.tag){case 13:return In===null?Ec():n.alternate===null&&Et===0&&(Et=3),n.flags&=-257,n.flags|=65536,n.lanes=c,s===Al?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),Nc(e,s,c)),!1;case 22:return n.flags|=65536,s===Al?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),Nc(e,s,c)),!1}throw Error(o(435,n.tag))}return Nc(e,s,c),Ec(),!1}if(tt)return t=Sn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,s!==Cl&&(e=Error(o(422),{cause:s}),kr(yn(e,n)))):(s!==Cl&&(t=Error(o(423),{cause:s}),kr(yn(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=yn(s,n),c=sc(e.stateNode,s,c),Ol(e,c),Et!==4&&(Et=2)),!1;var f=Error(o(520),{cause:s});if(f=yn(f,n),Yr===null?Yr=[f]:Yr.push(f),Et!==4&&(Et=2),t===null)return!0;s=yn(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=sc(n.stateNode,s,e),Ol(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ra===null||!Ra.has(f))))return n.flags|=65536,c&=-c,n.lanes|=c,c=Gf(c),Vf(c,e,n,s),Ol(n,c),!1}n=n.return}while(n!==null);return!1}var Xf=Error(o(461)),Pt=!1;function Yt(e,t,n,s){t.child=e===null?Uf(t,null,n,s):As(t,e.child,n,s)}function Kf(e,t,n,s,c){n=n.render;var f=t.ref;if("ref"in s){var y={};for(var b in s)b!=="ref"&&(y[b]=s[b])}else y=s;return Ja(t),s=$l(e,t,n,y,f,c),b=Pl(),e!==null&&!Pt?(Hl(e,t,c),ea(e,t,c)):(tt&&b&&jl(t),t.flags|=1,Yt(e,t,s,c),t.child)}function Qf(e,t,n,s,c){if(e===null){var f=n.type;return typeof f=="function"&&!_l(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,Zf(e,t,f,s,c)):(e=Bi(n.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!fc(e,c)){var y=f.memoizedProps;if(n=n.compare,n=n!==null?n:_r,n(y,s)&&e.ref===t.ref)return ea(e,t,c)}return t.flags|=1,e=Gn(f,s),e.ref=t.ref,e.return=t,t.child=e}function Zf(e,t,n,s,c){if(e!==null){var f=e.memoizedProps;if(_r(f,s)&&e.ref===t.ref)if(Pt=!1,t.pendingProps=s=f,fc(e,c))(e.flags&131072)!==0&&(Pt=!0);else return t.lanes=e.lanes,ea(e,t,c)}return rc(e,t,n,s,c)}function Jf(e,t,n){var s=t.pendingProps,c=s.children,f=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((t.flags&128)!==0){if(s=f!==null?f.baseLanes|n:n,e!==null){for(c=t.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;t.childLanes=f&~s}else t.childLanes=0,t.child=null;return eh(e,t,s,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&qi(t,f!==null?f.cachePool:null),f!==null?Qu(t,f):Il(),qf(t);else return t.lanes=t.childLanes=536870912,eh(e,t,f!==null?f.baseLanes|n:n,n)}else f!==null?(qi(t,f.cachePool),Qu(t,f),wa(),t.memoizedState=null):(e!==null&&qi(t,null),Il(),wa());return Yt(e,t,c,n),t.child}function eh(e,t,n,s){var c=Dl();return c=c===null?null:{parent:Ot._currentValue,pool:c},t.memoizedState={baseLanes:n,cachePool:c},e!==null&&qi(t,null),Il(),qf(t),e!==null&&Cr(e,t,s,!0),null}function ao(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function rc(e,t,n,s,c){return Ja(t),n=$l(e,t,n,s,void 0,c),s=Pl(),e!==null&&!Pt?(Hl(e,t,c),ea(e,t,c)):(tt&&s&&jl(t),t.flags|=1,Yt(e,t,n,c),t.child)}function th(e,t,n,s,c,f){return Ja(t),t.updateQueue=null,n=Ju(t,s,n,c),Zu(e),s=Pl(),e!==null&&!Pt?(Hl(e,t,f),ea(e,t,f)):(tt&&s&&jl(t),t.flags|=1,Yt(e,t,n,f),t.child)}function nh(e,t,n,s,c){if(Ja(t),t.stateNode===null){var f=ws,y=n.contextType;typeof y=="object"&&y!==null&&(f=Zt(y)),f=new n(s,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ac,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=s,f.state=t.memoizedState,f.refs={},Ml(t),y=n.contextType,f.context=typeof y=="object"&&y!==null?Zt(y):ws,f.state=t.memoizedState,y=n.getDerivedStateFromProps,typeof y=="function"&&(nc(t,n,y,s),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&ac.enqueueReplaceState(f,f.state,null),Ar(t,s,f,c),Dr(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){f=t.stateNode;var b=t.memoizedProps,D=ns(n,b);f.props=D;var Y=f.context,te=n.contextType;y=ws,typeof te=="object"&&te!==null&&(y=Zt(te));var ie=n.getDerivedStateFromProps;te=typeof ie=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,te||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||Y!==y)&&Pf(t,f,s,y),ya=!1;var V=t.memoizedState;f.state=V,Ar(t,s,f,c),Dr(),Y=t.memoizedState,b||V!==Y||ya?(typeof ie=="function"&&(nc(t,n,ie,s),Y=t.memoizedState),(D=ya||$f(t,n,D,s,V,Y,y))?(te||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=Y),f.props=s,f.state=Y,f.context=y,s=D):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{f=t.stateNode,Bl(e,t),y=t.memoizedProps,te=ns(n,y),f.props=te,ie=t.pendingProps,V=f.context,Y=n.contextType,D=ws,typeof Y=="object"&&Y!==null&&(D=Zt(Y)),b=n.getDerivedStateFromProps,(Y=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==ie||V!==D)&&Pf(t,f,s,D),ya=!1,V=t.memoizedState,f.state=V,Ar(t,s,f,c),Dr();var X=t.memoizedState;y!==ie||V!==X||ya||e!==null&&e.dependencies!==null&&Ii(e.dependencies)?(typeof b=="function"&&(nc(t,n,b,s),X=t.memoizedState),(te=ya||$f(t,n,te,s,V,X,D)||e!==null&&e.dependencies!==null&&Ii(e.dependencies))?(Y||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,X,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,X,D)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=X),f.props=s,f.state=X,f.context=D,s=te):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),s=!1)}return f=s,ao(e,t),s=(t.flags&128)!==0,f||s?(f=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&s?(t.child=As(t,e.child,null,c),t.child=As(t,null,n,c)):Yt(e,t,n,c),t.memoizedState=f.state,e=t.child):e=ea(e,t,c),e}function ah(e,t,n,s){return jr(),t.flags|=256,Yt(e,t,n,s),t.child}var ic={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oc(e){return{baseLanes:e,cachePool:Hu()}}function lc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=wn),e}function sh(e,t,n){var s=t.pendingProps,c=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(Lt.current&2)!==0),y&&(c=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(tt){if(c?Sa(t):wa(),tt){var b=Tt,D;if(D=b){e:{for(D=b,b=Ln;D.nodeType!==8;){if(!b){b=null;break e}if(D=En(D.nextSibling),D===null){b=null;break e}}b=D}b!==null?(t.memoizedState={dehydrated:b,treeContext:Va!==null?{id:Vn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},D=cn(18,null,null,0),D.stateNode=b,D.return=t,t.child=D,en=t,Tt=null,D=!0):D=!1}D||Qa(t)}if(b=t.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Fc(b)?t.lanes=32:t.lanes=536870912,null;Jn(t)}return b=s.children,s=s.fallback,c?(wa(),c=t.mode,b=so({mode:"hidden",children:b},c),s=Ga(s,c,n,null),b.return=t,s.return=t,b.sibling=s,t.child=b,c=t.child,c.memoizedState=oc(n),c.childLanes=lc(e,y,n),t.memoizedState=ic,s):(Sa(t),cc(t,b))}if(D=e.memoizedState,D!==null&&(b=D.dehydrated,b!==null)){if(f)t.flags&256?(Sa(t),t.flags&=-257,t=dc(e,t,n)):t.memoizedState!==null?(wa(),t.child=e.child,t.flags|=128,t=null):(wa(),c=s.fallback,b=t.mode,s=so({mode:"visible",children:s.children},b),c=Ga(c,b,n,null),c.flags|=2,s.return=t,c.return=t,s.sibling=c,t.child=s,As(t,e.child,null,n),s=t.child,s.memoizedState=oc(n),s.childLanes=lc(e,y,n),t.memoizedState=ic,t=c);else if(Sa(t),Fc(b)){if(y=b.nextSibling&&b.nextSibling.dataset,y)var Y=y.dgst;y=Y,s=Error(o(419)),s.stack="",s.digest=y,kr({value:s,source:null,stack:null}),t=dc(e,t,n)}else if(Pt||Cr(e,t,n,!1),y=(n&e.childLanes)!==0,Pt||y){if(y=ht,y!==null&&(s=n&-n,s=(s&42)!==0?1:mn(s),s=(s&(y.suspendedLanes|n))!==0?0:s,s!==0&&s!==D.retryLane))throw D.retryLane=s,Ss(e,s),pn(y,e,s),Xf;b.data==="$?"||Ec(),t=dc(e,t,n)}else b.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=D.treeContext,Tt=En(b.nextSibling),en=t,tt=!0,Ka=null,Ln=!1,e!==null&&(vn[_n++]=Vn,vn[_n++]=Xn,vn[_n++]=Va,Vn=e.id,Xn=e.overflow,Va=t),t=cc(t,s.children),t.flags|=4096);return t}return c?(wa(),c=s.fallback,b=t.mode,D=e.child,Y=D.sibling,s=Gn(D,{mode:"hidden",children:s.children}),s.subtreeFlags=D.subtreeFlags&65011712,Y!==null?c=Gn(Y,c):(c=Ga(c,b,n,null),c.flags|=2),c.return=t,s.return=t,s.sibling=c,t.child=s,s=c,c=t.child,b=e.child.memoizedState,b===null?b=oc(n):(D=b.cachePool,D!==null?(Y=Ot._currentValue,D=D.parent!==Y?{parent:Y,pool:Y}:D):D=Hu(),b={baseLanes:b.baseLanes|n,cachePool:D}),c.memoizedState=b,c.childLanes=lc(e,y,n),t.memoizedState=ic,s):(Sa(t),n=e.child,e=n.sibling,n=Gn(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=n,t.memoizedState=null,n)}function cc(e,t){return t=so({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function so(e,t){return e=cn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function dc(e,t,n){return As(t,e.child,null,n),e=cc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rh(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),El(e.return,t,n)}function uc(e,t,n,s,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=s,f.tail=n,f.tailMode=c)}function ih(e,t,n){var s=t.pendingProps,c=s.revealOrder,f=s.tail;if(Yt(e,t,s.children,n),s=Lt.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rh(e,n,t);else if(e.tag===19)rh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(ue(Lt,s),c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&eo(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),uc(t,!1,c,n,f);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&eo(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}uc(t,!0,n,null,f);break;case"together":uc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ea(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ea|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Cr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=Gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ii(e)))}function nx(e,t,n){switch(t.tag){case 3:be(t,t.stateNode.containerInfo),xa(t,Ot,e.memoizedState.cache),jr();break;case 27:case 5:je(t);break;case 4:be(t,t.stateNode.containerInfo);break;case 10:xa(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Sa(t),t.flags|=128,null):(n&t.child.childLanes)!==0?sh(e,t,n):(Sa(t),e=ea(e,t,n),e!==null?e.sibling:null);Sa(t);break;case 19:var c=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(Cr(e,t,n,!1),s=(n&t.childLanes)!==0),c){if(s)return ih(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ue(Lt,Lt.current),s)break;return null;case 22:case 23:return t.lanes=0,Jf(e,t,n);case 24:xa(t,Ot,e.memoizedState.cache)}return ea(e,t,n)}function oh(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Pt=!0;else{if(!fc(e,n)&&(t.flags&128)===0)return Pt=!1,nx(e,t,n);Pt=(e.flags&131072)!==0}else Pt=!1,tt&&(t.flags&1048576)!==0&&Ou(t,Li,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,c=s._init;if(s=c(s._payload),t.type=s,typeof s=="function")_l(s)?(e=ns(s,e),t.tag=1,t=nh(null,t,s,e,n)):(t.tag=0,t=rc(null,t,s,e,n));else{if(s!=null){if(c=s.$$typeof,c===Z){t.tag=11,t=Kf(null,t,s,e,n);break e}else if(c===de){t.tag=14,t=Qf(null,t,s,e,n);break e}}throw t=se(s)||s,Error(o(306,t,""))}}return t;case 0:return rc(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,c=ns(s,t.pendingProps),nh(e,t,s,c,n);case 3:e:{if(be(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var f=t.memoizedState;c=f.element,Bl(e,t),Ar(t,s,null,n);var y=t.memoizedState;if(s=y.cache,xa(t,Ot,s),s!==f.cache&&Rl(t,[Ot],n,!0),Dr(),s=y.element,f.isDehydrated)if(f={element:s,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=ah(e,t,s,n);break e}else if(s!==c){c=yn(Error(o(424)),t),kr(c),t=ah(e,t,s,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Tt=En(e.firstChild),en=t,tt=!0,Ka=null,Ln=!0,n=Uf(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(jr(),s===c){t=ea(e,t,n);break e}Yt(e,t,s,n)}t=t.child}return t;case 26:return ao(e,t),e===null?(n=up(t.type,null,t.pendingProps,null))?t.memoizedState=n:tt||(n=t.type,e=t.pendingProps,s=bo(Q.current).createElement(n),s[$t]=t,s[Kt]=e,Vt(s,n,e),Ct(s),t.stateNode=s):t.memoizedState=up(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return je(t),e===null&&tt&&(s=t.stateNode=lp(t.type,t.pendingProps,Q.current),en=t,Ln=!0,c=Tt,Da(t.type)?(Yc=c,Tt=En(s.firstChild)):Tt=c),Yt(e,t,t.pendingProps.children,n),ao(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&tt&&((c=s=Tt)&&(s=Nx(s,t.type,t.pendingProps,Ln),s!==null?(t.stateNode=s,en=t,Tt=En(s.firstChild),Ln=!1,c=!0):c=!1),c||Qa(t)),je(t),c=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,s=f.children,Pc(c,f)?s=null:y!==null&&Pc(c,y)&&(t.flags|=32),t.memoizedState!==null&&(c=$l(e,t,Vm,null,null,n),ti._currentValue=c),ao(e,t),Yt(e,t,s,n),t.child;case 6:return e===null&&tt&&((e=n=Tt)&&(n=zx(n,t.pendingProps,Ln),n!==null?(t.stateNode=n,en=t,Tt=null,e=!0):e=!1),e||Qa(t)),null;case 13:return sh(e,t,n);case 4:return be(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=As(t,null,s,n):Yt(e,t,s,n),t.child;case 11:return Kf(e,t,t.type,t.pendingProps,n);case 7:return Yt(e,t,t.pendingProps,n),t.child;case 8:return Yt(e,t,t.pendingProps.children,n),t.child;case 12:return Yt(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,xa(t,t.type,s.value),Yt(e,t,s.children,n),t.child;case 9:return c=t.type._context,s=t.pendingProps.children,Ja(t),c=Zt(c),s=s(c),t.flags|=1,Yt(e,t,s,n),t.child;case 14:return Qf(e,t,t.type,t.pendingProps,n);case 15:return Zf(e,t,t.type,t.pendingProps,n);case 19:return ih(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},e===null?(n=so(s,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Gn(e.child,s),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Jf(e,t,n);case 24:return Ja(t),s=Zt(Ot),e===null?(c=Dl(),c===null&&(c=ht,f=Nl(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=n),c=f),t.memoizedState={parent:s,cache:c},Ml(t),xa(t,Ot,c)):((e.lanes&n)!==0&&(Bl(e,t),Ar(t,null,null,n),Dr()),c=e.memoizedState,f=t.memoizedState,c.parent!==s?(c={parent:s,cache:s},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),xa(t,Ot,s)):(s=f.cache,xa(t,Ot,s),s!==c.cache&&Rl(t,[Ot],n,!0))),Yt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ta(e){e.flags|=4}function lh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!mp(t)){if(t=Sn.current,t!==null&&((Qe&4194048)===Qe?In!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||t!==In))throw Nr=Al,Wu;e.flags|=8192}}function ro(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?kt():536870912,e.lanes|=t,Ls|=t)}function qr(e,t){if(!tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function ax(e,t,n){var s=t.pendingProps;switch(kl(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return wt(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Qn(Ot),ge(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(wr(t)?ta(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Uu())),wt(t),null;case 26:return n=t.memoizedState,e===null?(ta(t),n!==null?(wt(t),lh(t,n)):(wt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ta(t),wt(t),lh(t,n)):(wt(t),t.flags&=-16777217):(e.memoizedProps!==s&&ta(t),wt(t),t.flags&=-16777217),null;case 27:Ye(t),n=Q.current;var c=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ta(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return wt(t),null}e=we.current,wr(t)?Lu(t):(e=lp(c,s,n),t.stateNode=e,ta(t))}return wt(t),null;case 5:if(Ye(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ta(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return wt(t),null}if(e=we.current,wr(t))Lu(t);else{switch(c=bo(Q.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?c.createElement("select",{is:s.is}):c.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?c.createElement(n,{is:s.is}):c.createElement(n)}}e[$t]=t,e[Kt]=s;e:for(c=t.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}t.stateNode=e;e:switch(Vt(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ta(t)}}return wt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ta(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=Q.current,wr(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,c=en,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[$t]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||tp(e.nodeValue,n)),e||Qa(t)}else e=bo(e).createTextNode(s),e[$t]=t,t.stateNode=e}return wt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=wr(t),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[$t]=t}else jr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;wt(t),c=!1}else c=Uu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Jn(t),t):(Jn(t),null)}if(Jn(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool);var f=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ro(t,t.updateQueue),wt(t),null;case 4:return ge(),e===null&&Lc(t.stateNode.containerInfo),wt(t),null;case 10:return Qn(t.type),wt(t),null;case 19:if(ce(Lt),c=t.memoizedState,c===null)return wt(t),null;if(s=(t.flags&128)!==0,f=c.rendering,f===null)if(s)qr(c,!1);else{if(Et!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=eo(e),f!==null){for(t.flags|=128,qr(c,!1),e=f.updateQueue,t.updateQueue=e,ro(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Bu(n,e),n=n.sibling;return ue(Lt,Lt.current&1|2),t.child}e=e.sibling}c.tail!==null&&gt()>lo&&(t.flags|=128,s=!0,qr(c,!1),t.lanes=4194304)}else{if(!s)if(e=eo(f),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,ro(t,e),qr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!tt)return wt(t),null}else 2*gt()-c.renderingStartTime>lo&&n!==536870912&&(t.flags|=128,s=!0,qr(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(e=c.last,e!==null?e.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=gt(),t.sibling=null,e=Lt.current,ue(Lt,s?e&1|2:e&1),t):(wt(t),null);case 22:case 23:return Jn(t),Ul(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(n&536870912)!==0&&(t.flags&128)===0&&(wt(t),t.subtreeFlags&6&&(t.flags|=8192)):wt(t),n=t.updateQueue,n!==null&&ro(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&ce(es),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Qn(Ot),wt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function sx(e,t){switch(kl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qn(Ot),ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ye(t),null;case 13:if(Jn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));jr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(Lt),null;case 4:return ge(),null;case 10:return Qn(t.type),null;case 22:case 23:return Jn(t),Ul(),e!==null&&ce(es),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Qn(Ot),null;case 25:return null;default:return null}}function ch(e,t){switch(kl(t),t.tag){case 3:Qn(Ot),ge();break;case 26:case 27:case 5:Ye(t);break;case 4:ge();break;case 13:Jn(t);break;case 19:ce(Lt);break;case 10:Qn(t.type);break;case 22:case 23:Jn(t),Ul(),e!==null&&ce(es);break;case 24:Qn(Ot)}}function $r(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var c=s.next;n=c;do{if((n.tag&e)===e){s=void 0;var f=n.create,y=n.inst;s=f(),y.destroy=s}n=n.next}while(n!==c)}}catch(b){ft(t,t.return,b)}}function ja(e,t,n){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var f=c.next;s=f;do{if((s.tag&e)===e){var y=s.inst,b=y.destroy;if(b!==void 0){y.destroy=void 0,c=t;var D=n,Y=b;try{Y()}catch(te){ft(c,D,te)}}}s=s.next}while(s!==f)}}catch(te){ft(t,t.return,te)}}function dh(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ku(t,n)}catch(s){ft(e,e.return,s)}}}function uh(e,t,n){n.props=ns(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){ft(e,t,s)}}function Pr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof n=="function"?e.refCleanup=n(s):n.current=s}}catch(c){ft(e,t,c)}}function Un(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(c){ft(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){ft(e,t,c)}else n.current=null}function fh(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(c){ft(e,e.return,c)}}function hc(e,t,n){try{var s=e.stateNode;kx(s,e.type,n,t),s[Kt]=t}catch(c){ft(e,e.return,c)}}function hh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Da(e.type)||e.tag===4}function pc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Da(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gc(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yo));else if(s!==4&&(s===27&&Da(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(gc(e,t,n),e=e.sibling;e!==null;)gc(e,t,n),e=e.sibling}function io(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(s===27&&Da(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(io(e,t,n),e=e.sibling;e!==null;)io(e,t,n),e=e.sibling}function ph(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Vt(t,s,n),t[$t]=e,t[Kt]=n}catch(f){ft(e,e.return,f)}}var na=!1,zt=!1,mc=!1,gh=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function rx(e,t){if(e=e.containerInfo,qc=ko,e=ku(e),pl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var c=s.anchorOffset,f=s.focusNode;s=s.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var y=0,b=-1,D=-1,Y=0,te=0,ie=e,V=null;t:for(;;){for(var X;ie!==n||c!==0&&ie.nodeType!==3||(b=y+c),ie!==f||s!==0&&ie.nodeType!==3||(D=y+s),ie.nodeType===3&&(y+=ie.nodeValue.length),(X=ie.firstChild)!==null;)V=ie,ie=X;for(;;){if(ie===e)break t;if(V===n&&++Y===c&&(b=y),V===f&&++te===s&&(D=y),(X=ie.nextSibling)!==null)break;ie=V,V=ie.parentNode}ie=X}n=b===-1||D===-1?null:{start:b,end:D}}else n=null}n=n||{start:0,end:0}}else n=null;for($c={focusedElem:e,selectionRange:n},ko=!1,Ht=t;Ht!==null;)if(t=Ht,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Ht=e;else for(;Ht!==null;){switch(t=Ht,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,n=t,c=f.memoizedProps,f=f.memoizedState,s=n.stateNode;try{var Ie=ns(n.type,c,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(Ie,f),s.__reactInternalSnapshotBeforeUpdate=e}catch(Me){ft(n,n.return,Me)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Wc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Wc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Ht=e;break}Ht=t.return}}function mh(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:ka(e,n),s&4&&$r(5,n);break;case 1:if(ka(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(y){ft(n,n.return,y)}else{var c=ns(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){ft(n,n.return,y)}}s&64&&dh(n),s&512&&Pr(n,n.return);break;case 3:if(ka(e,n),s&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ku(e,t)}catch(y){ft(n,n.return,y)}}break;case 27:t===null&&s&4&&ph(n);case 26:case 5:ka(e,n),t===null&&s&4&&fh(n),s&512&&Pr(n,n.return);break;case 12:ka(e,n);break;case 13:ka(e,n),s&4&&bh(e,n),s&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=px.bind(null,n),Dx(e,n))));break;case 22:if(s=n.memoizedState!==null||na,!s){t=t!==null&&t.memoizedState!==null||zt,c=na;var f=zt;na=s,(zt=t)&&!f?Ca(e,n,(n.subtreeFlags&8772)!==0):ka(e,n),na=c,zt=f}break;case 30:break;default:ka(e,n)}}function xh(e){var t=e.alternate;t!==null&&(e.alternate=null,xh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&hs(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var vt=null,sn=!1;function aa(e,t,n){for(n=n.child;n!==null;)yh(e,t,n),n=n.sibling}function yh(e,t,n){if(pe&&typeof pe.onCommitFiberUnmount=="function")try{pe.onCommitFiberUnmount(H,n)}catch{}switch(n.tag){case 26:zt||Un(n,t),aa(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:zt||Un(n,t);var s=vt,c=sn;Da(n.type)&&(vt=n.stateNode,sn=!1),aa(e,t,n),Qr(n.stateNode),vt=s,sn=c;break;case 5:zt||Un(n,t);case 6:if(s=vt,c=sn,vt=null,aa(e,t,n),vt=s,sn=c,vt!==null)if(sn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(n.stateNode)}catch(f){ft(n,t,f)}else try{vt.removeChild(n.stateNode)}catch(f){ft(n,t,f)}break;case 18:vt!==null&&(sn?(e=vt,ip(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ri(e)):ip(vt,n.stateNode));break;case 4:s=vt,c=sn,vt=n.stateNode.containerInfo,sn=!0,aa(e,t,n),vt=s,sn=c;break;case 0:case 11:case 14:case 15:zt||ja(2,n,t),zt||ja(4,n,t),aa(e,t,n);break;case 1:zt||(Un(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&uh(n,t,s)),aa(e,t,n);break;case 21:aa(e,t,n);break;case 22:zt=(s=zt)||n.memoizedState!==null,aa(e,t,n),zt=s;break;default:aa(e,t,n)}}function bh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ri(e)}catch(n){ft(t,t.return,n)}}function ix(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new gh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new gh),t;default:throw Error(o(435,e.tag))}}function xc(e,t){var n=ix(e);t.forEach(function(s){var c=gx.bind(null,e,s);n.has(s)||(n.add(s),s.then(c,c))})}function dn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var c=n[s],f=e,y=t,b=y;e:for(;b!==null;){switch(b.tag){case 27:if(Da(b.type)){vt=b.stateNode,sn=!1;break e}break;case 5:vt=b.stateNode,sn=!1;break e;case 3:case 4:vt=b.stateNode.containerInfo,sn=!0;break e}b=b.return}if(vt===null)throw Error(o(160));yh(f,y,c),vt=null,sn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)vh(t,e),t=t.sibling}var Tn=null;function vh(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dn(t,e),un(e),s&4&&(ja(3,e,e.return),$r(3,e),ja(5,e,e.return));break;case 1:dn(t,e),un(e),s&512&&(zt||n===null||Un(n,n.return)),s&64&&na&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var c=Tn;if(dn(t,e),un(e),s&512&&(zt||n===null||Un(n,n.return)),s&4){var f=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Ha]||f[$t]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(s),c.head.insertBefore(f,c.querySelector("head > title"))),Vt(f,s,n),f[$t]=e,Ct(f),s=f;break e;case"link":var y=pp("link","href",c).get(s+(n.href||""));if(y){for(var b=0;b<y.length;b++)if(f=y[b],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){y.splice(b,1);break t}}f=c.createElement(s),Vt(f,s,n),c.head.appendChild(f);break;case"meta":if(y=pp("meta","content",c).get(s+(n.content||""))){for(b=0;b<y.length;b++)if(f=y[b],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){y.splice(b,1);break t}}f=c.createElement(s),Vt(f,s,n),c.head.appendChild(f);break;default:throw Error(o(468,s))}f[$t]=e,Ct(f),s=f}e.stateNode=s}else gp(c,e.type,e.stateNode);else e.stateNode=hp(c,s,e.memoizedProps);else f!==s?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,s===null?gp(c,e.type,e.stateNode):hp(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&hc(e,e.memoizedProps,n.memoizedProps)}break;case 27:dn(t,e),un(e),s&512&&(zt||n===null||Un(n,n.return)),n!==null&&s&4&&hc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(dn(t,e),un(e),s&512&&(zt||n===null||Un(n,n.return)),e.flags&32){c=e.stateNode;try{gs(c,"")}catch(X){ft(e,e.return,X)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,hc(e,c,n!==null?n.memoizedProps:c)),s&1024&&(mc=!0);break;case 6:if(dn(t,e),un(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(X){ft(e,e.return,X)}}break;case 3:if(So=null,c=Tn,Tn=vo(t.containerInfo),dn(t,e),Tn=c,un(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ri(t.containerInfo)}catch(X){ft(e,e.return,X)}mc&&(mc=!1,_h(e));break;case 4:s=Tn,Tn=vo(e.stateNode.containerInfo),dn(t,e),un(e),Tn=s;break;case 12:dn(t,e),un(e);break;case 13:dn(t,e),un(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(wc=gt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,xc(e,s)));break;case 22:c=e.memoizedState!==null;var D=n!==null&&n.memoizedState!==null,Y=na,te=zt;if(na=Y||c,zt=te||D,dn(t,e),zt=te,na=Y,un(e),s&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||D||na||zt||as(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){D=n=t;try{if(f=D.stateNode,c)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{b=D.stateNode;var ie=D.memoizedProps.style,V=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(X){ft(D,D.return,X)}}}else if(t.tag===6){if(n===null){D=t;try{D.stateNode.nodeValue=c?"":D.memoizedProps}catch(X){ft(D,D.return,X)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,xc(e,n))));break;case 19:dn(t,e),un(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,xc(e,s)));break;case 30:break;case 21:break;default:dn(t,e),un(e)}}function un(e){var t=e.flags;if(t&2){try{for(var n,s=e.return;s!==null;){if(hh(s)){n=s;break}s=s.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var c=n.stateNode,f=pc(e);io(e,f,c);break;case 5:var y=n.stateNode;n.flags&32&&(gs(y,""),n.flags&=-33);var b=pc(e);io(e,b,y);break;case 3:case 4:var D=n.stateNode.containerInfo,Y=pc(e);gc(e,Y,D);break;default:throw Error(o(161))}}catch(te){ft(e,e.return,te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _h(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;_h(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ka(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)mh(e,t.alternate,t),t=t.sibling}function as(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ja(4,t,t.return),as(t);break;case 1:Un(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&uh(t,t.return,n),as(t);break;case 27:Qr(t.stateNode);case 26:case 5:Un(t,t.return),as(t);break;case 22:t.memoizedState===null&&as(t);break;case 30:as(t);break;default:as(t)}e=e.sibling}}function Ca(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,c=e,f=t,y=f.flags;switch(f.tag){case 0:case 11:case 15:Ca(c,f,n),$r(4,f);break;case 1:if(Ca(c,f,n),s=f,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Y){ft(s,s.return,Y)}if(s=f,c=s.updateQueue,c!==null){var b=s.stateNode;try{var D=c.shared.hiddenCallbacks;if(D!==null)for(c.shared.hiddenCallbacks=null,c=0;c<D.length;c++)Xu(D[c],b)}catch(Y){ft(s,s.return,Y)}}n&&y&64&&dh(f),Pr(f,f.return);break;case 27:ph(f);case 26:case 5:Ca(c,f,n),n&&s===null&&y&4&&fh(f),Pr(f,f.return);break;case 12:Ca(c,f,n);break;case 13:Ca(c,f,n),n&&y&4&&bh(c,f);break;case 22:f.memoizedState===null&&Ca(c,f,n),Pr(f,f.return);break;case 30:break;default:Ca(c,f,n)}t=t.sibling}}function yc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Tr(n))}function bc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tr(e))}function qn(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sh(e,t,n,s),t=t.sibling}function Sh(e,t,n,s){var c=t.flags;switch(t.tag){case 0:case 11:case 15:qn(e,t,n,s),c&2048&&$r(9,t);break;case 1:qn(e,t,n,s);break;case 3:qn(e,t,n,s),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tr(e)));break;case 12:if(c&2048){qn(e,t,n,s),e=t.stateNode;try{var f=t.memoizedProps,y=f.id,b=f.onPostCommit;typeof b=="function"&&b(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){ft(t,t.return,D)}}else qn(e,t,n,s);break;case 13:qn(e,t,n,s);break;case 23:break;case 22:f=t.stateNode,y=t.alternate,t.memoizedState!==null?f._visibility&2?qn(e,t,n,s):Hr(e,t):f._visibility&2?qn(e,t,n,s):(f._visibility|=2,Ms(e,t,n,s,(t.subtreeFlags&10256)!==0)),c&2048&&yc(y,t);break;case 24:qn(e,t,n,s),c&2048&&bc(t.alternate,t);break;default:qn(e,t,n,s)}}function Ms(e,t,n,s,c){for(c=c&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,y=t,b=n,D=s,Y=y.flags;switch(y.tag){case 0:case 11:case 15:Ms(f,y,b,D,c),$r(8,y);break;case 23:break;case 22:var te=y.stateNode;y.memoizedState!==null?te._visibility&2?Ms(f,y,b,D,c):Hr(f,y):(te._visibility|=2,Ms(f,y,b,D,c)),c&&Y&2048&&yc(y.alternate,y);break;case 24:Ms(f,y,b,D,c),c&&Y&2048&&bc(y.alternate,y);break;default:Ms(f,y,b,D,c)}t=t.sibling}}function Hr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,c=s.flags;switch(s.tag){case 22:Hr(n,s),c&2048&&yc(s.alternate,s);break;case 24:Hr(n,s),c&2048&&bc(s.alternate,s);break;default:Hr(n,s)}t=t.sibling}}var Wr=8192;function Bs(e){if(e.subtreeFlags&Wr)for(e=e.child;e!==null;)wh(e),e=e.sibling}function wh(e){switch(e.tag){case 26:Bs(e),e.flags&Wr&&e.memoizedState!==null&&Fx(Tn,e.memoizedState,e.memoizedProps);break;case 5:Bs(e);break;case 3:case 4:var t=Tn;Tn=vo(e.stateNode.containerInfo),Bs(e),Tn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Wr,Wr=16777216,Bs(e),Wr=t):Bs(e));break;default:Bs(e)}}function jh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Fr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];Ht=s,Ch(s,e)}jh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)kh(e),e=e.sibling}function kh(e){switch(e.tag){case 0:case 11:case 15:Fr(e),e.flags&2048&&ja(9,e,e.return);break;case 3:Fr(e);break;case 12:Fr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,oo(e)):Fr(e);break;default:Fr(e)}}function oo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];Ht=s,Ch(s,e)}jh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ja(8,t,t.return),oo(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,oo(t));break;default:oo(t)}e=e.sibling}}function Ch(e,t){for(;Ht!==null;){var n=Ht;switch(n.tag){case 0:case 11:case 15:ja(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Tr(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Ht=s;else e:for(n=e;Ht!==null;){s=Ht;var c=s.sibling,f=s.return;if(xh(s),s===n){Ht=null;break e}if(c!==null){c.return=f,Ht=c;break e}Ht=f}}}var ox={getCacheForType:function(e){var t=Zt(Ot),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},lx=typeof WeakMap=="function"?WeakMap:Map,st=0,ht=null,Ve=null,Qe=0,rt=0,fn=null,Ta=!1,Os=!1,vc=!1,sa=0,Et=0,Ea=0,ss=0,_c=0,wn=0,Ls=0,Yr=null,rn=null,Sc=!1,wc=0,lo=1/0,co=null,Ra=null,Gt=0,Na=null,Is=null,Us=0,jc=0,kc=null,Th=null,Gr=0,Cc=null;function hn(){if((st&2)!==0&&Qe!==0)return Qe&-Qe;if(I.T!==null){var e=Cs;return e!==0?e:Ac()}return Pa()}function Eh(){wn===0&&(wn=(Qe&536870912)===0||tt?Xt():536870912);var e=Sn.current;return e!==null&&(e.flags|=32),wn}function pn(e,t,n){(e===ht&&(rt===2||rt===9)||e.cancelPendingCommit!==null)&&(qs(e,0),za(e,Qe,wn,!1)),xt(e,n),((st&2)===0||e!==ht)&&(e===ht&&((st&2)===0&&(ss|=n),Et===4&&za(e,Qe,wn,!1)),$n(e))}function Rh(e,t,n){if((st&6)!==0)throw Error(o(327));var s=!n&&(t&124)===0&&(t&e.expiredLanes)===0||At(e,t),c=s?ux(e,t):Rc(e,t,!0),f=s;do{if(c===0){Os&&!s&&za(e,t,0,!1);break}else{if(n=e.current.alternate,f&&!cx(n)){c=Rc(e,t,!1),f=!1;continue}if(c===2){if(f=t,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var b=e;c=Yr;var D=b.current.memoizedState.isDehydrated;if(D&&(qs(b,y).flags|=256),y=Rc(b,y,!1),y!==2){if(vc&&!D){b.errorRecoveryDisabledLanes|=f,ss|=f,c=4;break e}f=rn,rn=c,f!==null&&(rn===null?rn=f:rn.push.apply(rn,f))}c=y}if(f=!1,c!==2)continue}}if(c===1){qs(e,0),za(e,t,0,!0);break}e:{switch(s=e,f=c,f){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:za(s,t,wn,!Ta);break e;case 2:rn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=wc+300-gt(),10<c)){if(za(s,t,wn,!Ta),Ue(s,0,!0)!==0)break e;s.timeoutHandle=sp(Nh.bind(null,s,n,rn,co,Sc,t,wn,ss,Ls,Ta,f,2,-0,0),c);break e}Nh(s,n,rn,co,Sc,t,wn,ss,Ls,Ta,f,0,-0,0)}}break}while(!0);$n(e)}function Nh(e,t,n,s,c,f,y,b,D,Y,te,ie,V,X){if(e.timeoutHandle=-1,ie=t.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(ei={stylesheets:null,count:0,unsuspend:Wx},wh(t),ie=Yx(),ie!==null)){e.cancelPendingCommit=ie(Lh.bind(null,e,t,f,n,s,c,y,b,D,te,1,V,X)),za(e,f,y,!Y);return}Lh(e,t,f,n,s,c,y,b,D)}function cx(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var c=n[s],f=c.getSnapshot;c=c.value;try{if(!ln(f(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function za(e,t,n,s){t&=~_c,t&=~ss,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var c=t;0<c;){var f=31-Pe(c),y=1<<f;s[f]=-1,c&=~y}n!==0&&fs(e,n,t)}function uo(){return(st&6)===0?(Vr(0),!1):!0}function Tc(){if(Ve!==null){if(rt===0)var e=Ve.return;else e=Ve,Kn=Za=null,Wl(e),Ds=null,Ir=0,e=Ve;for(;e!==null;)ch(e.alternate,e),e=e.return;Ve=null}}function qs(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Tx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Tc(),ht=e,Ve=n=Gn(e.current,null),Qe=t,rt=0,fn=null,Ta=!1,Os=At(e,t),vc=!1,Ls=wn=_c=ss=Ea=Et=0,rn=Yr=null,Sc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var c=31-Pe(s),f=1<<c;t|=e[c],s&=~f}return sa=t,Di(),n}function zh(e,t){Fe=null,I.H=Qi,t===Rr||t===$i?(t=Gu(),rt=3):t===Wu?(t=Gu(),rt=4):rt=t===Xf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,fn=t,Ve===null&&(Et=1,no(e,yn(t,e.current)))}function Dh(){var e=I.H;return I.H=Qi,e===null?Qi:e}function Ah(){var e=I.A;return I.A=ox,e}function Ec(){Et=4,Ta||(Qe&4194048)!==Qe&&Sn.current!==null||(Os=!0),(Ea&134217727)===0&&(ss&134217727)===0||ht===null||za(ht,Qe,wn,!1)}function Rc(e,t,n){var s=st;st|=2;var c=Dh(),f=Ah();(ht!==e||Qe!==t)&&(co=null,qs(e,t)),t=!1;var y=Et;e:do try{if(rt!==0&&Ve!==null){var b=Ve,D=fn;switch(rt){case 8:Tc(),y=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(t=!0);var Y=rt;if(rt=0,fn=null,$s(e,b,D,Y),n&&Os){y=0;break e}break;default:Y=rt,rt=0,fn=null,$s(e,b,D,Y)}}dx(),y=Et;break}catch(te){zh(e,te)}while(!0);return t&&e.shellSuspendCounter++,Kn=Za=null,st=s,I.H=c,I.A=f,Ve===null&&(ht=null,Qe=0,Di()),y}function dx(){for(;Ve!==null;)Mh(Ve)}function ux(e,t){var n=st;st|=2;var s=Dh(),c=Ah();ht!==e||Qe!==t?(co=null,lo=gt()+500,qs(e,t)):Os=At(e,t);e:do try{if(rt!==0&&Ve!==null){t=Ve;var f=fn;t:switch(rt){case 1:rt=0,fn=null,$s(e,t,f,1);break;case 2:case 9:if(Fu(f)){rt=0,fn=null,Bh(t);break}t=function(){rt!==2&&rt!==9||ht!==e||(rt=7),$n(e)},f.then(t,t);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Fu(f)?(rt=0,fn=null,Bh(t)):(rt=0,fn=null,$s(e,t,f,7));break;case 5:var y=null;switch(Ve.tag){case 26:y=Ve.memoizedState;case 5:case 27:var b=Ve;if(!y||mp(y)){rt=0,fn=null;var D=b.sibling;if(D!==null)Ve=D;else{var Y=b.return;Y!==null?(Ve=Y,fo(Y)):Ve=null}break t}}rt=0,fn=null,$s(e,t,f,5);break;case 6:rt=0,fn=null,$s(e,t,f,6);break;case 8:Tc(),Et=6;break e;default:throw Error(o(462))}}fx();break}catch(te){zh(e,te)}while(!0);return Kn=Za=null,I.H=s,I.A=c,st=n,Ve!==null?0:(ht=null,Qe=0,Di(),Et)}function fx(){for(;Ve!==null&&!Dt();)Mh(Ve)}function Mh(e){var t=oh(e.alternate,e,sa);e.memoizedProps=e.pendingProps,t===null?fo(e):Ve=t}function Bh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=th(n,t,t.pendingProps,t.type,void 0,Qe);break;case 11:t=th(n,t,t.pendingProps,t.type.render,t.ref,Qe);break;case 5:Wl(t);default:ch(n,t),t=Ve=Bu(t,sa),t=oh(n,t,sa)}e.memoizedProps=e.pendingProps,t===null?fo(e):Ve=t}function $s(e,t,n,s){Kn=Za=null,Wl(t),Ds=null,Ir=0;var c=t.return;try{if(tx(e,c,t,n,Qe)){Et=1,no(e,yn(n,e.current)),Ve=null;return}}catch(f){if(c!==null)throw Ve=c,f;Et=1,no(e,yn(n,e.current)),Ve=null;return}t.flags&32768?(tt||s===1?e=!0:Os||(Qe&536870912)!==0?e=!1:(Ta=e=!0,(s===2||s===9||s===3||s===6)&&(s=Sn.current,s!==null&&s.tag===13&&(s.flags|=16384))),Oh(t,e)):fo(t)}function fo(e){var t=e;do{if((t.flags&32768)!==0){Oh(t,Ta);return}e=t.return;var n=ax(t.alternate,t,sa);if(n!==null){Ve=n;return}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);Et===0&&(Et=5)}function Oh(e,t){do{var n=sx(e.alternate,e);if(n!==null){n.flags&=32767,Ve=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ve=e;return}Ve=e=n}while(e!==null);Et=6,Ve=null}function Lh(e,t,n,s,c,f,y,b,D){e.cancelPendingCommit=null;do ho();while(Gt!==0);if((st&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(f=t.lanes|t.childLanes,f|=bl,ut(e,n,f,y,b,D),e===ht&&(Ve=ht=null,Qe=0),Is=t,Na=e,Us=n,jc=f,kc=c,Th=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,mx(Ee,function(){return Ph(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=I.T,I.T=null,c=J.p,J.p=2,y=st,st|=4;try{rx(e,t,n)}finally{st=y,J.p=c,I.T=s}}Gt=1,Ih(),Uh(),qh()}}function Ih(){if(Gt===1){Gt=0;var e=Na,t=Is,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=I.T,I.T=null;var s=J.p;J.p=2;var c=st;st|=4;try{vh(t,e);var f=$c,y=ku(e.containerInfo),b=f.focusedElem,D=f.selectionRange;if(y!==b&&b&&b.ownerDocument&&ju(b.ownerDocument.documentElement,b)){if(D!==null&&pl(b)){var Y=D.start,te=D.end;if(te===void 0&&(te=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(te,b.value.length);else{var ie=b.ownerDocument||document,V=ie&&ie.defaultView||window;if(V.getSelection){var X=V.getSelection(),Ie=b.textContent.length,Me=Math.min(D.start,Ie),ct=D.end===void 0?Me:Math.min(D.end,Ie);!X.extend&&Me>ct&&(y=ct,ct=Me,Me=y);var $=wu(b,Me),L=wu(b,ct);if($&&L&&(X.rangeCount!==1||X.anchorNode!==$.node||X.anchorOffset!==$.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var F=ie.createRange();F.setStart($.node,$.offset),X.removeAllRanges(),Me>ct?(X.addRange(F),X.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),X.addRange(F))}}}}for(ie=[],X=b;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var ne=ie[b];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}ko=!!qc,$c=qc=null}finally{st=c,J.p=s,I.T=n}}e.current=t,Gt=2}}function Uh(){if(Gt===2){Gt=0;var e=Na,t=Is,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=I.T,I.T=null;var s=J.p;J.p=2;var c=st;st|=4;try{mh(e,t.alternate,t)}finally{st=c,J.p=s,I.T=n}}Gt=3}}function qh(){if(Gt===4||Gt===3){Gt=0,dt();var e=Na,t=Is,n=Us,s=Th;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Gt=5:(Gt=0,Is=Na=null,$h(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ra=null),dr(n),t=t.stateNode,pe&&typeof pe.onCommitFiberRoot=="function")try{pe.onCommitFiberRoot(H,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=I.T,c=J.p,J.p=2,I.T=null;try{for(var f=e.onRecoverableError,y=0;y<s.length;y++){var b=s[y];f(b.value,{componentStack:b.stack})}}finally{I.T=t,J.p=c}}(Us&3)!==0&&ho(),$n(e),c=e.pendingLanes,(n&4194090)!==0&&(c&42)!==0?e===Cc?Gr++:(Gr=0,Cc=e):Gr=0,Vr(0)}}function $h(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Tr(t)))}function ho(e){return Ih(),Uh(),qh(),Ph()}function Ph(){if(Gt!==5)return!1;var e=Na,t=jc;jc=0;var n=dr(Us),s=I.T,c=J.p;try{J.p=32>n?32:n,I.T=null,n=kc,kc=null;var f=Na,y=Us;if(Gt=0,Is=Na=null,Us=0,(st&6)!==0)throw Error(o(331));var b=st;if(st|=4,kh(f.current),Sh(f,f.current,y,n),st=b,Vr(0,!1),pe&&typeof pe.onPostCommitFiberRoot=="function")try{pe.onPostCommitFiberRoot(H,f)}catch{}return!0}finally{J.p=c,I.T=s,$h(e,t)}}function Hh(e,t,n){t=yn(n,t),t=sc(e.stateNode,t,2),e=va(e,t,2),e!==null&&(xt(e,2),$n(e))}function ft(e,t,n){if(e.tag===3)Hh(e,e,n);else for(;t!==null;){if(t.tag===3){Hh(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ra===null||!Ra.has(s))){e=yn(n,e),n=Gf(2),s=va(t,n,2),s!==null&&(Vf(n,s,t,e),xt(s,2),$n(s));break}}t=t.return}}function Nc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new lx;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(n)||(vc=!0,c.add(n),e=hx.bind(null,e,t,n),t.then(e,e))}function hx(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ht===e&&(Qe&n)===n&&(Et===4||Et===3&&(Qe&62914560)===Qe&&300>gt()-wc?(st&2)===0&&qs(e,0):_c|=n,Ls===Qe&&(Ls=0)),$n(e)}function Wh(e,t){t===0&&(t=kt()),e=Ss(e,t),e!==null&&(xt(e,t),$n(e))}function px(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wh(e,n)}function gx(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),Wh(e,n)}function mx(e,t){return He(e,t)}var po=null,Ps=null,zc=!1,go=!1,Dc=!1,rs=0;function $n(e){e!==Ps&&e.next===null&&(Ps===null?po=Ps=e:Ps=Ps.next=e),go=!0,zc||(zc=!0,yx())}function Vr(e,t){if(!Dc&&go){Dc=!0;do for(var n=!1,s=po;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var f=0;else{var y=s.suspendedLanes,b=s.pingedLanes;f=(1<<31-Pe(42|e)+1)-1,f&=c&~(y&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,Vh(s,f))}else f=Qe,f=Ue(s,s===ht?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(f&3)===0||At(s,f)||(n=!0,Vh(s,f));s=s.next}while(n);Dc=!1}}function xx(){Fh()}function Fh(){go=zc=!1;var e=0;rs!==0&&(Cx()&&(e=rs),rs=0);for(var t=gt(),n=null,s=po;s!==null;){var c=s.next,f=Yh(s,t);f===0?(s.next=null,n===null?po=c:n.next=c,c===null&&(Ps=n)):(n=s,(e!==0||(f&3)!==0)&&(go=!0)),s=c}Vr(e)}function Yh(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-Pe(f),b=1<<y,D=c[y];D===-1?((b&n)===0||(b&s)!==0)&&(c[y]=jt(b,t)):D<=t&&(e.expiredLanes|=b),f&=~b}if(t=ht,n=Qe,n=Ue(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,n===0||e===t&&(rt===2||rt===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&yt(s),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||At(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&yt(s),dr(n)){case 2:case 8:n=ke;break;case 32:n=Ee;break;case 268435456:n=nt;break;default:n=Ee}return s=Gh.bind(null,e),n=He(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&yt(s),e.callbackPriority=2,e.callbackNode=null,2}function Gh(e,t){if(Gt!==0&&Gt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ho()&&e.callbackNode!==n)return null;var s=Qe;return s=Ue(e,e===ht?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Rh(e,s,t),Yh(e,gt()),e.callbackNode!=null&&e.callbackNode===n?Gh.bind(null,e):null)}function Vh(e,t){if(ho())return null;Rh(e,t,!0)}function yx(){Ex(function(){(st&6)!==0?He(z,xx):Fh()})}function Ac(){return rs===0&&(rs=Xt()),rs}function Xh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ki(""+e)}function Kh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function bx(e,t,n,s,c){if(t==="submit"&&n&&n.stateNode===c){var f=Xh((c[Kt]||null).action),y=s.submitter;y&&(t=(t=y[Kt]||null)?Xh(t.formAction):y.getAttribute("formAction"),t!==null&&(f=t,y=null));var b=new Ri("action","action",null,s,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(rs!==0){var D=y?Kh(c,y):new FormData(c);Jl(n,{pending:!0,data:D,method:c.method,action:f},null,D)}}else typeof f=="function"&&(b.preventDefault(),D=y?Kh(c,y):new FormData(c),Jl(n,{pending:!0,data:D,method:c.method,action:f},f,D))},currentTarget:c}]})}}for(var Mc=0;Mc<yl.length;Mc++){var Bc=yl[Mc],vx=Bc.toLowerCase(),_x=Bc[0].toUpperCase()+Bc.slice(1);Cn(vx,"on"+_x)}Cn(Eu,"onAnimationEnd"),Cn(Ru,"onAnimationIteration"),Cn(Nu,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(Im,"onTransitionRun"),Cn(Um,"onTransitionStart"),Cn(qm,"onTransitionCancel"),Cn(zu,"onTransitionEnd"),Fn("onMouseEnter",["mouseout","mouseover"]),Fn("onMouseLeave",["mouseout","mouseover"]),Fn("onPointerEnter",["pointerout","pointerover"]),Fn("onPointerLeave",["pointerout","pointerover"]),On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),On("onBeforeInput",["compositionend","keypress","textInput","paste"]),On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xr));function Qh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],c=s.event;s=s.listeners;e:{var f=void 0;if(t)for(var y=s.length-1;0<=y;y--){var b=s[y],D=b.instance,Y=b.currentTarget;if(b=b.listener,D!==f&&c.isPropagationStopped())break e;f=b,c.currentTarget=Y;try{f(c)}catch(te){to(te)}c.currentTarget=null,f=D}else for(y=0;y<s.length;y++){if(b=s[y],D=b.instance,Y=b.currentTarget,b=b.listener,D!==f&&c.isPropagationStopped())break e;f=b,c.currentTarget=Y;try{f(c)}catch(te){to(te)}c.currentTarget=null,f=D}}}}function Xe(e,t){var n=t[ur];n===void 0&&(n=t[ur]=new Set);var s=e+"__bubble";n.has(s)||(Zh(t,e,2,!1),n.add(s))}function Oc(e,t,n){var s=0;t&&(s|=4),Zh(n,e,s,t)}var mo="_reactListening"+Math.random().toString(36).slice(2);function Lc(e){if(!e[mo]){e[mo]=!0,hr.forEach(function(n){n!=="selectionchange"&&(Sx.has(n)||Oc(n,!1,e),Oc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mo]||(t[mo]=!0,Oc("selectionchange",!1,t))}}function Zh(e,t,n,s){switch(Sp(t)){case 2:var c=Xx;break;case 8:c=Kx;break;default:c=Qc}n=c.bind(null,t,n,e),c=void 0,!rl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function Ic(e,t,n,s,c){var f=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var y=s.tag;if(y===3||y===4){var b=s.stateNode.containerInfo;if(b===c)break;if(y===4)for(y=s.return;y!==null;){var D=y.tag;if((D===3||D===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;b!==null;){if(y=Hn(b),y===null)return;if(D=y.tag,D===5||D===6||D===26||D===27){s=f=y;continue e}b=b.parentNode}}s=s.return}su(function(){var Y=f,te=al(n),ie=[];e:{var V=Du.get(e);if(V!==void 0){var X=Ri,Ie=e;switch(e){case"keypress":if(Ti(n)===0)break e;case"keydown":case"keyup":X=mm;break;case"focusin":Ie="focus",X=cl;break;case"focusout":Ie="blur",X=cl;break;case"beforeblur":case"afterblur":X=cl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=sm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=bm;break;case Eu:case Ru:case Nu:X=om;break;case zu:X=_m;break;case"scroll":case"scrollend":X=nm;break;case"wheel":X=wm;break;case"copy":case"cut":case"paste":X=cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=cu;break;case"toggle":case"beforetoggle":X=km}var Me=(t&4)!==0,ct=!Me&&(e==="scroll"||e==="scrollend"),$=Me?V!==null?V+"Capture":null:V;Me=[];for(var L=Y,F;L!==null;){var ne=L;if(F=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||F===null||$===null||(ne=pr(L,$),ne!=null&&Me.push(Kr(L,ne,F))),ct)break;L=L.return}0<Me.length&&(V=new X(V,Ie,null,n,te),ie.push({event:V,listeners:Me}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",V&&n!==nl&&(Ie=n.relatedTarget||n.fromElement)&&(Hn(Ie)||Ie[ua]))break e;if((X||V)&&(V=te.window===te?te:(V=te.ownerDocument)?V.defaultView||V.parentWindow:window,X?(Ie=n.relatedTarget||n.toElement,X=Y,Ie=Ie?Hn(Ie):null,Ie!==null&&(ct=u(Ie),Me=Ie.tag,Ie!==ct||Me!==5&&Me!==27&&Me!==6)&&(Ie=null)):(X=null,Ie=Y),X!==Ie)){if(Me=ou,ne="onMouseLeave",$="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(Me=cu,ne="onPointerLeave",$="onPointerEnter",L="pointer"),ct=X==null?V:fa(X),F=Ie==null?V:fa(Ie),V=new Me(ne,L+"leave",X,n,te),V.target=ct,V.relatedTarget=F,ne=null,Hn(te)===Y&&(Me=new Me($,L+"enter",Ie,n,te),Me.target=F,Me.relatedTarget=ct,ne=Me),ct=ne,X&&Ie)t:{for(Me=X,$=Ie,L=0,F=Me;F;F=Hs(F))L++;for(F=0,ne=$;ne;ne=Hs(ne))F++;for(;0<L-F;)Me=Hs(Me),L--;for(;0<F-L;)$=Hs($),F--;for(;L--;){if(Me===$||$!==null&&Me===$.alternate)break t;Me=Hs(Me),$=Hs($)}Me=null}else Me=null;X!==null&&Jh(ie,V,X,Me,!1),Ie!==null&&ct!==null&&Jh(ie,ct,Ie,Me,!0)}}e:{if(V=Y?fa(Y):window,X=V.nodeName&&V.nodeName.toLowerCase(),X==="select"||X==="input"&&V.type==="file")var Ce=xu;else if(gu(V))if(yu)Ce=Bm;else{Ce=Am;var Ge=Dm}else X=V.nodeName,!X||X.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?Y&&tl(Y.elementType)&&(Ce=xu):Ce=Mm;if(Ce&&(Ce=Ce(e,Y))){mu(ie,Ce,n,te);break e}Ge&&Ge(e,V,Y),e==="focusout"&&Y&&V.type==="number"&&Y.memoizedProps.value!=null&&el(V,"number",V.value)}switch(Ge=Y?fa(Y):window,e){case"focusin":(gu(Ge)||Ge.contentEditable==="true")&&(bs=Ge,gl=Y,Sr=null);break;case"focusout":Sr=gl=bs=null;break;case"mousedown":ml=!0;break;case"contextmenu":case"mouseup":case"dragend":ml=!1,Cu(ie,n,te);break;case"selectionchange":if(Lm)break;case"keydown":case"keyup":Cu(ie,n,te)}var De;if(ul)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else ys?hu(e,n)&&(Oe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Oe="onCompositionStart");Oe&&(du&&n.locale!=="ko"&&(ys||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&ys&&(De=ru()):(ma=te,il="value"in ma?ma.value:ma.textContent,ys=!0)),Ge=xo(Y,Oe),0<Ge.length&&(Oe=new lu(Oe,e,null,n,te),ie.push({event:Oe,listeners:Ge}),De?Oe.data=De:(De=pu(n),De!==null&&(Oe.data=De)))),(De=Tm?Em(e,n):Rm(e,n))&&(Oe=xo(Y,"onBeforeInput"),0<Oe.length&&(Ge=new lu("onBeforeInput","beforeinput",null,n,te),ie.push({event:Ge,listeners:Oe}),Ge.data=De)),bx(ie,e,Y,n,te)}Qh(ie,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xo(e,t){for(var n=t+"Capture",s=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=pr(e,n),c!=null&&s.unshift(Kr(e,c,f)),c=pr(e,t),c!=null&&s.push(Kr(e,c,f))),e.tag===3)return s;e=e.return}return[]}function Hs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Jh(e,t,n,s,c){for(var f=t._reactName,y=[];n!==null&&n!==s;){var b=n,D=b.alternate,Y=b.stateNode;if(b=b.tag,D!==null&&D===s)break;b!==5&&b!==26&&b!==27||Y===null||(D=Y,c?(Y=pr(n,f),Y!=null&&y.unshift(Kr(n,Y,D))):c||(Y=pr(n,f),Y!=null&&y.push(Kr(n,Y,D)))),n=n.return}y.length!==0&&e.push({event:t,listeners:y})}var wx=/\r\n?/g,jx=/\u0000|\uFFFD/g;function ep(e){return(typeof e=="string"?e:""+e).replace(wx,`
`).replace(jx,"")}function tp(e,t){return t=ep(t),ep(e)===t}function yo(){}function lt(e,t,n,s,c,f){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||gs(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&gs(e,""+s);break;case"className":Ne(e,"class",s);break;case"tabIndex":Ne(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Ne(e,n,s);break;case"style":nu(e,s,f);break;case"data":if(t!=="object"){Ne(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=ki(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&lt(e,t,"name",c.name,c,null),lt(e,t,"formEncType",c.formEncType,c,null),lt(e,t,"formMethod",c.formMethod,c,null),lt(e,t,"formTarget",c.formTarget,c,null)):(lt(e,t,"encType",c.encType,c,null),lt(e,t,"method",c.method,c,null),lt(e,t,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=ki(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=yo);break;case"onScroll":s!=null&&Xe("scroll",e);break;case"onScrollEnd":s!=null&&Xe("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(n=s.__html,n!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=ki(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Xe("beforetoggle",e),Xe("toggle",e),ae(e,"popover",s);break;case"xlinkActuate":me(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":me(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":me(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":me(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":me(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":me(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":me(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":me(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":me(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ae(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=em.get(n)||n,ae(e,n,s))}}function Uc(e,t,n,s,c,f){switch(n){case"style":nu(e,s,f);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(n=s.__html,n!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"children":typeof s=="string"?gs(e,s):(typeof s=="number"||typeof s=="bigint")&&gs(e,""+s);break;case"onScroll":s!=null&&Xe("scroll",e);break;case"onScrollEnd":s!=null&&Xe("scrollend",e);break;case"onClick":s!=null&&(e.onclick=yo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_i.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),f=e[Kt]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,c),typeof s=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,c);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):ae(e,n,s)}}}function Vt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",e),Xe("load",e);var s=!1,c=!1,f;for(f in n)if(n.hasOwnProperty(f)){var y=n[f];if(y!=null)switch(f){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:lt(e,t,f,y,n,null)}}c&&lt(e,t,"srcSet",n.srcSet,n,null),s&&lt(e,t,"src",n.src,n,null);return;case"input":Xe("invalid",e);var b=f=y=c=null,D=null,Y=null;for(s in n)if(n.hasOwnProperty(s)){var te=n[s];if(te!=null)switch(s){case"name":c=te;break;case"type":y=te;break;case"checked":D=te;break;case"defaultChecked":Y=te;break;case"value":f=te;break;case"defaultValue":b=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(o(137,t));break;default:lt(e,t,s,te,n,null)}}Zd(e,f,b,D,Y,y,c,!1),ga(e);return;case"select":Xe("invalid",e),s=y=f=null;for(c in n)if(n.hasOwnProperty(c)&&(b=n[c],b!=null))switch(c){case"value":f=b;break;case"defaultValue":y=b;break;case"multiple":s=b;default:lt(e,t,c,b,n,null)}t=f,n=y,e.multiple=!!s,t!=null?ps(e,!!s,t,!1):n!=null&&ps(e,!!s,n,!0);return;case"textarea":Xe("invalid",e),f=c=s=null;for(y in n)if(n.hasOwnProperty(y)&&(b=n[y],b!=null))switch(y){case"value":s=b;break;case"defaultValue":c=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(o(91));break;default:lt(e,t,y,b,n,null)}eu(e,s,c,f),ga(e);return;case"option":for(D in n)if(n.hasOwnProperty(D)&&(s=n[D],s!=null))switch(D){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:lt(e,t,D,s,n,null)}return;case"dialog":Xe("beforetoggle",e),Xe("toggle",e),Xe("cancel",e),Xe("close",e);break;case"iframe":case"object":Xe("load",e);break;case"video":case"audio":for(s=0;s<Xr.length;s++)Xe(Xr[s],e);break;case"image":Xe("error",e),Xe("load",e);break;case"details":Xe("toggle",e);break;case"embed":case"source":case"link":Xe("error",e),Xe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in n)if(n.hasOwnProperty(Y)&&(s=n[Y],s!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:lt(e,t,Y,s,n,null)}return;default:if(tl(t)){for(te in n)n.hasOwnProperty(te)&&(s=n[te],s!==void 0&&Uc(e,t,te,s,n,void 0));return}}for(b in n)n.hasOwnProperty(b)&&(s=n[b],s!=null&&lt(e,t,b,s,n,null))}function kx(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,y=null,b=null,D=null,Y=null,te=null;for(X in n){var ie=n[X];if(n.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":D=ie;default:s.hasOwnProperty(X)||lt(e,t,X,null,s,ie)}}for(var V in s){var X=s[V];if(ie=n[V],s.hasOwnProperty(V)&&(X!=null||ie!=null))switch(V){case"type":f=X;break;case"name":c=X;break;case"checked":Y=X;break;case"defaultChecked":te=X;break;case"value":y=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,t));break;default:X!==ie&&lt(e,t,V,X,s,ie)}}Jo(e,y,b,D,Y,te,f,c);return;case"select":X=y=b=V=null;for(f in n)if(D=n[f],n.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":X=D;default:s.hasOwnProperty(f)||lt(e,t,f,null,s,D)}for(c in s)if(f=s[c],D=n[c],s.hasOwnProperty(c)&&(f!=null||D!=null))switch(c){case"value":V=f;break;case"defaultValue":b=f;break;case"multiple":y=f;default:f!==D&&lt(e,t,c,f,s,D)}t=b,n=y,s=X,V!=null?ps(e,!!n,V,!1):!!s!=!!n&&(t!=null?ps(e,!!n,t,!0):ps(e,!!n,n?[]:"",!1));return;case"textarea":X=V=null;for(b in n)if(c=n[b],n.hasOwnProperty(b)&&c!=null&&!s.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:lt(e,t,b,null,s,c)}for(y in s)if(c=s[y],f=n[y],s.hasOwnProperty(y)&&(c!=null||f!=null))switch(y){case"value":V=c;break;case"defaultValue":X=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==f&&lt(e,t,y,c,s,f)}Jd(e,V,X);return;case"option":for(var Ie in n)if(V=n[Ie],n.hasOwnProperty(Ie)&&V!=null&&!s.hasOwnProperty(Ie))switch(Ie){case"selected":e.selected=!1;break;default:lt(e,t,Ie,null,s,V)}for(D in s)if(V=s[D],X=n[D],s.hasOwnProperty(D)&&V!==X&&(V!=null||X!=null))switch(D){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:lt(e,t,D,V,s,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in n)V=n[Me],n.hasOwnProperty(Me)&&V!=null&&!s.hasOwnProperty(Me)&&lt(e,t,Me,null,s,V);for(Y in s)if(V=s[Y],X=n[Y],s.hasOwnProperty(Y)&&V!==X&&(V!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,t));break;default:lt(e,t,Y,V,s,X)}return;default:if(tl(t)){for(var ct in n)V=n[ct],n.hasOwnProperty(ct)&&V!==void 0&&!s.hasOwnProperty(ct)&&Uc(e,t,ct,void 0,s,V);for(te in s)V=s[te],X=n[te],!s.hasOwnProperty(te)||V===X||V===void 0&&X===void 0||Uc(e,t,te,V,s,X);return}}for(var $ in n)V=n[$],n.hasOwnProperty($)&&V!=null&&!s.hasOwnProperty($)&&lt(e,t,$,null,s,V);for(ie in s)V=s[ie],X=n[ie],!s.hasOwnProperty(ie)||V===X||V==null&&X==null||lt(e,t,ie,V,s,X)}var qc=null,$c=null;function bo(e){return e.nodeType===9?e:e.ownerDocument}function np(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ap(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Pc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hc=null;function Cx(){var e=window.event;return e&&e.type==="popstate"?e===Hc?!1:(Hc=e,!0):(Hc=null,!1)}var sp=typeof setTimeout=="function"?setTimeout:void 0,Tx=typeof clearTimeout=="function"?clearTimeout:void 0,rp=typeof Promise=="function"?Promise:void 0,Ex=typeof queueMicrotask=="function"?queueMicrotask:typeof rp<"u"?function(e){return rp.resolve(null).then(e).catch(Rx)}:sp;function Rx(e){setTimeout(function(){throw e})}function Da(e){return e==="head"}function ip(e,t){var n=t,s=0,c=0;do{var f=n.nextSibling;if(e.removeChild(n),f&&f.nodeType===8)if(n=f.data,n==="/$"){if(0<s&&8>s){n=s;var y=e.ownerDocument;if(n&1&&Qr(y.documentElement),n&2&&Qr(y.body),n&4)for(n=y.head,Qr(n),y=n.firstChild;y;){var b=y.nextSibling,D=y.nodeName;y[Ha]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&y.rel.toLowerCase()==="stylesheet"||n.removeChild(y),y=b}}if(c===0){e.removeChild(f),ri(t);return}c--}else n==="$"||n==="$?"||n==="$!"?c++:s=n.charCodeAt(0)-48;else s=0;n=f}while(n);ri(t)}function Wc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Wc(n),hs(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Nx(e,t,n,s){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Ha])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=En(e.nextSibling),e===null)break}return null}function zx(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=En(e.nextSibling),e===null))return null;return e}function Fc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Dx(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function En(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Yc=null;function op(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function lp(e,t,n){switch(t=bo(n),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Qr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);hs(e)}var jn=new Map,cp=new Set;function vo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ra=J.d;J.d={f:Ax,r:Mx,D:Bx,C:Ox,L:Lx,m:Ix,X:qx,S:Ux,M:$x};function Ax(){var e=ra.f(),t=uo();return e||t}function Mx(e){var t=Wn(e);t!==null&&t.tag===5&&t.type==="form"?Rf(t):ra.r(e)}var Ws=typeof document>"u"?null:document;function dp(e,t,n){var s=Ws;if(s&&typeof t=="string"&&t){var c=xn(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),cp.has(c)||(cp.add(c),e={rel:e,crossOrigin:n,href:t},s.querySelector(c)===null&&(t=s.createElement("link"),Vt(t,"link",e),Ct(t),s.head.appendChild(t)))}}function Bx(e){ra.D(e),dp("dns-prefetch",e,null)}function Ox(e,t){ra.C(e,t),dp("preconnect",e,t)}function Lx(e,t,n){ra.L(e,t,n);var s=Ws;if(s&&e&&t){var c='link[rel="preload"][as="'+xn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+xn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+xn(n.imageSizes)+'"]')):c+='[href="'+xn(e)+'"]';var f=c;switch(t){case"style":f=Fs(e);break;case"script":f=Ys(e)}jn.has(f)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),jn.set(f,e),s.querySelector(c)!==null||t==="style"&&s.querySelector(Zr(f))||t==="script"&&s.querySelector(Jr(f))||(t=s.createElement("link"),Vt(t,"link",e),Ct(t),s.head.appendChild(t)))}}function Ix(e,t){ra.m(e,t);var n=Ws;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+xn(s)+'"][href="'+xn(e)+'"]',f=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ys(e)}if(!jn.has(f)&&(e=x({rel:"modulepreload",href:e},t),jn.set(f,e),n.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Jr(f)))return}s=n.createElement("link"),Vt(s,"link",e),Ct(s),n.head.appendChild(s)}}}function Ux(e,t,n){ra.S(e,t,n);var s=Ws;if(s&&e){var c=ha(s).hoistableStyles,f=Fs(e);t=t||"default";var y=c.get(f);if(!y){var b={loading:0,preload:null};if(y=s.querySelector(Zr(f)))b.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=jn.get(f))&&Gc(e,n);var D=y=s.createElement("link");Ct(D),Vt(D,"link",e),D._p=new Promise(function(Y,te){D.onload=Y,D.onerror=te}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,_o(y,t,s)}y={type:"stylesheet",instance:y,count:1,state:b},c.set(f,y)}}}function qx(e,t){ra.X(e,t);var n=Ws;if(n&&e){var s=ha(n).hoistableScripts,c=Ys(e),f=s.get(c);f||(f=n.querySelector(Jr(c)),f||(e=x({src:e,async:!0},t),(t=jn.get(c))&&Vc(e,t),f=n.createElement("script"),Ct(f),Vt(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},s.set(c,f))}}function $x(e,t){ra.M(e,t);var n=Ws;if(n&&e){var s=ha(n).hoistableScripts,c=Ys(e),f=s.get(c);f||(f=n.querySelector(Jr(c)),f||(e=x({src:e,async:!0,type:"module"},t),(t=jn.get(c))&&Vc(e,t),f=n.createElement("script"),Ct(f),Vt(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},s.set(c,f))}}function up(e,t,n,s){var c=(c=Q.current)?vo(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Fs(n.href),n=ha(c).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Fs(n.href);var f=ha(c).hoistableStyles,y=f.get(e);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=c.querySelector(Zr(e)))&&!f._p&&(y.instance=f,y.state.loading=5),jn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},jn.set(e,n),f||Px(c,e,n,y.state))),t&&s===null)throw Error(o(528,""));return y}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ys(n),n=ha(c).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Fs(e){return'href="'+xn(e)+'"'}function Zr(e){return'link[rel="stylesheet"]['+e+"]"}function fp(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Px(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Vt(t,"link",n),Ct(t),e.head.appendChild(t))}function Ys(e){return'[src="'+xn(e)+'"]'}function Jr(e){return"script[async]"+e}function hp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+xn(n.href)+'"]');if(s)return t.instance=s,Ct(s),s;var c=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ct(s),Vt(s,"style",c),_o(s,n.precedence,e),t.instance=s;case"stylesheet":c=Fs(n.href);var f=e.querySelector(Zr(c));if(f)return t.state.loading|=4,t.instance=f,Ct(f),f;s=fp(n),(c=jn.get(c))&&Gc(s,c),f=(e.ownerDocument||e).createElement("link"),Ct(f);var y=f;return y._p=new Promise(function(b,D){y.onload=b,y.onerror=D}),Vt(f,"link",s),t.state.loading|=4,_o(f,n.precedence,e),t.instance=f;case"script":return f=Ys(n.src),(c=e.querySelector(Jr(f)))?(t.instance=c,Ct(c),c):(s=n,(c=jn.get(f))&&(s=x({},n),Vc(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),Ct(c),Vt(c,"link",s),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,_o(s,n.precedence,e));return t.instance}function _o(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,f=c,y=0;y<s.length;y++){var b=s[y];if(b.dataset.precedence===t)f=b;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Gc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Vc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var So=null;function pp(e,t,n){if(So===null){var s=new Map,c=So=new Map;c.set(n,s)}else c=So,s=c.get(n),s||(s=new Map,c.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var f=n[c];if(!(f[Ha]||f[$t]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(t)||"";y=e+y;var b=s.get(y);b?b.push(f):s.set(y,[f])}}return s}function gp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Hx(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function mp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ei=null;function Wx(){}function Fx(e,t,n){if(ei===null)throw Error(o(475));var s=ei;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var c=Fs(n.href),f=e.querySelector(Zr(c));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=wo.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=f,Ct(f);return}f=e.ownerDocument||e,n=fp(n),(c=jn.get(c))&&Gc(n,c),f=f.createElement("link"),Ct(f);var y=f;y._p=new Promise(function(b,D){y.onload=b,y.onerror=D}),Vt(f,"link",n),t.instance=f}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(s.count++,t=wo.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function Yx(){if(ei===null)throw Error(o(475));var e=ei;return e.stylesheets&&e.count===0&&Xc(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Xc(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function wo(){if(this.count--,this.count===0){if(this.stylesheets)Xc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var jo=null;function Xc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,jo=new Map,t.forEach(Gx,e),jo=null,wo.call(e))}function Gx(e,t){if(!(t.state.loading&4)){var n=jo.get(e);if(n)var s=n.get(null);else{n=new Map,jo.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var y=c[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(n.set(y.dataset.precedence,y),s=y)}s&&n.set(null,s)}c=t.instance,y=c.getAttribute("data-precedence"),f=n.get(y)||s,f===s&&n.set(null,c),n.set(y,c),this.count++,s=wo.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var ti={$$typeof:U,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Vx(e,t,n,s,c,f,y,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=St(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=St(0),this.hiddenUpdates=St(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function xp(e,t,n,s,c,f,y,b,D,Y,te,ie){return e=new Vx(e,t,n,y,b,D,Y,ie),t=1,f===!0&&(t|=24),f=cn(3,null,null,t),e.current=f,f.stateNode=e,t=Nl(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:s,isDehydrated:n,cache:t},Ml(f),e}function yp(e){return e?(e=ws,e):ws}function bp(e,t,n,s,c,f){c=yp(c),s.context===null?s.context=c:s.pendingContext=c,s=ba(t),s.payload={element:n},f=f===void 0?null:f,f!==null&&(s.callback=f),n=va(e,s,t),n!==null&&(pn(n,e,t),zr(n,e,t))}function vp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Kc(e,t){vp(e,t),(e=e.alternate)&&vp(e,t)}function _p(e){if(e.tag===13){var t=Ss(e,67108864);t!==null&&pn(t,e,67108864),Kc(e,67108864)}}var ko=!0;function Xx(e,t,n,s){var c=I.T;I.T=null;var f=J.p;try{J.p=2,Qc(e,t,n,s)}finally{J.p=f,I.T=c}}function Kx(e,t,n,s){var c=I.T;I.T=null;var f=J.p;try{J.p=8,Qc(e,t,n,s)}finally{J.p=f,I.T=c}}function Qc(e,t,n,s){if(ko){var c=Zc(s);if(c===null)Ic(e,t,s,Co,n),wp(e,s);else if(Zx(c,e,t,n,s))s.stopPropagation();else if(wp(e,s),t&4&&-1<Qx.indexOf(e)){for(;c!==null;){var f=Wn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=it(f.pendingLanes);if(y!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;y;){var D=1<<31-Pe(y);b.entanglements[1]|=D,y&=~D}$n(f),(st&6)===0&&(lo=gt()+500,Vr(0))}}break;case 13:b=Ss(f,2),b!==null&&pn(b,f,2),uo(),Kc(f,2)}if(f=Zc(s),f===null&&Ic(e,t,s,Co,n),f===c)break;c=f}c!==null&&s.stopPropagation()}else Ic(e,t,s,null,n)}}function Zc(e){return e=al(e),Jc(e)}var Co=null;function Jc(e){if(Co=null,e=Hn(e),e!==null){var t=u(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=h(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Co=e,null}function Sp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case z:return 2;case ke:return 8;case Ee:case Ze:return 32;case nt:return 268435456;default:return 32}default:return 32}}var ed=!1,Aa=null,Ma=null,Ba=null,ni=new Map,ai=new Map,Oa=[],Qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wp(e,t){switch(e){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":ni.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(t.pointerId)}}function si(e,t,n,s,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:f,targetContainers:[c]},t!==null&&(t=Wn(t),t!==null&&_p(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Zx(e,t,n,s,c){switch(t){case"focusin":return Aa=si(Aa,e,t,n,s,c),!0;case"dragenter":return Ma=si(Ma,e,t,n,s,c),!0;case"mouseover":return Ba=si(Ba,e,t,n,s,c),!0;case"pointerover":var f=c.pointerId;return ni.set(f,si(ni.get(f)||null,e,t,n,s,c)),!0;case"gotpointercapture":return f=c.pointerId,ai.set(f,si(ai.get(f)||null,e,t,n,s,c)),!0}return!1}function jp(e){var t=Hn(e.target);if(t!==null){var n=u(t);if(n!==null){if(t=n.tag,t===13){if(t=h(n),t!==null){e.blockedOn=t,Vo(e.priority,function(){if(n.tag===13){var s=hn();s=mn(s);var c=Ss(n,s);c!==null&&pn(c,n,s),Kc(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function To(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zc(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);nl=s,n.target.dispatchEvent(s),nl=null}else return t=Wn(n),t!==null&&_p(t),e.blockedOn=n,!1;t.shift()}return!0}function kp(e,t,n){To(e)&&n.delete(t)}function Jx(){ed=!1,Aa!==null&&To(Aa)&&(Aa=null),Ma!==null&&To(Ma)&&(Ma=null),Ba!==null&&To(Ba)&&(Ba=null),ni.forEach(kp),ai.forEach(kp)}function Eo(e,t){e.blockedOn===t&&(e.blockedOn=null,ed||(ed=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Jx)))}var Ro=null;function Cp(e){Ro!==e&&(Ro=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Ro===e&&(Ro=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],c=e[t+2];if(typeof s!="function"){if(Jc(s||n)===null)continue;break}var f=Wn(n);f!==null&&(e.splice(t,3),t-=3,Jl(f,{pending:!0,data:c,method:n.method,action:s},s,c))}}))}function ri(e){function t(D){return Eo(D,e)}Aa!==null&&Eo(Aa,e),Ma!==null&&Eo(Ma,e),Ba!==null&&Eo(Ba,e),ni.forEach(t),ai.forEach(t);for(var n=0;n<Oa.length;n++){var s=Oa[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Oa.length&&(n=Oa[0],n.blockedOn===null);)jp(n),n.blockedOn===null&&Oa.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var c=n[s],f=n[s+1],y=c[Kt]||null;if(typeof f=="function")y||Cp(n);else if(y){var b=null;if(f&&f.hasAttribute("formAction")){if(c=f,y=f[Kt]||null)b=y.formAction;else if(Jc(c)!==null)continue}else b=y.action;typeof b=="function"?n[s+1]=b:(n.splice(s,3),s-=3),Cp(n)}}}function td(e){this._internalRoot=e}No.prototype.render=td.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var n=t.current,s=hn();bp(n,s,e,t,null,null)},No.prototype.unmount=td.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bp(e.current,2,null,e,null,null),uo(),t[ua]=null}};function No(e){this._internalRoot=e}No.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pa();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Oa.length&&t!==0&&t<Oa[n].priority;n++);Oa.splice(n,0,e),n===0&&jp(e)}};var Tp=r.version;if(Tp!=="19.1.1")throw Error(o(527,Tp,"19.1.1"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=m(t),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var ey={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zo.isDisabled&&zo.supportsFiber)try{H=zo.inject(ey),pe=zo}catch{}}return oi.createRoot=function(e,t){if(!d(e))throw Error(o(299));var n=!1,s="",c=Hf,f=Wf,y=Ff,b=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(b=t.unstable_transitionCallbacks)),t=xp(e,1,!1,null,null,n,s,c,f,y,b,null),e[ua]=t.current,Lc(e),new td(t)},oi.hydrateRoot=function(e,t,n){if(!d(e))throw Error(o(299));var s=!1,c="",f=Hf,y=Wf,b=Ff,D=null,Y=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(D=n.unstable_transitionCallbacks),n.formState!==void 0&&(Y=n.formState)),t=xp(e,1,!0,t,n??null,s,c,f,y,b,D,Y),t.context=yp(null),n=t.current,s=hn(),s=mn(s),c=ba(s),c.callback=null,va(n,c,s),n=s,t.current.lanes=n,xt(t,n),$n(t),e[ua]=t.current,Lc(e),new No(t)},oi.version="19.1.1",oi}var Lp;function uy(){if(Lp)return sd.exports;Lp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),sd.exports=dy(),sd.exports}var fy=uy();const hy=Md(fy);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ip="popstate";function py(l={}){function r(o,d){let{pathname:u,search:h,hash:g}=o.location;return bd("",{pathname:u,search:h,hash:g},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function i(o,d){return typeof d=="string"?d:pi(d)}return my(r,i,null,l)}function _t(l,r){if(l===!1||l===null||typeof l>"u")throw new Error(r)}function kn(l,r){if(!l){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function gy(){return Math.random().toString(36).substring(2,10)}function Up(l,r){return{usr:l.state,key:l.key,idx:r}}function bd(l,r,i=null,o){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof r=="string"?ir(r):r,state:i,key:r&&r.key||o||gy()}}function pi({pathname:l="/",search:r="",hash:i=""}){return r&&r!=="?"&&(l+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(l+=i.charAt(0)==="#"?i:"#"+i),l}function ir(l){let r={};if(l){let i=l.indexOf("#");i>=0&&(r.hash=l.substring(i),l=l.substring(0,i));let o=l.indexOf("?");o>=0&&(r.search=l.substring(o),l=l.substring(0,o)),l&&(r.pathname=l)}return r}function my(l,r,i,o={}){let{window:d=document.defaultView,v5Compat:u=!1}=o,h=d.history,g="POP",m=null,p=x();p==null&&(p=0,h.replaceState({...h.state,idx:p},""));function x(){return(h.state||{idx:null}).idx}function S(){g="POP";let A=x(),P=A==null?null:A-p;p=A,m&&m({action:g,location:N.location,delta:P})}function k(A,P){g="PUSH";let E=bd(N.location,A,P);p=x()+1;let U=Up(E,p),Z=N.createHref(E);try{h.pushState(U,"",Z)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;d.location.assign(Z)}u&&m&&m({action:g,location:N.location,delta:1})}function j(A,P){g="REPLACE";let E=bd(N.location,A,P);p=x();let U=Up(E,p),Z=N.createHref(E);h.replaceState(U,"",Z),u&&m&&m({action:g,location:N.location,delta:0})}function C(A){return xy(A)}let N={get action(){return g},get location(){return l(d,h)},listen(A){if(m)throw new Error("A history only accepts one active listener");return d.addEventListener(Ip,S),m=A,()=>{d.removeEventListener(Ip,S),m=null}},createHref(A){return r(d,A)},createURL:C,encodeLocation(A){let P=C(A);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:k,replace:j,go(A){return h.go(A)}};return N}function xy(l,r=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),_t(i,"No window.location.(origin|href) available to create URL");let o=typeof l=="string"?l:pi(l);return o=o.replace(/ $/,"%20"),!r&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function mg(l,r,i="/"){return yy(l,r,i,!1)}function yy(l,r,i,o){let d=typeof r=="string"?ir(r):r,u=da(d.pathname||"/",i);if(u==null)return null;let h=xg(l);by(h);let g=null;for(let m=0;g==null&&m<h.length;++m){let p=Ny(u);g=Ey(h[m],p,o)}return g}function xg(l,r=[],i=[],o="",d=!1){let u=(h,g,m=d,p)=>{let x={relativePath:p===void 0?h.path||"":p,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(o)&&m)return;_t(x.relativePath.startsWith(o),`Absolute route path "${x.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(o.length)}let S=ca([o,x.relativePath]),k=i.concat(x);h.children&&h.children.length>0&&(_t(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),xg(h.children,r,k,S,m)),!(h.path==null&&!h.index)&&r.push({path:S,score:Cy(S,h.index),routesMeta:k})};return l.forEach((h,g)=>{if(h.path===""||!h.path?.includes("?"))u(h,g);else for(let m of yg(h.path))u(h,g,!0,m)}),r}function yg(l){let r=l.split("/");if(r.length===0)return[];let[i,...o]=r,d=i.endsWith("?"),u=i.replace(/\?$/,"");if(o.length===0)return d?[u,""]:[u];let h=yg(o.join("/")),g=[];return g.push(...h.map(m=>m===""?u:[u,m].join("/"))),d&&g.push(...h),g.map(m=>l.startsWith("/")&&m===""?"/":m)}function by(l){l.sort((r,i)=>r.score!==i.score?i.score-r.score:Ty(r.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var vy=/^:[\w-]+$/,_y=3,Sy=2,wy=1,jy=10,ky=-2,qp=l=>l==="*";function Cy(l,r){let i=l.split("/"),o=i.length;return i.some(qp)&&(o+=ky),r&&(o+=Sy),i.filter(d=>!qp(d)).reduce((d,u)=>d+(vy.test(u)?_y:u===""?wy:jy),o)}function Ty(l,r){return l.length===r.length&&l.slice(0,-1).every((o,d)=>o===r[d])?l[l.length-1]-r[r.length-1]:0}function Ey(l,r,i=!1){let{routesMeta:o}=l,d={},u="/",h=[];for(let g=0;g<o.length;++g){let m=o[g],p=g===o.length-1,x=u==="/"?r:r.slice(u.length)||"/",S=Po({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},x),k=m.route;if(!S&&p&&i&&!o[o.length-1].route.index&&(S=Po({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},x)),!S)return null;Object.assign(d,S.params),h.push({params:d,pathname:ca([u,S.pathname]),pathnameBase:My(ca([u,S.pathnameBase])),route:k}),S.pathnameBase!=="/"&&(u=ca([u,S.pathnameBase]))}return h}function Po(l,r){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[i,o]=Ry(l.path,l.caseSensitive,l.end),d=r.match(i);if(!d)return null;let u=d[0],h=u.replace(/(.)\/+$/,"$1"),g=d.slice(1);return{params:o.reduce((p,{paramName:x,isOptional:S},k)=>{if(x==="*"){let C=g[k]||"";h=u.slice(0,u.length-C.length).replace(/(.)\/+$/,"$1")}const j=g[k];return S&&!j?p[x]=void 0:p[x]=(j||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:h,pattern:l}}function Ry(l,r=!1,i=!0){kn(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let o=[],d="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,m)=>(o.push({paramName:g,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(o.push({paramName:"*"}),d+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?d+="\\/*$":l!==""&&l!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,r?void 0:"i"),o]}function Ny(l){try{return l.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return kn(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),l}}function da(l,r){if(r==="/")return l;if(!l.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,o=l.charAt(i);return o&&o!=="/"?null:l.slice(i)||"/"}function zy(l,r="/"){let{pathname:i,search:o="",hash:d=""}=typeof l=="string"?ir(l):l;return{pathname:i?i.startsWith("/")?i:Dy(i,r):r,search:By(o),hash:Oy(d)}}function Dy(l,r){let i=r.replace(/\/+$/,"").split("/");return l.split("/").forEach(d=>{d===".."?i.length>1&&i.pop():d!=="."&&i.push(d)}),i.length>1?i.join("/"):"/"}function ld(l,r,i,o){return`Cannot include a '${l}' character in a manually specified \`to.${r}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ay(l){return l.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function Od(l){let r=Ay(l);return r.map((i,o)=>o===r.length-1?i.pathname:i.pathnameBase)}function Ld(l,r,i,o=!1){let d;typeof l=="string"?d=ir(l):(d={...l},_t(!d.pathname||!d.pathname.includes("?"),ld("?","pathname","search",d)),_t(!d.pathname||!d.pathname.includes("#"),ld("#","pathname","hash",d)),_t(!d.search||!d.search.includes("#"),ld("#","search","hash",d)));let u=l===""||d.pathname==="",h=u?"/":d.pathname,g;if(h==null)g=i;else{let S=r.length-1;if(!o&&h.startsWith("..")){let k=h.split("/");for(;k[0]==="..";)k.shift(),S-=1;d.pathname=k.join("/")}g=S>=0?r[S]:"/"}let m=zy(d,g),p=h&&h!=="/"&&h.endsWith("/"),x=(u||h===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(p||x)&&(m.pathname+="/"),m}var ca=l=>l.join("/").replace(/\/\/+/g,"/"),My=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),By=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Oy=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function Ly(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var bg=["POST","PUT","PATCH","DELETE"];new Set(bg);var Iy=["GET",...bg];new Set(Iy);var or=v.createContext(null);or.displayName="DataRouter";var Fo=v.createContext(null);Fo.displayName="DataRouterState";v.createContext(!1);var vg=v.createContext({isTransitioning:!1});vg.displayName="ViewTransition";var Uy=v.createContext(new Map);Uy.displayName="Fetchers";var qy=v.createContext(null);qy.displayName="Await";var zn=v.createContext(null);zn.displayName="Navigation";var mi=v.createContext(null);mi.displayName="Location";var Dn=v.createContext({outlet:null,matches:[],isDataRoute:!1});Dn.displayName="Route";var Id=v.createContext(null);Id.displayName="RouteError";function $y(l,{relative:r}={}){_t(lr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=v.useContext(zn),{hash:d,pathname:u,search:h}=xi(l,{relative:r}),g=u;return i!=="/"&&(g=u==="/"?i:ca([i,u])),o.createHref({pathname:g,search:h,hash:d})}function lr(){return v.useContext(mi)!=null}function An(){return _t(lr(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(mi).location}var _g="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sg(l){v.useContext(zn).static||v.useLayoutEffect(l)}function ds(){let{isDataRoute:l}=v.useContext(Dn);return l?t0():Py()}function Py(){_t(lr(),"useNavigate() may be used only in the context of a <Router> component.");let l=v.useContext(or),{basename:r,navigator:i}=v.useContext(zn),{matches:o}=v.useContext(Dn),{pathname:d}=An(),u=JSON.stringify(Od(o)),h=v.useRef(!1);return Sg(()=>{h.current=!0}),v.useCallback((m,p={})=>{if(kn(h.current,_g),!h.current)return;if(typeof m=="number"){i.go(m);return}let x=Ld(m,JSON.parse(u),d,p.relative==="path");l==null&&r!=="/"&&(x.pathname=x.pathname==="/"?r:ca([r,x.pathname])),(p.replace?i.replace:i.push)(x,p.state,p)},[r,i,u,d,l])}v.createContext(null);function Hy(){let{matches:l}=v.useContext(Dn),r=l[l.length-1];return r?r.params:{}}function xi(l,{relative:r}={}){let{matches:i}=v.useContext(Dn),{pathname:o}=An(),d=JSON.stringify(Od(i));return v.useMemo(()=>Ld(l,JSON.parse(d),o,r==="path"),[l,d,o,r])}function Wy(l,r){return wg(l,r)}function wg(l,r,i,o,d){_t(lr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=v.useContext(zn),{matches:h}=v.useContext(Dn),g=h[h.length-1],m=g?g.params:{},p=g?g.pathname:"/",x=g?g.pathnameBase:"/",S=g&&g.route;{let E=S&&S.path||"";jg(p,!S||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let k=An(),j;if(r){let E=typeof r=="string"?ir(r):r;_t(x==="/"||E.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${E.pathname}" was given in the \`location\` prop.`),j=E}else j=k;let C=j.pathname||"/",N=C;if(x!=="/"){let E=x.replace(/^\//,"").split("/");N="/"+C.replace(/^\//,"").split("/").slice(E.length).join("/")}let A=mg(l,{pathname:N});kn(S||A!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),kn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=Xy(A&&A.map(E=>Object.assign({},E,{params:Object.assign({},m,E.params),pathname:ca([x,u.encodeLocation?u.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?x:ca([x,u.encodeLocation?u.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),h,i,o,d);return r&&P?v.createElement(mi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},P):P}function Fy(){let l=e0(),r=Ly(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),i=l instanceof Error?l.stack:null,o="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},h=null;return console.error("Error handled by React Router default ErrorBoundary:",l),h=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:u},"ErrorBoundary")," or"," ",v.createElement("code",{style:u},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},r),i?v.createElement("pre",{style:d},i):null,h)}var Yy=v.createElement(Fy,null),Gy=class extends v.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,r){return r.location!==l.location||r.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:r.error,location:r.location,revalidation:l.revalidation||r.revalidation}}componentDidCatch(l,r){this.props.unstable_onError?this.props.unstable_onError(l,r):console.error("React Router caught the following error during render",l)}render(){return this.state.error!==void 0?v.createElement(Dn.Provider,{value:this.props.routeContext},v.createElement(Id.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Vy({routeContext:l,match:r,children:i}){let o=v.useContext(or);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(Dn.Provider,{value:l},i)}function Xy(l,r=[],i=null,o=null,d=null){if(l==null){if(!i)return null;if(i.errors)l=i.matches;else if(r.length===0&&!i.initialized&&i.matches.length>0)l=i.matches;else return null}let u=l,h=i?.errors;if(h!=null){let p=u.findIndex(x=>x.route.id&&h?.[x.route.id]!==void 0);_t(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,p+1))}let g=!1,m=-1;if(i)for(let p=0;p<u.length;p++){let x=u[p];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=p),x.route.id){let{loaderData:S,errors:k}=i,j=x.route.loader&&!S.hasOwnProperty(x.route.id)&&(!k||k[x.route.id]===void 0);if(x.route.lazy||j){g=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((p,x,S)=>{let k,j=!1,C=null,N=null;i&&(k=h&&x.route.id?h[x.route.id]:void 0,C=x.route.errorElement||Yy,g&&(m<0&&S===0?(jg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,N=null):m===S&&(j=!0,N=x.route.hydrateFallbackElement||null)));let A=r.concat(u.slice(0,S+1)),P=()=>{let E;return k?E=C:j?E=N:x.route.Component?E=v.createElement(x.route.Component,null):x.route.element?E=x.route.element:E=p,v.createElement(Vy,{match:x,routeContext:{outlet:p,matches:A,isDataRoute:i!=null},children:E})};return i&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?v.createElement(Gy,{location:i.location,revalidation:i.revalidation,component:C,error:k,children:P(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:o}):P()},null)}function Ud(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ky(l){let r=v.useContext(or);return _t(r,Ud(l)),r}function Qy(l){let r=v.useContext(Fo);return _t(r,Ud(l)),r}function Zy(l){let r=v.useContext(Dn);return _t(r,Ud(l)),r}function qd(l){let r=Zy(l),i=r.matches[r.matches.length-1];return _t(i.route.id,`${l} can only be used on routes that contain a unique "id"`),i.route.id}function Jy(){return qd("useRouteId")}function e0(){let l=v.useContext(Id),r=Qy("useRouteError"),i=qd("useRouteError");return l!==void 0?l:r.errors?.[i]}function t0(){let{router:l}=Ky("useNavigate"),r=qd("useNavigate"),i=v.useRef(!1);return Sg(()=>{i.current=!0}),v.useCallback(async(d,u={})=>{kn(i.current,_g),i.current&&(typeof d=="number"?l.navigate(d):await l.navigate(d,{fromRouteId:r,...u}))},[l,r])}var $p={};function jg(l,r,i){!r&&!$p[l]&&($p[l]=!0,kn(!1,i))}v.memo(n0);function n0({routes:l,future:r,state:i,unstable_onError:o}){return wg(l,void 0,i,o,r)}function Pp({to:l,replace:r,state:i,relative:o}){_t(lr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=v.useContext(zn);kn(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=v.useContext(Dn),{pathname:h}=An(),g=ds(),m=Ld(l,Od(u),h,o==="path"),p=JSON.stringify(m);return v.useEffect(()=>{g(JSON.parse(p),{replace:r,state:i,relative:o})},[g,p,o,r,i]),null}function ia(l){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function a0({basename:l="/",children:r=null,location:i,navigationType:o="POP",navigator:d,static:u=!1}){_t(!lr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=l.replace(/^\/*/,"/"),g=v.useMemo(()=>({basename:h,navigator:d,static:u,future:{}}),[h,d,u]);typeof i=="string"&&(i=ir(i));let{pathname:m="/",search:p="",hash:x="",state:S=null,key:k="default"}=i,j=v.useMemo(()=>{let C=da(m,h);return C==null?null:{location:{pathname:C,search:p,hash:x,state:S,key:k},navigationType:o}},[h,m,p,x,S,k,o]);return kn(j!=null,`<Router basename="${h}"> is not able to match the URL "${m}${p}${x}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:v.createElement(zn.Provider,{value:g},v.createElement(mi.Provider,{children:r,value:j}))}function s0({children:l,location:r}){return Wy(vd(l),r)}function vd(l,r=[]){let i=[];return v.Children.forEach(l,(o,d)=>{if(!v.isValidElement(o))return;let u=[...r,d];if(o.type===v.Fragment){i.push.apply(i,vd(o.props.children,u));return}_t(o.type===ia,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!o.props.index||!o.props.children,"An index route cannot have child routes.");let h={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=vd(o.props.children,u)),i.push(h)}),i}var qo="get",$o="application/x-www-form-urlencoded";function Yo(l){return l!=null&&typeof l.tagName=="string"}function r0(l){return Yo(l)&&l.tagName.toLowerCase()==="button"}function i0(l){return Yo(l)&&l.tagName.toLowerCase()==="form"}function o0(l){return Yo(l)&&l.tagName.toLowerCase()==="input"}function l0(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function c0(l,r){return l.button===0&&(!r||r==="_self")&&!l0(l)}function _d(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((r,i)=>{let o=l[i];return r.concat(Array.isArray(o)?o.map(d=>[i,d]):[[i,o]])},[]))}function d0(l,r){let i=_d(l);return r&&r.forEach((o,d)=>{i.has(d)||r.getAll(d).forEach(u=>{i.append(d,u)})}),i}var Do=null;function u0(){if(Do===null)try{new FormData(document.createElement("form"),0),Do=!1}catch{Do=!0}return Do}var f0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cd(l){return l!=null&&!f0.has(l)?(kn(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$o}"`),null):l}function h0(l,r){let i,o,d,u,h;if(i0(l)){let g=l.getAttribute("action");o=g?da(g,r):null,i=l.getAttribute("method")||qo,d=cd(l.getAttribute("enctype"))||$o,u=new FormData(l)}else if(r0(l)||o0(l)&&(l.type==="submit"||l.type==="image")){let g=l.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=l.getAttribute("formaction")||g.getAttribute("action");if(o=m?da(m,r):null,i=l.getAttribute("formmethod")||g.getAttribute("method")||qo,d=cd(l.getAttribute("formenctype"))||cd(g.getAttribute("enctype"))||$o,u=new FormData(g,l),!u0()){let{name:p,type:x,value:S}=l;if(x==="image"){let k=p?`${p}.`:"";u.append(`${k}x`,"0"),u.append(`${k}y`,"0")}else p&&u.append(p,S)}}else{if(Yo(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=qo,o=null,d=$o,h=l}return u&&d==="text/plain"&&(h=u,u=void 0),{action:o,method:i.toLowerCase(),encType:d,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $d(l,r){if(l===!1||l===null||typeof l>"u")throw new Error(r)}function p0(l,r,i){let o=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return o.pathname==="/"?o.pathname=`_root.${i}`:r&&da(o.pathname,r)==="/"?o.pathname=`${r.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function g0(l,r){if(l.id in r)return r[l.id];try{let i=await import(l.module);return r[l.id]=i,i}catch(i){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function m0(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function x0(l,r,i){let o=await Promise.all(l.map(async d=>{let u=r.routes[d.route.id];if(u){let h=await g0(u,i);return h.links?h.links():[]}return[]}));return _0(o.flat(1).filter(m0).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Hp(l,r,i,o,d,u){let h=(m,p)=>i[p]?m.route.id!==i[p].route.id:!0,g=(m,p)=>i[p].pathname!==m.pathname||i[p].route.path?.endsWith("*")&&i[p].params["*"]!==m.params["*"];return u==="assets"?r.filter((m,p)=>h(m,p)||g(m,p)):u==="data"?r.filter((m,p)=>{let x=o.routes[m.route.id];if(!x||!x.hasLoader)return!1;if(h(m,p)||g(m,p))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function y0(l,r,{includeHydrateFallback:i}={}){return b0(l.map(o=>{let d=r.routes[o.route.id];if(!d)return[];let u=[d.module];return d.clientActionModule&&(u=u.concat(d.clientActionModule)),d.clientLoaderModule&&(u=u.concat(d.clientLoaderModule)),i&&d.hydrateFallbackModule&&(u=u.concat(d.hydrateFallbackModule)),d.imports&&(u=u.concat(d.imports)),u}).flat(1))}function b0(l){return[...new Set(l)]}function v0(l){let r={},i=Object.keys(l).sort();for(let o of i)r[o]=l[o];return r}function _0(l,r){let i=new Set;return new Set(r),l.reduce((o,d)=>{let u=JSON.stringify(v0(d));return i.has(u)||(i.add(u),o.push({key:u,link:d})),o},[])}function kg(){let l=v.useContext(or);return $d(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function S0(){let l=v.useContext(Fo);return $d(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var Pd=v.createContext(void 0);Pd.displayName="FrameworkContext";function Cg(){let l=v.useContext(Pd);return $d(l,"You must render this element inside a <HydratedRouter> element"),l}function w0(l,r){let i=v.useContext(Pd),[o,d]=v.useState(!1),[u,h]=v.useState(!1),{onFocus:g,onBlur:m,onMouseEnter:p,onMouseLeave:x,onTouchStart:S}=r,k=v.useRef(null);v.useEffect(()=>{if(l==="render"&&h(!0),l==="viewport"){let N=P=>{P.forEach(E=>{h(E.isIntersecting)})},A=new IntersectionObserver(N,{threshold:.5});return k.current&&A.observe(k.current),()=>{A.disconnect()}}},[l]),v.useEffect(()=>{if(o){let N=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(N)}}},[o]);let j=()=>{d(!0)},C=()=>{d(!1),h(!1)};return i?l!=="intent"?[u,k,{}]:[u,k,{onFocus:li(g,j),onBlur:li(m,C),onMouseEnter:li(p,j),onMouseLeave:li(x,C),onTouchStart:li(S,j)}]:[!1,k,{}]}function li(l,r){return i=>{l&&l(i),i.defaultPrevented||r(i)}}function j0({page:l,...r}){let{router:i}=kg(),o=v.useMemo(()=>mg(i.routes,l,i.basename),[i.routes,l,i.basename]);return o?v.createElement(C0,{page:l,matches:o,...r}):null}function k0(l){let{manifest:r,routeModules:i}=Cg(),[o,d]=v.useState([]);return v.useEffect(()=>{let u=!1;return x0(l,r,i).then(h=>{u||d(h)}),()=>{u=!0}},[l,r,i]),o}function C0({page:l,matches:r,...i}){let o=An(),{manifest:d,routeModules:u}=Cg(),{basename:h}=kg(),{loaderData:g,matches:m}=S0(),p=v.useMemo(()=>Hp(l,r,m,d,o,"data"),[l,r,m,d,o]),x=v.useMemo(()=>Hp(l,r,m,d,o,"assets"),[l,r,m,d,o]),S=v.useMemo(()=>{if(l===o.pathname+o.search+o.hash)return[];let C=new Set,N=!1;if(r.forEach(P=>{let E=d.routes[P.route.id];!E||!E.hasLoader||(!p.some(U=>U.route.id===P.route.id)&&P.route.id in g&&u[P.route.id]?.shouldRevalidate||E.hasClientLoader?N=!0:C.add(P.route.id))}),C.size===0)return[];let A=p0(l,h,"data");return N&&C.size>0&&A.searchParams.set("_routes",r.filter(P=>C.has(P.route.id)).map(P=>P.route.id).join(",")),[A.pathname+A.search]},[h,g,o,d,p,r,l,u]),k=v.useMemo(()=>y0(x,d),[x,d]),j=k0(x);return v.createElement(v.Fragment,null,S.map(C=>v.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...i})),k.map(C=>v.createElement("link",{key:C,rel:"modulepreload",href:C,...i})),j.map(({key:C,link:N})=>v.createElement("link",{key:C,nonce:i.nonce,...N})))}function T0(...l){return r=>{l.forEach(i=>{typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var Tg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tg&&(window.__reactRouterVersion="7.9.1")}catch{}function E0({basename:l,children:r,window:i}){let o=v.useRef();o.current==null&&(o.current=py({window:i,v5Compat:!0}));let d=o.current,[u,h]=v.useState({action:d.action,location:d.location}),g=v.useCallback(m=>{v.startTransition(()=>h(m))},[h]);return v.useLayoutEffect(()=>d.listen(g),[d,g]),v.createElement(a0,{basename:l,children:r,location:u.location,navigationType:u.action,navigator:d})}var Eg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hd=v.forwardRef(function({onClick:r,discover:i="render",prefetch:o="none",relative:d,reloadDocument:u,replace:h,state:g,target:m,to:p,preventScrollReset:x,viewTransition:S,...k},j){let{basename:C}=v.useContext(zn),N=typeof p=="string"&&Eg.test(p),A,P=!1;if(typeof p=="string"&&N&&(A=p,Tg))try{let ye=new URL(window.location.href),Ae=p.startsWith("//")?new URL(ye.protocol+p):new URL(p),R=da(Ae.pathname,C);Ae.origin===ye.origin&&R!=null?p=R+Ae.search+Ae.hash:P=!0}catch{kn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=$y(p,{relative:d}),[U,Z,G]=w0(o,k),re=D0(p,{replace:h,state:g,target:m,preventScrollReset:x,relative:d,viewTransition:S});function de(ye){r&&r(ye),ye.defaultPrevented||re(ye)}let ve=v.createElement("a",{...k,...G,href:A||E,onClick:P||u?r:de,ref:T0(j,Z),target:m,"data-discover":!N&&i==="render"?"true":void 0});return U&&!N?v.createElement(v.Fragment,null,ve,v.createElement(j0,{page:E})):ve});Hd.displayName="Link";var R0=v.forwardRef(function({"aria-current":r="page",caseSensitive:i=!1,className:o="",end:d=!1,style:u,to:h,viewTransition:g,children:m,...p},x){let S=xi(h,{relative:p.relative}),k=An(),j=v.useContext(Fo),{navigator:C,basename:N}=v.useContext(zn),A=j!=null&&I0(S)&&g===!0,P=C.encodeLocation?C.encodeLocation(S).pathname:S.pathname,E=k.pathname,U=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;i||(E=E.toLowerCase(),U=U?U.toLowerCase():null,P=P.toLowerCase()),U&&N&&(U=da(U,N)||U);const Z=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let G=E===P||!d&&E.startsWith(P)&&E.charAt(Z)==="/",re=U!=null&&(U===P||!d&&U.startsWith(P)&&U.charAt(P.length)==="/"),de={isActive:G,isPending:re,isTransitioning:A},ve=G?r:void 0,ye;typeof o=="function"?ye=o(de):ye=[o,G?"active":null,re?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let Ae=typeof u=="function"?u(de):u;return v.createElement(Hd,{...p,"aria-current":ve,className:ye,ref:x,style:Ae,to:h,viewTransition:g},typeof m=="function"?m(de):m)});R0.displayName="NavLink";var N0=v.forwardRef(({discover:l="render",fetcherKey:r,navigate:i,reloadDocument:o,replace:d,state:u,method:h=qo,action:g,onSubmit:m,relative:p,preventScrollReset:x,viewTransition:S,...k},j)=>{let C=O0(),N=L0(g,{relative:p}),A=h.toLowerCase()==="get"?"get":"post",P=typeof g=="string"&&Eg.test(g),E=U=>{if(m&&m(U),U.defaultPrevented)return;U.preventDefault();let Z=U.nativeEvent.submitter,G=Z?.getAttribute("formmethod")||h;C(Z||U.currentTarget,{fetcherKey:r,method:G,navigate:i,replace:d,state:u,relative:p,preventScrollReset:x,viewTransition:S})};return v.createElement("form",{ref:j,method:A,action:N,onSubmit:o?m:E,...k,"data-discover":!P&&l==="render"?"true":void 0})});N0.displayName="Form";function z0(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rg(l){let r=v.useContext(or);return _t(r,z0(l)),r}function D0(l,{target:r,replace:i,state:o,preventScrollReset:d,relative:u,viewTransition:h}={}){let g=ds(),m=An(),p=xi(l,{relative:u});return v.useCallback(x=>{if(c0(x,r)){x.preventDefault();let S=i!==void 0?i:pi(m)===pi(p);g(l,{replace:S,state:o,preventScrollReset:d,relative:u,viewTransition:h})}},[m,g,p,i,o,r,l,d,u,h])}function A0(l){kn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=v.useRef(_d(l)),i=v.useRef(!1),o=An(),d=v.useMemo(()=>d0(o.search,i.current?null:r.current),[o.search]),u=ds(),h=v.useCallback((g,m)=>{const p=_d(typeof g=="function"?g(new URLSearchParams(d)):g);i.current=!0,u("?"+p,m)},[u,d]);return[d,h]}var M0=0,B0=()=>`__${String(++M0)}__`;function O0(){let{router:l}=Rg("useSubmit"),{basename:r}=v.useContext(zn),i=Jy();return v.useCallback(async(o,d={})=>{let{action:u,method:h,encType:g,formData:m,body:p}=h0(o,r);if(d.navigate===!1){let x=d.fetcherKey||B0();await l.fetch(x,i,d.action||u,{preventScrollReset:d.preventScrollReset,formData:m,body:p,formMethod:d.method||h,formEncType:d.encType||g,flushSync:d.flushSync})}else await l.navigate(d.action||u,{preventScrollReset:d.preventScrollReset,formData:m,body:p,formMethod:d.method||h,formEncType:d.encType||g,replace:d.replace,state:d.state,fromRouteId:i,flushSync:d.flushSync,viewTransition:d.viewTransition})},[l,r,i])}function L0(l,{relative:r}={}){let{basename:i}=v.useContext(zn),o=v.useContext(Dn);_t(o,"useFormAction must be used inside a RouteContext");let[d]=o.matches.slice(-1),u={...xi(l||".",{relative:r})},h=An();if(l==null){u.search=h.search;let g=new URLSearchParams(u.search),m=g.getAll("index");if(m.some(x=>x==="")){g.delete("index"),m.filter(S=>S).forEach(S=>g.append("index",S));let x=g.toString();u.search=x?`?${x}`:""}}return(!l||l===".")&&d.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:ca([i,u.pathname])),pi(u)}function I0(l,{relative:r}={}){let i=v.useContext(vg);_t(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Rg("useViewTransitionState"),d=xi(l,{relative:r});if(!i.isTransitioning)return!1;let u=da(i.currentLocation.pathname,o)||i.currentLocation.pathname,h=da(i.nextLocation.pathname,o)||i.nextLocation.pathname;return Po(d.pathname,h)!=null||Po(d.pathname,u)!=null}const U0="modulepreload",q0=function(l){return"/retailpos/"+l},Wp={},yi=function(r,i,o){let d=Promise.resolve();if(i&&i.length>0){let p=function(x){return Promise.all(x.map(S=>Promise.resolve(S).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};var h=p;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),m=g?.nonce||g?.getAttribute("nonce");d=p(i.map(x=>{if(x=q0(x),x in Wp)return;Wp[x]=!0;const S=x.endsWith(".css"),k=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${k}`))return;const j=document.createElement("link");if(j.rel=S?"stylesheet":U0,S||(j.as="script"),j.crossOrigin="",j.href=x,m&&j.setAttribute("nonce",m),document.head.appendChild(j),S)return new Promise((C,N)=>{j.addEventListener("load",C),j.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(g){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=g,window.dispatchEvent(m),!m.defaultPrevented)throw g}return d.then(g=>{for(const m of g||[])m.status==="rejected"&&u(m.reason);return r().catch(u)})},$0=l=>{let r;return l?r=l:typeof fetch>"u"?r=(...i)=>yi(async()=>{const{default:o}=await Promise.resolve().then(()=>cr);return{default:o}},[]).then(({default:o})=>o(...i)):r=fetch,(...i)=>r(...i)};class Wd extends Error{constructor(r,i="FunctionsError",o){super(r),this.name=i,this.context=o}}class P0 extends Wd{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Fp extends Wd{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Yp extends Wd{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Sd;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(Sd||(Sd={}));var H0=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function g(x){try{p(o.next(x))}catch(S){h(S)}}function m(x){try{p(o.throw(x))}catch(S){h(S)}}function p(x){x.done?u(x.value):d(x.value).then(g,m)}p((o=o.apply(l,r||[])).next())})};class W0{constructor(r,{headers:i={},customFetch:o,region:d=Sd.Any}={}){this.url=r,this.headers=i,this.region=d,this.fetch=$0(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r,i={}){var o;return H0(this,void 0,void 0,function*(){try{const{headers:d,method:u,body:h}=i;let g={},{region:m}=i;m||(m=this.region);const p=new URL(`${this.url}/${r}`);m&&m!=="any"&&(g["x-region"]=m,p.searchParams.set("forceFunctionRegion",m));let x;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(g["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(g["Content-Type"]="application/json",x=JSON.stringify(h)));const S=yield this.fetch(p.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),d),body:x}).catch(N=>{throw new P0(N)}),k=S.headers.get("x-relay-error");if(k&&k==="true")throw new Fp(S);if(!S.ok)throw new Yp(S);let j=((o=S.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),C;return j==="application/json"?C=yield S.json():j==="application/octet-stream"?C=yield S.blob():j==="text/event-stream"?C=S:j==="multipart/form-data"?C=yield S.formData():C=yield S.text(),{data:C,error:null,response:S}}catch(d){return{data:null,error:d,response:d instanceof Yp||d instanceof Fp?d.context:void 0}}})}}var Ft={},Gs={},Vs={},Xs={},Ks={},Qs={},F0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rr=F0();const Y0=rr.fetch,Ng=rr.fetch.bind(rr),zg=rr.Headers,G0=rr.Request,V0=rr.Response,cr=Object.freeze(Object.defineProperty({__proto__:null,Headers:zg,Request:G0,Response:V0,default:Ng,fetch:Y0},Symbol.toStringTag,{value:"Module"})),X0=ny(cr);var Ao={},Gp;function Dg(){if(Gp)return Ao;Gp=1,Object.defineProperty(Ao,"__esModule",{value:!0});class l extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Ao.default=l,Ao}var Vp;function Ag(){if(Vp)return Qs;Vp=1;var l=Qs&&Qs.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Qs,"__esModule",{value:!0});const r=l(X0),i=l(Dg());class o{constructor(u){var h,g;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(h=u.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=u.signal,this.isMaybeSingle=(g=u.isMaybeSingle)!==null&&g!==void 0?g:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=new Headers(this.headers),this.headers.set(u,h),this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let m=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var x,S,k,j;let C=null,N=null,A=null,P=p.status,E=p.statusText;if(p.ok){if(this.method!=="HEAD"){const re=await p.text();re===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?N=re:N=JSON.parse(re))}const Z=(S=this.headers.get("Prefer"))===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),G=(k=p.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");Z&&G&&G.length>1&&(A=parseInt(G[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(C={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,A=null,P=406,E="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const Z=await p.text();try{C=JSON.parse(Z),Array.isArray(C)&&p.status===404&&(N=[],C=null,P=200,E="OK")}catch{p.status===404&&Z===""?(P=204,E="No Content"):C={message:Z}}if(C&&this.isMaybeSingle&&(!((j=C?.details)===null||j===void 0)&&j.includes("0 rows"))&&(C=null,P=200,E="OK"),C&&this.shouldThrowOnError)throw new i.default(C)}return{error:C,data:N,count:A,status:P,statusText:E}});return this.shouldThrowOnError||(m=m.catch(p=>{var x,S,k;return{error:{message:`${(x=p?.name)!==null&&x!==void 0?x:"FetchError"}: ${p?.message}`,details:`${(S=p?.stack)!==null&&S!==void 0?S:""}`,hint:"",code:`${(k=p?.code)!==null&&k!==void 0?k:""}`},data:null,count:null,status:0,statusText:""}})),m.then(u,h)}returns(){return this}overrideTypes(){return this}}return Qs.default=o,Qs}var Xp;function Mg(){if(Xp)return Ks;Xp=1;var l=Ks&&Ks.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ks,"__esModule",{value:!0});const r=l(Ag());class i extends r.default{select(d){let u=!1;const h=(d??"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(d,{ascending:u=!0,nullsFirst:h,foreignTable:g,referencedTable:m=g}={}){const p=m?`${m}.order`:"order",x=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${x?`${x},`:""}${d}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(d,{foreignTable:u,referencedTable:h=u}={}){const g=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${d}`),this}range(d,u,{foreignTable:h,referencedTable:g=h}={}){const m=typeof g>"u"?"offset":`${g}.offset`,p=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(m,`${d}`),this.url.searchParams.set(p,`${u-d+1}`),this}abortSignal(d){return this.signal=d,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:d=!1,verbose:u=!1,settings:h=!1,buffers:g=!1,wal:m=!1,format:p="text"}={}){var x;const S=[d?"analyze":null,u?"verbose":null,h?"settings":null,g?"buffers":null,m?"wal":null].filter(Boolean).join("|"),k=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${k}"; options=${S};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(d){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${d}`),this}}return Ks.default=i,Ks}var Kp;function Fd(){if(Kp)return Xs;Kp=1;var l=Xs&&Xs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Xs,"__esModule",{value:!0});const r=l(Mg());class i extends r.default{eq(d,u){return this.url.searchParams.append(d,`eq.${u}`),this}neq(d,u){return this.url.searchParams.append(d,`neq.${u}`),this}gt(d,u){return this.url.searchParams.append(d,`gt.${u}`),this}gte(d,u){return this.url.searchParams.append(d,`gte.${u}`),this}lt(d,u){return this.url.searchParams.append(d,`lt.${u}`),this}lte(d,u){return this.url.searchParams.append(d,`lte.${u}`),this}like(d,u){return this.url.searchParams.append(d,`like.${u}`),this}likeAllOf(d,u){return this.url.searchParams.append(d,`like(all).{${u.join(",")}}`),this}likeAnyOf(d,u){return this.url.searchParams.append(d,`like(any).{${u.join(",")}}`),this}ilike(d,u){return this.url.searchParams.append(d,`ilike.${u}`),this}ilikeAllOf(d,u){return this.url.searchParams.append(d,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(d,u){return this.url.searchParams.append(d,`ilike(any).{${u.join(",")}}`),this}is(d,u){return this.url.searchParams.append(d,`is.${u}`),this}in(d,u){const h=Array.from(new Set(u)).map(g=>typeof g=="string"&&new RegExp("[,()]").test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(d,`in.(${h})`),this}contains(d,u){return typeof u=="string"?this.url.searchParams.append(d,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(d,`cs.{${u.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(u)}`),this}containedBy(d,u){return typeof u=="string"?this.url.searchParams.append(d,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(d,`cd.{${u.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(u)}`),this}rangeGt(d,u){return this.url.searchParams.append(d,`sr.${u}`),this}rangeGte(d,u){return this.url.searchParams.append(d,`nxl.${u}`),this}rangeLt(d,u){return this.url.searchParams.append(d,`sl.${u}`),this}rangeLte(d,u){return this.url.searchParams.append(d,`nxr.${u}`),this}rangeAdjacent(d,u){return this.url.searchParams.append(d,`adj.${u}`),this}overlaps(d,u){return typeof u=="string"?this.url.searchParams.append(d,`ov.${u}`):this.url.searchParams.append(d,`ov.{${u.join(",")}}`),this}textSearch(d,u,{config:h,type:g}={}){let m="";g==="plain"?m="pl":g==="phrase"?m="ph":g==="websearch"&&(m="w");const p=h===void 0?"":`(${h})`;return this.url.searchParams.append(d,`${m}fts${p}.${u}`),this}match(d){return Object.entries(d).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(d,u,h){return this.url.searchParams.append(d,`not.${u}.${h}`),this}or(d,{foreignTable:u,referencedTable:h=u}={}){const g=h?`${h}.or`:"or";return this.url.searchParams.append(g,`(${d})`),this}filter(d,u,h){return this.url.searchParams.append(d,`${u}.${h}`),this}}return Xs.default=i,Xs}var Qp;function Bg(){if(Qp)return Vs;Qp=1;var l=Vs&&Vs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Vs,"__esModule",{value:!0});const r=l(Fd());class i{constructor(d,{headers:u={},schema:h,fetch:g}){this.url=d,this.headers=new Headers(u),this.schema=h,this.fetch=g}select(d,{head:u=!1,count:h}={}){const g=u?"HEAD":"GET";let m=!1;const p=(d??"*").split("").map(x=>/\s/.test(x)&&!m?"":(x==='"'&&(m=!m),x)).join("");return this.url.searchParams.set("select",p),h&&this.headers.append("Prefer",`count=${h}`),new r.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(d,{count:u,defaultToNull:h=!0}={}){var g;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const p=d.reduce((x,S)=>x.concat(Object.keys(S)),[]);if(p.length>0){const x=[...new Set(p)].map(S=>`"${S}"`);this.url.searchParams.set("columns",x.join(","))}}return new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(d,{onConflict:u,ignoreDuplicates:h=!1,count:g,defaultToNull:m=!0}={}){var p;const x="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),g&&this.headers.append("Prefer",`count=${g}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const S=d.reduce((k,j)=>k.concat(Object.keys(j)),[]);if(S.length>0){const k=[...new Set(S)].map(j=>`"${j}"`);this.url.searchParams.set("columns",k.join(","))}}return new r.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(d,{count:u}={}){var h;const g="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:d}={}){var u;const h="DELETE";return d&&this.headers.append("Prefer",`count=${d}`),new r.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Vs.default=i,Vs}var Zp;function K0(){if(Zp)return Gs;Zp=1;var l=Gs&&Gs.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Gs,"__esModule",{value:!0});const r=l(Bg()),i=l(Fd());class o{constructor(u,{headers:h={},schema:g,fetch:m}={}){this.url=u,this.headers=new Headers(h),this.schemaName=g,this.fetch=m}from(u){const h=new URL(`${this.url}/${u}`);return new r.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:g=!1,get:m=!1,count:p}={}){var x;let S;const k=new URL(`${this.url}/rpc/${u}`);let j;g||m?(S=g?"HEAD":"GET",Object.entries(h).filter(([N,A])=>A!==void 0).map(([N,A])=>[N,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([N,A])=>{k.searchParams.append(N,A)})):(S="POST",j=h);const C=new Headers(this.headers);return p&&C.set("Prefer",`count=${p}`),new i.default({method:S,url:k,headers:C,schema:this.schemaName,body:j,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return Gs.default=o,Gs}var Jp;function Q0(){if(Jp)return Ft;Jp=1;var l=Ft&&Ft.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.PostgrestError=Ft.PostgrestBuilder=Ft.PostgrestTransformBuilder=Ft.PostgrestFilterBuilder=Ft.PostgrestQueryBuilder=Ft.PostgrestClient=void 0;const r=l(K0());Ft.PostgrestClient=r.default;const i=l(Bg());Ft.PostgrestQueryBuilder=i.default;const o=l(Fd());Ft.PostgrestFilterBuilder=o.default;const d=l(Mg());Ft.PostgrestTransformBuilder=d.default;const u=l(Ag());Ft.PostgrestBuilder=u.default;const h=l(Dg());return Ft.PostgrestError=h.default,Ft.default={PostgrestClient:r.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:d.default,PostgrestBuilder:u.default,PostgrestError:h.default},Ft}var Z0=Q0();const J0=Md(Z0),{PostgrestClient:eb,PostgrestQueryBuilder:Hw,PostgrestFilterBuilder:Ww,PostgrestTransformBuilder:Fw,PostgrestBuilder:Yw,PostgrestError:Gw}=J0;class tb{static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const o=i.node,d=parseInt(o.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let i=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(i+=`

Suggested solution: ${r.workaround}`),new Error(i)}static createWebSocket(r,i){const o=this.getWebSocketConstructor();return new o(r,i)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const nb="2.15.5",ab=`realtime-js/${nb}`,sb="1.0.0",wd=1e4,rb=1e3,ib=100;var di;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(di||(di={}));var Ut;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(Ut||(Ut={}));var Nn;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(Nn||(Nn={}));var jd;(function(l){l.websocket="websocket"})(jd||(jd={}));var cs;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(cs||(cs={}));class ob{constructor(){this.HEADER_LENGTH=1}decode(r,i){return r.constructor===ArrayBuffer?i(this._binaryDecode(r)):i(typeof r=="string"?JSON.parse(r):{})}_binaryDecode(r){const i=new DataView(r),o=new TextDecoder;return this._decodeBroadcast(r,i,o)}_decodeBroadcast(r,i,o){const d=i.getUint8(1),u=i.getUint8(2);let h=this.HEADER_LENGTH+2;const g=o.decode(r.slice(h,h+d));h=h+d;const m=o.decode(r.slice(h,h+u));h=h+u;const p=JSON.parse(o.decode(r.slice(h,r.byteLength)));return{ref:null,topic:g,event:m,payload:p}}}class Og{constructor(r,i){this.callback=r,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pt;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(pt||(pt={}));const eg=(l,r,i={})=>{var o;const d=(o=i.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(r).reduce((u,h)=>(u[h]=lb(h,l,r,d),u),{})},lb=(l,r,i,o)=>{const d=r.find(g=>g.name===l),u=d?.type,h=i[l];return u&&!o.includes(u)?Lg(u,h):kd(h)},Lg=(l,r)=>{if(l.charAt(0)==="_"){const i=l.slice(1,l.length);return fb(r,i)}switch(l){case pt.bool:return cb(r);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return db(r);case pt.json:case pt.jsonb:return ub(r);case pt.timestamp:return hb(r);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:return kd(r);default:return kd(r)}},kd=l=>l,cb=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},db=l=>{if(typeof l=="string"){const r=parseFloat(l);if(!Number.isNaN(r))return r}return l},ub=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(r){return console.log(`JSON parse error: ${r}`),l}return l},fb=(l,r)=>{if(typeof l!="string")return l;const i=l.length-1,o=l[i];if(l[0]==="{"&&o==="}"){let u;const h=l.slice(1,i);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(g=>Lg(r,g))}return l},hb=l=>typeof l=="string"?l.replace(" ","T"):l,Ig=l=>{let r=l;return r=r.replace(/^ws/i,"http"),r=r.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),r.replace(/\/+$/,"")+"/api/broadcast"};class dd{constructor(r,i,o={},d=wd){this.channel=r,this.event=i,this.payload=o,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,i){var o;return this._hasReceived(r)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:i}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(i))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var tg;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(tg||(tg={}));class ui{constructor(r,i){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},d=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ui.syncState(this.state,d,u,h),this.pendingDiffs.forEach(m=>{this.state=ui.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],g()}),this.channel._on(o.diff,{},d=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=ui.syncDiff(this.state,d,u,h),g())}),this.onJoin((d,u,h)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:u,newPresences:h})}),this.onLeave((d,u,h)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,i,o,d){const u=this.cloneDeep(r),h=this.transformState(i),g={},m={};return this.map(u,(p,x)=>{h[p]||(m[p]=x)}),this.map(h,(p,x)=>{const S=u[p];if(S){const k=x.map(A=>A.presence_ref),j=S.map(A=>A.presence_ref),C=x.filter(A=>j.indexOf(A.presence_ref)<0),N=S.filter(A=>k.indexOf(A.presence_ref)<0);C.length>0&&(g[p]=C),N.length>0&&(m[p]=N)}else g[p]=x}),this.syncDiff(u,{joins:g,leaves:m},o,d)}static syncDiff(r,i,o,d){const{joins:u,leaves:h}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),d||(d=()=>{}),this.map(u,(g,m)=>{var p;const x=(p=r[g])!==null&&p!==void 0?p:[];if(r[g]=this.cloneDeep(m),x.length>0){const S=r[g].map(j=>j.presence_ref),k=x.filter(j=>S.indexOf(j.presence_ref)<0);r[g].unshift(...k)}o(g,x,m)}),this.map(h,(g,m)=>{let p=r[g];if(!p)return;const x=m.map(S=>S.presence_ref);p=p.filter(S=>x.indexOf(S.presence_ref)<0),r[g]=p,d(g,p,m),p.length===0&&delete r[g]}),r}static map(r,i){return Object.getOwnPropertyNames(r).map(o=>i(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((i,o)=>{const d=r[o];return"metas"in d?i[o]=d.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):i[o]=d,i},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ng;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(ng||(ng={}));var fi;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(fi||(fi={}));var la;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(la||(la={}));class Yd{constructor(r,i={config:{}},o){this.topic=r,this.params=i,this.socket=o,this.bindings={},this.state=Ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new dd(this,Nn.join,this.params,this.timeout),this.rejoinTimer=new Og(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ut.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nn.reply,{},(d,u)=>{this._trigger(this._replyEventName(u),d)}),this.presence=new ui(this),this.broadcastEndpointURL=Ig(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(r,i=this.timeout){var o,d,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Ut.closed){const{config:{broadcast:h,presence:g,private:m}}=this.params,p=(d=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(j=>j.filter))!==null&&d!==void 0?d:[],x=!!this.bindings[fi.PRESENCE]&&this.bindings[fi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,S={},k={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:x}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(S.access_token=this.socket.accessTokenValue),this._onError(j=>r?.(la.CHANNEL_ERROR,j)),this._onClose(()=>r?.(la.CLOSED)),this.updateJoinPayload(Object.assign({config:k},S)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:j})=>{var C;if(this.socket.setAuth(),j===void 0){r?.(la.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,A=(C=N?.length)!==null&&C!==void 0?C:0,P=[];for(let E=0;E<A;E++){const U=N[E],{filter:{event:Z,schema:G,table:re,filter:de}}=U,ve=j&&j[E];if(ve&&ve.event===Z&&ve.schema===G&&ve.table===re&&ve.filter===de)P.push(Object.assign(Object.assign({},U),{id:ve.id}));else{this.unsubscribe(),this.state=Ut.errored,r?.(la.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,r&&r(la.SUBSCRIBED);return}}).receive("error",j=>{this.state=Ut.errored,r?.(la.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{r?.(la.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,i={}){return await this.send({type:"presence",event:"track",payload:r},i.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,i,o){return this.state===Ut.joined&&r===fi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,i,o)}async send(r,i={}){var o,d;if(!this._canPush()&&r.type==="broadcast"){const{event:u,payload:h}=r,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((d=p.body)===null||d===void 0?void 0:d.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,g,m;const p=this._push(r.type,r,i.timeout||this.timeout);r.type==="broadcast"&&!(!((m=(g=(h=this.params)===null||h===void 0?void 0:h.config)===null||g===void 0?void 0:g.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),p.receive("ok",()=>u("ok")),p.receive("error",()=>u("error")),p.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Ut.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(d=>{o=new dd(this,Nn.leave,{},r),o.receive("ok",()=>{i(),d("ok")}).receive("timeout",()=>{i(),d("timed out")}).receive("error",()=>{d("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ut.closed,this.bindings={}}async _fetchWithTimeout(r,i,o){const d=new AbortController,u=setTimeout(()=>d.abort(),o),h=await this.socket.fetch(r,Object.assign(Object.assign({},i),{signal:d.signal}));return clearTimeout(u),h}_push(r,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new dd(this,r,i,o);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>ib){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(r,i,o){return i}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,i,o){var d,u;const h=r.toLocaleLowerCase(),{close:g,error:m,leave:p,join:x}=Nn;if(o&&[g,m,p,x].indexOf(h)>=0&&o!==this._joinRef())return;let k=this._onMessage(h,i,o);if(i&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(j=>{var C,N,A;return((C=j.filter)===null||C===void 0?void 0:C.event)==="*"||((A=(N=j.filter)===null||N===void 0?void 0:N.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===h}).map(j=>j.callback(k,o)):(u=this.bindings[h])===null||u===void 0||u.filter(j=>{var C,N,A,P,E,U;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in j){const Z=j.id,G=(C=j.filter)===null||C===void 0?void 0:C.event;return Z&&((N=i.ids)===null||N===void 0?void 0:N.includes(Z))&&(G==="*"||G?.toLocaleLowerCase()===((A=i.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const Z=(E=(P=j?.filter)===null||P===void 0?void 0:P.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return Z==="*"||Z===((U=i?.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===h}).map(j=>{if(typeof k=="object"&&"ids"in k){const C=k.data,{schema:N,table:A,commit_timestamp:P,type:E,errors:U}=C;k=Object.assign(Object.assign({},{schema:N,table:A,commit_timestamp:P,eventType:E,new:{},old:{},errors:U}),this._getPayloadRecords(C))}j.callback(k,o)})}_isClosed(){return this.state===Ut.closed}_isJoined(){return this.state===Ut.joined}_isJoining(){return this.state===Ut.joining}_isLeaving(){return this.state===Ut.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,i,o){const d=r.toLocaleLowerCase(),u={type:d,filter:i,callback:o};return this.bindings[d]?this.bindings[d].push(u):this.bindings[d]=[u],this}_off(r,i){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(d=>{var u;return!(((u=d.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&Yd.isEqual(d.filter,i))})),this}static isEqual(r,i){if(Object.keys(r).length!==Object.keys(i).length)return!1;for(const o in r)if(r[o]!==i[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Nn.close,{},r)}_onError(r){this._on(Nn.error,{},i=>r(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ut.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const i={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(i.new=eg(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(i.old=eg(r.columns,r.old_record)),i}}const ud=()=>{},Mo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pb=[1e3,2e3,5e3,1e4],gb=1e4,mb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xb{constructor(r,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wd,this.transport=null,this.heartbeatIntervalMs=Mo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ud,this.ref=0,this.reconnectTimer=null,this.logger=ud,this.conn=null,this.sendBuffer=[],this.serializer=new ob,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>{let u;return d?u=d:typeof fetch>"u"?u=(...h)=>yi(async()=>{const{default:g}=await Promise.resolve().then(()=>cr);return{default:g}},void 0).then(({default:g})=>g(...h)).catch(g=>{throw new Error(`Failed to load @supabase/node-fetch: ${g.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...h)=>u(...h)},!(!((o=i?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${r}/${jd.websocket}`,this.httpEndpoint=Ig(r),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tb.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const i=r.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sb}))}disconnect(r,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},r?this.conn.close(r,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const i=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const r=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,i,o){this.logger(r,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case di.connecting:return cs.Connecting;case di.open:return cs.Open;case di.closing:return cs.Closing;default:return cs.Closed}}isConnected(){return this.connectionState()===cs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,i={config:{}}){const o=`realtime:${r}`,d=this.getChannels().find(u=>u.topic===o);if(d)return d;{const u=new Yd(`realtime:${r}`,i,this);return this.channels.push(u),u}}push(r){const{topic:i,event:o,payload:d,ref:u}=r,h=()=>{this.encode(r,g=>{var m;(m=this.conn)===null||m===void 0||m.send(g)})};this.log("push",`${i} ${o} (${u})`,d),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(rb,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Mo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let i=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${r}"`),i.unsubscribe())}_remove(r){this.channels=this.channels.filter(i=>i.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:d,payload:u,ref:h}=i,g=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${o} ${d} ${g}`.trim(),u),this.channels.filter(p=>p._isMember(o)).forEach(p=>p._trigger(d,u,h)),this._triggerStateCallbacks("message",i)})}_clearTimer(r){var i;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var i;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(Nn.error))}_appendParams(r,i){if(Object.keys(i).length===0)return r;const o=r.match(/\?/)?"&":"?",d=new URLSearchParams(i);return`${r}${o}${d}`}_workerObjectUrl(r){let i;if(r)i=r;else{const o=new Blob([mb],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(r,i=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(r=null){let i;r?i=r:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const d={access_token:i,version:ab};i&&o.updateJoinPayload(d),o.joinedOnce&&o._isJoined()&&o._push(Nn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${r}`,i)})}_triggerStateCallbacks(r,i){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(i)}catch(d){this.log("error",`error in ${r} callback`,d)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Og(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var i,o,d,u,h,g,m,p,x;if(this.transport=(i=r?.transport)!==null&&i!==void 0?i:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:wd,this.heartbeatIntervalMs=(d=r?.heartbeatIntervalMs)!==null&&d!==void 0?d:Mo.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=r?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=r?.heartbeatCallback)!==null&&g!==void 0?g:ud,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=r?.reconnectAfterMs)!==null&&m!==void 0?m:(S=>pb[S-1]||gb),this.encode=(p=r?.encode)!==null&&p!==void 0?p:((S,k)=>k(JSON.stringify(S))),this.decode=(x=r?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class Gd extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function qt(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class yb extends Gd{constructor(r,i,o){super(r),this.name="StorageApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cd extends Gd{constructor(r,i){super(r),this.name="StorageUnknownError",this.originalError=i}}var bb=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function g(x){try{p(o.next(x))}catch(S){h(S)}}function m(x){try{p(o.throw(x))}catch(S){h(S)}}function p(x){x.done?u(x.value):d(x.value).then(g,m)}p((o=o.apply(l,r||[])).next())})};const Ug=l=>{let r;return l?r=l:typeof fetch>"u"?r=(...i)=>yi(async()=>{const{default:o}=await Promise.resolve().then(()=>cr);return{default:o}},void 0).then(({default:o})=>o(...i)):r=fetch,(...i)=>r(...i)},vb=()=>bb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield yi(()=>Promise.resolve().then(()=>cr),void 0)).Response:Response}),Td=l=>{if(Array.isArray(l))return l.map(i=>Td(i));if(typeof l=="function"||l!==Object(l))return l;const r={};return Object.entries(l).forEach(([i,o])=>{const d=i.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[d]=Td(o)}),r},_b=l=>{if(typeof l!="object"||l===null)return!1;const r=Object.getPrototypeOf(l);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)};var us=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function g(x){try{p(o.next(x))}catch(S){h(S)}}function m(x){try{p(o.throw(x))}catch(S){h(S)}}function p(x){x.done?u(x.value):d(x.value).then(g,m)}p((o=o.apply(l,r||[])).next())})};const fd=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Sb=(l,r,i)=>us(void 0,void 0,void 0,function*(){const o=yield vb();l instanceof o&&!i?.noResolveJson?l.json().then(d=>{const u=l.status||500,h=d?.statusCode||u+"";r(new yb(fd(d),u,h))}).catch(d=>{r(new Cd(fd(d),d))}):r(new Cd(fd(l),l))}),wb=(l,r,i,o)=>{const d={method:l,headers:r?.headers||{}};return l==="GET"||!o?d:(_b(o)?(d.headers=Object.assign({"Content-Type":"application/json"},r?.headers),d.body=JSON.stringify(o)):d.body=o,r?.duplex&&(d.duplex=r.duplex),Object.assign(Object.assign({},d),i))};function bi(l,r,i,o,d,u){return us(this,void 0,void 0,function*(){return new Promise((h,g)=>{l(i,wb(r,o,d,u)).then(m=>{if(!m.ok)throw m;return o?.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>Sb(m,g,o))})})}function Ho(l,r,i,o){return us(this,void 0,void 0,function*(){return bi(l,"GET",r,i,o)})}function Pn(l,r,i,o,d){return us(this,void 0,void 0,function*(){return bi(l,"POST",r,o,d,i)})}function Ed(l,r,i,o,d){return us(this,void 0,void 0,function*(){return bi(l,"PUT",r,o,d,i)})}function jb(l,r,i,o){return us(this,void 0,void 0,function*(){return bi(l,"HEAD",r,Object.assign(Object.assign({},i),{noResolveJson:!0}),o)})}function qg(l,r,i,o,d){return us(this,void 0,void 0,function*(){return bi(l,"DELETE",r,o,d,i)})}var tn=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function g(x){try{p(o.next(x))}catch(S){h(S)}}function m(x){try{p(o.throw(x))}catch(S){h(S)}}function p(x){x.done?u(x.value):d(x.value).then(g,m)}p((o=o.apply(l,r||[])).next())})};const kb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ag={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Cb{constructor(r,i={},o,d){this.shouldThrowOnError=!1,this.url=r,this.headers=i,this.bucketId=o,this.fetch=Ug(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,i,o,d){return tn(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},ag),d);let g=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m))):(u=o,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,m&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),d?.headers&&(g=Object.assign(Object.assign({},g),d.headers));const p=this._removeEmptyFolders(i),x=this._getFinalPath(p),S=yield(r=="PUT"?Ed:Pn)(this.fetch,`${this.url}/object/${x}`,u,Object.assign({headers:g},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:p,id:S.Id,fullPath:S.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(qt(u))return{data:null,error:u};throw u}})}upload(r,i,o){return tn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,i,o)})}uploadToSignedUrl(r,i,o,d){return tn(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),g=new URL(this.url+`/object/upload/sign/${h}`);g.searchParams.set("token",i);try{let m;const p=Object.assign({upsert:ag.upsert},d),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&o instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",o)):typeof FormData<"u"&&o instanceof FormData?(m=o,m.append("cacheControl",p.cacheControl)):(m=o,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const S=yield Ed(this.fetch,g.toString(),m,{headers:x});return{data:{path:u,fullPath:S.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(qt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(r,i){return tn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r);const d=Object.assign({},this.headers);i?.upsert&&(d["x-upsert"]="true");const u=yield Pn(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:d}),h=new URL(this.url+u.url),g=h.searchParams.get("token");if(!g)throw new Gd("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:g},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}update(r,i,o){return tn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,i,o)})}move(r,i,o){return tn(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:i,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}})}copy(r,i,o){return tn(this,void 0,void 0,function*(){try{return{data:{path:(yield Pn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:i,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}})}createSignedUrl(r,i,o){return tn(this,void 0,void 0,function*(){try{let d=this._getFinalPath(r),u=yield Pn(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:i},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const h=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}})}createSignedUrls(r,i,o){return tn(this,void 0,void 0,function*(){try{const d=yield Pn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:r},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:d.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}})}download(r,i){return tn(this,void 0,void 0,function*(){const d=typeof i?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(i?.transform||{}),h=u?`?${u}`:"";try{const g=this._getFinalPath(r);return{data:yield(yield Ho(this.fetch,`${this.url}/${d}/${g}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(qt(g))return{data:null,error:g};throw g}})}info(r){return tn(this,void 0,void 0,function*(){const i=this._getFinalPath(r);try{const o=yield Ho(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:Td(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}exists(r){return tn(this,void 0,void 0,function*(){const i=this._getFinalPath(r);try{return yield jb(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o)&&o instanceof Cd){const d=o.originalError;if([400,404].includes(d?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(r,i){const o=this._getFinalPath(r),d=[],u=i?.download?`download=${i.download===!0?"":i.download}`:"";u!==""&&d.push(u);const g=typeof i?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(i?.transform||{});m!==""&&d.push(m);let p=d.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${o}${p}`)}}}remove(r){return tn(this,void 0,void 0,function*(){try{return{data:yield qg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}list(r,i,o){return tn(this,void 0,void 0,function*(){try{const d=Object.assign(Object.assign(Object.assign({},kb),i),{prefix:r||""});return{data:yield Pn(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},o),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qt(d))return{data:null,error:d};throw d}})}listV2(r,i){return tn(this,void 0,void 0,function*(){try{const o=Object.assign({},r);return{data:yield Pn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const i=[];return r.width&&i.push(`width=${r.width}`),r.height&&i.push(`height=${r.height}`),r.resize&&i.push(`resize=${r.resize}`),r.format&&i.push(`format=${r.format}`),r.quality&&i.push(`quality=${r.quality}`),i.join("&")}}const Tb="2.12.1",Eb={"X-Client-Info":`storage-js/${Tb}`};var Zs=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function g(x){try{p(o.next(x))}catch(S){h(S)}}function m(x){try{p(o.throw(x))}catch(S){h(S)}}function p(x){x.done?u(x.value):d(x.value).then(g,m)}p((o=o.apply(l,r||[])).next())})};class Rb{constructor(r,i={},o,d){this.shouldThrowOnError=!1;const u=new URL(r);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},Eb),i),this.fetch=Ug(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Zs(this,void 0,void 0,function*(){try{return{data:yield Ho(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}})}getBucket(r){return Zs(this,void 0,void 0,function*(){try{return{data:yield Ho(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}createBucket(r,i={public:!1}){return Zs(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}updateBucket(r,i){return Zs(this,void 0,void 0,function*(){try{return{data:yield Ed(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}emptyBucket(r){return Zs(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}deleteBucket(r){return Zs(this,void 0,void 0,function*(){try{return{data:yield qg(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}}class Nb extends Rb{constructor(r,i={},o,d){super(r,i,o,d)}from(r){return new Cb(this.url,this.headers,r,this.fetch)}}const zb="2.57.4";let ci="";typeof Deno<"u"?ci="deno":typeof document<"u"?ci="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ci="react-native":ci="node";const Db={"X-Client-Info":`supabase-js-${ci}/${zb}`},Ab={headers:Db},Mb={schema:"public"},Bb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ob={};var Lb=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function g(x){try{p(o.next(x))}catch(S){h(S)}}function m(x){try{p(o.throw(x))}catch(S){h(S)}}function p(x){x.done?u(x.value):d(x.value).then(g,m)}p((o=o.apply(l,r||[])).next())})};const Ib=l=>{let r;return l?r=l:typeof fetch>"u"?r=Ng:r=fetch,(...i)=>r(...i)},Ub=()=>typeof Headers>"u"?zg:Headers,qb=(l,r,i)=>{const o=Ib(i),d=Ub();return(u,h)=>Lb(void 0,void 0,void 0,function*(){var g;const m=(g=yield r())!==null&&g!==void 0?g:l;let p=new d(h?.headers);return p.has("apikey")||p.set("apikey",l),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),o(u,Object.assign(Object.assign({},h),{headers:p}))})};var $b=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function g(x){try{p(o.next(x))}catch(S){h(S)}}function m(x){try{p(o.throw(x))}catch(S){h(S)}}function p(x){x.done?u(x.value):d(x.value).then(g,m)}p((o=o.apply(l,r||[])).next())})};function Pb(l){return l.endsWith("/")?l:l+"/"}function Hb(l,r){var i,o;const{db:d,auth:u,realtime:h,global:g}=l,{db:m,auth:p,realtime:x,global:S}=r,k={db:Object.assign(Object.assign({},m),d),auth:Object.assign(Object.assign({},p),u),realtime:Object.assign(Object.assign({},x),h),storage:{},global:Object.assign(Object.assign(Object.assign({},S),g),{headers:Object.assign(Object.assign({},(i=S?.headers)!==null&&i!==void 0?i:{}),(o=g?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>$b(this,void 0,void 0,function*(){return""})};return l.accessToken?k.accessToken=l.accessToken:delete k.accessToken,k}function Wb(l){const r=l?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Pb(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const $g="2.71.1",ar=30*1e3,Rd=3,hd=Rd*ar,Fb="http://localhost:9999",Yb="supabase.auth.token",Gb={"X-Client-Info":`gotrue-js/${$g}`},Nd="X-Supabase-Api-Version",Pg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Vb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xb=600*1e3;class Vd extends Error{constructor(r,i,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function qe(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class Kb extends Vd{constructor(r,i,o){super(r,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function Qb(l){return qe(l)&&l.name==="AuthApiError"}class Hg extends Vd{constructor(r,i){super(r),this.name="AuthUnknownError",this.originalError=i}}class $a extends Vd{constructor(r,i,o,d){super(r,o,d),this.name=i,this.status=o}}class Ua extends $a{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zb(l){return qe(l)&&l.name==="AuthSessionMissingError"}class Bo extends $a{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Oo extends $a{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Lo extends $a{constructor(r,i=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jb(l){return qe(l)&&l.name==="AuthImplicitGrantRedirectError"}class sg extends $a{constructor(r,i=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zd extends $a{constructor(r,i){super(r,"AuthRetryableFetchError",i,void 0)}}function pd(l){return qe(l)&&l.name==="AuthRetryableFetchError"}class rg extends $a{constructor(r,i,o){super(r,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class Dd extends $a{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ig=` 	
\r=`.split(""),e1=(()=>{const l=new Array(128);for(let r=0;r<l.length;r+=1)l[r]=-1;for(let r=0;r<ig.length;r+=1)l[ig[r].charCodeAt(0)]=-2;for(let r=0;r<Wo.length;r+=1)l[Wo[r].charCodeAt(0)]=r;return l})();function og(l,r,i){if(l!==null)for(r.queue=r.queue<<8|l,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;i(Wo[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;i(Wo[o]),r.queuedBits-=6}}function Wg(l,r,i){const o=e1[l];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)i(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function lg(l){const r=[],i=h=>{r.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},u=h=>{a1(h,o,i)};for(let h=0;h<l.length;h+=1)Wg(l.charCodeAt(h),d,u);return r.join("")}function t1(l,r){if(l<=127){r(l);return}else if(l<=2047){r(192|l>>6),r(128|l&63);return}else if(l<=65535){r(224|l>>12),r(128|l>>6&63),r(128|l&63);return}else if(l<=1114111){r(240|l>>18),r(128|l>>12&63),r(128|l>>6&63),r(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function n1(l,r){for(let i=0;i<l.length;i+=1){let o=l.charCodeAt(i);if(o>55295&&o<=56319){const d=(o-55296)*1024&65535;o=(l.charCodeAt(i+1)-56320&65535|d)+65536,i+=1}t1(o,r)}}function a1(l,r,i){if(r.utf8seq===0){if(l<=127){i(l);return}for(let o=1;o<6;o+=1)if((l>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=l&31;else if(r.utf8seq===3)r.codepoint=l&15;else if(r.utf8seq===4)r.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|l&63,r.utf8seq-=1,r.utf8seq===0&&i(r.codepoint)}}function s1(l){const r=[],i={queue:0,queuedBits:0},o=d=>{r.push(d)};for(let d=0;d<l.length;d+=1)Wg(l.charCodeAt(d),i,o);return new Uint8Array(r)}function r1(l){const r=[];return n1(l,i=>r.push(i)),new Uint8Array(r)}function i1(l){const r=[],i={queue:0,queuedBits:0},o=d=>{r.push(d)};return l.forEach(d=>og(d,i,o)),og(null,i,o),r.join("")}function o1(l){return Math.round(Date.now()/1e3)+l}function l1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const r=Math.random()*16|0;return(l=="x"?r:r&3|8).toString(16)})}const Rn=()=>typeof window<"u"&&typeof document<"u",is={tested:!1,writable:!1},Fg=()=>{if(!Rn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(is.tested)return is.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),is.tested=!0,is.writable=!0}catch{is.tested=!0,is.writable=!1}return is.writable};function c1(l){const r={},i=new URL(l);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((d,u)=>{r[u]=d})}catch{}return i.searchParams.forEach((o,d)=>{r[d]=o}),r}const Yg=l=>{let r;return l?r=l:typeof fetch>"u"?r=(...i)=>yi(async()=>{const{default:o}=await Promise.resolve().then(()=>cr);return{default:o}},void 0).then(({default:o})=>o(...i)):r=fetch,(...i)=>r(...i)},d1=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",sr=async(l,r,i)=>{await l.setItem(r,JSON.stringify(i))},os=async(l,r)=>{const i=await l.getItem(r);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Ia=async(l,r)=>{await l.removeItem(r)};class Go{constructor(){this.promise=new Go.promiseConstructor((r,i)=>{this.resolve=r,this.reject=i})}}Go.promiseConstructor=Promise;function gd(l){const r=l.split(".");if(r.length!==3)throw new Dd("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!Vb.test(r[o]))throw new Dd("JWT not in base64url format");return{header:JSON.parse(lg(r[0])),payload:JSON.parse(lg(r[1])),signature:s1(r[2]),raw:{header:r[0],payload:r[1]}}}async function u1(l){return await new Promise(r=>{setTimeout(()=>r(null),l)})}function f1(l,r){return new Promise((o,d)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await l(u);if(!r(u,null,h)){o(h);return}}catch(h){if(!r(u,h)){d(h);return}}})()})}function h1(l){return("0"+l.toString(16)).substr(-2)}function p1(){const r=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let d="";for(let u=0;u<56;u++)d+=i.charAt(Math.floor(Math.random()*o));return d}return crypto.getRandomValues(r),Array.from(r,h1).join("")}async function g1(l){const i=new TextEncoder().encode(l),o=await crypto.subtle.digest("SHA-256",i),d=new Uint8Array(o);return Array.from(d).map(u=>String.fromCharCode(u)).join("")}async function m1(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const i=await g1(l);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Js(l,r,i=!1){const o=p1();let d=o;i&&(d+="/PASSWORD_RECOVERY"),await sr(l,`${r}-code-verifier`,d);const u=await m1(o);return[u,o===u?"plain":"s256"]}const x1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function y1(l){const r=l.headers.get(Nd);if(!r||!r.match(x1))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function b1(l){if(!l)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(l<=r)throw new Error("JWT has expired")}function v1(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function er(l){if(!_1.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function md(){const l={};return new Proxy(l,{get:(r,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cg(l){return JSON.parse(JSON.stringify(l))}var S1=function(l,r){var i={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&r.indexOf(o)<0&&(i[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(l);d<o.length;d++)r.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(l,o[d])&&(i[o[d]]=l[o[d]]);return i};const ls=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),w1=[502,503,504];async function dg(l){var r;if(!d1(l))throw new zd(ls(l),0);if(w1.includes(l.status))throw new zd(ls(l),l.status);let i;try{i=await l.json()}catch(u){throw new Hg(ls(u),u)}let o;const d=y1(l);if(d&&d.getTime()>=Pg["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new rg(ls(i),l.status,((r=i.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new Ua}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new rg(ls(i),l.status,i.weak_password.reasons);throw new Kb(ls(i),l.status||500,o)}const j1=(l,r,i,o)=>{const d={method:l,headers:r?.headers||{}};return l==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),d.body=JSON.stringify(o),Object.assign(Object.assign({},d),i))};async function Ke(l,r,i,o){var d;const u=Object.assign({},o?.headers);u[Nd]||(u[Nd]=Pg["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const h=(d=o?.query)!==null&&d!==void 0?d:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await k1(l,r,i+g,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(m):{data:Object.assign({},m),error:null}}async function k1(l,r,i,o,d,u){const h=j1(r,o,d,u);let g;try{g=await l(i,Object.assign({},h))}catch(m){throw console.error(m),new zd(ls(m),0)}if(g.ok||await dg(g),o?.noResolveJson)return g;try{return await g.json()}catch(m){await dg(m)}}function oa(l){var r;let i=null;R1(l)&&(i=Object.assign({},l),l.expires_at||(i.expires_at=o1(l.expires_in)));const o=(r=l.user)!==null&&r!==void 0?r:l;return{data:{session:i,user:o},error:null}}function ug(l){const r=oa(l);return!r.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(r.data.weak_password=l.weak_password),r}function qa(l){var r;return{data:{user:(r=l.user)!==null&&r!==void 0?r:l},error:null}}function C1(l){return{data:l,error:null}}function T1(l){const{action_link:r,email_otp:i,hashed_token:o,redirect_to:d,verification_type:u}=l,h=S1(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:r,email_otp:i,hashed_token:o,redirect_to:d,verification_type:u},m=Object.assign({},h);return{data:{properties:g,user:m},error:null}}function E1(l){return l}function R1(l){return l.access_token&&l.refresh_token&&l.expires_in}const xd=["global","local","others"];var N1=function(l,r){var i={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&r.indexOf(o)<0&&(i[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(l);d<o.length;d++)r.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(l,o[d])&&(i[o[d]]=l[o[d]]);return i};class z1{constructor({url:r="",headers:i={},fetch:o}){this.url=r,this.headers=i,this.fetch=Yg(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(r,i=xd[0]){if(xd.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xd.join(", ")}`);try{return await Ke(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(qe(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,i={}){try{return await Ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:qa})}catch(o){if(qe(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:i}=r,o=N1(r,["options"]),d=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(d.new_email=o?.newEmail,delete d.newEmail),await Ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:T1,redirectTo:i?.redirectTo})}catch(i){if(qe(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(r){try{return await Ke(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:qa})}catch(i){if(qe(i))return{data:{user:null},error:i};throw i}}async listUsers(r){var i,o,d,u,h,g,m;try{const p={nextPage:null,lastPage:0,total:0},x=await Ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=r?.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(u=(d=r?.perPage)===null||d===void 0?void 0:d.toString())!==null&&u!==void 0?u:""},xform:E1});if(x.error)throw x.error;const S=await x.json(),k=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(g=x.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(C=>{const N=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(C.split(";")[1].split("=")[1]);p[`${A}Page`]=N}),p.total=parseInt(k)),{data:Object.assign(Object.assign({},S),p),error:null}}catch(p){if(qe(p))return{data:{users:[]},error:p};throw p}}async getUserById(r){er(r);try{return await Ke(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:qa})}catch(i){if(qe(i))return{data:{user:null},error:i};throw i}}async updateUserById(r,i){er(r);try{return await Ke(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:i,headers:this.headers,xform:qa})}catch(o){if(qe(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,i=!1){er(r);try{return await Ke(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:i},xform:qa})}catch(o){if(qe(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){er(r.userId);try{const{data:i,error:o}=await Ke(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:i,error:o}}catch(i){if(qe(i))return{data:null,error:i};throw i}}async _deleteFactor(r){er(r.userId),er(r.id);try{return{data:await Ke(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(i){if(qe(i))return{data:null,error:i};throw i}}}function fg(l={}){return{getItem:r=>l[r]||null,setItem:(r,i)=>{l[r]=i},removeItem:r=>{delete l[r]}}}function D1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const tr={debug:!!(globalThis&&Fg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Gg extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class A1 extends Gg{}async function M1(l,r,i){tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),tr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async d=>{if(d){tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,d.name);try{return await i()}finally{tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,d.name)}}else{if(r===0)throw tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new A1(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(tr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}D1();const B1={url:Fb,storageKey:Yb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hg(l,r,i){return await i()}const nr={};class gi{constructor(r){var i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gi.nextInstanceID,gi.nextInstanceID+=1,this.instanceID>0&&Rn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const d=Object.assign(Object.assign({},B1),r);if(this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.persistSession=d.persistSession,this.storageKey=d.storageKey,this.autoRefreshToken=d.autoRefreshToken,this.admin=new z1({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=Yg(d.fetch),this.lock=d.lock||hg,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,d.lock?this.lock=d.lock:Rn()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=M1:this.lock=hg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:Fg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fg(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=fg(this.memoryStorage)),Rn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var r,i;return(i=(r=nr[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(r){nr[this.storageKey]=Object.assign(Object.assign({},nr[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,i;return(i=(r=nr[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){nr[this.storageKey]=Object.assign(Object.assign({},nr[this.storageKey]),{cachedAt:r})}_debug(...r){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$g}) ${new Date().toISOString()}`,...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{const i=c1(window.location.href);let o="none";if(this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce"),Rn()&&this.detectSessionInUrl&&o!=="none"){const{data:d,error:u}=await this._getSessionFromURL(i,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Jb(u)){const m=(r=u.details)===null||r===void 0?void 0:r.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:g}=d;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),await this._saveSession(h),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return qe(i)?{error:i}:{error:new Hg("Unexpected error during initialization",i)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var i,o,d;try{const u=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=r?.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(d=r?.options)===null||d===void 0?void 0:d.captchaToken}},xform:oa}),{data:h,error:g}=u;if(g||!h)return{data:{user:null,session:null},error:g};const m=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(u){if(qe(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(r){var i,o,d;try{let u;if("email"in r){const{email:x,password:S,options:k}=r;let j=null,C=null;this.flowType==="pkce"&&([j,C]=await Js(this.storage,this.storageKey)),u=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:x,password:S,data:(i=k?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:j,code_challenge_method:C},xform:oa})}else if("phone"in r){const{phone:x,password:S,options:k}=r;u=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:S,data:(o=k?.data)!==null&&o!==void 0?o:{},channel:(d=k?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:oa})}else throw new Oo("You must provide either an email or phone number and a password");const{data:h,error:g}=u;if(g||!h)return{data:{user:null,session:null},error:g};const m=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(u){if(qe(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(r){try{let i;if("email"in r){const{email:u,password:h,options:g}=r;i=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:ug})}else if("phone"in r){const{phone:u,password:h,options:g}=r;i=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:ug})}else throw new Oo("You must provide either an email or phone number and a password");const{data:o,error:d}=i;return d?{data:{user:null,session:null},error:d}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Bo}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:d})}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOAuth(r){var i,o,d,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(i=r.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=r.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:i}=r;if(i==="solana")return await this.signInWithSolana(r);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}async signInWithSolana(r){var i,o,d,u,h,g,m,p,x,S,k,j;let C,N;if("message"in r)C=r.message,N=r.signature;else{const{chain:A,wallet:P,statement:E,options:U}=r;let Z;if(Rn())if(typeof P=="object")Z=P;else{const re=window;if("solana"in re&&typeof re.solana=="object"&&("signIn"in re.solana&&typeof re.solana.signIn=="function"||"signMessage"in re.solana&&typeof re.solana.signMessage=="function"))Z=re.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Z=P}const G=new URL((i=U?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in Z&&Z.signIn){const re=await Z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U?.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),E?{statement:E}:null));let de;if(Array.isArray(re)&&re[0]&&typeof re[0]=="object")de=re[0];else if(re&&typeof re=="object"&&"signedMessage"in re&&"signature"in re)de=re;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in de&&"signature"in de&&(typeof de.signedMessage=="string"||de.signedMessage instanceof Uint8Array)&&de.signature instanceof Uint8Array)C=typeof de.signedMessage=="string"?de.signedMessage:new TextDecoder().decode(de.signedMessage),N=de.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Z)||typeof Z.signMessage!="function"||!("publicKey"in Z)||typeof Z!="object"||!Z.publicKey||!("toBase58"in Z.publicKey)||typeof Z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${G.host} wants you to sign in with your Solana account:`,Z.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(d=(o=U?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((u=U?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((h=U?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((g=U?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((m=U?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((p=U?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((S=(x=U?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||S===void 0)&&S.length?["Resources",...U.signInWithSolana.resources.map(de=>`- ${de}`)]:[]].join(`
`);const re=await Z.signMessage(new TextEncoder().encode(C),"utf8");if(!re||!(re instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=re}}try{const{data:A,error:P}=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:i1(N)},!((k=r.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(j=r.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:oa});if(P)throw P;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new Bo}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:P})}catch(A){if(qe(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(r){const i=await os(this.storage,`${this.storageKey}-code-verifier`),[o,d]=(i??"").split("/");try{const{data:u,error:h}=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:oa});if(await Ia(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Bo}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:d??null}),error:h})}catch(u){if(qe(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(r){try{const{options:i,provider:o,token:d,access_token:u,nonce:h}=r,g=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:d,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:oa}),{data:m,error:p}=g;return p?{data:{user:null,session:null},error:p}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Bo}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:p})}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOtp(r){var i,o,d,u,h;try{if("email"in r){const{email:g,options:m}=r;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Js(this.storage,this.storageKey));const{error:S}=await Ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(i=m?.data)!==null&&i!==void 0?i:{},create_user:(o=m?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:S}}if("phone"in r){const{phone:g,options:m}=r,{data:p,error:x}=await Ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(d=m?.data)!==null&&d!==void 0?d:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(h=m?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:x}}throw new Oo("You must provide either an email or phone number.")}catch(g){if(qe(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(r){var i,o;try{let d,u;"options"in r&&(d=(i=r.options)===null||i===void 0?void 0:i.redirectTo,u=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:g}=await Ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:d,xform:oa});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,p=h.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(d){if(qe(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithSSO(r){var i,o,d;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await Js(this.storage,this.storageKey)),await Ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(i=r.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((d=r?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:C1})}catch(u){if(qe(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)throw o;if(!i)throw new Ua;const{error:d}=await Ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:d}})}catch(r){if(qe(r))return{data:{user:null,session:null},error:r};throw r}}async resend(r){try{const i=`${this.url}/resend`;if("email"in r){const{email:o,type:d,options:u}=r,{error:h}=await Ke(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:d,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in r){const{phone:o,type:d,options:u}=r,{data:h,error:g}=await Ke(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:d,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:g}}throw new Oo("You must provide either an email or phone number and a type")}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(r,i){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await r(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const i=await os(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?r=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<hd:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const h=await os(this.userStorage,this.storageKey+"-user");h?.user?r.user=h.user:r.user=md()}if(this.storage.isServer&&r.user){let h=this.suppressGetSessionWarning;r=new Proxy(r,{get:(m,p,x)=>(!h&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,p,x))})}return{data:{session:r},error:null}}const{session:d,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{session:null},error:u}:{data:{session:d},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await Ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:qa}):await this._useSession(async i=>{var o,d,u;const{data:h,error:g}=i;if(g)throw g;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ua}:await Ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0,xform:qa})})}catch(i){if(qe(i))return Zb(i)&&(await this._removeSession(),await Ia(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}}async updateUser(r,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,i))}async _updateUser(r,i={}){try{return await this._useSession(async o=>{const{data:d,error:u}=o;if(u)throw u;if(!d.session)throw new Ua;const h=d.session;let g=null,m=null;this.flowType==="pkce"&&r.email!=null&&([g,m]=await Js(this.storage,this.storageKey));const{data:p,error:x}=await Ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:g,code_challenge_method:m}),jwt:h.access_token,xform:qa});if(x)throw x;return h.user=p.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(o){if(qe(o))return{data:{user:null},error:o};throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new Ua;const i=Date.now()/1e3;let o=i,d=!0,u=null;const{payload:h}=gd(r.access_token);if(h.exp&&(o=h.exp,d=o<=i),d){const{session:g,error:m}=await this._callRefreshToken(r.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!g)return{data:{user:null,session:null},error:null};u=g}else{const{data:g,error:m}=await this._getUser(r.access_token);if(m)throw m;u={access_token:r.access_token,refresh_token:r.refresh_token,user:g.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(i){if(qe(i))return{data:{session:null,user:null},error:i};throw i}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async i=>{var o;if(!r){const{data:h,error:g}=i;if(g)throw g;r=(o=h.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new Ua;const{session:d,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{user:null,session:null},error:u}:d?{data:{user:d.user,session:d},error:null}:{data:{user:null,session:null},error:null}})}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async _getSessionFromURL(r,i){try{if(!Rn())throw new Lo("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Lo(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new sg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lo("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new sg("No code detected.");const{data:E,error:U}=await this._exchangeCodeForSession(r.code);if(U)throw U;const Z=new URL(window.location.href);return Z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Z.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:d,access_token:u,refresh_token:h,expires_in:g,expires_at:m,token_type:p}=r;if(!u||!g||!h||!p)throw new Lo("No session defined in URL");const x=Math.round(Date.now()/1e3),S=parseInt(g);let k=x+S;m&&(k=parseInt(m));const j=k-x;j*1e3<=ar&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${S}s`);const C=k-S;x-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,k,x):x-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,k,x);const{data:N,error:A}=await this._getUser(u);if(A)throw A;const P={provider_token:o,provider_refresh_token:d,access_token:u,expires_in:S,expires_at:k,refresh_token:h,token_type:p,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:r.type},error:null}}catch(o){if(qe(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const i=await os(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&i)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:d,error:u}=i;if(u)return{error:u};const h=(o=d.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:g}=await this.admin.signOut(h,r);if(g&&!(Qb(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return r!=="others"&&(await this._removeSession(),await Ia(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(r){const i=l1(),o={id:i,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async i=>{var o,d;try{const{data:{session:u},error:h}=i;if(h)throw h;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((d=this.stateChangeEmitters.get(r))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,i={}){let o=null,d=null;this.flowType==="pkce"&&([o,d]=await Js(this.storage,this.storageKey,!0));try{return await Ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:d,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(u){if(qe(u))return{data:null,error:u};throw u}}async getUserIdentities(){var r;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(r=i.user.identities)!==null&&r!==void 0?r:[]},error:null}}catch(i){if(qe(i))return{data:null,error:i};throw i}}async linkIdentity(r){var i;try{const{data:o,error:d}=await this._useSession(async u=>{var h,g,m,p,x;const{data:S,error:k}=u;if(k)throw k;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=r.options)===null||g===void 0?void 0:g.scopes,queryParams:(m=r.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Ke(this.fetch,"GET",j,{headers:this.headers,jwt:(x=(p=S.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(d)throw d;return Rn()&&!(!((i=r.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:r.provider,url:o?.url},error:null}}catch(o){if(qe(o))return{data:{provider:r.provider,url:null},error:o};throw o}}async unlinkIdentity(r){try{return await this._useSession(async i=>{var o,d;const{data:u,error:h}=i;if(h)throw h;return await Ke(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(d=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&d!==void 0?d:void 0})})}catch(i){if(qe(i))return{data:null,error:i};throw i}}async _refreshAccessToken(r){const i=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await f1(async d=>(d>0&&await u1(200*Math.pow(2,d-1)),this._debug(i,"refreshing attempt",d),await Ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:oa})),(d,u)=>{const h=200*Math.pow(2,d);return u&&pd(u)&&Date.now()+h-o<ar})}catch(o){if(this._debug(i,"error",o),qe(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(i,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",i,"url",o),Rn()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const d=await os(this.storage,this.storageKey);if(d&&this.userStorage){let h=await os(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:d.user},await sr(this.userStorage,this.storageKey+"-user",h)),d.user=(r=h?.user)!==null&&r!==void 0?r:md()}else if(d&&!d.user&&!d.user){const h=await os(this.storage,this.storageKey+"-user");h&&h?.user?(d.user=h.user,await Ia(this.storage,this.storageKey+"-user"),await sr(this.storage,this.storageKey,d)):d.user=md()}if(this._debug(o,"session from storage",d),!this._isValidSession(d)){this._debug(o,"session is not valid"),d!==null&&await this._removeSession();return}const u=((i=d.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<hd;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${hd}s`),u){if(this.autoRefreshToken&&d.refresh_token){const{error:h}=await this._callRefreshToken(d.refresh_token);h&&(console.error(h),pd(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=await this._getUser(d.access_token);!g&&h?.user?(d.user=h.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(o,"error",d),console.error(d);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var i,o;if(!r)throw new Ua;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Go;const{data:u,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!u.session)throw new Ua;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const g={session:u.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(u){if(this._debug(d,"error",u),qe(u)){const h={session:null,error:u};return pd(u)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(r,i,o=!0){const d=`#_notifyAllSubscribers(${r})`;this._debug(d,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:i});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(r,i)}catch(m){u.push(m)}});if(await Promise.all(h),u.length>0){for(let g=0;g<u.length;g+=1)console.error(u[g]);throw u[0]}}finally{this._debug(d,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const i=Object.assign({},r),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await sr(this.userStorage,this.storageKey+"-user",{user:i.user});const d=Object.assign({},i);delete d.user;const u=cg(d);await sr(this.storage,this.storageKey,u)}else{const d=cg(i);await sr(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),await Ia(this.storage,this.storageKey),await Ia(this.storage,this.storageKey+"-code-verifier"),await Ia(this.storage,this.storageKey+"-user"),this.userStorage&&await Ia(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Rn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),ar);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((o.expires_at*1e3-r)/ar);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${ar}ms, refresh threshold is ${Rd} ticks`),d<=Rd&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Gg)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const i=`#_onVisibilityChanged(${r})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,i,o){const d=[`provider=${encodeURIComponent(i)}`];if(o?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&d.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,h]=await Js(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});d.push(g.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);d.push(u.toString())}return o?.skipBrowserRedirect&&d.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${d.join("&")}`}async _unenroll(r){try{return await this._useSession(async i=>{var o;const{data:d,error:u}=i;return u?{data:null,error:u}:await Ke(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(qe(i))return{data:null,error:i};throw i}}async _enroll(r){try{return await this._useSession(async i=>{var o,d;const{data:u,error:h}=i;if(h)return{data:null,error:h};const g=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:{issuer:r.issuer}),{data:m,error:p}=await Ke(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return p?{data:null,error:p}:(r.factorType==="totp"&&(!((d=m?.totp)===null||d===void 0)&&d.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(i){if(qe(i))return{data:null,error:i};throw i}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:d,error:u}=i;if(u)return{data:null,error:u};const{data:h,error:g}=await Ke(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:{code:r.code,challenge_id:r.challengeId},headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:g})})}catch(i){if(qe(i))return{data:null,error:i};throw i}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:d,error:u}=i;return u?{data:null,error:u}:await Ke(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:{channel:r.channel},headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(qe(i))return{data:null,error:i};throw i}})}async _challengeAndVerify(r){const{data:i,error:o}=await this._challenge({factorId:r.factorId});return o?{data:null,error:o}:await this._verify({factorId:r.factorId,challengeId:i.id,code:r.code})}async _listFactors(){const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const o=r?.factors||[],d=o.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=o.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:o,totp:d,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async r=>{var i,o;const{data:{session:d},error:u}=r;if(u)return{data:null,error:u};if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=gd(d.access_token);let g=null;h.aal&&(g=h.aal);let m=g;((o=(i=d.user.factors)===null||i===void 0?void 0:i.filter(S=>S.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(m="aal2");const x=h.amr||[];return{data:{currentLevel:g,nextLevel:m,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(r,i={keys:[]}){let o=i.keys.find(g=>g.kid===r);if(o)return o;const d=Date.now();if(o=this.jwks.keys.find(g=>g.kid===r),o&&this.jwks_cached_at+Xb>d)return o;const{data:u,error:h}=await Ke(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=d,o=u.keys.find(g=>g.kid===r),!o)?null:o}async getClaims(r,i={}){try{let o=r;if(!o){const{data:j,error:C}=await this.getSession();if(C||!j.session)return{data:null,error:C};o=j.session.access_token}const{header:d,payload:u,signature:h,raw:{header:g,payload:m}}=gd(o);i?.allowExpired||b1(u.exp);const p=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!p){const{error:j}=await this.getUser(o);if(j)throw j;return{data:{claims:u,header:d,signature:h},error:null}}const x=v1(d.alg),S=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,S,h,r1(`${g}.${m}`)))throw new Dd("Invalid JWT signature");return{data:{claims:u,header:d,signature:h},error:null}}catch(o){if(qe(o))return{data:null,error:o};throw o}}}gi.nextInstanceID=0;const O1=gi;class L1 extends O1{constructor(r){super(r)}}var I1=function(l,r,i,o){function d(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function g(x){try{p(o.next(x))}catch(S){h(S)}}function m(x){try{p(o.throw(x))}catch(S){h(S)}}function p(x){x.done?u(x.value):d(x.value).then(g,m)}p((o=o.apply(l,r||[])).next())})};class U1{constructor(r,i,o){var d,u,h;this.supabaseUrl=r,this.supabaseKey=i;const g=Wb(r);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const m=`sb-${g.hostname.split(".")[0]}-auth-token`,p={db:Mb,realtime:Ob,auth:Object.assign(Object.assign({},Bb),{storageKey:m}),global:Ab},x=Hb(o??{},p);this.storageKey=(d=x.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(S,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=x.auth)!==null&&h!==void 0?h:{},this.headers,x.global.fetch),this.fetch=qb(i,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new eb(new URL("rest/v1",g).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new Nb(this.storageUrl.href,this.headers,this.fetch,o?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new W0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,i={},o={}){return this.rest.rpc(r,i,o)}channel(r,i={config:{}}){return this.realtime.channel(r,i)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var r,i;return I1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:d,userStorage:u,storageKey:h,flowType:g,lock:m,debug:p},x,S){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new L1({url:this.authUrl.href,headers:Object.assign(Object.assign({},k),x),storageKey:h,autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:d,userStorage:u,flowType:g,lock:m,debug:p,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new xb(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,o)=>{this._handleTokenChanged(i,"CLIENT",o?.access_token)})}_handleTokenChanged(r,i,o){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:r==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const q1=(l,r,i)=>new U1(l,r,i);function $1(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const r=l.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}$1()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const P1="https://wuluriiajnaruvaldlhb.supabase.co",H1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bHVyaWlham5hcnV2YWxkbGhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4MDc4OTQsImV4cCI6MjA3MzM4Mzg5NH0.-Dx4fALDwoKHjsxOy1hKsME_DG4ZCQi2PdLCq5wV_hI",le=q1(P1,H1),Ad=l=>{let r=0;for(let i=0;i<l.length;i++){const o=l.charCodeAt(i);r=(r<<5)-r+o,r=r&r}return r.toString()},W1=()=>Math.floor(Math.random()*1e6)+1,Vg=v.createContext(void 0),Mn=()=>{const l=v.useContext(Vg);if(l===void 0)throw new Error("useAuth must be used within an AuthProvider");return l},F1=({children:l})=>{const[r,i]=v.useState(null),[o,d]=v.useState(null),[u,h]=v.useState(!0);v.useEffect(()=>{window.emergencyLogout=()=>{h(!1),i(null),d(null),localStorage.clear(),sessionStorage.clear(),window.location.reload()};const k=setTimeout(()=>{u&&h(!1)},3e4);(async()=>{try{const{data:{session:N},error:A}=await le.auth.getSession();if(N?.user)d(N.user),await g(N.user.id);else{const P=localStorage.getItem("pos_user");P&&i(JSON.parse(P))}}catch{}finally{h(!1)}})();const{data:{subscription:C}}=le.auth.onAuthStateChange(async(N,A)=>{if(N==="SIGNED_IN"&&A?.user){d(A.user);try{await g(A.user.id)}catch{}}else N==="SIGNED_OUT"?(d(null),i(null),localStorage.removeItem("pos_user")):N==="TOKEN_REFRESHED"&&A?.user&&d(A.user)});return()=>{clearTimeout(k),C.unsubscribe()}},[]);const g=async k=>{try{const{data:j,error:C}=await le.from("users").select("*").eq("user_id",parseInt(k)).single();if(C){const N={user_id:999999,username:"temp_user",role:"owner",active:!0,icon:"lily"};i(N),localStorage.setItem("pos_user",JSON.stringify(N));return}i(j),localStorage.setItem("pos_user",JSON.stringify(j))}catch{const C={user_id:999999,username:"temp_user",role:"owner",active:!0,icon:"lily"};i(C),localStorage.setItem("pos_user",JSON.stringify(C))}},m=async(k,j)=>{try{h(!0);const C=await p(k,j);return C&&localStorage.setItem("lastLogin",new Date().toLocaleString()),C}catch{return!1}finally{h(!1)}},p=async(k,j)=>{try{const C=Ad(j),{data:N,error:A}=await le.from("users").select("*").eq("username",k).eq("password_hash",C).eq("active",!0).single();if(A||!N)return!1;const P={user_id:N.user_id,username:N.username,role:N.role,active:N.active,icon:N.icon};return i(P),localStorage.setItem("pos_user",JSON.stringify(P)),localStorage.setItem("lastLogin",new Date().toLocaleString()),localStorage.setItem("lastPassword",j),!0}catch{return!1}},S={user:r,supabaseUser:o,login:m,logout:async()=>{try{o&&await le.auth.signOut(),i(null),d(null),localStorage.removeItem("pos_user"),localStorage.removeItem("lastPassword")}catch{}},loading:u,currentUserId:o?.id||r?.user_id?.toString()};return a.jsx(Vg.Provider,{value:S,children:l})},Xg=v.createContext(void 0),Y1=({children:l})=>{const[r,i]=v.useState(!1);return a.jsx(Xg.Provider,{value:{isCollapsed:r,setIsCollapsed:i},children:l})},Xd=()=>{const l=v.useContext(Xg);if(l===void 0)throw new Error("useNav must be used within a NavProvider");return l},pg={Admin:{canManageUsers:!0,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!0,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Manager:{canManageUsers:!1,canManageProducts:!0,canProcessSales:!0,canViewReports:!0,canChangeSettings:!1,canUploadImages:!0,canLookupProducts:!0,canLookupCustomers:!0},Cashier:{canManageUsers:!1,canManageProducts:!1,canProcessSales:!0,canViewReports:!1,canChangeSettings:!1,canUploadImages:!1,canLookupProducts:!0,canLookupCustomers:!0}},Kg=v.createContext(void 0),G1=({children:l})=>{const{user:r}=Mn(),i=r?.role||"Cashier",o=pg[i]||pg.Cashier,d=g=>o[g]||!1,h={userRole:i,permissions:o,hasPermission:d,canAccessRoute:g=>{switch(g){case"/admin":return d("canManageUsers");case"/products":return d("canManageProducts")||d("canLookupProducts");case"/sales":return d("canProcessSales");case"/customers":return d("canLookupCustomers");case"/":return!0;default:return!0}}};return a.jsx(Kg.Provider,{value:h,children:l})},Kd=()=>{const l=v.useContext(Kg);if(l===void 0)throw new Error("useRole must be used within a RoleProvider");return l},V1=()=>{const{isCollapsed:l,setIsCollapsed:r}=Xd();v.useEffect(()=>{const i=d=>{if(l)return;const u=document.querySelector("nav");if(u&&u.contains(d.target))return;d.target.closest('button, a, input, select, textarea, [role="button"], [onclick]')||r(!0)},o=setTimeout(()=>{document.addEventListener("click",i)},100);return()=>{clearTimeout(o),document.removeEventListener("click",i)}},[l,r])},X1=()=>{const[l,r]=v.useState(""),[i,o]=v.useState(""),[d,u]=v.useState(""),{login:h,loading:g}=Mn(),m=async p=>{if(p.preventDefault(),u(""),!l||!i){u("Please enter both username and password");return}await h(l,i)||u("Invalid username or password")};return a.jsxs("div",{style:{minHeight:"100vh",height:"100vh",width:"100%",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url(/retailpos/images/backgrounds/appbg3.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.15)",zIndex:0}})}),a.jsx("div",{style:{position:"relative",zIndex:10,height:"100vh",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px 16px"},children:a.jsx("div",{style:{width:"100%",maxWidth:"600px"},children:a.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 255, 255, 0.08)",padding:"40px",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 100%)",pointerEvents:"none"}}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"32px",position:"relative",zIndex:1},children:[a.jsx("div",{style:{marginBottom:"20px"},children:a.jsx("img",{src:"/retailpos/images/backgrounds/logo1.png",alt:"Company Logo",style:{width:"200px",height:"auto"}})}),a.jsx("h2",{style:{fontSize:"36px",fontWeight:"bold",color:"white",marginBottom:"8px",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:"Login"})]}),a.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"24px",position:"relative",zIndex:1},onSubmit:m,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"white",marginBottom:"8px",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Username"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:"50%",right:"12px",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2},children:a.jsx("i",{className:"fa-solid fa-user",style:{color:"white",fontSize:"20px"}})}),a.jsx("input",{id:"username",name:"username",type:"text",required:!0,style:{background:"transparent",border:"none",borderBottom:"2px solid rgba(255, 255, 255, 0.4)",color:"white",fontSize:"16px",padding:"12px 40px 12px 0",width:"100%",outline:"none",transition:"border-color 0.3s ease"},onFocus:p=>p.target.style.borderBottomColor="rgba(255, 255, 255, 0.8)",onBlur:p=>p.target.style.borderBottomColor="rgba(255, 255, 255, 0.4)",placeholder:"Enter your username",value:l,onChange:p=>r(p.target.value),disabled:g})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"white",marginBottom:"8px",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:"Password"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:"50%",right:"12px",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2},children:a.jsx("i",{className:"fa-solid fa-lock",style:{color:"white",fontSize:"20px"}})}),a.jsx("input",{id:"password",name:"password",type:"password",required:!0,style:{background:"transparent",border:"none",borderBottom:"2px solid rgba(255, 255, 255, 0.4)",color:"white",fontSize:"16px",padding:"12px 40px 12px 0",width:"100%",outline:"none",transition:"border-color 0.3s ease"},onFocus:p=>p.target.style.borderBottomColor="rgba(255, 255, 255, 0.8)",onBlur:p=>p.target.style.borderBottomColor="rgba(255, 255, 255, 0.4)",placeholder:"Enter your password",value:i,onChange:p=>o(p.target.value),disabled:g})]})]}),a.jsx("div",{className:"text-center",children:localStorage.getItem("pos_user")?a.jsxs("button",{type:"button",onClick:async()=>{const p=JSON.parse(localStorage.getItem("pos_user")||"{}"),x=localStorage.getItem("lastPassword");p.username&&x?await h(p.username,x)||u("Auto-login failed. Please enter credentials manually."):u("No stored credentials found.")},disabled:g,className:"text-sm text-blue-300 hover:text-blue-200 underline transition-colors duration-200 disabled:opacity-50",children:["Last login: ",localStorage.getItem("lastLogin")||"Never"," (Click to auto-login)"]}):a.jsx("p",{className:"text-sm text-white/70",children:"Last login: Never"})}),d&&a.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-100 px-4 py-3 rounded-lg backdrop-blur-sm",children:d}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:g,style:{width:"100%",padding:"16px 24px",background:"white",color:"#374151",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:g?"not-allowed":"pointer",opacity:g?.7:1,transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:p=>{if(!g){const x=p.currentTarget;x.style.background="#f9fafb",x.style.transform="translateY(-1px)",x.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.2)"}},onMouseLeave:p=>{if(!g){const x=p.currentTarget;x.style.background="white",x.style.transform="translateY(0)",x.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"}},children:g?a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{color:"#374151",fontSize:"18px",marginRight:"8px",animation:"spin 1s linear infinite"}}),"Signing in..."]}):"Log in"})})]})]})})})]})},K1=({children:l})=>{const{user:r,supabaseUser:i,loading:o}=Mn();return o?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"Loading..."}),a.jsx("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Force Logout (Emergency)"})]})}):!r&&!i?a.jsx(X1,{}):a.jsx(a.Fragment,{children:l})},Io=({children:l,requiredPermission:r,fallbackRoute:i="/"})=>{const o=An(),{canAccessRoute:d,hasPermission:u}=Kd();return d(o.pathname)?r&&!u(r)?a.jsx(Pp,{to:i,replace:!0}):a.jsx(a.Fragment,{children:l}):a.jsx(Pp,{to:i,replace:!0})},Q1=()=>{const l=An(),{user:r,logout:i}=Mn(),{isCollapsed:o,setIsCollapsed:d}=Xd(),{canAccessRoute:u,userRole:h}=Kd(),m=[{path:"/",label:"Dashboard",icon:"fas fa-home"},{path:"/products",label:"Products",icon:"fas fa-box"},{path:"/sales",label:"Sales",icon:"fas fa-dollar-sign"},{path:"/transactions",label:"Transactions",icon:"fas fa-receipt"},{path:"/side-businesses",label:"Side Businesses",icon:"fas fa-briefcase"},{path:"/reminders",label:"Reminders",icon:"fas fa-sticky-note"},{path:"/admin",label:"Admin",icon:"fas fa-users-cog"}].filter(x=>u(x.path)),p=x=>{switch(x){case"Admin":return"#ef4444";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#6b7280"}};return a.jsxs("nav",{style:{width:o?"60px":"160px",height:"100vh",background:"#1a1a1a",borderRight:"1px solid #333333",display:"flex",flexDirection:"column",position:"fixed",left:0,top:0,zIndex:50,padding:o?"20px 8px":"20px 12px",boxShadow:"2px 0 8px rgba(0, 0, 0, 0.3)",transition:"width 0.3s ease, padding 0.3s ease"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:o?"center":"flex-start",gap:"12px",marginBottom:"32px",paddingBottom:"16px",borderBottom:"1px solid #333333"},children:[a.jsx("div",{onClick:()=>d(!o),style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:"4px",transition:"background 0.2s ease"},onMouseEnter:x=>x.target.style.setProperty("background-color","#333333"),onMouseLeave:x=>x.target.style.setProperty("background-color","transparent"),children:a.jsx("div",{style:{width:"16px",height:"2px",background:"#ffffff",position:"relative",transition:"transform 0.3s ease"},children:a.jsx("div",{style:{position:"absolute",top:"6px",left:0,width:"16px",height:"2px",background:"#ffffff",transition:"transform 0.3s ease"}})})}),!o&&a.jsx("h1",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"bold",margin:0,transition:"opacity 0.3s ease"},children:"Retail POS"})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1},children:m.map(x=>a.jsxs(Hd,{to:x.path,style:{display:"flex",alignItems:"center",justifyContent:o?"center":"flex-start",gap:"12px",padding:o?"12px 8px":"12px 16px",borderRadius:"8px",textDecoration:"none",transition:"all 0.2s ease",background:l.pathname===x.path?"#333333":"transparent",color:l.pathname===x.path?"#ffffff":"#cccccc"},onMouseEnter:S=>{l.pathname!==x.path&&S.target.style.setProperty("background-color","#333333")(S.target).style.setProperty("color","#ffffff")},onMouseLeave:S=>{l.pathname!==x.path&&S.target.style.setProperty("background-color","transparent")(S.target).style.setProperty("color","#cccccc")},children:[a.jsx("i",{className:x.icon,style:{fontSize:"16px",width:"20px"}}),!o&&a.jsx("span",{style:{fontSize:"13px",fontWeight:"500",transition:"opacity 0.3s ease"},children:x.label})]},x.path))}),a.jsxs("div",{style:{padding:"16px 0",borderTop:"1px solid #333333",display:"flex",flexDirection:"column",gap:"12px",alignItems:o?"center":"stretch"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:o?"center":"flex-start",gap:"12px",padding:o?"8px":"8px 12px",borderRadius:"8px",background:"#333333",cursor:"pointer",transition:"background 0.2s ease",width:o?"44px":"auto"},onMouseEnter:x=>x.target.style.setProperty("background-color","#444444"),onMouseLeave:x=>x.target.style.setProperty("background-color","#333333"),children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",color:"#1a1a1a",fontSize:"14px",fontWeight:"bold"},children:r?.username?.charAt(0).toUpperCase()}),!o&&a.jsxs("div",{style:{flex:1},children:[a.jsx("p",{style:{color:"#ffffff",fontSize:"14px",fontWeight:"500",margin:0,lineHeight:"1.2",transition:"opacity 0.3s ease"},children:r?.username}),a.jsx("p",{style:{color:p(h),fontSize:"12px",margin:0,textTransform:"capitalize",transition:"opacity 0.3s ease",fontWeight:"500"},children:h})]})]}),a.jsxs("button",{onClick:async()=>{console.log("Logout button clicked"),await i()},style:{width:o?"44px":"100%",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"8px",background:"#dc3545",border:"none",cursor:"pointer",transition:"background 0.2s ease, width 0.3s ease",color:"#ffffff",fontSize:"14px",fontWeight:"500"},onMouseEnter:x=>{const S=x.target;S.style.background="#c82333"},onMouseLeave:x=>{const S=x.target;S.style.background="#dc3545"},children:[a.jsx("i",{className:"fa-solid fa-sign-out-alt",style:{fontSize:"16px"}}),!o&&a.jsx("span",{style:{transition:"opacity 0.3s ease"},children:"Logout"})]})]})]})},Z1=()=>{const[l,r]=v.useState([]),[i,o]=v.useState(!0),[d,u]=v.useState(null),h=async()=>{try{o(!0),u(null);const{data:p,error:x}=await le.from("products").select("*").lt("stock_quantity",10).order("stock_quantity",{ascending:!0});if(x)throw x;r(p||[])}catch(p){console.error("Error fetching low stock items:",p),u(p instanceof Error?p.message:"Failed to fetch low stock items")}finally{o(!1)}},g=async(p,x)=>{try{u(null);const{error:S}=await le.from("products").update({stock_quantity:x,last_updated:new Date().toISOString()}).eq("product_id",p);if(S)throw S;const{error:k}=await le.from("inventory_movements").insert({product_id:p,quantity_change:x,movement_type:"Restock",datetime:new Date().toISOString()});return k&&console.warn("Failed to log inventory movement:",k),await h(),!0}catch(S){return console.error("Error restocking product:",S),u(S instanceof Error?S.message:"Failed to restock product"),!1}},m=async p=>{const x=l.find(k=>k.product_id===p);if(!x)return u("Product not found"),!1;const S=Math.max(x.reorder_level*2,20);return await g(p,S)};return v.useEffect(()=>{h()},[]),{lowStockItems:l,loading:i,error:d,fetchLowStockItems:h,restockProduct:g,quickRestock:m}},J1=({product:l,onRestock:r,onQuickRestock:i})=>{const[o,d]=v.useState(!1),[u,h]=v.useState(""),[g,m]=v.useState(!1),p=async()=>{m(!0);const j=await i(l.product_id);m(!1),j&&d(!1)},x=async()=>{const j=parseInt(u);if(isNaN(j)||j<=0)return;m(!0);const C=await r(l.product_id,j);m(!1),C&&(d(!1),h(""))},S=()=>l.stock_quantity<=2?"#ef4444":l.stock_quantity<=5?"#f59e0b":"#eab308",k=()=>l.stock_quantity<=2?"Critical":l.stock_quantity<=5?"Low":"Below Reorder";return a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:j=>{j.currentTarget.style.transform="translateY(-2px)",j.currentTarget.style.boxShadow="0 4px 16px rgba(62, 63, 41, 0.15)"},onMouseLeave:j=>{j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.1)"},children:[a.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",background:S(),color:"white",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:k()}),a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[a.jsxs("div",{style:{width:"60px",height:"60px",borderRadius:"8px",background:"#f9fafb",border:"1px solid rgba(125, 141, 134, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:[l.image_url?a.jsx("img",{src:l.image_url,alt:l.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:j=>{j.currentTarget.style.setProperty("display","none")(j.currentTarget.nextElementSibling).style.setProperty("display","flex")}}):null,a.jsx("div",{style:{display:l.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:"#7d8d86",fontSize:"20px"},children:a.jsx("i",{className:"fa-solid fa-box"})})]}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0",lineHeight:"1.3"},children:l.name}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"0 0 8px 0"},children:l.category}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[a.jsxs("span",{style:{fontSize:"12px",color:"#3e3f29",fontWeight:"500"},children:["Stock: ",l.stock_quantity]}),a.jsx("span",{style:{fontSize:"12px",color:"#7d8d86"},children:"•"}),a.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86"},children:["Reorder at: ",l.reorder_level]})]}),o?a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"number",value:u,onChange:j=>h(j.target.value),placeholder:"Qty",min:"1",style:{width:"60px",padding:"6px 8px",border:"1px solid #7d8d86",borderRadius:"6px",fontSize:"12px",outline:"none"}}),a.jsx("button",{onClick:x,disabled:g||!u,style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:g||!u?"not-allowed":"pointer",opacity:g||!u?.7:1,transition:"all 0.2s ease"},onMouseEnter:j=>{!g&&u&&(j.currentTarget.style.background="#bca88d")},onMouseLeave:j=>{!g&&u&&(j.currentTarget.style.background="#7d8d86")},children:g?a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):"Restock"}),a.jsx("button",{onClick:()=>{d(!1),h("")},disabled:g,style:{background:"transparent",color:"#7d8d86",border:"none",fontSize:"12px",cursor:g?"not-allowed":"pointer",opacity:g?.7:1},children:"Cancel"})]}):a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[a.jsxs("button",{onClick:p,disabled:g,style:{background:"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:g?"not-allowed":"pointer",opacity:g?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:j=>{g||(j.currentTarget.style.background="#059669")},onMouseLeave:j=>{g||(j.currentTarget.style.background="#10b981")},children:[g?a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}):a.jsx("i",{className:"fa-solid fa-bolt"}),"Quick Restock"]}),a.jsx("button",{onClick:()=>d(!0),disabled:g,style:{background:"transparent",color:"#7d8d86",border:"1px solid #7d8d86",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:g?"not-allowed":"pointer",opacity:g?.7:1,transition:"all 0.2s ease"},onMouseEnter:j=>{g||(j.currentTarget.style.background="#7d8d86",j.currentTarget.style.color="white")},onMouseLeave:j=>{g||(j.currentTarget.style.background="transparent",j.currentTarget.style.color="#7d8d86")},children:"Custom"})]})]})]})]})},ev=()=>{const{lowStockItems:l,loading:r,error:i,restockProduct:o,quickRestock:d}=Z1(),[u,h]=v.useState(0),g=l[u]||null,m=u<l.length-1,p=u>0,x=()=>{m&&h(u+1)},S=()=>{p&&h(u-1)};return r?a.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading low stock items..."]})}):i?a.jsx("div",{style:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px"},children:i})]})}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:l.length>0?"#fbbf24":"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"18px",color:l.length>0?"#d97706":"#059669"}})}),a.jsxs("div",{children:[a.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Low Stock Items"}),a.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[l.length," item",l.length!==1?"s":""," need",l.length===1?"s":""," restocking"]})]})]}),l.length>1&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("button",{onClick:S,disabled:!p,style:{background:p?"#7d8d86":"#e5e7eb",color:p?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:p?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:k=>{p&&(k.currentTarget.style.background="#bca88d")},onMouseLeave:k=>{p&&(k.currentTarget.style.background="#7d8d86")},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsxs("span",{style:{fontSize:"12px",color:"#7d8d86",fontWeight:"500",minWidth:"40px",textAlign:"center"},children:[u+1," / ",l.length]}),a.jsx("button",{onClick:x,disabled:!m,style:{background:m?"#7d8d86":"#e5e7eb",color:m?"#f1f0e4":"#9ca3af",border:"none",borderRadius:"6px",padding:"6px 8px",fontSize:"12px",cursor:m?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:k=>{m&&(k.currentTarget.style.background="#bca88d")},onMouseLeave:k=>{m&&(k.currentTarget.style.background="#7d8d86")},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]}),l.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-check-circle",style:{fontSize:"48px",marginBottom:"16px",color:"#10b981"}}),a.jsx("p",{style:{fontSize:"16px",margin:0,fontWeight:"500"},children:"All items are well stocked!"}),a.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0",opacity:.8},children:"No items need restocking at the moment."})]}):g?a.jsx(J1,{product:g,onRestock:o,onQuickRestock:d},g.product_id):null]})},tv=()=>{const[l,r]=v.useState([]),[i,o]=v.useState([]),[d,u]=v.useState([]),[h,g]=v.useState(!0),[m,p]=v.useState(null),x=j=>{const C=new Date;switch(j){case"today":const N=C.toISOString().split("T")[0];return{start:`${N}T00:00:00`,end:`${N}T23:59:59`};case"week":const A=new Date(C);A.setDate(C.getDate()-C.getDay()),A.setHours(0,0,0,0);const P=new Date(A);return P.setDate(A.getDate()+6),P.setHours(23,59,59,999),{start:A.toISOString(),end:P.toISOString()};case"month":const E=new Date(C.getFullYear(),C.getMonth(),1);E.setHours(0,0,0,0);const U=new Date(C.getFullYear(),C.getMonth()+1,0);return U.setHours(23,59,59,999),{start:E.toISOString(),end:U.toISOString()};default:return{start:"",end:""}}},S=async j=>{try{const{start:C,end:N}=x(j);console.log(`Fetching ${j} analytics from ${C} to ${N}`);const{data:A,error:P}=await le.from("sale_items").select(`
          quantity,
          price_each,
          products (product_id, name, image_url),
          sales!inner (datetime)
        `).gte("sales.datetime",C).lt("sales.datetime",N);if(P)throw console.error(`Error fetching ${j} analytics:`,P),P;console.log(`${j} analytics data:`,A);const E=new Map;(A||[]).forEach(Z=>{const G=Z.products?.product_id,re=Z.products?.name,de=Z.products?.image_url;if(G&&re)if(E.has(G)){const ve=E.get(G);ve.quantity_sold+=Z.quantity,ve.total_sales+=Z.quantity*Z.price_each}else E.set(G,{product_id:G,product_name:re,quantity_sold:Z.quantity,total_sales:Z.quantity*Z.price_each,image_url:de})});const U=Array.from(E.values()).sort((Z,G)=>G.total_sales-Z.total_sales).slice(0,5);return console.log(`${j} sorted products:`,U),U}catch(C){throw console.error(`Error fetching ${j} product analytics:`,C),C}},k=async()=>{try{g(!0),p(null);const[j,C,N]=await Promise.all([S("today").catch(()=>[]),S("week").catch(()=>[]),S("month").catch(()=>[])]);r(j),o(C),u(N)}catch(j){console.error("Error fetching product analytics:",j),p(j instanceof Error?j.message:"Failed to fetch product analytics")}finally{g(!1)}};return v.useEffect(()=>{k()},[]),{todayProducts:l,weekProducts:i,monthProducts:d,loading:h,error:m,refetch:k}},nv=()=>{const{todayProducts:l,weekProducts:r,monthProducts:i,loading:o,error:d}=tv(),[u,h]=v.useState("today"),g=k=>{switch(k){case"today":return l;case"week":return r;case"month":return i;default:return[]}},m=k=>{switch(k){case"today":return"Today";case"week":return"This Week";case"month":return"This Month";default:return""}},p=k=>{switch(k){case"today":return"fa-solid fa-calendar-day";case"week":return"fa-solid fa-calendar-week";case"month":return"fa-solid fa-calendar";default:return"fa-solid fa-chart-line"}},x=["today","week","month"],S=g(u);return o?a.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading product analytics..."]})}):d?a.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px"},children:d})]})}):a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#bca88d",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"18px",color:"#3e3f29"}})}),a.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Top Products"})]}),a.jsx("div",{style:{display:"flex",background:"#f9fafb",borderRadius:"8px",padding:"4px",gap:"4px"},children:x.map(k=>a.jsxs("button",{onClick:()=>h(k),style:{flex:1,padding:"8px 12px",borderRadius:"6px",border:"none",background:u===k?"#7d8d86":"transparent",color:u===k?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:j=>{u!==k&&(j.currentTarget.style.background="#e5e7eb",j.currentTarget.style.color="#3e3f29")},onMouseLeave:j=>{u!==k&&(j.currentTarget.style.background="transparent",j.currentTarget.style.color="#7d8d86")},children:[a.jsx("i",{className:p(k),style:{fontSize:"12px"}}),m(k)]},k))})]}),S.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsxs("p",{style:{fontSize:"16px",margin:0,fontWeight:"500"},children:["No sales data for ",m(u).toLowerCase()]}),a.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0",opacity:.8},children:"Check back later for product performance insights."})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:S.map((k,j)=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"white",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.1)",transition:"all 0.2s ease"},onMouseEnter:C=>{C.currentTarget.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.1)",C.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:C=>{C.currentTarget.style.boxShadow="none",C.currentTarget.style.transform="translateY(0)"},children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:j===0?"#fbbf24":j===1?"#e5e7eb":j===2?"#f59e0b":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:j===0?"#d97706":j===1?"#6b7280":j===2?"#d97706":"#f1f0e4",fontSize:"12px",fontWeight:"bold",flexShrink:0},children:j===0?a.jsx("i",{className:"fa-solid fa-crown",style:{fontSize:"14px"}}):j+1}),a.jsxs("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#f9fafb",border:"1px solid rgba(125, 141, 134, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:[k.image_url?a.jsx("img",{src:k.image_url,alt:k.product_name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:C=>{C.currentTarget.style.setProperty("display","none")(C.currentTarget.nextElementSibling).style.setProperty("display","flex")}}):null,a.jsx("div",{style:{display:k.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:"#7d8d86",fontSize:"16px"},children:a.jsx("i",{className:"fa-solid fa-box"})})]}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 2px 0",lineHeight:"1.3"},children:k.product_name}),a.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:[k.quantity_sold," sold"]})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981",margin:0},children:["€",k.total_sales.toFixed(2)]}),j===0&&a.jsx("p",{style:{fontSize:"10px",color:"#d97706",margin:"2px 0 0 0",fontWeight:"500"},children:"TOP SELLER"})]})]},k.product_id))})]})},av=()=>{const[l,r]=v.useState([]),[i,o]=v.useState([]),[d,u]=v.useState(!0),[h,g]=v.useState(null),m=(N=0)=>{const A=new Date,P=A.getDay(),E=new Date(A);E.setDate(A.getDate()-P+N*7),E.setHours(0,0,0,0);const U=[],Z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let G=0;G<7;G++){const re=new Date(E);re.setDate(E.getDate()+G),U.push({day:Z[G],date:re.toISOString().split("T")[0],fullDate:re})}return U},p=()=>{const N=[];for(let A=10;A<=20;A++){const P=A===12?"12 PM":A>12?`${A-12} PM`:`${A} AM`;N.push({hour:A,hourLabel:P,startTime:`${A.toString().padStart(2,"0")}:00:00`,endTime:`${(A+1).toString().padStart(2,"0")}:00:00`})}return N},x=async(N=0)=>{try{const A=m(N),P=[];for(const{day:E,date:U,fullDate:Z}of A){const G=`${U}T00:00:00`,re=`${U}T23:59:59`,{data:de,error:ve}=await le.from("sales").select("total_amount, datetime").gte("datetime",G).lt("datetime",re);ve&&console.error(`Error fetching sales for ${E}:`,ve);const{data:ye,error:Ae}=await le.from("side_business_sales").select("total_amount, date_time").gte("date_time",G).lt("date_time",re);Ae&&console.error(`Error fetching side business sales for ${E}:`,Ae);const R=de?.reduce((fe,Se)=>fe+(Se.total_amount||0),0)||0,q=ye?.reduce((fe,Se)=>fe+(Se.total_amount||0),0)||0,O=R+q,se=de?.length||0,he=ye?.length||0,I=se+he,J=I>0?O/I:0;P.push({day:E,date:U,totalSales:O,transactionCount:I,averageTransaction:J})}r(P)}catch(A){throw console.error("Error fetching weekly sales:",A),A}},S=async N=>{try{const A=p(),P=[];for(const{hour:E,hourLabel:U,startTime:Z,endTime:G}of A){const re=`${N}T${Z}`,de=`${N}T${G}`,{data:ve,error:ye}=await le.from("sales").select("total_amount, datetime").gte("datetime",re).lt("datetime",de);ye&&console.error(`Error fetching hourly sales for ${E}:00:`,ye);const{data:Ae,error:R}=await le.from("side_business_sales").select("total_amount, date_time").gte("date_time",re).lt("date_time",de);R&&console.error(`Error fetching hourly side business sales for ${E}:00:`,R);const q=ve?.reduce((fe,Se)=>fe+(Se.total_amount||0),0)||0,O=Ae?.reduce((fe,Se)=>fe+(Se.total_amount||0),0)||0,se=q+O,he=ve?.length||0,I=Ae?.length||0,J=he+I;(se>0||J>0)&&console.log(`Hour ${E}:00 - Sales: €${se.toFixed(2)}, Transactions: ${J}`),P.push({hour:E,hourLabel:U,totalSales:se,transactionCount:J})}o(P)}catch(A){throw console.error("Error fetching hourly sales:",A),A}},k=async()=>{try{u(!0),g(null),await Promise.all([x(),S(new Date().toISOString().split("T")[0])])}catch(N){console.error("Error fetching sales analytics:",N),g(N instanceof Error?N.message:"Failed to fetch sales analytics")}finally{u(!1)}},j=async N=>{try{await S(N)}catch(A){console.error("Error refreshing hourly data:",A),g(A instanceof Error?A.message:"Failed to refresh hourly data")}},C=async(N=0)=>{try{await x(N)}catch(A){console.error("Error refreshing weekly data:",A),g(A instanceof Error?A.message:"Failed to refresh weekly data")}};return v.useEffect(()=>{k()},[]),{weeklyData:l,hourlyData:i,loading:d,error:h,refreshHourlyData:j,refreshWeeklyData:C,refetch:k}},sv=()=>{const[l,r]=v.useState(null),[i,o]=v.useState(!0),[d,u]=v.useState(null),h=async()=>{try{o(!0),u(null);const{data:g,error:m}=await le.from("business_info").select("*").order("business_id",{ascending:!0}).limit(1).single();if(m){console.error("Error fetching business info:",m),u(m.message);return}r(g)}catch(g){console.error("Error in fetchBusinessInfo:",g),u(g instanceof Error?g.message:"Failed to fetch business info")}finally{o(!1)}};return v.useEffect(()=>{h()},[]),{businessInfo:l,loading:i,error:d,refetch:h}},rv=()=>{const{weeklyData:l,hourlyData:r,loading:i,error:o,refreshHourlyData:d,refreshWeeklyData:u}=av(),{businessInfo:h}=sv(),[g,m]=v.useState("weekly"),[p,x]=v.useState(new Date().toISOString().split("T")[0]),[S,k]=v.useState(0),[j,C]=v.useState({visible:!1,x:0,y:0,data:null}),N=async q=>{x(q),await d(q)},A=async()=>{const q=S-1;k(q),await u(q)},P=async()=>{const q=S+1;k(q),await u(q)},E=async()=>{k(0),await u(0)},U=()=>{const q=new Date,O=q.getDay(),se=new Date(q);se.setDate(q.getDate()-O+S*7);const he=new Date(se);he.setDate(se.getDate()+6);const I=J=>J.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${I(se)} - ${I(he)}`},Z=(q,O)=>{C({visible:!0,x:q.clientX,y:q.clientY,data:O})},G=()=>{C({visible:!1,x:0,y:0,data:null})},re=q=>{const O=Math.max(...q.map(se=>se.totalSales));return O===0?1:Math.ceil(O*1.1)},de=(q,O)=>q===0?0:Math.max(q/O*180,4),ve=(q,O=!0)=>{if(O){const se=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316"];return se[q%se.length]}else{const se=Math.min(q/9,1),he=Math.floor(59+180*se),I=Math.floor(130+-62*se),J=Math.floor(246+-178*se);return`rgb(${he}, ${I}, ${J})`}},ye=q=>`€${q.toFixed(2)}`;if(i)return a.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"16px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading sales data..."]})});if(o)return a.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:a.jsxs("div",{style:{textAlign:"center",color:"#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"8px"}}),a.jsx("p",{style:{margin:0,fontSize:"14px"},children:o})]})});const Ae=g==="weekly"?l:r,R=Ae.length>0?re(Ae):100;return Ae.length===0&&!i&&!o?a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",margin:"0",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",textAlign:"center",minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(h?.logo_url,a.jsx("img",{src:h?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:h?.name||"LandM Store Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:q=>{const O=q.target;O.style.display="none";const se=O.parentElement;se&&(se.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),a.jsxs("div",{children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(h?.name||"LandM Store")&&a.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:h?.name||"LandM Store"})]})]}),a.jsxs("div",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"16px"},children:[a.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"500"},children:"No sales data available"}),a.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.8},children:g==="weekly"?"No sales recorded for this week":"No sales recorded for this date"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-100%) scale(0.9); }
          to { opacity: 1; transform: translateY(-100%) scale(1); }
        }
      `}),a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",width:"100%",margin:"0",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(h?.logo_url,a.jsx("img",{src:h?.logo_url||"/retailpos/images/backgrounds/logo1.png",alt:h?.name||"LandM Store Logo",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px"},onError:q=>{const O=q.target;O.style.display="none";const se=O.parentElement;se&&(se.innerHTML='<i class="fa-solid fa-chart-line" style="font-size: 20px; color: #7d8d86;"></i>')}}))}),a.jsxs("div",{children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:"Sales Overview"}),(h?.name||"LandM Store")&&a.jsx("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0,fontWeight:"500"},children:h?.name||"LandM Store"})]})]}),a.jsxs("div",{style:{display:"flex",background:"#f9fafb",borderRadius:"8px",padding:"4px",gap:"4px",marginBottom:"24px",maxWidth:"300px"},children:[a.jsxs("button",{onClick:()=>m("weekly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:g==="weekly"?"#7d8d86":"transparent",color:g==="weekly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:q=>{g!=="weekly"&&(q.currentTarget.style.background="#e5e7eb",q.currentTarget.style.color="#3e3f29")},onMouseLeave:q=>{g!=="weekly"&&(q.currentTarget.style.background="transparent",q.currentTarget.style.color="#7d8d86")},children:[a.jsx("i",{className:"fa-solid fa-calendar-week",style:{fontSize:"12px"}}),"Weekly"]}),a.jsxs("button",{onClick:()=>m("hourly"),style:{flex:1,padding:"8px 16px",borderRadius:"6px",border:"none",background:g==="hourly"?"#7d8d86":"transparent",color:g==="hourly"?"#f1f0e4":"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:q=>{g!=="hourly"&&(q.currentTarget.style.background="#e5e7eb",q.currentTarget.style.color="#3e3f29")},onMouseLeave:q=>{g!=="hourly"&&(q.currentTarget.style.background="transparent",q.currentTarget.style.color="#7d8d86")},children:[a.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"12px"}}),"Hourly"]})]}),g==="weekly"&&a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsxs("button",{onClick:A,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:q=>{q.currentTarget.style.background="#f3f4f6",q.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:q=>{q.currentTarget.style.background="#ffffff",q.currentTarget.style.borderColor="#d1d5db"},children:[a.jsx("i",{className:"fa-solid fa-chevron-left",style:{fontSize:"12px"}}),"Previous Week"]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",marginBottom:"2px"},children:U()}),a.jsx("button",{onClick:E,style:{fontSize:"12px",color:"#7d8d86",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline",transition:"color 0.2s ease"},onMouseEnter:q=>{q.currentTarget.style.color="#3e3f29"},onMouseLeave:q=>{q.currentTarget.style.color="#7d8d86"},children:S===0?"Current Week":"Go to Current Week"})]}),a.jsxs("button",{onClick:P,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#ffffff",color:"#7d8d86",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:q=>{q.currentTarget.style.background="#f3f4f6",q.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:q=>{q.currentTarget.style.background="#ffffff",q.currentTarget.style.borderColor="#d1d5db"},children:["Next Week",a.jsx("i",{className:"fa-solid fa-chevron-right",style:{fontSize:"12px"}})]})]}),g==="hourly"&&a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"8px"},children:"Select Date:"}),a.jsx("input",{type:"date",value:p,onChange:q=>N(q.target.value),style:{padding:"8px 12px",border:"1px solid #7d8d86",borderRadius:"6px",fontSize:"14px",color:"#3e3f29",background:"white",outline:"none"}})]}),a.jsxs("div",{style:{width:"100%",height:"400px",background:"white",borderRadius:"12px",padding:"40px",border:"1px solid rgba(125, 141, 134, 0.1)",position:"relative",overflow:"visible",margin:"0",boxSizing:"border-box",fontFamily:"inherit",display:"flex",flexDirection:"column"},children:[a.jsx("svg",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none",zIndex:0},viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[0,25,50,75,100].map((q,O)=>a.jsx("line",{x1:"0",y1:q,x2:"100",y2:q,stroke:"#e5e7eb",strokeWidth:"0.5",opacity:"0.6"},O))}),a.jsx("div",{style:{position:"absolute",left:"15px",top:"0",bottom:"0",display:"flex",flexDirection:"column",justifyContent:"space-between",fontSize:"11px",color:"#9ca3af",fontWeight:"500",zIndex:1,padding:"10px 0"},children:[100,75,50,25,0].map(q=>a.jsx("span",{style:{textAlign:"right",minWidth:"20px"},children:ye(R*q/100)},q))}),a.jsx("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",flex:1,gap:g==="weekly"?"20px":"12px",marginBottom:"30px",padding:"0 40px 0 70px",position:"relative",zIndex:2,overflow:"visible",width:"100%",boxSizing:"border-box",minHeight:"260px"},children:Ae.map((q,O)=>{const se=de(q.totalSales,R),he=ve(O,g==="weekly");return a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",flex:1,maxWidth:g==="weekly"?"100px":"80px",overflow:"visible",boxSizing:"border-box",height:"100%"},children:[a.jsx("div",{style:{width:"100%",maxWidth:g==="weekly"?"80px":"60px",height:`${se}px`,background:he,borderRadius:"8px 8px 0 0",marginBottom:"12px",position:"relative",transition:"all 0.3s ease",cursor:"pointer",boxSizing:"border-box",display:"block"},onMouseEnter:I=>{I.currentTarget.style.transform="scaleY(1.05)",I.currentTarget.style.opacity="0.8",Z(I,q)},onMouseLeave:I=>{I.currentTarget.style.transform="scaleY(1)",I.currentTarget.style.opacity="1",G()}}),a.jsx("span",{style:{fontSize:g==="weekly"?"13px":"11px",fontWeight:"500",color:"#7d8d86",textAlign:"center",display:"block",margin:"0",padding:"0"},children:g==="weekly"?q.day:q.hourLabel})]},O)})})]}),j.visible&&j.data&&a.jsxs("div",{style:{position:"fixed",left:j.x+10,top:j.y-10,background:"rgba(31, 41, 55, 0.95)",color:"#ffffff",padding:"12px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",pointerEvents:"none",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",zIndex:9999,backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",transform:"translateY(-100%)",animation:"fadeIn 0.2s ease-out"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:g==="weekly"?ve(0,!0):ve(0,!1)}}),a.jsx("span",{style:{fontWeight:"600",fontSize:"13px"},children:g==="weekly"?j.data.day:j.data.hourLabel})]}),a.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginBottom:"2px"},children:[j.data.transactionCount," transaction",j.data.transactionCount!==1?"s":""]}),a.jsx("div",{style:{fontWeight:"600",fontSize:"14px",color:"#60a5fa"},children:ye(j.data.totalSales)})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",marginTop:"16px",flexWrap:"wrap",background:"#3e3f29",borderRadius:"8px",padding:"12px 16px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:"#7d8d86"}}),a.jsx("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:"500"},children:g==="weekly"?"Daily Sales":"Hourly Sales"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:"fa-solid fa-chart-bar",style:{fontSize:"12px",color:"#f1f0e4"}}),a.jsxs("span",{style:{fontSize:"11px",color:"#f1f0e4",fontWeight:"500"},children:["Max: ",ye(R)]})]})]})]})]})},iv=()=>{const l=ds(),[r,i]=v.useState({totalProducts:0,totalSales:0,totalCustomers:0,todayRevenue:0,todaySideBusinessRevenue:0,todayTransactions:0,lowStockItems:0}),[o,d]=v.useState(!0),[u,h]=v.useState(null),[g,m]=v.useState([]),[p,x]=v.useState(!1),[S,k]=v.useState(!1),[j,C]=v.useState(new Date),[N,A]=v.useState(new Date),[P,E]=v.useState([]);v.useEffect(()=>{U(),Z()},[]);const U=async()=>{try{d(!0);const[R,q,O]=await Promise.all([le.from("products").select("product_id",{count:"exact",head:!0}).limit(1e3),le.from("sales").select("sale_id",{count:"exact",head:!0}).limit(1e3),le.from("customers").select("customer_id",{count:"exact",head:!0}).limit(1e3)]),se=new Date().toISOString().split("T")[0],{data:he,count:I}=await le.from("sales").select("total_amount",{count:"exact"}).gte("datetime",`${se}T00:00:00`).lt("datetime",`${se}T23:59:59`),J=he?.reduce((K,ce)=>K+(ce.total_amount||0),0)||0,{data:fe}=await le.from("side_business_sales").select("total_amount").gte("date_time",`${se}T00:00:00`).lt("date_time",`${se}T23:59:59`),Se=fe?.reduce((K,ce)=>K+(ce.total_amount||0),0)||0,{count:w}=await le.from("products").select("product_id",{count:"exact",head:!0}).lt("stock_quantity",10);i({totalProducts:R.count||0,totalSales:q.count||0,totalCustomers:O.count||0,todayRevenue:J,todaySideBusinessRevenue:Se,todayTransactions:I||0,lowStockItems:w||0})}catch(R){console.error("Error fetching dashboard stats:",R),alert(`Dashboard loading error: ${R.message||"Unknown error"}. Please check your database permissions.`)}finally{d(!1)}},Z=async()=>{try{const{data:R,error:q}=await le.from("sales").select(`
          sale_id,
          datetime,
          total_amount,
          payment_method,
          sale_items (quantity)
        `).order("datetime",{ascending:!1}).limit(3);if(q){console.error("Error fetching recent transactions:",q);return}const O=(R||[]).map(se=>({sale_id:se.sale_id,datetime:se.datetime,total_amount:se.total_amount,payment_method:se.payment_method,items_count:se.sale_items?.reduce((he,I)=>he+I.quantity,0)||0,status:"completed"}));E(O)}catch(R){console.error("Error in fetchRecentTransactions:",R)}},G=()=>{h(null),m([])},re=R=>{G(),l(`/transaction/${R}`)},de=R=>{C(R),k(!1),ve(R)},ve=async R=>{try{d(!0);const q=R.toISOString().split("T")[0],[O,se,he]=await Promise.all([le.from("products").select("product_id",{count:"exact",head:!0}),le.from("sales").select("sale_id",{count:"exact",head:!0}).gte("datetime",`${q}T00:00:00`).lt("datetime",`${q}T23:59:59`),le.from("customers").select("customer_id",{count:"exact",head:!0})]),{data:I,count:J}=await le.from("sales").select("total_amount",{count:"exact"}).gte("datetime",`${q}T00:00:00`).lt("datetime",`${q}T23:59:59`),fe=I?.reduce((ce,ue)=>ce+(ue.total_amount||0),0)||0,{data:Se}=await le.from("side_business_sales").select("total_amount").gte("date_time",`${q}T00:00:00`).lt("date_time",`${q}T23:59:59`),w=Se?.reduce((ce,ue)=>ce+(ue.total_amount||0),0)||0,{count:K}=await le.from("products").select("product_id",{count:"exact",head:!0}).lt("stock_quantity",10);i({totalProducts:O.count||0,totalSales:se.count||0,totalCustomers:he.count||0,todayRevenue:fe,todaySideBusinessRevenue:w,todayTransactions:J||0,lowStockItems:K||0})}catch(q){console.error("Error fetching dashboard stats for date:",q)}finally{d(!1)}},ye=(R,q)=>{const O=new Date(R,q,1),se=new Date(O);se.setDate(se.getDate()-O.getDay());const he=[],I=new Date(se);for(let J=0;J<42;J++)he.push(new Date(I)),I.setDate(I.getDate()+1);return he},Ae=[{title:"Today's Sales",value:`€${(r.todayRevenue+r.todaySideBusinessRevenue).toFixed(2)}`,change:`Products: €${r.todayRevenue.toFixed(2)} | Side Business: €${r.todaySideBusinessRevenue.toFixed(2)}`,changeColor:"#7d8d86",icon:"fa-solid fa-euro-sign",bgColor:"#7d8d86",iconColor:"#f1f0e4"},{title:"Transactions",value:r.todayTransactions,change:"+8% from yesterday",changeColor:"#bca88d",icon:"fa-solid fa-shopping-cart",bgColor:"#bca88d",iconColor:"#3e3f29"}];return o?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading dashboard..."]})}):a.jsxs("div",{style:{padding:"0"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px"},children:[a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:"Dashboard"}),a.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:"Welcome back! Here's an overview of your business."})]}),a.jsxs("div",{onClick:()=>k(!0),style:{background:"#3e3f29",border:"1px solid #7d8d86",borderRadius:"8px",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",transition:"all 0.2s ease",minWidth:"200px"},onMouseEnter:R=>{R.target.style.borderColor="#bca88d",R.target.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.2)"},onMouseLeave:R=>{R.target.style.borderColor="#7d8d86",R.target.style.boxShadow="none"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),a.jsx("span",{style:{color:"#bca88d"},children:j.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),a.jsx("i",{className:"fa-solid fa-chevron-down",style:{fontSize:"12px",color:"#bca88d",transition:"transform 0.2s ease"}})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",marginBottom:"32px",minHeight:"200px"},children:[Ae.map((R,q)=>a.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",transition:"all 0.3s ease",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"180px"},onMouseEnter:O=>{O.target.style.transform="translateY(-4px)",O.target.style.boxShadow="0 8px 24px rgba(62, 63, 41, 0.15)"},onMouseLeave:O=>{O.target.style.transform="translateY(0)",O.target.style.boxShadow="0 4px 12px rgba(62, 63, 41, 0.1)"},children:a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",fontWeight:"500",margin:"0 0 12px 0"},children:R.title}),a.jsx("p",{style:{fontSize:"36px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0",lineHeight:"1.1"},children:R.value}),a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:R.changeColor,margin:0},children:R.change})]}),a.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"14px",background:R.bgColor,display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"flex-end",marginTop:"16px"},children:a.jsx("i",{className:R.icon,style:{fontSize:"24px",color:R.iconColor}})})]})},q)),a.jsx("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"180px"},onMouseEnter:R=>{R.currentTarget.style.transform="translateY(-4px)",R.currentTarget.style.boxShadow="0 8px 24px rgba(62, 63, 41, 0.15)"},onMouseLeave:R=>{R.currentTarget.style.transform="translateY(0)",R.currentTarget.style.boxShadow="0 4px 12px rgba(62, 63, 41, 0.1)"},children:a.jsx(ev,{})})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px"},children:[a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-clock",style:{fontSize:"18px",color:"#f1f0e4"}})}),a.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Recent Transactions"})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:P.length>0?P.map((R,q)=>a.jsxs("div",{onClick:()=>l(`/transaction/TXN-${R.sale_id.toString().padStart(6,"0")}`),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"white",borderRadius:"8px",border:"1px solid rgba(125, 141, 134, 0.1)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:O=>{O.target.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.1)",O.target.style.transform="translateY(-1px)"},onMouseLeave:O=>{O.target.style.boxShadow="none",O.target.style.transform="translateY(0)"},children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:R.status==="completed"?"#10b981":"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:`fa-solid ${R.status==="completed"?"fa-check":"fa-hourglass-half"}`,style:{fontSize:"12px",color:"white"}})}),a.jsxs("div",{style:{flex:1},children:[a.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 2px 0"},children:["#TXN-",R.sale_id.toString().padStart(6,"0")]}),a.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:[R.items_count," item",R.items_count!==1?"s":""," • ",R.payment_method]})]}),a.jsx("div",{style:{textAlign:"right"},children:a.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:["€",R.total_amount.toFixed(2)]})})]},R.sale_id)):a.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#7d8d86",fontSize:"14px"},children:"No recent transactions"})})]}),a.jsx(nv,{})]}),a.jsx(rv,{}),u&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:[u," Transactions"]}),a.jsx("button",{onClick:G,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:R=>{R.target.style.background="#7d8d86",R.target.style.color="#f1f0e4"},onMouseLeave:R=>{R.target.style.background="none",R.target.style.color="#7d8d86"},children:"×"})]}),p?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"40px"},children:a.jsxs("div",{style:{fontSize:"16px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"20px"}}),"Loading transactions..."]})}):g.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:g.map((R,q)=>a.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>re(R.transaction_id),onMouseEnter:O=>{O.target.style.boxShadow="0 4px 12px rgba(62, 63, 41, 0.1)",O.target.style.transform="translateY(-2px)",O.target.style.borderColor="#7d8d86"},onMouseLeave:O=>{O.target.style.boxShadow="none",O.target.style.transform="translateY(0)",O.target.style.borderColor="rgba(125, 141, 134, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"16px"},children:a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"14px"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:R.transaction_id}),a.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:[new Date(R.datetime).toLocaleTimeString()," • ",R.items_count," items • ",R.payment_method]})]})]}),a.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29"},children:["€",R.total_amount.toFixed(2)]})]},q))}):a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsxs("p",{style:{fontSize:"16px",margin:0},children:["No transactions found for ",u]})]})]})}),S&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#3e3f29",margin:0},children:N.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[a.jsx("button",{onClick:()=>A(new Date(N.getFullYear(),N.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:R=>{R.target.style.background="#7d8d86",R.target.style.color="#f1f0e4"},onMouseLeave:R=>{R.target.style.background="none",R.target.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("button",{onClick:()=>A(new Date(N.getFullYear(),N.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:R=>{R.target.style.background="#7d8d86",R.target.style.color="#f1f0e4"},onMouseLeave:R=>{R.target.style.background="none",R.target.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})}),a.jsx("button",{onClick:()=>k(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:R=>{R.target.style.background="#7d8d86",R.target.style.color="#f1f0e4"},onMouseLeave:R=>{R.target.style.background="none",R.target.style.color="#7d8d86"},children:"×"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(R=>a.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#7d8d86",padding:"8px 4px"},children:R},R)),ye(N.getFullYear(),N.getMonth()).map((R,q)=>{const O=R.getMonth()===N.getMonth(),se=R.toDateString()===new Date().toDateString(),he=R.toDateString()===j.toDateString();return a.jsx("button",{onClick:()=>de(R),style:{background:he?"#7d8d86":"transparent",color:he?"#f1f0e4":O?"#3e3f29":"#bca88d",border:se?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:O?1:.5},onMouseEnter:I=>{he||(I.target.style.background="#bca88d",I.target.style.color="#3e3f29")},onMouseLeave:I=>{he||(I.target.style.background="transparent",I.target.style.color=O?"#3e3f29":"#bca88d")},children:R.getDate()},q)})]}),a.jsx("div",{style:{textAlign:"center"},children:a.jsx("button",{onClick:()=>de(new Date),style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>{R.target.style.background="#bca88d"},onMouseLeave:R=>{R.target.style.background="#7d8d86"},children:"Today"})})]})})]})};async function ov(l,r){console.log("🔄 Starting image upload for product:",r),console.log("📁 File details:",{name:l.name,size:l.size,type:l.type});try{console.log("🔄 Converting image to base64...");const i=await new Promise((d,u)=>{const h=new FileReader;h.onload=()=>{const g=h.result;d(g)},h.onerror=u,h.readAsDataURL(l)});console.log("✅ Image converted to base64, length:",i.length),console.log("💾 Updating database with base64 image...");const{error:o}=await le.from("products").update({image_url:i}).eq("product_id",r);return o?(console.error("❌ DB update failed:",o),null):(console.log("✅ Database updated with base64 image"),i)}catch(i){return console.error("💥 Unexpected error during upload:",i),null}}const lv=()=>{const{hasPermission:l}=Kd(),{user:r}=Mn(),[i,o]=v.useState([]),[d,u]=v.useState(!0),[h,g]=v.useState(null),[m,p]=v.useState(""),[x,S]=v.useState("all"),[k,j]=v.useState(!1),[C,N]=v.useState(!1),[A,P]=v.useState(null),[E,U]=v.useState({product_name:"",category:"",price:"",stock_quantity:"",reorder_level:"",supplier_info:"",tax_rate:"",description:"",sku:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),[Z,G]=v.useState(!1),[re,de]=v.useState(!1),[ve,ye]=v.useState("Hi! I'm Lily, your inventory assistant! I can help you understand your stock levels and manage your products. Hover over the stats cards to see what they mean!"),[Ae,R]=v.useState(!1),[q,O]=v.useState(null),[se,he]=v.useState(null),[I,J]=v.useState(!1),[fe,Se]=v.useState(!1),[w,K]=v.useState(null);v.useEffect(()=>{ce()},[]);const ce=async()=>{try{u(!0),g(null);const{data:z,error:ke}=await le.from("products").select("*").order("product_id",{ascending:!0}).limit(1e3);if(ke)throw ke;o(z||[])}catch(z){const ke=z instanceof Error?z.message:"Failed to fetch products";g(ke),console.error("Error fetching products:",z),alert(`Products loading error: ${ke}. Please check your database permissions.`)}finally{u(!1)}},ue=i.filter(z=>{const ke=z.name.toLowerCase().includes(m.toLowerCase())||z.category.toLowerCase().includes(m.toLowerCase()),Ee=x==="all"||z.category===x;return ke&&Ee}),we=["all",...Array.from(new Set(i.map(z=>z.category)))],M=z=>!z||z.length<2?[]:Array.from(new Set(i.map(Ze=>Ze.category))).filter(Ze=>Ze.toLowerCase().includes(z.toLowerCase())||z.toLowerCase().includes(Ze.toLowerCase())||Ze.toLowerCase().split(" ").some(nt=>nt.includes(z.toLowerCase())||z.toLowerCase().includes(nt))).slice(0,5),Q=async()=>{try{const{data:z,error:ke}=await le.from("products").select("product_id").order("product_id",{ascending:!1}).limit(1);if(ke)throw ke;return((z&&z.length>0?parseInt(z[0].product_id):0)+1).toString()}catch(z){return console.error("Error generating unique ID:",z),Date.now().toString()}},oe=async z=>{z.preventDefault(),console.log("Form submitted, newProduct:",E),G(!0);try{const ke=await Q();console.log("Generated product ID:",ke);const Ee={product_id:ke,name:E.product_name,category:E.category,price:E.is_weighted?0:parseFloat(E.price),stock_quantity:parseInt(E.stock_quantity),supplier_info:E.supplier_info,reorder_level:parseInt(E.reorder_level),tax_rate:parseFloat(E.tax_rate)||0,last_updated:new Date().toISOString(),is_weighted:E.is_weighted,weight_unit:E.is_weighted?E.weight_unit:null,price_per_unit:E.is_weighted?parseFloat(E.price_per_unit):null};console.log("Inserting product data:",Ee);const{error:Ze}=await le.from("products").insert([Ee]);if(Ze)throw console.error("Supabase error:",Ze),Ze;if(console.log("Product added successfully!"),q){const nt=await Le(ke);if(nt){const mt={...Ee,image_url:nt};o(gn=>[...gn,mt])}}else o(nt=>[...nt,Ee]);U({product_name:"",category:"",price:"",stock_quantity:"",reorder_level:"",supplier_info:"",tax_rate:"",description:"",sku:"",is_weighted:!1,weight_unit:"",price_per_unit:""}),O(null),he(null),j(!1)}catch(ke){console.error("Error adding product:",ke),g(`Failed to add product: ${ke.message||"Unknown error"}`)}finally{G(!1)}},be=async z=>{if(z.preventDefault(),!!A){G(!0),g(null);try{const ke={name:E.product_name,category:E.category,price:E.is_weighted?0:parseFloat(E.price),stock_quantity:parseInt(E.stock_quantity),reorder_level:parseInt(E.reorder_level),supplier_info:E.supplier_info,tax_rate:parseFloat(E.tax_rate)||0,last_updated:new Date().toISOString(),is_weighted:E.is_weighted,weight_unit:E.is_weighted?E.weight_unit:null,price_per_unit:E.is_weighted?parseFloat(E.price_per_unit):null},{data:Ee,error:Ze}=await le.from("products").update(ke).eq("product_id",A.product_id).select();if(Ze)throw console.error("Supabase error:",Ze),Ze;let nt=Ee[0];if(q){const mt=await Le(A.product_id);mt&&(nt={...Ee[0],image_url:mt})}o(i.map(mt=>mt.product_id===A.product_id?nt:mt)),ge(),N(!1),P(null)}catch(ke){console.error("Failed to update product:",ke),g(ke instanceof Error?ke.message:"Failed to update product")}finally{G(!1)}}},ge=()=>{U({product_name:"",category:"",price:"",stock_quantity:"",reorder_level:"",supplier_info:"",tax_rate:"",description:"",sku:""}),O(null),he(null),j(!1),N(!1),P(null)},je=z=>{P(z),U({product_name:z.name,category:z.category,price:z.is_weighted?z.price_per_unit?.toString()||"":z.price.toString(),stock_quantity:z.stock_quantity.toString(),reorder_level:z.reorder_level.toString(),supplier_info:z.supplier_info||"",tax_rate:z.tax_rate?.toString()||"",description:z.description||"",sku:z.sku||"",is_weighted:z.is_weighted||!1,weight_unit:z.weight_unit||"",price_per_unit:z.price_per_unit?.toString()||""}),he(z.image_url||null),O(null),N(!0)},Ye=z=>{const ke=z.target.files?.[0];if(ke){O(ke);const Ee=new FileReader;Ee.onload=Ze=>{he(Ze.target?.result)},Ee.readAsDataURL(ke)}},Le=async z=>{if(!q)return null;J(!0);try{return await ov(q,z)}catch(ke){return console.error("Image upload failed:",ke),null}finally{J(!1)}},He=z=>{K(z),Se(!0)},yt=()=>{Se(!1),K(null)},Dt=(z,ke)=>z===0?{status:"out",color:"#ef4444",bgColor:"#fef2f2",textColor:"#dc2626"}:z<=ke?{status:"low",color:"#f59e0b",bgColor:"#fffbeb",textColor:"#d97706"}:{status:"good",color:"#10b981",bgColor:"#f0fdf4",textColor:"#059669"},dt=z=>{const ke=z.toLowerCase();return ke.includes("small")?"#3b82f6":ke.includes("large")?"#ef4444":ke.includes("medium")?"#f59e0b":"#7d8d86"},gt=z=>{const ke=z.split(" ");return ke.map((Ee,Ze)=>{const nt=Ee.toLowerCase();let mt="#3e3f29";return nt==="small"?mt="#3b82f6":nt==="large"?mt="#ef4444":nt==="medium"&&(mt="#f59e0b"),a.jsxs("span",{style:{color:mt},children:[Ee,Ze<ke.length-1?" ":""]},Ze)})},on=()=>a.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,display:"flex",alignItems:"flex-end",gap:"12px"},children:[re&&a.jsxs("div",{style:{background:"#ffffff",border:"2px solid #7d8d86",borderRadius:"16px",padding:"12px 16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",maxWidth:"250px",fontSize:"14px",color:"#3e3f29",position:"relative",marginBottom:"8px"},children:[a.jsx("p",{style:{margin:0,fontWeight:"500"},children:ve}),a.jsx("div",{style:{position:"absolute",bottom:"-8px",right:"20px",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"8px solid #7d8d86"}})]}),a.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"#ffffff",border:"3px solid #7d8d86",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease"},onClick:()=>de(!re),onMouseEnter:z=>z.target.style.transform="scale(1.05)",onMouseLeave:z=>z.target.style.transform="scale(1)",children:a.jsx("img",{src:r?.icon?`/retailpos/images/icons/${r.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:r?.icon||"Lily",style:{width:"50px",height:"50px",borderRadius:"50%"}})})]});return d?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading inventory..."]})}):a.jsxs("div",{style:{padding:"0"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px"},children:[a.jsxs("div",{children:[a.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:"Inventory Management"}),a.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:"Manage your product inventory, stock levels, and suppliers."})]}),l("canManageProducts")&&a.jsxs("button",{onClick:()=>{console.log("Add Product button clicked"),j(!0),console.log("showAddModal set to true")},style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},onMouseEnter:z=>{z.target.style.background="#bca88d",ye("Click this button to add a new product to your inventory! You'll need to fill in details like name, price, stock quantity, and reorder level."),de(!0)},onMouseLeave:z=>{z.target.style.background="#7d8d86",de(!1)},children:[a.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"16px"}}),a.jsx("span",{children:"Add Product"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginBottom:"32px"},children:[a.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"18px",color:"#f1f0e4"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:i.length}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Total Products"})]})]})}),a.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-circle-check",style:{fontSize:"18px",color:"white"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:i.filter(z=>z.stock_quantity>z.reorder_level).length}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"In Stock"})]})]})}),a.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-triangle-exclamation",style:{fontSize:"18px",color:"white"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:i.filter(z=>z.stock_quantity<=z.reorder_level&&z.stock_quantity>0).length}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Low Stock"})]})]})}),a.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-circle-xmark",style:{fontSize:"18px",color:"white"}})}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 4px 0"},children:i.filter(z=>z.stock_quantity===0).length}),a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:"Out of Stock"})]})]})})]}),a.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"center",flexWrap:"wrap"},children:[a.jsx("div",{style:{flex:"1",minWidth:"250px",maxWidth:"400px"},children:a.jsxs("div",{style:{position:"relative"},children:[a.jsx("i",{className:"fa-solid fa-search",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#7d8d86",fontSize:"14px",zIndex:1}}),a.jsx("input",{type:"text",placeholder:"Search products...",value:m,onChange:z=>p(z.target.value),style:{width:"100%",padding:"10px 12px 10px 36px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29",boxSizing:"border-box"}})]})}),a.jsx("div",{style:{minWidth:"180px"},children:a.jsx("select",{value:x,onChange:z=>S(z.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29",cursor:"pointer"},children:we.map(z=>a.jsx("option",{value:z,children:z==="all"?"All Categories":z},z))})})]})}),a.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)",border:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{style:{background:"#3e3f29"},children:a.jsxs("tr",{children:[a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Product"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Category"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Price"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Stock"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Status"}),a.jsx("th",{style:{padding:"16px",textAlign:"left",color:"#f1f0e4",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:"Actions"})]})}),a.jsx("tbody",{children:ue.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:6,style:{padding:"40px",textAlign:"center",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-boxes-stacked",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:"No products found"}),a.jsx("p",{style:{fontSize:"14px",margin:"8px 0 0 0"},children:"Add your first product to get started!"})]})}):ue.map(z=>{const ke=Dt(z.stock_quantity,z.reorder_level);return a.jsxs("tr",{style:{borderBottom:"1px solid rgba(125, 141, 134, 0.1)",transition:"background 0.2s ease"},onMouseEnter:Ee=>Ee.target.style.background="rgba(125, 141, 134, 0.05)",onMouseLeave:Ee=>Ee.target.style.background="transparent",children:[a.jsx("td",{style:{padding:"16px"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[z.image_url&&a.jsx("img",{src:z.image_url,alt:z.name,onClick:()=>He(z.image_url),style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:Ee=>{Ee.target.style.transform="scale(1.05)",Ee.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",ye("Click on the image to see it in full size! This helps you get a better look at the product."),de(!0)},onMouseLeave:Ee=>{Ee.target.style.transform="scale(1)",Ee.target.style.boxShadow="none",de(!1)}}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 4px 0"},children:gt(z.name)}),a.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["ID: ",z.product_id]})]})]})}),a.jsx("td",{style:{padding:"16px"},children:a.jsx("span",{style:{background:"#f3f4f6",color:dt(z.category),padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",border:`1px solid ${dt(z.category)}`},children:z.category})}),a.jsxs("td",{style:{padding:"16px"},children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:z.is_weighted&&z.price_per_unit&&z.weight_unit?`€${z.price_per_unit.toFixed(2)}/${z.weight_unit}`:`€${z.price.toFixed(2)}`}),z.is_weighted&&a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",margin:"4px 0 0 0"},children:"Sold by weight"})]}),a.jsxs("td",{style:{padding:"16px"},children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#3e3f29",margin:0},children:z.stock_quantity}),a.jsxs("p",{style:{fontSize:"12px",color:"#7d8d86",margin:0},children:["Reorder: ",z.reorder_level]})]}),a.jsx("td",{style:{padding:"16px"},children:a.jsx("span",{style:{background:ke.bgColor,color:ke.textColor,padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:ke.status==="good"?"In Stock":ke.status==="low"?"Low Stock":"Out of Stock"})}),a.jsx("td",{style:{padding:"16px"},children:a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l("canManageProducts")&&a.jsxs("button",{onClick:()=>je(z),style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:Ee=>{Ee.target.style.background="#bca88d",ye(`Click to edit "${z.name}". You can update the price, stock quantity, reorder level, and other details!`),de(!0)},onMouseLeave:Ee=>{Ee.target.style.background="#7d8d86",de(!1)},children:[a.jsx("i",{className:"fa-solid fa-pen-to-square",style:{marginRight:"4px"}}),"Edit"]}),a.jsxs("button",{style:{background:"#ef4444",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"background 0.2s ease"},onMouseEnter:Ee=>Ee.target.style.background="#dc2626",onMouseLeave:Ee=>Ee.target.style.background="#ef4444",children:[a.jsx("i",{className:"fa-solid fa-trash-can",style:{marginRight:"4px"}}),"Delete"]})]})})]},z.product_id)})})]})})}),ue.length>0&&a.jsxs("div",{style:{marginTop:"16px",fontSize:"14px",color:"#7d8d86",textAlign:"center"},children:["Showing ",ue.length," of ",i.length," products"]}),k&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"32px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Add New Product"}),a.jsx("button",{onClick:ge,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:z=>{z.target.style.background="#f3f4f6",z.target.style.color="#3e3f29",ye("Click this X button to close the form without saving. It's the same as clicking Cancel!"),de(!0)},onMouseLeave:z=>{z.target.style.background="none",z.target.style.color="#7d8d86",de(!1)},children:a.jsx("i",{className:"fa-solid fa-times"})})]}),a.jsxs("form",{onSubmit:oe,children:[h&&a.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:h}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),a.jsx("input",{type:"text",required:!0,value:E.product_name,onChange:z=>U({...E,product_name:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("input",{type:"text",required:!0,value:E.category,onChange:z=>{U({...E,category:z.target.value}),R(z.target.value.length>=2)},onFocus:()=>{R(E.category.length>=2),ye("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),de(!0)},onBlur:()=>setTimeout(()=>R(!1),200),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),Ae&&M(E.category).length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"1px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:M(E.category).map((z,ke)=>a.jsxs("div",{onClick:()=>{U({...E,category:z}),R(!1),ye(`Great choice! I've selected "${z}" for you. This helps keep your categories organized!`),de(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ke<M(E.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:Ee=>Ee.target.style.background="#f8f9fa",onMouseLeave:Ee=>Ee.target.style.background="transparent",children:[a.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),z]},ke))})]})]})]}),a.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsx("input",{type:"checkbox",id:"is_weighted",checked:E.is_weighted,onChange:z=>U({...E,is_weighted:z.target.checked}),style:{width:"16px",height:"16px"}}),a.jsx("label",{htmlFor:"is_weighted",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),E.is_weighted&&a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),a.jsxs("select",{value:E.weight_unit,onChange:z=>U({...E,weight_unit:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},children:[a.jsx("option",{value:"",children:"Select unit"}),a.jsx("option",{value:"kg",children:"Kilogram (kg)"}),a.jsx("option",{value:"g",children:"Gram (g)"}),a.jsx("option",{value:"lb",children:"Pound (lb)"}),a.jsx("option",{value:"oz",children:"Ounce (oz)"}),a.jsx("option",{value:"l",children:"Liter (l)"}),a.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",E.weight_unit||"unit"," *"]}),a.jsx("input",{type:"number",step:"0.01",required:E.is_weighted,value:E.price_per_unit,onChange:z=>U({...E,price_per_unit:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",E.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),a.jsx("input",{type:"number",step:"0.01",required:!E.is_weighted,value:E.is_weighted?"0":E.price,onChange:z=>{E.is_weighted||U({...E,price:z.target.value})},style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:E.is_weighted?"#f9fafb":"white",color:E.is_weighted?"#6b7280":"#3e3f29",cursor:E.is_weighted?"not-allowed":"text"},placeholder:E.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:E.is_weighted})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),a.jsx("input",{type:"number",required:!0,value:E.stock_quantity,onChange:z=>U({...E,stock_quantity:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),a.jsx("input",{type:"number",required:!0,value:E.reorder_level,onChange:z=>U({...E,reorder_level:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"10"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",value:E.tax_rate,onChange:z=>U({...E,tax_rate:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0.00"})]})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),a.jsx("input",{type:"text",value:E.supplier_info,onChange:z=>U({...E,supplier_info:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"SKU (Auto-generated if empty)"}),a.jsx("input",{type:"text",value:E.sku,onChange:z=>U({...E,sku:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"Leave empty for auto-generation"})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),a.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[a.jsx("input",{type:"file",accept:"image/*",onChange:Ye,style:{display:"none"},id:"image-upload"}),a.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:z=>{z.target.style.borderColor="#7d8d86",z.target.style.color="#3e3f29",ye("Click here to upload a product image! This helps customers see what they're buying."),de(!0)},onMouseLeave:z=>{z.target.style.borderColor="#bca88d",z.target.style.color="#7d8d86",de(!1)},children:[a.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(se||A?.image_url)&&a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:se||A?.image_url,alt:"Preview",onClick:()=>He(se||A?.image_url),style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:z=>{z.target.style.transform="scale(1.05)",z.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:z=>{z.target.style.transform="scale(1)",z.target.style.boxShadow="none"}}),a.jsx("button",{type:"button",onClick:()=>{he(null),O(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),a.jsx("textarea",{value:E.description,onChange:z=>U({...E,description:z.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:ge,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:z=>{z.target.style.background="#e5e7eb",ye("This will close the form and clear all the information you've entered. Don't worry, you can always start over!"),de(!0)},onMouseLeave:z=>{z.target.style.background="#f3f4f6",de(!1)},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:Z,style:{background:Z?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:Z?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:z=>{Z||(ye("This will save your new product to the inventory! Make sure all required fields are filled out before clicking."),de(!0))},onMouseLeave:z=>{Z||de(!1)},children:Z?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add Product"]})})]})]})]})}),C&&A&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:0},children:"Edit Product"}),a.jsx("button",{onClick:ge,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:z=>{z.target.style.background="#f3f4f6",z.target.style.color="#3e3f29",ye("Click this X button to close the edit form without saving. It's the same as clicking Cancel!"),de(!0)},onMouseLeave:z=>{z.target.style.background="none",z.target.style.color="#7d8d86",de(!1)},children:a.jsx("i",{className:"fa-solid fa-times"})})]}),a.jsxs("form",{onSubmit:be,children:[h&&a.jsx("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:h}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Name *"}),a.jsx("input",{type:"text",required:!0,value:E.product_name,onChange:z=>U({...E,product_name:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., Plantain Chips, Jollof Rice Mix"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Category *"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("input",{type:"text",required:!0,value:E.category,onChange:z=>{U({...E,category:z.target.value}),R(z.target.value.length>=2)},onFocus:()=>{R(E.category.length>=2),ye("Start typing a category name and I'll suggest similar ones you've used before! This helps keep your categories consistent."),de(!0)},onBlur:()=>setTimeout(()=>R(!1),200),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., Grains, Spices, Beverages"}),Ae&&M(E.category).length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"1px solid #bca88d",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflow:"auto"},children:M(E.category).map((z,ke)=>a.jsxs("div",{onClick:()=>{U({...E,category:z}),R(!1),ye(`Great choice! I've selected "${z}" for you. This helps keep your categories organized!`),de(!0)},style:{padding:"10px 12px",cursor:"pointer",fontSize:"14px",color:"#3e3f29",borderBottom:ke<M(E.category).length-1?"1px solid #f3f4f6":"none",transition:"background 0.2s ease"},onMouseEnter:Ee=>Ee.target.style.background="#f8f9fa",onMouseLeave:Ee=>Ee.target.style.background="transparent",children:[a.jsx("i",{className:"fa-solid fa-tag",style:{marginRight:"8px",color:"#7d8d86",fontSize:"12px"}}),z]},ke))})]})]})]}),a.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[a.jsx("input",{type:"checkbox",id:"is_weighted_edit",checked:E.is_weighted,onChange:z=>U({...E,is_weighted:z.target.checked}),style:{width:"16px",height:"16px"}}),a.jsx("label",{htmlFor:"is_weighted_edit",style:{fontSize:"14px",fontWeight:"500",color:"#3e3f29",cursor:"pointer"},children:"This product is sold by weight (e.g., fruits, vegetables, meat)"})]}),E.is_weighted&&a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Weight Unit *"}),a.jsxs("select",{value:E.weight_unit,onChange:z=>U({...E,weight_unit:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},children:[a.jsx("option",{value:"",children:"Select unit"}),a.jsx("option",{value:"kg",children:"Kilogram (kg)"}),a.jsx("option",{value:"g",children:"Gram (g)"}),a.jsx("option",{value:"lb",children:"Pound (lb)"}),a.jsx("option",{value:"oz",children:"Ounce (oz)"}),a.jsx("option",{value:"l",children:"Liter (l)"}),a.jsx("option",{value:"ml",children:"Milliliter (ml)"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price per ",E.weight_unit||"unit"," *"]}),a.jsx("input",{type:"number",step:"0.01",required:E.is_weighted,value:E.price_per_unit,onChange:z=>U({...E,price_per_unit:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0.00"})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:["Price ",E.is_weighted?"(Auto-set to 0 for weighted items)":"*"]}),a.jsx("input",{type:"number",step:"0.01",required:!E.is_weighted,value:E.is_weighted?"0":E.price,onChange:z=>{E.is_weighted||U({...E,price:z.target.value})},style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:E.is_weighted?"#f9fafb":"white",color:E.is_weighted?"#6b7280":"#3e3f29",cursor:E.is_weighted?"not-allowed":"text"},placeholder:E.is_weighted?"0.00 (auto-set for weighted items)":"0.00",disabled:E.is_weighted})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Stock Quantity *"}),a.jsx("input",{type:"number",required:!0,value:E.stock_quantity,onChange:z=>U({...E,stock_quantity:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Reorder Level *"}),a.jsx("input",{type:"number",required:!0,value:E.reorder_level,onChange:z=>U({...E,reorder_level:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"10"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Tax Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",value:E.tax_rate,onChange:z=>U({...E,tax_rate:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"0.00"})]})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Supplier Information"}),a.jsx("input",{type:"text",value:E.supplier_info,onChange:z=>U({...E,supplier_info:z.target.value}),style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29"},placeholder:"e.g., African Foods Ltd, +234-xxx-xxxx"})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Product Image"}),a.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[a.jsx("input",{type:"file",accept:"image/*",onChange:Ye,style:{display:"none"},id:"image-upload"}),a.jsxs("label",{htmlFor:"image-upload",style:{padding:"10px 16px",border:"2px dashed #bca88d",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#7d8d86",textAlign:"center",transition:"all 0.2s ease",minWidth:"120px"},onMouseEnter:z=>{z.target.style.borderColor="#7d8d86",z.target.style.color="#3e3f29",ye("Click here to upload a product image! This helps customers see what they're buying."),de(!0)},onMouseLeave:z=>{z.target.style.borderColor="#bca88d",z.target.style.color="#7d8d86",de(!1)},children:[a.jsx("i",{className:"fa-solid fa-camera",style:{marginRight:"8px"}}),"Choose Image"]}),(se||A?.image_url)&&a.jsxs("div",{style:{position:"relative"},children:[a.jsx("img",{src:se||A?.image_url,alt:"Preview",onClick:()=>He(se||A?.image_url),style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #bca88d",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:z=>{z.target.style.transform="scale(1.05)",z.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:z=>{z.target.style.transform="scale(1)",z.target.style.boxShadow="none"}}),a.jsx("button",{type:"button",onClick:()=>{he(null),O(null)},style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-times"})})]})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#3e3f29",marginBottom:"6px"},children:"Description"}),a.jsx("textarea",{value:E.description,onChange:z=>U({...E,description:z.target.value}),rows:3,style:{width:"100%",padding:"10px 12px",border:"1px solid #bca88d",borderRadius:"8px",fontSize:"14px",background:"white",color:"#3e3f29",resize:"vertical"},placeholder:"e.g., Crispy plantain chips made from fresh plantains, perfect for snacking"})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:ge,style:{background:"#f3f4f6",color:"#3e3f29",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease"},onMouseEnter:z=>{z.target.style.background="#e5e7eb",ye("This will close the edit form and discard any changes you've made. Don't worry, you can always edit again!"),de(!0)},onMouseLeave:z=>{z.target.style.background="#f3f4f6",de(!1)},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:Z,style:{background:Z?"#9ca3af":"#7d8d86",color:"#ffffff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:Z?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:z=>{Z||(ye("This will save your changes to the product! Make sure all required fields are filled out before clicking."),de(!0))},onMouseLeave:z=>{Z||de(!1)},children:Z?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite"}}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-save"}),"Update Product"]})})]})]})]})}),fe&&w&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:yt,children:a.jsx("div",{style:{position:"relative",width:"400px",height:"400px",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:`url(${w})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:"8px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",backgroundColor:"#ffffff"},onClick:z=>z.stopPropagation(),children:a.jsx("button",{onClick:yt,style:{position:"absolute",top:"-40px",right:"-40px",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.9)",border:"none",color:"#3e3f29",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s ease"},onMouseEnter:z=>z.target.style.background="rgba(255, 255, 255, 1)",onMouseLeave:z=>z.target.style.background="rgba(255, 255, 255, 0.9)",children:a.jsx("i",{className:"fa-solid fa-times"})})})}),a.jsx(on,{})]})},Uo=()=>{const l=new Date,r=l.getFullYear(),i=String(l.getMonth()+1).padStart(2,"0"),o=String(l.getDate()).padStart(2,"0"),d=String(l.getHours()).padStart(2,"0"),u=String(l.getMinutes()).padStart(2,"0"),h=String(l.getSeconds()).padStart(2,"0");return`${r}-${i}-${o} ${d}:${u}:${h}`},cv=()=>{const{user:l}=Mn(),[r]=A0(),i=ds(),[o,d]=v.useState([]),[u,h]=v.useState([]),[g,m]=v.useState([]),[p,x]=v.useState([]),[S,k]=v.useState([]),[j,C]=v.useState("All"),[N,A]=v.useState(""),[P,E]=v.useState([]),[U,Z]=v.useState([]),[G,re]=v.useState(!1),[de,ve]=v.useState(!1),[ye,Ae]=v.useState(1),[R]=v.useState(20),[q,O]=v.useState(0),[se,he]=v.useState(!1),[I,J]=v.useState(!1),[fe,Se]=v.useState(!1),[w,K]=v.useState({items:[],subtotal:0,tax:0,discount:0,total:0}),[ce,ue]=v.useState(""),[we,M]=v.useState(""),[Q,oe]=v.useState(!0),[be,ge]=v.useState(!1),[je,Ye]=v.useState("cash"),[Le,He]=v.useState(""),[yt,Dt]=v.useState(0),[dt,gt]=v.useState(""),[on,z]=v.useState(!1),[ke,Ee]=v.useState(!1),[Ze,nt]=v.useState(null),[mt,gn]=v.useState(""),[H,pe]=v.useState(!1),[_e,Pe]=v.useState(null),[B,ee]=v.useState(""),[Be,We]=v.useState(null),[Re,it]=v.useState(!1),[Ue,At]=v.useState(""),[jt,Xt]=v.useState(0),[kt,St]=v.useState(""),[xt,ut]=v.useState(null),[fs,vi]=v.useState(null),[mn,dr]=v.useState(!1);v.useEffect(()=>{Pa(1,R);const T=r.get("transaction");T&&(ut(T),dr(!0),Bn(T))},[r]),v.useEffect(()=>{const T=ae=>{ae.key==="Enter"&&ae.ctrlKey&&w.items.length>0&&(ae.preventDefault(),ge(!0)),ae.key==="Escape"&&(A(""),ve(!1))};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[w.items]),v.useEffect(()=>{const T=()=>{if(G&&!se&&ye*R<q){const ae=document.documentElement.scrollTop,Ne=document.documentElement.scrollHeight,me=document.documentElement.clientHeight;ae+me>=Ne-200&&hr()}};if(G)return window.addEventListener("scroll",T),()=>window.removeEventListener("scroll",T)},[G,se,ye,q,R]),v.useEffect(()=>{Kt()},[o,u,j,N,G,U]),v.useEffect(()=>{U.length>0&&g.length===0&&m(U)},[U,g.length]),v.useEffect(()=>{if(G&&!I){Ae(1);const T=setTimeout(()=>{Pa(1,R,j,N)},300);return()=>clearTimeout(T)}},[j,N,G,I]),v.useEffect(()=>{Ko()},[w.items]),v.useEffect(()=>{const T=parseFloat(Le)||0,ae=Re?parseFloat(Ue)||0:w.total,Ne=T-ae;Dt(Ne>0?Ne:0)},[Le,w.total,Re,Ue]),v.useEffect(()=>{if(Re){const T=parseFloat(Ue)||0;Xt(Math.max(0,w.total-T))}else Xt(0)},[Re,Ue,w.total]),v.useEffect(()=>{He(Re&&Ue||w.total.toString())},[w.total,Re,Ue]);const Pa=async(T=1,ae=20,Ne,me,xe=!1)=>{try{xe?he(!0):T===1&&G?Se(!0):oe(!0);let ze=le.from("products").select("*",{count:"exact"}).order("name").range((T-1)*ae,T*ae-1);Ne&&Ne!=="All"&&(ze=ze.eq("category",Ne)),me&&me.trim()&&(ze=ze.or(`name.ilike.%${me}%,category.ilike.%${me}%`));const{data:Te,error:Rt,count:bt}=await ze;if(Rt)throw Rt;const{data:Qt,error:et}=await le.from("side_business_items").select(`
          *,
          side_businesses (name, business_type)
        `).order("name");if(et)throw et;if(d(T===1||!xe?Te||[]:at=>[...at,...Te||[]]),h(Qt||[]),O(bt||0),T===1&&await Vo(Te||[]),T===1){const at=Te?.map(ga=>ga.category).filter(Boolean)||[],pa=Qt?.map(ga=>ga.side_businesses?.name).filter(Boolean)||[],Zo=["All",...new Set([...at,...pa])];k(Zo)}}catch{}finally{oe(!1),he(!1),Se(!1)}},Vo=async T=>{try{const{data:ae,error:Ne}=await le.from("sale_items").select("product_id, quantity").not("product_id","is",null);if(Ne){Z(T.slice(0,5));return}const me={};ae?.forEach(ze=>{ze.product_id&&(me[ze.product_id]=(me[ze.product_id]||0)+ze.quantity)});const xe=T.map(ze=>({...ze,salesCount:me[ze.product_id]||0})).sort((ze,Te)=>Te.salesCount-ze.salesCount).slice(0,5);Z(xe)}catch{Z(T.slice(0,5))}},Bn=async T=>{try{const ae=parseInt(T.replace("TXN-","")),{data:Ne,error:me}=await le.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",ae).single();if(me)return;vi(Ne);const{data:xe,error:ze}=await le.from("sale_items").select(`
          *,
          products (
            name,
            category,
            price,
            stock_quantity,
            image_url,
            is_weighted,
            weight_unit,
            price_per_unit
          )
        `).eq("sale_id",ae);if(ze)return;const Te=(xe||[]).map(et=>{const pa={product:{product_id:et.product_id.toString(),name:et.products?.name||"Unknown Product",price:et.price_each,category:et.products?.category||"Unknown",stock_quantity:et.products?.stock_quantity||0,image_url:et.products?.image_url,is_weighted:et.products?.is_weighted||!1,weight_unit:et.products?.weight_unit,price_per_unit:et.products?.price_per_unit},quantity:et.quantity};return et.products?.is_weighted&&et.weight&&et.calculated_price&&(pa.weight=et.weight,pa.calculatedPrice=et.calculated_price),pa}),Rt=Te.reduce((et,at)=>at.weight&&at.calculatedPrice?et+at.calculatedPrice:et+at.product.price*at.quantity,0),bt=Rt*.1,Qt=Rt+bt;K({items:Te,subtotal:Rt,tax:bt,discount:0,total:Qt}),Ne.customers?.name&&ue(Ne.customers.name)}catch{}},$t=T=>{if(T.length<2){E([]),ve(!1);return}const ae=o.filter(xe=>xe.name.toLowerCase().includes(T.toLowerCase())||xe.category?.toLowerCase().includes(T.toLowerCase())).slice(0,3),Ne=u.filter(xe=>xe.name.toLowerCase().includes(T.toLowerCase())||xe.side_businesses?.name.toLowerCase().includes(T.toLowerCase())).slice(0,2),me=[...ae,...Ne].slice(0,5);E(me),ve(me.length>0)},Kt=()=>{if(G)m(o);else{let ae=U;j!=="All"&&(ae=ae.filter(Ne=>Ne.category===j)),N&&(ae=ae.filter(Ne=>Ne.name.toLowerCase().includes(N.toLowerCase()))),m(ae)}let T=u;j!=="All"&&(T=T.filter(ae=>ae.side_businesses?.name===j)),N&&(T=T.filter(ae=>ae.name.toLowerCase().includes(N.toLowerCase()))),x(T)},ua=T=>{A(T),$t(T)},ur=()=>{const T=!G;J(!0),re(T),T?(Ae(1),Pa(1,R,j,N).finally(()=>{J(!1)})):(m(U),J(!1))},Xo=T=>{A(T.name),ve(!1),E([]),"product_id"in T?fr(T):hs(T)},Ko=()=>{const T=w.items.reduce((xe,ze)=>{if(ze.product)return ze.weight&&ze.calculatedPrice?xe+ze.calculatedPrice:xe+ze.product.price*ze.quantity;if(ze.sideBusinessItem){const Te=ze.customPrice||ze.sideBusinessItem.price||0;return xe+Te*ze.quantity}return xe},0),ae=0,Ne=0,me=T-Ne;K(xe=>({...xe,subtotal:T,tax:ae,discount:Ne,total:me}))},fr=T=>{if(T.is_weighted&&T.price_per_unit&&T.weight_unit){Pe(T),ee(""),pe(!0);return}K(ae=>ae.items.find(me=>me.product?.product_id===T.product_id&&!me.weight)?{...ae,items:ae.items.map(me=>me.product?.product_id===T.product_id&&!me.weight?{...me,quantity:me.quantity+1}:me)}:{...ae,items:[...ae.items,{product:T,quantity:1}]})},Ha=(T,ae)=>{const Ne=ae*(T.price_per_unit||0);K(Be?me=>({...me,items:me.items.map(xe=>xe.product?.product_id===Be&&xe.weight?{...xe,weight:ae,calculatedPrice:Ne}:xe)}):me=>({...me,items:[...me.items,{product:T,quantity:1,weight:ae,calculatedPrice:Ne}]})),pe(!1),Pe(null),We(null),ee("")},hs=T=>{T.price?K(ae=>ae.items.find(me=>me.sideBusinessItem?.item_id===T.item_id)?{...ae,items:ae.items.map(me=>me.sideBusinessItem?.item_id===T.item_id?{...me,quantity:me.quantity+1}:me)}:{...ae,items:[...ae.items,{sideBusinessItem:T,quantity:1}]}):(nt(T),gn(""),Ee(!0))},Hn=()=>{if(!Ze)return;const T=parseFloat(mt);if(isNaN(T)||T<0){alert("Please enter a valid price");return}K(ae=>ae.items.find(me=>me.sideBusinessItem?.item_id===Ze.item_id&&me.customPrice===T)?{...ae,items:ae.items.map(me=>me.sideBusinessItem?.item_id===Ze.item_id&&me.customPrice===T?{...me,quantity:me.quantity+1}:me)}:{...ae,items:[...ae.items,{sideBusinessItem:Ze,quantity:1,customPrice:T}]}),Ee(!1),nt(null),gn("")},Wn=(T,ae)=>{if(ae<=0){Ct(T);return}K(Ne=>({...Ne,items:Ne.items.map(me=>me.product?.product_id===T?{...me,quantity:ae}:me.sideBusinessItem?.item_id.toString()===T?{...me,quantity:ae}:me)}))},fa=(T,ae)=>{if(ae<=0){Ct(T);return}K(Ne=>({...Ne,items:Ne.items.map(me=>{if(me.product?.product_id===T&&me.weight){const xe=ae*(me.product.price_per_unit||0);return{...me,weight:ae,calculatedPrice:xe}}return me})}))},ha=T=>{T.product&&T.weight&&(Pe(T.product),ee(T.weight.toString()),pe(!0),We(T.product.product_id))},Ct=T=>{K(ae=>({...ae,items:ae.items.filter(Ne=>Ne.product?.product_id!==T&&Ne.sideBusinessItem?.item_id.toString()!==T)}))},hr=()=>{if(!se&&G&&ye*R<q){const T=ye+1;Ae(T),Pa(T,R,j,N,!0)}},_i=()=>{if(window.confirm("Are you sure you want to reset the current transaction? This will clear all items from the order.")){K({items:[],subtotal:0,tax:0,discount:0,total:0}),ue(""),M(""),Ye("cash"),He(""),Dt(0),gt("");const T=document.createElement("div");T.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,T.textContent="Transaction reset successfully!",document.body.appendChild(T),setTimeout(()=>{document.body.removeChild(T)},3e3)}},On=()=>{const T=`RCP-${Date.now()}`,ae=new Date,Ne=ae.toLocaleDateString("en-IE"),me=ae.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"});return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Receipt - ${T}</title>
        <style>
          body { 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            line-height: 1.4; 
            margin: 0; 
            padding: 10px; 
            background: white;
            color: black;
          }
          .receipt { 
            width: 100%; 
            max-width: 400px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            padding: 20px; 
            background: white;
          }
          .header { 
            text-align: center; 
            margin-bottom: 15px; 
            border-bottom: 1px dashed #333; 
            padding-bottom: 10px; 
          }
          .logo-fallback {
            display: none;
            background: #333;
            color: white;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
          }
          .business-info { 
            font-size: 10px; 
            margin: 8px 0; 
          }
          .divider { 
            border-top: 1px dashed #333; 
            margin: 10px 0; 
          }
          .item-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 3px 0; 
          }
          .total-row { 
            font-weight: bold; 
            border-top: 1px solid #333; 
            padding-top: 5px; 
            margin-top: 8px; 
          }
          .payment-info { 
            margin: 10px 0; 
          }
          .notes-section {
            margin: 10px 0;
            padding: 8px;
            background: #f5f5f5;
            border-radius: 4px;
          }
          .footer { 
            text-align: center; 
            margin-top: 15px; 
            font-size: 10px; 
            border-top: 1px dashed #333; 
            padding-top: 10px; 
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            <img src="/retailpos/images/backgrounds/logo1.png" alt="LandM Store" style="max-width: 80px; height: auto; display: block; margin: 0 auto 10px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <div class="logo-fallback" style="display: none; font-size: 24px; font-weight: bold; margin-bottom: 8px; color: #3e3f29;">LandM Store</div>
            <div class="business-info">
              <div>Unit 2 Glenmore Park</div>
              <div>Dundalk, Co. Louth</div>
              <div>087 797 0412</div>
            </div>
          </div>
          
          <div class="divider"></div>
          
          <div class="item-row">
            <span>Date: ${Ne}</span>
            <span>Time: ${me}</span>
          </div>
          <div class="item-row">
            <span>Receipt: ${T}</span>
            <span>Cashier: ${l?.username||"System"}</span>
          </div>
          
          <div class="divider"></div>
          
          ${w.items.map(xe=>{const ze=xe.product?.name||xe.sideBusinessItem?.name||"Unknown Item",Te=xe.product?.price||xe.customPrice||xe.sideBusinessItem?.price||0;return`
            <div class="item-row">
              <span>${ze} x${xe.quantity}</span>
              <span>€${(Te*xe.quantity).toFixed(2)}</span>
            </div>
          `}).join("")}
          
          <div class="divider"></div>
          
          <div class="item-row total-row">
            <span>SUBTOTAL:</span>
            <span>€${w.subtotal.toFixed(2)}</span>
          </div>
          <div class="item-row total-row">
            <span>${Re?"ORDER TOTAL:":"GRAND TOTAL:"}</span>
            <span>€${w.total.toFixed(2)}</span>
          </div>
          
          ${Re?`
          <div class="divider"></div>
          <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 4px; padding: 8px; margin: 10px 0;">
            <div style="font-weight: bold; margin-bottom: 5px; color: #92400e;">
              <i class="fa-solid fa-credit-card" style="margin-right: 5px;"></i>
              PARTIAL PAYMENT
            </div>
            <div class="item-row">
              <span>Amount Paid Today:</span>
              <span style="color: #059669; font-weight: bold;">€${(parseFloat(Ue)||0).toFixed(2)}</span>
            </div>
            <div class="item-row">
              <span>Remaining Balance:</span>
              <span style="color: #dc2626; font-weight: bold;">€${jt.toFixed(2)}</span>
            </div>
            ${kt?`
            <div style="margin-top: 5px; font-size: 10px; color: #92400e;">
              Note: ${kt}
            </div>
            `:""}
          </div>
          `:""}
          
          <div class="payment-info">
            <div class="item-row">
              <span>Payment Method:</span>
              <span>${je.toUpperCase()}</span>
            </div>
            ${je==="cash"?`
            <div class="item-row">
              <span>Amount Received:</span>
              <span>€${parseFloat(Le).toFixed(2)}</span>
            </div>
            <div class="item-row">
              <span>Change Given:</span>
              <span>€${yt.toFixed(2)}</span>
            </div>
            `:je==="card"?`
            <div class="item-row">
              <span>Card: ****1234</span>
              <span>Approval: ${Math.floor(Math.random()*1e4)}</span>
            </div>
            `:""}
          </div>
          
          ${dt||Re&&kt?`
          <div class="divider"></div>
          <div class="notes-section">
            <div style="font-weight: bold; margin-bottom: 5px;">Notes:</div>
            <div style="font-size: 9px; line-height: 1.3; margin-left: 10px;">
              ${Re?`PARTIAL PAYMENT
Amount Paid Today: €${(parseFloat(Ue)||0).toFixed(2)}
Remaining Balance: €${jt.toFixed(2)}
${kt?`Partial Payment Notes: ${kt}`:""}`:""}
              ${dt?(Re?`

`:"")+dt:""}
            </div>
          </div>
          `:""}
          
          <div class="divider"></div>
          
          <div class="footer">
            <div>Thank you for shopping with us!</div>
            <div style="margin-top: 5px;">LandM Store - Your Local African Food Store</div>
            ${Re?`
            <div style="margin-top: 10px; font-size: 9px; color: #92400e;">
              <strong>Please keep this receipt for your records</strong><br>
              Remaining balance: €${jt.toFixed(2)}
            </div>
            `:""}
          </div>
        </div>
      </body>
      </html>
    `},Fn=()=>{const T=window.open("","_blank");T&&(T.document.write(On()),T.document.close(),T.print(),T.close())},Qo=async()=>{if(w.items.length!==0)try{let T;if(mn&&xt){const xe=parseInt(xt.replace("TXN-","")),{data:ze,error:Te}=await le.from("sales").update({total_amount:w.total,payment_method:je}).eq("sale_id",xe).select().single();if(Te)throw Te;T=ze}else{let xe=null;if(ce.trim()){const{data:bt,error:Qt}=await le.from("customers").select("customer_id").eq("name",ce.trim()).single();if(bt&&!Qt)xe=bt.customer_id;else{const{data:et,error:at}=await le.from("customers").insert([{name:ce.trim(),phone_number:we.trim()||"000-000-0000",email:null}]).select().single();at?(console.error("Error creating customer:",at),xe=null):xe=et.customer_id}}let ze="";Re&&(ze=`PARTIAL PAYMENT
Amount Paid Today: €${(parseFloat(Ue)||0).toFixed(2)}
Remaining Balance: €${jt.toFixed(2)}`,kt&&(ze+=`

Partial Payment Notes: ${kt}`)),dt&&(ze+=(ze?`

`:"")+dt);let Te,Rt;try{const bt={datetime:Uo(),total_amount:Re?parseFloat(Ue)||0:w.total,payment_method:je,cashier_id:l?.user_id,customer_id:xe,discount_applied:w.discount,partial_payment:Re,partial_amount:Re?parseFloat(Ue)||0:null,remaining_amount:Re?jt:null,partial_notes:Re?kt:null,notes:ze||null},Qt=await le.from("sales").insert([bt]).select("*").single();Te=Qt.data,Rt=Qt.error}catch{const Qt={datetime:Uo(),total_amount:Re?parseFloat(Ue)||0:w.total,payment_method:je,cashier_id:l?.user_id,customer_id:xe,discount_applied:w.discount,partial_payment:Re,partial_amount:Re?parseFloat(Ue)||0:null,remaining_amount:Re?jt:null,partial_notes:Re?kt:null},et=await le.from("sales").insert([Qt]).select("*").single();Te=et.data,Rt=et.error}if(Rt)throw Rt;T=Te}if(mn&&xt){const xe=fs?(await le.from("sale_items").select("product_id").eq("sale_id",T.sale_id)).data?.map(Te=>Te.product_id)||[]:[],ze=w.items.filter(Te=>Te.product&&!xe.includes(Te.product.product_id));if(ze.length>0){const Te=ze.map(bt=>({sale_id:T.sale_id,product_id:bt.product.product_id,quantity:bt.quantity,price_each:bt.product.price,weight:bt.weight||null,calculated_price:bt.calculatedPrice||null})),{error:Rt}=await le.from("sale_items").insert(Te);if(Rt)throw Rt}}else{const xe=w.items.filter(Te=>Te.product).map(Te=>({sale_id:T.sale_id,product_id:Te.product.product_id,quantity:Te.quantity,price_each:Te.product.price,weight:Te.weight||null,calculated_price:Te.calculatedPrice||null})),ze=w.items.filter(Te=>Te.sideBusinessItem).map(Te=>({item_id:Te.sideBusinessItem.item_id,quantity:Te.quantity,total_amount:(Te.customPrice||Te.sideBusinessItem.price||0)*Te.quantity,payment_method:je,date_time:Uo()}));if(xe.length>0){const{error:Te}=await le.from("sale_items").insert(xe);if(Te)throw Te}if(ze.length>0){const{error:Te}=await le.from("side_business_sales").insert(ze);if(Te)throw Te}}const ae=mn&&xt?w.items.filter(xe=>xe.product?!(fs?(fs.sale_items||[]).map(Te=>Te.product_id):[]).includes(xe.product.product_id):!1):w.items.filter(xe=>xe.product);for(const xe of ae){if(!xe.product)continue;const{error:ze}=await le.from("products").update({stock_quantity:xe.product.stock_quantity-xe.quantity,last_updated:Uo()}).eq("product_id",xe.product.product_id);if(ze)throw ze;const{error:Te}=await le.from("inventory_movements").insert([{product_id:xe.product.product_id,quantity_change:-xe.quantity,movement_type:"Sale",reference_id:T.sale_id}]);if(Te)throw Te}const Ne=w.items.filter(xe=>xe.sideBusinessItem);for(const xe of Ne){if(!xe.sideBusinessItem||xe.sideBusinessItem.stock_qty===null)continue;const{error:ze}=await le.from("side_business_items").update({stock_qty:xe.sideBusinessItem.stock_qty-xe.quantity}).eq("item_id",xe.sideBusinessItem.item_id);if(ze)throw ze}K({items:[],subtotal:0,tax:0,discount:0,total:0}),ue(""),M(""),Ye("cash"),He(""),Dt(0),gt(""),Re&&jt>0&&T?.sale_id&&await wi(ce,we,jt,T.sale_id),it(!1),At(""),Xt(0),St("");const me=document.createElement("div");me.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `,me.textContent=mn?"Items added to transaction successfully!":Re?`Partial payment processed! €${(parseFloat(Ue)||0).toFixed(2)} paid, €${jt.toFixed(2)} remaining. Reminder created.`:"Sale processed successfully!",document.body.appendChild(me),setTimeout(()=>{document.body.removeChild(me)},3e3),ge(!1),mn&&xt&&setTimeout(()=>{i(`/transaction/${xt}`)},2e3)}catch(T){alert(`Failed to process sale: ${T instanceof Error?T.message:"Unknown error"}`)}},Si=()=>{const T=new Date,ae=T.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),Ne=T.toLocaleDateString("en-GB",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"});return`${ae} - ${Ne}`},wi=async(T,ae,Ne,me)=>{try{const xe=l?.user_id||1,ze=`Payment Due: ${T||"Customer"}`,Te=ae?`
Phone: ${ae}`:"",Rt=`Customer owes €${Ne.toFixed(2)} from Sale #${me}. Please follow up for payment.${Te}`,bt=new Date;bt.setDate(bt.getDate()+1);const Qt=bt.toISOString().split("T")[0],{data:et,error:at}=await le.from("reminders").insert([{title:ze,body:Rt,remind_date:Qt,owner_id:xe}]).select().single();at?(console.error("Error creating partial payment reminder:",at),console.error("Reminder data attempted:",{title:ze,body:Rt,remind_date:Qt,owner_id:xe})):console.log("Partial payment reminder created successfully:",et)}catch(xe){console.error("Error creating partial payment reminder:",xe)}};return Q?a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading products..."]}):a.jsxs("div",{style:{display:"flex",height:"100vh",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",fontFamily:"Poppins, sans-serif"},children:[a.jsxs("div",{style:{flex:1,background:"#ffffff",margin:"20px",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:mn?"#fef3c7":"#f9fafb"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[a.jsx("i",{className:"fa-solid fa-cash-register",style:{marginRight:"12px",color:"#7d8d86"}}),"Point Of Sales"]}),mn&&a.jsxs("div",{style:{background:"#f59e0b",color:"#92400e",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-plus-circle"}),"Adding to Transaction #",xt]})]}),mn&&a.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:"8px 0 0 0",fontStyle:"italic"},children:"Adding new items to existing transaction. Existing items will be preserved."})]}),a.jsx("div",{style:{padding:"20px 32px 16px",borderBottom:"1px solid #e5e7eb"},children:a.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",maxWidth:"600px"},children:[a.jsxs("div",{style:{position:"relative",flex:1},children:[a.jsx("input",{type:"text",placeholder:"Search Product",value:N,onChange:T=>ua(T.target.value),onFocus:T=>{T.target.style.borderColor="#7d8d86",ve(P.length>0)},onBlur:T=>{T.target.style.borderColor="#e5e7eb",setTimeout(()=>ve(!1),200)},style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"}}),de&&P.length>0&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#ffffff",border:"1px solid #6b7280",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:P.map((T,ae)=>{const Ne="product_id"in T,me="item_id"in T;return a.jsxs("div",{onClick:()=>Xo(T),style:{padding:"12px 16px",cursor:"pointer",borderBottom:ae<P.length-1?"1px solid #f3f4f6":"none",display:"flex",alignItems:"center",gap:"12px",transition:"background-color 0.2s ease"},onMouseEnter:xe=>xe.currentTarget.style.backgroundColor="#f9fafb",onMouseLeave:xe=>xe.currentTarget.style.backgroundColor="transparent",children:[a.jsx("div",{style:{width:"32px",height:"32px",background:Ne&&T.image_url?`url(${T.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#6b7280"},children:me&&a.jsx("i",{className:"fa-solid fa-briefcase"})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("p",{style:{margin:"0 0 2px 0",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:T.name}),a.jsx("p",{style:{margin:"0",fontSize:"12px",color:"#6b7280"},children:Ne?`${T.category} • €${T.price.toFixed(2)}`:`${T.side_businesses?.name||"Side Business"} • ${T.price?`€${T.price.toFixed(2)}`:"Custom Price"}`})]}),a.jsx("i",{className:"fa-solid fa-plus",style:{color:"#7d8d86",fontSize:"12px"}})]},Ne?T.product_id:`sb-${T.item_id}`)})})]}),a.jsxs("button",{style:{background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-search"}),"Search"]})]})}),a.jsx("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",whiteSpace:"nowrap"},children:"Category:"}),a.jsx("select",{value:j,onChange:T=>C(T.target.value),style:{background:"#ffffff",border:"2px solid #6b7280",borderRadius:"8px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer",minWidth:"200px",outline:"none",transition:"border-color 0.2s ease"},onFocus:T=>T.target.style.borderColor="#7d8d86",onBlur:T=>T.target.style.borderColor="#e5e7eb",children:S.map(T=>{let ae=0;return T==="All"?ae=q+u.length:ae=u.filter(Ne=>Ne.side_businesses?.name===T).length,a.jsxs("option",{value:T,children:[T," ",T==="All"?`(${ae})`:ae>0?`(${ae})`:""]},T)})})]})}),a.jsxs("div",{style:{flex:1,padding:"24px 32px",overflowY:"auto"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 4px 0"},children:G?"All Products":"Top Products"}),G&&a.jsxs("p",{style:{fontSize:"14px",color:"#6b7280",margin:"0",display:"flex",alignItems:"center",gap:"8px"},children:["Showing ",Math.min(ye*R,q)," of ",q," products",fe&&a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{fontSize:"12px"}})]})]}),a.jsx("button",{onClick:ur,disabled:I,style:{background:G?"#7d8d86":"#f3f4f6",color:G?"#ffffff":"#374151",border:"1px solid #d1d5db",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:I?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:I?.6:1},onMouseEnter:T=>{I||(T.currentTarget.style.background=G?"#6b7c75":"#e5e7eb")},onMouseLeave:T=>{I||(T.currentTarget.style.background=G?"#7d8d86":"#f3f4f6")},children:I?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"4px"}}),"Switching..."]}):G?"Show Top 5":"Show All"})]}),g.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-search",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",color:"#374151",margin:"0 0 8px 0"},children:"No products found"}),a.jsx("p",{style:{fontSize:"14px",margin:"0",color:"#6b7280"},children:N?`No products match "${N}"`:"Try selecting a different category"})]}):a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"12px"},children:[g.map(T=>a.jsxs("div",{style:{background:"#ffffff",border:"1px solid #6b7280",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative"},onMouseEnter:ae=>{ae.currentTarget.style.transform="translateY(-1px)",ae.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseLeave:ae=>{ae.currentTarget.style.transform="translateY(0)",ae.currentTarget.style.boxShadow="none"},children:[a.jsx("div",{style:{width:"100%",height:"100px",background:T.image_url?`url(${T.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:!T.image_url&&a.jsx("i",{className:"fa-solid fa-image",style:{fontSize:"24px",color:"#9ca3af"}})}),a.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:T.name}),a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:T.is_weighted&&T.price_per_unit&&T.weight_unit?T.weight_unit==="g"&&T.price_per_unit<1?`€${(T.price_per_unit*1e3).toFixed(2)}/kg`:T.weight_unit==="kg"&&T.price_per_unit>=1?`€${T.price_per_unit.toFixed(2)}/kg`:`€${T.price_per_unit.toFixed(2)}/${T.weight_unit}`:`€${T.price.toFixed(2)}`}),a.jsxs("button",{onClick:()=>fr(T),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:ae=>{ae.currentTarget.style.background="#3e3f29"},onMouseLeave:ae=>{ae.currentTarget.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},T.product_id)),p.map(T=>a.jsxs("div",{style:{background:"#ffffff",border:"1px solid #6b7280",borderRadius:"8px",padding:"12px",textAlign:"center",transition:"all 0.2s ease",cursor:"pointer",position:"relative"},onMouseEnter:ae=>{ae.currentTarget.style.transform="translateY(-1px)",ae.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseLeave:ae=>{ae.currentTarget.style.transform="translateY(0)",ae.currentTarget.style.boxShadow="none"},children:[a.jsx("div",{style:{width:"100%",height:"100px",background:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"24px",color:"#9ca3af"}})}),a.jsx("h4",{style:{fontSize:"13px",fontWeight:"500",color:"#1f2937",margin:"0 0 6px 0",lineHeight:"1.3",height:"34px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:T.name}),a.jsx("p",{style:{fontSize:"14px",fontWeight:"600",color:"#7d8d86",margin:"0 0 8px 0"},children:T.price?`€${T.price.toFixed(2)}`:"Custom Price"}),a.jsxs("button",{onClick:()=>hs(T),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:ae=>{ae.currentTarget.style.background="#3e3f29"},onMouseLeave:ae=>{ae.currentTarget.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"10px"}}),"Add"]})]},`sb-${T.item_id}`))]}),G&&se&&a.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"8px"}}),"Loading more products..."]}),G&&!se&&ye*R<q&&a.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:a.jsxs("button",{onClick:hr,style:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",padding:"12px 24px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},onMouseEnter:T=>{T.currentTarget.style.background="#e5e7eb"},onMouseLeave:T=>{T.currentTarget.style.background="#f3f4f6"},children:[a.jsx("i",{className:"fa-solid fa-plus",style:{fontSize:"12px"}}),"Load More Products (",q-ye*R," remaining)"]})})]})]}),a.jsxs("div",{style:{width:"400px",background:"#ffffff",margin:"20px 20px 20px 0",borderRadius:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px",fontWeight:"600"},children:l?.username?.charAt(0).toUpperCase()}),a.jsx("div",{children:a.jsxs("p",{style:{margin:"0",fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["Hello, ",l?.username]})})]}),a.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:Si()})]}),a.jsxs("div",{style:{flex:1,padding:"24px",overflowY:"auto"},children:[a.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:["Order Detail #",Math.floor(Math.random()*1e7)]}),w.items.length===0?a.jsxs("div",{style:{textAlign:"center",color:"#6b7280",padding:"40px 0"},children:[a.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{children:"No items in order"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:w.items.map(T=>{const ae=T.product?.product_id||`sb-${T.sideBusinessItem?.item_id}`,Ne=T.product?.name||T.sideBusinessItem?.name||"Unknown Item",me=T.product?.price||T.customPrice||T.sideBusinessItem?.price||0,xe=!!T.sideBusinessItem;return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f9fafb",borderRadius:"8px"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:xe?"linear-gradient(135deg, #f3f4f6, #e5e7eb)":T.product?.image_url?`url(${T.product.image_url})`:"linear-gradient(135deg, #f3f4f6, #e5e7eb)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:xe&&a.jsx("i",{className:"fa-solid fa-briefcase",style:{fontSize:"16px",color:"#9ca3af"}})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:Ne.length>20?Ne.substring(0,20)+"...":Ne}),a.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#7d8d86",fontWeight:"600"},children:T.weight&&T.calculatedPrice?a.jsxs(a.Fragment,{children:[T.weight," ",T.product?.weight_unit," • €",T.calculatedPrice.toFixed(2)]}):`€${me.toFixed(2)}`})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!T.weight&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>Wn(ae,T.quantity-1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),a.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:T.quantity}),a.jsx("button",{onClick:()=>Wn(ae,T.quantity+1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),T.weight&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>fa(ae,T.weight-.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"-"}),a.jsxs("button",{onClick:()=>ha(T),style:{minWidth:"60px",height:"24px",borderRadius:"4px",border:"1px solid #7d8d86",background:"#f9fafb",color:"#7d8d86",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"500",padding:"0 4px"},title:"Click to edit weight",children:[T.weight," ",T.product?.weight_unit]}),a.jsx("button",{onClick:()=>fa(ae,T.weight+.1),style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #d1d5db",background:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"+"})]}),a.jsx("button",{onClick:()=>Ct(ae),style:{width:"24px",height:"24px",borderRadius:"4px",border:"none",background:"#ef4444",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",marginLeft:"4px"},children:a.jsx("i",{className:"fa-solid fa-trash"})})]})]},ae)})})]}),a.jsxs("div",{style:{padding:"24px",borderTop:"1px solid #e5e7eb",background:"#f9fafb"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Detail"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Customer Name"}),a.jsx("input",{type:"text",value:ce,onChange:T=>ue(T.target.value),placeholder:"Enter customer name",style:{width:"100%",padding:"8px 12px",border:"1px solid #6b7280",borderRadius:"6px",fontSize:"14px",outline:"none"}})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Sub Total"}),a.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["€",w.subtotal.toFixed(2)]})]}),w.discount>0&&a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Discount"}),a.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:["€",w.discount.toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"8px",borderTop:"1px solid #d1d5db",marginBottom:"16px"},children:[a.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937"},children:"Total Payment"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"600",color:"#7d8d86"},children:["€",w.total.toFixed(2)]})]})]}),a.jsx("button",{style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"14px",fontWeight:"500",cursor:"pointer",width:"100%",marginBottom:"12px"},children:"Add Voucher"}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[a.jsxs("button",{onClick:_i,disabled:w.items.length===0,title:w.items.length>0?"Clear all items from current transaction":"No items to reset",style:{background:w.items.length===0?"#f3f4f6":"#ef4444",color:w.items.length===0?"#9ca3af":"white",border:"none",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",fontWeight:"500",cursor:w.items.length===0?"not-allowed":"pointer",flex:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[a.jsx("i",{className:"fa-solid fa-rotate-left",style:{fontSize:"12px"}}),"Reset"]}),a.jsxs("button",{onClick:()=>ge(!0),disabled:w.items.length===0,title:w.items.length>0?"Press Ctrl+Enter to view sales summary":"Add items to process sale",style:{background:w.items.length===0?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",fontWeight:"600",cursor:w.items.length===0?"not-allowed":"pointer",flex:2,transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[a.jsx("i",{className:"fa-solid fa-credit-card",style:{fontSize:"12px"}}),"Purchase",w.items.length>0&&a.jsx("span",{style:{fontSize:"10px",opacity:.8,marginLeft:"2px"},children:"(Ctrl+Enter)"})]})]})]})]}),be&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"20px",width:"95%",maxWidth:"700px",maxHeight:"95vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"8px",borderBottom:"1px solid #e5e7eb"},children:[a.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1f2937"},children:[a.jsx("i",{className:"fa-solid fa-receipt",style:{marginRight:"12px",color:"#7d8d86"}}),"Sales Summary"]}),a.jsx("button",{onClick:()=>ge(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#6b7280",cursor:"pointer",padding:"4px"},children:a.jsx("i",{className:"fa-solid fa-xmark"})})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Customer Information"}),a.jsx("input",{type:"text",value:ce,onChange:T=>ue(T.target.value),placeholder:"Enter customer name (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"12px"}})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Phone Number (Optional)"}),a.jsx("input",{type:"tel",value:we,onChange:T=>M(T.target.value),placeholder:"Enter phone number (optional)",style:{width:"100%",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",marginBottom:"16px"}})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Payment Method"}),a.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:["cash","card","credit"].map(T=>a.jsxs("button",{onClick:()=>Ye(T),style:{background:je===T?"#7d8d86":"#f3f4f6",color:je===T?"white":"#374151",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",textTransform:"capitalize",transition:"all 0.2s ease"},children:[a.jsx("i",{className:`fa-solid fa-${T==="cash"?"money-bill":T==="card"?"credit-card":"hand-holding-dollar"}`,style:{marginRight:"6px"}}),T]},T))})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0"},children:"Payment Options"}),a.jsxs("button",{onClick:()=>{it(!Re),Re?(At(""),Xt(0)):At(w.total.toString())},style:{background:Re?"#ef4444":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("i",{className:`fa-solid fa-${Re?"times":"credit-card"}`,style:{fontSize:"12px"}}),Re?"Disable Partial":"Enable Partial Payment"]})]}),Re&&a.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[a.jsx("i",{className:"fa-solid fa-info-circle",style:{color:"#f59e0b"}}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#92400e"},children:"Partial Payment Enabled"})]}),a.jsxs("div",{style:{fontSize:"14px",color:"#92400e"},children:[a.jsxs("div",{children:["Amount to pay now: ",a.jsxs("strong",{children:["€",(parseFloat(Ue)||0).toFixed(2)]})]}),a.jsxs("div",{children:["Remaining amount: ",a.jsxs("strong",{children:["€",jt.toFixed(2)]})]})]})]}),Re&&a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Amount to Pay Now (€)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:w.total,value:Ue,onChange:T=>At(T.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},placeholder:`Enter amount (max €${w.total.toFixed(2)})`})]}),Re&&a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Notes (Optional)"}),a.jsx("textarea",{value:kt,onChange:T=>St(T.target.value),placeholder:"Add any notes about this partial payment...",style:{width:"100%",padding:"12px 16px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit",transition:"border-color 0.2s ease"}})]})]}),je==="cash"&&a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Amount Received"}),a.jsx("div",{style:{marginBottom:"12px"},children:a.jsxs("button",{onClick:()=>He(Re?Ue:w.total.toFixed(2)),style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:T=>T.target.style.background="#f9fafb",onMouseOut:T=>T.target.style.background="#ffffff",children:["Set Exact Amount (€",Re?(parseFloat(Ue)||0).toFixed(2):w.total.toFixed(2),")"]})}),a.jsx("input",{type:"number",step:"0.01",value:Le,onChange:T=>He(T.target.value),placeholder:`Enter amount: €${Re?(parseFloat(Ue)||0).toFixed(2):w.total.toFixed(2)}`,style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"block",padding:"12px 16px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"18px",fontWeight:"500",outline:"none",background:"#ffffff",textAlign:"center"}}),yt>0&&a.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",color:"#0c4a6e",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-coins",style:{marginRight:"8px"}}),"Change: €",yt.toFixed(2)]}),Le&&parseFloat(Le)<w.total&&a.jsxs("div",{style:{marginTop:"12px",padding:"12px 16px",background:"#fef2f2",border:"1px solid #f87171",borderRadius:"8px",color:"#dc2626",fontSize:"16px",fontWeight:"600",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"8px"}}),"Need €",((Re?parseFloat(Ue)||0:w.total)-parseFloat(Le)).toFixed(2)," more"]})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 12px 0"},children:"Receipt Notes (Optional)"}),a.jsx("textarea",{value:dt,onChange:T=>gt(T.target.value),placeholder:"Add notes for receipt (e.g., partial payment, special instructions, etc.)",style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",resize:"vertical",minHeight:"60px",fontFamily:"inherit"}}),a.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:"8px 0 0 0"},children:"These notes will appear on the printed receipt"})]}),a.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"12px",marginBottom:"16px"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:"Payment Summary"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Subtotal"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["€",w.subtotal.toFixed(2)]})]}),w.discount>0&&a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Discount"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["€",w.discount.toFixed(2)]})]}),Re&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Amount to Pay Now"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#7d8d86"},children:["€",(parseFloat(Ue)||0).toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{style:{fontSize:"16px",color:"#6b7280"},children:"Remaining Amount"}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"500",color:"#ef4444"},children:["€",jt.toFixed(2)]})]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid #d1d5db",marginTop:"8px"},children:[a.jsx("span",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:Re?"Total Order":"Total"}),a.jsxs("span",{style:{fontSize:"18px",fontWeight:"600",color:"#7d8d86"},children:["€",w.total.toFixed(2)]})]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"space-between"},children:[a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsxs("button",{onClick:()=>z(!0),style:{background:"#ffffff",color:"#3e3f29",border:"1px solid #3e3f29",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-eye"}),"View Receipt"]}),a.jsxs("button",{onClick:Fn,style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsx("button",{onClick:()=>ge(!1),style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),a.jsxs("button",{onClick:Qo,disabled:je==="cash"&&(!Le||parseFloat(Le)<(Re?parseFloat(Ue)||0:w.total)),style:{background:je==="cash"&&(!Le||parseFloat(Le)<(Re?parseFloat(Ue)||0:w.total))?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:je==="cash"&&(!Le||parseFloat(Le)<(Re?parseFloat(Ue)||0:w.total))?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:je==="cash"&&(!Le||parseFloat(Le)<(Re?parseFloat(Ue)||0:w.total))?.6:1},children:[a.jsx("i",{className:"fa-solid fa-credit-card"}),Re?"Process Partial Payment":"Process Sale"]})]})]})]})}),on&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",width:"95vw",height:"95vh",overflow:"auto",position:"relative"},children:[a.jsx("button",{onClick:()=>z(!1),style:{position:"absolute",top:"12px",right:"12px",background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#6b7280",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},onMouseOver:T=>T.target.style.background="#f3f4f6",onMouseOut:T=>T.target.style.background="none",children:a.jsx("i",{className:"fa-solid fa-times"})}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0",textAlign:"center"},children:"Receipt Preview"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:On()},style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"30px",background:"#ffffff",fontFamily:"Courier New, monospace",fontSize:"16px",lineHeight:"1.6",maxWidth:"600px",margin:"0 auto"}})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>z(!1),style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close"}),a.jsxs("button",{onClick:()=>{z(!1),Fn()},style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #3e3f29 0%, #7d8d86 100%)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-print"}),"Print Receipt"]})]})]})}),ke&&Ze&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[a.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"Enter Custom Price"}),a.jsxs("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#6b7280"},children:["Set the price for: ",a.jsx("strong",{children:Ze.name})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Price (€)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:mt,onChange:T=>gn(T.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"1px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onKeyDown:T=>{T.key==="Enter"&&Hn()},autoFocus:!0})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>{Ee(!1),nt(null),gn("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),a.jsx("button",{onClick:Hn,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Add to Order"})]})]})}),H&&_e&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:"0 0 16px 0"},children:Be?"Edit Weight":"Enter Weight"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:"0 0 8px 0"},children:_e.name}),a.jsxs("p",{style:{fontSize:"12px",color:"#9ca3af",margin:"0 0 12px 0"},children:["Price: €",_e.price_per_unit?.toFixed(2)," per ",_e.weight_unit]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:["Weight (",_e.weight_unit,")"]}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:B,onChange:T=>ee(T.target.value),placeholder:`Enter weight in ${_e.weight_unit}`,style:{width:"100%",padding:"12px",border:"2px solid #6b7280",borderRadius:"8px",fontSize:"16px",outline:"none",transition:"border-color 0.2s ease"},onFocus:T=>T.target.style.borderColor="#7d8d86",onBlur:T=>T.target.style.borderColor="#e5e7eb",autoFocus:!0})]}),B&&parseFloat(B)>0&&a.jsxs("div",{style:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px",marginBottom:"20px"},children:[a.jsx("p",{style:{fontSize:"14px",color:"#374151",margin:"0 0 4px 0"},children:"Total Price:"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:["€",((parseFloat(B)||0)*(_e.price_per_unit||0)).toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>{pe(!1),Pe(null),We(null),ee("")},style:{padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),a.jsx("button",{onClick:()=>{const T=parseFloat(B);T>0&&Ha(_e,T)},disabled:!B||parseFloat(B)<=0,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:!B||parseFloat(B)<=0?"#d1d5db":"#7d8d86",color:!B||parseFloat(B)<=0?"#9ca3af":"#ffffff",fontSize:"14px",fontWeight:"500",cursor:!B||parseFloat(B)<=0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:Be?"Update Weight":"Add to Order"})]})]})})]})},dv="_searchContainer_tecz1_2",uv="_searchBarSection_tecz1_12",fv="_searchBarWrapper_tecz1_16",hv="_searchInputWrapper_tecz1_22",pv="_searchIcon_tecz1_40",gv="_searchInput_tecz1_22",mv="_clearButton_tecz1_65",xv="_searchResults_tecz1_87",yv="_resultsCount_tecz1_91",bv="_filtersSection_tecz1_98",vv="_filtersContainer_tecz1_103",_v="_filterGroup_tecz1_110",Sv="_filterLabel_tecz1_116",wv="_filterSelect_tecz1_123",jv="_sortToggleButton_tecz1_140",kv="_clearFiltersButton_tecz1_158",It={searchContainer:dv,searchBarSection:uv,searchBarWrapper:fv,searchInputWrapper:hv,searchIcon:pv,searchInput:gv,clearButton:mv,searchResults:xv,resultsCount:yv,filtersSection:bv,filtersContainer:vv,filterGroup:_v,filterLabel:Sv,filterSelect:wv,sortToggleButton:jv,clearFiltersButton:kv},Cv=({searchTerm:l="",onSearchChange:r,searchPlaceholder:i="Search...",showSearchResults:o=!1,searchResultsCount:d=0,onClearSearch:u,filters:h=[],sortOptions:g=[],onSortToggle:m,sortOrder:p="desc",onClearFilters:x,hasActiveFilters:S=!1})=>a.jsxs("div",{className:It.searchContainer,children:[r&&a.jsx("div",{className:It.searchBarSection,children:a.jsxs("div",{className:It.searchBarWrapper,children:[a.jsxs("div",{className:It.searchInputWrapper,children:[a.jsx("i",{className:`fa-solid fa-search ${It.searchIcon}`}),a.jsx("input",{type:"text",placeholder:i,value:l,onChange:k=>r(k.target.value),className:It.searchInput}),l&&u&&a.jsx("button",{onClick:u,className:It.clearButton,title:"Clear search",children:a.jsx("i",{className:"fa-solid fa-times"})})]}),o&&l&&a.jsx("div",{className:It.searchResults,children:a.jsxs("span",{className:It.resultsCount,children:[d," result",d!==1?"s":""," found"]})})]})}),(h.length>0||g.length>0||m||S)&&a.jsx("div",{className:It.filtersSection,children:a.jsxs("div",{className:It.filtersContainer,children:[h.map((k,j)=>a.jsxs("div",{className:It.filterGroup,children:[a.jsxs("label",{className:It.filterLabel,children:[k.label,":"]}),a.jsx("select",{value:k.value,onChange:C=>k.onChange(C.target.value),className:It.filterSelect,children:k.options.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]},j)),g.map((k,j)=>a.jsxs("div",{className:It.filterGroup,children:[a.jsxs("label",{className:It.filterLabel,children:[k.label,":"]}),a.jsx("select",{value:k.value,onChange:C=>k.onChange(C.target.value),className:It.filterSelect,children:k.options.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]},j)),m&&a.jsx("button",{onClick:m,className:It.sortToggleButton,title:`Sort ${p==="asc"?"Descending":"Ascending"}`,children:a.jsx("i",{className:`fa-solid fa-sort-${p==="asc"?"up":"down"}`})}),S&&x&&a.jsxs("button",{onClick:x,className:It.clearFiltersButton,title:"Clear all filters",children:[a.jsx("i",{className:"fa-solid fa-times"}),"Clear"]})]})})]}),Tv="_sideBusinessesContainer_okfn4_2",Ev="_pageHeader_okfn4_8",Rv="_pageTitle_okfn4_17",Nv="_primaryButton_okfn4_31",zv="_statisticsGrid_okfn4_54",Dv="_statisticsCard_okfn4_61",Av="_statisticsCardContent_okfn4_75",Mv="_statisticsInfo_okfn4_81",Bv="_statisticsLabel_okfn4_85",Ov="_statisticsValue_okfn4_92",Lv="_statisticsIcon_okfn4_99",Iv="_statisticsIconPurple_okfn4_104",Uv="_statisticsIconBlue_okfn4_108",qv="_statisticsIconGreen_okfn4_112",$v="_statisticsIconOrange_okfn4_116",Pv="_mainContentGrid_okfn4_121",Hv="_contentPanel_okfn4_128",Wv="_contentPanelHeader_okfn4_142",Fv="_contentPanelTitle_okfn4_151",Yv="_contentPanelBody_okfn4_158",Gv="_emptyStateMessage_okfn4_165",Vv="_emptyStateMessageIcon_okfn4_171",Xv="_emptyStateMessageText_okfn4_177",Kv="_listContainer_okfn4_184",Qv="_listContainerDivided_okfn4_189",Zv="_listItemCard_okfn4_193",Jv="_listItemCardContent_okfn4_209",e_="_listItemCardIcon_okfn4_216",t_="_listItemCardMain_okfn4_233",n_="_listItemCardTitle_okfn4_238",a_="_listItemCardSubtitle_okfn4_245",s_="_listItemCardMeta_okfn4_251",r_="_listItemCardPrice_okfn4_258",i_="_listItemCardStock_okfn4_264",o_="_listItemCardCount_okfn4_269",l_="_listItemCardTime_okfn4_274",c_="_listItemCardActions_okfn4_279",d_="_actionButton_okfn4_284",u_="_actionButtonIcon_okfn4_303",f_="_statusBadge_okfn4_308",h_="_statusBadgeRental_okfn4_316",p_="_statusBadgeResale_okfn4_321",g_="_statusBadgeService_okfn4_326",m_="_statusBadgeGray_okfn4_331",x_="_statusBadgeCash_okfn4_336",y_="_statusBadgeCard_okfn4_341",b_="_statusBadgeMobile_okfn4_346",v_="_modalOverlay_okfn4_352",__="_modalDialog_okfn4_363",S_="_modalDialogTitle_okfn4_373",w_="_modalDialogForm_okfn4_380",j_="_formFieldGroup_okfn4_386",k_="_formFieldLabel_okfn4_391",C_="_formFieldInput_okfn4_399",T_="_formFieldTextarea_okfn4_420",E_="_formFieldSelect_okfn4_444",R_="_actionButtonDanger_okfn4_496",N_="_standardButton_okfn4_506",z_="_standardButtonSecondary_okfn4_516",D_="_standardButtonDanger_okfn4_525",A_="_standardButtonSuccess_okfn4_534",M_="_businessDetailModalHeader_okfn4_544",B_="_businessAnalyticsSection_okfn4_554",O_="_analyticsSectionTitle_okfn4_558",L_="_analyticsGrid_okfn4_567",I_="_analyticsCard_okfn4_574",U_="_analyticsCardHeader_okfn4_587",q_="_analyticsIcon_okfn4_594",$_="_analyticsIconBlue_okfn4_600",P_="_analyticsIconGreen_okfn4_604",H_="_analyticsIconPurple_okfn4_608",W_="_analyticsPeriod_okfn4_612",F_="_analyticsCardContent_okfn4_618",Y_="_analyticsMetric_okfn4_624",G_="_analyticsLabel_okfn4_630",V_="_analyticsValue_okfn4_636",X_="_itemsSectionHeader_okfn4_643",K_="_restockButton_okfn4_650",Q_="_restockActionButton_okfn4_669",Z_="_editActionButton_okfn4_679",J_="_formFieldHelp_okfn4_690",eS="_modalHeader_okfn4_698",tS="_modalCloseButton_okfn4_707",nS="_required_okfn4_724",aS="_errorMessage_okfn4_730",sS="_listItemCardNotes_okfn4_748",rS="_restockInfo_okfn4_759",iS="_restockItemName_okfn4_767",oS="_restockCurrentStock_okfn4_774",lS="_restockPreview_okfn4_780",cS="_restockPreviewText_okfn4_788",dS="_businessDetailModalIcon_okfn4_803",uS="_businessDetailModalInfo_okfn4_819",fS="_businessDetailModalName_okfn4_823",hS="_businessDetailModalDescription_okfn4_830",pS="_businessDetailModalMeta_okfn4_836",gS="_businessDetailModalDate_okfn4_842",mS="_businessDetailModalStats_okfn4_847",xS="_businessDetailModalItems_okfn4_854",yS="_noItemsMessage_okfn4_865",bS="_deleteConfirmationWarning_okfn4_872",vS="_deleteConfirmationWarningText_okfn4_878",_S="_modalDialogActions_okfn4_885",SS="_errorStateContainer_okfn4_893",wS="_errorStateContent_okfn4_901",jS="_errorStateIcon_okfn4_910",kS="_errorStateTitle_okfn4_916",CS="_errorStateText_okfn4_922",TS="_errorStateRetryButton_okfn4_927",ES="_loadingStateContainer_okfn4_944",RS="_loadingStateText_okfn4_951",NS="_loadingStateSpinner_okfn4_959",_={sideBusinessesContainer:Tv,pageHeader:Ev,pageTitle:Rv,primaryButton:Nv,statisticsGrid:zv,statisticsCard:Dv,statisticsCardContent:Av,statisticsInfo:Mv,statisticsLabel:Bv,statisticsValue:Ov,statisticsIcon:Lv,statisticsIconPurple:Iv,statisticsIconBlue:Uv,statisticsIconGreen:qv,statisticsIconOrange:$v,mainContentGrid:Pv,contentPanel:Hv,contentPanelHeader:Wv,contentPanelTitle:Fv,contentPanelBody:Yv,emptyStateMessage:Gv,emptyStateMessageIcon:Vv,emptyStateMessageText:Xv,listContainer:Kv,listContainerDivided:Qv,listItemCard:Zv,listItemCardContent:Jv,listItemCardIcon:e_,listItemCardMain:t_,listItemCardTitle:n_,listItemCardSubtitle:a_,listItemCardMeta:s_,listItemCardPrice:r_,listItemCardStock:i_,listItemCardCount:o_,listItemCardTime:l_,listItemCardActions:c_,actionButton:d_,actionButtonIcon:u_,statusBadge:f_,statusBadgeRental:h_,statusBadgeResale:p_,statusBadgeService:g_,statusBadgeGray:m_,statusBadgeCash:x_,statusBadgeCard:y_,statusBadgeMobile:b_,modalOverlay:v_,modalDialog:__,modalDialogTitle:S_,modalDialogForm:w_,formFieldGroup:j_,formFieldLabel:k_,formFieldInput:C_,formFieldTextarea:T_,formFieldSelect:E_,actionButtonDanger:R_,standardButton:N_,standardButtonSecondary:z_,standardButtonDanger:D_,standardButtonSuccess:A_,businessDetailModalHeader:M_,businessAnalyticsSection:B_,analyticsSectionTitle:O_,analyticsGrid:L_,analyticsCard:I_,analyticsCardHeader:U_,analyticsIcon:q_,analyticsIconBlue:$_,analyticsIconGreen:P_,analyticsIconPurple:H_,analyticsPeriod:W_,analyticsCardContent:F_,analyticsMetric:Y_,analyticsLabel:G_,analyticsValue:V_,itemsSectionHeader:X_,restockButton:K_,restockActionButton:Q_,editActionButton:Z_,formFieldHelp:J_,modalHeader:eS,modalCloseButton:tS,required:nS,errorMessage:aS,listItemCardNotes:sS,restockInfo:rS,restockItemName:iS,restockCurrentStock:oS,restockPreview:lS,restockPreviewText:cS,businessDetailModalIcon:dS,businessDetailModalInfo:uS,businessDetailModalName:fS,businessDetailModalDescription:hS,businessDetailModalMeta:pS,businessDetailModalDate:gS,businessDetailModalStats:mS,businessDetailModalItems:xS,noItemsMessage:yS,deleteConfirmationWarning:bS,deleteConfirmationWarningText:vS,modalDialogActions:_S,errorStateContainer:SS,errorStateContent:wS,errorStateIcon:jS,errorStateTitle:kS,errorStateText:CS,errorStateRetryButton:TS,loadingStateContainer:ES,loadingStateText:RS,loadingStateSpinner:NS},zS=()=>{const{user:l}=Mn(),[r,i]=v.useState([]),[o,d]=v.useState([]),[u,h]=v.useState([]),[g,m]=v.useState(!0),[p,x]=v.useState(null),[S,k]=v.useState("all"),[j,C]=v.useState("all"),[N,A]=v.useState(""),[P,E]=v.useState("created_at"),[U,Z]=v.useState("desc"),[G,re]=v.useState(!1),[de,ve]=v.useState(!1),[ye,Ae]=v.useState(!1),[R,q]=v.useState(null),[O,se]=v.useState(!1),[he,I]=v.useState(null),[J,fe]=v.useState(null),[Se,w]=v.useState(!1),[K,ce]=v.useState({item_id:null,current_stock:0,restock_quantity:""}),[ue,we]=v.useState(!1),[M,Q]=v.useState(null),[oe,be]=v.useState({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),[ge,je]=v.useState({business_id:"",name:"",price:"",stock_qty:"",notes:""}),[Ye,Le]=v.useState({item_id:"",quantity:1,total_amount:"",payment_method:"cash"});v.useEffect(()=>{He()},[]);const He=async()=>{try{m(!0),x(null);const{data:B,error:ee}=await le.from("side_businesses").select("*").order("created_at",{ascending:!1});if(ee)throw ee;const{data:Be,error:We}=await le.from("side_business_items").select(`
          *,
          side_businesses (name)
        `).order("created_at",{ascending:!1});if(We)throw We;const{data:Re,error:it}=await le.from("side_business_sales").select(`
          *,
          side_business_items (
            name,
            side_businesses (name)
          )
        `).order("date_time",{ascending:!1}).limit(10);if(it)throw it;i(B||[]),d(Be||[]),h(Re||[])}catch(B){x(B instanceof Error?B.message:"Failed to fetch data")}finally{m(!1)}},yt=async B=>{if(B.preventDefault(),!oe.name.trim()){x("Business name is required");return}if(!oe.business_type){x("Business type is required");return}if(!l?.user_id){x("User not authenticated");return}try{x(null);const{data:ee,error:Be}=await le.from("side_businesses").insert({owner_id:l.user_id,name:oe.name.trim(),description:oe.description.trim()||null,business_type:oe.business_type}).select();if(Be)throw console.error("Database error:",Be),new Error(`Database error: ${Be.message}`);if(!ee||ee.length===0)throw new Error("No data returned from insert");be({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),re(!1),await He()}catch(ee){console.error("Error adding business:",ee),x(ee instanceof Error?ee.message:"Failed to add business")}},Dt=async B=>{B.preventDefault();try{const{error:ee}=await le.from("side_business_items").insert({business_id:parseInt(ge.business_id),name:ge.name,price:ge.price?parseFloat(ge.price):null,stock_qty:ge.stock_qty?parseInt(ge.stock_qty):null,notes:ge.notes.trim()||null});if(ee)throw ee;je({business_id:"",name:"",price:"",stock_qty:"",notes:""}),ve(!1),He()}catch(ee){x(ee instanceof Error?ee.message:"Failed to add item")}},dt=async B=>{B.preventDefault();try{const{error:ee}=await le.from("side_business_sales").insert({item_id:parseInt(Ye.item_id),quantity:Ye.quantity,total_amount:parseFloat(Ye.total_amount),payment_method:Ye.payment_method});if(ee)throw ee;Le({item_id:"",quantity:1,total_amount:"",payment_method:"cash"}),Ae(!1),He()}catch(ee){x(ee instanceof Error?ee.message:"Failed to add sale")}},gt=async B=>{try{const{data:ee}=await le.from("side_business_items").select("item_id").eq("business_id",B);if(ee&&ee.length>0){const We=ee.map(Re=>Re.item_id);await le.from("side_business_sales").delete().in("item_id",We)}await le.from("side_business_items").delete().eq("business_id",B);const{error:Be}=await le.from("side_businesses").delete().eq("business_id",B);if(Be)throw Be;I(null),He()}catch(ee){x(ee instanceof Error?ee.message:"Failed to delete business")}},on=async B=>{try{const ee=new Date,Be=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),We=new Date(Be);We.setDate(Be.getDate()-Be.getDay());const Re=new Date(ee.getFullYear(),ee.getMonth(),1),{data:it}=await le.from("side_business_items").select("item_id, stock_qty").eq("business_id",B),Ue=it?.reduce((St,xt)=>St+(xt.stock_qty||0),0)||0,At=it?.map(St=>St.item_id)||[];if(At.length===0){fe({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}});return}const{data:jt}=await le.from("side_business_sales").select("total_amount").in("item_id",At).gte("date_time",Be.toISOString()),{data:Xt}=await le.from("side_business_sales").select("total_amount").in("item_id",At).gte("date_time",We.toISOString()),{data:kt}=await le.from("side_business_sales").select("total_amount").in("item_id",At).gte("date_time",Re.toISOString());fe({currentStock:Ue,dailySales:{count:jt?.length||0,revenue:jt?.reduce((St,xt)=>St+xt.total_amount,0)||0},weeklySales:{count:Xt?.length||0,revenue:Xt?.reduce((St,xt)=>St+xt.total_amount,0)||0},monthlySales:{count:kt?.length||0,revenue:kt?.reduce((St,xt)=>St+xt.total_amount,0)||0}})}catch(ee){console.error("Error fetching business analytics:",ee),fe({currentStock:0,dailySales:{count:0,revenue:0},weeklySales:{count:0,revenue:0},monthlySales:{count:0,revenue:0}})}},z=async B=>{if(B.preventDefault(),!(!K.item_id||!K.restock_quantity))try{const ee=K.current_stock+parseInt(K.restock_quantity),{error:Be}=await le.from("side_business_items").update({stock_qty:ee}).eq("item_id",K.item_id);if(Be)throw Be;ce({item_id:null,current_stock:0,restock_quantity:""}),w(!1),He(),R&&on(R.business_id)}catch(ee){x(ee instanceof Error?ee.message:"Failed to restock item")}},ke=B=>{ce({item_id:B.item_id,current_stock:B.stock_qty||0,restock_quantity:""}),w(!0)},Ee=B=>{Q(B),we(!0)},Ze=async B=>{if(B.preventDefault(),!!M)try{const{error:ee}=await le.from("side_business_items").update({name:M.name,price:M.price,notes:M.notes}).eq("item_id",M.item_id);if(ee)throw ee;we(!1),Q(null),He(),R&&on(R.business_id)}catch(ee){x(ee instanceof Error?ee.message:"Failed to update item")}},nt=B=>{q(B),se(!0),on(B.business_id)},mt=B=>{switch(B){case"rental":return _.statusBadgeRental;case"resale":return _.statusBadgeResale;case"service":return _.statusBadgeService;default:return _.statusBadgeGray}},gn=B=>{switch(B){case"cash":return _.statusBadgeCash;case"card":return _.statusBadgeCard;case"mobile":return _.statusBadgeMobile;default:return _.statusBadgeGray}},H=o.filter(B=>{const ee=S==="all"||B.business_id.toString()===S,Be=N===""||B.name.toLowerCase().includes(N.toLowerCase())||B.side_businesses?.name.toLowerCase().includes(N.toLowerCase());return ee&&Be}).sort((B,ee)=>{let Be,We;switch(P){case"name":Be=B.name.toLowerCase(),We=ee.name.toLowerCase();break;case"price":Be=B.price||0,We=ee.price||0;break;case"created_at":Be=new Date(B.created_at),We=new Date(ee.created_at);break;default:return 0}return U==="asc"?Be-We:We-Be}),pe=r.filter(B=>{const ee=j==="all"||B.business_type===j,Be=N===""||B.name.toLowerCase().includes(N.toLowerCase())||B.description?.toLowerCase().includes(N.toLowerCase());return ee&&Be}).sort((B,ee)=>{let Be,We;switch(P){case"name":Be=B.name.toLowerCase(),We=ee.name.toLowerCase();break;case"created_at":Be=new Date(B.created_at),We=new Date(ee.created_at);break;default:return 0}return U==="asc"?Be-We:We-Be}),_e=u.filter(B=>{const ee=o.find(Ue=>Ue.item_id===B.item_id)?.business_id,Be=S==="all"||ee?.toString()===S,We=r.find(Ue=>Ue.business_id===ee),Re=j==="all"||We?.business_type===j,it=N===""||B.side_business_items?.name.toLowerCase().includes(N.toLowerCase())||B.side_business_items?.side_businesses?.name.toLowerCase().includes(N.toLowerCase());return Be&&Re&&it}).sort((B,ee)=>{const Be=new Date(B.date_time),We=new Date(ee.date_time);return U==="asc"?Be.getTime()-We.getTime():We.getTime()-Be.getTime()}),Pe=[...new Set(r.map(B=>B.business_type).filter(Boolean))];return g?a.jsx("div",{className:_.loadingStateContainer,children:a.jsxs("div",{className:_.loadingStateText,children:[a.jsx("i",{className:`fa-solid fa-spinner ${_.loadingStateSpinner}`}),"Loading side businesses..."]})}):p?a.jsx("div",{className:_.errorStateContainer,children:a.jsxs("div",{className:_.errorStateContent,children:[a.jsx("i",{className:`fa-solid fa-exclamation-triangle ${_.errorStateIcon}`}),a.jsx("h2",{className:_.errorStateTitle,children:"Error Loading Side Businesses"}),a.jsx("p",{className:_.errorStateText,children:p}),a.jsx("button",{className:_.errorStateRetryButton,onClick:He,children:"Try Again"})]})}):a.jsxs("div",{className:_.sideBusinessesContainer,children:[a.jsxs("div",{className:_.pageHeader,children:[a.jsxs("h1",{className:_.pageTitle,children:[a.jsx("i",{className:"fa-solid fa-briefcase"}),"Side Businesses"]}),a.jsxs("button",{onClick:()=>re(!0),className:_.primaryButton,children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add Business"]})]}),a.jsx(Cv,{searchTerm:N,onSearchChange:A,searchPlaceholder:"Search businesses, items, or sales...",showSearchResults:!!N,searchResultsCount:H.length+pe.length+_e.length,onClearSearch:()=>A(""),filters:[{label:"Business",value:S,onChange:k,options:[{value:"all",label:"All Businesses"},...r.map(B=>({value:B.business_id.toString(),label:B.name}))]},{label:"Type",value:j,onChange:C,options:[{value:"all",label:"All Types"},...Pe.map(B=>({value:B,label:B.charAt(0).toUpperCase()+B.slice(1)}))]}],sortOptions:[{label:"Sort",value:P,onChange:B=>E(B),options:[{value:"created_at",label:"Date Created"},{value:"name",label:"Name"},{value:"price",label:"Price"}]}],onSortToggle:()=>Z(U==="asc"?"desc":"asc"),sortOrder:U,hasActiveFilters:S!=="all"||j!=="all",onClearFilters:()=>{k("all"),C("all")}}),a.jsxs("div",{className:_.statisticsGrid,children:[a.jsx("div",{className:_.statisticsCard,children:a.jsxs("div",{className:_.statisticsCardContent,children:[a.jsxs("div",{className:_.statisticsInfo,children:[a.jsx("p",{className:_.statisticsLabel,children:"Total Businesses"}),a.jsx("p",{className:_.statisticsValue,children:pe.length})]}),a.jsx("i",{className:`fas fa-briefcase ${_.statisticsIcon} ${_.statisticsIconPurple}`})]})}),a.jsx("div",{className:_.statisticsCard,children:a.jsxs("div",{className:_.statisticsCardContent,children:[a.jsxs("div",{className:_.statisticsInfo,children:[a.jsx("p",{className:_.statisticsLabel,children:"Total Items"}),a.jsx("p",{className:_.statisticsValue,children:H.length})]}),a.jsx("i",{className:`fas fa-box ${_.statisticsIcon} ${_.statisticsIconBlue}`})]})}),a.jsx("div",{className:_.statisticsCard,children:a.jsxs("div",{className:_.statisticsCardContent,children:[a.jsxs("div",{className:_.statisticsInfo,children:[a.jsx("p",{className:_.statisticsLabel,children:"Total Sales"}),a.jsx("p",{className:_.statisticsValue,children:_e.length})]}),a.jsx("i",{className:`fas fa-chart-line ${_.statisticsIcon} ${_.statisticsIconGreen}`})]})}),a.jsx("div",{className:_.statisticsCard,children:a.jsxs("div",{className:_.statisticsCardContent,children:[a.jsxs("div",{className:_.statisticsInfo,children:[a.jsx("p",{className:_.statisticsLabel,children:"Revenue"}),a.jsxs("p",{className:_.statisticsValue,children:["€",_e.reduce((B,ee)=>B+ee.total_amount,0).toFixed(2)]})]}),a.jsx("i",{className:`fas fa-euro-sign ${_.statisticsIcon} ${_.statisticsIconOrange}`})]})})]}),a.jsxs("div",{className:_.mainContentGrid,children:[a.jsxs("div",{className:_.contentPanel,children:[a.jsx("div",{className:_.contentPanelHeader,children:a.jsx("h2",{className:_.contentPanelTitle,children:"Businesses"})}),a.jsx("div",{className:_.contentPanelBody,children:pe.length===0?a.jsxs("div",{className:_.emptyStateMessage,children:[a.jsx("i",{className:`fa-solid fa-briefcase ${_.emptyStateMessageIcon}`}),a.jsx("p",{className:_.emptyStateMessageText,children:"No businesses found. Add your first side business to get started!"})]}):a.jsx("div",{className:`${_.listContainer} ${_.listContainerDivided}`,children:pe.map(B=>a.jsx("div",{className:_.listItemCard,children:a.jsxs("div",{className:_.listItemCardContent,children:[a.jsx("div",{className:_.listItemCardIcon,children:a.jsx("i",{className:B.icon||"fa-solid fa-briefcase"})}),a.jsxs("div",{className:_.listItemCardMain,onClick:()=>nt(B),children:[a.jsx("h3",{className:_.listItemCardTitle,children:B.name}),B.description&&a.jsx("p",{className:_.listItemCardSubtitle,children:B.description}),a.jsxs("div",{className:_.listItemCardMeta,children:[a.jsx("span",{className:`${_.statusBadge} ${mt(B.business_type)}`,children:B.business_type||"service"}),a.jsxs("span",{className:_.listItemCardCount,children:[o.filter(ee=>ee.business_id===B.business_id).length," items"]})]})]}),a.jsxs("div",{className:_.listItemCardActions,children:[a.jsxs("button",{onClick:()=>nt(B),className:_.actionButton,title:"View Details",children:[a.jsx("i",{className:`fas fa-eye ${_.actionButtonIcon}`}),"View"]}),a.jsxs("button",{onClick:()=>I(B),className:`${_.actionButton} ${_.actionButtonDanger}`,title:"Delete Business",children:[a.jsx("i",{className:`fas fa-trash ${_.actionButtonIcon}`}),"Delete"]})]})]})},B.business_id))})})]}),a.jsxs("div",{className:_.contentPanel,children:[a.jsxs("div",{className:_.contentPanelHeader,children:[a.jsx("h2",{className:_.contentPanelTitle,children:"Items"}),a.jsxs("button",{onClick:()=>ve(!0),className:_.actionButton,style:{marginLeft:"auto"},children:[a.jsx("i",{className:`fas fa-plus ${_.actionButtonIcon}`}),"Add Item"]})]}),a.jsx("div",{className:_.contentPanelBody,children:H.length===0?a.jsxs("div",{className:_.emptyStateMessage,children:[a.jsx("i",{className:`fa-solid fa-box ${_.emptyStateMessageIcon}`}),a.jsx("p",{className:_.emptyStateMessageText,children:"No items found. Add items to your businesses!"})]}):a.jsx("div",{className:`${_.listContainer} ${_.listContainerDivided}`,children:H.map(B=>a.jsx("div",{className:_.listItemCard,children:a.jsxs("div",{className:_.listItemCardContent,children:[a.jsxs("div",{className:_.listItemCardMain,children:[a.jsx("h3",{className:_.listItemCardTitle,children:B.name}),a.jsx("p",{className:_.listItemCardSubtitle,children:B.side_businesses?.name||"Unknown Business"}),a.jsxs("div",{className:_.listItemCardMeta,children:[B.price?a.jsxs("span",{className:_.listItemCardPrice,children:["€",B.price]}):a.jsx("span",{className:_.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),B.stock_qty!==null&&a.jsxs("span",{className:_.listItemCardStock,children:["Stock: ",B.stock_qty]}),r.find(ee=>ee.business_id===B.business_id)?.business_type==="service"&&a.jsx("span",{className:`${_.statusBadge} ${_.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]})]}),a.jsx("div",{className:_.listItemCardActions,children:a.jsxs("button",{onClick:()=>{Le(ee=>({...ee,item_id:B.item_id.toString()})),Ae(!0)},className:_.actionButton,children:[a.jsx("i",{className:`fas fa-plus ${_.actionButtonIcon}`}),"Sale"]})})]})},B.item_id))})})]}),a.jsxs("div",{className:_.contentPanel,children:[a.jsx("div",{className:_.contentPanelHeader,children:a.jsx("h2",{className:_.contentPanelTitle,children:"Recent Sales"})}),a.jsx("div",{className:_.contentPanelBody,children:_e.length===0?a.jsxs("div",{className:_.emptyStateMessage,children:[a.jsx("i",{className:`fa-solid fa-receipt ${_.emptyStateMessageIcon}`}),a.jsx("p",{className:_.emptyStateMessageText,children:"No sales recorded yet."})]}):a.jsx("div",{className:`${_.listContainer} ${_.listContainerDivided}`,children:_e.map(B=>a.jsx("div",{className:_.listItemCard,children:a.jsx("div",{className:_.listItemCardContent,children:a.jsxs("div",{className:_.listItemCardMain,children:[a.jsx("h3",{className:_.listItemCardTitle,children:B.side_business_items?.name||"Unknown Item"}),a.jsx("p",{className:_.listItemCardSubtitle,children:B.side_business_items?.side_businesses?.name||"Unknown Business"}),a.jsxs("p",{className:_.listItemCardTime,children:[new Date(B.date_time).toLocaleDateString()," at ",new Date(B.date_time).toLocaleTimeString()]}),a.jsxs("div",{className:_.listItemCardMeta,children:[a.jsxs("span",{className:_.listItemCardCount,children:["Qty: ",B.quantity]}),a.jsxs("span",{className:_.listItemCardPrice,children:["€",B.total_amount]}),a.jsx("span",{className:`${_.statusBadge} ${gn(B.payment_method)}`,children:B.payment_method})]})]})})},B.sale_id))})})]})]}),G&&a.jsx("div",{className:_.modalOverlay,children:a.jsxs("div",{className:_.modalDialog,children:[a.jsxs("div",{className:_.modalHeader,children:[a.jsx("h2",{className:_.modalDialogTitle,children:"Create New Business"}),a.jsx("button",{type:"button",onClick:()=>{be({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),re(!1),x(null)},className:_.modalCloseButton,children:a.jsx("i",{className:"fas fa-times"})})]}),p&&a.jsxs("div",{className:_.errorMessage,children:[a.jsx("i",{className:"fas fa-exclamation-triangle"}),p]}),a.jsxs("form",{onSubmit:yt,className:_.modalDialogForm,children:[a.jsxs("div",{className:_.formFieldGroup,children:[a.jsxs("label",{className:_.formFieldLabel,children:["Business Name ",a.jsx("span",{className:_.required,children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:oe.name,onChange:B=>be(ee=>({...ee,name:B.target.value})),className:_.formFieldInput,placeholder:"Enter business name",maxLength:100})]}),a.jsxs("div",{className:_.formFieldGroup,children:[a.jsx("label",{className:_.formFieldLabel,children:"Description"}),a.jsx("textarea",{value:oe.description,onChange:B=>be(ee=>({...ee,description:B.target.value})),className:_.formFieldTextarea,rows:3,placeholder:"Brief description of your business",maxLength:500}),a.jsx("small",{className:_.formFieldHelp,children:"Optional: Describe what your business does"})]}),a.jsxs("div",{className:_.formFieldGroup,children:[a.jsxs("label",{className:_.formFieldLabel,children:["Business Type ",a.jsx("span",{className:_.required,children:"*"})]}),a.jsxs("select",{value:oe.business_type,onChange:B=>be(ee=>({...ee,business_type:B.target.value})),className:_.formFieldSelect,required:!0,children:[a.jsx("option",{value:"",children:"Select business type"}),a.jsx("option",{value:"service",children:"Service (Custom pricing per transaction)"}),a.jsx("option",{value:"rental",children:"Rental (Fixed pricing with stock)"}),a.jsx("option",{value:"resale",children:"Resale (Fixed pricing with stock)"})]}),a.jsxs("small",{className:_.formFieldHelp,children:[oe.business_type==="service"&&"Services allow custom pricing for each transaction",oe.business_type==="rental"&&"Rentals have fixed prices and track stock quantities",oe.business_type==="resale"&&"Resale items have fixed prices and track stock quantities"]})]}),a.jsxs("div",{className:_.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>{be({name:"",description:"",business_type:"service",icon:"fa-solid fa-briefcase"}),re(!1),x(null)},className:`${_.standardButton} ${_.standardButtonSecondary}`,children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:!oe.name.trim()||!oe.business_type,className:`${_.standardButton} ${_.standardButtonPrimary}`,children:[a.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Create Business"]})]})]})]})}),de&&a.jsx("div",{className:_.modalOverlay,children:a.jsxs("div",{className:_.modalDialog,children:[a.jsx("h2",{className:_.modalDialogTitle,children:"Add Item"}),a.jsxs("form",{onSubmit:Dt,className:_.modalDialogForm,children:[a.jsxs("div",{className:_.formFieldGroup,children:[a.jsx("label",{className:_.formFieldLabel,children:"Business"}),a.jsxs("select",{required:!0,value:ge.business_id,onChange:B=>je(ee=>({...ee,business_id:B.target.value})),className:_.formFieldSelect,children:[a.jsx("option",{value:"",children:"Select a business"}),r.map(B=>a.jsxs("option",{value:B.business_id,children:[B.name," (",B.business_type,")"]},B.business_id))]})]}),a.jsxs("div",{className:_.formFieldGroup,children:[a.jsx("label",{className:_.formFieldLabel,children:"Item Name"}),a.jsx("input",{type:"text",required:!0,value:ge.name,onChange:B=>je(ee=>({...ee,name:B.target.value})),className:_.formFieldInput,placeholder:"e.g., Haircut, Chair Rental, etc."})]}),ge.business_id&&r.find(B=>B.business_id.toString()===ge.business_id)?.business_type!=="service"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:_.formFieldGroup,children:[a.jsx("label",{className:_.formFieldLabel,children:"Price (€)"}),a.jsx("input",{type:"number",step:"0.01",value:ge.price,onChange:B=>je(ee=>({...ee,price:B.target.value})),className:_.formFieldInput,placeholder:"0.00"})]}),a.jsxs("div",{className:_.formFieldGroup,children:[a.jsx("label",{className:_.formFieldLabel,children:"Stock Quantity"}),a.jsx("input",{type:"number",min:"0",value:ge.stock_qty,onChange:B=>je(ee=>({...ee,stock_qty:B.target.value})),className:_.formFieldInput,placeholder:"0"})]})]}),ge.business_id&&r.find(B=>B.business_id.toString()===ge.business_id)?.business_type==="service"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:_.formFieldGroup,children:a.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:0},children:[a.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"8px"}}),"Service items don't have fixed prices or stock. You'll enter the amount when recording a sale."]})}),a.jsxs("div",{className:_.formFieldGroup,children:[a.jsx("label",{className:_.formFieldLabel,children:"Service Notes"}),a.jsx("textarea",{value:ge.notes,onChange:B=>je(ee=>({...ee,notes:B.target.value})),className:_.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details for this service...",maxLength:500}),a.jsx("small",{className:_.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details for this service"})]})]}),a.jsxs("div",{className:_.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>ve(!1),className:`${_.standardButton} ${_.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"submit",className:`${_.standardButton} ${_.standardButtonSuccess}`,children:"Add Item"})]})]})]})}),ye&&a.jsx("div",{className:_.modalOverlay,children:a.jsxs("div",{className:_.modalDialog,children:[a.jsx("h2",{className:_.modalDialogTitle,children:"Record Sale"}),a.jsxs("form",{onSubmit:dt,className:_.modalDialogForm,children:[a.jsxs("div",{className:_.formGroup,children:[a.jsx("label",{className:_.formLabel,children:"Item"}),a.jsxs("select",{required:!0,value:Ye.item_id,onChange:B=>Le(ee=>({...ee,item_id:B.target.value})),className:_.formFieldSelect,children:[a.jsx("option",{value:"",children:"Select an item"}),o.map(B=>a.jsxs("option",{value:B.item_id,children:[B.name," - ",B.side_businesses?.name,B.side_businesses&&r.find(ee=>ee.name===B.side_businesses?.name)?.business_type==="service"?" (Service - Custom Amount)":B.price?` (€${B.price})`:""]},B.item_id))]})]}),a.jsxs("div",{className:_.formGroup,children:[a.jsx("label",{className:_.formLabel,children:"Quantity"}),a.jsx("input",{type:"number",min:"1",required:!0,value:Ye.quantity,onChange:B=>Le(ee=>({...ee,quantity:parseInt(B.target.value)})),className:_.formFieldInput})]}),a.jsxs("div",{className:_.formGroup,children:[a.jsx("label",{className:_.formLabel,children:"Total Amount (€)"}),a.jsx("input",{type:"number",step:"0.01",required:!0,value:Ye.total_amount,onChange:B=>Le(ee=>({...ee,total_amount:B.target.value})),className:_.formFieldInput,placeholder:"0.00"}),Ye.item_id&&o.find(B=>B.item_id.toString()===Ye.item_id)&&r.find(B=>B.name===o.find(ee=>ee.item_id.toString()===Ye.item_id)?.side_businesses?.name)?.business_type==="service"&&a.jsxs("p",{style:{color:"#7d8d86",fontSize:"12px",margin:"4px 0 0 0"},children:[a.jsx("i",{className:"fa-solid fa-info-circle",style:{marginRight:"4px"}}),"Enter the custom amount for this service"]})]}),a.jsxs("div",{className:_.formGroup,children:[a.jsx("label",{className:_.formLabel,children:"Payment Method"}),a.jsxs("select",{value:Ye.payment_method,onChange:B=>Le(ee=>({...ee,payment_method:B.target.value})),className:_.formFieldSelect,children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"mobile",children:"Mobile"})]})]}),a.jsxs("div",{className:_.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>Ae(!1),className:`${_.standardButton} ${_.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"submit",className:`${_.standardButton} ${_.standardButtonSuccess}`,children:"Record Sale"})]})]})]})}),O&&R&&a.jsx("div",{className:_.modalOverlay,children:a.jsxs("div",{className:_.modalDialog,style:{maxWidth:"600px"},children:[a.jsx("h2",{className:_.modalDialogTitle,children:"Business Details"}),a.jsxs("div",{className:_.businessDetailModalHeader,children:[a.jsx("div",{className:_.businessDetailModalIcon,children:a.jsx("i",{className:R.icon||"fa-solid fa-briefcase"})}),a.jsxs("div",{className:_.businessDetailModalInfo,children:[a.jsx("h3",{className:_.businessDetailModalName,children:R.name}),a.jsx("p",{className:_.businessDetailModalDescription,children:R.description||"No description provided"}),a.jsxs("div",{className:_.businessDetailModalMeta,children:[a.jsx("span",{className:`${_.statusBadge} ${mt(R.business_type)}`,children:R.business_type||"service"}),a.jsxs("span",{className:_.businessDetailModalDate,children:["Created: ",new Date(R.created_at).toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:_.businessDetailModalStats,children:[a.jsx("div",{className:_.statisticsCard,children:a.jsxs("div",{className:_.statisticsCardContent,children:[a.jsxs("div",{className:_.statisticsInfo,children:[a.jsx("p",{className:_.statisticsLabel,children:"Total Items"}),a.jsx("p",{className:_.statisticsValue,children:o.filter(B=>B.business_id===R.business_id).length})]}),a.jsx("i",{className:`fas fa-box ${_.statisticsIcon} ${_.statisticsIconBlue}`})]})}),a.jsx("div",{className:_.statisticsCard,children:a.jsxs("div",{className:_.statisticsCardContent,children:[a.jsxs("div",{className:_.statisticsInfo,children:[a.jsx("p",{className:_.statisticsLabel,children:"Current Stock"}),a.jsx("p",{className:_.statisticsValue,children:J?.currentStock||0})]}),a.jsx("i",{className:`fas fa-warehouse ${_.statisticsIcon} ${_.statisticsIconOrange}`})]})})]}),a.jsxs("div",{className:_.businessAnalyticsSection,children:[a.jsx("h4",{className:_.analyticsSectionTitle,children:"Sales Analytics"}),a.jsxs("div",{className:_.analyticsGrid,children:[a.jsxs("div",{className:_.analyticsCard,children:[a.jsxs("div",{className:_.analyticsCardHeader,children:[a.jsx("i",{className:`fas fa-calendar-day ${_.analyticsIcon} ${_.analyticsIconBlue}`}),a.jsx("span",{className:_.analyticsPeriod,children:"Today"})]}),a.jsxs("div",{className:_.analyticsCardContent,children:[a.jsxs("div",{className:_.analyticsMetric,children:[a.jsx("span",{className:_.analyticsLabel,children:"Sales"}),a.jsx("span",{className:_.analyticsValue,children:J?.dailySales.count||0})]}),a.jsxs("div",{className:_.analyticsMetric,children:[a.jsx("span",{className:_.analyticsLabel,children:"Revenue"}),a.jsxs("span",{className:_.analyticsValue,children:["€",(J?.dailySales.revenue||0).toFixed(2)]})]})]})]}),a.jsxs("div",{className:_.analyticsCard,children:[a.jsxs("div",{className:_.analyticsCardHeader,children:[a.jsx("i",{className:`fas fa-calendar-week ${_.analyticsIcon} ${_.analyticsIconGreen}`}),a.jsx("span",{className:_.analyticsPeriod,children:"This Week"})]}),a.jsxs("div",{className:_.analyticsCardContent,children:[a.jsxs("div",{className:_.analyticsMetric,children:[a.jsx("span",{className:_.analyticsLabel,children:"Sales"}),a.jsx("span",{className:_.analyticsValue,children:J?.weeklySales.count||0})]}),a.jsxs("div",{className:_.analyticsMetric,children:[a.jsx("span",{className:_.analyticsLabel,children:"Revenue"}),a.jsxs("span",{className:_.analyticsValue,children:["€",(J?.weeklySales.revenue||0).toFixed(2)]})]})]})]}),a.jsxs("div",{className:_.analyticsCard,children:[a.jsxs("div",{className:_.analyticsCardHeader,children:[a.jsx("i",{className:`fas fa-calendar-alt ${_.analyticsIcon} ${_.analyticsIconPurple}`}),a.jsx("span",{className:_.analyticsPeriod,children:"This Month"})]}),a.jsxs("div",{className:_.analyticsCardContent,children:[a.jsxs("div",{className:_.analyticsMetric,children:[a.jsx("span",{className:_.analyticsLabel,children:"Sales"}),a.jsx("span",{className:_.analyticsValue,children:J?.monthlySales.count||0})]}),a.jsxs("div",{className:_.analyticsMetric,children:[a.jsx("span",{className:_.analyticsLabel,children:"Revenue"}),a.jsxs("span",{className:_.analyticsValue,children:["€",(J?.monthlySales.revenue||0).toFixed(2)]})]})]})]})]})]}),a.jsxs("div",{className:_.businessDetailModalItems,children:[a.jsxs("div",{className:_.itemsSectionHeader,children:[a.jsx("h4",{children:"Items in this business:"}),a.jsxs("button",{onClick:()=>ve(!0),className:_.restockButton,title:"Add new item",children:[a.jsx("i",{className:"fas fa-plus"}),"Add Item"]})]}),o.filter(B=>B.business_id===R.business_id).length===0?a.jsx("p",{className:_.noItemsMessage,children:"No items added yet."}):a.jsx("div",{className:_.listContainer,children:o.filter(B=>B.business_id===R.business_id).map(B=>a.jsx("div",{className:_.listItemCard,children:a.jsxs("div",{className:_.listItemCardContent,children:[a.jsxs("div",{className:_.listItemCardMain,children:[a.jsx("h4",{className:_.listItemCardTitle,children:B.name}),a.jsxs("div",{className:_.listItemCardMeta,children:[B.price?a.jsxs("span",{className:_.listItemCardPrice,children:["€",B.price]}):a.jsx("span",{className:_.listItemCardPrice,style:{color:"#7d8d86",fontStyle:"italic"},children:"Custom Amount"}),B.stock_qty!==null&&a.jsxs("span",{className:_.listItemCardStock,children:["Stock: ",B.stock_qty]}),R?.business_type==="service"&&a.jsx("span",{className:`${_.statusBadge} ${_.statusBadgeService}`,style:{fontSize:"10px",padding:"2px 6px"},children:"Service"})]}),B.notes&&a.jsxs("div",{className:_.listItemCardNotes,children:[a.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"6px",color:"#6b7280"}}),a.jsx("span",{style:{fontSize:"12px",color:"#6b7280",fontStyle:"italic"},children:B.notes.length>100?`${B.notes.substring(0,100)}...`:B.notes})]})]}),a.jsxs("div",{className:_.listItemCardActions,children:[a.jsxs("button",{onClick:()=>Ee(B),className:`${_.actionButton} ${_.editActionButton}`,title:"Edit item",children:[a.jsx("i",{className:`fas fa-edit ${_.actionButtonIcon}`}),"Edit"]}),B.stock_qty!==null&&a.jsxs("button",{onClick:()=>ke(B),className:`${_.actionButton} ${_.restockActionButton}`,title:"Restock item",children:[a.jsx("i",{className:`fas fa-boxes-stacked ${_.actionButtonIcon}`}),"Restock"]}),a.jsxs("button",{onClick:()=>{Le(ee=>({...ee,item_id:B.item_id.toString()})),Ae(!0)},className:_.actionButton,title:"Record sale",children:[a.jsx("i",{className:`fas fa-plus ${_.actionButtonIcon}`}),"Sale"]})]})]})},B.item_id))})]}),a.jsxs("div",{className:_.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>se(!1),className:`${_.standardButton} ${_.standardButtonSecondary}`,children:"Close"}),a.jsx("button",{type:"button",onClick:()=>{se(!1),I(R)},className:`${_.standardButton} ${_.standardButtonDanger}`,children:"Delete Business"})]})]})}),he&&a.jsx("div",{className:_.modalOverlay,children:a.jsxs("div",{className:_.modalDialog,children:[a.jsx("h2",{className:_.modalDialogTitle,children:"Delete Business"}),a.jsxs("p",{className:_.deleteConfirmationWarning,children:["Are you sure you want to delete ",a.jsx("strong",{children:he.name}),"?"]}),a.jsx("p",{className:_.deleteConfirmationWarningText,children:"This will permanently delete the business, all its items, and all related sales records. This action cannot be undone."}),a.jsxs("div",{className:_.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>I(null),className:`${_.standardButton} ${_.standardButtonSecondary}`,children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>gt(he.business_id),className:`${_.standardButton} ${_.standardButtonDanger}`,children:"Delete Business"})]})]})}),Se&&K.item_id&&a.jsx("div",{className:_.modalOverlay,children:a.jsxs("div",{className:_.modalDialog,children:[a.jsx("h2",{className:_.modalDialogTitle,children:"Restock Item"}),a.jsxs("div",{className:_.restockInfo,children:[a.jsx("p",{className:_.restockItemName,children:o.find(B=>B.item_id===K.item_id)?.name}),a.jsxs("p",{className:_.restockCurrentStock,children:["Current Stock: ",a.jsx("strong",{children:K.current_stock})]})]}),a.jsxs("form",{onSubmit:z,className:_.modalDialogForm,children:[a.jsxs("div",{className:_.formFieldGroup,children:[a.jsx("label",{className:_.formFieldLabel,children:"Restock Quantity"}),a.jsx("input",{type:"number",min:"1",required:!0,value:K.restock_quantity,onChange:B=>ce(ee=>({...ee,restock_quantity:B.target.value})),className:_.formFieldInput,placeholder:"Enter quantity to add"})]}),a.jsx("div",{className:_.restockPreview,children:a.jsxs("p",{className:_.restockPreviewText,children:["New stock will be: ",a.jsx("strong",{children:K.current_stock+(parseInt(K.restock_quantity)||0)})]})}),a.jsxs("div",{className:_.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>w(!1),className:`${_.standardButton} ${_.standardButtonSecondary}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${_.standardButton} ${_.standardButtonSuccess}`,children:[a.jsx("i",{className:"fas fa-boxes-stacked",style:{marginRight:"8px"}}),"Restock Item"]})]})]})]})}),ue&&M&&a.jsx("div",{className:_.modalOverlay,children:a.jsxs("div",{className:_.modalDialog,children:[a.jsx("h2",{className:_.modalDialogTitle,children:"Edit Item"}),a.jsxs("form",{onSubmit:Ze,className:_.modalDialogForm,children:[a.jsxs("div",{className:_.formFieldGroup,children:[a.jsx("label",{className:_.formFieldLabel,children:"Item Name"}),a.jsx("input",{type:"text",required:!0,value:M.name,onChange:B=>Q(ee=>ee?{...ee,name:B.target.value}:null),className:_.formFieldInput,placeholder:"Enter item name"})]}),a.jsxs("div",{className:_.formFieldGroup,children:[a.jsx("label",{className:_.formFieldLabel,children:"Price (€)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:M.price||"",onChange:B=>Q(ee=>ee?{...ee,price:B.target.value?parseFloat(B.target.value):null}:null),className:_.formFieldInput,placeholder:"Enter price (leave empty for custom pricing)"}),a.jsx("small",{className:_.formFieldHelp,children:"Leave empty for service items with custom pricing"})]}),a.jsxs("div",{className:_.formFieldGroup,children:[a.jsx("label",{className:_.formFieldLabel,children:"Notes"}),a.jsx("textarea",{value:M.notes||"",onChange:B=>Q(ee=>ee?{...ee,notes:B.target.value}:null),className:_.formFieldTextarea,rows:3,placeholder:"Add notes, instructions, or details...",maxLength:500}),a.jsx("small",{className:_.formFieldHelp,children:"Optional: Add any special instructions, requirements, or details"})]}),a.jsxs("div",{className:_.modalDialogActions,children:[a.jsx("button",{type:"button",onClick:()=>we(!1),className:`${_.standardButton} ${_.standardButtonSecondary}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${_.standardButton} ${_.standardButtonPrimary}`,children:[a.jsx("i",{className:"fas fa-save",style:{marginRight:"8px"}}),"Update Item"]})]})]})]})})]})},DS=()=>{const[l,r]=v.useState([]),[i,o]=v.useState(!0),[d,u]=v.useState(null),h=async()=>{try{o(!0),u(null);const{data:p,error:x}=await le.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).order("datetime",{ascending:!1});if(x)throw x;const S=p?.map(k=>{const j=k.notes&&(k.notes.includes("PARTIAL PAYMENT")||k.notes.includes("Amount Paid Today")||k.notes.includes("Remaining Balance"));let C=0,N=0,A="";if(j&&k.notes){const E=k.notes,U=E.match(/Amount Paid Today:\s*€(\d+\.?\d*)/i);U&&(C=parseFloat(U[1]));const Z=E.match(/Remaining Balance:\s*€(\d+\.?\d*)/i);Z&&(N=parseFloat(Z[1]));const G=E.match(/Partial Payment Notes:\s*(.+?)(?:\n\n|\n---|$)/is);G&&(A=G[1].trim())}const P=j?C+N:k.total_amount;return{...k,total_amount:P,customer_name:k.customers?.name||"Walk-in Customer",cashier_name:k.users?.username||"Unknown",partial_payment:j,partial_amount:C,remaining_amount:N,partial_notes:A}})||[];r(S)}catch(p){u(p instanceof Error?p.message:"Failed to fetch transactions")}finally{o(!1)}},g=async p=>{try{const{data:x,error:S}=await le.from("sales").select("*").eq("sale_id",p).single();if(S)throw S;if(!x)throw new Error("Transaction not found");if(!(x.notes&&(x.notes.includes("PARTIAL PAYMENT")||x.notes.includes("Amount Paid Today")||x.notes.includes("Remaining Balance"))))throw new Error("This transaction is not a partial payment");let j=x.total_amount;if(x.notes){const A=x.notes.match(/Amount Paid Today:\s*€(\d+\.?\d*)/i),P=x.notes.match(/Remaining Balance:\s*€(\d+\.?\d*)/i);if(A&&P){const E=parseFloat(A[1]),U=parseFloat(P[1]);j=E+U}}const C=x.notes?x.notes.replace(/PARTIAL PAYMENT.*$/s,"PAYMENT COMPLETED - Full amount paid"):"PAYMENT COMPLETED - Full amount paid",{error:N}=await le.from("sales").update({total_amount:j,notes:C}).eq("sale_id",p);if(N)throw N;return await h(),!0}catch(x){return u(x instanceof Error?x.message:"Failed to resolve partial payment"),!1}},m=async p=>{try{const{data:x,error:S}=await le.from("sale_items").select(`
          *,
          products (stock_quantity)
        `).eq("sale_id",p);if(S)throw S;for(const C of x||[]){const N=(C.products?.stock_quantity||0)+C.quantity,{error:A}=await le.from("products").update({stock_quantity:N}).eq("product_id",C.product_id);if(A)throw A;await le.from("inventory_movements").insert({product_id:C.product_id,quantity_change:C.quantity,movement_type:"Restock",reference_id:p})}const{error:k}=await le.from("sale_items").delete().eq("sale_id",p);if(k)throw k;const{error:j}=await le.from("sales").delete().eq("sale_id",p);if(j)throw j;return await h(),!0}catch(x){return u(x instanceof Error?x.message:"Failed to delete transaction"),!1}};return v.useEffect(()=>{h()},[]),{transactions:l,loading:i,error:d,fetchTransactions:h,deleteTransaction:m,resolvePartialPayment:g}},yd=({children:l,maxWidth:r="1400px"})=>a.jsx("div",{style:{minHeight:"100vh",background:"#f8fafc",fontFamily:"Poppins, sans-serif",padding:"20px"},children:a.jsx("div",{style:{maxWidth:r,margin:"0 auto",background:"#ffffff",borderRadius:"12px",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"},children:l})}),AS=({title:l,subtitle:r,icon:i,children:o})=>a.jsx("div",{style:{padding:"24px 32px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:o?"16px":"0"},children:[a.jsxs("div",{children:[a.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[i&&a.jsx("i",{className:i,style:{marginRight:"12px",color:"#7d8d86"}}),l]}),r&&a.jsx("p",{style:{fontSize:"16px",color:"#6b7280",margin:"0"},children:r})]}),o]})}),Qg=({children:l,className:r="",style:i={},padding:o="md",background:d="white",hover:u=!1})=>{const h={borderRadius:"12px",border:"1px solid #e5e7eb",transition:u?"all 0.2s ease":"none",...i},g={white:{background:"#ffffff"},gray:{background:"#f9fafb"}},m={sm:{padding:"12px"},md:{padding:"20px"},lg:{padding:"24px"}},p={...h,...g[d],...m[o]};return a.jsx("div",{className:r,style:p,onMouseEnter:x=>{u&&(x.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",x.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:x=>{u&&(x.currentTarget.style.boxShadow="none",x.currentTarget.style.transform="translateY(0)")},children:l})},MS=({searchTerm:l,setSearchTerm:r,paymentFilter:i,setPaymentFilter:o,dateFilter:d,setDateFilter:u,selectedDate:h,showCalendar:g,setShowCalendar:m,itemsPerPage:p,setItemsPerPage:x,onCalendarDateSelect:S,generateCalendarDays:k,calendarDate:j,setCalendarDate:C,partialPaymentFilter:N,setPartialPaymentFilter:A})=>a.jsxs(Qg,{background:"gray",padding:"md",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",alignItems:"end"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Search Transactions"}),a.jsx("input",{type:"text",placeholder:"Search by ID, customer, cashier...",value:l,onChange:P=>r(P.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Method"}),a.jsxs("select",{value:i,onChange:P=>o(P.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:"all",children:"All Methods"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Payment Type"}),a.jsxs("select",{value:N,onChange:P=>A(P.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:"all",children:"All Payments"}),a.jsx("option",{value:"full",children:"Full Payments"}),a.jsx("option",{value:"partial",children:"Partial Payments"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Date Range"}),a.jsxs("select",{value:d,onChange:P=>u(P.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:"all",children:"All Time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"Last 7 Days"}),a.jsx("option",{value:"month",children:"Last 30 Days"}),a.jsx("option",{value:"custom",children:"Custom Date"})]})]}),d==="custom"&&a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Select Date"}),a.jsx("button",{onClick:()=>m(!g),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff",cursor:"pointer",textAlign:"left"},children:h?new Date(h).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Select a date"})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Items Per Page"}),a.jsxs("select",{value:p,onChange:P=>x(Number(P.target.value)),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#ffffff"},children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]})]})]}),g&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("button",{onClick:()=>C(new Date(j.getFullYear(),j.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",margin:0},children:j.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>C(new Date(j.getFullYear(),j.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(P=>a.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:P},P))}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:k().map((P,E)=>{const U=P.getMonth()===j.getMonth(),Z=P.toDateString()===new Date().toDateString(),G=h&&P.toDateString()===new Date(h).toDateString();return a.jsx("button",{onClick:()=>S(P),style:{background:G?"#7d8d86":"transparent",color:G?"#f1f0e4":U?"#3e3f29":"#bca88d",border:Z?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:U?1:.5},children:P.getDate()},E)})}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:a.jsx("button",{onClick:()=>S(new Date),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer"},children:"Today"})})]})})]}),hi=({children:l,onClick:r,type:i="button",variant:o="primary",size:d="md",disabled:u=!1,className:h="",style:g={}})=>{const m={border:"none",borderRadius:"6px",cursor:u?"not-allowed":"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500",...g},p={primary:{background:"#7d8d86",color:"#ffffff"},secondary:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db"},danger:{background:"#ef4444",color:"#ffffff"},success:{background:"#10b981",color:"#ffffff"}},x={primary:{background:"#6a7a73"},secondary:{background:"#e5e7eb"},danger:{background:"#dc2626"},success:{background:"#059669"}},S={sm:{padding:"6px 12px",fontSize:"12px"},md:{padding:"8px 16px",fontSize:"14px"},lg:{padding:"12px 24px",fontSize:"16px"}},k={...m,...p[o],...S[d],opacity:u?.6:1};return a.jsx("button",{type:i,onClick:r,disabled:u,className:h,style:k,onMouseEnter:j=>{u||Object.assign(j.currentTarget.style,x[o])},onMouseLeave:j=>{u||Object.assign(j.currentTarget.style,p[o])},children:l})},BS=({transaction:l,onTransactionClick:r,onDeleteTransaction:i,onResolvePartialPayment:o})=>{const d=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(g),u=g=>new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=g=>{switch(g.toLowerCase()){case"cash":return"fa-solid fa-money-bill";case"card":return"fa-solid fa-credit-card";case"mobile_money":return"fa-solid fa-mobile";default:return"fa-solid fa-money-bill"}};return a.jsxs("div",{onClick:()=>r(l.sale_id),style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",background:l.partial_payment?"#fef3c7":"#ffffff",borderRadius:"8px",border:l.partial_payment?"1px solid #f59e0b":"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",position:"relative"},onMouseEnter:g=>{const m=g.currentTarget;m.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",m.style.transform="translateY(-2px)",m.style.borderColor="#7d8d86"},onMouseLeave:g=>{const m=g.currentTarget;m.style.boxShadow="none",m.style.transform="translateY(0)",m.style.borderColor="#e5e7eb"},children:[a.jsxs("div",{style:{width:"60px",textAlign:"center"},children:[a.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#7d8d86",background:"#f3f4f6",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:["#",l.sale_id.toString().slice(-6)]}),l.partial_payment&&a.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"#92400e",background:"#f59e0b",padding:"2px 6px",borderRadius:"3px",marginTop:"4px",display:"inline-block"},children:"PARTIAL"})]}),a.jsx("div",{style:{minWidth:"140px",fontSize:"14px",color:"#6b7280"},children:u(l.datetime)}),a.jsx("div",{style:{flex:1,minWidth:"120px",fontSize:"14px",color:"#374151",fontWeight:"500"},children:l.customer_name}),a.jsx("div",{style:{minWidth:"100px",fontSize:"14px",color:"#6b7280"},children:l.cashier_name}),a.jsxs("div",{style:{minWidth:"120px",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"#374151"},children:[a.jsx("i",{className:h(l.payment_method),style:{color:"#7d8d86"}}),a.jsx("span",{style:{textTransform:"capitalize"},children:l.payment_method.replace("_"," ")})]}),a.jsx("div",{style:{minWidth:"120px",textAlign:"right",fontSize:"16px",fontWeight:"600",color:l.partial_payment?"#f59e0b":"#059669"},children:l.partial_payment?a.jsxs("div",{children:[a.jsxs("div",{style:{fontSize:"14px",color:"#92400e"},children:["Paid: ",d(l.partial_amount||0)]}),a.jsxs("div",{style:{fontSize:"12px",color:"#dc2626"},children:["Owed: ",d(l.remaining_amount||0)]})]}):d(l.total_amount)}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.partial_payment&&o&&a.jsxs(hi,{variant:"success",size:"sm",onClick:g=>{g.stopPropagation(),o(l.sale_id)},style:{background:"#10b981",border:"1px solid #10b981",color:"white"},children:[a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px"}}),"Resolve"]}),a.jsxs(hi,{variant:"danger",size:"sm",onClick:g=>{g.stopPropagation(),i(l.sale_id)},children:[a.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"10px"}}),"Delete"]}),a.jsx("div",{style:{color:"#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]})},OS=({currentPage:l,totalPages:r,onPageChange:i,startIndex:o,endIndex:d,totalItems:u})=>{if(r<=1)return null;const h=()=>{const g=[];if(r<=5)for(let p=1;p<=r;p++)g.push(p);else if(l<=3){for(let p=1;p<=4;p++)g.push(p);g.push("..."),g.push(r)}else if(l>=r-2){g.push(1),g.push("...");for(let p=r-3;p<=r;p++)g.push(p)}else{g.push(1),g.push("...");for(let p=l-1;p<=l+1;p++)g.push(p);g.push("..."),g.push(r)}return g};return a.jsxs("div",{style:{background:"#f9fafb",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[a.jsxs("div",{style:{fontSize:"14px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-list"}),a.jsxs("span",{children:["Showing ",o+1,"-",Math.min(d,u)," of ",u," transactions"]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsxs(hi,{variant:"secondary",size:"sm",onClick:()=>i(l-1),disabled:l===1,children:[a.jsx("i",{className:"fa-solid fa-chevron-left"}),"Previous"]}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:h().map((g,m)=>a.jsx(gg.Fragment,{children:g==="..."?a.jsx("span",{style:{padding:"8px 12px",color:"#6b7280",fontSize:"14px"},children:"..."}):a.jsx(hi,{variant:l===g?"primary":"secondary",size:"sm",onClick:()=>i(g),style:{minWidth:"40px"},children:g})},m))}),a.jsxs(hi,{variant:"secondary",size:"sm",onClick:()=>i(l+1),disabled:l===r,children:["Next",a.jsx("i",{className:"fa-solid fa-chevron-right"})]})]})]})},LS=({isOpen:l,onClose:r,selectedDate:i,onDateSelect:o,onTodaySelect:d,calendarDate:u,onCalendarDateChange:h})=>{const g=(m,p)=>{const x=new Date(m,p,1),S=new Date(x);S.setDate(S.getDate()-x.getDay());const k=[],j=new Date(S);for(let C=0;C<42;C++)k.push(new Date(j)),j.setDate(j.getDate()+1);return k};return l?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},children:u.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsxs("div",{style:{display:"flex",gap:"8px"},children:[a.jsx("button",{onClick:()=>h(new Date(u.getFullYear(),u.getMonth()-1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:m=>{const p=m.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:m=>{const p=m.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("button",{onClick:()=>h(new Date(u.getFullYear(),u.getMonth()+1,1)),style:{background:"none",border:"none",fontSize:"16px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:m=>{const p=m.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:m=>{const p=m.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})}),a.jsx("button",{onClick:r,style:{background:"none",border:"none",fontSize:"20px",color:"#7d8d86",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:m=>{const p=m.currentTarget;p.style.background="#f3f4f6",p.style.color="#3e3f29"},onMouseLeave:m=>{const p=m.currentTarget;p.style.background="none",p.style.color="#7d8d86"},children:"×"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"16px"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(m=>a.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"8px 4px"},children:m},m)),g(u.getFullYear(),u.getMonth()).map((m,p)=>{const x=m.getMonth()===u.getMonth(),S=new Date,k=new Date(S.getFullYear(),S.getMonth(),S.getDate()),j=new Date(m.getFullYear(),m.getMonth(),m.getDate()),C=new Date(i.getFullYear(),i.getMonth(),i.getDate()),N=j.getTime()===k.getTime(),A=j.getTime()===C.getTime();return a.jsx("button",{onClick:()=>o(m),style:{background:A?"#7d8d86":"transparent",color:A?"#ffffff":x?"#1f2937":"#9ca3af",border:N?"2px solid #7d8d86":"1px solid transparent",borderRadius:"8px",padding:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",opacity:x?1:.5},onMouseEnter:P=>{if(!A){const E=P.currentTarget;E.style.background="#f3f4f6",E.style.color="#1f2937"}},onMouseLeave:P=>{if(!A){const E=P.currentTarget;E.style.background="transparent",E.style.color=x?"#1f2937":"#9ca3af"}},children:m.getDate()},p)})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"16px"},children:a.jsx("button",{onClick:d,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:m=>{const p=m.currentTarget;p.style.background="#6a7a73"},onMouseLeave:m=>{const p=m.currentTarget;p.style.background="#7d8d86"},children:"Today"})})]})}):null},IS=()=>{const l=ds(),{user:r}=Mn(),{transactions:i,loading:o,error:d,deleteTransaction:u,resolvePartialPayment:h}=DS(),[g,m]=v.useState(""),[p,x]=v.useState("all"),[S,k]=v.useState("all"),[j,C]=v.useState(null),[N,A]=v.useState("all"),[P,E]=v.useState(!1),[U,Z]=v.useState(new Date),[G,re]=v.useState(()=>{const ge=new Date;return new Date(ge.getFullYear(),ge.getMonth(),ge.getDate())}),[de,ve]=v.useState(1),[ye,Ae]=v.useState(25),[R]=v.useState("datetime"),[q]=v.useState("desc"),O=ge=>ge.filter(je=>{const Ye=!g||je.sale_id.toString().includes(g)||je.customer_name?.toLowerCase().includes(g.toLowerCase())||je.cashier_name?.toLowerCase().includes(g.toLowerCase()),Le=p==="all"||je.payment_method===p,He=()=>N==="all"?!0:N==="partial"?je.partial_payment===!0:N==="full"?!je.partial_payment:!0,yt=()=>{if(j){const z=new Date(je.datetime),ke=new Date(z.getFullYear(),z.getMonth(),z.getDate()),[Ee,Ze,nt]=j.split("-").map(Number),mt=new Date(Ee,Ze-1,nt);return ke.getTime()===mt.getTime()}if(S==="all")return!0;const Dt=new Date,dt=new Date(je.datetime),gt=new Date(Dt.getFullYear(),Dt.getMonth(),Dt.getDate()),on=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate());switch(S){case"today":return on.getTime()===gt.getTime();case"week":const z=new Date(Dt.getTime()-10080*60*1e3);return dt>=z;case"month":const ke=new Date(Dt.getTime()-720*60*60*1e3);return dt>=ke;default:return!0}};return Ye&&Le&&He()&&yt()}),se=ge=>[...ge].sort((je,Ye)=>{let Le=je[R],He=Ye[R];return R==="datetime"&&(Le=new Date(Le).getTime(),He=new Date(He).getTime()),q==="asc"?Le>He?1:-1:Le<He?1:-1}),he=O(i),I=se(he),J=Math.ceil(I.length/ye),fe=(de-1)*ye,Se=fe+ye,w=I.slice(fe,Se),K=()=>{const ge=U.getFullYear(),je=U.getMonth(),Ye=new Date(ge,je,1),Le=new Date(Ye);Le.setDate(Le.getDate()-Ye.getDay());const He=[];for(let yt=0;yt<42;yt++){const Dt=new Date(Le);Dt.setDate(Le.getDate()+yt),He.push(Dt)}return He},ce=ge=>{const je=new Date(ge.getFullYear(),ge.getMonth(),ge.getDate());re(je);const Ye=je.getFullYear(),Le=String(je.getMonth()+1).padStart(2,"0"),He=String(je.getDate()).padStart(2,"0"),yt=`${Ye}-${Le}-${He}`;C(yt),k("custom"),E(!1)},ue=()=>{const ge=new Date,je=new Date(ge.getFullYear(),ge.getMonth(),ge.getDate());re(je);const Ye=je.getFullYear(),Le=String(je.getMonth()+1).padStart(2,"0"),He=String(je.getDate()).padStart(2,"0"),yt=`${Ye}-${Le}-${He}`;C(yt),k("custom"),E(!1)},we=ge=>{l(`/transaction/${ge}`)},M=async ge=>{window.confirm("Are you sure you want to delete this transaction? This action cannot be undone and will restore the stock for all items in this transaction.")&&await u(ge)&&alert("Transaction deleted successfully!")},Q=async ge=>{window.confirm("Are you sure you want to mark this partial payment as resolved? This will update the transaction to show it as fully paid.")&&await h(ge)&&alert("Partial payment resolved successfully!")},oe=ge=>{ve(ge),window.scrollTo({top:0,behavior:"smooth"})},be=ge=>{Ae(ge),ve(1)};return v.useEffect(()=>{ve(1)},[g,p,S,j,R,q]),o?a.jsx(yd,{children:a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transactions..."]})})}):d?a.jsx(yd,{children:a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"18px",color:"#ef4444",textAlign:"center"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"12px",display:"block"}}),d]})})}):a.jsxs(yd,{children:[a.jsx(AS,{title:"Transactions",subtitle:"View and manage all sales transactions",icon:"fa-solid fa-receipt",children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[a.jsxs("div",{onClick:()=>E(!0),style:{background:"#3e3f29",border:"1px solid #7d8d86",borderRadius:"8px",padding:"12px 16px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",color:"#f1f0e4",fontSize:"14px",fontWeight:"500"},onMouseEnter:ge=>{const je=ge.currentTarget;je.style.borderColor="#bca88d",je.style.boxShadow="0 2px 8px rgba(62, 63, 41, 0.2)"},onMouseLeave:ge=>{const je=ge.currentTarget;je.style.borderColor="#7d8d86",je.style.boxShadow="none"},children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{fontSize:"16px",color:"#bca88d"}}),a.jsx("span",{style:{color:"#bca88d"},children:G.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#7d8d86",fontSize:"14px",flexWrap:"wrap"},children:[a.jsx("i",{className:"fa-solid fa-receipt"}),a.jsxs("span",{children:["Showing ",fe+1,"-",Math.min(Se,I.length)," of ",I.length," transactions",j&&a.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","on ",new Date(j).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),S!=="all"&&!j&&a.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:[" ","(",S==="today"?"Today":S==="week"?"Last 7 days":S==="month"?"Last 30 days":S,")"]})]})]})]})}),a.jsxs("div",{style:{padding:"24px 32px",flex:1},children:[a.jsx(MS,{searchTerm:g,setSearchTerm:m,paymentFilter:p,setPaymentFilter:x,dateFilter:S,setDateFilter:k,selectedDate:j,showCalendar:P,setShowCalendar:E,itemsPerPage:ye,setItemsPerPage:be,onCalendarDateSelect:ce,generateCalendarDays:K,calendarDate:U,setCalendarDate:Z,partialPaymentFilter:N,setPartialPaymentFilter:A}),a.jsx(Qg,{children:w.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:w.map(ge=>a.jsx(BS,{transaction:ge,onTransactionClick:we,onDeleteTransaction:M,onResolvePartialPayment:Q},ge.sale_id))}):a.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-receipt",style:{fontSize:"48px",marginBottom:"16px",display:"block",color:"#d1d5db"}}),a.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",margin:"0 0 8px 0"},children:"No transactions found"}),a.jsx("p",{style:{fontSize:"14px",margin:0},children:g||p!=="all"||N!=="all"||S!=="all"||G?"Try adjusting your filters to see more results.":"No transactions have been recorded yet."})]})}),a.jsx(OS,{currentPage:de,totalPages:J,onPageChange:oe,startIndex:fe,endIndex:Se,totalItems:I.length}),a.jsx(LS,{isOpen:P,onClose:()=>E(!1),selectedDate:G,onDateSelect:ce,onTodaySelect:ue,calendarDate:U,onCalendarDateChange:Z})]})]})},US=()=>{const{transactionId:l}=Hy(),r=ds(),[i,o]=v.useState(null),[d,u]=v.useState([]),[h,g]=v.useState(!0),[m,p]=v.useState(!1),[x,S]=v.useState(!1),[k,j]=v.useState({payment_method:"",customer_id:null,notes:""}),[C,N]=v.useState([]),[A,P]=v.useState({});v.useEffect(()=>{l&&(E(),U())},[l]);const E=async()=>{try{g(!0);const O=parseInt(l?.replace("TXN-","")||"0");if(!O){console.error("Invalid transaction ID"),r("/sales");return}const{data:se,error:he}=await le.from("sales").select(`
          *,
          customers (name),
          users (username)
        `).eq("sale_id",O).single();if(he){console.error("Error fetching transaction:",he),r("/sales");return}const I={...se,customer_name:se.customers?.name||null,cashier_name:se.users?.username||null};o(I);const{data:J,error:fe}=await le.from("sale_items").select(`
          *,
          products (
            name,
            category,
            weight_unit,
            price_per_unit,
            is_weighted,
            image_url
          )
        `).eq("sale_id",O);if(fe)console.error("Error fetching transaction items:",fe);else{const Se=(J||[]).map(w=>(w.products?.is_weighted&&console.log("Weighted item data:",{name:w.products.name,weight:w.weight,weight_unit:w.products.weight_unit,price_per_unit:w.products.price_per_unit,calculated_price:w.calculated_price,price_each:w.price_each}),{sale_item_id:w.sale_item_id,product_id:w.product_id,quantity:w.quantity,unit_price:w.price_each,total_price:w.calculated_price||(w.products?.is_weighted&&w.weight&&w.products?.price_per_unit?w.weight*w.products.price_per_unit:w.quantity*w.price_each),product_name:w.products?.name||"Unknown Product",product_category:w.products?.category||"Unknown Category",product_image:w.products?.image_url||null,weight:w.weight||void 0,weight_unit:w.products?.weight_unit||void 0,price_per_unit:w.products?.price_per_unit||void 0,is_weighted:w.products?.is_weighted||!1}));u(Se)}}catch(O){console.error("Error fetching transaction details:",O),r("/sales")}finally{g(!1)}},U=async()=>{try{const{data:O,error:se}=await le.from("customers").select("id, name").order("name");se?console.error("Error fetching customers:",se):N(O||[])}catch(O){console.error("Error fetching customers:",O)}},Z=()=>{r("/")},G=()=>{r(`/sales?transaction=${l}`)},re=async()=>{if(i)try{S(!0);const O=parseInt(l?.replace("TXN-","")||"0"),{error:se}=await le.from("sales").update({payment_method:k.payment_method,customer_id:k.customer_id,notes:k.notes}).eq("sale_id",O);if(se){console.error("Error updating transaction:",se),alert("Failed to update transaction. Please try again.");return}await E(),p(!1),alert("Transaction updated successfully!")}catch(O){console.error("Error saving transaction:",O),alert("Failed to save changes. Please try again.")}finally{S(!1)}},de=()=>{p(!1),j({payment_method:"",customer_id:null,notes:""}),P({})},ve=(O,se)=>{se<0||P(he=>({...he,[O]:se}))},ye=async O=>{if(confirm("Are you sure you want to remove this item from the transaction?"))try{const{error:se}=await le.from("sale_items").delete().eq("sale_item_id",O);if(se){console.error("Error removing item:",se),alert("Failed to remove item. Please try again.");return}await E(),alert("Item removed successfully!")}catch(se){console.error("Error removing item:",se),alert("Failed to remove item. Please try again.")}},Ae=async(O,se)=>{if(se<=0){ye(O);return}try{const he=d.find(fe=>fe.sale_item_id===O);if(!he)return;const I=se*he.unit_price,{error:J}=await le.from("sale_items").update({quantity:se,total_price:I}).eq("sale_item_id",O);if(J){console.error("Error updating item quantity:",J),alert("Failed to update item quantity. Please try again.");return}await E(),P(fe=>{const Se={...fe};return delete Se[O],Se}),alert("Item quantity updated successfully!")}catch(he){console.error("Error updating item quantity:",he),alert("Failed to update item quantity. Please try again.")}},R=async()=>{if(!(!i||!window.confirm(`Are you sure you want to delete Transaction #${l}?

This will:
• Remove all items from this transaction
• Restore stock quantities for all items
• Delete the transaction record

This action cannot be undone!`)))try{const se=parseInt(l?.replace("TXN-","")||"0");for(const J of d){const{data:fe,error:Se}=await le.from("products").select("stock_quantity").eq("product_id",J.product_id).single();if(Se){console.error("Error fetching product stock:",Se);continue}const{error:w}=await le.from("products").update({stock_quantity:fe.stock_quantity+J.quantity,last_updated:new Date().toISOString()}).eq("product_id",J.product_id);w&&console.error("Error restoring stock:",w);const{error:K}=await le.from("inventory_movements").insert([{product_id:J.product_id,quantity_change:J.quantity,movement_type:"Transaction Deletion",reference_id:se,notes:`Stock restored from deleted transaction #${l}`}]);K&&console.error("Error creating inventory movement:",K)}const{error:he}=await le.from("sale_items").delete().eq("sale_id",se);if(he){console.error("Error deleting sale items:",he),alert("Failed to delete transaction items. Please try again.");return}const{error:I}=await le.from("sales").delete().eq("sale_id",se);if(I){console.error("Error deleting sale:",I),alert("Failed to delete transaction. Please try again.");return}alert("Transaction deleted successfully!"),r("/")}catch(se){console.error("Error deleting transaction:",se),alert("Failed to delete transaction. Please try again.")}},q=O=>new Date(O).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return h?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{fontSize:"20px",color:"#7d8d86",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-spinner",style:{animation:"spin 1s linear infinite",fontSize:"24px"}}),"Loading transaction details..."]})}):i?a.jsxs("div",{style:{padding:"0"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[a.jsx("button",{onClick:Z,style:{background:"none",border:"none",fontSize:"24px",color:"#7d8d86",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease"},onMouseEnter:O=>{O.target.style.background="#7d8d86",O.target.style.color="#f1f0e4"},onMouseLeave:O=>{O.target.style.background="none",O.target.style.color="#7d8d86"},children:a.jsx("i",{className:"fa-solid fa-arrow-left"})}),a.jsxs("div",{children:[a.jsxs("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#3e3f29",margin:"0 0 8px 0"},children:["Transaction #",l]}),a.jsx("p",{style:{fontSize:"16px",color:"#7d8d86",margin:0},children:q(i.datetime)})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px"},children:[a.jsxs("button",{onClick:R,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:O=>{O.target.style.background="#dc2626"},onMouseLeave:O=>{O.target.style.background="#ef4444"},children:[a.jsx("i",{className:"fa-solid fa-trash",style:{fontSize:"14px"}}),"Delete Transaction"]}),m?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:re,disabled:x,style:{background:x?"#9ca3af":"#10b981",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:O=>{x||(O.target.style.background="#059669")},onMouseLeave:O=>{x||(O.target.style.background="#10b981")},children:[a.jsx("i",{className:`fa-solid ${x?"fa-spinner":"fa-save"}`,style:{fontSize:"14px",animation:x?"spin 1s linear infinite":"none"}}),x?"Saving...":"Save"]}),a.jsxs("button",{onClick:de,disabled:x,style:{background:"#ef4444",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:O=>{x||(O.target.style.background="#dc2626")},onMouseLeave:O=>{x||(O.target.style.background="#ef4444")},children:[a.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"14px"}}),"Cancel"]})]}):a.jsxs("button",{onClick:G,style:{background:"#7d8d86",color:"#f1f0e4",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:O=>{O.target.style.background="#bca88d"},onMouseLeave:O=>{O.target.style.background="#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-edit",style:{fontSize:"14px"}}),"Edit"]})]})]}),a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Total Amount"}),a.jsxs("p",{style:{fontSize:"28px",fontWeight:"bold",color:"#3e3f29",margin:0},children:["€",i.total_amount.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Payment Method"}),m?a.jsxs("select",{value:k.payment_method,onChange:O=>j({...k,payment_method:O.target.value}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"credit",children:"Credit"})]}):a.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0,textTransform:"capitalize"},children:i.payment_method})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Customer"}),m?a.jsxs("select",{value:k.customer_id||"",onChange:O=>j({...k,customer_id:O.target.value?parseInt(O.target.value):null}),style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",width:"100%",cursor:"pointer"},children:[a.jsx("option",{value:"",children:"Walk-in Customer"}),C.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]}):a.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:i.customer_name||"Walk-in Customer"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Cashier"}),a.jsx("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:i.cashier_name||"System"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Items Count"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#3e3f29",margin:0},children:[d.length," items"]})]}),i.discount_applied&&i.discount_applied>0&&a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Discount Applied"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#ef4444",margin:0},children:["-€",i.discount_applied.toFixed(2)]})]})]}),i.partial_payment&&a.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px",marginTop:"24px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[a.jsx("i",{className:"fa-solid fa-credit-card",style:{color:"#f59e0b",fontSize:"16px"}}),a.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#92400e",margin:0},children:"Partial Payment Transaction"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Amount Paid"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#059669",margin:0},children:["€",i.partial_amount?.toFixed(2)||"0.00"]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Remaining Balance"}),a.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#dc2626",margin:0},children:["€",i.remaining_amount?.toFixed(2)||"0.00"]})]}),i.partial_notes&&a.jsxs("div",{style:{gridColumn:"1 / -1"},children:[a.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#92400e",margin:"0 0 4px 0"},children:"Notes"}),a.jsx("p",{style:{fontSize:"14px",color:"#92400e",margin:0,fontStyle:"italic"},children:i.partial_notes})]})]})]}),a.jsxs("div",{style:{marginTop:"24px"},children:[a.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#7d8d86",margin:"0 0 8px 0"},children:"Notes"}),m?a.jsx("textarea",{value:k.notes,onChange:O=>j({...k,notes:O.target.value}),placeholder:"Add transaction notes...",style:{width:"100%",minHeight:"80px",fontSize:"14px",color:"#3e3f29",background:"#f9fafb",border:"2px solid #e5e7eb",borderRadius:"8px",padding:"12px",resize:"vertical",fontFamily:"inherit"}}):a.jsx("p",{style:{fontSize:"16px",color:"#3e3f29",margin:0,fontStyle:i.notes?"normal":"italic",opacity:i.notes?1:.6},children:i.notes||"No notes added"})]})]}),a.jsxs("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"24px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 4px 12px rgba(62, 63, 41, 0.1)"},children:[a.jsxs("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#3e3f29",margin:"0 0 24px 0",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("i",{className:"fa-solid fa-shopping-cart",style:{fontSize:"20px"}}),"Transaction Items"]}),d.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:d.map((O,se)=>{const he=A[O.sale_item_id]!==void 0,I=he?A[O.sale_item_id]:O.quantity,J=O.is_weighted&&O.weight?O.total_price||O.weight*(O.price_per_unit||0):I*O.unit_price;return a.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",border:"1px solid rgba(125, 141, 134, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease"},onMouseEnter:fe=>{fe.target.style.boxShadow="0 4px 12px rgba(62, 63, 41, 0.1)",fe.target.style.transform="translateY(-2px)"},onMouseLeave:fe=>{fe.target.style.boxShadow="none",fe.target.style.transform="translateY(0)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:O.product_image?`url(${O.product_image})`:O.is_weighted?"#f59e0b":"#7d8d86",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"#f1f0e4",fontSize:"18px",fontWeight:"bold",position:"relative",border:"2px solid rgba(125, 141, 134, 0.2)"},children:!O.product_image&&a.jsxs(a.Fragment,{children:[O.is_weighted&&O.weight?`${O.weight}${O.weight_unit}`:O.quantity,O.is_weighted&&a.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",width:"16px",height:"16px",borderRadius:"50%",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"#ffffff"},children:"⚖️"})]})}),m&&!O.is_weighted&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("button",{onClick:()=>ve(O.sale_item_id,I-1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),a.jsx("div",{style:{minWidth:"48px",height:"48px",borderRadius:"12px",background:he?"#fef3c7":"#7d8d86",display:"flex",alignItems:"center",justifyContent:"center",color:he?"#92400e":"#f1f0e4",fontSize:"18px",fontWeight:"bold",border:he?"2px solid #f59e0b":"none"},children:I}),a.jsx("button",{onClick:()=>ve(O.sale_item_id,I+1),style:{width:"32px",height:"32px",borderRadius:"8px",background:"#10b981",color:"#f1f0e4",border:"none",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),he&&a.jsx("button",{onClick:()=>Ae(O.sale_item_id,I),style:{padding:"6px 12px",borderRadius:"6px",background:"#3b82f6",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer"},children:"Save"}),a.jsx("button",{onClick:()=>ye(O.sale_item_id),style:{padding:"6px 12px",borderRadius:"6px",background:"#ef4444",color:"#f1f0e4",border:"none",fontSize:"12px",fontWeight:"500",cursor:"pointer",marginLeft:"8px"},children:"Remove"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{fontSize:"16px",fontWeight:"600",color:"#3e3f29",margin:"0 0 4px 0"},children:O.product_name}),a.jsxs("p",{style:{fontSize:"14px",color:"#7d8d86",margin:0},children:[O.product_category," • ",O.is_weighted&&O.weight&&O.weight_unit&&O.price_per_unit?`${O.weight} ${O.weight_unit} • €${O.price_per_unit.toFixed(2)}/${O.weight_unit}`:`€${O.unit_price.toFixed(2)} each`]}),O.is_weighted&&m&&a.jsx("p",{style:{fontSize:"12px",color:"#f59e0b",margin:"4px 0 0 0",fontStyle:"italic"},children:"Weighted items cannot be edited after sale"})]})]}),a.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:he?"#f59e0b":"#3e3f29"},children:["€",J.toFixed(2)]})]},se)})}):a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-box",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:"No items found for this transaction"})]})]})]}):a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:a.jsxs("div",{style:{textAlign:"center",color:"#7d8d86"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"16px",margin:0},children:"Transaction not found"})]})})};function qS({isOpen:l,onClose:r,vaultEntries:i}){const[o,d]=v.useState("weekly"),[u,h]=v.useState("2025-W37"),[g,m]=v.useState(null),[p,x]=v.useState(!1),S=C=>`€${C.toFixed(2)}`,k=async()=>{try{x(!0);const C=new Date;let N,A;if(o==="weekly"){const oe=C.getDay(),be=C.getDate()-oe+(oe===0?-6:1);N=new Date(C.setDate(be)),N.setHours(0,0,0,0),A=new Date(N),A.setDate(A.getDate()+6),A.setHours(23,59,59,999)}else N=new Date(C.getFullYear(),C.getMonth(),1),A=new Date(C.getFullYear(),C.getMonth()+1,0,23,59,59,999);const{data:P,error:E}=await le.from("sales").select("total_amount, discount_applied, cashier_id").gte("datetime",N.toISOString()).lte("datetime",A.toISOString());if(E)throw E;const U=P?.reduce((oe,be)=>oe+(be.total_amount||0),0)||0,Z=P?.reduce((oe,be)=>oe+(be.discount_applied||0),0)||0,G=P?.length||0,re=G>0?U/G:0,{data:de,error:ve}=await le.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(category),
          sales!inner(datetime)
        `).gte("sales.datetime",N.toISOString()).lte("sales.datetime",A.toISOString());if(ve)throw ve;const ye=new Map;de?.forEach(oe=>{const be=oe.products?.category||"Other",ge=oe.quantity*oe.price_each,je=ye.get(be)||{revenue:0,units:0};ye.set(be,{revenue:je.revenue+ge,units:je.units+oe.quantity})});const Ae=Array.from(ye.entries()).map(([oe,be])=>({name:oe,revenue:be.revenue,percentage:U>0?Number((be.revenue/U*100).toFixed(1)):0,units:be.units})).sort((oe,be)=>be.revenue-oe.revenue),{data:R,error:q}=await le.from("sale_items").select(`
          quantity,
          price_each,
          products!inner(name),
          sales!inner(datetime)
        `).gte("sales.datetime",N.toISOString()).lte("sales.datetime",A.toISOString());if(q)throw q;const O=new Map;R?.forEach(oe=>{const be=oe.products?.name||"Unknown Product",ge=oe.quantity*oe.price_each,je=O.get(be)||{units:0,revenue:0};O.set(be,{units:je.units+oe.quantity,revenue:je.revenue+ge})});const se=Array.from(O.entries()).map(([oe,be])=>({name:oe,...be})).sort((oe,be)=>be.revenue-oe.revenue).slice(0,10).map((oe,be)=>({rank:be+1,...oe})),{data:he,error:I}=await le.from("products").select("name");if(I)throw I;const fe=(he?.map(oe=>{const be=O.get(oe.name);return{name:oe.name,units:be?.units||0,revenue:be?.revenue||0}})||[]).sort((oe,be)=>oe.revenue-be.revenue).slice(0,10).map((oe,be)=>({rank:be+1,...oe})),{data:Se,error:w}=await le.from("products").select("name, stock_quantity, reorder_level");if(w)throw w;const K=Se?.filter(oe=>oe.stock_quantity<=oe.reorder_level).map(oe=>({product:oe.name,current:oe.stock_quantity,reorder:oe.reorder_level,urgent:oe.stock_quantity<=oe.reorder_level*.5}))||[],ce=Se?.filter(oe=>oe.stock_quantity===0).map(oe=>({product:oe.name,lastStock:"N/A",expectedDelivery:"TBD"}))||[],{data:ue,error:we}=await le.from("sales").select(`
          total_amount,
          cashier_id,
          users!inner(username)
        `).gte("datetime",N.toISOString()).lte("datetime",A.toISOString());if(we)throw we;const M=new Map;ue?.forEach(oe=>{const be=oe.cashier_id,ge=oe.users?.username||"Unknown",je=M.get(be)||{name:ge,revenue:0,transactions:0};M.set(be,{name:ge,revenue:je.revenue+(oe.total_amount||0),transactions:je.transactions+1})});const Q=Array.from(M.values()).map(oe=>({name:oe.name,revenue:oe.revenue,transactions:oe.transactions,avgTransaction:oe.transactions>0?oe.revenue/oe.transactions:0,hours:40,accuracy:99}));m({kpis:{totalSales:U,transactions:G,avgTransaction:re,discounts:Z},categories:Ae,topProducts:se,leastSoldProducts:fe,lowStock:K,outOfStock:ce,staff:Q})}catch(C){console.error("Error fetching report data:",C)}finally{x(!1)}};v.useEffect(()=>{l&&k()},[l,o,u]);const j=()=>{const C=window.open("","_blank"),N=document.getElementById("sales-report-content").innerHTML;C.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>LandM Store Sales Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
            th { background-color: #f5f5f5; }
            .urgent { color: red; font-weight: bold; }
            .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0; }
            .kpi-card { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
            h1, h2, h3 { color: #333; }
            .print-only { display: block; }
          </style>
        </head>
        <body>
          ${N}
          <script>window.print();<\/script>
        </body>
      </html>
    `)};return l?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"900px",width:"95%",maxHeight:"80vh",overflowY:"auto",color:"#3e3f29"},children:[p&&a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{fontSize:"24px",marginBottom:"20px"}}),a.jsx("p",{children:"Loading report data..."})]}),!p&&!g&&a.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#3e3f29"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{fontSize:"24px",marginBottom:"20px",color:"#dc3545"}}),a.jsx("p",{children:"Unable to load report data. Please try again."}),a.jsx("button",{onClick:r,style:{background:"#7d8d86",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"8px",marginTop:"20px",cursor:"pointer"},children:"Close"})]}),!p&&g&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[a.jsx("i",{className:"fa-solid fa-chart-line",style:{marginRight:"10px",color:"#7d8d86"}}),"Sales Reports"]}),a.jsx("button",{onClick:r,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:C=>{C.currentTarget.style.background="#7d8d86",C.currentTarget.style.color="#ffffff",C.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:C=>{C.currentTarget.style.background="none",C.currentTarget.style.color="#3e3f29",C.currentTarget.style.transform="rotate(0deg)"},children:"×"})]}),a.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"30px",flexWrap:"wrap",alignItems:"center"},children:[a.jsxs("select",{style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:o,onChange:C=>d(C.target.value),children:[a.jsx("option",{value:"weekly",children:"Weekly Report"}),a.jsx("option",{value:"monthly",children:"Monthly Report"})]}),a.jsx("input",{type:"week",style:{padding:"10px 15px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"14px",outline:"none"},value:u,onChange:C=>h(C.target.value)}),a.jsxs("button",{onClick:k,disabled:p,style:{background:p?"#cccccc":"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:p?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:C=>{p||(C.currentTarget.style.background="#3e3f29",C.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:C=>{p||(C.currentTarget.style.background="#7d8d86",C.currentTarget.style.transform="translateY(0)")},children:[a.jsx("i",{className:`fa-solid ${p?"fa-spinner fa-spin":"fa-refresh"}`}),p?"Loading...":"Refresh Data"]}),a.jsxs("button",{onClick:j,style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"10px",padding:"10px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:C=>{C.currentTarget.style.background="#3e3f29",C.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:C=>{C.currentTarget.style.background="#7d8d86",C.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-print"}),"Print Report"]})]}),a.jsxs("div",{id:"sales-report-content",style:{color:"#3e3f29"},children:[a.jsxs("div",{style:{borderBottom:"2px solid rgba(125, 141, 134, 0.3)",paddingBottom:"20px",marginBottom:"30px"},children:[a.jsxs("h1",{style:{color:"#3e3f29",fontSize:"28px",fontWeight:"700",marginBottom:"10px"},children:[a.jsx("i",{className:"fa-solid fa-file-invoice",style:{marginRight:"10px"}}),"LandM Store Sales Report"]}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px"},children:"Reporting Period: Week 37: 9-15 September 2025"})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-chart-bar",style:{marginRight:"10px"}}),"1. Overview (KPIs)"]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Sales"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:S(g.kpis.totalSales)})]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Transactions"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:g.kpis.transactions.toLocaleString()})]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Avg Transaction"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:S(g.kpis.avgTransaction)})]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",fontWeight:"600",marginBottom:"5px"},children:"Total Discounts"}),a.jsx("p",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:S(g.kpis.discounts)})]})]})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-shopping-cart",style:{marginRight:"10px"}}),"2. Sales Breakdown"]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Sales by Category"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Category"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"% of Total"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"})]})}),a.jsx("tbody",{children:g.categories.map((C,N)=>a.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:C.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:S(C.revenue)}),a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[C.percentage,"%"]}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:C.units})]},N))})]})})]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Top 10 Products Sold"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Rank"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),a.jsx("tbody",{children:g.topProducts.map(C=>a.jsxs("tr",{style:{background:C.rank%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:["#",C.rank]}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:C.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:C.units}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:S(C.revenue)})]},C.rank))})]})})]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Least Sold Products"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Units Sold"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue"})]})}),a.jsx("tbody",{children:g.leastSoldProducts.map((C,N)=>a.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:C.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:C.units}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:S(C.revenue)})]},C.rank))})]})})]})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-warehouse",style:{marginRight:"10px"}}),"3. Inventory Alerts"]}),a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{color:"#dc3545"}}),"Low Stock Products"]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Current Stock"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Reorder Level"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Status"})]})}),a.jsx("tbody",{children:g.lowStock.map((C,N)=>a.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:C.product}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:C.current}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:C.reorder}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29"},children:C.urgent&&a.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:"URGENT"})})]},N))})]})})]}),g.outOfStock.length>0&&a.jsxs("div",{style:{marginBottom:"30px"},children:[a.jsxs("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-box",style:{color:"#dc3545"}}),"Out of Stock Products"]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Product"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Last Stock Date"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#3e3f29",fontWeight:"600"},children:"Expected Delivery"})]})}),a.jsx("tbody",{children:g.outOfStock.map((C,N)=>a.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29"},children:C.product}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:C.lastStock}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"center",color:"#7d8d86"},children:C.expectedDelivery})]},N))})]})})]})]}),a.jsxs("section",{style:{marginBottom:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-users",style:{marginRight:"10px"}}),"4. Staff Performance"]}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid rgba(125, 141, 134, 0.3)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"rgba(125, 141, 134, 0.1)"},children:[a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"left",color:"#3e3f29",fontWeight:"600"},children:"Cashier"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Revenue Handled"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Transactions"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Avg Transaction"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Hours"}),a.jsx("th",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29",fontWeight:"600"},children:"Accuracy"})]})}),a.jsx("tbody",{children:g.staff.map((C,N)=>a.jsxs("tr",{style:{background:N%2===0?"rgba(125, 141, 134, 0.05)":"transparent"},children:[a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",color:"#3e3f29",fontWeight:"600"},children:C.name}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:S(C.revenue)}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:C.transactions}),a.jsx("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:S(C.avgTransaction)}),a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[C.hours,"h"]}),a.jsxs("td",{style:{border:"1px solid rgba(125, 141, 134, 0.3)",padding:"12px",textAlign:"right",color:"#3e3f29"},children:[C.accuracy,"%"]})]},N))})]})})]}),a.jsxs("section",{style:{borderTop:"2px solid rgba(125, 141, 134, 0.3)",paddingTop:"20px",marginTop:"40px"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:[a.jsx("i",{className:"fa-solid fa-file-text",style:{marginRight:"10px"}}),"5. Report Footer"]}),a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",padding:"20px",borderRadius:"10px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"10px"},children:"LandM Store"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Unit 2 Glenmore Park, Dundalk, Co. Louth"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"Phone: 087 797 0412"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:"VAT Number: IE1234567A"})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[a.jsx("strong",{children:"Reporting Period:"})," Week 37: 9-15 September 2025"]}),a.jsxs("p",{style:{color:"#7d8d86",fontSize:"14px",margin:"5px 0"},children:[a.jsx("strong",{children:"Generated on:"})," ",new Date().toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),a.jsx("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid rgba(125, 141, 134, 0.2)"},children:a.jsx("p",{style:{fontSize:"12px",color:"#7d8d86",fontStyle:"italic",margin:0},children:"This report was automatically generated by the LandM Store POS System. For questions or clarifications, contact the store manager."})})]})]})]})]})]})}):null}const $S=({isOpen:l,onClose:r})=>{const{user:i}=Mn(),[o,d]=v.useState(""),[u,h]=v.useState(""),[g,m]=v.useState(""),[p,x]=v.useState(!1),[S,k]=v.useState(null),[j,C]=v.useState([]),[N,A]=v.useState(!1),[P,E]=v.useState(!1),[U,Z]=v.useState(!1),[G,re]=v.useState({title:"",username:"",password:"",website:""}),[de,ve]=v.useState(new Set),[ye,Ae]=v.useState(null),[R,q]=v.useState(!1);v.useEffect(()=>{l&&(d(""),h(""),m(""),x(!1),k(null),C([]),A(!1),E(!1),Z(!1),ve(new Set),Ae(null),q(!1),re({title:"",username:"",password:"",website:""}))},[l]);const O=M=>{o.length<4&&(d(Q=>Q+M),h(""),m(""))},se=()=>{d(""),h(""),m("")},he=async M=>{if(i)try{const Q=M,{data:oe,error:be}=await le.from("vault").insert([{owner_id:i.user_id,pin_hash:Q}]).select();if(be)throw be;k(oe[0].vault_id),h("✓ Vault created successfully!"),m("success"),x(!0)}catch(Q){console.error("Error creating vault:",Q),h("✗ Failed to create vault. Try again."),m("error")}},I=async M=>{if(i)try{const{data:Q,error:oe}=await le.from("vault").select("vault_id, pin_hash").eq("owner_id",i.user_id).single();if(oe){if(oe.code==="PGRST116"){E(!0),h("Creating your vault..."),m("success"),await he(M);return}throw oe}Q.pin_hash===M?(k(Q.vault_id),h("✓ Access Granted! Vault Unlocked"),m("success"),x(!0),await J(Q.vault_id)):(h("✗ Incorrect PIN. Try again."),m("error"),setTimeout(()=>se(),1e3))}catch(Q){console.error("Error verifying PIN:",Q),h("✗ Failed to access vault. Try again."),m("error")}},J=async M=>{try{const{data:Q,error:oe}=await le.from("vault_entries").select("entry_id, label, email, password_enc, link, created_at").eq("vault_id",M).order("created_at",{ascending:!1});if(oe)throw oe;console.log("Raw data from database:",Q),Q.length>0&&(console.log("First entry password_enc:",Q[0].password_enc),console.log("Type of password_enc:",typeof Q[0].password_enc));const be=Q.map(ge=>({...ge,password:ge.password_enc||"No password"}));C(be),A(!0)}catch(Q){console.error("Error fetching vault entries:",Q)}},fe=async()=>{if(!S||!G.title||!G.password){h("✗ Title and password are required"),m("error");return}try{const{data:M,error:Q}=await le.from("vault_entries").insert([{vault_id:S,label:G.title,email:G.username,password_enc:G.password,link:G.website}]).select();if(Q)throw Q;await J(S),re({title:"",username:"",password:"",website:""}),Z(!1),h("✓ Password saved successfully!"),m("success")}catch(M){console.error("Error saving entry:",M),h("✗ Failed to save password. Try again."),m("error")}},Se=M=>{ve(Q=>{const oe=new Set(Q);return oe.has(M)?oe.delete(M):oe.add(M),oe})},w=async(M,Q)=>{try{await navigator.clipboard.writeText(M),h(`✓ ${Q} copied to clipboard!`),m("success"),setTimeout(()=>{h(""),m("")},2e3)}catch{h(`✗ Failed to copy ${Q}`),m("error"),setTimeout(()=>{h(""),m("")},2e3)}},K=M=>{Ae(M)},ce=async M=>{if(S)try{const{error:Q}=await le.from("vault_entries").delete().eq("entry_id",M).eq("vault_id",S);if(Q)throw Q;await J(S),Ae(null),h("✓ Password deleted successfully!"),m("success"),setTimeout(()=>{h(""),m("")},2e3)}catch(Q){console.error("Error deleting entry:",Q),h("✗ Failed to delete password. Try again."),m("error"),setTimeout(()=>{h(""),m("")},2e3)}},ue=()=>{o.length===4&&I(o)},we=M=>{const Q=M.key;Q>="0"&&Q<="9"?O(Q):Q==="Backspace"||Q==="Delete"?o.length>0&&d(oe=>oe.slice(0,-1)):Q==="Enter"?ue():Q==="Escape"&&r()};return l?a.jsxs(a.Fragment,{children:[!p&&a.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"400px",width:"90%",textAlign:"center"},onKeyDown:we,tabIndex:-1,children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",border:"1px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29"},children:[a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"30px"},children:P?"Creating your vault...":"Enter your 4-digit PIN"}),a.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"30px"},children:[0,1,2,3].map(M=>a.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"2px solid rgba(125, 141, 134, 0.3)",background:M<o.length?"linear-gradient(135deg, #7d8d86, #3e3f29)":"transparent",borderColor:M<o.length?"#3e3f29":"rgba(125, 141, 134, 0.3)",transform:M<o.length?"scale(1.1)":"scale(1)",transition:"all 0.3s ease"}},M))}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"15px",marginBottom:"20px"},children:[[1,2,3,4,5,6,7,8,9].map(M=>a.jsx("button",{onClick:()=>O(M.toString()),style:{width:"70px",height:"70px",border:"none",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)"},onMouseEnter:Q=>{Q.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",Q.currentTarget.style.color="#f1f0e4",Q.currentTarget.style.transform="translateY(-2px)",Q.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:Q=>{Q.currentTarget.style.background="#ffffff",Q.currentTarget.style.color="#3e3f29",Q.currentTarget.style.transform="translateY(0)",Q.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:M},M)),a.jsx("button",{onClick:()=>O("0"),style:{width:"70px",height:"70px",border:"none",borderRadius:"50%",background:"#ffffff",border:"2px solid rgba(125, 141, 134, 0.2)",color:"#3e3f29",fontSize:"24px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(62, 63, 41, 0.1)",gridColumn:"2"},onMouseEnter:M=>{M.currentTarget.style.background="linear-gradient(135deg, #7d8d86, #3e3f29)",M.currentTarget.style.color="#f1f0e4",M.currentTarget.style.transform="translateY(-2px)",M.currentTarget.style.boxShadow="0 6px 12px rgba(62, 63, 41, 0.15)"},onMouseLeave:M=>{M.currentTarget.style.background="#ffffff",M.currentTarget.style.color="#3e3f29",M.currentTarget.style.transform="translateY(0)",M.currentTarget.style.boxShadow="0 4px 8px rgba(62, 63, 41, 0.1)"},children:"0"})]}),a.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[a.jsx("button",{onClick:se,style:{padding:"12px 24px",border:"none",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",background:"transparent",color:"#7d8d86",border:"2px solid rgba(125, 141, 134, 0.3)"},onMouseEnter:M=>{M.currentTarget.style.background="rgba(125, 141, 134, 0.1)",M.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:M=>{M.currentTarget.style.background="transparent",M.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Clear"}),a.jsx("button",{onClick:ue,disabled:o.length!==4,style:{padding:"12px 24px",border:"none",borderRadius:"25px",fontSize:"16px",fontWeight:"600",cursor:o.length===4?"pointer":"not-allowed",transition:"all 0.3s ease",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"#f1f0e4",border:"2px solid transparent",opacity:o.length===4?1:.5},onMouseEnter:M=>{o.length===4&&(M.currentTarget.style.transform="translateY(-2px)",M.currentTarget.style.boxShadow="0 8px 16px rgba(62, 63, 41, 0.2)")},onMouseLeave:M=>{M.currentTarget.style.transform="translateY(0)",M.currentTarget.style.boxShadow="none"},children:P?"Creating...":"Unlock"})]}),u&&a.jsx("div",{style:{marginTop:"20px",padding:"12px",borderRadius:"10px",fontSize:"14px",fontWeight:"500",background:g==="success"?"rgba(125, 141, 134, 0.1)":"rgba(220, 53, 69, 0.1)",color:g==="success"?"#3e3f29":"#dc3545",border:g==="success"?"1px solid rgba(125, 141, 134, 0.3)":"1px solid rgba(220, 53, 69, 0.3)"},children:u})]})}),p&&a.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,maxWidth:"900px",width:"95%",maxHeight:"70vh",minHeight:"500px",overflowY:"auto",textAlign:"center"},onKeyDown:we,tabIndex:-1,children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",color:"#3e3f29"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid rgba(125, 141, 134, 0.3)"},children:[a.jsxs("h2",{style:{color:"#3e3f29",fontSize:"24px",fontWeight:"700",margin:0},children:[a.jsx("i",{className:"fa-solid fa-vault",style:{marginRight:"10px",color:"#7d8d86"}}),"Password Vault"]}),a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsxs("button",{onClick:()=>q(!0),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"20px",padding:"8px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:M=>{M.currentTarget.style.background="#3e3f29",M.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:M=>{M.currentTarget.style.background="#7d8d86",M.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-chart-line"}),"Reports"]}),a.jsx("button",{onClick:r,style:{background:"none",border:"2px solid #7d8d86",color:"#3e3f29",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",transition:"all 0.3s ease"},onMouseEnter:M=>{M.currentTarget.style.background="#7d8d86",M.currentTarget.style.color="#ffffff",M.currentTarget.style.transform="rotate(90deg)"},onMouseLeave:M=>{M.currentTarget.style.background="none",M.currentTarget.style.color="#3e3f29",M.currentTarget.style.transform="rotate(0deg)"},children:"×"})]})]}),a.jsx("div",{style:{marginBottom:"20px"},children:a.jsxs("button",{onClick:()=>Z(!U),style:{background:"#7d8d86",color:"#ffffff",border:"none",borderRadius:"25px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},onMouseEnter:M=>{M.currentTarget.style.background="#3e3f29",M.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:M=>{M.currentTarget.style.background="#7d8d86",M.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-plus"}),U?"Cancel":"Add Password"]})}),U&&a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",marginBottom:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",textAlign:"center"},children:"Add New Password"}),a.jsxs("div",{style:{display:"grid",gap:"15px"},children:[a.jsx("input",{type:"text",placeholder:"Title (e.g., Facebook, Twitter)",value:G.title,onChange:M=>re({...G,title:M.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:M=>{M.target.style.borderColor="#7d8d86",M.target.style.background="#ffffff"},onBlur:M=>{M.target.style.borderColor="rgba(125, 141, 134, 0.3)",M.target.style.background="#ffffff"}}),a.jsx("input",{type:"text",placeholder:"Username/Email",value:G.username,onChange:M=>re({...G,username:M.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:M=>{M.target.style.borderColor="#7d8d86",M.target.style.background="#ffffff"},onBlur:M=>{M.target.style.borderColor="rgba(125, 141, 134, 0.3)",M.target.style.background="#ffffff"}}),a.jsx("input",{type:"password",placeholder:"Password",value:G.password,onChange:M=>re({...G,password:M.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:M=>{M.target.style.borderColor="#7d8d86",M.target.style.background="#ffffff"},onBlur:M=>{M.target.style.borderColor="rgba(125, 141, 134, 0.3)",M.target.style.background="#ffffff"}}),a.jsx("input",{type:"url",placeholder:"Website (optional)",value:G.website,onChange:M=>re({...G,website:M.target.value}),style:{padding:"12px 16px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"10px",background:"#ffffff",color:"#3e3f29",fontSize:"16px",outline:"none",transition:"all 0.3s ease"},onFocus:M=>{M.target.style.borderColor="#7d8d86",M.target.style.background="#ffffff"},onBlur:M=>{M.target.style.borderColor="rgba(125, 141, 134, 0.3)",M.target.style.background="#ffffff"}}),a.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>Z(!1),style:{padding:"10px 20px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"20px",background:"transparent",color:"#7d8d86",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:M=>{M.currentTarget.style.background="rgba(125, 141, 134, 0.1)",M.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:M=>{M.currentTarget.style.background="transparent",M.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),a.jsx("button",{onClick:fe,disabled:!G.title||!G.password,style:{padding:"10px 20px",border:"none",borderRadius:"20px",background:G.title&&G.password?"#7d8d86":"rgba(125, 141, 134, 0.3)",color:"#f1f0e4",fontSize:"14px",fontWeight:"600",cursor:G.title&&G.password?"pointer":"not-allowed",transition:"all 0.3s ease"},onMouseEnter:M=>{G.title&&G.password&&(M.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:M=>{M.currentTarget.style.transform="translateY(0)"},children:"Save Password"})]})]})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:a.jsxs("div",{style:{background:"rgba(125, 141, 134, 0.1)",borderRadius:"15px",padding:"20px",border:"1px solid rgba(125, 141, 134, 0.2)"},children:[a.jsxs("div",{style:{color:"#3e3f29",fontSize:"18px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("i",{className:"fa-solid fa-shield-halved"}),"Saved Passwords"]}),j.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:j.map(M=>a.jsxs("div",{style:{background:"#ffffff",borderRadius:"10px",padding:"15px",border:"1px solid rgba(125, 141, 134, 0.2)",transition:"all 0.3s ease",cursor:"pointer",position:"relative"},onMouseEnter:Q=>{Q.currentTarget.style.background="rgba(125, 141, 134, 0.1)",Q.currentTarget.style.borderColor="#7d8d86",Q.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Q=>{Q.currentTarget.style.background="#ffffff",Q.currentTarget.style.borderColor="rgba(125, 141, 134, 0.2)",Q.currentTarget.style.transform="translateY(0)"},children:[a.jsx("button",{onClick:Q=>{Q.stopPropagation(),K(M.entry_id)},style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",color:"#dc3545",fontSize:"16px",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.3s ease",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Q=>{Q.currentTarget.style.background="rgba(220, 53, 69, 0.1)",Q.currentTarget.style.transform="scale(1.1)"},onMouseLeave:Q=>{Q.currentTarget.style.background="none",Q.currentTarget.style.transform="scale(1)"},children:"×"}),a.jsx("div",{style:{color:"#3e3f29",fontWeight:"600",marginBottom:"5px",paddingRight:"30px"},children:M.label}),a.jsx("div",{style:{color:"#7d8d86",fontSize:"14px",marginBottom:"8px"},children:M.email}),a.jsx("div",{style:{color:"#3e3f29",fontSize:"14px",fontFamily:"monospace",marginBottom:"8px",padding:"4px 8px",background:"rgba(125, 141, 134, 0.1)",borderRadius:"4px",wordBreak:"break-all"},children:de.has(M.entry_id)?M.password:"••••••••"}),a.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>w(M.password,"Password"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Q=>{Q.currentTarget.style.background="#3e3f29",Q.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Q=>{Q.currentTarget.style.background="#7d8d86",Q.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-copy",style:{marginRight:"4px"}}),"Copy"]}),a.jsxs("button",{onClick:()=>w(M.email,"Email"),style:{background:"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Q=>{Q.currentTarget.style.background="#3e3f29",Q.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Q=>{Q.currentTarget.style.background="#7d8d86",Q.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:"fa-solid fa-envelope",style:{marginRight:"4px"}}),"Copy Email"]}),a.jsxs("button",{onClick:()=>Se(M.entry_id),style:{background:de.has(M.entry_id)?"#3e3f29":"#7d8d86",border:"none",color:"#ffffff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:Q=>{Q.currentTarget.style.background=de.has(M.entry_id)?"#7d8d86":"#3e3f29",Q.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Q=>{Q.currentTarget.style.background=de.has(M.entry_id)?"#3e3f29":"#7d8d86",Q.currentTarget.style.transform="translateY(0)"},children:[a.jsx("i",{className:`fa-solid ${de.has(M.entry_id)?"fa-eye-slash":"fa-eye"}`,style:{marginRight:"4px"}}),de.has(M.entry_id)?"Hide":"Show"]})]})]},M.entry_id))}):a.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#bca88d",fontSize:"14px"},children:[a.jsx("i",{className:"fa-solid fa-folder-open",style:{fontSize:"24px",marginBottom:"8px",display:"block"}}),"No passwords saved yet"]})]})})]})}),ye&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"30px",border:"1px solid rgba(125, 141, 134, 0.2)",boxShadow:"0 20px 40px rgba(62, 63, 41, 0.15)",maxWidth:"400px",width:"90%",textAlign:"center",color:"#3e3f29"},children:[a.jsx("h3",{style:{color:"#3e3f29",fontSize:"20px",fontWeight:"600",marginBottom:"15px"},children:"Delete Password?"}),a.jsx("p",{style:{color:"#7d8d86",fontSize:"16px",marginBottom:"25px",lineHeight:"1.5"},children:"Are you sure you want to delete this password? This action cannot be undone."}),a.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>Ae(null),style:{padding:"12px 24px",border:"2px solid rgba(125, 141, 134, 0.3)",borderRadius:"25px",background:"transparent",color:"#7d8d86",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:M=>{M.currentTarget.style.background="rgba(125, 141, 134, 0.1)",M.currentTarget.style.borderColor="#7d8d86"},onMouseLeave:M=>{M.currentTarget.style.background="transparent",M.currentTarget.style.borderColor="rgba(125, 141, 134, 0.3)"},children:"Cancel"}),a.jsx("button",{onClick:()=>ce(ye),style:{padding:"12px 24px",border:"none",borderRadius:"25px",background:"#dc3545",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:M=>{M.currentTarget.style.background="#c82333",M.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:M=>{M.currentTarget.style.background="#dc3545",M.currentTarget.style.transform="translateY(0)"},children:"Delete"})]})]})}),a.jsx(qS,{isOpen:R,onClose:()=>q(!1),vaultEntries:j})]}):null},PS=()=>{const{user:l}=Mn(),[r,i]=v.useState([]),[o,d]=v.useState(!1),[u,h]=v.useState(!1),[g,m]=v.useState(null),[p,x]=v.useState({username:"",password:"",role:"Cashier",icon:"ryu"}),S=[{name:"lily",label:"Lily"},{name:"chunli",label:"Chun-Li"},{name:"ken",label:"Ken"},{name:"kimberly",label:"Kimberly"},{name:"mai",label:"Mai"},{name:"manon",label:"Manon"},{name:"rashid",label:"Rashid"},{name:"ryu",label:"Ryu"},{name:"zangief",label:"Zangief"}],[k,j]=v.useState(!1),[C,N]=v.useState(""),[A,P]=v.useState(!0),[E,U]=v.useState(!1);v.useEffect(()=>{Z()},[]);const Z=async()=>{try{P(!0);const{data:R,error:q}=await le.from("users").select("*").order("user_id",{ascending:!1});if(q){console.error("Error fetching users:",q),N("Failed to fetch users");return}i(R||[])}catch(R){console.error("Error fetching users:",R),N("Failed to fetch users")}finally{P(!1)}},G=async R=>{R.preventDefault(),j(!0),N("");try{const q=W1(),O=Ad(p.password),{data:se,error:he}=await le.from("users").insert([{user_id:q,username:p.username,password_hash:O,role:p.role,active:!0,icon:p.icon}]);if(he)throw console.error("Error adding user:",he),he;x({username:"",password:"",role:"Cashier",icon:"ryu"}),d(!1),Z()}catch(q){console.error("Error adding user:",q),N(`Failed to add user: ${q.message||"Unknown error"}`)}finally{j(!1)}},re=async R=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:q}=await le.from("users").delete().eq("user_id",R);if(q)throw console.error("Error deleting user:",q),q;Z()}catch(q){console.error("Error deleting user:",q),N(`Failed to delete user: ${q.message||"Unknown error"}`)}},de=async(R,q)=>{try{const{error:O}=await le.from("users").update({active:!q}).eq("user_id",R);if(O)throw console.error("Error updating user status:",O),O;Z()}catch(O){console.error("Error updating user status:",O),N(`Failed to update user: ${O.message||"Unknown error"}`)}},ve=R=>{m(R),x({username:R.username,password:"",role:R.role,icon:R.icon||"ryu"}),h(!0)},ye=async R=>{if(R.preventDefault(),!!g){j(!0),N("");try{const q={username:p.username,role:p.role,icon:p.icon};p.password.trim()&&(q.password_hash=Ad(p.password));const{error:O}=await le.from("users").update(q).eq("user_id",g.user_id);if(O)throw console.error("Error updating user:",O),O;x({username:"",password:"",role:"Cashier",icon:"ryu"}),m(null),h(!1),Z()}catch(q){console.error("Error updating user:",q),N(`Failed to update user: ${q.message||"Unknown error"}`)}finally{j(!1)}}},Ae=R=>{switch(R){case"Admin":return"#ef4444";case"Manager":return"#f59e0b";case"Cashier":return"#3b82f6";default:return"#6b7280"}};return A?a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontSize:"18px",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin",style:{marginRight:"12px"}}),"Loading users..."]}):a.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[a.jsxs("div",{children:[a.jsxs("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#1f2937",margin:"0 0 8px 0"},children:[a.jsx("i",{className:"fa-solid fa-users-cog",style:{marginRight:"12px",color:"#7d8d86"}}),"User Management"]}),a.jsx("p",{style:{color:"#6b7280",margin:"0",fontSize:"18px"},children:"Manage system users and their permissions"})]}),a.jsxs("button",{onClick:()=>d(!0),style:{background:"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"18px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:R=>{R.currentTarget.style.opacity="0.9"},onMouseLeave:R=>{R.currentTarget.style.opacity="1"},children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]})]}),C&&a.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"12px 16px",borderRadius:"8px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),C]}),a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[a.jsx("div",{style:{padding:"20px 24px",borderBottom:"2px solid #d1d5db",background:"#f9fafb"},children:a.jsxs("h3",{style:{margin:"0",fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:[a.jsx("i",{className:"fa-solid fa-list",style:{marginRight:"8px",color:"#7d8d86"}}),"All Users (",r.length,")"]})}),r.length===0?a.jsxs("div",{style:{padding:"48px 24px",textAlign:"center",color:"#6b7280"},children:[a.jsx("i",{className:"fa-solid fa-users",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),a.jsx("p",{style:{fontSize:"20px",margin:"0 0 8px 0"},children:"No users found"}),a.jsx("p",{style:{fontSize:"16px",margin:"0"},children:"Add your first user to get started"})]}):a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#f9fafb"},children:[a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#374151",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#374151",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Icon"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#374151",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Role"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#374151",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Status"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#374151",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"User ID"}),a.jsx("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#374151",borderBottom:"2px solid #d1d5db",fontSize:"16px"},children:"Actions"})]})}),a.jsx("tbody",{children:r.map((R,q)=>a.jsxs("tr",{style:{borderBottom:q<r.length-1?"1px solid #f3f4f6":"none"},children:[a.jsx("td",{style:{padding:"16px 24px"},children:a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"#1f2937",marginBottom:"4px",fontSize:"16px"},children:R.username}),a.jsxs("div",{style:{fontSize:"15px",color:"#6b7280"},children:["ID: ",R.user_id]})]})}),a.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden",border:"2px solid #e5e7eb"},children:R.icon?a.jsx("img",{src:`/images/icons/${R.icon}.png`,alt:R.icon,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"}}):a.jsx("i",{className:"fa-solid fa-user",style:{fontSize:"20px",color:"#9ca3af"}})})}),a.jsx("td",{style:{padding:"16px 24px"},children:a.jsx("span",{style:{background:`${Ae(R.role)}20`,color:Ae(R.role),padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500",textTransform:"capitalize"},children:R.role})}),a.jsx("td",{style:{padding:"16px 24px"},children:a.jsx("span",{style:{background:R.active?"#dcfce720":"#fef2f220",color:R.active?"#16a34a":"#dc2626",padding:"4px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500"},children:R.active?"Active":"Inactive"})}),a.jsxs("td",{style:{padding:"16px 24px",color:"#6b7280",fontSize:"15px"},children:["User #",R.user_id]}),a.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:a.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[a.jsxs("button",{onClick:()=>ve(R),style:{background:"#e0f2fe",color:"#0c4a6e",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Edit User",children:[a.jsx("i",{className:"fa-solid fa-pen-to-square"}),"Edit"]}),a.jsxs("button",{onClick:()=>de(R.user_id,R.active),style:{background:R.active?"#fef2f2":"#dcfce7",color:R.active?"#dc2626":"#16a34a",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:R.active?"Deactivate":"Activate",children:[a.jsx("i",{className:`fa-solid fa-${R.active?"ban":"check"}`}),R.active?"Deactivate":"Activate"]}),a.jsxs("button",{onClick:()=>re(R.user_id),style:{background:"#fef2f2",color:"#dc2626",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Delete User",children:[a.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]})]})})]},R.user_id))})]})})]}),o&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsxs("h2",{style:{margin:"0",fontSize:"26px",fontWeight:"600",color:"#1f2937"},children:[a.jsx("i",{className:"fa-solid fa-user-plus",style:{marginRight:"8px",color:"#7d8d86"}}),"Add New User"]}),a.jsx("button",{onClick:()=>d(!1),style:{background:"none",border:"none",fontSize:"20px",color:"#6b7280",cursor:"pointer",padding:"4px"},children:a.jsx("i",{className:"fa-solid fa-xmark"})})]}),a.jsxs("form",{onSubmit:G,children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#374151"},children:"Username *"}),a.jsx("input",{type:"text",value:p.username,onChange:R=>x({...p,username:R.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#374151"},children:"Password *"}),a.jsx("input",{type:"password",value:p.password,onChange:R=>x({...p,password:R.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter password"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#374151"},children:"Role *"}),a.jsxs("select",{value:p.role,onChange:R=>x({...p,role:R.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[a.jsx("option",{value:"cashier",children:"Cashier"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"admin",children:"Admin"})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:"Character Icon *"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:S.map(R=>a.jsxs("button",{type:"button",onClick:()=>x({...p,icon:R.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:p.icon===R.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:p.icon===R.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:p.icon===R.name?"scale(1.05)":"scale(1)",boxShadow:p.icon===R.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},onMouseEnter:q=>{p.icon!==R.name&&(q.currentTarget.style.transform="scale(1.02)",q.currentTarget.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.15)")},onMouseLeave:q=>{p.icon!==R.name&&(q.currentTarget.style.transform="scale(1)",q.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)")},children:[a.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:a.jsx("img",{src:`/images/icons/${R.name}.png`,alt:R.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:p.icon===R.name?"brightness(1.1) contrast(1.1)":"none"}})}),p.icon===R.name&&a.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},R.name))})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:()=>d(!1),style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:k,style:{background:k?"#9ca3af":"linear-gradient(135deg, #7d8d86, #3e3f29)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:k?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:k?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Add User"]})})]})]})]})}),u&&g&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[a.jsxs("h2",{style:{margin:"0",fontSize:"24px",fontWeight:"600",color:"#1f2937"},children:[a.jsx("i",{className:"fa-solid fa-user-pen",style:{marginRight:"8px",color:"#7d8d86"}}),"Edit User"]}),a.jsx("button",{onClick:()=>{h(!1),m(null)},style:{background:"none",border:"none",fontSize:"20px",color:"#6b7280",cursor:"pointer",padding:"4px"},children:a.jsx("i",{className:"fa-solid fa-xmark"})})]}),a.jsxs("form",{onSubmit:ye,children:[a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#374151"},children:"Username *"}),a.jsx("input",{type:"text",value:p.username,onChange:R=>x({...p,username:R.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter username"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#374151"},children:"New Password (leave blank to keep current)"}),a.jsx("input",{type:"password",value:p.password,onChange:R=>x({...p,password:R.target.value}),style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Enter new password (optional)"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#374151"},children:"Role *"}),a.jsxs("select",{value:p.role,onChange:R=>x({...p,role:R.target.value}),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",background:"#ffffff"},children:[a.jsx("option",{value:"Cashier",children:"Cashier"}),a.jsx("option",{value:"Manager",children:"Manager"}),a.jsx("option",{value:"Admin",children:"Admin"})]})]}),a.jsxs("div",{style:{marginBottom:"24px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"16px",fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:"Character Icon *"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.06)"},children:S.map(R=>a.jsxs("button",{type:"button",onClick:()=>x({...p,icon:R.name}),style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",border:p.icon===R.name?"3px solid #7d8d86":"2px solid #e5e7eb",borderRadius:"20px",background:p.icon===R.name?"linear-gradient(135deg, #7d8d86 0%, #5a6b5f 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:p.icon===R.name?"scale(1.05)":"scale(1)",boxShadow:p.icon===R.name?"0 8px 25px rgba(125, 141, 134, 0.3), 0 0 0 1px rgba(125, 141, 134, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},onMouseEnter:q=>{p.icon!==R.name&&(q.currentTarget.style.transform="scale(1.02)",q.currentTarget.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.15)")},onMouseLeave:q=>{p.icon!==R.name&&(q.currentTarget.style.transform="scale(1)",q.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)")},children:[a.jsx("div",{style:{position:"relative",width:"56px",height:"56px",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:a.jsx("img",{src:`/images/icons/${R.name}.png`,alt:R.label,style:{width:"100%",height:"100%",objectFit:"cover",filter:p.icon===R.name?"brightness(1.1) contrast(1.1)":"none"}})}),p.icon===R.name&&a.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",zIndex:10},children:a.jsx("i",{className:"fa-solid fa-check",style:{fontSize:"10px",color:"white"}})})]},R.name))})]}),a.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",onClick:()=>{h(!1),m(null)},style:{background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:k,style:{background:k?"#9ca3af":"#7d8d86",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"500",cursor:k?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:k?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fa-solid fa-floppy-disk"}),"Update User"]})})]})]})]})}),a.jsx("div",{onClick:()=>U(!0),title:"Access Secure Vault - Manage sensitive operations and settings",style:{position:"fixed",bottom:"24px",right:"24px",zIndex:50,width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #7d8d86, #3e3f29)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(125, 141, 134, 0.4)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>{R.currentTarget.style.transform="translateY(-2px)",R.currentTarget.style.boxShadow="0 6px 16px rgba(125, 141, 134, 0.4)"},onMouseLeave:R=>{R.currentTarget.style.transform="translateY(0)",R.currentTarget.style.boxShadow="0 4px 12px rgba(125, 141, 134, 0.3)"},children:a.jsx("i",{className:"fa-solid fa-vault",style:{fontSize:"48px",color:"#f1f0e4"}})}),a.jsx($S,{isOpen:E,onClose:()=>U(!1)})]})},HS="_container_1z7wl_2",WS="_header_1z7wl_10",FS="_title_1z7wl_16",YS="_mainContent_1z7wl_32",GS="_offlineNotice_1z7wl_39",VS="_offlineNoticeContent_1z7wl_51",XS="_dateNavigation_1z7wl_62",KS="_navButton_1z7wl_76",QS="_currentDate_1z7wl_102",ZS="_controls_1z7wl_144",JS="_button_1z7wl_151",e2="_buttonPrimary_1z7wl_170",t2="_buttonSecondary_1z7wl_179",n2="_buttonDanger_1z7wl_192",a2="_notesContainer_1z7wl_202",s2="_gridBackground_1z7wl_218",r2="_gridPattern_1z7wl_224",i2="_emptyState_1z7wl_234",o2="_emptyStateContent_1z7wl_242",l2="_emptyStateIcon_1z7wl_247",c2="_emptyStateTitle_1z7wl_252",d2="_dragIndicator_1z7wl_258",u2="_footer_1z7wl_271",f2="_stickyNote_1z7wl_279",h2="_stickyNoteDragging_1z7wl_286",p2="_note_1z7wl_202",g2="_noteOverdue_1z7wl_306",m2="_noteDueToday_1z7wl_310",x2="_noteYellow_1z7wl_315",y2="_notePink_1z7wl_321",b2="_noteBlue_1z7wl_327",v2="_noteGreen_1z7wl_333",_2="_notePurple_1z7wl_339",S2="_noteOrange_1z7wl_345",w2="_noteTopStrip_1z7wl_351",j2="_noteContent_1z7wl_433",k2="_noteContentEditing_1z7wl_439",C2="_noteInput_1z7wl_445",T2="_noteDateInput_1z7wl_456",E2="_noteTextarea_1z7wl_466",R2="_noteDisplay_1z7wl_480",N2="_noteTitle_1z7wl_486",z2="_noteDate_1z7wl_456",D2="_noteDateOverdue_1z7wl_499",A2="_noteDateToday_1z7wl_504",M2="_noteBody_1z7wl_509",B2="_noteCorner_1z7wl_518",O2="_noteCornerEffect_1z7wl_526",L2="_modalOverlay_1z7wl_537",I2="_modal_1z7wl_537",U2="_modalHeader_1z7wl_558",q2="_modalTitle_1z7wl_562",$2="_modalClose_1z7wl_582",P2="_modalForm_1z7wl_594",H2="_errorMessage_1z7wl_600",W2="_errorContent_1z7wl_608",F2="_formGroup_1z7wl_617",Y2="_formLabel_1z7wl_622",G2="_formInput_1z7wl_630",V2="_formTextarea_1z7wl_644",X2="_colorSelection_1z7wl_659",K2="_colorOption_1z7wl_665",Q2="_colorOptionSelected_1z7wl_678",Z2="_preview_1z7wl_683",J2="_previewLabel_1z7wl_687",ew="_previewNote_1z7wl_695",tw="_previewTitle_1z7wl_701",nw="_previewDate_1z7wl_708",aw="_previewBody_1z7wl_718",sw="_modalActions_1z7wl_724",rw="_modalButton_1z7wl_730",iw="_modalButtonCancel_1z7wl_744",ow="_modalButtonSubmit_1z7wl_753",lw="_modalButtonDanger_1z7wl_762",cw="_loading_1z7wl_772",dw="_loadingContent_1z7wl_780",uw="_loadingIcon_1z7wl_784",fw="_loadingText_1z7wl_790",hw="_confirmationDialog_1z7wl_836",pw="_confirmationContent_1z7wl_847",gw="_confirmationHeader_1z7wl_856",mw="_confirmationIcon_1z7wl_862",xw="_confirmationButton_1z7wl_893",yw="_confirmationButtonCancel_1z7wl_903",bw="_confirmationButtonConfirm_1z7wl_912",vw="_calendarModal_1z7wl_922",_w="_calendar_1z7wl_922",Sw="_calendarHeader_1z7wl_948",ww="_calendarCloseButton_1z7wl_956",jw="_calendarTitle_1z7wl_978",kw="_calendarNavButton_1z7wl_984",Cw="_calendarGrid_1z7wl_1002",Tw="_calendarDayHeader_1z7wl_1008",Ew="_calendarDay_1z7wl_1008",Rw="_calendarDayOtherMonth_1z7wl_1035",Nw="_calendarDayToday_1z7wl_1039",zw="_calendarDaySelected_1z7wl_1049",Dw="_calendarDayWithReminders_1z7wl_1059",Aw="_calendarDayWithRemindersToday_1z7wl_1069",Mw="_calendarDayWithRemindersSelected_1z7wl_1078",Bw="_calendarReminderCount_1z7wl_1103",Ow="_lilyMascot_1z7wl_1145",Lw="_lilySpeechBubble_1z7wl_1155",Iw="_lilySpeechTail_1z7wl_1173",Uw="_lilyImage_1z7wl_1184",W={container:HS,header:WS,title:FS,mainContent:YS,offlineNotice:GS,offlineNoticeContent:VS,dateNavigation:XS,navButton:KS,currentDate:QS,controls:ZS,button:JS,buttonPrimary:e2,buttonSecondary:t2,buttonDanger:n2,notesContainer:a2,gridBackground:s2,gridPattern:r2,emptyState:i2,emptyStateContent:o2,emptyStateIcon:l2,emptyStateTitle:c2,dragIndicator:d2,footer:u2,stickyNote:f2,stickyNoteDragging:h2,note:p2,noteOverdue:g2,noteDueToday:m2,noteYellow:x2,notePink:y2,noteBlue:b2,noteGreen:v2,notePurple:_2,noteOrange:S2,noteTopStrip:w2,noteContent:j2,noteContentEditing:k2,noteInput:C2,noteDateInput:T2,noteTextarea:E2,noteDisplay:R2,noteTitle:N2,noteDate:z2,noteDateOverdue:D2,noteDateToday:A2,noteBody:M2,noteCorner:B2,noteCornerEffect:O2,modalOverlay:L2,modal:I2,modalHeader:U2,modalTitle:q2,modalClose:$2,modalForm:P2,errorMessage:H2,errorContent:W2,formGroup:F2,formLabel:Y2,formInput:G2,formTextarea:V2,colorSelection:X2,colorOption:K2,colorOptionSelected:Q2,preview:Z2,previewLabel:J2,previewNote:ew,previewTitle:tw,previewDate:nw,previewBody:aw,modalActions:sw,modalButton:rw,modalButtonCancel:iw,modalButtonSubmit:ow,modalButtonDanger:lw,loading:cw,loadingContent:dw,loadingIcon:uw,loadingText:fw,confirmationDialog:hw,confirmationContent:pw,confirmationHeader:gw,confirmationIcon:mw,confirmationButton:xw,confirmationButtonCancel:yw,confirmationButtonConfirm:bw,calendarModal:vw,calendar:_w,calendarHeader:Sw,calendarCloseButton:ww,calendarTitle:jw,calendarNavButton:kw,calendarGrid:Cw,calendarDayHeader:Tw,calendarDay:Ew,calendarDayOtherMonth:Rw,calendarDayToday:Nw,calendarDaySelected:zw,calendarDayWithReminders:Dw,calendarDayWithRemindersToday:Aw,calendarDayWithRemindersSelected:Mw,calendarReminderCount:Bw,lilyMascot:Ow,lilySpeechBubble:Lw,lilySpeechTail:Iw,lilyImage:Uw};function qw(){const{user:l,currentUserId:r}=Mn(),[i,o]=v.useState([]),[d,u]=v.useState(!0),[h,g]=v.useState(null),[m,p]=v.useState({x:0,y:0}),[x,S]=v.useState(null),[k,j]=v.useState(!1),[C,N]=v.useState(!1),[A,P]=v.useState(!1),[E,U]=v.useState(null),[Z,G]=v.useState({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),[re,de]=v.useState({title:"",body:"",remind_date:"",color:"yellow"}),[ve,ye]=v.useState(new Date),[Ae,R]=v.useState(!1),[q,O]=v.useState(!1),[se,he]=v.useState(new Date),[I,J]=v.useState(!1),[fe,Se]=v.useState("Hi! I'm Lily, your reminder assistant! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),[w,K]=v.useState(()=>{const H=localStorage.getItem("lilyEnabled");return H!==null?JSON.parse(H):!0}),ce={yellow:{bg:W.noteYellow,border:W.noteYellow,shadow:W.noteYellow},pink:{bg:W.notePink,border:W.notePink,shadow:W.notePink},blue:{bg:W.noteBlue,border:W.noteBlue,shadow:W.noteBlue},green:{bg:W.noteGreen,border:W.noteGreen,shadow:W.noteGreen},purple:{bg:W.notePurple,border:W.notePurple,shadow:W.notePurple},orange:{bg:W.noteOrange,border:W.noteOrange,shadow:W.noteOrange}},ue=()=>{const H=new Date(ve);H.setDate(H.getDate()-1),ye(H)},we=()=>{const H=new Date(ve);H.setDate(H.getDate()+1),ye(H)},M=H=>{const pe=new Date(se);H==="prev"?pe.setMonth(pe.getMonth()-1):pe.setMonth(pe.getMonth()+1),he(pe)},Q=H=>{ye(H),O(!1)},oe=()=>{const H=new Set;return i.forEach(pe=>{const _e=new Date(pe.remind_date);H.add(_e.toDateString())}),H},be=()=>{const H={};return i.forEach(pe=>{const Pe=new Date(pe.remind_date).toDateString();H[Pe]=(H[Pe]||0)+1}),H},ge=()=>{const H=se.getFullYear(),pe=se.getMonth(),_e=new Date(H,pe,1),Pe=new Date(_e);Pe.setDate(Pe.getDate()-_e.getDay());const B=[],ee=oe(),Be=be(),We=new Date,Re=new Date(ve);for(let it=0;it<42;it++){const Ue=new Date(Pe);Ue.setDate(Pe.getDate()+it);const At=Ue.getMonth()===pe,jt=Ue.toDateString()===We.toDateString(),Xt=Ue.toDateString()===Re.toDateString(),kt=ee.has(Ue.toDateString()),St=Be[Ue.toDateString()]||0;B.push({date:Ue,isCurrentMonth:At,isToday:jt,isSelected:Xt,hasReminders:kt,reminderCount:St})}return B},je=()=>{const H=!w;K(H),localStorage.setItem("lilyEnabled",JSON.stringify(H)),H&&(Se("Hi! I'm back! I can help you understand how to manage your reminders. Hover over different elements to learn more! Double-click me to disable me."),J(!0))},Ye=()=>w?a.jsxs("div",{className:W.lilyMascot,children:[I&&a.jsxs("div",{className:W.lilySpeechBubble,children:[a.jsx("p",{children:fe}),a.jsx("div",{className:W.lilySpeechTail})]}),a.jsx("div",{className:W.lilyImage,onClick:()=>{J(!I)},onDoubleClick:()=>{je()},children:a.jsx("img",{src:l?.icon?`/retailpos/images/icons/${l.icon}.png`:"/retailpos/images/backgrounds/lily.png",alt:l?.icon||"Lily"})})]}):null,Le=()=>{const H=new Date(ve);return H.setHours(0,0,0,0),i.filter(pe=>{const _e=new Date(pe.remind_date);return _e.setHours(0,0,0,0),_e.getTime()===H.getTime()})},He=async()=>{if(o([]),R(!1),!k)try{const{error:H}=await le.from("reminders").delete().neq("reminder_id",0);H&&console.error("Error deleting all reminders from database:",H)}catch(H){console.error("Error deleting all reminders:",H)}},yt=async()=>{try{u(!0);const{data:H,error:pe}=await le.from("reminders").select("*").order("remind_date",{ascending:!0});if(pe)throw console.error("Database fetch error:",pe),pe;const _e=H?.map((Pe,B)=>({...Pe,x:Math.random()*400+50,y:Math.random()*300+50,rotation:(Math.random()-.5)*6,isEditing:!1,color:Object.keys(ce)[B%Object.keys(ce).length]}))||[];o(_e)}catch(H){console.error("Error fetching reminders:",H),S("Failed to load reminders. Please try again.")}finally{u(!1)}};v.useEffect(()=>{(async()=>{try{const{data:pe,error:_e}=await le.from("reminders").select("count",{count:"exact",head:!0});_e?(console.error("Table test error:",_e),S("Database table 'reminders' does not exist. Please run the SQL commands from database-schema.sql in your Supabase SQL editor."),j(!0),u(!1)):(console.log("Table exists, fetching reminders..."),yt())}catch(pe){console.error("Table test failed:",pe),S("Failed to connect to database. Please check your connection.")}})()},[]);const Dt=()=>{G({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"}),S(null),N(!0)},dt=()=>{N(!1),G({title:"",body:"",remind_date:new Date().toISOString().split("T")[0],color:"yellow"})},gt=()=>{P(!1),U(null),de({title:"",body:"",remind_date:"",color:"yellow"})},on=async()=>{if(!E||!re.title.trim()||!re.body.trim()){S("Please fill in both title and body for the reminder.");return}await Ee(E.reminder_id,{title:re.title.trim(),body:re.body.trim(),remind_date:re.remind_date,color:re.color}),gt()},z=async()=>{if(!Z.title.trim()||!Z.body.trim()){S("Please fill in both title and body for the reminder.");return}const H={title:Z.title.trim(),body:Z.body.trim(),remind_date:Z.remind_date,owner_id:r?parseInt(r):1};if(k){const pe=Date.now();o([...i,{...H,reminder_id:pe,created_at:new Date().toISOString()}]),dt();return}try{if(r)H.owner_id=parseInt(r);else{const Pe=Date.now();o([...i,{...H,reminder_id:Pe,created_at:new Date().toISOString()}]),dt();return}const{data:pe,error:_e}=await le.from("reminders").insert([{title:H.title,body:H.body,remind_date:H.remind_date,owner_id:H.owner_id}]).select().single();if(_e){const Pe=Date.now();o([...i,{...H,reminder_id:Pe,created_at:new Date().toISOString()}]),dt();return}o([...i,{...H,reminder_id:pe.reminder_id,created_at:new Date().toISOString()}]),dt()}catch(pe){console.error("Error adding reminder:",pe);const _e=Date.now();o([...i,{...H,reminder_id:_e,created_at:new Date().toISOString()}]),dt()}},ke=async H=>{if(o(i.filter(pe=>pe.reminder_id!==H)),!k)try{const{error:pe}=await le.from("reminders").delete().eq("reminder_id",H);pe&&console.error("Error deleting reminder from database:",pe)}catch(pe){console.error("Error deleting reminder:",pe)}},Ee=async(H,pe)=>{if(console.log("updateReminder called with:",{id:H,updates:pe}),o(i.map(_e=>_e.reminder_id===H?{..._e,...pe}:_e)),!k)try{if(pe.title||pe.body||pe.remind_date){const{error:_e}=await le.from("reminders").update({title:pe.title,body:pe.body,remind_date:pe.remind_date}).eq("reminder_id",H);_e&&console.error("Error updating reminder in database:",_e)}}catch(_e){console.error("Error updating reminder:",_e)}},Ze=(H,pe)=>{H.preventDefault();const _e=H.currentTarget.getBoundingClientRect();g(pe),p({x:H.clientX-_e.left,y:H.clientY-_e.top})},nt=H=>{if(h){const pe=document.getElementById("sticky-container");if(pe){const _e=pe.getBoundingClientRect(),Pe=Math.max(0,Math.min(H.clientX-_e.left-m.x,_e.width-224)),B=Math.max(0,Math.min(H.clientY-_e.top-m.y,_e.height-224));o(i.map(ee=>ee.reminder_id===h.reminder_id?{...ee,x:Pe,y:B}:ee))}}},mt=()=>{g(null),p({x:0,y:0})};v.useEffect(()=>{if(h)return document.addEventListener("mousemove",nt),document.addEventListener("mouseup",mt),()=>{document.removeEventListener("mousemove",nt),document.removeEventListener("mouseup",mt)}},[h,m]);const gn=({reminder:H})=>{const[pe,_e]=v.useState(H.title),[Pe,B]=v.useState(H.body),[ee,Be]=v.useState(H.remind_date),We=v.useRef(null);v.useEffect(()=>{H.isEditing&&We.current&&(We.current.focus(),We.current.select())},[H.isEditing]);const Re=ut=>{B(ut.target.value),ut.target.style.height="auto",ut.target.style.height=ut.target.scrollHeight+"px"},it=()=>{pe.trim()&&Pe.trim()?Ee(H.reminder_id,{title:pe.trim(),body:Pe.trim(),remind_date:ee,isEditing:!1}):(_e(H.title),B(H.body),Be(H.remind_date),Ee(H.reminder_id,{isEditing:!1}))},Ue=ut=>{ut.key==="Enter"&&ut.shiftKey||(ut.key==="Enter"?(ut.preventDefault(),it()):ut.key==="Escape"&&(_e(H.title),B(H.body),Be(H.remind_date),Ee(H.reminder_id,{isEditing:!1})))},At=ut=>{ut.key==="Enter"?(ut.preventDefault(),it()):ut.key==="Escape"&&(_e(H.title),B(H.body),Be(H.remind_date),Ee(H.reminder_id,{isEditing:!1}))},jt=ce[H.color]||ce.yellow,Xt=new Date,kt=new Date(H.remind_date),St=kt<Xt&&kt.toDateString()!==Xt.toDateString(),xt=kt.toDateString()===Xt.toDateString();return a.jsx("div",{className:`${W.stickyNote} ${h?.reminder_id===H.reminder_id?W.stickyNoteDragging:""}`,style:{left:`${H.x}px`,top:`${H.y}px`,transform:`rotate(${H.rotation}deg)`},children:a.jsxs("div",{className:`${W.note} ${jt.bg} ${St?W.noteOverdue:xt?W.noteDueToday:""}`,onMouseDown:ut=>!H.isEditing&&Ze(ut,H),children:[a.jsx("div",{className:`${W.noteTopStrip} ${jt.border}`}),a.jsx("div",{className:W.noteContent,children:H.isEditing?a.jsxs("div",{className:W.noteContentEditing,children:[a.jsx("input",{type:"text",value:pe,onChange:ut=>_e(ut.target.value),onKeyDown:At,onBlur:it,className:W.noteInput,placeholder:"Reminder title..."}),a.jsx("input",{type:"date",value:ee,onChange:ut=>Be(ut.target.value),onKeyDown:At,onBlur:it,className:W.noteDateInput}),a.jsx("textarea",{ref:We,value:Pe,onChange:Re,onBlur:it,onKeyDown:Ue,className:W.noteTextarea,style:{fontFamily:"Comic Sans MS, cursive, sans-serif",minHeight:"80px"},placeholder:"Reminder details..."})]}):a.jsxs("div",{onContextMenu:ut=>{ut.preventDefault(),ut.stopPropagation(),console.log("Note right-clicked for reminder:",H.reminder_id),U(H),de({title:H.title,body:H.body,remind_date:H.remind_date,color:H.color||"yellow"}),P(!0)},className:W.noteDisplay,children:[a.jsx("div",{className:W.noteTitle,children:H.title}),a.jsxs("div",{className:`${W.noteDate} ${St?W.noteDateOverdue:xt?W.noteDateToday:""}`,children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(H.remind_date).toLocaleDateString(),St&&a.jsx("span",{style:{color:"#dc2626",marginLeft:"0.5rem",fontWeight:"700"},children:"OVERDUE"}),xt&&!St&&a.jsx("span",{style:{color:"#d97706",marginLeft:"0.5rem",fontWeight:"700"},children:"TODAY"})]}),a.jsx("div",{className:W.noteBody,style:{fontFamily:"Comic Sans MS, cursive, sans-serif"},children:H.body})]})}),a.jsx("div",{className:W.noteCorner,children:a.jsx("div",{className:`${W.noteCornerEffect} ${jt.bg}`})})]})})};return d?a.jsx("div",{className:W.loading,children:a.jsxs("div",{className:W.loadingContent,children:[a.jsx("i",{className:`fa-solid fa-spinner fa-spin ${W.loadingIcon}`}),a.jsx("p",{className:W.loadingText,children:"Loading reminders..."})]})}):a.jsxs("div",{className:W.container,children:[a.jsx("div",{className:W.header,children:a.jsxs("div",{className:W.title,children:[a.jsxs("h1",{children:[a.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.75rem"}}),"Reminders"]}),a.jsx("p",{children:"Click and drag to move reminders around • Right-click to edit"})]})}),a.jsxs("div",{className:W.mainContent,children:[a.jsxs("div",{className:W.dateNavigation,children:[a.jsx("button",{onClick:ue,className:W.navButton,onMouseEnter:()=>{w&&(Se("Click this arrow to go to the previous day! This helps you navigate through your reminders day by day."),J(!0))},onMouseLeave:()=>{w&&J(!1)},children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("div",{className:W.currentDate,onClick:()=>O(!q),style:{cursor:"pointer"},onMouseEnter:()=>{w&&(Se("Click on this date to open the calendar modal! You can see all your reminders and navigate to any date quickly."),J(!0))},onMouseLeave:()=>{w&&J(!1)},children:ve.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsx("button",{onClick:we,className:W.navButton,onMouseEnter:()=>{w&&(Se("Click this arrow to go to the next day! This helps you navigate through your reminders day by day."),J(!0))},onMouseLeave:()=>{w&&J(!1)},children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),q&&a.jsx("div",{className:W.calendarModal,onClick:()=>O(!1),children:a.jsxs("div",{className:W.calendar,onClick:H=>H.stopPropagation(),children:[a.jsxs("div",{className:W.calendarHeader,children:[a.jsx("button",{onClick:()=>O(!1),className:W.calendarCloseButton,children:a.jsx("i",{className:"fa-solid fa-times"})}),a.jsx("button",{onClick:()=>M("prev"),className:W.calendarNavButton,children:a.jsx("i",{className:"fa-solid fa-chevron-left"})}),a.jsx("div",{className:W.calendarTitle,children:se.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>M("next"),className:W.calendarNavButton,children:a.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),a.jsxs("div",{className:W.calendarGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(H=>a.jsx("div",{className:W.calendarDayHeader,children:H},H)),ge().map((H,pe)=>{let _e=W.calendarDay;return H.isCurrentMonth?H.hasReminders&&H.isToday?_e+=` ${W.calendarDayWithRemindersToday}`:H.hasReminders&&H.isSelected?_e+=` ${W.calendarDayWithRemindersSelected}`:H.hasReminders?_e+=` ${W.calendarDayWithReminders}`:H.isToday?_e+=` ${W.calendarDayToday}`:H.isSelected&&(_e+=` ${W.calendarDaySelected}`):_e+=` ${W.calendarDayOtherMonth}`,a.jsxs("div",{className:_e,onClick:()=>Q(H.date),children:[H.date.getDate(),H.hasReminders&&a.jsx("div",{className:W.calendarReminderCount,children:H.reminderCount})]},pe)})]})]})}),k&&a.jsx("div",{className:W.offlineNotice,children:a.jsxs("div",{className:W.offlineNoticeContent,children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),a.jsxs("div",{children:[a.jsx("strong",{children:"Offline Mode:"})," The reminders table doesn't exist in your database yet. Reminders will work locally but won't be saved permanently.",a.jsx("a",{href:"#",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),style:{textDecoration:"underline",marginLeft:"0.25rem"},children:"Create the table in Supabase"})]})]})}),a.jsxs("div",{className:W.controls,children:[a.jsxs("button",{onClick:Dt,className:`${W.button} ${W.buttonPrimary}`,onMouseEnter:()=>{w&&(Se("Click this button to add a new reminder! You can set the title, content, date, and color for your reminder."),J(!0))},onMouseLeave:()=>{w&&J(!1)},children:[a.jsx("i",{className:"fa-solid fa-plus-circle"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Add Reminder"})]}),a.jsxs("button",{onClick:()=>{const H=document.getElementById("sticky-container");if(H){const pe=H.getBoundingClientRect();o(i.map(_e=>({..._e,x:Math.random()*(pe.width-224)+20,y:Math.random()*(pe.height-224)+20,rotation:(Math.random()-.5)*6})))}},className:`${W.button} ${W.buttonSecondary}`,onMouseEnter:()=>{w&&(Se("Click this button to shuffle all your reminders around! This gives them new random positions on the board."),J(!0))},onMouseLeave:()=>{w&&J(!1)},children:[a.jsx("i",{className:"fa-solid fa-random"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Shuffle"})]}),i.length>0&&a.jsxs("button",{onClick:()=>R(!0),className:`${W.button} ${W.buttonDanger}`,onMouseEnter:()=>{w&&(Se("Click this button to remove all reminders at once! Be careful - this action cannot be undone."),J(!0))},onMouseLeave:()=>{w&&J(!1)},children:[a.jsx("i",{className:"fa-solid fa-trash-can"}),a.jsx("span",{style:{marginLeft:"0.5rem"},children:"Clear All"})]})]}),a.jsxs("div",{id:"sticky-container",className:W.notesContainer,style:{minHeight:"600px"},children:[a.jsx("div",{className:W.gridBackground,children:a.jsx("div",{className:W.gridPattern})}),Le().map(H=>a.jsx(gn,{reminder:H},H.reminder_id)),Le().length===0&&a.jsx("div",{className:W.emptyState,children:a.jsxs("div",{className:W.emptyStateContent,children:[a.jsx("div",{className:W.emptyStateIcon,children:a.jsx("i",{className:"fa-solid fa-sticky-note"})}),a.jsx("h3",{className:W.emptyStateTitle,children:"No reminders for this date"}),a.jsxs("p",{children:['Click "Add Reminder" to create your first reminder for ',ve.toLocaleDateString()]})]})}),h&&a.jsxs("div",{className:W.dragIndicator,children:[a.jsx("i",{className:"fa-solid fa-arrows-up-down-left-right",style:{marginRight:"0.25rem"}}),"Dragging reminder..."]})]}),a.jsx("div",{className:W.footer,children:a.jsxs("p",{children:[a.jsx("i",{className:"fa-solid fa-lightbulb",style:{marginRight:"0.25rem"}}),"Tips: Shift+Enter for new lines • Escape to cancel editing • Right-click to edit • Drag reminders around freely"]})}),C&&a.jsx("div",{className:W.modalOverlay,children:a.jsx("div",{className:W.modal,children:a.jsxs("div",{className:W.modalHeader,children:[a.jsxs("div",{className:W.modalTitle,children:[a.jsxs("h2",{children:[a.jsx("i",{className:"fa-solid fa-sticky-note",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Create New Reminder"]}),a.jsx("button",{onClick:dt,className:W.modalClose,children:a.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),a.jsxs("form",{onSubmit:H=>{H.preventDefault(),z()},className:W.modalForm,children:[x&&a.jsx("div",{className:W.errorMessage,children:a.jsxs("div",{className:W.errorContent,children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),a.jsx("span",{style:{fontSize:"0.875rem"},children:x})]})}),a.jsxs("div",{className:W.formGroup,children:[a.jsx("label",{htmlFor:"title",className:W.formLabel,children:"Title *"}),a.jsx("input",{type:"text",id:"title",value:Z.title,onChange:H=>G({...Z,title:H.target.value}),className:W.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),a.jsxs("div",{className:W.formGroup,children:[a.jsx("label",{htmlFor:"remind_date",className:W.formLabel,children:"Remind Date *"}),a.jsx("input",{type:"date",id:"remind_date",value:Z.remind_date,onChange:H=>G({...Z,remind_date:H.target.value}),className:W.formInput,required:!0})]}),a.jsxs("div",{className:W.formGroup,children:[a.jsx("label",{className:W.formLabel,children:"Color"}),a.jsx("div",{className:W.colorSelection,children:Object.entries(ce).map(([H,pe])=>a.jsx("button",{type:"button",onClick:()=>G({...Z,color:H}),className:`${W.colorOption} ${pe.bg} ${Z.color===H?W.colorOptionSelected:""}`,title:H},H))})]}),a.jsxs("div",{className:W.formGroup,children:[a.jsx("label",{htmlFor:"body",className:W.formLabel,children:"Details *"}),a.jsx("textarea",{id:"body",value:Z.body,onChange:H=>G({...Z,body:H.target.value}),className:W.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),Z.title&&Z.body&&a.jsxs("div",{className:W.preview,children:[a.jsx("label",{className:W.previewLabel,children:"Preview"}),a.jsxs("div",{className:`${W.previewNote} ${ce[Z.color]?.bg} ${ce[Z.color]?.border}`,children:[a.jsx("div",{className:W.previewTitle,children:Z.title}),a.jsxs("div",{className:W.previewDate,children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(Z.remind_date).toLocaleDateString()]}),a.jsx("div",{className:W.previewBody,children:Z.body})]})]}),a.jsxs("div",{className:W.modalActions,children:[a.jsx("button",{type:"button",onClick:dt,className:`${W.modalButton} ${W.modalButtonCancel}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${W.modalButton} ${W.modalButtonSubmit}`,children:[a.jsx("i",{className:"fa-solid fa-plus"}),"Create Reminder"]})]})]})]})})}),A&&E&&a.jsx("div",{className:W.modalOverlay,children:a.jsx("div",{className:W.modal,children:a.jsxs("div",{className:W.modalHeader,children:[a.jsxs("div",{className:W.modalTitle,children:[a.jsxs("h2",{children:[a.jsx("i",{className:"fa-solid fa-edit",style:{marginRight:"0.5rem",color:"#fbbf24"}}),"Edit Reminder"]}),a.jsx("button",{onClick:gt,className:W.modalClose,children:a.jsx("i",{className:"fa-solid fa-times",style:{fontSize:"1.25rem"}})})]}),a.jsxs("form",{onSubmit:H=>{H.preventDefault(),on()},className:W.modalForm,children:[x&&a.jsx("div",{className:W.errorMessage,children:a.jsxs("div",{className:W.errorContent,children:[a.jsx("i",{className:"fa-solid fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),a.jsx("span",{style:{fontSize:"0.875rem"},children:x})]})}),a.jsxs("div",{className:W.formGroup,children:[a.jsx("label",{htmlFor:"edit-title",className:W.formLabel,children:"Title *"}),a.jsx("input",{type:"text",id:"edit-title",value:re.title,onChange:H=>de({...re,title:H.target.value}),className:W.formInput,placeholder:"Enter reminder title...",required:!0,autoFocus:!0})]}),a.jsxs("div",{className:W.formGroup,children:[a.jsx("label",{htmlFor:"edit-remind_date",className:W.formLabel,children:"Remind Date *"}),a.jsx("input",{type:"date",id:"edit-remind_date",value:re.remind_date,onChange:H=>de({...re,remind_date:H.target.value}),className:W.formInput,required:!0})]}),a.jsxs("div",{className:W.formGroup,children:[a.jsx("label",{className:W.formLabel,children:"Color"}),a.jsx("div",{className:W.colorSelection,children:Object.entries(ce).map(([H,pe])=>a.jsx("button",{type:"button",onClick:()=>de({...re,color:H}),className:`${W.colorOption} ${pe.bg} ${re.color===H?W.colorOptionSelected:""}`,title:H},H))})]}),a.jsxs("div",{className:W.formGroup,children:[a.jsx("label",{htmlFor:"edit-body",className:W.formLabel,children:"Details *"}),a.jsx("textarea",{id:"edit-body",value:re.body,onChange:H=>de({...re,body:H.target.value}),className:W.formTextarea,rows:4,placeholder:"Enter reminder details...",required:!0})]}),re.title&&re.body&&a.jsxs("div",{className:W.preview,children:[a.jsx("label",{className:W.previewLabel,children:"Preview"}),a.jsxs("div",{className:`${W.previewNote} ${ce[re.color]?.bg} ${ce[re.color]?.border}`,children:[a.jsx("div",{className:W.previewTitle,children:re.title}),a.jsxs("div",{className:W.previewDate,children:[a.jsx("i",{className:"fa-solid fa-calendar",style:{marginRight:"0.25rem"}}),new Date(re.remind_date).toLocaleDateString()]}),a.jsx("div",{className:W.previewBody,children:re.body})]})]}),a.jsxs("div",{className:W.modalActions,children:[a.jsxs("button",{type:"button",onClick:()=>{ke(E.reminder_id),gt()},className:`${W.modalButton} ${W.modalButtonDanger}`,children:[a.jsx("i",{className:"fa-solid fa-trash"}),"Delete"]}),a.jsx("button",{type:"button",onClick:gt,className:`${W.modalButton} ${W.modalButtonCancel}`,children:"Cancel"}),a.jsxs("button",{type:"submit",className:`${W.modalButton} ${W.modalButtonSubmit}`,children:[a.jsx("i",{className:"fa-solid fa-save"}),"Update Reminder"]})]})]})]})})}),Ae&&a.jsx("div",{className:W.confirmationDialog,children:a.jsxs("div",{className:W.confirmationContent,children:[a.jsxs("div",{className:W.confirmationHeader,children:[a.jsx("div",{className:W.confirmationIcon,children:a.jsx("i",{className:"fa-solid fa-exclamation-triangle"})}),a.jsx("h3",{children:"Remove All Reminders"})]}),a.jsx("p",{children:"Are you sure you want to remove all reminders? This action cannot be undone."}),a.jsxs("div",{className:W.confirmationButtons,children:[a.jsxs("button",{onClick:()=>R(!1),className:`${W.confirmationButton} ${W.confirmationButtonCancel}`,children:[a.jsx("i",{className:"fa-solid fa-times",style:{marginRight:"0.5rem"}}),"Cancel"]}),a.jsxs("button",{onClick:He,className:`${W.confirmationButton} ${W.confirmationButtonConfirm}`,children:[a.jsx("i",{className:"fa-solid fa-trash",style:{marginRight:"0.5rem"}}),"Remove All"]})]})]})})]}),a.jsx(Ye,{})]})}const $w=()=>{const{isCollapsed:l}=Xd();return V1(),a.jsxs("div",{style:{height:"100vh",background:"#f8f9fa",color:"#3e3f29",display:"flex",overflow:"hidden",backgroundImage:"url(/retailpos/images/backgrounds/appbg3.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.1)",zIndex:0}}),a.jsx(Q1,{}),a.jsxs("main",{style:{flex:1,marginLeft:l?"60px":"160px",padding:"24px",height:"100vh",overflow:"auto",transition:"margin-left 0.3s ease",position:"relative",zIndex:1},children:[a.jsx("div",{style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3},children:a.jsx("img",{src:"/retailpos/images/backgrounds/logo1.png",alt:"Company Logo",style:{height:"120px",width:"auto",objectFit:"contain"}})}),a.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative",zIndex:1},children:a.jsxs(s0,{children:[a.jsx(ia,{path:"/",element:a.jsx(iv,{})}),a.jsx(ia,{path:"/products",element:a.jsx(Io,{children:a.jsx(lv,{})})}),a.jsx(ia,{path:"/sales",element:a.jsx(Io,{requiredPermission:"canProcessSales",children:a.jsx(cv,{})})}),a.jsx(ia,{path:"/side-businesses",element:a.jsx(Io,{children:a.jsx(zS,{})})}),a.jsx(ia,{path:"/transactions",element:a.jsx(Io,{children:a.jsx(IS,{})})}),a.jsx(ia,{path:"/admin",element:a.jsx(PS,{})}),a.jsx(ia,{path:"/reminders",element:a.jsx(qw,{})}),a.jsx(ia,{path:"/transaction/:transactionId",element:a.jsx(US,{})})]})})]})]})};function Pw(){return a.jsx(F1,{children:a.jsx(G1,{children:a.jsx(Y1,{children:a.jsx(E0,{children:a.jsx(K1,{children:a.jsx($w,{})})})})})})}hy.createRoot(document.getElementById("root")).render(a.jsx(gg.StrictMode,{children:a.jsx(Pw,{})}));
